

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/Hexo/img/csdn.png">
  <link rel="icon" href="/Hexo/img/csdn.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#DAA520">
  <meta name="author" content="Êòü">
  <meta name="keywords" content="">
  
    <meta name="description" content="Â≠¶‰π†ÁõÆÊ†á ËÉΩÂ§üËØ¥Âá∫‰ªÄ‰πàÊòØÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ ËÉΩÂ§üÂÆâË£ÖRabbitMQ ËÉΩÂ§üÁºñÂÜôRabbitMQÁöÑÂÖ•Èó®Á®ãÂ∫è ËÉΩÂ§üËØ¥Âá∫RabbitMQÁöÑ5ÁßçÊ®°ÂºèÁâπÂæÅ ËÉΩÂ§ü‰ΩøÁî®SpringÊï¥ÂêàRabbitMQ  1. Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Ê¶ÇËø∞1.1. ‰ªÄ‰πàÊòØÊ∂àÊÅØ‰∏≠Èó¥‰ª∂MQÂÖ®Áß∞‰∏∫Message QueueÔºåÊ∂àÊÅØÈòüÂàóÊòØÂ∫îÁî®Á®ãÂ∫èÂíåÂ∫îÁî®Á®ãÂ∫è‰πãÈó¥ÁöÑÈÄö‰ø°ÊñπÊ≥ï„ÄÇ  ‰∏∫‰ªÄ‰πà‰ΩøÁî®MQ Âú®È°πÁõÆ‰∏≠ÔºåÂèØÂ∞Ü‰∏Ä‰∫õÊó†ÈúÄÂç≥Êó∂ËøîÂõû‰∏îËÄóÊó∂ÁöÑÊìç‰ΩúÊèêÂèñÂá∫Êù•ÔºåËøõË°åÂºÇÊ≠•Â§ÑÁêÜÔºåËÄåËøô">
<meta property="og:type" content="article">
<meta property="og:title" content="RabbitMQÂü∫Á°ÄSkill">
<meta property="og:url" content="https://1902756969.github.io/Hexo/2022/04/12/RabbitMQ%20%E8%AE%B2%E4%B9%89/index.html">
<meta property="og:site_name" content="ÈòøÊòüÁöÑÂçöÂÆ¢">
<meta property="og:description" content="Â≠¶‰π†ÁõÆÊ†á ËÉΩÂ§üËØ¥Âá∫‰ªÄ‰πàÊòØÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ ËÉΩÂ§üÂÆâË£ÖRabbitMQ ËÉΩÂ§üÁºñÂÜôRabbitMQÁöÑÂÖ•Èó®Á®ãÂ∫è ËÉΩÂ§üËØ¥Âá∫RabbitMQÁöÑ5ÁßçÊ®°ÂºèÁâπÂæÅ ËÉΩÂ§ü‰ΩøÁî®SpringÊï¥ÂêàRabbitMQ  1. Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Ê¶ÇËø∞1.1. ‰ªÄ‰πàÊòØÊ∂àÊÅØ‰∏≠Èó¥‰ª∂MQÂÖ®Áß∞‰∏∫Message QueueÔºåÊ∂àÊÅØÈòüÂàóÊòØÂ∫îÁî®Á®ãÂ∫èÂíåÂ∫îÁî®Á®ãÂ∫è‰πãÈó¥ÁöÑÈÄö‰ø°ÊñπÊ≥ï„ÄÇ  ‰∏∫‰ªÄ‰πà‰ΩøÁî®MQ Âú®È°πÁõÆ‰∏≠ÔºåÂèØÂ∞Ü‰∏Ä‰∫õÊó†ÈúÄÂç≥Êó∂ËøîÂõû‰∏îËÄóÊó∂ÁöÑÊìç‰ΩúÊèêÂèñÂá∫Êù•ÔºåËøõË°åÂºÇÊ≠•Â§ÑÁêÜÔºåËÄåËøô">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/04/12/y8QADPrfG4oIlxZ.png">
<meta property="article:published_time" content="2022-04-12T12:29:54.000Z">
<meta property="article:modified_time" content="2022-05-03T13:20:01.619Z">
<meta property="article:author" content="Êòü">
<meta property="article:tag" content="RabbitMQ">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://s2.loli.net/2022/04/12/y8QADPrfG4oIlxZ.png">
  
  
  <title>RabbitMQÂü∫Á°ÄSkill - ÈòøÊòüÁöÑÂçöÂÆ¢</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ‰∏ªÈ¢ò‰æùËµñÁöÑÂõæÊ†áÂ∫ìÔºå‰∏çË¶ÅËá™Ë°å‰øÆÊîπ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/Hexo/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/Hexo/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/Hexo/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"1902756969.github.io","root":"/Hexo/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":" ‚ù°"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/Hexo/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/Hexo/js/utils.js" ></script>
  <script  src="/Hexo/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/Hexo/">
      <strong>üêõ ZhaFi‰∫∫</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/">
                <i class="iconfont icon-home-fill"></i>
                È¶ñÈ°µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/archives/">
                <i class="iconfont icon-archive-fill"></i>
                ÂΩíÊ°£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/categories/">
                <i class="iconfont icon-category-fill"></i>
                ÂàÜÁ±ª
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Ê†áÁ≠æ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/about/">
                <i class="iconfont icon-user-fill"></i>
                ÂÖ≥‰∫é
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/links/">
                <i class="iconfont icon-link-fill"></i>
                ÂèãÈìæ
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/Hexo/img/bg5.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="RabbitMQÂü∫Á°ÄSkill"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Êòü
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-04-12 20:29" pubdate>
          2022Âπ¥4Êúà12Êó• Êôö‰∏ä
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          50k Â≠ó
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          416 ÂàÜÈíü
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> Ê¨°
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">RabbitMQÂü∫Á°ÄSkill</h1>
            
            <div class="markdown-body">
              
              <h1 id="Â≠¶‰π†ÁõÆÊ†á"><a href="#Â≠¶‰π†ÁõÆÊ†á" class="headerlink" title="Â≠¶‰π†ÁõÆÊ†á"></a>Â≠¶‰π†ÁõÆÊ†á</h1><ul>
<li>ËÉΩÂ§üËØ¥Âá∫‰ªÄ‰πàÊòØÊ∂àÊÅØ‰∏≠Èó¥‰ª∂</li>
<li>ËÉΩÂ§üÂÆâË£ÖRabbitMQ</li>
<li>ËÉΩÂ§üÁºñÂÜôRabbitMQÁöÑÂÖ•Èó®Á®ãÂ∫è</li>
<li>ËÉΩÂ§üËØ¥Âá∫RabbitMQÁöÑ5ÁßçÊ®°ÂºèÁâπÂæÅ</li>
<li>ËÉΩÂ§ü‰ΩøÁî®SpringÊï¥ÂêàRabbitMQ</li>
</ul>
<h1 id="1-Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Ê¶ÇËø∞"><a href="#1-Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Ê¶ÇËø∞" class="headerlink" title="1. Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Ê¶ÇËø∞"></a>1. Ê∂àÊÅØ‰∏≠Èó¥‰ª∂Ê¶ÇËø∞</h1><h2 id="1-1-‰ªÄ‰πàÊòØÊ∂àÊÅØ‰∏≠Èó¥‰ª∂"><a href="#1-1-‰ªÄ‰πàÊòØÊ∂àÊÅØ‰∏≠Èó¥‰ª∂" class="headerlink" title="1.1. ‰ªÄ‰πàÊòØÊ∂àÊÅØ‰∏≠Èó¥‰ª∂"></a>1.1. ‰ªÄ‰πàÊòØÊ∂àÊÅØ‰∏≠Èó¥‰ª∂</h2><p>MQÂÖ®Áß∞‰∏∫Message QueueÔºåÊ∂àÊÅØÈòüÂàóÊòØÂ∫îÁî®Á®ãÂ∫èÂíåÂ∫îÁî®Á®ãÂ∫è‰πãÈó¥ÁöÑÈÄö‰ø°ÊñπÊ≥ï„ÄÇ</p>
<ul>
<li><p>‰∏∫‰ªÄ‰πà‰ΩøÁî®MQ</p>
<p>Âú®È°πÁõÆ‰∏≠ÔºåÂèØÂ∞Ü‰∏Ä‰∫õÊó†ÈúÄÂç≥Êó∂ËøîÂõû‰∏îËÄóÊó∂ÁöÑÊìç‰ΩúÊèêÂèñÂá∫Êù•ÔºåËøõË°å<strong>ÂºÇÊ≠•Â§ÑÁêÜ</strong>ÔºåËÄåËøôÁßçÂºÇÊ≠•Â§ÑÁêÜÁöÑÊñπÂºèÂ§ßÂ§ßÁöÑËäÇÁúÅ‰∫ÜÊúçÂä°Âô®ÁöÑËØ∑Ê±ÇÂìçÂ∫îÊó∂Èó¥Ôºå‰ªéËÄå<strong>ÊèêÈ´ò</strong>‰∫Ü<strong>Á≥ªÁªü</strong>ÁöÑ<strong>ÂêûÂêêÈáè</strong>„ÄÇ</p>
</li>
<li><p>ÂºÄÂèë‰∏≠Ê∂àÊÅØÈòüÂàóÈÄöÂ∏∏ÊúâÂ¶Ç‰∏ãÂ∫îÁî®Âú∫ÊôØÔºö</p>
<p>1„ÄÅ‰ªªÂä°<strong>ÂºÇÊ≠•</strong>Â§ÑÁêÜ</p>
<p>Â∞Ü‰∏çÈúÄË¶ÅÂêåÊ≠•Â§ÑÁêÜÁöÑÂπ∂‰∏îËÄóÊó∂ÈïøÁöÑÊìç‰ΩúÁî±Ê∂àÊÅØÈòüÂàóÈÄöÁü•Ê∂àÊÅØÊé•Êî∂ÊñπËøõË°åÂºÇÊ≠•Â§ÑÁêÜ„ÄÇÊèêÈ´ò‰∫ÜÂ∫îÁî®Á®ãÂ∫èÁöÑÂìçÂ∫îÊó∂Èó¥„ÄÇ</p>
<p>2„ÄÅÂ∫îÁî®Á®ãÂ∫è<strong>Ëß£ËÄ¶Âêà</strong></p>
<p>MQÁõ∏ÂΩì‰∫é‰∏Ä‰∏™‰∏≠‰ªãÔºåÁîü‰∫ßÊñπÈÄöËøáMQ‰∏éÊ∂àË¥πÊñπ‰∫§‰∫íÔºåÂÆÉÂ∞ÜÂ∫îÁî®Á®ãÂ∫èËøõË°åËß£ËÄ¶Âêà„ÄÇ</p>
<p>3„ÄÅ<strong>ÂâäÂ≥∞Â°´Ë∞∑</strong></p>
<p>Â¶ÇËÆ¢ÂçïÁ≥ªÁªüÔºåÂú®‰∏ãÂçïÁöÑÊó∂ÂÄôÂ∞±‰ºöÂæÄÊï∞ÊçÆÂ∫ìÂÜôÊï∞ÊçÆ„ÄÇ‰ΩÜÊòØÊï∞ÊçÆÂ∫ìÂè™ËÉΩÊîØÊíëÊØèÁßí1000Â∑¶Âè≥ÁöÑÂπ∂ÂèëÂÜôÂÖ•ÔºåÂπ∂ÂèëÈáèÂÜçÈ´òÂ∞±ÂÆπÊòìÂÆïÊú∫„ÄÇ‰ΩéÂ≥∞ÊúüÁöÑÊó∂ÂÄôÂπ∂Âèë‰πüÂ∞±100Â§ö‰∏™Ôºå‰ΩÜÊòØÂú®È´òÂ≥∞ÊúüÊó∂ÂÄôÔºåÂπ∂ÂèëÈáè‰ºöÁ™ÅÁÑ∂ÊøÄÂ¢ûÂà∞5000‰ª•‰∏äÔºåËøô‰∏™Êó∂ÂÄôÊï∞ÊçÆÂ∫ìËÇØÂÆöÂç°Ê≠ª‰∫Ü„ÄÇ</p>
<p><img src="https://s2.loli.net/2022/05/03/K5Py9o4pIaCjgit.png" srcset="/Hexo/img/loading.gif" lazyload alt="image-20220503133111986"></p>
<p>Ê∂àÊÅØË¢´MQ‰øùÂ≠òËµ∑Êù•‰∫ÜÔºåÁÑ∂ÂêéÁ≥ªÁªüÂ∞±ÂèØ‰ª•ÊåâÁÖßËá™Â∑±ÁöÑÊ∂àË¥πËÉΩÂäõÊù•Ê∂àË¥πÔºåÊØîÂ¶ÇÊØèÁßí1000‰∏™Êï∞ÊçÆÔºåËøôÊ†∑ÊÖ¢ÊÖ¢ÂÜôÂÖ•Êï∞ÊçÆÂ∫ìÔºåËøôÊ†∑Â∞±‰∏ç‰ºöÂç°Ê≠ªÊï∞ÊçÆÂ∫ì‰∫Ü„ÄÇ</p>
<p><img src="https://s2.loli.net/2022/05/03/m7gbCsQAcIXhLet.png" srcset="/Hexo/img/loading.gif" lazyload alt="image-20220503133157833"></p>
<p>‰ΩÜÊòØ‰ΩøÁî®‰∫ÜMQ‰πãÂêéÔºåÈôêÂà∂Ê∂àË¥πÊ∂àÊÅØÁöÑÈÄüÂ∫¶‰∏∫1000Ôºå‰ΩÜÊòØËøôÊ†∑‰∏ÄÊù•ÔºåÈ´òÂ≥∞Êúü‰∫ßÁîüÁöÑÊï∞ÊçÆÂäøÂøÖ‰ºöË¢´ÁßØÂéãÂú®MQ‰∏≠ÔºåÈ´òÂ≥∞Â∞±Ë¢´‚ÄúÂâä‚ÄùÊéâ‰∫Ü„ÄÇ‰ΩÜÊòØÂõ†‰∏∫Ê∂àÊÅØÁßØÂéãÔºåÂú®È´òÂ≥∞ÊúüËøáÂêéÁöÑ‰∏ÄÊÆµÊó∂Èó¥ÂÜÖÔºåÊ∂àË¥πÊ∂àÊÅØÁöÑÈÄüÂ∫¶ËøòÊòØ‰ºöÁª¥ÊåÅÂú®1000QPSÔºåÁõ¥Âà∞Ê∂àË¥πÂÆåÁßØÂéãÁöÑÊ∂àÊÅØ,ËøôÂ∞±Âè´ÂÅö‚ÄúÂ°´Ë∞∑‚Äù</p>
<p><img src="https://s2.loli.net/2022/04/11/L9dpNX3S6VZqnmG.png" srcset="/Hexo/img/loading.gif" lazyload></p>
</li>
</ul>
<h2 id="1-2-AMQP-Âíå-JMS"><a href="#1-2-AMQP-Âíå-JMS" class="headerlink" title="1.2. AMQP Âíå JMS"></a>1.2. AMQP Âíå JMS</h2><p>MQÊòØÊ∂àÊÅØÈÄö‰ø°ÁöÑÊ®°ÂûãÔºõÂÆûÁé∞MQÁöÑÂ§ßËá¥Êúâ‰∏§Áßç‰∏ªÊµÅÊñπÂºèÔºöAMQP„ÄÅJMS„ÄÇ</p>
<h3 id="1-2-1-AMQP"><a href="#1-2-1-AMQP" class="headerlink" title="1.2.1. AMQP"></a>1.2.1. AMQP</h3><p>AMQPÊòØ‰∏ÄÁßçÂçèËÆÆÔºåÊõ¥ÂáÜÁ°ÆÁöÑËØ¥ÊòØ‰∏ÄÁßçbinary wire-level protocolÔºàÈìæÊé•ÂçèËÆÆÔºâ„ÄÇËøôÊòØÂÖ∂ÂíåJMSÁöÑÊú¨Ë¥®Â∑ÆÂà´ÔºåAMQP‰∏ç‰ªéAPIÂ±ÇËøõË°åÈôêÂÆöÔºåËÄåÊòØÁõ¥Êé•ÂÆö‰πâÁΩëÁªú‰∫§Êç¢ÁöÑÊï∞ÊçÆÊ†ºÂºè„ÄÇ</p>
<h3 id="1-2-2-JMS"><a href="#1-2-2-JMS" class="headerlink" title="1.2.2. JMS"></a>1.2.2. JMS</h3><p>JMSÂç≥JavaÊ∂àÊÅØÊúçÂä°ÔºàJavaMessage ServiceÔºâÂ∫îÁî®Á®ãÂ∫èÊé•Âè£ÔºåÊòØ‰∏Ä‰∏™JavaÂπ≥Âè∞‰∏≠ÂÖ≥‰∫éÈù¢ÂêëÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºàMOMÔºâÁöÑAPIÔºåÁî®‰∫éÂú®‰∏§‰∏™Â∫îÁî®Á®ãÂ∫è‰πãÈó¥ÔºåÊàñÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÂèëÈÄÅÊ∂àÊÅØÔºåËøõË°åÂºÇÊ≠•ÈÄö‰ø°„ÄÇ</p>
<h3 id="1-2-3-AMQP-‰∏é-JMS-Âå∫Âà´"><a href="#1-2-3-AMQP-‰∏é-JMS-Âå∫Âà´" class="headerlink" title="1.2.3. AMQP ‰∏é JMS Âå∫Âà´"></a>1.2.3. AMQP ‰∏é JMS Âå∫Âà´</h3><ul>
<li>JMSÊòØÂÆö‰πâ‰∫ÜÁªü‰∏ÄÁöÑÊé•Âè£ÔºåÊù•ÂØπÊ∂àÊÅØÊìç‰ΩúËøõË°åÁªü‰∏ÄÔºõAMQPÊòØÈÄöËøáËßÑÂÆöÂçèËÆÆÊù•Áªü‰∏ÄÊï∞ÊçÆ‰∫§‰∫íÁöÑÊ†ºÂºè</li>
<li>JMSÈôêÂÆö‰∫ÜÂøÖÈ°ª‰ΩøÁî®JavaËØ≠Ë®ÄÔºõAMQPÂè™ÊòØÂçèËÆÆÔºå‰∏çËßÑÂÆöÂÆûÁé∞ÊñπÂºèÔºåÂõ†Ê≠§ÊòØË∑®ËØ≠Ë®ÄÁöÑ„ÄÇ</li>
<li>JMSËßÑÂÆö‰∫Ü‰∏§ÁßçÊ∂àÊÅØÊ®°ÂºèÔºõËÄåAMQPÁöÑÊ∂àÊÅØÊ®°ÂºèÊõ¥Âä†‰∏∞ÂØå</li>
</ul>
<h2 id="1-3-Ê∂àÊÅØÈòüÂàó‰∫ßÂìÅ"><a href="#1-3-Ê∂àÊÅØÈòüÂàó‰∫ßÂìÅ" class="headerlink" title="1.3. Ê∂àÊÅØÈòüÂàó‰∫ßÂìÅ"></a>1.3. Ê∂àÊÅØÈòüÂàó‰∫ßÂìÅ</h2><p>Â∏ÇÂú∫‰∏äÂ∏∏ËßÅÁöÑÊ∂àÊÅØÈòüÂàóÊúâÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>ActiveMQÔºöÂü∫‰∫éJMS</li>
<li>ZeroMQÔºöÂü∫‰∫éCËØ≠Ë®ÄÂºÄÂèë</li>
<li>RabbitMQÔºöÂü∫‰∫éAMQPÂçèËÆÆÔºåerlangËØ≠Ë®ÄÂºÄÂèëÔºåÁ®≥ÂÆöÊÄßÂ•Ω</li>
<li>RocketMQÔºöÂü∫‰∫éJMSÔºåÈòøÈáåÂ∑¥Â∑¥‰∫ßÂìÅ</li>
<li>KafkaÔºöÁ±ª‰ººMQÁöÑ‰∫ßÂìÅÔºõÂàÜÂ∏ÉÂºèÊ∂àÊÅØÁ≥ªÁªüÔºåÈ´òÂêûÂêêÈáè</li>
</ul>
<h2 id="1-4-RabbitMQ"><a href="#1-4-RabbitMQ" class="headerlink" title="1.4. RabbitMQ"></a>1.4. RabbitMQ</h2><p>RabbitMQÊòØÁî±erlangËØ≠Ë®ÄÂºÄÂèëÔºåÂü∫‰∫éAMQPÔºàAdvanced Message Queue È´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆÔºâÂçèËÆÆÂÆûÁé∞ÁöÑÊ∂àÊÅØÈòüÂàóÔºåÂÆÉÊòØ‰∏ÄÁßçÂ∫îÁî®Á®ãÂ∫è‰πãÈó¥ÁöÑÈÄö‰ø°ÊñπÊ≥ïÔºåÊ∂àÊÅØÈòüÂàóÂú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂºÄÂèë‰∏≠Â∫îÁî®ÈùûÂ∏∏ÂπøÊ≥õ„ÄÇ</p>
<p>RabbitMQÂÆòÊñπÂú∞ÂùÄÔºö<a target="_blank" rel="noopener" href="http://www.rabbitmq.com/">http://www.rabbitmq.com/</a></p>
<p>RabbitMQÊèê‰æõ‰∫Ü6ÁßçÊ®°ÂºèÔºöÁÆÄÂçïÊ®°ÂºèÔºåworkÊ®°ÂºèÔºåPublish&#x2F;SubscribeÂèëÂ∏É‰∏éËÆ¢ÈòÖÊ®°ÂºèÔºåRoutingË∑ØÁî±Ê®°ÂºèÔºåTopics‰∏ªÈ¢òÊ®°ÂºèÔºåRPCËøúÁ®ãË∞ÉÁî®Ê®°ÂºèÔºàËøúÁ®ãË∞ÉÁî®Ôºå‰∏çÂ§™ÁÆóMQÔºõÊöÇ‰∏ç‰Ωú‰ªãÁªçÔºâÔºõ</p>
<p>ÂÆòÁΩëÂØπÂ∫îÊ®°Âºè‰ªãÁªçÔºö<a target="_blank" rel="noopener" href="https://www.rabbitmq.com/getstarted.html">https://www.rabbitmq.com/getstarted.html</a></p>
<p><img src="https://s2.loli.net/2022/04/11/86aGA127X5meO3R.png" srcset="/Hexo/img/loading.gif" lazyload alt="1555988678324"></p>
<h1 id="2-ÂÆâË£ÖÂèäÈÖçÁΩÆRabbitMQ"><a href="#2-ÂÆâË£ÖÂèäÈÖçÁΩÆRabbitMQ" class="headerlink" title="2. ÂÆâË£ÖÂèäÈÖçÁΩÆRabbitMQ"></a>2. ÂÆâË£ÖÂèäÈÖçÁΩÆRabbitMQ</h1><p>ËØ¶ÁªÜÊü•Áúã <code>ËµÑÊñô/ËΩØ‰ª∂/ÂÆâË£ÖRabbitMQ.md</code> ÊñáÊ°£„ÄÇ</p>
<h1 id="3-RabbitMQÂÖ•Èó®"><a href="#3-RabbitMQÂÖ•Èó®" class="headerlink" title="3. RabbitMQÂÖ•Èó®"></a>3. RabbitMQÂÖ•Èó®</h1><h2 id="3-1-Êê≠Âª∫Á§∫‰æãÂ∑•Á®ã"><a href="#3-1-Êê≠Âª∫Á§∫‰æãÂ∑•Á®ã" class="headerlink" title="3.1. Êê≠Âª∫Á§∫‰æãÂ∑•Á®ã"></a>3.1. Êê≠Âª∫Á§∫‰æãÂ∑•Á®ã</h2><h3 id="3-1-1-ÂàõÂª∫Â∑•Á®ã"><a href="#3-1-1-ÂàõÂª∫Â∑•Á®ã" class="headerlink" title="3.1.1. ÂàõÂª∫Â∑•Á®ã"></a>3.1.1. ÂàõÂª∫Â∑•Á®ã</h3><p><img src="https://s2.loli.net/2022/04/11/IufhzWiNbQFVGoA.png" srcset="/Hexo/img/loading.gif" lazyload alt="1555991321159"></p>
<p><img src="https://s2.loli.net/2022/04/11/ioXWN7I1F2hfEk8.png" srcset="/Hexo/img/loading.gif" lazyload alt="1555991353704"></p>
<h3 id="3-1-2-Ê∑ªÂä†‰æùËµñ"><a href="#3-1-2-Ê∑ªÂä†‰æùËµñ" class="headerlink" title="3.1.2. Ê∑ªÂä†‰æùËµñ"></a>3.1.2. Ê∑ªÂä†‰æùËµñ</h3><p>ÂæÄheima-rabbitmqÁöÑpom.xmlÊñá‰ª∂‰∏≠Ê∑ªÂä†Â¶Ç‰∏ã‰æùËµñÔºö</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.rabbitmq<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>amqp-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.6.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h2 id="3-2-ÁºñÂÜôÁîü‰∫ßËÄÖ"><a href="#3-2-ÁºñÂÜôÁîü‰∫ßËÄÖ" class="headerlink" title="3.2. ÁºñÂÜôÁîü‰∫ßËÄÖ"></a>3.2. ÁºñÂÜôÁîü‰∫ßËÄÖ</h2><p>ÁºñÂÜôÊ∂àÊÅØÁîü‰∫ßËÄÖcom.itheima.rabbitmq.simple.Producer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.simple;<br><br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.ConnectionFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">QUEUE_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;simple_queue&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//ÂàõÂª∫ËøûÊé•Â∑•ÂéÇ</span><br>        <span class="hljs-type">ConnectionFactory</span> <span class="hljs-variable">connectionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionFactory</span>();<br>        <span class="hljs-comment">//‰∏ªÊú∫Âú∞ÂùÄ;ÈªòËÆ§‰∏∫ localhost</span><br>        connectionFactory.setHost(<span class="hljs-string">&quot;localhost&quot;</span>);<br>        <span class="hljs-comment">//ËøûÊé•Á´ØÂè£;ÈªòËÆ§‰∏∫ 5672</span><br>        connectionFactory.setPort(<span class="hljs-number">5672</span>);<br>        <span class="hljs-comment">//ËôöÊãü‰∏ªÊú∫ÂêçÁß∞;ÈªòËÆ§‰∏∫ /</span><br>        connectionFactory.setVirtualHost(<span class="hljs-string">&quot;/itcast&quot;</span>);<br>        <span class="hljs-comment">//ËøûÊé•Áî®Êà∑ÂêçÔºõÈªòËÆ§‰∏∫guest</span><br>        connectionFactory.setUsername(<span class="hljs-string">&quot;heima&quot;</span>);<br>        <span class="hljs-comment">//ËøûÊé•ÂØÜÁ†ÅÔºõÈªòËÆ§‰∏∫guest</span><br>        connectionFactory.setPassword(<span class="hljs-string">&quot;heima&quot;</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫ËøûÊé•</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> connectionFactory.newConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">// Ë¶ÅÂèëÈÄÅÁöÑ‰ø°ÊÅØ</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;‰Ω†Â•ΩÔºõÂ∞èÂÖîÂ≠êÔºÅ&quot;</span>;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂàô‰ΩøÁî®ÈªòËÆ§Default Exchage</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöË∑ØÁî±key,ÁÆÄÂçïÊ®°ÂºèÂèØ‰ª•‰º†ÈÄíÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÂÖ∂ÂÆÉÂ±ûÊÄß</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊ∂àÊÅØÂÜÖÂÆπ</span><br><span class="hljs-comment">         */</span><br>        channel.basicPublish(<span class="hljs-string">&quot;&quot;</span>, QUEUE_NAME, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;Â∑≤ÂèëÈÄÅÊ∂àÊÅØÔºö&quot;</span> + message);<br><br>        <span class="hljs-comment">// ÂÖ≥Èó≠ËµÑÊ∫ê</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<p>Âú®ÊâßË°å‰∏äËø∞ÁöÑÊ∂àÊÅØÂèëÈÄÅ‰πãÂêéÔºõÂèØ‰ª•ÁôªÂΩïrabbitMQÁöÑÁÆ°ÁêÜÊéßÂà∂Âè∞ÔºåÂèØ‰ª•ÂèëÁé∞ÈòüÂàóÂíåÂÖ∂Ê∂àÊÅØÔºö</p>
<p><img src="https://s2.loli.net/2022/04/11/BMCSIDwXjUZLNm1.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556006638979"></p>
<p><img src="https://s2.loli.net/2022/04/11/slZICz69tMkDhLu.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556006647177"></p>
<h2 id="3-3-ÁºñÂÜôÊ∂àË¥πËÄÖ"><a href="#3-3-ÁºñÂÜôÊ∂àË¥πËÄÖ" class="headerlink" title="3.3. ÁºñÂÜôÊ∂àË¥πËÄÖ"></a>3.3. ÁºñÂÜôÊ∂àË¥πËÄÖ</h2><p>ÊäΩÂèñÂàõÂª∫connectionÁöÑÂ∑•ÂÖ∑Á±ªcom.itheima.rabbitmq.util.ConnectionUtilÔºõ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.util;<br><br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.ConnectionFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionUtil</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//ÂàõÂª∫ËøûÊé•Â∑•ÂéÇ</span><br>        <span class="hljs-type">ConnectionFactory</span> <span class="hljs-variable">connectionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionFactory</span>();<br>        <span class="hljs-comment">//‰∏ªÊú∫Âú∞ÂùÄ;ÈªòËÆ§‰∏∫ localhost</span><br>        connectionFactory.setHost(<span class="hljs-string">&quot;localhost&quot;</span>);<br>        <span class="hljs-comment">//ËøûÊé•Á´ØÂè£;ÈªòËÆ§‰∏∫ 5672</span><br>        connectionFactory.setPort(<span class="hljs-number">5672</span>);<br>        <span class="hljs-comment">//ËôöÊãü‰∏ªÊú∫ÂêçÁß∞;ÈªòËÆ§‰∏∫ /</span><br>        connectionFactory.setVirtualHost(<span class="hljs-string">&quot;/itcast&quot;</span>);<br>        <span class="hljs-comment">//ËøûÊé•Áî®Êà∑ÂêçÔºõÈªòËÆ§‰∏∫guest</span><br>        connectionFactory.setUsername(<span class="hljs-string">&quot;heima&quot;</span>);<br>        <span class="hljs-comment">//ËøûÊé•ÂØÜÁ†ÅÔºõÈªòËÆ§‰∏∫guest</span><br>        connectionFactory.setPassword(<span class="hljs-string">&quot;heima&quot;</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫ËøûÊé•</span><br>        <span class="hljs-keyword">return</span> connectionFactory.newConnection();<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>



<p>ÁºñÂÜôÊ∂àÊÅØÁöÑÊ∂àË¥πËÄÖcom.itheima.rabbitmq.simple.Consumer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.simple;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫Ê∂àË¥πËÄÖÔºõÂπ∂ËÆæÁΩÆÊ∂àÊÅØÂ§ÑÁêÜ</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag Ê∂àÊÅØËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span><br><span class="hljs-comment">             * envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span><br><span class="hljs-comment">             * properties Â±ûÊÄß‰ø°ÊÅØ</span><br><span class="hljs-comment">             * body Ê∂àÊÅØ</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//Ë∑ØÁî±key</span><br>                System.out.println(<span class="hljs-string">&quot;Ë∑ØÁî±key‰∏∫Ôºö&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//‰∫§Êç¢Êú∫</span><br>                System.out.println(<span class="hljs-string">&quot;‰∫§Êç¢Êú∫‰∏∫Ôºö&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//Ê∂àÊÅØid</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àÊÅØid‰∏∫Ôºö&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br>                System.out.println(<span class="hljs-string">&quot;Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶Ëá™Âä®Á°ÆËÆ§ÔºåËÆæÁΩÆ‰∏∫true‰∏∫Ë°®Á§∫Ê∂àÊÅØÊé•Êî∂Âà∞Ëá™Âä®ÂêëmqÂõûÂ§çÊé•Êî∂Âà∞‰∫ÜÔºåmqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØÔºåËÆæÁΩÆ‰∏∫falseÂàôÈúÄË¶ÅÊâãÂä®Á°ÆËÆ§</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÊé•Êî∂Âà∞ÂêéÂõûË∞É</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.QUEUE_NAME, <span class="hljs-literal">true</span>, consumer);<br><br>        <span class="hljs-comment">//‰∏çÂÖ≥Èó≠ËµÑÊ∫êÔºåÂ∫îËØ•‰∏ÄÁõ¥ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">//channel.close();</span><br>        <span class="hljs-comment">//connection.close();</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="3-4-Â∞èÁªì"><a href="#3-4-Â∞èÁªì" class="headerlink" title="3.4. Â∞èÁªì"></a>3.4. Â∞èÁªì</h2><p>‰∏äËø∞ÁöÑÂÖ•Èó®Ê°à‰æã‰∏≠‰∏≠ÂÖ∂ÂÆû‰ΩøÁî®ÁöÑÊòØÂ¶Ç‰∏ãÁöÑÁÆÄÂçïÊ®°ÂºèÔºö</p>
<p><img src="https://s2.loli.net/2022/04/11/LTw38uxCQUlMqSg.png" srcset="/Hexo/img/loading.gif" lazyload alt="1555991074575"></p>
<p>Âú®‰∏äÂõæÁöÑÊ®°Âûã‰∏≠ÔºåÊúâ‰ª•‰∏ãÊ¶ÇÂøµÔºö</p>
<ul>
<li>PÔºöÁîü‰∫ßËÄÖÔºå‰πüÂ∞±ÊòØË¶ÅÂèëÈÄÅÊ∂àÊÅØÁöÑÁ®ãÂ∫è</li>
<li>CÔºöÊ∂àË¥πËÄÖÔºöÊ∂àÊÅØÁöÑÊé•ÂèóËÄÖÔºå‰ºö‰∏ÄÁõ¥Á≠âÂæÖÊ∂àÊÅØÂà∞Êù•„ÄÇ</li>
<li>queueÔºöÊ∂àÊÅØÈòüÂàóÔºåÂõæ‰∏≠Á∫¢Ëâ≤ÈÉ®ÂàÜ„ÄÇÁ±ª‰ºº‰∏Ä‰∏™ÈÇÆÁÆ±ÔºåÂèØ‰ª•ÁºìÂ≠òÊ∂àÊÅØÔºõÁîü‰∫ßËÄÖÂêëÂÖ∂‰∏≠ÊäïÈÄíÊ∂àÊÅØÔºåÊ∂àË¥πËÄÖ‰ªéÂÖ∂‰∏≠ÂèñÂá∫Ê∂àÊÅØ„ÄÇ</li>
</ul>
<h1 id="4-AMQP"><a href="#4-AMQP" class="headerlink" title="4. AMQP"></a>4. AMQP</h1><h2 id="4-1-Áõ∏ÂÖ≥Ê¶ÇÂøµ‰ªãÁªç"><a href="#4-1-Áõ∏ÂÖ≥Ê¶ÇÂøµ‰ªãÁªç" class="headerlink" title="4.1. Áõ∏ÂÖ≥Ê¶ÇÂøµ‰ªãÁªç"></a>4.1. Áõ∏ÂÖ≥Ê¶ÇÂøµ‰ªãÁªç</h2><p>AMQP  ‰∏Ä‰∏™Êèê‰æõÁªü‰∏ÄÊ∂àÊÅØÊúçÂä°ÁöÑÂ∫îÁî®Â±ÇÊ†áÂáÜÈ´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆÔºåÊòØÂ∫îÁî®Â±ÇÂçèËÆÆÁöÑ‰∏Ä‰∏™ÂºÄÊîæÊ†áÂáÜÔºå‰∏∫Èù¢ÂêëÊ∂àÊÅØÁöÑ‰∏≠Èó¥‰ª∂ËÆæËÆ°„ÄÇ</p>
<p>AMQPÊòØ‰∏Ä‰∏™‰∫åËøõÂà∂ÂçèËÆÆÔºåÊã•Êúâ‰∏Ä‰∫õÁé∞‰ª£ÂåñÁâπÁÇπÔºöÂ§ö‰ø°ÈÅì„ÄÅÂçèÂïÜÂºèÔºåÂºÇÊ≠•ÔºåÂÆâÂÖ®ÔºåÊâ©Âπ≥Âè∞Ôºå‰∏≠Á´ãÔºåÈ´òÊïà„ÄÇ</p>
<p>RabbitMQÊòØAMQPÂçèËÆÆÁöÑErlangÁöÑÂÆûÁé∞„ÄÇ</p>
<table>
<thead>
<tr>
<th>Ê¶ÇÂøµ</th>
<th>ËØ¥Êòé</th>
</tr>
</thead>
<tbody><tr>
<td>ËøûÊé•Connection</td>
<td>‰∏Ä‰∏™ÁΩëÁªúËøûÊé•ÔºåÊØîÂ¶ÇTCP&#x2F;IPÂ•óÊé•Â≠óËøûÊé•„ÄÇ</td>
</tr>
<tr>
<td>‰ºöËØùSession</td>
<td>Á´ØÁÇπ‰πãÈó¥ÁöÑÂëΩÂêçÂØπËØù„ÄÇÂú®‰∏Ä‰∏™‰ºöËØù‰∏ä‰∏ãÊñá‰∏≠Ôºå‰øùËØÅ‚ÄúÊÅ∞Â•Ω‰º†ÈÄí‰∏ÄÊ¨°‚Äù„ÄÇ</td>
</tr>
<tr>
<td>‰ø°ÈÅìChannel</td>
<td>Â§öË∑ØÂ§çÁî®ËøûÊé•‰∏≠ÁöÑ‰∏ÄÊù°Áã¨Á´ãÁöÑÂèåÂêëÊï∞ÊçÆÊµÅÈÄöÈÅì„ÄÇ‰∏∫‰ºöËØùÊèê‰æõÁâ©ÁêÜ‰º†Ëæì‰ªãË¥®„ÄÇ</td>
</tr>
<tr>
<td>ÂÆ¢Êà∑Á´ØClient</td>
<td>AMQPËøûÊé•ÊàñËÄÖ‰ºöËØùÁöÑÂèëËµ∑ËÄÖ„ÄÇAMQPÊòØÈùûÂØπÁß∞ÁöÑÔºåÂÆ¢Êà∑Á´ØÁîü‰∫ßÂíåÊ∂àË¥πÊ∂àÊÅØÔºåÊúçÂä°Âô®Â≠òÂÇ®ÂíåË∑ØÁî±Ëøô‰∫õÊ∂àÊÅØ„ÄÇ</td>
</tr>
<tr>
<td>ÊúçÂä°ËäÇÁÇπBroker</td>
<td>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂ÁöÑÊúçÂä°ËäÇÁÇπÔºõ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÂèØ‰ª•Â∞Ü‰∏Ä‰∏™RabbitMQ BrokerÁúã‰Ωú‰∏ÄÂè∞RabbitMQ ÊúçÂä°Âô®„ÄÇ</td>
</tr>
<tr>
<td>Á´ØÁÇπ</td>
<td>AMQPÂØπËØùÁöÑ‰ªªÊÑè‰∏ÄÊñπ„ÄÇ‰∏Ä‰∏™AMQPËøûÊé•ÂåÖÊã¨‰∏§‰∏™Á´ØÁÇπÔºà‰∏Ä‰∏™ÊòØÂÆ¢Êà∑Á´ØÔºå‰∏Ä‰∏™ÊòØÊúçÂä°Âô®Ôºâ„ÄÇ</td>
</tr>
<tr>
<td>Ê∂àË¥πËÄÖConsumer</td>
<td>‰∏Ä‰∏™‰ªéÊ∂àÊÅØÈòüÂàóÈáåËØ∑Ê±ÇÊ∂àÊÅØÁöÑÂÆ¢Êà∑Á´ØÁ®ãÂ∫è„ÄÇ</td>
</tr>
<tr>
<td>Áîü‰∫ßËÄÖProducer</td>
<td>‰∏Ä‰∏™Âêë‰∫§Êç¢Êú∫ÂèëÂ∏ÉÊ∂àÊÅØÁöÑÂÆ¢Êà∑Á´ØÂ∫îÁî®Á®ãÂ∫è„ÄÇ</td>
</tr>
</tbody></table>
<h2 id="4-2-RabbitMQËøêËΩ¨ÊµÅÁ®ã"><a href="#4-2-RabbitMQËøêËΩ¨ÊµÅÁ®ã" class="headerlink" title="4.2. RabbitMQËøêËΩ¨ÊµÅÁ®ã"></a>4.2. RabbitMQËøêËΩ¨ÊµÅÁ®ã</h2><p>Âú®ÂÖ•Èó®Ê°à‰æã‰∏≠Ôºö</p>
<ul>
<li>Áîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØ<ol>
<li>Áîü‰∫ßËÄÖÂàõÂª∫ËøûÊé•ÔºàConnectionÔºâÔºåÂºÄÂêØ‰∏Ä‰∏™‰ø°ÈÅìÔºàChannelÔºâÔºåËøûÊé•Âà∞RabbitMQ BrokerÔºõ</li>
<li>Â£∞ÊòéÈòüÂàóÂπ∂ËÆæÁΩÆÂ±ûÊÄßÔºõÂ¶ÇÊòØÂê¶ÊéíÂÆÉÔºåÊòØÂê¶ÊåÅ‰πÖÂåñÔºåÊòØÂê¶Ëá™Âä®Âà†Èô§Ôºõ</li>
<li>Â∞ÜË∑ØÁî±ÈîÆÔºàÁ©∫Â≠óÁ¨¶‰∏≤Ôºâ‰∏éÈòüÂàóÁªëÂÆöËµ∑Êù•Ôºõ</li>
<li>ÂèëÈÄÅÊ∂àÊÅØËá≥RabbitMQ BrokerÔºõ</li>
<li>ÂÖ≥Èó≠‰ø°ÈÅìÔºõ</li>
<li>ÂÖ≥Èó≠ËøûÊé•Ôºõ</li>
</ol>
</li>
<li>Ê∂àË¥πËÄÖÊé•Êî∂Ê∂àÊÅØ<ol>
<li>Ê∂àË¥πËÄÖÂàõÂª∫ËøûÊé•ÔºàConnectionÔºâÔºåÂºÄÂêØ‰∏Ä‰∏™‰ø°ÈÅìÔºàChannelÔºâÔºåËøûÊé•Âà∞RabbitMQ Broker</li>
<li>ÂêëBroker ËØ∑Ê±ÇÊ∂àË¥πÁõ∏Â∫îÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØÔºåËÆæÁΩÆÁõ∏Â∫îÁöÑÂõûË∞ÉÂáΩÊï∞Ôºõ</li>
<li>Á≠âÂæÖBrokerÂõûÂ∫îÈó≠ÂÖ≥ÊäïÈÄíÂìçÂ∫îÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØÔºåÊ∂àË¥πËÄÖÊé•Êî∂Ê∂àÊÅØÔºõ</li>
<li>Á°ÆËÆ§ÔºàackÔºåËá™Âä®Á°ÆËÆ§ÔºâÊé•Êî∂Âà∞ÁöÑÊ∂àÊÅØÔºõ</li>
<li>RabbitMQ‰ªéÈòüÂàó‰∏≠Âà†Èô§Áõ∏Â∫îÂ∑≤ÁªèË¢´Á°ÆËÆ§ÁöÑÊ∂àÊÅØÔºõ</li>
<li>ÂÖ≥Èó≠‰ø°ÈÅìÔºõ</li>
<li>ÂÖ≥Èó≠ËøûÊé•Ôºõ</li>
</ol>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/11/OmpTzo9hsiHSC7w.png" srcset="/Hexo/img/loading.gif" lazyload alt="1565105223969"></p>
<h2 id="4-3-Áîü‰∫ßËÄÖÊµÅËΩ¨ËøáÁ®ãËØ¥Êòé"><a href="#4-3-Áîü‰∫ßËÄÖÊµÅËΩ¨ËøáÁ®ãËØ¥Êòé" class="headerlink" title="4.3. Áîü‰∫ßËÄÖÊµÅËΩ¨ËøáÁ®ãËØ¥Êòé"></a>4.3. Áîü‰∫ßËÄÖÊµÅËΩ¨ËøáÁ®ãËØ¥Êòé</h2><ol>
<li>ÂÆ¢Êà∑Á´Ø‰∏é‰ª£ÁêÜÊúçÂä°Âô®BrokerÂª∫Á´ãËøûÊé•„ÄÇ‰ºöË∞ÉÁî®newConnection() ÊñπÊ≥ï,Ëøô‰∏™ÊñπÊ≥ï‰ºöËøõ‰∏ÄÊ≠•Â∞ÅË£ÖProtocol Header 0-9-1 ÁöÑÊä•ÊñáÂ§¥ÂèëÈÄÅÁªôBroker Ôºå‰ª•Ê≠§ÈÄöÁü•Broker Êú¨Ê¨°‰∫§‰∫íÈááÁî®ÁöÑÊòØAMQPO-9-1 ÂçèËÆÆÔºåÁ¥ßÊé•ÁùÄBroker ËøîÂõûConnection.Start Êù•Âª∫Á´ãËøûÊé•ÔºåÂú®ËøûÊé•ÁöÑËøáÁ®ã‰∏≠Ê∂âÂèäConnection.Start&#x2F;.Start-OK „ÄÅConnection.Tune&#x2F;.Tune-Ok ÔºåConnection.Open&#x2F; .Open-Ok Ëøô6 ‰∏™ÂëΩ‰ª§ÁöÑ‰∫§‰∫í„ÄÇ</li>
<li>ÂÆ¢Êà∑Á´ØË∞ÉÁî®connection.createChannelÊñπÊ≥ï„ÄÇÊ≠§ÊñπÊ≥ïÂºÄÂêØ‰ø°ÈÅìÔºåÂÖ∂ÂåÖË£ÖÁöÑchannel.openÂëΩ‰ª§ÂèëÈÄÅÁªôBroker,Á≠âÂæÖchannel.basicPublishÊñπÊ≥ïÔºåÂØπÂ∫îÁöÑAMQPÂëΩ‰ª§‰∏∫Basic.Publish,Ëøô‰∏™ÂëΩ‰ª§ÂåÖÂê´‰∫Ücontent Header Âíåcontent Body()„ÄÇcontent Header ÂåÖÂê´‰∫ÜÊ∂àÊÅØ‰ΩìÁöÑÂ±ûÊÄßÔºå‰æãÂ¶Ç:ÊäïÈÄíÊ®°ÂºèÔºå‰ºòÂÖàÁ∫ßÁ≠âÔºåcontent Body ÂåÖÂê´‰∫ÜÊ∂àÊÅØ‰ΩìÊú¨Ë∫´„ÄÇ</li>
<li>ÂÆ¢Êà∑Á´ØÂèëÈÄÅÂÆåÊ∂àÊÅØÈúÄË¶ÅÂÖ≥Èó≠ËµÑÊ∫êÊó∂ÔºåÊ∂âÂèäÂà∞Channel.CloseÂíåChannl.Close-Ok ‰∏éConnetion.CloseÂíåConnection.Close-OkÁöÑÂëΩ‰ª§‰∫§‰∫í„ÄÇ</li>
</ol>
<p><img src="https://s2.loli.net/2022/04/11/4yXQGe8DgvnrfWz.png" srcset="/Hexo/img/loading.gif" lazyload alt="image-20220411225806407"></p>
<h2 id="4-4-Ê∂àË¥πËÄÖÊµÅËΩ¨ËøáÁ®ãËØ¥Êòé"><a href="#4-4-Ê∂àË¥πËÄÖÊµÅËΩ¨ËøáÁ®ãËØ¥Êòé" class="headerlink" title="4.4. Ê∂àË¥πËÄÖÊµÅËΩ¨ËøáÁ®ãËØ¥Êòé"></a>4.4. Ê∂àË¥πËÄÖÊµÅËΩ¨ËøáÁ®ãËØ¥Êòé</h2><ol>
<li>Ê∂àË¥πËÄÖÂÆ¢Êà∑Á´Ø‰∏é‰ª£ÁêÜÊúçÂä°Âô®BrokerÂª∫Á´ãËøûÊé•„ÄÇ‰ºöË∞ÉÁî®newConnection() ÊñπÊ≥ï,Ëøô‰∏™ÊñπÊ≥ï‰ºöËøõ‰∏ÄÊ≠•Â∞ÅË£ÖProtocol Header 0-9-1 ÁöÑÊä•ÊñáÂ§¥ÂèëÈÄÅÁªôBroker Ôºå‰ª•Ê≠§ÈÄöÁü•Broker Êú¨Ê¨°‰∫§‰∫íÈááÁî®ÁöÑÊòØAMQPO-9-1 ÂçèËÆÆÔºåÁ¥ßÊé•ÁùÄBroker ËøîÂõûConnection.Start Êù•Âª∫Á´ãËøûÊé•ÔºåÂú®ËøûÊé•ÁöÑËøáÁ®ã‰∏≠Ê∂âÂèäConnection.Start&#x2F;.Start-OK „ÄÅConnection.Tune&#x2F;.Tune-Ok ÔºåConnection.Open&#x2F; .Open-Ok Ëøô6 ‰∏™ÂëΩ‰ª§ÁöÑ‰∫§‰∫í„ÄÇ</li>
<li>Ê∂àË¥πËÄÖÂÆ¢Êà∑Á´ØË∞ÉÁî®connection.createChannelÊñπÊ≥ï„ÄÇÂíåÁîü‰∫ßËÄÖÂÆ¢Êà∑Á´Ø‰∏ÄÊ†∑ÔºåÂçèËÆÆÊ∂âÂèäChannel . Open&#x2F;Open-OkÂëΩ‰ª§„ÄÇ</li>
<li>Âú®ÁúüÊ≠£Ê∂àË¥π‰πãÂâçÔºåÊ∂àË¥πËÄÖÂÆ¢Êà∑Á´ØÈúÄË¶ÅÂêëBroker ÂèëÈÄÅBasic.Consume ÂëΩ‰ª§(Âç≥Ë∞ÉÁî®channel.basicConsume ÊñπÊ≥ï„ÄâÂ∞ÜChannel ÁΩÆ‰∏∫Êé•Êî∂Ê®°ÂºèÔºå‰πãÂêéBroker ÂõûÊâßBasic . Consume - Ok ‰ª•ÂëäËØâÊ∂àË¥πËÄÖÂÆ¢Êà∑Á´ØÂáÜÂ§áÂ•ΩÊ∂àË¥πÊ∂àÊÅØ„ÄÇ</li>
<li>Broker ÂêëÊ∂àË¥πËÄÖÂÆ¢Êà∑Á´ØÊé®ÈÄÅ(Push) Ê∂àÊÅØÔºåÂç≥Basic.Deliver ÂëΩ‰ª§ÔºåËøô‰∏™ÂëΩ‰ª§ÂíåBasic.Publish ÂëΩ‰ª§‰∏ÄÊ†∑‰ºöÊê∫Â∏¶Content Header ÂíåContent Body„ÄÇ</li>
<li>Ê∂àË¥πËÄÖÊé•Êî∂Âà∞Ê∂àÊÅØÂπ∂Ê≠£Á°ÆÊ∂àË¥π‰πãÂêéÔºåÂêëBroker ÂèëÈÄÅÁ°ÆËÆ§ÔºåÂç≥Basic.Ack ÂëΩ‰ª§„ÄÇ</li>
<li>ÂÆ¢Êà∑Á´ØÂèëÈÄÅÂÆåÊ∂àÊÅØÈúÄË¶ÅÂÖ≥Èó≠ËµÑÊ∫êÊó∂ÔºåÊ∂âÂèäÂà∞Channel.CloseÂíåChannl.Close-Ok ‰∏éConnetion.CloseÂíåConnection.Close-OkÁöÑÂëΩ‰ª§‰∫§‰∫í„ÄÇ</li>
</ol>
<p><img src="https://s2.loli.net/2022/04/11/PBea2Imt6nXriDd.png" srcset="/Hexo/img/loading.gif" lazyload alt="image-20220411225734301"></p>
<h1 id="5-RabbitMQÂ∑•‰ΩúÊ®°Âºè"><a href="#5-RabbitMQÂ∑•‰ΩúÊ®°Âºè" class="headerlink" title="5. RabbitMQÂ∑•‰ΩúÊ®°Âºè"></a>5. RabbitMQÂ∑•‰ΩúÊ®°Âºè</h1><h2 id="4-1-Work-queuesÂ∑•‰ΩúÈòüÂàóÊ®°Âºè"><a href="#4-1-Work-queuesÂ∑•‰ΩúÈòüÂàóÊ®°Âºè" class="headerlink" title="4.1. Work queuesÂ∑•‰ΩúÈòüÂàóÊ®°Âºè"></a>4.1. Work queuesÂ∑•‰ΩúÈòüÂàóÊ®°Âºè</h2><h3 id="4-1-1-Ê®°ÂºèËØ¥Êòé"><a href="#4-1-1-Ê®°ÂºèËØ¥Êòé" class="headerlink" title="4.1.1. Ê®°ÂºèËØ¥Êòé"></a>4.1.1. Ê®°ÂºèËØ¥Êòé</h3><p><img src="https://s2.loli.net/2022/04/11/LObEgie21x9aVcU.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556009144848"></p>
<p><code>Work Queues</code>‰∏éÂÖ•Èó®Á®ãÂ∫èÁöÑ<code>ÁÆÄÂçïÊ®°Âºè</code>Áõ∏ÊØîÔºåÂ§ö‰∫Ü‰∏Ä‰∏™Êàñ‰∏Ä‰∫õÊ∂àË¥πÁ´ØÔºåÂ§ö‰∏™Ê∂àË¥πÁ´ØÂÖ±ÂêåÊ∂àË¥πÂêå‰∏Ä‰∏™ÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØ„ÄÇ</p>
<p><strong>Â∫îÁî®Âú∫ÊôØ</strong>ÔºöÂØπ‰∫é ‰ªªÂä°ËøáÈáçÊàñ‰ªªÂä°ËæÉÂ§öÊÉÖÂÜµ‰ΩøÁî®Â∑•‰ΩúÈòüÂàóÂèØ‰ª•ÊèêÈ´ò‰ªªÂä°Â§ÑÁêÜÁöÑÈÄüÂ∫¶„ÄÇ</p>
<h3 id="4-1-2-‰ª£Á†Å"><a href="#4-1-2-‰ª£Á†Å" class="headerlink" title="4.1.2. ‰ª£Á†Å"></a>4.1.2. ‰ª£Á†Å</h3><p><code>Work Queues</code>‰∏éÂÖ•Èó®Á®ãÂ∫èÁöÑ<code>ÁÆÄÂçïÊ®°Âºè</code>ÁöÑ‰ª£Á†ÅÊòØÂá†‰πé‰∏ÄÊ†∑ÁöÑÔºõÂèØ‰ª•ÂÆåÂÖ®Â§çÂà∂ÔºåÂπ∂Â§çÂà∂Â§ö‰∏Ä‰∏™Ê∂àË¥πËÄÖËøõË°åÂ§ö‰∏™Ê∂àË¥πËÄÖÂêåÊó∂Ê∂àË¥πÊ∂àÊÅØÁöÑÊµãËØï„ÄÇ</p>
<h4 id="1ÔºâÁîü‰∫ßËÄÖ"><a href="#1ÔºâÁîü‰∫ßËÄÖ" class="headerlink" title="1ÔºâÁîü‰∫ßËÄÖ"></a>1ÔºâÁîü‰∫ßËÄÖ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.work;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.ConnectionFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">QUEUE_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;work_queue&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//ÂàõÂª∫ËøûÊé•</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">30</span>; i++) &#123;<br>            <span class="hljs-comment">// ÂèëÈÄÅ‰ø°ÊÅØ</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;‰Ω†Â•ΩÔºõÂ∞èÂÖîÂ≠êÔºÅworkÊ®°Âºè--&quot;</span> + i;<br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂàô‰ΩøÁî®ÈªòËÆ§Default Exchage</span><br><span class="hljs-comment">             * ÂèÇÊï∞2ÔºöË∑ØÁî±key,ÁÆÄÂçïÊ®°ÂºèÂèØ‰ª•‰º†ÈÄíÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">             * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÂÖ∂ÂÆÉÂ±ûÊÄß</span><br><span class="hljs-comment">             * ÂèÇÊï∞4ÔºöÊ∂àÊÅØÂÜÖÂÆπ</span><br><span class="hljs-comment">             */</span><br>            channel.basicPublish(<span class="hljs-string">&quot;&quot;</span>, QUEUE_NAME, <span class="hljs-literal">null</span>, message.getBytes());<br>            System.out.println(<span class="hljs-string">&quot;Â∑≤ÂèëÈÄÅÊ∂àÊÅØÔºö&quot;</span> + message);<br>        &#125;<br><br>        <span class="hljs-comment">// ÂÖ≥Èó≠ËµÑÊ∫ê</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="2ÔºâÊ∂àË¥πËÄÖ1"><a href="#2ÔºâÊ∂àË¥πËÄÖ1" class="headerlink" title="2ÔºâÊ∂àË¥πËÄÖ1"></a>2ÔºâÊ∂àË¥πËÄÖ1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.work;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer1</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//‰∏ÄÊ¨°Âè™ËÉΩÊé•Êî∂Âπ∂Â§ÑÁêÜ‰∏Ä‰∏™Ê∂àÊÅØ</span><br>        channel.basicQos(<span class="hljs-number">1</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫Ê∂àË¥πËÄÖÔºõÂπ∂ËÆæÁΩÆÊ∂àÊÅØÂ§ÑÁêÜ</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag Ê∂àÊÅØËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span><br><span class="hljs-comment">             * envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span><br><span class="hljs-comment">             * properties Â±ûÊÄß‰ø°ÊÅØ</span><br><span class="hljs-comment">             * body Ê∂àÊÅØ</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-comment">//Ë∑ØÁî±key</span><br>                    System.out.println(<span class="hljs-string">&quot;Ë∑ØÁî±key‰∏∫Ôºö&quot;</span> + envelope.getRoutingKey());<br>                    <span class="hljs-comment">//‰∫§Êç¢Êú∫</span><br>                    System.out.println(<span class="hljs-string">&quot;‰∫§Êç¢Êú∫‰∏∫Ôºö&quot;</span> + envelope.getExchange());<br>                    <span class="hljs-comment">//Ê∂àÊÅØid</span><br>                    System.out.println(<span class="hljs-string">&quot;Ê∂àÊÅØid‰∏∫Ôºö&quot;</span> + envelope.getDeliveryTag());<br>                    <span class="hljs-comment">//Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br>                    System.out.println(<span class="hljs-string">&quot;Ê∂àË¥πËÄÖ1-Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>                    Thread.sleep(<span class="hljs-number">1000</span>);<br><br>                    <span class="hljs-comment">//Á°ÆËÆ§Ê∂àÊÅØ</span><br>                    channel.basicAck(envelope.getDeliveryTag(), <span class="hljs-literal">false</span>);<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶Ëá™Âä®Á°ÆËÆ§ÔºåËÆæÁΩÆ‰∏∫true‰∏∫Ë°®Á§∫Ê∂àÊÅØÊé•Êî∂Âà∞Ëá™Âä®ÂêëmqÂõûÂ§çÊé•Êî∂Âà∞‰∫ÜÔºåmqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØÔºåËÆæÁΩÆ‰∏∫falseÂàôÈúÄË¶ÅÊâãÂä®Á°ÆËÆ§</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÊé•Êî∂Âà∞ÂêéÂõûË∞É</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.QUEUE_NAME, <span class="hljs-literal">false</span>, consumer);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="3ÔºâÊ∂àË¥πËÄÖ2"><a href="#3ÔºâÊ∂àË¥πËÄÖ2" class="headerlink" title="3ÔºâÊ∂àË¥πËÄÖ2"></a>3ÔºâÊ∂àË¥πËÄÖ2</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.work;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer2</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//‰∏ÄÊ¨°Âè™ËÉΩÊé•Êî∂Âπ∂Â§ÑÁêÜ‰∏Ä‰∏™Ê∂àÊÅØ</span><br>        channel.basicQos(<span class="hljs-number">1</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫Ê∂àË¥πËÄÖÔºõÂπ∂ËÆæÁΩÆÊ∂àÊÅØÂ§ÑÁêÜ</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag Ê∂àÊÅØËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span><br><span class="hljs-comment">             * envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span><br><span class="hljs-comment">             * properties Â±ûÊÄß‰ø°ÊÅØ</span><br><span class="hljs-comment">             * body Ê∂àÊÅØ</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-comment">//Ë∑ØÁî±key</span><br>                    System.out.println(<span class="hljs-string">&quot;Ë∑ØÁî±key‰∏∫Ôºö&quot;</span> + envelope.getRoutingKey());<br>                    <span class="hljs-comment">//‰∫§Êç¢Êú∫</span><br>                    System.out.println(<span class="hljs-string">&quot;‰∫§Êç¢Êú∫‰∏∫Ôºö&quot;</span> + envelope.getExchange());<br>                    <span class="hljs-comment">//Ê∂àÊÅØid</span><br>                    System.out.println(<span class="hljs-string">&quot;Ê∂àÊÅØid‰∏∫Ôºö&quot;</span> + envelope.getDeliveryTag());<br>                    <span class="hljs-comment">//Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br>                    System.out.println(<span class="hljs-string">&quot;Ê∂àË¥πËÄÖ2-Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>                    Thread.sleep(<span class="hljs-number">1000</span>);<br><br>                    <span class="hljs-comment">//Á°ÆËÆ§Ê∂àÊÅØ</span><br>                    channel.basicAck(envelope.getDeliveryTag(), <span class="hljs-literal">false</span>);<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶Ëá™Âä®Á°ÆËÆ§ÔºåËÆæÁΩÆ‰∏∫true‰∏∫Ë°®Á§∫Ê∂àÊÅØÊé•Êî∂Âà∞Ëá™Âä®ÂêëmqÂõûÂ§çÊé•Êî∂Âà∞‰∫ÜÔºåmqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØÔºåËÆæÁΩÆ‰∏∫falseÂàôÈúÄË¶ÅÊâãÂä®Á°ÆËÆ§</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÊé•Êî∂Âà∞ÂêéÂõûË∞É</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.QUEUE_NAME, <span class="hljs-literal">false</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h3 id="4-1-3-ÊµãËØï"><a href="#4-1-3-ÊµãËØï" class="headerlink" title="4.1.3. ÊµãËØï"></a>4.1.3. ÊµãËØï</h3><p>ÂêØÂä®‰∏§‰∏™Ê∂àË¥πËÄÖÔºåÁÑ∂ÂêéÂÜçÂêØÂä®Áîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÔºõÂà∞IDEAÁöÑ‰∏§‰∏™Ê∂àË¥πËÄÖÂØπÂ∫îÁöÑÊéßÂà∂Âè∞Êü•ÁúãÊòØÂê¶Á´û‰∫âÊÄßÁöÑÊé•Êî∂Âà∞Ê∂àÊÅØ„ÄÇ</p>
<p><img src="https://s2.loli.net/2022/04/11/3pWfP7giJ2SNFGT.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556014310859"></p>
<p><img src="https://s2.loli.net/2022/04/11/WogblsYXU7BHphR.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556014318106"></p>
<h3 id="4-1-4-Â∞èÁªì"><a href="#4-1-4-Â∞èÁªì" class="headerlink" title="4.1.4. Â∞èÁªì"></a>4.1.4. Â∞èÁªì</h3><p>Âú®‰∏Ä‰∏™ÈòüÂàó‰∏≠Â¶ÇÊûúÊúâÂ§ö‰∏™Ê∂àË¥πËÄÖÔºåÈÇ£‰πàÊ∂àË¥πËÄÖ‰πãÈó¥ÂØπ‰∫éÂêå‰∏Ä‰∏™Ê∂àÊÅØÁöÑÂÖ≥Á≥ªÊòØ<strong>Á´û‰∫â</strong>ÁöÑÂÖ≥Á≥ª„ÄÇ</p>
<h2 id="4-2-ËÆ¢ÈòÖÊ®°ÂºèÁ±ªÂûã"><a href="#4-2-ËÆ¢ÈòÖÊ®°ÂºèÁ±ªÂûã" class="headerlink" title="4.2. ËÆ¢ÈòÖÊ®°ÂºèÁ±ªÂûã"></a>4.2. ËÆ¢ÈòÖÊ®°ÂºèÁ±ªÂûã</h2><p>ËÆ¢ÈòÖÊ®°ÂºèÁ§∫‰æãÂõæÔºö</p>
<p><img src="https://s2.loli.net/2022/04/11/neTD9awJX2kWArV.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556014499573"></p>
<p>ÂâçÈù¢2‰∏™Ê°à‰æã‰∏≠ÔºåÂè™Êúâ3‰∏™ËßíËâ≤Ôºö</p>
<ul>
<li>PÔºöÁîü‰∫ßËÄÖÔºå‰πüÂ∞±ÊòØË¶ÅÂèëÈÄÅÊ∂àÊÅØÁöÑÁ®ãÂ∫è</li>
<li>CÔºöÊ∂àË¥πËÄÖÔºöÊ∂àÊÅØÁöÑÊé•ÂèóËÄÖÔºå‰ºö‰∏ÄÁõ¥Á≠âÂæÖÊ∂àÊÅØÂà∞Êù•„ÄÇ</li>
<li>queueÔºöÊ∂àÊÅØÈòüÂàóÔºåÂõæ‰∏≠Á∫¢Ëâ≤ÈÉ®ÂàÜ</li>
</ul>
<p>ËÄåÂú®ËÆ¢ÈòÖÊ®°Âûã‰∏≠ÔºåÂ§ö‰∫Ü‰∏Ä‰∏™exchangeËßíËâ≤ÔºåËÄå‰∏îËøáÁ®ãÁï•ÊúâÂèòÂåñÔºö</p>
<ul>
<li>PÔºöÁîü‰∫ßËÄÖÔºå‰πüÂ∞±ÊòØË¶ÅÂèëÈÄÅÊ∂àÊÅØÁöÑÁ®ãÂ∫èÔºå‰ΩÜÊòØ‰∏çÂÜçÂèëÈÄÅÂà∞ÈòüÂàó‰∏≠ÔºåËÄåÊòØÂèëÁªôXÔºà‰∫§Êç¢Êú∫Ôºâ</li>
<li>CÔºöÊ∂àË¥πËÄÖÔºåÊ∂àÊÅØÁöÑÊé•ÂèóËÄÖÔºå‰ºö‰∏ÄÁõ¥Á≠âÂæÖÊ∂àÊÅØÂà∞Êù•„ÄÇ</li>
<li>QueueÔºöÊ∂àÊÅØÈòüÂàóÔºåÊé•Êî∂Ê∂àÊÅØ„ÄÅÁºìÂ≠òÊ∂àÊÅØ„ÄÇ</li>
<li>ExchangeÔºö‰∫§Êç¢Êú∫ÔºåÂõæ‰∏≠ÁöÑX„ÄÇ‰∏ÄÊñπÈù¢ÔºåÊé•Êî∂Áîü‰∫ßËÄÖÂèëÈÄÅÁöÑÊ∂àÊÅØ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÁü•ÈÅìÂ¶Ç‰ΩïÂ§ÑÁêÜÊ∂àÊÅØÔºå‰æãÂ¶ÇÈÄí‰∫§ÁªôÊüê‰∏™ÁâπÂà´ÈòüÂàó„ÄÅÈÄí‰∫§ÁªôÊâÄÊúâÈòüÂàó„ÄÅÊàñÊòØÂ∞ÜÊ∂àÊÅØ‰∏¢ÂºÉ„ÄÇÂà∞Â∫ïÂ¶Ç‰ΩïÊìç‰ΩúÔºåÂèñÂÜ≥‰∫éExchangeÁöÑÁ±ªÂûã„ÄÇExchangeÊúâÂ∏∏ËßÅ‰ª•‰∏ã3ÁßçÁ±ªÂûãÔºö<ul>
<li>FanoutÔºöÂπøÊí≠ÔºåÂ∞ÜÊ∂àÊÅØ‰∫§ÁªôÊâÄÊúâÁªëÂÆöÂà∞‰∫§Êç¢Êú∫ÁöÑÈòüÂàó</li>
<li>DirectÔºöÂÆöÂêëÔºåÊääÊ∂àÊÅØ‰∫§ÁªôÁ¨¶ÂêàÊåáÂÆörouting key ÁöÑÈòüÂàó</li>
<li>TopicÔºöÈÄöÈÖçÁ¨¶ÔºåÊääÊ∂àÊÅØ‰∫§ÁªôÁ¨¶Âêàrouting patternÔºàË∑ØÁî±Ê®°ÂºèÔºâ ÁöÑÈòüÂàó</li>
</ul>
</li>
</ul>
<p><strong>ExchangeÔºà‰∫§Êç¢Êú∫ÔºâÂè™Ë¥üË¥£ËΩ¨ÂèëÊ∂àÊÅØÔºå‰∏çÂÖ∑Â§áÂ≠òÂÇ®Ê∂àÊÅØÁöÑËÉΩÂäõ</strong>ÔºåÂõ†Ê≠§Â¶ÇÊûúÊ≤°Êúâ‰ªª‰ΩïÈòüÂàó‰∏éExchangeÁªëÂÆöÔºåÊàñËÄÖÊ≤°ÊúâÁ¨¶ÂêàË∑ØÁî±ËßÑÂàôÁöÑÈòüÂàóÔºåÈÇ£‰πàÊ∂àÊÅØ‰ºö‰∏¢Â§±ÔºÅ</p>
<h2 id="4-3-Publish-x2F-SubscribeÂèëÂ∏É‰∏éËÆ¢ÈòÖÊ®°Âºè"><a href="#4-3-Publish-x2F-SubscribeÂèëÂ∏É‰∏éËÆ¢ÈòÖÊ®°Âºè" class="headerlink" title="4.3. Publish&#x2F;SubscribeÂèëÂ∏É‰∏éËÆ¢ÈòÖÊ®°Âºè"></a>4.3. Publish&#x2F;SubscribeÂèëÂ∏É‰∏éËÆ¢ÈòÖÊ®°Âºè</h2><h3 id="4-3-1-Ê®°ÂºèËØ¥Êòé"><a href="#4-3-1-Ê®°ÂºèËØ¥Êòé" class="headerlink" title="4.3.1. Ê®°ÂºèËØ¥Êòé"></a>4.3.1. Ê®°ÂºèËØ¥Êòé</h3><p><img src="https://s2.loli.net/2022/04/11/QVjg8HPUKCDbMxi.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556010329032"></p>
<p>ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°ÂºèÔºö<br>1„ÄÅÊØè‰∏™Ê∂àË¥πËÄÖÁõëÂê¨Ëá™Â∑±ÁöÑÈòüÂàó„ÄÇ<br>2„ÄÅÁîü‰∫ßËÄÖÂ∞ÜÊ∂àÊÅØÂèëÁªôbrokerÔºåÁî±‰∫§Êç¢Êú∫Â∞ÜÊ∂àÊÅØËΩ¨ÂèëÂà∞ÁªëÂÆöÊ≠§‰∫§Êç¢Êú∫ÁöÑÊØè‰∏™ÈòüÂàóÔºåÊØè‰∏™ÁªëÂÆö‰∫§Êç¢Êú∫ÁöÑÈòüÂàóÈÉΩÂ∞ÜÊé•Êî∂<br>Âà∞Ê∂àÊÅØ</p>
<h3 id="4-3-2-‰ª£Á†Å"><a href="#4-3-2-‰ª£Á†Å" class="headerlink" title="4.3.2. ‰ª£Á†Å"></a>4.3.2. ‰ª£Á†Å</h3><h4 id="1ÔºâÁîü‰∫ßËÄÖ-1"><a href="#1ÔºâÁîü‰∫ßËÄÖ-1" class="headerlink" title="1ÔºâÁîü‰∫ßËÄÖ"></a>1ÔºâÁîü‰∫ßËÄÖ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.ps;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.BuiltinExchangeType;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ÂèëÂ∏É‰∏éËÆ¢ÈòÖ‰ΩøÁî®ÁöÑ‰∫§Êç¢Êú∫Á±ªÂûã‰∏∫Ôºöfanout</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-comment">//‰∫§Êç¢Êú∫ÂêçÁß∞</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FANOUT_EXCHAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;fanout_exchange&quot;</span>;<br>    <span class="hljs-comment">//ÈòüÂàóÂêçÁß∞</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FANOUT_QUEUE_1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;fanout_queue_1&quot;</span>;<br>    <span class="hljs-comment">//ÈòüÂàóÂêçÁß∞</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FANOUT_QUEUE_2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;fanout_queue_2&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//ÂàõÂª∫ËøûÊé•</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * Â£∞Êòé‰∫§Êç¢Êú∫</span><br><span class="hljs-comment">         * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2Ôºö‰∫§Êç¢Êú∫Á±ªÂûãÔºåfanout„ÄÅtopic„ÄÅdirect„ÄÅheaders</span><br><span class="hljs-comment">         */</span><br>        channel.exchangeDeclare(FANOUT_EXCHAGE, BuiltinExchangeType.FANOUT);<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(FANOUT_QUEUE_1, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br>        channel.queueDeclare(FANOUT_QUEUE_2, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫</span><br>        channel.queueBind(FANOUT_QUEUE_1, FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>);<br>        channel.queueBind(FANOUT_QUEUE_2, FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>            <span class="hljs-comment">// ÂèëÈÄÅ‰ø°ÊÅØ</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;‰Ω†Â•ΩÔºõÂ∞èÂÖîÂ≠êÔºÅÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè--&quot;</span> + i;<br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂàô‰ΩøÁî®ÈªòËÆ§Default Exchage</span><br><span class="hljs-comment">             * ÂèÇÊï∞2ÔºöË∑ØÁî±key,ÁÆÄÂçïÊ®°ÂºèÂèØ‰ª•‰º†ÈÄíÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">             * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÂÖ∂ÂÆÉÂ±ûÊÄß</span><br><span class="hljs-comment">             * ÂèÇÊï∞4ÔºöÊ∂àÊÅØÂÜÖÂÆπ</span><br><span class="hljs-comment">             */</span><br>            channel.basicPublish(FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>            System.out.println(<span class="hljs-string">&quot;Â∑≤ÂèëÈÄÅÊ∂àÊÅØÔºö&quot;</span> + message);<br>        &#125;<br><br>        <span class="hljs-comment">// ÂÖ≥Èó≠ËµÑÊ∫ê</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="2ÔºâÊ∂àË¥πËÄÖ1-1"><a href="#2ÔºâÊ∂àË¥πËÄÖ1-1" class="headerlink" title="2ÔºâÊ∂àË¥πËÄÖ1"></a>2ÔºâÊ∂àË¥πËÄÖ1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.ps;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer1</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//Â£∞Êòé‰∫§Êç¢Êú∫</span><br>        channel.exchangeDeclare(Producer.FANOUT_EXCHAGE, BuiltinExchangeType.FANOUT);<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.FANOUT_QUEUE_1, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫</span><br>        channel.queueBind(Producer.FANOUT_QUEUE_1, Producer.FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫Ê∂àË¥πËÄÖÔºõÂπ∂ËÆæÁΩÆÊ∂àÊÅØÂ§ÑÁêÜ</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag Ê∂àÊÅØËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span><br><span class="hljs-comment">             * envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span><br><span class="hljs-comment">             * properties Â±ûÊÄß‰ø°ÊÅØ</span><br><span class="hljs-comment">             * body Ê∂àÊÅØ</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//Ë∑ØÁî±key</span><br>                System.out.println(<span class="hljs-string">&quot;Ë∑ØÁî±key‰∏∫Ôºö&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//‰∫§Êç¢Êú∫</span><br>                System.out.println(<span class="hljs-string">&quot;‰∫§Êç¢Êú∫‰∏∫Ôºö&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//Ê∂àÊÅØid</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àÊÅØid‰∏∫Ôºö&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àË¥πËÄÖ1-Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶Ëá™Âä®Á°ÆËÆ§ÔºåËÆæÁΩÆ‰∏∫true‰∏∫Ë°®Á§∫Ê∂àÊÅØÊé•Êî∂Âà∞Ëá™Âä®ÂêëmqÂõûÂ§çÊé•Êî∂Âà∞‰∫ÜÔºåmqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØÔºåËÆæÁΩÆ‰∏∫falseÂàôÈúÄË¶ÅÊâãÂä®Á°ÆËÆ§</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÊé•Êî∂Âà∞ÂêéÂõûË∞É</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.FANOUT_QUEUE_1, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="3ÔºâÊ∂àË¥πËÄÖ2-1"><a href="#3ÔºâÊ∂àË¥πËÄÖ2-1" class="headerlink" title="3ÔºâÊ∂àË¥πËÄÖ2"></a>3ÔºâÊ∂àË¥πËÄÖ2</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.ps;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer2</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//Â£∞Êòé‰∫§Êç¢Êú∫</span><br>        channel.exchangeDeclare(Producer.FANOUT_EXCHAGE, BuiltinExchangeType.FANOUT);<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.FANOUT_QUEUE_2, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫</span><br>        channel.queueBind(Producer.FANOUT_QUEUE_2, Producer.FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫Ê∂àË¥πËÄÖÔºõÂπ∂ËÆæÁΩÆÊ∂àÊÅØÂ§ÑÁêÜ</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag Ê∂àÊÅØËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span><br><span class="hljs-comment">             * envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span><br><span class="hljs-comment">             * properties Â±ûÊÄß‰ø°ÊÅØ</span><br><span class="hljs-comment">             * body Ê∂àÊÅØ</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//Ë∑ØÁî±key</span><br>                System.out.println(<span class="hljs-string">&quot;Ë∑ØÁî±key‰∏∫Ôºö&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//‰∫§Êç¢Êú∫</span><br>                System.out.println(<span class="hljs-string">&quot;‰∫§Êç¢Êú∫‰∏∫Ôºö&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//Ê∂àÊÅØid</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àÊÅØid‰∏∫Ôºö&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àË¥πËÄÖ2-Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶Ëá™Âä®Á°ÆËÆ§ÔºåËÆæÁΩÆ‰∏∫true‰∏∫Ë°®Á§∫Ê∂àÊÅØÊé•Êî∂Âà∞Ëá™Âä®ÂêëmqÂõûÂ§çÊé•Êî∂Âà∞‰∫ÜÔºåmqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØÔºåËÆæÁΩÆ‰∏∫falseÂàôÈúÄË¶ÅÊâãÂä®Á°ÆËÆ§</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÊé•Êî∂Âà∞ÂêéÂõûË∞É</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.FANOUT_QUEUE_2, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<h3 id="4-3-3-ÊµãËØï"><a href="#4-3-3-ÊµãËØï" class="headerlink" title="4.3.3. ÊµãËØï"></a>4.3.3. ÊµãËØï</h3><p>ÂêØÂä®ÊâÄÊúâÊ∂àË¥πËÄÖÔºåÁÑ∂Âêé‰ΩøÁî®Áîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÔºõÂú®ÊØè‰∏™Ê∂àË¥πËÄÖÂØπÂ∫îÁöÑÊéßÂà∂Âè∞ÂèØ‰ª•Êü•ÁúãÂà∞Áîü‰∫ßËÄÖÂèëÈÄÅÁöÑÊâÄÊúâÊ∂àÊÅØÔºõÂà∞Ëææ<strong>ÂπøÊí≠</strong>ÁöÑÊïàÊûú„ÄÇ</p>
<p>Âú®ÊâßË°åÂÆåÊµãËØï‰ª£Á†ÅÂêéÔºåÂÖ∂ÂÆûÂà∞RabbitMQÁöÑÁÆ°ÁêÜÂêéÂè∞ÊâæÂà∞<code>Exchanges</code>ÈÄâÈ°πÂç°ÔºåÁÇπÂáª <code>fanout_exchange</code> ÁöÑ‰∫§Êç¢Êú∫ÔºåÂèØ‰ª•Êü•ÁúãÂà∞Â¶Ç‰∏ãÁöÑÁªëÂÆöÔºö</p>
<p><img src="https://s2.loli.net/2022/04/11/TE8CYIvlDp9yndL.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556015006220"></p>
<h3 id="4-3-4-Â∞èÁªì"><a href="#4-3-4-Â∞èÁªì" class="headerlink" title="4.3.4. Â∞èÁªì"></a>4.3.4. Â∞èÁªì</h3><p>‰∫§Êç¢Êú∫ÈúÄË¶Å‰∏éÈòüÂàóËøõË°åÁªëÂÆöÔºåÁªëÂÆö‰πãÂêéÔºõ‰∏Ä‰∏™Ê∂àÊÅØÂèØ‰ª•Ë¢´Â§ö‰∏™Ê∂àË¥πËÄÖÈÉΩÊî∂Âà∞„ÄÇ</p>
<p><strong>ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè‰∏éÂ∑•‰ΩúÈòüÂàóÊ®°ÂºèÁöÑÂå∫Âà´</strong></p>
<p>1„ÄÅÂ∑•‰ΩúÈòüÂàóÊ®°Âºè‰∏çÁî®ÂÆö‰πâ‰∫§Êç¢Êú∫ÔºåËÄåÂèëÂ∏É&#x2F;ËÆ¢ÈòÖÊ®°ÂºèÈúÄË¶ÅÂÆö‰πâ‰∫§Êç¢Êú∫„ÄÇ </p>
<p>2„ÄÅÂèëÂ∏É&#x2F;ËÆ¢ÈòÖÊ®°ÂºèÁöÑÁîü‰∫ßÊñπÊòØÈù¢Âêë‰∫§Êç¢Êú∫ÂèëÈÄÅÊ∂àÊÅØÔºåÂ∑•‰ΩúÈòüÂàóÊ®°ÂºèÁöÑÁîü‰∫ßÊñπÊòØÈù¢ÂêëÈòüÂàóÂèëÈÄÅÊ∂àÊÅØ(Â∫ïÂ±Ç‰ΩøÁî®ÈªòËÆ§‰∫§Êç¢Êú∫)„ÄÇ</p>
<p>3„ÄÅÂèëÂ∏É&#x2F;ËÆ¢ÈòÖÊ®°ÂºèÈúÄË¶ÅËÆæÁΩÆÈòüÂàóÂíå‰∫§Êç¢Êú∫ÁöÑÁªëÂÆöÔºåÂ∑•‰ΩúÈòüÂàóÊ®°Âºè‰∏çÈúÄË¶ÅËÆæÁΩÆÔºåÂÆûÈôÖ‰∏äÂ∑•‰ΩúÈòüÂàóÊ®°Âºè‰ºöÂ∞ÜÈòüÂàóÁªë ÂÆöÂà∞ÈªòËÆ§ÁöÑ‰∫§Êç¢Êú∫ „ÄÇ</p>
<h2 id="4-4-RoutingË∑ØÁî±Ê®°Âºè"><a href="#4-4-RoutingË∑ØÁî±Ê®°Âºè" class="headerlink" title="4.4. RoutingË∑ØÁî±Ê®°Âºè"></a>4.4. RoutingË∑ØÁî±Ê®°Âºè</h2><h3 id="4-4-1-Ê®°ÂºèËØ¥Êòé"><a href="#4-4-1-Ê®°ÂºèËØ¥Êòé" class="headerlink" title="4.4.1. Ê®°ÂºèËØ¥Êòé"></a>4.4.1. Ê®°ÂºèËØ¥Êòé</h3><p>Ë∑ØÁî±Ê®°ÂºèÁâπÁÇπÔºö</p>
<ul>
<li>ÈòüÂàó‰∏é‰∫§Êç¢Êú∫ÁöÑÁªëÂÆöÔºå‰∏çËÉΩÊòØ‰ªªÊÑèÁªëÂÆö‰∫ÜÔºåËÄåÊòØË¶ÅÊåáÂÆö‰∏Ä‰∏™<code>RoutingKey</code>ÔºàË∑ØÁî±keyÔºâ</li>
<li>Ê∂àÊÅØÁöÑÂèëÈÄÅÊñπÂú® Âêë ExchangeÂèëÈÄÅÊ∂àÊÅØÊó∂Ôºå‰πüÂøÖÈ°ªÊåáÂÆöÊ∂àÊÅØÁöÑ <code>RoutingKey</code>„ÄÇ</li>
<li>Exchange‰∏çÂÜçÊääÊ∂àÊÅØ‰∫§ÁªôÊØè‰∏Ä‰∏™ÁªëÂÆöÁöÑÈòüÂàóÔºåËÄåÊòØÊ†πÊçÆÊ∂àÊÅØÁöÑ<code>Routing Key</code>ËøõË°åÂà§Êñ≠ÔºåÂè™ÊúâÈòüÂàóÁöÑ<code>Routingkey</code>‰∏éÊ∂àÊÅØÁöÑ <code>Routing key</code>ÂÆåÂÖ®‰∏ÄËá¥ÔºåÊâç‰ºöÊé•Êî∂Âà∞Ê∂àÊÅØ</li>
</ul>
<p><img src="https://s2.loli.net/2022/04/11/Qpg5S3ns6lLvUcy.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556029284397"></p>
<p>ÂõæËß£Ôºö</p>
<ul>
<li>PÔºöÁîü‰∫ßËÄÖÔºåÂêëExchangeÂèëÈÄÅÊ∂àÊÅØÔºåÂèëÈÄÅÊ∂àÊÅØÊó∂Ôºå‰ºöÊåáÂÆö‰∏Ä‰∏™routing key„ÄÇ</li>
<li>XÔºöExchangeÔºà‰∫§Êç¢Êú∫ÔºâÔºåÊé•Êî∂Áîü‰∫ßËÄÖÁöÑÊ∂àÊÅØÔºåÁÑ∂ÂêéÊääÊ∂àÊÅØÈÄí‰∫§Áªô ‰∏érouting keyÂÆåÂÖ®ÂåπÈÖçÁöÑÈòüÂàó</li>
<li>C1ÔºöÊ∂àË¥πËÄÖÔºåÂÖ∂ÊâÄÂú®ÈòüÂàóÊåáÂÆö‰∫ÜÈúÄË¶Årouting key ‰∏∫ error ÁöÑÊ∂àÊÅØ</li>
<li>C2ÔºöÊ∂àË¥πËÄÖÔºåÂÖ∂ÊâÄÂú®ÈòüÂàóÊåáÂÆö‰∫ÜÈúÄË¶Årouting key ‰∏∫ info„ÄÅerror„ÄÅwarning ÁöÑÊ∂àÊÅØ</li>
</ul>
<h3 id="4-4-2-‰ª£Á†Å"><a href="#4-4-2-‰ª£Á†Å" class="headerlink" title="4.4.2. ‰ª£Á†Å"></a>4.4.2. ‰ª£Á†Å</h3><p>Âú®ÁºñÁ†Å‰∏ä‰∏é <code>Publish/SubscribeÂèëÂ∏É‰∏éËÆ¢ÈòÖÊ®°Âºè</code> ÁöÑÂå∫Âà´ÊòØ‰∫§Êç¢Êú∫ÁöÑÁ±ªÂûã‰∏∫ÔºöDirectÔºåËøòÊúâÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫ÁöÑÊó∂ÂÄôÈúÄË¶ÅÊåáÂÆörouting key„ÄÇ</p>
<h4 id="1ÔºâÁîü‰∫ßËÄÖ-2"><a href="#1ÔºâÁîü‰∫ßËÄÖ-2" class="headerlink" title="1ÔºâÁîü‰∫ßËÄÖ"></a>1ÔºâÁîü‰∫ßËÄÖ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.routing;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.BuiltinExchangeType;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Ë∑ØÁî±Ê®°ÂºèÁöÑ‰∫§Êç¢Êú∫Á±ªÂûã‰∏∫Ôºödirect</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-comment">//‰∫§Êç¢Êú∫ÂêçÁß∞</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DIRECT_EXCHAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;direct_exchange&quot;</span>;<br>    <span class="hljs-comment">//ÈòüÂàóÂêçÁß∞</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DIRECT_QUEUE_INSERT</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;direct_queue_insert&quot;</span>;<br>    <span class="hljs-comment">//ÈòüÂàóÂêçÁß∞</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DIRECT_QUEUE_UPDATE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;direct_queue_update&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//ÂàõÂª∫ËøûÊé•</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * Â£∞Êòé‰∫§Êç¢Êú∫</span><br><span class="hljs-comment">         * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2Ôºö‰∫§Êç¢Êú∫Á±ªÂûãÔºåfanout„ÄÅtopic„ÄÅdirect„ÄÅheaders</span><br><span class="hljs-comment">         */</span><br>        channel.exchangeDeclare(DIRECT_EXCHAGE, BuiltinExchangeType.DIRECT);<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(DIRECT_QUEUE_INSERT, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br>        channel.queueDeclare(DIRECT_QUEUE_UPDATE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫</span><br>        channel.queueBind(DIRECT_QUEUE_INSERT, DIRECT_EXCHAGE, <span class="hljs-string">&quot;insert&quot;</span>);<br>        channel.queueBind(DIRECT_QUEUE_UPDATE, DIRECT_EXCHAGE, <span class="hljs-string">&quot;update&quot;</span>);<br><br>        <span class="hljs-comment">// ÂèëÈÄÅ‰ø°ÊÅØ</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Êñ∞Â¢û‰∫ÜÂïÜÂìÅ„ÄÇË∑ØÁî±Ê®°ÂºèÔºõrouting key ‰∏∫ insert &quot;</span> ;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂàô‰ΩøÁî®ÈªòËÆ§Default Exchage</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöË∑ØÁî±key,ÁÆÄÂçïÊ®°ÂºèÂèØ‰ª•‰º†ÈÄíÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÂÖ∂ÂÆÉÂ±ûÊÄß</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊ∂àÊÅØÂÜÖÂÆπ</span><br><span class="hljs-comment">         */</span><br>        channel.basicPublish(DIRECT_EXCHAGE, <span class="hljs-string">&quot;insert&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;Â∑≤ÂèëÈÄÅÊ∂àÊÅØÔºö&quot;</span> + message);<br><br>        <span class="hljs-comment">// ÂèëÈÄÅ‰ø°ÊÅØ</span><br>        message = <span class="hljs-string">&quot;‰øÆÊîπ‰∫ÜÂïÜÂìÅ„ÄÇË∑ØÁî±Ê®°ÂºèÔºõrouting key ‰∏∫ update&quot;</span> ;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂàô‰ΩøÁî®ÈªòËÆ§Default Exchage</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöË∑ØÁî±key,ÁÆÄÂçïÊ®°ÂºèÂèØ‰ª•‰º†ÈÄíÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÂÖ∂ÂÆÉÂ±ûÊÄß</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊ∂àÊÅØÂÜÖÂÆπ</span><br><span class="hljs-comment">         */</span><br>        channel.basicPublish(DIRECT_EXCHAGE, <span class="hljs-string">&quot;update&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;Â∑≤ÂèëÈÄÅÊ∂àÊÅØÔºö&quot;</span> + message);<br><br>        <span class="hljs-comment">// ÂÖ≥Èó≠ËµÑÊ∫ê</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h4 id="2ÔºâÊ∂àË¥πËÄÖ1-2"><a href="#2ÔºâÊ∂àË¥πËÄÖ1-2" class="headerlink" title="2ÔºâÊ∂àË¥πËÄÖ1"></a>2ÔºâÊ∂àË¥πËÄÖ1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.routing;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer1</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//Â£∞Êòé‰∫§Êç¢Êú∫</span><br>        channel.exchangeDeclare(Producer.DIRECT_EXCHAGE, BuiltinExchangeType.DIRECT);<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.DIRECT_QUEUE_INSERT, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫</span><br>        channel.queueBind(Producer.DIRECT_QUEUE_INSERT, Producer.DIRECT_EXCHAGE, <span class="hljs-string">&quot;insert&quot;</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫Ê∂àË¥πËÄÖÔºõÂπ∂ËÆæÁΩÆÊ∂àÊÅØÂ§ÑÁêÜ</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag Ê∂àÊÅØËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span><br><span class="hljs-comment">             * envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span><br><span class="hljs-comment">             * properties Â±ûÊÄß‰ø°ÊÅØ</span><br><span class="hljs-comment">             * body Ê∂àÊÅØ</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//Ë∑ØÁî±key</span><br>                System.out.println(<span class="hljs-string">&quot;Ë∑ØÁî±key‰∏∫Ôºö&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//‰∫§Êç¢Êú∫</span><br>                System.out.println(<span class="hljs-string">&quot;‰∫§Êç¢Êú∫‰∏∫Ôºö&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//Ê∂àÊÅØid</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àÊÅØid‰∏∫Ôºö&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àË¥πËÄÖ1-Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶Ëá™Âä®Á°ÆËÆ§ÔºåËÆæÁΩÆ‰∏∫true‰∏∫Ë°®Á§∫Ê∂àÊÅØÊé•Êî∂Âà∞Ëá™Âä®ÂêëmqÂõûÂ§çÊé•Êî∂Âà∞‰∫ÜÔºåmqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØÔºåËÆæÁΩÆ‰∏∫falseÂàôÈúÄË¶ÅÊâãÂä®Á°ÆËÆ§</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÊé•Êî∂Âà∞ÂêéÂõûË∞É</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.DIRECT_QUEUE_INSERT, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h4 id="3ÔºâÊ∂àË¥πËÄÖ2-2"><a href="#3ÔºâÊ∂àË¥πËÄÖ2-2" class="headerlink" title="3ÔºâÊ∂àË¥πËÄÖ2"></a>3ÔºâÊ∂àË¥πËÄÖ2</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.routing;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer2</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//Â£∞Êòé‰∫§Êç¢Êú∫</span><br>        channel.exchangeDeclare(Producer.DIRECT_EXCHAGE, BuiltinExchangeType.DIRECT);<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.DIRECT_QUEUE_UPDATE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫</span><br>        channel.queueBind(Producer.DIRECT_QUEUE_UPDATE, Producer.DIRECT_EXCHAGE, <span class="hljs-string">&quot;update&quot;</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫Ê∂àË¥πËÄÖÔºõÂπ∂ËÆæÁΩÆÊ∂àÊÅØÂ§ÑÁêÜ</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag Ê∂àÊÅØËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span><br><span class="hljs-comment">             * envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span><br><span class="hljs-comment">             * properties Â±ûÊÄß‰ø°ÊÅØ</span><br><span class="hljs-comment">             * body Ê∂àÊÅØ</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//Ë∑ØÁî±key</span><br>                System.out.println(<span class="hljs-string">&quot;Ë∑ØÁî±key‰∏∫Ôºö&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//‰∫§Êç¢Êú∫</span><br>                System.out.println(<span class="hljs-string">&quot;‰∫§Êç¢Êú∫‰∏∫Ôºö&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//Ê∂àÊÅØid</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àÊÅØid‰∏∫Ôºö&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àË¥πËÄÖ2-Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶Ëá™Âä®Á°ÆËÆ§ÔºåËÆæÁΩÆ‰∏∫true‰∏∫Ë°®Á§∫Ê∂àÊÅØÊé•Êî∂Âà∞Ëá™Âä®ÂêëmqÂõûÂ§çÊé•Êî∂Âà∞‰∫ÜÔºåmqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØÔºåËÆæÁΩÆ‰∏∫falseÂàôÈúÄË¶ÅÊâãÂä®Á°ÆËÆ§</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÊé•Êî∂Âà∞ÂêéÂõûË∞É</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.DIRECT_QUEUE_UPDATE, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>


<h3 id="4-4-3-ÊµãËØï"><a href="#4-4-3-ÊµãËØï" class="headerlink" title="4.4.3. ÊµãËØï"></a>4.4.3. ÊµãËØï</h3><p>ÂêØÂä®ÊâÄÊúâÊ∂àË¥πËÄÖÔºåÁÑ∂Âêé‰ΩøÁî®Áîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÔºõÂú®Ê∂àË¥πËÄÖÂØπÂ∫îÁöÑÊéßÂà∂Âè∞ÂèØ‰ª•Êü•ÁúãÂà∞Áîü‰∫ßËÄÖÂèëÈÄÅÂØπÂ∫îrouting keyÂØπÂ∫îÈòüÂàóÁöÑÊ∂àÊÅØÔºõÂà∞Ëææ<strong>ÊåâÁÖßÈúÄË¶ÅÊé•Êî∂</strong>ÁöÑÊïàÊûú„ÄÇ</p>
<p>Âú®ÊâßË°åÂÆåÊµãËØï‰ª£Á†ÅÂêéÔºåÂÖ∂ÂÆûÂà∞RabbitMQÁöÑÁÆ°ÁêÜÂêéÂè∞ÊâæÂà∞<code>Exchanges</code>ÈÄâÈ°πÂç°ÔºåÁÇπÂáª <code>direct_exchange</code> ÁöÑ‰∫§Êç¢Êú∫ÔºåÂèØ‰ª•Êü•ÁúãÂà∞Â¶Ç‰∏ãÁöÑÁªëÂÆöÔºö</p>
<p><img src="https://s2.loli.net/2022/04/11/cHnepfiSamCbVs7.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556031175744"></p>
<h3 id="4-4-4-Â∞èÁªì"><a href="#4-4-4-Â∞èÁªì" class="headerlink" title="4.4.4. Â∞èÁªì"></a>4.4.4. Â∞èÁªì</h3><p>RoutingÊ®°ÂºèË¶ÅÊ±ÇÈòüÂàóÂú®ÁªëÂÆö‰∫§Êç¢Êú∫Êó∂Ë¶ÅÊåáÂÆörouting keyÔºåÊ∂àÊÅØ‰ºöËΩ¨ÂèëÂà∞Á¨¶Âêàrouting keyÁöÑÈòüÂàó„ÄÇ</p>
<h2 id="4-5-TopicsÈÄöÈÖçÁ¨¶Ê®°Âºè"><a href="#4-5-TopicsÈÄöÈÖçÁ¨¶Ê®°Âºè" class="headerlink" title="4.5. TopicsÈÄöÈÖçÁ¨¶Ê®°Âºè"></a>4.5. TopicsÈÄöÈÖçÁ¨¶Ê®°Âºè</h2><h3 id="4-5-1-Ê®°ÂºèËØ¥Êòé"><a href="#4-5-1-Ê®°ÂºèËØ¥Êòé" class="headerlink" title="4.5.1. Ê®°ÂºèËØ¥Êòé"></a>4.5.1. Ê®°ÂºèËØ¥Êòé</h3><p><code>Topic</code>Á±ªÂûã‰∏é<code>Direct</code>Áõ∏ÊØîÔºåÈÉΩÊòØÂèØ‰ª•Ê†πÊçÆ<code>RoutingKey</code>ÊääÊ∂àÊÅØË∑ØÁî±Âà∞‰∏çÂêåÁöÑÈòüÂàó„ÄÇÂè™‰∏çËøá<code>Topic</code>Á±ªÂûã<code>Exchange</code>ÂèØ‰ª•ËÆ©ÈòüÂàóÂú®ÁªëÂÆö<code>Routing key</code> ÁöÑÊó∂ÂÄô<strong>‰ΩøÁî®ÈÄöÈÖçÁ¨¶</strong>ÔºÅ</p>
<p><code>Routingkey</code> ‰∏ÄËà¨ÈÉΩÊòØÊúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂçïËØçÁªÑÊàêÔºåÂ§ö‰∏™ÂçïËØç‰πãÈó¥‰ª•‚Äù.‚ÄùÂàÜÂâ≤Ôºå‰æãÂ¶ÇÔºö <code>item.insert</code></p>
<p> ÈÄöÈÖçÁ¨¶ËßÑÂàôÔºö</p>
<p><code>#</code>ÔºöÂåπÈÖç‰∏Ä‰∏™ÊàñÂ§ö‰∏™ËØç</p>
<p><code>*</code>ÔºöÂåπÈÖç‰∏çÂ§ö‰∏çÂ∞ëÊÅ∞Â•Ω1‰∏™ËØç</p>
<p>‰∏æ‰æãÔºö</p>
<p><code>item.#</code>ÔºöËÉΩÂ§üÂåπÈÖç<code>item.insert.abc</code> ÊàñËÄÖ <code>item.insert</code></p>
<p><code>item.*</code>ÔºöÂè™ËÉΩÂåπÈÖç<code>item.insert</code></p>
<p><img src="https://s2.loli.net/2022/04/11/EevPLHux8wgWVNi.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556031362048"></p>
<p><img src="https://s2.loli.net/2022/04/11/WHjqUloGMfCAhB2.png" srcset="/Hexo/img/loading.gif" lazyload alt=" "></p>
<p>ÂõæËß£Ôºö</p>
<ul>
<li>Á∫¢Ëâ≤QueueÔºöÁªëÂÆöÁöÑÊòØ<code>usa.#</code> ÔºåÂõ†Ê≠§Âá°ÊòØ‰ª• <code>usa.</code>ÂºÄÂ§¥ÁöÑ<code>routing key</code> ÈÉΩ‰ºöË¢´ÂåπÈÖçÂà∞</li>
<li>ÈªÑËâ≤QueueÔºöÁªëÂÆöÁöÑÊòØ<code>#.news</code> ÔºåÂõ†Ê≠§Âá°ÊòØ‰ª• <code>.news</code>ÁªìÂ∞æÁöÑ <code>routing key</code> ÈÉΩ‰ºöË¢´ÂåπÈÖç</li>
</ul>
<h3 id="4-5-2-‰ª£Á†Å"><a href="#4-5-2-‰ª£Á†Å" class="headerlink" title="4.5.2. ‰ª£Á†Å"></a>4.5.2. ‰ª£Á†Å</h3><h4 id="1ÔºâÁîü‰∫ßËÄÖ-3"><a href="#1ÔºâÁîü‰∫ßËÄÖ-3" class="headerlink" title="1ÔºâÁîü‰∫ßËÄÖ"></a>1ÔºâÁîü‰∫ßËÄÖ</h4><p>‰ΩøÁî®topicÁ±ªÂûãÁöÑExchangeÔºåÂèëÈÄÅÊ∂àÊÅØÁöÑrouting keyÊúâ3ÁßçÔºö <code>item.insert</code>„ÄÅ<code>item.update</code>„ÄÅ<code>item.delete</code>Ôºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.topic;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.BuiltinExchangeType;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ÈÄöÈÖçÁ¨¶TopicÁöÑ‰∫§Êç¢Êú∫Á±ªÂûã‰∏∫Ôºötopic</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-comment">//‰∫§Êç¢Êú∫ÂêçÁß∞</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC_EXCHAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;topic_exchange&quot;</span>;<br>    <span class="hljs-comment">//ÈòüÂàóÂêçÁß∞</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC_QUEUE_1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;topic_queue_1&quot;</span>;<br>    <span class="hljs-comment">//ÈòüÂàóÂêçÁß∞</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC_QUEUE_2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;topic_queue_2&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//ÂàõÂª∫ËøûÊé•</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * Â£∞Êòé‰∫§Êç¢Êú∫</span><br><span class="hljs-comment">         * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2Ôºö‰∫§Êç¢Êú∫Á±ªÂûãÔºåfanout„ÄÅtopic„ÄÅtopic„ÄÅheaders</span><br><span class="hljs-comment">         */</span><br>        channel.exchangeDeclare(TOPIC_EXCHAGE, BuiltinExchangeType.TOPIC);<br><br><br>        <span class="hljs-comment">// ÂèëÈÄÅ‰ø°ÊÅØ</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Êñ∞Â¢û‰∫ÜÂïÜÂìÅ„ÄÇTopicÊ®°ÂºèÔºõrouting key ‰∏∫ item.insert &quot;</span> ;<br>        channel.basicPublish(TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.insert&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;Â∑≤ÂèëÈÄÅÊ∂àÊÅØÔºö&quot;</span> + message);<br><br>        <span class="hljs-comment">// ÂèëÈÄÅ‰ø°ÊÅØ</span><br>        message = <span class="hljs-string">&quot;‰øÆÊîπ‰∫ÜÂïÜÂìÅ„ÄÇTopicÊ®°ÂºèÔºõrouting key ‰∏∫ item.update&quot;</span> ;<br>        channel.basicPublish(TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.update&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;Â∑≤ÂèëÈÄÅÊ∂àÊÅØÔºö&quot;</span> + message);<br><br>        <span class="hljs-comment">// ÂèëÈÄÅ‰ø°ÊÅØ</span><br>        message = <span class="hljs-string">&quot;Âà†Èô§‰∫ÜÂïÜÂìÅ„ÄÇTopicÊ®°ÂºèÔºõrouting key ‰∏∫ item.delete&quot;</span> ;<br>        channel.basicPublish(TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.delete&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;Â∑≤ÂèëÈÄÅÊ∂àÊÅØÔºö&quot;</span> + message);<br><br>        <span class="hljs-comment">// ÂÖ≥Èó≠ËµÑÊ∫ê</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h4 id="2ÔºâÊ∂àË¥πËÄÖ1-3"><a href="#2ÔºâÊ∂àË¥πËÄÖ1-3" class="headerlink" title="2ÔºâÊ∂àË¥πËÄÖ1"></a>2ÔºâÊ∂àË¥πËÄÖ1</h4><p>Êé•Êî∂‰∏§ÁßçÁ±ªÂûãÁöÑÊ∂àÊÅØÔºöÊõ¥Êñ∞ÂïÜÂìÅÂíåÂà†Èô§ÂïÜÂìÅ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.topic;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer1</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//Â£∞Êòé‰∫§Êç¢Êú∫</span><br>        channel.exchangeDeclare(Producer.TOPIC_EXCHAGE, BuiltinExchangeType.TOPIC);<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.TOPIC_QUEUE_1, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫</span><br>        channel.queueBind(Producer.TOPIC_QUEUE_1, Producer.TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.update&quot;</span>);<br>        channel.queueBind(Producer.TOPIC_QUEUE_1, Producer.TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.delete&quot;</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫Ê∂àË¥πËÄÖÔºõÂπ∂ËÆæÁΩÆÊ∂àÊÅØÂ§ÑÁêÜ</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag Ê∂àÊÅØËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span><br><span class="hljs-comment">             * envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span><br><span class="hljs-comment">             * properties Â±ûÊÄß‰ø°ÊÅØ</span><br><span class="hljs-comment">             * body Ê∂àÊÅØ</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//Ë∑ØÁî±key</span><br>                System.out.println(<span class="hljs-string">&quot;Ë∑ØÁî±key‰∏∫Ôºö&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//‰∫§Êç¢Êú∫</span><br>                System.out.println(<span class="hljs-string">&quot;‰∫§Êç¢Êú∫‰∏∫Ôºö&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//Ê∂àÊÅØid</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àÊÅØid‰∏∫Ôºö&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àË¥πËÄÖ1-Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶Ëá™Âä®Á°ÆËÆ§ÔºåËÆæÁΩÆ‰∏∫true‰∏∫Ë°®Á§∫Ê∂àÊÅØÊé•Êî∂Âà∞Ëá™Âä®ÂêëmqÂõûÂ§çÊé•Êî∂Âà∞‰∫ÜÔºåmqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØÔºåËÆæÁΩÆ‰∏∫falseÂàôÈúÄË¶ÅÊâãÂä®Á°ÆËÆ§</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÊé•Êî∂Âà∞ÂêéÂõûË∞É</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.TOPIC_QUEUE_1, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h4 id="3ÔºâÊ∂àË¥πËÄÖ2-3"><a href="#3ÔºâÊ∂àË¥πËÄÖ2-3" class="headerlink" title="3ÔºâÊ∂àË¥πËÄÖ2"></a>3ÔºâÊ∂àË¥πËÄÖ2</h4><p>Êé•Êî∂ÊâÄÊúâÁ±ªÂûãÁöÑÊ∂àÊÅØÔºöÊñ∞Â¢ûÂïÜÂìÅÔºåÊõ¥Êñ∞ÂïÜÂìÅÂíåÂà†Èô§ÂïÜÂìÅ„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.topic;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer2</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// ÂàõÂª∫È¢ëÈÅì</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//Â£∞Êòé‰∫§Êç¢Êú∫</span><br>        channel.exchangeDeclare(Producer.TOPIC_EXCHAGE, BuiltinExchangeType.TOPIC);<br><br>        <span class="hljs-comment">// Â£∞ÊòéÔºàÂàõÂª∫ÔºâÈòüÂàó</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊòØÂê¶Áã¨Âç†Êú¨Ê¨°ËøûÊé•</span><br><span class="hljs-comment">         * ÂèÇÊï∞4ÔºöÊòØÂê¶Âú®‰∏ç‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®Âà†Èô§ÈòüÂàó</span><br><span class="hljs-comment">         * ÂèÇÊï∞5ÔºöÈòüÂàóÂÖ∂ÂÆÉÂèÇÊï∞</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.TOPIC_QUEUE_2, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ÈòüÂàóÁªëÂÆö‰∫§Êç¢Êú∫</span><br>        channel.queueBind(Producer.TOPIC_QUEUE_2, Producer.TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.*&quot;</span>);<br><br>        <span class="hljs-comment">//ÂàõÂª∫Ê∂àË¥πËÄÖÔºõÂπ∂ËÆæÁΩÆÊ∂àÊÅØÂ§ÑÁêÜ</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag Ê∂àÊÅØËÄÖÊ†áÁ≠æÔºåÂú®channel.basicConsumeÊó∂ÂÄôÂèØ‰ª•ÊåáÂÆö</span><br><span class="hljs-comment">             * envelope Ê∂àÊÅØÂåÖÁöÑÂÜÖÂÆπÔºåÂèØ‰ªé‰∏≠Ëé∑ÂèñÊ∂àÊÅØidÔºåÊ∂àÊÅØroutingkeyÔºå‰∫§Êç¢Êú∫ÔºåÊ∂àÊÅØÂíåÈáç‰º†Ê†áÂøó(Êî∂Âà∞Ê∂àÊÅØÂ§±Ë¥•ÂêéÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞ÂèëÈÄÅ)</span><br><span class="hljs-comment">             * properties Â±ûÊÄß‰ø°ÊÅØ</span><br><span class="hljs-comment">             * body Ê∂àÊÅØ</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//Ë∑ØÁî±key</span><br>                System.out.println(<span class="hljs-string">&quot;Ë∑ØÁî±key‰∏∫Ôºö&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//‰∫§Êç¢Êú∫</span><br>                System.out.println(<span class="hljs-string">&quot;‰∫§Êç¢Êú∫‰∏∫Ôºö&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//Ê∂àÊÅØid</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àÊÅØid‰∏∫Ôºö&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br>                System.out.println(<span class="hljs-string">&quot;Ê∂àË¥πËÄÖ2-Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ÁõëÂê¨Ê∂àÊÅØ</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1ÔºöÈòüÂàóÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöÊòØÂê¶Ëá™Âä®Á°ÆËÆ§ÔºåËÆæÁΩÆ‰∏∫true‰∏∫Ë°®Á§∫Ê∂àÊÅØÊé•Êî∂Âà∞Ëá™Âä®ÂêëmqÂõûÂ§çÊé•Êî∂Âà∞‰∫ÜÔºåmqÊé•Êî∂Âà∞ÂõûÂ§ç‰ºöÂà†Èô§Ê∂àÊÅØÔºåËÆæÁΩÆ‰∏∫falseÂàôÈúÄË¶ÅÊâãÂä®Á°ÆËÆ§</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÊ∂àÊÅØÊé•Êî∂Âà∞ÂêéÂõûË∞É</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.TOPIC_QUEUE_2, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="4-5-3-ÊµãËØï"><a href="#4-5-3-ÊµãËØï" class="headerlink" title="4.5.3. ÊµãËØï"></a>4.5.3. ÊµãËØï</h3><p>ÂêØÂä®ÊâÄÊúâÊ∂àË¥πËÄÖÔºåÁÑ∂Âêé‰ΩøÁî®Áîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÔºõÂú®Ê∂àË¥πËÄÖÂØπÂ∫îÁöÑÊéßÂà∂Âè∞ÂèØ‰ª•Êü•ÁúãÂà∞Áîü‰∫ßËÄÖÂèëÈÄÅÂØπÂ∫îrouting keyÂØπÂ∫îÈòüÂàóÁöÑÊ∂àÊÅØÔºõÂà∞Ëææ<strong>ÊåâÁÖßÈúÄË¶ÅÊé•Êî∂</strong>ÁöÑÊïàÊûúÔºõÂπ∂‰∏îËøô‰∫õrouting keyÂèØ‰ª•‰ΩøÁî®ÈÄöÈÖçÁ¨¶„ÄÇ</p>
<p>Âú®ÊâßË°åÂÆåÊµãËØï‰ª£Á†ÅÂêéÔºåÂÖ∂ÂÆûÂà∞RabbitMQÁöÑÁÆ°ÁêÜÂêéÂè∞ÊâæÂà∞<code>Exchanges</code>ÈÄâÈ°πÂç°ÔºåÁÇπÂáª <code>topic_exchange</code> ÁöÑ‰∫§Êç¢Êú∫ÔºåÂèØ‰ª•Êü•ÁúãÂà∞Â¶Ç‰∏ãÁöÑÁªëÂÆöÔºö</p>
<p><img src="https://s2.loli.net/2022/04/12/Lgl9mkefA624j7q.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556032433333"></p>
<h3 id="4-5-4-Â∞èÁªì"><a href="#4-5-4-Â∞èÁªì" class="headerlink" title="4.5.4. Â∞èÁªì"></a>4.5.4. Â∞èÁªì</h3><p>Topic‰∏ªÈ¢òÊ®°ÂºèÂèØ‰ª•ÂÆûÁé∞ <code>Publish/SubscribeÂèëÂ∏É‰∏éËÆ¢ÈòÖÊ®°Âºè</code> Âíå <code> RoutingË∑ØÁî±Ê®°Âºè</code> ÁöÑÂäüËÉΩÔºõÂè™ÊòØTopicÂú®ÈÖçÁΩÆrouting key ÁöÑÊó∂ÂÄôÂèØ‰ª•‰ΩøÁî®ÈÄöÈÖçÁ¨¶ÔºåÊòæÂæóÊõ¥Âä†ÁÅµÊ¥ª„ÄÇ</p>
<h2 id="4-6-Ê®°ÂºèÊÄªÁªì"><a href="#4-6-Ê®°ÂºèÊÄªÁªì" class="headerlink" title="4.6. Ê®°ÂºèÊÄªÁªì"></a>4.6. Ê®°ÂºèÊÄªÁªì</h2><p>RabbitMQÂ∑•‰ΩúÊ®°ÂºèÔºö<br><strong>1„ÄÅÁÆÄÂçïÊ®°Âºè HelloWorld</strong><br>‰∏Ä‰∏™Áîü‰∫ßËÄÖ„ÄÅ‰∏Ä‰∏™Ê∂àË¥πËÄÖÔºå‰∏çÈúÄË¶ÅËÆæÁΩÆ‰∫§Êç¢Êú∫Ôºà‰ΩøÁî®ÈªòËÆ§ÁöÑ‰∫§Êç¢Êú∫Ôºâ</p>
<p><strong>2„ÄÅÂ∑•‰ΩúÈòüÂàóÊ®°Âºè Work Queue</strong><br>‰∏Ä‰∏™Áîü‰∫ßËÄÖ„ÄÅÂ§ö‰∏™Ê∂àË¥πËÄÖÔºàÁ´û‰∫âÂÖ≥Á≥ªÔºâÔºå‰∏çÈúÄË¶ÅËÆæÁΩÆ‰∫§Êç¢Êú∫Ôºà‰ΩøÁî®ÈªòËÆ§ÁöÑ‰∫§Êç¢Êú∫Ôºâ</p>
<p><strong>3„ÄÅÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè Publish&#x2F;subscribe</strong><br>ÈúÄË¶ÅËÆæÁΩÆÁ±ªÂûã‰∏∫fanoutÁöÑ‰∫§Êç¢Êú∫ÔºåÂπ∂‰∏î‰∫§Êç¢Êú∫ÂíåÈòüÂàóËøõË°åÁªëÂÆöÔºåÂΩìÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫ÂêéÔºå‰∫§Êç¢Êú∫‰ºöÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÁªëÂÆöÁöÑÈòüÂàó</p>
<p><strong>4„ÄÅË∑ØÁî±Ê®°Âºè Routing</strong><br>ÈúÄË¶ÅËÆæÁΩÆÁ±ªÂûã‰∏∫directÁöÑ‰∫§Êç¢Êú∫Ôºå‰∫§Êç¢Êú∫ÂíåÈòüÂàóËøõË°åÁªëÂÆöÔºåÂπ∂‰∏îÊåáÂÆörouting keyÔºåÂΩìÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫ÂêéÔºå‰∫§Êç¢Êú∫‰ºöÊ†πÊçÆrouting keyÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÂØπÂ∫îÁöÑÈòüÂàó</p>
<p><strong>5„ÄÅÈÄöÈÖçÁ¨¶Ê®°Âºè Topic</strong><br>ÈúÄË¶ÅËÆæÁΩÆÁ±ªÂûã‰∏∫topicÁöÑ‰∫§Êç¢Êú∫Ôºå‰∫§Êç¢Êú∫ÂíåÈòüÂàóËøõË°åÁªëÂÆöÔºåÂπ∂‰∏îÊåáÂÆöÈÄöÈÖçÁ¨¶ÊñπÂºèÁöÑrouting keyÔºåÂΩìÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫ÂêéÔºå‰∫§Êç¢Êú∫‰ºöÊ†πÊçÆrouting keyÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞ÂØπÂ∫îÁöÑÈòüÂàó</p>
<h1 id="5-Spring-Êï¥ÂêàRabbitMQ"><a href="#5-Spring-Êï¥ÂêàRabbitMQ" class="headerlink" title="5. Spring Êï¥ÂêàRabbitMQ"></a>5. Spring Êï¥ÂêàRabbitMQ</h1><h2 id="5-1-Êê≠Âª∫Áîü‰∫ßËÄÖÂ∑•Á®ã"><a href="#5-1-Êê≠Âª∫Áîü‰∫ßËÄÖÂ∑•Á®ã" class="headerlink" title="5.1. Êê≠Âª∫Áîü‰∫ßËÄÖÂ∑•Á®ã"></a>5.1. Êê≠Âª∫Áîü‰∫ßËÄÖÂ∑•Á®ã</h2><h3 id="5-1-1-ÂàõÂª∫Â∑•Á®ã"><a href="#5-1-1-ÂàõÂª∫Â∑•Á®ã" class="headerlink" title="5.1.1. ÂàõÂª∫Â∑•Á®ã"></a>5.1.1. ÂàõÂª∫Â∑•Á®ã</h3><p><img src="https://s2.loli.net/2022/04/12/UJBiThtb62N1Wjn.png" srcset="/Hexo/img/loading.gif" lazyload alt="1565149342994"></p>
<p><img src="https://s2.loli.net/2022/04/12/fmAG9cW4CesypUl.png" srcset="/Hexo/img/loading.gif" lazyload alt="1565144326498"></p>
<h3 id="5-1-2-Ê∑ªÂä†‰æùËµñ"><a href="#5-1-2-Ê∑ªÂä†‰æùËµñ" class="headerlink" title="5.1.2. Ê∑ªÂä†‰æùËµñ"></a>5.1.2. Ê∑ªÂä†‰æùËµñ</h3><p>‰øÆÊîπpom.xmlÊñá‰ª∂ÂÜÖÂÆπ‰∏∫Â¶Ç‰∏ãÔºö</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-rabbitmq-producer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.7.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.amqp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-rabbit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.8.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.7.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="5-1-3-ÈÖçÁΩÆÊï¥Âêà"><a href="#5-1-3-ÈÖçÁΩÆÊï¥Âêà" class="headerlink" title="5.1.3. ÈÖçÁΩÆÊï¥Âêà"></a>5.1.3. ÈÖçÁΩÆÊï¥Âêà</h3><ol>
<li>ÂàõÂª∫<code>spring-rabbitmq-producer\src\main\resources\properties\rabbitmq.properties</code>ËøûÊé•ÂèÇÊï∞Á≠âÈÖçÁΩÆÊñá‰ª∂Ôºõ</li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">rabbitmq.host</span>=<span class="hljs-string">192.168.12.135</span><br><span class="hljs-attr">rabbitmq.port</span>=<span class="hljs-string">5672</span><br><span class="hljs-attr">rabbitmq.username</span>=<span class="hljs-string">heima</span><br><span class="hljs-attr">rabbitmq.password</span>=<span class="hljs-string">heima</span><br><span class="hljs-attr">rabbitmq.virtual-host</span>=<span class="hljs-string">/itcast</span><br></code></pre></td></tr></table></figure>



<ol start="2">
<li>ÂàõÂª∫ <code>spring-rabbitmq-producer\src\main\resources\spring\spring-rabbitmq.xml</code> Êï¥ÂêàÈÖçÁΩÆÊñá‰ª∂Ôºõ</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:rabbit</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/rabbit&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/rabbit</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/rabbit/spring-rabbit.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:properties/rabbitmq.properties&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ÂÆö‰πârabbitmq connectionFactory --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:connection-factory</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.host&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.port&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">username</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.username&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.password&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">virtual-host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.virtual-host&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--ÂÆö‰πâÁÆ°ÁêÜ‰∫§Êç¢Êú∫„ÄÅÈòüÂàó--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:admin</span> <span class="hljs-attr">connection-factory</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--ÂÆö‰πâÊåÅ‰πÖÂåñÈòüÂàóÔºå‰∏çÂ≠òÂú®ÂàôËá™Âä®ÂàõÂª∫Ôºõ‰∏çÁªëÂÆöÂà∞‰∫§Êç¢Êú∫ÂàôÁªëÂÆöÂà∞ÈªòËÆ§‰∫§Êç¢Êú∫</span><br><span class="hljs-comment">    ÈªòËÆ§‰∫§Êç¢Êú∫Á±ªÂûã‰∏∫directÔºåÂêçÂ≠ó‰∏∫Ôºö&quot;&quot;ÔºåË∑ØÁî±ÈîÆ‰∏∫ÈòüÂàóÁöÑÂêçÁß∞</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_queue&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_queue&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ÂπøÊí≠ÔºõÊâÄÊúâÈòüÂàóÈÉΩËÉΩÊî∂Âà∞Ê∂àÊÅØ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ --&gt;</span><br>    <span class="hljs-comment">&lt;!--ÂÆö‰πâÂπøÊí≠‰∫§Êç¢Êú∫‰∏≠ÁöÑÊåÅ‰πÖÂåñÈòüÂàóÔºå‰∏çÂ≠òÂú®ÂàôËá™Âä®ÂàõÂª∫--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_fanout_queue_1&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_fanout_queue_1&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--ÂÆö‰πâÂπøÊí≠‰∫§Êç¢Êú∫‰∏≠ÁöÑÊåÅ‰πÖÂåñÈòüÂàóÔºå‰∏çÂ≠òÂú®ÂàôËá™Âä®ÂàõÂª∫--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_fanout_queue_2&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_fanout_queue_2&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--ÂÆö‰πâÂπøÊí≠Á±ªÂûã‰∫§Êç¢Êú∫ÔºõÂπ∂ÁªëÂÆö‰∏äËø∞‰∏§‰∏™ÈòüÂàó--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:fanout-exchange</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_fanout_exchange&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_fanout_exchange&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:bindings</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_fanout_queue_1&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_fanout_queue_2&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:bindings</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:fanout-exchange</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ÈÄöÈÖçÁ¨¶Ôºõ*ÂåπÈÖç‰∏Ä‰∏™ÂçïËØçÔºå#ÂåπÈÖçÂ§ö‰∏™ÂçïËØç ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ --&gt;</span><br>    <span class="hljs-comment">&lt;!--ÂÆö‰πâÂπøÊí≠‰∫§Êç¢Êú∫‰∏≠ÁöÑÊåÅ‰πÖÂåñÈòüÂàóÔºå‰∏çÂ≠òÂú®ÂàôËá™Âä®ÂàõÂª∫--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_topic_queue_star&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_topic_queue_star&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--ÂÆö‰πâÂπøÊí≠‰∫§Êç¢Êú∫‰∏≠ÁöÑÊåÅ‰πÖÂåñÈòüÂàóÔºå‰∏çÂ≠òÂú®ÂàôËá™Âä®ÂàõÂª∫--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_topic_queue_well&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_topic_queue_well&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--ÂÆö‰πâÂπøÊí≠‰∫§Êç¢Êú∫‰∏≠ÁöÑÊåÅ‰πÖÂåñÈòüÂàóÔºå‰∏çÂ≠òÂú®ÂàôËá™Âä®ÂàõÂª∫--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_topic_queue_well2&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_topic_queue_well2&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:topic-exchange</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_topic_exchange&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_topic_exchange&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:bindings</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;heima.*&quot;</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_topic_queue_star&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;heima.#&quot;</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_topic_queue_well&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;itcast.#&quot;</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_topic_queue_well2&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:bindings</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:topic-exchange</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--ÂÆö‰πârabbitTemplateÂØπË±°Êìç‰ΩúÂèØ‰ª•Âú®‰ª£Á†Å‰∏≠Êñπ‰æøÂèëÈÄÅÊ∂àÊÅØ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;rabbitTemplate&quot;</span> <span class="hljs-attr">connection-factory</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="5-1-4-ÂèëÈÄÅÊ∂àÊÅØ"><a href="#5-1-4-ÂèëÈÄÅÊ∂àÊÅØ" class="headerlink" title="5.1.4. ÂèëÈÄÅÊ∂àÊÅØ"></a>5.1.4. ÂèëÈÄÅÊ∂àÊÅØ</h3><p>ÂàõÂª∫ÊµãËØïÊñá‰ª∂ <code>spring-rabbitmq-producer\src\test\java\com\itheima\rabbitmq\ProducerTest.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="hljs-meta">@ContextConfiguration(locations = &quot;classpath:spring/spring-rabbitmq.xml&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProducerTest</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RabbitTemplate rabbitTemplate;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Âè™ÂèëÈòüÂàóÊ∂àÊÅØ</span><br><span class="hljs-comment">     * ÈªòËÆ§‰∫§Êç¢Êú∫Á±ªÂûã‰∏∫ direct</span><br><span class="hljs-comment">     * ‰∫§Êç¢Êú∫ÁöÑÂêçÁß∞‰∏∫Á©∫ÔºåË∑ØÁî±ÈîÆ‰∏∫ÈòüÂàóÁöÑÂêçÁß∞</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queueTest</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//Ë∑ØÁî±ÈîÆ‰∏éÈòüÂàóÂêåÂêç</span><br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_queue&quot;</span>, <span class="hljs-string">&quot;Âè™ÂèëÈòüÂàóspring_queueÁöÑÊ∂àÊÅØ„ÄÇ&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ÂèëÈÄÅÂπøÊí≠</span><br><span class="hljs-comment">     * ‰∫§Êç¢Êú∫Á±ªÂûã‰∏∫ fanout</span><br><span class="hljs-comment">     * ÁªëÂÆöÂà∞ËØ•‰∫§Êç¢Êú∫ÁöÑÊâÄÊúâÈòüÂàóÈÉΩËÉΩÂ§üÊî∂Âà∞Ê∂àÊÅØ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fanoutTest</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöË∑ØÁî±ÈîÆÂêçÔºàÂπøÊí≠ËÆæÁΩÆ‰∏∫Á©∫Ôºâ</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÂèëÈÄÅÁöÑÊ∂àÊÅØÂÜÖÂÆπ</span><br><span class="hljs-comment">         */</span><br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_fanout_exchange&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;ÂèëÈÄÅÂà∞spring_fanout_exchange‰∫§Êç¢Êú∫ÁöÑÂπøÊí≠Ê∂àÊÅØ&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ÈÄöÈÖçÁ¨¶</span><br><span class="hljs-comment">     * ‰∫§Êç¢Êú∫Á±ªÂûã‰∏∫ topic</span><br><span class="hljs-comment">     * ÂåπÈÖçË∑ØÁî±ÈîÆÁöÑÈÄöÈÖçÁ¨¶Ôºå*Ë°®Á§∫‰∏Ä‰∏™ÂçïËØçÔºå#Ë°®Á§∫Â§ö‰∏™ÂçïËØç</span><br><span class="hljs-comment">     * ÁªëÂÆöÂà∞ËØ•‰∫§Êç¢Êú∫ÁöÑÂåπÈÖçÈòüÂàóËÉΩÂ§üÊî∂Âà∞ÂØπÂ∫îÊ∂àÊÅØ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">topicTest</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ÂèÇÊï∞1Ôºö‰∫§Êç¢Êú∫ÂêçÁß∞</span><br><span class="hljs-comment">         * ÂèÇÊï∞2ÔºöË∑ØÁî±ÈîÆÂêç</span><br><span class="hljs-comment">         * ÂèÇÊï∞3ÔºöÂèëÈÄÅÁöÑÊ∂àÊÅØÂÜÖÂÆπ</span><br><span class="hljs-comment">         */</span><br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_topic_exchange&quot;</span>, <span class="hljs-string">&quot;heima.bj&quot;</span>, <span class="hljs-string">&quot;ÂèëÈÄÅÂà∞spring_topic_exchange‰∫§Êç¢Êú∫heima.bjÁöÑÊ∂àÊÅØ&quot;</span>);<br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_topic_exchange&quot;</span>, <span class="hljs-string">&quot;heima.bj.1&quot;</span>, <span class="hljs-string">&quot;ÂèëÈÄÅÂà∞spring_topic_exchange‰∫§Êç¢Êú∫heima.bj.1ÁöÑÊ∂àÊÅØ&quot;</span>);<br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_topic_exchange&quot;</span>, <span class="hljs-string">&quot;heima.bj.2&quot;</span>, <span class="hljs-string">&quot;ÂèëÈÄÅÂà∞spring_topic_exchange‰∫§Êç¢Êú∫heima.bj.2ÁöÑÊ∂àÊÅØ&quot;</span>);<br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_topic_exchange&quot;</span>, <span class="hljs-string">&quot;itcast.cn&quot;</span>, <span class="hljs-string">&quot;ÂèëÈÄÅÂà∞spring_topic_exchange‰∫§Êç¢Êú∫itcast.cnÁöÑÊ∂àÊÅØ&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h2 id="5-2-Êê≠Âª∫Ê∂àË¥πËÄÖÂ∑•Á®ã"><a href="#5-2-Êê≠Âª∫Ê∂àË¥πËÄÖÂ∑•Á®ã" class="headerlink" title="5.2. Êê≠Âª∫Ê∂àË¥πËÄÖÂ∑•Á®ã"></a>5.2. Êê≠Âª∫Ê∂àË¥πËÄÖÂ∑•Á®ã</h2><h3 id="5-2-1-ÂàõÂª∫Â∑•Á®ã"><a href="#5-2-1-ÂàõÂª∫Â∑•Á®ã" class="headerlink" title="5.2.1. ÂàõÂª∫Â∑•Á®ã"></a>5.2.1. ÂàõÂª∫Â∑•Á®ã</h3><p><img src="https://s2.loli.net/2022/04/11/hAfd7MP2VgKs4mS.png" srcset="/Hexo/img/loading.gif" lazyload alt="1565149374831"></p>
<p><img src="https://s2.loli.net/2022/04/11/IdxwWu6DcpAVSCt.png" srcset="/Hexo/img/loading.gif" lazyload alt="1565144775216"></p>
<h3 id="5-2-2-Ê∑ªÂä†‰æùËµñ"><a href="#5-2-2-Ê∑ªÂä†‰æùËµñ" class="headerlink" title="5.2.2. Ê∑ªÂä†‰æùËµñ"></a>5.2.2. Ê∑ªÂä†‰æùËµñ</h3><p>‰øÆÊîπpom.xmlÊñá‰ª∂ÂÜÖÂÆπ‰∏∫Â¶Ç‰∏ãÔºö</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-rabbitmq-consumer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.7.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.amqp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-rabbit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.8.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="5-2-3-ÈÖçÁΩÆÊï¥Âêà"><a href="#5-2-3-ÈÖçÁΩÆÊï¥Âêà" class="headerlink" title="5.2.3. ÈÖçÁΩÆÊï¥Âêà"></a>5.2.3. ÈÖçÁΩÆÊï¥Âêà</h3><ol>
<li>ÂàõÂª∫<code>spring-rabbitmq-consumer\src\main\resources\properties\rabbitmq.properties</code>ËøûÊé•ÂèÇÊï∞Á≠âÈÖçÁΩÆÊñá‰ª∂Ôºõ</li>
</ol>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">rabbitmq.host</span>=<span class="hljs-string">192.168.12.135</span><br><span class="hljs-attr">rabbitmq.port</span>=<span class="hljs-string">5672</span><br><span class="hljs-attr">rabbitmq.username</span>=<span class="hljs-string">heima</span><br><span class="hljs-attr">rabbitmq.password</span>=<span class="hljs-string">heima</span><br><span class="hljs-attr">rabbitmq.virtual-host</span>=<span class="hljs-string">/itcast</span><br></code></pre></td></tr></table></figure>



<ol start="2">
<li>ÂàõÂª∫ <code>spring-rabbitmq-consumer\src\main\resources\spring\spring-rabbitmq.xml</code> Êï¥ÂêàÈÖçÁΩÆÊñá‰ª∂Ôºõ</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:rabbit</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/rabbit&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/rabbit</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/rabbit/spring-rabbit.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:properties/rabbitmq.properties&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ÂÆö‰πârabbitmq connectionFactory --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:connection-factory</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.host&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.port&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">username</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.username&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.password&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">virtual-host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.virtual-host&#125;&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;springQueueListener&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.SpringQueueListener&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fanoutListener1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.FanoutListener1&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fanoutListener2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.FanoutListener2&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;topicListenerStar&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.TopicListenerStar&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;topicListenerWell&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.TopicListenerWell&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;topicListenerWell2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.TopicListenerWell2&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener-container</span> <span class="hljs-attr">connection-factory</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;springQueueListener&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_queue&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;fanoutListener1&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_fanout_queue_1&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;fanoutListener2&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_fanout_queue_2&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;topicListenerStar&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_topic_queue_star&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;topicListenerWell&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_topic_queue_well&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;topicListenerWell2&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_topic_queue_well2&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:listener-container</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="5-2-4-Ê∂àÊÅØÁõëÂê¨Âô®"><a href="#5-2-4-Ê∂àÊÅØÁõëÂê¨Âô®" class="headerlink" title="5.2.4. Ê∂àÊÅØÁõëÂê¨Âô®"></a>5.2.4. Ê∂àÊÅØÁõëÂê¨Âô®</h3><h4 id="1ÔºâÈòüÂàóÁõëÂê¨Âô®"><a href="#1ÔºâÈòüÂàóÁõëÂê¨Âô®" class="headerlink" title="1ÔºâÈòüÂàóÁõëÂê¨Âô®"></a>1ÔºâÈòüÂàóÁõëÂê¨Âô®</h4><p>ÂàõÂª∫ <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\SpringQueueListener.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringQueueListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;Êé•Êî∂Ë∑ØÁî±ÂêçÁß∞‰∏∫Ôºö%sÔºåË∑ØÁî±ÈîÆ‰∏∫Ôºö%sÔºåÈòüÂàóÂêç‰∏∫Ôºö%sÁöÑÊ∂àÊÅØÔºö%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="2ÔºâÂπøÊí≠ÁõëÂê¨Âô®1"><a href="#2ÔºâÂπøÊí≠ÁõëÂê¨Âô®1" class="headerlink" title="2ÔºâÂπøÊí≠ÁõëÂê¨Âô®1"></a>2ÔºâÂπøÊí≠ÁõëÂê¨Âô®1</h4><p>ÂàõÂª∫ <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\FanoutListener1.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FanoutListener1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;ÂπøÊí≠ÁõëÂê¨Âô®1ÔºöÊé•Êî∂Ë∑ØÁî±ÂêçÁß∞‰∏∫Ôºö%sÔºåË∑ØÁî±ÈîÆ‰∏∫Ôºö%sÔºåÈòüÂàóÂêç‰∏∫Ôºö%sÁöÑÊ∂àÊÅØÔºö%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="3ÔºâÂπøÊí≠ÁõëÂê¨Âô®2"><a href="#3ÔºâÂπøÊí≠ÁõëÂê¨Âô®2" class="headerlink" title="3ÔºâÂπøÊí≠ÁõëÂê¨Âô®2"></a>3ÔºâÂπøÊí≠ÁõëÂê¨Âô®2</h4><p>ÂàõÂª∫ <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\FanoutListener2.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FanoutListener2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;ÂπøÊí≠ÁõëÂê¨Âô®2ÔºöÊé•Êî∂Ë∑ØÁî±ÂêçÁß∞‰∏∫Ôºö%sÔºåË∑ØÁî±ÈîÆ‰∏∫Ôºö%sÔºåÈòüÂàóÂêç‰∏∫Ôºö%sÁöÑÊ∂àÊÅØÔºö%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="4ÔºâÊòüÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®"><a href="#4ÔºâÊòüÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®" class="headerlink" title="4ÔºâÊòüÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®"></a>4ÔºâÊòüÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®</h4><p>ÂàõÂª∫ <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\TopicListenerStar.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopicListenerStar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;ÈÄöÈÖçÁ¨¶*ÁõëÂê¨Âô®ÔºöÊé•Êî∂Ë∑ØÁî±ÂêçÁß∞‰∏∫Ôºö%sÔºåË∑ØÁî±ÈîÆ‰∏∫Ôºö%sÔºåÈòüÂàóÂêç‰∏∫Ôºö%sÁöÑÊ∂àÊÅØÔºö%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="5Ôºâ‰∫ïÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®"><a href="#5Ôºâ‰∫ïÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®" class="headerlink" title="5Ôºâ‰∫ïÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®"></a>5Ôºâ‰∫ïÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®</h4><p>ÂàõÂª∫ <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\TopicListenerWell.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopicListenerWell</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;ÈÄöÈÖçÁ¨¶#ÁõëÂê¨Âô®ÔºöÊé•Êî∂Ë∑ØÁî±ÂêçÁß∞‰∏∫Ôºö%sÔºåË∑ØÁî±ÈîÆ‰∏∫Ôºö%sÔºåÈòüÂàóÂêç‰∏∫Ôºö%sÁöÑÊ∂àÊÅØÔºö%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="6Ôºâ‰∫ïÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®2"><a href="#6Ôºâ‰∫ïÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®2" class="headerlink" title="6Ôºâ‰∫ïÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®2"></a>6Ôºâ‰∫ïÂè∑ÈÄöÈÖçÁ¨¶ÁõëÂê¨Âô®2</h4><p>ÂàõÂª∫ <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\TopicListenerWell2.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopicListenerWell2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;ÈÄöÈÖçÁ¨¶#ÁõëÂê¨Âô®2ÔºöÊé•Êî∂Ë∑ØÁî±ÂêçÁß∞‰∏∫Ôºö%sÔºåË∑ØÁî±ÈîÆ‰∏∫Ôºö%sÔºåÈòüÂàóÂêç‰∏∫Ôºö%sÁöÑÊ∂àÊÅØÔºö%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h1 id="6-Spring-BootÊï¥ÂêàRabbitMQ"><a href="#6-Spring-BootÊï¥ÂêàRabbitMQ" class="headerlink" title="6. Spring BootÊï¥ÂêàRabbitMQ"></a>6. Spring BootÊï¥ÂêàRabbitMQ</h1><h2 id="6-1-ÁÆÄ‰ªã"><a href="#6-1-ÁÆÄ‰ªã" class="headerlink" title="6.1. ÁÆÄ‰ªã"></a>6.1. ÁÆÄ‰ªã</h2><p>Âú®SpringÈ°πÁõÆ‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî®Spring-RabbitÂéªÊìç‰ΩúRabbitMQ<br><a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-amqp">https://github.com/spring-projects/spring-amqp</a></p>
<p>Â∞§ÂÖ∂ÊòØÂú®spring bootÈ°πÁõÆ‰∏≠Âè™ÈúÄË¶ÅÂºïÂÖ•ÂØπÂ∫îÁöÑamqpÂêØÂä®Âô®‰æùËµñÂç≥ÂèØÔºåÊñπ‰æøÁöÑ‰ΩøÁî®RabbitTemplateÂèëÈÄÅÊ∂àÊÅØÔºå‰ΩøÁî®Ê≥®Ëß£Êé•Êî∂Ê∂àÊÅØ„ÄÇ</p>
<p><em>‰∏ÄËà¨Âú®ÂºÄÂèëËøáÁ®ã‰∏≠</em>Ôºö</p>
<p><strong>Áîü‰∫ßËÄÖÂ∑•Á®ãÔºö</strong></p>
<ol>
<li><p>application.ymlÊñá‰ª∂ÈÖçÁΩÆRabbitMQÁõ∏ÂÖ≥‰ø°ÊÅØÔºõ</p>
</li>
<li><p>Âú®Áîü‰∫ßËÄÖÂ∑•Á®ã‰∏≠ÁºñÂÜôÈÖçÁΩÆÁ±ªÔºåÁî®‰∫éÂàõÂª∫‰∫§Êç¢Êú∫ÂíåÈòüÂàóÔºåÂπ∂ËøõË°åÁªëÂÆö</p>
</li>
<li><p>Ê≥®ÂÖ•RabbitTemplateÂØπË±°ÔºåÈÄöËøáRabbitTemplateÂØπË±°ÂèëÈÄÅÊ∂àÊÅØÂà∞‰∫§Êç¢Êú∫</p>
</li>
</ol>
<p><strong>Ê∂àË¥πËÄÖÂ∑•Á®ãÔºö</strong></p>
<ol>
<li><p>application.ymlÊñá‰ª∂ÈÖçÁΩÆRabbitMQÁõ∏ÂÖ≥‰ø°ÊÅØ</p>
</li>
<li><p>ÂàõÂª∫Ê∂àÊÅØÂ§ÑÁêÜÁ±ªÔºåÁî®‰∫éÊé•Êî∂ÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØÂπ∂ËøõË°åÂ§ÑÁêÜ</p>
</li>
</ol>
<h2 id="5-2-Êê≠Âª∫Áîü‰∫ßËÄÖÂ∑•Á®ã"><a href="#5-2-Êê≠Âª∫Áîü‰∫ßËÄÖÂ∑•Á®ã" class="headerlink" title="5.2. Êê≠Âª∫Áîü‰∫ßËÄÖÂ∑•Á®ã"></a>5.2. Êê≠Âª∫Áîü‰∫ßËÄÖÂ∑•Á®ã</h2><h3 id="5-2-1-ÂàõÂª∫Â∑•Á®ã-1"><a href="#5-2-1-ÂàõÂª∫Â∑•Á®ã-1" class="headerlink" title="5.2.1. ÂàõÂª∫Â∑•Á®ã"></a>5.2.1. ÂàõÂª∫Â∑•Á®ã</h3><p>ÂàõÂª∫Áîü‰∫ßËÄÖÂ∑•Á®ãspringboot-rabbitmq-producer</p>
<p><img src="https://s2.loli.net/2022/04/11/WszUHpxQVlreyZM.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556072078816"></p>
<p><img src="https://s2.loli.net/2022/04/11/AFtz8De6BSHqoZR.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556072084653"></p>
<h3 id="5-2-2-Ê∑ªÂä†‰æùËµñ-1"><a href="#5-2-2-Ê∑ªÂä†‰æùËµñ-1" class="headerlink" title="5.2.2. Ê∑ªÂä†‰æùËµñ"></a>5.2.2. Ê∑ªÂä†‰æùËµñ</h3><p>‰øÆÊîπpom.xmlÊñá‰ª∂ÂÜÖÂÆπ‰∏∫Â¶Ç‰∏ãÔºö</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-rabbitmq-producer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="5-2-3-ÂêØÂä®Á±ª"><a href="#5-2-3-ÂêØÂä®Á±ª" class="headerlink" title="5.2.3. ÂêØÂä®Á±ª"></a>5.2.3. ÂêØÂä®Á±ª</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProducerApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(ProducerApplication.class);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h3 id="5-2-4-ÈÖçÁΩÆRabbitMQ"><a href="#5-2-4-ÈÖçÁΩÆRabbitMQ" class="headerlink" title="5.2.4. ÈÖçÁΩÆRabbitMQ"></a>5.2.4. ÈÖçÁΩÆRabbitMQ</h3><h4 id="1ÔºâÈÖçÁΩÆÊñá‰ª∂"><a href="#1ÔºâÈÖçÁΩÆÊñá‰ª∂" class="headerlink" title="1ÔºâÈÖçÁΩÆÊñá‰ª∂"></a>1ÔºâÈÖçÁΩÆÊñá‰ª∂</h4><p>ÂàõÂª∫application.ymlÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">rabbitmq:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span><br>    <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/itcast</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">heima</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">heima</span><br></code></pre></td></tr></table></figure>



<h4 id="2ÔºâÁªëÂÆö‰∫§Êç¢Êú∫ÂíåÈòüÂàó"><a href="#2ÔºâÁªëÂÆö‰∫§Êç¢Êú∫ÂíåÈòüÂàó" class="headerlink" title="2ÔºâÁªëÂÆö‰∫§Êç¢Êú∫ÂíåÈòüÂàó"></a>2ÔºâÁªëÂÆö‰∫§Êç¢Êú∫ÂíåÈòüÂàó</h4><p>ÂàõÂª∫RabbitMQÈòüÂàó‰∏é‰∫§Êç¢Êú∫ÁªëÂÆöÁöÑÈÖçÁΩÆÁ±ªcom.itheima.rabbitmq.config.RabbitMQConfig</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.config;<br><br><span class="hljs-keyword">import</span> org.springframework.amqp.core.*;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMQConfig</span> &#123;<br>    <span class="hljs-comment">//‰∫§Êç¢Êú∫ÂêçÁß∞</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ITEM_TOPIC_EXCHANGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;item_topic_exchange&quot;</span>;<br>    <span class="hljs-comment">//ÈòüÂàóÂêçÁß∞</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ITEM_QUEUE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;item_queue&quot;</span>;<br><br>    <span class="hljs-comment">//Â£∞Êòé‰∫§Êç¢Êú∫</span><br>    <span class="hljs-meta">@Bean(&quot;itemTopicExchange&quot;)</span><br>    <span class="hljs-keyword">public</span> Exchange <span class="hljs-title function_">topicExchange</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> ExchangeBuilder.topicExchange(ITEM_TOPIC_EXCHANGE).durable(<span class="hljs-literal">true</span>).build();<br>    &#125;<br><br>    <span class="hljs-comment">//Â£∞ÊòéÈòüÂàó</span><br>    <span class="hljs-meta">@Bean(&quot;itemQueue&quot;)</span><br>    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">itemQueue</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> QueueBuilder.durable(ITEM_QUEUE).build();<br>    &#125;<br><br>    <span class="hljs-comment">//ÁªëÂÆöÈòüÂàóÂíå‰∫§Êç¢Êú∫</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Binding <span class="hljs-title function_">itemQueueExchange</span><span class="hljs-params">(<span class="hljs-meta">@Qualifier(&quot;itemQueue&quot;)</span> Queue queue,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@Qualifier(&quot;itemTopicExchange&quot;)</span> Exchange exchange)</span>&#123;<br>        <span class="hljs-keyword">return</span> BindingBuilder.bind(queue).to(exchange).with(<span class="hljs-string">&quot;item.#&quot;</span>).noargs();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="5-3-Êê≠Âª∫Ê∂àË¥πËÄÖÂ∑•Á®ã"><a href="#5-3-Êê≠Âª∫Ê∂àË¥πËÄÖÂ∑•Á®ã" class="headerlink" title="5.3. Êê≠Âª∫Ê∂àË¥πËÄÖÂ∑•Á®ã"></a>5.3. Êê≠Âª∫Ê∂àË¥πËÄÖÂ∑•Á®ã</h2><h3 id="5-3-1-ÂàõÂª∫Â∑•Á®ã"><a href="#5-3-1-ÂàõÂª∫Â∑•Á®ã" class="headerlink" title="5.3.1. ÂàõÂª∫Â∑•Á®ã"></a>5.3.1. ÂàõÂª∫Â∑•Á®ã</h3><p>ÂàõÂª∫Ê∂àË¥πËÄÖÂ∑•Á®ãspringboot-rabbitmq-consumer</p>
<p><img src="https://s2.loli.net/2022/04/11/qRTpgoOcxSFniQM.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556073553841"></p>
<p><img src="https://s2.loli.net/2022/04/11/U8zXWLsH3iK26vh.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556073567786"></p>
<h3 id="5-3-2-Ê∑ªÂä†‰æùËµñ"><a href="#5-3-2-Ê∑ªÂä†‰æùËµñ" class="headerlink" title="5.3.2. Ê∑ªÂä†‰æùËµñ"></a>5.3.2. Ê∑ªÂä†‰æùËµñ</h3><p>‰øÆÊîπpom.xmlÊñá‰ª∂ÂÜÖÂÆπ‰∏∫Â¶Ç‰∏ãÔºö</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-rabbitmq-consumer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="5-3-3-ÂêØÂä®Á±ª"><a href="#5-3-3-ÂêØÂä®Á±ª" class="headerlink" title="5.3.3. ÂêØÂä®Á±ª"></a>5.3.3. ÂêØÂä®Á±ª</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsumerApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(ConsumerApplication.class);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="5-3-4-ÈÖçÁΩÆRabbitMQ"><a href="#5-3-4-ÈÖçÁΩÆRabbitMQ" class="headerlink" title="5.3.4. ÈÖçÁΩÆRabbitMQ"></a>5.3.4. ÈÖçÁΩÆRabbitMQ</h3><p>ÂàõÂª∫application.ymlÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">rabbitmq:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span><br>    <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/itcast</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">heima</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">heima</span><br></code></pre></td></tr></table></figure>



<h3 id="5-3-5-Ê∂àÊÅØÁõëÂê¨Â§ÑÁêÜÁ±ª"><a href="#5-3-5-Ê∂àÊÅØÁõëÂê¨Â§ÑÁêÜÁ±ª" class="headerlink" title="5.3.5. Ê∂àÊÅØÁõëÂê¨Â§ÑÁêÜÁ±ª"></a>5.3.5. Ê∂àÊÅØÁõëÂê¨Â§ÑÁêÜÁ±ª</h3><p>ÁºñÂÜôÊ∂àÊÅØÁõëÂê¨Âô®com.itheima.rabbitmq.listener.MyListener</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.listener;<br><br><span class="hljs-keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyListener</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ÁõëÂê¨Êüê‰∏™ÈòüÂàóÁöÑÊ∂àÊÅØ</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> message Êé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RabbitListener(queues = &quot;item_queue&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myListener1</span><span class="hljs-params">(String message)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Ê∂àË¥πËÄÖÊé•Êî∂Âà∞ÁöÑÊ∂àÊÅØ‰∏∫Ôºö&quot;</span> + message);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h2 id="5-4-ÊµãËØï"><a href="#5-4-ÊµãËØï" class="headerlink" title="5.4. ÊµãËØï"></a>5.4. ÊµãËØï</h2><p>Âú®Áîü‰∫ßËÄÖÂ∑•Á®ãspringboot-rabbitmq-producer‰∏≠ÂàõÂª∫ÊµãËØïÁ±ªÔºåÂèëÈÄÅÊ∂àÊÅØÔºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.config.RabbitMQConfig;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> org.junit.runner.RunWith;<br><span class="hljs-keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><span class="hljs-keyword">import</span> org.springframework.test.context.junit4.SpringRunner;<br><br><span class="hljs-meta">@RunWith(SpringRunner.class)</span><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMQTest</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RabbitTemplate rabbitTemplate;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;<br>        rabbitTemplate.convertAndSend(RabbitMQConfig.ITEM_TOPIC_EXCHANGE, <span class="hljs-string">&quot;item.insert&quot;</span>, <span class="hljs-string">&quot;ÂïÜÂìÅÊñ∞Â¢ûÔºårouting key ‰∏∫item.insert&quot;</span>);<br>        rabbitTemplate.convertAndSend(RabbitMQConfig.ITEM_TOPIC_EXCHANGE, <span class="hljs-string">&quot;item.update&quot;</span>, <span class="hljs-string">&quot;ÂïÜÂìÅ‰øÆÊîπÔºårouting key ‰∏∫item.update&quot;</span>);<br>        rabbitTemplate.convertAndSend(RabbitMQConfig.ITEM_TOPIC_EXCHANGE, <span class="hljs-string">&quot;item.delete&quot;</span>, <span class="hljs-string">&quot;ÂïÜÂìÅÂà†Èô§Ôºårouting key ‰∏∫item.delete&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>ÂÖàËøêË°å‰∏äËø∞ÊµãËØïÁ®ãÂ∫èÔºà‰∫§Êç¢Êú∫ÂíåÈòüÂàóÊâçËÉΩÂÖàË¢´Â£∞ÊòéÂíåÁªëÂÆöÔºâÔºåÁÑ∂ÂêéÂêØÂä®Ê∂àË¥πËÄÖÔºõÂú®Ê∂àË¥πËÄÖÂ∑•Á®ãspringboot-rabbitmq-consumer‰∏≠ÊéßÂà∂Âè∞Êü•ÁúãÊòØÂê¶Êé•Êî∂Âà∞ÂØπÂ∫îÊ∂àÊÅØ„ÄÇ</p>
<p>Âè¶Â§ñÔºõ‰πüÂèØ‰ª•Âú®RabbitMQÁöÑÁÆ°ÁêÜÊéßÂà∂Âè∞‰∏≠Êü•ÁúãÂà∞‰∫§Êç¢Êú∫‰∏éÈòüÂàóÁöÑÁªëÂÆöÔºö</p>
<p><img src="https://s2.loli.net/2022/04/11/EKpGewsACzFdkBN.png" srcset="/Hexo/img/loading.gif" lazyload alt="1556074827222"></p>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/Hexo/categories/RabbitMQ%F0%9F%90%B1%E2%80%8D%F0%9F%91%A4/" class="category-chain-item">RabbitMQüê±‚Äçüë§</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/Hexo/tags/RabbitMQ/">#RabbitMQ</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>RabbitMQÂü∫Á°ÄSkill</div>
      <div>https://1902756969.github.io/Hexo/2022/04/12/RabbitMQ ËÆ≤‰πâ/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>‰ΩúËÄÖ</div>
          <div>Êòü</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>ÂèëÂ∏É‰∫é</div>
          <div>2022Âπ¥4Êúà12Êó•</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>ËÆ∏ÂèØÂçèËÆÆ</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ÁΩ≤Âêç">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/Hexo/2022/04/16/rabbitMQ%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/" title="RabbitMQÈ´òÁ∫ßÁâπÊÄß">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">RabbitMQÈ´òÁ∫ßÁâπÊÄß</span>
                        <span class="visible-mobile">‰∏ä‰∏ÄÁØá</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/Hexo/2022/04/12/RabbitMQ%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/" title="RabbitMQÂÆâË£ÖËØ¥ÊòéÊñáÊ°£">
                        <span class="hidden-mobile">RabbitMQÂÆâË£ÖËØ¥ÊòéÊñáÊ°£</span>
                        <span class="visible-mobile">‰∏ã‰∏ÄÁØá</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ÁõÆÂΩï</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">ÊêúÁ¥¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">ÂÖ≥ÈîÆËØç</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        ÊÄªËÆøÈóÆÈáè 
        <span id="busuanzi_value_site_pv"></span>
         Ê¨°
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        ÊÄªËÆøÂÆ¢Êï∞ 
        <span id="busuanzi_value_site_uv"></span>
         ‰∫∫
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/Hexo/js/events.js" ></script>
<script  src="/Hexo/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  




  
    <script  src="/Hexo/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/Hexo/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ‰∏ªÈ¢òÁöÑÂêØÂä®È°πÔºåÂ∞ÜÂÆÉ‰øùÊåÅÂú®ÊúÄÂ∫ïÈÉ® -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/Hexo/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">ÂçöÂÆ¢Âú®ÂÖÅËÆ∏ JavaScript ËøêË°åÁöÑÁéØÂ¢É‰∏ãÊµèËßàÊïàÊûúÊõ¥‰Ω≥</div>
  </noscript>
<script src="/Hexo/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/Hexo/live2dw/assets/tororo.model.json"},"display":{"position":"left","width":120,"height":300},"mobile":{"show":false},"log":false});</script></body>
</html>
