

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/Hexo/img/csdn.png">
  <link rel="icon" href="/Hexo/img/csdn.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#DAA520">
  <meta name="author" content="Êòü">
  <meta name="keywords" content="">
  
    <meta name="description" content="Á¨¨‰∫åÁ´†ÔºöRedisÈ´òÁ∫ßÂ≠¶‰π†ÁõÆÊ†áÁõÆÊ†á1ÔºöËÉΩÂ§üËØ¥Âá∫redis‰∏≠ÁöÑÊï∞ÊçÆÂà†Èô§Á≠ñ‰∏éÁï•Ê∑òÊ±∞Á≠ñÁï• ÁõÆÊ†á2ÔºöËÉΩÂ§üËØ¥Âá∫‰∏ª‰ªéÂ§çÂà∂ÁöÑÊ¶ÇÂøµÔºåÂ∑•‰ΩúÊµÅÁ®ã‰ª•ÂèäÂú∫ÊôØÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ°à ÁõÆÊ†á3ÔºöËÉΩÂ§üËØ¥Âá∫Âì®ÂÖµÁöÑ‰ΩúÁî®‰ª•ÂèäÂ∑•‰ΩúÂéüÁêÜÔºå‰ª•ÂèäÂ¶Ç‰ΩïÂêØÁî®Âì®ÂÖµ ÁõÆÊ†á4ÔºöËÉΩÂ§üËØ¥Âá∫ÈõÜÁæ§ÁöÑÊû∂ÊûÑËÆæËÆ°ÔºåÂÆåÊàêÈõÜÁæ§ÁöÑÊê≠Âª∫ ÁõÆÊ†á5ÔºöËÉΩÂ§üËØ¥Âá∫ÁºìÂ≠òÈ¢ÑÁÉ≠ÔºåÈõ™Â¥©ÔºåÂáªÁ©øÔºåÁ©øÈÄèÁöÑÊ¶ÇÂøµÔºåËÉΩËØ¥Âá∫redisÁöÑÁõ∏ÂÖ≥ÁõëÊéßÊåáÊ†á 1.Êï∞ÊçÆÂà†Èô§‰∏éÊ∑òÊ±∞Á≠ñÁï•1.1 ËøáÊúüÊï∞ÊçÆ1.1.1 Redis">
<meta property="og:type" content="article">
<meta property="og:title" content="RedisÈ´òÁ∫ß">
<meta property="og:url" content="https://1902756969.github.io/Hexo/2022/04/09/sql/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20Redis%E9%AB%98%E7%BA%A7/index.html">
<meta property="og:site_name" content="ÈòøÊòüÁöÑÂçöÂÆ¢">
<meta property="og:description" content="Á¨¨‰∫åÁ´†ÔºöRedisÈ´òÁ∫ßÂ≠¶‰π†ÁõÆÊ†áÁõÆÊ†á1ÔºöËÉΩÂ§üËØ¥Âá∫redis‰∏≠ÁöÑÊï∞ÊçÆÂà†Èô§Á≠ñ‰∏éÁï•Ê∑òÊ±∞Á≠ñÁï• ÁõÆÊ†á2ÔºöËÉΩÂ§üËØ¥Âá∫‰∏ª‰ªéÂ§çÂà∂ÁöÑÊ¶ÇÂøµÔºåÂ∑•‰ΩúÊµÅÁ®ã‰ª•ÂèäÂú∫ÊôØÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ°à ÁõÆÊ†á3ÔºöËÉΩÂ§üËØ¥Âá∫Âì®ÂÖµÁöÑ‰ΩúÁî®‰ª•ÂèäÂ∑•‰ΩúÂéüÁêÜÔºå‰ª•ÂèäÂ¶Ç‰ΩïÂêØÁî®Âì®ÂÖµ ÁõÆÊ†á4ÔºöËÉΩÂ§üËØ¥Âá∫ÈõÜÁæ§ÁöÑÊû∂ÊûÑËÆæËÆ°ÔºåÂÆåÊàêÈõÜÁæ§ÁöÑÊê≠Âª∫ ÁõÆÊ†á5ÔºöËÉΩÂ§üËØ¥Âá∫ÁºìÂ≠òÈ¢ÑÁÉ≠ÔºåÈõ™Â¥©ÔºåÂáªÁ©øÔºåÁ©øÈÄèÁöÑÊ¶ÇÂøµÔºåËÉΩËØ¥Âá∫redisÁöÑÁõ∏ÂÖ≥ÁõëÊéßÊåáÊ†á 1.Êï∞ÊçÆÂà†Èô§‰∏éÊ∑òÊ±∞Á≠ñÁï•1.1 ËøáÊúüÊï∞ÊçÆ1.1.1 Redis">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.w3cschool.cn/attachments/image/20170622/1498119653712274.png">
<meta property="article:published_time" content="2022-04-09T10:29:54.000Z">
<meta property="article:modified_time" content="2022-11-17T15:25:45.819Z">
<meta property="article:author" content="Êòü">
<meta property="article:tag" content="Redis">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://www.w3cschool.cn/attachments/image/20170622/1498119653712274.png">
  
  
  <title>RedisÈ´òÁ∫ß - ÈòøÊòüÁöÑÂçöÂÆ¢</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ‰∏ªÈ¢ò‰æùËµñÁöÑÂõæÊ†áÂ∫ìÔºå‰∏çË¶ÅËá™Ë°å‰øÆÊîπ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/Hexo/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/Hexo/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/Hexo/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"1902756969.github.io","root":"/Hexo/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":" ‚ù°"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/Hexo/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/Hexo/js/utils.js" ></script>
  <script  src="/Hexo/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/Hexo/">
      <strong>üêõ ZhaFi‰∫∫</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/">
                <i class="iconfont icon-home-fill"></i>
                È¶ñÈ°µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/archives/">
                <i class="iconfont icon-archive-fill"></i>
                ÂΩíÊ°£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/categories/">
                <i class="iconfont icon-category-fill"></i>
                ÂàÜÁ±ª
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Ê†áÁ≠æ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/about/">
                <i class="iconfont icon-user-fill"></i>
                ÂÖ≥‰∫é
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Hexo/links/">
                <i class="iconfont icon-link-fill"></i>
                ÂèãÈìæ
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/Hexo/img/bg5.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="RedisÈ´òÁ∫ß"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Êòü
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-04-09 18:29" pubdate>
          2022Âπ¥4Êúà9Êó• Êôö‰∏ä
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          17k Â≠ó
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          140 ÂàÜÈíü
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> Ê¨°
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">RedisÈ´òÁ∫ß</h1>
            
            <div class="markdown-body">
              
              <meta name="referrer" content="no-referrer">

<h1 id="Á¨¨‰∫åÁ´†ÔºöRedisÈ´òÁ∫ß"><a href="#Á¨¨‰∫åÁ´†ÔºöRedisÈ´òÁ∫ß" class="headerlink" title="Á¨¨‰∫åÁ´†ÔºöRedisÈ´òÁ∫ß"></a>Á¨¨‰∫åÁ´†ÔºöRedisÈ´òÁ∫ß</h1><h2 id="Â≠¶‰π†ÁõÆÊ†á"><a href="#Â≠¶‰π†ÁõÆÊ†á" class="headerlink" title="Â≠¶‰π†ÁõÆÊ†á"></a>Â≠¶‰π†ÁõÆÊ†á</h2><p>ÁõÆÊ†á1ÔºöËÉΩÂ§üËØ¥Âá∫redis‰∏≠ÁöÑÊï∞ÊçÆÂà†Èô§Á≠ñ‰∏éÁï•Ê∑òÊ±∞Á≠ñÁï•</p>
<p>ÁõÆÊ†á2ÔºöËÉΩÂ§üËØ¥Âá∫‰∏ª‰ªéÂ§çÂà∂ÁöÑÊ¶ÇÂøµÔºåÂ∑•‰ΩúÊµÅÁ®ã‰ª•ÂèäÂú∫ÊôØÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ°à</p>
<p>ÁõÆÊ†á3ÔºöËÉΩÂ§üËØ¥Âá∫Âì®ÂÖµÁöÑ‰ΩúÁî®‰ª•ÂèäÂ∑•‰ΩúÂéüÁêÜÔºå‰ª•ÂèäÂ¶Ç‰ΩïÂêØÁî®Âì®ÂÖµ</p>
<p>ÁõÆÊ†á4ÔºöËÉΩÂ§üËØ¥Âá∫ÈõÜÁæ§ÁöÑÊû∂ÊûÑËÆæËÆ°ÔºåÂÆåÊàêÈõÜÁæ§ÁöÑÊê≠Âª∫</p>
<p>ÁõÆÊ†á5ÔºöËÉΩÂ§üËØ¥Âá∫ÁºìÂ≠òÈ¢ÑÁÉ≠ÔºåÈõ™Â¥©ÔºåÂáªÁ©øÔºåÁ©øÈÄèÁöÑÊ¶ÇÂøµÔºåËÉΩËØ¥Âá∫redisÁöÑÁõ∏ÂÖ≥ÁõëÊéßÊåáÊ†á</p>
<h2 id="1-Êï∞ÊçÆÂà†Èô§‰∏éÊ∑òÊ±∞Á≠ñÁï•"><a href="#1-Êï∞ÊçÆÂà†Èô§‰∏éÊ∑òÊ±∞Á≠ñÁï•" class="headerlink" title="1.Êï∞ÊçÆÂà†Èô§‰∏éÊ∑òÊ±∞Á≠ñÁï•"></a>1.Êï∞ÊçÆÂà†Èô§‰∏éÊ∑òÊ±∞Á≠ñÁï•</h2><h3 id="1-1-ËøáÊúüÊï∞ÊçÆ"><a href="#1-1-ËøáÊúüÊï∞ÊçÆ" class="headerlink" title="1.1 ËøáÊúüÊï∞ÊçÆ"></a>1.1 ËøáÊúüÊï∞ÊçÆ</h3><h4 id="1-1-1-Redis‰∏≠ÁöÑÊï∞ÊçÆÁâπÂæÅ"><a href="#1-1-1-Redis‰∏≠ÁöÑÊï∞ÊçÆÁâπÂæÅ" class="headerlink" title="1.1.1 Redis‰∏≠ÁöÑÊï∞ÊçÆÁâπÂæÅ"></a><strong>1.1.1 Redis‰∏≠ÁöÑÊï∞ÊçÆÁâπÂæÅ</strong></h4><p>RedisÊòØ‰∏ÄÁßçÂÜÖÂ≠òÁ∫ßÊï∞ÊçÆÂ∫ìÔºåÊâÄÊúâÊï∞ÊçÆÂùáÂ≠òÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂèØ‰ª•ÈÄöËøáTTLÊåá‰ª§Ëé∑ÂèñÂÖ∂Áä∂ÊÄÅ</p>
<p>TTLËøîÂõûÁöÑÂÄºÊúâ‰∏âÁßçÊÉÖÂÜµÔºöÊ≠£Êï∞Ôºå-1Ôºå-2</p>
<ul>
<li><strong>Ê≠£Êï∞</strong>Ôºö‰ª£Ë°®ËØ•Êï∞ÊçÆÂú®ÂÜÖÂ≠ò‰∏≠ËøòËÉΩÂ≠òÊ¥ªÁöÑÊó∂Èó¥</li>
<li><strong>-1</strong>ÔºöÊ∞∏‰πÖÊúâÊïàÁöÑÊï∞ÊçÆ</li>
<li><strong>2</strong> ÔºöÂ∑≤ÁªèËøáÊúüÁöÑÊï∞ÊçÆ ÊàñË¢´Âà†Èô§ÁöÑÊï∞ÊçÆ Êàñ Êú™ÂÆö‰πâÁöÑÊï∞ÊçÆ</li>
</ul>
<p><strong>Âà†Èô§Á≠ñÁï•Â∞±ÊòØÈíàÂØπÂ∑≤ËøáÊúüÊï∞ÊçÆÁöÑÂ§ÑÁêÜÁ≠ñÁï•</strong>ÔºåÂ∑≤ËøáÊúüÁöÑÊï∞ÊçÆÊòØÁúüÁöÑÂ∞±Á´ãÂç≥Âà†Èô§‰∫ÜÂêóÔºüÂÖ∂ÂÆû‰πü‰∏çÊòØÔºåÊàë‰ª¨‰ºöÊúâÂ§öÁßçÂà†Èô§Á≠ñÁï•ÔºåÊòØÂàÜÊÉÖÂÜµÁöÑÔºåÂú®‰∏çÂêåÁöÑÂú∫ÊôØ‰∏ã‰ΩøÁî®‰∏çÂêåÁöÑÂà†Èô§ÊñπÂºè‰ºöÊúâ‰∏çÂêåÊïàÊûúÔºåËøô‰πüÊ≠£ÊòØÊàë‰ª¨Ë¶ÅÂ∞ÜÁöÑÊï∞ÊçÆÁöÑÂà†Èô§Á≠ñÁï•ÁöÑÈóÆÈ¢ò</p>
<h4 id="1-1-2-Êó∂ÊïàÊÄßÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÁªìÊûÑ"><a href="#1-1-2-Êó∂ÊïàÊÄßÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÁªìÊûÑ" class="headerlink" title="1.1.2 Êó∂ÊïàÊÄßÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÁªìÊûÑ"></a>1.1.2 Êó∂ÊïàÊÄßÊï∞ÊçÆÁöÑÂ≠òÂÇ®ÁªìÊûÑ</h4><p>Âú®Redis‰∏≠ÔºåÂ¶Ç‰ΩïÁªôÊï∞ÊçÆËÆæÁΩÆÂÆÉÁöÑÂ§±ÊïàÂë®ÊúüÂë¢ÔºüÊï∞ÊçÆÁöÑÊó∂ÊïàÂú®redis‰∏≠Â¶Ç‰ΩïÂ≠òÂÇ®Âë¢ÔºüÁúã‰∏ãÂõæÔºö</p>
<p><img src="https://i0.hdslb.com/bfs/album/1bf6a33adb727509ecbdfb0a48a6cd03cdde020c.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>ËøáÊúüÊï∞ÊçÆÊòØ‰∏ÄÂùóÁã¨Á´ãÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåHashÁªìÊûÑÔºåfieldÊòØÂÜÖÂ≠òÂú∞ÂùÄÔºåvalueÊòØËøáÊúüÊó∂Èó¥Ôºå‰øùÂ≠ò‰∫ÜÊâÄÊúâkeyÁöÑËøáÊúüÊèèËø∞ÔºåÂú®ÊúÄÁªàËøõË°åËøáÊúüÂ§ÑÁêÜÁöÑÊó∂ÂÄôÔºåÂØπËØ•Á©∫Èó¥ÁöÑÊï∞ÊçÆËøõË°åÊ£ÄÊµãÔºå ÂΩìÊó∂Èó¥Âà∞Êúü‰πãÂêéÈÄöËøáfieldÊâæÂà∞ÂÜÖÂ≠òËØ•Âú∞ÂùÄÂ§ÑÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéËøõË°åÁõ∏ÂÖ≥Êìç‰Ωú„ÄÇ</p>
<h3 id="1-2-Êï∞ÊçÆÂà†Èô§Á≠ñÁï•"><a href="#1-2-Êï∞ÊçÆÂà†Èô§Á≠ñÁï•" class="headerlink" title="1.2 Êï∞ÊçÆÂà†Èô§Á≠ñÁï•"></a>1.2 Êï∞ÊçÆÂà†Èô§Á≠ñÁï•</h3><h4 id="1-2-1-Êï∞ÊçÆÂà†Èô§Á≠ñÁï•ÁöÑÁõÆÊ†á"><a href="#1-2-1-Êï∞ÊçÆÂà†Èô§Á≠ñÁï•ÁöÑÁõÆÊ†á" class="headerlink" title="1.2.1 Êï∞ÊçÆÂà†Èô§Á≠ñÁï•ÁöÑÁõÆÊ†á"></a>1.2.1 Êï∞ÊçÆÂà†Èô§Á≠ñÁï•ÁöÑÁõÆÊ†á</h4><p>Âú®ÂÜÖÂ≠òÂç†Áî®‰∏éCPUÂç†Áî®‰πãÈó¥ÂØªÊâæ‰∏ÄÁßçÂπ≥Ë°°ÔºåÈ°æÊ≠§Â§±ÂΩºÈÉΩ‰ºöÈÄ†ÊàêÊï¥‰ΩìredisÊÄßËÉΩÁöÑ‰∏ãÈôçÔºåÁîöËá≥ÂºïÂèëÊúçÂä°Âô®ÂÆïÊú∫Êàñ ÂÜÖÂ≠òÊ≥ÑÈú≤</p>
<p>ÈíàÂØπËøáÊúüÊï∞ÊçÆË¶ÅËøõË°åÂà†Èô§ÁöÑÊó∂ÂÄôÈÉΩÊúâÂì™‰∫õÂà†Èô§Á≠ñÁï•Âë¢Ôºü</p>
<ul>
<li>1.ÂÆöÊó∂Âà†Èô§</li>
<li>2.ÊÉ∞ÊÄßÂà†Èô§</li>
<li>3.ÂÆöÊúüÂà†Èô§</li>
</ul>
<h4 id="1-2-2-ÂÆöÊó∂Âà†Èô§"><a href="#1-2-2-ÂÆöÊó∂Âà†Èô§" class="headerlink" title="1.2.2 ÂÆöÊó∂Âà†Èô§"></a>1.2.2 ÂÆöÊó∂Âà†Èô§</h4><p>ÂàõÂª∫‰∏Ä‰∏™ÂÆöÊó∂Âô®ÔºåÂΩìkeyËÆæÁΩÆÊúâËøáÊúüÊó∂Èó¥Ôºå‰∏îËøáÊúüÊó∂Èó¥Âà∞ËææÊó∂ÔºåÁî±ÂÆöÊó∂Âô®‰ªªÂä°Á´ãÂç≥ÊâßË°åÂØπÈîÆÁöÑÂà†Èô§Êìç‰Ωú</p>
<ul>
<li><strong>‰ºòÁÇπ</strong>ÔºöËäÇÁ∫¶ÂÜÖÂ≠òÔºåÂà∞Êó∂Â∞±Âà†Èô§ÔºåÂø´ÈÄüÈáäÊîæÊéâ‰∏çÂøÖË¶ÅÁöÑÂÜÖÂ≠òÂç†Áî®</li>
<li><strong>Áº∫ÁÇπ</strong>ÔºöCPUÂéãÂäõÂæàÂ§ßÔºåÊó†ËÆ∫CPUÊ≠§Êó∂Ë¥üËΩΩÈáèÂ§öÈ´òÔºåÂùáÂç†Áî®CPUÔºå‰ºöÂΩ±ÂìçredisÊúçÂä°Âô®ÂìçÂ∫îÊó∂Èó¥ÂíåÊåá‰ª§ÂêûÂêêÈáè</li>
<li><strong>ÊÄªÁªì</strong>ÔºöÁî®Â§ÑÁêÜÂô®ÊÄßËÉΩÊç¢ÂèñÂ≠òÂÇ®Á©∫Èó¥ÔºàÊãøÊó∂Èó¥Êç¢Á©∫Èó¥Ôºâ</li>
</ul>
<p><img src="https://i0.hdslb.com/bfs/album/8aca4af998b6ed389c2572cdce2ab5062a3f3198.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h4 id="1-2-3-ÊÉ∞ÊÄßÂà†Èô§"><a href="#1-2-3-ÊÉ∞ÊÄßÂà†Èô§" class="headerlink" title="1.2.3 ÊÉ∞ÊÄßÂà†Èô§"></a>1.2.3 ÊÉ∞ÊÄßÂà†Èô§</h4><p>Êï∞ÊçÆÂà∞ËææËøáÊúüÊó∂Èó¥Ôºå‰∏çÂÅöÂ§ÑÁêÜ„ÄÇÁ≠â‰∏ãÊ¨°ËÆøÈóÆËØ•Êï∞ÊçÆÊó∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÂà§Êñ≠</p>
<ol>
<li>Â¶ÇÊûúÊú™ËøáÊúüÔºåËøîÂõûÊï∞ÊçÆ</li>
<li>ÂèëÁé∞Â∑≤ËøáÊúüÔºåÂà†Èô§ÔºåËøîÂõû‰∏çÂ≠òÂú®</li>
</ol>
<ul>
<li><strong>‰ºòÁÇπ</strong>ÔºöËäÇÁ∫¶CPUÊÄßËÉΩÔºåÂèëÁé∞ÂøÖÈ°ªÂà†Èô§ÁöÑÊó∂ÂÄôÊâçÂà†Èô§</li>
<li><strong>Áº∫ÁÇπ</strong>ÔºöÂÜÖÂ≠òÂéãÂäõÂæàÂ§ßÔºåÂá∫Áé∞ÈïøÊúüÂç†Áî®ÂÜÖÂ≠òÁöÑÊï∞ÊçÆ</li>
<li><strong>ÊÄªÁªì</strong>ÔºöÁî®Â≠òÂÇ®Á©∫Èó¥Êç¢ÂèñÂ§ÑÁêÜÂô®ÊÄßËÉΩÔºàÊãøÊó∂Èó¥Êç¢Á©∫Èó¥Ôºâ</li>
</ul>
<p><img src="https://i0.hdslb.com/bfs/album/09b3ec373b7b0857fcadca4fe7b809ab6447489e.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h4 id="1-2-4-ÂÆöÊúüÂà†Èô§"><a href="#1-2-4-ÂÆöÊúüÂà†Èô§" class="headerlink" title="1.2.4 ÂÆöÊúüÂà†Èô§"></a>1.2.4 ÂÆöÊúüÂà†Èô§</h4><p>ÂÆöÊó∂Âà†Èô§ÂíåÊÉ∞ÊÄßÂà†Èô§Ëøô‰∏§ÁßçÊñπÊ°àÈÉΩÊòØËµ∞ÁöÑÊûÅÁ´ØÔºåÈÇ£ÊúâÊ≤°ÊúâÊäò‰∏≠ÊñπÊ°àÔºü</p>
<p>Êàë‰ª¨Êù•ËÆ≤redisÁöÑÂÆöÊúüÂà†Èô§ÊñπÊ°àÔºö</p>
<ul>
<li><p>RedisÂêØÂä®ÊúçÂä°Âô®ÂàùÂßãÂåñÊó∂ÔºåËØªÂèñÈÖçÁΩÆserver.hzÁöÑÂÄºÔºåÈªòËÆ§‰∏∫10</p>
</li>
<li><p>ÊØèÁßíÈíüÊâßË°åserver.hzÊ¨°<strong>serverCron()</strong>‚Äî‚Äî‚Äì&gt;<strong>databasesCron()</strong>‚Äî‚Äî‚Äî&gt;<strong>activeExpireCycle()</strong></p>
</li>
<li><p>**activeExpireCycle()*<em>ÂØπÊØè‰∏™expires[</em>]ÈÄê‰∏ÄËøõË°åÊ£ÄÊµãÔºåÊØèÊ¨°ÊâßË°åËÄóÊó∂Ôºö250ms&#x2F;server.hz</p>
</li>
<li><p>ÂØπÊüê‰∏™expires[*]Ê£ÄÊµãÊó∂ÔºåÈöèÊú∫ÊåëÈÄâW‰∏™keyÊ£ÄÊµã</p>
</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Â¶ÇÊûúkeyË∂ÖÊó∂ÔºåÂà†Èô§key<br><br>Â¶ÇÊûú‰∏ÄËΩÆ‰∏≠Âà†Èô§ÁöÑkeyÁöÑÊï∞Èáè&gt;W<span class="hljs-emphasis">*25%ÔºåÂæ™ÁéØËØ•ËøáÁ®ã</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">Â¶ÇÊûú‰∏ÄËΩÆ‰∏≠Âà†Èô§ÁöÑkeyÁöÑÊï∞Èáè‚â§W*</span>25%ÔºåÊ£ÄÊü•‰∏ã‰∏Ä‰∏™expires[<span class="hljs-emphasis">*]Ôºå0-15Âæ™ÁéØ</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">WÂèñÂÄº=ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOPÂ±ûÊÄßÂÄº</span><br></code></pre></td></tr></table></figure>

<ul>
<li><p>ÂèÇÊï∞current_dbÁî®‰∫éËÆ∞ÂΩï<strong>activeExpireCycle()</strong> ËøõÂÖ•Âì™‰∏™expires[*] ÊâßË°å</p>
</li>
<li><p>Â¶ÇÊûúactiveExpireCycle()ÊâßË°åÊó∂Èó¥Âà∞ÊúüÔºå‰∏ãÊ¨°‰ªécurrent_dbÁªßÁª≠Âêë‰∏ãÊâßË°å</p>
</li>
</ul>
<p><img src="https://i0.hdslb.com/bfs/album/eb56c8f1ffd3448cf6d0afe0307c652cc909c052.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>ÊÄªÁöÑÊù•ËØ¥ÔºöÂÆöÊúüÂà†Èô§Â∞±ÊòØÂë®ÊúüÊÄßËΩÆËØ¢redisÂ∫ì‰∏≠ÁöÑÊó∂ÊïàÊÄßÊï∞ÊçÆÔºåÈááÁî®ÈöèÊú∫ÊäΩÂèñÁöÑÁ≠ñÁï•ÔºåÂà©Áî®ËøáÊúüÊï∞ÊçÆÂç†ÊØîÁöÑÊñπÂºèÊéßÂà∂Âà†Èô§È¢ëÂ∫¶</p>
<ul>
<li><strong>ÁâπÁÇπ1</strong>ÔºöCPUÊÄßËÉΩÂç†Áî®ËÆæÁΩÆÊúâÂ≥∞ÂÄºÔºåÊ£ÄÊµãÈ¢ëÂ∫¶ÂèØËá™ÂÆö‰πâËÆæÁΩÆ</li>
<li><strong>ÁâπÁÇπ2</strong>ÔºöÂÜÖÂ≠òÂéãÂäõ‰∏çÊòØÂæàÂ§ßÔºåÈïøÊúüÂç†Áî®ÂÜÖÂ≠òÁöÑÂÜ∑Êï∞ÊçÆ‰ºöË¢´ÊåÅÁª≠Ê∏ÖÁêÜ</li>
<li><strong>ÊÄªÁªì</strong>ÔºöÂë®ÊúüÊÄßÊäΩÊü•Â≠òÂÇ®Á©∫Èó¥ÔºàÈöèÊú∫ÊäΩÊü•ÔºåÈáçÁÇπÊäΩÊü•Ôºâ</li>
</ul>
<h4 id="1-2-5-Âà†Èô§Á≠ñÁï•ÂØπÊØî"><a href="#1-2-5-Âà†Èô§Á≠ñÁï•ÂØπÊØî" class="headerlink" title="1.2.5 Âà†Èô§Á≠ñÁï•ÂØπÊØî"></a>1.2.5 Âà†Èô§Á≠ñÁï•ÂØπÊØî</h4><p>1ÔºöÂÆöÊó∂Âà†Èô§Ôºö</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ËäÇÁ∫¶ÂÜÖÂ≠òÔºåÊó†Âç†Áî®,<br>‰∏çÂàÜÊó∂ÊÆµÂç†Áî®CPUËµÑÊ∫êÔºåÈ¢ëÂ∫¶È´ò,<br>ÊãøÊó∂Èó¥Êç¢Á©∫Èó¥<br></code></pre></td></tr></table></figure>

<p>2ÔºöÊÉ∞ÊÄßÂà†Èô§Ôºö</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ÂÜÖÂ≠òÂç†Áî®‰∏•Èáç<br>Âª∂Êó∂ÊâßË°åÔºåCPUÂà©Áî®ÁéáÈ´ò<br>ÊãøÁ©∫Èó¥Êç¢Êó∂Èó¥<br></code></pre></td></tr></table></figure>

<p>3ÔºöÂÆöÊúüÂà†Èô§Ôºö</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ÂÜÖÂ≠òÂÆöÊúüÈöèÊú∫Ê∏ÖÁêÜ<br>ÊØèÁßíËä±Ë¥πÂõ∫ÂÆöÁöÑCPUËµÑÊ∫êÁª¥Êä§ÂÜÖÂ≠ò<br>ÈöèÊú∫ÊäΩÊü•ÔºåÈáçÁÇπÊäΩÊü•<br></code></pre></td></tr></table></figure>

<h3 id="1-3-Êï∞ÊçÆÊ∑òÊ±∞Á≠ñÁï•ÔºàÈÄêÂá∫ÁÆóÊ≥ïÔºâ"><a href="#1-3-Êï∞ÊçÆÊ∑òÊ±∞Á≠ñÁï•ÔºàÈÄêÂá∫ÁÆóÊ≥ïÔºâ" class="headerlink" title="1.3 Êï∞ÊçÆÊ∑òÊ±∞Á≠ñÁï•ÔºàÈÄêÂá∫ÁÆóÊ≥ïÔºâ"></a>1.3 Êï∞ÊçÆÊ∑òÊ±∞Á≠ñÁï•ÔºàÈÄêÂá∫ÁÆóÊ≥ïÔºâ</h3><h4 id="1-3-1-Ê∑òÊ±∞Á≠ñÁï•Ê¶ÇËø∞"><a href="#1-3-1-Ê∑òÊ±∞Á≠ñÁï•Ê¶ÇËø∞" class="headerlink" title="1.3.1 Ê∑òÊ±∞Á≠ñÁï•Ê¶ÇËø∞"></a>1.3.1 Ê∑òÊ±∞Á≠ñÁï•Ê¶ÇËø∞</h4><p>‰ªÄ‰πàÂè´Êï∞ÊçÆÊ∑òÊ±∞Á≠ñÁï•Ôºü‰ªÄ‰πàÊ†∑ÁöÑÂ∫îÁî®Âú∫ÊôØÈúÄË¶ÅÁî®Âà∞Êï∞ÊçÆÊ∑òÊ±∞Á≠ñÁï•Ôºü</p>
<p>ÂΩìÊñ∞Êï∞ÊçÆËøõÂÖ•redisÊó∂ÔºåÂ¶ÇÊûúÂÜÖÂ≠ò‰∏çË∂≥ÊÄé‰πàÂäûÔºüÂú®ÊâßË°åÊØè‰∏Ä‰∏™ÂëΩ‰ª§ÂâçÔºå‰ºöË∞ÉÁî®**freeMemoryIfNeeded()**Ê£ÄÊµãÂÜÖÂ≠òÊòØÂê¶ÂÖÖË∂≥„ÄÇÂ¶ÇÊûúÂÜÖÂ≠ò‰∏çÊª°Ë∂≥Êñ∞ Âä†ÂÖ•Êï∞ÊçÆÁöÑÊúÄ‰ΩéÂ≠òÂÇ®Ë¶ÅÊ±ÇÔºåredisË¶Å‰∏¥Êó∂Âà†Èô§‰∏Ä‰∫õÊï∞ÊçÆ‰∏∫ÂΩìÂâçÊåá‰ª§Ê∏ÖÁêÜÂ≠òÂÇ®Á©∫Èó¥„ÄÇÊ∏ÖÁêÜÊï∞ÊçÆÁöÑÁ≠ñÁï•Áß∞‰∏∫ÈÄêÂá∫ÁÆóÊ≥ï„ÄÇ</p>
<p>Ê≥®ÊÑèÔºöÈÄêÂá∫Êï∞ÊçÆÁöÑËøáÁ®ã‰∏çÊòØ100%ËÉΩÂ§üÊ∏ÖÁêÜÂá∫Ë∂≥Â§üÁöÑÂèØ‰ΩøÁî®ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂ¶ÇÊûú‰∏çÊàêÂäüÂàôÂèçÂ§çÊâßË°å„ÄÇÂΩìÂØπÊâÄÊúâÊï∞ÊçÆÂ∞ùËØïÂÆåÊØïÔºå  Â¶Ç‰∏çËÉΩËææÂà∞ÂÜÖÂ≠òÊ∏ÖÁêÜÁöÑË¶ÅÊ±ÇÔºåÂ∞ÜÂá∫Áé∞ÈîôËØØ‰ø°ÊÅØÂ¶Ç‰∏ã</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">(error) OOM command not allowed when used memory &gt;&#x27;maxmemory&#x27;<br></code></pre></td></tr></table></figure>

<h4 id="1-3-2-Á≠ñÁï•ÈÖçÁΩÆ"><a href="#1-3-2-Á≠ñÁï•ÈÖçÁΩÆ" class="headerlink" title="1.3.2 Á≠ñÁï•ÈÖçÁΩÆ"></a>1.3.2 Á≠ñÁï•ÈÖçÁΩÆ</h4><p>ÂΩ±ÂìçÊï∞ÊçÆÊ∑òÊ±∞ÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö</p>
<p>1ÔºöÊúÄÂ§ßÂèØ‰ΩøÁî®ÂÜÖÂ≠òÔºåÂç≥Âç†Áî®Áâ©ÁêÜÂÜÖÂ≠òÁöÑÊØî‰æãÔºåÈªòËÆ§ÂÄº‰∏∫0ÔºåË°®Á§∫‰∏çÈôêÂà∂„ÄÇÁîü‰∫ßÁéØÂ¢É‰∏≠Ê†πÊçÆÈúÄÊ±ÇËÆæÂÆöÔºåÈÄöÂ∏∏ËÆæÁΩÆÂú®50%‰ª•‰∏ä</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">maxmemory</span> <span class="hljs-string">?mb</span><br></code></pre></td></tr></table></figure>

<p>2ÔºöÊØèÊ¨°ÈÄâÂèñÂæÖÂà†Èô§Êï∞ÊçÆÁöÑ‰∏™Êï∞ÔºåÈááÁî®ÈöèÊú∫Ëé∑ÂèñÊï∞ÊçÆÁöÑÊñπÂºè‰Ωú‰∏∫ÂæÖÊ£ÄÊµãÂà†Èô§Êï∞ÊçÆ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">maxmemory-samples</span> <span class="hljs-string">count</span><br></code></pre></td></tr></table></figure>

<p>3ÔºöÂØπÊï∞ÊçÆËøõË°åÂà†Èô§ÁöÑÈÄâÊã©Á≠ñÁï•</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">maxmemory-policy</span> <span class="hljs-string">policy</span><br></code></pre></td></tr></table></figure>

<p>ÈÇ£Êï∞ÊçÆÂà†Èô§ÁöÑÁ≠ñÁï•policyÂà∞Â∫ïÊúâÂá†ÁßçÂë¢Ôºü‰∏ÄÂÖ±ÊòØ<strong>3Á±ª8Áßç</strong></p>
<p><strong>Á¨¨‰∏ÄÁ±ª</strong>ÔºöÊ£ÄÊµãÊòìÂ§±Êï∞ÊçÆÔºàÂèØËÉΩ‰ºöËøáÊúüÁöÑÊï∞ÊçÆÈõÜserver.db[i].expires Ôºâ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">volatile-lruÔºöÊåëÈÄâÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÊ∑òÊ±∞</span><br><span class="hljs-attr">volatile-lfuÔºöÊåëÈÄâÊúÄËøë‰ΩøÁî®Ê¨°Êï∞ÊúÄÂ∞ëÁöÑÊï∞ÊçÆÊ∑òÊ±∞</span><br><span class="hljs-attr">volatile-ttlÔºöÊåëÈÄâÂ∞ÜË¶ÅËøáÊúüÁöÑÊï∞ÊçÆÊ∑òÊ±∞</span><br><span class="hljs-attr">volatile-randomÔºö‰ªªÊÑèÈÄâÊã©Êï∞ÊçÆÊ∑òÊ±∞</span><br></code></pre></td></tr></table></figure>

<p><img src="https://i0.hdslb.com/bfs/album/1aee801ec621faab25deb200c62c9283d6570729.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p><strong>Á¨¨‰∫åÁ±ª</strong>ÔºöÊ£ÄÊµãÂÖ®Â∫ìÊï∞ÊçÆÔºàÊâÄÊúâÊï∞ÊçÆÈõÜserver.db[i].dict Ôºâ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">allkeys-lruÔºöÊåëÈÄâÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÊ∑òÊ±∞</span><br><span class="hljs-attr">allkeLyRs-lfuÔºöÔºöÊåëÈÄâÊúÄËøë‰ΩøÁî®Ê¨°Êï∞ÊúÄÂ∞ëÁöÑÊï∞ÊçÆÊ∑òÊ±∞</span><br><span class="hljs-attr">allkeys-randomÔºö‰ªªÊÑèÈÄâÊã©Êï∞ÊçÆÊ∑òÊ±∞ÔºåÁõ∏ÂΩì‰∫éÈöèÊú∫</span><br></code></pre></td></tr></table></figure>

<p><strong>Á¨¨‰∏âÁ±ª</strong>ÔºöÊîæÂºÉÊï∞ÊçÆÈ©±ÈÄê</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">no-envictionÔºàÈ©±ÈÄêÔºâÔºöÁ¶ÅÊ≠¢È©±ÈÄêÊï∞ÊçÆ(redis4.0‰∏≠ÈªòËÆ§Á≠ñÁï•)Ôºå‰ºöÂºïÂèëOOM(Out</span> <span class="hljs-string">Of Memory)</span><br></code></pre></td></tr></table></figure>

<p>Ê≥®ÊÑèÔºöËøô‰∫õÁ≠ñÁï•ÊòØÈÖçÁΩÆÂà∞Âì™‰∏™Â±ûÊÄß‰∏äÔºüÊÄé‰πàÈÖçÁΩÆÔºüÂ¶Ç‰∏ãÊâÄÁ§∫</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">maxmemory-policy</span> <span class="hljs-string">volatile-lru</span><br></code></pre></td></tr></table></figure>

<p><strong>Êï∞ÊçÆÊ∑òÊ±∞Á≠ñÁï•ÈÖçÁΩÆ‰æùÊçÆ</strong></p>
<p> ‰ΩøÁî®INFOÂëΩ‰ª§ËæìÂá∫ÁõëÊéß‰ø°ÊÅØÔºåÊü•ËØ¢ÁºìÂ≠ò hit Âíå miss ÁöÑÊ¨°Êï∞ÔºåÊ†πÊçÆ‰∏öÂä°ÈúÄÊ±ÇË∞É‰ºòRedisÈÖçÁΩÆ</p>
<h2 id="2-‰∏ª‰ªéÂ§çÂà∂"><a href="#2-‰∏ª‰ªéÂ§çÂà∂" class="headerlink" title="2.‰∏ª‰ªéÂ§çÂà∂"></a>2.‰∏ª‰ªéÂ§çÂà∂</h2><h3 id="2-1-‰∏ª‰ªéÂ§çÂà∂ÁÆÄ‰ªã"><a href="#2-1-‰∏ª‰ªéÂ§çÂà∂ÁÆÄ‰ªã" class="headerlink" title="2.1 ‰∏ª‰ªéÂ§çÂà∂ÁÆÄ‰ªã"></a>2.1 ‰∏ª‰ªéÂ§çÂà∂ÁÆÄ‰ªã</h3><h4 id="2-1-1-È´òÂèØÁî®"><a href="#2-1-1-È´òÂèØÁî®" class="headerlink" title="2.1.1 È´òÂèØÁî®"></a>2.1.1 È´òÂèØÁî®</h4><p>È¶ñÂÖàÊàë‰ª¨Ë¶ÅÁêÜËß£‰∫íËÅîÁΩëÂ∫îÁî®Âõ†‰∏∫ÂÖ∂Áã¨ÊúâÁöÑÁâπÊÄßÊàë‰ª¨ÊºîÂåñÂá∫ÁöÑ<strong>‰∏âÈ´ò</strong>Êû∂ÊûÑ</p>
<ul>
<li><p>È´òÂπ∂Âèë</p>
<blockquote>
<p>Â∫îÁî®Ë¶ÅÊèê‰æõÊüê‰∏Ä‰∏öÂä°Ë¶ÅËÉΩÊîØÊåÅÂæàÂ§öÂÆ¢Êà∑Á´ØÂêåÊó∂ËÆøÈóÆÁöÑËÉΩÂäõÔºåÊàë‰ª¨Áß∞‰∏∫Âπ∂ÂèëÔºåÈ´òÂπ∂ÂèëÊÑèÊÄùÂ∞±ÂæàÊòéÁ°Æ‰∫Ü</p>
</blockquote>
</li>
<li><p>È´òÊÄßËÉΩ</p>
<blockquote>
<p>ÊÄßËÉΩÂ∏¶ÁªôÊàë‰ª¨ÊúÄÁõ¥ËßÇÁöÑÊÑüÂèóÂ∞±ÊòØÔºöÈÄüÂ∫¶Âø´ÔºåÊó∂Èó¥Áü≠</p>
</blockquote>
</li>
<li><p>È´òÂèØÁî®</p>
</li>
</ul>
<p><strong>ÂèØÁî®ÊÄß</strong>Ôºö‰∏ÄÂπ¥‰∏≠Â∫îÁî®ÊúçÂä°Ê≠£Â∏∏ËøêË°åÁöÑÊó∂Èó¥Âç†ÂÖ®Âπ¥Êó∂Èó¥ÁöÑÁôæÂàÜÊØîÔºåÂ¶Ç‰∏ãÂõæÔºöË°®Á§∫‰∫ÜÂ∫îÁî®ÊúçÂä°Âú®ÂÖ®Âπ¥ÂÆïÊú∫ÁöÑÊó∂Èó¥</p>
<p><img src="https://i0.hdslb.com/bfs/album/77cf50f867d7adcafd37d75f3af38e9de11eb01a.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>Êàë‰ª¨ÊääËøô‰∫õÊó∂Èó¥Âä†Âú®‰∏ÄËµ∑Â∞±ÊòØÂÖ®Âπ¥Â∫îÁî®ÊúçÂä°‰∏çÂèØÁî®ÁöÑÊó∂Èó¥ÔºåÁÑ∂ÂêéÊàë‰ª¨ÂèØ‰ª•ÂæóÂà∞Â∫îÁî®ÊúçÂä°ÂÖ®Âπ¥ÂèØÁî®ÁöÑÊó∂Èó¥</p>
<blockquote>
<p>4Â∞èÊó∂27ÂàÜ15Áßí+11ÂàÜ36Áßí+2ÂàÜ16Áßí&#x3D;4Â∞èÊó∂41ÂàÜ7Áßí&#x3D;16867Áßí</p>
<p>1Âπ¥&#x3D;365<em>24</em>60*60&#x3D;31536000Áßí</p>
<p>ÂèØÁî®ÊÄß&#x3D;Ôºà31536000-16867Ôºâ&#x2F;31536000*100%&#x3D;99.9465151%</p>
</blockquote>
<p>‰∏öÁïåÂèØÁî®ÊÄßÁõÆÊ†á**5‰∏™9ÔºåÂç≥99.999%**ÔºåÂç≥ÊúçÂä°Âô®Âπ¥ÂÆïÊú∫Êó∂Èïø‰Ωé‰∫é315ÁßíÔºåÁ∫¶5.25ÂàÜÈíü</p>
<h4 id="2-1-2-‰∏ª‰ªéÂ§çÂà∂Ê¶ÇÂøµ"><a href="#2-1-2-‰∏ª‰ªéÂ§çÂà∂Ê¶ÇÂøµ" class="headerlink" title="2.1.2 ‰∏ª‰ªéÂ§çÂà∂Ê¶ÇÂøµ"></a>2.1.2 ‰∏ª‰ªéÂ§çÂà∂Ê¶ÇÂøµ</h4><p>Áü•ÈÅì‰∫Ü‰∏âÈ´òÁöÑÊ¶ÇÂøµ‰πãÂêéÔºåÊàë‰ª¨ÊÉ≥Ôºö‰Ω†ÁöÑ‚ÄúRedis‚ÄùÊòØÂê¶È´òÂèØÁî®ÔºüÈÇ£Êàë‰ª¨Ë¶ÅÊù•ÂàÜÊûêÂçïÊú∫redisÁöÑÈ£éÈô©‰∏éÈóÆÈ¢ò</p>
<p>ÈóÆÈ¢ò1.Êú∫Âô®ÊïÖÈöú</p>
<ul>
<li>Áé∞Ë±°ÔºöÁ°¨ÁõòÊïÖÈöú„ÄÅÁ≥ªÁªüÂ¥©Ê∫É</li>
<li>Êú¨Ë¥®ÔºöÊï∞ÊçÆ‰∏¢Â§±ÔºåÂæàÂèØËÉΩÂØπ‰∏öÂä°ÈÄ†ÊàêÁÅæÈöæÊÄßÊâìÂáª</li>
<li>ÁªìËÆ∫ÔºöÂü∫Êú¨‰∏ä‰ºöÊîæÂºÉ‰ΩøÁî®redis.</li>
</ul>
<p>ÈóÆÈ¢ò2.ÂÆπÈáèÁì∂È¢à</p>
<ul>
<li>Áé∞Ë±°ÔºöÂÜÖÂ≠ò‰∏çË∂≥Ôºå‰ªé16GÂçáÁ∫ßÂà∞64GÔºå‰ªé64GÂçáÁ∫ßÂà∞128GÔºåÊó†ÈôêÂçáÁ∫ßÂÜÖÂ≠ò</li>
<li>Êú¨Ë¥®ÔºöÁ©∑ÔºåÁ°¨‰ª∂Êù°‰ª∂Ë∑ü‰∏ç‰∏ä</li>
<li>ÁªìËÆ∫ÔºöÊîæÂºÉ‰ΩøÁî®redis</li>
</ul>
<p>ÁªìËÆ∫Ôºö</p>
<p>‰∏∫‰∫ÜÈÅøÂÖçÂçïÁÇπRedisÊúçÂä°Âô®ÊïÖÈöúÔºåÂáÜÂ§áÂ§öÂè∞ÊúçÂä°Âô®Ôºå‰∫íÁõ∏ËøûÈÄö„ÄÇÂ∞ÜÊï∞ÊçÆÂ§çÂà∂Â§ö‰∏™ÂâØÊú¨‰øùÂ≠òÂú®‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÔºåËøûÊé•Âú®‰∏ÄËµ∑ÔºåÂπ∂‰øùËØÅÊï∞ÊçÆÊòØÂêåÊ≠•ÁöÑ„ÄÇÂç≥‰ΩøÊúâÂÖ∂‰∏≠‰∏ÄÂè∞ÊúçÂä°Âô®ÂÆïÊú∫ÔºåÂÖ∂‰ªñÊúçÂä°Âô®‰æùÁÑ∂ÂèØ‰ª•ÁªßÁª≠Êèê‰æõÊúçÂä°ÔºåÂÆûÁé∞RedisÁöÑÈ´òÂèØÁî®ÔºåÂêåÊó∂ÂÆûÁé∞Êï∞ÊçÆÂÜó‰ΩôÂ§á‰ªΩ„ÄÇ</p>
<p>Â§öÂè∞ÊúçÂä°Âô®ËøûÊé•ÊñπÊ°àÔºö</p>
<p><img src="https://i0.hdslb.com/bfs/album/60cb19696ea4f9b7f60a5849979221aa416c5d3c.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<ul>
<li>Êèê‰æõÊï∞ÊçÆÊñπÔºö<strong>master</strong></li>
</ul>
<p>‰∏ªÊúçÂä°Âô®Ôºå‰∏ªËäÇÁÇπÔºå‰∏ªÂ∫ì‰∏ªÂÆ¢Êà∑Á´Ø</p>
<ul>
<li>Êé•Êî∂Êï∞ÊçÆÊñπÔºö<strong>slave</strong></li>
</ul>
<p>‰ªéÊúçÂä°Âô®Ôºå‰ªéËäÇÁÇπÔºå‰ªéÂ∫ì</p>
<p>‰ªéÂÆ¢Êà∑Á´Ø</p>
<ul>
<li>ÈúÄË¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢òÔºö</li>
</ul>
<p>Êï∞ÊçÆÂêåÊ≠•ÔºàmasterÁöÑÊï∞ÊçÆÂ§çÂà∂Âà∞slave‰∏≠Ôºâ</p>
<p>ËøôÈáåÊàë‰ª¨ÂèØ‰ª•Êù•Ëß£Èáä‰∏ª‰ªéÂ§çÂà∂ÁöÑÊ¶ÇÂøµÔºö</p>
<p><strong>Ê¶ÇÂøµÔºö‰∏ª‰ªéÂ§çÂà∂Âç≥Â∞Ümaster‰∏≠ÁöÑÊï∞ÊçÆÂç≥Êó∂„ÄÅÊúâÊïàÁöÑÂ§çÂà∂Âà∞slave‰∏≠</strong></p>
<p><strong>ÁâπÂæÅ</strong>Ôºö‰∏Ä‰∏™masterÂèØ‰ª•Êã•ÊúâÂ§ö‰∏™slaveÔºå‰∏Ä‰∏™slaveÂè™ÂØπÂ∫î‰∏Ä‰∏™master</p>
<p><strong>ËÅåË¥£</strong>ÔºömasterÂíåslaveÂêÑËá™ÁöÑËÅåË¥£‰∏ç‰∏ÄÊ†∑</p>
<p>master:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ÂÜôÊï∞ÊçÆ<br><br>ÊâßË°åÂÜôÊìç‰ΩúÊó∂ÔºåÂ∞ÜÂá∫Áé∞ÂèòÂåñÁöÑÊï∞ÊçÆËá™Âä®ÂêåÊ≠•Âà∞slave<br><br>ËØªÊï∞ÊçÆÔºàÂèØÂøΩÁï•Ôºâ<br></code></pre></td></tr></table></figure>

<p>slave:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ËØªÊï∞ÊçÆ<br><br>ÂÜôÊï∞ÊçÆÔºàÁ¶ÅÊ≠¢Ôºâ<br></code></pre></td></tr></table></figure>

<h4 id="2-1-3-‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰ΩúÁî®"><a href="#2-1-3-‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰ΩúÁî®" class="headerlink" title="2.1.3 ‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰ΩúÁî®"></a>2.1.3 ‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰ΩúÁî®</h4><ul>
<li>ËØªÂÜôÂàÜÁ¶ªÔºömasterÂÜô„ÄÅslaveËØªÔºåÊèêÈ´òÊúçÂä°Âô®ÁöÑËØªÂÜôË¥üËΩΩËÉΩÂäõ</li>
<li>Ë¥üËΩΩÂùáË°°ÔºöÂü∫‰∫é‰∏ª‰ªéÁªìÊûÑÔºåÈÖçÂêàËØªÂÜôÂàÜÁ¶ªÔºåÁî±slaveÂàÜÊãÖmasterË¥üËΩΩÔºåÂπ∂Ê†πÊçÆÈúÄÊ±ÇÁöÑÂèòÂåñÔºåÊîπÂèòslaveÁöÑÊï∞ ÈáèÔºåÈÄöËøáÂ§ö‰∏™‰ªéËäÇÁÇπÂàÜÊãÖÊï∞ÊçÆËØªÂèñË¥üËΩΩÔºåÂ§ßÂ§ßÊèêÈ´òRedisÊúçÂä°Âô®Âπ∂ÂèëÈáè‰∏éÊï∞ÊçÆÂêûÂêêÈáè</li>
<li>ÊïÖÈöúÊÅ¢Â§çÔºöÂΩìmasterÂá∫Áé∞ÈóÆÈ¢òÊó∂ÔºåÁî±slaveÊèê‰æõÊúçÂä°ÔºåÂÆûÁé∞Âø´ÈÄüÁöÑÊïÖÈöúÊÅ¢Â§ç</li>
<li>Êï∞ÊçÆÂÜó‰ΩôÔºöÂÆûÁé∞Êï∞ÊçÆÁÉ≠Â§á‰ªΩÔºåÊòØÊåÅ‰πÖÂåñ‰πãÂ§ñÁöÑ‰∏ÄÁßçÊï∞ÊçÆÂÜó‰ΩôÊñπÂºè</li>
<li>È´òÂèØÁî®Âü∫Áü≥ÔºöÂü∫‰∫é‰∏ª‰ªéÂ§çÂà∂ÔºåÊûÑÂª∫Âì®ÂÖµÊ®°Âºè‰∏éÈõÜÁæ§ÔºåÂÆûÁé∞RedisÁöÑÈ´òÂèØÁî®ÊñπÊ°à</li>
</ul>
<h3 id="2-2-‰∏ª‰ªéÂ§çÂà∂Â∑•‰ΩúÊµÅÁ®ã"><a href="#2-2-‰∏ª‰ªéÂ§çÂà∂Â∑•‰ΩúÊµÅÁ®ã" class="headerlink" title="2.2 ‰∏ª‰ªéÂ§çÂà∂Â∑•‰ΩúÊµÅÁ®ã"></a>2.2 ‰∏ª‰ªéÂ§çÂà∂Â∑•‰ΩúÊµÅÁ®ã</h3><p>‰∏ª‰ªéÂ§çÂà∂ËøáÁ®ãÂ§ß‰ΩìÂèØ‰ª•ÂàÜ‰∏∫3‰∏™Èò∂ÊÆµ</p>
<ul>
<li>Âª∫Á´ãËøûÊé•Èò∂ÊÆµÔºàÂç≥ÂáÜÂ§áÈò∂ÊÆµÔºâ</li>
<li>Êï∞ÊçÆÂêåÊ≠•Èò∂ÊÆµ</li>
<li>ÂëΩ‰ª§‰º†Êí≠Èò∂ÊÆµÔºàÂèçÂ§çÂêåÊ≠•Ôºâ</li>
</ul>
<p><img src="https://i0.hdslb.com/bfs/album/45a96dcfedb1b8b0e02897bfc55863ecc4fbcbc3.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>ËÄåÂëΩ‰ª§ÁöÑ‰º†Êí≠ÂÖ∂ÂÆûÊúâ4ÁßçÔºåÂàÜÂà´Â¶Ç‰∏ãÔºö</p>
<p><img src="https://i0.hdslb.com/bfs/album/e985f173ce6200b5066693ba1df89283f7717927.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h4 id="2-2-1-‰∏ª‰ªéÂ§çÂà∂ÁöÑÂ∑•‰ΩúÊµÅÁ®ãÔºà‰∏â‰∏™Èò∂ÊÆµÔºâ"><a href="#2-2-1-‰∏ª‰ªéÂ§çÂà∂ÁöÑÂ∑•‰ΩúÊµÅÁ®ãÔºà‰∏â‰∏™Èò∂ÊÆµÔºâ" class="headerlink" title="2.2.1 ‰∏ª‰ªéÂ§çÂà∂ÁöÑÂ∑•‰ΩúÊµÅÁ®ãÔºà‰∏â‰∏™Èò∂ÊÆµÔºâ"></a>2.2.1 ‰∏ª‰ªéÂ§çÂà∂ÁöÑÂ∑•‰ΩúÊµÅÁ®ãÔºà‰∏â‰∏™Èò∂ÊÆµÔºâ</h4><h5 id="2-2-1-1-Èò∂ÊÆµ‰∏ÄÔºöÂª∫Á´ãËøûÊé•"><a href="#2-2-1-1-Èò∂ÊÆµ‰∏ÄÔºöÂª∫Á´ãËøûÊé•" class="headerlink" title="2.2.1.1 Èò∂ÊÆµ‰∏ÄÔºöÂª∫Á´ãËøûÊé•"></a>2.2.1.1 Èò∂ÊÆµ‰∏ÄÔºöÂª∫Á´ãËøûÊé•</h5><p>Âª∫Á´ãslaveÂà∞masterÁöÑËøûÊé•Ôºå‰ΩømasterËÉΩÂ§üËØÜÂà´slaveÔºåÂπ∂‰øùÂ≠òslaveÁ´ØÂè£Âè∑</p>
<p>ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p>
<ol>
<li>Ê≠•È™§1ÔºöËÆæÁΩÆmasterÁöÑÂú∞ÂùÄÂíåÁ´ØÂè£Ôºå‰øùÂ≠òmaster‰ø°ÊÅØ</li>
<li>Ê≠•È™§2ÔºöÂª∫Á´ãsocketËøûÊé•</li>
<li>Ê≠•È™§3ÔºöÂèëÈÄÅpingÂëΩ‰ª§ÔºàÂÆöÊó∂Âô®‰ªªÂä°Ôºâ</li>
<li>Ê≠•È™§4ÔºöË∫´‰ªΩÈ™åËØÅ</li>
<li>Ê≠•È™§5ÔºöÂèëÈÄÅslaveÁ´ØÂè£‰ø°ÊÅØ</li>
</ol>
<p>Ëá≥Ê≠§Ôºå‰∏ª‰ªéËøûÊé•ÊàêÂäüÔºÅ</p>
<p>ÂΩìÂâçÁä∂ÊÄÅÔºö</p>
<p>slaveÔºö‰øùÂ≠òmasterÁöÑÂú∞ÂùÄ‰∏éÁ´ØÂè£</p>
<p>masterÔºö‰øùÂ≠òslaveÁöÑÁ´ØÂè£</p>
<p>ÊÄª‰ΩìÔºö‰πãÈó¥ÂàõÂª∫‰∫ÜËøûÊé•ÁöÑsocket</p>
<p><img src="https://i0.hdslb.com/bfs/album/ea1deb2e185a3e10a3a7dc857d8e7119073b9681.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p><strong>masterÂíåslave‰∫íËÅî</strong></p>
<p>Êé•‰∏ãÊù•Â∞±Ë¶ÅÈÄöËøáÊüêÁßçÊñπÂºèÂ∞ÜmasterÂíåslaveËøûÊé•Âà∞‰∏ÄËµ∑</p>
<p>ÊñπÂºè‰∏ÄÔºöÂÆ¢Êà∑Á´ØÂèëÈÄÅÂëΩ‰ª§</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slaveof</span> <span class="hljs-string">masterip masterport</span><br></code></pre></td></tr></table></figure>

<p>ÊñπÂºè‰∫åÔºöÂêØÂä®ÊúçÂä°Âô®ÂèÇÊï∞</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-server</span> <span class="hljs-string">--slaveof masterip masterport</span><br></code></pre></td></tr></table></figure>

<p>ÊñπÂºè‰∏âÔºöÊúçÂä°Âô®ÈÖçÁΩÆÔºà<strong>‰∏ªÊµÅÊñπÂºè</strong>Ôºâ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slaveof</span> <span class="hljs-string">masterip masterport</span><br></code></pre></td></tr></table></figure>

<p>slaveÁ≥ªÁªü‰ø°ÊÅØ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">master_link_down_since_seconds</span><br><span class="hljs-attr">masterhost</span> <span class="hljs-string">&amp; masterport</span><br></code></pre></td></tr></table></figure>

<p>masterÁ≥ªÁªü‰ø°ÊÅØ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">uslave_listening_port(Â§ö‰∏™)</span><br></code></pre></td></tr></table></figure>

<p><strong>‰∏ª‰ªéÊñ≠ÂºÄËøûÊé•</strong></p>
<p>Êñ≠ÂºÄslave‰∏émasterÁöÑËøûÊé•ÔºåslaveÊñ≠ÂºÄËøûÊé•ÂêéÔºå‰∏ç‰ºöÂà†Èô§Â∑≤ÊúâÊï∞ÊçÆÔºåÂè™ÊòØ‰∏çÂÜçÊé•ÂèómasterÂèëÈÄÅÁöÑÊï∞ÊçÆ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slaveof</span> <span class="hljs-string">no one</span><br></code></pre></td></tr></table></figure>

<p><strong>ÊéàÊùÉËÆøÈóÆ</strong></p>
<p>masterÂÆ¢Êà∑Á´ØÂèëÈÄÅÂëΩ‰ª§ËÆæÁΩÆÂØÜÁ†Å</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">requirepass</span> <span class="hljs-string">password</span><br></code></pre></td></tr></table></figure>

<p>masterÈÖçÁΩÆÊñá‰ª∂ËÆæÁΩÆÂØÜÁ†Å</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">config</span> <span class="hljs-string">set requirepass password</span><br><span class="hljs-attr">config</span> <span class="hljs-string">get requirepass</span><br></code></pre></td></tr></table></figure>

<p>slaveÂÆ¢Êà∑Á´ØÂèëÈÄÅÂëΩ‰ª§ËÆæÁΩÆÂØÜÁ†Å</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">auth</span> <span class="hljs-string">password</span><br></code></pre></td></tr></table></figure>

<p>slaveÈÖçÁΩÆÊñá‰ª∂ËÆæÁΩÆÂØÜÁ†Å</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">masterauth</span> <span class="hljs-string">password</span><br></code></pre></td></tr></table></figure>

<p>slaveÂêØÂä®ÊúçÂä°Âô®ËÆæÁΩÆÂØÜÁ†Å</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-server</span> <span class="hljs-string">‚Äìa password</span><br></code></pre></td></tr></table></figure>



<h5 id="2-2-1-2-Èò∂ÊÆµ‰∫åÔºöÊï∞ÊçÆÂêåÊ≠•"><a href="#2-2-1-2-Èò∂ÊÆµ‰∫åÔºöÊï∞ÊçÆÂêåÊ≠•" class="headerlink" title="2.2.1.2 Èò∂ÊÆµ‰∫åÔºöÊï∞ÊçÆÂêåÊ≠•"></a>2.2.1.2 Èò∂ÊÆµ‰∫åÔºöÊï∞ÊçÆÂêåÊ≠•</h5><ul>
<li>Âú®slaveÂàùÊ¨°ËøûÊé•masterÂêéÔºåÂ§çÂà∂master‰∏≠ÁöÑÊâÄÊúâÊï∞ÊçÆÂà∞slave</li>
<li>Â∞ÜslaveÁöÑÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅÊõ¥Êñ∞ÊàêmasterÂΩìÂâçÁöÑÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅ</li>
</ul>
<p>ÂêåÊ≠•ËøáÁ®ãÂ¶Ç‰∏ãÔºö</p>
<ol>
<li>Ê≠•È™§1ÔºöËØ∑Ê±ÇÂêåÊ≠•Êï∞ÊçÆ</li>
<li>Ê≠•È™§2ÔºöÂàõÂª∫RDBÂêåÊ≠•Êï∞ÊçÆ</li>
<li>Ê≠•È™§3ÔºöÊÅ¢Â§çRDBÂêåÊ≠•Êï∞ÊçÆ</li>
<li>Ê≠•È™§4ÔºöËØ∑Ê±ÇÈÉ®ÂàÜÂêåÊ≠•Êï∞ÊçÆ</li>
<li>Ê≠•È™§5ÔºöÊÅ¢Â§çÈÉ®ÂàÜÂêåÊ≠•Êï∞ÊçÆ</li>
</ol>
<p>Ëá≥Ê≠§ÔºåÊï∞ÊçÆÂêåÊ≠•Â∑•‰ΩúÂÆåÊàêÔºÅ</p>
<p>ÂΩìÂâçÁä∂ÊÄÅÔºö</p>
<p>slaveÔºöÂÖ∑ÊúâmasterÁ´ØÂÖ®ÈÉ®Êï∞ÊçÆÔºåÂåÖÂê´RDBËøáÁ®ãÊé•Êî∂ÁöÑÊï∞ÊçÆ</p>
<p>masterÔºö‰øùÂ≠òslaveÂΩìÂâçÊï∞ÊçÆÂêåÊ≠•ÁöÑ‰ΩçÁΩÆ</p>
<p>ÊÄª‰ΩìÔºö‰πãÈó¥ÂÆåÊàê‰∫ÜÊï∞ÊçÆÂÖãÈöÜ</p>
<p><img src="https://i0.hdslb.com/bfs/album/090fb9425f8fce40cb3b67731e39ae975aa57fcb.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p><strong>Êï∞ÊçÆÂêåÊ≠•Èò∂ÊÆµmasterËØ¥Êòé</strong></p>
<p>1ÔºöÂ¶ÇÊûúmasterÊï∞ÊçÆÈáèÂ∑®Â§ßÔºåÊï∞ÊçÆÂêåÊ≠•Èò∂ÊÆµÂ∫îÈÅøÂºÄÊµÅÈáèÈ´òÂ≥∞ÊúüÔºåÈÅøÂÖçÈÄ†ÊàêmasterÈòªÂ°ûÔºåÂΩ±Âìç‰∏öÂä°Ê≠£Â∏∏ÊâßË°å</p>
<p>2ÔºöÂ§çÂà∂ÁºìÂÜ≤Âå∫Â§ßÂ∞èËÆæÂÆö‰∏çÂêàÁêÜÔºå‰ºöÂØºËá¥Êï∞ÊçÆÊ∫¢Âá∫„ÄÇÂ¶ÇËøõË°åÂÖ®ÈáèÂ§çÂà∂Âë®ÊúüÂ§™ÈïøÔºåËøõË°åÈÉ®ÂàÜÂ§çÂà∂Êó∂ÂèëÁé∞Êï∞ÊçÆÂ∑≤ÁªèÂ≠òÂú®‰∏¢Â§±ÁöÑÊÉÖÂÜµÔºåÂøÖÈ°ªËøõË°åÁ¨¨‰∫åÊ¨°ÂÖ®ÈáèÂ§çÂà∂ÔºåËá¥‰ΩøslaveÈô∑ÂÖ•Ê≠ªÂæ™ÁéØÁä∂ÊÄÅ„ÄÇ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">repl-backlog-size</span> <span class="hljs-string">?mb</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>masterÂçïÊú∫ÂÜÖÂ≠òÂç†Áî®‰∏ªÊú∫ÂÜÖÂ≠òÁöÑÊØî‰æã‰∏çÂ∫îËøáÂ§ßÔºåÂª∫ËÆÆ‰ΩøÁî®50%-70%ÁöÑÂÜÖÂ≠òÔºåÁïô‰∏ã30%-50%ÁöÑÂÜÖÂ≠òÁî®‰∫éÊâß Ë°åbgsaveÂëΩ‰ª§ÂíåÂàõÂª∫Â§çÂà∂ÁºìÂÜ≤Âå∫</li>
</ol>
<p><img src="/Hexo/./img/11.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p><strong>Êï∞ÊçÆÂêåÊ≠•Èò∂ÊÆµslaveËØ¥Êòé</strong></p>
<ol>
<li><p>‰∏∫ÈÅøÂÖçslaveËøõË°åÂÖ®ÈáèÂ§çÂà∂„ÄÅÈÉ®ÂàÜÂ§çÂà∂Êó∂ÊúçÂä°Âô®ÂìçÂ∫îÈòªÂ°ûÊàñÊï∞ÊçÆ‰∏çÂêåÊ≠•ÔºåÂª∫ËÆÆÂÖ≥Èó≠Ê≠§ÊúüÈó¥ÁöÑÂØπÂ§ñÊúçÂä°</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slave-serve-stale-data</span> <span class="hljs-string">yes|no</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>Êï∞ÊçÆÂêåÊ≠•Èò∂ÊÆµÔºåmasterÂèëÈÄÅÁªôslave‰ø°ÊÅØÂèØ‰ª•ÁêÜËß£masterÊòØslaveÁöÑ‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÔºå‰∏ªÂä®ÂêëslaveÂèëÈÄÅÂëΩ‰ª§</p>
</li>
<li><p>Â§ö‰∏™slaveÂêåÊó∂ÂØπmasterËØ∑Ê±ÇÊï∞ÊçÆÂêåÊ≠•ÔºåmasterÂèëÈÄÅÁöÑRDBÊñá‰ª∂Â¢ûÂ§öÔºå‰ºöÂØπÂ∏¶ÂÆΩÈÄ†ÊàêÂ∑®Â§ßÂÜ≤ÂáªÔºåÂ¶ÇÊûúmasterÂ∏¶ÂÆΩ‰∏çË∂≥ÔºåÂõ†Ê≠§Êï∞ÊçÆÂêåÊ≠•ÈúÄË¶ÅÊ†πÊçÆ‰∏öÂä°ÈúÄÊ±ÇÔºåÈÄÇÈáèÈîôÂ≥∞</p>
</li>
<li><p>slaveËøáÂ§öÊó∂ÔºåÂª∫ËÆÆË∞ÉÊï¥ÊãìÊâëÁªìÊûÑÔºåÁî±‰∏Ä‰∏ªÂ§ö‰ªéÁªìÊûÑÂèò‰∏∫Ê†ëÁä∂ÁªìÊûÑÔºå‰∏≠Èó¥ÁöÑËäÇÁÇπÊó¢ÊòØmasterÔºå‰πüÊòØ slave„ÄÇÊ≥®ÊÑè‰ΩøÁî®Ê†ëÁä∂ÁªìÊûÑÊó∂ÔºåÁî±‰∫éÂ±ÇÁ∫ßÊ∑±Â∫¶ÔºåÂØºËá¥Ê∑±Â∫¶Ë∂äÈ´òÁöÑslave‰∏éÊúÄÈ°∂Â±ÇmasterÈó¥Êï∞ÊçÆÂêåÊ≠•Âª∂Ëøü ËæÉÂ§ßÔºåÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÂèòÂ∑ÆÔºåÂ∫îË∞®ÊÖéÈÄâÊã©</p>
</li>
</ol>
<h5 id="2-2-1-3-Èò∂ÊÆµ‰∏âÔºöÂëΩ‰ª§‰º†Êí≠"><a href="#2-2-1-3-Èò∂ÊÆµ‰∏âÔºöÂëΩ‰ª§‰º†Êí≠" class="headerlink" title="2.2.1.3 Èò∂ÊÆµ‰∏âÔºöÂëΩ‰ª§‰º†Êí≠"></a>2.2.1.3 Èò∂ÊÆµ‰∏âÔºöÂëΩ‰ª§‰º†Êí≠</h5><ul>
<li>ÂΩìmasterÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅË¢´‰øÆÊîπÂêéÔºåÂØºËá¥‰∏ª‰ªéÊúçÂä°Âô®Êï∞ÊçÆÂ∫ìÁä∂ÊÄÅ‰∏ç‰∏ÄËá¥ÔºåÊ≠§Êó∂ÈúÄË¶ÅËÆ©‰∏ª‰ªéÊï∞ÊçÆÂêåÊ≠•Âà∞‰∏ÄËá¥ÁöÑÁä∂ÊÄÅÔºåÂêåÊ≠•ÁöÑÂä®‰ΩúÁß∞‰∏∫ÂëΩ‰ª§‰º†Êí≠</li>
<li>masterÂ∞ÜÊé•Êî∂Âà∞ÁöÑÊï∞ÊçÆÂèòÊõ¥ÂëΩ‰ª§ÂèëÈÄÅÁªôslaveÔºåslaveÊé•Êî∂ÂëΩ‰ª§ÂêéÊâßË°åÂëΩ‰ª§</li>
</ul>
<p><strong>ÂëΩ‰ª§‰º†Êí≠Èò∂ÊÆµÁöÑÈÉ®ÂàÜÂ§çÂà∂</strong></p>
<p>ÂëΩ‰ª§‰º†Êí≠Èò∂ÊÆµÂá∫Áé∞‰∫ÜÊñ≠ÁΩëÁé∞Ë±°Ôºö</p>
<p>ÁΩëÁªúÈó™Êñ≠Èó™ËøûÔºöÂøΩÁï•</p>
<p>Áü≠Êó∂Èó¥ÁΩëÁªú‰∏≠Êñ≠ÔºöÈÉ®ÂàÜÂ§çÂà∂</p>
<p>ÈïøÊó∂Èó¥ÁΩëÁªú‰∏≠Êñ≠ÔºöÂÖ®ÈáèÂ§çÂà∂</p>
<p>ËøôÈáåÊàë‰ª¨‰∏ªË¶ÅÊù•ÁúãÈÉ®ÂàÜÂ§çÂà∂ÔºåÈÉ®ÂàÜÂ§çÂà∂ÁöÑ‰∏â‰∏™Ê†∏ÂøÉË¶ÅÁ¥†</p>
<ol>
<li>ÊúçÂä°Âô®ÁöÑËøêË°å idÔºàrun idÔºâ</li>
<li>‰∏ªÊúçÂä°Âô®ÁöÑÂ§çÂà∂ÁßØÂéãÁºìÂÜ≤Âå∫</li>
<li>‰∏ª‰ªéÊúçÂä°Âô®ÁöÑÂ§çÂà∂ÂÅèÁßªÈáè</li>
</ol>
<ul>
<li>ÊúçÂä°Âô®ËøêË°åIDÔºàrunidÔºâ</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Ê¶ÇÂøµÔºöÊúçÂä°Âô®ËøêË°åIDÊòØÊØè‰∏ÄÂè∞ÊúçÂä°Âô®ÊØèÊ¨°ËøêË°åÁöÑË∫´‰ªΩËØÜÂà´Á†ÅÔºå‰∏ÄÂè∞ÊúçÂä°Âô®Â§öÊ¨°ËøêË°åÂèØ‰ª•ÁîüÊàêÂ§ö‰∏™ËøêË°åid<br><br>ÁªÑÊàêÔºöËøêË°åidÁî±40‰ΩçÂ≠óÁ¨¶ÁªÑÊàêÔºåÊòØ‰∏Ä‰∏™ÈöèÊú∫ÁöÑÂçÅÂÖ≠ËøõÂà∂Â≠óÁ¨¶<br>‰æãÂ¶ÇÔºöfdc9ff13b9bbaab28db42b3d50f852bb5e3fcdce<br><br>‰ΩúÁî®ÔºöËøêË°åidË¢´Áî®‰∫éÂú®ÊúçÂä°Âô®Èó¥ËøõË°å‰º†ËæìÔºåËØÜÂà´Ë∫´‰ªΩ<br>Â¶ÇÊûúÊÉ≥‰∏§Ê¨°Êìç‰ΩúÂùáÂØπÂêå‰∏ÄÂè∞ÊúçÂä°Âô®ËøõË°åÔºåÂøÖÈ°ªÊØèÊ¨°Êìç‰ΩúÊê∫Â∏¶ÂØπÂ∫îÁöÑËøêË°åidÔºåÁî®‰∫éÂØπÊñπËØÜÂà´<br><br>ÂÆûÁé∞ÊñπÂºèÔºöËøêË°åidÂú®ÊØèÂè∞ÊúçÂä°Âô®ÂêØÂä®Êó∂Ëá™Âä®ÁîüÊàêÁöÑÔºåmasterÂú®È¶ñÊ¨°ËøûÊé•slaveÊó∂Ôºå‰ºöÂ∞ÜËá™Â∑±ÁöÑËøêË°åIDÂèëÈÄÅÁªôslaveÔºå<br>slave‰øùÂ≠òÊ≠§IDÔºåÈÄöËøáinfo ServerÂëΩ‰ª§ÔºåÂèØ‰ª•Êü•ÁúãËäÇÁÇπÁöÑrunid<br></code></pre></td></tr></table></figure>

<ul>
<li>Â§çÂà∂ÁºìÂÜ≤Âå∫</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">Ê¶ÇÂøµÔºöÂ§çÂà∂ÁºìÂÜ≤Âå∫ÔºåÂèàÂêçÂ§çÂà∂ÁßØÂéãÁºìÂÜ≤Âå∫ÔºåÊòØ‰∏Ä‰∏™ÂÖàËøõÂÖàÂá∫ÔºàFIFOÔºâÁöÑÈòüÂàóÔºåÁî®‰∫éÂ≠òÂÇ®ÊúçÂä°Âô®ÊâßË°åËøáÁöÑÂëΩ‰ª§ÔºåÊØèÊ¨°‰º†Êí≠ÂëΩ‰ª§ÔºåmasterÈÉΩ‰ºöÂ∞Ü‰º†Êí≠ÁöÑÂëΩ‰ª§ËÆ∞ÂΩï‰∏ãÊù•ÔºåÂπ∂Â≠òÂÇ®Âú®Â§çÂà∂ÁºìÂÜ≤Âå∫<br><span class="hljs-code">	Â§çÂà∂ÁºìÂÜ≤Âå∫ÈªòËÆ§Êï∞ÊçÆÂ≠òÂÇ®Á©∫Èó¥Â§ßÂ∞èÊòØ1M</span><br><span class="hljs-code">	ÂΩìÂÖ•ÈòüÂÖÉÁ¥†ÁöÑÊï∞ÈáèÂ§ß‰∫éÈòüÂàóÈïøÂ∫¶Êó∂ÔºåÊúÄÂÖàÂÖ•ÈòüÁöÑÂÖÉÁ¥†‰ºöË¢´ÂºπÂá∫ÔºåËÄåÊñ∞ÂÖÉÁ¥†‰ºöË¢´ÊîæÂÖ•ÈòüÂàó</span><br><span class="hljs-code">‰ΩúÁî®ÔºöÁî®‰∫é‰øùÂ≠òmasterÊî∂Âà∞ÁöÑÊâÄÊúâÊåá‰ª§Ôºà‰ªÖÂΩ±ÂìçÊï∞ÊçÆÂèòÊõ¥ÁöÑÊåá‰ª§Ôºå‰æãÂ¶ÇsetÔºåselectÔºâ</span><br><span class="hljs-code"></span><br>Êï∞ÊçÆÊù•Ê∫êÔºöÂΩìmasterÊé•Êî∂Âà∞‰∏ªÂÆ¢Êà∑Á´ØÁöÑÊåá‰ª§Êó∂ÔºåÈô§‰∫ÜÂ∞ÜÊåá‰ª§ÊâßË°åÔºå‰ºöÂ∞ÜËØ•Êåá‰ª§Â≠òÂÇ®Âà∞ÁºìÂÜ≤Âå∫‰∏≠<br></code></pre></td></tr></table></figure>

<p><img src="https://i0.hdslb.com/bfs/album/ced898899237afea93b62bde5fd3e69387a07364.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>Â§çÂà∂ÁºìÂÜ≤Âå∫ÂÜÖÈÉ®Â∑•‰ΩúÂéüÁêÜÔºö</p>
<p>ÁªÑÊàê</p>
<ul>
<li><p>ÂÅèÁßªÈáè</p>
<blockquote>
<p>Ê¶ÇÂøµÔºö‰∏Ä‰∏™Êï∞Â≠óÔºåÊèèËø∞Â§çÂà∂ÁºìÂÜ≤Âå∫‰∏≠ÁöÑÊåá‰ª§Â≠óËäÇ‰ΩçÁΩÆ</p>
<p>ÂàÜÁ±ªÔºö</p>
<ul>
<li>masterÂ§çÂà∂ÂÅèÁßªÈáèÔºöËÆ∞ÂΩïÂèëÈÄÅÁªôÊâÄÊúâslaveÁöÑÊåá‰ª§Â≠óËäÇÂØπÂ∫îÁöÑ‰ΩçÁΩÆÔºàÂ§ö‰∏™Ôºâ</li>
<li>slaveÂ§çÂà∂ÂÅèÁßªÈáèÔºöËÆ∞ÂΩïslaveÊé•Êî∂masterÂèëÈÄÅËøáÊù•ÁöÑÊåá‰ª§Â≠óËäÇÂØπÂ∫îÁöÑ‰ΩçÁΩÆÔºà‰∏Ä‰∏™Ôºâ</li>
</ul>
<p>‰ΩúÁî®ÔºöÂêåÊ≠•‰ø°ÊÅØÔºåÊØîÂØπmaster‰∏éslaveÁöÑÂ∑ÆÂºÇÔºåÂΩìslaveÊñ≠Á∫øÂêéÔºåÊÅ¢Â§çÊï∞ÊçÆ‰ΩøÁî®</p>
<p>Êï∞ÊçÆÊù•Ê∫êÔºö</p>
<ul>
<li>masterÁ´ØÔºöÂèëÈÄÅ‰∏ÄÊ¨°ËÆ∞ÂΩï‰∏ÄÊ¨°</li>
<li>slaveÁ´ØÔºöÊé•Êî∂‰∏ÄÊ¨°ËÆ∞ÂΩï‰∏ÄÊ¨°</li>
</ul>
</blockquote>
</li>
<li><p>Â≠óËäÇÂÄº</p>
</li>
</ul>
<p>Â∑•‰ΩúÂéüÁêÜ</p>
<ul>
<li>ÈÄöËøáoffsetÂå∫ÂàÜ‰∏çÂêåÁöÑslaveÂΩìÂâçÊï∞ÊçÆ‰º†Êí≠ÁöÑÂ∑ÆÂºÇ</li>
<li>masterËÆ∞ÂΩïÂ∑≤ÂèëÈÄÅÁöÑ‰ø°ÊÅØÂØπÂ∫îÁöÑoffset</li>
<li>slaveËÆ∞ÂΩïÂ∑≤Êé•Êî∂ÁöÑ‰ø°ÊÅØÂØπÂ∫îÁöÑoffset</li>
</ul>
<p><img src="https://i0.hdslb.com/bfs/album/b7752a7adde435176b6c7ccef8c6f4cd8ccdbd38.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h4 id="2-2-2-ÊµÅÁ®ãÊõ¥Êñ∞-ÂÖ®ÈáèÂ§çÂà∂-x2F-ÈÉ®ÂàÜÂ§çÂà∂"><a href="#2-2-2-ÊµÅÁ®ãÊõ¥Êñ∞-ÂÖ®ÈáèÂ§çÂà∂-x2F-ÈÉ®ÂàÜÂ§çÂà∂" class="headerlink" title="2.2.2 ÊµÅÁ®ãÊõ¥Êñ∞(ÂÖ®ÈáèÂ§çÂà∂&#x2F;ÈÉ®ÂàÜÂ§çÂà∂)"></a>2.2.2 ÊµÅÁ®ãÊõ¥Êñ∞(ÂÖ®ÈáèÂ§çÂà∂&#x2F;ÈÉ®ÂàÜÂ§çÂà∂)</h4><p>Êàë‰ª¨ÂÜçÊ¨°ÁöÑÊÄªÁªì‰∏Ä‰∏ã‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰∏â‰∏™Èò∂ÊÆµÁöÑÂ∑•‰ΩúÊµÅÁ®ãÔºö</p>
<p><img src="https://i0.hdslb.com/bfs/album/0e0aafef58100e590c79617a34a56c521228a86c.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h4 id="2-2-3-ÂøÉË∑≥Êú∫Âà∂"><a href="#2-2-3-ÂøÉË∑≥Êú∫Âà∂" class="headerlink" title="2.2.3 ÂøÉË∑≥Êú∫Âà∂"></a>2.2.3 ÂøÉË∑≥Êú∫Âà∂</h4><p>‰ªÄ‰πàÊòØÂøÉË∑≥Êú∫Âà∂Ôºü</p>
<p>ËøõÂÖ•ÂëΩ‰ª§‰º†Êí≠Èò∂ÊÆµÂÄôÔºåmaster‰∏éslaveÈó¥ÈúÄË¶ÅËøõË°å‰ø°ÊÅØ‰∫§Êç¢Ôºå‰ΩøÁî®ÂøÉË∑≥Êú∫Âà∂ËøõË°åÁª¥Êä§ÔºåÂÆûÁé∞ÂèåÊñπËøûÊé•‰øùÊåÅÂú®Á∫ø</p>
<p>masterÂøÉË∑≥Ôºö</p>
<ul>
<li>ÂÜÖÈÉ®Êåá‰ª§ÔºöPING</li>
<li>Âë®ÊúüÔºöÁî±repl-ping-slave-periodÂÜ≥ÂÆöÔºåÈªòËÆ§10Áßí</li>
<li>‰ΩúÁî®ÔºöÂà§Êñ≠slaveÊòØÂê¶Âú®Á∫ø</li>
<li>Êü•ËØ¢ÔºöINFO replication  Ëé∑ÂèñslaveÊúÄÂêé‰∏ÄÊ¨°ËøûÊé•Êó∂Èó¥Èó¥ÈöîÔºålagÈ°πÁª¥ÊåÅÂú®0Êàñ1ËßÜ‰∏∫Ê≠£Â∏∏</li>
</ul>
<p>slaveÂøÉË∑≥‰ªªÂä°</p>
<ul>
<li>ÂÜÖÈÉ®Êåá‰ª§ÔºöREPLCONF ACK {offset}</li>
<li>Âë®ÊúüÔºö1Áßí</li>
<li>‰ΩúÁî®1ÔºöÊ±áÊä•slaveËá™Â∑±ÁöÑÂ§çÂà∂ÂÅèÁßªÈáèÔºåËé∑ÂèñÊúÄÊñ∞ÁöÑÊï∞ÊçÆÂèòÊõ¥Êåá‰ª§</li>
<li>‰ΩúÁî®2ÔºöÂà§Êñ≠masterÊòØÂê¶Âú®Á∫ø</li>
</ul>
<p>ÂøÉË∑≥Èò∂ÊÆµÊ≥®ÊÑè‰∫ãÈ°πÔºö</p>
<ul>
<li>ÂΩìslaveÂ§öÊï∞ÊéâÁ∫øÔºåÊàñÂª∂ËøüËøáÈ´òÊó∂Ôºåmaster‰∏∫‰øùÈöúÊï∞ÊçÆÁ®≥ÂÆöÊÄßÔºåÂ∞ÜÊãíÁªùÊâÄÊúâ‰ø°ÊÅØÂêåÊ≠•</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">min-slaves-to-write</span> <span class="hljs-string">2</span><br><span class="hljs-attr">min-slaves-max-lag</span> <span class="hljs-string">8</span><br></code></pre></td></tr></table></figure>

<p>slaveÊï∞ÈáèÂ∞ë‰∫é2‰∏™ÔºåÊàñËÄÖÊâÄÊúâslaveÁöÑÂª∂ËøüÈÉΩÂ§ß‰∫éÁ≠â‰∫é8ÁßíÊó∂ÔºåÂº∫Âà∂ÂÖ≥Èó≠masterÂÜôÂäüËÉΩÔºåÂÅúÊ≠¢Êï∞ÊçÆÂêåÊ≠•</p>
<ul>
<li><p>slaveÊï∞ÈáèÁî±slaveÂèëÈÄÅREPLCONF ACKÂëΩ‰ª§ÂÅöÁ°ÆËÆ§</p>
</li>
<li><p>slaveÂª∂ËøüÁî±slaveÂèëÈÄÅREPLCONF ACKÂëΩ‰ª§ÂÅöÁ°ÆËÆ§</p>
</li>
</ul>
<p>Ëá≥Ê≠§ÔºöÊàë‰ª¨ÂèØ‰ª•ÊÄªÁªìÂá∫ÂÆåÊï¥ÁöÑ‰∏ª‰ªéÂ§çÂà∂ÊµÅÁ®ãÔºö</p>
<p><img src="https://i0.hdslb.com/bfs/album/4f6d7ddfaab01afd5f8b47fe48591d3ca1956fc3.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h3 id="2-3-‰∏ª‰ªéÂ§çÂà∂Â∏∏ËßÅÈóÆÈ¢ò"><a href="#2-3-‰∏ª‰ªéÂ§çÂà∂Â∏∏ËßÅÈóÆÈ¢ò" class="headerlink" title="2.3 ‰∏ª‰ªéÂ§çÂà∂Â∏∏ËßÅÈóÆÈ¢ò"></a>2.3 ‰∏ª‰ªéÂ§çÂà∂Â∏∏ËßÅÈóÆÈ¢ò</h3><h4 id="2-3-1-È¢ëÁπÅÁöÑÂÖ®ÈáèÂ§çÂà∂"><a href="#2-3-1-È¢ëÁπÅÁöÑÂÖ®ÈáèÂ§çÂà∂" class="headerlink" title="2.3.1 È¢ëÁπÅÁöÑÂÖ®ÈáèÂ§çÂà∂"></a>2.3.1 È¢ëÁπÅÁöÑÂÖ®ÈáèÂ§çÂà∂</h4><ul>
<li>‰º¥ÈöèÁùÄÁ≥ªÁªüÁöÑËøêË°åÔºåmasterÁöÑÊï∞ÊçÆÈáè‰ºöË∂äÊù•Ë∂äÂ§ßÔºå‰∏ÄÊó¶masterÈáçÂêØÔºårunidÂ∞ÜÂèëÁîüÂèòÂåñÔºå‰ºöÂØºËá¥ÂÖ®ÈÉ®slaveÁöÑÂÖ®ÈáèÂ§çÂà∂Êìç‰Ωú</li>
</ul>
<p>ÂÜÖÈÉ®‰ºòÂåñË∞ÉÊï¥ÊñπÊ°àÔºö</p>
<p>1ÔºömasterÂÜÖÈÉ®ÂàõÂª∫master_replidÂèòÈáèÔºå‰ΩøÁî®runidÁõ∏ÂêåÁöÑÁ≠ñÁï•ÁîüÊàêÔºåÈïøÂ∫¶41‰ΩçÔºåÂπ∂ÂèëÈÄÅÁªôÊâÄÊúâslave</p>
<p>2ÔºöÂú®masterÂÖ≥Èó≠Êó∂ÊâßË°åÂëΩ‰ª§shutdown saveÔºåËøõË°åRDBÊåÅ‰πÖÂåñ,Â∞Ürunid‰∏éoffset‰øùÂ≠òÂà∞RDBÊñá‰ª∂‰∏≠</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">repl-id  repl-offset<br><br>ÈÄöËøáredis-check-rdbÂëΩ‰ª§ÂèØ‰ª•Êü•ÁúãËØ•‰ø°ÊÅØ<br></code></pre></td></tr></table></figure>

<p>3ÔºömasterÈáçÂêØÂêéÂä†ËΩΩRDBÊñá‰ª∂ÔºåÊÅ¢Â§çÊï∞ÊçÆÔºåÈáçÂêØÂêéÔºåÂ∞ÜRDBÊñá‰ª∂‰∏≠‰øùÂ≠òÁöÑrepl-id‰∏érepl-offsetÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">master<span class="hljs-emphasis">_repl_</span>id=repl  master<span class="hljs-emphasis">_repl_</span>offset =repl-offset<br><br>ÈÄöËøáinfoÂëΩ‰ª§ÂèØ‰ª•Êü•ÁúãËØ•‰ø°ÊÅØ<br></code></pre></td></tr></table></figure>

<p>‰ΩúÁî®ÔºöÊú¨Êú∫‰øùÂ≠ò‰∏äÊ¨°runidÔºåÈáçÂêØÂêéÊÅ¢Â§çËØ•ÂÄºÔºå‰ΩøÊâÄÊúâslaveËÆ§‰∏∫ËøòÊòØ‰πãÂâçÁöÑmaster</p>
<ul>
<li>Á¨¨‰∫åÁßçÂá∫Áé∞È¢ëÁπÅÂÖ®ÈáèÂ§çÂà∂ÁöÑÈóÆÈ¢òÁé∞Ë±°ÔºöÁΩëÁªúÁéØÂ¢É‰∏ç‰Ω≥ÔºåÂá∫Áé∞ÁΩëÁªú‰∏≠Êñ≠Ôºåslave‰∏çÊèê‰æõÊúçÂä°</li>
</ul>
<p>ÈóÆÈ¢òÂéüÂõ†ÔºöÂ§çÂà∂ÁºìÂÜ≤Âå∫ËøáÂ∞èÔºåÊñ≠ÁΩëÂêéslaveÁöÑoffsetË∂äÁïåÔºåËß¶ÂèëÂÖ®ÈáèÂ§çÂà∂</p>
<p>ÊúÄÁªàÁªìÊûúÔºöslaveÂèçÂ§çËøõË°åÂÖ®ÈáèÂ§çÂà∂</p>
<p>Ëß£ÂÜ≥ÊñπÊ°àÔºö‰øÆÊîπÂ§çÂà∂ÁºìÂÜ≤Âå∫Â§ßÂ∞è</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">repl-backlog-size</span> <span class="hljs-string">?mb</span><br></code></pre></td></tr></table></figure>

<p>Âª∫ËÆÆËÆæÁΩÆÂ¶Ç‰∏ãÔºö</p>
<p>1.ÊµãÁÆó‰ªémasterÂà∞slaveÁöÑÈáçËøûÂπ≥ÂùáÊó∂Èïøsecond</p>
<p>2.Ëé∑ÂèñmasterÂπ≥ÂùáÊØèÁßí‰∫ßÁîüÂÜôÂëΩ‰ª§Êï∞ÊçÆÊÄªÈáèwrite_size_per_second</p>
<p>3.ÊúÄ‰ºòÂ§çÂà∂ÁºìÂÜ≤Âå∫Á©∫Èó¥ &#x3D; 2 * second * write_size_per_second</p>
<h4 id="2-3-2-È¢ëÁπÅÁöÑÁΩëÁªú‰∏≠Êñ≠"><a href="#2-3-2-È¢ëÁπÅÁöÑÁΩëÁªú‰∏≠Êñ≠" class="headerlink" title="2.3.2 È¢ëÁπÅÁöÑÁΩëÁªú‰∏≠Êñ≠"></a>2.3.2 È¢ëÁπÅÁöÑÁΩëÁªú‰∏≠Êñ≠</h4><ul>
<li>ÈóÆÈ¢òÁé∞Ë±°ÔºömasterÁöÑCPUÂç†Áî®ËøáÈ´ò Êàñ slaveÈ¢ëÁπÅÊñ≠ÂºÄËøûÊé•</li>
</ul>
<p>ÈóÆÈ¢òÂéüÂõ†</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">slaveÊØè1ÁßíÂèëÈÄÅREPLCONFACKÂëΩ‰ª§Âà∞master<br><br>ÂΩìslaveÊé•Âà∞‰∫ÜÊÖ¢Êü•ËØ¢Êó∂Ôºàkeys <span class="hljs-emphasis">* ÔºåhgetallÁ≠âÔºâÔºå‰ºöÂ§ßÈáèÂç†Áî®CPUÊÄßËÉΩ</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">masterÊØè1ÁßíË∞ÉÁî®Â§çÂà∂ÂÆöÊó∂ÂáΩÊï∞replicationCron()ÔºåÊØîÂØπslaveÂèëÁé∞ÈïøÊó∂Èó¥Ê≤°ÊúâËøõË°åÂìçÂ∫î</span><br></code></pre></td></tr></table></figure>

<p>ÊúÄÁªàÁªìÊûúÔºömasterÂêÑÁßçËµÑÊ∫êÔºàËæìÂá∫ÁºìÂÜ≤Âå∫„ÄÅÂ∏¶ÂÆΩ„ÄÅËøûÊé•Á≠âÔºâË¢´‰∏•ÈáçÂç†Áî®</p>
<p>Ëß£ÂÜ≥ÊñπÊ°àÔºöÈÄöËøáËÆæÁΩÆÂêàÁêÜÁöÑË∂ÖÊó∂Êó∂Èó¥ÔºåÁ°ÆËÆ§ÊòØÂê¶ÈáäÊîæslave</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">repl-timeout</span> <span class="hljs-string">seconds</span><br></code></pre></td></tr></table></figure>

<p>ËØ•ÂèÇÊï∞ÂÆö‰πâ‰∫ÜË∂ÖÊó∂Êó∂Èó¥ÁöÑÈòàÂÄºÔºàÈªòËÆ§60ÁßíÔºâÔºåË∂ÖËøáËØ•ÂÄºÔºåÈáäÊîæslave</p>
<ul>
<li>ÈóÆÈ¢òÁé∞Ë±°Ôºöslave‰∏émasterËøûÊé•Êñ≠ÂºÄ</li>
</ul>
<p>ÈóÆÈ¢òÂéüÂõ†</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">masterÂèëÈÄÅpingÊåá‰ª§È¢ëÂ∫¶ËæÉ‰Ωé<br><br>masterËÆæÂÆöË∂ÖÊó∂Êó∂Èó¥ËæÉÁü≠<br><br>pingÊåá‰ª§Âú®ÁΩëÁªú‰∏≠Â≠òÂú®‰∏¢ÂåÖ<br></code></pre></td></tr></table></figure>

<p>Ëß£ÂÜ≥ÊñπÊ°àÔºöÊèêÈ´òpingÊåá‰ª§ÂèëÈÄÅÁöÑÈ¢ëÂ∫¶</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">repl-ping-slave-period</span> <span class="hljs-string">seconds</span><br></code></pre></td></tr></table></figure>

<p>Ë∂ÖÊó∂Êó∂Èó¥repl-timeÁöÑÊó∂Èó¥Ëá≥Â∞ëÊòØpingÊåá‰ª§È¢ëÂ∫¶ÁöÑ5Âà∞10ÂÄçÔºåÂê¶ÂàôslaveÂæàÂÆπÊòìÂà§ÂÆöË∂ÖÊó∂</p>
<h4 id="2-3-3-Êï∞ÊçÆ‰∏ç‰∏ÄËá¥"><a href="#2-3-3-Êï∞ÊçÆ‰∏ç‰∏ÄËá¥" class="headerlink" title="2.3.3 Êï∞ÊçÆ‰∏ç‰∏ÄËá¥"></a>2.3.3 Êï∞ÊçÆ‰∏ç‰∏ÄËá¥</h4><p>ÈóÆÈ¢òÁé∞Ë±°ÔºöÂ§ö‰∏™slaveËé∑ÂèñÁõ∏ÂêåÊï∞ÊçÆ‰∏çÂêåÊ≠•</p>
<p>ÈóÆÈ¢òÂéüÂõ†ÔºöÁΩëÁªú‰ø°ÊÅØ‰∏çÂêåÊ≠•ÔºåÊï∞ÊçÆÂèëÈÄÅÊúâÂª∂Ëøü</p>
<p>Ëß£ÂÜ≥ÊñπÊ°à</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">‰ºòÂåñ‰∏ª‰ªéÈó¥ÁöÑÁΩëÁªúÁéØÂ¢ÉÔºåÈÄöÂ∏∏ÊîæÁΩÆÂú®Âêå‰∏Ä‰∏™Êú∫ÊàøÈÉ®ÁΩ≤ÔºåÂ¶Ç‰ΩøÁî®ÈòøÈáå‰∫ëÁ≠â‰∫ëÊúçÂä°Âô®Êó∂Ë¶ÅÊ≥®ÊÑèÊ≠§Áé∞Ë±°<br><br>ÁõëÊéß‰∏ª‰ªéËäÇÁÇπÂª∂ËøüÔºàÈÄöËøáoffsetÔºâÂà§Êñ≠ÔºåÂ¶ÇÊûúslaveÂª∂ËøüËøáÂ§ßÔºåÊöÇÊó∂Â±èËîΩÁ®ãÂ∫èÂØπËØ•slaveÁöÑÊï∞ÊçÆËÆøÈóÆ<br></code></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slave-serve-stale-data</span>	<span class="hljs-string">yes|no</span><br></code></pre></td></tr></table></figure>

<p>ÂºÄÂêØÂêé‰ªÖÂìçÂ∫îinfo„ÄÅslaveofÁ≠âÂ∞ëÊï∞ÂëΩ‰ª§ÔºàÊÖéÁî®ÔºåÈô§ÈùûÂØπÊï∞ÊçÆ‰∏ÄËá¥ÊÄßË¶ÅÊ±ÇÂæàÈ´òÔºâ</p>
<h2 id="3-Âì®ÂÖµÊ®°Âºè"><a href="#3-Âì®ÂÖµÊ®°Âºè" class="headerlink" title="3.Âì®ÂÖµÊ®°Âºè"></a>3.Âì®ÂÖµÊ®°Âºè</h2><h3 id="3-1-Âì®ÂÖµÁÆÄ‰ªã"><a href="#3-1-Âì®ÂÖµÁÆÄ‰ªã" class="headerlink" title="3.1 Âì®ÂÖµÁÆÄ‰ªã"></a>3.1 Âì®ÂÖµÁÆÄ‰ªã</h3><h4 id="3-1-1-Âì®ÂÖµÊ¶ÇÂøµ"><a href="#3-1-1-Âì®ÂÖµÊ¶ÇÂøµ" class="headerlink" title="3.1.1 Âì®ÂÖµÊ¶ÇÂøµ"></a>3.1.1 Âì®ÂÖµÊ¶ÇÂøµ</h4><p>È¶ñÂÖàÊàë‰ª¨Êù•Áúã‰∏Ä‰∏™‰∏öÂä°Âú∫ÊôØÔºöÂ¶ÇÊûúredisÁöÑmasterÂÆïÊú∫‰∫ÜÔºåÊ≠§Êó∂Â∫îËØ•ÊÄé‰πàÂäûÔºü</p>
<p><img src="https://i0.hdslb.com/bfs/album/08d8577cccff883e83b649b55f62258e320458bb.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>ÈÇ£Ê≠§Êó∂Êàë‰ª¨ÂèØËÉΩÈúÄË¶Å‰ªé‰∏ÄÂ†ÜÁöÑslave‰∏≠ÈáçÊñ∞ÈÄâ‰∏æÂá∫‰∏Ä‰∏™Êñ∞ÁöÑmasterÔºåÈÇ£Ëøô‰∏™Êìç‰ΩúËøáÁ®ãÊòØ‰ªÄ‰πàÊ†∑ÁöÑÂë¢ÔºüËøôÈáåÈù¢‰ºöÊúâ‰ªÄ‰πàÈóÆÈ¢òÂá∫Áé∞Âë¢Ôºü</p>
<p><img src="https://i0.hdslb.com/bfs/album/5da8f1b442ccb714d6d7cfeeb8d4e46d72fe0eb2.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>Ë¶ÅÂÆûÁé∞Ëøô‰∫õÂäüËÉΩÔºåÊàë‰ª¨Â∞±ÈúÄË¶ÅredisÁöÑÂì®ÂÖµÔºåÈÇ£Âì®ÂÖµÊòØ‰ªÄ‰πàÂë¢Ôºü</p>
<p><strong>Âì®ÂÖµ</strong></p>
<p>Âì®ÂÖµ(sentinel) ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºåÁî®‰∫éÂØπ‰∏ª‰ªéÁªìÊûÑ‰∏≠ÁöÑÊØèÂè∞ÊúçÂä°Âô®ËøõË°å<strong>ÁõëÊéß</strong>ÔºåÂΩìÂá∫Áé∞ÊïÖÈöúÊó∂ÈÄöËøá<strong>ÊäïÁ•®</strong>Êú∫Âà∂<strong>ÈÄâÊã©</strong>Êñ∞ÁöÑmasterÂπ∂Â∞ÜÊâÄÊúâslaveËøûÊé•Âà∞Êñ∞ÁöÑmaster„ÄÇ</p>
<p><img src="https://i0.hdslb.com/bfs/album/0773e47beaafb6409fc3dcbe6bcfcd884baf9579.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h4 id="3-1-2-Âì®ÂÖµ‰ΩúÁî®"><a href="#3-1-2-Âì®ÂÖµ‰ΩúÁî®" class="headerlink" title="3.1.2 Âì®ÂÖµ‰ΩúÁî®"></a>3.1.2 Âì®ÂÖµ‰ΩúÁî®</h4><p>Âì®ÂÖµÁöÑ‰ΩúÁî®Ôºö</p>
<ul>
<li><p>ÁõëÊéßÔºöÁõëÊéßmasterÂíåslave</p>
<p>‰∏çÊñ≠ÁöÑÊ£ÄÊü•masterÂíåslaveÊòØÂê¶Ê≠£Â∏∏ËøêË°å</p>
<p>masterÂ≠òÊ¥ªÊ£ÄÊµã„ÄÅmaster‰∏éslaveËøêË°åÊÉÖÂÜµÊ£ÄÊµã</p>
</li>
<li><p>ÈÄöÁü•ÔºàÊèêÈÜíÔºâÔºöÂΩìË¢´ÁõëÊéßÁöÑÊúçÂä°Âô®Âá∫Áé∞ÈóÆÈ¢òÊó∂ÔºåÂêëÂÖ∂‰ªñÔºàÂì®ÂÖµÈó¥ÔºåÂÆ¢Êà∑Á´ØÔºâÂèëÈÄÅÈÄöÁü•</p>
</li>
<li><p>Ëá™Âä®ÊïÖÈöúËΩ¨ÁßªÔºöÊñ≠ÂºÄmaster‰∏éslaveËøûÊé•ÔºåÈÄâÂèñ‰∏Ä‰∏™slave‰Ωú‰∏∫masterÔºåÂ∞ÜÂÖ∂‰ªñslaveËøûÊé•Êñ∞ÁöÑmasterÔºåÂπ∂ÂëäÁü•ÂÆ¢Êà∑Á´ØÊñ∞ÁöÑÊúçÂä°Âô®Âú∞ÂùÄ</p>
</li>
</ul>
<p>Ê≥®ÊÑèÔºöÂì®ÂÖµ‰πüÊòØ‰∏ÄÂè∞redisÊúçÂä°Âô®ÔºåÂè™ÊòØ‰∏çÊèê‰æõÊï∞ÊçÆÁõ∏ÂÖ≥ÊúçÂä°ÔºåÈÄöÂ∏∏Âì®ÂÖµÁöÑÊï∞ÈáèÈÖçÁΩÆ‰∏∫ÂçïÊï∞</p>
<h3 id="3-2-ÂêØÁî®Âì®ÂÖµ"><a href="#3-2-ÂêØÁî®Âì®ÂÖµ" class="headerlink" title="3.2 ÂêØÁî®Âì®ÂÖµ"></a>3.2 ÂêØÁî®Âì®ÂÖµ</h3><p>ÈÖçÁΩÆÂì®ÂÖµ</p>
<ul>
<li><p>ÈÖçÁΩÆ‰∏ÄÊãñ‰∫åÁöÑ‰∏ª‰ªéÁªìÊûÑÔºàÂà©Áî®‰πãÂâçÁöÑÊñπÂºèÂêØÂä®Âç≥ÂèØÔºâ</p>
</li>
<li><p>ÈÖçÁΩÆ‰∏â‰∏™Âì®ÂÖµÔºàÈÖçÁΩÆÁõ∏ÂêåÔºåÁ´ØÂè£‰∏çÂêåÔºâÔºåÂèÇÁúãsentinel.conf</p>
</li>
</ul>
<p>1ÔºöËÆæÁΩÆÂì®ÂÖµÁõëÂê¨ÁöÑ‰∏ªÊúçÂä°Âô®‰ø°ÊÅØÔºå sentinel_numberË°®Á§∫ÂèÇ‰∏éÊäïÁ•®ÁöÑÂì®ÂÖµÊï∞Èáè</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sentinel</span> <span class="hljs-string">monitor master_name  master_host	master_port	 sentinel_number</span><br></code></pre></td></tr></table></figure>
<p>2ÔºöËÆæÁΩÆÂà§ÂÆöÊúçÂä°Âô®ÂÆïÊú∫Êó∂ÈïøÔºåËØ•ËÆæÁΩÆÊéßÂà∂ÊòØÂê¶ËøõË°å‰∏ª‰ªéÂàáÊç¢</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sentinel</span> <span class="hljs-string">down-after-milliseconds master_name	million_seconds</span><br></code></pre></td></tr></table></figure>

<p>3ÔºöËÆæÁΩÆÊïÖÈöúÂàáÊç¢ÁöÑÊúÄÂ§ßË∂ÖÊó∂Êó∂</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sentinel</span> <span class="hljs-string">failover-timeout master_name	million_seconds</span><br></code></pre></td></tr></table></figure>

<p>4ÔºöËÆæÁΩÆ‰∏ª‰ªéÂàáÊç¢ÂêéÔºåÂêåÊó∂ËøõË°åÊï∞ÊçÆÂêåÊ≠•ÁöÑslaveÊï∞ÈáèÔºåÊï∞ÂÄºË∂äÂ§ßÔºåË¶ÅÊ±ÇÁΩëÁªúËµÑÊ∫êË∂äÈ´òÔºåÊï∞ÂÄºË∂äÂ∞èÔºåÂêåÊ≠•Êó∂Èó¥Ë∂äÈïø</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sentinel</span> <span class="hljs-string">parallel-syncs master_name sync_slave_number</span><br></code></pre></td></tr></table></figure>


<ul>
<li>ÂêØÂä®Âì®ÂÖµ</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-sentinel</span> <span class="hljs-string">filename</span><br></code></pre></td></tr></table></figure>

<h3 id="3-3-Âì®ÂÖµÂ∑•‰ΩúÂéüÁêÜ"><a href="#3-3-Âì®ÂÖµÂ∑•‰ΩúÂéüÁêÜ" class="headerlink" title="3.3 Âì®ÂÖµÂ∑•‰ΩúÂéüÁêÜ"></a>3.3 Âì®ÂÖµÂ∑•‰ΩúÂéüÁêÜ</h3><p>Âì®ÂÖµÂú®ËøõË°å‰∏ª‰ªéÂàáÊç¢ËøáÁ®ã‰∏≠ÁªèÂéÜ‰∏â‰∏™Èò∂ÊÆµ</p>
<ul>
<li>ÁõëÊéß</li>
<li>ÈÄöÁü•</li>
<li>ÊïÖÈöúËΩ¨Áßª</li>
</ul>
<h4 id="3-3-1-ÁõëÊéß"><a href="#3-3-1-ÁõëÊéß" class="headerlink" title="3.3.1 ÁõëÊéß"></a>3.3.1 ÁõëÊéß</h4><p>Áî®‰∫éÂêåÊ≠•ÂêÑ‰∏™ËäÇÁÇπÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ</p>
<p><img src="https://i0.hdslb.com/bfs/album/4c1dc67a15c55ab90f9d48aa5bc8334d4cf83406.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<ul>
<li><p>Ëé∑ÂèñÂêÑ‰∏™sentinelÁöÑÁä∂ÊÄÅÔºàÊòØÂê¶Âú®Á∫øÔºâ</p>
</li>
<li><p>Ëé∑ÂèñmasterÁöÑÁä∂ÊÄÅ</p>
</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">masterÂ±ûÊÄß<br><span class="hljs-code">	prunid</span><br><span class="hljs-code">	proleÔºömaster</span><br><span class="hljs-code">ÂêÑ‰∏™slaveÁöÑËØ¶ÁªÜ‰ø°ÊÅØ	</span><br></code></pre></td></tr></table></figure>

<ul>
<li>Ëé∑ÂèñÊâÄÊúâslaveÁöÑÁä∂ÊÄÅÔºàÊ†πÊçÆmaster‰∏≠ÁöÑslave‰ø°ÊÅØÔºâ</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">slaveÂ±ûÊÄß<br><span class="hljs-code">	prunid</span><br><span class="hljs-code">	proleÔºöslave</span><br><span class="hljs-code">	pmaster_host„ÄÅmaster_port</span><br><span class="hljs-code">	poffset</span><br></code></pre></td></tr></table></figure>

<p>ÂÖ∂ÂÜÖÈÉ®ÁöÑÂ∑•‰ΩúÂéüÁêÜÂÖ∑‰ΩìÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://i0.hdslb.com/bfs/album/4c03dc16702c33abfcbafb3d3727ae88adaa3f96.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h4 id="3-3-2-ÈÄöÁü•"><a href="#3-3-2-ÈÄöÁü•" class="headerlink" title="3.3.2 ÈÄöÁü•"></a>3.3.2 ÈÄöÁü•</h4><p>sentinelÂú®ÈÄöÁü•Èò∂ÊÆµË¶Å‰∏çÊñ≠ÁöÑÂéªËé∑Âèñmaster&#x2F;slaveÁöÑ‰ø°ÊÅØÔºåÁÑ∂ÂêéÂú®ÂêÑ‰∏™sentinel‰πãÈó¥ËøõË°åÂÖ±‰∫´ÔºåÂÖ∑‰ΩìÁöÑÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://i0.hdslb.com/bfs/album/e34aeb6fd7b7cc2689d9adbefb712355a7129b69.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h4 id="3-3-3-ÊïÖÈöúËΩ¨Áßª"><a href="#3-3-3-ÊïÖÈöúËΩ¨Áßª" class="headerlink" title="3.3.3 ÊïÖÈöúËΩ¨Áßª"></a>3.3.3 ÊïÖÈöúËΩ¨Áßª</h4><p>ÂΩìmasterÂÆïÊú∫ÂêésentinelÊòØÂ¶Ç‰ΩïÁü•ÊôìÂπ∂Âà§Êñ≠Âá∫masterÊòØÁúüÁöÑÂÆïÊú∫‰∫ÜÂë¢ÔºüÊàë‰ª¨Êù•ÁúãÂÖ∑‰ΩìÁöÑÊìç‰ΩúÊµÅÁ®ã</p>
<p><img src="https://i0.hdslb.com/bfs/album/1f4dcda30633c3fc8840a8398ca03d85547bb821.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>ÂΩìsentinelËÆ§ÂÆömaster‰∏ãÁ∫ø‰πãÂêéÔºåÊ≠§Êó∂ÈúÄË¶ÅÂÜ≥ÂÆöÊõ¥Êç¢masterÔºåÈÇ£Ëøô‰ª∂‰∫ãÁî±Âì™‰∏™sentinelÊù•ÂÅöÂë¢ÔºüËøôÊó∂ÂÄôsentinel‰πãÈó¥Ë¶ÅËøõË°åÈÄâ‰∏æÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://i0.hdslb.com/bfs/album/2ecf361e12e35e177f51c22d8ef8375947aad236.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>Âú®ÈÄâ‰∏æÁöÑÊó∂ÂÄôÊØè‰∏Ä‰∏™‰∫∫ÊâãÈáåÈÉΩÊúâ‰∏ÄÁ•®ÔºåËÄåÊØè‰∏Ä‰∏™‰∫∫ÁöÑÂèàÈÉΩÊÉ≥ÂΩìËøô‰∏™Â§ÑÁêÜ‰∫ãÊïÖÁöÑ‰∫∫ÔºåÈÇ£ÊÄé‰πàÂäûÔºüÂ§ßÂÆ∂Â∞±ÂºÄÂßãÊä¢Ôºå‰∫éÊòØÊØè‰∏™‰∫∫ÈÉΩ‰ºöÂèëÂá∫‰∏Ä‰∏™Êåá‰ª§ÔºåÂú®ÂÜÖÁΩëÈáåËæπÂëäËØâÂ§ßÂÆ∂ÊàëË¶ÅÂΩìÈÄâ‰∏æ‰∫∫ÔºåÊØîÂ¶ÇËØ¥Áé∞Âú®ÁöÑsentinel1Âíåsentinel4ÂèëÂá∫Ëøô‰∏™ÈÄâ‰∏æÊåá‰ª§‰∫ÜÔºåÈÇ£‰πàsentinel2Êó¢ËÉΩÊé•Âà∞sentinel1ÁöÑ‰πüËÉΩÊé•Âà∞sentinel4ÁöÑÔºåÊé•Âà∞‰∫Ü‰ªñ‰ª¨ÁöÑÁî≥ËØ∑‰ª•ÂêéÂë¢Ôºåsentinel2‰ªñÂ∞±‰ºöÊää‰ªñÁöÑ‰∏ÄÁ•®ÊäïÁªôÂÖ∂‰∏≠‰∏ÄÊñπÔºåÊäïÁªôË∞ÅÂë¢ÔºüË∞ÅÂÖàËøáÊù•ÊàëÊäïÁªôË∞ÅÔºåÂÅáËÆæsentinel1ÂÖàËøáÊù•ÔºåÊâÄ‰ª•Ëøô‰∏™Á•®Â∞±ÁªôÂà∞‰∫Üsentinel1„ÄÇÈÇ£‰πàÁªôËøáÂéª‰ª•ÂêéÂë¢ÔºåÁé∞Âú®sentinel1Â∞±ÊãøÂà∞‰∫Ü‰∏ÄÁ•®ÔºåÊåâÁÖßËøôÊ†∑ÁöÑ‰∏ÄÁßçÂΩ¢ÂºèÔºåÊúÄÁªà‰ºöÊúâ‰∏Ä‰∏™ÈÄâ‰∏æÁªìÊûú„ÄÇÂØπÂ∫îÁöÑÈÄâ‰∏æÊúÄÁªàÂæóÁ•®Â§öÁöÑÔºåÈÇ£Ëá™ÁÑ∂Â∞±Êàê‰∏∫‰∫ÜÂ§ÑÁêÜ‰∫ãÊïÖÁöÑ‰∫∫„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÊúâÂèØËÉΩ‰ºöÂ≠òÂú®Â§±Ë¥•ÁöÑÁé∞Ë±°ÔºåÂ∞±ÊòØ‰∏ÄËΩÆÈÄâ‰∏æÂÆåÊ≤°ÊúâÈÄâÂèñÔºåÈÇ£Â∞±‰ºöÊé•ÁùÄËøõË°åÁ¨¨‰∫åËΩÆÁ¨¨‰∏âËΩÆÁõ¥Âà∞ÂÆåÊàêÈÄâ‰∏æ„ÄÇ</p>
<p>Êé•‰∏ãÊù•Â∞±ÊòØÁî±ÈÄâ‰∏æËÉúÂá∫ÁöÑsentinelÂéª‰ªéslave‰∏≠ÈÄâ‰∏Ä‰∏™Êñ∞ÁöÑmasterÂá∫Êù•ÁöÑÂ∑•‰ΩúÔºåËøô‰∏™ÊµÅÁ®ãÊòØ‰ªÄ‰πàÊ†∑ÁöÑÂë¢Ôºü</p>
<p>È¶ñÂÖàÂÆÉÊúâ‰∏Ä‰∏™Âú®ÊúçÂä°Âô®ÂàóË°®‰∏≠ÊåëÈÄâÂ§áÈÄâmasterÁöÑÂéüÂàô</p>
<ul>
<li><p>‰∏çÂú®Á∫øÁöÑOUT</p>
</li>
<li><p>ÂìçÂ∫îÊÖ¢ÁöÑOUT</p>
</li>
<li><p>‰∏éÂéümasterÊñ≠ÂºÄÊó∂Èó¥‰πÖÁöÑOUT</p>
</li>
<li><p>‰ºòÂÖàÂéüÂàô</p>
<p>‚Äã    ‰ºòÂÖàÁ∫ß<br>‚Äã        offset<br>‚Äã        runid</p>
</li>
</ul>
<p>ÈÄâÂá∫Êñ∞ÁöÑmaster‰πãÂêéÔºåÂèëÈÄÅÊåá‰ª§Ôºà sentinel ÔºâÁªôÂÖ∂‰ªñÁöÑslaveÔºö</p>
<ul>
<li><p>ÂêëÊñ∞ÁöÑmasterÂèëÈÄÅslaveof no one</p>
</li>
<li><p>ÂêëÂÖ∂‰ªñslaveÂèëÈÄÅslaveof Êñ∞masterIPÁ´ØÂè£</p>
</li>
</ul>
<p><strong>ÊÄªÁªì</strong>ÔºöÊïÖÈöúËΩ¨ÁßªÈò∂ÊÆµ</p>
<ol>
<li>ÂèëÁé∞ÈóÆÈ¢òÔºå‰∏ªËßÇ‰∏ãÁ∫ø‰∏éÂÆ¢ËßÇ‰∏ãÁ∫ø</li>
<li>Á´ûÈÄâË¥üË¥£‰∫∫</li>
<li>‰ºòÈÄâÊñ∞master</li>
<li>Êñ∞master‰∏ä‰ªªÔºåÂÖ∂‰ªñslaveÂàáÊç¢masterÔºåÂéümaster‰Ωú‰∏∫slaveÊïÖÈöúÊÅ¢Â§çÂêéËøûÊé•</li>
</ol>
<h2 id="4-ÈõÜÁæ§cluster"><a href="#4-ÈõÜÁæ§cluster" class="headerlink" title="4.ÈõÜÁæ§cluster"></a>4.ÈõÜÁæ§cluster</h2><p>Áé∞Áä∂ÈóÆÈ¢òÔºö‰∏öÂä°ÂèëÂ±ïËøáÁ®ã‰∏≠ÈÅáÂà∞ÁöÑÂ≥∞ÂÄºÁì∂È¢à</p>
<ul>
<li>redisÊèê‰æõÁöÑÊúçÂä°OPSÂèØ‰ª•ËææÂà∞10‰∏á&#x2F;ÁßíÔºåÂΩìÂâç‰∏öÂä°OPSÂ∑≤ÁªèËææÂà∞10‰∏á&#x2F;Áßí</li>
<li>ÂÜÖÂ≠òÂçïÊú∫ÂÆπÈáèËææÂà∞256GÔºåÂΩìÂâç‰∏öÂä°ÈúÄÊ±ÇÂÜÖÂ≠òÂÆπÈáè1T</li>
<li>‰ΩøÁî®ÈõÜÁæ§ÁöÑÊñπÂºèÂèØ‰ª•Âø´ÈÄüËß£ÂÜ≥‰∏äËø∞ÈóÆÈ¢ò</li>
</ul>
<h3 id="4-1-ÈõÜÁæ§ÁÆÄ‰ªã"><a href="#4-1-ÈõÜÁæ§ÁÆÄ‰ªã" class="headerlink" title="4.1 ÈõÜÁæ§ÁÆÄ‰ªã"></a>4.1 ÈõÜÁæ§ÁÆÄ‰ªã</h3><p>ÈõÜÁæ§Â∞±ÊòØ‰ΩøÁî®ÁΩëÁªúÂ∞ÜËã•Âπ≤Âè∞ËÆ°ÁÆóÊú∫ËÅîÈÄöËµ∑Êù•ÔºåÂπ∂Êèê‰æõÁªü‰∏ÄÁöÑÁÆ°ÁêÜÊñπÂºèÔºå‰ΩøÂÖ∂ÂØπÂ§ñÂëàÁé∞ÂçïÊú∫ÁöÑÊúçÂä°ÊïàÊûú</p>
<p><img src="https://i0.hdslb.com/bfs/album/145f8013cb90437e70b7b8d005722d4a134b1e39.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p><strong>ÈõÜÁæ§‰ΩúÁî®Ôºö</strong></p>
<ul>
<li>ÂàÜÊï£ÂçïÂè∞ÊúçÂä°Âô®ÁöÑËÆøÈóÆÂéãÂäõÔºåÂÆûÁé∞Ë¥üËΩΩÂùáË°°</li>
<li>ÂàÜÊï£ÂçïÂè∞ÊúçÂä°Âô®ÁöÑÂ≠òÂÇ®ÂéãÂäõÔºåÂÆûÁé∞ÂèØÊâ©Â±ïÊÄß</li>
<li>Èôç‰ΩéÂçïÂè∞ÊúçÂä°Âô®ÂÆïÊú∫Â∏¶Êù•ÁöÑ‰∏öÂä°ÁÅæÈöæ</li>
</ul>
<p><img src="https://i0.hdslb.com/bfs/album/39af456882cf5a8302e5fde4831630d9d3ca7c38.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h3 id="4-2-ClusterÈõÜÁæ§ÁªìÊûÑËÆæËÆ°"><a href="#4-2-ClusterÈõÜÁæ§ÁªìÊûÑËÆæËÆ°" class="headerlink" title="4.2 ClusterÈõÜÁæ§ÁªìÊûÑËÆæËÆ°"></a>4.2 ClusterÈõÜÁæ§ÁªìÊûÑËÆæËÆ°</h3><p><strong>Êï∞ÊçÆÂ≠òÂÇ®ËÆæËÆ°Ôºö</strong></p>
<ol>
<li><p>ÈÄöËøáÁÆóÊ≥ïËÆæËÆ°ÔºåËÆ°ÁÆóÂá∫keyÂ∫îËØ•‰øùÂ≠òÁöÑ‰ΩçÁΩÆ</p>
</li>
<li><p>Â∞ÜÊâÄÊúâÁöÑÂ≠òÂÇ®Á©∫Èó¥ËÆ°ÂàíÂàáÂâ≤Êàê16384‰ªΩÔºåÊØèÂè∞‰∏ªÊú∫‰øùÂ≠ò‰∏ÄÈÉ®ÂàÜ</p>
<p>Ê≥®ÊÑèÔºöÊØè‰ªΩ‰ª£Ë°®ÁöÑÊòØ‰∏Ä‰∏™Â≠òÂÇ®Á©∫Èó¥Ôºå‰∏çÊòØ‰∏Ä‰∏™keyÁöÑ‰øùÂ≠òÁ©∫Èó¥</p>
</li>
<li><p>Â∞ÜkeyÊåâÁÖßËÆ°ÁÆóÂá∫ÁöÑÁªìÊûúÊîæÂà∞ÂØπÂ∫îÁöÑÂ≠òÂÇ®Á©∫Èó¥</p>
</li>
</ol>
<p><img src="https://i0.hdslb.com/bfs/album/791eb9845c3736869fed35b50cc9868fb835d916.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>ÈÇ£redisÁöÑÈõÜÁæ§ÊòØÂ¶Ç‰ΩïÂ¢ûÂº∫ÂèØÊâ©Â±ïÊÄßÁöÑÂë¢ÔºüË≠¨Â¶ÇÊàë‰ª¨Ë¶ÅÂ¢ûÂä†‰∏Ä‰∏™ÈõÜÁæ§ËäÇÁÇπ</p>
<p><img src="https://i0.hdslb.com/bfs/album/00580f036b059a00d83d0d9570072325fdd45752.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<p>ÂΩìÊàë‰ª¨Êü•ÊâæÊï∞ÊçÆÊó∂ÔºåÈõÜÁæ§ÊòØÂ¶Ç‰ΩïÊìç‰ΩúÁöÑÂë¢Ôºü</p>
<ul>
<li>ÂêÑ‰∏™Êï∞ÊçÆÂ∫ìÁõ∏‰∫íÈÄö‰ø°Ôºå‰øùÂ≠òÂêÑ‰∏™Â∫ì‰∏≠ÊßΩÁöÑÁºñÂè∑Êï∞ÊçÆ</li>
<li>‰∏ÄÊ¨°ÂëΩ‰∏≠ÔºåÁõ¥Êé•ËøîÂõû</li>
<li>‰∏ÄÊ¨°Êú™ÂëΩ‰∏≠ÔºåÂëäÁü•ÂÖ∑‰Ωì‰ΩçÁΩÆ</li>
</ul>
<p><img src="https://i0.hdslb.com/bfs/album/36b30070acc274e87406fbd5e6010be5bdab1467.png" srcset="/Hexo/img/loading.gif" lazyload></p>
<h3 id="4-3-ClusterÈõÜÁæ§ÁªìÊûÑÊê≠Âª∫"><a href="#4-3-ClusterÈõÜÁæ§ÁªìÊûÑÊê≠Âª∫" class="headerlink" title="4.3 ClusterÈõÜÁæ§ÁªìÊûÑÊê≠Âª∫"></a>4.3 ClusterÈõÜÁæ§ÁªìÊûÑÊê≠Âª∫</h3><p>È¶ñÂÖàË¶ÅÊòéÁ°ÆÁöÑÂá†‰∏™Ë¶ÅÁÇπÔºö</p>
<ul>
<li>ÈÖçÁΩÆÊúçÂä°Âô®Ôºà3‰∏ª3‰ªéÔºâ</li>
<li>Âª∫Á´ãÈÄö‰ø°ÔºàMeetÔºâ</li>
<li>ÂàÜÊßΩÔºàSlotÔºâ</li>
<li>Êê≠Âª∫‰∏ª‰ªéÔºàmaster-slaveÔºâ</li>
</ul>
<p><strong>ClusterÈÖçÁΩÆ</strong></p>
<ul>
<li>ÊòØÂê¶ÂêØÁî®clusterÔºåÂä†ÂÖ•clusterËäÇÁÇπ</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster-enabled</span> <span class="hljs-string">yes|no</span><br></code></pre></td></tr></table></figure>

<ul>
<li>clusterÈÖçÁΩÆÊñá‰ª∂ÂêçÔºåËØ•Êñá‰ª∂Â±û‰∫éËá™Âä®ÁîüÊàêÔºå‰ªÖÁî®‰∫éÂø´ÈÄüÊü•ÊâæÊñá‰ª∂Âπ∂Êü•ËØ¢Êñá‰ª∂ÂÜÖÂÆπ</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster-config-file</span> <span class="hljs-string">filename</span><br></code></pre></td></tr></table></figure>

<ul>
<li>ËäÇÁÇπÊúçÂä°ÂìçÂ∫îË∂ÖÊó∂Êó∂Èó¥ÔºåÁî®‰∫éÂà§ÂÆöËØ•ËäÇÁÇπÊòØÂê¶‰∏ãÁ∫øÊàñÂàáÊç¢‰∏∫‰ªéËäÇÁÇπ</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster-node-timeout</span> <span class="hljs-string">milliseconds</span><br></code></pre></td></tr></table></figure>

<ul>
<li>masterËøûÊé•ÁöÑslaveÊúÄÂ∞èÊï∞Èáè</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster-migration-barrier</span> <span class="hljs-string">min_slave_number</span><br></code></pre></td></tr></table></figure>

<p><strong>ClusterËäÇÁÇπÊìç‰ΩúÂëΩ‰ª§</strong></p>
<ul>
<li>Êü•ÁúãÈõÜÁæ§ËäÇÁÇπ‰ø°ÊÅØ</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">nodes</span><br></code></pre></td></tr></table></figure>

<ul>
<li>Êõ¥ÊîπslaveÊåáÂêëÊñ∞ÁöÑmaster</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">replicate master-id</span><br></code></pre></td></tr></table></figure>

<ul>
<li>ÂèëÁé∞‰∏Ä‰∏™Êñ∞ËäÇÁÇπÔºåÊñ∞Â¢ûmaster</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">meet ip:port</span><br></code></pre></td></tr></table></figure>

<ul>
<li>ÂøΩÁï•‰∏Ä‰∏™Ê≤°ÊúâsoltÁöÑËäÇÁÇπ</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">forget server_id</span><br></code></pre></td></tr></table></figure>

<ul>
<li>ÊâãÂä®ÊïÖÈöúËΩ¨Áßª</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">failover</span><br></code></pre></td></tr></table></figure>

<p><strong>ÈõÜÁæ§Êìç‰ΩúÂëΩ‰ª§Ôºö</strong></p>
<ul>
<li>ÂàõÂª∫ÈõÜÁæ§</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">‚Äì-cluster create masterhost1:masterport1 masterhost2:masterport2  masterhost3:masterport3 [masterhostn:masterportn ‚Ä¶] slavehost1:slaveport1  slavehost2:slaveport2 slavehost3:slaveport3 -‚Äìcluster-replicas n</span><br></code></pre></td></tr></table></figure>

<p>Ê≥®ÊÑèÔºömaster‰∏éslaveÁöÑÊï∞ÈáèË¶ÅÂåπÈÖçÔºå‰∏Ä‰∏™masterÂØπÂ∫în‰∏™slaveÔºåÁî±ÊúÄÂêéÁöÑÂèÇÊï∞nÂÜ≥ÂÆö</p>
<p>master‰∏éslaveÁöÑÂåπÈÖçÈ°∫Â∫è‰∏∫Á¨¨‰∏Ä‰∏™master‰∏éÂâçn‰∏™slaveÂàÜ‰∏∫‰∏ÄÁªÑÔºåÂΩ¢Êàê‰∏ª‰ªéÁªìÊûÑ</p>
<ul>
<li>Ê∑ªÂä†masterÂà∞ÂΩìÂâçÈõÜÁæ§‰∏≠ÔºåËøûÊé•Êó∂ÂèØ‰ª•ÊåáÂÆö‰ªªÊÑèÁé∞ÊúâËäÇÁÇπÂú∞ÂùÄ‰∏éÁ´ØÂè£</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster add-node new-master-host:new-master-port now-host:now-port</span><br></code></pre></td></tr></table></figure>

<ul>
<li>Ê∑ªÂä†slave</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster add-node new-slave-host:new-slave-port master-host:master-port --cluster-slave --cluster-master-id masterid</span><br></code></pre></td></tr></table></figure>

<ul>
<li>Âà†Èô§ËäÇÁÇπÔºåÂ¶ÇÊûúÂà†Èô§ÁöÑËäÇÁÇπÊòØmasterÔºåÂøÖÈ°ª‰øùÈöúÂÖ∂‰∏≠Ê≤°ÊúâÊßΩslot</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster del-node del-slave-host:del-slave-port del-slave-id</span><br></code></pre></td></tr></table></figure>

<ul>
<li>ÈáçÊñ∞ÂàÜÊßΩÔºåÂàÜÊßΩÊòØ‰ªéÂÖ∑ÊúâÊßΩÁöÑmaster‰∏≠ÂàíÂàÜ‰∏ÄÈÉ®ÂàÜÁªôÂÖ∂‰ªñmasterÔºåËøáÁ®ã‰∏≠‰∏çÂàõÂª∫Êñ∞ÁöÑÊßΩ</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster reshard new-master-host:new-master:port --cluster-from src-  master-id1, src-master-id2, src-master-idn --cluster-to target-master-id --  cluster-slots slots</span><br></code></pre></td></tr></table></figure>

<p>Ê≥®ÊÑèÔºöÂ∞ÜÈúÄË¶ÅÂèÇ‰∏éÂàÜÊßΩÁöÑÊâÄÊúâmasterid‰∏çÂàÜÂÖàÂêéÈ°∫Â∫èÊ∑ªÂä†Âà∞ÂèÇÊï∞‰∏≠Ôºå‰ΩøÁî®ÔºåÂàÜÈöî</p>
<p>ÊåáÂÆöÁõÆÊ†áÂæóÂà∞ÁöÑÊßΩÁöÑÊï∞ÈáèÔºåÊâÄÊúâÁöÑÊßΩÂ∞ÜÂπ≥Âùá‰ªéÊØè‰∏™Êù•Ê∫êÁöÑmasterÂ§ÑËé∑Âèñ</p>
<ul>
<li>ÈáçÊñ∞ÂàÜÈÖçÊßΩÔºå‰ªéÂÖ∑ÊúâÊßΩÁöÑmaster‰∏≠ÂàÜÈÖçÊåáÂÆöÊï∞ÈáèÁöÑÊßΩÂà∞Âè¶‰∏Ä‰∏™master‰∏≠ÔºåÂ∏∏Áî®‰∫éÊ∏ÖÁ©∫ÊåáÂÆömaster‰∏≠ÁöÑÊßΩ</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster reshard src-master-host:src-master-port --cluster-from src-  master-id --cluster-to target-master-id --cluster-slots slots --cluster-yes</span><br></code></pre></td></tr></table></figure>

<h2 id="5-‰ºÅ‰∏öÁ∫ßËß£ÂÜ≥ÊñπÊ°à"><a href="#5-‰ºÅ‰∏öÁ∫ßËß£ÂÜ≥ÊñπÊ°à" class="headerlink" title="5.‰ºÅ‰∏öÁ∫ßËß£ÂÜ≥ÊñπÊ°à"></a>5.‰ºÅ‰∏öÁ∫ßËß£ÂÜ≥ÊñπÊ°à</h2><h3 id="5-1-ÁºìÂ≠òÈ¢ÑÁÉ≠"><a href="#5-1-ÁºìÂ≠òÈ¢ÑÁÉ≠" class="headerlink" title="5.1 ÁºìÂ≠òÈ¢ÑÁÉ≠"></a>5.1 ÁºìÂ≠òÈ¢ÑÁÉ≠</h3><p><strong>Âú∫ÊôØ</strong>Ôºö‚ÄúÂÆïÊú∫‚Äù</p>
<p>ÊúçÂä°Âô®ÂêØÂä®ÂêéËøÖÈÄüÂÆïÊú∫</p>
<p><strong>ÈóÆÈ¢òÊéíÊü•</strong>Ôºö</p>
<p>1.ËØ∑Ê±ÇÊï∞ÈáèËæÉÈ´òÔºåÂ§ßÈáèÁöÑËØ∑Ê±ÇËøáÊù•‰πãÂêéÈÉΩÈúÄË¶ÅÂéª‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÊï∞ÊçÆÔºå‰ΩÜÊòØÁºìÂ≠ò‰∏≠ÂèàÊ≤°ÊúâÔºåÊ≠§Êó∂‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Êü•ÊâæÊï∞ÊçÆÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆÂÜçÂ≠òÂÖ•ÁºìÂ≠òÔºåÈÄ†Êàê‰∫ÜÁü≠ÊúüÂÜÖÂØπredisÁöÑÈ´òÂº∫Â∫¶Êìç‰Ωú‰ªéËÄåÂØºËá¥ÈóÆÈ¢ò</p>
<p>2.‰∏ª‰ªé‰πãÈó¥Êï∞ÊçÆÂêûÂêêÈáèËæÉÂ§ßÔºåÊï∞ÊçÆÂêåÊ≠•Êìç‰ΩúÈ¢ëÂ∫¶ËæÉÈ´ò</p>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°àÔºö</strong></p>
<ul>
<li>ÂâçÁΩÆÂáÜÂ§áÂ∑•‰ΩúÔºö</li>
</ul>
<p>1.Êó•Â∏∏‰æãË°åÁªüËÆ°Êï∞ÊçÆËÆøÈóÆËÆ∞ÂΩïÔºåÁªüËÆ°ËÆøÈóÆÈ¢ëÂ∫¶ËæÉÈ´òÁöÑÁÉ≠ÁÇπÊï∞ÊçÆ</p>
<p>2.Âà©Áî®LRUÊï∞ÊçÆÂà†Èô§Á≠ñÁï•ÔºåÊûÑÂª∫Êï∞ÊçÆÁïôÂ≠òÈòüÂàó‰æãÂ¶ÇÔºöstorm‰∏ékafkaÈÖçÂêà</p>
<ul>
<li>ÂáÜÂ§áÂ∑•‰ΩúÔºö</li>
</ul>
<p>1.Â∞ÜÁªüËÆ°ÁªìÊûú‰∏≠ÁöÑÊï∞ÊçÆÂàÜÁ±ªÔºåÊ†πÊçÆÁ∫ßÂà´Ôºåredis‰ºòÂÖàÂä†ËΩΩÁ∫ßÂà´ËæÉÈ´òÁöÑÁÉ≠ÁÇπÊï∞ÊçÆ</p>
<p>2.Âà©Áî®ÂàÜÂ∏ÉÂºèÂ§öÊúçÂä°Âô®ÂêåÊó∂ËøõË°åÊï∞ÊçÆËØªÂèñÔºåÊèêÈÄüÊï∞ÊçÆÂä†ËΩΩËøáÁ®ã</p>
<p>3.ÁÉ≠ÁÇπÊï∞ÊçÆ‰∏ª‰ªéÂêåÊó∂È¢ÑÁÉ≠</p>
<ul>
<li>ÂÆûÊñΩÔºö</li>
</ul>
<p>4.‰ΩøÁî®ËÑöÊú¨Á®ãÂ∫èÂõ∫ÂÆöËß¶ÂèëÊï∞ÊçÆÈ¢ÑÁÉ≠ËøáÁ®ã</p>
<p>5.Â¶ÇÊûúÊù°‰ª∂ÂÖÅËÆ∏Ôºå‰ΩøÁî®‰∫ÜCDNÔºàÂÜÖÂÆπÂàÜÂèëÁΩëÁªúÔºâÔºåÊïàÊûú‰ºöÊõ¥Â•Ω</p>
<p><strong>ÊÄªÁöÑÊù•ËØ¥</strong>ÔºöÁºìÂ≠òÈ¢ÑÁÉ≠Â∞±ÊòØÁ≥ªÁªüÂêØÂä®ÂâçÔºåÊèêÂâçÂ∞ÜÁõ∏ÂÖ≥ÁöÑÁºìÂ≠òÊï∞ÊçÆÁõ¥Êé•Âä†ËΩΩÂà∞ÁºìÂ≠òÁ≥ªÁªü„ÄÇÈÅøÂÖçÂú®Áî®Êà∑ËØ∑Ê±ÇÁöÑÊó∂ÂÄôÔºåÂÖàÊü•ËØ¢Êï∞ÊçÆÂ∫ìÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÊï∞ÊçÆÁºìÂ≠òÁöÑÈóÆÈ¢òÔºÅÁî®Êà∑Áõ¥Êé•Êü•ËØ¢‰∫ãÂÖàË¢´È¢ÑÁÉ≠ÁöÑÁºìÂ≠òÊï∞ÊçÆÔºÅ</p>
<h3 id="5-2-ÁºìÂ≠òÈõ™Â¥©"><a href="#5-2-ÁºìÂ≠òÈõ™Â¥©" class="headerlink" title="5.2 ÁºìÂ≠òÈõ™Â¥©"></a>5.2 ÁºìÂ≠òÈõ™Â¥©</h3><p><strong>Âú∫ÊôØ</strong>ÔºöÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®Â¥©Ê∫ÉÔºå‰∏ÄËøû‰∏≤ÁöÑÂú∫ÊôØ‰ºöÈöè‰πãÂÑøÊù•</p>
<p>1.Á≥ªÁªüÂπ≥Á®≥ËøêË°åËøáÁ®ã‰∏≠ÔºåÂøΩÁÑ∂Êï∞ÊçÆÂ∫ìËøûÊé•ÈáèÊøÄÂ¢û</p>
<p>2.Â∫îÁî®ÊúçÂä°Âô®Êó†Ê≥ïÂèäÊó∂Â§ÑÁêÜËØ∑Ê±Ç</p>
<p>3.Â§ßÈáè408Ôºå500ÈîôËØØÈ°µÈù¢Âá∫Áé∞</p>
<p>4.ÂÆ¢Êà∑ÂèçÂ§çÂà∑Êñ∞È°µÈù¢Ëé∑ÂèñÊï∞ÊçÆ</p>
<p>5.Êï∞ÊçÆÂ∫ìÂ¥©Ê∫É</p>
<p>6.Â∫îÁî®ÊúçÂä°Âô®Â¥©Ê∫É</p>
<p>7.ÈáçÂêØÂ∫îÁî®ÊúçÂä°Âô®Êó†Êïà</p>
<p>8.RedisÊúçÂä°Âô®Â¥©Ê∫É</p>
<p>9.RedisÈõÜÁæ§Â¥©Ê∫É</p>
<p>10.ÈáçÂêØÊï∞ÊçÆÂ∫ìÂêéÂÜçÊ¨°Ë¢´Áû¨Èó¥ÊµÅÈáèÊîæÂÄí</p>
<p><strong>ÈóÆÈ¢òÊéíÊü•</strong>Ôºö</p>
<p>1.Âú®‰∏Ä‰∏™ËæÉÁü≠ÁöÑÊó∂Èó¥ÂÜÖÔºåÁºìÂ≠ò‰∏≠ËæÉÂ§öÁöÑkeyÈõÜ‰∏≠ËøáÊúü</p>
<p>2.Ê≠§Âë®ÊúüÂÜÖËØ∑Ê±ÇËÆøÈóÆËøáÊúüÁöÑÊï∞ÊçÆÔºåredisÊú™ÂëΩ‰∏≠ÔºåredisÂêëÊï∞ÊçÆÂ∫ìËé∑ÂèñÊï∞ÊçÆ</p>
<p>3.Êï∞ÊçÆÂ∫ìÂêåÊó∂Êé•Êî∂Âà∞Â§ßÈáèÁöÑËØ∑Ê±ÇÊó†Ê≥ïÂèäÊó∂Â§ÑÁêÜ</p>
<p>4.RedisÂ§ßÈáèËØ∑Ê±ÇË¢´ÁßØÂéãÔºåÂºÄÂßãÂá∫Áé∞Ë∂ÖÊó∂Áé∞Ë±°</p>
<p>5.Êï∞ÊçÆÂ∫ìÊµÅÈáèÊøÄÂ¢ûÔºåÊï∞ÊçÆÂ∫ìÂ¥©Ê∫É</p>
<p>6.ÈáçÂêØÂêé‰ªçÁÑ∂Èù¢ÂØπÁºìÂ≠ò‰∏≠Êó†Êï∞ÊçÆÂèØÁî®</p>
<p>7.RedisÊúçÂä°Âô®ËµÑÊ∫êË¢´‰∏•ÈáçÂç†Áî®ÔºåRedisÊúçÂä°Âô®Â¥©Ê∫É</p>
<p>8.RedisÈõÜÁæ§ÂëàÁé∞Â¥©Â°åÔºåÈõÜÁæ§Áì¶Ëß£</p>
<p>9.Â∫îÁî®ÊúçÂä°Âô®Êó†Ê≥ïÂèäÊó∂ÂæóÂà∞Êï∞ÊçÆÂìçÂ∫îËØ∑Ê±ÇÔºåÊù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÊï∞ÈáèË∂äÊù•Ë∂äÂ§öÔºåÂ∫îÁî®ÊúçÂä°Âô®Â¥©Ê∫É</p>
<p>10.Â∫îÁî®ÊúçÂä°Âô®ÔºåredisÔºåÊï∞ÊçÆÂ∫ìÂÖ®ÈÉ®ÈáçÂêØÔºåÊïàÊûú‰∏çÁêÜÊÉ≥</p>
<p>ÊÄªËÄåË®Ä‰πãÂ∞±‰∏§ÁÇπÔºöÁü≠Êó∂Èó¥ËåÉÂõ¥ÂÜÖÔºåÂ§ßÈáèkeyÈõÜ‰∏≠ËøáÊúü</p>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong></p>
<ul>
<li>ÊÄùË∑ØÔºö</li>
</ul>
<p>1.Êõ¥Â§öÁöÑÈ°µÈù¢ÈùôÊÄÅÂåñÂ§ÑÁêÜ</p>
<p>2.ÊûÑÂª∫Â§öÁ∫ßÁºìÂ≠òÊû∂ÊûÑ</p>
<p>‚Äã    NginxÁºìÂ≠ò+redisÁºìÂ≠ò+ehcacheÁºìÂ≠ò</p>
<p>3.Ê£ÄÊµãMysql‰∏•ÈáçËÄóÊó∂‰∏öÂä°ËøõË°å‰ºòÂåñ</p>
<p>‚Äã    ÂØπÊï∞ÊçÆÂ∫ìÁöÑÁì∂È¢àÊéíÊü•Ôºö‰æãÂ¶ÇË∂ÖÊó∂Êü•ËØ¢„ÄÅËÄóÊó∂ËæÉÈ´ò‰∫ãÂä°Á≠â</p>
<p>4.ÁÅæÈöæÈ¢ÑË≠¶Êú∫Âà∂</p>
<p>‚Äã    ÁõëÊéßredisÊúçÂä°Âô®ÊÄßËÉΩÊåáÊ†á</p>
<p>‚Äã        CPUÂç†Áî®„ÄÅCPU‰ΩøÁî®Áéá</p>
<p>‚Äã        ÂÜÖÂ≠òÂÆπÈáè</p>
<p>‚Äã        Êü•ËØ¢Âπ≥ÂùáÂìçÂ∫îÊó∂Èó¥</p>
<p>‚Äã        Á∫øÁ®ãÊï∞</p>
<p>5.ÈôêÊµÅ„ÄÅÈôçÁ∫ß</p>
<p>Áü≠Êó∂Èó¥ËåÉÂõ¥ÂÜÖÁâ∫Áâ≤‰∏Ä‰∫õÂÆ¢Êà∑‰ΩìÈ™åÔºåÈôêÂà∂‰∏ÄÈÉ®ÂàÜËØ∑Ê±ÇËÆøÈóÆÔºåÈôç‰ΩéÂ∫îÁî®ÊúçÂä°Âô®ÂéãÂäõÔºåÂæÖ‰∏öÂä°‰ΩéÈÄüËøêËΩ¨ÂêéÂÜçÈÄêÊ≠•ÊîæÂºÄËÆøÈóÆ</p>
<ul>
<li>ËêΩÂú∞ÂÆûË∑µÔºö</li>
</ul>
<p>1.LRU‰∏éLFUÂàáÊç¢</p>
<p>2.Êï∞ÊçÆÊúâÊïàÊúüÁ≠ñÁï•Ë∞ÉÊï¥</p>
<p>‚Äã    Ê†πÊçÆ‰∏öÂä°Êï∞ÊçÆÊúâÊïàÊúüËøõË°åÂàÜÁ±ªÈîôÂ≥∞ÔºåAÁ±ª90ÂàÜÈíüÔºåBÁ±ª80ÂàÜÈíüÔºåCÁ±ª70ÂàÜÈíü</p>
<p>‚Äã    ËøáÊúüÊó∂Èó¥‰ΩøÁî®Âõ∫ÂÆöÊó∂Èó¥+ÈöèÊú∫ÂÄºÁöÑÂΩ¢ÂºèÔºåÁ®ÄÈáäÈõÜ‰∏≠Âà∞ÊúüÁöÑkeyÁöÑÊï∞Èáè</p>
<p>3.Ë∂ÖÁÉ≠Êï∞ÊçÆ‰ΩøÁî®Ê∞∏‰πÖkey</p>
<p>4.ÂÆöÊúüÁª¥Êä§ÔºàËá™Âä®+‰∫∫Â∑•Ôºâ</p>
<p>‚Äã    ÂØπÂç≥Â∞ÜËøáÊúüÊï∞ÊçÆÂÅöËÆøÈóÆÈáèÂàÜÊûêÔºåÁ°ÆËÆ§ÊòØÂê¶Âª∂Êó∂ÔºåÈÖçÂêàËÆøÈóÆÈáèÁªüËÆ°ÔºåÂÅöÁÉ≠ÁÇπÊï∞ÊçÆÁöÑÂª∂Êó∂</p>
<p>5.Âä†ÈîÅÔºöÊÖéÁî®ÔºÅ</p>
<p><strong>ÊÄªÁöÑÊù•ËØ¥</strong>ÔºöÁºìÂ≠òÈõ™Â¥©Â∞±ÊòØÁû¨Èó¥ËøáÊúüÊï∞ÊçÆÈáèÂ§™Â§ßÔºåÂØºËá¥ÂØπÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÈÄ†ÊàêÂéãÂäõ„ÄÇÂ¶ÇËÉΩÂ§üÊúâÊïàÈÅøÂÖçËøáÊúüÊó∂Èó¥ÈõÜ‰∏≠ÔºåÂèØ‰ª•ÊúâÊïàËß£ÂÜ≥Èõ™Â¥©Áé∞Ë±°ÁöÑ Âá∫Áé∞ÔºàÁ∫¶40%ÔºâÔºåÈÖçÂêàÂÖ∂‰ªñÁ≠ñÁï•‰∏ÄËµ∑‰ΩøÁî®ÔºåÂπ∂ÁõëÊéßÊúçÂä°Âô®ÁöÑËøêË°åÊï∞ÊçÆÔºåÊ†πÊçÆËøêË°åËÆ∞ÂΩïÂÅöÂø´ÈÄüË∞ÉÊï¥„ÄÇ</p>
<h3 id="5-3-ÁºìÂ≠òÂáªÁ©ø"><a href="#5-3-ÁºìÂ≠òÂáªÁ©ø" class="headerlink" title="5.3 ÁºìÂ≠òÂáªÁ©ø"></a>5.3 ÁºìÂ≠òÂáªÁ©ø</h3><p><strong>Âú∫ÊôØ</strong>ÔºöËøòÊòØÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®Â¥©Ê∫ÉÔºå‰ΩÜÊòØË∑ü‰πãÂâçÁöÑÂú∫ÊôØÊúâÁÇπ‰∏çÂ§™‰∏ÄÊ†∑</p>
<p>1.Á≥ªÁªüÂπ≥Á®≥ËøêË°åËøáÁ®ã‰∏≠</p>
<p>2.Êï∞ÊçÆÂ∫ìËøûÊé•ÈáèÁû¨Èó¥ÊøÄÂ¢û</p>
<p>3.RedisÊúçÂä°Âô®Êó†Â§ßÈáèkeyËøáÊúü</p>
<p>4.RedisÂÜÖÂ≠òÂπ≥Á®≥ÔºåÊó†Ê≥¢Âä®</p>
<p>5.RedisÊúçÂä°Âô®CPUÊ≠£Â∏∏</p>
<p>6.Êï∞ÊçÆÂ∫ìÂ¥©Ê∫É</p>
<p><strong>ÈóÆÈ¢òÊéíÊü•Ôºö</strong></p>
<p>1.Redis‰∏≠Êüê‰∏™keyËøáÊúüÔºåËØ•keyËÆøÈóÆÈáèÂ∑®Â§ß</p>
<p>2.Â§ö‰∏™Êï∞ÊçÆËØ∑Ê±Ç‰ªéÊúçÂä°Âô®Áõ¥Êé•ÂéãÂà∞RedisÂêéÔºåÂùáÊú™ÂëΩ‰∏≠</p>
<p>3.RedisÂú®Áü≠Êó∂Èó¥ÂÜÖÂèëËµ∑‰∫ÜÂ§ßÈáèÂØπÊï∞ÊçÆÂ∫ì‰∏≠Âêå‰∏ÄÊï∞ÊçÆÁöÑËÆøÈóÆ</p>
<p>ÊÄªËÄåË®Ä‰πãÂ∞±‰∏§ÁÇπÔºöÂçï‰∏™keyÈ´òÁÉ≠Êï∞ÊçÆÔºåkeyËøáÊúü</p>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong>Ôºö</p>
<p>1.È¢ÑÂÖàËÆæÂÆö</p>
<p>‚Äã    ‰ª•ÁîµÂïÜ‰∏∫‰æãÔºåÊØè‰∏™ÂïÜÂÆ∂Ê†πÊçÆÂ∫óÈì∫Á≠âÁ∫ßÔºåÊåáÂÆöËã•Âπ≤Ê¨æ‰∏ªÊâìÂïÜÂìÅÔºåÂú®Ë¥≠Áâ©ËäÇÊúüÈó¥ÔºåÂä†Â§ßÊ≠§Á±ª‰ø°ÊÅØkeyÁöÑËøáÊúüÊó∂Èïø Ê≥®ÊÑèÔºöË¥≠Áâ©ËäÇ‰∏ç‰ªÖ‰ªÖÊåáÂΩìÂ§©Ôºå‰ª•ÂèäÂêéÁª≠Ëã•Âπ≤Â§©ÔºåËÆøÈóÆÂ≥∞ÂÄºÂëàÁé∞ÈÄêÊ∏êÈôç‰ΩéÁöÑË∂ãÂäø</p>
<p>2.Áé∞Âú∫Ë∞ÉÊï¥</p>
<p>‚Äã    ÁõëÊéßËÆøÈóÆÈáèÔºåÂØπËá™ÁÑ∂ÊµÅÈáèÊøÄÂ¢ûÁöÑÊï∞ÊçÆÂª∂ÈïøËøáÊúüÊó∂Èó¥ÊàñËÆæÁΩÆ‰∏∫Ê∞∏‰πÖÊÄßkey</p>
<p>3.ÂêéÂè∞Âà∑Êñ∞Êï∞ÊçÆ</p>
<p>‚Äã    ÂêØÂä®ÂÆöÊó∂‰ªªÂä°ÔºåÈ´òÂ≥∞ÊúüÊù•‰∏¥‰πãÂâçÔºåÂà∑Êñ∞Êï∞ÊçÆÊúâÊïàÊúüÔºåÁ°Æ‰øù‰∏ç‰∏¢Â§±</p>
<p>4.‰∫åÁ∫ßÁºìÂ≠ò</p>
<p>‚Äã    ËÆæÁΩÆ‰∏çÂêåÁöÑÂ§±ÊïàÊó∂Èó¥Ôºå‰øùÈöú‰∏ç‰ºöË¢´ÂêåÊó∂Ê∑òÊ±∞Â∞±Ë°å</p>
<p>5.Âä†ÈîÅ</p>
<p>‚Äã    ÂàÜÂ∏ÉÂºèÈîÅÔºåÈò≤Ê≠¢Ë¢´ÂáªÁ©øÔºå‰ΩÜÊòØË¶ÅÊ≥®ÊÑè‰πüÊòØÊÄßËÉΩÁì∂È¢àÔºåÊÖéÈáçÔºÅ</p>
<p><strong>ÊÄªÁöÑÊù•ËØ¥</strong>ÔºöÁºìÂ≠òÂáªÁ©øÂ∞±ÊòØÂçï‰∏™È´òÁÉ≠Êï∞ÊçÆËøáÊúüÁöÑÁû¨Èó¥ÔºåÊï∞ÊçÆËÆøÈóÆÈáèËæÉÂ§ßÔºåÊú™ÂëΩ‰∏≠redisÂêéÔºåÂèëËµ∑‰∫ÜÂ§ßÈáèÂØπÂêå‰∏ÄÊï∞ÊçÆÁöÑÊï∞ÊçÆÂ∫ìËÆøÈóÆÔºåÂØºËá¥ÂØπÊï∞ ÊçÆÂ∫ìÊúçÂä°Âô®ÈÄ†ÊàêÂéãÂäõ„ÄÇÂ∫îÂØπÁ≠ñÁï•Â∫îËØ•Âú®‰∏öÂä°Êï∞ÊçÆÂàÜÊûê‰∏éÈ¢ÑÈò≤ÊñπÈù¢ËøõË°åÔºåÈÖçÂêàËøêË°åÁõëÊéßÊµãËØï‰∏éÂç≥Êó∂Ë∞ÉÊï¥Á≠ñÁï•ÔºåÊØïÁ´üÂçï‰∏™keyÁöÑËøá ÊúüÁõëÊéßÈöæÂ∫¶ËæÉÈ´òÔºåÈÖçÂêàÈõ™Â¥©Â§ÑÁêÜÁ≠ñÁï•Âç≥ÂèØ„ÄÇ</p>
<h3 id="5-4-ÁºìÂ≠òÁ©øÈÄè"><a href="#5-4-ÁºìÂ≠òÁ©øÈÄè" class="headerlink" title="5.4 ÁºìÂ≠òÁ©øÈÄè"></a>5.4 ÁºìÂ≠òÁ©øÈÄè</h3><p><strong>Âú∫ÊôØ</strong>ÔºöÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÂèàÂ¥©Ê∫É‰∫ÜÔºåË∑ü‰πãÂâçÁöÑ‰∏ÄÊ†∑ÂêóÔºü</p>
<p>1.Á≥ªÁªüÂπ≥Á®≥ËøêË°åËøáÁ®ã‰∏≠</p>
<p>2.Â∫îÁî®ÊúçÂä°Âô®ÊµÅÈáèÈöèÊó∂Èó¥Â¢ûÈáèËæÉÂ§ß</p>
<p>3.RedisÊúçÂä°Âô®ÂëΩ‰∏≠ÁéáÈöèÊó∂Èó¥ÈÄêÊ≠•Èôç‰Ωé</p>
<p>4.RedisÂÜÖÂ≠òÂπ≥Á®≥ÔºåÂÜÖÂ≠òÊó†ÂéãÂäõ</p>
<p>5.RedisÊúçÂä°Âô®CPUÂç†Áî®ÊøÄÂ¢û</p>
<p>6.Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÂéãÂäõÊøÄÂ¢û</p>
<p>7.Êï∞ÊçÆÂ∫ìÂ¥©Ê∫É</p>
<p><strong>ÈóÆÈ¢òÊéíÊü•Ôºö</strong></p>
<p>1.Redis‰∏≠Â§ßÈù¢ÁßØÂá∫Áé∞Êú™ÂëΩ‰∏≠</p>
<p>2.Âá∫Áé∞ÈùûÊ≠£Â∏∏URLËÆøÈóÆ</p>
<p><strong>ÈóÆÈ¢òÂàÜÊûê</strong>Ôºö</p>
<ul>
<li>Ëé∑ÂèñÁöÑÊï∞ÊçÆÂú®Êï∞ÊçÆÂ∫ì‰∏≠‰πü‰∏çÂ≠òÂú®ÔºåÊï∞ÊçÆÂ∫ìÊü•ËØ¢Êú™ÂæóÂà∞ÂØπÂ∫îÊï∞ÊçÆ</li>
<li>RedisËé∑ÂèñÂà∞nullÊï∞ÊçÆÊú™ËøõË°åÊåÅ‰πÖÂåñÔºåÁõ¥Êé•ËøîÂõû</li>
<li>‰∏ãÊ¨°Ê≠§Á±ªÊï∞ÊçÆÂà∞ËææÈáçÂ§ç‰∏äËø∞ËøáÁ®ã</li>
<li>Âá∫Áé∞ÈªëÂÆ¢ÊîªÂáªÊúçÂä°Âô®</li>
</ul>
<p><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong>Ôºö</p>
<p>1.ÁºìÂ≠ònull</p>
<p>‚Äã    ÂØπÊü•ËØ¢ÁªìÊûú‰∏∫nullÁöÑÊï∞ÊçÆËøõË°åÁºìÂ≠òÔºàÈïøÊúü‰ΩøÁî®ÔºåÂÆöÊúüÊ∏ÖÁêÜÔºâÔºåËÆæÂÆöÁü≠Êó∂ÈôêÔºå‰æãÂ¶Ç30-60ÁßíÔºåÊúÄÈ´ò5ÂàÜÈíü</p>
<p>2.ÁôΩÂêçÂçïÁ≠ñÁï•</p>
<p>‚Äã    ÊèêÂâçÈ¢ÑÁÉ≠ÂêÑÁßçÂàÜÁ±ªÊï∞ÊçÆidÂØπÂ∫îÁöÑbitmapsÔºåid‰Ωú‰∏∫bitmapsÁöÑoffsetÔºåÁõ∏ÂΩì‰∫éËÆæÁΩÆ‰∫ÜÊï∞ÊçÆÁôΩÂêçÂçï„ÄÇÂΩìÂä†ËΩΩÊ≠£Â∏∏Êï∞ÊçÆÊó∂ÊîæË°åÔºåÂä†ËΩΩÂºÇÂ∏∏Êï∞ÊçÆÊó∂Áõ¥Êé•Êã¶Êà™ÔºàÊïàÁéáÂÅè‰ΩéÔºâ</p>
<p>‚Äã    ‰ΩøÁî®Â∏ÉÈöÜËøáÊª§Âô®ÔºàÊúâÂÖ≥Â∏ÉÈöÜËøáÊª§Âô®ÁöÑÂëΩ‰∏≠ÈóÆÈ¢òÂØπÂΩìÂâçÁä∂ÂÜµÂèØ‰ª•ÂøΩÁï•Ôºâ</p>
<p>2.ÂÆûÊñΩÁõëÊéß</p>
<p>‚Äã    ÂÆûÊó∂ÁõëÊéßredisÂëΩ‰∏≠ÁéáÔºà‰∏öÂä°Ê≠£Â∏∏ËåÉÂõ¥Êó∂ÔºåÈÄöÂ∏∏‰ºöÊúâ‰∏Ä‰∏™Ê≥¢Âä®ÂÄºÔºâ‰∏énullÊï∞ÊçÆÁöÑÂç†ÊØî</p>
<p>‚Äã        ÈùûÊ¥ªÂä®Êó∂ÊÆµÊ≥¢Âä®ÔºöÈÄöÂ∏∏Ê£ÄÊµã3-5ÂÄçÔºåË∂ÖËøá5ÂÄçÁ∫≥ÂÖ•ÈáçÁÇπÊéíÊü•ÂØπË±°</p>
<p>‚Äã        Ê¥ªÂä®Êó∂ÊÆµÊ≥¢Âä®ÔºöÈÄöÂ∏∏Ê£ÄÊµã10-50ÂÄçÔºåË∂ÖËøá50ÂÄçÁ∫≥ÂÖ•ÈáçÁÇπÊéíÊü•ÂØπË±°</p>
<p>‚Äã    Ê†πÊçÆÂÄçÊï∞‰∏çÂêåÔºåÂêØÂä®‰∏çÂêåÁöÑÊéíÊü•ÊµÅÁ®ã„ÄÇÁÑ∂Âêé‰ΩøÁî®ÈªëÂêçÂçïËøõË°åÈò≤ÊéßÔºàËøêËê•Ôºâ</p>
<p>4.keyÂä†ÂØÜ</p>
<p>‚Äã    ÈóÆÈ¢òÂá∫Áé∞ÂêéÔºå‰∏¥Êó∂ÂêØÂä®Èò≤ÁÅæ‰∏öÂä°keyÔºåÂØπkeyËøõË°å‰∏öÂä°Â±Ç‰º†ËæìÂä†ÂØÜÊúçÂä°ÔºåËÆæÂÆöÊ†°È™åÁ®ãÂ∫èÔºåËøáÊù•ÁöÑkeyÊ†°È™å</p>
<p>‚Äã    ‰æãÂ¶ÇÊØèÂ§©ÈöèÊú∫ÂàÜÈÖç60‰∏™Âä†ÂØÜ‰∏≤ÔºåÊåëÈÄâ2Âà∞3‰∏™ÔºåÊ∑∑Ê∑ÜÂà∞È°µÈù¢Êï∞ÊçÆid‰∏≠ÔºåÂèëÁé∞ËÆøÈóÆkey‰∏çÊª°Ë∂≥ËßÑÂàôÔºåÈ©≥ÂõûÊï∞ÊçÆËÆøÈóÆ</p>
<p><strong>ÊÄªÁöÑÊù•ËØ¥</strong>ÔºöÁºìÂ≠òÂáªÁ©øÊòØÊåáËÆøÈóÆ‰∫Ü‰∏çÂ≠òÂú®ÁöÑÊï∞ÊçÆÔºåË∑≥Ëøá‰∫ÜÂêàÊ≥ïÊï∞ÊçÆÁöÑredisÊï∞ÊçÆÁºìÂ≠òÈò∂ÊÆµÔºåÊØèÊ¨°ËÆøÈóÆÊï∞ÊçÆÂ∫ìÔºåÂØºËá¥ÂØπÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÈÄ†ÊàêÂéãÂäõ„ÄÇÈÄöÂ∏∏Ê≠§Á±ªÊï∞ÊçÆÁöÑÂá∫Áé∞ÈáèÊòØ‰∏Ä‰∏™ËæÉ‰ΩéÁöÑÂÄºÔºåÂΩìÂá∫Áé∞Ê≠§Á±ªÊÉÖÂÜµ‰ª•ÊØíÊîªÊØíÔºåÂπ∂ÂèäÊó∂Êä•Ë≠¶„ÄÇÂ∫îÂØπÁ≠ñÁï•Â∫îËØ•Âú®‰∏¥Êó∂È¢ÑÊ°àÈò≤ËåÉÊñπÈù¢Â§öÂÅöÊñáÁ´†„ÄÇ</p>
<p>Êó†ËÆ∫ÊòØÈªëÂêçÂçïËøòÊòØÁôΩÂêçÂçïÔºåÈÉΩÊòØÂØπÊï¥‰ΩìÁ≥ªÁªüÁöÑÂéãÂäõÔºåË≠¶Êä•Ëß£Èô§ÂêéÂ∞ΩÂø´ÁßªÈô§„ÄÇ</p>
<h3 id="5-5-ÊÄßËÉΩÊåáÊ†áÁõëÊéß"><a href="#5-5-ÊÄßËÉΩÊåáÊ†áÁõëÊéß" class="headerlink" title="5.5 ÊÄßËÉΩÊåáÊ†áÁõëÊéß"></a>5.5 ÊÄßËÉΩÊåáÊ†áÁõëÊéß</h3><p>redis‰∏≠ÁöÑÁõëÊéßÊåáÊ†áÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>ÊÄßËÉΩÊåáÊ†áÔºöPerformance</li>
</ul>
<blockquote>
<p>ÂìçÂ∫îËØ∑Ê±ÇÁöÑÂπ≥ÂùáÊó∂Èó¥:</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;latency</span><br></code></pre></td></tr></table></figure>

<p>Âπ≥ÂùáÊØèÁßíÂ§ÑÁêÜËØ∑Ê±ÇÊÄªÊï∞</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;instantaneous_ops_per_sec</span><br></code></pre></td></tr></table></figure>

<p>ÁºìÂ≠òÊü•ËØ¢ÂëΩ‰∏≠ÁéáÔºàÈÄöËøáÊü•ËØ¢ÊÄªÊ¨°Êï∞‰∏éÊü•ËØ¢ÂæóÂà∞ÈùûnilÊï∞ÊçÆÊÄªÊ¨°Êï∞ËÆ°ÁÆóËÄåÊù•Ôºâ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;hit_rate(calculated)</span><br><br></code></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p>ÂÜÖÂ≠òÊåáÊ†áÔºöMemory</p>
<blockquote>
<p>ÂΩìÂâçÂÜÖÂ≠ò‰ΩøÁî®Èáè</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;used_memory</span><br></code></pre></td></tr></table></figure>

<p>ÂÜÖÂ≠òÁ¢éÁâáÁéáÔºàÂÖ≥Á≥ªÂà∞ÊòØÂê¶ËøõË°åÁ¢éÁâáÊï¥ÁêÜÔºâ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;mem_fragmentation_ratio</span><br></code></pre></td></tr></table></figure>

<p>‰∏∫ÈÅøÂÖçÂÜÖÂ≠òÊ∫¢Âá∫Âà†Èô§ÁöÑkeyÁöÑÊÄªÊï∞Èáè</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;evicted_keys</span><br></code></pre></td></tr></table></figure>

<p>Âü∫‰∫éÈòªÂ°ûÊìç‰ΩúÔºàBLPOPÁ≠âÔºâÂΩ±ÂìçÁöÑÂÆ¢Êà∑Á´ØÊï∞Èáè</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;blocked_clients</span><br></code></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>Âü∫Êú¨Ê¥ªÂä®ÊåáÊ†áÔºöBasic_activity</p>
</li>
</ul>
<blockquote>
<p>ÂΩìÂâçÂÆ¢Êà∑Á´ØËøûÊé•ÊÄªÊï∞</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;connected_clients</span><br></code></pre></td></tr></table></figure>

<p>ÂΩìÂâçËøûÊé•slaveÊÄªÊï∞</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;connected_slaves</span><br></code></pre></td></tr></table></figure>

<p>ÊúÄÂêé‰∏ÄÊ¨°‰∏ª‰ªé‰ø°ÊÅØ‰∫§Êç¢Ë∑ùÁé∞Âú®ÁöÑÁßí</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;master_last_io_seconds_ago</span><br></code></pre></td></tr></table></figure>

<p>keyÁöÑÊÄªÊï∞</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;keyspace</span><br></code></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>ÊåÅ‰πÖÊÄßÊåáÊ†áÔºöPersistence</li>
</ul>
<blockquote>
<p>ÂΩìÂâçÊúçÂä°Âô®ÊúÄÂêé‰∏ÄÊ¨°RDBÊåÅ‰πÖÂåñÁöÑÊó∂Èó¥</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;rdb_last_save_time</span><br></code></pre></td></tr></table></figure>

<p>ÂΩìÂâçÊúçÂä°Âô®ÊúÄÂêé‰∏ÄÊ¨°RDBÊåÅ‰πÖÂåñÂêéÊï∞ÊçÆÂèòÂåñÊÄªÈáè</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;rdb_changes_since_last_save</span><br></code></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>ÈîôËØØÊåáÊ†áÔºöError</li>
</ul>
<blockquote>
<p>Ë¢´ÊãíÁªùËøûÊé•ÁöÑÂÆ¢Êà∑Á´ØÊÄªÊï∞ÔºàÂü∫‰∫éËææÂà∞ÊúÄÂ§ßËøûÊé•ÂÄºÁöÑÂõ†Á¥†Ôºâ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;rejected_connections</span><br></code></pre></td></tr></table></figure>

<p>keyÊú™ÂëΩ‰∏≠ÁöÑÊÄªÊ¨°Êï∞</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;keyspace_misses</span><br></code></pre></td></tr></table></figure>

<p>‰∏ª‰ªéÊñ≠ÂºÄÁöÑÁßíÊï∞</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;master_link_down_since_seconds</span><br></code></pre></td></tr></table></figure>
</blockquote>
<p>Ë¶ÅÂØπredisÁöÑÁõ∏ÂÖ≥ÊåáÊ†áËøõË°åÁõëÊéßÔºåÊàë‰ª¨ÂèØ‰ª•ÈááÁî®‰∏Ä‰∫õÁî®ÂÖ∑Ôºö</p>
<ul>
<li>CloudInsight Redis</li>
<li>Prometheus</li>
<li>Redis-stat</li>
<li>Redis-faina</li>
<li>RedisLive</li>
<li>zabbix</li>
</ul>
<p>‰πüÊúâ‰∏Ä‰∫õÂëΩ‰ª§Â∑•ÂÖ∑Ôºö</p>
<ul>
<li>benchmark</li>
</ul>
<blockquote>
<p>ÊµãËØïÂΩìÂâçÊúçÂä°Âô®ÁöÑÂπ∂ÂèëÊÄßËÉΩ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;redis-benchmark</span> <span class="hljs-string">[-h ] [-p ] [-c ] [-n &lt;requests]&gt; [-k ]</span><br></code></pre></td></tr></table></figure>

<p>ËåÉ‰æã1Ôºö50‰∏™ËøûÊé•Ôºå10000Ê¨°ËØ∑Ê±ÇÂØπÂ∫îÁöÑÊÄßËÉΩ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;redis-benchmark</span><br></code></pre></td></tr></table></figure>

<p>ËåÉ‰æã2Ôºö100‰∏™ËøûÊé•Ôºå5000Ê¨°ËØ∑Ê±ÇÂØπÂ∫îÁöÑÊÄßËÉΩ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;redis-benchmark</span> <span class="hljs-string">-c 100 -n 5000</span><br></code></pre></td></tr></table></figure>

<p><img src="https://i0.hdslb.com/bfs/album/6e3a7a0641ae9a772097829342337be07672184f.png" srcset="/Hexo/img/loading.gif" lazyload></p>
</blockquote>
<ul>
<li><p>redis-cli</p>
<p>‚Äã    monitorÔºöÂêØÂä®ÊúçÂä°Âô®Ë∞ÉËØï‰ø°ÊÅØ</p>
</li>
</ul>
<blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;monitor</span><br></code></pre></td></tr></table></figure>
</blockquote>
<pre><code class="hljs">  slowlogÔºöÊÖ¢Êó•Âøó
</code></pre>
<blockquote>
<p>Ëé∑ÂèñÊÖ¢Êü•ËØ¢Êó•Âøó</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;slowlog</span> <span class="hljs-string">[operator]</span><br></code></pre></td></tr></table></figure>

<p>‚Äã    get ÔºöËé∑ÂèñÊÖ¢Êü•ËØ¢Êó•Âøó‰ø°ÊÅØ</p>
<p>‚Äã    len ÔºöËé∑ÂèñÊÖ¢Êü•ËØ¢Êó•ÂøóÊù°ÁõÆÊï∞</p>
<p>‚Äã    reset ÔºöÈáçÁΩÆÊÖ¢Êü•ËØ¢Êó•Âøó</p>
<p>Áõ∏ÂÖ≥ÈÖçÁΩÆ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;slowlog-log-slower-than</span> <span class="hljs-string">1000 #ËÆæÁΩÆÊÖ¢Êü•ËØ¢ÁöÑÊó∂Èó¥‰∏ãÁ∫øÔºåÂçï‰ΩçÔºöÂæÆÂ¶ô</span><br><span class="hljs-attr">&gt;slowlog-max-len</span> <span class="hljs-string">100	#ËÆæÁΩÆÊÖ¢Êü•ËØ¢ÂëΩ‰ª§ÂØπÂ∫îÁöÑÊó•ÂøóÊòæÁ§∫ÈïøÂ∫¶ÔºåÂçï‰ΩçÔºöÂëΩ‰ª§Êï∞</span><br></code></pre></td></tr></table></figure>
</blockquote>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/Hexo/categories/Redis/" class="category-chain-item">Redis</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/Hexo/tags/Redis/">#Redis</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>RedisÈ´òÁ∫ß</div>
      <div>https://1902756969.github.io/Hexo/2022/04/09/sql/Á¨¨‰∫åÁ´† RedisÈ´òÁ∫ß/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>‰ΩúËÄÖ</div>
          <div>Êòü</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>ÂèëÂ∏É‰∫é</div>
          <div>2022Âπ¥4Êúà9Êó•</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>ËÆ∏ÂèØÂçèËÆÆ</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - ÁΩ≤Âêç">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/Hexo/2022/04/09/sql/%E7%AC%AC%E4%B8%80%E7%AB%A0%20Redis%E5%9F%BA%E7%A1%80/" title="RedisÂü∫Á°Ä">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">RedisÂü∫Á°Ä</span>
                        <span class="visible-mobile">‰∏ä‰∏ÄÁØá</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/Hexo/2022/03/04/%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98/" title="ÂæÆÊúçÂä°Â∏∏ËßÅÈù¢ËØïÈ¢ò">
                        <span class="hidden-mobile">ÂæÆÊúçÂä°Â∏∏ËßÅÈù¢ËØïÈ¢ò</span>
                        <span class="visible-mobile">‰∏ã‰∏ÄÁØá</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ÁõÆÂΩï</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">ÊêúÁ¥¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">ÂÖ≥ÈîÆËØç</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        ÊÄªËÆøÈóÆÈáè 
        <span id="busuanzi_value_site_pv"></span>
         Ê¨°
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        ÊÄªËÆøÂÆ¢Êï∞ 
        <span id="busuanzi_value_site_uv"></span>
         ‰∫∫
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/Hexo/js/events.js" ></script>
<script  src="/Hexo/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  




  
    <script  src="/Hexo/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/Hexo/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ‰∏ªÈ¢òÁöÑÂêØÂä®È°πÔºåÂ∞ÜÂÆÉ‰øùÊåÅÂú®ÊúÄÂ∫ïÈÉ® -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/Hexo/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">ÂçöÂÆ¢Âú®ÂÖÅËÆ∏ JavaScript ËøêË°åÁöÑÁéØÂ¢É‰∏ãÊµèËßàÊïàÊûúÊõ¥‰Ω≥</div>
  </noscript>
<script src="/Hexo/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/Hexo/live2dw/assets/tororo.model.json"},"display":{"position":"left","width":120,"height":300},"mobile":{"show":false},"log":false});</script></body>
</html>
