<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ç›®å½•</title>
    <link href="/Hexo/2028/12/12/%E7%9B%AE%E5%BD%95/"/>
    <url>/Hexo/2028/12/12/%E7%9B%AE%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="ğŸ–JavaåŸºç¡€"><a href="#ğŸ–JavaåŸºç¡€" class="headerlink" title="ğŸ–JavaåŸºç¡€:"></a>ğŸ–JavaåŸºç¡€:</h2><p><a href="https://mp.weixin.qq.com/s/2A4TCCes7HjMtJ2NB-QGSA">å¹¶å‘ç¼–ç¨‹çš„10ä¸ªå‘ </a></p><p><a href="https://1902756969.github.io/Hexo/2021/02/14/%E6%B2%A1%E6%9C%89%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%83%85%E4%BA%BA%E8%8A%82%EF%BC%8C%E5%8F%AA%E8%83%BDnew%E4%B8%80%E4%B8%AA/">æ²¡æœ‰å¯¹è±¡çš„æƒ…äººèŠ‚ </a></p><p><a href="https://1902756969.github.io/Hexo/2021/03/21/%E6%96%B9%E6%B3%95/">å’©ç³»æ–¹æ³•? </a></p><p><a href="https://1902756969.github.io/Hexo/2021/03/21/%E6%96%B9%E6%B3%95/">å’©ç³»æ–¹æ³•? </a></p><p><a href="https://1902756969.github.io/Hexo/2021/03/23/%E9%9B%86%E5%90%8801/">Collectioné›†åˆ </a></p><p><a href="https://1902756969.github.io/Hexo/2021/03/26/%E9%9B%86%E5%90%8802/">Seté›†åˆ </a></p><p><a href="https://1902756969.github.io/Hexo/2021/03/28/%E9%9B%86%E5%90%8803/">Mapé›†åˆ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/09/01/String%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/">Stringå¸¸ç”¨æ–¹æ³• </a></p><p><a href="https://1902756969.github.io/Hexo/2021/04/08/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B02/">ç½‘ç»œç¼–ç¨‹_2 </a></p><p><a href="https://1902756969.github.io/Hexo/2021/04/06/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B01/">ç½‘ç»œç¼–ç¨‹01 </a></p><p><a href="https://1902756969.github.io/Hexo/2021/03/29/IO%E6%B5%8102/">å­—ç¬¦æµ </a></p><p><a href="https://1902756969.github.io/Hexo/2021/03/29/IO%E6%B5%8101/">Fileç±» </a></p><p><a href="https://1902756969.github.io/Hexo/2022/09/01/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%8601/">å¼‚å¸¸å¤„ç† </a></p><p><a href="https://1902756969.github.io/Hexo/2022/09/12/ArrayList%E7%9A%84%E7%90%86%E8%A7%A3/">ArrayListç†è§£ </a></p><h2 id="ğŸ¥™å¤šçº¿ç¨‹"><a href="#ğŸ¥™å¤šçº¿ç¨‹" class="headerlink" title="ğŸ¥™å¤šçº¿ç¨‹:"></a>ğŸ¥™å¤šçº¿ç¨‹:</h2><p><a href="https://1902756969.github.io/Hexo/2021/03/30/%E5%A4%9A%E7%BA%BF%E7%A8%8B01/">å¤šçº¿ç¨‹01</a></p><p><a href="https://1902756969.github.io/Hexo/2021/03/30/%E5%A4%9A%E7%BA%BF%E7%A8%8B02/">å¤šçº¿ç¨‹02 </a></p><p><a href="https://1902756969.github.io/Hexo/2021/03/30/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3/">å¤šçº¿ç¨‹æ€â€œé”â€</a></p><p><a href="https://1902756969.github.io/Hexo/2021/05/15/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E5%A4%9A%E7%BA%BF%E7%A8%8B/">æ·±å…¥æµ…å‡ºjavaå¤šçº¿ç¨‹ </a></p><h2 id="â˜•åŸºç¡€è¿›é˜¶"><a href="#â˜•åŸºç¡€è¿›é˜¶" class="headerlink" title="â˜•åŸºç¡€è¿›é˜¶"></a>â˜•åŸºç¡€è¿›é˜¶</h2><p><a href="https://mp.weixin.qq.com/s/W3kazFpsdmdT5v_SqX8UKg">å›¾æ–‡å¹¶èŒ‚ï¼šHashMapç»å…¸è¯¦è§£</a></p><h2 id="ğŸ±â€ğŸ‘¤javaweb"><a href="#ğŸ±â€ğŸ‘¤javaweb" class="headerlink" title="ğŸ±â€ğŸ‘¤javaweb:"></a>ğŸ±â€ğŸ‘¤javaweb:</h2><p><a href="https://1902756969.github.io/Hexo/2021/05/15/Tomcat%E5%90%AF%E5%8A%A8%E4%B8%8E%E9%9B%86%E6%88%90/">Tomcatå¯åŠ¨ä¸ideaå·¥å…·é›†æˆ </a></p><h2 id="ğŸ±â€ğŸ‰git"><a href="#ğŸ±â€ğŸ‰git" class="headerlink" title="ğŸ±â€ğŸ‰git"></a>ğŸ±â€ğŸ‰git</h2><p><a href="https://1902756969.github.io/Hexo/2021/11/21/Git(%E5%88%86%E5%B8%83%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%B7%A5%E5%85%B7">Git(åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·) -giteeä¸Šä¼ ä»£ç  </a> -ideaä¸Šä¼ ä»£ç &#x2F;)</p><p><a href="https://1902756969.github.io/Hexo/2021/11/21/Git%E5%9F%BA%E6%9C%AC%E8%AE%B2%E4%B9%89/">GitåŸºæœ¬è®²ä¹‰ </a></p><h2 id="ğŸ±â€ğŸ‘“maven"><a href="#ğŸ±â€ğŸ‘“maven" class="headerlink" title="ğŸ±â€ğŸ‘“maven"></a>ğŸ±â€ğŸ‘“maven</h2><p><a href="https://1902756969.github.io/Hexo/2022/01/23/Maven%E9%AB%98%E7%BA%A7/">Mavené«˜çº§ </a></p><h2 id="ğŸ±â€ğŸmybatis"><a href="#ğŸ±â€ğŸmybatis" class="headerlink" title="ğŸ±â€ğŸmybatis"></a>ğŸ±â€ğŸmybatis</h2><p><a href="https://1902756969.github.io/Hexo/2021/12/23/Mybatis%E5%85%A5%E9%97%A8/">Mybatiså…¥é—¨ </a></p><h2 id="ğŸ±â€ğŸš€spring"><a href="#ğŸ±â€ğŸš€spring" class="headerlink" title="ğŸ±â€ğŸš€spring"></a>ğŸ±â€ğŸš€spring</h2><p><a href="https://1902756969.github.io/Hexo/2021/12/01/Spring%E5%85%A5%E9%97%A8/">Springå…¥é—¨ </a></p><p><a href="https://1902756969.github.io/Hexo/2021/12/18/Spring%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/">Springçš„è‡ªåŠ¨è£…é… </a></p><p><a href="https://1902756969.github.io/Hexo/2021/12/12/Spring%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/">Springä½¿ç”¨æ³¨è§£å¼€å‘ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/04/11/SpringBoot%E9%AB%98%E7%BA%A7/">SpringBooté«˜çº§ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/05/12/Tomcat%E9%9D%A2%E8%AF%95%E9%A2%98/">Tomcaté¢è¯•é¢˜ ä¸“é¢˜éƒ¨åˆ† </a></p><p><a href="https://1902756969.github.io/Hexo/2022/05/12/spring%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%93%E9%A2%98/">Springé¢è¯•é¢˜ ä¸“é¢˜éƒ¨åˆ† </a></p><p><a href="https://1902756969.github.io/Hexo/2022/02/10/Springboot%E5%9F%BA%E7%A1%80%E8%AE%B2%E4%B9%89/">SpringbootåŸºç¡€è®²ä¹‰ </a></p><h2 id="ğŸŒ‰zookeeper"><a href="#ğŸŒ‰zookeeper" class="headerlink" title="ğŸŒ‰zookeeper"></a>ğŸŒ‰zookeeper</h2><p><a href="https://1902756969.github.io/Hexo/2022/01/23/Zookeeper%E5%AE%89%E8%A3%85/">zookeeperå®‰è£… </a></p><p><a href="https://1902756969.github.io/Hexo/2022/01/28/zookeeper%E8%AE%B2%E4%B9%89md/">zookeeperè®²ä¹‰ </a></p><h2 id="ğŸ—¼dobbo"><a href="#ğŸ—¼dobbo" class="headerlink" title="ğŸ—¼dobbo"></a>ğŸ—¼dobbo</h2><p><a href="https://1902756969.github.io/Hexo/2022/01/25/Dubbo/">doubleå¿«é€Ÿå…¥é—¨-é«˜çº§ç‰¹æ€§ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/01/23/Dubbo-admin%E5%85%83%E6%95%B0%E6%8D%AE%E6%98%BE%E7%A4%BA%E4%BF%AE%E5%A4%8D/">double-adminå…ƒæ•°æ®æ˜¾ç¤ºä¿®å¤ </a></p><h2 id="ğŸš§linux"><a href="#ğŸš§linux" class="headerlink" title="ğŸš§linux"></a>ğŸš§linux</h2><p><a href="https://1902756969.github.io/Hexo/2022/02/14/SSH%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0linux%E7%B3%BB%E7%BB%9F/">SSHè¿æ¥æœ¬åœ°linuxç³»ç»Ÿ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/02/20/linux%E8%99%9A%E6%8B%9F%E6%9C%BAredis%E8%BF%9E%E6%8E%A5%E6%8A%A5%E9%94%99/">linuxè™šæ‹Ÿæœºredisè¿æ¥æŠ¥é”™ </a></p><h2 id="â›ºredis"><a href="#â›ºredis" class="headerlink" title="â›ºredis"></a>â›ºredis</h2><p><a href="https://1902756969.github.io/Hexo/2022/02/20/Redis%E5%9F%BA%E7%A1%80/">RedisåŸºç¡€ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/04/09/Redis%E9%AB%98%E7%BA%A7/">Redisé«˜çº§ </a></p><h2 id="ğŸ—½docker"><a href="#ğŸ—½docker" class="headerlink" title="ğŸ—½docker"></a>ğŸ—½docker</h2><p><a href="https://1902756969.github.io/Hexo/2022/04/19/%E5%AE%89%E8%A3%85docker/">Dockerå®‰è£… </a></p><p><a href="https://1902756969.github.io/Hexo/2022/04/20/docker/">Dockeræ¶æ„ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/04/21/docker-compose/">Docker Compose </a></p><p><a href="https://1902756969.github.io/Hexo/2022/04/20/docker%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2/">Dockeråº”ç”¨éƒ¨ç½² </a></p><p><a href="https://1902756969.github.io/Hexo/2022/04/20/dockerfile/">Dockerfileå…³é”®å­— </a></p><p><a href="https://1902756969.github.io/Hexo/2022/04/21/docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/">Docker ç§æœ‰ä»“åº“æ­å»º </a></p><h2 id="ğŸŒŠ-springcloud"><a href="#ğŸŒŠ-springcloud" class="headerlink" title="ğŸŒŠ springcloud"></a>ğŸŒŠ springcloud</h2><p><a href="https://1902756969.github.io/Hexo/2022/03/01/SpringCloud01/">SpringCloudå…¥é—¨ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/03/02/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/">Nacoså®‰è£…ä½¿ç”¨æŒ‡å— </a></p><p><a href="https://1902756969.github.io/Hexo/2022/03/03/nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/">Nacosé›†ç¾¤æ­å»ºæ•™ç¨‹ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/05/03/springcloud%E7%BB%84%E4%BB%B6/">SpringCloudâ€”ç»„ä»¶â‘  </a></p><p><a href="https://1902756969.github.io/Hexo/2022/05/02/Eureka%E5%85%A8%E9%83%A8%E9%85%8D%E7%BD%AE/">Eurakaé…ç½®è¯¦è§£</a></p><p><a href="https://1902756969.github.io/Hexo/2022/05/02/Turbine%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4/">Turbineèšåˆç›‘æ§ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/05/01/gateway%E5%86%85%E7%BD%AE%E8%BF%87%E6%BB%A4%E5%99%A8%E5%B7%A5%E5%8E%82/">Spring Cloud Gateway å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚ </a></p><p><a href="https://1902756969.github.io/Hexo/2022/03/03/SpringCloud%E5%AE%9E%E7%94%A8%E7%AF%8702/">SpringCloudâ€”â€”é«˜çº§â‘  </a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ideaå¿«æ·é”®</title>
    <link href="/Hexo/2023/04/21/idea%E5%BF%AB%E6%8D%B7%E9%94%AE/"/>
    <url>/Hexo/2023/04/21/idea%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    
    <content type="html"><![CDATA[<table><thead><tr><th>å¿«æ·é”®ç»„åˆ</th><th>å®ç°æ•ˆæœ</th></tr></thead><tbody><tr><td><font color='red'>psvm</font> + Tabé”® &#x2F;<font color='red'> main</font> + Tabé”®</td><td>public static void main(String[] args)</td></tr><tr><td>sout + Tabé”®</td><td>System.out.println()</td></tr><tr><td>Ctrl + X</td><td>åˆ é™¤å½“å‰è¡Œ</td></tr><tr><td>Ctrl +D</td><td>å¤åˆ¶å½“å‰è¡Œ</td></tr><tr><td>Alt+Insert(æˆ–å³é”®Generate)</td><td>ç”Ÿæˆä»£ç (å¦‚get,setæ–¹æ³•,æ„é€ å‡½æ•°ç­‰)</td></tr><tr><td>Ctrl+Alt+T</td><td>ç”Ÿæˆtry catch ï¼ˆæˆ–è€… Alt+enteré€‰æ‹©ï¼‰</td></tr><tr><td>CTRL+ALT+T</td><td>æŠŠé€‰ä¸­çš„ä»£ç æ”¾åœ¨ TRY{} IF{} ELSE{} é‡Œ</td></tr><tr><td>Ctr+shift+U</td><td>å®ç°å¤§å°å†™ä¹‹é—´çš„è½¬åŒ–</td></tr><tr><td>ALT+å›è½¦</td><td>å¯¼å…¥åŒ…,è‡ªåŠ¨ä¿®æ­£</td></tr><tr><td>CTRL+ALT+L</td><td>æ ¼å¼åŒ–ä»£ç </td></tr><tr><td>CTRL+ALT+I</td><td>è‡ªåŠ¨ç¼©è¿›</td></tr><tr><td>CTRL+E</td><td>æœ€è¿‘æ›´æ”¹çš„ä»£ç </td></tr><tr><td><font color='red'>fori</font></td><td>ç”Ÿæˆfor (int i &#x3D; 0; i &lt; ; i++) {}</td></tr><tr><td>Alt + &lt;â€“å·¦å³â€“&gt;é”®</td><td>å®ç°çª—å£å·¦å³æ›´æ¢ï¼ˆå¤šçª—å£ï¼‰</td></tr><tr><td>Ctrl + é¼ æ ‡ç‚¹å‡»</td><td>å¿«é€Ÿæ‰¾åˆ°æˆå‘˜å˜é‡çš„å‡ºå¤„</td></tr><tr><td>Shift+F6</td><td>é‡æ„&#x2F;é‡å‘½å (åŒ…ã€ç±»ã€æ–¹æ³•ã€å˜é‡ã€ç”šè‡³æ³¨é‡Šç­‰)</td></tr><tr><td>CTRL+Q</td><td>æŸ¥çœ‹å½“å‰æ–¹æ³•çš„å£°æ˜</td></tr><tr><td>Ctrl+Alt+V</td><td>è‡ªåŠ¨åˆ›å»ºå˜é‡ï¼ˆnew å¯¹è±¡();ä¹‹åé€‰æ‹©æŒ‰å¿«æ·é”®ï¼‰</td></tr><tr><td>Ctrl+O</td><td>é‡å†™æ–¹æ³•</td></tr><tr><td>Ctrl+I</td><td>å®ç°æ–¹æ³•</td></tr><tr><td>ALT+&#x2F;</td><td>ä»£ç æç¤º</td></tr><tr><td>Ctrl+Shift+R</td><td>åœ¨å½“å‰é¡¹ç›®ä¸­æ›¿æ¢æŒ‡å®šå†…å®¹</td></tr><tr><td>Ctrl+E</td><td>æœ€è¿‘ç¼–è¾‘çš„æ–‡ä»¶åˆ—è¡¨</td></tr><tr><td>Ctrl+P</td><td>æ˜¾ç¤ºæ–¹æ³•å‚æ•°ä¿¡æ¯</td></tr><tr><td>Ctrl+Shift+Insert</td><td>æŸ¥çœ‹å†å²å¤åˆ¶è®°å½•ï¼Œideaå¯ä»¥ä¿ç•™å†å²å¤åˆ¶çš„ 100 æ¡è®°å½•</td></tr></tbody></table><p>æ§åˆ¶å°è¯­å¥ System.out ç›¸å…³ï¼š</p><table><thead><tr><th>ç”Ÿæˆæ§åˆ¶å°çš„ç›¸å…³å¿«æ·é”®</th><th>æè¿°</th></tr></thead><tbody><tr><td>sout + Tabé”®</td><td>ç”ŸæˆSystem.out.println();ï¼Œè¾“å‡ºåˆ°æ§åˆ¶å°è¯­å¥å¹¶æ¢è¡Œã€‚</td></tr><tr><td>souf + Tabé”®</td><td>ç”ŸæˆSystem.out.printf(â€œâ€);,è¾“å‡ºä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²åˆ°æ§åˆ¶å°ã€‚</td></tr><tr><td>soutm + Tabé”®</td><td>ç”ŸæˆSystem.out.println(â€œç±»å.æ–¹æ³•åâ€);ï¼Œè¾“å‡ºå½“å‰ ç±»å’Œæ–¹æ³•å åˆ°æ§åˆ¶å°ã€‚</td></tr><tr><td>soutp + Tabé”®</td><td>ç”ŸæˆSystem.out.println(æ‰€æœ‰æ–¹æ³•å‚æ•°å+å€¼);ï¼Œè¾“å‡ºå½“å‰ æ–¹æ³•çš„å‚æ•°åå’Œå€¼ åˆ°æ§åˆ¶å°ã€‚</td></tr></tbody></table><h3 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h3><table><thead><tr><th>å¿«æ·é”®</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>Ctrl + F</td><td>åœ¨å½“å‰æ–‡ä»¶è¿›è¡Œæ–‡æœ¬æŸ¥æ‰¾</td></tr><tr><td>Ctrl + R</td><td>åœ¨å½“å‰æ–‡ä»¶è¿›è¡Œæ–‡æœ¬æ›¿æ¢</td></tr><tr><td>Shift + Ctrl + F</td><td>åœ¨é¡¹ç›®è¿›è¡Œæ–‡æœ¬æŸ¥æ‰¾</td></tr><tr><td>Shift + Ctrl + R</td><td>åœ¨é¡¹ç›®è¿›è¡Œæ–‡æœ¬æ›¿æ¢</td></tr><tr><td>Shift + Shift</td><td>å¿«é€Ÿæœç´¢</td></tr><tr><td>Ctrl + N</td><td>æŸ¥æ‰¾class</td></tr><tr><td>Ctrl + Shift + N</td><td>æŸ¥æ‰¾æ–‡ä»¶</td></tr><tr><td>Ctrl + Shift + Alt + N</td><td>æŸ¥æ‰¾symbolï¼ˆæŸ¥æ‰¾æŸä¸ªæ–¹æ³•åï¼‰</td></tr></tbody></table><h3 id="è·³è½¬åˆ‡æ¢"><a href="#è·³è½¬åˆ‡æ¢" class="headerlink" title="è·³è½¬åˆ‡æ¢"></a>è·³è½¬åˆ‡æ¢</h3><table><thead><tr><th>å¿«æ·é”®</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>Ctrl + E</td><td>æœ€è¿‘æ–‡ä»¶</td></tr><tr><td>Ctrl + Tab</td><td>åˆ‡æ¢æ–‡ä»¶</td></tr><tr><td>Ctrl + Alt + â†&#x2F;â†’</td><td>è·³è½¬å†å²å…‰æ ‡æ‰€åœ¨å¤„</td></tr><tr><td>Alt + â†&#x2F;â†’ æ–¹å‘é”®</td><td>åˆ‡æ¢å­tab</td></tr><tr><td>Ctrl + G</td><td>go toï¼ˆè·³è½¬æŒ‡å®šè¡Œå·ï¼‰</td></tr></tbody></table><h3 id="ç¼–ç ç›¸å…³"><a href="#ç¼–ç ç›¸å…³" class="headerlink" title="ç¼–ç ç›¸å…³"></a>ç¼–ç ç›¸å…³</h3><table><thead><tr><th>å¿«æ·é”®</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>Ctrl + W</td><td>å¿«é€Ÿé€‰ä¸­</td></tr><tr><td>(Shift + Ctrl) + Alt + J</td><td>å¿«é€Ÿé€‰ä¸­åŒæ–‡æœ¬</td></tr><tr><td>Ctrl + C&#x2F;Ctrl + X&#x2F;Ctrl + D</td><td>å¿«é€Ÿå¤åˆ¶æˆ–å‰ªåˆ‡</td></tr><tr><td>å¤šè¡Œé€‰ä¸­ Tab &#x2F; Shift + Tab</td><td>tab</td></tr><tr><td>Ctrl + Y</td><td>åˆ é™¤æ•´è¡Œ</td></tr><tr><td>æ»šè½®ç‚¹å‡»å˜é‡&#x2F;æ–¹æ³•&#x2F;ç±»</td><td>å¿«é€Ÿè¿›å…¥å˜é‡&#x2F;æ–¹æ³•&#x2F;ç±»çš„å®šä¹‰å¤„</td></tr><tr><td>Shift + ç‚¹å‡»Tab</td><td>å¿«é€Ÿå…³é—­tab</td></tr><tr><td>Ctrl + Z ã€Ctrl + Shift + Z</td><td>åæ‚”è¯ï¼Œæ’¤é”€&#x2F;å–æ¶ˆæ’¤é”€</td></tr><tr><td>Ctrl + Shift + enter</td><td>è‡ªåŠ¨æ”¶å°¾ï¼Œä»£ç è‡ªåŠ¨è¡¥å…¨</td></tr><tr><td>Alt + enter</td><td>IntelliJ IDEA æ ¹æ®å…‰æ ‡æ‰€åœ¨é—®é¢˜ï¼Œæä¾›å¿«é€Ÿä¿®å¤é€‰æ‹©ï¼Œå…‰æ ‡æ”¾åœ¨çš„ä½ç½®ä¸åŒæç¤ºçš„ç»“æœä¹Ÿä¸åŒ</td></tr><tr><td>Alt + â†‘&#x2F;â†“</td><td>æ–¹æ³•å¿«é€Ÿè·³è½¬</td></tr><tr><td>F2</td><td>è·³è½¬åˆ°ä¸‹ä¸€ä¸ªé«˜äº®é”™è¯¯ æˆ– è­¦å‘Šä½ç½®</td></tr><tr><td>Alt + Insert</td><td>ä»£ç è‡ªåŠ¨ç”Ÿæˆï¼Œå¦‚ç”Ÿæˆå¯¹è±¡çš„ set &#x2F; get æ–¹æ³•ï¼Œæ„é€ å‡½æ•°ï¼ŒtoString() ç­‰</td></tr><tr><td>Ctrl + Shift + L</td><td>æ ¼å¼åŒ–ä»£ç </td></tr><tr><td>Shift + F6</td><td>å¿«é€Ÿä¿®æ”¹æ–¹æ³•åã€å˜é‡åã€æ–‡ä»¶åã€ç±»åç­‰</td></tr><tr><td>Ctrl + F6</td><td>å¿«é€Ÿä¿®æ”¹æ–¹æ³•ç­¾å</td></tr></tbody></table><h3 id="ä»£ç é˜…è¯»ç›¸å…³"><a href="#ä»£ç é˜…è¯»ç›¸å…³" class="headerlink" title="ä»£ç é˜…è¯»ç›¸å…³"></a>ä»£ç é˜…è¯»ç›¸å…³</h3><table><thead><tr><th>å¿«æ·é”®</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>Ctrl + P</td><td>æ–¹æ³•å‚æ•°æç¤ºæ˜¾ç¤º</td></tr><tr><td>Ctrl + Shift + i</td><td>å°±å¯ä»¥åœ¨å½“å‰ç±»é‡Œå†å¼¹å‡ºä¸€ä¸ªçª—å£å‡ºæ¥</td></tr><tr><td>Alt + F7</td><td>å¯ä»¥åˆ—å‡ºå˜é‡åœ¨å“ªäº›åœ°æ–¹è¢«ä½¿ç”¨äº†</td></tr><tr><td>å…‰æ ‡åœ¨å­ç±»æ¥å£åï¼ŒCtrl + u</td><td>è·³åˆ°çˆ¶ç±»æ¥å£</td></tr><tr><td>Alt + F1 + 1ï¼Œ esc</td><td></td></tr><tr><td>(Shift) + Ctrl + +&#x2F;-</td><td>ä»£ç å—æŠ˜å </td></tr><tr><td>Ctrl + Shift + â†&#x2F;â†’</td><td>ç§»åŠ¨çª—å£åˆ†å‰²çº¿</td></tr><tr><td>Ctrl + (Alt) + B</td><td>è·³è½¬æ–¹æ³•å®šä¹‰&#x2F;å®ç°</td></tr><tr><td>Ctrl + H</td><td>ç±»çš„å±‚çº§å…³ç³»</td></tr><tr><td>Ctrl + F12</td><td>Show Members ç±»æˆå‘˜å¿«é€Ÿæ˜¾ç¤º</td></tr></tbody></table><h3 id="ç‰ˆæœ¬ç®¡ç†ç›¸å…³"><a href="#ç‰ˆæœ¬ç®¡ç†ç›¸å…³" class="headerlink" title="ç‰ˆæœ¬ç®¡ç†ç›¸å…³"></a>ç‰ˆæœ¬ç®¡ç†ç›¸å…³</h3><table><thead><tr><th>å¿«æ·é”®</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>Ctrl + D</td><td>Show Diff</td></tr><tr><td>(Shift) + F7</td><td>ï¼ˆä¸Šï¼‰ä¸‹ä¸€å¤„ä¿®æ”¹</td></tr></tbody></table>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>å¤šçº¿ç¨‹åŸºç¡€æŠ€æœ¯</title>
    <link href="/Hexo/2022/11/30/java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF/"/>
    <url>/Hexo/2022/11/30/java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80%E6%8A%80%E6%9C%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="1-1-è¿›ç¨‹ä¸å¤šçº¿ç¨‹"><a href="#1-1-è¿›ç¨‹ä¸å¤šçº¿ç¨‹" class="headerlink" title="1.1 è¿›ç¨‹ä¸å¤šçº¿ç¨‹"></a>1.1 è¿›ç¨‹ä¸å¤šçº¿ç¨‹</h2><p>1ã€<font color='red'>è¿›ç¨‹ </font></p><p>ç¨‹åºç”±æŒ‡ä»¤å’Œæ•°æ®ç»„æˆï¼Œä½†è¿™äº›æŒ‡ä»¤è¦è¿è¡Œï¼Œæ•°æ®è¦è¯»å†™ï¼Œå°±å¿…é¡»å°†æŒ‡ä»¤åŠ è½½è‡³ CPUï¼Œæ•°æ®åŠ è½½è‡³å†…å­˜ã€‚åœ¨ æŒ‡ä»¤è¿è¡Œè¿‡ç¨‹ä¸­è¿˜éœ€è¦ç”¨åˆ°ç£ç›˜ã€ç½‘ç»œç­‰è®¾å¤‡ã€‚è¿›ç¨‹å°±æ˜¯ç”¨æ¥åŠ è½½æŒ‡ä»¤ã€ç®¡ç†å†…å­˜ã€ç®¡ç† IO çš„ å½“ä¸€ä¸ªç¨‹åºè¢«è¿è¡Œï¼Œä»ç£ç›˜åŠ è½½è¿™ä¸ªç¨‹åºçš„ä»£ç è‡³å†…å­˜ï¼Œè¿™æ—¶å°±å¼€å¯äº†ä¸€ä¸ªè¿›ç¨‹ã€‚ è¿›ç¨‹å°±å¯ä»¥è§†ä¸ºç¨‹åºçš„ä¸€ä¸ªå®ä¾‹ã€‚å¤§éƒ¨åˆ†ç¨‹åºå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªå®ä¾‹è¿›ç¨‹ï¼ˆä¾‹å¦‚è®°äº‹æœ¬ã€ç”»å›¾ã€æµè§ˆå™¨ ç­‰ï¼‰ï¼Œä¹Ÿæœ‰çš„ç¨‹åºåªèƒ½å¯åŠ¨ä¸€ä¸ªå®ä¾‹è¿›ç¨‹ï¼ˆä¾‹å¦‚ç½‘æ˜“äº‘éŸ³ä¹ã€360 å®‰å…¨å«å£«ç­‰ï¼‰</p><p>2ã€é‚£ä»€ä¹ˆæ˜¯<font color='red'>çº¿ç¨‹</font>å‘¢?</p><p>çº¿ç¨‹å¯ä»¥ç†è§£æˆæ˜¯åœ¨è¿›ç¨‹ä¸­ç‹¬ç«‹è¿è¡Œçš„å­ä»»åŠ¡ã€‚æ¯”å¦‚ï¼ŒQQ.exe è¿è¡Œæ—¶å°±æœ‰å¾ˆå¤šçš„å­ä»»åŠ¡åœ¨åŒæ—¶è¿è¡Œã€‚å†å¦‚ï¼Œå¥½å‹è§†é¢‘çº¿ç¨‹ã€ä¸‹è½½æ–‡ä»¶çº¿ç¨‹ã€ä¼ è¾“æ•°æ®çº¿ç¨‹ã€å‘é€è¡¨æƒ…çº¿ç¨‹ç­‰ï¼Œè¿™äº›ä¸åŒçš„ä»»åŠ¡æˆ–è€…è¯´åŠŸèƒ½éƒ½å¯ä»¥<font color='red'>åŒæ—¶è¿è¡Œ</font>ï¼Œå…¶ä¸­æ¯ä¸€é¡¹ä»»åŠ¡å®Œå…¨å¯ä»¥ç†è§£æˆæ˜¯â€œçº¿ç¨‹â€åœ¨å·¥ä½œï¼Œä¼ æ–‡ä»¶ã€å¬éŸ³ä¹ã€å‘é€å›¾ç‰‡è¡¨æƒ…ç­‰åŠŸèƒ½éƒ½æœ‰å¯¹åº”çš„çº¿ç¨‹åœ¨åå°é»˜é»˜åœ°è¿è¡Œã€‚è¿™æ ·åšæœ‰ä»€ä¹ˆä¼˜ç‚¹å‘¢?æ›´å…·ä½“æ¥è®²ï¼Œä½¿ç”¨å¤šçº¿ç¨‹æœ‰ä»€ä¹ˆä¼˜ç‚¹å‘¢?å…¶å®å¦‚æœè¯»è€…æœ‰ä½¿ç”¨â€œå¤šä»»åŠ¡æ“ä½œç³»ç»Ÿâ€çš„ç»éªŒï¼Œæ¯”å¦‚ Windows ç³»åˆ—ï¼Œé‚£ä¹ˆå®ƒçš„æ–¹ä¾¿æ€§å¤§å®¶åº”è¯¥éƒ½æœ‰ä½“ä¼š:ä½¿ç”¨å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿ Windowsåï¼Œå¯ä»¥æœ€å¤§é™åº¦åœ°<font color='red'>åˆ©ç”¨CPUçš„ç©ºé—²æ—¶é—´æ¥å¤„ç†å…¶ä»–çš„ä»»åŠ¡</font>ï¼Œæ¯”å¦‚ä¸€è¾¹è®©æ“ä½œç³»ç»Ÿå¤„ç†æ­£åœ¨ç”±æ‰“å°æœºæ‰“å°çš„æ•°æ®ï¼Œä¸€è¾¹ä½¿ç”¨ Word ç¼–è¾‘æ–‡æ¡£ã€‚è€ŒCPUåœ¨è¿™äº›ä»»åŠ¡ä¹‹é—´ä¸åœåœ°åˆ‡æ¢ï¼Œç”±äºåˆ‡æ¢çš„é€Ÿåº¦éå¸¸å¿«ï¼Œç»™ä½¿ç”¨è€…çš„æ„Ÿå—å°±æ˜¯è¿™äº›ä»»åŠ¡ä¼¼ä¹åœ¨åŒæ—¶è¿è¡Œã€‚æ‰€ä»¥ä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯åï¼Œå¯ä»¥åœ¨åŒä¸€æ—¶é—´å†…è¿è¡Œæ›´å¤šä¸åŒç§ç±»çš„ä»»åŠ¡</p><p>3ã€å¤šçº¿ç¨‹ä¼˜ç‚¹(ä¸ºä»€ä¹ˆä½¿ç”¨å¤šçº¿ç¨‹):</p><p>æ™®åŠæ¦‚å¿µ:</p><p>ä»¥è°ƒç”¨æ–¹è§’åº¦æ¥è®²ï¼Œå¦‚æœ éœ€è¦ç­‰å¾…ç»“æœè¿”å›ï¼Œæ‰èƒ½ç»§ç»­è¿è¡Œå°±æ˜¯<font color='red'>åŒæ­¥ </font></p><p>ä¸éœ€è¦ç­‰å¾…ç»“æœè¿”å›ï¼Œå°±èƒ½ç»§ç»­è¿è¡Œå°±æ˜¯<font color='red'>å¼‚æ­¥</font></p><p><img src="https://pic1.imgdb.cn/item/6370cae216f2c2beb1fa8120.png" alt="image-20221113184306289"></p><p>åœ¨å›¾ä¸­å¯ä»¥å‘ç°ï¼ŒCPU å®Œå…¨å¯ä»¥åœ¨ä»»åŠ¡1å’Œä»»åŠ¡2ä¹‹é—´æ¥åˆ‡æ¢ï¼Œä½¿ä»»åŠ¡2ä¸å¿…ç­‰åˆ°10ç§’å†è¿è¡Œï¼Œç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡å¤§å¤§å¾—åˆ°æå‡ã€‚è¿™å°±æ˜¯è¦ä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯ã€è¦å­¦ä¹ å¤šçº¿ç¨‹çš„åŸå› ã€‚è¿™æ˜¯å¤šçº¿ç¨‹æŠ€æœ¯çš„ä¼˜ç‚¹ï¼Œä½¿ç”¨å¤šçº¿ç¨‹ä¹Ÿå°±æ˜¯åœ¨ä½¿ç”¨<font color='red'>å¼‚æ­¥</font>ã€‚</p><h2 id="1-2ã€å¤šçº¿ç¨‹çš„ä½¿ç”¨"><a href="#1-2ã€å¤šçº¿ç¨‹çš„ä½¿ç”¨" class="headerlink" title="1.2ã€å¤šçº¿ç¨‹çš„ä½¿ç”¨"></a>1.2ã€å¤šçº¿ç¨‹çš„ä½¿ç”¨</h2><h3 id="1-2-1ç»§æ‰¿Threadç±»"><a href="#1-2-1ç»§æ‰¿Threadç±»" class="headerlink" title="1.2.1ç»§æ‰¿Threadç±»"></a>1.2.1ç»§æ‰¿Threadç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> <br></code></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„æºä»£ç ä¸­å¯ä»¥å‘ç°ï¼ŒThreadç±»å®ç°äº† Runnable æ¥å£ï¼Œå®ƒä»¬ä¹‹é—´å…·æœ‰<font color='red'>å¤šæ€</font>å…³ç³»å…¶å®ï¼Œä½¿ç”¨ç»§æ‰¿Threadç±»çš„æ–¹å¼åˆ›å»ºæ–°çº¿ç¨‹æ—¶ï¼Œæœ€å¤§çš„å±€é™å°±æ˜¯ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œå› ä¸ºJavaè¯­è¨€çš„ç‰¹ç‚¹å°±æ˜¯å•æ ¹ç»§æ‰¿ï¼Œæ‰€ä»¥ä¸ºäº†æ”¯æŒå¤šç»§æ‰¿ï¼Œå®Œå…¨å¯ä»¥å®ç° Runnable æ¥å£çš„æ–¹å¼è¾¹å®ç°ä¸€è¾¹ç»§æ‰¿ã€‚ä½†ç”¨è¿™ä¸¤ç§æ–¹å¼åˆ›å»ºçš„çº¿ç¨‹åœ¨å·¥ä½œæ—¶çš„æ€§è´¨æ˜¯ä¸€æ ·çš„ï¼Œæ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//ä»£ç å°±æ˜¯çº¿ç¨‹åœ¨å¼€å¯ä¹‹åæ‰§è¡Œçš„ä»£ç </span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;çº¿ç¨‹å¼€å¯äº†&quot;</span> + i);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡</span><br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡</span><br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br><br>        <span class="hljs-comment">//t1.run();//è¡¨ç¤ºçš„ä»…ä»…æ˜¯åˆ›å»ºå¯¹è±¡,ç”¨å¯¹è±¡å»è°ƒç”¨æ–¹æ³•,å¹¶æ²¡æœ‰å¼€å¯çº¿ç¨‹.</span><br>        <span class="hljs-comment">//t2.run();</span><br>        <span class="hljs-comment">//å¼€å¯ä¸€æ¡çº¿ç¨‹</span><br>        t1.start();<br>        <span class="hljs-comment">//å¼€å¯ç¬¬äºŒæ¡çº¿ç¨‹</span><br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><img src="https://pic1.imgdb.cn/item/6370ceee16f2c2beb1014e61.png" alt="image-20221113190022778" style="zoom: 67%;" /><p>ä»å›¾çš„è¿è¡Œç»“æœæ¥çœ‹ï¼ŒMyThread.javaç±»ä¸­çš„run æ–¹æ³•æ‰§è¡Œçš„æ—¶é—´æ¯”è¾ƒæ™šï¼Œè¿™ä¹Ÿè¯´æ˜åœ¨ä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯æ—¶ï¼Œä»£ç çš„<font color='red'>è¿è¡Œç»“æœä¸ä»£ç æ‰§è¡Œé¡ºåº</font>æˆ–è°ƒç”¨é¡ºåºæ˜¯<font color='red'>æ— å…³çš„</font>ã€‚</p><p>çº¿ç¨‹æ˜¯ä¸€ä¸ªå­ä»»åŠ¡ï¼ŒCPU ä»¥ä¸ç¡®å®šçš„æ–¹å¼ï¼Œæˆ–è€…è¯´æ˜¯ä»¥éšæœºçš„æ—¶é—´æ¥è°ƒç”¨çº¿ç¨‹ä¸­çš„runæ–¹æ³•ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°å…ˆæ‰“å°â€œè¿è¡Œç»“æŸ!â€åè¾“å‡ºâ€œMyThreadâ€è¿™æ ·çš„ç»“æœäº†ã€‚</p><h5 id="ä¸¤ä¸ªå°é—®é¢˜"><a href="#ä¸¤ä¸ªå°é—®é¢˜" class="headerlink" title="ä¸¤ä¸ªå°é—®é¢˜:"></a>ä¸¤ä¸ªå°é—®é¢˜:</h5><ul><li><p>ä¸ºä»€ä¹ˆè¦é‡å†™run()æ–¹æ³•ï¼Ÿ</p><p>å› ä¸ºrun()æ˜¯ç”¨æ¥å°è£…è¢«çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </p></li><li><p>run()æ–¹æ³•å’Œstart()æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ</p><p>run()ï¼šå°è£…çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ï¼Œç›´æ¥è°ƒç”¨ï¼Œç›¸å½“äºæ™®é€šæ–¹æ³•çš„è°ƒç”¨</p><p>start()ï¼šå¯åŠ¨çº¿ç¨‹ï¼›ç„¶åç”±JVMè°ƒç”¨æ­¤çº¿ç¨‹çš„run()æ–¹æ³•</p></li></ul><h3 id="1-2-2-å®ç°Runnable-æ¥å£"><a href="#1-2-2-å®ç°Runnable-æ¥å£" class="headerlink" title="1.2.2 å®ç°Runnable æ¥å£"></a>1.2.2 å®ç°Runnable æ¥å£</h3><p>å¦‚æœæ¬²åˆ›å»ºçš„çº¿ç¨‹ç±»<font color='orange'>å·²ç»æœ‰ä¸€ä¸ªçˆ¶ç±»</font>äº†ï¼Œè¿™æ—¶å°±ä¸èƒ½å†ç»§æ‰¿è‡ªThreadç±»äº†ï¼Œå› ä¸ºJava<font color='orange'>ä¸æ”¯æŒå¤šç»§æ‰¿</font>ï¼Œæ‰€ä»¥å°±éœ€è¦å®ç° Runnable æ¥å£æ¥åº”å¯¹è¿™æ ·çš„æƒ…å†µã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//çº¿ç¨‹å¯åŠ¨åæ‰§è¡Œçš„ä»£ç </span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br><br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;ç¬¬äºŒç§æ–¹å¼å®ç°å¤šçº¿ç¨‹&quot;</span> + i);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºäº†ä¸€ä¸ªå‚æ•°çš„å¯¹è±¡</span><br>        <span class="hljs-type">MyRunnable</span> <span class="hljs-variable">mr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();<br>        <span class="hljs-comment">//åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡,å¹¶æŠŠå‚æ•°ä¼ é€’ç»™è¿™ä¸ªçº¿ç¨‹.</span><br>        <span class="hljs-comment">//åœ¨çº¿ç¨‹å¯åŠ¨ä¹‹å,æ‰§è¡Œçš„å°±æ˜¯å‚æ•°é‡Œé¢çš„runæ–¹æ³•</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr);<br>        <span class="hljs-comment">//å¼€å¯çº¿ç¨‹</span><br>        t1.start();<br><br><br>        <span class="hljs-type">MyRunnable</span> <span class="hljs-variable">mr2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr2);<br>        t2.start();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://pic1.imgdb.cn/item/6370cfd316f2c2beb1035869.png" alt="image-20221113190411961"></p><p>â€‹        ä½¿ç”¨ç»§æ‰¿ Threadç±»çš„æ–¹å¼æ¥å¼€å‘å¤šçº¿ç¨‹åº”ç”¨ç¨‹åºåœ¨è®¾è®¡ä¸Šæ˜¯æœ‰å±€é™æ€§çš„ï¼Œå› ä¸º Java æ˜¯å•æ ¹ç»§æ‰¿ï¼Œä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œæ‰€ä»¥ä¸ºäº†æ”¹å˜è¿™ç§é™åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨å®ç° Runnable æ¥å£çš„æ–¹å¼æ¥å®ç°å¤šçº¿ç¨‹æŠ€æœ¯ã€‚                            Thread(Runnable target)ä¸å…‰å¯ä»¥ä¼ äºº Runnableæ¥å£çš„å¯¹è±¡ï¼Œè¿˜å¯ä»¥ä¼ äººä¸€ä¸ªThreadç±»çš„å¯¹è±¡ï¼Œè¿™æ ·åšå®Œå…¨å¯ä»¥å°†ä¸€ä¸ªThread å¯¹è±¡ä¸­çš„run0æ–¹æ³•äº¤ç”±å…¶ä»–çš„çº¿ç¨‹è¿›è¡Œè°ƒç”¨ã€‚</p><h5 id="å®ç°Runnableæ¥å£-VS-ç»§æ‰¿-Thread"><a href="#å®ç°Runnableæ¥å£-VS-ç»§æ‰¿-Thread" class="headerlink" title="å®ç°Runnableæ¥å£ VS ç»§æ‰¿ Thread"></a>å®ç°Runnableæ¥å£ VS ç»§æ‰¿ Thread</h5><p>å®ç°æ¥å£ä¼šæ›´å¥½ä¸€äº›ï¼Œå› ä¸º:</p><ul><li>Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œå› æ­¤ç»§æ‰¿äº† Thread ç±»å°±æ— æ³•ç»§æ‰¿å…¶å®ƒç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼›</li><li>ç±»å¯èƒ½åªè¦æ±‚å¯æ‰§è¡Œå°±è¡Œï¼Œç»§æ‰¿æ•´ä¸ª Thread ç±»å¼€é”€è¿‡å¤§ã€‚</li></ul><h3 id="1-2-3å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰-å®ç°Callableæ¥å£"><a href="#1-2-3å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰-å®ç°Callableæ¥å£" class="headerlink" title="1.2.3å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰: å®ç°Callableæ¥å£"></a>1.2.3å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰: å®ç°<font color='red'>Callableæ¥å£</font></h3><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyCallableå®ç°Callableæ¥å£</li><li>åœ¨MyCallableç±»ä¸­<font color='red'>é‡å†™call()æ–¹æ³•</font></li><li>åˆ›å»ºMyCallableç±»çš„å¯¹è±¡</li><li>åˆ›å»ºFutureçš„å®ç°ç±»FutureTaskå¯¹è±¡ï¼ŒæŠŠMyCallableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠFutureTaskå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>å¯åŠ¨çº¿ç¨‹</li><li>å†è°ƒç”¨getæ–¹æ³•ï¼Œå°±å¯ä»¥è·å–çº¿ç¨‹ç»“æŸä¹‹åçš„ç»“æœã€‚</li></ul><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCallable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;String&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;è·Ÿå¥³å­©è¡¨ç™½&quot;</span> + i);<br>        &#125;<br>        <span class="hljs-comment">//è¿”å›å€¼å°±è¡¨ç¤ºçº¿ç¨‹è¿è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ç­”åº”&quot;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ExecutionException, InterruptedException &#123;<br>        <span class="hljs-comment">//çº¿ç¨‹å¼€å¯ä¹‹åéœ€è¦æ‰§è¡Œé‡Œé¢çš„callæ–¹æ³•</span><br>        <span class="hljs-type">MyCallable</span> <span class="hljs-variable">mc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCallable</span>();<br><br>        <span class="hljs-comment">//Thread t1 = new Thread(mc);</span><br><br>        <span class="hljs-comment">//å¯ä»¥è·å–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ.ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™Threadå¯¹è±¡</span><br>        FutureTask&lt;String&gt; ft = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;&gt;(mc);<br><br>        <span class="hljs-comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ft);<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> ft.get();<br>        <span class="hljs-comment">//å¼€å¯çº¿ç¨‹</span><br>        t1.start();<br><br>        <span class="hljs-comment">//String s = ft.get();</span><br>        System.out.println(s);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><img src="https://pic1.imgdb.cn/item/6357f13916f2c2beb1fc9f41.png" alt="image-20221025222028899"  /><p>ä¸‰ç§å®ç°æ–¹å¼çš„å¯¹æ¯”</p><ul><li><p>å®ç°Runnableã€Callableæ¥å£</p><ul><li><p>å¥½å¤„: æ‰©å±•æ€§å¼ºï¼Œå®ç°è¯¥æ¥å£çš„åŒæ—¶è¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–çš„ç±»</p></li><li><p>ç¼ºç‚¹: ç¼–ç¨‹ç›¸å¯¹å¤æ‚ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•</p></li></ul></li><li><p>ç»§æ‰¿Threadç±»</p><ul><li><p>å¥½å¤„: ç¼–ç¨‹æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•</p></li><li><p>ç¼ºç‚¹: å¯ä»¥æ‰©å±•æ€§è¾ƒå·®ï¼Œä¸èƒ½å†ç»§æ‰¿å…¶ä»–çš„ç±»</p></li></ul></li></ul><p><img src="https://pic1.imgdb.cn/item/6357f46016f2c2beb102946a.png" alt="image-20221025223357308"></p><h3 id="1-2-4å®ä¾‹å˜é‡ä¸çº¿ç¨‹å®‰å…¨"><a href="#1-2-4å®ä¾‹å˜é‡ä¸çº¿ç¨‹å®‰å…¨" class="headerlink" title="1.2.4å®ä¾‹å˜é‡ä¸çº¿ç¨‹å®‰å…¨"></a>1.2.4å®ä¾‹å˜é‡ä¸çº¿ç¨‹å®‰å…¨</h3><p>è‡ªå®šä¹‰çº¿ç¨‹ç±»ä¸­çš„å®ä¾‹å˜é‡é’ˆå¯¹å…¶ä»–çº¿ç¨‹å¯ä»¥æœ‰å…±äº«ä¸ä¸å…±äº«ä¹‹åˆ†ï¼Œè¿™åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´è¿›è¡Œäº¤äº’æ—¶æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæŠ€æœ¯ç‚¹ã€‚</p><h5 id="1-ä¸å…±äº«æ•°æ®æ¨¡å‹"><a href="#1-ä¸å…±äº«æ•°æ®æ¨¡å‹" class="headerlink" title="(1)ä¸å…±äº«æ•°æ®æ¨¡å‹"></a>(1)ä¸å…±äº«æ•°æ®æ¨¡å‹</h5><p><img src="https://pic1.imgdb.cn/item/6370d9b016f2c2beb1118142.png" alt="image-20221113194616309"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyThread</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">super</span>();<br>       <br>        <span class="hljs-built_in">this</span>.setName(name);<span class="hljs-comment">//è®¾ç½®çº¿ç¨‹åç§°</span><br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.run();<br>        <span class="hljs-keyword">while</span> (count&gt;<span class="hljs-number">0</span>)&#123;<br>            count--;<br>            System.out.println(<span class="hljs-string">&quot;ç”±&quot;</span> + <span class="hljs-built_in">this</span>.currentThread().getName() + <span class="hljs-string">&quot;è®¡ç®—ï¼Œcount=&quot;</span> + count);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;A&quot;</span>);<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;A&quot;</span>);<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;A&quot;</span>);<br>        a.start();<br>        b.start();<br>        c.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>   ä¸å…±äº«æ•°æ®è¿è¡Œç»“æœå¦‚å›¾æ‰€ç¤º</p><img src="https://pic1.imgdb.cn/item/6370eb3616f2c2beb12fc202.png" alt="image-20221113210102476" style="zoom:50%;" /><p>ç”±å›¾å¯ä»¥çœ‹åˆ°ï¼Œä¸€å…±åˆ›å»ºäº†3ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å„è‡ªçš„count å˜é‡ï¼Œè‡ªå·±å‡å°‘è‡ªå·±çš„countå˜é‡çš„å€¼ã€‚è¿™æ ·çš„æƒ…å†µå°±æ˜¯å˜é‡ä¸å…±äº«ï¼Œæ­¤ç¤ºä¾‹å¹¶ä¸å­˜åœ¨å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå®ä¾‹å˜é‡çš„æƒ…å†µã€‚<br>å¦‚æœæƒ³å®ç°3ä¸ªçº¿ç¨‹å…±åŒå¯¹ä¸€ä¸ªcount å˜é‡è¿›è¡Œå‡æ³•æ“ä½œçš„ç›®çš„ï¼Œè¯¥å¦‚ä½•è®¾è®¡ä»£ç å‘¢?</p><h5 id="2-å…±äº«æ•°æ®çš„æƒ…å†µ"><a href="#2-å…±äº«æ•°æ®çš„æƒ…å†µ" class="headerlink" title="(2)å…±äº«æ•°æ®çš„æƒ…å†µ"></a>(2)å…±äº«æ•°æ®çš„æƒ…å†µ</h5><h5 id=""><a href="#" class="headerlink" title=""></a><img src="https://pic1.imgdb.cn/item/6370e97a16f2c2beb12bfaf3.png" alt="image-20221113205338750"></h5><p>å…±äº«æ•°æ®çš„æƒ…å†µå°±æ˜¯å¤šä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®åŒä¸€ä¸ªå˜é‡ï¼Œæ¯”å¦‚åœ¨å®ç°æŠ•ç¥¨åŠŸèƒ½çš„è½¯ä»¶æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶å¤„ç†åŒä¸€ä¸ªäººçš„ç¥¨æ•°<br>    ä¸‹é¢é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥çœ‹ä¸‹æ•°æ®å…±äº«æƒ…å†µã€‚</p><p>æµ‹è¯•æ¡ˆä¾‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.run();<br>        count--;<br>        System.out.println(<span class="hljs-string">&quot;ç”±&quot;</span> + <span class="hljs-built_in">this</span>.currentThread().getName() + <span class="hljs-string">&quot;è®¡ç®—ï¼Œcount=&quot;</span> + count);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">mythread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mythread,<span class="hljs-string">&quot;A&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mythread,<span class="hljs-string">&quot;B&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mythread,<span class="hljs-string">&quot;C&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mythread,<span class="hljs-string">&quot;D&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mythread,<span class="hljs-string">&quot;E&quot;</span>);<br>        a.start();<br>        b.start();<br>        c.start();<br>        d.start();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="https://pic1.imgdb.cn/item/6370eb6f16f2c2beb13024ea.png" alt="image-20221113210159464"></p><p>ä»ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œçº¿ç¨‹Aå’ŒBæ‰“å°å‡ºçš„countå€¼éƒ½æ˜¯3ï¼Œè¯´æ˜Aå’ŒBåŒæ—¶å¯¹count è¿›è¡Œå¤„ç†ï¼Œäº§ç”Ÿäº†â€œéçº¿ç¨‹å®‰å…¨â€é—®é¢˜ã€‚è€Œæˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„æ‰“å°ç»“æœå´ä¸æ˜¯é‡å¤çš„ï¼Œè€Œæ˜¯ä¾æ¬¡é€’å‡çš„åœ¨æŸäº›JVM ä¸­ï¼Œiâ€“çš„æ“ä½œè¦åˆ†æˆå¦‚ä¸‹3æ­¥</p><p><font color='orange'>1)å–å¾—åŸæœ‰iå€¼  </font><br><font color='orange'>2)è®¡ç®— i-1ã€‚ </font></p><p><font color='orange'>3)å¯¹è¿›è¡Œèµ‹å€¼</font></p><p>åœ¨è¿™3ä¸ªæ­¥éª¤ä¸­ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œé‚£ä¹ˆä¸€å®šä¼šå‡ºç°éçº¿ç¨‹å®‰å…¨é—®é¢˜</p><h2 id="1-3-currentThread-æ–¹æ³•"><a href="#1-3-currentThread-æ–¹æ³•" class="headerlink" title="1.3  currentThread()æ–¹æ³•"></a>1.3  currentThread()æ–¹æ³•</h2><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void  setName(String name)</td><td>å°†æ­¤çº¿ç¨‹çš„åç§°æ›´æ”¹ä¸ºç­‰äºå‚æ•°name</td></tr><tr><td>String  getName()</td><td>è¿”å›æ­¤çº¿ç¨‹çš„åç§°</td></tr><tr><td>Thread  currentThread()</td><td>è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨</td></tr></tbody></table><p>currentThread0æ–¹æ³•å¯è¿”å›ä»£ç æ®µæ­£åœ¨è¢«å“ªä¸ªçº¿ç¨‹è°ƒç”¨çš„ä¿¡æ¯ã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªç¤ºä¾‹è¿›è¡Œè¯´æ˜ã€‚<br>åˆ›å»ºé¡¹ç›®ï¼Œåˆ›å»ºä»£ç å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">t6</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(Thread.currentThread().getName());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyThread</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyThread</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(getName()+<span class="hljs-string">&quot;:&quot;</span>+i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThreadDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br><br>        <span class="hljs-comment">//void setName(String name)ï¼šå°†æ­¤çº¿ç¨‹çš„åç§°æ›´æ”¹ä¸ºç­‰äºå‚æ•° name</span><br>        my1.setName(<span class="hljs-string">&quot;é«˜é“&quot;</span>);<br>        my2.setName(<span class="hljs-string">&quot;é£æœº&quot;</span>);<br><br>        <span class="hljs-comment">//Thread(String name)</span><br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;é«˜é“&quot;</span>);<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;é£æœº&quot;</span>);<br><br>        my1.start();<br>        my2.start();<br><br>        <span class="hljs-comment">//static Thread currentThread() è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨</span><br>        System.out.println(Thread.currentThread().getName());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="1-4-isAlive-æ–¹æ³•"><a href="#1-4-isAlive-æ–¹æ³•" class="headerlink" title="1.4 isAlive()æ–¹æ³•"></a>1.4 isAlive()æ–¹æ³•</h2><p>æ–¹æ³•isAlive0)çš„åŠŸèƒ½æ˜¯åˆ¤æ–­å½“å‰çš„çº¿ç¨‹æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€æ–°å»ºé¡¹ç›®t7ï¼Œç±»æ–‡ä»¶ä»£ç å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">t7</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyThread</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;run&quot;</span>+<span class="hljs-built_in">this</span>.isAlive());<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">t7</span> <span class="hljs-variable">myThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">t7</span>();<br>        System.out.println(<span class="hljs-string">&quot;begin==&quot;</span>+myThread.isAlive());<br>        myThread.start();<br>        System.out.println(<span class="hljs-string">&quot;end==&quot;</span>+ myThread.isAlive());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><img src="https://pic1.imgdb.cn/item/6370ff3c16f2c2beb15200a3.png" alt="image-20221113222628698" style="zoom: 67%;" /><h2 id="1-5-çº¿ç¨‹ä¼‘çœ "><a href="#1-5-çº¿ç¨‹ä¼‘çœ " class="headerlink" title="1.5 çº¿ç¨‹ä¼‘çœ "></a>1.5 çº¿ç¨‹ä¼‘çœ </h2><ul><li><table><thead><tr><th>static void sleep(long millis)</th><th>ä½¿å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœç•™ï¼ˆæš‚åœæ‰§è¡Œï¼‰æŒ‡å®šçš„æ¯«ç§’æ•°</th></tr></thead></table><ul><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">100</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br><br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;---&quot;</span> + i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-comment">/*System.out.println(&quot;ç¡è§‰å‰&quot;);</span><br><span class="hljs-comment">        Thread.sleep(3000);</span><br><span class="hljs-comment">        System.out.println(&quot;ç¡é†’äº†&quot;);*/</span><br><br>        <span class="hljs-type">MyRunnable</span> <span class="hljs-variable">mr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr);<br><br>        t1.start();<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="1-6-getId-æ–¹æ³•"><a href="#1-6-getId-æ–¹æ³•" class="headerlink" title="1.6 getId()æ–¹æ³•"></a>1.6 getId()æ–¹æ³•</h2><p>getId0æ–¹æ³•çš„ä½œç”¨æ˜¯å–å¾—çº¿ç¨‹çš„å”¯ä¸€æ ‡è¯†ã€‚åˆ›å»ºæµ‹è¯•ç”¨çš„é¡¹ç›®runThreadï¼Œåˆ›å»ºTest,javaç±»ï¼Œä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>       Thread run=Thread.currentThread();<br>       <span class="hljs-type">Thread</span> <span class="hljs-variable">runThread</span> <span class="hljs-operator">=</span> Thread.currentThread();System.out.println(runThread.getName() +<span class="hljs-string">&quot;     &quot;</span>+runThread.getId());<br>   &#125;<br></code></pre></td></tr></table></figure><p><img src="https://pic1.imgdb.cn/item/6371033916f2c2beb158c18d.png" alt="image-20221113224329016"></p><h2 id="1-7-çº¿ç¨‹åœæ­¢"><a href="#1-7-çº¿ç¨‹åœæ­¢" class="headerlink" title="1.7  çº¿ç¨‹åœæ­¢"></a>1.7  çº¿ç¨‹åœæ­¢</h2><p>å¤§å¤šæ•°åœæ­¢ä¸ªçº¿ç¨‹çš„æ“ä½œä½¿ç”¨Thread.interrupt0æ–¹æ³•ï¼Œå°½ç®¡æ–¹æ³•çš„åç§°æ˜¯â€œåœæ­¢ï¼Œä¸­æ­¢â€çš„æ„æ€ï¼Œä½†è¿™ä¸ªæ–¹æ³•ä¸ä¼šç»ˆæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Œè¿˜éœ€è¦åŠ äººä¸€ä¸ªåˆ¤æ–­æ‰å¯ä»¥å®Œæˆçº¿ç¨‹çš„åœæ­¢ã€‚å…³äºæ­¤çŸ¥è¯†ç‚¹åœ¨åé¢æœ‰ä¸“é—¨çš„ç« èŠ‚è¿›è¡Œä»‹ç»ã€‚<br>åœ¨Javaä¸­æœ‰ä»¥ä¸‹3ç§æ–¹æ³•å¯ä»¥ç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„çº¿:<br>1)ä½¿ç”¨é€€å‡ºæ ‡å¿—ï¼Œä½¿çº¿ç¨‹æ­£å¸¸é€€å‡ºï¼Œä¹Ÿå°±æ˜¯å½“<font color='red'>run æ–¹æ³•</font>å®Œæˆåçº¿ç¨‹ç»ˆæ­¢ã€‚</p><p>2)ä½¿ç”¨<font color='red'>stop</font> æ–¹æ³•å¼ºè¡Œç»ˆæ­¢çº¿ç¨‹ï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºstop å’Œsuspend åŠresumeä¸€æ ·ï¼Œéƒ½æ˜¯ä½œåºŸè¿‡æœŸçš„æ–¹æ³•ï¼Œä½¿ç”¨å®ƒä»¬å¯èƒ½äº§ç”Ÿä¸å¯é¢„æ–™çš„ç»“æœã€‚</p><p>3)ä½¿ç”¨<font color='red'>interrupt </font>æ–¹æ³•ä¸­æ–­çº¿ç¨‹ã€‚</p><p>æœ¬ç¤ºä¾‹å°†è°ƒç”¨interrupt0æ–¹æ³•æ¥åœæ­¢çº¿ç¨‹ï¼Œä½†interrupt0)æ–¹æ³•çš„ä½¿ç”¨æ•ˆæœå¹¶ä¸åƒfor+break è¯­å¥é‚£æ ·ï¼Œé©¬ä¸Šå°±åœæ­¢å¾ªç¯ã€‚è°ƒç”¨interrupt0æ–¹æ³•ä»…ä»…æ˜¯åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰“äº†ä¸€ä¸ªåœæ­¢çš„æ ‡è®°ï¼Œå¹¶ä¸æ˜¯çœŸçš„åœæ­¢çº¿ç¨‹ã€‚</p><h3 id="1-7-1-interrupt-â€“åœæ­¢æ ‡è®°"><a href="#1-7-1-interrupt-â€“åœæ­¢æ ‡è®°" class="headerlink" title="1.7.1 interrupt()â€“åœæ­¢æ ‡è®°"></a>1.7.1 interrupt()â€“åœæ­¢æ ‡è®°</h3><p>æœ¬ç¤ºä¾‹å°†è°ƒç”¨interrupt0æ–¹æ³•æ¥åœæ­¢çº¿ç¨‹ï¼Œä½†interrupt0æ–¹æ³•çš„ä½¿ç”¨æ•ˆæœå¹¶ä¸åƒfor+breakè¯­å¥é‚£æ ·ï¼Œé©¬ä¸Šå°±åœæ­¢å¾ªç¯ã€‚è°ƒç”¨interrupt0)æ–¹æ³•ä»…ä»…æ˜¯åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰“äº†ä¸€ä¸ªåœæ­¢çš„æ ‡è®°ï¼Œå¹¶ä¸æ˜¯çœŸçš„åœæ­¢çº¿ç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">t11</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.run();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">50000</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;i=&quot;</span>+(i+<span class="hljs-number">1</span>));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            t11 thread=<span class="hljs-keyword">new</span> <span class="hljs-title class_">t11</span>();<br>            thread.start();<br>            Thread.sleep(<span class="hljs-number">2000</span>);<br>            thread.interrupt();<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;main catch&quot;</span>);<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/63739e0216f2c2beb1c1ed26.png" alt="image-20221115220816240"></p><p>ä»è¿è¡Œçš„ç»“æœæ¥çœ‹ï¼Œè°ƒç”¨interrupt æ–¹æ³•å¹¶æ²¡æœ‰åœæ­¢çº¿ç¨‹ã€‚å¦‚ä½•åœæ­¢çº¿ç¨‹å‘¢?</p><p>Javaçš„SDKä¸­ï¼ŒThreadjavaç±»é‡Œæä¾›äº†ä¸¤ç§æ–¹æ³•<br>1)this.interrupted():æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­ã€‚<br>2)this.isInterrupted():æµ‹è¯•çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­ã€‚</p><p>ä¸‹é¢é€šè¿‡ä»£ç æ¯”è¾ƒä¸¤ä¸ªæ–¹æ³•</p><h5 id="1-interrupted"><a href="#1-interrupted" class="headerlink" title="1)interrupted()"></a>1)interrupted()</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">t11</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.run();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">50000</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;i=&quot;</span>+(i+<span class="hljs-number">1</span>));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            t11 thread=<span class="hljs-keyword">new</span> <span class="hljs-title class_">t11</span>();<br>            thread.start();<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            thread.interrupt();<br>            System.out.println(<span class="hljs-string">&quot;æ˜¯å¦åœæ­¢1ï¼Ÿ=&quot;</span>+thread.interrupted());<br>            System.out.println(<span class="hljs-string">&quot;æ˜¯å¦åœæ­¢1ï¼Ÿ=&quot;</span>+thread.interrupted());<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;main catch&quot;</span>);<br>            e.printStackTrace();<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;endï¼&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/63739f0516f2c2beb1c3b87a.png" alt="image-20221115221241679"></p><p>æ¥åˆ¤æ–­ thread å¯¹è±¡æ‰€ä»£è¡¨çš„çº¿ç¨‹æ˜¯å¦åœæ­¢ï¼Œä½†ä»æ§åˆ¶å°æ‰“å°çš„ç»“æœæ¥çœ‹ï¼Œçº¿ç¨‹å¹¶æœªåœæ­¢ï¼Œè¿™ä¹Ÿå°±è¯æ˜äº†interrupted0 æ–¹æ³•çš„è§£é‡Š:æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­ã€‚è¿™ä¸ªâ€œå½“å‰çº¿ç¨‹æ˜¯mainï¼Œå®ƒä»æœªä¸­æ–­è¿‡ï¼Œæ‰€ä»¥æ‰“å°çš„ç»“æœæ˜¯ä¸¤ä¸ª falseã€‚</p><p>å¦‚ä½•åœ¨mainçº¿ç¨‹ä¸­äº§ç”Ÿæ•ˆæœï¼Ÿ</p><p>ä¿®æ”¹ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java">   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            t11 thread=<span class="hljs-keyword">new</span> <span class="hljs-title class_">t11</span>();<br>            thread.start();<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            thread.interrupt();<br>            Thread.currentThread().interrupt();<br>            System.out.println(<span class="hljs-string">&quot;æ˜¯å¦åœæ­¢1ï¼Ÿ=&quot;</span>+thread.interrupted());<br>            System.out.println(<span class="hljs-string">&quot;æ˜¯å¦åœæ­¢1ï¼Ÿ=&quot;</span>+thread.interrupted());<br>            System.out.println(<span class="hljs-string">&quot;endï¼&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;main catch&quot;</span>);<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/63739fae16f2c2beb1c49e4d.png" alt="image-20221115221530757"></p><p>ä¸ºä»€ä¹ˆç¬¬2ä¸ªå¸ƒå°”å€¼æ˜¯falseå‘¢?æŸ¥çœ‹ä¸€ä¸‹å®˜æ–¹å¸®åŠ©æ–‡æ¡£ä¸­å¯¹interrupted æ–¹æ³•çš„è§£é‡Š</p><p>æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­ã€‚çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ç”±è¯¥æ–¹æ³•æ¸…é™¤ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœè¿ç»­ä¸¤æ¬¡è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ™ç¬¬äºŒæ¬¡è°ƒç”¨å°†è¿”å› false (åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨å·²æ¸…é™¤äº†å…¶ä¸­æ–­çŠ¶æ€ä¹‹åï¼Œä¸”ç¬¬äºŒæ¬¡è°ƒç”¨æ£€éªŒå®Œä¸­æ–­çŠ¶æ€å‰ï¼Œå½“å‰çº¿ç¨‹å†æ¬¡ä¸­æ–­çš„æƒ…å†µé™¤å¤–)ã€‚<br>  æ–‡æ¡£å·²ç»è§£é‡Šå¾—å¾ˆè¯¦ç»†interrupted0æ–¹æ³•å…·æœ‰<font color='red'>æ¸…é™¤çŠ¶æ€çš„åŠŸèƒ½</font>ï¼Œæ‰€ä»¥ç¬¬2æ¬¡è°ƒç”¨interrupted0æ–¹æ³•è¿”å›çš„å€¼æ˜¯falseã€‚</p><h5 id="2-isInterrupted"><a href="#2-isInterrupted" class="headerlink" title="2)isInterrupted():"></a>2)isInterrupted():</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java">   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            t11 thread=<span class="hljs-keyword">new</span> <span class="hljs-title class_">t11</span>();<br>            thread.start();<br>            Thread.sleep(<span class="hljs-number">1000</span>);<br>            thread.interrupt();<br>            <span class="hljs-comment">//Thread.currentThread().interrupt();</span><br>            System.out.println(<span class="hljs-string">&quot;æ˜¯å¦åœæ­¢1ï¼Ÿ=&quot;</span>+thread.isInterrupted());<br>            System.out.println(<span class="hljs-string">&quot;æ˜¯å¦åœæ­¢1ï¼Ÿ=&quot;</span>+thread.isInterrupted());<br><br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;main catch&quot;</span>);<br>            e.printStackTrace();<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;endï¼&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6373a1b716f2c2beb1c9e8e0.png" alt="image-20221115222411962"></p><p>ä»ç»“æœä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ–¹æ³•isInterrupted0å¹¶æœªæ¸…é™¤çŠ¶æ€æ ‡å¿—ï¼Œæ‰€ä»¥æ‰“å°äº†ä¸¤ä¸ª trueã€‚<br>æœ€åï¼Œå†æ¥çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªæ–¹æ³•çš„è§£é‡Š</p><p>1)this.interrupted():æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»æ˜¯ä¸­æ–­çŠ¶æ€æ‰§è¡Œåå…·æœ‰å°†çŠ¶æ€æ ‡å¿—ç½®<font color='red'>æ¸…é™¤</font>ä¸º false çš„åŠŸèƒ½ã€‚<br>2)this.isInterrupted():æµ‹è¯•çº¿ç¨‹Thread å¯¹è±¡æ˜¯å¦å·²ç»æ˜¯ä¸­æ–­çŠ¶æ€ï¼Œä½†<font color='red'>ä¸æ¸…é™¤</font>çŠ¶æ€æ ‡å¿—ã€‚</p><h3 id="1-7-2-å¼‚å¸¸æ³•åœæ­¢çº¿ç¨‹"><a href="#1-7-2-å¼‚å¸¸æ³•åœæ­¢çº¿ç¨‹" class="headerlink" title="1.7.2 å¼‚å¸¸æ³•åœæ­¢çº¿ç¨‹"></a>1.7.2 å¼‚å¸¸æ³•åœæ­¢çº¿ç¨‹</h3><p>åœ¨çº¿ç¨‹ä¸­ç”¨forè¯­å¥æ¥åˆ¤æ–­ä¸€ä¸‹çº¿ç¨‹æ˜¯å¦æ˜¯åœæ­¢çŠ¶æ€ï¼Œä½†å¦‚æœ for è¯­å¥ä¸‹é¢è¿˜æœ‰è¯­å¥ï¼Œè¿˜æ˜¯ä¼šç»§ç»­è¿è¡Œçš„ã€‚</p><p>æ‰€ä»¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.text;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.run();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">500000</span>; i++) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.interrupted())&#123;<br>                    System.out.println(<span class="hljs-string">&quot;å·²ç»æ˜¯åœæ­¢çŠ¶æ€ï¼è‡£é€€äº†ï¼&quot;</span>);<br>                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InterruptedException</span>();<br>                &#125;<br>                System.out.println(<span class="hljs-string">&quot;i=&quot;</span>+(i+<span class="hljs-number">1</span>));<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;æˆ‘åœ¨forä¸‹æ–¹ï¼&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;è¿›å…¥runæ–¹æ³•çš„catchä¸­äº†ï¼&quot;</span>);<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">MyThread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>            thread.start();<br>            Thread.sleep(<span class="hljs-number">200</span>);<br>            thread.interrupt();<br><br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;main catch&quot;</span>);<br>            e.printStackTrace();<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;end!!&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6373a59f16f2c2beb1d0c035.png" alt="image-20221115224052009"></p><h3 id="1-7-3åœ¨çº¿ç¨‹sleep-ä¸­åœæ­¢"><a href="#1-7-3åœ¨çº¿ç¨‹sleep-ä¸­åœæ­¢" class="headerlink" title="1.7.3åœ¨çº¿ç¨‹sleep()ä¸­åœæ­¢"></a>1.7.3åœ¨çº¿ç¨‹sleep()ä¸­åœæ­¢</h3><p>å¦‚æœçº¿ç¨‹åœ¨sleep0çŠ¶æ€ä¸‹åœæ­¢çº¿ç¨‹ï¼Œä¼šæ˜¯ä»€ä¹ˆæ•ˆæœå‘¢?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.run();<br>        <span class="hljs-keyword">try</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;run begin...&quot;</span>);<br>            Thread.sleep(<span class="hljs-number">200000</span>);<br>            System.out.println(<span class="hljs-string">&quot;run sleep...&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;sleepä¸­çš„çº¿ç¨‹è¢«åœæ­¢ï¼è¿›å…¥catch&quot;</span>+<span class="hljs-built_in">this</span>.isInterrupted());<br>           e.printStackTrace();<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/6373a62f16f2c2beb1d17a7d.png" alt="image-20221115224315984">     </p><p>â€‹         ä»æ‰“å°çš„ç»“æœæ¥çœ‹ï¼Œå¦‚æœåœ¨ sleep çŠ¶æ€ä¸‹åœæ­¢æŸä¸€çº¿ç¨‹ï¼Œä¼šè¿›äºº cath è¯­å¥ï¼Œå¹¶ä¸”æ¸…é™¤åœæ­¢çŠ¶æ€å€¼ï¼Œä½¿ä¹‹å˜æˆ falseã€‚å‰ä¸€ä¸ªå®éªŒæ˜¯å…ˆsleep ç„¶åå†ç”¨interrupt0åœæ­¢ï¼Œä¸ä¹‹ç›¸åçš„æ“ä½œåœ¨å­¦ä¹ çº¿ç¨‹æ—¶ä¹Ÿè¦æ³¨æ„ã€‚</p><h3 id="1-7-4-stop-â€”æš´åŠ›åœæ­¢"><a href="#1-7-4-stop-â€”æš´åŠ›åœæ­¢" class="headerlink" title="1.7.4 stop()â€”æš´åŠ›åœæ­¢"></a>1.7.4 stop()â€”æš´åŠ›åœæ­¢</h3><p>ä½¿ç”¨stop0æ–¹æ³•åœæ­¢çº¿ç¨‹åˆ™æ˜¯éå¸¸æš´åŠ›çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.run();<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>              i++;<br>              System.out.println(<span class="hljs-string">&quot;i=&quot;</span>+i);<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>          &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>           e.printStackTrace();<br>        &#125;<br>    &#125;<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">MyThread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>            thread.start();<br>            Thread.sleep(<span class="hljs-number">8000</span>);<br>            thread.stop();<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>           <br>            e.printStackTrace();<br>        &#125;<br>      &#125;<br></code></pre></td></tr></table></figure><img src="https://pic.imgdb.cn/item/6373a78616f2c2beb1d37c85.png" alt="image-20221115224859010" style="zoom:50%;" /><p>çº¿ç¨‹è¢«æš´åŠ›åœæ­¢(stop)è¿è¡Œåå›¾æ ‡å‘ˆç°è‰²</p><h2 id="1-8çº¿ç¨‹ä¼˜å…ˆçº§ã€åº”ç”¨ã€‘"><a href="#1-8çº¿ç¨‹ä¼˜å…ˆçº§ã€åº”ç”¨ã€‘" class="headerlink" title="1.8çº¿ç¨‹ä¼˜å…ˆçº§ã€åº”ç”¨ã€‘"></a>1.8çº¿ç¨‹ä¼˜å…ˆçº§ã€åº”ç”¨ã€‘</h2><ul><li><p>çº¿ç¨‹è°ƒåº¦</p><ul><li><p>ä¸¤ç§è°ƒåº¦æ–¹å¼</p><ul><li>åˆ†æ—¶è°ƒåº¦æ¨¡å‹ï¼šæ‰€æœ‰çº¿ç¨‹è½®æµä½¿ç”¨ CPU çš„ä½¿ç”¨æƒï¼Œå¹³å‡åˆ†é…æ¯ä¸ªçº¿ç¨‹å ç”¨ CPU çš„æ—¶é—´ç‰‡</li><li>æŠ¢å å¼è°ƒåº¦æ¨¡å‹ï¼šä¼˜å…ˆè®©ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä½¿ç”¨ CPUï¼Œå¦‚æœçº¿ç¨‹çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆä¼šéšæœºé€‰æ‹©ä¸€ä¸ªï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹è·å–çš„ CPU æ—¶é—´ç‰‡ç›¸å¯¹å¤šä¸€äº›</li></ul></li><li><p>Javaä½¿ç”¨çš„æ˜¯æŠ¢å å¼è°ƒåº¦æ¨¡å‹</p></li><li><p>éšæœºæ€§</p><p>å‡å¦‚è®¡ç®—æœºåªæœ‰ä¸€ä¸ª CPUï¼Œé‚£ä¹ˆ CPU åœ¨æŸä¸€ä¸ªæ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œçº¿ç¨‹åªæœ‰å¾—åˆ°CPUæ—¶é—´ç‰‡ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æƒï¼Œæ‰å¯ä»¥æ‰§è¡ŒæŒ‡ä»¤ã€‚æ‰€ä»¥è¯´å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œæ˜¯æœ‰éšæœºæ€§ï¼Œå› ä¸ºè°æŠ¢åˆ°CPUçš„ä½¿ç”¨æƒæ˜¯ä¸ä¸€å®šçš„</p></li></ul></li><li><p>ä¼˜å…ˆçº§ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>final int getPriority()</td><td>è¿”å›æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§</td></tr><tr><td>final void setPriority(int newPriority)</td><td>æ›´æ”¹æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§æ˜¯5ï¼›çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯ï¼š1-10</td></tr></tbody></table><ul><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCallable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;String&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;---&quot;</span> + i);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;çº¿ç¨‹æ‰§è¡Œå®Œæ¯•äº†&quot;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ä¼˜å…ˆçº§: 1 - 10 é»˜è®¤å€¼:5</span><br>        <span class="hljs-type">MyCallable</span> <span class="hljs-variable">mc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCallable</span>();<br><br>        FutureTask&lt;String&gt; ft = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;&gt;(mc);<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ft);<br>        t1.setName(<span class="hljs-string">&quot;é£æœº&quot;</span>);<br>        t1.setPriority(<span class="hljs-number">10</span>);<br>        <span class="hljs-comment">//System.out.println(t1.getPriority());//5</span><br>        t1.start();<br><br>        <span class="hljs-type">MyCallable</span> <span class="hljs-variable">mc2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCallable</span>();<br><br>        FutureTask&lt;String&gt; ft2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;&gt;(mc2);<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ft2);<br>        t2.setName(<span class="hljs-string">&quot;å¦å…‹&quot;</span>);<br>        t2.setPriority(<span class="hljs-number">1</span>);<br>        <span class="hljs-comment">//System.out.println(t2.getPriority());//5</span><br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p><img src="https://pic.imgdb.cn/item/6373a8d716f2c2beb1d5cc78.png" alt="image-20221115225435403"></p><p>å¯è§æ²¡æœ‰å…ˆåé¡ºåºï¼Œæ‰€ä»¥ä¼˜å…ˆçº§åœ¨æ“ä½œç³»ç»Ÿå‰å¹¶ä¸å¥½ä½¿ï¼</p><h3 id="1-7-6å®ˆæŠ¤çº¿ç¨‹ã€åº”ç”¨ã€‘"><a href="#1-7-6å®ˆæŠ¤çº¿ç¨‹ã€åº”ç”¨ã€‘" class="headerlink" title="1.7.6å®ˆæŠ¤çº¿ç¨‹ã€åº”ç”¨ã€‘"></a>1.7.6å®ˆæŠ¤çº¿ç¨‹ã€åº”ç”¨ã€‘</h3><ul><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void setDaemon(boolean on)</td><td>å°†æ­¤çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œå½“è¿è¡Œçš„çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå°†é€€å‡º</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º!</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            System.out.println(getName() + <span class="hljs-string">&quot;---&quot;</span> + i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(getName() + <span class="hljs-string">&quot;---&quot;</span> + i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread1</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread1</span>();<br>        <span class="hljs-type">MyThread2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread2</span>();<br><br>        t1.setName(<span class="hljs-string">&quot;å¥³ç¥&quot;</span>);<br>        t2.setName(<span class="hljs-string">&quot;å¤‡èƒ&quot;</span>);<br><br>        <span class="hljs-comment">//æŠŠç¬¬äºŒä¸ªçº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹</span><br>        <span class="hljs-comment">//å½“æ™®é€šçº¿ç¨‹æ‰§è¡Œå®Œä¹‹å,é‚£ä¹ˆå®ˆæŠ¤çº¿ç¨‹ä¹Ÿæ²¡æœ‰ç»§ç»­è¿è¡Œä¸‹å»çš„å¿…è¦äº†.</span><br>        t2.setDaemon(<span class="hljs-literal">true</span>);<br><br>        t1.start();<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><img src="https://pic.imgdb.cn/item/6373a9ce16f2c2beb1d7a039.png" alt="image-20221115225842673" style="zoom:50%;" /></li></ul><p>å¯è§å®ˆæŠ¤çº¿ç¨‹è¦ç­‰æ™®é€šçº¿ç¨‹è¿è¡Œå®Œå†è¿è¡Œæˆ–è€…åœæ­¢ï¼</p>]]></content>
    
    
    <categories>
      
      <category>å¤šçº¿ç¨‹ğŸ¤·â€â™‚ï¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤šçº¿ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç™¾åº¦äº‘ä¸é™é€Ÿ</title>
    <link href="/Hexo/2022/11/02/Aria(%E7%99%BE%E5%BA%A6%E4%BA%91)%E4%B8%8D%E9%99%90%E9%80%9F/"/>
    <url>/Hexo/2022/11/02/Aria(%E7%99%BE%E5%BA%A6%E4%BA%91)%E4%B8%8D%E9%99%90%E9%80%9F/</url>
    
    <content type="html"><![CDATA[<p>ä¸‹è½½Aria:</p><p><img src="https://pic1.imgdb.cn/item/636260b016f2c2beb1fada28.png" alt="image-20221102201827059"></p><p><a href="http://aria2.baisheng999.com/">Aria2ä¸­æ–‡ç½‘ (baisheng999.com)</a></p><p>ä¸‹è½½æ•™ç¨‹:<a href="https://blog.csdn.net/qq_55058006/article/details/115570993">(18æ¡æ¶ˆæ¯) Aria2 å®‰è£…å’Œä½¿ç”¨å…¨æ•™ç¨‹_â… åªå°çŒ«çš„åšå®¢-CSDNåšå®¢_aria2</a></p><p>é¦–å…ˆæ‰¾åˆ°ä¸€ä¸ªæ”¯ç™¾åº¦äº‘è§£æé“¾æ¥çš„ç½‘ç«™:</p><p><a href="https://www.kelongwo.com/Resource_function/pan/baidu/?url=&pwd=">å…‹éš†çª (kelongwo.com)</a></p><p>ç„¶åè¾“å…¥é“¾æ¥å’Œå¯†ç </p><p><img src="https://pic1.imgdb.cn/item/636260d016f2c2beb1fb1427.png" alt="image-20221102201904390"></p><p><font color='red'>éœ€è¦æå‰æ‰“å¼€aria</font>ç„¶åå¼€å§‹ä¸‹è½½ï¼š</p><p>ç‚¹å‡»ariaæ‰¹é‡ä¸‹è½½</p><p><img src="https://pic1.imgdb.cn/item/6362610716f2c2beb1fb7ec6.png" alt="image-20221102202001238"></p><p>å¼€å§‹ä¸‹è½½æç¤º</p><p><img src="https://pic1.imgdb.cn/item/636261b016f2c2beb1fc74bf.png" alt="image-20221102202249334"></p><p>ä¸‹è½½é€Ÿåº¦å’Œæœ¬åœ°ç½‘é€Ÿæœ‰å…³ï¼š</p><p><img src="https://pic1.imgdb.cn/item/636261d616f2c2beb1fcac7e.png" alt="image-20221102202328004"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ-æ•°æ®ä¸€è‡´æ€§é—®é¢˜</title>
    <link href="/Hexo/2022/09/21/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <url>/Hexo/2022/09/21/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<h2 id="1-åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ-æ•°æ®ä¸€è‡´æ€§é—®é¢˜"><a href="#1-åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ-æ•°æ®ä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="1.åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ-æ•°æ®ä¸€è‡´æ€§é—®é¢˜"></a>1.åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ-æ•°æ®ä¸€è‡´æ€§é—®é¢˜</h2><p>ä¾‹å¦‚æˆ‘ä»¬åœ¨<font color='red'>æ‰£å‡åº“å­˜ä¸ä¿å­˜è®¢å•</font>æ˜¯åœ¨<font color='cornflowerblue'>ä¸¤ä¸ªæœåŠ¡</font>ä¸­å­˜åœ¨çš„ï¼Œå¦‚æœæ‰£å‡åº“å­˜åè®¢å•ä¿å­˜å¤±è´¥äº†æ˜¯ä¸ä¼šå› æ»šçš„ï¼Œè¿™æ ·å°±ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œè¿™å…¶å®å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å­¦ä¹  åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå°±æ˜¯è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</p><h3 id="1-1-æœ¬åœ°äº‹åŠ¡ä¸åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#1-1-æœ¬åœ°äº‹åŠ¡ä¸åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="1.1 æœ¬åœ°äº‹åŠ¡ä¸åˆ†å¸ƒå¼äº‹åŠ¡"></a>1.1 æœ¬åœ°äº‹åŠ¡ä¸åˆ†å¸ƒå¼äº‹åŠ¡</h3><h3 id="1-1-1-äº‹åŠ¡"><a href="#1-1-1-äº‹åŠ¡" class="headerlink" title="1.1.1 äº‹åŠ¡"></a>1.1.1 äº‹åŠ¡</h3><p>æ•°æ®åº“äº‹åŠ¡(ç®€ç§°ï¼šäº‹åŠ¡ï¼ŒTransaction)æ˜¯æŒ‡æ•°æ®åº“æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªé€»è¾‘å•ä½ï¼Œç”±ä¸€ä¸ªæœ‰é™çš„æ•°æ®åº“æ“ ä½œåºåˆ—æ„æˆã€‚ äº‹åŠ¡æ‹¥æœ‰ä»¥ä¸‹å››ä¸ªç‰¹æ€§ï¼Œä¹ æƒ¯ä¸Šè¢«ç§°ä¸º<font color='red'>ACIDç‰¹æ€§</font>ï¼š</p><p><font color='red'> åŸå­æ€§(Atomicity)</font>ï¼šäº‹åŠ¡ä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«æ‰§è¡Œï¼ŒåŒ…å«åœ¨å…¶ä¸­çš„å¯¹æ•°æ®åº“çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨è¢«æ‰§è¡Œï¼Œè¦ä¹ˆ éƒ½ä¸æ‰§è¡Œã€‚</p><p><font color='red'> ä¸€è‡´æ€§(Consistency)</font>ï¼šäº‹åŠ¡åº”ç¡®ä¿æ•°æ®åº“çš„çŠ¶æ€ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬å˜ä¸ºå¦ä¸€ä¸ªä¸€è‡´çŠ¶æ€ã€‚</p><p>ä¸€è‡´çŠ¶æ€æ˜¯ æŒ‡æ•°æ®åº“ä¸­çš„æ•°æ®åº”æ»¡è¶³å®Œæ•´æ€§çº¦æŸã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸€è‡´æ€§è¿˜æœ‰å¦å¤–ä¸€å±‚è¯­ä¹‰ï¼Œå°±æ˜¯äº‹åŠ¡çš„ä¸­é—´çŠ¶æ€ä¸èƒ½ è¢«è§‚å¯Ÿåˆ°(è¿™å±‚è¯­ä¹‰ä¹Ÿæœ‰è¯´åº”è¯¥å±äºåŸå­æ€§)ã€‚</p><p><font color='red'> éš”ç¦»æ€§(Isolation)</font>ï¼šå¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸åº”å½±å“å…¶ä»–äº‹åŠ¡çš„æ‰§è¡Œï¼Œå¦‚åŒåªæœ‰è¿™ä¸€ä¸ª æ“ä½œåœ¨è¢«æ•°æ®åº“æ‰€æ‰§è¡Œä¸€æ ·ã€‚</p><p><font color='red'> æŒä¹…æ€§(Durability)</font>ï¼šå·²è¢«æäº¤çš„äº‹åŠ¡å¯¹æ•°æ®åº“çš„ä¿®æ”¹åº”è¯¥æ°¸ä¹…ä¿å­˜åœ¨æ•°æ®åº“ä¸­ã€‚åœ¨äº‹åŠ¡ç»“æŸæ—¶ï¼Œæ­¤æ“ ä½œå°†ä¸å¯é€†è½¬ã€‚</p><h3 id="1-1-2-æœ¬åœ°äº‹åŠ¡"><a href="#1-1-2-æœ¬åœ°äº‹åŠ¡" class="headerlink" title="1.1.2 æœ¬åœ°äº‹åŠ¡"></a>1.1.2 æœ¬åœ°äº‹åŠ¡</h3><p> èµ·åˆï¼Œäº‹åŠ¡ä»…é™äºå¯¹å•ä¸€æ•°æ®åº“èµ„æºçš„è®¿é—®æ§åˆ¶,<font color='cornflowerblue'>æ¶æ„æœåŠ¡åŒ–ä»¥å</font>ï¼Œäº‹åŠ¡çš„æ¦‚å¿µå»¶ä¼¸åˆ°äº†æœåŠ¡ä¸­ã€‚å€˜è‹¥å°† ä¸€ä¸ªå•ä¸€çš„æœåŠ¡æ“ä½œä½œä¸ºä¸€ä¸ªäº‹åŠ¡ï¼Œé‚£ä¹ˆæ•´ä¸ªæœåŠ¡æ“ä½œåªèƒ½æ¶‰åŠä¸€ä¸ªå•ä¸€çš„æ•°æ®åº“èµ„æº,è¿™ç±»åŸºäºå•ä¸ªæœ åŠ¡å•ä¸€æ•°æ®åº“èµ„æºè®¿é—®çš„äº‹åŠ¡ï¼Œè¢«ç§°ä¸ºæœ¬åœ°äº‹åŠ¡(Local Transaction)ã€‚</p><p><img src="https://s2.loli.net/2022/07/29/mMicvdYLTKXBDAQ.png" alt="image-20220729211835429"></p><p>åˆ†å¸ƒå¼äº‹åŠ¡æŒ‡äº‹åŠ¡çš„å‚ä¸è€…ã€æ”¯æŒäº‹åŠ¡çš„æœåŠ¡å™¨ã€èµ„æºæœåŠ¡å™¨ä»¥åŠäº‹åŠ¡ç®¡ç†å™¨åˆ†åˆ«ä½äºä¸åŒçš„åˆ†å¸ƒå¼ç³» ç»Ÿçš„ä¸åŒèŠ‚ç‚¹ä¹‹ä¸Š,ä¸”å±äºä¸åŒçš„åº”ç”¨ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡éœ€è¦ä¿è¯è¿™äº›æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚æœ¬ è´¨ä¸Šæ¥è¯´ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡å°±æ˜¯ä¸ºäº†<font color='cornflowerblue'>ä¿è¯ä¸åŒæ•°æ®åº“çš„æ•°æ®ä¸€è‡´æ€§</font>ã€‚ æœ€æ—©çš„åˆ†å¸ƒå¼äº‹åŠ¡åº”ç”¨æ¶æ„å¾ˆç®€å•ï¼Œä¸æ¶‰åŠæœåŠ¡é—´çš„è®¿é—®è°ƒç”¨ï¼Œä»…ä»…æ˜¯æœåŠ¡å†…æ“ä½œæ¶‰åŠåˆ°å¯¹å¤šä¸ªæ•°æ®åº“ èµ„æºçš„è®¿é—®ã€‚</p><p><img src="https://s2.loli.net/2022/07/29/9lpC6gyFu8THmBL.png" alt="image-20220729212036752">å¦‚æœä¸€ä¸ª</p><p>â€‹    æœåŠ¡æ“ä½œéœ€è¦è°ƒç”¨å¦å¤–ä¸€ä¸ªæœåŠ¡ï¼Œè¿™æ—¶çš„äº‹åŠ¡å°±éœ€è¦è·¨è¶Šå¤šä¸ªæœåŠ¡ äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œèµ·å§‹äºæŸä¸ªæœåŠ¡çš„äº‹åŠ¡åœ¨è°ƒç”¨å¦å¤–ä¸€ä¸ªæœåŠ¡çš„æ—¶å€™ï¼Œéœ€è¦ä»¥æŸç§æœºåˆ¶æµè½¬åˆ°å¦å¤–ä¸€ ä¸ªæœåŠ¡ï¼Œä»è€Œä½¿è¢«è°ƒç”¨çš„æœåŠ¡è®¿é—®çš„èµ„æºä¹Ÿè‡ªåŠ¨åŠ å…¥åˆ°è¯¥äº‹åŠ¡å½“ä¸­æ¥ã€‚</p><p><img src="https://s2.loli.net/2022/07/29/xUhdZJutkjM65ic.png" alt="image-20220729212153762"></p><p>è¿™ä¸¤ç§åœºæ™¯(ä¸€ä¸ªæœåŠ¡å¯ä»¥è°ƒç”¨å¤šä¸ªæ•°æ®åº“èµ„æºï¼Œä¹Ÿå¯ä»¥è°ƒç”¨å…¶ä»–æœåŠ¡)ç»“åˆåœ¨ä¸€èµ·ï¼Œå¯¹æ­¤è¿› è¡Œå»¶ä¼¸ï¼Œæ•´ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„å‚ä¸è€…å°†ä¼šç»„æˆå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ ‘å½¢æ‹“æ‰‘ç»“æ„ã€‚åœ¨ä¸€ä¸ªè·¨æœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡ ä¸­ï¼Œäº‹åŠ¡çš„å‘èµ·è€…å’Œæäº¤å‡ç³»åŒä¸€ä¸ªï¼Œå®ƒå¯ä»¥æ˜¯æ•´ä¸ªè°ƒç”¨çš„å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯å®¢æˆ·ç«¯æœ€å…ˆè°ƒç”¨çš„é‚£ä¸ªæœ åŠ¡ã€‚</p><p><img src="https://s2.loli.net/2022/07/29/wWBqLOKmpvxbYus.png" alt="image-20220729212301137"></p><p>è¾ƒä¹‹åŸºäºå•ä¸€æ•°æ®åº“èµ„æºè®¿é—®çš„æœ¬åœ°äº‹åŠ¡ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡çš„åº”ç”¨æ¶æ„æ›´ä¸ºå¤æ‚ã€‚åœ¨ä¸åŒçš„åˆ†å¸ƒå¼åº”ç”¨æ¶æ„ ä¸‹ï¼Œå®ç°ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡è¦è€ƒè™‘çš„é—®é¢˜å¹¶ä¸å®Œå…¨ä¸€æ ·ï¼Œæ¯”å¦‚å¯¹å¤šèµ„æºçš„åè°ƒã€äº‹åŠ¡çš„è·¨æœåŠ¡ä¼ æ’­ç­‰ï¼Œå® ç°æœºåˆ¶ä¹Ÿæ˜¯å¤æ‚å¤šå˜ã€‚</p><h2 id="1-2-åˆ†å¸ƒå¼äº‹åŠ¡ç›¸å…³ç†è®º"><a href="#1-2-åˆ†å¸ƒå¼äº‹åŠ¡ç›¸å…³ç†è®º" class="headerlink" title="1.2 åˆ†å¸ƒå¼äº‹åŠ¡ç›¸å…³ç†è®º"></a>1.2 åˆ†å¸ƒå¼äº‹åŠ¡ç›¸å…³ç†è®º</h2><h3 id="1-2-1-CAPå®šç†"><a href="#1-2-1-CAPå®šç†" class="headerlink" title="1.2.1 CAPå®šç†"></a>1.2.1 CAPå®šç†</h3><p><img src="https://s2.loli.net/2022/07/29/aBRqAVIbmxij9zQ.png" alt="image-20220729212858388"></p><p>CAPå®šç†æ˜¯åœ¨ 1998å¹´åŠ å·å¤§å­¦çš„è®¡ç®—æœºç§‘å­¦å®¶ Eric Brewer ï¼ˆåŸƒé‡Œå…‹.å¸ƒé²å°”ï¼‰æå‡ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæœ‰ä¸‰ ä¸ªæŒ‡æ ‡ </p><p>Consistency ä¸€è‡´æ€§ </p><p>Availability å¯ç”¨æ€§ </p><p>Partition tolerance åˆ†åŒºå®¹é”™æ€§</p><p> å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå­—æ¯åˆ†åˆ«æ˜¯ Cã€Aã€Pã€‚Eric Brewer è¯´ï¼Œè¿™ä¸‰ä¸ªæŒ‡æ ‡ä¸å¯èƒ½åŒæ—¶åšåˆ°ã€‚è¿™ä¸ªç»“è®ºå°±å«åš CAP å®šç†ã€‚</p><h5 id="åˆ†åŒºå®¹é”™-Partition-tolerance"><a href="#åˆ†åŒºå®¹é”™-Partition-tolerance" class="headerlink" title="åˆ†åŒºå®¹é”™ Partition tolerance"></a>åˆ†åŒºå®¹é”™ Partition tolerance</h5><p><img src="/Hexo/../AppData/Roaming/Typora/typora-user-images/image-20220729213000971.png" alt="image-20220729213000971"></p><p>ä¸Šå›¾ä¸­ï¼ŒG1 å’Œ G2 æ˜¯ä¸¤å°è·¨åŒºçš„æœåŠ¡å™¨ã€‚G1 å‘ G2 å‘é€ä¸€æ¡æ¶ˆæ¯ï¼ŒG2 å¯èƒ½æ— æ³•æ”¶åˆ°ã€‚ç³»ç»Ÿè®¾è®¡çš„æ—¶ å€™ï¼Œå¿…é¡»è€ƒè™‘åˆ°è¿™ç§æƒ…å†µã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œåˆ†åŒºå®¹é”™æ— æ³•é¿å…ï¼Œå› æ­¤å¯ä»¥è®¤ä¸º CAP çš„ P æ€»æ˜¯æˆç«‹ã€‚CAP å®šç†å‘Šè¯‰æˆ‘ä»¬ï¼Œå‰©ä¸‹çš„ C å’Œ A æ— æ³•åŒæ—¶åšåˆ°ã€‚</p><h5 id="å¯ç”¨æ€§-Availability-Availability"><a href="#å¯ç”¨æ€§-Availability-Availability" class="headerlink" title="å¯ç”¨æ€§ Availability Availability"></a>å¯ç”¨æ€§ Availability Availability</h5><p>ä¸­æ–‡å«åšâ€å¯ç”¨æ€§â€ï¼Œæ„æ€æ˜¯åªè¦æ”¶åˆ°ç”¨æˆ·çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å°±å¿…é¡»ç»™å‡ºå›åº”ã€‚ ç”¨æˆ·å¯ä»¥é€‰æ‹©å‘ G1 æˆ– G2 å‘èµ·è¯»æ“ä½œã€‚ä¸ç®¡æ˜¯å“ªå°æœåŠ¡å™¨ï¼Œåªè¦æ”¶åˆ°è¯·æ±‚ï¼Œå°±å¿…é¡»å‘Šè¯‰ç”¨æˆ·ï¼Œåˆ°åº•æ˜¯ v0 è¿˜æ˜¯ v1ï¼Œå¦åˆ™å°±ä¸æ»¡è¶³å¯ç”¨æ€§ã€‚</p><p><img src="https://s2.loli.net/2022/07/29/ueqhaNc6yQMmLY8.png" alt="image-20220729213124317"></p><h5 id="ä¸€è‡´æ€§-Consistency-Consistency"><a href="#ä¸€è‡´æ€§-Consistency-Consistency" class="headerlink" title="ä¸€è‡´æ€§ Consistency Consistency"></a>ä¸€è‡´æ€§ Consistency Consistency</h5><p>ä¸­æ–‡å«åšâ€ä¸€è‡´æ€§â€ã€‚æ„æ€æ˜¯ï¼Œå†™æ“ä½œä¹‹åçš„è¯»æ“ä½œï¼Œå¿…é¡»è¿”å›è¯¥å€¼ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼ŒæŸæ¡è®°å½•æ˜¯ v0ï¼Œç”¨æˆ·å‘ G1 å‘èµ·ä¸€ä¸ªå†™æ“ä½œï¼Œå°†å…¶æ”¹ä¸º v1ã€‚</p><p><img src="https://s2.loli.net/2022/07/29/GKiMXVgxWbUyeBO.png" alt="image-20220729213214167"></p><p>é—®é¢˜æ˜¯ï¼Œç”¨æˆ·æœ‰å¯èƒ½å‘ G2 å‘èµ·è¯»æ“ä½œï¼Œç”±äº G2 çš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤è¿”å›çš„æ˜¯ v0ã€‚G1 å’Œ G2 è¯» æ“ä½œçš„ç»“æœä¸ä¸€è‡´ï¼Œè¿™å°±ä¸æ»¡è¶³ä¸€è‡´æ€§äº†ã€‚</p><p><img src="https://s2.loli.net/2022/07/29/7yWkdXSj6IBYhxR.png" alt="image-20220729213343383"></p><p><img src="https://s2.loli.net/2022/07/29/7yWkdXSj6IBYhxR.png"></p><p>ä¸ºäº†è®© G2 ä¹Ÿèƒ½å˜ä¸º v1ï¼Œå°±è¦åœ¨ G1 å†™æ“ä½œçš„æ—¶å€™ï¼Œè®© G1 å‘ G2 å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œè¦æ±‚ G2 ä¹Ÿæ”¹æˆ v1ã€‚</p><p><img src="https://s2.loli.net/2022/07/29/hme2WpcJvDuxHla.png" alt="image-20220729213504075"></p><h5 id="ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„çŸ›ç›¾"><a href="#ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„çŸ›ç›¾" class="headerlink" title="ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„çŸ›ç›¾"></a>ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„çŸ›ç›¾</h5><p>å¦‚æœä¿è¯ G2 çš„ä¸€è‡´æ€§ï¼Œé‚£ä¹ˆ G1 å¿…é¡»åœ¨å†™æ“ä½œæ—¶ï¼Œé”å®š G2 çš„è¯»æ“ä½œå’Œå†™æ“ä½œã€‚åªæœ‰æ•°æ®åŒæ­¥åï¼Œæ‰ èƒ½é‡æ–°å¼€æ”¾è¯»å†™ã€‚é”å®šæœŸé—´ï¼ŒG2 ä¸èƒ½è¯»å†™ï¼Œæ²¡æœ‰å¯ç”¨æ€§ã€‚ å¦‚æœä¿è¯ G2 çš„å¯ç”¨æ€§ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¸èƒ½é”å®š G2ï¼Œæ‰€ä»¥ä¸€è‡´æ€§ä¸æˆç«‹ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒG2 æ— æ³•åŒæ—¶åšåˆ°ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ã€‚ç³»ç»Ÿè®¾è®¡æ—¶åªèƒ½é€‰æ‹©ä¸€ä¸ªç›®æ ‡ã€‚å¦‚æœè¿½æ±‚ä¸€è‡´æ€§ï¼Œé‚£ä¹ˆ æ— æ³•ä¿è¯æ‰€æœ‰èŠ‚ç‚¹çš„å¯ç”¨æ€§ï¼›å¦‚æœè¿½æ±‚æ‰€æœ‰èŠ‚ç‚¹çš„å¯ç”¨æ€§ï¼Œé‚£å°±æ²¡æ³•åšåˆ°ä¸€è‡´æ€§ã€‚</p><h3 id="1-2-2-BASEç†è®º"><a href="#1-2-2-BASEç†è®º" class="headerlink" title="1.2.2 BASEç†è®º"></a>1.2.2 BASEç†è®º</h3><p>BASEï¼šå…¨ç§°ï¼šBasically Available(åŸºæœ¬å¯ç”¨)ï¼ŒSoft stateï¼ˆè½¯çŠ¶æ€ï¼‰,å’Œ Eventually consistentï¼ˆæœ€ç»ˆä¸€ è‡´æ€§ï¼‰ä¸‰ä¸ªçŸ­è¯­çš„ç¼©å†™ï¼Œæ¥è‡ª ebay çš„æ¶æ„å¸ˆæå‡ºã€‚BASE ç†è®ºæ˜¯å¯¹ CAP ä¸­ä¸€è‡´æ€§å’Œå¯ç”¨æ€§æƒè¡¡çš„ç»“ æœï¼Œå…¶æ¥æºäºå¯¹å¤§å‹äº’è”ç½‘åˆ†å¸ƒå¼å®è·µçš„æ€»ç»“ï¼Œæ˜¯åŸºäº CAP å®šç†é€æ­¥æ¼”åŒ–è€Œæ¥çš„ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><p> <font color='cornflowerblue'>æ—¢æ˜¯æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼ˆStrong consistencyï¼‰ï¼Œä½†æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥æ ¹æ®è‡ªèº«çš„ä¸šåŠ¡ç‰¹ç‚¹ï¼Œé‡‡ç”¨ é€‚å½“çš„æ–¹å¼æ¥ä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventual consistencyï¼‰ã€‚</font></p><h5 id="Basically-Available-åŸºæœ¬å¯ç”¨"><a href="#Basically-Available-åŸºæœ¬å¯ç”¨" class="headerlink" title="Basically Available(åŸºæœ¬å¯ç”¨)"></a>Basically Available(åŸºæœ¬å¯ç”¨)</h5><p>ä»€ä¹ˆæ˜¯åŸºæœ¬å¯ç”¨å‘¢ï¼Ÿå‡è®¾ç³»ç»Ÿï¼Œå‡ºç°äº†ä¸å¯é¢„çŸ¥çš„æ•…éšœï¼Œä½†è¿˜æ˜¯èƒ½ç”¨ï¼Œç›¸æ¯”è¾ƒæ­£å¸¸çš„ç³»ç»Ÿè€Œè¨€ï¼š </p><ol><li><p>å“åº”æ—¶é—´ä¸Šçš„æŸå¤±ï¼šæ­£å¸¸æƒ…å†µä¸‹çš„æœç´¢å¼•æ“ 0.5 ç§’å³è¿”å›ç»™ç”¨æˆ·ç»“æœï¼Œè€ŒåŸºæœ¬å¯ç”¨çš„æœç´¢å¼•æ“å¯ä»¥ åœ¨ 1 ç§’ä½œç”¨è¿”å›ç»“æœã€‚</p></li><li><p>åŠŸèƒ½ä¸Šçš„æŸå¤±ï¼šåœ¨ä¸€ä¸ªç”µå•†ç½‘ç«™ä¸Šï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯ä»¥é¡ºåˆ©å®Œæˆæ¯ä¸€ç¬”è®¢å•ï¼Œä½†æ˜¯åˆ°äº†å¤§ä¿ƒæœŸ é—´ï¼Œä¸ºäº†ä¿æŠ¤è´­ç‰©ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œéƒ¨åˆ†æ¶ˆè´¹è€…å¯èƒ½ä¼šè¢«å¼•å¯¼åˆ°ä¸€ä¸ª<font color='cornflowerblue'>é™çº§é¡µé¢</font>ã€‚</p></li></ol><h5 id="Soft-stateï¼ˆè½¯çŠ¶æ€ï¼‰"><a href="#Soft-stateï¼ˆè½¯çŠ¶æ€ï¼‰" class="headerlink" title="Soft stateï¼ˆè½¯çŠ¶æ€ï¼‰"></a>Soft stateï¼ˆè½¯çŠ¶æ€ï¼‰</h5><p>ä»€ä¹ˆæ˜¯è½¯çŠ¶æ€å‘¢ï¼Ÿç›¸å¯¹äº<font color='cornflowerblue'>åŸå­æ€§</font>è€Œè¨€ï¼Œè¦æ±‚å¤šä¸ªèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯ä¸€ç§ â€œç¡¬çŠ¶æ€â€ã€‚ è½¯çŠ¶æ€æŒ‡çš„æ˜¯ï¼šå…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œå¹¶è®¤ä¸ºè¯¥çŠ¶æ€ä¸å½±å“ç³»ç»Ÿçš„æ•´ä½“å¯ç”¨æ€§ï¼Œå³å…è®¸ç³»ç»Ÿ åœ¨å¤šä¸ªä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬å­˜åœ¨<font color='red'>æ•°æ®å»¶æ—¶</font>ã€‚</p><h5 id="Eventually-consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰"><a href="#Eventually-consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰" class="headerlink" title="Eventually consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰"></a>Eventually consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</h5><p>ç³»ç»Ÿèƒ½å¤Ÿä¿è¯åœ¨æ²¡æœ‰å…¶ä»–æ–°çš„æ›´æ–°æ“ä½œçš„æƒ…å†µä¸‹ï¼Œæ•°æ®æœ€ç»ˆä¸€å®šèƒ½å¤Ÿè¾¾åˆ°ä¸€è‡´çš„çŠ¶æ€ï¼Œå› æ­¤æ‰€æœ‰å®¢æˆ·ç«¯ å¯¹ç³»ç»Ÿçš„æ•°æ®è®¿é—®æœ€ç»ˆéƒ½èƒ½å¤Ÿè·å–åˆ°æœ€æ–°çš„å€¼ã€‚</p><h2 id="1-3-åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ"><a href="#1-3-åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.3 åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ"></a>1.3 åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ</h2><h3 id="1-3-1-åŸºäºXAåè®®çš„ä¸¤é˜¶æ®µæäº¤-2PC"><a href="#1-3-1-åŸºäºXAåè®®çš„ä¸¤é˜¶æ®µæäº¤-2PC" class="headerlink" title="1.3.1 åŸºäºXAåè®®çš„ä¸¤é˜¶æ®µæäº¤ 2PC"></a>1.3.1 åŸºäºXAåè®®çš„ä¸¤é˜¶æ®µæäº¤ 2PC</h3><p>é¦–å…ˆæˆ‘ä»¬æ¥ç®€è¦çœ‹ä¸‹åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†çš„XAè§„èŒƒ ï¼š</p><p><img src="https://s2.loli.net/2022/07/29/nWBMgTfZeOivlkQ.png" alt="image-20220729215148623"></p><p>å¯çŸ¥XAè§„èŒƒä¸­åˆ†å¸ƒå¼äº‹åŠ¡æœ‰<font color='red'>APï¼ŒRMï¼ŒTM</font>ç»„æˆï¼š å…¶ä¸­</p><p><font color='red'>åº”ç”¨ç¨‹åº</font>(Application Program ï¼Œç®€ç§°AP)ï¼šAPå®šä¹‰äº‹åŠ¡è¾¹ç•Œï¼ˆå®šä¹‰äº‹åŠ¡å¼€å§‹å’Œç»“æŸï¼‰å¹¶è®¿é—®äº‹åŠ¡ è¾¹ç•Œå†…çš„èµ„æºã€‚ </p><p><font color='red'>èµ„æºç®¡ç†å™¨</font>(Resource Managerï¼Œç®€ç§°RM)ï¼šRmç®¡ç†è®¡ç®—æœºå…±äº«çš„èµ„æºï¼Œè®¸å¤šè½¯ä»¶éƒ½å¯ä»¥å»è®¿é—®è¿™äº› èµ„æºï¼Œèµ„æºåŒ…å«æ¯”å¦‚æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€æ‰“å°æœºæœåŠ¡å™¨ç­‰ã€‚</p><p> <font color='red'>äº‹åŠ¡ç®¡ç†å™¨</font>(Transaction Manager ï¼Œç®€ç§°TM)ï¼šè´Ÿè´£ç®¡ç†å…¨å±€äº‹åŠ¡ï¼Œåˆ†é…äº‹åŠ¡å”¯ä¸€æ ‡è¯†ï¼Œç›‘æ§äº‹åŠ¡çš„æ‰§ è¡Œè¿›åº¦ï¼Œå¹¶è´Ÿè´£äº‹åŠ¡çš„æäº¤ã€å›æ»šã€å¤±è´¥æ¢å¤ç­‰ã€‚</p><h5 id="äºŒé˜¶æ®µåè®®"><a href="#äºŒé˜¶æ®µåè®®" class="headerlink" title="äºŒé˜¶æ®µåè®®:"></a>äºŒé˜¶æ®µåè®®:</h5><p><font color='cornflowerblue'>ç¬¬ä¸€é˜¶æ®µ</font>TMè¦æ±‚æ‰€æœ‰çš„RMå‡†å¤‡æäº¤å¯¹åº”çš„äº‹åŠ¡åˆ†æ”¯ï¼Œè¯¢é—®RMæ˜¯å¦æœ‰èƒ½åŠ›ä¿è¯æˆåŠŸçš„æäº¤äº‹åŠ¡åˆ†æ”¯ï¼Œ RMæ ¹æ®è‡ªå·±çš„æƒ…å†µï¼Œå¦‚æœåˆ¤æ–­è‡ªå·±è¿›è¡Œçš„å·¥ä½œå¯ä»¥è¢«æäº¤ï¼Œé‚£å°±å¯¹å·¥ä½œå†…å®¹è¿›è¡ŒæŒä¹…åŒ–ï¼Œå¹¶ç»™TMå›æ‰§ OKï¼›å¦è€…ç»™TMçš„å›æ‰§NOã€‚RMåœ¨å‘é€äº†å¦å®šç­”å¤å¹¶å›æ»šäº†å·²ç»å®Œæˆçš„å·¥ä½œåï¼Œå°±å¯ä»¥ä¸¢å¼ƒè¿™ä¸ªäº‹åŠ¡åˆ† æ”¯ä¿¡æ¯äº†ã€‚</p><p><font color='cornflowerblue'>ç¬¬äºŒé˜¶æ®µ</font>TMæ ¹æ®é˜¶æ®µ1å„ä¸ªRM prepareçš„ç»“æœï¼Œå†³å®šæ˜¯æäº¤è¿˜æ˜¯å›æ»šäº‹åŠ¡ã€‚å¦‚æœæ‰€æœ‰çš„RMéƒ½prepare æˆåŠŸï¼Œé‚£ä¹ˆTMé€šçŸ¥æ‰€æœ‰çš„RMè¿›è¡Œæäº¤ï¼›å¦‚æœæœ‰RM prepareå›æ‰§NOçš„è¯ï¼Œåˆ™TMé€šçŸ¥æ‰€æœ‰RMå›æ»šè‡ªå·± çš„äº‹åŠ¡åˆ†æ”¯</p><p>ä¹Ÿå°±æ˜¯TMä¸RMä¹‹é—´æ˜¯é€šè¿‡ä¸¤é˜¶æ®µæ äº¤åè®®è¿›è¡Œäº¤äº’çš„. </p><p><font color='cornflowerblue'>ä¼˜ç‚¹</font>ï¼š å°½é‡ä¿è¯äº†æ•°æ®çš„å¼ºä¸€è‡´ï¼Œé€‚åˆå¯¹æ•°æ®å¼ºä¸€è‡´è¦æ±‚å¾ˆé«˜çš„å…³é”®é¢†åŸŸã€‚ï¼ˆå…¶å®ä¹Ÿä¸èƒ½100%ä¿è¯å¼º ä¸€è‡´ï¼‰</p><p><font color='cornflowerblue'> ç¼ºç‚¹</font>ï¼š å®ç°å¤æ‚ï¼Œç‰ºç‰²äº†å¯ç”¨æ€§ï¼Œå¯¹æ€§èƒ½å½±å“è¾ƒå¤§ï¼Œä¸é€‚åˆé«˜å¹¶å‘é«˜æ€§èƒ½åœºæ™¯ã€‚</p><h3 id="1-3-2-TCCè¡¥å¿æœºåˆ¶"><a href="#1-3-2-TCCè¡¥å¿æœºåˆ¶" class="headerlink" title="1.3.2 TCCè¡¥å¿æœºåˆ¶"></a>1.3.2 TCCè¡¥å¿æœºåˆ¶</h3><p>TCC å…¶å®å°±æ˜¯é‡‡ç”¨çš„è¡¥å¿æœºåˆ¶ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šé’ˆå¯¹æ¯ä¸ªæ“ä½œï¼Œéƒ½è¦æ³¨å†Œä¸€ä¸ªä¸å…¶å¯¹åº”çš„ç¡®è®¤å’Œè¡¥å¿ ï¼ˆæ’¤é”€ï¼‰æ“ä½œã€‚å®ƒåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p><p>Try é˜¶æ®µä¸»è¦æ˜¯å¯¹ä¸šåŠ¡ç³»ç»Ÿåšæ£€æµ‹åŠèµ„æºé¢„ç•™ </p><p>Confirm é˜¶æ®µä¸»è¦æ˜¯å¯¹ä¸šåŠ¡ç³»ç»Ÿåšç¡®è®¤æäº¤ï¼ŒTryé˜¶æ®µæ‰§è¡ŒæˆåŠŸå¹¶å¼€å§‹æ‰§è¡Œ Confirmé˜¶æ®µæ—¶ï¼Œé»˜è®¤ Confirmé˜¶æ®µæ˜¯ä¸ä¼šå‡ºé”™çš„ã€‚å³ï¼šåªè¦TryæˆåŠŸï¼ŒConfirmä¸€å®šæˆåŠŸã€‚ </p><p>Cancel é˜¶æ®µä¸»è¦æ˜¯åœ¨ä¸šåŠ¡æ‰§è¡Œé”™è¯¯ï¼Œéœ€è¦å›æ»šçš„çŠ¶æ€ä¸‹æ‰§è¡Œçš„ä¸šåŠ¡å–æ¶ˆï¼Œé¢„ç•™èµ„æºé‡Šæ”¾ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åˆ†å¸ƒå¼äº‹åŠ¡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åˆ†å¸ƒå¼äº‹åŠ¡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ArrayListç†è§£</title>
    <link href="/Hexo/2022/09/12/ArrayList%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <url>/Hexo/2022/09/12/ArrayList%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h2 id="1-ä»€ä¹ˆæ˜¯ArrayList"><a href="#1-ä»€ä¹ˆæ˜¯ArrayList" class="headerlink" title="1.ä»€ä¹ˆæ˜¯ArrayList?"></a>1.ä»€ä¹ˆæ˜¯ArrayList?</h2><p>ArrayListé›†åˆæ˜¯Collectionå’ŒListæ¥å£çš„å®ç°ç±»ï¼Œåº•å±‚çš„æ•°æ®ç»“æ„å¯å˜çš„Objectæ•°ç»„ï¼Œå¯¹ArrayListçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯é€šè¿‡æ•°æ®æ¥å®ç°çš„ï¼Œæ•°æ®ç»“æ„ç‰¹ç‚¹æ˜¯å¢åˆ æ…¢ã€æŸ¥è¯¢å¿«ã€‚</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-comment">// é»˜è®¤çš„å®¹é‡å¤§å°ï¼ˆå¸¸é‡ï¼‰</span><br><br> <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> DEFAULT_CAPACITY = <span class="hljs-number">10</span>; <br><br><br><br><span class="hljs-comment">// å®šä¹‰çš„ç©ºæ•°ç»„ï¼ˆfinalä¿®é¥°ï¼Œå¤§å°å›ºå®šä¸º0ï¼‰ </span><br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-built_in">Object</span>[] EMPTY_ELEMENTDATA = &#123;&#125;;<br><br><br><br> <span class="hljs-comment">// å®šä¹‰çš„é»˜è®¤ç©ºå®¹é‡çš„æ•°ç»„ï¼ˆfinalä¿®é¥°ï¼Œå¤§å°å›ºå®šä¸º0ï¼‰</span><br><br> <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-built_in">Object</span>[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;; <br><br><br><br><span class="hljs-comment">// å®šä¹‰çš„ä¸å¯è¢«åºåˆ—åŒ–çš„æ•°ç»„ï¼Œå®é™…å­˜å‚¨å…ƒç´ çš„æ•°ç»„</span><br><br> <span class="hljs-keyword">transient</span> <span class="hljs-built_in">Object</span>[] elementData;  <br><br><br><br><span class="hljs-comment">// æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•° </span><br><br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-built_in">size</span>;<br></code></pre></td></tr></table></figure><h2 id="2-ArrayListçº¿ç¨‹å®‰å…¨å—ï¼Ÿ"><a href="#2-ArrayListçº¿ç¨‹å®‰å…¨å—ï¼Ÿ" class="headerlink" title="2.ArrayListçº¿ç¨‹å®‰å…¨å—ï¼Ÿ"></a>2.ArrayListçº¿ç¨‹å®‰å…¨å—ï¼Ÿ</h2><p><a href="https://zhuanlan.zhihu.com/p/139541748">Javaé«˜é¢‘é¢è¯•é¢˜ï¼šè°ˆè°ˆä½ å¯¹ArrayListçš„ç†è§£ï¼Ÿ - çŸ¥ä¹ (zhihu.com)</a></p><p>ArrayListæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p><p>å½“å¼€å¯å¤šä¸ªçº¿ç¨‹æ“ä½œListé›†åˆï¼Œå‘ArrayListä¸­å¢åŠ å…ƒç´ ï¼ŒåŒæ—¶å»é™¤å…ƒç´ ã€‚æœ€åè¾“å‡ºlistä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œä¼šå‡ºç°å‡ ç§æƒ…å†µï¼š</p><p>â‘ æœ‰äº›å…ƒç´ è¾“å‡ºä¸ºNullï¼›â‘¡æ•°ç»„ä¸‹æ ‡è¶Šç•Œå¼‚å¸¸ã€‚</p><p>æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><p>ç¬¬ä¸€ç§æ˜¯é€‰ç”¨çº¿ç¨‹å®‰å…¨çš„æ•°ç»„å®¹å™¨æ˜¯Vectorï¼Œå®ƒå°†æ‰€æœ‰çš„æ–¹æ³•éƒ½åŠ ä¸Šäº†<font color='red'>synchronized</font>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Vector&lt;Object&gt; vector= <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>&lt;Object&gt;(); <br></code></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ˜¯ç”¨Collections.synchronizedListå°†ArrayListåŒ…è£…æˆçº¿ç¨‹å®‰å…¨çš„æ•°ç»„å®¹å™¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list = Collections.synchronizedList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆArrayListçº¿ç¨‹ä¸å®‰å…¨ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨å®ƒï¼Ÿ</p><blockquote><p>å› ä¸ºå¤§å¤šæ•°çš„åœºæ™¯ä¸­ï¼ŒæŸ¥è¯¢æ“ä½œä½¿ç”¨é¢‘ç‡é«˜ï¼Œå¢åˆ æ“ä½œçš„ä½¿ç”¨é¢‘ç‡ä½ã€‚å¦‚æœæ¶‰åŠé¢‘ç¹çš„å¢åˆ ï¼Œå¯ä»¥ä½¿ç”¨LinkedListï¼Œå®é™…å¼€å‘è¿‡ç¨‹ä¸­è¿˜æ˜¯ArrayListä½¿ç”¨æœ€å¤šçš„ã€‚ ä¸å­˜åœ¨ä¸€ä¸ªé›†åˆæ—¢æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œåˆå¢åˆ æ•ˆç‡é«˜ï¼Œè¿˜çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºæ•°æ®ç»“æ„çš„ç‰¹æ€§å°±æ˜¯ä¼˜åŠ£å…±å­˜çš„ï¼Œæƒ³æ‰¾ä¸ªå¹³è¡¡ç‚¹å¾ˆéš¾ï¼Œç‰ºç‰²äº†æ€§èƒ½ï¼Œé‚£å°±å®‰å…¨ï¼Œç‰ºç‰²äº†å®‰å…¨é‚£å°±å¿«é€Ÿã€‚</p></blockquote><h2 id="3-ArrayListå®ç°"><a href="#3-ArrayListå®ç°" class="headerlink" title="3.ArrayListå®ç°"></a>3.ArrayListå®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">DEFAULT_CAPACITY</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;<br><br><span class="hljs-keyword">transient</span> Object[] elementData;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_ARRAY_SIZE</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE - <span class="hljs-number">8</span>;<br></code></pre></td></tr></table></figure><ul><li><code>DEFAULT_CAPACITY</code>ï¼šé»˜è®¤å®¹é‡ä¸º 10ã€‚</li><li><code>EMPTY_ELEMENTDATA</code>ï¼šé€šè¿‡æ„é€ æ–¹æ³•æŒ‡å®šçš„å®¹é‡ä¸º 0 æ—¶ï¼Œä½¿ç”¨è¯¥ç©ºæ•°ç»„ã€‚</li><li><code>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</code>ï¼šè°ƒç”¨æ— å‚æ„é€ æ–¹æ³•æ—¶ï¼Œä½¿ç”¨è¯¥æ•°ç»„ã€‚</li><li><code>elementData</code>ï¼šä¿å­˜æ·»åŠ çš„å…ƒç´ ï¼Œåœ¨ ArrayList è¢«åºåˆ—åŒ–æ—¶ï¼Œè¯¥å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚</li><li><code>size</code>ï¼šArrayList ä¿å­˜çš„å…ƒç´ ä¸ªæ•°ã€‚</li><li><code>MAX_ARRAY_SIZE</code>ï¼šArrayList èƒ½å¤Ÿå®¹çº³çš„æœ€å¤§é•¿åº¦ï¼Œ231 - 1 - 8ã€‚</li><li></li></ul><p>1.æ•°ç»„ç¼“å†²åŒºï¼Œæ•°ç»„åˆ—è¡¨çš„å…ƒç´ å­˜å‚¨åœ¨å…¶ä¸­ã€‚æ•°ç»„åˆ—è¡¨çš„å®¹é‡æ˜¯è¿™ä¸ªæ•°ç»„ç¼“å†²åŒºçš„é•¿åº¦ã€‚ä»»ä½•å¸¦æœ‰elementData &#x3D;&#x3D; DEFAULTCAPACITY_EMPTY_ELEMENTDATAçš„ç©ºæ•°ç»„åˆ—è¡¨åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶å°†è¢«æ‰©å±•ä¸ºDEFAULT_CAPACITYã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">transient</span> Object[] elementData;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/** * Constructs an empty list with an initial capacity of ten. * æ„é€ ä¸€ä¸ªå®¹é‡ä¸º 10 çš„ç©ºåˆ—è¡¨ï¼Œå½“ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ æ—¶ï¼ŒelementData ä¼šæ‰©å®¹åˆ° 10ã€‚ */</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayList</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒºåˆ†java7ï¼Œåœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™åº•å±‚å¹¶ä¸ä¼šç«‹åˆ»åˆ›å»ºï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨addæ–¹æ³•çš„æ—¶å€™æ‰ä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º10çš„æ•°ç»„</p><h2 id="4-å…ƒç´ æ“ä½œçš„åŸºæœ¬æ–¹æ³•"><a href="#4-å…ƒç´ æ“ä½œçš„åŸºæœ¬æ–¹æ³•" class="headerlink" title="4.å…ƒç´ æ“ä½œçš„åŸºæœ¬æ–¹æ³•"></a>4.å…ƒç´ æ“ä½œçš„åŸºæœ¬æ–¹æ³•</h2><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th><th>æ—¶é—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td>E get(int index)</td><td>è¿”å›æŒ‡å®šç´¢å¼•çš„å…ƒç´ </td><td>O(1)</td></tr><tr><td>E set(int index, E element)</td><td>æ›¿æ¢æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼Œè¿”å›æ—§å…ƒç´ </td><td>O(1)</td></tr><tr><td>boolean add(E e)</td><td>å‘åˆ—è¡¨çš„æœ«å°¾æ·»åŠ å…ƒç´ </td><td>O(1)</td></tr><tr><td>void add(int index, E element)</td><td>åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </td><td>O(N)</td></tr><tr><td>E remove(int index)</td><td>åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œè¿”å›æ—§å…ƒç´ </td><td>O(N)</td></tr><tr><td>boolean remove(Object o)</td><td>åˆ é™¤åˆ—è¡¨ä¸­ä¸ç»™å®šå¯¹è±¡ç›¸åŒçš„å…ƒç´ </td><td>O(N)</td></tr><tr><td>boolean contains(Object o)</td><td>åˆ¤æ–­åˆ—è¡¨ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ </td><td>O(N)</td></tr><tr><td>int indexOf(Object o)</td><td>è¿”å›æŒ‡å®šå…ƒç´ åœ¨åˆ—è¡¨ä¸­çš„ç´¢å¼•</td><td>O(N)</td></tr></tbody></table><p>å…¶ä¸­ï¼Œcontains æ–¹æ³•ç›´æ¥ è¿”å› indexOf(o) &gt;&#x3D; 0 ã€‚</p><h2 id="5-è¿­ä»£å™¨æ–¹æ³•"><a href="#5-è¿­ä»£å™¨æ–¹æ³•" class="headerlink" title="5.è¿­ä»£å™¨æ–¹æ³•"></a>5.è¿­ä»£å™¨æ–¹æ³•</h2><h3 id="iterator"><a href="#iterator" class="headerlink" title="iterator()"></a>iterator()</h3><p>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¦‚æœåœ¨è¿­ä»£å™¨éå†è¿‡ç¨‹ä¸­è°ƒç”¨äº†åˆ—è¡¨çš„ addï¼Œremove ç­‰æ–¹æ³•ï¼Œä¼šæŠ›å‡º <code>ConcurrentModificationException</code> ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Itr</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="listIterator"><a href="#listIterator" class="headerlink" title="listIterator()"></a>listIterator()</h3><p><font color='red'>ListIteratoræ˜¯Iteratorçš„å­æ¥å£ã€‚</font></p><p>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨å¯ä»¥å‘å‰åä¸¤ä¸ªæ–¹å‘éå†å…ƒç´ ã€‚ListIter ç»§æ‰¿äº Iter ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListIterator&lt;E&gt; <span class="hljs-title function_">listIterator</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListItr</span>(<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="listIterator-int-index"><a href="#listIterator-int-index" class="headerlink" title="listIterator(int index)"></a>listIterator(int index)</h3><p>è¿”å›ä¸€ä¸ªä»æŒ‡å®šä½ç½®å¼€å§‹çš„è¿­ä»£å™¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListIterator&lt;E&gt; <span class="hljs-title function_">listIterator</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span> || index &gt; size)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexOutOfBoundsException</span>(<span class="hljs-string">&quot;Index: &quot;</span>+index);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListItr</span>(index);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-æ‰©å±•çš„æ–¹æ³•"><a href="#6-æ‰©å±•çš„æ–¹æ³•" class="headerlink" title="6.æ‰©å±•çš„æ–¹æ³•"></a>6.æ‰©å±•çš„æ–¹æ³•</h2><p>å¢åŠ å®¹é‡ï¼Œä»¥ç¡®ä¿å®ƒè‡³å°‘å¯ä»¥å®¹çº³ç”±æœ€å°å®¹é‡å‚æ•°æŒ‡å®šçš„å…ƒç´ æ•°é‡ã€‚@param minCapacityæœŸæœ›çš„æœ€å°å®¹é‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">grow</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;<br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldCapacity</span> <span class="hljs-operator">=</span> elementData.length;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">newCapacity</span> <span class="hljs-operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (newCapacity - minCapacity &lt; <span class="hljs-number">0</span>)<br>        newCapacity = minCapacity;<br>    <span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="hljs-number">0</span>)<br>        newCapacity = hugeCapacity(minCapacity);<br>    <span class="hljs-comment">// minCapacity is usually close to size, so this is a win:</span><br>    elementData = Arrays.copyOf(elementData, newCapacity);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hugeCapacity</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;<br>    <span class="hljs-keyword">if</span> (minCapacity &lt; <span class="hljs-number">0</span>) <span class="hljs-comment">// æº¢å‡º</span><br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OutOfMemoryError</span>();<br>    <span class="hljs-keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?<br>        Integer.MAX_VALUE :<br>        MAX_ARRAY_SIZE;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰©å®¹å°±æ˜¯æ•°ç»„æ‹·è´,å°†æ—§æ•°ç»„ä¸­çš„æ•°æ®æ‹·è´åˆ°æ–°æ•°ç»„é‡Œ,è€Œæ–°æ•°ç»„çš„é•¿åº¦ä¸ºåŸæ¥é•¿åº¦çš„1.5å€ã€‚ ArrayListæ”¯æŒç¼©å®¹,ä½†ä¸ä¼šè‡ªåŠ¨ç¼©å®¹,å³ä¾¿æ˜¯ArrayListä¸­åªå‰©ä¸‹å°‘é‡æ•°æ®æ—¶ä¹Ÿä¸ä¼šä¸»åŠ¨ç¼©å®¹ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›ç¼©å‡ArrayListçš„å®¹é‡,åˆ™éœ€è¦è‡ªå·±è°ƒç”¨å®ƒçš„trimToSize()æ–¹æ³•,å±Šæ—¶æ•°ç»„å°†æŒ‰ç…§å…ƒç´ çš„å®é™…ä¸ªæ•°è¿›è¡Œç¼©å‡ã€‚</p><h2 id="7-ArrayListé¢‘ç¹æ‰©å®¹å¯¼è‡´æ·»åŠ æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ"><a href="#7-ArrayListé¢‘ç¹æ‰©å®¹å¯¼è‡´æ·»åŠ æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ" class="headerlink" title="7.ArrayListé¢‘ç¹æ‰©å®¹å¯¼è‡´æ·»åŠ æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ"></a>7.ArrayListé¢‘ç¹æ‰©å®¹å¯¼è‡´æ·»åŠ æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ</h2><p>ä½¿ç”¨ArrayListæ—¶ï¼Œå¯ä»¥ new ArrayList(å¤§å°)æ„é€ æ–¹æ³•æ¥æŒ‡å®šé›†åˆçš„å¤§å°ï¼Œä»¥å‡å°‘æ‰©å®¹çš„æ¬¡æ•°ï¼Œæé«˜å†™å…¥æ•ˆç‡ã€‚</p><h2 id="8-ArrayListç”¨æ¥åšé˜Ÿåˆ—åˆé€‚ä¹ˆï¼Ÿ"><a href="#8-ArrayListç”¨æ¥åšé˜Ÿåˆ—åˆé€‚ä¹ˆï¼Ÿ" class="headerlink" title="8.ArrayListç”¨æ¥åšé˜Ÿåˆ—åˆé€‚ä¹ˆï¼Ÿ"></a>8.ArrayListç”¨æ¥åšé˜Ÿåˆ—åˆé€‚ä¹ˆï¼Ÿ</h2><p>é˜Ÿåˆ—ä¸€èˆ¬æ˜¯FIFOï¼ˆå…ˆå…¥å…ˆå‡ºï¼‰çš„ï¼Œå¦‚æœç”¨ArrayListåšé˜Ÿåˆ—ï¼Œéœ€è¦åœ¨æ•°ç»„å°¾éƒ¨è¿½åŠ æ•°æ®ï¼Œæ•°ç»„å¤´éƒ¨åˆ é™¤æ•°ç»„ï¼Œåè¿‡æ¥ä¹Ÿå¯ä»¥ã€‚ä½†æ˜¯æ— è®ºå¦‚ä½•æ€»ä¼šæœ‰ä¸€ä¸ªæ“ä½œä¼šæ¶‰åŠåˆ°æ•°ç»„çš„æ•°æ®æ¬è¿ï¼Œè¿™ä¸ªæ˜¯æ¯”è¾ƒè€—è´¹æ€§èƒ½çš„ã€‚</p><p>è™½ç„¶ArrayListä¸é€‚åˆåšé˜Ÿåˆ—ï¼Œä½†æ˜¯æ•°ç»„æ˜¯éå¸¸åˆé€‚çš„ã€‚æ¯”å¦‚ArrayBlockingQueueå†…éƒ¨å®ç°å°±æ˜¯ä¸€ä¸ªç¯å½¢é˜Ÿåˆ—ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®šé•¿é˜Ÿåˆ—ï¼Œå†…éƒ¨æ˜¯ç”¨ä¸€ä¸ªå®šé•¿æ•°ç»„æ¥å®ç°çš„ã€‚å¦å¤–è‘—åçš„Disruptorå¼€æºLibraryä¹Ÿæ˜¯ç”¨ç¯å½¢æ•°ç»„æ¥å®ç°çš„è¶…é«˜æ€§èƒ½é˜Ÿåˆ—ï¼Œå…·ä½“åŸç†ä¸åšè§£é‡Šï¼Œæ¯”è¾ƒå¤æ‚ã€‚ç®€å•ç‚¹è¯´å°±æ˜¯ä½¿ç”¨ä¸¤ä¸ªåç§»é‡æ¥æ ‡è®°æ•°ç»„çš„è¯»ä½ç½®å’Œå†™ä½ç½®ï¼Œå¦‚æœè¶…è¿‡é•¿åº¦å°±æŠ˜å›åˆ°æ•°ç»„å¼€å¤´ï¼Œå‰ææ˜¯å®ƒä»¬æ˜¯å®šé•¿æ•°ç»„ã€‚</p><h2 id="9-ArrayListå’ŒLinkedListçš„åŒºåˆ«ï¼Ÿ"><a href="#9-ArrayListå’ŒLinkedListçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="9.ArrayListå’ŒLinkedListçš„åŒºåˆ«ï¼Ÿ"></a>9.ArrayListå’ŒLinkedListçš„åŒºåˆ«ï¼Ÿ</h2><p><em><strong>ArrayListï¼š</strong></em></p><ul><li>åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„</li><li>å¯¹äºéšæœºè®¿é—®çš„getå’Œsetï¼ŒArrayListè¦ä¼˜äºLinkedList</li><li>å¯¹äºéšæœºæ“ä½œçš„addå’Œremoveï¼ŒArrayListä¸ä¸€å®šæ¯”LinkedListæ…¢ (ArrayListåº•å±‚ç”±äºæ˜¯åŠ¨æ€æ•°ç»„ï¼Œå› æ­¤å¹¶ä¸æ˜¯æ¯æ¬¡addå’Œremoveçš„æ—¶å€™éƒ½éœ€è¦åˆ›å»ºæ–°æ•°ç»„)</li></ul><p>*<strong>LinkedListï¼š*</strong></p><ul><li>åŸºäºåŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼ˆåŒå‘é“¾è¡¨éå†æ•ˆç‡å¯èƒ½ä¼˜äºå•å‘é“¾è¡¨ï¼Œå› ä¸ºåŒå‘é“¾è¡¨å¯ä»¥åœ¨æŸ¥æ‰¾å…ƒç´ æ—¶ï¼Œåˆ¤æ–­é è¿‘å¤´è¿˜æ˜¯é è¿‘å°¾ï¼Œå¦‚æœé è¿‘å¤´ä»å¤´å¼€å§‹æ‰¾ï¼Œå¦‚æœé è¿‘å°¾ä»å°¾å¼€å§‹æ‰¾ï¼‰</li><li>å¯¹äºé¡ºåºæ“ä½œï¼ŒLinkedListä¸ä¸€å®šæ¯”ArrayListæ…¢</li><li>å¯¹äºéšæœºæ“ä½œï¼ŒLinkedListæ•ˆç‡æ˜æ˜¾è¾ƒä½</li></ul>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Stringå¸¸ç”¨æ–¹æ³•</title>
    <link href="/Hexo/2022/09/01/String%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/Hexo/2022/09/01/String%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€Stringå¸¸ç”¨æ–¹æ³•"><a href="#ä¸€ã€Stringå¸¸ç”¨æ–¹æ³•" class="headerlink" title="ä¸€ã€Stringå¸¸ç”¨æ–¹æ³•"></a>ä¸€ã€Stringå¸¸ç”¨æ–¹æ³•</h1><h2 id="1-Stingå¯¹è±¡çš„åˆå§‹åŒ–"><a href="#1-Stingå¯¹è±¡çš„åˆå§‹åŒ–" class="headerlink" title="1.Stingå¯¹è±¡çš„åˆå§‹åŒ–"></a>1.Stingå¯¹è±¡çš„åˆå§‹åŒ–</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">String S=<span class="hljs-string">&quot;1&quot;</span>ï¼›<br><br>S=<span class="hljs-string">&quot;2&quot;</span>;<br></code></pre></td></tr></table></figure><p>é¢å‘å¯¹è±¡çš„åˆå§‹åŒ–æ ¼å¼:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">S</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;1&quot;</span>);<br><br>S=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;å­—ç¬¦ä¸²&quot;</span>);<br></code></pre></td></tr></table></figure><h2 id="2-å­—ç¬¦ä¸²çš„å¸¸ç”¨æ“ä½œ"><a href="#2-å­—ç¬¦ä¸²çš„å¸¸ç”¨æ“ä½œ" class="headerlink" title="2.å­—ç¬¦ä¸²çš„å¸¸ç”¨æ“ä½œ"></a>2.å­—ç¬¦ä¸²çš„å¸¸ç”¨æ“ä½œ</h2><h3 id="1-chatAt-æ–¹æ³•"><a href="#1-chatAt-æ–¹æ³•" class="headerlink" title="1)chatAt æ–¹æ³•"></a>1)chatAt æ–¹æ³•</h3><p>charAt æ–¹æ³•çš„ä½œç”¨æ˜¯æŒ‰ç…§æ„å¼•å€¼(è§„å®šå­—ç¬¦ç”³ä¸­ç¬¬ä¸€ä¸ªå­—å¾—çš„ç´¢å¼•å€¼æ˜¯0.ç¬¬äºŒä¸ªå­—çš„ç´¢å¼•å€¼æ˜¯1ã€ä¾æ¬¡ç±»æ¨)è·å¾—å­—ç¬¦äº‹ä¸­çš„æŒ‡å®šå­—é—´ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">String S=<span class="hljs-string">&quot;abc&quot;</span>ï¼›<br><br><span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> S.<span class="hljs-type">char</span>(<span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><p>åˆ™å˜é‡cçš„å€¼æ˜¯b</p><h3 id="2-cotmpareTo-æ–¹æ³•"><a href="#2-cotmpareTo-æ–¹æ³•" class="headerlink" title="2)cotmpareTo æ–¹æ³•"></a>2)cotmpareTo æ–¹æ³•</h3><p>compareToæ–¹æ³•çš„ä½œç”¨æ˜¯æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ç”³çš„å¤§å°ï¼ŒåŸç†æ˜¯ä¾æ¬¡æ¯”è¾ƒæ¯ä¸ªå­—ç¬¦çš„å­—è¡Œã€‚ç ç¬¬ä¸€æœä¸€å­—ç¬¦çš„ç¬¦ç¼–ç å¤§äºç¬¬äºŒä¸ªå­—ç¬¦ç”µçš„å­—ç¬¦ç¼–ç ã€åˆ™è¿”å›å¤§äº0çš„å€¼;å¦‚æœå°äº,åˆ™è¿”å›å°äº0çš„å€¼;å¦‚æœç›¸ç­‰ã€‚åˆ™æ¯”è¾ƒåç»­çš„å­—ç¬¦ã€‚å¦‚æœä¸¤å­—ç¬¦ç¼–ç å®Œå…¨ç›¸åŒï¼Œè¿”å›0ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">String s=<span class="hljs-string">&quot;abc&quot;</span>;<br><br>String s1=<span class="hljs-string">&quot;abd&quot;</span>;<br><br><span class="hljs-type">int</span> value=s.compareTo(s1);<br></code></pre></td></tr></table></figure><h3 id="3-coneat-æ–¹æ³•"><a href="#3-coneat-æ–¹æ³•" class="headerlink" title="3)coneat æ–¹æ³•"></a>3)coneat æ–¹æ³•</h3><p>concatæ–¹æ³•çš„ä½œç”¨æ˜¯è¿æ¥å­—ç¬¦ç”³,å¾—åˆ°ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">String s=<span class="hljs-string">&quot;abe&quot;</span> ;<br><br>String s1=<span class="hljs-string">&quot;def&quot;</span>;<br><br>String s2=s.concat(s1):<br></code></pre></td></tr></table></figure><p>åˆ™è¿æ¥ä»¥åç”Ÿæˆçš„æ–°å­—ç¬¦ä¸²s2çš„å€¼æ˜¯â€abcdefâ€ï¼Œè€Œå­—ç¬¦ä¸²så’Œslçš„å€¼ä¸å˜ã€‚åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œæœ‰ä¸€ç§ç®€å•çš„è¯­æ³•å½¢å¼ï¼Œå³ä½¿ç”¨â€œ+â€è¿æ¥å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">String s-<span class="hljs-string">&quot;abc&quot;</span>+<span class="hljs-string">&quot;1234&quot;</span>;<br></code></pre></td></tr></table></figure><p>åˆ™å­—ç¬¦ä¸²sçš„å€¼æ˜¯â€abc1234â€ã€‚è¿™æ ·ä¹¦å†™ï¼Œæ›´åŠ ç®€å•ã€ç›´è§‚ã€‚<br>è¿ç®—ç¬¦â€œ+â€ï¼Œä¸ä»…å¯ä»¥è¿æ¥å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥è¿æ¥å…¶ä»–æ•°æ®ç±»å‹ã€‚â€œ+â€åŒ¹é…çš„é¡ºåºæ˜¯ä»å·¦å‘å³ï¼Œå¦‚æœä¸¤è¾¹è¿æ¥çš„å†…å®¹éƒ½æ˜¯åŸºæœ¬æ•°å­—ç±»å‹ï¼Œåˆ™æŒ‰ç…§åŠ æ³•è¿ç®—;å¦‚æœå‚ä¸è¿æ¥çš„å†…å®¹æœ‰ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œæ‰æŒ‰ç…§å­—ç¬¦äº‹è¿›è¡Œè¿æ¥ã€‚</p><p>ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>String s=<span class="hljs-string">&quot;123*+a+5;</span><br></code></pre></td></tr></table></figure><p>åˆ™è¿æ¥ä»¥åï¼Œå­—ç¬¦ä¸²sçš„å€¼æ˜¯â€œ123105â€ï¼Œè®¡ç®—çš„è¿‡ç¨‹ä¸º:é¦–å…ˆè¿æ¥å­—ç¬¦ä¸²â€123å’Œå˜é‡:çš„å€¼ï¼Œç”Ÿæˆå­—ç¬¦ä¸²â€12310â€;ç„¶åï¼Œå°†è¯¥å­—ç¬¦ä¸²å’Œæ•°å­—5è¿æ¥ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚</p><h3 id="4-ends-With-æ–¹æ³•"><a href="#4-ends-With-æ–¹æ³•" class="headerlink" title="4)ends With æ–¹æ³•"></a>4)ends With æ–¹æ³•</h3><p>endsWith æ–¹æ³•çš„ä½œç”¨æ˜¯åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ç»“å°¾ï¼Œå¦‚æœä»¥å¯¹åº”çš„å­—ç¬¦ä¸²ç»“å°¾ï¼Œè¿”å›trueã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">String s=<span class="hljs-string">&quot;student.doc&quot;</span>;<br><span class="hljs-type">boolean</span> b=s.endswith(<span class="hljs-string">&quot;doc&quot;</span>):<br></code></pre></td></tr></table></figure><p>åˆ™å˜é‡ bçš„å€¼æ˜¯ true</p><h3 id="5-equnls-æ–¹æ³•"><a href="#5-equnls-æ–¹æ³•" class="headerlink" title="5)equnls æ–¹æ³•"></a>5)equnls æ–¹æ³•</h3><p>equalsæ–¹æ³•çš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸åŒã€‚å¦‚æœç›¸åŒï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-type">string</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span><span class="hljs-string">&quot;abc&quot;</span>;<br>string s1=<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;abc&quot;</span>);<br><br> <span class="hljs-type">boolean</span> b=s.equals(s1);<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨â€œ&#x3D;&#x3D;â€æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„åœ°å€æ˜¯å¦ç›¸åŒã€‚ä¾‹å¦‚ï¼Œä¸Šè¿°ä»£ç ä¸­ï¼Œå¦‚æœåˆ¤æ–­:<br>boolean b&#x3D;(s&#x3D;&#x3D;1);<br>åˆ™å˜é‡bçš„å€¼æ˜¯falseã€‚å› ä¸ºså¯¹è±¡å¯¹åº”çš„æ˜¯â€abcâ€çš„åœ°å€ï¼Œè€Œslä½¿ç”¨newå…³é”®å­—ç”³è¯·æ–°çš„å†…å­˜,æ‰€ä»¥å†…å­˜åœ°å€å’Œsçš„â€abcâ€çš„åœ°å€ä¸åŒ,æ‰€ä»¥å¾—åˆ°çš„å€¼æ˜¯falseã€‚<br>åœ¨Stringç±»ä¸­æœ‰ä¸€ä¸ªç±»ä¼¼çš„æ–¹æ³•equalslgnoreCase,å…¶ä½œç”¨æ˜¯å¿½ç•¥å¤§å°å†™æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒã€‚</p><h3 id="6-indexOf-æ–¹æ³•"><a href="#6-indexOf-æ–¹æ³•" class="headerlink" title="6)indexOf æ–¹æ³•"></a>6)indexOf æ–¹æ³•</h3><p>indexOfæ–¹æ³•çš„ä½œç”¨æ˜¯æŸ¥æ‰¾ç‰¹å®šå­—ç¬¦æˆ–å­—ç¬¦ä¸²åœ¨å½“å‰å­—ç¬¦ä¸²ä¸­çš„èµ·å§‹ä½ç½®ã€‚ å¦‚æœä¸å­˜<br>åœ¨ï¼Œè¿”å›ä¸€1ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">String s=<span class="hljs-string">&quot;abcded&quot;</span>;<br><span class="hljs-type">int</span> index0=s.indexof(<span class="hljs-string">&#x27;d&#x27;</span>); <br><br><span class="hljs-type">int</span> indexl=s.indexOf(<span class="hljs-string">&#x27;h&#x27;</span>);<br><br> <span class="hljs-type">int</span> index2=s.indexOf(<span class="hljs-string">&#x27;d&#x27;</span>,<span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure><p>index0è¿”å›å­—ç¬¦dåœ¨å­—ç¬¦ä¸²sä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®,æ•°å€¼ä¸º3ã€‚ç”±äºå­—ç¬¦håœ¨å­—ç¬¦ä¸²sä¸­ä¸å­˜åœ¨ï¼Œåˆ™indexlçš„å€¼æ˜¯ä¸€1ã€‚index2è¿”å›ä»ç´¢å¼•å€¼4(åŒ…æ‹¬4)ä»¥åçš„å­—ç¬¦ä¸­ç¬¬ä¸€ä¸ªå‡ºç°çš„å­—ç¬¦dï¼Œå…¶å€¼ä¸º5ã€‚</p><h3 id="7-length-æ–¹æ³•"><a href="#7-length-æ–¹æ³•" class="headerlink" title="7)length æ–¹æ³•"></a>7)length æ–¹æ³•</h3><p>lengthæ–¹æ³•çš„ä½œç”¨æ˜¯è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¿”å›å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„ä¸ªæ•°ã€‚ä¸­æ–‡å­—ç¬¦ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">String s=<span class="hljs-string">&quot;abc&quot;</span>;<br>String s1=<span class="hljs-string">&quot;Java è¯­è¨€&quot;</span>;<br><br> <span class="hljs-type">int</span> len=s.length();<br><br> <span class="hljs-type">int</span> len1=s1.length();<br></code></pre></td></tr></table></figure><p>åˆ™å˜é‡ len çš„å€¼æ˜¯3,å˜é‡ len1 çš„å€¼æ˜¯6ã€‚</p><h3 id="8-replace-æ–¹æ³•"><a href="#8-replace-æ–¹æ³•" class="headerlink" title="8)replace æ–¹æ³•"></a>8)replace æ–¹æ³•</h3><p>replaceæ–¹æ³•çš„ä½œç”¨æ˜¯æ›¿æ¢å­—ç¬¦ä¸²ä¸­æ‰€æœ‰æŒ‡å®šçš„å­—ç¬¦ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚è°ƒè¯¥æ–¹æ³•ä»¥åï¼ŒåŸæ¥çš„å­—ç¬¦ä¸²ä¸å‘ç”Ÿæ”¹å˜ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String s=<span class="hljs-string">&quot;abcat&quot;</span>;<br>String s1=s.replace(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>);<br></code></pre></td></tr></table></figure><p>å…¶ä½œç”¨æ˜¯å°†å­—ç¬¦ä¸²sä¸­æ‰€æœ‰çš„å­—ç¬¦aæ›¿æ¢æˆå­—ç¬¦1.ç”Ÿæˆçš„æ–°å­—ç¬¦ä¸² s1çš„å€¼æ˜¯â€1bcltâ€ç¬¦ä¸²sçš„å†…å®¹ä¸å˜ã€‚<br>å¦‚æœéœ€è¦å°†å­—ç¬¦ä¸²ä¸­æŸä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²æ›¿æ¢ä¸ºå…¶ä»–å­—ç¬¦ä¸²ï¼Œä½¿ç”¨replaceAll æ–¹ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String s=<span class="hljs-string">&quot;abatbac&quot;</span>;<br>String s1=s.replaceAll(<span class="hljs-string">&quot;ba&quot;</span>,<span class="hljs-string">&quot;12&quot;</span>);<br></code></pre></td></tr></table></figure><p>å…¶ä½œç”¨æ˜¯å°†å­—ç¬¦ä¸²sä¸­æ‰€æœ‰çš„å­—ç¬¦ä¸²â€abâ€æ›¿æ¢ä¸ºâ€12â€,ç”Ÿæˆæ–°çš„å­—ç¬¦ä¸²â€a12t12câ€,å­—ç¬¦ä¸²!çš„å†…å®¹ä¸å˜ã€‚</p><h3 id="9-splitæ–¹æ³•"><a href="#9-splitæ–¹æ³•" class="headerlink" title="9)splitæ–¹æ³•"></a>9)splitæ–¹æ³•</h3><p>splitæ–¹æ³•çš„ä½œç”¨æ˜¯ä»¥ç‰¹å®šçš„å­—ç¬¦ä¸²ä½œä¸ºé—´éš”ï¼Œæ‹†åˆ†å½“å‰å­—ç¬¦ä¸²çš„å†…å®¹ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ‹†åˆ†ä»¥åå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String s=<span class="hljs-string">&quot;ab,12,df&quot;</span>;<br>String s1[]=s.split(<span class="hljs-string">&quot;,&quot;</span>);<br></code></pre></td></tr></table></figure><p>å…¶ä½œç”¨æ˜¯ä»¥å­—ç¬¦ä¸²â€ï¼Œâ€ä½œä¸ºé—´éš”ï¼Œæ‹†åˆ†å­—ç¬¦ä¸²sï¼Œå¾—åˆ°æ‹†åˆ†ä»¥åçš„å­—ç¬¦ä¸²æ•°ç»„s1ï¼Œå…¶å†…å®¹ä¸º{â€œabâ€,â€12â€,â€dfâ€}ã€‚<br>å®ƒæ˜¯è§£æå­—ç¬¦ä¸²çš„åŸºç¡€æ–¹æ³•ã€‚<br>å¦‚æœåœ¨å­—ç¬¦ä¸²å†…éƒ¨å­˜åœ¨å’Œé—´éš”å­—ç¬¦ä¸²ç›¸åŒçš„å†…å®¹ï¼Œå°†æ‹†é™¤ç©ºå­—ç¬¦ä¸²ï¼Œå°¾éƒ¨çš„ç©ºå­—ç¬¦ä¸²è¢«å¿½ç•¥ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String se<span class="hljs-string">&quot;abbcbtbb&quot;</span>;<br>String s1[l-s.split(<span class="hljs-string">&quot;b&quot;</span>);<br></code></pre></td></tr></table></figure><p>åˆ™æ‹†åˆ†å‡ºçš„ç»“æœå­—ç¬¦ä¸²æ•°ç»„s1çš„å†…å®¹ä¸º(â€œaâ€ï¼Œâ€ â€œï¼Œâ€câ€ï¼Œâ€tâ€ã€‚æ‹†åˆ†å‡ºçš„ä¸­é—´çš„ç©ºå­—ç¬¦ä¸²çš„æ•°é‡ç­‰äºä¸­é—´é—´éš”å­—ç¬¦ä¸²çš„æ•°é‡å‡1ä¸ªã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">String s-<span class="hljs-string">&quot;abbbcbtbbb&quot;</span>;<br><br> String s1[]=s.split(<span class="hljs-string">&quot;b&quot;</span>);<br></code></pre></td></tr></table></figure><p>åˆ™æ‹†åˆ†å‡ºçš„ç»“æœæ˜¯{â€œaâ€,â€ â€œ,â€ â€œ,â€eâ€,â€tâ€}ã€‚</p><h3 id="10-startsWith-æ–¹æ³•"><a href="#10-startsWith-æ–¹æ³•" class="headerlink" title="10)startsWith æ–¹æ³•"></a>10)startsWith æ–¹æ³•</h3><p>startsWithæ–¹æ³•çš„ä½œç”¨å’ŒendsWithæ–¹æ³•ç±»ä¼¼,åªæ˜¯è¯¥æ–¹æ³•åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ä½œä¸ºå¼€å§‹ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String s=<span class="hljs-string">&quot;TestGame&quot;</span>;<br><span class="hljs-type">boolean</span> b=g.startsWith (<span class="hljs-string">&quot;Test&quot;</span>);<br></code></pre></td></tr></table></figure><p>åˆ™å˜é‡bçš„å€¼æ˜¯trueã€‚</p><h3 id="11-substring-æ–¹æ³•"><a href="#11-substring-æ–¹æ³•" class="headerlink" title="11)substring æ–¹æ³•"></a>11)substring æ–¹æ³•</h3><p>substring æ–¹æ³•çš„ä½œç”¨æ˜¯å–å­—ç¬¦ä¸²ä¸­çš„å­ç”µã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">String s <span class="hljs-string">&quot;Teststring&quot;</span>; <br><br>String s1=s.substring(<span class="hljs-number">2</span>);<br><br> String sl=s.substring(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><p>slæ˜¯å–å­—ç¬¦ä¸²sä¸­ç´¢å¼•å€¼ä¸º2(åŒ…æ‹¬2)ä»¥åçš„æ‰€æœ‰å­—ç¬¦ä½œä¸ºå­ä¸²,å…¶å€¼ä¸ºâ€ststringâ€ã€‚s2æ˜¯å–å­—ç¬¦ä¸²sä¸­ä»ç´¢å¼•å€¼2(åŒ…æ‹¬2)å¼€å§‹ï¼Œåˆ°ç´¢å¼•å€¼5(ä¸åŒ…æ‹¬5)çš„éƒ¨åˆ†ä½œä¸ºå­ä¸²,å…¶å€¼ä¸ºâ€stSâ€ã€‚ä¸‹é¢æ˜¯ä¸€æ®µç®€å•çš„åº”ç”¨ä»£ç ,ä½œç”¨æ˜¯è¾“å‡ºä»»æ„ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰å­ä¸²ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">string s=<span class="hljs-string">&quot;å­ä¸²ç¤ºä¾‹&quot;</span>;<br><span class="hljs-type">int</span> len=s.length(); <span class="hljs-comment">//è·å¾—å­—ç¬¦ä¸²é•¿åº¦ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> begin=<span class="hljs-number">0</span>; begin&lt;len-<span class="hljs-number">1</span>; begin++)&#123; <span class="hljs-comment">//èµ·å§‹ç´¢å¼•å€¼ </span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> end=begin+l; end &lt;=len; end++)( <span class="hljs-comment">//ç»“æŸç´¢å¼•å€¼ </span><br>system.out.println(s.substring(begin, end));<br></code></pre></td></tr></table></figure><p>åœ¨è¯¥ä»£ç ä¸­,å¾ªç¯å˜é‡beginä»£è¡¨éœ€è¦è·å¾—çš„å­ä¸²çš„èµ·å§‹ç´¢å¼•å€¼ï¼Œå…¶å˜åŒ–åŒºé—´ä»ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•å€¼0åˆ°å€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„ç´¢å¼•å€¼len-2;endä»£è¡¨éœ€è¦è·å¾—çš„å­ä¸²çš„ç»“æŸç´¢<br>å¼•å€¼,å…¶å˜åŒ–çš„åŒºé—´ä»èµ·å§‹ç´¢å¼•å€¼çš„åç»­ä¸€ä¸ªåˆ°å­—ç¬¦ä¸²é•¿åº¦ã€‚é€šè¿‡å¾ªç¯åµŒå¥—ï¼Œå¯ä»¥è°å†å­—ç¬¦<br>ä¸²ä¸­çš„æ‰€æœ‰å­ä¸²ã€‚</p><h3 id="12-toCharArrayæ–¹æ³•"><a href="#12-toCharArrayæ–¹æ³•" class="headerlink" title="12)toCharArrayæ–¹æ³•"></a>12)toCharArrayæ–¹æ³•</h3><p>toCharArrayæ–¹æ³•çš„ä½œç”¨å’ŒgetBytesæ–¹æ³•ç±»ä¼¼ï¼Œå³å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹åº”çš„charæ•°ç»„ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String s=<span class="hljs-string">&quot;abc&quot;</span>;<br><span class="hljs-type">char</span>[] c=s.toCharArray();<br></code></pre></td></tr></table></figure><p>åˆ™å­—ç¬¦æ•°ç»„cçš„å€¼ä¸º{â€˜aâ€™,â€™bâ€™ï¼Œâ€™câ€™}ã€‚</p><h3 id="13-toLowerCaseæ–¹æ³•"><a href="#13-toLowerCaseæ–¹æ³•" class="headerlink" title="13)toLowerCaseæ–¹æ³•"></a>13)toLowerCaseæ–¹æ³•</h3><p>toLowerCaseæ–¹æ³•çš„ä½œç”¨æ˜¯å°†å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„å¤§å†™å­—ç¬¦è½¬æ¢ä¸ºå°å†™ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String s-<span class="hljs-string">&quot;AbC123&quot;</span>;<br>String sl=s.toLowerCase();<br></code></pre></td></tr></table></figure><p>åˆ™å­—ç¬¦ä¸²slçš„å€¼æ˜¯â€abc123â€,è€Œå­—ç¬¦ä¸²sçš„å€¼ä¸å˜ã€‚<br>ç±»ä¼¼çš„æ–¹æ³•æ˜¯toUpperCaseï¼Œå…¶ä½œç”¨æ˜¯å°†å­—ç¬¦ä¸²ä¸­çš„å°å†™å­—ç¬¦è½¬æ¢ä¸ºå¯¹åº”çš„å¤§å†™å­—ç¬¦ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String s=<span class="hljs-string">&quot;AbC123&quot;</span>;<br>String s1=s.toUpperCase0);<br></code></pre></td></tr></table></figure><p>åˆ™å­—ç¬¦ä¸² slçš„å€¼æ˜¯â€ABC123â€,è€Œå­—ç¬¦ä¸²sçš„å€¼ä¸å˜ã€‚</p><h3 id="14-trim-æ–¹æ³•"><a href="#14-trim-æ–¹æ³•" class="headerlink" title="14)trim æ–¹æ³•"></a>14)trim æ–¹æ³•</h3><p>trimæ–¹æ³•çš„ä½œç”¨æ˜¯å»æ‰å­—ç¬¦ä¸²å¼€å§‹å’Œç»“å°¾çš„æ‰€æœ‰ç©ºæ ¼ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚è¯¥æ–¹ä¸å»æ‰å­—ç¬¦ä¸²ä¸­é—´çš„ç©ºæ ¼ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">String s-<span class="hljs-string">&quot; abc abc 123 &quot;</span>; <br>String sl=s.trim();<br></code></pre></td></tr></table></figure><p>åˆ™å­—ç¬¦ä¸² slçš„å€¼ä¸ºâ€abc abc 123â€,å­—ç¬¦ä¸²sçš„å€¼ä¸å˜ã€‚</p><h3 id="15-valueOf-æ–¹æ³•"><a href="#15-valueOf-æ–¹æ³•" class="headerlink" title="15)valueOf æ–¹æ³•"></a>15)valueOf æ–¹æ³•</h3><p>valueOfæ–¹æ³•çš„ä½œç”¨æ˜¯å°†å…¶ä»–ç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŸºæœ¬æ•°æ®å’Œå­—ç¬¦ä¸²å¯¹è±¡ä¹‹é—´ä¸èƒ½ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢çš„è¯­æ³•è¿›è¡Œè½¬æ¢ã€‚å¦å¤–ï¼Œç”±äºè¯¥æ–¹æ³•æ˜¯staticæ–¹æ³•ï¼Œæ‰€ä»¥ä¸ç”¨åˆ›å»ºStringç±»å‹çš„å¯¹è±¡ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> n=<span class="hljs-number">10</span>;<br>String s=String.valueOf(n);<br></code></pre></td></tr></table></figure><p>åˆ™å­—ç¬¦ä¸²sçš„å€¼æ˜¯â€10â€ã€‚è™½ç„¶å¯¹äºç¨‹åºå‘˜æ¥è¯´,æ²¡æœ‰å‘ç”Ÿä»€ä¹ˆå˜åŒ–,ä½†æ˜¯å¯¹äºç¨‹åºæ¥è¯´ï¼Œæ•°æ®çš„ç±»å‹å‘ç”Ÿäº†å˜åŒ–ã€‚<br>ä»‹ç»ä¸€ä¸ªç®€å•çš„åº”ç”¨,åˆ¤æ–­ä¸€ä¸ªè‡ªç„¶æ•°æ˜¯å‡ ä½æ•°å­—çš„ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-type">int</span> n=<span class="hljs-number">12345</span>;<br>string s=String.valueOf(n);<br><br> <span class="hljs-type">int</span> len=s.length();<br></code></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²çš„é•¿åº¦ lenä»£è¡¨è¯¥è‡ªç„¶æ•°çš„ä½æ•°ã€‚è¿™ç§åˆ¤æ–­æ¯”æ•°å­¦åˆ¤æ–­æ–¹æ³•åœ¨é€»è¾‘ä¸Šè¦ç®€å•ä¸€äº›<br>å…³äº String ç±»çš„ä½¿ç”¨å°±ä»‹ç»è¿™äº›,å…¶ä»–æ–¹æ³•ä»¥åŠè¿™é‡Œä»‹ç»çš„æ–¹æ³•çš„è¯¦ç»†å£°æ˜å¯ä»¥å‚ä¹ å¯¹åº”çš„APIæ–‡æ¡£ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼‚å¸¸å¤„ç†â‘ </title>
    <link href="/Hexo/2022/09/01/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%8601/"/>
    <url>/Hexo/2022/09/01/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%8601/</url>
    
    <content type="html"><![CDATA[<h1 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h1><p>åœ¨åˆ©ç”¨Java è¯­è¨€è®¾è®¡ç¨‹åºæ—¶ï¼Œä¸å¯é¿å…åœ°ä¼šäº§ç”Ÿé”™è¯¯ï¼Œé‚£ä¹ˆï¼Œå¦‚ä½•å¤„ç†é”™è¯¯?æŠŠé”™è°ˆäº¤ç»™è°å»å¤„ç†?ç¨‹åºåˆè¯¥å¦‚ä½•ä»é”™è¯¯ä¸­æ¢å¤?è¿™æ˜¯ä»»ä½•ç¨‹åºè®¾è®¡è¯­è¨€éƒ½è¦è§£å†³çš„é—®é¢˜ã€‚</p><h2 id="1-1æ¦‚å¿µ"><a href="#1-1æ¦‚å¿µ" class="headerlink" title="1.1æ¦‚å¿µ"></a>1.1æ¦‚å¿µ</h2><p>1.å¼‚å¸¸(Exception)<br>å¼‚å¸¸æŒ‡ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„éæ­£å¸¸ç°è±¡ï¼Œä¾‹å¦‚ç”¨æˆ·è¾“å…¥é”™è¯¯ï¼Œé™¤æ•°ä¸º0,éœ€è¦å¤„ç†çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ•°ç»„ä¸‹æ ‡è¶Šç•Œç­‰ã€‚å…¶ä»–å› æ“ä½œé”™è¯¯æˆ–å¶ç„¶çš„å¤–åœ¨å› ç´ å¯¼è‡´çš„ä¸€èˆ¬æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚ç©ºæŒ‡é’ˆè®¿é—®ï¼Œè¯•å›¾è¯»å–ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œç½‘ç»œè¿æ¥ä¸­æ–­ç­‰ã€‚<br>å¯èƒ½é‡åˆ°çš„è½»å¾®é”™è¯¯ï¼Œå¯ä»¥å†™ä»£ç æ¥å¤„ç†å¼‚å¸¸å¹¶ç»§æ‰¿æ‰§è¡Œï¼Œä¸åº”è®©ç¨‹åºä¸­æ–­ã€‚<br>2.é”™è¯¯(Error)<br>ç¨‹åºä¸èƒ½é¡ºåˆ©æ‰§è¡Œï¼Œé™¤äº†å¼‚å¸¸(Exception)ï¼Œè¿˜å¯èƒ½å‘ç”Ÿäº†é”™è¯¯(Error),ä¾‹å¦‚,æ–­è¨€é”™è¯¯ï¼Œç±»çš„è¿æ¥é”™è¯¯ï¼ŒJavaè™šæ‹Ÿæœºå´©æºƒæ€§é”™è¯¯,ç­‰ç­‰ï¼Œè¿™äº›äº‹ä»¶çš„å‘ç”Ÿå°†é˜»æ­¢ç¨‹åºæ­£å¸¸è¿è¡Œã€‚å¯¹äºJavaè™šæ‹Ÿæœºæ— æ³•è§£å†³çš„ä¸¥é‡é—®é¢˜ï¼Œå¦‚JVMç³»ç»Ÿå†…éƒ¨é”™è¯¯ã€èµ„æºè€—å°½ç­‰æƒ…å†µï¼Œä¸€èˆ¬ä¸ç¼–å†™é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚<br>å¯¹äºè¢«è®¤ä¸ºæ˜¯ä¸èƒ½æ¢å¤çš„ä¸¥é‡é”™è¯¯ï¼Œä¸åº”è¯¥æŠ›å‡ºï¼Œè€Œåº”è®©ç¨‹åºä¸­æ–­ã€‚</p><h2 id="1-2å¼‚å¸¸ç§ç±»å’Œå±‚æ¬¡ç»“æ„"><a href="#1-2å¼‚å¸¸ç§ç±»å’Œå±‚æ¬¡ç»“æ„" class="headerlink" title="1.2å¼‚å¸¸ç§ç±»å’Œå±‚æ¬¡ç»“æ„"></a>1.2å¼‚å¸¸ç§ç±»å’Œå±‚æ¬¡ç»“æ„</h2><p>(1)Error(é”™è¯¯):æ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œè¡¨ç¤ºè¿è¡Œåº”ç”¨ç¨‹åºä¸­å‡ºç°çš„è¾ƒä¸¥é‡é—®é¢˜ã€‚å«å¤§é‡å­ç±»ã€‚<br>å¤§å¤šæ•°é”™è¯¯ä¸ä»£ç ç¼–å†™è€…æ‰§è¡Œçš„æ“ä½œæ— å…³ï¼Œè¡¨ç¤ºä»£ç è¿è¡Œè¡Œæ—¶JVM(Javaè™šæ‹Ÿæœº)å‡ºç°çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒJavaè™šæ‹Ÿæœºè¿è¡Œé”™è¯¯(VirtualMachineError)ï¼Œå½“JVMä¸å†æœ‰ç»§ç»­æ‰§è¡Œæ“ä½œæ‰€éœ€çš„å†…å­˜èµ„æºæ—¶ï¼Œå°†å‡ºç°OutOfMemoryErrorã€‚è¿™äº›å¼‚å¸¸å‘å‘ç”Ÿæ—¶ï¼ŒJavaè™šæ‹Ÿæœº(JVM)ä¸€èˆ¬é€‰å°å¤–ç­çš„æ˜¯å ‚ Exception ç±»æœ‰ä¸€ä¸ªé‡è¦çš„å­ç±»<br>æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚</p><p>(2)Exeption(å¼‚å¸¸):æ˜¯ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ã€‚Exception ç±»æœ‰ä¸€ä¸ªé‡è¦çš„å­ç±» RuntimeExceptionï¼Œå®ƒä¸å…¶å­ç±»è¡¨ç¤ºJVMå¸¸ç”¨æ“ä½œå¼•å‘çš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œè‹¥è¯•å›¾ä½¿ç”¨ç©ºå€¼å¯¹è±¡å¼•ç”¨ã€é™¤æ•°ä¸º0æˆ–æ•°ç»„è¶Šç•Œï¼Œå°†åˆ†åˆ«å¼•å‘ NullPointerExceptionï¼ŒArithmeticExceptionå’Œ ArrayIndexOutOFBoundExceptionã€‚Java å¼‚å¸¸ç±»å±‚æ¬¡ç»“æ„</p><table><thead><tr><th align="center">ArraylndexOutOIBoundsException</th><th align="center">æ•°ç»„ç´¢å¼•è¶Šç•Œå¼‚å¸¸</th></tr></thead><tbody><tr><td align="center">ArithmeticException</td><td align="center">ç®—æœ¯æ¡ä»¶å¼‚å¸¸ï¼Œå¦‚æ•´æ•°é™¤ä»¥0ç­‰</td></tr><tr><td align="center">NullPointerException</td><td align="center">ç©ºæŒ‡é’ˆå¼‚å¸¸</td></tr><tr><td align="center">ClassNotFoundException</td><td align="center">æ‰¾ä¸åˆ°ç±»å¼‚å¸¸</td></tr><tr><td align="center">NegativeArraySizeException</td><td align="center">æ•°ç»„é•¿åº¦ä¸ºè´Ÿå¼‚å¸¸</td></tr><tr><td align="center">ArrayStoreException</td><td align="center">æ•°ç»„ä¸­åŒ…å«ä¸å…¼å®¹çš„å€¼æŠ›å‡ºçš„å¼‚å¸¸</td></tr><tr><td align="center">SecurityException</td><td align="center">å®‰å…¨æ€§å¼‚å¸¸</td></tr><tr><td align="center">IllegalArgumentException</td><td align="center">éæ³•å‚æ•°å¼‚å¸¸</td></tr></tbody></table><h5 id="IOExceptionå¼‚å¸¸å­ç±»å¦‚è¡¨æ‰€ç¤º"><a href="#IOExceptionå¼‚å¸¸å­ç±»å¦‚è¡¨æ‰€ç¤º" class="headerlink" title="IOExceptionå¼‚å¸¸å­ç±»å¦‚è¡¨æ‰€ç¤º"></a>IOExceptionå¼‚å¸¸å­ç±»å¦‚è¡¨æ‰€ç¤º</h5><p><img src="https://img1.imgtp.com/2022/09/27/mTg3v8ZB.png" alt="image-20220927220136097"></p><h5 id="IOException-å¼‚å¸¸å­ç±»"><a href="#IOException-å¼‚å¸¸å­ç±»" class="headerlink" title="IOException å¼‚å¸¸å­ç±»"></a>IOException å¼‚å¸¸å­ç±»</h5><table><thead><tr><th align="center">å¼‚å¸¸</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">IOException</td><td align="center">æ“ä½œè¾“å…¥æµå’Œè¾“å‡ºæµæ—¶å¯èƒ½å‡ºç°çš„å¼‚å¸¸</td></tr><tr><td align="center">EOFException</td><td align="center">æ–‡ä»¶å·²ç»“æŸå¼‚å¸¸</td></tr><tr><td align="center">FileNotFoundException</td><td align="center">æ–‡ä»¶æœªæ‰¾åˆ°å¼‚å¸¸</td></tr></tbody></table><h5 id="å…¶ä»–å¼‚å¸¸å­ç±»"><a href="#å…¶ä»–å¼‚å¸¸å­ç±»" class="headerlink" title="å…¶ä»–å¼‚å¸¸å­ç±»"></a>å…¶ä»–å¼‚å¸¸å­ç±»</h5><table><thead><tr><th align="center">å¼‚å¸¸</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">ClassCastException</td><td align="center">ç±»å‹è½¬æ¢å¼‚å¸¸ç±»</td></tr><tr><td align="center">SQLException</td><td align="center">æ“ä½œæ•°æ®åº“å¼‚å¸¸ç±»</td></tr><tr><td align="center">NoSuchFieldException</td><td align="center">å­—æ®µæœªæ‰¾åˆ°å¼‚å¸¸</td></tr><tr><td align="center">NoSuchMethodException</td><td align="center">æ–¹æ³•æœªæ‰¾åˆ°æŠ›å‡ºçš„å¼‚å¸¸</td></tr><tr><td align="center">NumberFormatException</td><td align="center">å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—æŠ›å‡ºçš„å¼‚å¸¸</td></tr><tr><td align="center">StringIndexOutOfBoundsException</td><td align="center">å­—ç¬¦ä¸²ç´¢å¼•è¶…å‡ºèŒƒå›´æŠ›å‡ºçš„å¼‚å¸¸</td></tr><tr><td align="center">IllegalAccessException</td><td align="center">ä¸å…è®¸è®¿é—®æŸç±»å¼‚å¸¸</td></tr></tbody></table><h3 id="Exception-ç±»çš„å±‚æ¬¡"><a href="#Exception-ç±»çš„å±‚æ¬¡" class="headerlink" title="Exception ç±»çš„å±‚æ¬¡"></a>Exception ç±»çš„å±‚æ¬¡</h3><p>æ‰€æœ‰çš„å¼‚å¸¸ç±»æ˜¯ä» java.lang.Exception ç±»ç»§æ‰¿çš„å­ç±»ã€‚</p><p>Exception ç±»æ˜¯ Throwable ç±»çš„å­ç±»ã€‚é™¤äº†Exceptionç±»å¤–ï¼ŒThrowableè¿˜æœ‰ä¸€ä¸ªå­ç±»Error ã€‚</p><p>Java ç¨‹åºé€šå¸¸ä¸æ•è·é”™è¯¯ã€‚é”™è¯¯ä¸€èˆ¬å‘ç”Ÿåœ¨ä¸¥é‡æ•…éšœæ—¶ï¼Œå®ƒä»¬åœ¨Javaç¨‹åºå¤„ç†çš„èŒƒç•´ä¹‹å¤–ã€‚</p><p>Error ç”¨æ¥æŒ‡ç¤ºè¿è¡Œæ—¶ç¯å¢ƒå‘ç”Ÿçš„é”™è¯¯ã€‚</p><p>ä¾‹å¦‚ï¼ŒJVM å†…å­˜æº¢å‡ºã€‚ä¸€èˆ¬åœ°ï¼Œç¨‹åºä¸ä¼šä»é”™è¯¯ä¸­æ¢å¤ã€‚</p><p>å¼‚å¸¸ç±»æœ‰ä¸¤ä¸ªä¸»è¦çš„å­ç±»ï¼šIOException ç±»å’Œ RuntimeException ç±»ã€‚</p><p><img src="https://img1.imgtp.com/2022/10/17/0jbEqh0K.png" alt="img"></p><h2 id="1-3Java-å†…ç½®å¼‚å¸¸ç±»"><a href="#1-3Java-å†…ç½®å¼‚å¸¸ç±»" class="headerlink" title="1.3Java å†…ç½®å¼‚å¸¸ç±»"></a>1.3Java å†…ç½®å¼‚å¸¸ç±»</h2><p>Java è¯­è¨€å®šä¹‰äº†ä¸€äº›å¼‚å¸¸ç±»åœ¨ java.lang æ ‡å‡†åŒ…ä¸­ã€‚</p><p>æ ‡å‡†è¿è¡Œæ—¶å¼‚å¸¸ç±»çš„å­ç±»æ˜¯æœ€å¸¸è§çš„å¼‚å¸¸ç±»ã€‚ç”±äº java.lang åŒ…æ˜¯é»˜è®¤åŠ è½½åˆ°æ‰€æœ‰çš„ Java ç¨‹åºçš„ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†ä»è¿è¡Œæ—¶å¼‚å¸¸ç±»ç»§æ‰¿è€Œæ¥çš„å¼‚å¸¸éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><p>Java æ ¹æ®å„ä¸ªç±»åº“ä¹Ÿå®šä¹‰äº†ä¸€äº›å…¶ä»–çš„å¼‚å¸¸ï¼Œä¸‹é¢çš„è¡¨ä¸­åˆ—å‡ºäº† Java çš„éæ£€æŸ¥æ€§å¼‚å¸¸ã€‚</p><table><thead><tr><th align="left"><strong>å¼‚å¸¸</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">ArithmeticException</td><td align="left">å½“å‡ºç°å¼‚å¸¸çš„è¿ç®—æ¡ä»¶æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•´æ•°â€é™¤ä»¥é›¶â€æ—¶ï¼ŒæŠ›å‡ºæ­¤ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</td></tr><tr><td align="left">ArrayIndexOutOfBoundsException</td><td align="left">ç”¨éæ³•ç´¢å¼•è®¿é—®æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚å¦‚æœç´¢å¼•ä¸ºè´Ÿæˆ–å¤§äºç­‰äºæ•°ç»„å¤§å°ï¼Œåˆ™è¯¥ç´¢å¼•ä¸ºéæ³•ç´¢å¼•ã€‚</td></tr><tr><td align="left">ArrayStoreException</td><td align="left">è¯•å›¾å°†é”™è¯¯ç±»å‹çš„å¯¹è±¡å­˜å‚¨åˆ°ä¸€ä¸ªå¯¹è±¡æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚</td></tr><tr><td align="left">ClassCastException</td><td align="left">å½“è¯•å›¾å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºä¸æ˜¯å®ä¾‹çš„å­ç±»æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">IllegalArgumentException</td><td align="left">æŠ›å‡ºçš„å¼‚å¸¸è¡¨æ˜å‘æ–¹æ³•ä¼ é€’äº†ä¸€ä¸ªä¸åˆæ³•æˆ–ä¸æ­£ç¡®çš„å‚æ•°ã€‚</td></tr><tr><td align="left">IllegalMonitorStateException</td><td align="left">æŠ›å‡ºçš„å¼‚å¸¸è¡¨æ˜æŸä¸€çº¿ç¨‹å·²ç»è¯•å›¾ç­‰å¾…å¯¹è±¡çš„ç›‘è§†å™¨ï¼Œæˆ–è€…è¯•å›¾é€šçŸ¥å…¶ä»–æ­£åœ¨ç­‰å¾…å¯¹è±¡çš„ç›‘è§†å™¨è€Œæœ¬èº«æ²¡æœ‰æŒ‡å®šç›‘è§†å™¨çš„çº¿ç¨‹ã€‚</td></tr><tr><td align="left">IllegalStateException</td><td align="left">åœ¨éæ³•æˆ–ä¸é€‚å½“çš„æ—¶é—´è°ƒç”¨æ–¹æ³•æ—¶äº§ç”Ÿçš„ä¿¡å·ã€‚æ¢å¥è¯è¯´ï¼Œå³ Java ç¯å¢ƒæˆ– Java åº”ç”¨ç¨‹åºæ²¡æœ‰å¤„äºè¯·æ±‚æ“ä½œæ‰€è¦æ±‚çš„é€‚å½“çŠ¶æ€ä¸‹ã€‚</td></tr><tr><td align="left">IllegalThreadStateException</td><td align="left">çº¿ç¨‹æ²¡æœ‰å¤„äºè¯·æ±‚æ“ä½œæ‰€è¦æ±‚çš„é€‚å½“çŠ¶æ€æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚</td></tr><tr><td align="left">IndexOutOfBoundsException</td><td align="left">æŒ‡ç¤ºæŸæ’åºç´¢å¼•ï¼ˆä¾‹å¦‚å¯¹æ•°ç»„ã€å­—ç¬¦ä¸²æˆ–å‘é‡çš„æ’åºï¼‰è¶…å‡ºèŒƒå›´æ—¶æŠ›å‡ºã€‚</td></tr><tr><td align="left">NegativeArraySizeException</td><td align="left">å¦‚æœåº”ç”¨ç¨‹åºè¯•å›¾åˆ›å»ºå¤§å°ä¸ºè´Ÿçš„æ•°ç»„ï¼Œåˆ™æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">NullPointerException</td><td align="left">å½“åº”ç”¨ç¨‹åºè¯•å›¾åœ¨éœ€è¦å¯¹è±¡çš„åœ°æ–¹ä½¿ç”¨ <code>null</code> æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸</td></tr><tr><td align="left">NumberFormatException</td><td align="left">å½“åº”ç”¨ç¨‹åºè¯•å›¾å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ç§æ•°å€¼ç±»å‹ï¼Œä½†è¯¥å­—ç¬¦ä¸²ä¸èƒ½è½¬æ¢ä¸ºé€‚å½“æ ¼å¼æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">SecurityException</td><td align="left">ç”±å®‰å…¨ç®¡ç†å™¨æŠ›å‡ºçš„å¼‚å¸¸ï¼ŒæŒ‡ç¤ºå­˜åœ¨å®‰å…¨ä¾µçŠ¯ã€‚</td></tr><tr><td align="left">StringIndexOutOfBoundsException</td><td align="left">æ­¤å¼‚å¸¸ç”± <code>String</code> æ–¹æ³•æŠ›å‡ºï¼ŒæŒ‡ç¤ºç´¢å¼•æˆ–è€…ä¸ºè´Ÿï¼Œæˆ–è€…è¶…å‡ºå­—ç¬¦ä¸²çš„å¤§å°ã€‚</td></tr><tr><td align="left">UnsupportedOperationException</td><td align="left">å½“ä¸æ”¯æŒè¯·æ±‚çš„æ“ä½œæ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr></tbody></table><p>ä¸‹é¢çš„è¡¨ä¸­åˆ—å‡ºäº† Java å®šä¹‰åœ¨ java.lang åŒ…ä¸­çš„æ£€æŸ¥æ€§å¼‚å¸¸ç±»ã€‚</p><table><thead><tr><th align="left"><strong>å¼‚å¸¸</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">ClassNotFoundException</td><td align="left">åº”ç”¨ç¨‹åºè¯•å›¾åŠ è½½ç±»æ—¶ï¼Œæ‰¾ä¸åˆ°ç›¸åº”çš„ç±»ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">CloneNotSupportedException</td><td align="left">å½“è°ƒç”¨ <code>Object</code> ç±»ä¸­çš„ <code>clone</code> æ–¹æ³•å…‹éš†å¯¹è±¡ï¼Œä½†è¯¥å¯¹è±¡çš„ç±»æ— æ³•å®ç° <code>Cloneable</code> æ¥å£æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">IllegalAccessException</td><td align="left">æ‹’ç»è®¿é—®ä¸€ä¸ªç±»çš„æ—¶å€™ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">InstantiationException</td><td align="left">å½“è¯•å›¾ä½¿ç”¨ <code>Class</code> ç±»ä¸­çš„ <code>newInstance</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œè€ŒæŒ‡å®šçš„ç±»å¯¹è±¡å› ä¸ºæ˜¯ä¸€ä¸ªæ¥å£æˆ–æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»è€Œæ— æ³•å®ä¾‹åŒ–æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">InterruptedException</td><td align="left">ä¸€ä¸ªçº¿ç¨‹è¢«å¦ä¸€ä¸ªçº¿ç¨‹ä¸­æ–­ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">NoSuchFieldException</td><td align="left">è¯·æ±‚çš„å˜é‡ä¸å­˜åœ¨</td></tr><tr><td align="left">NoSuchMethodException</td><td align="left">è¯·æ±‚çš„æ–¹æ³•ä¸å­˜åœ¨</td></tr></tbody></table><hr><h2 id="1-4å¼‚å¸¸æ–¹æ³•"><a href="#1-4å¼‚å¸¸æ–¹æ³•" class="headerlink" title="1.4å¼‚å¸¸æ–¹æ³•"></a>1.4å¼‚å¸¸æ–¹æ³•</h2><p>ä¸‹é¢çš„åˆ—è¡¨æ˜¯ Throwable ç±»çš„ä¸»è¦æ–¹æ³•:</p><table><thead><tr><th align="left"><strong>åºå·</strong></th><th align="left"><strong>æ–¹æ³•åŠè¯´æ˜</strong></th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>public String getMessage()</strong> è¿”å›å…³äºå‘ç”Ÿçš„å¼‚å¸¸çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™ä¸ªæ¶ˆæ¯åœ¨Throwable ç±»çš„æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–äº†ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>public Throwable getCause()</strong> è¿”å›ä¸€ä¸ª Throwable å¯¹è±¡ä»£è¡¨å¼‚å¸¸åŸå› ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>public String toString()</strong> è¿”å›æ­¤ Throwable çš„ç®€çŸ­æè¿°ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>public void printStackTrace()</strong> å°†æ­¤ Throwable åŠå…¶å›æº¯æ‰“å°åˆ°æ ‡å‡†é”™è¯¯æµã€‚ã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>public StackTraceElement [] getStackTrace()</strong> è¿”å›ä¸€ä¸ªåŒ…å«å †æ ˆå±‚æ¬¡çš„æ•°ç»„ã€‚ä¸‹æ ‡ä¸º0çš„å…ƒç´ ä»£è¡¨æ ˆé¡¶ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä»£è¡¨æ–¹æ³•è°ƒç”¨å †æ ˆçš„æ ˆåº•ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>public Throwable fillInStackTrace()</strong> ç”¨å½“å‰çš„è°ƒç”¨æ ˆå±‚æ¬¡å¡«å……Throwable å¯¹è±¡æ ˆå±‚æ¬¡ï¼Œæ·»åŠ åˆ°æ ˆå±‚æ¬¡ä»»ä½•å…ˆå‰ä¿¡æ¯ä¸­ã€‚</td></tr></tbody></table><h2 id="1-5-æ•è·å¼‚å¸¸"><a href="#1-5-æ•è·å¼‚å¸¸" class="headerlink" title="1.5 æ•è·å¼‚å¸¸"></a>1.5 æ•è·å¼‚å¸¸</h2><p>ä½¿ç”¨ try å’Œ catch å…³é”®å­—å¯ä»¥æ•è·å¼‚å¸¸ã€‚try&#x2F;catch ä»£ç å—æ”¾åœ¨å¼‚å¸¸å¯èƒ½å‘ç”Ÿçš„åœ°æ–¹ã€‚</p><p>try&#x2F;catchä»£ç å—ä¸­çš„ä»£ç ç§°ä¸ºä¿æŠ¤ä»£ç ï¼Œä½¿ç”¨ try&#x2F;catch çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-title function_">try</span><br>&#123;<br>   <span class="hljs-comment">// ç¨‹åºä»£ç </span><br>&#125;<span class="hljs-title function_">catch</span>(<span class="hljs-params">ExceptionName</span> <span class="hljs-params">e1</span>)<br>&#123;<br>   <span class="hljs-comment">//Catch å—</span><br>&#125;<br></code></pre></td></tr></table></figure><p>Catch è¯­å¥åŒ…å«è¦æ•è·å¼‚å¸¸ç±»å‹çš„å£°æ˜ã€‚å½“ä¿æŠ¤ä»£ç å—ä¸­å‘ç”Ÿä¸€ä¸ªå¼‚å¸¸æ—¶ï¼Œtry åé¢çš„ catch å—å°±ä¼šè¢«æ£€æŸ¥ã€‚</p><p>å¦‚æœå‘ç”Ÿçš„å¼‚å¸¸åŒ…å«åœ¨ catch å—ä¸­ï¼Œå¼‚å¸¸ä¼šè¢«ä¼ é€’åˆ°è¯¥ catch å—ï¼Œè¿™å’Œä¼ é€’ä¸€ä¸ªå‚æ•°åˆ°æ–¹æ³•æ˜¯ä¸€æ ·ã€‚</p><hr><h2 id="1-6-å¤šé‡æ•è·å—"><a href="#1-6-å¤šé‡æ•è·å—" class="headerlink" title="1.6 å¤šé‡æ•è·å—"></a>1.6 å¤šé‡æ•è·å—</h2><p>ä¸€ä¸ª try ä»£ç å—åé¢è·Ÿéšå¤šä¸ª catch ä»£ç å—çš„æƒ…å†µå°±å«å¤šé‡æ•è·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java">å¤šé‡æ•è·å—çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š<br><br><span class="hljs-keyword">try</span>&#123;  <br><br> <span class="hljs-comment">// ç¨‹åºä»£ç </span><br><br> &#125;<span class="hljs-keyword">catch</span>(å¼‚å¸¸ç±»å‹<span class="hljs-number">1</span> å¼‚å¸¸çš„å˜é‡å<span class="hljs-number">1</span>)&#123;<br><br>  <span class="hljs-comment">// ç¨‹åºä»£ç </span><br><br> &#125;<span class="hljs-keyword">catch</span>(å¼‚å¸¸ç±»å‹<span class="hljs-number">2</span> å¼‚å¸¸çš„å˜é‡å<span class="hljs-number">2</span>)&#123; <br><br> <span class="hljs-comment">// ç¨‹åºä»£ç </span><br><br> &#125;<span class="hljs-keyword">catch</span>(å¼‚å¸¸ç±»å‹<span class="hljs-number">3</span> å¼‚å¸¸çš„å˜é‡å<span class="hljs-number">3</span>)&#123;  <br><br><span class="hljs-comment">// ç¨‹åºä»£ç  </span><br><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç æ®µåŒ…å«äº† 3 ä¸ª catchå—ã€‚</p><p>å¯ä»¥åœ¨ try è¯­å¥åé¢æ·»åŠ ä»»æ„æ•°é‡çš„ catch å—ã€‚</p><p>å¦‚æœä¿æŠ¤ä»£ç ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œå¼‚å¸¸è¢«æŠ›ç»™ç¬¬ä¸€ä¸ª catch å—ã€‚</p><p>å¦‚æœæŠ›å‡ºå¼‚å¸¸çš„æ•°æ®ç±»å‹ä¸ ExceptionType1 åŒ¹é…ï¼Œå®ƒåœ¨è¿™é‡Œå°±ä¼šè¢«æ•è·ã€‚</p><p>å¦‚æœä¸åŒ¹é…ï¼Œå®ƒä¼šè¢«ä¼ é€’ç»™ç¬¬äºŒä¸ª catch å—ã€‚</p><p>å¦‚æ­¤ï¼Œç›´åˆ°å¼‚å¸¸è¢«æ•è·æˆ–è€…é€šè¿‡æ‰€æœ‰çš„ catch å—ã€‚</p><hr><h2 id="1-7throws-x2F-throw-å…³é”®å­—ï¼š"><a href="#1-7throws-x2F-throw-å…³é”®å­—ï¼š" class="headerlink" title="1.7throws&#x2F;throw å…³é”®å­—ï¼š"></a>1.7throws&#x2F;throw å…³é”®å­—ï¼š</h2><p>å¦‚æœä¸€ä¸ªæ–¹æ³•æ²¡æœ‰æ•è·åˆ°ä¸€ä¸ªæ£€æŸ¥æ€§å¼‚å¸¸ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å¿…é¡»ä½¿ç”¨ throws å…³é”®å­—æ¥å£°æ˜ã€‚throws å…³é”®å­—æ”¾åœ¨æ–¹æ³•ç­¾åçš„å°¾éƒ¨ã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ throw å…³é”®å­—æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œæ— è®ºå®ƒæ˜¯æ–°å®ä¾‹åŒ–çš„è¿˜æ˜¯åˆšæ•è·åˆ°çš„ã€‚</p><p>ä¸‹é¢æ–¹æ³•çš„å£°æ˜æŠ›å‡ºä¸€ä¸ª RemoteException å¼‚å¸¸ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.*; <br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">className</span> &#123;  <br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deposit</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span> <span class="hljs-keyword">throws</span> RemoteException  &#123;   <br><br> <span class="hljs-comment">// Method implementation    </span><br><br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RemoteException</span>(); <br><br> &#125; <br><br> <span class="hljs-comment">//Remainder of class definition</span><br><br> &#125;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªæ–¹æ³•å¯ä»¥å£°æ˜æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œå¤šä¸ªå¼‚å¸¸ä¹‹é—´ç”¨é€—å·éš”å¼€ã€‚</p><hr><h2 id="1-8finallyå…³é”®å­—"><a href="#1-8finallyå…³é”®å­—" class="headerlink" title="1.8finallyå…³é”®å­—"></a>1.8finallyå…³é”®å­—</h2><p>finally å…³é”®å­—ç”¨æ¥åˆ›å»ºåœ¨ try ä»£ç å—åé¢æ‰§è¡Œçš„ä»£ç å—ã€‚</p><p>æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œfinally ä»£ç å—ä¸­çš„ä»£ç æ€»ä¼šè¢«æ‰§è¡Œã€‚</p><p>åœ¨ finally ä»£ç å—ä¸­ï¼Œå¯ä»¥è¿è¡Œæ¸…ç†ç±»å‹ç­‰æ”¶å°¾å–„åæ€§è´¨çš„è¯­å¥ã€‚</p><p>finally ä»£ç å—å‡ºç°åœ¨ catch ä»£ç å—æœ€åï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span>&#123;  <br><br>  <span class="hljs-comment">// ç¨‹åºä»£ç  </span><br><br>&#125;<span class="hljs-keyword">catch</span>(å¼‚å¸¸ç±»å‹<span class="hljs-number">1</span> å¼‚å¸¸çš„å˜é‡å<span class="hljs-number">1</span>)&#123;  <br><br><span class="hljs-comment">// ç¨‹åºä»£ç </span><br><br>&#125;<span class="hljs-keyword">catch</span>(å¼‚å¸¸ç±»å‹<span class="hljs-number">2</span> å¼‚å¸¸çš„å˜é‡å<span class="hljs-number">2</span>)&#123;  <br><br><span class="hljs-comment">// ç¨‹åºä»£ç </span><br><br> &#125;<span class="hljs-keyword">finally</span>&#123; <br><br> <span class="hljs-comment">// ç¨‹åºä»£ç  </span><br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ä¸‹é¢äº‹é¡¹ï¼š</p><ul><li>catch ä¸èƒ½ç‹¬ç«‹äº try å­˜åœ¨ã€‚</li><li>åœ¨ try&#x2F;catch åé¢æ·»åŠ  finally å—å¹¶éå¼ºåˆ¶æ€§è¦æ±‚çš„ã€‚</li><li>try ä»£ç åä¸èƒ½æ—¢æ²¡ catch å—ä¹Ÿæ²¡ finally å—ã€‚</li><li>try, catch, finally å—ä¹‹é—´ä¸èƒ½æ·»åŠ ä»»ä½•ä»£ç ã€‚</li></ul><h2 id="1-9-try-with-resources"><a href="#1-9-try-with-resources" class="headerlink" title="1.9 try-with-resources"></a>1.9 try-with-resources</h2><p>JDK7 ä¹‹åï¼ŒJava æ–°å¢çš„ <strong>try-with-resource</strong> è¯­æ³•ç³–æ¥æ‰“å¼€èµ„æºï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¯­å¥æ‰§è¡Œå®Œæ¯•åç¡®ä¿æ¯ä¸ªèµ„æºéƒ½è¢«è‡ªåŠ¨å…³é—­ ã€‚</p><p>JDK7 ä¹‹å‰æ‰€æœ‰è¢«æ‰“å¼€çš„ç³»ç»Ÿèµ„æºï¼Œæ¯”å¦‚æµã€æ–‡ä»¶æˆ–è€… Socket è¿æ¥ç­‰ï¼Œéƒ½éœ€è¦è¢«å¼€å‘è€…æ‰‹åŠ¨å…³é—­ï¼Œå¦åˆ™å°†ä¼šé€ æˆèµ„æºæ³„éœ²ã€‚</p><figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-title function_">try</span> (<span class="hljs-variable">resource</span> <span class="hljs-variable">declaration</span>) &#123;<br>  <span class="hljs-comment">// ä½¿ç”¨çš„èµ„æº</span><br>&#125; <span class="hljs-title function_">catch</span> (<span class="hljs-title class_">ExceptionType</span> <span class="hljs-variable">e1</span>) &#123;<br>  <span class="hljs-comment">// å¼‚å¸¸å—</span><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="2-é”™è¯¯ä¸æ–­è¨€"><a href="#2-é”™è¯¯ä¸æ–­è¨€" class="headerlink" title="2 é”™è¯¯ä¸æ–­è¨€"></a>2 é”™è¯¯ä¸æ–­è¨€</h1><p>assertion(æ–­è¨€)æ˜¯ Java 1.4 å¼•äººçš„ä¸€ä¸ªæ–°ç‰¹æ€§,ç›®çš„æ˜¯è¾…åŠ©å¼€å‘äººå‘˜è°ƒè¯•å’Œæµ‹è¯•,æ˜¯åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„è°ƒè¯•æ–¹æ³•;ä¸ä»…ä»…å¦‚æ­¤,ä½¿ç”¨ assertionå¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­è¯æ˜ç¨‹åºçš„æ­£ç¡®æ€§,åªæ˜¯è¿™ç§ç”¨æ³•å¯¹ç³»ç»Ÿçš„æ•´ä½“è®¾è®¡æœ‰å¾ˆå¤§çš„æŒ‘æˆ˜,è€Œä¸”ç›®å‰å¾ˆå°‘å®ç”¨ã€‚ Java2åœ¨Java 1.4 çš„åŸºç¡€ä¸Šæ–°å¢äº†ä¸€ä¸ªå…³é”®å­—:assertã€‚åœ¨ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨å®ƒåˆ›å»ºä¸€ä¸ªæ–­è¨€(assertion),å…¶è¯­æ³•æœ‰å¦‚ä¸‹ä¸¤ç§å½¢å¼ã€‚</p><ol><li><h5 id="assert-condition"><a href="#assert-condition" class="headerlink" title="assert condition:"></a>assert condition:</h5></li></ol><p>  è¿™é‡Œçš„ condition æ˜¯ä¸€ä¸ªå¿…é¡»ä¸ºçœŸ(true)çš„è¡¨è¾¾å¼ã€‚å¦‚æœè¡¨è¾¾å¼çš„ç»“æœä¸º trueï¼Œé‚£ä¹ˆæ–­è¨€ä¸ºçœŸ,å¹¶ä¸”æ— ä»»ä½•è¡ŒåŠ¨;å¦‚æœè¡¨è¾¾å¼ä¸º false,åˆ™æ–­è¨€å¤±è´¥ï¼ŒæŠ›å‡ºä¸€ä¸ªAssertionErrorå¯¹è±¡è¿™ä¸ªAssertionError ç»§æ‰¿äºError å¯¹è±¡ï¼ŒErrorç»§æ‰¿äºThrowableã€‚Erroræ˜¯å’ŒExceptionå¹¶åˆ—çš„ä¸€ä¸ªé”™è¯¯å¯¹è±¡,é€šå¸¸ç”¨äºè¡¨è¾¾ç³»ç»Ÿçº§è¿è¡Œé”™è¯¯ã€‚</p><ol start="2"><li><h5 id="assert-condition-expr"><a href="#assert-condition-expr" class="headerlink" title="assert condition:expr;"></a>assert condition:expr;</h5></li></ol><p>  è¿™é‡Œçš„conditionå’Œä¸Šè¿°ä¸€æ ·ï¼Œå†’å·åè·Ÿä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé€šå¸¸ç”¨äºæ–­è¨€å¤±è´¥åçš„æç¤ºä¿¡æ¯ï¼Œå³å®ƒæ˜¯ä¸€ä¸ªä¼ åˆ°AssertionErroræ„é€ å‡½æ•°çš„å€¼ã€‚å¦‚æœæ–­è¨€å¤±è´¥ï¼Œè¯¥å€¼è¢«è½¬åŒ–ä¸ºå¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œå¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>  æ–­è¨€åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å…³é—­çš„ã€‚è¦åœ¨ç¼–è¯‘æ—¶å¯ç”¨æ–­è¨€ï¼Œéœ€è¦ä½¿ç”¨source 1.4æ ‡è®°ï¼Œå³ javac source 1.4Test.javaã€‚åœ¨è¿è¡Œæ—¶å¯ç”¨æ–­è¨€ï¼Œéœ€è¦ä½¿ç”¨-eaå‚æ•°ã€‚è¦åœ¨ç³»ç»Ÿç±»ä¸­å¯ç”¨å’Œ</p><p>ç¦ç”¨æ–­è¨€ -esa å’Œ -dsaå‚æ•°</p><h2 id="3-å£°æ˜è‡ªå®šä¹‰å¼‚å¸¸"><a href="#3-å£°æ˜è‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="3 å£°æ˜è‡ªå®šä¹‰å¼‚å¸¸"></a>3 å£°æ˜è‡ªå®šä¹‰å¼‚å¸¸</h2><p>åœ¨ Java ä¸­ä½ å¯ä»¥è‡ªå®šä¹‰å¼‚å¸¸ã€‚ç¼–å†™è‡ªå·±çš„å¼‚å¸¸ç±»æ—¶éœ€è¦è®°ä½ä¸‹é¢çš„å‡ ç‚¹ã€‚</p><ul><li>æ‰€æœ‰å¼‚å¸¸éƒ½å¿…é¡»æ˜¯ Throwable çš„å­ç±»ã€‚</li><li>å¦‚æœå¸Œæœ›å†™ä¸€ä¸ªæ£€æŸ¥æ€§å¼‚å¸¸ç±»ï¼Œåˆ™éœ€è¦ç»§æ‰¿ Exception ç±»ã€‚</li><li>å¦‚æœä½ æƒ³å†™ä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ç±»ï¼Œé‚£ä¹ˆéœ€è¦ç»§æ‰¿ RuntimeException ç±»ã€‚</li></ul><p>å¯ä»¥åƒä¸‹é¢è¿™æ ·å®šä¹‰è‡ªå·±çš„å¼‚å¸¸ç±»ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Exception</span></span>&#123; &#125;<br></code></pre></td></tr></table></figure><p>åªç»§æ‰¿Exception ç±»æ¥åˆ›å»ºçš„å¼‚å¸¸ç±»æ˜¯æ£€æŸ¥æ€§å¼‚å¸¸ç±»ã€‚</p><p>ä¸‹é¢çš„ InsufficientFundsException ç±»æ˜¯ç”¨æˆ·å®šä¹‰çš„å¼‚å¸¸ç±»ï¼Œå®ƒç»§æ‰¿è‡ª Exceptionã€‚</p><p>ä¸€ä¸ªå¼‚å¸¸ç±»å’Œå…¶å®ƒä»»ä½•ç±»ä¸€æ ·ï¼ŒåŒ…å«æœ‰å˜é‡å’Œæ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.chongba.exception;<br><br><span class="hljs-comment">// æ–‡ä»¶åInsufficientFundsException.java</span><br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œç»§æ‰¿Exceptionç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InsufficientFundsException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Exception</span><br>&#123;<br>    <span class="hljs-comment">//æ­¤å¤„çš„amountç”¨æ¥å‚¨å­˜å½“å‡ºç°å¼‚å¸¸ï¼ˆå–å‡ºé’±å¤šäºä½™é¢æ—¶ï¼‰æ‰€ç¼ºä¹çš„é’±</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> amount;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InsufficientFundsException</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span><br>    &#123;<br>        <span class="hljs-built_in">this</span>.amount = amount;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getAmount</span><span class="hljs-params">()</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> amount;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.chongba.exception;<br><br><span class="hljs-comment">// æ–‡ä»¶åç§° CheckingAccount.java</span><br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-comment">//æ­¤ç±»æ¨¡æ‹Ÿé“¶è¡Œè´¦æˆ·</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CheckingAccount</span><br>&#123;<br>    <span class="hljs-comment">//balanceä¸ºä½™é¢ï¼Œnumberä¸ºå¡å·</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> balance;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> number;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CheckingAccount</span><span class="hljs-params">(<span class="hljs-type">int</span> number)</span><br>    &#123;<br>        <span class="hljs-built_in">this</span>.number = number;<br>    &#125;<br>    <span class="hljs-comment">//æ–¹æ³•ï¼šå­˜é’±</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deposit</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span><br>    &#123;<br>        balance += amount;<br>    &#125;<br>    <span class="hljs-comment">//æ–¹æ³•ï¼šå–é’±</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">withdraw</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span> <span class="hljs-keyword">throws</span><br>            InsufficientFundsException<br>    &#123;<br>        <span class="hljs-keyword">if</span>(amount &lt;= balance)<br>        &#123;<br>            balance -= amount;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-type">double</span> <span class="hljs-variable">needs</span> <span class="hljs-operator">=</span> amount - balance;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InsufficientFundsException</span>(needs);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//æ–¹æ³•ï¼šè¿”å›ä½™é¢</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getBalance</span><span class="hljs-params">()</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> balance;<br>    &#125;<br>    <span class="hljs-comment">//æ–¹æ³•ï¼šè¿”å›å¡å·</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getNumber</span><span class="hljs-params">()</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> number;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String [] args)</span><br>    &#123;<br>        <span class="hljs-type">CheckingAccount</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CheckingAccount</span>(<span class="hljs-number">101</span>);<br>        System.out.println(<span class="hljs-string">&quot;å­˜å…¥ $500...&quot;</span>);<br>        c.deposit(<span class="hljs-number">500.00</span>);<br>        <span class="hljs-keyword">try</span><br>        &#123;<br>            System.out.println(<span class="hljs-string">&quot;\nå–å‡º $100...&quot;</span>);<br>            c.withdraw(<span class="hljs-number">100.00</span>);<br>            System.out.println(<span class="hljs-string">&quot;\nå–å‡º $600...&quot;</span>);<br>            c.withdraw(<span class="hljs-number">600.00</span>);<br>        &#125;<span class="hljs-keyword">catch</span>(InsufficientFundsException e)<br>        &#123;<br>            System.out.println(<span class="hljs-string">&quot;ä¸å¥½æ„æ€,ä½ çš„è¿˜å·®$&quot;</span><br>                    + e.getAmount());<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://img1.imgtp.com/2022/10/17/1MpVYgxL.png" alt="image-20221017105126848"></p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å¯¹äºå¼‚å¸¸å’Œé”™è¯¯æƒ…å†µçš„å¤„ç†ï¼Œç»Ÿç§°<br>ä¸ºå¼‚å¸¸å¤„ç†ã€‚<br>æ‰€æœ‰çš„å¼‚å¸¸éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç¥–å…ˆThrowable,å®ƒæœ‰ä¸¤ä¸ªé‡è¦çš„å­ç±»:Exception(å¼‚å¸¸å’ŒError(é”™è¯¯),äºŒè€…éƒ½æ˜¯Java å¼‚å¸¸å¤„ç†çš„é‡è¦å­ç±»ã€‚<br>Javaå¼‚å¸¸å¤„ç†ä¸»è¦ç”±5ä¸ªå…³é”®å­—æ§åˆ¶:</p><p>try.catch.throwã€throws å’Œ finally.</p><p>(1)<font color='red'>try</font>çš„æ„æ€æ˜¯è¯•è¯•å®ƒæ‰€åŒ…å«çš„ä»£ç æ®µä¸­æ˜¯å¦ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚</p><p>(2)<font color='red'>catch </font>è¡¨ç¤ºå½“æœ‰å¼‚å¸¸æ—¶,æŠ“ä½å®ƒ,å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†,ä½¿ç¨‹åºä¸å—å¼‚å¸¸çš„å½±å“è€Œç»§ç»­æ‰§è¡Œä¸‹å»ã€‚</p><p>(3)<font color='red'>throw</font>åœ¨ç¨‹åºä¸­æ˜ç¡®å¼•å‘å¼‚å¸¸ã€‚</p><p>(4)<font color='red'>throws</font>çš„ä½œç”¨æ˜¯å¦‚æœä¸€ä¸ªæ–¹æ³•å¯ä»¥å¼•å‘å¼‚å¸¸,è€Œå®ƒæœ¬èº«å¹¶ä¸å¤„ç†è¯¥å¼‚å¸¸,é‚£ä¹ˆå®ƒå¿…é¡»å°†è¯¥å¼‚å¸¸æŠ›ç»™è°ƒç”¨å®ƒçš„æ–¹æ³•ã€‚</p><p>(5)finallyæ˜¯æŒ‡æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½è¦è¢«æ‰§è¡Œçš„ä»£ç </p><p>assertion åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„è°ƒè¯•æ–¹æ³•ã€‚ä¸ä»…å¦‚æ­¤ï¼Œä½¿ç”¨assertion å¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­è¯æ˜ç¨‹åºçš„æ­£ç¡®æ€§,è¿™ç§ç”¨æ³•å¯¹ç³»ç»Ÿçš„æ•´ä½“è®¾è®¡æœ‰å¾ˆå¤§çš„æŒ‘æˆ˜ï¼Œç›®å‰å¾ˆå°‘æŠ•å…¥ä½¿ç”¨ã€‚</p><p>Java è¯­è¨€å…è®¸ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±»ã€‚è‡ªå®šä¹‰å¼‚å¸¸åŒæ ·è¦ç”¨try-catch-finallyæ•è·ï¼Œä½†å¿…é¡»ç”±ç”¨æˆ·è‡ªå·±æŠ›å‡º(thrownewMyException)ã€‚è‡ªå®šä¹‰å¼‚å¸¸ç±»å¿…é¡»æ˜¯Throwableçš„ç›´æ¥å­ç±»æˆ–é—´æ¥å­ç±»ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudé¢è¯•é¢˜â‘ </title>
    <link href="/Hexo/2022/05/12/springcloud%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <url>/Hexo/2022/05/12/springcloud%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹ Spring-Cloud"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹ Spring-Cloud" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹ Spring Cloud"></a><strong>ä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹ Spring Cloud</strong></h2><p>ä¸è®ºæ˜¯å•†ä¸šåº”ç”¨è¿˜æ˜¯ç”¨æˆ·åº”ç”¨ï¼Œåœ¨ä¸šåŠ¡åˆæœŸéƒ½å¾ˆç®€å•ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŠŠå®ƒå®ç°ä¸ºå•ä½“ç»“æ„çš„åº”ç”¨ã€‚ä½†æ˜¯ï¼Œéšç€ä¸šåŠ¡é€æ¸å‘å±•ï¼Œäº§å“æ€æƒ³ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå•ä½“ç»“æ„çš„åº”ç”¨ä¹Ÿä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚è¿™å°±ä¼šç»™åº”ç”¨å¸¦æ¥å¦‚ä¸‹çš„å‡ ä¸ªé—®é¢˜ï¼š</p><p>ä»£ç ç»“æ„æ··ä¹±ï¼šä¸šåŠ¡å¤æ‚ï¼Œå¯¼è‡´ä»£ç é‡å¾ˆå¤§ï¼Œç®¡ç†ä¼šè¶Šæ¥è¶Šå›°éš¾ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿä¼šç»™ä¸šåŠ¡çš„å¿«é€Ÿè¿­ä»£å¸¦æ¥å·¨å¤§æŒ‘æˆ˜ï¼›å¼€å‘æ•ˆç‡å˜ä½ï¼šå¼€å‘äººå‘˜åŒæ—¶å¼€å‘ä¸€å¥—ä»£ç ï¼Œå¾ˆéš¾é¿å…ä»£ç å†²çªã€‚å¼€å‘è¿‡ç¨‹ä¼šä¼´éšç€ä¸æ–­è§£å†³å†²çªçš„è¿‡ç¨‹ï¼Œè¿™ä¼šä¸¥é‡çš„å½±å“å¼€å‘æ•ˆç‡ï¼›æ’æŸ¥è§£å†³é—®é¢˜æˆæœ¬é«˜ï¼šçº¿ä¸Šä¸šåŠ¡å‘ç° bugï¼Œä¿®å¤ bug çš„è¿‡ç¨‹å¯èƒ½å¾ˆç®€å•ã€‚ä½†æ˜¯ï¼Œç”±äºåªæœ‰ä¸€å¥—ä»£ç ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘ã€æ‰“åŒ…ã€ä¸Šçº¿ï¼Œæˆæœ¬å¾ˆé«˜ã€‚ç”±äºå•ä½“ç»“æ„çš„åº”ç”¨éšç€ç³»ç»Ÿå¤æ‚åº¦çš„å¢é«˜ï¼Œä¼šæš´éœ²å‡ºå„ç§å„æ ·çš„é—®é¢˜ã€‚è¿‘äº›å¹´æ¥ï¼Œå¾®æœåŠ¡æ¶æ„é€æ¸å–ä»£äº†å•ä½“æ¶æ„ï¼Œä¸”è¿™ç§è¶‹åŠ¿å°†ä¼šè¶Šæ¥è¶Šæµè¡Œã€‚Spring Cloudæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„å¾®æœåŠ¡å¼€å‘æ¡†æ¶ï¼Œå·²ç»åœ¨ä¼ä¸šçº§å¼€å‘ä¸­å¤§é‡çš„åº”ç”¨ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯Spring-Cloud"><a href="#ä»€ä¹ˆæ˜¯Spring-Cloud" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring Cloud"></a><strong>ä»€ä¹ˆæ˜¯Spring Cloud</strong></h2><p>Spring Cloudæ˜¯ä¸€ç³»åˆ—æ¡†æ¶çš„æœ‰åºé›†åˆã€‚å®ƒåˆ©ç”¨Spring Bootçš„å¼€å‘ä¾¿åˆ©æ€§å·§å¦™åœ°ç®€åŒ–äº†åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€è®¾æ–½çš„å¼€å‘ï¼Œå¦‚æœåŠ¡å‘ç°æ³¨å†Œã€é…ç½®ä¸­å¿ƒã€æ™ºèƒ½è·¯ç”±ã€æ¶ˆæ¯æ€»çº¿ã€è´Ÿè½½å‡è¡¡ã€æ–­è·¯å™¨ã€æ•°æ®ç›‘æ§ç­‰ï¼Œéƒ½å¯ä»¥ç”¨Spring Bootçš„å¼€å‘é£æ ¼åšåˆ°ä¸€é”®å¯åŠ¨å’Œéƒ¨ç½²ã€‚Spring Cloudå¹¶æ²¡æœ‰é‡å¤åˆ¶é€ è½®å­ï¼Œå®ƒåªæ˜¯å°†å„å®¶å…¬å¸å¼€å‘çš„æ¯”è¾ƒæˆç†Ÿã€ç»å¾—èµ·å®é™…è€ƒéªŒçš„æœåŠ¡æ¡†æ¶ç»„åˆèµ·æ¥ï¼Œé€šè¿‡Spring Booté£æ ¼è¿›è¡Œå†å°è£…å±è”½æ‰äº†å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ï¼Œæœ€ç»ˆç»™å¼€å‘è€…ç•™å‡ºäº†ä¸€å¥—ç®€å•æ˜“æ‡‚ã€æ˜“éƒ¨ç½²å’Œæ˜“ç»´æŠ¤çš„åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘å·¥å…·åŒ…ã€‚</p><h2 id="Spring-Cloudè®¾è®¡ç›®æ ‡ä¸ä¼˜ç¼ºç‚¹"><a href="#Spring-Cloudè®¾è®¡ç›®æ ‡ä¸ä¼˜ç¼ºç‚¹" class="headerlink" title="Spring Cloudè®¾è®¡ç›®æ ‡ä¸ä¼˜ç¼ºç‚¹"></a><strong>Spring Cloudè®¾è®¡ç›®æ ‡ä¸ä¼˜ç¼ºç‚¹</strong></h2><p><strong>è®¾è®¡ç›®æ ‡</strong></p><p>åè°ƒå„ä¸ªå¾®æœåŠ¡ï¼Œç®€åŒ–åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘ã€‚</p><p><strong>ä¼˜ç¼ºç‚¹</strong></p><p>å¾®æœåŠ¡çš„æ¡†æ¶é‚£ä¹ˆå¤šæ¯”å¦‚ï¼šdubboã€Kubernetesï¼Œä¸ºä»€ä¹ˆå°±è¦ä½¿ç”¨Spring Cloudçš„å‘¢ï¼Ÿ</p><p>ä¼˜ç‚¹ï¼š</p><p>äº§å‡ºäºSpringå¤§å®¶æ—ï¼ŒSpringåœ¨ä¼ä¸šçº§å¼€å‘æ¡†æ¶ä¸­æ— äººèƒ½æ•Œï¼Œæ¥å¤´å¾ˆå¤§ï¼Œå¯ä»¥ä¿è¯åç»­çš„æ›´æ–°ã€å®Œå–„ç»„ä»¶ä¸°å¯Œï¼ŒåŠŸèƒ½é½å…¨ã€‚Spring Cloud ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›äº†éå¸¸å®Œæ•´çš„æ”¯æŒã€‚ä¾‹å¦‚ã€é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€å¾®æœåŠ¡ç½‘å…³ç­‰ï¼›Spring Cloud ç¤¾åŒºæ´»è·ƒåº¦å¾ˆé«˜ï¼Œæ•™ç¨‹å¾ˆä¸°å¯Œï¼Œé‡åˆ°é—®é¢˜å¾ˆå®¹æ˜“æ‰¾åˆ°è§£å†³æ–¹æ¡ˆæœåŠ¡æ‹†åˆ†ç²’åº¦æ›´ç»†ï¼Œè€¦åˆåº¦æ¯”è¾ƒä½ï¼Œæœ‰åˆ©äºèµ„æºé‡å¤åˆ©ç”¨ï¼Œæœ‰åˆ©äºæé«˜å¼€å‘æ•ˆç‡å¯ä»¥æ›´ç²¾å‡†çš„åˆ¶å®šä¼˜åŒ–æœåŠ¡æ–¹æ¡ˆï¼Œæé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å‡è½»å›¢é˜Ÿçš„æˆæœ¬ï¼Œå¯ä»¥å¹¶è¡Œå¼€å‘ï¼Œä¸ç”¨å…³æ³¨å…¶ä»–äººæ€ä¹ˆå¼€å‘ï¼Œå…ˆå…³æ³¨è‡ªå·±çš„å¼€å‘å¾®æœåŠ¡å¯ä»¥æ˜¯è·¨å¹³å°çš„ï¼Œå¯ä»¥ç”¨ä»»ä½•ä¸€ç§è¯­è¨€å¼€å‘é€‚äºäº’è”ç½‘æ—¶ä»£ï¼Œäº§å“è¿­ä»£å‘¨æœŸæ›´çŸ­ç¼ºç‚¹ï¼š</p><p>å¾®æœåŠ¡è¿‡å¤šï¼Œæ²»ç†æˆæœ¬é«˜ï¼Œä¸åˆ©äºç»´æŠ¤ç³»ç»Ÿåˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘çš„æˆæœ¬é«˜ï¼ˆå®¹é”™ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ç­‰ï¼‰å¯¹å›¢é˜ŸæŒ‘æˆ˜å¤§æ€»çš„æ¥è¯´ä¼˜ç‚¹å¤§è¿‡äºç¼ºç‚¹ï¼Œç›®å‰çœ‹æ¥Spring Cloudæ˜¯ä¸€å¥—éå¸¸å®Œå–„çš„åˆ†å¸ƒå¼æ¡†æ¶ï¼Œç›®å‰å¾ˆå¤šä¼ä¸šå¼€å§‹ç”¨å¾®æœåŠ¡ã€Spring Cloudçš„ä¼˜åŠ¿æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚å› æ­¤å¯¹äºæƒ³ç ”ç©¶å¾®æœåŠ¡æ¶æ„çš„åŒå­¦æ¥è¯´ï¼Œå­¦ä¹ Spring Cloudæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><h2 id="Spring-Cloudå‘å±•å‰æ™¯"><a href="#Spring-Cloudå‘å±•å‰æ™¯" class="headerlink" title="Spring Cloudå‘å±•å‰æ™¯"></a><strong>Spring Cloudå‘å±•å‰æ™¯</strong></h2><p>Spring Cloudå¯¹äºä¸­å°å‹äº’è”ç½‘å…¬å¸æ¥è¯´æ˜¯ä¸€ç§ç¦éŸ³ï¼Œå› ä¸ºè¿™ç±»å…¬å¸å¾€å¾€æ²¡æœ‰å®åŠ›æˆ–è€…æ²¡æœ‰è¶³å¤Ÿçš„èµ„é‡‘æŠ•å…¥å»å¼€å‘è‡ªå·±çš„åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€è®¾æ–½ï¼Œä½¿ç”¨Spring Cloudä¸€ç«™å¼è§£å†³æ–¹æ¡ˆèƒ½åœ¨ä»å®¹åº”å¯¹ä¸šåŠ¡å‘å±•çš„åŒæ—¶å¤§å¤§å‡å°‘å¼€å‘æˆæœ¬ã€‚åŒæ—¶ï¼Œéšç€è¿‘å‡ å¹´å¾®æœåŠ¡æ¶æ„å’ŒDockerå®¹å™¨æ¦‚å¿µçš„ç«çˆ†ï¼Œä¹Ÿä¼šè®©Spring Cloudåœ¨æœªæ¥è¶Šæ¥è¶Šâ€œäº‘â€åŒ–çš„è½¯ä»¶å¼€å‘é£æ ¼ä¸­ç«‹æœ‰ä¸€å¸­ä¹‹åœ°ï¼Œå°¤å…¶æ˜¯åœ¨äº”èŠ±å…«é—¨çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆä¸­æä¾›äº†æ ‡å‡†åŒ–çš„ã€å…¨ç«™å¼çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œæ„ä¹‰å¯èƒ½ä¼šå ªæ¯”å½“å¹´Servletè§„èŒƒçš„è¯ç”Ÿï¼Œæœ‰æ•ˆæ¨è¿›æœåŠ¡ç«¯è½¯ä»¶ç³»ç»ŸæŠ€æœ¯æ°´å¹³çš„è¿›æ­¥ã€‚</p><h2 id="Spring-Cloudæ•´ä½“æ¶æ„"><a href="#Spring-Cloudæ•´ä½“æ¶æ„" class="headerlink" title="Spring Cloudæ•´ä½“æ¶æ„"></a><strong>Spring Cloudæ•´ä½“æ¶æ„</strong></h2><p><a href="https://pics7.baidu.com/feed/c2fdfc039245d688f48700fdf95ab718d31b2404.jpeg?token=125e632360439127aa37eba7fbf97f68"><img src="https://s2.loli.net/2022/05/12/Qj3gBolAIOSwxJC.jpg" alt="img"></a></p><h2 id="Spring-Cloudä¸»è¦çš„å­é¡¹ç›®æœ‰å“ªäº›"><a href="#Spring-Cloudä¸»è¦çš„å­é¡¹ç›®æœ‰å“ªäº›" class="headerlink" title="Spring Cloudä¸»è¦çš„å­é¡¹ç›®æœ‰å“ªäº›"></a><strong>Spring Cloudä¸»è¦çš„å­é¡¹ç›®æœ‰å“ªäº›</strong></h2><p>Spring Cloudçš„å­é¡¹ç›®ï¼Œå¤§è‡´å¯åˆ†æˆä¸¤ç±»ï¼Œä¸€ç±»æ˜¯å¯¹ç°æœ‰æˆç†Ÿæ¡†æ¶â€Spring BootåŒ–â€çš„å°è£…å’ŒæŠ½è±¡ï¼Œä¹Ÿæ˜¯æ•°é‡æœ€å¤šçš„é¡¹ç›®ï¼›ç¬¬äºŒç±»æ˜¯å¼€å‘äº†ä¸€éƒ¨åˆ†åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºç¡€è®¾æ–½çš„å®ç°ï¼Œå¦‚Spring Cloud Streamæ‰®æ¼”çš„å°±æ˜¯kafka, ActiveMQè¿™æ ·çš„è§’è‰²ã€‚</p><h3 id="Spring-Cloud-Config"><a href="#Spring-Cloud-Config" class="headerlink" title="Spring Cloud Config"></a><strong>Spring Cloud Config</strong></h3><p>é›†ä¸­é…ç½®ç®¡ç†å·¥å…·ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç»Ÿä¸€çš„å¤–éƒ¨é…ç½®ç®¡ç†ï¼Œé»˜è®¤ä½¿ç”¨Gitæ¥å­˜å‚¨é…ç½®ï¼Œå¯ä»¥æ”¯æŒå®¢æˆ·ç«¯é…ç½®çš„åˆ·æ–°åŠåŠ å¯†ã€è§£å¯†æ“ä½œã€‚</p><h3 id="Spring-Cloud-Netflix"><a href="#Spring-Cloud-Netflix" class="headerlink" title="Spring Cloud Netflix"></a><strong>Spring Cloud Netflix</strong></h3><p>Netflix OSS å¼€æºç»„ä»¶é›†æˆï¼ŒåŒ…æ‹¬Eurekaã€Hystrixã€Ribbonã€Feignã€Zuulç­‰æ ¸å¿ƒç»„ä»¶ã€‚</p><p>Eurekaï¼šæœåŠ¡æ²»ç†ç»„ä»¶ï¼ŒåŒ…æ‹¬æœåŠ¡ç«¯çš„æ³¨å†Œä¸­å¿ƒå’Œå®¢æˆ·ç«¯çš„æœåŠ¡å‘ç°æœºåˆ¶ï¼›Ribbonï¼šè´Ÿè½½å‡è¡¡çš„æœåŠ¡è°ƒç”¨ç»„ä»¶ï¼Œå…·æœ‰å¤šç§è´Ÿè½½å‡è¡¡è°ƒç”¨ç­–ç•¥ï¼›Hystrixï¼šæœåŠ¡å®¹é”™ç»„ä»¶ï¼Œå®ç°äº†æ–­è·¯å™¨æ¨¡å¼ï¼Œä¸ºä¾èµ–æœåŠ¡çš„å‡ºé”™å’Œå»¶è¿Ÿæä¾›äº†å®¹é”™èƒ½åŠ›ï¼›Feignï¼šåŸºäºRibbonå’ŒHystrixçš„å£°æ˜å¼æœåŠ¡è°ƒç”¨ç»„ä»¶ï¼›Zuulï¼šAPIç½‘å…³ç»„ä»¶ï¼Œå¯¹è¯·æ±‚æä¾›è·¯ç”±åŠè¿‡æ»¤åŠŸèƒ½ã€‚</p><h3 id="Spring-Cloud-Bus"><a href="#Spring-Cloud-Bus" class="headerlink" title="Spring Cloud Bus"></a><strong>Spring Cloud Bus</strong></h3><p>ç”¨äºä¼ æ’­é›†ç¾¤çŠ¶æ€å˜åŒ–çš„æ¶ˆæ¯æ€»çº¿ï¼Œä½¿ç”¨è½»é‡çº§æ¶ˆæ¯ä»£ç†é“¾æ¥åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹ï¼Œå¯ä»¥ç”¨æ¥åŠ¨æ€åˆ·æ–°é›†ç¾¤ä¸­çš„æœåŠ¡é…ç½®ã€‚</p><h3 id="Spring-Cloud-Consul"><a href="#Spring-Cloud-Consul" class="headerlink" title="Spring Cloud Consul"></a><strong>Spring Cloud Consul</strong></h3><p>åŸºäºHashicorp Consulçš„æœåŠ¡æ²»ç†ç»„ä»¶ã€‚</p><h3 id="Spring-Cloud-Security"><a href="#Spring-Cloud-Security" class="headerlink" title="Spring Cloud Security"></a><strong>Spring Cloud Security</strong></h3><p>å®‰å…¨å·¥å…·åŒ…ï¼Œå¯¹Zuulä»£ç†ä¸­çš„è´Ÿè½½å‡è¡¡OAuth2å®¢æˆ·ç«¯åŠç™»å½•è®¤è¯è¿›è¡Œæ”¯æŒã€‚</p><h3 id="Spring-Cloud-Sleuth"><a href="#Spring-Cloud-Sleuth" class="headerlink" title="Spring Cloud Sleuth"></a><strong>Spring Cloud Sleuth</strong></h3><p>Spring Cloudåº”ç”¨ç¨‹åºçš„åˆ†å¸ƒå¼è¯·æ±‚é“¾è·¯è·Ÿè¸ªï¼Œæ”¯æŒä½¿ç”¨Zipkinã€HTraceå’ŒåŸºäºæ—¥å¿—ï¼ˆä¾‹å¦‚ELKï¼‰çš„è·Ÿè¸ªã€‚</p><h3 id="Spring-Cloud-Stream"><a href="#Spring-Cloud-Stream" class="headerlink" title="Spring Cloud Stream"></a><strong>Spring Cloud Stream</strong></h3><p>è½»é‡çº§äº‹ä»¶é©±åŠ¨å¾®æœåŠ¡æ¡†æ¶ï¼Œå¯ä»¥ä½¿ç”¨ç®€å•çš„å£°æ˜å¼æ¨¡å‹æ¥å‘é€åŠæ¥æ”¶æ¶ˆæ¯ï¼Œä¸»è¦å®ç°ä¸ºApache KafkaåŠRabbitMQã€‚</p><h3 id="Spring-Cloud-Task"><a href="#Spring-Cloud-Task" class="headerlink" title="Spring Cloud Task"></a><strong>Spring Cloud Task</strong></h3><p>ç”¨äºå¿«é€Ÿæ„å»ºçŸ­æš‚ã€æœ‰é™æ•°æ®å¤„ç†ä»»åŠ¡çš„å¾®æœåŠ¡æ¡†æ¶ï¼Œç”¨äºå‘åº”ç”¨ä¸­æ·»åŠ åŠŸèƒ½æ€§å’ŒéåŠŸèƒ½æ€§çš„ç‰¹æ€§ã€‚</p><h3 id="Spring-Cloud-Zookeeper"><a href="#Spring-Cloud-Zookeeper" class="headerlink" title="Spring Cloud Zookeeper"></a><strong>Spring Cloud Zookeeper</strong></h3><p>åŸºäºApache Zookeeperçš„æœåŠ¡æ²»ç†ç»„ä»¶ã€‚</p><h3 id="Spring-Cloud-Gateway"><a href="#Spring-Cloud-Gateway" class="headerlink" title="Spring Cloud Gateway"></a><strong>Spring Cloud Gateway</strong></h3><p>APIç½‘å…³ç»„ä»¶ï¼Œå¯¹è¯·æ±‚æä¾›è·¯ç”±åŠè¿‡æ»¤åŠŸèƒ½ã€‚</p><h3 id="Spring-Cloud-OpenFeign"><a href="#Spring-Cloud-OpenFeign" class="headerlink" title="Spring Cloud OpenFeign"></a><strong>Spring Cloud OpenFeign</strong></h3><p>åŸºäºRibbonå’ŒHystrixçš„å£°æ˜å¼æœåŠ¡è°ƒç”¨ç»„ä»¶ï¼Œå¯ä»¥åŠ¨æ€åˆ›å»ºåŸºäºSpring MVCæ³¨è§£çš„æ¥å£å®ç°ç”¨äºæœåŠ¡è°ƒç”¨ï¼Œåœ¨Spring Cloud 2.0ä¸­å·²ç»å–ä»£Feignæˆä¸ºäº†ä¸€ç­‰å…¬æ°‘ã€‚</p><h3 id="Spring-Cloudçš„ç‰ˆæœ¬å…³ç³»"><a href="#Spring-Cloudçš„ç‰ˆæœ¬å…³ç³»" class="headerlink" title="Spring Cloudçš„ç‰ˆæœ¬å…³ç³»"></a><strong>Spring Cloudçš„ç‰ˆæœ¬å…³ç³»</strong></h3><p>Spring Cloudæ˜¯ä¸€ä¸ªç”±è®¸å¤šå­é¡¹ç›®ç»„æˆçš„ç»¼åˆé¡¹ç›®ï¼Œå„å­é¡¹ç›®æœ‰ä¸åŒçš„å‘å¸ƒèŠ‚å¥ã€‚ä¸ºäº†ç®¡ç†Spring Cloudä¸å„å­é¡¹ç›®çš„ç‰ˆæœ¬ä¾èµ–å…³ç³»ï¼Œå‘å¸ƒäº†ä¸€ä¸ªæ¸…å•ï¼Œå…¶ä¸­åŒ…æ‹¬äº†æŸä¸ªSpring Cloudç‰ˆæœ¬å¯¹åº”çš„å­é¡¹ç›®ç‰ˆæœ¬ã€‚ä¸ºäº†é¿å…Spring Cloudç‰ˆæœ¬å·ä¸å­é¡¹ç›®ç‰ˆæœ¬å·æ··æ·†ï¼ŒSpring Cloudç‰ˆæœ¬é‡‡ç”¨äº†åç§°è€Œéç‰ˆæœ¬å·çš„å‘½åï¼Œè¿™äº›ç‰ˆæœ¬çš„åå­—é‡‡ç”¨äº†ä¼¦æ•¦åœ°é“ç«™çš„åå­—ï¼Œæ ¹æ®å­—æ¯è¡¨çš„é¡ºåºæ¥å¯¹åº”ç‰ˆæœ¬æ—¶é—´é¡ºåºï¼Œä¾‹å¦‚Angelæ˜¯ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼ŒBrixtonæ˜¯ç¬¬äºŒä¸ªç‰ˆæœ¬ã€‚å½“Spring Cloudçš„å‘å¸ƒå†…å®¹ç§¯ç´¯åˆ°ä¸´ç•Œç‚¹æˆ–è€…ä¸€ä¸ªé‡å¤§BUGè¢«è§£å†³åï¼Œä¼šå‘å¸ƒä¸€ä¸ªâ€service releasesâ€ç‰ˆæœ¬ï¼Œç®€ç§°SRXç‰ˆæœ¬ï¼Œæ¯”å¦‚Greenwich.SR2å°±æ˜¯Spring Cloudå‘å¸ƒçš„Greenwichç‰ˆæœ¬çš„ç¬¬2ä¸ªSRXç‰ˆæœ¬ã€‚ç›®å‰Spring Cloudçš„æœ€æ–°ç‰ˆæœ¬æ˜¯Hoxtonã€‚</p><h3 id="Spring-Cloudå’ŒSpringBootç‰ˆæœ¬å¯¹åº”å…³ç³»"><a href="#Spring-Cloudå’ŒSpringBootç‰ˆæœ¬å¯¹åº”å…³ç³»" class="headerlink" title="Spring Cloudå’ŒSpringBootç‰ˆæœ¬å¯¹åº”å…³ç³»"></a><strong>Spring Cloudå’ŒSpringBootç‰ˆæœ¬å¯¹åº”å…³ç³»</strong></h3><p><a href="https://pics3.baidu.com/feed/2934349b033b5bb508477c04544b1f3fb400bcd3.jpeg?token=79def496255e174bf756d09aa8b69d7f"><img src="https://s2.loli.net/2022/05/12/rSdVXJF2PHfRiWM.jpg" alt="img"></a></p><h3 id="Spring-Cloudå’Œå„å­é¡¹ç›®ç‰ˆæœ¬å¯¹åº”å…³ç³»"><a href="#Spring-Cloudå’Œå„å­é¡¹ç›®ç‰ˆæœ¬å¯¹åº”å…³ç³»" class="headerlink" title="Spring Cloudå’Œå„å­é¡¹ç›®ç‰ˆæœ¬å¯¹åº”å…³ç³»"></a><strong>Spring Cloudå’Œå„å­é¡¹ç›®ç‰ˆæœ¬å¯¹åº”å…³ç³»</strong></h3><p><a href="https://pics7.baidu.com/feed/838ba61ea8d3fd1faef401f354d6ef1997ca5f9d.jpeg?token=32e2b3b45691c682d077f0e79ed16ca4"><img src="https://s2.loli.net/2022/05/12/InEe3Wb712cZ5Mh.jpg" alt="img"></a></p><p><strong>æ³¨æ„ï¼šHoxtonç‰ˆæœ¬æ˜¯åŸºäºSpringBoot 2.2.xç‰ˆæœ¬æ„å»ºçš„ï¼Œä¸é€‚ç”¨äº1.5.xç‰ˆæœ¬ã€‚éšç€2019å¹´8æœˆSpringBoot 1.5.xç‰ˆæœ¬åœæ­¢ç»´æŠ¤ï¼ŒEdgwareç‰ˆæœ¬ä¹Ÿå°†åœæ­¢ç»´æŠ¤ã€‚</strong></p><h3 id="SpringBootå’ŒSpringCloudçš„åŒºåˆ«ï¼Ÿ"><a href="#SpringBootå’ŒSpringCloudçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="SpringBootå’ŒSpringCloudçš„åŒºåˆ«ï¼Ÿ"></a><strong>SpringBootå’ŒSpringCloudçš„åŒºåˆ«ï¼Ÿ</strong></h3><p>SpringBootä¸“æ³¨äºå¿«é€Ÿæ–¹ä¾¿çš„å¼€å‘å•ä¸ªä¸ªä½“å¾®æœåŠ¡ã€‚</p><p>SpringCloudæ˜¯å…³æ³¨å…¨å±€çš„å¾®æœåŠ¡åè°ƒæ•´ç†æ²»ç†æ¡†æ¶ï¼Œå®ƒå°†SpringBootå¼€å‘çš„ä¸€ä¸ªä¸ªå•ä½“å¾®æœåŠ¡æ•´åˆå¹¶ç®¡ç†èµ·æ¥ï¼Œ</p><p>ä¸ºå„ä¸ªå¾®æœåŠ¡ä¹‹é—´æä¾›ï¼Œé…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€è·¯ç”±ã€å¾®ä»£ç†ã€äº‹ä»¶æ€»çº¿ã€å…¨å±€é”ã€å†³ç­–ç«é€‰ã€åˆ†å¸ƒå¼ä¼šè¯ç­‰ç­‰é›†æˆæœåŠ¡</p><p>SpringBootå¯ä»¥ç¦»å¼€SpringCloudç‹¬ç«‹ä½¿ç”¨å¼€å‘é¡¹ç›®ï¼Œ ä½†æ˜¯SpringCloudç¦»ä¸å¼€SpringBoot ï¼Œå±äºä¾èµ–çš„å…³ç³»</p><p>SpringBootä¸“æ³¨äºå¿«é€Ÿã€æ–¹ä¾¿çš„å¼€å‘å•ä¸ªå¾®æœåŠ¡ä¸ªä½“ï¼ŒSpringCloudå…³æ³¨å…¨å±€çš„æœåŠ¡æ²»ç†æ¡†æ¶ã€‚</p><h3 id="ä½¿ç”¨-Spring-Boot-å¼€å‘åˆ†å¸ƒå¼å¾®æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹é—®é¢˜"><a href="#ä½¿ç”¨-Spring-Boot-å¼€å‘åˆ†å¸ƒå¼å¾®æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹é—®é¢˜" class="headerlink" title="ä½¿ç”¨ Spring Boot å¼€å‘åˆ†å¸ƒå¼å¾®æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹é—®é¢˜"></a><strong>ä½¿ç”¨ Spring Boot å¼€å‘åˆ†å¸ƒå¼å¾®æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹é—®é¢˜</strong></h3><p>ï¼ˆ1ï¼‰ä¸åˆ†å¸ƒå¼ç³»ç»Ÿç›¸å…³çš„å¤æ‚æ€§ - è¿™ç§å¼€é”€åŒ…æ‹¬ç½‘ç»œé—®é¢˜ï¼Œå»¶è¿Ÿå¼€é”€ï¼Œå¸¦å®½é—®é¢˜ï¼Œå®‰å…¨é—®é¢˜ã€‚</p><p>ï¼ˆ2ï¼‰æœåŠ¡å‘ç° - æœåŠ¡å‘ç°å·¥å…·ç®¡ç†ç¾¤é›†ä¸­çš„æµç¨‹å’ŒæœåŠ¡å¦‚ä½•æŸ¥æ‰¾å’Œäº’ç›¸äº¤è°ˆã€‚å®ƒæ¶‰åŠä¸€ä¸ªæœåŠ¡ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸­æ³¨å†ŒæœåŠ¡ï¼Œç„¶åèƒ½å¤ŸæŸ¥æ‰¾å¹¶è¿æ¥åˆ°è¯¥ç›®å½•ä¸­çš„æœåŠ¡ã€‚</p><p>ï¼ˆ3ï¼‰å†—ä½™ - åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å†—ä½™é—®é¢˜ã€‚</p><p>ï¼ˆ4ï¼‰è´Ÿè½½å¹³è¡¡ - è´Ÿè½½å¹³è¡¡æ”¹å–„è·¨å¤šä¸ªè®¡ç®—èµ„æºçš„å·¥ä½œè´Ÿè·ï¼Œè¯¸å¦‚è®¡ç®—æœºï¼Œè®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾è·¯ï¼Œä¸­å¤®å¤„ç†å•å…ƒï¼Œæˆ–ç£ç›˜é©±åŠ¨å™¨çš„åˆ†å¸ƒã€‚</p><p>ï¼ˆ5ï¼‰æ€§èƒ½é—®é¢˜ - ç”±äºå„ç§è¿è¥å¼€é”€å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>ï¼ˆ6ï¼‰éƒ¨ç½²å¤æ‚æ€§ - DevOpsçš„è¦æ±‚ã€‚</p><h3 id="æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯ä»€ä¹ˆæ„æ€ï¼ŸSpring-Cloud-å¦‚ä½•å®ç°ï¼Ÿ"><a href="#æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯ä»€ä¹ˆæ„æ€ï¼ŸSpring-Cloud-å¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯ä»€ä¹ˆæ„æ€ï¼ŸSpring Cloud å¦‚ä½•å®ç°ï¼Ÿ"></a><strong>æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯ä»€ä¹ˆæ„æ€ï¼ŸSpring Cloud å¦‚ä½•å®ç°ï¼Ÿ</strong></h3><p>å½“æˆ‘ä»¬å¼€å§‹ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨å±æ€§æ–‡ä»¶ä¸­è¿›è¡Œæ‰€æœ‰çš„é…ç½®ã€‚éšç€è¶Šæ¥è¶Šå¤šçš„æœåŠ¡å¼€å‘å’Œéƒ¨ç½²ï¼Œæ·»åŠ å’Œä¿®æ”¹è¿™äº›å±æ€§å˜å¾—æ›´åŠ å¤æ‚ã€‚æœ‰äº›æœåŠ¡å¯èƒ½ä¼šä¸‹é™ï¼Œè€ŒæŸäº›ä½ç½®å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚æ‰‹åŠ¨æ›´æ”¹å±æ€§å¯èƒ½ä¼šäº§ç”Ÿé—®é¢˜ã€‚Eureka æœåŠ¡æ³¨å†Œå’Œå‘ç°å¯ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹æä¾›å¸®åŠ©ã€‚ç”±äºæ‰€æœ‰æœåŠ¡éƒ½åœ¨ Eureka æœåŠ¡å™¨ä¸Šæ³¨å†Œå¹¶é€šè¿‡è°ƒç”¨ Eureka æœåŠ¡å™¨å®ŒæˆæŸ¥æ‰¾ï¼Œå› æ­¤æ— éœ€å¤„ç†æœåŠ¡åœ°ç‚¹çš„ä»»ä½•æ›´æ”¹å’Œå¤„ç†ã€‚</p><h3 id="Spring-Cloud-å’ŒdubboåŒºåˆ«"><a href="#Spring-Cloud-å’ŒdubboåŒºåˆ«" class="headerlink" title="Spring Cloud å’ŒdubboåŒºåˆ«?"></a><strong>Spring Cloud å’ŒdubboåŒºåˆ«?</strong></h3><p>ï¼ˆ1ï¼‰æœåŠ¡è°ƒç”¨æ–¹å¼ï¼šdubboæ˜¯RPCï¼ŒSpring Cloudæ˜¯Rest Apiã€‚</p><p>ï¼ˆ2ï¼‰æ³¨å†Œä¸­å¿ƒï¼šdubbo æ˜¯zookeeperï¼ŒSpring Cloudå¯ä»¥æ˜¯zookeeperæˆ–å…¶ä»–ã€‚</p><p>ï¼ˆ3ï¼‰æœåŠ¡ç½‘å…³ï¼šdubboæœ¬èº«æ²¡æœ‰å®ç°ï¼Œåªèƒ½é€šè¿‡å…¶ä»–ç¬¬ä¸‰æ–¹æŠ€æœ¯æ•´åˆï¼Œspringcloudæœ‰Zuulè·¯ç”±ç½‘å…³ï¼Œä½œä¸ºè·¯ç”±æœåŠ¡å™¨ï¼Œè¿›è¡Œæ¶ˆè´¹è€…çš„è¯·æ±‚åˆ†å‘,springcloudæ”¯æŒæ–­è·¯å™¨ï¼Œä¸gitå®Œç¾é›†æˆé…ç½®æ–‡ä»¶æ”¯æŒç‰ˆæœ¬æ§åˆ¶ï¼Œäº‹ç‰©æ€»çº¿å®ç°é…ç½®æ–‡ä»¶çš„æ›´æ–°ä¸æœåŠ¡è‡ªåŠ¨è£…é…ç­‰ç­‰ä¸€ç³»åˆ—çš„å¾®æœåŠ¡æ¶æ„è¦ç´ ã€‚</p><p>ï¼ˆ4ï¼‰æ¶æ„å®Œæ•´åº¦ï¼šSpring CloudåŒ…å«è¯¸å¤šå¾®æœåŠ¡ç»„ä»¶è¦ç´ ï¼Œå®Œæ•´åº¦ä¸Šæ¯”Dubboé«˜ã€‚</p><h1 id="Spring-Cloud-æé«˜-è¯•é¢˜"><a href="#Spring-Cloud-æé«˜-è¯•é¢˜" class="headerlink" title="Spring Cloud æé«˜ è¯•é¢˜"></a>Spring Cloud æé«˜ è¯•é¢˜</h1><h2 id="è´Ÿè½½å¹³è¡¡çš„æ„ä¹‰ä»€ä¹ˆï¼Ÿ"><a href="#è´Ÿè½½å¹³è¡¡çš„æ„ä¹‰ä»€ä¹ˆï¼Ÿ" class="headerlink" title="è´Ÿè½½å¹³è¡¡çš„æ„ä¹‰ä»€ä¹ˆï¼Ÿ"></a><strong>è´Ÿè½½å¹³è¡¡çš„æ„ä¹‰ä»€ä¹ˆï¼Ÿ</strong></h2><p>åœ¨è®¡ç®—ä¸­ï¼Œè´Ÿè½½å¹³è¡¡å¯ä»¥æ”¹å–„è·¨è®¡ç®—æœºï¼Œè®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾æ¥ï¼Œä¸­å¤®å¤„ç†å•å…ƒæˆ–ç£ç›˜é©±åŠ¨å™¨ç­‰å¤šç§è®¡ç®—èµ„æºçš„å·¥ä½œè´Ÿè½½åˆ†å¸ƒã€‚è´Ÿè½½å¹³è¡¡æ—¨åœ¨ä¼˜åŒ–èµ„æºä½¿ç”¨ï¼Œæœ€å¤§åŒ–ååé‡ï¼Œæœ€å°åŒ–å“åº”æ—¶é—´å¹¶é¿å…ä»»ä½•å•ä¸€èµ„æºçš„è¿‡è½½ã€‚ä½¿ç”¨å¤šä¸ªç»„ä»¶è¿›è¡Œè´Ÿè½½å¹³è¡¡è€Œä¸æ˜¯å•ä¸ªç»„ä»¶å¯èƒ½ä¼šé€šè¿‡å†—ä½™æ¥æé«˜å¯é æ€§å’Œå¯ç”¨æ€§ã€‚è´Ÿè½½å¹³è¡¡é€šå¸¸æ¶‰åŠä¸“ç”¨è½¯ä»¶æˆ–ç¡¬ä»¶ï¼Œä¾‹å¦‚å¤šå±‚äº¤æ¢æœºæˆ–åŸŸåç³»ç»ŸæœåŠ¡å™¨è¿›ç¨‹ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Hystrixï¼Ÿå®ƒå¦‚ä½•å®ç°å®¹é”™ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Hystrixï¼Ÿå®ƒå¦‚ä½•å®ç°å®¹é”™ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Hystrixï¼Ÿå®ƒå¦‚ä½•å®ç°å®¹é”™ï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯ Hystrixï¼Ÿå®ƒå¦‚ä½•å®ç°å®¹é”™ï¼Ÿ</strong></h2><p>Hystrix æ˜¯ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œæ—¨åœ¨éš”ç¦»è¿œç¨‹ç³»ç»Ÿï¼ŒæœåŠ¡å’Œç¬¬ä¸‰æ–¹åº“çš„è®¿é—®ç‚¹ï¼Œå½“å‡ºç°æ•…éšœæ˜¯ä¸å¯é¿å…çš„æ•…éšœæ—¶ï¼Œåœæ­¢çº§è”æ•…éšœå¹¶åœ¨å¤æ‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°å¼¹æ€§ã€‚</p><p>é€šå¸¸å¯¹äºä½¿ç”¨å¾®æœåŠ¡æ¶æ„å¼€å‘çš„ç³»ç»Ÿï¼Œæ¶‰åŠåˆ°è®¸å¤šå¾®æœåŠ¡ã€‚è¿™äº›å¾®æœåŠ¡å½¼æ­¤åä½œã€‚</p><p>æ€è€ƒä»¥ä¸‹å¾®æœåŠ¡</p><p><a href="https://pics2.baidu.com/feed/960a304e251f95ca198861d8a98fb538660952fa.jpeg?token=03f4dfc45ae8db58a10d992bf3f3eeb6"><img src="https://s2.loli.net/2022/05/12/gS3hfaxu2jKWwpQ.jpg" alt="img"></a></p><p>å‡è®¾å¦‚æœä¸Šå›¾ä¸­çš„å¾®æœåŠ¡ 9 å¤±è´¥äº†ï¼Œé‚£ä¹ˆä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•æˆ‘ä»¬å°†ä¼ æ’­ä¸€ä¸ªå¼‚å¸¸ã€‚ä½†è¿™ä»ç„¶ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚</p><p>éšç€å¾®æœåŠ¡æ•°é‡çš„å¢åŠ ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—æ›´åŠ å¤æ‚ã€‚å¾®æœåŠ¡çš„æ•°é‡å¯ä»¥é«˜è¾¾ 1000.è¿™æ˜¯ hystrix å‡ºç°çš„åœ°æ–¹ æˆ‘ä»¬å°†ä½¿ç”¨ Hystrix åœ¨è¿™ç§æƒ…å†µä¸‹çš„ Fallback æ–¹æ³•åŠŸèƒ½ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªæœåŠ¡ employee-consumer ä½¿ç”¨ç”± employee-consumer å…¬å¼€çš„æœåŠ¡ã€‚</p><p>ç®€åŒ–å›¾å¦‚ä¸‹æ‰€ç¤º</p><p><a href="https://pics5.baidu.com/feed/a1ec08fa513d2697f7d7632d096378fd4216d8dd.jpeg?token=da931c3e2d2a9acde844e3dfc1c11253"><img src="https://s2.loli.net/2022/05/12/pczL1WGZUklQ4Th.jpg" alt="img"></a></p><p>ç°åœ¨å‡è®¾ç”±äºæŸç§åŸå› ï¼Œemployee-producer å…¬å¼€çš„æœåŠ¡ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚æˆ‘ä»¬åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ Hystrix å®šä¹‰äº†ä¸€ä¸ªå›é€€æ–¹æ³•ã€‚è¿™ç§åå¤‡æ–¹æ³•åº”è¯¥å…·æœ‰ä¸å…¬å¼€æœåŠ¡ç›¸åŒçš„è¿”å›ç±»å‹ã€‚å¦‚æœæš´éœ²æœåŠ¡ä¸­å‡ºç°å¼‚å¸¸ï¼Œåˆ™å›é€€æ–¹æ³•å°†è¿”å›ä¸€äº›å€¼ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Hystrix-æ–­è·¯å™¨ï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Hystrix-æ–­è·¯å™¨ï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Hystrix æ–­è·¯å™¨ï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯ Hystrix æ–­è·¯å™¨ï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ</strong></h2><p>ç”±äºæŸäº›åŸå› ï¼Œemployee-consumer å…¬å¼€æœåŠ¡ä¼šå¼•å‘å¼‚å¸¸ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨Hystrix æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå›é€€æ–¹æ³•ã€‚å¦‚æœåœ¨å…¬å¼€æœåŠ¡ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™å›é€€æ–¹æ³•è¿”å›ä¸€äº›é»˜è®¤å€¼ã€‚</p><p><a href="https://pics0.baidu.com/feed/b17eca8065380cd7fa4c4e59fadc673258828157.jpeg?token=e4100ce085fe075e03cf6abba0c9207a"><img src="https://s2.loli.net/2022/05/12/3wruEl6W2XDiRtq.jpg" alt="img"></a></p><p>å¦‚æœ firstPage method() ä¸­çš„å¼‚å¸¸ç»§ç»­å‘ç”Ÿï¼Œåˆ™ Hystrix ç”µè·¯å°†ä¸­æ–­ï¼Œå¹¶ä¸”employeeä½¿ç”¨è€…å°†ä¸€èµ·è·³è¿‡ firtsPage æ–¹æ³•ï¼Œå¹¶ç›´æ¥è°ƒç”¨å›é€€æ–¹æ³•ã€‚æ–­è·¯å™¨çš„ç›®çš„æ˜¯ç»™firstPageæ–¹æ³•æˆ–firstPageæ–¹æ³•å¯èƒ½è°ƒç”¨çš„å…¶ä»–æ–¹æ³•ç•™å‡ºæ—¶é—´ï¼Œå¹¶å¯¼è‡´å¼‚å¸¸æ¢å¤ã€‚å¯èƒ½å‘ç”Ÿçš„æƒ…å†µæ˜¯ï¼Œåœ¨è´Ÿè½½è¾ƒå°çš„çŠ¶å†µä¸‹ï¼Œå¯¼è‡´å¼‚å¸¸çš„é—®é¢˜æœ‰æ›´å¥½çš„æ¢å¤æœºä¼š ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Netflix-Feignï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Netflix-Feignï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Netflix Feignï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯ Netflix Feignï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><p>Feign æ˜¯å—åˆ° Retrofitï¼ŒJAXRS-2.0 å’Œ WebSocket å¯å‘çš„ java å®¢æˆ·ç«¯è”ç¼–ç¨‹åºã€‚</p><p>Feign çš„ç¬¬ä¸€ä¸ªç›®æ ‡æ˜¯å°†çº¦æŸåˆ†æ¯çš„å¤æ‚æ€§ç»Ÿä¸€åˆ° http apisï¼Œè€Œä¸è€ƒè™‘å…¶ç¨³å®šæ€§ã€‚</p><p>åœ¨ employee-consumer çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† employee-producer ä½¿ç”¨ RESTæ¨¡æ¿å…¬å¼€çš„ REST æœåŠ¡ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬å¿…é¡»ç¼–å†™å¤§é‡ä»£ç æ‰èƒ½æ‰§è¡Œä»¥ä¸‹æ­¥éª¤</p><p>ï¼ˆ1ï¼‰ä½¿ç”¨åŠŸèƒ½åŒºè¿›è¡Œè´Ÿè½½å¹³è¡¡ã€‚</p><p>ï¼ˆ2ï¼‰è·å–æœåŠ¡å®ä¾‹ï¼Œç„¶åè·å–åŸºæœ¬ URLã€‚</p><p>ï¼ˆ3ï¼‰åˆ©ç”¨ REST æ¨¡æ¿æ¥ä½¿ç”¨æœåŠ¡ã€‚å‰é¢çš„ä»£ç å¦‚ä¸‹</p><p><a href="https://pics6.baidu.com/feed/42166d224f4a20a4f239571bceca5224730ed062.jpeg?token=0e46336c4129cdeb6dccc6fb796d6722"><img src="https://s2.loli.net/2022/05/12/efnkricv1jyPt4J.jpg" alt="img"></a></p><p>ä¹‹å‰çš„ä»£ç ï¼Œæœ‰åƒ NullPointerçš„æ¦‚ç‡ï¼Œå¹¶ä¸æ˜¯æœ€ä¼˜çš„ã€‚æˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä½¿ç”¨ Netflix Feign ä½¿è°ƒç”¨å˜å¾—æ›´åŠ ç®€æ´ã€‚è€Œä¸”å¦‚æœå½“ Netflix Ribbon ä¾èµ–å…³ç³»ä¹Ÿåœ¨ç±»è·¯å¾„ä¸­ï¼Œé‚£ä¹ˆ Feign é»˜è®¤ä¹Ÿä¼šè´Ÿè´£è´Ÿè½½å¹³è¡¡ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Spring-Cloud-Busï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Spring-Cloud-Busï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Spring Cloud Busï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯ Spring Cloud Busï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ</strong></h2><p>è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼šæˆ‘ä»¬æœ‰å¤šä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨ Spring Cloud Config è¯»å–å±æ€§ï¼Œè€ŒSpring Cloud Config ä» GIT è¯»å–è¿™äº›å±æ€§ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­ä¸­å¤šä¸ªå‘˜å·¥ç”Ÿäº§è€…æ¨¡å—ä» Employee Config Module è·å– Eureka æ³¨å†Œçš„è´¢äº§ã€‚</p><p><a href="https://pics0.baidu.com/feed/00e93901213fb80e471449966d49e528bb3894cc.jpeg?token=5ab7f820f950a1d2e1055c4df4e84a93"><img src="https://s2.loli.net/2022/05/12/tgn5RbKzPYcOQUv.jpg" alt="img"></a></p><p>å¦‚æœå‡è®¾ GIT ä¸­çš„ Eureka æ³¨å†Œå±æ€§æ›´æ”¹ä¸ºæŒ‡å‘å¦ä¸€å° Eureka æœåŠ¡å™¨ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸é‡æ–°å¯åŠ¨æœåŠ¡ä»¥è·å–æ›´æ–°çš„å±æ€§ã€‚</p><p>è¿˜æœ‰å¦ä¸€ç§ä½¿ç”¨æ‰§è¡Œå™¨ç«¯ç‚¹&#x2F;åˆ·æ–°çš„æ–¹å¼ã€‚ä½†æ˜¯æˆ‘ä»¬å°†ä¸å¾—ä¸ä¸ºæ¯ä¸ªæ¨¡å—å•ç‹¬è°ƒç”¨è¿™ä¸ª urlã€‚ä¾‹å¦‚ï¼Œå¦‚æœ Employee Producer1 éƒ¨ç½²åœ¨ç«¯å£ 8080 ä¸Šï¼Œåˆ™è°ƒç”¨ localhost:8080&#x2F;refreshã€‚åŒæ ·å¯¹äº Employee Producer2 localhost8081&#x2F;refresh ç­‰ç­‰ã€‚è¿™åˆå¾ˆéº»çƒ¦ã€‚è¿™å°±æ˜¯ Spring Cloud Bus å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚</p><p><a href="https://pics6.baidu.com/feed/5fdf8db1cb134954526dc01d08d6585ed0094af2.jpeg?token=6f8b90b1e810cdb8417d77deadd6dfe1"><img src="https://s2.loli.net/2022/05/12/CxjQd1TELpkzRwn.jpg" alt="img"></a></p><p>Spring Cloud Bus æä¾›äº†è·¨å¤šä¸ªå®ä¾‹åˆ·æ–°é…ç½®çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæˆ‘ä»¬åˆ·æ–° Employee Producer1ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ·æ–°æ‰€æœ‰å…¶ä»–å¿…éœ€çš„æ¨¡å—ã€‚å¦‚æœæˆ‘ä»¬æœ‰å¤šä¸ªå¾®æœåŠ¡å¯åŠ¨å¹¶è¿è¡Œï¼Œè¿™ç‰¹åˆ«æœ‰ç”¨ã€‚è¿™æ˜¯é€šè¿‡å°†æ‰€æœ‰å¾®æœåŠ¡è¿æ¥åˆ°å•ä¸ªæ¶ˆæ¯ä»£ç†æ¥å®ç°çš„ã€‚æ— è®ºä½•æ—¶åˆ·æ–°å®ä¾‹ï¼Œæ­¤äº‹ä»¶éƒ½ä¼šè®¢é˜…åˆ°ä¾¦å¬æ­¤ä»£ç†çš„æ‰€æœ‰å¾®æœåŠ¡ï¼Œå¹¶ä¸”å®ƒä»¬ä¹Ÿä¼šåˆ·æ–°ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨ç«¯ç‚¹&#x2F;æ€»çº¿&#x2F;åˆ·æ–°æ¥å®ç°å¯¹ä»»ä½•å•ä¸ªå®ä¾‹çš„åˆ·æ–°ã€‚</p><h2 id="Spring-Cloudæ–­è·¯å™¨çš„ä½œç”¨"><a href="#Spring-Cloudæ–­è·¯å™¨çš„ä½œç”¨" class="headerlink" title="Spring Cloudæ–­è·¯å™¨çš„ä½œç”¨"></a><strong>Spring Cloudæ–­è·¯å™¨çš„ä½œç”¨</strong></h2><p>å½“ä¸€ä¸ªæœåŠ¡è°ƒç”¨å¦ä¸€ä¸ªæœåŠ¡ç”±äºç½‘ç»œåŸå› æˆ–è‡ªèº«åŸå› å‡ºç°é—®é¢˜ï¼Œè°ƒç”¨è€…å°±ä¼šç­‰å¾…è¢«è°ƒç”¨è€…çš„å“åº” å½“æ›´å¤šçš„æœåŠ¡è¯·æ±‚åˆ°è¿™äº›èµ„æºå¯¼è‡´æ›´å¤šçš„è¯·æ±‚ç­‰å¾…ï¼Œå‘ç”Ÿè¿é”æ•ˆåº”ï¼ˆé›ªå´©æ•ˆåº”ï¼‰</p><p>æ–­è·¯å™¨æœ‰å®Œå…¨æ‰“å¼€çŠ¶æ€:ä¸€æ®µæ—¶é—´å†… è¾¾åˆ°ä¸€å®šçš„æ¬¡æ•°æ— æ³•è°ƒç”¨ å¹¶ä¸”å¤šæ¬¡ç›‘æµ‹æ²¡æœ‰æ¢å¤çš„è¿¹è±¡ æ–­è·¯å™¨å®Œå…¨æ‰“å¼€ é‚£ä¹ˆä¸‹æ¬¡è¯·æ±‚å°±ä¸ä¼šè¯·æ±‚åˆ°è¯¥æœåŠ¡</p><p>åŠå¼€:çŸ­æ—¶é—´å†… æœ‰æ¢å¤è¿¹è±¡ æ–­è·¯å™¨ä¼šå°†éƒ¨åˆ†è¯·æ±‚å‘ç»™è¯¥æœåŠ¡ï¼Œæ­£å¸¸è°ƒç”¨æ—¶ æ–­è·¯å™¨å…³é—­</p><p>å…³é—­ï¼šå½“æœåŠ¡ä¸€ç›´å¤„äºæ­£å¸¸çŠ¶æ€ èƒ½æ­£å¸¸è°ƒç”¨</p><h2 id="ä»€ä¹ˆæ˜¯Spring-Cloud-Config"><a href="#ä»€ä¹ˆæ˜¯Spring-Cloud-Config" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring Cloud Config?"></a><strong>ä»€ä¹ˆæ˜¯Spring Cloud Config?</strong></h2><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç”±äºæœåŠ¡æ•°é‡å·¨å¤šï¼Œä¸ºäº†æ–¹ä¾¿æœåŠ¡é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†ï¼Œå®æ—¶æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒç»„ä»¶ã€‚åœ¨Spring Cloudä¸­ï¼Œæœ‰åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒç»„ä»¶spring cloud config ï¼Œå®ƒæ”¯æŒé…ç½®æœåŠ¡æ”¾åœ¨é…ç½®æœåŠ¡çš„å†…å­˜ä¸­ï¼ˆå³æœ¬åœ°ï¼‰ï¼Œä¹Ÿæ”¯æŒæ”¾åœ¨è¿œç¨‹Gitä»“åº“ä¸­ã€‚åœ¨spring cloud config ç»„ä»¶ä¸­ï¼Œåˆ†ä¸¤ä¸ªè§’è‰²ï¼Œä¸€æ˜¯config serverï¼ŒäºŒæ˜¯config clientã€‚</p><p>ä½¿ç”¨ä¸€èˆ¬ä¹Ÿæ˜¯ä¸‰æ­¥ï¼š</p><p>ï¼ˆ1ï¼‰æ·»åŠ pomä¾èµ–</p><p>ï¼ˆ2ï¼‰é…ç½®æ–‡ä»¶æ·»åŠ ç›¸å…³é…ç½®</p><p>ï¼ˆ3ï¼‰å¯åŠ¨ç±»æ·»åŠ æ³¨è§£@EnableConfigServer</p><h2 id="ä»€ä¹ˆæ˜¯Spring-Cloud-Gateway"><a href="#ä»€ä¹ˆæ˜¯Spring-Cloud-Gateway" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring Cloud Gateway?"></a><strong>ä»€ä¹ˆæ˜¯Spring Cloud Gateway?</strong></h2><p>Spring Cloud Gatewayæ˜¯Spring Cloudå®˜æ–¹æ¨å‡ºçš„ç¬¬äºŒä»£ç½‘å…³æ¡†æ¶ï¼Œå–ä»£Zuulç½‘å…³ã€‚ç½‘å…³ä½œä¸ºæµé‡çš„æ§åˆ¶ï¼Œåœ¨å¾®æœåŠ¡ç³»ç»Ÿä¸­æœ‰ç€éå¸¸ä½œç”¨ï¼Œç½‘å…³å¸¸è§çš„åŠŸèƒ½æœ‰è·¯ç”±è½¬å‘ã€æƒé™æ ¡éªŒã€é™æµæ§åˆ¶ç­‰ä½œç”¨ã€‚</p><p>å®ƒä½¿ç”¨äº†ä¸€ä¸ªRouteLocatorBuilderçš„beanå»åˆ›å»ºè·¯ç”±ï¼Œé™¤äº†åˆ›å»ºè·¯ç”±ï¼ŒRouteLocatorBuilderä¹Ÿå¯ä»¥è®©ä½ æ·»åŠ å„ç§predicateså’Œfiltersï¼Œpredicatesæ–­è¨€çš„æ„æ€ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ ¹æ®å…·ä½“çš„è¯·æ±‚çš„è§„åˆ™ï¼Œç”±å…·ä½“çš„routeå»å¤„ç†ï¼Œfiltersæ˜¯å„ç§è¿‡æ»¤å™¨ï¼Œç”¨æ¥å¯¹è¯·æ±‚åšå„ç§åˆ¤æ–­å’Œä¿®æ”¹ã€‚</p><h1 id="Spring-Cloud-é«˜çº§-è¯•é¢˜"><a href="#Spring-Cloud-é«˜çº§-è¯•é¢˜" class="headerlink" title="Spring Cloud é«˜çº§ è¯•é¢˜"></a>Spring Cloud é«˜çº§ è¯•é¢˜</h1><h2 id="1-å¾®æœåŠ¡ä¹‹é—´æ˜¯å¦‚ä½•ç‹¬ç«‹é€šè®¯çš„"><a href="#1-å¾®æœåŠ¡ä¹‹é—´æ˜¯å¦‚ä½•ç‹¬ç«‹é€šè®¯çš„" class="headerlink" title="1. å¾®æœåŠ¡ä¹‹é—´æ˜¯å¦‚ä½•ç‹¬ç«‹é€šè®¯çš„"></a>1. å¾®æœåŠ¡ä¹‹é—´æ˜¯å¦‚ä½•ç‹¬ç«‹é€šè®¯çš„</h2><p>1.è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRemote Procedure Invocationï¼‰ï¼š</p><p> ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æœåŠ¡çš„æ³¨å†Œä¸å‘ç°</p><p> ç›´æ¥é€šè¿‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ¥è®¿é—®åˆ«çš„serviceã€‚</p><p> ä¼˜ç‚¹ï¼š</p><p> ç®€å•ï¼Œå¸¸è§,å› ä¸ºæ²¡æœ‰ä¸­é—´ä»¶ä»£ç†ï¼Œç³»ç»Ÿæ›´ç®€å•</p><p> ç¼ºç‚¹ï¼š</p><p> åªæ”¯æŒè¯·æ±‚&#x2F;å“åº”çš„æ¨¡å¼ï¼Œä¸æ”¯æŒåˆ«çš„ï¼Œæ¯”å¦‚é€šçŸ¥ã€è¯·æ±‚&#x2F;å¼‚æ­¥å“åº”ã€å‘å¸ƒ&#x2F;è®¢é˜…ã€å‘å¸ƒ&#x2F;å¼‚æ­¥å“åº”</p><p> é™ä½äº†å¯ç”¨æ€§ï¼Œå› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åœ¨è¯·æ±‚è¿‡ç¨‹ä¸­å¿…é¡»éƒ½æ˜¯å¯ç”¨çš„</p><p>2.æ¶ˆæ¯ï¼š</p><p> ä½¿ç”¨å¼‚æ­¥æ¶ˆæ¯æ¥åšæœåŠ¡é—´é€šä¿¡ã€‚æœåŠ¡é—´é€šè¿‡æ¶ˆæ¯ç®¡é“æ¥äº¤æ¢æ¶ˆæ¯ï¼Œä»è€Œé€šä¿¡ã€‚</p><p> ä¼˜ç‚¹:</p><p> æŠŠå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è§£è€¦ï¼Œæ›´æ¾è€¦åˆ</p><p> æé«˜å¯ç”¨æ€§ï¼Œå› ä¸ºæ¶ˆæ¯ä¸­é—´ä»¶ç¼“å­˜äº†æ¶ˆæ¯ï¼Œç›´åˆ°æ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹</p><p> æ”¯æŒå¾ˆå¤šé€šä¿¡æœºåˆ¶æ¯”å¦‚é€šçŸ¥ã€è¯·æ±‚&#x2F;å¼‚æ­¥å“åº”ã€å‘å¸ƒ&#x2F;è®¢é˜…ã€å‘å¸ƒ&#x2F;å¼‚æ­¥å“åº”</p><p> ç¼ºç‚¹:</p><p> æ¶ˆæ¯ä¸­é—´ä»¶æœ‰é¢å¤–çš„å¤æ‚</p><h2 id="2-å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆ-è¯´ä¸‹ä½ åœ¨é¡¹ç›®å¼€å‘ä¸­ç¢°åˆ°çš„å‘"><a href="#2-å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆ-è¯´ä¸‹ä½ åœ¨é¡¹ç›®å¼€å‘ä¸­ç¢°åˆ°çš„å‘" class="headerlink" title="2. å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆ?è¯´ä¸‹ä½ åœ¨é¡¹ç›®å¼€å‘ä¸­ç¢°åˆ°çš„å‘"></a><strong>2. å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆ?è¯´ä¸‹ä½ åœ¨é¡¹ç›®å¼€å‘ä¸­ç¢°åˆ°çš„å‘</strong></h2><p><strong>ä¼˜ç‚¹</strong></p><ul><li>æ¯ä¸€ä¸ªæœåŠ¡è¶³å¤Ÿå†…èš,ä»£ç å®¹æ˜“ç†è§£</li><li>å¼€å‘æ•ˆç‡æé«˜,ä¸€ä¸ªæœåŠ¡åªåšä¸€ä»¶äº‹</li><li>å¾®æœåŠ¡èƒ½å¤Ÿè¢«å°å›¢é˜Ÿå•ç‹¬å¼€å‘</li><li>å¾®æœåŠ¡æ˜¯æ¾è€¦åˆçš„,æ˜¯æœ‰åŠŸèƒ½æ„ä¹‰çš„æœåŠ¡</li><li>å¯ä»¥ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘,é¢å‘æ¥å£ç¼–ç¨‹</li><li>æ˜“äºä¸ç¬¬ä¸‰æ–¹é›†æˆ</li><li>å¾®æœåŠ¡åªæ˜¯ä¸šåŠ¡é€»è¾‘çš„ä»£ç ,ä¸ä¼šå’ŒHTML,CSSæˆ–è€…å…¶ä»–ç•Œé¢ç»„åˆ</li></ul><p> å¼€å‘ä¸­,ä¸¤ç§å¼€å‘æ¨¡å¼<br>â€‹ å‰åç«¯åˆ†ç¦»<br>â€‹ å…¨æ ˆå·¥ç¨‹å¸ˆ</p><ul><li>å¯ä»¥çµæ´»æ­é…,è¿æ¥å…¬å…±åº“&#x2F;è¿æ¥ç‹¬ç«‹åº“</li></ul><p><strong>ç¼ºç‚¹</strong></p><ul><li>åˆ†å¸ƒå¼ç³»ç»Ÿçš„è´Ÿè´£æ€§</li><li>å¤šæœåŠ¡è¿ç»´éš¾åº¦,éšç€æœåŠ¡çš„å¢åŠ ,è¿ç»´çš„å‹åŠ›ä¹Ÿåœ¨å¢å¤§</li><li>ç³»ç»Ÿéƒ¨ç½²ä¾èµ–</li><li>æœåŠ¡é—´é€šä¿¡æˆæœ¬</li><li>æ•°æ®ä¸€è‡´æ€§</li><li>ç³»ç»Ÿé›†æˆæµ‹è¯•</li><li>æ€§èƒ½ç›‘æ§</li></ul><h2 id="3-Eurekaå’ŒZooKeeperéƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½-è¯·è¯´è¯´ä¸¤ä¸ªçš„åŒºåˆ«"><a href="#3-Eurekaå’ŒZooKeeperéƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½-è¯·è¯´è¯´ä¸¤ä¸ªçš„åŒºåˆ«" class="headerlink" title="3 Eurekaå’ŒZooKeeperéƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½,è¯·è¯´è¯´ä¸¤ä¸ªçš„åŒºåˆ«"></a>3 Eurekaå’ŒZooKeeperéƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½,è¯·è¯´è¯´ä¸¤ä¸ªçš„åŒºåˆ«</h2><p>1.ZooKeeperä¿è¯çš„æ˜¯CP,Eurekaä¿è¯çš„æ˜¯AP</p><p>ZooKeeperåœ¨é€‰ä¸¾æœŸé—´æ³¨å†ŒæœåŠ¡ç˜«ç—ª,è™½ç„¶æœåŠ¡æœ€ç»ˆä¼šæ¢å¤,ä½†æ˜¯é€‰ä¸¾æœŸé—´ä¸å¯ç”¨çš„</p><p>Eurekaå„ä¸ªèŠ‚ç‚¹æ˜¯å¹³ç­‰å…³ç³»,åªè¦æœ‰ä¸€å°Eurekaå°±å¯ä»¥ä¿è¯æœåŠ¡å¯ç”¨,è€ŒæŸ¥è¯¢åˆ°çš„æ•°æ®å¹¶ä¸æ˜¯æœ€æ–°çš„</p><p>è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ä¼šå¯¼è‡´</p><p>Eurekaä¸å†ä»æ³¨å†Œåˆ—è¡¨ç§»é™¤å› é•¿æ—¶é—´æ²¡æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡</p><p>Eurekaä»ç„¶èƒ½å¤Ÿæ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚,ä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹(é«˜å¯ç”¨)</p><p>å½“ç½‘ç»œç¨³å®šæ—¶,å½“å‰å®ä¾‹æ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸­(æœ€ç»ˆä¸€è‡´æ€§)</p><p>Eurekaå¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹å¤±å»è”ç³»çš„æƒ…å†µ,è€Œä¸ä¼šåƒZooKeeperä¸€æ ·ä½¿å¾—æ•´ä¸ªæ³¨å†Œç³»ç»Ÿç˜«ç—ª</p><p>2.ZooKeeperæœ‰Leaderå’ŒFollowerè§’è‰²,Eurekaå„ä¸ªèŠ‚ç‚¹å¹³ç­‰</p><p>3.ZooKeeperé‡‡ç”¨è¿‡åŠæ•°å­˜æ´»åŸåˆ™,Eurekaé‡‡ç”¨è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶è§£å†³åˆ†åŒºé—®é¢˜</p><p>4.Eurekaæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå·¥ç¨‹,è€ŒZooKeeperåªæ˜¯ä¸€ä¸ªè¿›ç¨‹</p><h2 id="4-eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä»€ä¹ˆ"><a href="#4-eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä»€ä¹ˆ" class="headerlink" title="4. eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä»€ä¹ˆ?"></a>4. eurekaè‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä»€ä¹ˆ?</h2><p>å½“Eureka Server èŠ‚ç‚¹åœ¨çŸ­æ—¶é—´å†…ä¸¢å¤±äº†è¿‡å¤šå®ä¾‹çš„è¿æ¥æ—¶ï¼ˆæ¯”å¦‚ç½‘ç»œæ•…éšœæˆ–é¢‘ç¹å¯åŠ¨å…³é—­å®¢æˆ·ç«¯ï¼‰èŠ‚ç‚¹ä¼šè¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œä¿æŠ¤æ³¨å†Œä¿¡æ¯ï¼Œä¸å†åˆ é™¤æ³¨å†Œæ•°æ®ï¼Œæ•…éšœæ¢å¤æ—¶ï¼Œè‡ªåŠ¨é€€å‡ºè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚</p><h2 id="5ï¼šä»€ä¹ˆæ˜¯Netflix-Feignï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#5ï¼šä»€ä¹ˆæ˜¯Netflix-Feignï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="5ï¼šä»€ä¹ˆæ˜¯Netflix Feignï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>5ï¼šä»€ä¹ˆæ˜¯Netflix Feignï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p> ç­”ï¼š** Feignæ˜¯ä¸€ä¸ªå—åˆ°Retrofitï¼ŒJAXRS-2.0å’ŒWebSocketå¯å‘çš„javaåˆ°httpå®¢æˆ·ç«¯ç»‘å®šå™¨ã€‚Feignçš„ç¬¬ä¸€ä¸ªç›®æ ‡æ˜¯é™ä½å°†Denominatorç»Ÿä¸€ç»‘å®šåˆ°http apisçš„å¤æ‚æ€§ï¼Œæ— è®ºå…¶æ˜¯å¦å®‰å®ã€‚å‘˜å·¥ - æ¶ˆè´¹è€…ä¸­çš„å…ˆå‰ç¤ºä¾‹æˆ‘ä»¬ä½¿ç”¨<strong>RESTæ¨¡æ¿</strong> ä½¿ç”¨å‘˜å·¥ç”Ÿäº§è€…å…¬å¼€çš„RESTæœåŠ¡</p><p><a href="https://img-blog.csdnimg.cn/20190803094308847.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2MjA0NzY0,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/SRVheqd9rNZugoz.png" alt="img"></a></p><p>ä½†æ˜¯æˆ‘ä»¬å¿…é¡»ç¼–å†™å¤§é‡ä»£ç æ¥æ‰§è¡Œä»¥ä¸‹æ“ä½œ -</p><ul><li>ä½¿ç”¨åŠŸèƒ½åŒºè¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</li><li>è·å–æœåŠ¡å®ä¾‹ï¼Œç„¶åè·å–åŸºæœ¬URLã€‚</li><li>ä½¿ç”¨RESTæ¨¡æ¿æ¥æ¶ˆè´¹æœåŠ¡</li></ul>]]></content>
    
    
    <categories>
      
      <category>SpringCloudğŸ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringCloudğŸ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Tomcaté¢è¯•é¢˜ ä¸“é¢˜éƒ¨åˆ†</title>
    <link href="/Hexo/2022/05/12/Tomcat%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <url>/Hexo/2022/05/12/Tomcat%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="Tomcat-ä¸“é¢˜-éƒ¨åˆ†"><a href="#Tomcat-ä¸“é¢˜-éƒ¨åˆ†" class="headerlink" title="Tomcat ä¸“é¢˜ éƒ¨åˆ†"></a>Tomcat ä¸“é¢˜ éƒ¨åˆ†</h1><h2 id="Tomcatæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Tomcatæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Tomcatæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Tomcatæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Tomcat æœåŠ¡å™¨Apacheè½¯ä»¶åŸºé‡‘ä¼šé¡¹ç›®ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒé¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æ”¾æºä»£ç çš„Web åº”ç”¨æœåŠ¡å™¨ï¼Œå±äºè½»é‡çº§åº”ç”¨æœåŠ¡å™¨ï¼Œåœ¨ä¸­å°å‹ç³»ç»Ÿå’Œå¹¶å‘è®¿é—®ç”¨æˆ·ä¸æ˜¯å¾ˆå¤šçš„åœºåˆä¸‹è¢«æ™®éä½¿ç”¨ï¼Œæ˜¯å¼€å‘å’Œè°ƒè¯•JSP ç¨‹åºçš„é¦–é€‰ã€‚</p><h2 id="Tomcatçš„ç¼ºçœç«¯å£æ˜¯å¤šå°‘ï¼Œæ€ä¹ˆä¿®æ”¹"><a href="#Tomcatçš„ç¼ºçœç«¯å£æ˜¯å¤šå°‘ï¼Œæ€ä¹ˆä¿®æ”¹" class="headerlink" title="Tomcatçš„ç¼ºçœç«¯å£æ˜¯å¤šå°‘ï¼Œæ€ä¹ˆä¿®æ”¹"></a>Tomcatçš„ç¼ºçœç«¯å£æ˜¯å¤šå°‘ï¼Œæ€ä¹ˆä¿®æ”¹</h2><ol><li>æ‰¾åˆ°Tomcatç›®å½•ä¸‹çš„confæ–‡ä»¶å¤¹</li><li>è¿›å…¥confæ–‡ä»¶å¤¹é‡Œé¢æ‰¾åˆ°server.xmlæ–‡ä»¶</li><li>æ‰“å¼€server.xmlæ–‡ä»¶</li><li>åœ¨server.xmlæ–‡ä»¶é‡Œé¢æ‰¾åˆ°ä¸‹åˆ—ä¿¡æ¯</li><li>æŠŠConnectoræ ‡ç­¾çš„8080ç«¯å£æ”¹æˆä½ æƒ³è¦çš„ç«¯å£</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;Service <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;Catalina&quot;</span>&gt;<br>&lt;Connector <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;8080&quot;</span> <span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;HTTP/1.1&quot;</span> <br>               <span class="hljs-attribute">connectionTimeout</span>=<span class="hljs-string">&quot;20000&quot;</span> <br>               <span class="hljs-attribute">redirectPort</span>=<span class="hljs-string">&quot;8443&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><h2 id="tomcat-æœ‰å“ªå‡ ç§Connector-è¿è¡Œæ¨¡å¼-ä¼˜åŒ–-ï¼Ÿ"><a href="#tomcat-æœ‰å“ªå‡ ç§Connector-è¿è¡Œæ¨¡å¼-ä¼˜åŒ–-ï¼Ÿ" class="headerlink" title="tomcat æœ‰å“ªå‡ ç§Connector è¿è¡Œæ¨¡å¼(ä¼˜åŒ–)ï¼Ÿ"></a>tomcat æœ‰å“ªå‡ ç§Connector è¿è¡Œæ¨¡å¼(ä¼˜åŒ–)ï¼Ÿ</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å…ˆå¤§è‡´äº†è§£Tomcat Connectorçš„ä¸‰ç§è¿è¡Œæ¨¡å¼ã€‚</p><ul><li><strong>BIOï¼šåŒæ­¥å¹¶é˜»å¡</strong> ä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚ç¼ºç‚¹ï¼šå¹¶å‘é‡é«˜æ—¶ï¼Œçº¿ç¨‹æ•°è¾ƒå¤šï¼Œæµªè´¹èµ„æºã€‚Tomcat7æˆ–ä»¥ä¸‹ï¼Œåœ¨Linuxç³»ç»Ÿä¸­é»˜è®¤ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</li></ul><p><strong>é…åˆ¶é¡¹</strong>ï¼šprotocol&#x3D;â€HTTP&#x2F;1.1â€</p><ul><li><p>NIOï¼šåŒæ­¥éé˜»å¡IO</p><p>åˆ©ç”¨Javaçš„å¼‚æ­¥IOå¤„ç†ï¼Œå¯ä»¥é€šè¿‡å°‘é‡çš„çº¿ç¨‹å¤„ç†å¤§é‡çš„è¯·æ±‚ï¼Œå¯ä»¥å¤ç”¨åŒä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªconnection(å¤šè·¯å¤ç”¨)ã€‚</p><p>Tomcat8åœ¨Linuxç³»ç»Ÿä¸­é»˜è®¤ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p><p>Tomcat7å¿…é¡»ä¿®æ”¹Connectoré…ç½®æ¥å¯åŠ¨ã€‚</p><p><strong>é…åˆ¶é¡¹</strong>ï¼šprotocol&#x3D;â€org.apache.coyote.http11.Http11NioProtocolâ€</p><p><strong>å¤‡æ³¨</strong>ï¼šæˆ‘ä»¬å¸¸ç”¨çš„Jettyï¼ŒMinaï¼ŒZooKeeperç­‰éƒ½æ˜¯åŸºäºjava nioå®ç°.</p></li><li><p>APRï¼šå³Apache Portable Runtimeï¼Œä»æ“ä½œç³»ç»Ÿå±‚é¢è§£å†³ioé˜»å¡é—®é¢˜ã€‚*<em>AIOæ–¹å¼ï¼Œ*</em>*<em>å¼‚æ­¥éé˜»å¡IO</em>*(Java NIO2åˆå«AIO) ä¸»è¦ä¸NIOçš„åŒºåˆ«ä¸»è¦æ˜¯æ“ä½œç³»ç»Ÿçš„åº•å±‚åŒºåˆ«.å¯ä»¥åšä¸ªæ¯”å–»:æ¯”ä½œå¿«é€’ï¼ŒNIOå°±æ˜¯ç½‘è´­åè¦è‡ªå·±åˆ°å®˜ç½‘æŸ¥ä¸‹å¿«é€’æ˜¯å¦å·²ç»åˆ°äº†(å¯èƒ½æ˜¯å¤šæ¬¡)ï¼Œç„¶åè‡ªå·±å»å–å¿«é€’ï¼›AIOå°±æ˜¯å¿«é€’å‘˜é€è´§ä¸Šé—¨äº†(ä¸ç”¨å…³æ³¨å¿«é€’è¿›åº¦)ã€‚</p><p><strong>é…åˆ¶é¡¹</strong>ï¼šprotocol&#x3D;â€org.apache.coyote.http11.Http11AprProtocolâ€</p><p><strong>å¤‡æ³¨</strong>ï¼šéœ€åœ¨æœ¬åœ°æœåŠ¡å™¨å®‰è£…APRåº“ã€‚Tomcat7æˆ–Tomcat8åœ¨Win7æˆ–ä»¥ä¸Šçš„ç³»ç»Ÿä¸­å¯åŠ¨é»˜è®¤ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚Linuxå¦‚æœå®‰è£…äº†aprå’Œnativeï¼ŒTomcatç›´æ¥å¯åŠ¨å°±æ”¯æŒaprã€‚</p></li></ul><h2 id="Tomcatæœ‰å‡ ç§éƒ¨ç½²æ–¹å¼ï¼Ÿ"><a href="#Tomcatæœ‰å‡ ç§éƒ¨ç½²æ–¹å¼ï¼Ÿ" class="headerlink" title="Tomcatæœ‰å‡ ç§éƒ¨ç½²æ–¹å¼ï¼Ÿ"></a>Tomcatæœ‰å‡ ç§éƒ¨ç½²æ–¹å¼ï¼Ÿ</h2><p><strong>åœ¨Tomcatä¸­éƒ¨ç½²Webåº”ç”¨çš„æ–¹å¼ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç§ï¼š</strong></p><ol><li><p>åˆ©ç”¨Tomcatçš„è‡ªåŠ¨éƒ¨ç½²ã€‚</p><p>æŠŠwebåº”ç”¨æ‹·è´åˆ°webappsç›®å½•ã€‚Tomcatåœ¨å¯åŠ¨æ—¶ä¼šåŠ è½½ç›®å½•ä¸‹çš„åº”ç”¨ï¼Œå¹¶å°†ç¼–è¯‘åçš„ç»“æœæ”¾å…¥workç›®å½•ä¸‹ã€‚</p></li><li><p>ä½¿ç”¨Manager Appæ§åˆ¶å°éƒ¨ç½²ã€‚</p><p>åœ¨tomcatä¸»é¡µç‚¹å‡»â€œManager Appâ€ è¿›å…¥åº”ç”¨ç®¡ç†æ§åˆ¶å°ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªwebåº”ç”¨çš„è·¯å¾„æˆ–waræ–‡ä»¶ã€‚</p></li><li><p>ä¿®æ”¹conf&#x2F;server.xmlæ–‡ä»¶éƒ¨ç½²ã€‚</p><p>ä¿®æ”¹conf&#x2F;server.xmlæ–‡ä»¶ï¼Œå¢åŠ ContextèŠ‚ç‚¹å¯ä»¥éƒ¨ç½²åº”ç”¨ã€‚</p></li><li><p>å¢åŠ è‡ªå®šä¹‰çš„Webéƒ¨ç½²æ–‡ä»¶ã€‚</p><p>åœ¨conf&#x2F;Catalina&#x2F;localhost&#x2F; è·¯å¾„ä¸‹å¢åŠ  xyz.xmlæ–‡ä»¶ï¼Œå†…å®¹æ˜¯ContextèŠ‚ç‚¹ï¼Œå¯ä»¥éƒ¨ç½²åº”ç”¨ã€‚</p></li></ol><h2 id="tomcatå®¹å™¨æ˜¯å¦‚ä½•åˆ›å»ºservletç±»å®ä¾‹ï¼Ÿç”¨åˆ°äº†ä»€ä¹ˆåŸç†ï¼Ÿ"><a href="#tomcatå®¹å™¨æ˜¯å¦‚ä½•åˆ›å»ºservletç±»å®ä¾‹ï¼Ÿç”¨åˆ°äº†ä»€ä¹ˆåŸç†ï¼Ÿ" class="headerlink" title="tomcatå®¹å™¨æ˜¯å¦‚ä½•åˆ›å»ºservletç±»å®ä¾‹ï¼Ÿç”¨åˆ°äº†ä»€ä¹ˆåŸç†ï¼Ÿ"></a>tomcatå®¹å™¨æ˜¯å¦‚ä½•åˆ›å»ºservletç±»å®ä¾‹ï¼Ÿç”¨åˆ°äº†ä»€ä¹ˆåŸç†ï¼Ÿ</h2><ol><li>å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šè¯»å–åœ¨webappsç›®å½•ä¸‹æ‰€æœ‰çš„webåº”ç”¨ä¸­çš„web.xmlæ–‡ä»¶ï¼Œç„¶åå¯¹ <strong>xmlæ–‡ä»¶è¿›è¡Œè§£æï¼Œå¹¶è¯»å–servletæ³¨å†Œä¿¡æ¯</strong>ã€‚ç„¶åï¼Œå°†æ¯ä¸ªåº”ç”¨ä¸­æ³¨å†Œçš„servletç±»éƒ½è¿›è¡ŒåŠ è½½ï¼Œå¹¶é€šè¿‡ <strong>åå°„çš„æ–¹å¼å®ä¾‹åŒ–</strong>ã€‚ï¼ˆæœ‰æ—¶å€™ä¹Ÿæ˜¯åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶å®ä¾‹åŒ–ï¼‰</li><li>åœ¨servletæ³¨å†Œæ—¶åŠ ä¸Š1å¦‚æœä¸ºæ­£æ•°ï¼Œåˆ™åœ¨ä¸€å¼€å§‹å°±å®ä¾‹åŒ–ï¼Œå¦‚æœä¸å†™æˆ–ä¸ºè´Ÿæ•°ï¼Œåˆ™ç¬¬ä¸€æ¬¡è¯·æ±‚å®ä¾‹åŒ–ã€‚</li></ol><h2 id="Tomcatå·¥ä½œæ¨¡å¼"><a href="#Tomcatå·¥ä½œæ¨¡å¼" class="headerlink" title="Tomcatå·¥ä½œæ¨¡å¼"></a>Tomcatå·¥ä½œæ¨¡å¼</h2><p>Tomcatä½œä¸ºservletå®¹å™¨ï¼Œæœ‰ä¸‰ç§å·¥ä½œæ¨¡å¼ï¼š</p><ul><li>1ã€ç‹¬ç«‹çš„servletå®¹å™¨ï¼Œservletå®¹å™¨æ˜¯webæœåŠ¡å™¨çš„ä¸€éƒ¨åˆ†ï¼›</li><li>2ã€è¿›ç¨‹å†…çš„servletå®¹å™¨ï¼Œservletå®¹å™¨æ˜¯ä½œä¸ºwebæœåŠ¡å™¨çš„æ’ä»¶å’Œjavaå®¹å™¨çš„å®ç°ï¼ŒwebæœåŠ¡å™¨æ’ä»¶åœ¨å†…éƒ¨åœ°å€ç©ºé—´æ‰“å¼€ä¸€ä¸ªjvmä½¿å¾—javaå®¹å™¨åœ¨å†…éƒ¨å¾—ä»¥è¿è¡Œã€‚ååº”é€Ÿåº¦å¿«ä½†ä¼¸ç¼©æ€§ä¸è¶³ï¼›</li><li>3ã€è¿›ç¨‹å¤–çš„servletå®¹å™¨ï¼Œservletå®¹å™¨è¿è¡ŒäºwebæœåŠ¡å™¨ä¹‹å¤–çš„åœ°å€ç©ºé—´ï¼Œå¹¶ä½œä¸ºwebæœåŠ¡å™¨çš„æ’ä»¶å’Œjavaå®¹å™¨å®ç°çš„ç»“åˆã€‚ååº”æ—¶é—´ä¸å¦‚è¿›ç¨‹å†…ä½†ä¼¸ç¼©æ€§å’Œç¨³å®šæ€§æ¯”è¿›ç¨‹å†…ä¼˜ï¼›</li></ul><p>è¿›å…¥Tomcatçš„è¯·æ±‚å¯ä»¥æ ¹æ®Tomcatçš„å·¥ä½œæ¨¡å¼åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç±»ï¼š</p><ul><li>Tomcatä½œä¸ºåº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼šè¯·æ±‚æ¥è‡ªäºå‰ç«¯çš„webæœåŠ¡å™¨ï¼Œè¿™å¯èƒ½æ˜¯Apache, IIS, Nginxç­‰ï¼›</li><li>Tomcatä½œä¸ºç‹¬ç«‹æœåŠ¡å™¨ï¼šè¯·æ±‚æ¥è‡ªäºwebæµè§ˆå™¨ï¼›</li></ul><p>é¢è¯•æ—¶é—®åˆ°Tomcatç›¸å…³é—®é¢˜çš„å‡ ç‡å¹¶ä¸é«˜ï¼Œæ­£å¼å› ä¸ºå¦‚æ­¤ï¼Œå¾ˆå¤šäººå¿½ç•¥äº†å¯¹Tomcatç›¸å…³æŠ€èƒ½çš„æŒæ¡ï¼Œä¸‹é¢è¿™ä¸€ç¯‡æ–‡ç« æ•´ç†äº†Tomcatç›¸å…³çš„ç³»ç»Ÿæ¶æ„ï¼Œä»‹ç»äº†Serverã€Serviceã€Connectorã€Containerä¹‹é—´çš„å…³ç³»ï¼Œå„ä¸ªæ¨¡å—çš„åŠŸèƒ½ï¼Œå¯ä»¥è¯´æŠŠè¿™å‡ ä¸ªæŒæ¡ä½äº†ï¼ŒTomcatç›¸å…³çš„é¢è¯•é¢˜ä½ å°±ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜äº†ï¼å¦å¤–ï¼Œåœ¨é¢è¯•çš„æ—¶å€™ä½ è¿˜è¦æœ‰æ„è¯†æ— æ„è¯†çš„å¾€Tomcatè¿™ä¸ªåœ°æ–¹å¼•ï¼Œå°±æ¯”å¦‚è¯´å¸¸è§çš„Spring MVCçš„æ‰§è¡Œæµç¨‹ï¼Œä¸€ä¸ªURLçš„å®Œæ•´è°ƒç”¨é“¾è·¯ï¼Œè¿™äº›ç›¸å…³çš„é¢˜ç›®ä½ æ˜¯å¯ä»¥å¾€Tomcatå¤„ç†è¯·æ±‚çš„è¿™ä¸ªè¿‡ç¨‹å»è¯´çš„ï¼æŒæ¡äº†Tomcatè¿™äº›æŠ€èƒ½ï¼Œé¢è¯•å®˜ä¸€å®šä¼šä½©æœä½ çš„ï¼</p><p>å­¦äº†æœ¬ç« ä¹‹åä½ åº”è¯¥æ˜ç™½çš„æ˜¯ï¼š</p><ul><li>Serverã€Serviceã€Connectorã€Containerå››å¤§ç»„ä»¶ä¹‹é—´çš„å…³ç³»å’Œè”ç³»ï¼Œä»¥åŠä»–ä»¬çš„ä¸»è¦åŠŸèƒ½ç‚¹ï¼›</li><li>Tomcatæ‰§è¡Œçš„æ•´ä½“æ¶æ„ï¼Œè¯·æ±‚æ˜¯å¦‚ä½•è¢«ä¸€æ­¥æ­¥å¤„ç†çš„ï¼›</li><li>Engineã€Hostã€Contextã€Wrapperç›¸å…³çš„æ¦‚å¿µå…³ç³»ï¼›</li><li>Containeræ˜¯å¦‚ä½•å¤„ç†è¯·æ±‚çš„ï¼›</li><li>Tomcatç”¨åˆ°çš„ç›¸å…³è®¾è®¡æ¨¡å¼ï¼›</li></ul><h2 id="Tomcaté¡¶å±‚æ¶æ„"><a href="#Tomcaté¡¶å±‚æ¶æ„" class="headerlink" title="Tomcaté¡¶å±‚æ¶æ„"></a>Tomcaté¡¶å±‚æ¶æ„</h2><p>ä¿—è¯è¯´ï¼Œç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šçœ‹ä¸–ç•Œï¼Œä¸€èˆ¬å­¦ä¹ çš„æ—¶å€™ä¹Ÿæ˜¯å…ˆæ€»è§ˆä¸€ä¸‹æ•´ä½“ï¼Œç„¶åé€ä¸ªéƒ¨åˆ†ä¸ªä¸ªå‡»ç ´ï¼Œæœ€åå½¢æˆæ€è·¯ï¼Œäº†è§£å…·ä½“ç»†èŠ‚ï¼ŒTomcatçš„ç»“æ„å¾ˆå¤æ‚ï¼Œä½†æ˜¯ Tomcat éå¸¸çš„æ¨¡å—åŒ–ï¼Œæ‰¾åˆ°äº† Tomcat æœ€æ ¸å¿ƒçš„æ¨¡å—ï¼Œé—®é¢˜æ‰å¯ä»¥æ¸¸åˆƒè€Œè§£ï¼Œäº†è§£äº† Tomcat çš„æ•´ä½“æ¶æ„å¯¹ä»¥åæ·±å…¥äº†è§£ Tomcat æ¥è¯´è‡³å…³é‡è¦ï¼</p><p>å…ˆä¸Šä¸€å¼ Tomcatçš„é¡¶å±‚ç»“æ„å›¾ï¼ˆå›¾Aï¼‰ï¼Œå¦‚ä¸‹ï¼š</p><p><a href="https://img-blog.csdnimg.cn/20191021215330153.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/ZQrnPbYF1dBVlCq.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><p>Tomcatä¸­æœ€é¡¶å±‚çš„å®¹å™¨æ˜¯Serverï¼Œä»£è¡¨ç€æ•´ä¸ªæœåŠ¡å™¨ï¼Œä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªServerå¯ä»¥åŒ…å«è‡³å°‘ä¸€ä¸ªServiceï¼Œå³å¯ä»¥åŒ…å«å¤šä¸ªServiceï¼Œç”¨äºå…·ä½“æä¾›æœåŠ¡ã€‚</p><p>Serviceä¸»è¦åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šConnectorå’ŒContainerã€‚ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡º Tomcat çš„å¿ƒè„å°±æ˜¯è¿™ä¸¤ä¸ªç»„ä»¶ï¼Œä»–ä»¬çš„ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li>Connectorç”¨äºå¤„ç†è¿æ¥ç›¸å…³çš„äº‹æƒ…ï¼Œå¹¶æä¾›Socketä¸Requestè¯·æ±‚å’ŒResponseå“åº”ç›¸å…³çš„è½¬åŒ–;</li><li>Containerç”¨äºå°è£…å’Œç®¡ç†Servletï¼Œä»¥åŠå…·ä½“å¤„ç†Requestè¯·æ±‚ï¼›</li></ul><p>ä¸€ä¸ªTomcatä¸­åªæœ‰ä¸€ä¸ªServerï¼Œä¸€ä¸ªServerå¯ä»¥åŒ…å«å¤šä¸ªServiceï¼Œä¸€ä¸ªServiceåªæœ‰ä¸€ä¸ªContainerï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªConnectorsï¼Œè¿™æ˜¯å› ä¸ºä¸€ä¸ªæœåŠ¡å¯ä»¥æœ‰å¤šä¸ªè¿æ¥ï¼Œå¦‚åŒæ—¶æä¾›Httpå’ŒHttpsé“¾æ¥ï¼Œä¹Ÿå¯ä»¥æä¾›å‘ç›¸åŒåè®®ä¸åŒç«¯å£çš„è¿æ¥ï¼Œç¤ºæ„å›¾å¦‚ä¸‹ï¼ˆEngineã€Hostã€Contextä¸‹é¢ä¼šè¯´åˆ°ï¼‰ï¼š</p><p><a href="https://img-blog.csdnimg.cn/20191021215344811.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/f157JNkvo9dTF6s.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><p>å¤šä¸ª Connector å’Œä¸€ä¸ª Container å°±å½¢æˆäº†ä¸€ä¸ª Serviceï¼Œæœ‰äº† Service å°±å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡äº†ï¼Œä½†æ˜¯ Service è¿˜è¦ä¸€ä¸ªç”Ÿå­˜çš„ç¯å¢ƒï¼Œå¿…é¡»è¦æœ‰äººèƒ½å¤Ÿç»™å¥¹ç”Ÿå‘½ã€æŒæ¡å…¶ç”Ÿæ­»å¤§æƒï¼Œé‚£å°±é Server è«å±äº†ï¼æ‰€ä»¥æ•´ä¸ª Tomcat çš„ç”Ÿå‘½å‘¨æœŸç”± Server æ§åˆ¶ã€‚</p><p>å¦å¤–ï¼Œä¸Šè¿°çš„åŒ…å«å…³ç³»æˆ–è€…è¯´æ˜¯çˆ¶å­å…³ç³»ï¼Œéƒ½å¯ä»¥åœ¨tomcatçš„confç›®å½•ä¸‹çš„server.xmlé…ç½®æ–‡ä»¶ä¸­çœ‹å‡ºï¼Œä¸‹å›¾æ˜¯åˆ é™¤äº†æ³¨é‡Šå†…å®¹ä¹‹åçš„ä¸€ä¸ªå®Œæ•´çš„server.xmlé…ç½®æ–‡ä»¶ï¼ˆTomcatç‰ˆæœ¬ä¸º8.0ï¼‰</p><p><a href="https://img-blog.csdnimg.cn/20191021215355649.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/DpO7bAN5ZIrMl3s.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><p>è¯¦ç»†çš„é…ç½®æ–‡ä»¶å†…å®¹å¯ä»¥åˆ°Tomcatå®˜ç½‘æŸ¥çœ‹ï¼š<a href="http://tomcat.apache.org/tomcat-8.0-doc/index.html">Tomcaté…ç½®æ–‡ä»¶</a></p><p>ä¸Šè¾¹çš„é…ç½®æ–‡ä»¶ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¸‹è¾¹çš„ä¸€å¼ ç»“æ„å›¾æ›´æ¸…æ¥šçš„ç†è§£ï¼š</p><p><a href="https://img-blog.csdnimg.cn/2019102121541531.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/9ryKT3qCLHt62X1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><p>Serveræ ‡ç­¾è®¾ç½®çš„ç«¯å£å·ä¸º8005ï¼Œshutdown&#x3D;â€SHUTDOWNâ€ ï¼Œè¡¨ç¤ºåœ¨8005ç«¯å£ç›‘å¬â€œSHUTDOWNâ€å‘½ä»¤ï¼Œå¦‚æœæ¥æ”¶åˆ°äº†å°±ä¼šå…³é—­Tomcatã€‚ä¸€ä¸ªServeræœ‰ä¸€ä¸ªServiceï¼Œå½“ç„¶è¿˜å¯ä»¥è¿›è¡Œé…ç½®ï¼Œä¸€ä¸ªServiceæœ‰å¤šä¸ªConnectorï¼ŒServiceå·¦è¾¹çš„å†…å®¹éƒ½å±äºContainerçš„ï¼ŒServiceä¸‹è¾¹æ˜¯Connectorã€‚</p><h3 id="Tomcaté¡¶å±‚æ¶æ„å°ç»“"><a href="#Tomcaté¡¶å±‚æ¶æ„å°ç»“" class="headerlink" title="Tomcaté¡¶å±‚æ¶æ„å°ç»“"></a>Tomcaté¡¶å±‚æ¶æ„å°ç»“</h3><ol><li>Tomcatä¸­åªæœ‰ä¸€ä¸ªServerï¼Œä¸€ä¸ªServerå¯ä»¥æœ‰å¤šä¸ªServiceï¼Œä¸€ä¸ªServiceå¯ä»¥æœ‰å¤šä¸ªConnectorå’Œä¸€ä¸ªContainerï¼›</li><li>ServeræŒç®¡ç€æ•´ä¸ªTomcatçš„ç”Ÿæ­»å¤§æƒï¼›</li><li>Service æ˜¯å¯¹å¤–æä¾›æœåŠ¡çš„ï¼›</li><li>Connectorç”¨äºæ¥å—è¯·æ±‚å¹¶å°†è¯·æ±‚å°è£…æˆRequestå’ŒResponseæ¥å…·ä½“å¤„ç†ï¼›</li><li>Containerç”¨äºå°è£…å’Œç®¡ç†Servletï¼Œä»¥åŠå…·ä½“å¤„ç†requestè¯·æ±‚ï¼›</li></ol><p>çŸ¥é“äº†æ•´ä¸ªTomcaté¡¶å±‚çš„åˆ†å±‚æ¶æ„å’Œå„ä¸ªç»„ä»¶ä¹‹é—´çš„å…³ç³»ä»¥åŠä½œç”¨ï¼Œå¯¹äºç»å¤§å¤šæ•°çš„å¼€å‘äººå‘˜æ¥è¯´Serverå’ŒServiceå¯¹æˆ‘ä»¬æ¥è¯´ç¡®å®å¾ˆè¿œï¼Œè€Œæˆ‘ä»¬å¼€å‘ä¸­ç»å¤§éƒ¨åˆ†è¿›è¡Œé…ç½®çš„å†…å®¹æ˜¯å±äºConnectorå’ŒContainerçš„ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹Connectorå’ŒContainerã€‚</p><h2 id="Connectorå’ŒContainerçš„å¾®å¦™å…³ç³»"><a href="#Connectorå’ŒContainerçš„å¾®å¦™å…³ç³»" class="headerlink" title="Connectorå’ŒContainerçš„å¾®å¦™å…³ç³»"></a>Connectorå’ŒContainerçš„å¾®å¦™å…³ç³»</h2><p>ç”±ä¸Šè¿°å†…å®¹æˆ‘ä»¬å¤§è‡´å¯ä»¥çŸ¥é“ä¸€ä¸ªè¯·æ±‚å‘é€åˆ°Tomcatä¹‹åï¼Œé¦–å…ˆç»è¿‡Serviceç„¶åä¼šäº¤ç»™æˆ‘ä»¬çš„Connectorï¼ŒConnectorç”¨äºæ¥æ”¶è¯·æ±‚å¹¶å°†æ¥æ”¶çš„è¯·æ±‚å°è£…ä¸ºRequestå’ŒResponseæ¥å…·ä½“å¤„ç†ï¼ŒRequestå’ŒResponseå°è£…å®Œä¹‹åå†äº¤ç”±Containerè¿›è¡Œå¤„ç†ï¼ŒContainerå¤„ç†å®Œè¯·æ±‚ä¹‹åå†è¿”å›ç»™Connectorï¼Œæœ€ååœ¨ç”±Connectoré€šè¿‡Socketå°†å¤„ç†çš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ ·æ•´ä¸ªè¯·æ±‚çš„å°±å¤„ç†å®Œäº†ï¼</p><p>Connectoræœ€åº•å±‚ä½¿ç”¨çš„æ˜¯Socketæ¥è¿›è¡Œè¿æ¥çš„ï¼ŒRequestå’ŒResponseæ˜¯æŒ‰ç…§HTTPåè®®æ¥å°è£…çš„ï¼Œæ‰€ä»¥ConnectoråŒæ—¶éœ€è¦å®ç°TCP&#x2F;IPåè®®å’ŒHTTPåè®®ï¼</p><p>Tomcatæ—¢ç„¶éœ€è¦å¤„ç†è¯·æ±‚ï¼Œé‚£ä¹ˆè‚¯å®šéœ€è¦å…ˆæ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ï¼Œæ¥æ”¶è¯·æ±‚è¿™ä¸ªä¸œè¥¿æˆ‘ä»¬é¦–å…ˆå°±éœ€è¦çœ‹ä¸€ä¸‹Connectorï¼</p><p>Connectoræ¶æ„åˆ†æ</p><p>Connectorç”¨äºæ¥å—è¯·æ±‚å¹¶å°†è¯·æ±‚å°è£…æˆRequestå’ŒResponseï¼Œç„¶åäº¤ç»™Containerè¿›è¡Œå¤„ç†ï¼ŒContainerå¤„ç†å®Œä¹‹ååœ¨äº¤ç»™Connectorè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠConnectoråˆ†ä¸ºå››ä¸ªæ–¹é¢è¿›è¡Œç†è§£ï¼š</p><ol><li>Connectorå¦‚ä½•æ¥å—è¯·æ±‚çš„ï¼Ÿ</li><li>å¦‚ä½•å°†è¯·æ±‚å°è£…æˆRequestå’ŒResponseçš„ï¼Ÿ</li><li>å°è£…å®Œä¹‹åçš„Requestå’ŒResponseå¦‚ä½•äº¤ç»™Containerè¿›è¡Œå¤„ç†çš„ï¼Ÿ</li><li>Containerå¤„ç†å®Œä¹‹åå¦‚ä½•äº¤ç»™Connectorå¹¶è¿”å›ç»™å®¢æˆ·ç«¯çš„ï¼Ÿ</li></ol><p>é¦–å…ˆçœ‹ä¸€ä¸‹Connectorçš„ç»“æ„å›¾ï¼ˆå›¾Bï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><a href="https://img-blog.csdnimg.cn/20191021215430677.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/a6nh1U8QwNFcv3g.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><p>Connectorå°±æ˜¯ä½¿ç”¨ProtocolHandleræ¥å¤„ç†è¯·æ±‚çš„ï¼Œä¸åŒçš„ProtocolHandlerä»£è¡¨ä¸åŒçš„è¿æ¥ç±»å‹ï¼Œæ¯”å¦‚ï¼šHttp11Protocolä½¿ç”¨çš„æ˜¯æ™®é€šSocketæ¥è¿æ¥çš„ï¼ŒHttp11NioProtocolä½¿ç”¨çš„æ˜¯NioSocketæ¥è¿æ¥çš„ã€‚</p><p>å…¶ä¸­ProtocolHandlerç”±åŒ…å«äº†ä¸‰ä¸ªéƒ¨ä»¶ï¼šEndpointã€Processorã€Adapterã€‚</p><ol><li>Endpointç”¨æ¥å¤„ç†åº•å±‚Socketçš„ç½‘ç»œè¿æ¥ï¼ŒProcessorç”¨äºå°†Endpointæ¥æ”¶åˆ°çš„Socketå°è£…æˆRequestï¼ŒAdapterç”¨äºå°†Requestäº¤ç»™Containerè¿›è¡Œå…·ä½“çš„å¤„ç†ã€‚</li><li>Endpointç”±äºæ˜¯å¤„ç†åº•å±‚çš„Socketç½‘ç»œè¿æ¥ï¼Œå› æ­¤Endpointæ˜¯ç”¨æ¥å®ç°TCP&#x2F;IPåè®®çš„ï¼Œè€ŒProcessorç”¨æ¥å®ç°HTTPåè®®çš„ï¼ŒAdapterå°†è¯·æ±‚é€‚é…åˆ°Servletå®¹å™¨è¿›è¡Œå…·ä½“çš„å¤„ç†ã€‚</li><li>Endpointçš„æŠ½è±¡å®ç°AbstractEndpointé‡Œé¢å®šä¹‰çš„Acceptorå’ŒAsyncTimeoutä¸¤ä¸ªå†…éƒ¨ç±»å’Œä¸€ä¸ªHandleræ¥å£ã€‚Acceptorç”¨äºç›‘å¬è¯·æ±‚ï¼ŒAsyncTimeoutç”¨äºæ£€æŸ¥å¼‚æ­¥Requestçš„è¶…æ—¶ï¼ŒHandlerç”¨äºå¤„ç†æ¥æ”¶åˆ°çš„Socketï¼Œåœ¨å†…éƒ¨è°ƒç”¨Processorè¿›è¡Œå¤„ç†ã€‚</li></ol><p>è‡³æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥å¾ˆè½»æ¾çš„å›ç­”1ï¼Œ2ï¼Œ3çš„é—®é¢˜äº†ï¼Œä½†æ˜¯4è¿˜æ˜¯ä¸çŸ¥é“ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹Containeræ˜¯å¦‚ä½•è¿›è¡Œå¤„ç†çš„ä»¥åŠå¤„ç†å®Œä¹‹åæ˜¯å¦‚ä½•å°†å¤„ç†å®Œçš„ç»“æœè¿”å›ç»™Connectorçš„ï¼Ÿ</p><h2 id="Containeræ¶æ„åˆ†æ"><a href="#Containeræ¶æ„åˆ†æ" class="headerlink" title="Containeræ¶æ„åˆ†æ"></a>Containeræ¶æ„åˆ†æ</h2><p>Containerç”¨äºå°è£…å’Œç®¡ç†Servletï¼Œä»¥åŠå…·ä½“å¤„ç†Requestè¯·æ±‚ï¼Œåœ¨Containerå†…éƒ¨åŒ…å«äº†4ä¸ªå­å®¹å™¨ï¼Œç»“æ„å›¾å¦‚ä¸‹ï¼ˆå›¾Cï¼‰ï¼š</p><p><a href="https://img-blog.csdnimg.cn/20191021215443306.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/Q1xuavS9TDB8doL.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><p>4ä¸ªå­å®¹å™¨çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š</p><ol><li>Engineï¼šå¼•æ“ï¼Œç”¨æ¥ç®¡ç†å¤šä¸ªç«™ç‚¹ï¼Œä¸€ä¸ªServiceæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªEngineï¼›</li><li>Hostï¼šä»£è¡¨ä¸€ä¸ªç«™ç‚¹ï¼Œä¹Ÿå¯ä»¥å«è™šæ‹Ÿä¸»æœºï¼Œé€šè¿‡é…ç½®Hostå°±å¯ä»¥æ·»åŠ ç«™ç‚¹ï¼›</li><li>Contextï¼šä»£è¡¨ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå¯¹åº”ç€å¹³æ—¶å¼€å‘çš„ä¸€å¥—ç¨‹åºï¼Œæˆ–è€…ä¸€ä¸ªWEB-INFç›®å½•ä»¥åŠä¸‹é¢çš„web.xmlæ–‡ä»¶ï¼›</li><li>Wrapperï¼šæ¯ä¸€Wrapperå°è£…ç€ä¸€ä¸ªServletï¼›</li></ol><p>ä¸‹é¢æ‰¾ä¸€ä¸ªTomcatçš„æ–‡ä»¶ç›®å½•å¯¹ç…§ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><a href="https://img-blog.csdnimg.cn/20191021215455991.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/N8m6zZnflewMjs2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><p>Contextå’ŒHostçš„åŒºåˆ«æ˜¯Contextè¡¨ç¤ºä¸€ä¸ªåº”ç”¨ï¼Œæˆ‘ä»¬çš„Tomcatä¸­é»˜è®¤çš„é…ç½®ä¸‹webappsä¸‹çš„æ¯ä¸€ä¸ªæ–‡ä»¶å¤¹ç›®å½•éƒ½æ˜¯ä¸€ä¸ªContextï¼Œå…¶ä¸­ROOTç›®å½•ä¸­å­˜æ”¾ç€ä¸»åº”ç”¨ï¼Œå…¶ä»–ç›®å½•å­˜æ”¾ç€å­åº”ç”¨ï¼Œè€Œæ•´ä¸ªwebappså°±æ˜¯ä¸€ä¸ªHostç«™ç‚¹ã€‚</p><p>æˆ‘ä»¬è®¿é—®åº”ç”¨Contextçš„æ—¶å€™ï¼Œå¦‚æœæ˜¯ROOTä¸‹çš„åˆ™ç›´æ¥ä½¿ç”¨åŸŸåå°±å¯ä»¥è®¿é—®ï¼Œä¾‹å¦‚ï¼š<a href="http://www.baidu.com,å¦‚æœæ˜¯host(webapps)ä¸‹çš„å…¶ä»–åº”ç”¨,åˆ™å¯ä»¥ä½¿ç”¨www.baidu.com/docs%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%BD%93%E7%84%B6%E9%BB%98%E8%AE%A4%E6%8C%87%E5%AE%9A%E7%9A%84%E6%A0%B9%E5%BA%94%E7%94%A8%EF%BC%88ROOT%EF%BC%89%E6%98%AF%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E8%AE%BE%E5%AE%9A%E7%9A%84%EF%BC%8C%E5%8F%AA%E4%B8%8D%E8%BF%87Host%E7%AB%99%E7%82%B9%E4%B8%8B%E9%BB%98%E8%AE%A4%E7%9A%84%E4%B8%BB%E5%BA%94%E7%94%A8%E6%98%AFROOT%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E3%80%82">www.baidu.comï¼Œå¦‚æœæ˜¯Hostï¼ˆwebappsï¼‰ä¸‹çš„å…¶ä»–åº”ç”¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨www.baidu.com/docsè¿›è¡Œè®¿é—®ï¼Œå½“ç„¶é»˜è®¤æŒ‡å®šçš„æ ¹åº”ç”¨ï¼ˆROOTï¼‰æ˜¯å¯ä»¥è¿›è¡Œè®¾å®šçš„ï¼Œåªä¸è¿‡Hostç«™ç‚¹ä¸‹é»˜è®¤çš„ä¸»åº”ç”¨æ˜¯ROOTç›®å½•ä¸‹çš„ã€‚</a></p><p>çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬çŸ¥é“Containeræ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯è¿˜æ˜¯ä¸çŸ¥é“Containeræ˜¯å¦‚ä½•è¿›è¡Œè¯·æ±‚å¤„ç†çš„ä»¥åŠå¤„ç†å®Œä¹‹åæ˜¯å¦‚ä½•å°†å¤„ç†å®Œçš„ç»“æœè¿”å›ç»™Connectorçš„ï¼Ÿåˆ«æ€¥ï¼ä¸‹è¾¹å°±å¼€å§‹æ¢è®¨ä¸€ä¸‹Containeræ˜¯å¦‚ä½•è¿›è¡Œå¤„ç†çš„ï¼</p><h3 id="Containerå¦‚ä½•å¤„ç†è¯·æ±‚çš„"><a href="#Containerå¦‚ä½•å¤„ç†è¯·æ±‚çš„" class="headerlink" title="Containerå¦‚ä½•å¤„ç†è¯·æ±‚çš„"></a>Containerå¦‚ä½•å¤„ç†è¯·æ±‚çš„</h3><p>Containerå¤„ç†è¯·æ±‚æ˜¯ä½¿ç”¨Pipeline-Valveç®¡é“æ¥å¤„ç†çš„ï¼ï¼ˆValveæ˜¯é˜€é—¨ä¹‹æ„ï¼‰</p><p>Pipeline-Valveæ˜¯<strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼Œè´£ä»»é“¾æ¨¡å¼æ˜¯æŒ‡åœ¨ä¸€ä¸ªè¯·æ±‚å¤„ç†çš„è¿‡ç¨‹ä¸­æœ‰å¾ˆå¤šå¤„ç†è€…ä¾æ¬¡å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œæ¯ä¸ªå¤„ç†è€…è´Ÿè´£åšè‡ªå·±ç›¸åº”çš„å¤„ç†ï¼Œå¤„ç†å®Œä¹‹åå°†å¤„ç†åçš„ç»“æœè¿”å›ï¼Œå†è®©ä¸‹ä¸€ä¸ªå¤„ç†è€…ç»§ç»­å¤„ç†ã€‚</p><p><a href="https://img-blog.csdnimg.cn/20191021215507725.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/JOEWMp8ym4YTuxv.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><p>ä½†æ˜¯ï¼Pipeline-Valveä½¿ç”¨çš„è´£ä»»é“¾æ¨¡å¼å’Œæ™®é€šçš„è´£ä»»é“¾æ¨¡å¼æœ‰äº›ä¸åŒï¼åŒºåˆ«ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li>æ¯ä¸ªPipelineéƒ½æœ‰ç‰¹å®šçš„Valveï¼Œè€Œä¸”æ˜¯åœ¨ç®¡é“çš„æœ€åä¸€ä¸ªæ‰§è¡Œï¼Œè¿™ä¸ªValveå«åšBaseValveï¼ŒBaseValveæ˜¯ä¸å¯åˆ é™¤çš„ï¼›</li><li>åœ¨ä¸Šå±‚å®¹å™¨çš„ç®¡é“çš„BaseValveä¸­ä¼šè°ƒç”¨ä¸‹å±‚å®¹å™¨çš„ç®¡é“ã€‚</li></ul><p>æˆ‘ä»¬çŸ¥é“ContaineråŒ…å«å››ä¸ªå­å®¹å™¨ï¼Œè€Œè¿™å››ä¸ªå­å®¹å™¨å¯¹åº”çš„BaseValveåˆ†åˆ«åœ¨ï¼šStandardEngineValveã€StandardHostValveã€StandardContextValveã€StandardWrapperValveã€‚</p><p>Pipelineçš„å¤„ç†æµç¨‹å›¾å¦‚ä¸‹ï¼ˆå›¾Dï¼‰ï¼š</p><p><a href="https://img-blog.csdnimg.cn/20191021215519408.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/WlfnBetA7Tx9Uqc.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><ul><li>Connectoråœ¨æ¥æ”¶åˆ°è¯·æ±‚åä¼šé¦–å…ˆè°ƒç”¨æœ€é¡¶å±‚å®¹å™¨çš„Pipelineæ¥å¤„ç†ï¼Œè¿™é‡Œçš„æœ€é¡¶å±‚å®¹å™¨çš„Pipelineå°±æ˜¯EnginePipelineï¼ˆEngineçš„ç®¡é“ï¼‰ï¼›</li><li>åœ¨Engineçš„ç®¡é“ä¸­ä¾æ¬¡ä¼šæ‰§è¡ŒEngineValve1ã€EngineValve2ç­‰ç­‰ï¼Œæœ€åä¼šæ‰§è¡ŒStandardEngineValveï¼Œåœ¨StandardEngineValveä¸­ä¼šè°ƒç”¨Hostç®¡é“ï¼Œç„¶åå†ä¾æ¬¡æ‰§è¡ŒHostçš„HostValve1ã€HostValve2ç­‰ï¼Œæœ€ååœ¨æ‰§è¡ŒStandardHostValveï¼Œç„¶åå†ä¾æ¬¡è°ƒç”¨Contextçš„ç®¡é“å’ŒWrapperçš„ç®¡é“ï¼Œæœ€åæ‰§è¡Œåˆ°StandardWrapperValveã€‚</li><li>å½“æ‰§è¡Œåˆ°StandardWrapperValveçš„æ—¶å€™ï¼Œä¼šåœ¨StandardWrapperValveä¸­åˆ›å»ºFilterChainï¼Œå¹¶è°ƒç”¨å…¶doFilteræ–¹æ³•æ¥å¤„ç†è¯·æ±‚ï¼Œè¿™ä¸ªFilterChainåŒ…å«ç€æˆ‘ä»¬é…ç½®çš„ä¸è¯·æ±‚ç›¸åŒ¹é…çš„Filterå’ŒServletï¼Œå…¶doFilteræ–¹æ³•ä¼šä¾æ¬¡è°ƒç”¨æ‰€æœ‰çš„Filterçš„doFilteræ–¹æ³•å’ŒServletçš„serviceæ–¹æ³•ï¼Œè¿™æ ·è¯·æ±‚å°±å¾—åˆ°äº†å¤„ç†ï¼</li><li>å½“æ‰€æœ‰çš„Pipeline-Valveéƒ½æ‰§è¡Œå®Œä¹‹åï¼Œå¹¶ä¸”å¤„ç†å®Œäº†å…·ä½“çš„è¯·æ±‚ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥å°†è¿”å›çš„ç»“æœäº¤ç»™Connectoräº†ï¼ŒConnectoråœ¨é€šè¿‡Socketçš„æ–¹å¼å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Springæ¡†æ¶â¤</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Springmvcé¢è¯•é¢˜ ä¸“é¢˜éƒ¨åˆ†</title>
    <link href="/Hexo/2022/05/12/springMVC%E9%9D%A2%E8%AF%95/"/>
    <url>/Hexo/2022/05/12/springMVC%E9%9D%A2%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring-MVCé¢è¯•é¢˜-ä¸“é¢˜éƒ¨åˆ†"><a href="#Spring-MVCé¢è¯•é¢˜-ä¸“é¢˜éƒ¨åˆ†" class="headerlink" title="Spring MVCé¢è¯•é¢˜ ä¸“é¢˜éƒ¨åˆ†"></a>Spring MVCé¢è¯•é¢˜ ä¸“é¢˜éƒ¨åˆ†</h1><h3 id="ä»€ä¹ˆæ˜¯Spring-MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring-MVCçš„ç†è§£ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Spring-MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring-MVCçš„ç†è§£ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿç®€å•ä»‹ç»ä¸‹ä½ å¯¹Spring MVCçš„ç†è§£ï¼Ÿ</h3><p>Spring MVCæ˜¯ä¸€ä¸ªåŸºäºJavaçš„å®ç°äº†MVCè®¾è®¡æ¨¡å¼çš„è¯·æ±‚é©±åŠ¨ç±»å‹çš„è½»é‡çº§Webæ¡†æ¶ï¼Œé€šè¿‡æŠŠæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨åˆ†ç¦»ï¼Œå°†webå±‚è¿›è¡ŒèŒè´£è§£è€¦ï¼ŒæŠŠå¤æ‚çš„webåº”ç”¨åˆ†æˆé€»è¾‘æ¸…æ™°çš„å‡ éƒ¨åˆ†ï¼Œç®€åŒ–å¼€å‘ï¼Œå‡å°‘å‡ºé”™ï¼Œæ–¹ä¾¿ç»„å†…å¼€å‘äººå‘˜ä¹‹é—´çš„é…åˆã€‚</p><h3 id="Spring-MVCçš„ä¼˜ç‚¹"><a href="#Spring-MVCçš„ä¼˜ç‚¹" class="headerlink" title="Spring MVCçš„ä¼˜ç‚¹"></a>Spring MVCçš„ä¼˜ç‚¹</h3><p>ï¼ˆ1ï¼‰å¯ä»¥æ”¯æŒå„ç§è§†å›¾æŠ€æœ¯,è€Œä¸ä»…ä»…å±€é™äºJSPï¼›</p><p>ï¼ˆ2ï¼‰ä¸Springæ¡†æ¶é›†æˆï¼ˆå¦‚IoCå®¹å™¨ã€AOPç­‰ï¼‰ï¼›</p><p>ï¼ˆ3ï¼‰æ¸…æ™°çš„è§’è‰²åˆ†é…ï¼šå‰ç«¯æ§åˆ¶å™¨(dispatcherServlet) , è¯·æ±‚åˆ°å¤„ç†å™¨æ˜ å°„ï¼ˆhandlerMapping), å¤„ç†å™¨é€‚é…å™¨ï¼ˆHandlerAdapter), è§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰ã€‚</p><p>ï¼ˆ4ï¼‰ æ”¯æŒå„ç§è¯·æ±‚èµ„æºçš„æ˜ å°„ç­–ç•¥ã€‚</p><h2 id="æ ¸å¿ƒç»„ä»¶"><a href="#æ ¸å¿ƒç»„ä»¶" class="headerlink" title="æ ¸å¿ƒç»„ä»¶"></a>æ ¸å¿ƒç»„ä»¶</h2><h3 id="Spring-MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ"><a href="#Spring-MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ" class="headerlink" title="Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ"></a>Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰å‰ç«¯æ§åˆ¶å™¨ DispatcherServletï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p><p>ä½œç”¨ï¼šæ¥æ”¶è¯·æ±‚ã€å“åº”ç»“æœï¼Œç›¸å½“äºè½¬å‘å™¨ï¼Œæœ‰äº†DispatcherServlet å°±å‡å°‘äº†å…¶å®ƒç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚</p><p>ï¼ˆ2ï¼‰å¤„ç†å™¨æ˜ å°„å™¨HandlerMappingï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p><p>ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„URLæ¥æŸ¥æ‰¾Handler</p><p>ï¼ˆ3ï¼‰å¤„ç†å™¨é€‚é…å™¨HandlerAdapter</p><p>æ³¨æ„ï¼šåœ¨ç¼–å†™Handlerçš„æ—¶å€™è¦æŒ‰ç…§HandlerAdapterè¦æ±‚çš„è§„åˆ™å»ç¼–å†™ï¼Œè¿™æ ·é€‚é…å™¨HandlerAdapteræ‰å¯ä»¥æ­£ç¡®çš„å»æ‰§è¡ŒHandlerã€‚</p><p>ï¼ˆ4ï¼‰å¤„ç†å™¨Handlerï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p><p>ï¼ˆ5ï¼‰è§†å›¾è§£æå™¨ ViewResolverï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰</p><p>ä½œç”¨ï¼šè¿›è¡Œè§†å›¾çš„è§£æï¼Œæ ¹æ®è§†å›¾é€»è¾‘åè§£ææˆçœŸæ­£çš„è§†å›¾ï¼ˆviewï¼‰</p><p>ï¼ˆ6ï¼‰è§†å›¾Viewï¼ˆéœ€è¦ç¨‹åºå‘˜å¼€å‘jspï¼‰</p><p>Viewæ˜¯ä¸€ä¸ªæ¥å£ï¼Œ å®ƒçš„å®ç°ç±»æ”¯æŒä¸åŒçš„è§†å›¾ç±»å‹ï¼ˆjspï¼Œfreemarkerï¼Œpdfç­‰ç­‰ï¼‰</p><h3 id="ä»€ä¹ˆæ˜¯DispatcherServlet"><a href="#ä»€ä¹ˆæ˜¯DispatcherServlet" class="headerlink" title="ä»€ä¹ˆæ˜¯DispatcherServlet"></a>ä»€ä¹ˆæ˜¯DispatcherServlet</h3><p>Springçš„MVCæ¡†æ¶æ˜¯å›´ç»•DispatcherServletæ¥è®¾è®¡çš„ï¼Œå®ƒç”¨æ¥å¤„ç†æ‰€æœ‰çš„HTTPè¯·æ±‚å’Œå“åº”ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Spring-MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Spring MVCæ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ</h3><p>æ§åˆ¶å™¨æä¾›ä¸€ä¸ªè®¿é—®åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œæ­¤è¡Œä¸ºé€šå¸¸é€šè¿‡æœåŠ¡æ¥å£å®ç°ã€‚æ§åˆ¶å™¨è§£æç”¨æˆ·è¾“å…¥å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªç”±è§†å›¾å‘ˆç°ç»™ç”¨æˆ·çš„æ¨¡å‹ã€‚Springç”¨ä¸€ä¸ªéå¸¸æŠ½è±¡çš„æ–¹å¼å®ç°äº†ä¸€ä¸ªæ§åˆ¶å±‚ï¼Œå…è®¸ç”¨æˆ·åˆ›å»ºå¤šç§ç”¨é€”çš„æ§åˆ¶å™¨ã€‚</p><h3 id="Spring-MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼-å¦‚æœæ˜¯-æœ‰ä»€ä¹ˆé—®é¢˜-æ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#Spring-MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼-å¦‚æœæ˜¯-æœ‰ä»€ä¹ˆé—®é¢˜-æ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼,å¦‚æœæ˜¯,æœ‰ä»€ä¹ˆé—®é¢˜,æ€ä¹ˆè§£å†³ï¼Ÿ"></a>Spring MVCçš„æ§åˆ¶å™¨æ˜¯ä¸æ˜¯å•ä¾‹æ¨¡å¼,å¦‚æœæ˜¯,æœ‰ä»€ä¹ˆé—®é¢˜,æ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>ç­”ï¼šæ˜¯å•ä¾‹æ¨¡å¼,æ‰€ä»¥åœ¨å¤šçº¿ç¨‹è®¿é—®çš„æ—¶å€™æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜,ä¸è¦ç”¨åŒæ­¥,ä¼šå½±å“æ€§èƒ½çš„,è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ§åˆ¶å™¨é‡Œé¢ä¸èƒ½å†™å­—æ®µã€‚</p><h2 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h2><h3 id="è¯·æè¿°Spring-MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹-DispatcherServlet-çš„å·¥ä½œæµç¨‹ï¼Ÿ"><a href="#è¯·æè¿°Spring-MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹-DispatcherServlet-çš„å·¥ä½œæµç¨‹ï¼Ÿ" class="headerlink" title="è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ"></a>è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼›<br>ï¼ˆ2ï¼‰ DispatcherServletæ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨HandlerMappingå¤„ç†å™¨æ˜ å°„å™¨ï¼Œè¯·æ±‚è·å–Handleï¼›<br>ï¼ˆ3ï¼‰å¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚urlæ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨(å¦‚æœæœ‰åˆ™ç”Ÿæˆ)ä¸€å¹¶è¿”å›ç»™DispatcherServletï¼›<br>ï¼ˆ4ï¼‰DispatcherServlet è°ƒç”¨ HandlerAdapterå¤„ç†å™¨é€‚é…å™¨ï¼›<br>ï¼ˆ5ï¼‰HandlerAdapter ç»è¿‡é€‚é…è°ƒç”¨ å…·ä½“å¤„ç†å™¨(Handlerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨)ï¼›<br>ï¼ˆ6ï¼‰Handleræ‰§è¡Œå®Œæˆè¿”å›ModelAndViewï¼›<br>ï¼ˆ7ï¼‰HandlerAdapterå°†Handleræ‰§è¡Œç»“æœModelAndViewè¿”å›ç»™DispatcherServletï¼›<br>ï¼ˆ8ï¼‰DispatcherServletå°†ModelAndViewä¼ ç»™ViewResolverè§†å›¾è§£æå™¨è¿›è¡Œè§£æï¼›<br>ï¼ˆ9ï¼‰ViewResolverè§£æåè¿”å›å…·ä½“Viewï¼›<br>ï¼ˆ10ï¼‰DispatcherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰<br>ï¼ˆ11ï¼‰DispatcherServletå“åº”ç”¨æˆ·ã€‚</p><p><a href="https://img-blog.csdnimg.cn/20200208211439106.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/05/12/JK36WMs9LpcRyYk.png" alt="img"></a></p><h2 id="MVCæ¡†æ¶"><a href="#MVCæ¡†æ¶" class="headerlink" title="MVCæ¡†æ¶"></a>MVCæ¡†æ¶</h2><h3 id="MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›"><a href="#MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›" class="headerlink" title="MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›"></a>MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›</h3><p>mvcæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼ˆè®¾è®¡æ¨¡å¼å°±æ˜¯æ—¥å¸¸å¼€å‘ä¸­ç¼–å†™ä»£ç çš„ä¸€ç§å¥½çš„æ–¹æ³•å’Œç»éªŒçš„æ€»ç»“ï¼‰ã€‚æ¨¡å‹ï¼ˆmodelï¼‰-è§†å›¾ï¼ˆviewï¼‰-æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ï¼Œä¸‰å±‚æ¶æ„çš„è®¾è®¡æ¨¡å¼ã€‚ç”¨äºå®ç°å‰ç«¯é¡µé¢çš„å±•ç°ä¸åç«¯ä¸šåŠ¡æ•°æ®å¤„ç†çš„åˆ†ç¦»ã€‚</p><p>mvcè®¾è®¡æ¨¡å¼çš„å¥½å¤„</p><p>1.åˆ†å±‚è®¾è®¡ï¼Œå®ç°äº†ä¸šåŠ¡ç³»ç»Ÿå„ä¸ªç»„ä»¶ä¹‹é—´çš„è§£è€¦ï¼Œæœ‰åˆ©äºä¸šåŠ¡ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§ã€‚</p><p>2.æœ‰åˆ©äºç³»ç»Ÿçš„å¹¶è¡Œå¼€å‘ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p><h2 id="å¸¸ç”¨æ³¨è§£"><a href="#å¸¸ç”¨æ³¨è§£" class="headerlink" title="å¸¸ç”¨æ³¨è§£"></a>å¸¸ç”¨æ³¨è§£</h2><h3 id="æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ"><a href="#æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ"></a>æ³¨è§£åŸç†æ˜¯ä»€ä¹ˆ</h3><p>æ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿äº†Annotationçš„ç‰¹æ®Šæ¥å£ï¼Œå…¶å…·ä½“å®ç°ç±»æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†ç±»ã€‚æˆ‘ä»¬é€šè¿‡åå°„è·å–æ³¨è§£æ—¶ï¼Œè¿”å›çš„æ˜¯Javaè¿è¡Œæ—¶ç”Ÿæˆçš„åŠ¨æ€ä»£ç†å¯¹è±¡ã€‚é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰æ³¨è§£çš„æ–¹æ³•ï¼Œä¼šæœ€ç»ˆè°ƒç”¨AnnotationInvocationHandlerçš„invokeæ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šä»memberValuesè¿™ä¸ªMapä¸­ç´¢å¼•å‡ºå¯¹åº”çš„å€¼ã€‚è€ŒmemberValuesçš„æ¥æºæ˜¯Javaå¸¸é‡æ± ã€‚</p><h3 id="Spring-MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"><a href="#Spring-MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"></a>Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h3><p>@RequestMappingï¼šç”¨äºå¤„ç†è¯·æ±‚ url æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œåˆ™è¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p><p>@RequestBodyï¼šæ³¨è§£å®ç°æ¥æ”¶httpè¯·æ±‚çš„jsonæ•°æ®ï¼Œå°†jsonè½¬æ¢ä¸ºjavaå¯¹è±¡ã€‚</p><p>@ResponseBodyï¼šæ³¨è§£å®ç°å°†conreolleræ–¹æ³•è¿”å›å¯¹è±¡è½¬åŒ–ä¸ºjsonå¯¹è±¡å“åº”ç»™å®¢æˆ·ã€‚</p><h3 id="SpingMvcä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª-æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ"><a href="#SpingMvcä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª-æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ" class="headerlink" title="SpingMvcä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª,æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ"></a>SpingMvcä¸­çš„æ§åˆ¶å™¨çš„æ³¨è§£ä¸€èˆ¬ç”¨å“ªä¸ª,æœ‰æ²¡æœ‰åˆ«çš„æ³¨è§£å¯ä»¥æ›¿ä»£ï¼Ÿ</h3><p>ç­”ï¼šä¸€èˆ¬ç”¨@Controlleræ³¨è§£,ä¹Ÿå¯ä»¥ä½¿ç”¨@RestController,@RestControlleræ³¨è§£ç›¸å½“äº@ResponseBody ï¼‹ @Controller,è¡¨ç¤ºæ˜¯è¡¨ç°å±‚,é™¤æ­¤ä¹‹å¤–ï¼Œä¸€èˆ¬ä¸ç”¨åˆ«çš„æ³¨è§£ä»£æ›¿ã€‚</p><h3 id="Controlleræ³¨è§£çš„ä½œç”¨"><a href="#Controlleræ³¨è§£çš„ä½œç”¨" class="headerlink" title="@Controlleræ³¨è§£çš„ä½œç”¨"></a>@Controlleræ³¨è§£çš„ä½œç”¨</h3><p>åœ¨Spring MVC ä¸­ï¼Œæ§åˆ¶å™¨Controller è´Ÿè´£å¤„ç†ç”±DispatcherServlet åˆ†å‘çš„è¯·æ±‚ï¼Œå®ƒæŠŠç”¨æˆ·è¯·æ±‚çš„æ•°æ®ç»è¿‡ä¸šåŠ¡å¤„ç†å±‚å¤„ç†ä¹‹åå°è£…æˆä¸€ä¸ªModel ï¼Œç„¶åå†æŠŠè¯¥Model è¿”å›ç»™å¯¹åº”çš„View è¿›è¡Œå±•ç¤ºã€‚åœ¨Spring MVC ä¸­æä¾›äº†ä¸€ä¸ªéå¸¸ç®€ä¾¿çš„å®šä¹‰Controller çš„æ–¹æ³•ï¼Œä½ æ— éœ€ç»§æ‰¿ç‰¹å®šçš„ç±»æˆ–å®ç°ç‰¹å®šçš„æ¥å£ï¼Œåªéœ€ä½¿ç”¨@Controller æ ‡è®°ä¸€ä¸ªç±»æ˜¯Controller ï¼Œç„¶åä½¿ç”¨@RequestMapping å’Œ@RequestParam ç­‰ä¸€äº›æ³¨è§£ç”¨ä»¥å®šä¹‰URL è¯·æ±‚å’ŒController æ–¹æ³•ä¹‹é—´çš„æ˜ å°„ï¼Œè¿™æ ·çš„Controller å°±èƒ½è¢«å¤–ç•Œè®¿é—®åˆ°ã€‚æ­¤å¤–Controller ä¸ä¼šç›´æ¥ä¾èµ–äºHttpServletRequest å’ŒHttpServletResponse ç­‰HttpServlet å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡Controller çš„æ–¹æ³•å‚æ•°çµæ´»çš„è·å–åˆ°ã€‚</p><p>@Controller ç”¨äºæ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šï¼Œä½¿ç”¨å®ƒæ ‡è®°çš„ç±»å°±æ˜¯ä¸€ä¸ªSpring MVC Controller å¯¹è±¡ã€‚åˆ†å‘å¤„ç†å™¨å°†ä¼šæ‰«æä½¿ç”¨äº†è¯¥æ³¨è§£çš„ç±»çš„æ–¹æ³•ï¼Œå¹¶æ£€æµ‹è¯¥æ–¹æ³•æ˜¯å¦ä½¿ç”¨äº†@RequestMapping æ³¨è§£ã€‚@Controller åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼Œè€Œä½¿ç”¨@RequestMapping æ³¨è§£çš„æ–¹æ³•æ‰æ˜¯çœŸæ­£å¤„ç†è¯·æ±‚çš„å¤„ç†å™¨ã€‚å•å•ä½¿ç”¨@Controller æ ‡è®°åœ¨ä¸€ä¸ªç±»ä¸Šè¿˜ä¸èƒ½çœŸæ­£æ„ä¹‰ä¸Šçš„è¯´å®ƒå°±æ˜¯Spring MVC çš„ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™Spring è¿˜ä¸è®¤è¯†å®ƒã€‚é‚£ä¹ˆè¦å¦‚ä½•åšSpring æ‰èƒ½è®¤è¯†å®ƒå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬æŠŠè¿™ä¸ªæ§åˆ¶å™¨ç±»äº¤ç»™Spring æ¥ç®¡ç†ã€‚æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>åœ¨Spring MVC çš„é…ç½®æ–‡ä»¶ä¸­å®šä¹‰MyController çš„bean å¯¹è±¡ã€‚</li><li>åœ¨Spring MVC çš„é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰Spring è¯¥åˆ°å“ªé‡Œå»æ‰¾æ ‡è®°ä¸º@Controller çš„Controller æ§åˆ¶å™¨ã€‚</li></ul><h3 id="RequestMappingæ³¨è§£çš„ä½œç”¨"><a href="#RequestMappingæ³¨è§£çš„ä½œç”¨" class="headerlink" title="@RequestMappingæ³¨è§£çš„ä½œç”¨"></a>@RequestMappingæ³¨è§£çš„ä½œç”¨</h3><p>RequestMappingæ˜¯ä¸€ä¸ªç”¨æ¥å¤„ç†è¯·æ±‚åœ°å€æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œè¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p><p>RequestMappingæ³¨è§£æœ‰å…­ä¸ªå±æ€§ï¼Œä¸‹é¢æˆ‘ä»¬æŠŠå¥¹åˆ†æˆä¸‰ç±»è¿›è¡Œè¯´æ˜ï¼ˆä¸‹é¢æœ‰ç›¸åº”ç¤ºä¾‹ï¼‰ã€‚</p><p><strong>valueï¼Œ method</strong></p><p>valueï¼š æŒ‡å®šè¯·æ±‚çš„å®é™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯URI Template æ¨¡å¼ï¼ˆåé¢å°†ä¼šè¯´æ˜ï¼‰ï¼›</p><p>methodï¼š æŒ‡å®šè¯·æ±‚çš„methodç±»å‹ï¼Œ GETã€POSTã€PUTã€DELETEç­‰ï¼›</p><p><strong>consumesï¼Œproduces</strong></p><p>consumesï¼š æŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼Œä¾‹å¦‚application&#x2F;json, text&#x2F;html;</p><p>produces: æŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“requestè¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å›ï¼›</p><p><strong>paramsï¼Œheaders</strong></p><p>paramsï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ˜¯ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚</p><p>headersï¼š æŒ‡å®šrequestä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„headerå€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚</p><h3 id="ResponseBodyæ³¨è§£çš„ä½œç”¨"><a href="#ResponseBodyæ³¨è§£çš„ä½œç”¨" class="headerlink" title="@ResponseBodyæ³¨è§£çš„ä½œç”¨"></a>@ResponseBodyæ³¨è§£çš„ä½œç”¨</h3><p>ä½œç”¨ï¼š è¯¥æ³¨è§£ç”¨äºå°†Controllerçš„æ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œé€šè¿‡é€‚å½“çš„HttpMessageConverterè½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼åï¼Œå†™å…¥åˆ°Responseå¯¹è±¡çš„bodyæ•°æ®åŒºã€‚</p><p>ä½¿ç”¨æ—¶æœºï¼šè¿”å›çš„æ•°æ®ä¸æ˜¯htmlæ ‡ç­¾çš„é¡µé¢ï¼Œè€Œæ˜¯å…¶ä»–æŸç§æ ¼å¼çš„æ•°æ®æ—¶ï¼ˆå¦‚jsonã€xmlç­‰ï¼‰ä½¿ç”¨ï¼›</p><h3 id="PathVariableå’Œ-RequestParamçš„åŒºåˆ«"><a href="#PathVariableå’Œ-RequestParamçš„åŒºåˆ«" class="headerlink" title="@PathVariableå’Œ@RequestParamçš„åŒºåˆ«"></a>@PathVariableå’Œ@RequestParamçš„åŒºåˆ«</h3><p>è¯·æ±‚è·¯å¾„ä¸Šæœ‰ä¸ªidçš„å˜é‡å€¼ï¼Œå¯ä»¥é€šè¿‡@PathVariableæ¥è·å– @RequestMapping(value &#x3D; â€œ&#x2F;page&#x2F;{id}â€, method &#x3D; RequestMethod.GET)</p><p>@RequestParamç”¨æ¥è·å¾—é™æ€çš„URLè¯·æ±‚å…¥å‚ springæ³¨è§£æ—¶actioné‡Œç”¨åˆ°ã€‚</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="Spring-MVCä¸Struts2åŒºåˆ«"><a href="#Spring-MVCä¸Struts2åŒºåˆ«" class="headerlink" title="Spring MVCä¸Struts2åŒºåˆ«"></a>Spring MVCä¸Struts2åŒºåˆ«</h3><p>ç›¸åŒç‚¹</p><p>éƒ½æ˜¯åŸºäºmvcçš„è¡¨ç°å±‚æ¡†æ¶ï¼Œéƒ½ç”¨äºwebé¡¹ç›®çš„å¼€å‘ã€‚</p><p>ä¸åŒç‚¹</p><p>1.å‰ç«¯æ§åˆ¶å™¨ä¸ä¸€æ ·ã€‚Spring MVCçš„å‰ç«¯æ§åˆ¶å™¨æ˜¯servletï¼šDispatcherServletã€‚struts2çš„å‰ç«¯æ§åˆ¶å™¨æ˜¯filterï¼šStrutsPreparedAndExcutorFilterã€‚</p><p>2.è¯·æ±‚å‚æ•°çš„æ¥æ”¶æ–¹å¼ä¸ä¸€æ ·ã€‚Spring MVCæ˜¯ä½¿ç”¨æ–¹æ³•çš„å½¢å‚æ¥æ”¶è¯·æ±‚çš„å‚æ•°ï¼ŒåŸºäºæ–¹æ³•çš„å¼€å‘ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥è®¾è®¡ä¸ºå•ä¾‹æˆ–è€…å¤šä¾‹çš„å¼€å‘ï¼Œæ¨èä½¿ç”¨å•ä¾‹æ¨¡å¼çš„å¼€å‘ï¼ˆæ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼‰ï¼Œé»˜è®¤å°±æ˜¯å•ä¾‹å¼€å‘æ¨¡å¼ã€‚struts2æ˜¯é€šè¿‡ç±»çš„æˆå‘˜å˜é‡æ¥æ”¶è¯·æ±‚çš„å‚æ•°ï¼Œæ˜¯åŸºäºç±»çš„å¼€å‘ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œåªèƒ½è®¾è®¡ä¸ºå¤šä¾‹çš„å¼€å‘ã€‚</p><p>3.Strutsé‡‡ç”¨å€¼æ ˆå­˜å‚¨è¯·æ±‚å’Œå“åº”çš„æ•°æ®ï¼Œé€šè¿‡OGNLå­˜å–æ•°æ®ï¼ŒSpring MVCé€šè¿‡å‚æ•°è§£æå™¨æ˜¯å°†requestè¯·æ±‚å†…å®¹è§£æï¼Œå¹¶ç»™æ–¹æ³•å½¢å‚èµ‹å€¼ï¼Œå°†æ•°æ®å’Œè§†å›¾å°è£…æˆModelAndViewå¯¹è±¡ï¼Œæœ€ååˆå°†ModelAndViewä¸­çš„æ¨¡å‹æ•°æ®é€šè¿‡requesåŸŸä¼ è¾“åˆ°é¡µé¢ã€‚Jspè§†å›¾è§£æå™¨é»˜è®¤ä½¿ç”¨jstlã€‚</p><p>4.ä¸springæ•´åˆä¸ä¸€æ ·ã€‚Spring MVCæ˜¯springæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œä¸éœ€è¦æ•´åˆã€‚åœ¨ä¼ä¸šé¡¹ç›®ä¸­ï¼ŒSpring MVCä½¿ç”¨æ›´å¤šä¸€äº›ã€‚</p><h3 id="Spring-MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ"><a href="#Spring-MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ" class="headerlink" title="Spring MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ"></a>Spring MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰è½¬å‘ï¼šåœ¨è¿”å›å€¼å‰é¢åŠ â€forward:â€ï¼Œè­¬å¦‚â€forward:user.do?name&#x3D;method4â€</p><p>ï¼ˆ2ï¼‰é‡å®šå‘ï¼šåœ¨è¿”å›å€¼å‰é¢åŠ â€redirect:â€ï¼Œè­¬å¦‚â€redirect:<a href="http://www.baidu.com/">http://www.baidu.com</a>â€œ</p><h3 id="Spring-MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ"><a href="#Spring-MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ" class="headerlink" title="Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ"></a>Spring MVCæ€ä¹ˆå’ŒAJAXç›¸äº’è°ƒç”¨çš„ï¼Ÿ</h3><p>é€šè¿‡Jacksonæ¡†æ¶å°±å¯ä»¥æŠŠJavaé‡Œé¢çš„å¯¹è±¡ç›´æ¥è½¬åŒ–æˆJså¯ä»¥è¯†åˆ«çš„Jsonå¯¹è±¡ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ ï¼š</p><p>ï¼ˆ1ï¼‰åŠ å…¥Jackson.jar</p><p>ï¼ˆ2ï¼‰åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®jsonçš„æ˜ å°„</p><p>ï¼ˆ3ï¼‰åœ¨æ¥å—Ajaxæ–¹æ³•é‡Œé¢å¯ä»¥ç›´æ¥è¿”å›Object,Listç­‰,ä½†æ–¹æ³•å‰é¢è¦åŠ ä¸Š@ResponseBodyæ³¨è§£ã€‚</p><h3 id="å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ"></a>å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰è§£å†³postè¯·æ±‚ä¹±ç é—®é¢˜ï¼š</p><p>åœ¨web.xmlä¸­é…ç½®ä¸€ä¸ªCharacterEncodingFilterè¿‡æ»¤å™¨ï¼Œè®¾ç½®æˆutf-8ï¼›</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>utf-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰getè¯·æ±‚ä¸­æ–‡å‚æ•°å‡ºç°ä¹±ç è§£å†³æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š</p><p>â‘ ä¿®æ”¹tomcaté…ç½®æ–‡ä»¶æ·»åŠ ç¼–ç ä¸å·¥ç¨‹ç¼–ç ä¸€è‡´ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;<span class="hljs-attribute">ConnectorURIEncoding</span>=<span class="hljs-string">&quot;utf-8&quot;</span> <span class="hljs-attribute">connectionTimeout</span>=<span class="hljs-string">&quot;20000&quot;</span> <span class="hljs-attribute">port</span>=<span class="hljs-string">&quot;8080&quot;</span> <span class="hljs-attribute">protocol</span>=<span class="hljs-string">&quot;HTTP/1.1&quot;</span> <span class="hljs-attribute">redirectPort</span>=<span class="hljs-string">&quot;8443&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><p>â‘¡å¦å¤–ä¸€ç§æ–¹æ³•å¯¹å‚æ•°è¿›è¡Œé‡æ–°ç¼–ç ï¼š</p><p>String userName &#x3D; new String(request.getParamter(â€œuserNameâ€).getBytes(â€œISO8859-1â€),â€œutf-8â€)</p><p>ISO8859-1æ˜¯tomcaté»˜è®¤ç¼–ç ï¼Œéœ€è¦å°†tomcatç¼–ç åçš„å†…å®¹æŒ‰utf-8ç¼–ç ã€‚</p><h3 id="Spring-MVCçš„å¼‚å¸¸å¤„ç†ï¼Ÿ"><a href="#Spring-MVCçš„å¼‚å¸¸å¤„ç†ï¼Ÿ" class="headerlink" title="Spring MVCçš„å¼‚å¸¸å¤„ç†ï¼Ÿ"></a>Spring MVCçš„å¼‚å¸¸å¤„ç†ï¼Ÿ</h3><p>ç­”ï¼šå¯ä»¥å°†å¼‚å¸¸æŠ›ç»™Springæ¡†æ¶ï¼Œç”±Springæ¡†æ¶æ¥å¤„ç†ï¼›æˆ‘ä»¬åªéœ€è¦é…ç½®ç®€å•çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨å¼‚å¸¸å¤„ç†å™¨ä¸­æ·»è§†å›¾é¡µé¢å³å¯ã€‚</p><h3 id="å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•-æ€ä¹ˆé…ç½®"><a href="#å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•-æ€ä¹ˆé…ç½®" class="headerlink" title="å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®"></a>å¦‚æœåœ¨æ‹¦æˆªè¯·æ±‚ä¸­ï¼Œæˆ‘æƒ³æ‹¦æˆªgetæ–¹å¼æäº¤çš„æ–¹æ³•,æ€ä¹ˆé…ç½®</h3><p>ç­”ï¼šå¯ä»¥åœ¨@RequestMappingæ³¨è§£é‡Œé¢åŠ ä¸Šmethod&#x3D;RequestMethod.GETã€‚</p><h3 id="æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request-æˆ–è€…Sessionï¼Ÿ"><a href="#æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request-æˆ–è€…Sessionï¼Ÿ" class="headerlink" title="æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ"></a>æ€æ ·åœ¨æ–¹æ³•é‡Œé¢å¾—åˆ°Request,æˆ–è€…Sessionï¼Ÿ</h3><p>ç­”ï¼šç›´æ¥åœ¨æ–¹æ³•çš„å½¢å‚ä¸­å£°æ˜request,Spring MVCå°±è‡ªåŠ¨æŠŠrequestå¯¹è±¡ä¼ å…¥ã€‚</p><h3 id="å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°-æ€ä¹ˆå¾—åˆ°ï¼Ÿ"><a href="#å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°-æ€ä¹ˆå¾—åˆ°ï¼Ÿ" class="headerlink" title="å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ"></a>å¦‚æœæƒ³åœ¨æ‹¦æˆªçš„æ–¹æ³•é‡Œé¢å¾—åˆ°ä»å‰å°ä¼ å…¥çš„å‚æ•°,æ€ä¹ˆå¾—åˆ°ï¼Ÿ</h3><p>ç­”ï¼šç›´æ¥åœ¨å½¢å‚é‡Œé¢å£°æ˜è¿™ä¸ªå‚æ•°å°±å¯ä»¥,ä½†å¿…é¡»åå­—å’Œä¼ è¿‡æ¥çš„å‚æ•°ä¸€æ ·ã€‚</p><h3 id="å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥-å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„-é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ"><a href="#å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥-å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„-é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ" class="headerlink" title="å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ"></a>å¦‚æœå‰å°æœ‰å¾ˆå¤šä¸ªå‚æ•°ä¼ å…¥,å¹¶ä¸”è¿™äº›å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡çš„,é‚£ä¹ˆæ€ä¹ˆæ ·å¿«é€Ÿå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ</h3><p>ç­”ï¼šç›´æ¥åœ¨æ–¹æ³•ä¸­å£°æ˜è¿™ä¸ªå¯¹è±¡,Spring MVCå°±è‡ªåŠ¨ä¼šæŠŠå±æ€§èµ‹å€¼åˆ°è¿™ä¸ªå¯¹è±¡é‡Œé¢ã€‚</p><h3 id="Spring-MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Spring-MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Spring MVCä¸­å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ç­”ï¼šè¿”å›å€¼å¯ä»¥æœ‰å¾ˆå¤šç±»å‹,æœ‰String, ModelAndViewã€‚ModelAndViewç±»æŠŠè§†å›¾å’Œæ•°æ®éƒ½åˆå¹¶çš„ä¸€èµ·çš„ï¼Œä½†ä¸€èˆ¬ç”¨Stringæ¯”è¾ƒå¥½ã€‚</p><h3 id="Spring-MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ"><a href="#Spring-MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ" class="headerlink" title="Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ"></a>Spring MVCç”¨ä»€ä¹ˆå¯¹è±¡ä»åå°å‘å‰å°ä¼ é€’æ•°æ®çš„ï¼Ÿ</h3><p>ç­”ï¼šé€šè¿‡ModelMapå¯¹è±¡,å¯ä»¥åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢è°ƒç”¨putæ–¹æ³•,æŠŠå¯¹è±¡åŠ åˆ°é‡Œé¢,å‰å°å°±å¯ä»¥é€šè¿‡elè¡¨è¾¾å¼æ‹¿åˆ°ã€‚</p><h3 id="æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ"><a href="#æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ" class="headerlink" title="æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ"></a>æ€ä¹ˆæ ·æŠŠModelMapé‡Œé¢çš„æ•°æ®æ”¾å…¥Sessioné‡Œé¢ï¼Ÿ</h3><p>ç­”ï¼šå¯ä»¥åœ¨ç±»ä¸Šé¢åŠ ä¸Š@SessionAttributesæ³¨è§£,é‡Œé¢åŒ…å«çš„å­—ç¬¦ä¸²å°±æ˜¯è¦æ”¾å…¥sessioné‡Œé¢çš„keyã€‚</p><h3 id="Spring-MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„"><a href="#Spring-MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„" class="headerlink" title="Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„"></a>Spring MVCé‡Œé¢æ‹¦æˆªå™¨æ˜¯æ€ä¹ˆå†™çš„</h3><p>æœ‰ä¸¤ç§å†™æ³•,ä¸€ç§æ˜¯å®ç°HandlerInterceptoræ¥å£ï¼Œå¦å¤–ä¸€ç§æ˜¯ç»§æ‰¿é€‚é…å™¨ç±»ï¼Œæ¥ç€åœ¨æ¥å£æ–¹æ³•å½“ä¸­ï¼Œå®ç°å¤„ç†é€»è¾‘ï¼›ç„¶ååœ¨Spring MVCçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨å³å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®Spring MVCçš„æ‹¦æˆªå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptors</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- é…ç½®ä¸€ä¸ªæ‹¦æˆªå™¨çš„Beanå°±å¯ä»¥äº† é»˜è®¤æ˜¯å¯¹æ‰€æœ‰è¯·æ±‚éƒ½æ‹¦æˆª --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myInterceptor&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.zwp.action.MyHandlerInterceptor&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- åªé’ˆå¯¹éƒ¨åˆ†è¯·æ±‚æ‹¦æˆª --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/modelMap.do&quot;</span> /&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.zwp.action.MyHandlerInterceptorAdapter&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptors</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ä»‹ç»ä¸€ä¸‹-WebApplicationContext"><a href="#ä»‹ç»ä¸€ä¸‹-WebApplicationContext" class="headerlink" title="ä»‹ç»ä¸€ä¸‹ WebApplicationContext"></a>ä»‹ç»ä¸€ä¸‹ WebApplicationContext</h3><p>WebApplicationContext ç»§æ‰¿äº†ApplicationContext å¹¶å¢åŠ äº†ä¸€äº›WEBåº”ç”¨å¿…å¤‡çš„ç‰¹æœ‰åŠŸèƒ½ï¼Œå®ƒä¸åŒäºä¸€èˆ¬çš„ApplicationContext ï¼Œå› ä¸ºå®ƒèƒ½å¤„ç†ä¸»é¢˜ï¼Œå¹¶æ‰¾åˆ°è¢«å…³è”çš„servletã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Springæ¡†æ¶â¤</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Springé¢è¯•é¢˜ ä¸“é¢˜éƒ¨åˆ†</title>
    <link href="/Hexo/2022/05/12/spring%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%93%E9%A2%98/"/>
    <url>/Hexo/2022/05/12/spring%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%93%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="Springé¢è¯•é¢˜-ä¸“é¢˜éƒ¨åˆ†"><a href="#Springé¢è¯•é¢˜-ä¸“é¢˜éƒ¨åˆ†" class="headerlink" title="Springé¢è¯•é¢˜ ä¸“é¢˜éƒ¨åˆ†"></a>Springé¢è¯•é¢˜ ä¸“é¢˜éƒ¨åˆ†</h1><h3 id="ä»€ä¹ˆæ˜¯spring"><a href="#ä»€ä¹ˆæ˜¯spring" class="headerlink" title="ä»€ä¹ˆæ˜¯spring?"></a>ä»€ä¹ˆæ˜¯spring?</h3><p>Springæ˜¯<strong>ä¸€ä¸ªè½»é‡çº§Javaå¼€å‘æ¡†æ¶</strong>ï¼Œæœ€æ—©æœ‰<strong>Rod Johnson</strong>åˆ›å»ºï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„ä¸šåŠ¡é€»è¾‘å±‚å’Œå…¶ä»–å„å±‚çš„è€¦åˆé—®é¢˜ã€‚å®ƒæ˜¯ä¸€ä¸ªåˆ†å±‚çš„JavaSE&#x2F;JavaEE full-stackï¼ˆä¸€ç«™å¼ï¼‰è½»é‡çº§å¼€æºæ¡†æ¶ï¼Œä¸ºå¼€å‘Javaåº”ç”¨ç¨‹åºæä¾›å…¨é¢çš„åŸºç¡€æ¶æ„æ”¯æŒã€‚Springè´Ÿè´£åŸºç¡€æ¶æ„ï¼Œå› æ­¤Javaå¼€å‘è€…å¯ä»¥ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚</p><p>Springæœ€æ ¹æœ¬çš„ä½¿å‘½æ˜¯<strong>è§£å†³ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„å¤æ‚æ€§ï¼Œå³ç®€åŒ–Javaå¼€å‘</strong>ã€‚</p><p>Springå¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œå®ƒä¸ºä¼ä¸šçº§å¼€å‘æä¾›ç»™äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½†æ˜¯è¿™äº›åŠŸèƒ½çš„åº•å±‚éƒ½ä¾èµ–äºå®ƒçš„ä¸¤ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯<strong>ä¾èµ–æ³¨å…¥ï¼ˆdependency injectionï¼ŒDIï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆaspect-oriented programmingï¼ŒAOPï¼‰</strong>ã€‚</p><p>ä¸ºäº†é™ä½Javaå¼€å‘çš„å¤æ‚æ€§ï¼ŒSpringé‡‡å–äº†ä»¥ä¸‹4ç§å…³é”®ç­–ç•¥</p><ul><li>åŸºäºPOJOçš„è½»é‡çº§å’Œæœ€å°ä¾µå…¥æ€§ç¼–ç¨‹ï¼›</li><li>é€šè¿‡ä¾èµ–æ³¨å…¥å’Œé¢å‘æ¥å£å®ç°æ¾è€¦åˆï¼›</li><li>åŸºäºåˆ‡é¢å’Œæƒ¯ä¾‹è¿›è¡Œå£°æ˜å¼ç¼–ç¨‹ï¼›</li><li>é€šè¿‡åˆ‡é¢å’Œæ¨¡æ¿å‡å°‘æ ·æ¿å¼ä»£ç ã€‚</li></ul><h3 id="Springæ¡†æ¶çš„è®¾è®¡ç›®æ ‡ï¼Œè®¾è®¡ç†å¿µï¼Œå’Œæ ¸å¿ƒæ˜¯ä»€ä¹ˆ"><a href="#Springæ¡†æ¶çš„è®¾è®¡ç›®æ ‡ï¼Œè®¾è®¡ç†å¿µï¼Œå’Œæ ¸å¿ƒæ˜¯ä»€ä¹ˆ" class="headerlink" title="Springæ¡†æ¶çš„è®¾è®¡ç›®æ ‡ï¼Œè®¾è®¡ç†å¿µï¼Œå’Œæ ¸å¿ƒæ˜¯ä»€ä¹ˆ"></a>Springæ¡†æ¶çš„è®¾è®¡ç›®æ ‡ï¼Œè®¾è®¡ç†å¿µï¼Œå’Œæ ¸å¿ƒæ˜¯ä»€ä¹ˆ</h3><p><strong>Springè®¾è®¡ç›®æ ‡</strong>ï¼šSpringä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªä¸€ç«™å¼è½»é‡çº§åº”ç”¨å¼€å‘å¹³å°ï¼›</p><p><strong>Springè®¾è®¡ç†å¿µ</strong>ï¼šåœ¨JavaEEå¼€å‘ä¸­ï¼Œæ”¯æŒPOJOå’ŒJavaBeanå¼€å‘æ–¹å¼ï¼Œä½¿åº”ç”¨é¢å‘æ¥å£å¼€å‘ï¼Œå……åˆ†æ”¯æŒOOï¼ˆé¢å‘å¯¹è±¡ï¼‰è®¾è®¡æ–¹æ³•ï¼›Springé€šè¿‡IoCå®¹å™¨å®ç°å¯¹è±¡è€¦åˆå…³ç³»çš„ç®¡ç†ï¼Œå¹¶å®ç°ä¾èµ–åè½¬ï¼Œå°†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»äº¤ç»™IoCå®¹å™¨ï¼Œå®ç°è§£è€¦ï¼›</p><p><strong>Springæ¡†æ¶çš„æ ¸å¿ƒ</strong>ï¼šIoCå®¹å™¨å’ŒAOPæ¨¡å—ã€‚é€šè¿‡IoCå®¹å™¨ç®¡ç†POJOå¯¹è±¡ä»¥åŠä»–ä»¬ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼›é€šè¿‡AOPä»¥åŠ¨æ€éä¾µå…¥çš„æ–¹å¼å¢å¼ºæœåŠ¡ã€‚</p><p>IoCè®©ç›¸äº’åä½œçš„ç»„ä»¶ä¿æŒæ¾æ•£çš„è€¦åˆï¼Œè€ŒAOPç¼–ç¨‹å…è®¸ä½ æŠŠéå¸ƒäºåº”ç”¨å„å±‚çš„åŠŸèƒ½åˆ†ç¦»å‡ºæ¥å½¢æˆå¯é‡ç”¨çš„åŠŸèƒ½ç»„ä»¶ã€‚</p><h3 id="Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Springçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ä¼˜ç‚¹</p><ul><li><p>æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘</p><p>Springå°±æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œå¯ä»¥å°†æ‰€æœ‰å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤ï¼Œäº¤ç»™Springç®¡ç†ã€‚</p></li><li><p>AOPç¼–ç¨‹çš„æ”¯æŒ</p><p>Springæä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°å¯¹ç¨‹åºè¿›è¡Œæƒé™æ‹¦æˆªã€è¿è¡Œç›‘æ§ç­‰åŠŸèƒ½ã€‚</p></li><li><p>å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒ</p><p>åªéœ€è¦é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¼–ç¨‹ã€‚</p></li><li><p>æ–¹ä¾¿ç¨‹åºçš„æµ‹è¯•</p><p>Springå¯¹Junit4æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ³¨è§£æ–¹ä¾¿çš„æµ‹è¯•Springç¨‹åºã€‚</p></li><li><p>æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶</p><p>Springä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå…¶å†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶çš„ç›´æ¥æ”¯æŒï¼ˆå¦‚ï¼šStrutsã€Hibernateã€MyBatisç­‰ï¼‰ã€‚</p></li><li><p>é™ä½JavaEE APIçš„ä½¿ç”¨éš¾åº¦</p><p>Springå¯¹JavaEEå¼€å‘ä¸­éå¸¸éš¾ç”¨çš„ä¸€äº›APIï¼ˆJDBCã€JavaMailã€è¿œç¨‹è°ƒç”¨ç­‰ï¼‰ï¼Œéƒ½æä¾›äº†å°è£…ï¼Œä½¿è¿™äº›APIåº”ç”¨éš¾åº¦å¤§å¤§é™ä½ã€‚</p></li></ul><p>ç¼ºç‚¹</p><ul><li>Springæ˜æ˜ä¸€ä¸ªå¾ˆè½»é‡çº§çš„æ¡†æ¶ï¼Œå´ç»™äººæ„Ÿè§‰å¤§è€Œå…¨</li><li>Springä¾èµ–åå°„ï¼Œåå°„å½±å“æ€§èƒ½</li><li>ä½¿ç”¨é—¨æ§›å‡é«˜ï¼Œå…¥é—¨Springéœ€è¦è¾ƒé•¿æ—¶é—´</li></ul><h3 id="Springæœ‰å“ªäº›åº”ç”¨åœºæ™¯"><a href="#Springæœ‰å“ªäº›åº”ç”¨åœºæ™¯" class="headerlink" title="Springæœ‰å“ªäº›åº”ç”¨åœºæ™¯"></a>Springæœ‰å“ªäº›åº”ç”¨åœºæ™¯</h3><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šJavaEEä¼ä¸šåº”ç”¨å¼€å‘ï¼ŒåŒ…æ‹¬SSHã€SSMç­‰</p><p><strong>Springä»·å€¼</strong>ï¼š</p><ul><li>Springæ˜¯éä¾µå…¥å¼çš„æ¡†æ¶ï¼Œç›®æ ‡æ˜¯ä½¿åº”ç”¨ç¨‹åºä»£ç å¯¹æ¡†æ¶ä¾èµ–æœ€å°åŒ–ï¼›</li><li>Springæä¾›ä¸€ä¸ªä¸€è‡´çš„ç¼–ç¨‹æ¨¡å‹ï¼Œä½¿åº”ç”¨ç›´æ¥ä½¿ç”¨POJOå¼€å‘ï¼Œä¸è¿è¡Œç¯å¢ƒéš”ç¦»å¼€æ¥ï¼›</li><li>Springæ¨åŠ¨åº”ç”¨è®¾è®¡é£æ ¼å‘é¢å‘å¯¹è±¡å’Œé¢å‘æ¥å£å¼€å‘è½¬å˜ï¼Œæé«˜äº†ä»£ç çš„é‡ç”¨æ€§å’Œå¯æµ‹è¯•æ€§ï¼›</li></ul><h3 id="Springç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ"><a href="#Springç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ" class="headerlink" title="Springç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ"></a>Springç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ</h3><p>Spring æ€»å…±å¤§çº¦æœ‰ 20 ä¸ªæ¨¡å—ï¼Œ ç”± 1300 å¤šä¸ªä¸åŒçš„æ–‡ä»¶æ„æˆã€‚ è€Œè¿™äº›ç»„ä»¶è¢«åˆ†åˆ«æ•´åˆåœ¨<code>æ ¸å¿ƒå®¹å™¨ï¼ˆCore Containerï¼‰</code> ã€ <code>AOPï¼ˆAspect Oriented Programmingï¼‰å’Œè®¾å¤‡æ”¯æŒï¼ˆInstrmentationï¼‰</code> ã€<code>æ•°æ®è®¿é—®ä¸é›†æˆï¼ˆData Access/Integerationï¼‰</code> ã€ <code>Web</code>ã€ <code>æ¶ˆæ¯ï¼ˆMessagingï¼‰</code> ã€ <code>Test</code>ç­‰ 6 ä¸ªæ¨¡å—ä¸­ã€‚ ä»¥ä¸‹æ˜¯ Spring 5 çš„æ¨¡å—ç»“æ„å›¾ï¼š</p><p>[<img src="https://img-blog.csdnimg.cn/2019102923475419.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">]</p><ul><li>spring coreï¼šæä¾›äº†æ¡†æ¶çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼ŒIOCï¼‰å’Œä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰åŠŸèƒ½ã€‚</li><li>spring beansï¼šæä¾›äº†BeanFactoryï¼Œæ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªç»å…¸å®ç°ï¼ŒSpringå°†ç®¡ç†å¯¹è±¡ç§°ä¸ºBeanã€‚</li><li>spring contextï¼šæ„å»ºäº core å°è£…åŒ…åŸºç¡€ä¸Šçš„ context å°è£…åŒ…ï¼Œæä¾›äº†ä¸€ç§æ¡†æ¶å¼çš„å¯¹è±¡è®¿é—®æ–¹æ³•ã€‚</li><li>spring jdbcï¼šæä¾›äº†ä¸€ä¸ªJDBCçš„æŠ½è±¡å±‚ï¼Œæ¶ˆé™¤äº†çƒ¦ççš„JDBCç¼–ç å’Œæ•°æ®åº“å‚å•†ç‰¹æœ‰çš„é”™è¯¯ä»£ç è§£æï¼Œ ç”¨äºç®€åŒ–JDBCã€‚</li><li>spring aopï¼šæä¾›äº†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹å®ç°ï¼Œè®©ä½ å¯ä»¥è‡ªå®šä¹‰æ‹¦æˆªå™¨ã€åˆ‡ç‚¹ç­‰ã€‚</li><li>spring Webï¼šæä¾›äº†é’ˆå¯¹ Web å¼€å‘çš„é›†æˆç‰¹æ€§ï¼Œä¾‹å¦‚æ–‡ä»¶ä¸Šä¼ ï¼Œåˆ©ç”¨ servlet listeners è¿›è¡Œ ioc å®¹å™¨åˆå§‹åŒ–å’Œé’ˆå¯¹ Web çš„ ApplicationContextã€‚</li><li>spring testï¼šä¸»è¦ä¸ºæµ‹è¯•æä¾›æ”¯æŒçš„ï¼Œæ”¯æŒä½¿ç”¨JUnitæˆ–TestNGå¯¹Springç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚</li></ul><h3 id="Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h3><ol><li>å·¥å‚æ¨¡å¼ï¼šBeanFactoryå°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ä½“ç°ï¼Œç”¨æ¥åˆ›å»ºå¯¹è±¡çš„å®ä¾‹ï¼›</li><li>å•ä¾‹æ¨¡å¼ï¼šBeané»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ã€‚</li><li>ä»£ç†æ¨¡å¼ï¼šSpringçš„AOPåŠŸèƒ½ç”¨åˆ°äº†JDKçš„åŠ¨æ€ä»£ç†å’ŒCGLIBå­—èŠ‚ç ç”ŸæˆæŠ€æœ¯ï¼›</li><li>æ¨¡æ¿æ–¹æ³•ï¼šç”¨æ¥è§£å†³ä»£ç é‡å¤çš„é—®é¢˜ã€‚æ¯”å¦‚. RestTemplate, JmsTemplate, JpaTemplateã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼ï¼šå®šä¹‰å¯¹è±¡é”®ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥è¢«åˆ¶åŠ¨æ›´æ–°ï¼Œå¦‚Springä¸­listenerçš„å®ç°â€“ApplicationListenerã€‚</li></ol><h3 id="è¯¦ç»†è®²è§£ä¸€ä¸‹æ ¸å¿ƒå®¹å™¨ï¼ˆspring-contextåº”ç”¨ä¸Šä¸‹æ–‡-æ¨¡å—"><a href="#è¯¦ç»†è®²è§£ä¸€ä¸‹æ ¸å¿ƒå®¹å™¨ï¼ˆspring-contextåº”ç”¨ä¸Šä¸‹æ–‡-æ¨¡å—" class="headerlink" title="è¯¦ç»†è®²è§£ä¸€ä¸‹æ ¸å¿ƒå®¹å™¨ï¼ˆspring contextåº”ç”¨ä¸Šä¸‹æ–‡) æ¨¡å—"></a>è¯¦ç»†è®²è§£ä¸€ä¸‹æ ¸å¿ƒå®¹å™¨ï¼ˆspring contextåº”ç”¨ä¸Šä¸‹æ–‡) æ¨¡å—</h3><p>è¿™æ˜¯åŸºæœ¬çš„Springæ¨¡å—ï¼Œæä¾›spring æ¡†æ¶çš„åŸºç¡€åŠŸèƒ½ï¼ŒBeanFactory æ˜¯ ä»»ä½•ä»¥springä¸ºåŸºç¡€çš„åº”ç”¨çš„æ ¸å¿ƒã€‚Spring æ¡†æ¶å»ºç«‹åœ¨æ­¤æ¨¡å—ä¹‹ä¸Šï¼Œå®ƒä½¿Springæˆä¸ºä¸€ä¸ªå®¹å™¨ã€‚</p><p>Bean å·¥å‚æ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªå®ç°ï¼Œæä¾›äº†æ§åˆ¶åè½¬åŠŸèƒ½ï¼Œç”¨æ¥æŠŠåº”ç”¨çš„é…ç½®å’Œä¾èµ–ä»çœŸæ­£çš„åº”ç”¨ä»£ç ä¸­åˆ†ç¦»ã€‚æœ€å¸¸ç”¨çš„å°±æ˜¯org.springframework.beans.factory.xml.XmlBeanFactory ï¼Œå®ƒæ ¹æ®XMLæ–‡ä»¶ä¸­çš„å®šä¹‰åŠ è½½beansã€‚è¯¥å®¹å™¨ä»XML æ–‡ä»¶è¯»å–é…ç½®å…ƒæ•°æ®å¹¶ç”¨å®ƒå»åˆ›å»ºä¸€ä¸ªå®Œå…¨é…ç½®çš„ç³»ç»Ÿæˆ–åº”ç”¨ã€‚</p><h3 id="Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶"><a href="#Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶" class="headerlink" title="Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶"></a>Springæ¡†æ¶ä¸­æœ‰å“ªäº›ä¸åŒç±»å‹çš„äº‹ä»¶</h3><p>Spring æä¾›äº†ä»¥ä¸‹5ç§æ ‡å‡†çš„äº‹ä»¶ï¼š</p><ol><li>ä¸Šä¸‹æ–‡æ›´æ–°äº‹ä»¶ï¼ˆContextRefreshedEventï¼‰ï¼šåœ¨è°ƒç”¨ConfigurableApplicationContext æ¥å£ä¸­çš„refresh()æ–¹æ³•æ—¶è¢«è§¦å‘ã€‚</li><li>ä¸Šä¸‹æ–‡å¼€å§‹äº‹ä»¶ï¼ˆContextStartedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨ConfigurableApplicationContextçš„Start()æ–¹æ³•å¼€å§‹&#x2F;é‡æ–°å¼€å§‹å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li><li>ä¸Šä¸‹æ–‡åœæ­¢äº‹ä»¶ï¼ˆContextStoppedEventï¼‰ï¼šå½“å®¹å™¨è°ƒç”¨ConfigurableApplicationContextçš„Stop()æ–¹æ³•åœæ­¢å®¹å™¨æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚</li><li>ä¸Šä¸‹æ–‡å…³é—­äº‹ä»¶ï¼ˆContextClosedEventï¼‰ï¼šå½“ApplicationContextè¢«å…³é—­æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚å®¹å™¨è¢«å…³é—­æ—¶ï¼Œå…¶ç®¡ç†çš„æ‰€æœ‰å•ä¾‹Beanéƒ½è¢«é”€æ¯ã€‚</li><li>è¯·æ±‚å¤„ç†äº‹ä»¶ï¼ˆRequestHandledEventï¼‰ï¼šåœ¨Webåº”ç”¨ä¸­ï¼Œå½“ä¸€ä¸ªhttpè¯·æ±‚ï¼ˆrequestï¼‰ç»“æŸè§¦å‘è¯¥äº‹ä»¶ã€‚å¦‚æœä¸€ä¸ªbeanå®ç°äº†ApplicationListeneræ¥å£ï¼Œå½“ä¸€ä¸ªApplicationEvent è¢«å‘å¸ƒä»¥åï¼Œbeanä¼šè‡ªåŠ¨è¢«é€šçŸ¥ã€‚</li></ol><h3 id="Spring-åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ"><a href="#Spring-åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ" class="headerlink" title="Spring åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ"></a>Spring åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ</h3><p>Spring åº”ç”¨ä¸€èˆ¬æœ‰ä»¥ä¸‹ç»„ä»¶ï¼š</p><ul><li>æ¥å£ - å®šä¹‰åŠŸèƒ½ã€‚</li><li>Bean ç±» - å®ƒåŒ…å«å±æ€§ï¼Œsetter å’Œ getter æ–¹æ³•ï¼Œå‡½æ•°ç­‰ã€‚</li><li>Bean é…ç½®æ–‡ä»¶ - åŒ…å«ç±»çš„ä¿¡æ¯ä»¥åŠå¦‚ä½•é…ç½®å®ƒä»¬ã€‚</li><li>Spring é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ - æä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹çš„åŠŸèƒ½ã€‚</li><li>ç”¨æˆ·ç¨‹åº - å®ƒä½¿ç”¨æ¥å£ã€‚</li></ul><h3 id="ä½¿ç”¨-Spring-æœ‰å“ªäº›æ–¹å¼ï¼Ÿ"><a href="#ä½¿ç”¨-Spring-æœ‰å“ªäº›æ–¹å¼ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ Spring æœ‰å“ªäº›æ–¹å¼ï¼Ÿ"></a>ä½¿ç”¨ Spring æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h3><p>ä½¿ç”¨ Spring æœ‰ä»¥ä¸‹æ–¹å¼ï¼š</p><ul><li>ä½œä¸ºä¸€ä¸ªæˆç†Ÿçš„ Spring Web åº”ç”¨ç¨‹åºã€‚</li><li>ä½œä¸ºç¬¬ä¸‰æ–¹ Web æ¡†æ¶ï¼Œä½¿ç”¨ Spring Frameworks ä¸­é—´å±‚ã€‚</li><li>ä½œä¸ºä¼ä¸šçº§ Java Beanï¼Œå®ƒå¯ä»¥åŒ…è£…ç°æœ‰çš„ POJOï¼ˆPlain Old Java Objectsï¼‰ã€‚</li><li>ç”¨äºè¿œç¨‹ä½¿ç”¨ã€‚</li></ul><h2 id="Springæ§åˆ¶åè½¬-IOC-ï¼ˆ13ï¼‰"><a href="#Springæ§åˆ¶åè½¬-IOC-ï¼ˆ13ï¼‰" class="headerlink" title="Springæ§åˆ¶åè½¬(IOC)ï¼ˆ13ï¼‰"></a>Springæ§åˆ¶åè½¬(IOC)ï¼ˆ13ï¼‰</h2><h3 id="ä»€ä¹ˆæ˜¯Spring-IOC-å®¹å™¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Spring-IOC-å®¹å™¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Spring IOC å®¹å™¨ï¼Ÿ</h3><p>æ§åˆ¶åè½¬å³IoC (Inversion of Control)ï¼Œå®ƒæŠŠä¼ ç»Ÿä¸Šç”±ç¨‹åºä»£ç ç›´æ¥æ“æ§çš„å¯¹è±¡çš„è°ƒç”¨æƒäº¤ç»™å®¹å™¨ï¼Œé€šè¿‡å®¹å™¨æ¥å®ç°å¯¹è±¡ç»„ä»¶çš„è£…é…å’Œç®¡ç†ã€‚æ‰€è°“çš„â€œæ§åˆ¶åè½¬â€æ¦‚å¿µå°±æ˜¯å¯¹ç»„ä»¶å¯¹è±¡æ§åˆ¶æƒçš„è½¬ç§»ï¼Œä»ç¨‹åºä»£ç æœ¬èº«è½¬ç§»åˆ°äº†å¤–éƒ¨å®¹å™¨ã€‚</p><p>Spring IOC è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œç®¡ç†å¯¹è±¡ï¼ˆé€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼Œè£…é…å¯¹è±¡ï¼Œé…ç½®å¯¹è±¡ï¼Œå¹¶ä¸”ç®¡ç†è¿™äº›å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="æ§åˆ¶åè½¬-IoC-æœ‰ä»€ä¹ˆä½œç”¨"><a href="#æ§åˆ¶åè½¬-IoC-æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="æ§åˆ¶åè½¬(IoC)æœ‰ä»€ä¹ˆä½œç”¨"></a>æ§åˆ¶åè½¬(IoC)æœ‰ä»€ä¹ˆä½œç”¨</h3><ul><li>ç®¡ç†å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤ã€‚å¯¹è±¡çš„åˆ›å»ºå¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹ï¼Œåœ¨å¯¹è±¡å…³ç³»æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå¦‚æœä¾èµ–å…³ç³»éœ€è¦ç¨‹åºçŒ¿æ¥ç»´æŠ¤çš„è¯ï¼Œé‚£æ˜¯ç›¸å½“å¤´ç–¼çš„</li><li>è§£è€¦ï¼Œç”±å®¹å™¨å»ç»´æŠ¤å…·ä½“çš„å¯¹è±¡</li><li>æ‰˜ç®¡äº†ç±»çš„äº§ç”Ÿè¿‡ç¨‹ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨ç±»çš„äº§ç”Ÿè¿‡ç¨‹ä¸­åšä¸€äº›å¤„ç†ï¼Œæœ€ç›´æ¥çš„ä¾‹å­å°±æ˜¯ä»£ç†ï¼Œå¦‚æœæœ‰å®¹å™¨ç¨‹åºå¯ä»¥æŠŠè¿™éƒ¨åˆ†å¤„ç†äº¤ç»™å®¹å™¨ï¼Œåº”ç”¨ç¨‹åºåˆ™æ— éœ€å»å…³å¿ƒç±»æ˜¯å¦‚ä½•å®Œæˆä»£ç†çš„</li></ul><h3 id="IOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#IOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="IOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>IOCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>IOC æˆ– ä¾èµ–æ³¨å…¥æŠŠåº”ç”¨çš„ä»£ç é‡é™åˆ°æœ€ä½ã€‚</li><li>å®ƒä½¿åº”ç”¨å®¹æ˜“æµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•ä¸å†éœ€è¦å•ä¾‹å’ŒJNDIæŸ¥æ‰¾æœºåˆ¶ã€‚</li><li>æœ€å°çš„ä»£ä»·å’Œæœ€å°çš„ä¾µå…¥æ€§ä½¿æ¾æ•£è€¦åˆå¾—ä»¥å®ç°ã€‚</li><li>IOCå®¹å™¨æ”¯æŒåŠ è½½æœåŠ¡æ—¶çš„é¥¿æ±‰å¼åˆå§‹åŒ–å’Œæ‡’åŠ è½½ã€‚</li></ul><h3 id="Spring-IoC-çš„å®ç°æœºåˆ¶"><a href="#Spring-IoC-çš„å®ç°æœºåˆ¶" class="headerlink" title="Spring IoC çš„å®ç°æœºåˆ¶"></a>Spring IoC çš„å®ç°æœºåˆ¶</h3><p>Spring ä¸­çš„ IoC çš„å®ç°åŸç†å°±æ˜¯å·¥å‚æ¨¡å¼åŠ åå°„æœºåˆ¶ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Fruit</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">eat</span>();<br> &#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Apple</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Fruit</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">eat</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;Apple&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Orange</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Fruit</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">eat</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;Orange&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Factory</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">Fruit</span> <span class="hljs-title function_">getInstance</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> ClassName</span>) &#123;<br>        <span class="hljs-title class_">Fruit</span> f=<span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            f=(<span class="hljs-title class_">Fruit</span>)<span class="hljs-title class_">Class</span>.<span class="hljs-title function_">forName</span>(<span class="hljs-title class_">ClassName</span>).<span class="hljs-title function_">newInstance</span>();<br>        &#125; <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) &#123;<br>            e.<span class="hljs-title function_">printStackTrace</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> f;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] a</span>) &#123;<br>        <span class="hljs-title class_">Fruit</span> f=<span class="hljs-title class_">Factory</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-string">&quot;io.github.dunwu.spring.Apple&quot;</span>);<br>        <span class="hljs-keyword">if</span>(f!=<span class="hljs-literal">null</span>)&#123;<br>            f.<span class="hljs-title function_">eat</span>();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Spring-çš„-IoCæ”¯æŒå“ªäº›åŠŸèƒ½"><a href="#Spring-çš„-IoCæ”¯æŒå“ªäº›åŠŸèƒ½" class="headerlink" title="Spring çš„ IoCæ”¯æŒå“ªäº›åŠŸèƒ½"></a>Spring çš„ IoCæ”¯æŒå“ªäº›åŠŸèƒ½</h3><p>Spring çš„ IoC è®¾è®¡æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>ä¾èµ–æ³¨å…¥</li><li>ä¾èµ–æ£€æŸ¥</li><li>è‡ªåŠ¨è£…é…</li><li>æ”¯æŒé›†åˆ</li><li>æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•</li><li>æ”¯æŒå›è°ƒæŸäº›æ–¹æ³•ï¼ˆä½†æ˜¯éœ€è¦å®ç° Spring æ¥å£ï¼Œç•¥æœ‰ä¾µå…¥ï¼‰</li></ul><p>å…¶ä¸­ï¼Œæœ€é‡è¦çš„å°±æ˜¯ä¾èµ–æ³¨å…¥ï¼Œä» XML çš„é…ç½®ä¸Šè¯´ï¼Œå³ ref æ ‡ç­¾ã€‚å¯¹åº” Spring RuntimeBeanReference å¯¹è±¡ã€‚</p><p>å¯¹äº IoC æ¥è¯´ï¼Œæœ€é‡è¦çš„å°±æ˜¯å®¹å™¨ã€‚å®¹å™¨ç®¡ç†ç€ Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ§åˆ¶ç€ Bean çš„ä¾èµ–æ³¨å…¥ã€‚</p><h3 id="BeanFactory-å’Œ-ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#BeanFactory-å’Œ-ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>BeanFactoryå’ŒApplicationContextæ˜¯Springçš„ä¸¤å¤§æ ¸å¿ƒæ¥å£ï¼Œéƒ½å¯ä»¥å½“åšSpringçš„å®¹å™¨ã€‚</p><p>å…¶ä¸­ApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ã€‚</p><h4 id="ä¾èµ–å…³ç³»"><a href="#ä¾èµ–å…³ç³»" class="headerlink" title="ä¾èµ–å…³ç³»"></a>ä¾èµ–å…³ç³»</h4><p>BeanFactoryï¼šæ˜¯Springé‡Œé¢æœ€åº•å±‚çš„æ¥å£ï¼ŒåŒ…å«äº†å„ç§Beançš„å®šä¹‰ï¼Œè¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ã€å®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p><p>ApplicationContextæ¥å£ä½œä¸ºBeanFactoryçš„æ´¾ç”Ÿï¼Œé™¤äº†æä¾›BeanFactoryæ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼š</p><ul><li>ç»§æ‰¿MessageSourceï¼Œå› æ­¤æ”¯æŒå›½é™…åŒ–ã€‚</li><li>ç»Ÿä¸€çš„èµ„æºæ–‡ä»¶è®¿é—®æ–¹å¼ã€‚</li><li>æä¾›åœ¨ç›‘å¬å™¨ä¸­æ³¨å†Œbeançš„äº‹ä»¶ã€‚</li><li>åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚</li><li>è½½å…¥å¤šä¸ªï¼ˆæœ‰ç»§æ‰¿å…³ç³»ï¼‰ä¸Šä¸‹æ–‡ ï¼Œä½¿å¾—æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡éƒ½ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„å±‚æ¬¡ï¼Œæ¯”å¦‚åº”ç”¨çš„webå±‚ã€‚</li></ul><h4 id="åŠ è½½æ–¹å¼"><a href="#åŠ è½½æ–¹å¼" class="headerlink" title="åŠ è½½æ–¹å¼"></a>åŠ è½½æ–¹å¼</h4><p>BeanFactroyé‡‡ç”¨çš„æ˜¯å»¶è¿ŸåŠ è½½å½¢å¼æ¥æ³¨å…¥Beançš„ï¼Œå³åªæœ‰åœ¨ä½¿ç”¨åˆ°æŸä¸ªBeanæ—¶(è°ƒç”¨getBean())ï¼Œæ‰å¯¹è¯¥Beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›å­˜åœ¨çš„Springçš„é…ç½®é—®é¢˜ã€‚å¦‚æœBeançš„æŸä¸€ä¸ªå±æ€§æ²¡æœ‰æ³¨å…¥ï¼ŒBeanFacotryåŠ è½½åï¼Œç›´è‡³ç¬¬ä¸€æ¬¡ä½¿ç”¨è°ƒç”¨getBeanæ–¹æ³•æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>ApplicationContextï¼Œå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€æ¬¡æ€§åˆ›å»ºäº†æ‰€æœ‰çš„Beanã€‚è¿™æ ·ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°Springä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯ï¼Œè¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ã€‚ ApplicationContextå¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanï¼Œé€šè¿‡é¢„è½½å…¥å•å®ä¾‹bean ,ç¡®ä¿å½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œä½ å°±ä¸ç”¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ›å»ºå¥½äº†ã€‚</p><p>ç›¸å¯¹äºåŸºæœ¬çš„BeanFactoryï¼ŒApplicationContext å”¯ä¸€çš„ä¸è¶³æ˜¯å ç”¨å†…å­˜ç©ºé—´ã€‚å½“åº”ç”¨ç¨‹åºé…ç½®Beanè¾ƒå¤šæ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚</p><h4 id="åˆ›å»ºæ–¹å¼"><a href="#åˆ›å»ºæ–¹å¼" class="headerlink" title="åˆ›å»ºæ–¹å¼"></a>åˆ›å»ºæ–¹å¼</h4><p>BeanFactoryé€šå¸¸ä»¥ç¼–ç¨‹çš„æ–¹å¼è¢«åˆ›å»ºï¼ŒApplicationContextè¿˜èƒ½ä»¥å£°æ˜çš„æ–¹å¼åˆ›å»ºï¼Œå¦‚ä½¿ç”¨ContextLoaderã€‚</p><h4 id="æ³¨å†Œæ–¹å¼"><a href="#æ³¨å†Œæ–¹å¼" class="headerlink" title="æ³¨å†Œæ–¹å¼"></a>æ³¨å†Œæ–¹å¼</h4><p>BeanFactoryå’ŒApplicationContextéƒ½æ”¯æŒBeanPostProcessorã€BeanFactoryPostProcessorçš„ä½¿ç”¨ï¼Œä½†ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«æ˜¯ï¼šBeanFactoryéœ€è¦æ‰‹åŠ¨æ³¨å†Œï¼Œè€ŒApplicationContextåˆ™æ˜¯è‡ªåŠ¨æ³¨å†Œã€‚</p><h3 id="Spring-å¦‚ä½•è®¾è®¡å®¹å™¨çš„ï¼ŒBeanFactoryå’ŒApplicationContextçš„å…³ç³»è¯¦è§£"><a href="#Spring-å¦‚ä½•è®¾è®¡å®¹å™¨çš„ï¼ŒBeanFactoryå’ŒApplicationContextçš„å…³ç³»è¯¦è§£" class="headerlink" title="Spring å¦‚ä½•è®¾è®¡å®¹å™¨çš„ï¼ŒBeanFactoryå’ŒApplicationContextçš„å…³ç³»è¯¦è§£"></a>Spring å¦‚ä½•è®¾è®¡å®¹å™¨çš„ï¼ŒBeanFactoryå’ŒApplicationContextçš„å…³ç³»è¯¦è§£</h3><p>Spring ä½œè€… Rod Johnson è®¾è®¡äº†ä¸¤ä¸ªæ¥å£ç”¨ä»¥è¡¨ç¤ºå®¹å™¨ã€‚</p><ul><li>BeanFactory</li><li>ApplicationContext</li></ul><p>BeanFactory ç®€å•ç²—æš´ï¼Œå¯ä»¥ç†è§£ä¸ºå°±æ˜¯ä¸ª HashMapï¼ŒKey æ˜¯ BeanNameï¼ŒValue æ˜¯ Bean å®ä¾‹ã€‚é€šå¸¸åªæä¾›æ³¨å†Œï¼ˆputï¼‰ï¼Œè·å–ï¼ˆgetï¼‰è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸º <strong>â€œä½çº§å®¹å™¨â€</strong>ã€‚</p><p>ApplicationContext å¯ä»¥ç§°ä¹‹ä¸º <strong>â€œé«˜çº§å®¹å™¨â€</strong>ã€‚å› ä¸ºä»–æ¯” BeanFactory å¤šäº†æ›´å¤šçš„åŠŸèƒ½ã€‚ä»–ç»§æ‰¿äº†å¤šä¸ªæ¥å£ã€‚å› æ­¤å…·å¤‡äº†æ›´å¤šçš„åŠŸèƒ½ã€‚ä¾‹å¦‚èµ„æºçš„è·å–ï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ï¼ˆä¾‹å¦‚ JSP tag çš„æ”¯æŒï¼‰ï¼Œå¯¹ BeanFactory å¤šäº†å·¥å…·çº§åˆ«çš„æ”¯æŒç­‰å¾…ã€‚æ‰€ä»¥ä½ çœ‹ä»–çš„åå­—ï¼Œå·²ç»ä¸æ˜¯ BeanFactory ä¹‹ç±»çš„å·¥å‚äº†ï¼Œè€Œæ˜¯ â€œåº”ç”¨ä¸Šä¸‹æ–‡â€ï¼Œ ä»£è¡¨ç€æ•´ä¸ªå¤§å®¹å™¨çš„æ‰€æœ‰åŠŸèƒ½ã€‚è¯¥æ¥å£å®šä¹‰äº†ä¸€ä¸ª refresh æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æ˜¯æ‰€æœ‰é˜…è¯» Spring æºç çš„äººçš„æœ€ç†Ÿæ‚‰çš„æ–¹æ³•ï¼Œç”¨äºåˆ·æ–°æ•´ä¸ªå®¹å™¨ï¼Œå³é‡æ–°åŠ è½½&#x2F;åˆ·æ–°æ‰€æœ‰çš„ beanã€‚</p><p>å½“ç„¶ï¼Œé™¤äº†è¿™ä¸¤ä¸ªå¤§æ¥å£ï¼Œè¿˜æœ‰å…¶ä»–çš„è¾…åŠ©æ¥å£ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»ä»–ä»¬äº†ã€‚</p><p>BeanFactoryå’ŒApplicationContextçš„å…³ç³»</p><p>ä¸ºäº†æ›´ç›´è§‚çš„å±•ç¤º â€œä½çº§å®¹å™¨â€ å’Œ â€œé«˜çº§å®¹å™¨â€ çš„å…³ç³»ï¼Œè¿™é‡Œé€šè¿‡å¸¸ç”¨çš„ ClassPathXmlApplicationContext ç±»æ¥å±•ç¤ºæ•´ä¸ªå®¹å™¨çš„å±‚çº§ UML å…³ç³»ã€‚</p><p><a href=""><img src="https://img-blog.csdnimg.cn/20191105111441363.png" alt="img"></a></p><p>æœ‰ç‚¹å¤æ‚ï¼Ÿ å…ˆä¸è¦æ…Œï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ã€‚</p><p>æœ€ä¸Šé¢çš„æ˜¯ BeanFactoryï¼Œä¸‹é¢çš„ 3 ä¸ªç»¿è‰²çš„ï¼Œéƒ½æ˜¯åŠŸèƒ½æ‰©å±•æ¥å£ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è®²ã€‚</p><p>çœ‹ä¸‹é¢çš„éš¶å± ApplicationContext ç²‰çº¢è‰²çš„ â€œé«˜çº§å®¹å™¨â€ï¼Œä¾èµ–ç€ â€œä½çº§å®¹å™¨â€ï¼Œè¿™é‡Œè¯´çš„æ˜¯ä¾èµ–ï¼Œä¸æ˜¯ç»§æ‰¿å“¦ã€‚ä»–ä¾èµ–ç€ â€œä½çº§å®¹å™¨â€ çš„ getBean åŠŸèƒ½ã€‚è€Œé«˜çº§å®¹å™¨æœ‰æ›´å¤šçš„åŠŸèƒ½ï¼šæ”¯æŒä¸åŒçš„ä¿¡æ¯æºå¤´ï¼Œå¯ä»¥è®¿é—®æ–‡ä»¶èµ„æºï¼Œæ”¯æŒåº”ç”¨äº‹ä»¶ï¼ˆObserver æ¨¡å¼ï¼‰ã€‚</p><p>é€šå¸¸ç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯ â€œé«˜çº§å®¹å™¨â€ã€‚ ä½† BeanFactory ä¹Ÿéå¸¸å¤Ÿç”¨å•¦ï¼</p><p>å·¦è¾¹ç°è‰²åŒºåŸŸçš„æ˜¯ â€œä½çº§å®¹å™¨â€ï¼Œ åªè´Ÿè½½åŠ è½½ Beanï¼Œè·å– Beanã€‚å®¹å™¨å…¶ä»–çš„é«˜çº§åŠŸèƒ½æ˜¯æ²¡æœ‰çš„ã€‚ä¾‹å¦‚ä¸Šå›¾ç”»çš„ refresh åˆ·æ–° Bean å·¥å‚æ‰€æœ‰é…ç½®ï¼Œç”Ÿå‘½å‘¨æœŸäº‹ä»¶å›è°ƒç­‰ã€‚</p><p>å°ç»“</p><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰ç†è§£Spring IoCï¼Ÿ è¿™é‡Œå°ç»“ä¸€ä¸‹ï¼šIoC åœ¨ Spring é‡Œï¼Œåªéœ€è¦ä½çº§å®¹å™¨å°±å¯ä»¥å®ç°ï¼Œ2 ä¸ªæ­¥éª¤ï¼š</p><ol><li>åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè§£ææˆ BeanDefinition æ”¾åœ¨ Map é‡Œã€‚</li><li>è°ƒç”¨ getBean çš„æ—¶å€™ï¼Œä» BeanDefinition æ‰€å±çš„ Map é‡Œï¼Œæ‹¿å‡º Class å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–ï¼ŒåŒæ—¶ï¼Œå¦‚æœæœ‰ä¾èµ–å…³ç³»ï¼Œå°†é€’å½’è°ƒç”¨ getBean æ–¹æ³• â€”â€” å®Œæˆä¾èµ–æ³¨å…¥ã€‚</li></ol><p>ä¸Šé¢å°±æ˜¯ Spring ä½çº§å®¹å™¨ï¼ˆBeanFactoryï¼‰çš„ IoCã€‚</p><p>è‡³äºé«˜çº§å®¹å™¨ ApplicationContextï¼Œä»–åŒ…å«äº†ä½çº§å®¹å™¨çš„åŠŸèƒ½ï¼Œå½“ä»–æ‰§è¡Œ refresh æ¨¡æ¿æ–¹æ³•çš„æ—¶å€™ï¼Œå°†åˆ·æ–°æ•´ä¸ªå®¹å™¨çš„ Beanã€‚åŒæ—¶å…¶ä½œä¸ºé«˜çº§å®¹å™¨ï¼ŒåŒ…å«äº†å¤ªå¤šçš„åŠŸèƒ½ã€‚ä¸€å¥è¯ï¼Œä»–ä¸ä»…ä»…æ˜¯ IoCã€‚ä»–æ”¯æŒä¸åŒä¿¡æ¯æºå¤´ï¼Œæ”¯æŒ BeanFactory å·¥å…·ç±»ï¼Œæ”¯æŒå±‚çº§å®¹å™¨ï¼Œæ”¯æŒè®¿é—®æ–‡ä»¶èµ„æºï¼Œæ”¯æŒäº‹ä»¶å‘å¸ƒé€šçŸ¥ï¼Œæ”¯æŒæ¥å£å›è°ƒç­‰ç­‰ã€‚</p><h3 id="ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ApplicationContexté€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>FileSystemXmlApplicationContext</strong> ï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼ŒXML Bean é…ç½®æ–‡ä»¶çš„å…¨è·¯å¾„åå¿…é¡»æä¾›ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚</p><p><strong>ClassPathXmlApplicationContext</strong>ï¼šæ­¤å®¹å™¨ä¹Ÿä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼Œè¿™é‡Œï¼Œä½ éœ€è¦æ­£ç¡®è®¾ç½®classpathå› ä¸ºè¿™ä¸ªå®¹å™¨å°†åœ¨classpathé‡Œæ‰¾beané…ç½®ã€‚</p><p><strong>WebXmlApplicationContext</strong>ï¼šæ­¤å®¹å™¨åŠ è½½ä¸€ä¸ªXMLæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªWEBåº”ç”¨çš„æ‰€æœ‰beanã€‚</p><h3 id="ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Springçš„ä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>æ§åˆ¶åè½¬IoCæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ¦‚å¿µï¼Œå¯ä»¥ç”¨ä¸åŒçš„æ–¹å¼æ¥å®ç°ã€‚å…¶ä¸»è¦å®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼šä¾èµ–æ³¨å…¥å’Œä¾èµ–æŸ¥æ‰¾</p><p>ä¾èµ–æ³¨å…¥ï¼šç›¸å¯¹äºIoCè€Œè¨€ï¼Œä¾èµ–æ³¨å…¥(DI)æ›´åŠ å‡†ç¡®åœ°æè¿°äº†IoCçš„è®¾è®¡ç†å¿µã€‚æ‰€è°“ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ï¼Œå³ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨åº”ç”¨ç³»ç»Ÿè¿è¡ŒæœŸæ¥å†³å®šï¼Œä¹Ÿå°±æ˜¯ç”±å®¹å™¨åŠ¨æ€åœ°å°†æŸç§ä¾èµ–å…³ç³»çš„ç›®æ ‡å¯¹è±¡å®ä¾‹æ³¨å…¥åˆ°åº”ç”¨ç³»ç»Ÿä¸­çš„å„ä¸ªå…³è”çš„ç»„ä»¶ä¹‹ä¸­ã€‚ç»„ä»¶ä¸åšå®šä½æŸ¥è¯¢ï¼Œåªæä¾›æ™®é€šçš„Javaæ–¹æ³•è®©å®¹å™¨å»å†³å®šä¾èµ–å…³ç³»ã€‚</p><h3 id="ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™"><a href="#ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™" class="headerlink" title="ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™"></a>ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™</h3><p>ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™æ˜¯ï¼šåº”ç”¨ç»„ä»¶ä¸åº”è¯¥è´Ÿè´£æŸ¥æ‰¾èµ„æºæˆ–è€…å…¶ä»–ä¾èµ–çš„åä½œå¯¹è±¡ã€‚é…ç½®å¯¹è±¡çš„å·¥ä½œåº”è¯¥ç”±IoCå®¹å™¨è´Ÿè´£ï¼Œâ€œæŸ¥æ‰¾èµ„æºâ€çš„é€»è¾‘åº”è¯¥ä»åº”ç”¨ç»„ä»¶çš„ä»£ç ä¸­æŠ½å–å‡ºæ¥ï¼Œäº¤ç»™IoCå®¹å™¨è´Ÿè´£ã€‚å®¹å™¨å…¨æƒè´Ÿè´£ç»„ä»¶çš„è£…é…ï¼Œå®ƒä¼šæŠŠç¬¦åˆä¾èµ–å…³ç³»çš„å¯¹è±¡é€šè¿‡å±æ€§ï¼ˆJavaBeanä¸­çš„setterï¼‰æˆ–è€…æ˜¯æ„é€ å™¨ä¼ é€’ç»™éœ€è¦çš„å¯¹è±¡ã€‚</p><h3 id="ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿"><a href="#ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿" class="headerlink" title="ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿"></a>ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿</h3><p>ä¾èµ–æ³¨å…¥ä¹‹æ‰€ä»¥æ›´æµè¡Œæ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ç§æ›´å¯å–çš„æ–¹å¼ï¼šè®©å®¹å™¨å…¨æƒè´Ÿè´£ä¾èµ–æŸ¥è¯¢ï¼Œå—ç®¡ç»„ä»¶åªéœ€è¦æš´éœ²JavaBeançš„setteræ–¹æ³•æˆ–è€…å¸¦å‚æ•°çš„æ„é€ å™¨æˆ–è€…æ¥å£ï¼Œä½¿å®¹å™¨å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ç»„è£…å¯¹è±¡çš„ä¾èµ–å…³ç³»ã€‚å…¶ä¸ä¾èµ–æŸ¥æ‰¾æ–¹å¼ç›¸æ¯”ï¼Œä¸»è¦ä¼˜åŠ¿ä¸ºï¼š</p><ul><li>æŸ¥æ‰¾å®šä½æ“ä½œä¸åº”ç”¨ä»£ç å®Œå…¨æ— å…³ã€‚</li><li>ä¸ä¾èµ–äºå®¹å™¨çš„APIï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä»»ä½•å®¹å™¨ä»¥å¤–ä½¿ç”¨åº”ç”¨å¯¹è±¡ã€‚</li><li>ä¸éœ€è¦ç‰¹æ®Šçš„æ¥å£ï¼Œç»å¤§å¤šæ•°å¯¹è±¡å¯ä»¥åšåˆ°å®Œå…¨ä¸å¿…ä¾èµ–å®¹å™¨ã€‚</li></ul><h3 id="æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ"><a href="#æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ"></a>æœ‰å“ªäº›ä¸åŒç±»å‹çš„ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼ï¼Ÿ</h3><p>ä¾èµ–æ³¨å…¥æ˜¯æ—¶ä¸‹æœ€æµè¡Œçš„IoCå®ç°æ–¹å¼ï¼Œä¾èµ–æ³¨å…¥åˆ†ä¸ºæ¥å£æ³¨å…¥ï¼ˆInterface Injectionï¼‰ï¼ŒSetteræ–¹æ³•æ³¨å…¥ï¼ˆSetter Injectionï¼‰å’Œæ„é€ å™¨æ³¨å…¥ï¼ˆConstructor Injectionï¼‰ä¸‰ç§æ–¹å¼ã€‚å…¶ä¸­æ¥å£æ³¨å…¥ç”±äºåœ¨çµæ´»æ€§å’Œæ˜“ç”¨æ€§æ¯”è¾ƒå·®ï¼Œç°åœ¨ä»Spring4å¼€å§‹å·²è¢«åºŸå¼ƒã€‚</p><p><strong>æ„é€ å™¨ä¾èµ–æ³¨å…¥</strong>ï¼šæ„é€ å™¨ä¾èµ–æ³¨å…¥é€šè¿‡å®¹å™¨è§¦å‘ä¸€ä¸ªç±»çš„æ„é€ å™¨æ¥å®ç°çš„ï¼Œè¯¥ç±»æœ‰ä¸€ç³»åˆ—å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªå¯¹å…¶ä»–ç±»çš„ä¾èµ–ã€‚</p><p><strong>Setteræ–¹æ³•æ³¨å…¥</strong>ï¼šSetteræ–¹æ³•æ³¨å…¥æ˜¯å®¹å™¨é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å™¨æˆ–æ— å‚staticå·¥å‚ æ–¹æ³•å®ä¾‹åŒ–beanä¹‹åï¼Œè°ƒç”¨è¯¥beançš„setteræ–¹æ³•ï¼Œå³å®ç°äº†åŸºäºsetterçš„ä¾èµ–æ³¨å…¥ã€‚</p><h3 id="æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ-Setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«"><a href="#æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ-Setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«" class="headerlink" title="æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ Setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«"></a>æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ Setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«</h3><table><thead><tr><th align="left"><strong>æ„é€ å‡½æ•°æ³¨å…¥</strong></th><th align="left"><strong>setter</strong> <strong>æ³¨å…¥</strong></th></tr></thead><tbody><tr><td align="left">æ²¡æœ‰éƒ¨åˆ†æ³¨å…¥</td><td align="left">æœ‰éƒ¨åˆ†æ³¨å…¥</td></tr><tr><td align="left">ä¸ä¼šè¦†ç›– setter å±æ€§</td><td align="left">ä¼šè¦†ç›– setter å±æ€§</td></tr><tr><td align="left">ä»»æ„ä¿®æ”¹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹</td><td align="left">ä»»æ„ä¿®æ”¹ä¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹</td></tr><tr><td align="left">é€‚ç”¨äºè®¾ç½®å¾ˆå¤šå±æ€§</td><td align="left">é€‚ç”¨äºè®¾ç½®å°‘é‡å±æ€§</td></tr></tbody></table><p>ä¸¤ç§ä¾èµ–æ–¹å¼éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥å’ŒSetteræ–¹æ³•æ³¨å…¥ã€‚æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨æ„é€ å™¨å‚æ•°å®ç°å¼ºåˆ¶ä¾èµ–ï¼Œsetteræ–¹æ³•å®ç°å¯é€‰ä¾èµ–ã€‚</p><h2 id="Spring-Beans"><a href="#Spring-Beans" class="headerlink" title="Spring Beans"></a>Spring Beans</h2><h3 id="ä»€ä¹ˆæ˜¯Spring-beansï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Spring-beansï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Spring beansï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Spring beansï¼Ÿ</h3><p>Spring beans æ˜¯é‚£äº›å½¢æˆSpringåº”ç”¨çš„ä¸»å¹²çš„javaå¯¹è±¡ã€‚å®ƒä»¬è¢«Spring IOCå®¹å™¨åˆå§‹åŒ–ï¼Œè£…é…ï¼Œå’Œç®¡ç†ã€‚è¿™äº›beansé€šè¿‡å®¹å™¨ä¸­é…ç½®çš„å…ƒæ•°æ®åˆ›å»ºã€‚æ¯”å¦‚ï¼Œä»¥XMLæ–‡ä»¶ä¸­ çš„å½¢å¼å®šä¹‰ã€‚</p><h3 id="ä¸€ä¸ª-Spring-Bean-å®šä¹‰-åŒ…å«ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ä¸ª-Spring-Bean-å®šä¹‰-åŒ…å«ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ä¸ª Spring Bean å®šä¹‰ åŒ…å«ä»€ä¹ˆï¼Ÿ"></a>ä¸€ä¸ª Spring Bean å®šä¹‰ åŒ…å«ä»€ä¹ˆï¼Ÿ</h3><p>ä¸€ä¸ªSpring Bean çš„å®šä¹‰åŒ…å«å®¹å™¨å¿…çŸ¥çš„æ‰€æœ‰é…ç½®å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬å¦‚ä½•åˆ›å»ºä¸€ä¸ªbeanï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¯¦æƒ…åŠå®ƒçš„ä¾èµ–ã€‚</p><h3 id="å¦‚ä½•ç»™Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼"><a href="#å¦‚ä½•ç»™Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼" class="headerlink" title="å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼"></a>å¦‚ä½•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼ŸSpringæœ‰å‡ ç§é…ç½®æ–¹å¼</h3><p>è¿™é‡Œæœ‰ä¸‰ç§é‡è¦çš„æ–¹æ³•ç»™Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ã€‚</p><ul><li>XMLé…ç½®æ–‡ä»¶ã€‚</li><li>åŸºäºæ³¨è§£çš„é…ç½®ã€‚</li><li>åŸºäºjavaçš„é…ç½®ã€‚</li></ul><h3 id="Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯"><a href="#Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯" class="headerlink" title="Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯"></a>Springé…ç½®æ–‡ä»¶åŒ…å«äº†å“ªäº›ä¿¡æ¯</h3><p>Springé…ç½®æ–‡ä»¶æ˜¯ä¸ªXML æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ç±»ä¿¡æ¯ï¼Œæè¿°äº†å¦‚ä½•é…ç½®å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•ç›¸äº’è°ƒç”¨ã€‚</p><h3 id="SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼"><a href="#SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼" class="headerlink" title="SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼"></a>SpringåŸºäºxmlæ³¨å…¥beançš„å‡ ç§æ–¹å¼</h3><ol><li>Setæ–¹æ³•æ³¨å…¥ï¼›</li><li>æ„é€ å™¨æ³¨å…¥ï¼šâ‘ é€šè¿‡indexè®¾ç½®å‚æ•°çš„ä½ç½®ï¼›â‘¡é€šè¿‡typeè®¾ç½®å‚æ•°ç±»å‹ï¼›</li><li>é™æ€å·¥å‚æ³¨å…¥ï¼›</li><li>å®ä¾‹å·¥å‚ï¼›</li></ol><h3 id="ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ"><a href="#ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ"></a>ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ</h3><p>å½“å®šä¹‰ä¸€ä¸ª åœ¨Springé‡Œï¼Œæˆ‘ä»¬è¿˜èƒ½ç»™è¿™ä¸ªbeanå£°æ˜ä¸€ä¸ªä½œç”¨åŸŸã€‚å®ƒå¯ä»¥é€šè¿‡bean å®šä¹‰ä¸­çš„scopeå±æ€§æ¥å®šä¹‰ã€‚å¦‚ï¼Œå½“Springè¦åœ¨éœ€è¦çš„æ—¶å€™æ¯æ¬¡ç”Ÿäº§ä¸€ä¸ªæ–°çš„beanå®ä¾‹ï¼Œbeançš„scopeå±æ€§è¢«æŒ‡å®šä¸ºprototypeã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€ä¸ªbeanæ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™å¿…é¡»è¿”å›åŒä¸€ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªbeançš„scope å±æ€§ å¿…é¡»è®¾ä¸º singletonã€‚</p><h3 id="è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ"><a href="#è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ" class="headerlink" title="è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ"></a>è§£é‡ŠSpringæ”¯æŒçš„å‡ ç§beançš„ä½œç”¨åŸŸ</h3><p>Springæ¡†æ¶æ”¯æŒä»¥ä¸‹äº”ç§beançš„ä½œç”¨åŸŸï¼š</p><ul><li><strong>singleton :</strong> beanåœ¨æ¯ä¸ªSpring ioc å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li><li><strong>prototype</strong>ï¼šä¸€ä¸ªbeançš„å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ã€‚</li><li><strong>request</strong>ï¼šæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li><li><strong>session</strong>ï¼šåœ¨ä¸€ä¸ªHTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li><li><strong>global-session</strong>ï¼šåœ¨ä¸€ä¸ªå…¨å±€çš„HTTP Sessionä¸­ï¼Œä¸€ä¸ªbeanå®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäºwebçš„Spring ApplicationContextæƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</li></ul><p><strong>æ³¨æ„ï¼š</strong> ç¼ºçœçš„Spring bean çš„ä½œç”¨åŸŸæ˜¯Singletonã€‚ä½¿ç”¨ prototype ä½œç”¨åŸŸéœ€è¦æ…é‡çš„æ€è€ƒï¼Œå› ä¸ºé¢‘ç¹åˆ›å»ºå’Œé”€æ¯ bean ä¼šå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½å¼€é”€ã€‚</p><h3 id="Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ"><a href="#Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ" class="headerlink" title="Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ"></a>Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h3><p>ä¸æ˜¯ï¼ŒSpringæ¡†æ¶ä¸­çš„å•ä¾‹beanä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>spring ä¸­çš„ bean é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œspring æ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹ bean è¿›è¡Œå¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚</p><p>å®é™…ä¸Šå¤§éƒ¨åˆ†æ—¶å€™ spring bean æ— çŠ¶æ€çš„ï¼ˆæ¯”å¦‚ dao ç±»ï¼‰ï¼Œæ‰€æœ‰æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ bean ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†å¦‚æœ bean æœ‰çŠ¶æ€çš„è¯ï¼ˆæ¯”å¦‚ view model å¯¹è±¡ï¼‰ï¼Œé‚£å°±è¦å¼€å‘è€…è‡ªå·±å»ä¿è¯çº¿ç¨‹å®‰å…¨äº†ï¼Œæœ€ç®€å•çš„å°±æ˜¯æ”¹å˜ bean çš„ä½œç”¨åŸŸï¼ŒæŠŠâ€œsingletonâ€å˜æ›´ä¸ºâ€œprototypeâ€ï¼Œè¿™æ ·è¯·æ±‚ bean ç›¸å½“äº new Bean()äº†ï¼Œæ‰€ä»¥å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚</p><ul><li>æœ‰çŠ¶æ€å°±æ˜¯æœ‰æ•°æ®å­˜å‚¨åŠŸèƒ½ã€‚</li><li>æ— çŠ¶æ€å°±æ˜¯ä¸ä¼šä¿å­˜æ•°æ®ã€‚</li></ul><h3 id="Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ"><a href="#Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ" class="headerlink" title="Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ"></a>Springå¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Ÿ</h3><p>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªæœ‰æ— çŠ¶æ€çš„Beanæ‰å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å…±äº«ï¼Œåœ¨Springä¸­ï¼Œç»å¤§éƒ¨åˆ†Beanéƒ½å¯ä»¥å£°æ˜ä¸ºsingletonä½œç”¨åŸŸï¼Œå› ä¸ºSpringå¯¹ä¸€äº›Beanä¸­éçº¿ç¨‹å®‰å…¨çŠ¶æ€é‡‡ç”¨ThreadLocalè¿›è¡Œå¤„ç†ï¼Œè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><p>ThreadLocalå’Œçº¿ç¨‹åŒæ­¥æœºåˆ¶éƒ½æ˜¯ä¸ºäº†è§£å†³å¤šçº¿ç¨‹ä¸­ç›¸åŒå˜é‡çš„è®¿é—®å†²çªé—®é¢˜ã€‚åŒæ­¥æœºåˆ¶é‡‡ç”¨äº†â€œæ—¶é—´æ¢ç©ºé—´â€çš„æ–¹å¼ï¼Œä»…æä¾›ä¸€ä»½å˜é‡ï¼Œä¸åŒçš„çº¿ç¨‹åœ¨è®¿é—®å‰éœ€è¦è·å–é”ï¼Œæ²¡è·å¾—é”çš„çº¿ç¨‹åˆ™éœ€è¦æ’é˜Ÿã€‚è€ŒThreadLocalé‡‡ç”¨äº†â€œç©ºé—´æ¢æ—¶é—´â€çš„æ–¹å¼ã€‚</p><p>ThreadLocalä¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œéš”ç¦»äº†å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„è®¿é—®å†²çªã€‚å› ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å¯¹è¯¥å˜é‡è¿›è¡ŒåŒæ­¥äº†ã€‚ThreadLocalæä¾›äº†çº¿ç¨‹å®‰å…¨çš„å…±äº«å¯¹è±¡ï¼Œåœ¨ç¼–å†™å¤šçº¿ç¨‹ä»£ç æ—¶ï¼Œå¯ä»¥æŠŠä¸å®‰å…¨çš„å˜é‡å°è£…è¿›ThreadLocalã€‚</p><h3 id="é—®é¢˜ï¼šè§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ-é‡è¦"><a href="#é—®é¢˜ï¼šè§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ-é‡è¦" class="headerlink" title="é—®é¢˜ï¼šè§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ (é‡è¦)"></a>é—®é¢˜ï¼šè§£é‡ŠSpringæ¡†æ¶ä¸­beançš„ç”Ÿå‘½å‘¨æœŸ (é‡è¦)</h3><p>Spring Beançš„ç”Ÿå‘½å‘¨æœŸæ˜¯Springé¢è¯•çƒ­ç‚¹é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜å³è€ƒå¯Ÿå¯¹Springçš„å¾®è§‚äº†è§£ï¼Œåˆè€ƒå¯Ÿå¯¹Springçš„å®è§‚è®¤è¯†ï¼Œæƒ³è¦ç­”å¥½å¹¶ä¸å®¹æ˜“ï¼æœ¬æ–‡å¸Œæœ›èƒ½å¤Ÿä»æºç è§’åº¦å…¥æ‰‹ï¼Œå¸®åŠ©é¢è¯•è€…å½»åº•æå®šSpring Beançš„ç”Ÿå‘½å‘¨æœŸã€‚</p><h4 id="å‚è€ƒç­”æ¡ˆ"><a href="#å‚è€ƒç­”æ¡ˆ" class="headerlink" title="å‚è€ƒç­”æ¡ˆ:"></a>å‚è€ƒç­”æ¡ˆ:</h4><p>é¦–å…ˆï¼Œå›ç­”é˜¶æ®µçš„æ•°é‡ï¼š<strong>åªæœ‰å››ä¸ªï¼</strong></p><blockquote><p>æ˜¯çš„ï¼ŒSpring Beançš„ç”Ÿå‘½å‘¨æœŸåªæœ‰è¿™å››ä¸ªé˜¶æ®µã€‚æŠŠè¿™å››ä¸ªé˜¶æ®µå’Œæ¯ä¸ªé˜¶æ®µå¯¹åº”çš„æ‰©å±•ç‚¹ç³…åˆåœ¨ä¸€èµ·è™½ç„¶æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è¿™æ ·éå¸¸å‡Œä¹±ï¼Œéš¾ä»¥è®°å¿†ã€‚</p></blockquote><p>è¦å½»åº•ææ¸…æ¥šSpringçš„ç”Ÿå‘½å‘¨æœŸï¼Œé¦–å…ˆè¦æŠŠè¿™å››ä¸ªé˜¶æ®µç‰¢ç‰¢è®°ä½ã€‚å®ä¾‹åŒ–å’Œå±æ€§èµ‹å€¼å¯¹åº”æ„é€ æ–¹æ³•å’Œsetteræ–¹æ³•çš„æ³¨å…¥ï¼Œåˆå§‹åŒ–å’Œé”€æ¯æ˜¯ç”¨æˆ·èƒ½è‡ªå®šä¹‰æ‰©å±•çš„ä¸¤ä¸ªé˜¶æ®µã€‚åœ¨è¿™å››æ­¥ä¹‹é—´ç©¿æ’çš„å„ç§æ‰©å±•ç‚¹ï¼Œç¨åä¼šè®²ã€‚</p><ol><li>å®ä¾‹åŒ– Instantiation</li><li>å±æ€§èµ‹å€¼ Populate</li><li>åˆå§‹åŒ– Initialization</li><li>é”€æ¯ Destruction</li></ol><p><strong>å®ä¾‹åŒ– -&gt; å±æ€§èµ‹å€¼ -&gt; åˆå§‹åŒ– -&gt; é”€æ¯</strong></p><p><a href=""><img src="https://s2.loli.net/2022/04/26/btcZeJNyQLqomTs.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><h5 id="å„ä¸ªé˜¶æ®µçš„å·¥ä½œ"><a href="#å„ä¸ªé˜¶æ®µçš„å·¥ä½œ" class="headerlink" title="å„ä¸ªé˜¶æ®µçš„å·¥ä½œ:"></a>å„ä¸ªé˜¶æ®µçš„å·¥ä½œ:</h5><ol><li>å®ä¾‹åŒ–ï¼Œåˆ›å»ºä¸€ä¸ªBeanå¯¹è±¡</li><li>å¡«å……å±æ€§ï¼Œä¸ºå±æ€§èµ‹å€¼</li><li>åˆå§‹åŒ–</li><li><ul><li>å¦‚æœå®ç°äº†<code>xxxAware</code>æ¥å£ï¼Œé€šè¿‡ä¸åŒç±»å‹çš„Awareæ¥å£æ‹¿åˆ°Springå®¹å™¨çš„èµ„æº</li><li>å¦‚æœå®ç°äº†BeanPostProcessoræ¥å£ï¼Œåˆ™ä¼šå›è°ƒè¯¥æ¥å£çš„<code>postProcessBeforeInitialzation</code>å’Œ<code>postProcessAfterInitialization</code>æ–¹æ³•</li><li>å¦‚æœé…ç½®äº†<code>init-method</code>æ–¹æ³•ï¼Œåˆ™ä¼šæ‰§è¡Œ<code>init-method</code>é…ç½®çš„æ–¹æ³•</li></ul></li><li>é”€æ¯</li><li><ul><li>å®¹å™¨å…³é—­åï¼Œå¦‚æœBeanå®ç°äº†<code>DisposableBean</code>æ¥å£ï¼Œåˆ™ä¼šå›è°ƒè¯¥æ¥å£çš„<code>destroy</code>æ–¹æ³•</li><li>å¦‚æœé…ç½®äº†<code>destroy-method</code>æ–¹æ³•ï¼Œåˆ™ä¼šæ‰§è¡Œ<code>destroy-method</code>é…ç½®çš„æ–¹æ³•</li></ul></li></ol><h5 id="æºç å­¦ä¹ ï¼š"><a href="#æºç å­¦ä¹ ï¼š" class="headerlink" title="æºç å­¦ä¹ ï¼š"></a>æºç å­¦ä¹ ï¼š</h5><p>å‰ä¸‰ä¸ªé˜¶æ®µï¼Œä¸»è¦é€»è¾‘éƒ½åœ¨doCreate()æ–¹æ³•ä¸­ï¼Œé€»è¾‘å¾ˆæ¸…æ™°ï¼Œå°±æ˜¯é¡ºåºè°ƒç”¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•ä¸ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸé˜¶æ®µä¸€ä¸€å¯¹åº”ï¼Œéå¸¸é‡è¦ï¼Œåœ¨åç»­æ‰©å±•æ¥å£åˆ†æä¸­ä¹Ÿä¼šæ¶‰åŠã€‚</p><ol><li>createBeanInstance() -&gt; å®ä¾‹åŒ–</li><li>populateBean() -&gt; å±æ€§èµ‹å€¼</li><li>initializeBean() -&gt; åˆå§‹åŒ–</li></ol><blockquote><p>æ³¨ï¼šbeançš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»å°†beanå®šä¹‰å…¨éƒ¨æ³¨å†Œåˆ°BeanFacotryä¸­ä»¥åå¼€å§‹çš„ã€‚</p></blockquote><p>æºç å¦‚ä¸‹ï¼Œèƒ½è¯æ˜å®ä¾‹åŒ–ï¼Œå±æ€§èµ‹å€¼å’Œåˆå§‹åŒ–è¿™ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸçš„å­˜åœ¨ã€‚å…³äºæœ¬æ–‡çš„Springæºç éƒ½å°†å¿½ç•¥æ— å…³éƒ¨åˆ†ï¼Œä¾¿äºç†è§£ï¼š</p><p><strong>å‰ä¸‰ä¸ªé˜¶æ®µçš„æºç ï¼š</strong></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">// å¿½ç•¥äº†æ— å…³ä»£ç </span><br>protected Object <span class="hljs-keyword">do</span><span class="hljs-constructor">CreateBean(<span class="hljs-params">final</span> String <span class="hljs-params">beanName</span>, <span class="hljs-params">final</span> RootBeanDefinition <span class="hljs-params">mbd</span>, <span class="hljs-params">final</span> @Nullable Object[] <span class="hljs-params">args</span>)</span><br>      throws BeanCreationException &#123;<br>   <span class="hljs-comment">// Instantiate the bean.</span><br>   BeanWrapper instanceWrapper = null;<br>   <span class="hljs-keyword">if</span> (instanceWrapper<span class="hljs-operator"> == </span>null) &#123;<br>       <span class="hljs-comment">// å®ä¾‹åŒ–é˜¶æ®µï¼</span><br>      instanceWrapper = create<span class="hljs-constructor">BeanInstance(<span class="hljs-params">beanName</span>, <span class="hljs-params">mbd</span>, <span class="hljs-params">args</span>)</span>;<br>   &#125;<br>   <span class="hljs-comment">// Initialize the bean instance.</span><br>   Object exposedObject = bean;<br>   <span class="hljs-keyword">try</span> &#123;<br>       <span class="hljs-comment">// å±æ€§èµ‹å€¼é˜¶æ®µï¼</span><br>      populate<span class="hljs-constructor">Bean(<span class="hljs-params">beanName</span>, <span class="hljs-params">mbd</span>, <span class="hljs-params">instanceWrapper</span>)</span>;<br>       <span class="hljs-comment">// åˆå§‹åŒ–é˜¶æ®µï¼</span><br>      exposedObject = initialize<span class="hljs-constructor">Bean(<span class="hljs-params">beanName</span>, <span class="hljs-params">exposedObject</span>, <span class="hljs-params">mbd</span>)</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢è¿™äº›è¿™ä¸ªå®ä¾‹åŒ–Beançš„æ–¹æ³•æ˜¯åœ¨getBean()æ–¹æ³•ä¸­è°ƒç”¨çš„ï¼Œè€ŒgetBeanæ˜¯åœ¨finishBeanFactoryInitializationæ–¹æ³•ä¸­è°ƒç”¨çš„ï¼Œç”¨æ¥å®ä¾‹åŒ–å•ä¾‹éæ‡’åŠ è½½Beanï¼Œæºç å¦‚ä¸‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@Override</span><br>public void refresh() throws BeansException, IllegalStateException &#123;<br>    synchronized (this.startupShutdownMonitor) &#123;<br>        try &#123;<br>            <span class="hljs-comment">// Allows post-processing of the bean factory in context subclasses.</span><br>            <span class="hljs-built_in">postProcessBeanFactory</span>(beanFactory);<br>            <span class="hljs-comment">// Invoke factory processors registered as beans in the context.</span><br>            <span class="hljs-built_in">invokeBeanFactoryPostProcessors</span>(beanFactory);<br>            <span class="hljs-comment">// Register bean processors that intercept bean creation.</span><br><br>            <span class="hljs-comment">// æ‰€æœ‰BeanPostProcesseråˆå§‹åŒ–çš„è°ƒç”¨ç‚¹</span><br>            <span class="hljs-built_in">registerBeanPostProcessors</span>(beanFactory);<br>            <span class="hljs-comment">// Initialize message source for this context.</span><br>            <span class="hljs-built_in">initMessageSource</span>();<br>            <span class="hljs-comment">// Initialize event multicaster for this context.</span><br>            <span class="hljs-built_in">initApplicationEventMulticaster</span>();<br>            <span class="hljs-comment">// Initialize other special beans in specific context subclasses.</span><br>            <span class="hljs-built_in">onRefresh</span>();<br>            <span class="hljs-comment">// Check for listener beans and register them.</span><br>            <span class="hljs-built_in">registerListeners</span>();<br>            <span class="hljs-comment">// Instantiate all remaining (non-lazy-init) singletons.</span><br><br>            <span class="hljs-comment">// æ‰€æœ‰å•ä¾‹éæ‡’åŠ è½½Beançš„è°ƒç”¨ç‚¹</span><br>            <span class="hljs-built_in">finishBeanFactoryInitialization</span>(beanFactory);<br>            <span class="hljs-comment">// Last step: publish corresponding event.</span><br>            <span class="hljs-built_in">finishRefresh</span>();<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é”€æ¯Beané˜¶æ®µ:</strong></p><p>è‡³äºé”€æ¯ï¼Œæ˜¯åœ¨å®¹å™¨å…³é—­æ—¶è°ƒç”¨çš„ï¼Œè¯¦è§ ConfigurableApplicationContext#close()</p><h4 id="é«˜åˆ†ç­”é¢˜çš„æŠ€å·§"><a href="#é«˜åˆ†ç­”é¢˜çš„æŠ€å·§" class="headerlink" title="é«˜åˆ†ç­”é¢˜çš„æŠ€å·§:"></a>é«˜åˆ†ç­”é¢˜çš„æŠ€å·§:</h4><blockquote><p>å¦‚æœå›ç­”äº†ä¸Šé¢çš„ç­”æ¡ˆå¯ä»¥æ‹¿åˆ°100åˆ†çš„è¯ï¼ŒåŠ ä¸Šä¸‹é¢çš„å†…å®¹ï¼Œå°±æ˜¯120åˆ†</p></blockquote><h5 id="ç”Ÿå‘½å‘¨æœŸå¸¸ç”¨æ‰©å±•ç‚¹"><a href="#ç”Ÿå‘½å‘¨æœŸå¸¸ç”¨æ‰©å±•ç‚¹" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå¸¸ç”¨æ‰©å±•ç‚¹"></a><strong>ç”Ÿå‘½å‘¨æœŸå¸¸ç”¨æ‰©å±•ç‚¹</strong></h5><p>Springç”Ÿå‘½å‘¨æœŸç›¸å…³çš„å¸¸ç”¨æ‰©å±•ç‚¹éå¸¸å¤šï¼Œæ‰€ä»¥é—®é¢˜ä¸æ˜¯ä¸çŸ¥é“ï¼Œè€Œæ˜¯è®°ä¸ä½æˆ–è€…è®°ä¸ç‰¢ã€‚å…¶å®è®°ä¸ä½çš„æ ¹æœ¬åŸå› è¿˜æ˜¯ä¸å¤Ÿäº†è§£ï¼Œè¿™é‡Œé€šè¿‡æºç +åˆ†ç±»çš„æ–¹å¼å¸®å¤§å®¶è®°å¿†ã€‚</p><p>åŒºåˆ†å½±å“ä¸€ä¸ªbeanæˆ–è€…å¤šä¸ªbeanæ˜¯ä»æºç åˆ†æå¾—å‡ºçš„.</p><p>ä»¥BeanPostProcessorä¸ºä¾‹ï¼š</p><ol><li>ä»refreshæ–¹æ³•æ¥çœ‹,BeanPostProcessor å®ä¾‹åŒ–æ¯”æ­£å¸¸çš„beanæ—©.</li><li>ä»initializeBeanæ–¹æ³•çœ‹,æ¯ä¸ªbeanåˆå§‹åŒ–å‰åéƒ½è°ƒç”¨æ‰€æœ‰BeanPostProcessorçš„postProcessBeforeInitializationå’ŒpostProcessAfterInitializationæ–¹æ³•.</li></ol><h4 id="ç¬¬ä¸€å¤§ç±»ï¼šå½±å“å¤šä¸ªBeançš„æ¥å£"><a href="#ç¬¬ä¸€å¤§ç±»ï¼šå½±å“å¤šä¸ªBeançš„æ¥å£" class="headerlink" title="ç¬¬ä¸€å¤§ç±»ï¼šå½±å“å¤šä¸ªBeançš„æ¥å£"></a>ç¬¬ä¸€å¤§ç±»ï¼šå½±å“å¤šä¸ªBeançš„æ¥å£</h4><p>å®ç°äº†è¿™äº›æ¥å£çš„Beanä¼šåˆ‡å…¥åˆ°å¤šä¸ªBeançš„ç”Ÿå‘½å‘¨æœŸä¸­ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œè¿™äº›æ¥å£çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼ŒSpringå†…éƒ¨æ‰©å±•ä¹Ÿç»å¸¸ä½¿ç”¨è¿™äº›æ¥å£ï¼Œä¾‹å¦‚è‡ªåŠ¨æ³¨å…¥ä»¥åŠAOPçš„å®ç°éƒ½å’Œä»–ä»¬æœ‰å…³ã€‚</p><ul><li>InstantiationAwareBeanPostProcessor</li><li>BeanPostProcessor</li></ul><p>è¿™ä¸¤å…„å¼Ÿå¯èƒ½æ˜¯Springæ‰©å±•ä¸­<strong>æœ€é‡è¦</strong>çš„ä¸¤ä¸ªæ¥å£ï¼InstantiationAwareBeanPostProcessorä½œç”¨äº<strong>å®ä¾‹åŒ–</strong>é˜¶æ®µçš„å‰åï¼ŒBeanPostProcessorä½œç”¨äº<strong>åˆå§‹åŒ–</strong>é˜¶æ®µçš„å‰åã€‚æ­£å¥½å’Œç¬¬ä¸€ã€ç¬¬ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸé˜¶æ®µå¯¹åº”ã€‚é€šè¿‡å›¾èƒ½æ›´å¥½ç†è§£ï¼š</p><p><a href="https://img-blog.csdnimg.cn/20200313090614543.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N5OTczMDcxMjYz,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/04/26/ygnB4Vulf5RhUxv.png" alt="img"></a></p><h4 id="InstantiationAwareBeanPostProcessor"><a href="#InstantiationAwareBeanPostProcessor" class="headerlink" title="InstantiationAwareBeanPostProcessor"></a>InstantiationAwareBeanPostProcessor</h4><p>InstantiationAwareBeanPostProcessorå®é™…ä¸Šç»§æ‰¿äº†BeanPostProcessoræ¥å£ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šæ¥çœ‹ä»–ä»¬ä¸æ˜¯ä¸¤å…„å¼Ÿï¼Œè€Œæ˜¯ä¸¤çˆ¶å­ã€‚ä½†æ˜¯ä»ç”Ÿå‘½å‘¨æœŸè§’åº¦æˆ‘ä»¬é‡ç‚¹å…³æ³¨å…¶ç‰¹æœ‰çš„å¯¹å®ä¾‹åŒ–é˜¶æ®µçš„å½±å“ï¼Œå›¾ä¸­çœç•¥äº†ä»BeanPostProcessorç»§æ‰¿çš„æ–¹æ³•ã€‚</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">InstantiationAwareBeanPostProcessor </span><span class="hljs-keyword">extends </span><span class="hljs-keyword">BeanPostProcessor</span><br></code></pre></td></tr></table></figure><p><strong>InstantiationAwareBeanPostProcessoræºç åˆ†æï¼š</strong></p><ul><li><strong>postProcessBeforeInstantiationè°ƒç”¨ç‚¹</strong>ï¼Œå¿½ç•¥æ— å…³ä»£ç ï¼š</li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Override<br>protected Object create<span class="hljs-constructor">Bean(String <span class="hljs-params">beanName</span>, RootBeanDefinition <span class="hljs-params">mbd</span>, @Nullable Object[] <span class="hljs-params">args</span>)</span><br>        throws BeanCreationException &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// Give BeanPostProcessors a chance to return a proxy instead of the target bean instance.</span><br>        <span class="hljs-comment">// postProcessBeforeInstantiationæ–¹æ³•è°ƒç”¨ç‚¹ï¼Œè¿™é‡Œå°±ä¸è·Ÿè¿›äº†ï¼Œ</span><br>        <span class="hljs-comment">// æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±çœ‹ä¸‹ï¼Œå°±æ˜¯forå¾ªç¯è°ƒç”¨æ‰€æœ‰çš„InstantiationAwareBeanPostProcessor</span><br>        Object bean = resolve<span class="hljs-constructor">BeforeInstantiation(<span class="hljs-params">beanName</span>, <span class="hljs-params">mbdToUse</span>)</span>;<br>        <span class="hljs-keyword">if</span> (bean != null) &#123;<br>            return bean;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">try</span> &#123;   <br>        <span class="hljs-comment">// ä¸Šæ–‡æåˆ°çš„doCreateBeanæ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°</span><br>        <span class="hljs-comment">// postProcessBeforeInstantiationæ–¹æ³•åœ¨åˆ›å»ºBeanä¹‹å‰è°ƒç”¨</span><br>        Object beanInstance = <span class="hljs-keyword">do</span><span class="hljs-constructor">CreateBean(<span class="hljs-params">beanName</span>, <span class="hljs-params">mbdToUse</span>, <span class="hljs-params">args</span>)</span>;<br>        <span class="hljs-keyword">if</span> (logger.is<span class="hljs-constructor">TraceEnabled()</span>) &#123;<br>            logger.trace(<span class="hljs-string">&quot;Finished creating instance of bean &#x27;&quot;</span> + beanName + <span class="hljs-string">&quot;&#x27;&quot;</span>);<br>        &#125;<br>        return beanInstance;<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼ŒpostProcessBeforeInstantiationåœ¨doCreateBeanä¹‹å‰è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯åœ¨beanå®ä¾‹åŒ–ä¹‹å‰è°ƒç”¨çš„ï¼Œè‹±æ–‡æºç æ³¨é‡Šè§£é‡Šé“è¯¥æ–¹æ³•çš„è¿”å›å€¼ä¼šæ›¿æ¢åŸæœ¬çš„Beanä½œä¸ºä»£ç†ï¼Œè¿™ä¹Ÿæ˜¯Aopç­‰åŠŸèƒ½å®ç°çš„å…³é”®ç‚¹ã€‚</p><ul><li><strong>postProcessAfterInstantiationè°ƒç”¨ç‚¹ï¼Œ</strong>å¿½ç•¥æ— å…³ä»£ç ï¼š</li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">protected void populate<span class="hljs-constructor">Bean(String <span class="hljs-params">beanName</span>, RootBeanDefinition <span class="hljs-params">mbd</span>, @Nullable BeanWrapper <span class="hljs-params">bw</span>)</span> &#123;<br>    <span class="hljs-comment">// Give any InstantiationAwareBeanPostProcessors the opportunity to modify the</span><br>    <span class="hljs-comment">// state of the bean before properties are set. This can be used, for example,</span><br>    <span class="hljs-comment">// to support styles of field injection.</span><br>    boolean continueWithPropertyPopulation = <span class="hljs-literal">true</span>;<br><br>     <span class="hljs-comment">// InstantiationAwareBeanPostProcessor#postProcessAfterInstantiation()</span><br>     <span class="hljs-comment">// æ–¹æ³•ä½œä¸ºå±æ€§èµ‹å€¼çš„å‰ç½®æ£€æŸ¥æ¡ä»¶ï¼Œåœ¨å±æ€§èµ‹å€¼ä¹‹å‰æ‰§è¡Œï¼Œèƒ½å¤Ÿå½±å“æ˜¯å¦è¿›è¡Œå±æ€§èµ‹å€¼ï¼</span><br>    <span class="hljs-keyword">if</span> (!mbd.is<span class="hljs-constructor">Synthetic()</span><span class="hljs-operator"> &amp;&amp; </span>has<span class="hljs-constructor">InstantiationAwareBeanPostProcessors()</span>) &#123;<br>       <span class="hljs-keyword">for</span> (BeanPostProcessor bp : get<span class="hljs-constructor">BeanPostProcessors()</span>) &#123;<br>          <span class="hljs-keyword">if</span> (bp instanceof InstantiationAwareBeanPostProcessor) &#123;<br>             InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;<br>             <span class="hljs-keyword">if</span> (!ibp.post<span class="hljs-constructor">ProcessAfterInstantiation(<span class="hljs-params">bw</span>.<span class="hljs-params">getWrappedInstance</span>()</span>, beanName)) &#123;<br>                continueWithPropertyPopulation = <span class="hljs-literal">false</span>;<br>                break;<br>             &#125;<br>          &#125;<br>       &#125;<br>    &#125;<br> <br>    <span class="hljs-comment">// å¿½ç•¥åç»­çš„å±æ€§èµ‹å€¼æ“ä½œä»£ç </span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¯¥æ–¹æ³•åœ¨å±æ€§èµ‹å€¼æ–¹æ³•å†…ï¼Œä½†æ˜¯åœ¨çœŸæ­£æ‰§è¡Œèµ‹å€¼æ“ä½œä¹‹å‰ã€‚å…¶è¿”å›å€¼ä¸ºbooleanï¼Œè¿”å›falseæ—¶å¯ä»¥é˜»æ–­å±æ€§èµ‹å€¼é˜¶æ®µï¼ˆcontinueWithPropertyPopulation &#x3D; false;ï¼‰ã€‚</p><h4 id="BeanPostProcessor"><a href="#BeanPostProcessor" class="headerlink" title="BeanPostProcessor"></a>BeanPostProcessor</h4><p>å…³äºBeanPostProcessoræ‰§è¡Œé˜¶æ®µçš„æºç ç©¿æ’åœ¨ä¸‹æ–‡Awareæ¥å£çš„è°ƒç”¨æ—¶æœºåˆ†æä¸­ï¼Œå› ä¸ºéƒ¨åˆ†AwareåŠŸèƒ½çš„å°±æ˜¯é€šè¿‡ä»–å®ç°çš„!åªéœ€è¦å…ˆè®°ä½BeanPostProcessoråœ¨åˆå§‹åŒ–å‰åè°ƒç”¨å°±å¯ä»¥äº†ã€‚</p><p><strong>æ¥å£æºç ï¼š</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BeanPostProcessor</span> &#123;<br>     <span class="hljs-comment">//beanåˆå§‹åŒ–ä¹‹å‰è°ƒç”¨</span><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">default</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">postProcessBeforeInitialization</span>(<span class="hljs-title class_">Object</span> bean, <span class="hljs-title class_">String</span> beanName) throws <span class="hljs-title class_">BeansException</span> &#123;<br><span class="hljs-keyword">return</span> bean;<br>&#125;<br><br>    <span class="hljs-comment">//beanåˆå§‹åŒ–ä¹‹åè°ƒç”¨</span><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">default</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">postProcessAfterInitialization</span>(<span class="hljs-title class_">Object</span> bean, <span class="hljs-title class_">String</span> beanName) throws <span class="hljs-title class_">BeansException</span> &#123;<br><span class="hljs-keyword">return</span> bean;<br>&#125;<br>&#125;<br> <br></code></pre></td></tr></table></figure><h4 id="ç¬¬äºŒå¤§ç±»ï¼šåªè°ƒç”¨ä¸€æ¬¡çš„æ¥å£"><a href="#ç¬¬äºŒå¤§ç±»ï¼šåªè°ƒç”¨ä¸€æ¬¡çš„æ¥å£" class="headerlink" title="ç¬¬äºŒå¤§ç±»ï¼šåªè°ƒç”¨ä¸€æ¬¡çš„æ¥å£"></a>ç¬¬äºŒå¤§ç±»ï¼šåªè°ƒç”¨ä¸€æ¬¡çš„æ¥å£</h4><p>è¿™ä¸€å¤§ç±»æ¥å£çš„ç‰¹ç‚¹æ˜¯åŠŸèƒ½ä¸°å¯Œï¼Œå¸¸ç”¨äºç”¨æˆ·è‡ªå®šä¹‰æ‰©å±•ã€‚</p><p>ç¬¬äºŒå¤§ç±»ä¸­åˆå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p><ol><li>Awareç±»å‹çš„æ¥å£</li><li>ç”Ÿå‘½å‘¨æœŸæ¥å£</li></ol><h4 id="æ— æ‰€ä¸çŸ¥çš„Aware"><a href="#æ— æ‰€ä¸çŸ¥çš„Aware" class="headerlink" title="æ— æ‰€ä¸çŸ¥çš„Aware"></a>æ— æ‰€ä¸çŸ¥çš„Aware</h4><p>Awareç±»å‹çš„æ¥å£çš„ä½œç”¨å°±æ˜¯è®©æˆ‘ä»¬èƒ½å¤Ÿæ‹¿åˆ°Springå®¹å™¨ä¸­çš„ä¸€äº›èµ„æºã€‚åŸºæœ¬éƒ½èƒ½å¤Ÿè§åçŸ¥æ„ï¼ŒAwareä¹‹å‰çš„åå­—å°±æ˜¯å¯ä»¥æ‹¿åˆ°ä»€ä¹ˆèµ„æºï¼Œä¾‹å¦‚BeanNameAwareå¯ä»¥æ‹¿åˆ°BeanNameï¼Œä»¥æ­¤ç±»æ¨ã€‚è°ƒç”¨æ—¶æœºéœ€è¦æ³¨æ„ï¼š<strong>æ‰€æœ‰çš„Awareæ–¹æ³•éƒ½æ˜¯åœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹å‰è°ƒç”¨çš„ï¼</strong></p><p>Awareæ¥å£ä¼—å¤šï¼Œè¿™é‡ŒåŒæ ·é€šè¿‡åˆ†ç±»çš„æ–¹å¼å¸®åŠ©å¤§å®¶è®°å¿†ã€‚</p><p>Awareæ¥å£å…·ä½“å¯ä»¥åˆ†ä¸ºä¸¤ç»„ï¼Œè‡³äºä¸ºä»€ä¹ˆè¿™ä¹ˆåˆ†ï¼Œè¯¦è§ä¸‹é¢çš„æºç åˆ†æã€‚å¦‚ä¸‹æ’åˆ—é¡ºåºåŒæ ·ä¹Ÿæ˜¯Awareæ¥å£çš„æ‰§è¡Œé¡ºåºï¼Œèƒ½å¤Ÿè§åçŸ¥æ„çš„æ¥å£ä¸å†è§£é‡Šã€‚</p><p><strong>Aware Group1</strong></p><ol><li>BeanNameAware</li><li>BeanClassLoaderAware</li><li>BeanFactoryAware</li></ol><p><strong>Aware Group2</strong></p><ol><li>EnvironmentAware</li><li>EmbeddedValueResolverAware è¿™ä¸ªçŸ¥é“çš„äººå¯èƒ½ä¸å¤šï¼Œå®ç°è¯¥æ¥å£èƒ½å¤Ÿè·å–Spring ELè§£æå™¨ï¼Œç”¨æˆ·çš„è‡ªå®šä¹‰æ³¨è§£éœ€è¦æ”¯æŒspelè¡¨è¾¾å¼çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿ã€‚</li><li>ApplicationContextAware(ResourceLoaderAware\ApplicationEventPublisherAware\MessageSourceAware) è¿™å‡ ä¸ªæ¥å£å¯èƒ½è®©äººæœ‰ç‚¹æ‡µï¼Œå®é™…ä¸Šè¿™å‡ ä¸ªæ¥å£å¯ä»¥ä¸€èµ·è®°ï¼Œå…¶è¿”å›å€¼å®è´¨ä¸Šéƒ½æ˜¯å½“å‰çš„ApplicationContextå¯¹è±¡ï¼Œå› ä¸ºApplicationContextæ˜¯ä¸€ä¸ªå¤åˆæ¥å£ï¼Œå¦‚ä¸‹ï¼š</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-symbol">ApplicationContext</span> <span class="hljs-symbol">extends</span> <span class="hljs-symbol">EnvironmentCapable</span>, <span class="hljs-symbol">ListableBeanFactory</span>, <span class="hljs-symbol">HierarchicalBeanFactory</span>,<br>        <span class="hljs-symbol">MessageSource</span>, <span class="hljs-symbol">ApplicationEventPublisher</span>, <span class="hljs-symbol">ResourcePatternResolver</span> &#123;&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ¶‰åŠåˆ°å¦ä¸€é“é¢è¯•é¢˜ï¼ŒApplicationContextå’ŒBeanFactoryçš„åŒºåˆ«ï¼Œå¯ä»¥ä»ApplicationContextç»§æ‰¿çš„è¿™å‡ ä¸ªæ¥å£å…¥æ‰‹ï¼Œé™¤å»BeanFactoryç›¸å…³çš„ä¸¤ä¸ªæ¥å£å°±æ˜¯ApplicationContextç‹¬æœ‰çš„åŠŸèƒ½ï¼Œè¿™é‡Œä¸è¯¦ç»†è¯´æ˜ã€‚</p><p><strong>Awareè°ƒç”¨æ—¶æœºæºç åˆ†æ</strong></p><p>è¯¦æƒ…å¦‚ä¸‹ï¼Œå¿½ç•¥äº†éƒ¨åˆ†æ— å…³ä»£ç ã€‚ä»£ç ä½ç½®å°±æ˜¯æˆ‘ä»¬ä¸Šæ–‡æåˆ°çš„initializeBeanæ–¹æ³•è¯¦æƒ…ï¼Œè¿™ä¹Ÿè¯´æ˜äº†Awareéƒ½æ˜¯åœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹å‰è°ƒç”¨çš„ï¼</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">// è§åçŸ¥æ„ï¼Œåˆå§‹åŒ–é˜¶æ®µè°ƒç”¨çš„æ–¹æ³•</span><br>protected Object initialize<span class="hljs-constructor">Bean(<span class="hljs-params">final</span> String <span class="hljs-params">beanName</span>, <span class="hljs-params">final</span> Object <span class="hljs-params">bean</span>, @Nullable RootBeanDefinition <span class="hljs-params">mbd</span>)</span> &#123;<br>    <span class="hljs-comment">// è¿™é‡Œè°ƒç”¨çš„æ˜¯Group1ä¸­çš„ä¸‰ä¸ªBeanå¼€å¤´çš„Aware</span><br>    invoke<span class="hljs-constructor">AwareMethods(<span class="hljs-params">beanName</span>, <span class="hljs-params">bean</span>)</span>;<br><br>    Object wrappedBean = bean;<br>    <br>    <span class="hljs-comment">// è¿™é‡Œè°ƒç”¨çš„æ˜¯Group2ä¸­çš„å‡ ä¸ªAwareï¼Œ</span><br>    <span class="hljs-comment">// è€Œå®è´¨ä¸Šè¿™é‡Œå°±æ˜¯å‰é¢æ‰€è¯´çš„BeanPostProcessorçš„è°ƒç”¨ç‚¹ï¼</span><br>    <span class="hljs-comment">// ä¹Ÿå°±æ˜¯è¯´ä¸Group1ä¸­çš„Awareä¸åŒï¼Œè¿™é‡Œæ˜¯é€šè¿‡BeanPostProcessorï¼ˆApplicationContextAwareProcessorï¼‰å®ç°çš„ã€‚</span><br>    wrappedBean = apply<span class="hljs-constructor">BeanPostProcessorsBeforeInitialization(<span class="hljs-params">wrappedBean</span>, <span class="hljs-params">beanName</span>)</span>;<br><br>    <span class="hljs-comment">// è¿™ä¸ªæ˜¯åˆå§‹åŒ–æ–¹æ³•ï¼Œä¸‹æ–‡è¦ä»‹ç»çš„InitializingBeanè°ƒç”¨ç‚¹å°±æ˜¯åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢</span><br>    invoke<span class="hljs-constructor">InitMethods(<span class="hljs-params">beanName</span>, <span class="hljs-params">wrappedBean</span>, <span class="hljs-params">mbd</span>)</span>;<br><br>    <span class="hljs-comment">// BeanPostProcessorçš„å¦ä¸€ä¸ªè°ƒç”¨ç‚¹</span><br>    wrappedBean = apply<span class="hljs-constructor">BeanPostProcessorsAfterInitialization(<span class="hljs-params">wrappedBean</span>, <span class="hljs-params">beanName</span>)</span>;<br><br>    return wrappedBean;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å¹¶ä¸æ˜¯æ‰€æœ‰çš„Awareæ¥å£éƒ½ä½¿ç”¨åŒæ ·çš„æ–¹å¼è°ƒç”¨ã€‚BeanÃ—Ã—Awareéƒ½æ˜¯åœ¨ä»£ç ä¸­ç›´æ¥è°ƒç”¨çš„ï¼Œè€ŒApplicationContextç›¸å…³çš„Awareéƒ½æ˜¯é€šè¿‡BeanPostProcessor#postProcessBeforeInitialization()å®ç°çš„ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±çœ‹ä¸€ä¸‹ApplicationContextAwareProcessorè¿™ä¸ªç±»çš„æºç ï¼Œå°±æ˜¯åˆ¤æ–­å½“å‰åˆ›å»ºçš„Beanæ˜¯å¦å®ç°äº†ç›¸å…³çš„Awareæ–¹æ³•ï¼Œå¦‚æœå®ç°äº†ä¼šè°ƒç”¨å›è°ƒæ–¹æ³•å°†èµ„æºä¼ é€’ç»™Beanã€‚</p><p>è‡³äºSpringä¸ºä»€ä¹ˆè¿™ä¹ˆå®ç°ï¼Œåº”è¯¥æ²¡ä»€ä¹ˆç‰¹æ®Šçš„è€ƒé‡ã€‚ä¹Ÿè®¸å’ŒSpringçš„ç‰ˆæœ¬å‡çº§æœ‰å…³ã€‚åŸºäºå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾çš„åŸåˆ™ï¼ŒSpringå¯¹ä¸€äº›æ–°çš„Awareé‡‡ç”¨äº†æ‰©å±•çš„æ–¹å¼æ·»åŠ ã€‚</p><p>BeanPostProcessorçš„è°ƒç”¨æ—¶æœºä¹Ÿèƒ½åœ¨è¿™é‡Œä½“ç°ï¼ŒåŒ…å›´ä½invokeInitMethodsæ–¹æ³•ï¼Œä¹Ÿå°±è¯´æ˜äº†åœ¨åˆå§‹åŒ–é˜¶æ®µçš„å‰åæ‰§è¡Œã€‚</p><p>å…³äºAwareæ¥å£çš„æ‰§è¡Œé¡ºåºï¼Œå…¶å®åªéœ€è¦è®°ä½ç¬¬ä¸€ç»„åœ¨ç¬¬äºŒç»„æ‰§è¡Œä¹‹å‰å°±è¡Œäº†ã€‚æ¯ç»„ä¸­å„ä¸ªAwareæ–¹æ³•çš„è°ƒç”¨é¡ºåºå…¶å®æ²¡æœ‰å¿…è¦è®°ï¼Œæœ‰éœ€è¦çš„æ—¶å€™ç‚¹è¿›æºç ä¸€çœ‹ä¾¿çŸ¥ã€‚</p><h4 id="ç®€å•çš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ¥å£"><a href="#ç®€å•çš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ¥å£" class="headerlink" title="ç®€å•çš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ¥å£"></a>ç®€å•çš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ¥å£</h4><p>è‡³äºå‰©ä¸‹çš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ¥å£å°±å¾ˆç®€å•äº†ï¼Œå®ä¾‹åŒ–å’Œå±æ€§èµ‹å€¼éƒ½æ˜¯Springå¸®åŠ©æˆ‘ä»¬åšçš„ï¼Œèƒ½å¤Ÿè‡ªå·±å®ç°çš„æœ‰åˆå§‹åŒ–å’Œé”€æ¯ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé˜¶æ®µã€‚</p><h5 id="InitializingBeanæ¥å£"><a href="#InitializingBeanæ¥å£" class="headerlink" title="InitializingBeanæ¥å£"></a>InitializingBeanæ¥å£</h5><p>InitializingBeané¡¾åæ€ä¹‰ï¼Œæ˜¯åˆå§‹åŒ–Beanç›¸å…³çš„æ¥å£ã€‚</p><p>æ¥å£å®šä¹‰ï¼š</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">InitializingBean</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afterPropertiesSet</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>çœ‹æ–¹æ³•åï¼Œæ˜¯åœ¨è¯»å®ŒPropertiesæ–‡ä»¶ï¼Œä¹‹åæ‰§è¡Œçš„æ–¹æ³•ã€‚afterPropertiesSet()æ–¹æ³•æ˜¯åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¢«è°ƒç”¨çš„ã€‚</p><p>InitializingBean å¯¹åº”ç”Ÿå‘½å‘¨æœŸçš„åˆå§‹åŒ–é˜¶æ®µï¼Œåœ¨ä¸Šé¢æºç çš„invokeInitMethods(beanName, wrappedBean, mbd);æ–¹æ³•ä¸­è°ƒç”¨ã€‚</p><p>æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå› ä¸ºAwareæ–¹æ³•éƒ½æ˜¯æ‰§è¡Œåœ¨åˆå§‹åŒ–æ–¹æ³•ä¹‹å‰ï¼Œæ‰€ä»¥å¯ä»¥åœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­æ”¾å¿ƒå¤§èƒ†çš„ä½¿ç”¨Awareæ¥å£è·å–çš„èµ„æºï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è‡ªå®šä¹‰æ‰©å±•Springçš„å¸¸ç”¨æ–¹å¼ã€‚</p><p>é™¤äº†å®ç°InitializingBeanæ¥å£ä¹‹å¤–è¿˜èƒ½é€šè¿‡æ³¨è§£ï¼ˆ@PostConstructï¼‰æˆ–è€…xmlé…ç½®çš„æ–¹å¼æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼ˆinit-methodï¼‰ï¼Œè‡³äºè¿™å‡ ç§å®šä¹‰æ–¹å¼çš„è°ƒç”¨é¡ºåºå…¶å®æ²¡æœ‰å¿…è¦è®°ã€‚å› ä¸ºè¿™å‡ ä¸ªæ–¹æ³•å¯¹åº”çš„éƒ½æ˜¯åŒä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåªæ˜¯å®ç°æ–¹å¼ä¸åŒï¼Œæˆ‘ä»¬ä¸€èˆ¬åªé‡‡ç”¨å…¶ä¸­ä¸€ç§æ–¹å¼ã€‚</p><h5 id="ä¸‰ç§å®ç°æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•çš„æ–¹æ³•ï¼š"><a href="#ä¸‰ç§å®ç°æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•çš„æ–¹æ³•ï¼š" class="headerlink" title="ä¸‰ç§å®ç°æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•çš„æ–¹æ³•ï¼š"></a>ä¸‰ç§å®ç°æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•çš„æ–¹æ³•ï¼š</h5><ul><li>ä½¿ç”¨@PostConstructæ³¨è§£ï¼Œè¯¥æ³¨è§£ä½œç”¨äºvoidæ–¹æ³•ä¸Š</li><li>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®init-methodæ–¹æ³•</li></ul><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;student&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;com.demo.Student&quot;</span> init-method=<span class="hljs-string">&quot;init2&quot;</span>&gt;<br>        &lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;name&quot;</span> value=<span class="hljs-string">&quot;å°æ˜&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>        &lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;age&quot;</span> value=<span class="hljs-string">&quot;20&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>        &lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;school&quot;</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;school&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><ul><li>å°†ç±»å®ç°InitializingBeanæ¥å£</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs haxe">@Component(<span class="hljs-string">&quot;student&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-keyword"><span class="hljs-keyword">implements</span> <span class="hljs-type">InitializingBean</span></span></span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> name;<br>    <span class="hljs-keyword">private</span> int age;<br>        â€¦<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ‰§è¡Œï¼š</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs csharp">@Component(<span class="hljs-string">&quot;student&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-title">implements</span> <span class="hljs-title">InitializingBean</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> age;<br>    <br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span>()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span>(<span class="hljs-params">String name</span>)</span> &#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">getAge</span>()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAge</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> age</span>)</span> &#123;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    &#125;<br>       <br>    <span class="hljs-comment">//1.ä½¿ç”¨postconstrtctæ³¨è§£</span><br>    @PostConstruct<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span>()</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;æ‰§è¡Œ initæ–¹æ³•&quot;</span>);<br>    &#125;<br>     <br>    <span class="hljs-comment">//2.åœ¨xmlé…ç½®æ–‡ä»¶ä¸­é…ç½®init-methodæ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init2</span>()</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;æ‰§è¡Œinit2æ–¹æ³• &quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-comment">//3.å®ç°InitializingBeanæ¥å£</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterPropertiesSet</span>() throws Exception</span> &#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;æ‰§è¡Œinit3æ–¹æ³•&quot;</span>);<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡æµ‹è¯•æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œä¸‰ç§å®ç°æ–¹å¼çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼š</p><p><strong>Constructor &gt; @PostConstruct &gt; InitializingBean &gt; init-method</strong></p><h5 id="DisposableBeanæ¥å£"><a href="#DisposableBeanæ¥å£" class="headerlink" title="DisposableBeanæ¥å£"></a>DisposableBeanæ¥å£</h5><p>DisposableBean ç±»ä¼¼äºInitializingBeanï¼Œå¯¹åº”ç”Ÿå‘½å‘¨æœŸçš„é”€æ¯é˜¶æ®µï¼Œ<strong>ä»¥ConfigurableApplicationContext#close()æ–¹æ³•ä½œä¸ºå…¥å£</strong>ï¼Œå®ç°æ˜¯é€šè¿‡å¾ªç¯è·å–æ‰€æœ‰å®ç°äº†DisposableBeanæ¥å£çš„Beanç„¶åè°ƒç”¨å…¶destroy()æ–¹æ³• ã€‚</p><p>æ¥å£å®šä¹‰ï¼š</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DisposableBean</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªå®ç°äº†DisposableBeanæ¥å£çš„Beanï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">IndexBean</span> <span class="hljs-title">implements</span> <span class="hljs-title">InitializingBean</span>,<span class="hljs-title">DisposableBean</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span>() throws Exception</span> &#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;destroy&quot;</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterPropertiesSet</span>() throws Exception</span> &#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;init-afterPropertiesSet()&quot;</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>()</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;init-test()&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) &#123;<br>        <span class="hljs-title class_">AbstractApplicationContext</span> applicationContext=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;classpath:application-usertag.xml&quot;</span>);<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;init-success&quot;</span>);<br>        applicationContext.<span class="hljs-title function_">registerShutdownHook</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">init-afterPropertiesSet</span><span class="hljs-params">()</span></span><br><span class="hljs-function"><span class="hljs-title">init-test</span><span class="hljs-params">()</span></span><br>init-success<br>destroy<br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å¯¹è±¡é”€æ¯çš„æ—¶å€™ï¼Œä¼šå»è°ƒç”¨DisposableBeançš„destroyæ–¹æ³•ã€‚åœ¨è¿›å…¥åˆ°é”€æ¯è¿‡ç¨‹æ—¶å…ˆå»è°ƒç”¨ä¸€ä¸‹DisposableBeançš„destroyæ–¹æ³•ï¼Œç„¶ååæ‰§è¡Œ destroy-methodå£°æ˜çš„æ–¹æ³•ï¼ˆç”¨æ¥é”€æ¯Beanä¸­çš„å„é¡¹æ•°æ®ï¼‰ã€‚</p><h4 id="æ‰©å±•é˜…è¯»-BeanPostProcessoræ³¨å†Œæ—¶æœºä¸æ‰§è¡Œé¡ºåº"><a href="#æ‰©å±•é˜…è¯»-BeanPostProcessoræ³¨å†Œæ—¶æœºä¸æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‰©å±•é˜…è¯»: BeanPostProcessoræ³¨å†Œæ—¶æœºä¸æ‰§è¡Œé¡ºåº"></a>æ‰©å±•é˜…è¯»: BeanPostProcessoræ³¨å†Œæ—¶æœºä¸æ‰§è¡Œé¡ºåº</h4><p>é¦–å…ˆè¦æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œåœ¨springä¸­ä¸€åˆ‡çš†bean</p><p>æ‰€æœ‰çš„ç»„ä»¶éƒ½ä¼šè¢«ä½œä¸ºä¸€ä¸ªbeanè£…é…åˆ°springå®¹å™¨ä¸­ï¼Œè¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p><p><a href="https://img-blog.csdnimg.cn/20200313090614571.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N5OTczMDcxMjYz,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/04/26/MsSZEJB4QCpN8lU.png" alt="img"></a></p><p>æ‰€ä»¥æˆ‘ä»¬å‰é¢æ‰€è®²çš„é‚£äº›æ‹“å±•ç‚¹ï¼Œä¹Ÿéƒ½ä¼šè¢«ä½œä¸ºä¸€ä¸ªä¸ªbeanè£…é…åˆ°springå®¹å™¨ä¸­</p><h4 id="æ³¨å†Œæ—¶æœº"><a href="#æ³¨å†Œæ—¶æœº" class="headerlink" title="æ³¨å†Œæ—¶æœº"></a>æ³¨å†Œæ—¶æœº</h4><p>æˆ‘ä»¬çŸ¥é“BeanPostProcessorä¹Ÿä¼šæ³¨å†Œä¸ºBeanï¼Œé‚£ä¹ˆSpringæ˜¯å¦‚ä½•ä¿è¯BeanPostProcessoråœ¨æˆ‘ä»¬çš„ä¸šåŠ¡Beanä¹‹å‰åˆå§‹åŒ–å®Œæˆå‘¢ï¼Ÿ</p><p>è¯·çœ‹æˆ‘ä»¬ç†Ÿæ‚‰çš„refresh()æ–¹æ³•çš„æºç ï¼Œçœç•¥éƒ¨åˆ†æ— å…³ä»£ç ï¼ˆrefreshçš„è¯¦ç»†æ³¨è§£è§refresh()ï¼‰ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@Override</span><br>public void refresh() throws BeansException, IllegalStateException &#123;<br>    synchronized (this.startupShutdownMonitor) &#123;<br>        try &#123;<br>            <span class="hljs-comment">// Allows post-processing of the bean factory in context subclasses.</span><br>            <span class="hljs-built_in">postProcessBeanFactory</span>(beanFactory);<br><br>            <span class="hljs-comment">// Invoke factory processors registered as beans in the context.</span><br>            <span class="hljs-built_in">invokeBeanFactoryPostProcessors</span>(beanFactory);<br><br>            <span class="hljs-comment">// Register bean processors that intercept bean creation.</span><br>            <span class="hljs-comment">// æ³¨å†Œæ‰€æœ‰BeanPostProcesserçš„æ–¹æ³•</span><br>            <span class="hljs-built_in">registerBeanPostProcessors</span>(beanFactory);<br><br>            <span class="hljs-comment">// Initialize message source for this context.</span><br>            <span class="hljs-built_in">initMessageSource</span>();<br><br>            <span class="hljs-comment">// Initialize event multicaster for this context.</span><br>            <span class="hljs-built_in">initApplicationEventMulticaster</span>();<br><br>            <span class="hljs-comment">// Initialize other special beans in specific context subclasses.</span><br>            <span class="hljs-built_in">onRefresh</span>();<br><br>            <span class="hljs-comment">// Check for listener beans and register them.</span><br>            <span class="hljs-built_in">registerListeners</span>();<br><br>            <span class="hljs-comment">// Instantiate all remaining (non-lazy-init) singletons.</span><br>            <span class="hljs-comment">// æ‰€æœ‰å•ä¾‹éæ‡’åŠ è½½Beançš„åˆ›å»ºæ–¹æ³•</span><br>            <span class="hljs-built_in">finishBeanFactoryInitialization</span>(beanFactory);<br><br>            <span class="hljs-comment">// Last step: publish corresponding event.</span><br>            <span class="hljs-built_in">finishRefresh</span>();<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼ŒSpringæ˜¯å…ˆæ‰§è¡ŒregisterBeanPostProcessors()è¿›è¡ŒBeanPostProcessorsçš„æ³¨å†Œï¼Œç„¶åå†æ‰§è¡ŒfinishBeanFactoryInitializationåˆ›å»ºæˆ‘ä»¬çš„å•ä¾‹éæ‡’åŠ è½½çš„Beanã€‚</p><h4 id="æ‰§è¡Œé¡ºåº"><a href="#æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‰§è¡Œé¡ºåº"></a>æ‰§è¡Œé¡ºåº</h4><p>BeanPostProcessoræœ‰å¾ˆå¤šä¸ªï¼Œè€Œä¸”æ¯ä¸ªBeanPostProcessoréƒ½å½±å“å¤šä¸ªBeanï¼Œå…¶æ‰§è¡Œé¡ºåºè‡³å…³é‡è¦ï¼Œå¿…é¡»èƒ½å¤Ÿæ§åˆ¶å…¶æ‰§è¡Œé¡ºåºæ‰è¡Œã€‚å…³äºæ‰§è¡Œé¡ºåºè¿™é‡Œéœ€è¦å¼•å…¥ä¸¤ä¸ªæ’åºç›¸å…³çš„æ¥å£ï¼šPriorityOrderedã€Ordered</p><ul><li>PriorityOrderedæ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œé¦–å…ˆè¢«æ‰§è¡Œï¼ŒPriorityOrderedå…¬æ°‘ä¹‹é—´é€šè¿‡æ¥å£è¿”å›å€¼æ’åº</li><li>Orderedæ˜¯äºŒç­‰å…¬æ°‘ï¼Œç„¶åæ‰§è¡Œï¼ŒOrderedå…¬æ°‘ä¹‹é—´é€šè¿‡æ¥å£è¿”å›å€¼æ’åº</li><li>éƒ½æ²¡æœ‰å®ç°æ˜¯ä¸‰ç­‰å…¬æ°‘ï¼Œæœ€åæ‰§è¡Œ</li></ul><p>åœ¨ä»¥ä¸‹æºç ä¸­ï¼Œå¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹åˆ°Springæ³¨å†Œå„ç§ç±»å‹BeanPostProcessorçš„é€»è¾‘ï¼Œæ ¹æ®å®ç°ä¸åŒæ’åºæ¥å£è¿›è¡Œåˆ†ç»„ã€‚ä¼˜å…ˆçº§é«˜çš„å…ˆåŠ å…¥ï¼Œä¼˜å…ˆçº§ä½çš„ååŠ å…¥ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">// First, invoke the BeanDefinitionRegistryPostProcessors that implement PriorityOrdered.</span><br><span class="hljs-comment">// é¦–å…ˆï¼ŒåŠ å…¥å®ç°äº†PriorityOrderedæ¥å£çš„BeanPostProcessorsï¼Œé¡ºä¾¿æ ¹æ®PriorityOrderedæ’äº†åº</span><br>String<span class="hljs-literal">[]</span> postProcessorNames =<br>beanFactory.get<span class="hljs-constructor">BeanNamesForType(BeanDefinitionRegistryPostProcessor.<span class="hljs-params">class</span>, <span class="hljs-params">true</span>, <span class="hljs-params">false</span>)</span>;<br><span class="hljs-keyword">for</span> (String ppName : postProcessorNames) &#123;<br>    <span class="hljs-keyword">if</span> (beanFactory.is<span class="hljs-constructor">TypeMatch(<span class="hljs-params">ppName</span>, PriorityOrdered.<span class="hljs-params">class</span>)</span>) &#123;<br>        currentRegistryProcessors.add(beanFactory.get<span class="hljs-constructor">Bean(<span class="hljs-params">ppName</span>, BeanDefinitionRegistryPostProcessor.<span class="hljs-params">class</span>)</span>);<br>        processedBeans.add(ppName);<br>    &#125;<br>&#125;<br><br>sort<span class="hljs-constructor">PostProcessors(<span class="hljs-params">currentRegistryProcessors</span>, <span class="hljs-params">beanFactory</span>)</span>;<br>registryProcessors.add<span class="hljs-constructor">All(<span class="hljs-params">currentRegistryProcessors</span>)</span>;<br>invoke<span class="hljs-constructor">BeanDefinitionRegistryPostProcessors(<span class="hljs-params">currentRegistryProcessors</span>, <span class="hljs-params">registry</span>)</span>;<br>currentRegistryProcessors.clear<span class="hljs-literal">()</span>;<br><br><span class="hljs-comment">// Next, invoke the BeanDefinitionRegistryPostProcessors that implement Ordered.</span><br><span class="hljs-comment">// ç„¶åï¼ŒåŠ å…¥å®ç°äº†Orderedæ¥å£çš„BeanPostProcessorsï¼Œé¡ºä¾¿æ ¹æ®Orderedæ’äº†åº</span><br>postProcessorNames = beanFactory.get<span class="hljs-constructor">BeanNamesForType(BeanDefinitionRegistryPostProcessor.<span class="hljs-params">class</span>, <span class="hljs-params">true</span>, <span class="hljs-params">false</span>)</span>;<br><span class="hljs-keyword">for</span> (String ppName : postProcessorNames) &#123;<br>    <span class="hljs-keyword">if</span> (!processedBeans.contains(ppName)<span class="hljs-operator"> &amp;&amp; </span>beanFactory.is<span class="hljs-constructor">TypeMatch(<span class="hljs-params">ppName</span>, Ordered.<span class="hljs-params">class</span>)</span>) &#123;<br>        currentRegistryProcessors.add(beanFactory.get<span class="hljs-constructor">Bean(<span class="hljs-params">ppName</span>, BeanDefinitionRegistryPostProcessor.<span class="hljs-params">class</span>)</span>);<br>        processedBeans.add(ppName);<br>    &#125;<br>&#125;<br>sort<span class="hljs-constructor">PostProcessors(<span class="hljs-params">currentRegistryProcessors</span>, <span class="hljs-params">beanFactory</span>)</span>;<br>registryProcessors.add<span class="hljs-constructor">All(<span class="hljs-params">currentRegistryProcessors</span>)</span>;<br>invoke<span class="hljs-constructor">BeanDefinitionRegistryPostProcessors(<span class="hljs-params">currentRegistryProcessors</span>, <span class="hljs-params">registry</span>)</span>;<br>currentRegistryProcessors.clear<span class="hljs-literal">()</span>;<br><span class="hljs-comment">// Finally, invoke all other BeanDefinitionRegistryPostProcessors until no further ones appear.</span><br><br><span class="hljs-comment">// æœ€ååŠ å…¥å…¶ä»–å¸¸è§„çš„BeanPostProcessors</span><br>boolean reiterate = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">while</span> (reiterate) &#123;<br>    reiterate = <span class="hljs-literal">false</span>;<br>    postProcessorNames = beanFactory.get<span class="hljs-constructor">BeanNamesForType(BeanDefinitionRegistryPostProcessor.<span class="hljs-params">class</span>, <span class="hljs-params">true</span>, <span class="hljs-params">false</span>)</span>;<br>    <span class="hljs-keyword">for</span> (String ppName : postProcessorNames) &#123;<br>        <span class="hljs-keyword">if</span> (!processedBeans.contains(ppName)) &#123;<br>            currentRegistryProcessors.add(beanFactory.get<span class="hljs-constructor">Bean(<span class="hljs-params">ppName</span>, BeanDefinitionRegistryPostProcessor.<span class="hljs-params">class</span>)</span>);<br>            processedBeans.add(ppName);<br>            reiterate = <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>    sort<span class="hljs-constructor">PostProcessors(<span class="hljs-params">currentRegistryProcessors</span>, <span class="hljs-params">beanFactory</span>)</span>;<br>    registryProcessors.add<span class="hljs-constructor">All(<span class="hljs-params">currentRegistryProcessors</span>)</span>;<br>    invoke<span class="hljs-constructor">BeanDefinitionRegistryPostProcessors(<span class="hljs-params">currentRegistryProcessors</span>, <span class="hljs-params">registry</span>)</span>;<br>    currentRegistryProcessors.clear<span class="hljs-literal">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹æ®æ’åºæ¥å£è¿”å›å€¼æ’åºï¼Œé»˜è®¤å‡åºæ’åºï¼Œè¿”å›å€¼è¶Šä½ä¼˜å…ˆçº§è¶Šé«˜ã€‚</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs julia">/**<br> * Useful constant <span class="hljs-keyword">for</span> the highest precedence value.<br> * <span class="hljs-meta">@see</span> java.lang.<span class="hljs-built_in">Integer</span><span class="hljs-comment">#MIN_VALUE</span><br> */<br>int HIGHEST_PRECEDENCE = <span class="hljs-built_in">Integer</span>.MIN_VALUE;<br>/**<br> * Useful constant <span class="hljs-keyword">for</span> the lowest precedence value.<br> * <span class="hljs-meta">@see</span> java.lang.<span class="hljs-built_in">Integer</span><span class="hljs-comment">#MAX_VALUE</span><br> */<br>int LOWEST_PRECEDENCE = <span class="hljs-built_in">Integer</span>.MAX_VALUE;<br></code></pre></td></tr></table></figure><p>PriorityOrderedã€Orderedæ¥å£ä½œä¸ºSpringæ•´ä¸ªæ¡†æ¶é€šç”¨çš„æ’åºæ¥å£ï¼Œåœ¨Springä¸­åº”ç”¨å¹¿æ³›ï¼Œä¹Ÿæ˜¯éå¸¸é‡è¦çš„æ¥å£ã€‚</p><h4 id="Beançš„ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾"><a href="#Beançš„ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾" class="headerlink" title="Beançš„ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾"></a><strong>Bean</strong>çš„ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾</h4><p><a href="https://img-blog.csdnimg.cn/20200313092801142.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N5OTczMDcxMjYz,size_16,color_FFFFFF,t_70"><img src="https://s2.loli.net/2022/04/26/m3XrgBuPWkShyzx.png" alt="img"></a></p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>Spring Beançš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸º<code>å››ä¸ªé˜¶æ®µ</code>å’Œ<code>å¤šä¸ªæ‰©å±•ç‚¹</code>ã€‚æ‰©å±•ç‚¹åˆå¯ä»¥åˆ†ä¸º<code>å½±å“å¤šä¸ªBean</code>å’Œ<code>å½±å“å•ä¸ªBean</code>ã€‚æ•´ç†å¦‚ä¸‹ï¼š</p><h5 id="å››ä¸ªé˜¶æ®µ"><a href="#å››ä¸ªé˜¶æ®µ" class="headerlink" title="å››ä¸ªé˜¶æ®µ"></a>å››ä¸ªé˜¶æ®µ</h5><ul><li>å®ä¾‹åŒ– Instantiation</li><li>å±æ€§èµ‹å€¼ Populate</li><li>åˆå§‹åŒ– Initialization</li><li>é”€æ¯ Destruction</li></ul><h5 id="å¤šä¸ªæ‰©å±•ç‚¹"><a href="#å¤šä¸ªæ‰©å±•ç‚¹" class="headerlink" title="å¤šä¸ªæ‰©å±•ç‚¹"></a>å¤šä¸ªæ‰©å±•ç‚¹</h5><ul><li>å½±å“å¤šä¸ªBean<ul><li>BeanPostProcessor</li><li>InstantiationAwareBeanPostProcessor</li></ul></li><li>å½±å“å•ä¸ªBean<ul><li>Aware<ul><li>Aware Group1<ul><li>BeanNameAware</li><li>BeanClassLoaderAware</li><li>BeanFactoryAware</li></ul></li><li>Aware Group2<ul><li>EnvironmentAware</li><li>EmbeddedValueResolverAware</li><li>ApplicationContextAware(ResourceLoaderAware\ApplicationEventPublisherAware\MessageSourceAware)</li></ul></li></ul></li><li>ç”Ÿå‘½å‘¨æœŸ<ul><li>InitializingBean</li><li>DisposableBean</li></ul></li></ul></li></ul><h3 id="å“ªäº›æ˜¯é‡è¦çš„beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ-ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ"><a href="#å“ªäº›æ˜¯é‡è¦çš„beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ-ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ" class="headerlink" title="å“ªäº›æ˜¯é‡è¦çš„beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ"></a>å“ªäº›æ˜¯é‡è¦çš„beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ</h3><p>æœ‰ä¸¤ä¸ªé‡è¦çš„bean ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯setup ï¼Œ å®ƒæ˜¯åœ¨å®¹å™¨åŠ è½½beançš„æ—¶å€™è¢«è°ƒç”¨ã€‚ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯ teardown å®ƒæ˜¯åœ¨å®¹å™¨å¸è½½ç±»çš„æ—¶å€™è¢«è°ƒç”¨ã€‚</p><p>bean æ ‡ç­¾æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼ˆinit-methodå’Œdestroy-methodï¼‰ã€‚ç”¨å®ƒä»¬ä½ å¯ä»¥è‡ªå·±å®šåˆ¶åˆå§‹åŒ–å’Œæ³¨é”€æ–¹æ³•ã€‚å®ƒä»¬ä¹Ÿæœ‰ç›¸åº”çš„æ³¨è§£ï¼ˆ@PostConstructå’Œ@PreDestroyï¼‰ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿä»€ä¹ˆæ˜¯Spring-inner-beansï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿä»€ä¹ˆæ˜¯Spring-inner-beansï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿä»€ä¹ˆæ˜¯Spring inner beansï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿä»€ä¹ˆæ˜¯Spring inner beansï¼Ÿ</h3><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œå½“ä¸€ä¸ªbeanä»…è¢«ç”¨ä½œå¦ä¸€ä¸ªbeançš„å±æ€§æ—¶ï¼Œå®ƒèƒ½è¢«å£°æ˜ä¸ºä¸€ä¸ªå†…éƒ¨beanã€‚å†…éƒ¨beanå¯ä»¥ç”¨setteræ³¨å…¥â€œå±æ€§â€å’Œæ„é€ æ–¹æ³•æ³¨å…¥â€œæ„é€ å‚æ•°â€çš„æ–¹å¼æ¥å®ç°ï¼Œå†…éƒ¨beané€šå¸¸æ˜¯åŒ¿åçš„ï¼Œå®ƒä»¬çš„Scopeä¸€èˆ¬æ˜¯prototypeã€‚</p><h3 id="åœ¨-Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªjavaé›†åˆï¼Ÿ"><a href="#åœ¨-Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªjavaé›†åˆï¼Ÿ" class="headerlink" title="åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªjavaé›†åˆï¼Ÿ"></a>åœ¨ Springä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ªjavaé›†åˆï¼Ÿ</h3><p>Springæä¾›ä»¥ä¸‹å‡ ç§é›†åˆçš„é…ç½®å…ƒç´ ï¼š</p><p>ç±»å‹ç”¨äºæ³¨å…¥ä¸€åˆ—å€¼ï¼Œå…è®¸æœ‰ç›¸åŒçš„å€¼ã€‚</p><p>ç±»å‹ç”¨äºæ³¨å…¥ä¸€ç»„å€¼ï¼Œä¸å…è®¸æœ‰ç›¸åŒçš„å€¼ã€‚</p><p>ç±»å‹ç”¨äºæ³¨å…¥ä¸€ç»„é”®å€¼å¯¹ï¼Œé”®å’Œå€¼éƒ½å¯ä»¥ä¸ºä»»æ„ç±»å‹ã€‚</p><p>ç±»å‹ç”¨äºæ³¨å…¥ä¸€ç»„é”®å€¼å¯¹ï¼Œé”®å’Œå€¼éƒ½åªèƒ½ä¸ºStringç±»å‹ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯beanè£…é…ï¼Ÿ</h3><p>è£…é…ï¼Œæˆ–bean è£…é…æ˜¯æŒ‡åœ¨Spring å®¹å™¨ä¸­æŠŠbeanç»„è£…åˆ°ä¸€èµ·ï¼Œå‰ææ˜¯å®¹å™¨éœ€è¦çŸ¥é“beançš„ä¾èµ–å…³ç³»ï¼Œå¦‚ä½•é€šè¿‡ä¾èµ–æ³¨å…¥æ¥æŠŠå®ƒä»¬è£…é…åˆ°ä¸€èµ·ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯beançš„è‡ªåŠ¨è£…é…ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯beançš„è‡ªåŠ¨è£…é…ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯beançš„è‡ªåŠ¨è£…é…ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯beançš„è‡ªåŠ¨è£…é…ï¼Ÿ</h3><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­è®¾å®šbeançš„ä¾èµ–å…³ç³»æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æœºåˆ¶ï¼ŒSpring å®¹å™¨èƒ½å¤Ÿè‡ªåŠ¨è£…é…ç›¸äº’åˆä½œçš„beanï¼Œè¿™æ„å‘³ç€å®¹å™¨ä¸éœ€è¦å’Œé…ç½®ï¼Œèƒ½é€šè¿‡Beanå·¥å‚è‡ªåŠ¨å¤„ç†beanä¹‹é—´çš„åä½œã€‚è¿™æ„å‘³ç€ Springå¯ä»¥é€šè¿‡å‘Bean Factoryä¸­æ³¨å…¥çš„æ–¹å¼è‡ªåŠ¨æå®šbeanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚è‡ªåŠ¨è£…é…å¯ä»¥è®¾ç½®åœ¨æ¯ä¸ªbeanä¸Šï¼Œä¹Ÿå¯ä»¥è®¾å®šåœ¨ç‰¹å®šçš„beanä¸Šã€‚</p><h3 id="è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…ï¼Œspring-è‡ªåŠ¨è£…é…-bean-æœ‰å“ªäº›æ–¹å¼ï¼Ÿ"><a href="#è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…ï¼Œspring-è‡ªåŠ¨è£…é…-bean-æœ‰å“ªäº›æ–¹å¼ï¼Ÿ" class="headerlink" title="è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…ï¼Œspring è‡ªåŠ¨è£…é… bean æœ‰å“ªäº›æ–¹å¼ï¼Ÿ"></a>è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…ï¼Œspring è‡ªåŠ¨è£…é… bean æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h3><p>åœ¨springä¸­ï¼Œå¯¹è±¡æ— éœ€è‡ªå·±æŸ¥æ‰¾æˆ–åˆ›å»ºä¸å…¶å…³è”çš„å…¶ä»–å¯¹è±¡ï¼Œç”±å®¹å™¨è´Ÿè´£æŠŠéœ€è¦ç›¸äº’åä½œçš„å¯¹è±¡å¼•ç”¨èµ‹äºˆå„ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨autowireæ¥é…ç½®è‡ªåŠ¨è£…è½½æ¨¡å¼ã€‚</p><p>åœ¨Springæ¡†æ¶xmlé…ç½®ä¸­å…±æœ‰5ç§è‡ªåŠ¨è£…é…ï¼š</p><ul><li>noï¼šé»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…çš„ï¼Œé€šè¿‡æ‰‹å·¥è®¾ç½®refå±æ€§æ¥è¿›è¡Œè£…é…beanã€‚</li><li>byNameï¼šé€šè¿‡beançš„åç§°è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦‚æœä¸€ä¸ªbeançš„ property ä¸å¦ä¸€bean çš„name ç›¸åŒï¼Œå°±è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li><li>byTypeï¼šé€šè¿‡å‚æ•°çš„æ•°æ®ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li><li>constructorï¼šåˆ©ç”¨æ„é€ å‡½æ•°è¿›è¡Œè£…é…ï¼Œå¹¶ä¸”æ„é€ å‡½æ•°çš„å‚æ•°é€šè¿‡byTypeè¿›è¡Œè£…é…ã€‚</li><li>autodetectï¼šè‡ªåŠ¨æ¢æµ‹ï¼Œå¦‚æœæœ‰æ„é€ æ–¹æ³•ï¼Œé€šè¿‡ constructçš„æ–¹å¼è‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä½¿ç”¨ byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚</li></ul><h3 id="ä½¿ç”¨-Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#ä½¿ç”¨-Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"></a>ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</h3><p>ä½¿ç”¨@Autowiredæ³¨è§£æ¥è‡ªåŠ¨è£…é…æŒ‡å®šçš„beanã€‚åœ¨ä½¿ç”¨@Autowiredæ³¨è§£ä¹‹å‰éœ€è¦åœ¨Springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œ&lt;context:annotation-config &#x2F;&gt;ã€‚</p><p>åœ¨å¯åŠ¨spring IoCæ—¶ï¼Œå®¹å™¨è‡ªåŠ¨è£…è½½äº†ä¸€ä¸ªAutowiredAnnotationBeanPostProcessoråç½®å¤„ç†å™¨ï¼Œå½“å®¹å™¨æ‰«æåˆ°@Autowiedã€@Resourceæˆ–@Injectæ—¶ï¼Œå°±ä¼šåœ¨IoCå®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾éœ€è¦çš„beanï¼Œå¹¶è£…é…ç»™è¯¥å¯¹è±¡çš„å±æ€§ã€‚åœ¨ä½¿ç”¨@Autowiredæ—¶ï¼Œé¦–å…ˆåœ¨å®¹å™¨ä¸­æŸ¥è¯¢å¯¹åº”ç±»å‹çš„beanï¼š</p><ul><li>å¦‚æœæŸ¥è¯¢ç»“æœåˆšå¥½ä¸ºä¸€ä¸ªï¼Œå°±å°†è¯¥beanè£…é…ç»™@AutowiredæŒ‡å®šçš„æ•°æ®ï¼›</li><li>å¦‚æœæŸ¥è¯¢çš„ç»“æœä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆ@Autowiredä¼šæ ¹æ®åç§°æ¥æŸ¥æ‰¾ï¼›</li><li>å¦‚æœä¸Šè¿°æŸ¥æ‰¾çš„ç»“æœä¸ºç©ºï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è§£å†³æ–¹æ³•æ—¶ï¼Œä½¿ç”¨required&#x3D;falseã€‚</li></ul><h3 id="è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ"><a href="#è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ" class="headerlink" title="è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ"></a>è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ</h3><p>è‡ªåŠ¨è£…é…çš„å±€é™æ€§æ˜¯ï¼š</p><p><strong>é‡å†™</strong>ï¼šä½ ä»éœ€ç”¨ å’Œ é…ç½®æ¥å®šä¹‰ä¾èµ–ï¼Œæ„å‘³ç€æ€»è¦é‡å†™è‡ªåŠ¨è£…é…ã€‚</p><p><strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>ï¼šä½ ä¸èƒ½è‡ªåŠ¨è£…é…ç®€å•çš„å±æ€§ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒStringå­—ç¬¦ä¸²ï¼Œå’Œç±»ã€‚</p><p><strong>æ¨¡ç³Šç‰¹æ€§</strong>ï¼šè‡ªåŠ¨è£…é…ä¸å¦‚æ˜¾å¼è£…é…ç²¾ç¡®ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼Œå»ºè®®ä½¿ç”¨æ˜¾å¼è£…é…ã€‚</p><h3 id="ä½ å¯ä»¥åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªnull-å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ"><a href="#ä½ å¯ä»¥åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªnull-å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ" class="headerlink" title="ä½ å¯ä»¥åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªnull å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ"></a>ä½ å¯ä»¥åœ¨Springä¸­æ³¨å…¥ä¸€ä¸ªnull å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ</h3><p>å¯ä»¥ã€‚</p><h3 id="é—®é¢˜ï¼š-FactoryBean-å’Œ-BeanFactoryæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#é—®é¢˜ï¼š-FactoryBean-å’Œ-BeanFactoryæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="é—®é¢˜ï¼š FactoryBean å’Œ BeanFactoryæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>é—®é¢˜ï¼š FactoryBean å’Œ BeanFactoryæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><h4 id="ç®€è¦çš„ç­”æ¡ˆï¼š"><a href="#ç®€è¦çš„ç­”æ¡ˆï¼š" class="headerlink" title="ç®€è¦çš„ç­”æ¡ˆï¼š"></a>ç®€è¦çš„ç­”æ¡ˆï¼š</h4><blockquote><p>BeanFactory æ˜¯ Bean çš„å·¥å‚ï¼Œ ApplicationContext çš„çˆ¶ç±»ï¼ŒIOC å®¹å™¨çš„æ ¸å¿ƒï¼Œè´Ÿè´£ç”Ÿäº§å’Œç®¡ç† Bean å¯¹è±¡ã€‚</p><p>FactoryBean æ˜¯ Beanï¼Œå¯ä»¥é€šè¿‡å®ç° FactoryBean æ¥å£å®šåˆ¶å®ä¾‹åŒ– Bean çš„é€»è¾‘ï¼Œé€šè¿‡ä»£ç†ä¸€ä¸ªBeanå¯¹è±¡ï¼Œå¯¹æ–¹æ³•å‰ååšä¸€äº›æ“ä½œã€‚</p></blockquote><h4 id="å…·ä½“çš„ä»‹ç»ï¼š"><a href="#å…·ä½“çš„ä»‹ç»ï¼š" class="headerlink" title="å…·ä½“çš„ä»‹ç»ï¼š"></a>å…·ä½“çš„ä»‹ç»ï¼š</h4><h4 id="ï¼ˆ1ï¼‰-BeanFactory-æ˜¯iocå®¹å™¨çš„åº•å±‚å®ç°æ¥å£ï¼Œæ˜¯ApplicationContext-é¡¶çº§æ¥å£"><a href="#ï¼ˆ1ï¼‰-BeanFactory-æ˜¯iocå®¹å™¨çš„åº•å±‚å®ç°æ¥å£ï¼Œæ˜¯ApplicationContext-é¡¶çº§æ¥å£" class="headerlink" title="ï¼ˆ1ï¼‰ BeanFactory æ˜¯iocå®¹å™¨çš„åº•å±‚å®ç°æ¥å£ï¼Œæ˜¯ApplicationContext é¡¶çº§æ¥å£"></a>ï¼ˆ1ï¼‰ BeanFactory æ˜¯iocå®¹å™¨çš„åº•å±‚å®ç°æ¥å£ï¼Œæ˜¯ApplicationContext é¡¶çº§æ¥å£</h4><p>springä¸å…è®¸æˆ‘ä»¬ç›´æ¥æ“ä½œ BeanFactory beanå·¥å‚ï¼Œæ‰€ä»¥ä¸ºæˆ‘ä»¬æä¾›äº†ApplicationContext è¿™ä¸ªæ¥å£ æ­¤æ¥å£é›†æˆBeanFactory æ¥å£ï¼ŒApplicationContextåŒ…å«BeanFactoryçš„æ‰€æœ‰åŠŸèƒ½,åŒæ—¶è¿˜è¿›è¡Œæ›´å¤šçš„æ‰©å±•ã€‚</p><p>BeanFactory æ¥å£åˆè¡ç”Ÿå‡ºä»¥ä¸‹æ¥å£ï¼Œå…¶ä¸­æˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„æ˜¯ApplicationContext æ¥å£</p><h4 id="ApplicationContext-ç»§æ‰¿å›¾"><a href="#ApplicationContext-ç»§æ‰¿å›¾" class="headerlink" title="ApplicationContext ç»§æ‰¿å›¾"></a>ApplicationContext ç»§æ‰¿å›¾</h4><p><a href="https://img-blog.csdnimg.cn/20190619231304280.png"><img src="https://s2.loli.net/2022/04/26/Jx3Kut4Ah9TaGo7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><p><strong>ConfiguableApplicationContext</strong> ä¸­æ·»åŠ äº†ä¸€äº›æ–¹æ³•ï¼š</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs aspectj">... å…¶ä»–çœç•¥<br>    <br>    <span class="hljs-comment">//åˆ·æ–°iocå®¹å™¨ä¸Šä¸‹æ–‡</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">refresh</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> BeansException, IllegalStateException</span>;<br><br><span class="hljs-comment">// å…³é—­æ­¤åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ï¼Œé‡Šæ”¾æ‰€æœ‰èµ„æºå¹¶é”å®šï¼Œé”€æ¯æ‰€æœ‰ç¼“å­˜çš„å•ä¾‹beanã€‚</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">close</span><span class="hljs-params">()</span></span>;<br><br><span class="hljs-comment">//ç¡®å®šæ­¤åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œå³ï¼Œæ˜¯å¦è‡³å°‘åˆ·æ–°ä¸€æ¬¡ä¸”å°šæœªå…³é—­ã€‚</span><br>    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">isActive</span><span class="hljs-params">()</span></span>;<br><br>    ... å…¶ä»–çœç•¥<br></code></pre></td></tr></table></figure><p>ä¸»è¦ä½œç”¨åœ¨iocå®¹å™¨è¿›è¡Œç›¸åº”çš„åˆ·æ–°ï¼Œå…³é—­ç­‰æ“ä½œï¼</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-keyword">File</span><span class="hljs-params">System</span>XmlApplicationContext å’ŒClassPathXmlApplicationContext æ˜¯ç”¨æ¥è¯»å–xmlæ–‡ä»¶åˆ›å»ºbeanå¯¹è±¡<br>ClassPathXmlApplicationContext  ï¼š è¯»å–ç±»è·¯å¾„ä¸‹xml åˆ›å»ºbean<br><span class="hljs-keyword">File</span><span class="hljs-params">System</span>XmlApplicationContext ï¼šè¯»å–æ–‡ä»¶ç³»ç»Ÿä¸‹xmlåˆ›å»ºbean<br>AnnotationConfigApplicationContext ä¸»è¦æ˜¯æ³¨è§£å¼€å‘è·å–iocä¸­çš„beanå®ä¾‹<br></code></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰-FactoryBean-æ˜¯spirngæä¾›çš„å·¥å‚beançš„ä¸€ä¸ªæ¥å£"><a href="#ï¼ˆ2ï¼‰-FactoryBean-æ˜¯spirngæä¾›çš„å·¥å‚beançš„ä¸€ä¸ªæ¥å£" class="headerlink" title="ï¼ˆ2ï¼‰ FactoryBean æ˜¯spirngæä¾›çš„å·¥å‚beançš„ä¸€ä¸ªæ¥å£"></a>ï¼ˆ2ï¼‰ FactoryBean æ˜¯spirngæä¾›çš„å·¥å‚beançš„ä¸€ä¸ªæ¥å£</h4><p>FactoryBean æ¥å£æä¾›ä¸‰ä¸ªæ–¹æ³•ï¼Œç”¨æ¥åˆ›å»ºå¯¹è±¡ï¼Œ<br>FactoryBean å…·ä½“è¿”å›çš„å¯¹è±¡æ˜¯ç”±getObject æ–¹æ³•å†³å®šçš„ã€‚</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs aspectj">*/<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">FactoryBean</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;<br><br><span class="hljs-comment">//åˆ›å»ºçš„å…·ä½“beanå¯¹è±¡çš„ç±»å‹</span><br>    <span class="hljs-meta">@Nullable</span><br>    <span class="hljs-function">T <span class="hljs-title">getObject</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>;<br><br> <span class="hljs-comment">//å·¥å‚bean å…·ä½“åˆ›å»ºå…·ä½“å¯¹è±¡æ˜¯ç”±æ­¤getObject()æ–¹æ³•æ¥è¿”å›çš„</span><br>    <span class="hljs-meta">@Nullable</span><br>    Class&lt;?&gt; getObjectType();<br>    <br>  <span class="hljs-comment">//æ˜¯å¦å•ä¾‹</span><br>    <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">isSingleton</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªFactoryBean ç”¨æ¥ç”Ÿäº§Userå¯¹è±¡</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FactoryBeanTest</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FactoryBean</span>&lt;<span class="hljs-title class_">User</span>&gt; &#123;<br><br><br>    <span class="hljs-comment">//åˆ›å»ºçš„å…·ä½“beanå¯¹è±¡çš„ç±»å‹</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Class</span>&lt;?&gt; <span class="hljs-title function_">getObjectType</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">User</span>.<span class="hljs-property">class</span>;<br>    &#125;<br><br><br>    <span class="hljs-comment">//æ˜¯å¦å•ä¾‹</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isSingleton</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//å·¥å‚bean å…·ä½“åˆ›å»ºå…·ä½“å¯¹è±¡æ˜¯ç”±æ­¤getObject()æ–¹æ³•æ¥è¿”å›çš„</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">User</span> <span class="hljs-title function_">getObject</span>() throws <span class="hljs-title class_">Exception</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Junitæµ‹è¯•"><a href="#Junitæµ‹è¯•" class="headerlink" title="Junitæµ‹è¯•"></a>Junitæµ‹è¯•</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@RunWith(SpringRunner.class)</span><br><span class="hljs-meta">@SpringBootTest(classes = &#123;FactoryBeanTest.class&#125;)</span><br><span class="hljs-meta">@WebAppConfiguration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringBootDemoApplicationTests</span> </span>&#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> ApplicationContext applicationContext;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> void tesst() &#123;<br>        FactoryBeanTest bean1 = applicationContext.getBean(FactoryBeanTest.<span class="hljs-keyword">class</span>);<br>        <span class="hljs-keyword">try</span> &#123;<br>            User <span class="hljs-keyword">object</span> = bean1.getObject();<br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">object</span>==<span class="hljs-keyword">object</span>);<br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">object</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-literal">true</span><span class="hljs-built_in"></span><br><span class="hljs-built_in">User </span>[<span class="hljs-attribute">id</span>=<span class="hljs-literal">null</span>, <span class="hljs-attribute">name</span>=<span class="hljs-literal">null</span>, <span class="hljs-attribute">age</span>=0]<br></code></pre></td></tr></table></figure><h4 id="ç®€å•çš„æ€»ç»“ï¼š"><a href="#ç®€å•çš„æ€»ç»“ï¼š" class="headerlink" title="ç®€å•çš„æ€»ç»“ï¼š"></a>ç®€å•çš„æ€»ç»“ï¼š</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">BeanFactoryæ˜¯ä¸ªbean </span>å·¥å‚ï¼Œæ˜¯ä¸€ä¸ªå·¥å‚ç±»(æ¥å£)ï¼Œ å®ƒè´Ÿè´£ç”Ÿäº§å’Œç®¡ç†<span class="hljs-keyword">beançš„ä¸€ä¸ªå·¥å‚</span><br><span class="hljs-keyword"></span>æ˜¯ioc å®¹å™¨æœ€åº•å±‚çš„æ¥å£ï¼Œæ˜¯ä¸ªiocå®¹å™¨ï¼Œæ˜¯springç”¨æ¥ç®¡ç†å’Œè£…é…æ™®é€š<span class="hljs-keyword">beançš„iocå®¹å™¨ï¼ˆè¿™äº›beanæˆä¸ºæ™®é€šbeanï¼‰ã€‚</span><br><span class="hljs-keyword"></span><br>FactoryBeanæ˜¯ä¸ª<span class="hljs-keyword">beanï¼Œåœ¨IOCå®¹å™¨çš„åŸºç¡€ä¸Šç»™Beançš„å®ç°åŠ ä¸Šäº†ä¸€ä¸ªç®€å•å·¥å‚æ¨¡å¼å’Œè£…é¥°æ¨¡å¼ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥ç”Ÿäº§å¯¹è±¡å’Œè£…é¥°å¯¹è±¡çš„å·¥å‚beanï¼Œç”±springç®¡ç†åï¼Œç”Ÿäº§çš„å¯¹è±¡æ˜¯ç”±getObject()æ–¹æ³•å†³å®šçš„ï¼ˆä»å®¹å™¨ä¸­è·å–åˆ°çš„å¯¹è±¡ä¸æ˜¯</span><br><span class="hljs-keyword"></span>â€œ FactoryBeanTest  â€ å¯¹è±¡ï¼‰ã€‚<br></code></pre></td></tr></table></figure><h3 id="é«˜é¢‘é¢è¯•é¢˜ï¼šSpring-å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ"><a href="#é«˜é¢‘é¢è¯•é¢˜ï¼šSpring-å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ" class="headerlink" title="é«˜é¢‘é¢è¯•é¢˜ï¼šSpring å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ"></a>é«˜é¢‘é¢è¯•é¢˜ï¼šSpring å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</h3><p>åœ¨å…³äºSpringçš„é¢è¯•ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šè¢«é—®åˆ°ä¸€ä¸ªé—®é¢˜ï¼šSpringæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜çš„ã€‚</p><p>è¿™ä¸ªé—®é¢˜ç®—æ˜¯å…³äºSpringçš„ä¸€ä¸ªé«˜é¢‘é¢è¯•é¢˜ï¼Œå› ä¸ºå¦‚æœä¸åˆ»æ„ç ”è¯»ï¼Œç›¸ä¿¡å³ä½¿è¯»è¿‡æºç ï¼Œé¢è¯•è€…ä¹Ÿä¸ä¸€å®šèƒ½å¤Ÿä¸€ä¸‹å­æ€è€ƒå‡ºä¸ªä¸­å¥¥ç§˜ã€‚</p><p>æœ¬æ–‡ä¸»è¦é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œä»æºç çš„è§’åº¦å¯¹å…¶å®ç°åŸç†è¿›è¡Œè®²è§£ã€‚</p><h4 id="å¾ªç¯ä¾èµ–çš„ç®€å•ä¾‹å­"><a href="#å¾ªç¯ä¾èµ–çš„ç®€å•ä¾‹å­" class="headerlink" title="å¾ªç¯ä¾èµ–çš„ç®€å•ä¾‹å­"></a>å¾ªç¯ä¾èµ–çš„ç®€å•ä¾‹å­</h4><p>æ¯”å¦‚å‡ ä¸ªBeanä¹‹é—´çš„äº’ç›¸å¼•ç”¨ï¼š</p><p><a href="https://img2020.cnblogs.com/other/1218593/202006/1218593-20200623160432125-1331246157.webp"><img src="https://img2020.cnblogs.com/other/1218593/202006/1218593-20200623160432125-1331246157.webp" alt="img"></a></p><p>ç”šè‡³è‡ªå·±â€œå¾ªç¯â€ä¾èµ–è‡ªå·±ï¼š</p><p><a href="https://img2020.cnblogs.com/other/1218593/202006/1218593-20200623160432354-120402187.webp"><img src="https://img2020.cnblogs.com/other/1218593/202006/1218593-20200623160432354-120402187.webp" alt="img"></a></p><h4 id="åŸå‹-Prototype-çš„åœºæ™¯æ˜¯ä¸æ”¯æŒå¾ªç¯ä¾èµ–çš„"><a href="#åŸå‹-Prototype-çš„åœºæ™¯æ˜¯ä¸æ”¯æŒå¾ªç¯ä¾èµ–çš„" class="headerlink" title="åŸå‹(Prototype)çš„åœºæ™¯æ˜¯ä¸æ”¯æŒå¾ªç¯ä¾èµ–çš„"></a>åŸå‹(Prototype)çš„åœºæ™¯æ˜¯ä¸æ”¯æŒå¾ªç¯ä¾èµ–çš„</h4><blockquote><p>å…ˆè¯´æ˜å‰æï¼šåŸå‹(Prototype)çš„åœºæ™¯æ˜¯ä¸æ”¯æŒå¾ªç¯ä¾èµ–çš„. å•ä¾‹çš„åœºæ™¯æ‰èƒ½å­˜åœ¨å¾ªç¯ä¾èµ–</p></blockquote><p>åŸå‹(Prototype)çš„åœºæ™¯é€šå¸¸ä¼šèµ°åˆ°<a href="http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247493383&idx=2&sn=883c40b743d496e48dc2f99a083ec5e4&chksm=eb506231dc27eb272437a3dfd2b9a0ae91414c69a83c7e3fe22362cdef909e39122929af9884&scene=21#wechat_redirect"><code>AbstractBeanFactory</code></a>ç±»ä¸­ä¸‹é¢çš„åˆ¤æ–­ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span> (is<span class="hljs-constructor">PrototypeCurrentlyInCreation(<span class="hljs-params">beanName</span>)</span>) &#123;<br>  throw <span class="hljs-keyword">new</span> <span class="hljs-constructor">BeanCurrentlyInCreationException(<span class="hljs-params">beanName</span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŸå› å¾ˆå¥½ç†è§£ï¼Œåˆ›å»ºæ–°çš„Aæ—¶ï¼Œå‘ç°è¦æ³¨å…¥åŸå‹å­—æ®µBï¼Œåˆåˆ›å»ºæ–°çš„Bå‘ç°è¦æ³¨å…¥åŸå‹å­—æ®µAâ€¦</p><p>è¿™å°±å¥—å¨ƒäº†, Springå°±å…ˆæŠ›å‡ºäº†BeanCurrentlyInCreationException</p><p>ä»€ä¹ˆæ˜¯åŸå‹(Prototype)çš„åœºæ™¯ï¼Ÿ</p><p>é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼Œå¯ä»¥å°†è¯¥ç±»çš„beanè®¾ç½®ä¸ºåŸå‹æ¨¡å¼</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@Service</span><br><span class="hljs-meta">@Scope</span>(<span class="hljs-string">&quot;prototype&quot;</span>)<br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyReportExporter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractReportExporter</span></span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨Springä¸­ï¼Œ@Serviceé»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚ç”¨äº†ç§æœ‰å…¨å±€å˜é‡ï¼Œè‹¥ä¸æƒ³å½±å“ä¸‹æ¬¡è¯·æ±‚ï¼Œå°±éœ€è¦ç”¨åˆ°åŸå‹æ¨¡å¼ï¼Œå³@Scope(â€œprototypeâ€)</p><p>æ‰€è°“å•ä¾‹ï¼Œå°±æ˜¯Springçš„IOCæœºåˆ¶åªåˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ¯æ¬¡è¯·æ±‚ï¼Œéƒ½ä¼šç”¨è¿™åŒä¸€ä¸ªå®ä¾‹è¿›è¡Œå¤„ç†ï¼Œå› æ­¤è‹¥å­˜åœ¨å…¨å±€å˜é‡ï¼Œæœ¬æ¬¡è¯·æ±‚çš„å€¼è‚¯å®šä¼šå½±å“ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶è¯¥å˜é‡çš„å€¼ã€‚<br>åŸå‹æ¨¡å¼ï¼ŒæŒ‡çš„æ˜¯æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œä¼šé‡æ–°åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ¯”è¾ƒç±»ä¼¼äºæˆ‘ä»¬è‡ªå·±è‡ªå·±newçš„å¯¹è±¡å®ä¾‹ã€‚</p><h4 id="å…·ä½“ä¾‹å­ï¼šå¾ªç¯ä¾èµ–çš„ä»£ç ç‰‡æ®µ"><a href="#å…·ä½“ä¾‹å­ï¼šå¾ªç¯ä¾èµ–çš„ä»£ç ç‰‡æ®µ" class="headerlink" title="å…·ä½“ä¾‹å­ï¼šå¾ªç¯ä¾èµ–çš„ä»£ç ç‰‡æ®µ"></a>å…·ä½“ä¾‹å­ï¼šå¾ªç¯ä¾èµ–çš„ä»£ç ç‰‡æ®µ</h4><p>æˆ‘ä»¬å…ˆçœ‹çœ‹å½“æ—¶å‡ºé—®é¢˜çš„ä»£ç ç‰‡æ®µï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Service</span><br>publicclass TestService1 &#123;<br><br>    <span class="hljs-variable">@Autowired</span><br>    private TestService2 testService2;<br><br>    <span class="hljs-variable">@Async</span><br>    public void test1() &#123;<br>    &#125;<br>&#125;<br><span class="hljs-variable">@Service</span><br>publicclass TestService2 &#123;<br><br>    <span class="hljs-variable">@Autowired</span><br>    private TestService1 testService1;<br><br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">test2</span>() &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸¤æ®µä»£ç ä¸­å®šä¹‰äº†ä¸¤ä¸ªServiceç±»ï¼š<code>TestService1</code>å’Œ<code>TestService2</code>ï¼Œåœ¨TestService1ä¸­æ³¨å…¥äº†TestService2çš„å®ä¾‹ï¼ŒåŒæ—¶åœ¨TestService2ä¸­æ³¨å…¥äº†TestService1çš„å®ä¾‹ï¼Œè¿™é‡Œæ„æˆäº†<code>å¾ªç¯ä¾èµ–</code>ã€‚</p><blockquote><p>åªä¸è¿‡ï¼Œè¿™ä¸æ˜¯æ™®é€šçš„å¾ªç¯ä¾èµ–ï¼Œå› ä¸ºTestService1çš„test1æ–¹æ³•ä¸ŠåŠ äº†ä¸€ä¸ª<code>@Async</code>æ³¨è§£ã€‚</p></blockquote><p>å¤§å®¶çŒœçŒœç¨‹åºå¯åŠ¨åè¿è¡Œç»“æœä¼šæ€æ ·ï¼Ÿ</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean <span class="hljs-keyword">with</span> name <span class="hljs-string">&#x27;testService1&#x27;</span>: Bean <span class="hljs-keyword">with</span> name <span class="hljs-string">&#x27;testService1&#x27;</span> has been injected <span class="hljs-keyword">into</span> other beans [testService2] <span class="hljs-keyword">in</span> its raw <span class="hljs-built_in">version</span> <span class="hljs-keyword">as</span> part <span class="hljs-keyword">of</span> <span class="hljs-keyword">a</span> circular reference, but has eventually been wrapped. This means that said other beans <span class="hljs-built_in">do</span> <span class="hljs-keyword">not</span> use <span class="hljs-keyword">the</span> final <span class="hljs-built_in">version</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> bean. This is often <span class="hljs-keyword">the</span> <span class="hljs-built_in">result</span> <span class="hljs-keyword">of</span> over-eager type matching - consider <span class="hljs-keyword">using</span> <span class="hljs-string">&#x27;getBeanNamesOfType&#x27;</span> <span class="hljs-keyword">with</span> <span class="hljs-keyword">the</span> <span class="hljs-string">&#x27;allowEagerInit&#x27;</span> flag turned off, <span class="hljs-keyword">for</span> example.<br></code></pre></td></tr></table></figure><p>æŠ¥é”™äº†ã€‚ã€‚ã€‚åŸå› æ˜¯å‡ºç°äº†å¾ªç¯ä¾èµ–ã€‚</p><p><strong>ã€Œä¸ç§‘å­¦å‘€ï¼Œspringä¸æ˜¯å·ç§°èƒ½è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜å—ï¼Œæ€ä¹ˆè¿˜ä¼šå‡ºç°ï¼Ÿã€</strong></p><p>å¦‚æœæŠŠä¸Šé¢çš„ä»£ç ç¨å¾®è°ƒæ•´ä¸€ä¸‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService1</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">TestService2</span> testService2;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">test1</span>(<span class="hljs-params"></span>) &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æŠŠTestService1çš„test1æ–¹æ³•ä¸Šçš„<code>@Async</code>æ³¨è§£å»æ‰ï¼Œ<code>TestService1</code>å’Œ<code>TestService2</code>éƒ½éœ€è¦æ³¨å…¥å¯¹æ–¹çš„å®ä¾‹ï¼ŒåŒæ ·æ„æˆäº†å¾ªç¯ä¾èµ–ã€‚</p><p>ä½†æ˜¯é‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œå‘ç°å®ƒèƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚è¿™åˆæ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p><p>å¸¦ç€è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å¼€å§‹springå¾ªç¯ä¾èµ–çš„æ¢ç§˜ä¹‹æ—…ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼Ÿ</h4><p>å¾ªç¯ä¾èµ–ï¼šè¯´ç™½æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡å®ä¾‹ä¹‹é—´å­˜åœ¨ç›´æ¥æˆ–é—´æ¥çš„ä¾èµ–å…³ç³»ï¼Œè¿™ç§ä¾èµ–å…³ç³»æ„æˆäº†æ„æˆä¸€ä¸ªç¯å½¢è°ƒç”¨ã€‚</p><p>ç¬¬ä¸€ç§æƒ…å†µï¼šè‡ªå·±ä¾èµ–è‡ªå·±çš„ç›´æ¥ä¾èµ–</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYWIxTWlhY3FHOGJXQWd3Vm1nUjJUeFJkZkdROXJYcGplYlJQUU1ZcDZUV3BjQ1AySlNuWWFqbncvNjQw?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/hiKHgpMBVL8DwJ7.png" alt="img"></a></p><p>ç¬¬äºŒç§æƒ…å†µï¼šä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„ç›´æ¥ä¾èµ–</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYXZheHJoUTYzU0huaWFxOEdSaDRmVWlibENpYWNLV1ViV01zemQ5bENvelpib3hhc01waWI0TmJ4elEvNjQw?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/rTLN9AmOExelfq4.png" alt="img"></a></p><p>ç¬¬ä¸‰ç§æƒ…å†µï¼šå¤šä¸ªå¯¹è±¡ä¹‹é—´çš„é—´æ¥ä¾èµ–<a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYWxJenVjeXdaaWFEOUg1emljcnlEb3l3WmV2eEp4R0EwSnZzcndZN3RGaEY3SEExRW43WTBDZ1dBLzY0MA?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/SjXBYnJc14hLqFg.png" alt="img"></a></p><p>å‰é¢ä¸¤ç§æƒ…å†µçš„ç›´æ¥å¾ªç¯ä¾èµ–æ¯”è¾ƒç›´è§‚ï¼Œéå¸¸å¥½è¯†åˆ«ï¼Œä½†æ˜¯ç¬¬ä¸‰ç§é—´æ¥å¾ªç¯ä¾èµ–çš„æƒ…å†µæœ‰æ—¶å€™å› ä¸ºä¸šåŠ¡ä»£ç è°ƒç”¨å±‚çº§å¾ˆæ·±ï¼Œä¸å®¹æ˜“è¯†åˆ«å‡ºæ¥ã€‚</p><h4 id="å¾ªç¯ä¾èµ–çš„Nç§åœºæ™¯"><a href="#å¾ªç¯ä¾èµ–çš„Nç§åœºæ™¯" class="headerlink" title="å¾ªç¯ä¾èµ–çš„Nç§åœºæ™¯"></a>å¾ªç¯ä¾èµ–çš„Nç§åœºæ™¯</h4><p>springä¸­å‡ºç°å¾ªç¯ä¾èµ–ä¸»è¦æœ‰ä»¥ä¸‹åœºæ™¯ï¼š</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYVBJSnl2a2s4YjdsNzRsRVVWQjZiMVRrZmZYMkp2ZTlkb0ppYTYxSVhoWTR5T2ZNeGliWE9pYzBBUS82NDA?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/DRCp7a9IUxFMNqS.png" alt="img"></a></p><h4 id="åœºæ™¯1ï¼šå•ä¾‹çš„setteræ³¨å…¥"><a href="#åœºæ™¯1ï¼šå•ä¾‹çš„setteræ³¨å…¥" class="headerlink" title="åœºæ™¯1ï¼šå•ä¾‹çš„setteræ³¨å…¥"></a>åœºæ™¯1ï¼šå•ä¾‹çš„setteræ³¨å…¥</h4><p>è¿™ç§æ³¨å…¥æ–¹å¼åº”è¯¥æ˜¯springç”¨çš„æœ€å¤šçš„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService1</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">TestService2</span> testService2;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">test1</span>(<span class="hljs-params"></span>) &#123;<br>    &#125;<br>&#125;<br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService2</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">TestService1</span> testService1;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">test2</span>(<span class="hljs-params"></span>) &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„å¾ªç¯ä¾èµ–ï¼Œä½†æ˜¯å®ƒèƒ½æ­£å¸¸è¿è¡Œï¼Œå¾—ç›Šäºspringçš„å†…éƒ¨æœºåˆ¶ï¼Œè®©æˆ‘ä»¬æ ¹æœ¬æ— æ³•æ„ŸçŸ¥å®ƒæœ‰é—®é¢˜ï¼Œå› ä¸ºspringé»˜é»˜å¸®æˆ‘ä»¬è§£å†³äº†ã€‚</p><p>springå†…éƒ¨æœ‰ä¸‰çº§ç¼“å­˜ï¼š</p><ul><li>singletonObjects ä¸€çº§ç¼“å­˜ï¼Œç”¨äºä¿å­˜å®ä¾‹åŒ–ã€æ³¨å…¥ã€åˆå§‹åŒ–å®Œæˆçš„beanå®ä¾‹</li><li>earlySingletonObjects äºŒçº§ç¼“å­˜ï¼Œç”¨äºä¿å­˜å®ä¾‹åŒ–å®Œæˆçš„beanå®ä¾‹</li><li>singletonFactories ä¸‰çº§ç¼“å­˜ï¼Œç”¨äºä¿å­˜beanåˆ›å»ºå·¥å‚ï¼Œä»¥ä¾¿äºåé¢æ‰©å±•æœ‰æœºä¼šåˆ›å»ºä»£ç†å¯¹è±¡ã€‚</li></ul><p>ä¸‹é¢ç”¨ä¸€å¼ å›¾å‘Šè¯‰ä½ ï¼Œspringæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„ï¼š</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYW1zV2RaUVg2Y0k2SlFQYTNQN2ljb2VwaWJEWG9GRWhDNzFqdWliREFyS2JsRU1jb0JUUkxSUE1DZy82NDA?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/nrpLSYXOtqDhyxe.png" alt="img"></a></p><p>ç»†å¿ƒçš„æœ‹å‹å¯èƒ½ä¼šå‘ç°åœ¨è¿™ç§åœºæ™¯ä¸­<strong>ç¬¬äºŒçº§ç¼“å­˜</strong>ä½œç”¨ä¸å¤§ã€‚</p><h4 id="é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ç¬¬äºŒçº§ç¼“å­˜å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ç¬¬äºŒçº§ç¼“å­˜å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ç¬¬äºŒçº§ç¼“å­˜å‘¢ï¼Ÿ"></a>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ç¬¬äºŒçº§ç¼“å­˜å‘¢ï¼Ÿ</h4><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬è¦å¦‚ä½•å¤„ç†ï¼Ÿ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService1</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">TestService2</span> testService2;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">TestService3</span> testService3;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">test1</span>(<span class="hljs-params"></span>) &#123;<br>    &#125;<br>&#125;<br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService2</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">TestService1</span> testService1;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">test2</span>(<span class="hljs-params"></span>) &#123;<br>    &#125;<br>&#125;<br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService3</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">TestService1</span> testService1;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">test3</span>(<span class="hljs-params"></span>) &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>TestService1ä¾èµ–äºTestService2å’ŒTestService3ï¼Œè€ŒTestService2ä¾èµ–äºTestService1ï¼ŒåŒæ—¶TestService3ä¹Ÿä¾èµ–äºTestService1ã€‚</p><p>æŒ‰ç…§ä¸Šå›¾çš„æµç¨‹å¯ä»¥æŠŠTestService1æ³¨å…¥åˆ°TestService2ï¼Œå¹¶ä¸”TestService1çš„å®ä¾‹æ˜¯ä»ç¬¬ä¸‰çº§ç¼“å­˜ä¸­è·å–çš„ã€‚</p><p>å‡è®¾ä¸ç”¨ç¬¬äºŒçº§ç¼“å­˜ï¼ŒTestService1æ³¨å…¥åˆ°TestService3çš„æµç¨‹å¦‚å›¾ï¼š</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYWlhZ3I1eU9tYUpZbk5yU3JnM0lJc2hLSHNYN2Z0RXBsQ2hTZmNZMUNKR1ljYWFIQ0pYVkNRblEvNjQw?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/vr4GBd8ARxjDhiW.png" alt="img"></a></p><p>TestService1æ³¨å…¥åˆ°TestService3åˆéœ€è¦ä»ç¬¬ä¸‰çº§ç¼“å­˜ä¸­è·å–å®ä¾‹ï¼Œè€Œç¬¬ä¸‰çº§ç¼“å­˜é‡Œä¿å­˜çš„å¹¶éçœŸæ­£çš„å®ä¾‹å¯¹è±¡ï¼Œè€Œæ˜¯<code>ObjectFactory</code>å¯¹è±¡ã€‚</p><blockquote><p>è¯´ç™½äº†ï¼Œä¸¤æ¬¡ä»ä¸‰çº§ç¼“å­˜ä¸­è·å–éƒ½æ˜¯<code>ObjectFactory</code>å¯¹è±¡ï¼Œè€Œé€šè¿‡å®ƒåˆ›å»ºçš„å®ä¾‹å¯¹è±¡æ¯æ¬¡å¯èƒ½éƒ½ä¸ä¸€æ ·çš„ã€‚</p></blockquote><p>è¿™æ ·ä¸æ˜¯æœ‰é—®é¢˜ï¼Ÿ</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œspringå¼•å…¥çš„ç¬¬äºŒçº§ç¼“å­˜ã€‚å‰ä¸€ä¸ªå›¾å…¶å®TestService1å¯¹è±¡çš„å®ä¾‹å·²ç»è¢«æ·»åŠ åˆ°ç¬¬äºŒçº§ç¼“å­˜ä¸­äº†ï¼Œè€Œåœ¨TestService1æ³¨å…¥åˆ°TestService3æ—¶ï¼Œåªç”¨ä»ç¬¬äºŒçº§ç¼“å­˜ä¸­è·å–è¯¥å¯¹è±¡å³å¯ã€‚</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYWRNWEZzYWd3aWNyRTJra0g4anN5QUR6UFdJMnV6WmNrVGxmV1lLd09kQzBFZ0RIQzVaRU5pYjRRLzY0MA?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/JukhnUARoWsFNZb.png" alt="img"></a></p><p>è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œç¬¬ä¸‰çº§ç¼“å­˜ä¸­ä¸ºä»€ä¹ˆè¦æ·»åŠ <code>ObjectFactory</code>å¯¹è±¡ï¼Œç›´æ¥ä¿å­˜å®ä¾‹å¯¹è±¡ä¸è¡Œå—ï¼Ÿ</p><blockquote><p>ç­”ï¼šä¸è¡Œï¼Œå› ä¸ºå‡å¦‚ä½ æƒ³å¯¹æ·»åŠ åˆ°ä¸‰çº§ç¼“å­˜ä¸­çš„å®ä¾‹å¯¹è±¡è¿›è¡Œå¢å¼ºï¼Œç›´æ¥ç”¨å®ä¾‹å¯¹è±¡æ˜¯è¡Œä¸é€šçš„ã€‚</p></blockquote><p>é’ˆå¯¹è¿™ç§åœºæ™¯springæ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå°±åœ¨<code>AbstractAutowireCapableBeanFactory</code>ç±»<code>doCreateBean</code>æ–¹æ³•çš„è¿™æ®µä»£ç ä¸­ï¼š</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYVQ4VHJFc2xEa1NmSVFjalNaS1VGZWVSQmR6OU90Tk96Qk5wZmRLNllMWk5sV3V2b0YwS2FGQS82NDA?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/NEmZsgw4oPRqtQ1.png" alt="img"></a>å®ƒå®šä¹‰äº†ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œé€šè¿‡<code>getEarlyBeanReference</code>æ–¹æ³•è·å–ä»£ç†å¯¹è±¡ï¼Œå…¶å®åº•å±‚æ˜¯é€šè¿‡<code>AbstractAutoProxyCreator</code>ç±»çš„<code>getEarlyBeanReference</code>ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p><h4 id="åœºæ™¯äºŒå¤šä¾‹çš„setteræ³¨å…¥"><a href="#åœºæ™¯äºŒå¤šä¾‹çš„setteræ³¨å…¥" class="headerlink" title="åœºæ™¯äºŒå¤šä¾‹çš„setteræ³¨å…¥"></a>åœºæ™¯äºŒå¤šä¾‹çš„setteræ³¨å…¥</h4><p>è¿™ç§æ³¨å…¥æ–¹æ³•å¶ç„¶ä¼šæœ‰ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¸‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Scope</span>(ConfigurableBeanFactory.SCOPE_PROTOTYPE)<br><span class="hljs-variable">@Service</span><br>publicclass TestService1 &#123;<br><br>    <span class="hljs-variable">@Autowired</span><br>    private TestService2 testService2;<br><br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">test1</span>() &#123;<br>    &#125;<br>&#125;<br><span class="hljs-variable">@Scope</span>(ConfigurableBeanFactory.SCOPE_PROTOTYPE)<br><span class="hljs-variable">@Service</span><br>publicclass TestService2 &#123;<br><br>    <span class="hljs-variable">@Autowired</span><br>    private TestService1 testService1;<br><br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">test2</span>() &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¾ˆå¤šäººè¯´è¿™ç§æƒ…å†µspringå®¹å™¨å¯åŠ¨ä¼šæŠ¥é”™ï¼Œå…¶å®æ˜¯ä¸å¯¹çš„ï¼Œæˆ‘éå¸¸è´Ÿè´£ä»»çš„å‘Šè¯‰ä½ ç¨‹åºèƒ½å¤Ÿæ­£å¸¸å¯åŠ¨ã€‚</p><p><strong>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</strong></p><p>å…¶å®åœ¨<code>AbstractApplicationContext</code>ç±»çš„<code>refresh</code>æ–¹æ³•ä¸­å‘Šè¯‰äº†æˆ‘ä»¬ç­”æ¡ˆï¼Œå®ƒä¼šè°ƒç”¨<code>finishBeanFactoryInitialization</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯ä¸ºäº†springå®¹å™¨å¯åŠ¨çš„æ—¶å€™æå‰åˆå§‹åŒ–ä¸€äº›beanã€‚è¯¥æ–¹æ³•çš„å†…éƒ¨åˆè°ƒç”¨äº†<code>preInstantiateSingletons</code>æ–¹æ³•</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYVRRQkNnMzZRUVhCaWJhTzdYM2tYS2liQ085UU9lMjhpY0k4OXFueWMwU3pxcDJQbklzNVdDNHk3dy82NDA?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/iLBPuTM8VjImNWK.png" alt="img"></a>æ ‡çº¢çš„åœ°æ–¹æ˜æ˜¾èƒ½å¤Ÿçœ‹å‡ºï¼šéæŠ½è±¡ã€å•ä¾‹ å¹¶ä¸”éæ‡’åŠ è½½çš„ç±»æ‰èƒ½è¢«æå‰åˆå§‹beanã€‚</p><p>è€Œå¤šä¾‹å³<code>SCOPE_PROTOTYPE</code>ç±»å‹çš„ç±»ï¼Œéå•ä¾‹ï¼Œä¸ä¼šè¢«æå‰åˆå§‹åŒ–beanï¼Œæ‰€ä»¥ç¨‹åºèƒ½å¤Ÿæ­£å¸¸å¯åŠ¨ã€‚</p><p>å¦‚ä½•è®©ä»–æå‰åˆå§‹åŒ–beanå‘¢ï¼Ÿ</p><p>åªéœ€è¦å†å®šä¹‰ä¸€ä¸ªå•ä¾‹çš„ç±»ï¼Œåœ¨å®ƒé‡Œé¢æ³¨å…¥TestService1</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService3</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">TestService1</span> testService1;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨ç¨‹åºï¼Œæ‰§è¡Œç»“æœï¼š</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">Requested bean <span class="hljs-keyword">is</span> currently <span class="hljs-keyword">in</span> creation: <span class="hljs-keyword">Is</span> there an unresolvable circular <span class="hljs-keyword">reference</span>?<br></code></pre></td></tr></table></figure><p>æœç„¶å‡ºç°äº†å¾ªç¯ä¾èµ–ã€‚</p><p>æ³¨æ„ï¼šè¿™ç§å¾ªç¯ä¾èµ–é—®é¢˜æ˜¯æ— æ³•è§£å†³çš„ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç”¨ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ã€‚</p><h4 id="åœºæ™¯ä¸‰ï¼šæ„é€ å™¨æ³¨å…¥"><a href="#åœºæ™¯ä¸‰ï¼šæ„é€ å™¨æ³¨å…¥" class="headerlink" title="åœºæ™¯ä¸‰ï¼šæ„é€ å™¨æ³¨å…¥"></a>åœºæ™¯ä¸‰ï¼šæ„é€ å™¨æ³¨å…¥</h4><p>è¿™ç§æ³¨å…¥æ–¹å¼ç°åœ¨å…¶å®ç”¨çš„å·²ç»éå¸¸å°‘äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ï¼Œçœ‹çœ‹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs axapta">@Service<br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService1</span> &#123;<br><br>    <span class="hljs-keyword">public</span> TestService1(TestService2 testService2) &#123;<br>    &#125;<br>&#125;<br>@Service<br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService2</span> &#123;<br><br>    <span class="hljs-keyword">public</span> TestService2(TestService1 testService1) &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">Requested bean <span class="hljs-keyword">is</span> currently <span class="hljs-keyword">in</span> creation: <span class="hljs-keyword">Is</span> there an unresolvable circular <span class="hljs-keyword">reference</span>?<br></code></pre></td></tr></table></figure><p>å‡ºç°äº†å¾ªç¯ä¾èµ–ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYXQwZW4wUEhCTDZXQXFIS3JieFUzOG54WnVaQ0RXeFZURTlpYXpjS1lBNDlGVHNlQ1lJbER4YkEvNjQw?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/5FmlhGqHNW9j27O.png" alt="img"></a></p><p>ä»å›¾ä¸­çš„æµç¨‹çœ‹å‡ºæ„é€ å™¨æ³¨å…¥æ²¡èƒ½æ·»åŠ åˆ°ä¸‰çº§ç¼“å­˜ï¼Œä¹Ÿæ²¡æœ‰ä½¿ç”¨ç¼“å­˜ï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ã€‚</p><h4 id="åœºæ™¯å››ï¼šå•ä¾‹çš„ä»£ç†å¯¹è±¡setteræ³¨å…¥"><a href="#åœºæ™¯å››ï¼šå•ä¾‹çš„ä»£ç†å¯¹è±¡setteræ³¨å…¥" class="headerlink" title="åœºæ™¯å››ï¼šå•ä¾‹çš„ä»£ç†å¯¹è±¡setteræ³¨å…¥"></a>åœºæ™¯å››ï¼šå•ä¾‹çš„ä»£ç†å¯¹è±¡setteræ³¨å…¥</h4><p>è¿™ç§æ³¨å…¥æ–¹å¼å…¶å®ä¹Ÿæ¯”è¾ƒå¸¸ç”¨ï¼Œæ¯”å¦‚å¹³æ—¶ä½¿ç”¨ï¼š<code>@Async</code>æ³¨è§£çš„åœºæ™¯ï¼Œä¼šé€šè¿‡<code>AOP</code>è‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p><p>æˆ‘é‚£ä½åŒäº‹çš„é—®é¢˜ä¹Ÿæ˜¯è¿™ç§æƒ…å†µã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Service</span><br>publicclass TestService1 &#123;<br><br>    <span class="hljs-variable">@Autowired</span><br>    private TestService2 testService2;<br><br>    <span class="hljs-variable">@Async</span><br>    public void test1() &#123;<br>    &#125;<br>&#125;<br><span class="hljs-variable">@Service</span><br>publicclass TestService2 &#123;<br><br>    <span class="hljs-variable">@Autowired</span><br>    private TestService1 testService1;<br><br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">test2</span>() &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»å‰é¢å¾—çŸ¥ç¨‹åºå¯åŠ¨ä¼šæŠ¥é”™ï¼Œå‡ºç°äº†å¾ªç¯ä¾èµ–ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean <span class="hljs-keyword">with</span> name <span class="hljs-string">&#x27;testService1&#x27;</span>: Bean <span class="hljs-keyword">with</span> name <span class="hljs-string">&#x27;testService1&#x27;</span> has been injected <span class="hljs-keyword">into</span> other beans [testService2] <span class="hljs-keyword">in</span> its raw <span class="hljs-built_in">version</span> <span class="hljs-keyword">as</span> part <span class="hljs-keyword">of</span> <span class="hljs-keyword">a</span> circular reference, but has eventually been wrapped. This means that said other beans <span class="hljs-built_in">do</span> <span class="hljs-keyword">not</span> use <span class="hljs-keyword">the</span> final <span class="hljs-built_in">version</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> bean. This is often <span class="hljs-keyword">the</span> <span class="hljs-built_in">result</span> <span class="hljs-keyword">of</span> over-eager type matching - consider <span class="hljs-keyword">using</span> <span class="hljs-string">&#x27;getBeanNamesOfType&#x27;</span> <span class="hljs-keyword">with</span> <span class="hljs-keyword">the</span> <span class="hljs-string">&#x27;allowEagerInit&#x27;</span> flag turned off, <span class="hljs-keyword">for</span> example.<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¼šå¾ªç¯ä¾èµ–å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå°±åœ¨ä¸‹é¢è¿™å¼ å›¾ä¸­ï¼š</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERkdMN0lJRUJKVktmQUg2cm14WTR4MmZwQmlhN3pxYXBXMVE4WkY2MDE2NjFJcTJOSXdIWWpyUnY2NFRHbnVRWnk4eUYzaEIwOFJMTWcvNjQw?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/HUe73gSZCbt4hRz.png" alt="img"></a></p><p>è¯´ç™½äº†ï¼Œbeanåˆå§‹åŒ–å®Œæˆä¹‹åï¼Œåé¢è¿˜æœ‰ä¸€æ­¥å»æ£€æŸ¥ï¼šç¬¬äºŒçº§ç¼“å­˜ å’Œ åŸå§‹å¯¹è±¡ æ˜¯å¦ç›¸ç­‰ã€‚ç”±äºå®ƒå¯¹å‰é¢æµç¨‹æ¥è¯´æ— å…³ç´§è¦ï¼Œæ‰€ä»¥å‰é¢çš„æµç¨‹å›¾ä¸­çœç•¥äº†ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæ˜¯å…³é”®ç‚¹ï¼Œæˆ‘ä»¬é‡ç‚¹è¯´è¯´ï¼š</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYWxqaWMzQWFueTJpYWdCUVdSUmtvelVoejMzWG9KN1dyT3loUWdkY3FqY0hFZWZpYzlXY2puZTZGQS82NDA?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/M8DhuXCAW3HQe4s.png" alt="img"></a></p><p>é‚£ä½åŒäº‹çš„é—®é¢˜æ­£å¥½æ˜¯èµ°åˆ°è¿™æ®µä»£ç ï¼Œå‘ç°ç¬¬äºŒçº§ç¼“å­˜ å’Œ åŸå§‹å¯¹è±¡ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥æŠ›å‡ºäº†å¾ªç¯ä¾èµ–çš„å¼‚å¸¸ã€‚</p><p>å¦‚æœè¿™æ—¶å€™æŠŠTestService1æ”¹ä¸ªåå­—ï¼Œæ”¹æˆï¼šTestService6ï¼Œå…¶ä»–çš„éƒ½ä¸å˜ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService6</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">TestService2</span> testService2;<br><br>    <span class="hljs-meta">@Async</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">test1</span>(<span class="hljs-params"></span>) &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å†é‡æ–°å¯åŠ¨ä¸€ä¸‹ç¨‹åºï¼Œç¥å¥‡èˆ¬çš„å¥½äº†ã€‚</p><p>whatï¼Ÿ è¿™åˆæ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p><p>è¿™å°±è¦ä»springçš„beanåŠ è½½é¡ºåºè¯´èµ·äº†ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œspringæ˜¯æŒ‰ç…§æ–‡ä»¶å®Œæ•´è·¯å¾„é€’å½’æŸ¥æ‰¾çš„ï¼ŒæŒ‰è·¯å¾„+æ–‡ä»¶åæ’åºï¼Œæ’åœ¨å‰é¢çš„å…ˆåŠ è½½ã€‚æ‰€ä»¥TestService1æ¯”TestService2å…ˆåŠ è½½ï¼Œè€Œæ”¹äº†æ–‡ä»¶åç§°ä¹‹åï¼ŒTestService2æ¯”TestService6å…ˆåŠ è½½ã€‚</p><p>ä¸ºä»€ä¹ˆTestService2æ¯”TestService6å…ˆåŠ è½½å°±æ²¡é—®é¢˜å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆåœ¨ä¸‹é¢è¿™å¼ å›¾ä¸­ï¼š</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERkdMN0lJRUJKVktmQUg2cm14WTR4MnJKUnRYQkFUb3dkeHJCak5NV2pRam9TaWNCOEo2MmI0WW1qdlIweVNtQjRUR0NEVWljZHdqYkZRLzY0MA?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/IbhMRtOSA4gwHY2.png" alt="img"></a></p><p>è¿™ç§æƒ…å†µtestService6ä¸­å…¶å®ç¬¬äºŒçº§ç¼“å­˜æ˜¯ç©ºçš„ï¼Œä¸éœ€è¦è·ŸåŸå§‹å¯¹è±¡åˆ¤æ–­ï¼Œæ‰€ä»¥ä¸ä¼šæŠ›å‡ºå¾ªç¯ä¾èµ–ã€‚</p><h4 id="åœºæ™¯5ï¼šDependsOnå¾ªç¯ä¾èµ–"><a href="#åœºæ™¯5ï¼šDependsOnå¾ªç¯ä¾èµ–" class="headerlink" title="åœºæ™¯5ï¼šDependsOnå¾ªç¯ä¾èµ–"></a>åœºæ™¯5ï¼šDependsOnå¾ªç¯ä¾èµ–</h4><p>è¿˜æœ‰ä¸€ç§æœ‰äº›ç‰¹æ®Šçš„åœºæ™¯ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨å®ä¾‹åŒ–Bean Aä¹‹å‰ï¼Œå…ˆå®ä¾‹åŒ–Bean Bï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨<code>@DependsOn</code>æ³¨è§£ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@DependsOn</span>(value = <span class="hljs-string">&quot;testService2&quot;</span>)<br><span class="hljs-variable">@Service</span><br>publicclass TestService1 &#123;<br><br>    <span class="hljs-variable">@Autowired</span><br>    private TestService2 testService2;<br><br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">test1</span>() &#123;<br>    &#125;<br>&#125;<br><span class="hljs-variable">@DependsOn</span>(value = <span class="hljs-string">&quot;testService1&quot;</span>)<br><span class="hljs-variable">@Service</span><br>publicclass TestService2 &#123;<br><br>    <span class="hljs-variable">@Autowired</span><br>    private TestService1 testService1;<br><br>    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">test2</span>() &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¨‹åºå¯åŠ¨ä¹‹åï¼Œæ‰§è¡Œç»“æœï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Circular <span class="hljs-keyword">depends</span>-<span class="hljs-keyword">on</span> relationship <span class="hljs-keyword">between</span> <span class="hljs-string">&#x27;testService2&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;testService1&#x27;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­æœ¬æ¥å¦‚æœTestService1å’ŒTestService2éƒ½æ²¡æœ‰åŠ <code>@DependsOn</code>æ³¨è§£æ˜¯æ²¡é—®é¢˜çš„ï¼Œåè€ŒåŠ äº†è¿™ä¸ªæ³¨è§£ä¼šå‡ºç°å¾ªç¯ä¾èµ–é—®é¢˜ã€‚</p><p>è¿™åˆæ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p><p>ç­”æ¡ˆåœ¨<code>AbstractBeanFactory</code>ç±»çš„<code>doGetBean</code>æ–¹æ³•çš„è¿™æ®µä»£ç ä¸­ï¼š</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYXRqSmpTeE1rb2gyUnlWQThLRkpSaWFlZHY0aGliam9pY0ttZnlTZGlhRXM3NGRBcG9CaWI3VDRDZGZRLzY0MA?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/lKWkPN2AJ7gfj1B.png" alt="img"></a>å®ƒä¼šæ£€æŸ¥dependsOnçš„å®ä¾‹æœ‰æ²¡æœ‰å¾ªç¯ä¾èµ–ï¼Œå¦‚æœæœ‰å¾ªç¯ä¾èµ–åˆ™æŠ›å¼‚å¸¸ã€‚</p><h4 id="æ€»ä½“ç­–ç•¥ï¼šå‡ºç°å¾ªç¯ä¾èµ–å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#æ€»ä½“ç­–ç•¥ï¼šå‡ºç°å¾ªç¯ä¾èµ–å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="æ€»ä½“ç­–ç•¥ï¼šå‡ºç°å¾ªç¯ä¾èµ–å¦‚ä½•è§£å†³ï¼Ÿ"></a>æ€»ä½“ç­–ç•¥ï¼šå‡ºç°å¾ªç¯ä¾èµ–å¦‚ä½•è§£å†³ï¼Ÿ</h4><p>é¡¹ç›®ä¸­å¦‚æœå‡ºç°å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œè¯´æ˜æ˜¯springé»˜è®¤æ— æ³•è§£å†³çš„å¾ªç¯ä¾èµ–ï¼Œè¦çœ‹é¡¹ç›®çš„æ‰“å°æ—¥å¿—ï¼Œå±äºå“ªç§å¾ªç¯ä¾èµ–ã€‚ç›®å‰åŒ…å«ä¸‹é¢å‡ ç§æƒ…å†µï¼š</p><p><a href="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91TDM3MTI4MW9ERjI0dDNGanJCOFhlYng3V2drQXhkYXNjemxxblJHUmxFM3Ewd1p6WlRlMk9ZZXpUVjI2SU1USks4VzdkZFZpY2VhS0xMak1NMFY5OEEvNjQw?x-oss-process=image/format,png"><img src="https://s2.loli.net/2022/04/26/6fClbvwoiYIDOAN.png" alt="img"></a></p><h5 id="ç”Ÿæˆä»£ç†å¯¹è±¡äº§ç”Ÿçš„å¾ªç¯ä¾èµ–-çš„è§£å†³æ–¹æ¡ˆï¼š"><a href="#ç”Ÿæˆä»£ç†å¯¹è±¡äº§ç”Ÿçš„å¾ªç¯ä¾èµ–-çš„è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="ç”Ÿæˆä»£ç†å¯¹è±¡äº§ç”Ÿçš„å¾ªç¯ä¾èµ– çš„è§£å†³æ–¹æ¡ˆï¼š"></a>ç”Ÿæˆä»£ç†å¯¹è±¡äº§ç”Ÿçš„å¾ªç¯ä¾èµ– çš„è§£å†³æ–¹æ¡ˆï¼š</h5><p>è¿™ç±»å¾ªç¯ä¾èµ–é—®é¢˜è§£å†³æ–¹æ³•å¾ˆå¤šï¼Œä¸»è¦æœ‰ï¼š</p><ol><li>ä½¿ç”¨<code>@Lazy</code>æ³¨è§£ï¼Œå»¶è¿ŸåŠ è½½</li><li>ä½¿ç”¨<code>@DependsOn</code>æ³¨è§£ï¼ŒæŒ‡å®šåŠ è½½å…ˆåå…³ç³»</li><li>ä¿®æ”¹æ–‡ä»¶åç§°ï¼Œæ”¹å˜å¾ªç¯ä¾èµ–ç±»çš„åŠ è½½é¡ºåº</li></ol><h5 id="ä½¿ç”¨-DependsOnäº§ç”Ÿçš„å¾ªç¯ä¾èµ–-çš„è§£å†³æ–¹æ¡ˆï¼š"><a href="#ä½¿ç”¨-DependsOnäº§ç”Ÿçš„å¾ªç¯ä¾èµ–-çš„è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="ä½¿ç”¨@DependsOnäº§ç”Ÿçš„å¾ªç¯ä¾èµ– çš„è§£å†³æ–¹æ¡ˆï¼š"></a>ä½¿ç”¨@DependsOnäº§ç”Ÿçš„å¾ªç¯ä¾èµ– çš„è§£å†³æ–¹æ¡ˆï¼š</h5><p>è¿™ç±»å¾ªç¯ä¾èµ–é—®é¢˜è¦æ‰¾åˆ°<code>@DependsOn</code>æ³¨è§£å¾ªç¯ä¾èµ–çš„åœ°æ–¹ï¼Œè¿«ä½¿å®ƒä¸å¾ªç¯ä¾èµ–å°±å¯ä»¥è§£å†³é—®é¢˜ã€‚</p><h5 id="å¤šä¾‹å¾ªç¯ä¾èµ–-çš„è§£å†³æ–¹æ¡ˆï¼š"><a href="#å¤šä¾‹å¾ªç¯ä¾èµ–-çš„è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="å¤šä¾‹å¾ªç¯ä¾èµ– çš„è§£å†³æ–¹æ¡ˆï¼š"></a>å¤šä¾‹å¾ªç¯ä¾èµ– çš„è§£å†³æ–¹æ¡ˆï¼š</h5><p>è¿™ç±»å¾ªç¯ä¾èµ–é—®é¢˜å¯ä»¥é€šè¿‡æŠŠbeanæ”¹æˆå•ä¾‹çš„è§£å†³ã€‚</p><h5 id="æ„é€ å™¨å¾ªç¯ä¾èµ–-çš„è§£å†³æ–¹æ¡ˆï¼š"><a href="#æ„é€ å™¨å¾ªç¯ä¾èµ–-çš„è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="æ„é€ å™¨å¾ªç¯ä¾èµ– çš„è§£å†³æ–¹æ¡ˆï¼š"></a>æ„é€ å™¨å¾ªç¯ä¾èµ– çš„è§£å†³æ–¹æ¡ˆï¼š</h5><p>è¿™ç±»å¾ªç¯ä¾èµ–é—®é¢˜å¯ä»¥é€šè¿‡ä½¿ç”¨<code>@Lazy</code>æ³¨è§£è§£å†³</p><h4 id="å›ç­”æè¦ï¼š"><a href="#å›ç­”æè¦ï¼š" class="headerlink" title="å›ç­”æè¦ï¼š"></a>å›ç­”æè¦ï¼š</h4><p>æŒ‰ç…§ä¸Šé¢çš„æ–¹å¼å›ç­”ï¼Œ èµ·ç 120åˆ†ã€‚</p><blockquote><p>ä½†æ˜¯ç­”æ¡ˆå¤ªå¤æ‚ï¼Œ å¦‚æœä¸Šé¢çš„ç­”æ¡ˆï¼Œè®°ä¸ä½ï¼Œå°±ç”¨ä¸‹é¢çš„ç­”æ¡ˆå§ï¼Œè‡³å°‘ä¹Ÿæ˜¯100åˆ†ã€‚</p></blockquote><h3 id="é—®é¢˜ï¼š-Springæ˜¯æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ"><a href="#é—®é¢˜ï¼š-Springæ˜¯æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ" class="headerlink" title="é—®é¢˜ï¼š Springæ˜¯æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ"></a>é—®é¢˜ï¼š Springæ˜¯æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ</h3><p>é¦–å…ˆï¼ŒSpring è§£å†³å¾ªç¯ä¾èµ–æœ‰ä¸¤ä¸ªå‰ææ¡ä»¶ï¼š</p><ol><li>ä¸å…¨æ˜¯æ„é€ å™¨æ–¹å¼çš„å¾ªç¯ä¾èµ–</li><li>å¿…é¡»æ˜¯å•ä¾‹</li></ol><p>åŸºäºä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“Beançš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ¬è´¨ä¸Šè§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜å°±æ˜¯ä¸‰çº§ç¼“å­˜ï¼Œé€šè¿‡ä¸‰çº§ç¼“å­˜æå‰æ‹¿åˆ°æœªåˆå§‹åŒ–çš„å¯¹è±¡ã€‚</p><p>ç¬¬ä¸€çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„å¯¹è±¡</p><p>ç¬¬äºŒçº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜å®ä¾‹åŒ–å®Œæˆï¼Œä½†æ˜¯æœªåˆå§‹åŒ–å®Œæˆçš„å¯¹è±¡</p><p>ç¬¬ä¸‰çº§ç¼“å­˜ï¼šç”¨æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼Œæä¾›ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œç”¨äºåˆ›å»ºäºŒçº§ç¼“å­˜ä¸­çš„å¯¹è±¡</p><p><a href="https://img-blog.csdnimg.cn/img_convert/284af8d0e1eb22235df36e03742d937d.png"><img src="https://s2.loli.net/2022/04/26/1rzmBWlG5o9FbXI.jpg" alt="å›¾ç‰‡"></a></p><p>å‡è®¾ä¸€ä¸ªç®€å•çš„å¾ªç¯ä¾èµ–åœºæ™¯ï¼ŒAã€Bäº’ç›¸ä¾èµ–ã€‚</p><p><a href="https://img-blog.csdnimg.cn/img_convert/1d93a76bea9c09330a248b431fa377df.png"><img src="https://img-blog.csdnimg.cn/img_convert/1d93a76bea9c09330a248b431fa377df.png" alt="å›¾ç‰‡"></a></p><p>Aå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼š</p><ol><li>åˆ›å»ºå¯¹è±¡Aï¼Œå®ä¾‹åŒ–çš„æ—¶å€™æŠŠAå¯¹è±¡å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜</li></ol><p><a href="https://img-blog.csdnimg.cn/img_convert/c6449f69e0c43e4d99363bf10480f943.png"><img src="https://img-blog.csdnimg.cn/img_convert/c6449f69e0c43e4d99363bf10480f943.png" alt="å›¾ç‰‡"></a></p><ol><li>Aæ³¨å…¥å±æ€§æ—¶ï¼Œå‘ç°ä¾èµ–Bï¼Œè½¬è€Œå»å®ä¾‹åŒ–B</li><li>åŒæ ·åˆ›å»ºå¯¹è±¡Bï¼Œæ³¨å…¥å±æ€§æ—¶å‘ç°ä¾èµ–Aï¼Œä¸€æ¬¡ä»ä¸€çº§åˆ°ä¸‰çº§ç¼“å­˜æŸ¥è¯¢Aï¼Œä»ä¸‰çº§ç¼“å­˜é€šè¿‡å¯¹è±¡å·¥å‚æ‹¿åˆ°Aï¼ŒæŠŠAæ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒåŒæ—¶åˆ é™¤ä¸‰çº§ç¼“å­˜ä¸­çš„Aï¼Œæ­¤æ—¶ï¼ŒBå·²ç»å®ä¾‹åŒ–å¹¶ä¸”åˆå§‹åŒ–å®Œæˆï¼ŒæŠŠBæ”¾å…¥ä¸€çº§ç¼“å­˜ã€‚</li></ol><p><a href="https://img-blog.csdnimg.cn/img_convert/bbc4051fe3fc4715faaf9f4cdcebc0cf.png"><img src="https://img-blog.csdnimg.cn/img_convert/bbc4051fe3fc4715faaf9f4cdcebc0cf.png" alt="å›¾ç‰‡"></a></p><ol><li>æ¥ç€ç»§ç»­åˆ›å»ºAï¼Œé¡ºåˆ©ä»ä¸€çº§ç¼“å­˜æ‹¿åˆ°å®ä¾‹åŒ–ä¸”åˆå§‹åŒ–å®Œæˆçš„Bå¯¹è±¡ï¼ŒAå¯¹è±¡åˆ›å»ºä¹Ÿå®Œæˆï¼Œåˆ é™¤äºŒçº§ç¼“å­˜ä¸­çš„Aï¼ŒåŒæ—¶æŠŠAæ”¾å…¥ä¸€çº§ç¼“å­˜</li><li>æœ€åï¼Œä¸€çº§ç¼“å­˜ä¸­ä¿å­˜ç€å®ä¾‹åŒ–ã€åˆå§‹åŒ–éƒ½å®Œæˆçš„Aã€Bå¯¹è±¡</li></ol><p><a href="https://img-blog.csdnimg.cn/img_convert/aa0eab11db07cf276a821aa62ce442d3.png"><img src="https://img-blog.csdnimg.cn/img_convert/aa0eab11db07cf276a821aa62ce442d3.png" alt="å›¾ç‰‡"></a></p><p>å› æ­¤ï¼Œç”±äºæŠŠå®ä¾‹åŒ–å’Œåˆå§‹åŒ–çš„æµç¨‹åˆ†å¼€äº†ï¼Œæ‰€ä»¥å¦‚æœéƒ½æ˜¯ç”¨æ„é€ å™¨çš„è¯ï¼Œå°±æ²¡æ³•åˆ†ç¦»è¿™ä¸ªæ“ä½œï¼Œæ‰€ä»¥éƒ½æ˜¯æ„é€ å™¨çš„è¯å°±æ— æ³•è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜äº†ã€‚</p><h3 id="é—®é¢˜-ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ"><a href="#é—®é¢˜-ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ" class="headerlink" title="é—®é¢˜:ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ"></a>é—®é¢˜:ä¸ºä»€ä¹ˆè¦ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ä¸è¡Œå—ï¼Ÿ</h3><p>ä¸å¯ä»¥ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p><p>å› ä¸ºä¸‰çº§ç¼“å­˜ä¸­æ”¾çš„æ˜¯ç”Ÿæˆå…·ä½“å¯¹è±¡çš„åŒ¿åå†…éƒ¨ç±»ï¼Œä»–å¯ä»¥ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ™®é€šçš„å®ä¾‹å¯¹è±¡ã€‚</p><p>ä½¿ç”¨ä¸‰çº§ç¼“å­˜ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯ä¸ç®¡ä»€ä¹ˆæ—¶å€™ä½¿ç”¨çš„éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>å‡è®¾åªæœ‰äºŒçº§ç¼“å­˜çš„æƒ…å†µï¼Œå¾€äºŒçº§ç¼“å­˜ä¸­æ”¾çš„æ˜¾ç¤ºä¸€ä¸ªæ™®é€šçš„Beanå¯¹è±¡ï¼Œ<code>BeanPostProcessor</code>å»ç”Ÿæˆä»£ç†å¯¹è±¡ä¹‹åï¼Œè¦†ç›–æ‰äºŒçº§ç¼“å­˜ä¸­çš„æ™®é€šBeanå¯¹è±¡ï¼Œé‚£ä¹ˆå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½å–åˆ°çš„å¯¹è±¡å°±ä¸ä¸€è‡´äº†ã€‚</p><p><a href="https://img-blog.csdnimg.cn/img_convert/b86c0d9f9e38b3d54c896b2edccd5140.png"><img src="https://img-blog.csdnimg.cn/img_convert/b86c0d9f9e38b3d54c896b2edccd5140.png" alt="å›¾ç‰‡"></a></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="Springæ³¨è§£ï¼ˆ8é¢˜ç›®ï¼‰"><a href="#Springæ³¨è§£ï¼ˆ8é¢˜ç›®ï¼‰" class="headerlink" title="Springæ³¨è§£ï¼ˆ8é¢˜ç›®ï¼‰"></a>Springæ³¨è§£ï¼ˆ8é¢˜ç›®ï¼‰</h2><h3 id="ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­"><a href="#ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­"></a>ä»€ä¹ˆæ˜¯åŸºäºJavaçš„Springæ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­</h3><p>åŸºäºJavaçš„é…ç½®ï¼Œå…è®¸ä½ åœ¨å°‘é‡çš„Javaæ³¨è§£çš„å¸®åŠ©ä¸‹ï¼Œè¿›è¡Œä½ çš„å¤§éƒ¨åˆ†Springé…ç½®è€Œéé€šè¿‡XMLæ–‡ä»¶ã€‚</p><p>ä»¥@Configuration æ³¨è§£ä¸ºä¾‹ï¼Œå®ƒç”¨æ¥æ ‡è®°ç±»å¯ä»¥å½“åšä¸€ä¸ªbeançš„å®šä¹‰ï¼Œè¢«Spring IOCå®¹å™¨ä½¿ç”¨ã€‚</p><p>å¦ä¸€ä¸ªä¾‹å­æ˜¯@Beanæ³¨è§£ï¼Œå®ƒè¡¨ç¤ºæ­¤æ–¹æ³•å°†è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ªbeanæ³¨å†Œè¿›Springåº”ç”¨ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">StudentBean</span> <span class="hljs-title function_">myStudent</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StudentBean</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ"><a href="#æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ" class="headerlink" title="æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ"></a>æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ</h3><p>æ³¨è§£è£…é…åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¼€å¯çš„ï¼Œä¸ºäº†ä½¿ç”¨æ³¨è§£è£…é…ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½® <code>&lt;context:annotation-config/&gt;</code>å…ƒç´ ã€‚</p><h3 id="Component-Controller-Repository-Service-æœ‰ä½•åŒºåˆ«ï¼Ÿ"><a href="#Component-Controller-Repository-Service-æœ‰ä½•åŒºåˆ«ï¼Ÿ" class="headerlink" title="@Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ"></a>@Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ</h3><p>@Componentï¼šè¿™å°† java ç±»æ ‡è®°ä¸º beanã€‚å®ƒæ˜¯ä»»ä½• Spring ç®¡ç†ç»„ä»¶çš„é€šç”¨æ„é€ å‹ã€‚spring çš„ç»„ä»¶æ‰«ææœºåˆ¶ç°åœ¨å¯ä»¥å°†å…¶æ‹¾å–å¹¶å°†å…¶æ‹‰å…¥åº”ç”¨ç¨‹åºç¯å¢ƒä¸­ã€‚</p><p>@Controllerï¼šè¿™å°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring Web MVC æ§åˆ¶å™¨ã€‚æ ‡æœ‰å®ƒçš„ Bean ä¼šè‡ªåŠ¨å¯¼å…¥åˆ° IoC å®¹å™¨ä¸­ã€‚</p><p>@Serviceï¼šæ­¤æ³¨è§£æ˜¯ç»„ä»¶æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸ä¼šå¯¹ @Component æ³¨è§£æä¾›ä»»ä½•å…¶ä»–è¡Œä¸ºã€‚æ‚¨å¯ä»¥åœ¨æœåŠ¡å±‚ç±»ä¸­ä½¿ç”¨ @Service è€Œä¸æ˜¯ @Componentï¼Œå› ä¸ºå®ƒä»¥æ›´å¥½çš„æ–¹å¼æŒ‡å®šäº†æ„å›¾ã€‚</p><p>@Repositoryï¼šè¿™ä¸ªæ³¨è§£æ˜¯å…·æœ‰ç±»ä¼¼ç”¨é€”å’ŒåŠŸèƒ½çš„ @Component æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸º DAO æä¾›äº†é¢å¤–çš„å¥½å¤„ã€‚å®ƒå°† DAO å¯¼å…¥ IoC å®¹å™¨ï¼Œå¹¶ä½¿æœªç»æ£€æŸ¥çš„å¼‚å¸¸æœ‰èµ„æ ¼è½¬æ¢ä¸º Spring DataAccessExceptionã€‚</p><h3 id="Required-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨"><a href="#Required-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="@Required æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨"></a>@Required æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨</h3><p>è¿™ä¸ªæ³¨è§£è¡¨æ˜beançš„å±æ€§å¿…é¡»åœ¨é…ç½®çš„æ—¶å€™è®¾ç½®ï¼Œé€šè¿‡ä¸€ä¸ªbeanå®šä¹‰çš„æ˜¾å¼çš„å±æ€§å€¼æˆ–é€šè¿‡è‡ªåŠ¨è£…é…ï¼Œè‹¥@Requiredæ³¨è§£çš„beanå±æ€§æœªè¢«è®¾ç½®ï¼Œå®¹å™¨å°†æŠ›å‡ºBeanInitializationExceptionã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;<br>    <span class="hljs-meta">@Required</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>)&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Autowired-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨"><a href="#Autowired-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="@Autowired æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨"></a>@Autowired æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨</h3><p>@Autowiredé»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹è£…é…æ³¨å…¥çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼ˆå¯ä»¥è®¾ç½®å®ƒrequiredå±æ€§ä¸ºfalseï¼‰ã€‚@Autowired æ³¨è§£æä¾›äº†æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼ŒåŒ…æ‹¬åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•å®Œæˆè‡ªåŠ¨è£…é…ã€‚å®ƒçš„ç”¨æ³•å’Œ@Requiredä¸€æ ·ï¼Œä¿®é¥°setteræ–¹æ³•ã€æ„é€ å™¨ã€å±æ€§æˆ–è€…å…·æœ‰ä»»æ„åç§°å’Œ&#x2F;æˆ–å¤šä¸ªå‚æ•°çš„PNæ–¹æ³•ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Autowiredå’Œ-Resourceä¹‹é—´çš„åŒºåˆ«"><a href="#Autowiredå’Œ-Resourceä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«"></a>@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«</h3><p>@Autowiredå¯ç”¨äºï¼šæ„é€ å‡½æ•°ã€æˆå‘˜å˜é‡ã€Setteræ–¹æ³•</p><p>@Autowiredå’Œ@Resourceä¹‹é—´çš„åŒºåˆ«</p><ul><li>@Autowiredé»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹è£…é…æ³¨å…¥çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼ˆå¯ä»¥è®¾ç½®å®ƒrequiredå±æ€§ä¸ºfalseï¼‰ã€‚</li><li>@Resourceé»˜è®¤æ˜¯æŒ‰ç…§åç§°æ¥è£…é…æ³¨å…¥çš„ï¼Œåªæœ‰å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ‰ä¼šæŒ‰ç…§ç±»å‹æ¥è£…é…æ³¨å…¥ã€‚</li></ul><h3 id="Qualifier-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨"><a href="#Qualifier-æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="@Qualifier æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨"></a>@Qualifier æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨</h3><p>å½“æ‚¨åˆ›å»ºå¤šä¸ªç›¸åŒç±»å‹çš„ bean å¹¶å¸Œæœ›ä»…ä½¿ç”¨å±æ€§è£…é…å…¶ä¸­ä¸€ä¸ª bean æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨@Qualifier æ³¨è§£å’Œ @Autowired é€šè¿‡æŒ‡å®šåº”è¯¥è£…é…å“ªä¸ªç¡®åˆ‡çš„ bean æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚</p><h3 id="RequestMapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#RequestMapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="@RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>@RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>@RequestMapping æ³¨è§£ç”¨äºå°†ç‰¹å®š HTTP è¯·æ±‚æ–¹æ³•æ˜ å°„åˆ°å°†å¤„ç†ç›¸åº”è¯·æ±‚çš„æ§åˆ¶å™¨ä¸­çš„ç‰¹å®šç±»&#x2F;æ–¹æ³•ã€‚æ­¤æ³¨é‡Šå¯åº”ç”¨äºä¸¤ä¸ªçº§åˆ«ï¼š</p><ul><li>ç±»çº§åˆ«ï¼šæ˜ å°„è¯·æ±‚çš„ URL</li><li>æ–¹æ³•çº§åˆ«ï¼šæ˜ å°„ URL ä»¥åŠ HTTP è¯·æ±‚æ–¹æ³•</li></ul><h2 id="Springæ•°æ®è®¿é—®ï¼ˆ14ï¼‰"><a href="#Springæ•°æ®è®¿é—®ï¼ˆ14ï¼‰" class="headerlink" title="Springæ•°æ®è®¿é—®ï¼ˆ14ï¼‰"></a>Springæ•°æ®è®¿é—®ï¼ˆ14ï¼‰</h2><h3 id="è§£é‡Šå¯¹è±¡-x2F-å…³ç³»æ˜ å°„é›†æˆæ¨¡å—"><a href="#è§£é‡Šå¯¹è±¡-x2F-å…³ç³»æ˜ å°„é›†æˆæ¨¡å—" class="headerlink" title="è§£é‡Šå¯¹è±¡&#x2F;å…³ç³»æ˜ å°„é›†æˆæ¨¡å—"></a>è§£é‡Šå¯¹è±¡&#x2F;å…³ç³»æ˜ å°„é›†æˆæ¨¡å—</h3><p>Spring é€šè¿‡æä¾›ORMæ¨¡å—ï¼Œæ”¯æŒæˆ‘ä»¬åœ¨ç›´æ¥JDBCä¹‹ä¸Šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡&#x2F;å…³ç³»æ˜ å°„æ˜ å°„(ORM)å·¥å…·ï¼ŒSpring æ”¯æŒé›†æˆä¸»æµçš„ORMæ¡†æ¶ï¼Œå¦‚Hiberateï¼ŒJDOå’Œ iBATISï¼ŒJPAï¼ŒTopLinkï¼ŒJDOï¼ŒOJB ã€‚Springçš„äº‹åŠ¡ç®¡ç†åŒæ ·æ”¯æŒä»¥ä¸Šæ‰€æœ‰ORMæ¡†æ¶åŠJDBCã€‚</p><h3 id="åœ¨Springæ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨JDBCï¼Ÿ"><a href="#åœ¨Springæ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨JDBCï¼Ÿ" class="headerlink" title="åœ¨Springæ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨JDBCï¼Ÿ"></a>åœ¨Springæ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨JDBCï¼Ÿ</h3><p>ä½¿ç”¨Spring JDBC æ¡†æ¶ï¼Œèµ„æºç®¡ç†å’Œé”™è¯¯å¤„ç†çš„ä»£ä»·éƒ½ä¼šè¢«å‡è½»ã€‚æ‰€ä»¥å¼€å‘è€…åªéœ€å†™statements å’Œ queriesä»æ•°æ®å­˜å–æ•°æ®ï¼ŒJDBCä¹Ÿå¯ä»¥åœ¨Springæ¡†æ¶æä¾›çš„æ¨¡æ¿ç±»çš„å¸®åŠ©ä¸‹æ›´æœ‰æ•ˆåœ°è¢«ä½¿ç”¨ï¼Œè¿™ä¸ªæ¨¡æ¿å«JdbcTemplate</p><h3 id="è§£é‡ŠJDBCæŠ½è±¡å’ŒDAOæ¨¡å—"><a href="#è§£é‡ŠJDBCæŠ½è±¡å’ŒDAOæ¨¡å—" class="headerlink" title="è§£é‡ŠJDBCæŠ½è±¡å’ŒDAOæ¨¡å—"></a>è§£é‡ŠJDBCæŠ½è±¡å’ŒDAOæ¨¡å—</h3><p>é€šè¿‡ä½¿ç”¨JDBCæŠ½è±¡å’ŒDAOæ¨¡å—ï¼Œä¿è¯æ•°æ®åº“ä»£ç çš„ç®€æ´ï¼Œå¹¶èƒ½é¿å…æ•°æ®åº“èµ„æºé”™è¯¯å…³é—­å¯¼è‡´çš„é—®é¢˜ï¼Œå®ƒåœ¨å„ç§ä¸åŒçš„æ•°æ®åº“çš„é”™è¯¯ä¿¡æ¯ä¹‹ä¸Šï¼Œæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å¼‚å¸¸è®¿é—®å±‚ã€‚å®ƒè¿˜åˆ©ç”¨Springçš„AOP æ¨¡å—ç»™Springåº”ç”¨ä¸­çš„å¯¹è±¡æä¾›äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚</p><h3 id="spring-DAO-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#spring-DAO-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="spring DAO æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>spring DAO æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>Spring DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰ ä½¿å¾— JDBCï¼ŒHibernate æˆ– JDO è¿™æ ·çš„æ•°æ®è®¿é—®æŠ€æœ¯æ›´å®¹æ˜“ä»¥ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼å·¥ä½œã€‚è¿™ä½¿å¾—ç”¨æˆ·å®¹æ˜“åœ¨æŒä¹…æ€§æŠ€æœ¯ä¹‹é—´åˆ‡æ¢ã€‚å®ƒè¿˜å…è®¸æ‚¨åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œæ— éœ€è€ƒè™‘æ•è·æ¯ç§æŠ€æœ¯ä¸åŒçš„å¼‚å¸¸ã€‚</p><h3 id="spring-JDBC-API-ä¸­å­˜åœ¨å“ªäº›ç±»ï¼Ÿ"><a href="#spring-JDBC-API-ä¸­å­˜åœ¨å“ªäº›ç±»ï¼Ÿ" class="headerlink" title="spring JDBC API ä¸­å­˜åœ¨å“ªäº›ç±»ï¼Ÿ"></a>spring JDBC API ä¸­å­˜åœ¨å“ªäº›ç±»ï¼Ÿ</h3><p>JdbcTemplate</p><p>SimpleJdbcTemplate</p><p>NamedParameterJdbcTemplate</p><p>SimpleJdbcInsert</p><p>SimpleJdbcCall</p><h3 id="JdbcTemplateæ˜¯ä»€ä¹ˆ"><a href="#JdbcTemplateæ˜¯ä»€ä¹ˆ" class="headerlink" title="JdbcTemplateæ˜¯ä»€ä¹ˆ"></a>JdbcTemplateæ˜¯ä»€ä¹ˆ</h3><p>JdbcTemplate ç±»æä¾›äº†å¾ˆå¤šä¾¿åˆ©çš„æ–¹æ³•è§£å†³è¯¸å¦‚æŠŠæ•°æ®åº“æ•°æ®è½¬å˜æˆåŸºæœ¬æ•°æ®ç±»å‹æˆ–å¯¹è±¡ï¼Œæ‰§è¡Œå†™å¥½çš„æˆ–å¯è°ƒç”¨çš„æ•°æ®åº“æ“ä½œè¯­å¥ï¼Œæä¾›è‡ªå®šä¹‰çš„æ•°æ®é”™è¯¯å¤„ç†ã€‚</p><h3 id="ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿä½¿ç”¨-Spring-è®¿é—®-Hibernate-çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"><a href="#ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿä½¿ç”¨-Spring-è®¿é—®-Hibernate-çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿä½¿ç”¨ Spring è®¿é—® Hibernate çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ"></a>ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿä½¿ç”¨ Spring è®¿é—® Hibernate çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</h3><p>åœ¨Springä¸­æœ‰ä¸¤ç§æ–¹å¼è®¿é—®Hibernateï¼š</p><ul><li>ä½¿ç”¨ Hibernate æ¨¡æ¿å’Œå›è°ƒè¿›è¡Œæ§åˆ¶åè½¬</li><li>æ‰©å±• HibernateDAOSupport å¹¶åº”ç”¨ AOP æ‹¦æˆªå™¨èŠ‚ç‚¹</li></ul><h3 id="å¦‚ä½•é€šè¿‡HibernateDaoSupportå°†Springå’ŒHibernateç»“åˆèµ·æ¥ï¼Ÿ"><a href="#å¦‚ä½•é€šè¿‡HibernateDaoSupportå°†Springå’ŒHibernateç»“åˆèµ·æ¥ï¼Ÿ" class="headerlink" title="å¦‚ä½•é€šè¿‡HibernateDaoSupportå°†Springå’ŒHibernateç»“åˆèµ·æ¥ï¼Ÿ"></a>å¦‚ä½•é€šè¿‡HibernateDaoSupportå°†Springå’ŒHibernateç»“åˆèµ·æ¥ï¼Ÿ</h3><p>ç”¨Springçš„ SessionFactory è°ƒç”¨ LocalSessionFactoryã€‚é›†æˆè¿‡ç¨‹åˆ†ä¸‰æ­¥ï¼š</p><ul><li>é…ç½®the Hibernate SessionFactory</li><li>ç»§æ‰¿HibernateDaoSupportå®ç°ä¸€ä¸ªDAO</li><li>åœ¨AOPæ”¯æŒçš„äº‹åŠ¡ä¸­è£…é…</li></ul><h3 id="Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Œ-spring-äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Œ-spring-äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Œ spring äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>Springæ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Œ spring äº‹åŠ¡å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h3><p>Springæ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š</p><p><strong>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†</strong>ï¼šè¿™æ„å‘³ä½ é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œç»™ä½ å¸¦æ¥æå¤§çš„çµæ´»æ€§ï¼Œä½†æ˜¯éš¾ç»´æŠ¤ã€‚</p><p><strong>å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong>ï¼šè¿™æ„å‘³ç€ä½ å¯ä»¥å°†ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†åˆ†ç¦»ï¼Œä½ åªéœ€ç”¨æ³¨è§£å’ŒXMLé…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚</p><h3 id="Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†"><a href="#Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†" class="headerlink" title="Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†"></a>Springäº‹åŠ¡çš„å®ç°æ–¹å¼å’Œå®ç°åŸç†</h3><p>Springäº‹åŠ¡çš„æœ¬è´¨å…¶å®å°±æ˜¯æ•°æ®åº“å¯¹äº‹åŠ¡çš„æ”¯æŒï¼Œæ²¡æœ‰æ•°æ®åº“çš„äº‹åŠ¡æ”¯æŒï¼Œspringæ˜¯æ— æ³•æä¾›äº‹åŠ¡åŠŸèƒ½çš„ã€‚çœŸæ­£çš„æ•°æ®åº“å±‚çš„äº‹åŠ¡æäº¤å’Œå›æ»šæ˜¯é€šè¿‡binlogæˆ–è€…redo logå®ç°çš„ã€‚</p><h3 id="è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º"><a href="#è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º" class="headerlink" title="è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º"></a>è¯´ä¸€ä¸‹Springçš„äº‹åŠ¡ä¼ æ’­è¡Œä¸º</h3><p>springäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºè¯´çš„æ˜¯ï¼Œå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œspringå¦‚ä½•å¤„ç†è¿™äº›äº‹åŠ¡çš„è¡Œä¸ºã€‚</p><blockquote><p>â‘  PROPAGATION_REQUIREDï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œè¯¥è®¾ç½®æ˜¯æœ€å¸¸ç”¨çš„è®¾ç½®ã€‚</p><p>â‘¡ PROPAGATION_SUPPORTSï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ‰§è¡Œã€‚</p><p>â‘¢ PROPAGATION_MANDATORYï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>â‘£ PROPAGATION_REQUIRES_NEWï¼šåˆ›å»ºæ–°äº‹åŠ¡ï¼Œæ— è®ºå½“å‰å­˜ä¸å­˜åœ¨äº‹åŠ¡ï¼Œéƒ½åˆ›å»ºæ–°äº‹åŠ¡ã€‚</p><p>â‘¤ PROPAGATION_NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</p><p>â‘¥ PROPAGATION_NEVERï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>â‘¦ PROPAGATION_NESTEDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŒ‰REQUIREDå±æ€§æ‰§è¡Œã€‚</p></blockquote><h3 id="è¯´ä¸€ä¸‹-spring-çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ"><a href="#è¯´ä¸€ä¸‹-spring-çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ" class="headerlink" title="è¯´ä¸€ä¸‹ spring çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ"></a>è¯´ä¸€ä¸‹ spring çš„äº‹åŠ¡éš”ç¦»ï¼Ÿ</h3><p>spring æœ‰äº”å¤§éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤å€¼ä¸º ISOLATION_DEFAULTï¼ˆä½¿ç”¨æ•°æ®åº“çš„è®¾ç½®ï¼‰ï¼Œå…¶ä»–å››ä¸ªéš”ç¦»çº§åˆ«å’Œæ•°æ®åº“çš„éš”ç¦»çº§åˆ«ä¸€è‡´ï¼š</p><ol><li>ISOLATION_DEFAULTï¼šç”¨åº•å±‚æ•°æ®åº“çš„è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œæ•°æ®åº“è®¾ç½®çš„æ˜¯ä»€ä¹ˆæˆ‘å°±ç”¨ä»€ä¹ˆï¼›</li><li>ISOLATION_READ_UNCOMMITTEDï¼šæœªæäº¤è¯»ï¼Œæœ€ä½éš”ç¦»çº§åˆ«ã€äº‹åŠ¡æœªæäº¤å‰ï¼Œå°±å¯è¢«å…¶ä»–äº‹åŠ¡è¯»å–ï¼ˆä¼šå‡ºç°å¹»è¯»ã€è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼‰ï¼›</li><li>ISOLATION_READ_COMMITTEDï¼šæäº¤è¯»ï¼Œä¸€ä¸ªäº‹åŠ¡æäº¤åæ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡è¯»å–åˆ°ï¼ˆä¼šé€ æˆå¹»è¯»ã€ä¸å¯é‡å¤è¯»ï¼‰ï¼ŒSQL server çš„é»˜è®¤çº§åˆ«ï¼›</li><li>ISOLATION_REPEATABLE_READï¼šå¯é‡å¤è¯»ï¼Œä¿è¯å¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå…¶å€¼éƒ½å’Œäº‹åŠ¡å¼€å§‹æ—¶å€™çš„å†…å®¹æ˜¯ä¸€è‡´ï¼Œç¦æ­¢è¯»å–åˆ°åˆ«çš„äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼ˆä¼šé€ æˆå¹»è¯»ï¼‰ï¼ŒMySQL çš„é»˜è®¤çº§åˆ«ï¼›</li><li>ISOLATION_SERIALIZABLEï¼šåºåˆ—åŒ–ï¼Œä»£ä»·æœ€é«˜æœ€å¯é çš„éš”ç¦»çº§åˆ«ï¼Œè¯¥éš”ç¦»çº§åˆ«èƒ½é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚</li></ol><p><strong>è„è¯»</strong> ï¼šè¡¨ç¤ºä¸€ä¸ªäº‹åŠ¡èƒ½å¤Ÿè¯»å–å¦ä¸€ä¸ªäº‹åŠ¡ä¸­è¿˜æœªæäº¤çš„æ•°æ®ã€‚æ¯”å¦‚ï¼ŒæŸä¸ªäº‹åŠ¡å°è¯•æ’å…¥è®°å½• Aï¼Œæ­¤æ—¶è¯¥äº‹åŠ¡è¿˜æœªæäº¤ï¼Œç„¶åå¦ä¸€ä¸ªäº‹åŠ¡å°è¯•è¯»å–åˆ°äº†è®°å½• Aã€‚</p><p><strong>ä¸å¯é‡å¤è¯»</strong> ï¼šæ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ï¼Œå¤šæ¬¡è¯»åŒä¸€æ•°æ®ã€‚</p><p><strong>å¹»è¯»</strong> ï¼šæŒ‡åŒä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡æŸ¥è¯¢è¿”å›çš„ç»“æœé›†ä¸ä¸€æ ·ã€‚æ¯”å¦‚åŒä¸€ä¸ªäº‹åŠ¡ A ç¬¬ä¸€æ¬¡æŸ¥è¯¢æ—¶å€™æœ‰ n æ¡è®°å½•ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡åŒç­‰æ¡ä»¶ä¸‹æŸ¥è¯¢å´æœ‰ n+1 æ¡è®°å½•ï¼Œè¿™å°±å¥½åƒäº§ç”Ÿäº†å¹»è§‰ã€‚å‘ç”Ÿå¹»è¯»çš„åŸå› ä¹Ÿæ˜¯å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ–°å¢æˆ–è€…åˆ é™¤æˆ–è€…ä¿®æ”¹äº†ç¬¬ä¸€ä¸ªäº‹åŠ¡ç»“æœé›†é‡Œé¢çš„æ•°æ®ï¼ŒåŒä¸€ä¸ªè®°å½•çš„æ•°æ®å†…å®¹è¢«ä¿®æ”¹äº†ï¼Œæ‰€æœ‰æ•°æ®è¡Œçš„è®°å½•å°±å˜å¤šæˆ–è€…å˜å°‘äº†ã€‚</p><h3 id="Springæ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"><a href="#Springæ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="Springæ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"></a>Springæ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h3><ul><li>ä¸ºä¸åŒçš„äº‹åŠ¡API å¦‚ JTAï¼ŒJDBCï¼ŒHibernateï¼ŒJPA å’ŒJDOï¼Œæä¾›ä¸€ä¸ªä¸å˜çš„ç¼–ç¨‹æ¨¡å¼ã€‚</li><li>ä¸ºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æä¾›äº†ä¸€å¥—ç®€å•çš„APIè€Œä¸æ˜¯ä¸€äº›å¤æ‚çš„äº‹åŠ¡API</li><li>æ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚</li><li>å’ŒSpringå„ç§æ•°æ®è®¿é—®æŠ½è±¡å±‚å¾ˆå¥½å¾—é›†æˆã€‚</li></ul><h3 id="ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"><a href="#ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ" class="headerlink" title="ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"></a>ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ</h3><p>å¤§å¤šæ•°Springæ¡†æ¶çš„ç”¨æˆ·é€‰æ‹©å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œå› ä¸ºå®ƒå¯¹åº”ç”¨ä»£ç çš„å½±å“æœ€å°ï¼Œå› æ­¤æ›´ç¬¦åˆä¸€ä¸ªæ— ä¾µå…¥çš„è½»é‡çº§å®¹å™¨çš„æ€æƒ³ã€‚å£°æ˜å¼äº‹åŠ¡ç®¡ç†è¦ä¼˜äºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œè™½ç„¶æ¯”ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ˆè¿™ç§æ–¹å¼å…è®¸ä½ é€šè¿‡ä»£ç æ§åˆ¶äº‹åŠ¡ï¼‰å°‘äº†ä¸€ç‚¹çµæ´»æ€§ã€‚å”¯ä¸€ä¸è¶³åœ°æ–¹æ˜¯ï¼Œæœ€ç»†ç²’åº¦åªèƒ½ä½œç”¨åˆ°æ–¹æ³•çº§åˆ«ï¼Œæ— æ³•åšåˆ°åƒç¼–ç¨‹å¼äº‹åŠ¡é‚£æ ·å¯ä»¥ä½œç”¨åˆ°ä»£ç å—çº§åˆ«ã€‚</p><h2 id="Springé¢å‘åˆ‡é¢ç¼–ç¨‹-AOP-ï¼ˆ13ï¼‰"><a href="#Springé¢å‘åˆ‡é¢ç¼–ç¨‹-AOP-ï¼ˆ13ï¼‰" class="headerlink" title="Springé¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)ï¼ˆ13ï¼‰"></a>Springé¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)ï¼ˆ13ï¼‰</h2><h3 id="ä»€ä¹ˆæ˜¯AOP"><a href="#ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="ä»€ä¹ˆæ˜¯AOP"></a>ä»€ä¹ˆæ˜¯AOP</h3><p>OOP(Object-Oriented Programming)é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶é€‚ç”¨äºå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚</p><p>AOP(Aspect-Oriented Programming)ï¼Œä¸€èˆ¬ç§°ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä½œä¸ºé¢å‘å¯¹è±¡çš„ä¸€ç§è¡¥å……ï¼Œç”¨äºå°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œä½†å´å¯¹å¤šä¸ªå¯¹è±¡äº§ç”Ÿå½±å“çš„å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—è¢«å‘½åä¸ºâ€œåˆ‡é¢â€ï¼ˆAspectï¼‰ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½äº†æ¨¡å—é—´çš„è€¦åˆåº¦ï¼ŒåŒæ—¶æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚å¯ç”¨äºæƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹åŠ¡å¤„ç†ç­‰ã€‚</p><h3 id="Spring-AOP-and-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP-æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ"><a href="#Spring-AOP-and-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP-æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ"></a>Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸAOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h3><p>AOPå®ç°çš„å…³é”®åœ¨äº ä»£ç†æ¨¡å¼ï¼ŒAOPä»£ç†ä¸»è¦åˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ã€‚é™æ€ä»£ç†çš„ä»£è¡¨ä¸ºAspectJï¼›åŠ¨æ€ä»£ç†åˆ™ä»¥Spring AOPä¸ºä»£è¡¨ã€‚</p><p>ï¼ˆ1ï¼‰AspectJæ˜¯é™æ€ä»£ç†çš„å¢å¼ºï¼Œæ‰€è°“é™æ€ä»£ç†ï¼Œå°±æ˜¯AOPæ¡†æ¶ä¼šåœ¨ç¼–è¯‘é˜¶æ®µç”ŸæˆAOPä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºç¼–è¯‘æ—¶å¢å¼ºï¼Œä»–ä¼šåœ¨ç¼–è¯‘é˜¶æ®µå°†AspectJ(åˆ‡é¢)ç»‡å…¥åˆ°Javaå­—èŠ‚ç ä¸­ï¼Œè¿è¡Œçš„æ—¶å€™å°±æ˜¯å¢å¼ºä¹‹åçš„AOPå¯¹è±¡ã€‚</p><p>ï¼ˆ2ï¼‰Spring AOPä½¿ç”¨çš„åŠ¨æ€ä»£ç†ï¼Œæ‰€è°“çš„åŠ¨æ€ä»£ç†å°±æ˜¯è¯´AOPæ¡†æ¶ä¸ä¼šå»ä¿®æ”¹å­—èŠ‚ç ï¼Œè€Œæ˜¯æ¯æ¬¡è¿è¡Œæ—¶åœ¨å†…å­˜ä¸­ä¸´æ—¶ä¸ºæ–¹æ³•ç”Ÿæˆä¸€ä¸ªAOPå¯¹è±¡ï¼Œè¿™ä¸ªAOPå¯¹è±¡åŒ…å«äº†ç›®æ ‡å¯¹è±¡çš„å…¨éƒ¨æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç‰¹å®šçš„åˆ‡ç‚¹åšäº†å¢å¼ºå¤„ç†ï¼Œå¹¶å›è°ƒåŸå¯¹è±¡çš„æ–¹æ³•ã€‚</p><h3 id="JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«"><a href="#JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«" class="headerlink" title="JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«"></a>JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†çš„åŒºåˆ«</h3><p>Spring AOPä¸­çš„åŠ¨æ€ä»£ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼ŒJDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†ï¼š</p><ul><li>JDKåŠ¨æ€ä»£ç†åªæä¾›æ¥å£çš„ä»£ç†ï¼Œä¸æ”¯æŒç±»çš„ä»£ç†ã€‚æ ¸å¿ƒInvocationHandleræ¥å£å’ŒProxyç±»ï¼ŒInvocationHandler é€šè¿‡invoke()æ–¹æ³•åå°„æ¥è°ƒç”¨ç›®æ ‡ç±»ä¸­çš„ä»£ç ï¼ŒåŠ¨æ€åœ°å°†æ¨ªåˆ‡é€»è¾‘å’Œä¸šåŠ¡ç¼–ç»‡åœ¨ä¸€èµ·ï¼›æ¥ç€ï¼ŒProxyåˆ©ç”¨ InvocationHandleråŠ¨æ€åˆ›å»ºä¸€ä¸ªç¬¦åˆæŸä¸€æ¥å£çš„çš„å®ä¾‹, ç”Ÿæˆç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ã€‚</li><li>å¦‚æœä»£ç†ç±»æ²¡æœ‰å®ç° InvocationHandler æ¥å£ï¼Œé‚£ä¹ˆSpring AOPä¼šé€‰æ‹©ä½¿ç”¨CGLIBæ¥åŠ¨æ€ä»£ç†ç›®æ ‡ç±»ã€‚CGLIBï¼ˆCode Generation Libraryï¼‰ï¼Œæ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆçš„ç±»åº“ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„ç”ŸæˆæŒ‡å®šç±»çš„ä¸€ä¸ªå­ç±»å¯¹è±¡ï¼Œå¹¶è¦†ç›–å…¶ä¸­ç‰¹å®šæ–¹æ³•å¹¶æ·»åŠ å¢å¼ºä»£ç ï¼Œä»è€Œå®ç°AOPã€‚CGLIBæ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼åšçš„åŠ¨æ€ä»£ç†ï¼Œå› æ­¤å¦‚æœæŸä¸ªç±»è¢«æ ‡è®°ä¸ºfinalï¼Œé‚£ä¹ˆå®ƒæ˜¯æ— æ³•ä½¿ç”¨CGLIBåšåŠ¨æ€ä»£ç†çš„ã€‚</li></ul><p>é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†åŒºåˆ«åœ¨äºç”ŸæˆAOPä»£ç†å¯¹è±¡çš„æ—¶æœºä¸åŒï¼Œç›¸å¯¹æ¥è¯´AspectJçš„é™æ€ä»£ç†æ–¹å¼å…·æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œä½†æ˜¯AspectJéœ€è¦ç‰¹å®šçš„ç¼–è¯‘å™¨è¿›è¡Œå¤„ç†ï¼Œè€ŒSpring AOPåˆ™æ— éœ€ç‰¹å®šçš„ç¼–è¯‘å™¨å¤„ç†ã€‚</p><blockquote><p>InvocationHandler çš„ invoke(Object proxy,Method method,Object[] args)ï¼šproxyæ˜¯æœ€ç»ˆç”Ÿæˆçš„ä»£ç†å®ä¾‹; method æ˜¯è¢«ä»£ç†ç›®æ ‡å®ä¾‹çš„æŸä¸ªå…·ä½“æ–¹æ³•; args æ˜¯è¢«ä»£ç†ç›®æ ‡å®ä¾‹æŸä¸ªæ–¹æ³•çš„å…·ä½“å…¥å‚, åœ¨æ–¹æ³•åå°„è°ƒç”¨æ—¶ä½¿ç”¨ã€‚</p></blockquote><h3 id="å¦‚ä½•ç†è§£-Spring-ä¸­çš„ä»£ç†ï¼Ÿ"><a href="#å¦‚ä½•ç†è§£-Spring-ä¸­çš„ä»£ç†ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç†è§£ Spring ä¸­çš„ä»£ç†ï¼Ÿ"></a>å¦‚ä½•ç†è§£ Spring ä¸­çš„ä»£ç†ï¼Ÿ</h3><p>å°† Advice åº”ç”¨äºç›®æ ‡å¯¹è±¡ååˆ›å»ºçš„å¯¹è±¡ç§°ä¸ºä»£ç†ã€‚åœ¨å®¢æˆ·ç«¯å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡æ˜¯ç›¸åŒçš„ã€‚</p><p>Advice + Target Object &#x3D; Proxy</p><h3 id="è§£é‡Šä¸€ä¸‹Spring-AOPé‡Œé¢çš„å‡ ä¸ªåè¯"><a href="#è§£é‡Šä¸€ä¸‹Spring-AOPé‡Œé¢çš„å‡ ä¸ªåè¯" class="headerlink" title="è§£é‡Šä¸€ä¸‹Spring AOPé‡Œé¢çš„å‡ ä¸ªåè¯"></a>è§£é‡Šä¸€ä¸‹Spring AOPé‡Œé¢çš„å‡ ä¸ªåè¯</h3><p>ï¼ˆ1ï¼‰åˆ‡é¢ï¼ˆAspectï¼‰ï¼šåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚é€šçŸ¥å’Œåˆ‡ç‚¹å…±åŒå®šä¹‰äº†åˆ‡é¢çš„å…¨éƒ¨å†…å®¹ã€‚ åœ¨Spring AOPä¸­ï¼Œåˆ‡é¢å¯ä»¥ä½¿ç”¨é€šç”¨ç±»ï¼ˆåŸºäºæ¨¡å¼çš„é£æ ¼ï¼‰ æˆ–è€…åœ¨æ™®é€šç±»ä¸­ä»¥ @AspectJ æ³¨è§£æ¥å®ç°ã€‚</p><p>ï¼ˆ2ï¼‰è¿æ¥ç‚¹ï¼ˆJoin pointï¼‰ï¼šæŒ‡æ–¹æ³•ï¼Œåœ¨Spring AOPä¸­ï¼Œä¸€ä¸ªè¿æ¥ç‚¹ æ€»æ˜¯ ä»£è¡¨ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œã€‚ åº”ç”¨å¯èƒ½æœ‰æ•°ä»¥åƒè®¡çš„æ—¶æœºåº”ç”¨é€šçŸ¥ã€‚è¿™äº›æ—¶æœºè¢«ç§°ä¸ºè¿æ¥ç‚¹ã€‚è¿æ¥ç‚¹æ˜¯åœ¨åº”ç”¨æ‰§è¡Œè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ’å…¥åˆ‡é¢çš„ä¸€ä¸ªç‚¹ã€‚è¿™ä¸ªç‚¹å¯ä»¥æ˜¯è°ƒç”¨æ–¹æ³•æ—¶ã€æŠ›å‡ºå¼‚å¸¸æ—¶ã€ç”šè‡³ä¿®æ”¹ä¸€ä¸ªå­—æ®µæ—¶ã€‚åˆ‡é¢ä»£ç å¯ä»¥åˆ©ç”¨è¿™äº›ç‚¹æ’å…¥åˆ°åº”ç”¨çš„æ­£å¸¸æµç¨‹ä¹‹ä¸­ï¼Œå¹¶æ·»åŠ æ–°çš„è¡Œä¸ºã€‚</p><p>ï¼ˆ3ï¼‰é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåœ¨AOPæœ¯è¯­ä¸­ï¼Œåˆ‡é¢çš„å·¥ä½œè¢«ç§°ä¸ºé€šçŸ¥ã€‚</p><p>ï¼ˆ4ï¼‰åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼šåˆ‡ç‚¹çš„å®šä¹‰ä¼šåŒ¹é…é€šçŸ¥æ‰€è¦ç»‡å…¥çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¿æ¥ç‚¹ã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ˜ç¡®çš„ç±»å’Œæ–¹æ³•åç§°ï¼Œæˆ–æ˜¯åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰æ‰€åŒ¹é…çš„ç±»å’Œæ–¹æ³•åç§°æ¥æŒ‡å®šè¿™äº›åˆ‡ç‚¹ã€‚</p><p>ï¼ˆ5ï¼‰å¼•å…¥ï¼ˆIntroductionï¼‰ï¼šå¼•å…¥å…è®¸æˆ‘ä»¬å‘ç°æœ‰ç±»æ·»åŠ æ–°æ–¹æ³•æˆ–å±æ€§ã€‚</p><p>ï¼ˆ6ï¼‰ç›®æ ‡å¯¹è±¡ï¼ˆTarget Objectï¼‰ï¼š è¢«ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ‡é¢ï¼ˆaspectï¼‰æ‰€é€šçŸ¥ï¼ˆadviseï¼‰çš„å¯¹è±¡ã€‚å®ƒé€šå¸¸æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚ä¹Ÿæœ‰äººæŠŠå®ƒå«åš è¢«é€šçŸ¥ï¼ˆadvicedï¼‰ å¯¹è±¡ã€‚ æ—¢ç„¶Spring AOPæ˜¯é€šè¿‡è¿è¡Œæ—¶ä»£ç†å®ç°çš„ï¼Œè¿™ä¸ªå¯¹è±¡æ°¸è¿œæ˜¯ä¸€ä¸ª è¢«ä»£ç†ï¼ˆproxiedï¼‰ å¯¹è±¡ã€‚</p><p>ï¼ˆ7ï¼‰ç»‡å…¥ï¼ˆWeavingï¼‰ï¼šç»‡å…¥æ˜¯æŠŠåˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚åœ¨ç›®æ ‡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸé‡Œæœ‰å¤šå°‘ä¸ªç‚¹å¯ä»¥è¿›è¡Œç»‡å…¥ï¼š</p><ul><li>ç¼–è¯‘æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»ç¼–è¯‘æ—¶è¢«ç»‡å…¥ã€‚AspectJçš„ç»‡å…¥ç¼–è¯‘å™¨æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢çš„ã€‚</li><li>ç±»åŠ è½½æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»åŠ è½½åˆ°JVMæ—¶è¢«ç»‡å…¥ã€‚éœ€è¦ç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œå®ƒå¯ä»¥åœ¨ç›®æ ‡ç±»è¢«å¼•å…¥åº”ç”¨ä¹‹å‰å¢å¼ºè¯¥ç›®æ ‡ç±»çš„å­—èŠ‚ç ã€‚AspectJ5çš„åŠ è½½æ—¶ç»‡å…¥å°±æ”¯æŒä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚</li><li>è¿è¡ŒæœŸï¼šåˆ‡é¢åœ¨åº”ç”¨è¿è¡Œçš„æŸä¸ªæ—¶åˆ»è¢«ç»‡å…¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ç»‡å…¥åˆ‡é¢æ—¶ï¼ŒAOPå®¹å™¨ä¼šä¸ºç›®æ ‡å¯¹è±¡åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚SpringAOPå°±æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚</li></ul><h3 id="Springåœ¨è¿è¡Œæ—¶é€šçŸ¥å¯¹è±¡"><a href="#Springåœ¨è¿è¡Œæ—¶é€šçŸ¥å¯¹è±¡" class="headerlink" title="Springåœ¨è¿è¡Œæ—¶é€šçŸ¥å¯¹è±¡"></a>Springåœ¨è¿è¡Œæ—¶é€šçŸ¥å¯¹è±¡</h3><p>é€šè¿‡åœ¨ä»£ç†ç±»ä¸­åŒ…è£¹åˆ‡é¢ï¼ŒSpringåœ¨è¿è¡ŒæœŸæŠŠåˆ‡é¢ç»‡å…¥åˆ°Springç®¡ç†çš„beanä¸­ã€‚ä»£ç†å°è£…äº†ç›®æ ‡ç±»ï¼Œå¹¶æ‹¦æˆªè¢«é€šçŸ¥æ–¹æ³•çš„è°ƒç”¨ï¼Œå†æŠŠè°ƒç”¨è½¬å‘ç»™çœŸæ­£çš„ç›®æ ‡beanã€‚å½“ä»£ç†æ‹¦æˆªåˆ°æ–¹æ³•è°ƒç”¨æ—¶ï¼Œåœ¨è°ƒç”¨ç›®æ ‡beanæ–¹æ³•ä¹‹å‰ï¼Œä¼šæ‰§è¡Œåˆ‡é¢é€»è¾‘ã€‚</p><p>ç›´åˆ°åº”ç”¨éœ€è¦è¢«ä»£ç†çš„beanæ—¶ï¼ŒSpringæ‰åˆ›å»ºä»£ç†å¯¹è±¡ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯ApplicationContextçš„è¯ï¼Œåœ¨ApplicationContextä»BeanFactoryä¸­åŠ è½½æ‰€æœ‰beançš„æ—¶å€™ï¼ŒSpringæ‰ä¼šåˆ›å»ºè¢«ä»£ç†çš„å¯¹è±¡ã€‚å› ä¸ºSpringè¿è¡Œæ—¶æ‰åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ç‰¹æ®Šçš„ç¼–è¯‘å™¨æ¥ç»‡å…¥SpringAOPçš„åˆ‡é¢ã€‚</p><h3 id="Springåªæ”¯æŒæ–¹æ³•çº§åˆ«çš„è¿æ¥ç‚¹"><a href="#Springåªæ”¯æŒæ–¹æ³•çº§åˆ«çš„è¿æ¥ç‚¹" class="headerlink" title="Springåªæ”¯æŒæ–¹æ³•çº§åˆ«çš„è¿æ¥ç‚¹"></a>Springåªæ”¯æŒæ–¹æ³•çº§åˆ«çš„è¿æ¥ç‚¹</h3><p>å› ä¸ºSpringåŸºäºåŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥Springåªæ”¯æŒæ–¹æ³•è¿æ¥ç‚¹ã€‚Springç¼ºå°‘å¯¹å­—æ®µè¿æ¥ç‚¹çš„æ”¯æŒï¼Œè€Œä¸”å®ƒä¸æ”¯æŒæ„é€ å™¨è¿æ¥ç‚¹ã€‚æ–¹æ³•ä¹‹å¤–çš„è¿æ¥ç‚¹æ‹¦æˆªåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨Aspectæ¥è¡¥å……ã€‚</p><h3 id="åœ¨Spring-AOP-ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿåœ¨-spring-aop-ä¸­-concern-å’Œ-cross-cutting-concern-çš„ä¸åŒä¹‹å¤„"><a href="#åœ¨Spring-AOP-ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿåœ¨-spring-aop-ä¸­-concern-å’Œ-cross-cutting-concern-çš„ä¸åŒä¹‹å¤„" class="headerlink" title="åœ¨Spring AOP ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ spring aop ä¸­ concern å’Œ cross-cutting concern çš„ä¸åŒä¹‹å¤„"></a>åœ¨Spring AOP ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ spring aop ä¸­ concern å’Œ cross-cutting concern çš„ä¸åŒä¹‹å¤„</h3><p>å…³æ³¨ç‚¹ï¼ˆconcernï¼‰æ˜¯åº”ç”¨ä¸­ä¸€ä¸ªæ¨¡å—çš„è¡Œä¸ºï¼Œä¸€ä¸ªå…³æ³¨ç‚¹å¯èƒ½ä¼šè¢«å®šä¹‰æˆä¸€ä¸ªæˆ‘ä»¬æƒ³å®ç°çš„ä¸€ä¸ªåŠŸèƒ½ã€‚</p><p>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcross-cutting concernï¼‰æ˜¯ä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œæ­¤å…³æ³¨ç‚¹æ˜¯æ•´ä¸ªåº”ç”¨éƒ½ä¼šä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¹¶å½±å“æ•´ä¸ªåº”ç”¨ï¼Œæ¯”å¦‚æ—¥å¿—ï¼Œå®‰å…¨å’Œæ•°æ®ä¼ è¾“ï¼Œå‡ ä¹åº”ç”¨çš„æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦çš„åŠŸèƒ½ã€‚å› æ­¤è¿™äº›éƒ½å±äºæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚</p><h3 id="Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ"><a href="#Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ" class="headerlink" title="Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ"></a>Springé€šçŸ¥æœ‰å“ªäº›ç±»å‹ï¼Ÿ</h3><p>åœ¨AOPæœ¯è¯­ä¸­ï¼Œåˆ‡é¢çš„å·¥ä½œè¢«ç§°ä¸ºé€šçŸ¥ï¼Œå®é™…ä¸Šæ˜¯ç¨‹åºæ‰§è¡Œæ—¶è¦é€šè¿‡SpringAOPæ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚</p><p>Springåˆ‡é¢å¯ä»¥åº”ç”¨5ç§ç±»å‹çš„é€šçŸ¥ï¼š</p><ol><li>å‰ç½®é€šçŸ¥ï¼ˆBeforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨é€šçŸ¥åŠŸèƒ½ï¼›</li><li>åç½®é€šçŸ¥ï¼ˆAfterï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•å®Œæˆä¹‹åè°ƒç”¨é€šçŸ¥ï¼Œæ­¤æ—¶ä¸ä¼šå…³å¿ƒæ–¹æ³•çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼›</li><li>è¿”å›é€šçŸ¥ï¼ˆAfter-returning ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥ï¼›</li><li>å¼‚å¸¸é€šçŸ¥ï¼ˆAfter-throwingï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥ï¼›</li><li>ç¯ç»•é€šçŸ¥ï¼ˆAroundï¼‰ï¼šé€šçŸ¥åŒ…è£¹äº†è¢«é€šçŸ¥çš„æ–¹æ³•ï¼Œåœ¨è¢«é€šçŸ¥çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œè°ƒç”¨ä¹‹åæ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸ºã€‚</li></ol><p><a href="https://img-blog.csdnimg.cn/20201207005911882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2E3NDUyMzM3MDA=,size_16,color_FFFFFF,t_70"><img src="https://img-blog.csdnimg.cn/20201207005911882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2E3NDUyMzM3MDA=,size_16,color_FFFFFF,t_70" alt="img"></a></p><blockquote><p>åŒä¸€ä¸ªaspectï¼Œä¸åŒadviceçš„æ‰§è¡Œé¡ºåºï¼š</p><p>â‘ æ²¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š</p><p>around before advice<br>before advice<br>target method æ‰§è¡Œ<br>around after advice<br>after advice<br>afterReturning</p><p>â‘¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š</p><p>around before advice<br>before advice<br>target method æ‰§è¡Œ<br>around after advice<br>after advice<br>afterThrowing:å¼‚å¸¸å‘ç”Ÿ<br>java.lang.RuntimeException: å¼‚å¸¸å‘ç”Ÿ</p></blockquote><h3 id="ä»€ä¹ˆæ˜¯åˆ‡é¢-Aspectï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åˆ‡é¢-Aspectï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ‡é¢ Aspectï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åˆ‡é¢ Aspectï¼Ÿ</h3><p>aspect ç”± pointcount å’Œ advice ç»„æˆï¼Œåˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡ç‚¹çš„ç»“åˆã€‚ å®ƒæ—¢åŒ…å«äº†æ¨ªåˆ‡é€»è¾‘çš„å®šä¹‰, ä¹ŸåŒ…æ‹¬äº†è¿æ¥ç‚¹çš„å®šä¹‰. Spring AOP å°±æ˜¯è´Ÿè´£å®æ–½åˆ‡é¢çš„æ¡†æ¶, å®ƒå°†åˆ‡é¢æ‰€å®šä¹‰çš„æ¨ªåˆ‡é€»è¾‘ç¼–ç»‡åˆ°åˆ‡é¢æ‰€æŒ‡å®šçš„è¿æ¥ç‚¹ä¸­.<br>AOP çš„å·¥ä½œé‡å¿ƒåœ¨äºå¦‚ä½•å°†å¢å¼ºç¼–ç»‡ç›®æ ‡å¯¹è±¡çš„è¿æ¥ç‚¹ä¸Š, è¿™é‡ŒåŒ…å«ä¸¤ä¸ªå·¥ä½œ:</p><ul><li>å¦‚ä½•é€šè¿‡ pointcut å’Œ advice å®šä½åˆ°ç‰¹å®šçš„ joinpoint ä¸Š</li><li>å¦‚ä½•åœ¨ advice ä¸­ç¼–å†™åˆ‡é¢ä»£ç .</li></ul><p>å¯ä»¥ç®€å•åœ°è®¤ä¸º, ä½¿ç”¨ @Aspect æ³¨è§£çš„ç±»å°±æ˜¯åˆ‡é¢.</p><p><a href="https://img-blog.csdnimg.cn/2020021212264438.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70"><img src="https://img-blog.csdnimg.cn/2020021212264438.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RoaW5rV29u,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></a></p><h3 id="è§£é‡ŠåŸºäºXML-Schemaæ–¹å¼çš„åˆ‡é¢å®ç°"><a href="#è§£é‡ŠåŸºäºXML-Schemaæ–¹å¼çš„åˆ‡é¢å®ç°" class="headerlink" title="è§£é‡ŠåŸºäºXML Schemaæ–¹å¼çš„åˆ‡é¢å®ç°"></a>è§£é‡ŠåŸºäºXML Schemaæ–¹å¼çš„åˆ‡é¢å®ç°</h3><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ‡é¢ç”±å¸¸è§„ç±»ä»¥åŠåŸºäºXMLçš„é…ç½®å®ç°ã€‚</p><h3 id="è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°"><a href="#è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°" class="headerlink" title="è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°"></a>è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°</h3><p>åœ¨è¿™ç§æƒ…å†µä¸‹(åŸºäº@AspectJçš„å®ç°)ï¼Œæ¶‰åŠåˆ°çš„åˆ‡é¢å£°æ˜çš„é£æ ¼ä¸å¸¦æœ‰java5æ ‡æ³¨çš„æ™®é€šjavaç±»ä¸€è‡´ã€‚</p><h3 id="æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ"><a href="#æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ" class="headerlink" title="æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ"></a>æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ</h3><p>BeanNameAutoProxyCreator</p><p>DefaultAdvisorAutoProxyCreator</p><p>Metadata autoproxying</p>]]></content>
    
    
    <categories>
      
      <category>Springæ¡†æ¶â¤</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudâ€”ç»„ä»¶â‘ </title>
    <link href="/Hexo/2022/05/03/springcloud%E7%BB%84%E4%BB%B6/"/>
    <url>/Hexo/2022/05/03/springcloud%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="Eureka"><a href="#Eureka" class="headerlink" title="Eureka"></a><strong>Eureka</strong></h1><p>â€¢Eureka æ˜¯ Netflix å…¬å¸å¼€æºçš„ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸å‘ç°çš„ç»„ä»¶ ã€‚</p><p>â€¢Eureka å’Œå…¶ä»– Netflix å…¬å¸çš„æœåŠ¡ç»„ä»¶ï¼ˆä¾‹å¦‚è´Ÿè½½å‡è¡¡ã€ç†”æ–­å™¨ã€ç½‘å…³ç­‰ï¼‰ ä¸€èµ·ï¼Œè¢« Spring Cloud ç¤¾åŒºæ•´åˆä¸º</p><p>  Spring-Cloud-Netflix æ¨¡å—ã€‚ </p><p>â€¢Eureka åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼šEureka Server (æ³¨å†Œä¸­å¿ƒ) å’Œ Eureka Client (æœåŠ¡æä¾›è€…ã€æœåŠ¡æ¶ˆè´¹è€…)ã€‚</p><p><img src="https://s2.loli.net/2022/04/28/WJg35pqlZsjEctR.png" alt="image-20220428222854226"></p><p>1.æ­å»º Provider å’Œ Consumer æœåŠ¡ã€‚</p><p>2.ä½¿ç”¨ RestTemplate å®Œæˆè¿œç¨‹è°ƒç”¨ã€‚</p><p>3.æ­å»º Eureka Server æœåŠ¡ã€‚</p><p>4.æ”¹é€  Provider å’Œ Consumer ç§°ä¸º Eureka Clientã€‚</p><p>5.Consumer æœåŠ¡ é€šè¿‡ä» Eureka Server ä¸­æŠ“å– Provider åœ°å€ å®Œæˆ è¿œç¨‹è°ƒç”¨</p><p><img src="https://s2.loli.net/2022/04/28/bKDMrJsd2TQ6GIx.png" alt="image-20220428222956428"></p><h1 id="Eureka-â€“-æ­å»ºæœåŠ¡"><a href="#Eureka-â€“-æ­å»ºæœåŠ¡" class="headerlink" title="Eureka â€“ æ­å»ºæœåŠ¡"></a><strong>Eureka â€“</strong> <strong>æ­å»ºæœåŠ¡</strong></h1><p><font color='red'>1.æ­å»º Provider å’Œ Consumer æœåŠ¡ã€‚</font></p><p>2.ä½¿ç”¨ RestTemplate å®Œæˆè¿œç¨‹è°ƒç”¨ã€‚</p><p>3.æ­å»º Eureka Server æœåŠ¡ã€‚</p><p>4.æ”¹é€  Provider å’Œ Consumer ç§°ä¸º Eureka Clientã€‚</p><p>5.Consumer æœåŠ¡ é€šè¿‡ä» Eureka Server ä¸­æŠ“å– Provider åœ°å€ å®Œæˆ è¿œç¨‹è°ƒç”¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml">&lt;!æ˜ å…¥--spring boot web--&gt;<br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="Eureka-â€“-RestTemplate"><a href="#Eureka-â€“-RestTemplate" class="headerlink" title="Eureka â€“ RestTemplate"></a><strong>Eureka â€“ RestTemplate</strong></h1><p>1.æ­å»º Provider å’Œ Consumer æœåŠ¡ã€‚</p><p><font color='red'>2.ä½¿ç”¨ RestTemplate å®Œæˆè¿œç¨‹è°ƒç”¨ã€‚</font></p><p>3.æ­å»º Eureka Server æœåŠ¡ã€‚</p><p>4.æ”¹é€  Provider å’Œ Consumer ç§°ä¸º Eureka Clientã€‚</p><p>5.Consumer æœåŠ¡ é€šè¿‡ä» Eureka Server ä¸­æŠ“å– Provider åœ°å€ å®Œæˆ è¿œç¨‹è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestTemplateConfig</span> &#123;<br><br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€¢Springæä¾›çš„ä¸€ç§ç®€å•ä¾¿æ·çš„æ¨¡æ¿ç±»ï¼Œç”¨äºåœ¨ java ä»£ç é‡Œè®¿é—® restful æœåŠ¡ã€‚</p><p>â€¢å…¶åŠŸèƒ½ä¸ HttpClient ç±»ä¼¼ï¼Œä½†æ˜¯ RestTemplate å®ç°æ›´ä¼˜é›…ï¼Œä½¿ç”¨æ›´æ–¹ä¾¿ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/order&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RestTemplate restTemplate;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/goods/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Goods <span class="hljs-title function_">findGoodsById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> <span class="hljs-type">int</span> id)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;findGoodsById...&quot;</span>+id);<br><br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            //è¿œç¨‹è°ƒç”¨GoodsæœåŠ¡ä¸­çš„findOneæ¥å£</span><br><span class="hljs-comment">            ä½¿ç”¨RestTemplate</span><br><span class="hljs-comment">            1. å®šä¹‰Bean  restTemplate</span><br><span class="hljs-comment">            2. æ³¨å…¥Bean</span><br><span class="hljs-comment">            3. è°ƒç”¨æ–¹æ³•</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;http://localhost:8000/goods/findOne/&quot;</span>+id;<br>        <span class="hljs-comment">// 3. è°ƒç”¨æ–¹æ³•</span><br>        <span class="hljs-type">Goods</span> <span class="hljs-variable">goods</span> <span class="hljs-operator">=</span> restTemplate.getForObject(url, Goods.class);<br><br><br>        <span class="hljs-keyword">return</span> goods;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Eureka-â€“-Eureka-Server"><a href="#Eureka-â€“-Eureka-Server" class="headerlink" title="Eureka â€“ Eureka Server"></a><strong>Eureka â€“ Eureka Server</strong></h1><p>1.æ­å»º Provider å’Œ Consumer æœåŠ¡ã€‚</p><p>2.ä½¿ç”¨ RestTemplate å®Œæˆè¿œç¨‹è°ƒç”¨ã€‚</p><p><font color='red'>3.æ­å»º Eureka Server æœåŠ¡ã€‚</font></p><p>4.æ”¹é€  Provider å’Œ Consumer ç§°ä¸º Eureka Clientã€‚</p><p>5.Consumer æœåŠ¡ é€šè¿‡ä» Eureka Server ä¸­æŠ“å– Provider åœ°å€ å®Œæˆ è¿œç¨‹è°ƒç”¨</p><p>æ­¥éª¤ï¼š</p><p>â‘ åˆ›å»º eureka-server æ¨¡å—</p><p>â‘¡å¼•å…¥ SpringCloud å’Œ euraka-server ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- eureka-server --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â‘¢å®Œæˆ Eureka Server ç›¸å…³é…ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8761</span><br><br><span class="hljs-comment"># eureka é…ç½®</span><br><span class="hljs-comment"># eureka ä¸€å…±æœ‰4éƒ¨åˆ† é…ç½®</span><br><span class="hljs-comment"># 1. dashboard:eurekaçš„webæ§åˆ¶å°é…ç½®</span><br><span class="hljs-comment"># 2. server:eurekaçš„æœåŠ¡ç«¯é…ç½®</span><br><span class="hljs-comment"># 3. client:eurekaçš„å®¢æˆ·ç«¯é…ç½®</span><br><span class="hljs-comment"># 4. instance:eurekaçš„å®ä¾‹é…ç½®</span><br><br><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">localhost</span> <span class="hljs-comment"># ä¸»æœºå</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka</span> <span class="hljs-comment"># eurekaæœåŠ¡ç«¯åœ°å€ï¼Œå°†æ¥å®¢æˆ·ç«¯ä½¿ç”¨è¯¥åœ°å€å’Œeurekaè¿›è¡Œé€šä¿¡</span><br><br>    <span class="hljs-attr">register-with-eureka:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># æ˜¯å¦å°†è‡ªå·±çš„è·¯å¾„ æ³¨å†Œåˆ°eurekaä¸Šã€‚eureka server ä¸éœ€è¦çš„ï¼Œeureka provider client éœ€è¦</span><br>    <span class="hljs-attr">fetch-registry:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># æ˜¯å¦éœ€è¦ä»eurekaä¸­æŠ“å–è·¯å¾„ã€‚eureka server ä¸éœ€è¦çš„ï¼Œeureka consumer client éœ€è¦</span><br></code></pre></td></tr></table></figure><p>â‘£å¯åŠ¨è¯¥æ¨¡å—</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">// å¯ç”¨EurekaServer</span><br><span class="hljs-meta">@EnableEurekaServer</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EurekaApp</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(EurekaApp.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/30/2pDRG6rwCAqHEP8.png" alt="image-20220430112005166"></p><h1 id="Eureka-â€“-Eureka-Client"><a href="#Eureka-â€“-Eureka-Client" class="headerlink" title="Eureka â€“ Eureka Client"></a><strong>Eureka â€“ Eureka Client</strong></h1><p>1.æ­å»º Provider å’Œ Consumer æœåŠ¡ã€‚</p><p>2.ä½¿ç”¨ RestTemplate å®Œæˆè¿œç¨‹è°ƒç”¨ã€‚</p><p>3.æ­å»º Eureka Server æœåŠ¡ã€‚</p><p><font color='red'>4.æ”¹é€  Provider å’Œ Consumer ç§°ä¸º Eureka Clientã€‚</font></p><p>5.Consumer æœåŠ¡ é€šè¿‡ä» Eureka Server ä¸­æŠ“å– Provider åœ°å€ å®Œæˆ è¿œç¨‹è°ƒç”¨</p><p>â‘ åœ¨providerå¼• eureka-client ç›¸å…³ä¾èµ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!-- eureka-client --&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure><p>â‘¡å®Œæˆ eureka client ç›¸å…³é…ç½®</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8001</span><br><br><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">localhost</span> <span class="hljs-comment"># ä¸»æœºå</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://localhost:8761/eureka</span> <span class="hljs-comment"># eurekaæœåŠ¡ç«¯åœ°å€ï¼Œå°†æ¥å®¢æˆ·ç«¯ä½¿ç”¨è¯¥åœ°å€å’Œeurekaè¿›è¡Œé€šä¿¡</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">eureka-provider</span> <span class="hljs-comment"># è®¾ç½®å½“å‰åº”ç”¨çš„åç§°ã€‚å°†æ¥ä¼šåœ¨eurekaä¸­Applicationæ˜¾ç¤ºã€‚å°†æ¥éœ€è¦ä½¿ç”¨è¯¥åç§°æ¥è·å–è·¯å¾„</span><br></code></pre></td></tr></table></figure><p>â‘¢å¯åŠ¨ æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¯åŠ¨ç±»</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-meta">@EnableEurekaClient</span> <span class="hljs-comment">//è¯¥æ³¨è§£ åœ¨æ–°ç‰ˆæœ¬ä¸­å¯ä»¥çœç•¥</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProviderApp</span> &#123;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(ProviderApp.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/30/VIPrxugFEAYWalz.png" alt="image-20220430112628220"></p><p>å¯ä»¥çœ‹åˆ°provideræ˜¾ç¤ºåœ¨client</p><p>æŠŠconsumerä¹Ÿé…ç½®ä¸Š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br><br><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">localhost</span> <span class="hljs-comment"># ä¸»æœºå</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://localhost:8761/eureka</span> <span class="hljs-comment"># eurekaæœåŠ¡ç«¯åœ°å€ï¼Œå°†æ¥å®¢æˆ·ç«¯ä½¿ç”¨è¯¥åœ°å€å’Œeurekaè¿›è¡Œé€šä¿¡</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">eureka-consumer</span> <span class="hljs-comment"># è®¾ç½®å½“å‰åº”ç”¨çš„åç§°ã€‚å°†æ¥ä¼šåœ¨eurekaä¸­Applicationæ˜¾ç¤ºã€‚å°†æ¥éœ€è¦ä½¿ç”¨è¯¥åç§°æ¥è·å–è·¯å¾„</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableDiscoveryClient</span> <span class="hljs-comment">// æ¿€æ´»DiscoveryClient</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsumerApp</span> &#123;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(ConsumerApp.class,args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/30/Bqr9SEhiL3PCD6e.png" alt="image-20220430114005560"></p><h1 id="Eureka-â€“-è¿œç¨‹è°ƒç”¨"><a href="#Eureka-â€“-è¿œç¨‹è°ƒç”¨" class="headerlink" title="Eureka â€“ è¿œç¨‹è°ƒç”¨"></a><strong>Eureka â€“</strong> <strong>è¿œç¨‹è°ƒç”¨</strong></h1><p>1.æ­å»º Provider å’Œ Consumer æœåŠ¡ã€‚</p><p>2.ä½¿ç”¨ RestTemplate å®Œæˆè¿œç¨‹è°ƒç”¨ã€‚</p><p>3.æ­å»º Eureka Server æœåŠ¡ã€‚</p><p>4.æ”¹é€  Provider å’Œ Consumer ç§°ä¸º Eureka Clientã€‚</p><p><font color='red'>5.Consumer æœåŠ¡ é€šè¿‡ä» Eureka Server ä¸­æŠ“å– Provider åœ°å€ å®Œæˆ è¿œç¨‹è°ƒç”¨</font></p><h1 id="Eureka-â€“-ç›¸å…³é…ç½®åŠç‰¹æ€§"><a href="#Eureka-â€“-ç›¸å…³é…ç½®åŠç‰¹æ€§" class="headerlink" title="Eureka â€“ ç›¸å…³é…ç½®åŠç‰¹æ€§"></a><strong>Eureka â€“</strong> <strong>ç›¸å…³é…ç½®åŠç‰¹æ€§</strong></h1><p>eureka ä¸€å…±æœ‰4éƒ¨åˆ† é…ç½®</p><p>1.server : eureka çš„æœåŠ¡ç«¯é…ç½®</p><p>2.client : eureka çš„å®¢æˆ·ç«¯é…ç½®</p><p>3.instance : eureka çš„å®ä¾‹é…ç½®</p><p>4.dashboard : eureka çš„webæ§åˆ¶å°é…ç½®</p><p><img src="https://s2.loli.net/2022/04/30/zVGqDpSIw4WlQTY.png" alt="image-20220430115812069"></p><h1 id="Eureka-â€“-ç›¸å…³é…ç½®åŠç‰¹æ€§-server"><a href="#Eureka-â€“-ç›¸å…³é…ç½®åŠç‰¹æ€§-server" class="headerlink" title="Eureka â€“ ç›¸å…³é…ç½®åŠç‰¹æ€§ - server"></a><strong>Eureka â€“</strong> <strong>ç›¸å…³é…ç½®åŠç‰¹æ€§</strong> <strong>- server</strong></h1><p><strong>eureka</strong>:*<br>*  <strong>server</strong>:</p><p>  *#<strong>æ˜¯å¦å¼€å¯è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œé»˜è®¤</strong>true**<br>*   <strong>enable-self-preservation</strong>:</p><p>â€‹    <em>#æ¸…ç†é—´éš”ï¼ˆå•ä½æ¯«ç§’ï¼Œé»˜è®¤æ˜¯60*1000**ï¼‰</em><br>   <strong>eviction-interval-timer-in-ms</strong>:</p>  <img src="https://s2.loli.net/2022/04/30/y7BUKQfHDRe8FWC.png" alt="image-20220430115822303" style="zoom: 80%;" /><p><img src="https://s2.loli.net/2022/04/30/4lhwqiIXQxGHTEd.png" alt="image-20220430115830080"></p><h1 id="Eureka-â€“-ç›¸å…³é…ç½®åŠç‰¹æ€§-client"><a href="#Eureka-â€“-ç›¸å…³é…ç½®åŠç‰¹æ€§-client" class="headerlink" title="Eureka â€“ ç›¸å…³é…ç½®åŠç‰¹æ€§ - client"></a><strong>Eureka â€“</strong> <strong>ç›¸å…³é…ç½®åŠç‰¹æ€§</strong> <strong>- client</strong></h1><p><img src="https://s2.loli.net/2022/04/30/SH5qFvO4U6edQiD.png" alt="image-20220430115906152"></p><h1 id="Eureka-â€“-ç›¸å…³é…ç½®åŠç‰¹æ€§-dashboard"><a href="#Eureka-â€“-ç›¸å…³é…ç½®åŠç‰¹æ€§-dashboard" class="headerlink" title="Eureka â€“ ç›¸å…³é…ç½®åŠç‰¹æ€§ - dashboard"></a><strong>Eureka â€“</strong> <strong>ç›¸å…³é…ç½®åŠç‰¹æ€§</strong> <strong>- dashboard</strong></h1><p><img src="https://s2.loli.net/2022/04/30/ScVULpOKFHDWCI3.png" alt="image-20220430120027150"></p><h1 id="Eureka-â€“-é«˜å¯ç”¨"><a href="#Eureka-â€“-é«˜å¯ç”¨" class="headerlink" title="Eureka â€“ é«˜å¯ç”¨"></a><strong>Eureka â€“</strong> <strong>é«˜å¯ç”¨</strong></h1><p><img src="https://s2.loli.net/2022/04/30/f4k9STLwNOnBGuq.png" alt="image-20220430165101895"></p><p>1.å‡†å¤‡ä¸¤ä¸ªEureka Server </p><p>2.åˆ†åˆ«è¿›è¡Œé…ç½®ï¼Œç›¸äº’æ³¨å†Œ</p><p>3.Eureka Client åˆ†åˆ«æ³¨å†Œåˆ°è¿™ä¸¤ä¸ª Eureka Serverä¸­</p><h1 id="Consul"><a href="#Consul" class="headerlink" title="Consul"></a><strong>Consul</strong></h1><p>â€¢Consul æ˜¯ç”± HashiCorp åŸºäº Go è¯­è¨€å¼€å‘çš„ï¼Œæ”¯æŒå¤šæ•°æ®ä¸­å¿ƒï¼Œåˆ†å¸ƒå¼é«˜å¯ç”¨çš„æœåŠ¡å‘å¸ƒå’Œæ³¨å†ŒæœåŠ¡è½¯ä»¶ã€‚</p><p>â€¢ç”¨äºå®ç°åˆ†å¸ƒå¼ç³»ç»Ÿçš„æœåŠ¡å‘ç°ä¸é…ç½®ã€‚</p><p>â€¢ä½¿ç”¨èµ·æ¥ä¹Ÿè¾ƒ ä¸ºç®€å•ã€‚å…·æœ‰å¤©ç„¶å¯ç§»æ¤æ€§(æ”¯æŒLinuxã€windowså’ŒMac OS X)ï¼›å®‰è£…åŒ…ä»…åŒ…å«ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ–¹ä¾¿éƒ¨ç½² ã€‚</p><p>â€¢å®˜ç½‘åœ°å€ï¼š <a href="https://www.consul.io/">https://www.consul.io</a> </p><h1 id="Consul-â€“-å¿«é€Ÿå…¥é—¨"><a href="#Consul-â€“-å¿«é€Ÿå…¥é—¨" class="headerlink" title="Consul â€“ å¿«é€Ÿå…¥é—¨"></a><strong>Consul â€“</strong> <strong>å¿«é€Ÿå…¥é—¨</strong></h1><p>1.æ­å»º Provider å’Œ Consumer æœåŠ¡ã€‚</p><p>2.ä½¿ç”¨ RestTemplate å®Œæˆè¿œç¨‹è°ƒç”¨ã€‚</p><p>3.å°†ProvideræœåŠ¡æ³¨å†Œåˆ°Consulä¸­ã€‚</p><p>4.Consumer æœåŠ¡ é€šè¿‡ä» Consul ä¸­æŠ“å– Provider åœ°å€ å®Œæˆ è¿œç¨‹è°ƒç”¨</p><p><img src="https://s2.loli.net/2022/04/30/efJbv4kjShHlxi1.png" alt="image-20220430170630362"></p><p>windowsè¿è¡Œå‘½ä»¤ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./consul.exe agent -dev<br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">#consulé…ç½®æ–‡ä»¶</span><br><span class="hljs-attr">consul:</span><br>  <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span> <span class="hljs-comment"># consul æœåŠ¡ç«¯çš„ ip</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8500</span> <span class="hljs-comment"># consul æœåŠ¡ç«¯çš„ç«¯å£ é»˜è®¤8500</span><br>  <span class="hljs-attr">discovery:</span><br>    <span class="hljs-attr">service-name:</span> <span class="hljs-string">$&#123;spring.application.name&#125;</span> <span class="hljs-comment"># å½“å‰åº”ç”¨æ³¨å†Œåˆ°consulçš„åç§°</span><br>    <span class="hljs-attr">prefer-ip-address:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># æ³¨å†Œip</span><br></code></pre></td></tr></table></figure><h1 id="Nacos-å›½äº§"><a href="#Nacos-å›½äº§" class="headerlink" title="Nacos(å›½äº§)"></a><strong>Nacos</strong>(å›½äº§)</h1><p>â€¢Nacosï¼ˆDynamic Naming and Configuration Serviceï¼‰ æ˜¯é˜¿é‡Œå·´å·´2018å¹´7æœˆå¼€æºçš„é¡¹ç›®ã€‚</p><p>â€¢å®ƒä¸“æ³¨äºæœåŠ¡å‘ç°å’Œé…ç½®ç®¡ç†é¢†åŸŸ è‡´åŠ›äºå¸®åŠ©æ‚¨å‘ç°ã€é…ç½®å’Œç®¡ç†å¾®æœåŠ¡ã€‚Nacos æ”¯æŒå‡ ä¹æ‰€æœ‰ä¸»æµç±»å‹çš„â€œæœåŠ¡â€çš„å‘ç°ã€é…ç½®å’Œç®¡ç†ã€‚</p><p>â€¢ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯Nacos &#x3D; Spring Cloudæ³¨å†Œä¸­å¿ƒ + Spring Cloudé…ç½®ä¸­å¿ƒã€‚</p><p>â€¢å®˜ç½‘ï¼š<a href="https://nacos.io/">https://nacos.io/</a></p><p>â€¢ä¸‹è½½åœ°å€ï¼š <a href="https://github.com/alibaba/nacos/releases">https://github.com/alibaba/nacos/releases</a></p><p>ç™»å½•åŸå§‹è´¦å·å¯†ç nacos</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--nacos--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.2.2.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.nacos<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>nacos-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">server-addr:</span>  <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:8848</span> <span class="hljs-comment"># é…ç½®nacos æœåŠ¡ç«¯åœ°å€</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">nacos-provider</span> <span class="hljs-comment"># æœåŠ¡åç§°</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/30/38B7VYXa2bKWCmF.png" alt="image-20220430191601888"></p><h2 id="Ribbon-å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡"><a href="#Ribbon-å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡" class="headerlink" title="Ribbon å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡"></a><strong>Ribbon</strong> <strong>å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</strong></h2><h3 id="Ribbon-æ¦‚è¿°"><a href="#Ribbon-æ¦‚è¿°" class="headerlink" title="Ribbon æ¦‚è¿°"></a><strong>Ribbon</strong> <strong>æ¦‚è¿°</strong></h3><p>â€¢Ribbonæ˜¯ Netflix æä¾›çš„ä¸€ä¸ªåŸºäº<font color='red'>HTTPå’ŒTCP</font>çš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å·¥å…·ã€‚</p><p>â€¢Ribbonä¸»è¦æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><p>1.ç®€åŒ–è¿œç¨‹è°ƒç”¨</p><p>2.è´Ÿè½½å‡è¡¡</p><p><img src="https://s2.loli.net/2022/04/30/jbuqgPcWSY7JmTG.png" alt="image-20220430192032627"></p><p>æœåŠ¡ç«¯è´Ÿè½½å‡è¡¡</p><p>â€¢è´Ÿè½½å‡è¡¡ç®—æ³•åœ¨æœåŠ¡ç«¯</p><p>â€¢ç”±è´Ÿè½½å‡è¡¡å™¨ç»´æŠ¤æœåŠ¡åœ°å€åˆ—è¡¨</p><p>â€¢å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</p><p>â€¢è´Ÿè½½å‡è¡¡ç®—æ³•åœ¨å®¢æˆ·ç«¯</p><p>â€¢å®¢æˆ·ç«¯ç»´æŠ¤æœåŠ¡åœ°å€åˆ—è¡¨</p><p><img src="https://s2.loli.net/2022/04/30/XGO7ZUCl2Y4ELb8.png" alt="image-20220430192144091"></p><p>â€¢Ribbon è´Ÿè´£å‡è¡¡ç­–ç•¥ï¼š</p><p>â€¢éšæœº ï¼š<font color='red'>RandomRule</font></p><p>â€¢è½®è¯¢ ï¼šRoundRobinRule</p><p>â€¢æœ€å°å¹¶å‘ï¼šBestAvailableRule</p><p>â€¢è¿‡æ»¤ï¼šAvailabilityFilteringRule</p><p>â€¢å“åº”æ—¶é—´ï¼šWeightedResponseTimeRule</p><p>â€¢è½®è¯¢é‡è¯•ï¼šRetryRule</p><p>â€¢æ€§èƒ½å¯ç”¨æ€§ï¼šZoneAvoidanceRule</p><h1 id="Feign-å£°æ˜å¼æœåŠ¡è°ƒç”¨"><a href="#Feign-å£°æ˜å¼æœåŠ¡è°ƒç”¨" class="headerlink" title="Feign****å£°æ˜å¼æœåŠ¡è°ƒç”¨"></a><strong>Feign****å£°æ˜å¼æœåŠ¡è°ƒç”¨</strong></h1><h2 id="Feign-æ¦‚è¿°"><a href="#Feign-æ¦‚è¿°" class="headerlink" title="Feign æ¦‚è¿°"></a><strong>Feign</strong> <strong>æ¦‚è¿°</strong></h2><p>â€¢Feign æ˜¯ä¸€ä¸ªå£°æ˜å¼çš„ REST å®¢æˆ·ç«¯ï¼Œå®ƒç”¨äº†åŸºäºæ¥å£çš„æ³¨è§£æ–¹å¼ï¼Œå¾ˆæ–¹ä¾¿å®ç°å®¢æˆ·ç«¯é…ç½®ã€‚</p><p>â€¢Feign æœ€åˆç”± Netflix å…¬å¸æä¾›ï¼Œä½†ä¸æ”¯æŒSpringMVCæ³¨è§£ï¼Œåç”± SpringCloud å¯¹å…¶å°è£…ï¼Œæ”¯æŒäº†SpringMVCæ³¨è§£ï¼Œè®©ä½¿ç”¨è€…æ›´æ˜“äºæ¥å—ã€‚</p><p><img src="/Hexo/../AppData/Roaming/Typora/typora-user-images/image-20220501110706683.png" alt="image-20220501110706683"></p><h2 id="Feign-å¿«é€Ÿå…¥é—¨"><a href="#Feign-å¿«é€Ÿå…¥é—¨" class="headerlink" title="Feign å¿«é€Ÿå…¥é—¨"></a><strong>Feign</strong> <strong>å¿«é€Ÿå…¥é—¨</strong></h2><p>1.åœ¨æ¶ˆè´¹ç«¯å¼•å…¥ open-feign ä¾èµ–</p><p>2.ç¼–å†™Feignè°ƒç”¨æ¥å£</p><p>3.åœ¨å¯åŠ¨ç±» æ·»åŠ  @EnableFeignClients æ³¨è§£ï¼Œå¼€å¯FeignåŠŸèƒ½</p><p>4.æµ‹è¯•è°ƒç”¨</p><h2 id="Feign-å…¶ä»–åŠŸèƒ½-â€“-è¶…æ—¶è®¾ç½®"><a href="#Feign-å…¶ä»–åŠŸèƒ½-â€“-è¶…æ—¶è®¾ç½®" class="headerlink" title="Feign å…¶ä»–åŠŸèƒ½ â€“ è¶…æ—¶è®¾ç½®"></a><strong>Feign</strong> <strong>å…¶ä»–åŠŸèƒ½</strong> <strong>â€“</strong> <strong>è¶…æ—¶è®¾ç½®</strong></h2><p>â€¢Feign åº•å±‚ä¾èµ–äº Ribbon å®ç°è´Ÿè½½å‡è¡¡å’Œè¿œç¨‹è°ƒç”¨ã€‚</p><p>â€¢Ribboné»˜è®¤1ç§’è¶…æ—¶ã€‚</p><p>â€¢è¶…æ—¶é…ç½®ï¼š</p><p><strong>ribbon</strong>:<br>       <strong>ConnectTimeout</strong>: 1000  *#<strong>è¿æ¥è¶…æ—¶æ—¶é—´</strong>,  **æ¯«ç§’<br>       <strong>ReadTimeout</strong>: 1000   *#<strong>é€»è¾‘å¤„ç†è¶…æ—¶æ—¶é—´</strong>,**æ¯«ç§’</p><h2 id="Feign-å…¶ä»–åŠŸèƒ½-â€“-æ—¥å¿—è®°å½•"><a href="#Feign-å…¶ä»–åŠŸèƒ½-â€“-æ—¥å¿—è®°å½•" class="headerlink" title="Feign å…¶ä»–åŠŸèƒ½ â€“ æ—¥å¿—è®°å½•"></a><strong>Feign</strong> <strong>å…¶ä»–åŠŸèƒ½</strong> <strong>â€“</strong> <strong>æ—¥å¿—è®°å½•</strong></h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--feign--&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é…ç½®feignæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * feignå£°æ˜å¼æ¥å£ã€‚å‘èµ·è¿œç¨‹è°ƒç”¨çš„ã€‚ç®€åŒ–ä»£ç </span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> String url = &quot;http://FEIGN-PROVIDER/goods/findOne/&quot;+id;</span><br><span class="hljs-comment"> Goods goods = restTemplate.getForObject(url, Goods.class);</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * 1. å®šä¹‰æ¥å£</span><br><span class="hljs-comment"> * 2. æ¥å£ä¸Šæ·»åŠ æ³¨è§£ <span class="hljs-doctag">@FeignClient</span>,è®¾ç½®valueå±æ€§ä¸º æœåŠ¡æä¾›è€…çš„ åº”ç”¨åç§°</span><br><span class="hljs-comment"> * 3. ç¼–å†™è°ƒç”¨æ¥å£ï¼Œæ¥å£çš„å£°æ˜è§„åˆ™ å’Œ æä¾›æ–¹æ¥å£ä¿æŒä¸€è‡´ã€‚</span><br><span class="hljs-comment"> * 4. æ³¨å…¥è¯¥æ¥å£å¯¹è±¡ï¼Œè°ƒç”¨æ¥å£æ–¹æ³•å®Œæˆè¿œç¨‹è°ƒç”¨</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-meta">@FeignClient(value = &quot;FEIGN-PROVIDER&quot;,configuration = FeignLogConfig.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">GoodsFeignClient</span> &#123;<br><br><br>    <span class="hljs-meta">@GetMapping(&quot;/goods/findOne/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Goods <span class="hljs-title function_">findGoodsById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> <span class="hljs-type">int</span> id)</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>1.Feign åªèƒ½è®°å½• debug çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ã€‚<br>logging:<br>     level:<br>      com.itheima: debug</p><p>2.å®šä¹‰Feignæ—¥å¿—çº§åˆ«Bean<br>@Bean<br>Logger.Level feignLoggerLevel() {<br>       return Logger.Level.FULL;<br>}</p><p>3.å¯ç”¨è¯¥Beanï¼š<br>     @FeignClient(configuration &#x3D; XxxConfig.class</p><h1 id="Hystrix-ç†”æ–­å™¨"><a href="#Hystrix-ç†”æ–­å™¨" class="headerlink" title="Hystrix ç†”æ–­å™¨"></a><strong>Hystrix</strong> <strong>ç†”æ–­å™¨</strong></h1><h2 id="Hystrix-æ¦‚è¿°"><a href="#Hystrix-æ¦‚è¿°" class="headerlink" title="Hystrix æ¦‚è¿°"></a><strong>Hystrix</strong> <strong>æ¦‚è¿°</strong></h2><p>â€¢Hystix æ˜¯ Netflix å¼€æºçš„ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹æœåŠ¡ã€ç¬¬ä¸‰æ–¹åº“ï¼Œé˜²æ­¢å‡ºç°çº§è”å¤±è´¥ï¼ˆé›ªå´©ï¼‰ã€‚</p><p><img src="https://s2.loli.net/2022/05/01/9g2pbDEjeuZGrxS.png" alt="image-20220501162057196"></p><p><img src="https://s2.loli.net/2022/05/01/XePm3Cbjs2vFiuW.png" alt="image-20220501162110055"></p><p>â€¢Hystix æ˜¯ Netflix å¼€æºçš„ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹æœåŠ¡ã€ç¬¬ä¸‰æ–¹åº“ï¼Œé˜²æ­¢å‡ºç°çº§è”å¤±è´¥ï¼ˆé›ªå´©ï¼‰ã€‚</p><p>â€¢é›ªå´©ï¼šä¸€ä¸ªæœåŠ¡å¤±è´¥ï¼Œå¯¼è‡´æ•´æ¡é“¾è·¯çš„æœåŠ¡éƒ½å¤±è´¥çš„æƒ…å½¢ã€‚</p><p><img src="https://s2.loli.net/2022/05/01/kHgi6JMoU5m3nq2.png" alt="image-20220501162128656"></p><p>â€¢Hystix æ˜¯ Netflix å¼€æºçš„ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹æœåŠ¡ã€ç¬¬ä¸‰æ–¹åº“ï¼Œé˜²æ­¢å‡ºç°çº§è”å¤±è´¥ï¼ˆé›ªå´©ï¼‰ã€‚</p><p>â€¢é›ªå´©ï¼šä¸€ä¸ªæœåŠ¡å¤±è´¥ï¼Œå¯¼è‡´æ•´æ¡é“¾è·¯çš„æœåŠ¡éƒ½å¤±è´¥çš„æƒ…å½¢ã€‚</p><p>â€¢Hystix ä¸»è¦åŠŸèƒ½</p><h3 id="â€¢éš”ç¦»"><a href="#â€¢éš”ç¦»" class="headerlink" title="â€¢éš”ç¦»"></a>â€¢éš”ç¦»</h3><ol><li><p>çº¿ç¨‹æ± éš”ç¦»</p><p><img src="https://s2.loli.net/2022/05/01/7FBVZeadlrQ4xJI.png" alt="image-20220501162222290"></p></li></ol><p><img src="https://s2.loli.net/2022/05/01/pX18E7RLAxtyVUN.png" alt="image-20220501162310983"></p><ol start="2"><li><p>ä¿¡å·é‡éš”ç¦»</p><p><img src="https://s2.loli.net/2022/05/01/atQLXCz8WmxGTIE.png" alt="image-20220501163203127"></p></li></ol><h3 id="â€¢é™çº§"><a href="#â€¢é™çº§" class="headerlink" title="â€¢é™çº§"></a>â€¢é™çº§</h3><p>: å¼‚å¸¸ï¼Œè¶…æ—¶</p><p><img src="https://s2.loli.net/2022/05/01/nqZJbSTNfgYOx2I.png" alt="image-20220501162359712"></p><h3 id="â€¢ç†”æ–­"><a href="#â€¢ç†”æ–­" class="headerlink" title="â€¢ç†”æ–­"></a>â€¢ç†”æ–­</h3><h3 id="â€¢é™æµ"><a href="#â€¢é™æµ" class="headerlink" title="â€¢é™æµ"></a>â€¢é™æµ</h3><h2 id="lHystrix-é™çº§"><a href="#lHystrix-é™çº§" class="headerlink" title="lHystrix é™çº§"></a>lHystrix é™çº§</h2><p>â€¢Hystix é™çº§ï¼šå½“æœåŠ¡å‘ç”Ÿå¼‚å¸¸æˆ–è°ƒç”¨è¶…æ—¶ï¼Œè¿”å›é»˜è®¤æ•°æ®</p><p><strong>Hystrix</strong> <strong>é™çº§</strong> <strong>â€“</strong> <strong>æœåŠ¡æä¾›æ–¹</strong></p><p>1.åœ¨æœåŠ¡æä¾›æ–¹ï¼Œå¼•å…¥ hystrix ä¾èµ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableCircuitBreaker</span> <span class="hljs-comment">// å¼€å¯HystrixåŠŸèƒ½</span><br></code></pre></td></tr></table></figure><p>2.å®šä¹‰é™çº§æ–¹æ³•</p><p>3.ä½¿ç”¨ @HystrixCommand æ³¨è§£é…ç½®é™çº§æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@HystrixCommand(fallbackMethod = &quot;findOne_fallback&quot;,commandProperties = &#123;</span><br><span class="hljs-meta">        //è®¾ç½®Hystrixçš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤1s</span><br><span class="hljs-meta">        @HystrixProperty(name=&quot;execution.isolation.thread.timeoutInMilliseconds&quot;,value = &quot;3000&quot;)</span><br></code></pre></td></tr></table></figure><p>4.åœ¨å¯åŠ¨ç±»ä¸Šå¼€å¯HystrixåŠŸèƒ½ï¼š@EnableCircuitBreaker</p><p><img src="https://s2.loli.net/2022/05/01/V1qmIgbntzAdpLa.png" alt="image-20220501162453760"></p><p><strong>Hystrix</strong> <strong>é™çº§</strong> <strong>â€“</strong> <strong>æœåŠ¡æ¶ˆè´¹æ–¹</strong></p><p>1.feign ç»„ä»¶å·²ç»é›†æˆäº† hystrix ç»„ä»¶ã€‚</p><p>2.å®šä¹‰feign è°ƒç”¨æ¥å£å®ç°ç±»ï¼Œå¤å†™æ–¹æ³•ï¼Œå³ é™çº§æ–¹æ³•</p><p>3.åœ¨ @FeignClient æ³¨è§£ä¸­ä½¿ç”¨ fallback å±æ€§è®¾ç½®é™çº§å¤„ç†ç±»ã€‚</p><p>4.é…ç½®å¼€å¯ feign.hystrix.enabled &#x3D; true</p><p><img src="https://s2.loli.net/2022/05/01/nrHNy9c8oQL2wXv.png" alt="image-20220501162549000"></p><h2 id="Hystrix-ç†”æ–­"><a href="#Hystrix-ç†”æ–­" class="headerlink" title="Hystrix ç†”æ–­"></a><strong>Hystrix</strong> <strong>ç†”æ–­</strong></h2><p>â€¢Hystrix ç†”æ–­æœºåˆ¶ï¼Œç”¨äºç›‘æ§å¾®æœåŠ¡è°ƒç”¨æƒ…å†µï¼Œå½“å¤±è´¥çš„æƒ…å†µè¾¾åˆ°é¢„å®šçš„é˜ˆå€¼ï¼ˆ5ç§’å¤±è´¥20æ¬¡ï¼‰ï¼Œä¼šæ‰“å¼€æ–­è·¯å™¨ï¼Œæ‹’ç»æ‰€æœ‰è¯·æ±‚ï¼Œç›´åˆ°æœåŠ¡æ¢å¤æ­£å¸¸ä¸ºæ­¢ã€‚</p><p>â€¢circuitBreaker.sleepWindowInMillisecondsï¼šç›‘æ§æ—¶é—´</p><p>â€¢circuitBreaker.requestVolumeThresholdï¼šå¤±è´¥æ¬¡æ•°</p><p>â€¢circuitBreaker.errorThresholdPercentageï¼šå¤±è´¥ç‡</p><p><img src="https://s2.loli.net/2022/05/01/EC13emA7Z2QaVJ6.png" alt="image-20220501162644849"></p><h2 id="Hystrix-ç†”æ–­-ç›‘æ§"><a href="#Hystrix-ç†”æ–­-ç›‘æ§" class="headerlink" title="Hystrix ç†”æ–­****ç›‘æ§"></a><strong>Hystrix</strong> <strong>ç†”æ–­****ç›‘æ§</strong></h2><p>â€¢Hystrix æä¾›äº† Hystrix-dashboard åŠŸèƒ½ï¼Œç”¨äºå®æ—¶ç›‘æ§å¾®æœåŠ¡è¿è¡ŒçŠ¶æ€ã€‚</p><p>â€¢ä½†æ˜¯Hystrix-dashboardåªèƒ½ç›‘æ§ä¸€ä¸ªå¾®æœåŠ¡ã€‚</p><p>â€¢Netflix è¿˜æä¾›äº† Turbine ï¼Œè¿›è¡Œèšåˆç›‘æ§ã€‚</p><p><img src="https://s2.loli.net/2022/05/01/Z9QS1YT5yOHj7Vo.png" alt="image-20220501162717047"></p><p><img src="https://s2.loli.net/2022/05/01/7En2WRvgiYyKh9X.png" alt="image-20220501162709915"></p><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="Gateway-ç½‘å…³"><a href="#Gateway-ç½‘å…³" class="headerlink" title="Gateway ç½‘å…³"></a><strong>Gateway</strong> <strong>ç½‘å…³</strong></h1><h2 id="ç½‘å…³æ¦‚è¿°"><a href="#ç½‘å…³æ¦‚è¿°" class="headerlink" title="ç½‘å…³æ¦‚è¿°"></a><strong>ç½‘å…³æ¦‚è¿°</strong></h2><p>â€¢ç½‘å…³æ—¨åœ¨ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„ç»Ÿä¸€çš„APIè·¯ç”±ç®¡ç†æ–¹å¼ã€‚</p><p>â€¢åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸åŒçš„å¾®æœåŠ¡å¯ä»¥æœ‰ä¸åŒçš„ç½‘ç»œåœ°å€ï¼Œå„ä¸ªå¾®æœåŠ¡ä¹‹é—´é€šè¿‡äº’ç›¸è°ƒç”¨å®Œæˆç”¨æˆ·è¯·æ±‚ï¼Œå®¢æˆ·ç«¯å¯èƒ½é€šè¿‡è°ƒç”¨Nä¸ªå¾®æœåŠ¡çš„æ¥å£å®Œæˆä¸€ä¸ªç”¨æˆ·è¯·æ±‚ã€‚</p><p>â€‹        â€¢å­˜åœ¨çš„é—®é¢˜ï¼š</p><p>â€‹                â€¢å®¢æˆ·ç«¯å¤šæ¬¡è¯·æ±‚ä¸åŒçš„å¾®æœåŠ¡ï¼Œå¢åŠ å®¢æˆ·ç«¯çš„å¤æ‚æ€§</p><p>â€‹                â€¢è®¤è¯å¤æ‚ï¼Œæ¯ä¸ªæœåŠ¡éƒ½è¦è¿›è¡Œè®¤è¯</p><p>â€‹                â€¢httpè¯·æ±‚ä¸åŒæœåŠ¡æ¬¡æ•°å¢åŠ ï¼Œæ€§èƒ½ä¸é«˜</p><p>â€‹                â€¢ç½‘å…³å°±æ˜¯ç³»ç»Ÿçš„å…¥å£ï¼Œå°è£…äº†åº”ç”¨ç¨‹åºçš„å†…éƒ¨ç»“æ„ï¼Œä¸ºå®¢æˆ·ç«¯æ</p><p>  ä¾›ç»Ÿä¸€æœåŠ¡ï¼Œä¸€äº›ä¸ä¸šåŠ¡æœ¬èº«åŠŸèƒ½æ— å…³çš„å…¬å…±é€»è¾‘å¯ä»¥åœ¨è¿™é‡Œå®ç°ï¼Œ</p><p>  è¯¸å¦‚è®¤è¯ã€é‰´æƒã€ç›‘æ§ã€ç¼“å­˜ã€è´Ÿè½½å‡è¡¡ã€æµé‡ç®¡æ§ã€è·¯ç”±è½¬å‘ç­‰</p><p>â€‹    â€¢åœ¨ç›®å‰çš„ç½‘å…³è§£å†³æ–¹æ¡ˆé‡Œï¼Œæœ‰Nginx+ Luaã€Netflix Zuul ã€Spring Cloud Gatewayç­‰ç­‰</p><p><img src="https://s2.loli.net/2022/05/01/aUgFW2f6DqTCtIe.png" alt="image-20220501162810042"></p><h2 id="Gateway-ç½‘å…³å¿«é€Ÿå…¥é—¨"><a href="#Gateway-ç½‘å…³å¿«é€Ÿå…¥é—¨" class="headerlink" title="Gateway ç½‘å…³å¿«é€Ÿå…¥é—¨"></a><strong>Gateway</strong> <strong>ç½‘å…³å¿«é€Ÿå…¥é—¨</strong></h2><p>1.æ­å»ºç½‘å…³æ¨¡å—</p><p>2.å¼•å…¥ä¾èµ–ï¼šstarter-gateway</p><p>3.ç¼–å†™å¯åŠ¨ç±»</p><p>4.ç¼–å†™é…ç½®æ–‡ä»¶</p><p>5.å¯åŠ¨æµ‹è¯•</p><h2 id="Gateway-ç½‘å…³è·¯ç”±é…ç½®-â€“-é™æ€è·¯ç”±"><a href="#Gateway-ç½‘å…³è·¯ç”±é…ç½®-â€“-é™æ€è·¯ç”±" class="headerlink" title="Gateway ç½‘å…³è·¯ç”±é…ç½® â€“ é™æ€è·¯ç”±"></a><strong>Gateway</strong> <strong>ç½‘å…³è·¯ç”±é…ç½®</strong> <strong>â€“</strong> <strong>é™æ€è·¯ç”±</strong></h2><p>â€¢å¼•å…¥eureka-clienté…ç½®</p><p>â€¢ä¿®æ”¹uriå±æ€§ï¼šuri: lb:&#x2F;&#x2F;æœåŠ¡åç§°</p><p><strong>spring</strong>:<br>  <strong>cloud</strong>:<br>    <strong>discovery</strong>:<br>     <strong>locator</strong>:<br>      <strong>enabled</strong>: true <em>#</em> *å¼€å¯å¾®æœå‘ç°åŠŸèƒ½<br>*      <strong>lower-case-service-id</strong>: true <em>#</em> <em>è®²è¯·æ±‚è·¯å¾„ä¸Šçš„æœåŠ¡åé…ç½®ä¸ºå°å†™</em></p><h2 id="Gateway-è¿‡æ»¤å™¨"><a href="#Gateway-è¿‡æ»¤å™¨" class="headerlink" title="Gateway è¿‡æ»¤å™¨"></a><strong>Gateway</strong> <strong>è¿‡æ»¤å™¨</strong></h2><p>â€¢Gateway æ”¯æŒè¿‡æ»¤å™¨åŠŸèƒ½ï¼Œå¯¹è¯·æ±‚æˆ–å“åº”è¿›è¡Œæ‹¦æˆªï¼Œå®Œæˆä¸€äº›é€šç”¨æ“ä½œã€‚</p><p>â€¢Gateway æä¾›ä¸¤ç§è¿‡æ»¤å™¨æ–¹å¼ï¼šâ€œpreâ€å’Œâ€œpostâ€</p><p>â€¢pre è¿‡æ»¤å™¨ï¼Œåœ¨è½¬å‘ä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥åšå‚æ•°æ ¡éªŒã€æƒé™æ ¡éªŒã€æµé‡ç›‘æ§ã€æ—¥å¿—è¾“å‡ºã€åè®®è½¬æ¢ç­‰ã€‚</p><p>â€¢post è¿‡æ»¤å™¨ï¼Œåœ¨å“åº”ä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥åšå“åº”å†…å®¹ã€å“åº”å¤´çš„ä¿®æ”¹ï¼Œæ—¥å¿—çš„è¾“å‡ºï¼Œæµé‡ç›‘æ§ç­‰ã€‚</p><p>â€¢Gateway è¿˜æä¾›äº†ä¸¤ç§ç±»å‹è¿‡æ»¤å™¨</p><p>â€¢GatewayFilterï¼šå±€éƒ¨è¿‡æ»¤å™¨ï¼Œé’ˆå¯¹å•ä¸ªè·¯ç”±</p><p>â€¢GlobalFilter ï¼šå…¨å±€è¿‡æ»¤å™¨ï¼Œé’ˆå¯¹æ‰€æœ‰è·¯ç”±</p><p><img src="https://s2.loli.net/2022/05/01/SwasqvpCbIn2KmR.png" alt="image-20220501162913568"></p><h3 id="Gateway-è¿‡æ»¤å™¨-â€“-å±€éƒ¨è¿‡æ»¤å™¨"><a href="#Gateway-è¿‡æ»¤å™¨-â€“-å±€éƒ¨è¿‡æ»¤å™¨" class="headerlink" title="Gateway è¿‡æ»¤å™¨ â€“ å±€éƒ¨è¿‡æ»¤å™¨"></a><strong>Gateway</strong> <strong>è¿‡æ»¤å™¨</strong> <strong>â€“</strong> <strong>å±€éƒ¨è¿‡æ»¤å™¨</strong></h3><p>â€¢GatewayFilter å±€éƒ¨è¿‡æ»¤å™¨ï¼Œæ˜¯é’ˆå¯¹å•ä¸ªè·¯ç”±çš„è¿‡æ»¤å™¨ã€‚</p><p>â€¢åœ¨Spring Cloud Gateway ç»„ä»¶ä¸­æä¾›äº†å¤§é‡å†…ç½®çš„å±€éƒ¨è¿‡æ»¤å™¨ï¼Œå¯¹è¯·æ±‚å’Œå“åº”åšè¿‡æ»¤æ“ä½œã€‚</p><p>â€¢éµå¾ªçº¦å®šå¤§äºé…ç½®çš„æ€æƒ³ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶é…ç½®å±€éƒ¨è¿‡æ»¤å™¨åç§°ï¼Œå¹¶ä¸ºå…¶æŒ‡å®šå¯¹åº”çš„å€¼ï¼Œå°±å¯ä»¥è®©å…¶ç”Ÿæ•ˆã€‚</p><h3 id="Gateway-è¿‡æ»¤å™¨-â€“-å…¨å±€è¿‡æ»¤å™¨"><a href="#Gateway-è¿‡æ»¤å™¨-â€“-å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="Gateway è¿‡æ»¤å™¨ â€“ å…¨å±€è¿‡æ»¤å™¨"></a><strong>Gateway</strong> <strong>è¿‡æ»¤å™¨</strong> <strong>â€“</strong> <strong>å…¨å±€è¿‡æ»¤å™¨</strong></h3><p>â€¢GlobalFilter å…¨å±€è¿‡æ»¤å™¨ï¼Œä¸éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œç³»ç»Ÿåˆå§‹åŒ–æ—¶åŠ è½½ï¼Œå¹¶ä½œç”¨åœ¨æ¯ä¸ªè·¯ç”±ä¸Šã€‚</p><p>â€¢Spring Cloud Gateway æ ¸å¿ƒçš„åŠŸèƒ½ä¹Ÿæ˜¯é€šè¿‡å†…ç½®çš„å…¨å±€è¿‡æ»¤å™¨æ¥å®Œæˆã€‚</p><p>â€¢è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨æ­¥éª¤ï¼š</p><p>1.å®šä¹‰ç±»å®ç° GlobalFilter å’Œ Orderedæ¥å£</p><p>2.å¤å†™æ–¹æ³•</p><p>3.å®Œæˆé€»è¾‘å¤„ç†</p><p><img src="https://s2.loli.net/2022/05/01/roRMik4K8wBVd21.png" alt="image-20220501163000168"></p><h1 id="Config-åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ"><a href="#Config-åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ" class="headerlink" title="Config****åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ"></a><strong>Config****åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ</strong></h1><h2 id="lConfig-æ¦‚è¿°"><a href="#lConfig-æ¦‚è¿°" class="headerlink" title="lConfig æ¦‚è¿°"></a>lConfig æ¦‚è¿°</h2><p>â€¢Spring Cloud Config è§£å†³äº†åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹å¤šç¯å¢ƒé…ç½®æ–‡ä»¶çš„ç®¡ç†å’Œç»´æŠ¤ã€‚</p><p>â€¢å¥½å¤„ï¼š</p><p>â€¢é›†ä¸­ç®¡ç†é…ç½®æ–‡ä»¶</p><p>â€¢ä¸åŒç¯å¢ƒä¸åŒé…ç½®ï¼ŒåŠ¨æ€åŒ–çš„é…ç½®æ›´æ–°</p><p>â€¢é…ç½®ä¿¡æ¯æ”¹å˜æ—¶ï¼Œä¸éœ€è¦é‡å¯å³å¯æ›´æ–°é…ç½®ä¿¡æ¯åˆ°æœåŠ¡</p><p><img src="https://s2.loli.net/2022/05/03/kzJMLBfjYIOCWal.png" alt="image-20220503102824773"></p><h2 id="Config-å¿«é€Ÿå…¥é—¨"><a href="#Config-å¿«é€Ÿå…¥é—¨" class="headerlink" title="Config å¿«é€Ÿå…¥é—¨"></a><strong>Config</strong> <strong>å¿«é€Ÿå…¥é—¨</strong></h2><p><img src="https://s2.loli.net/2022/05/03/7ZFU8pxGeWVvIij.png" alt="image-20220503115523061"></p><h3 id="config-serverï¼š"><a href="#config-serverï¼š" class="headerlink" title="config serverï¼š"></a>config serverï¼š</h3><p>1.ä½¿ç”¨giteeåˆ›å»ºè¿œç¨‹ä»“åº“ï¼Œä¸Šä¼ é…ç½®æ–‡ä»¶</p><p>2.æ­å»º config server æ¨¡å—</p><p>3.å¯¼å…¥ config-server ä¾èµ–</p><p>4.ç¼–å†™é…ç½®ï¼Œè®¾ç½® gitee è¿œç¨‹ä»“åº“åœ°å€</p><p>5.æµ‹è¯•è®¿é—®è¿œç¨‹é…ç½®æ–‡ä»¶</p><h3 id="config-clientï¼š"><a href="#config-clientï¼š" class="headerlink" title="config clientï¼š"></a>config clientï¼š</h3><p>1.å¯¼å…¥ starter-config ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--config client --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2.é…ç½®config server åœ°å€ï¼Œè¯»å–é…ç½®æ–‡ä»¶åç§°ç­‰ä¿¡æ¯</p><p>åˆ›å»ºbootstrap.yml</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># é…ç½®config-serveråœ°å€</span><br><span class="hljs-comment"># é…ç½®è·å¾—é…ç½®æ–‡ä»¶çš„åç§°ç­‰ä¿¡æ¯</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">config:</span><br>      <span class="hljs-comment"># é…ç½®config-serveråœ°å€</span><br>      <span class="hljs-attr">uri:</span> <span class="hljs-string">http://localhost:9527</span><br>      <span class="hljs-comment"># é…ç½®è·å¾—é…ç½®æ–‡ä»¶çš„åç§°ç­‰ä¿¡æ¯</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">config</span> <span class="hljs-comment"># æ–‡ä»¶å</span><br>      <span class="hljs-attr">profile:</span> <span class="hljs-string">dev</span> <span class="hljs-comment"># profileæŒ‡å®šï¼Œ  config-dev.yml</span><br>      <span class="hljs-attr">label:</span> <span class="hljs-string">master</span> <span class="hljs-comment"># åˆ†æ”¯</span><br></code></pre></td></tr></table></figure><p>3.è·å–é…ç½®å€¼</p><p>4.å¯åŠ¨æµ‹è¯•</p><h2 id="Config-å®¢æˆ·ç«¯åˆ·æ–°"><a href="#Config-å®¢æˆ·ç«¯åˆ·æ–°" class="headerlink" title="Config å®¢æˆ·ç«¯åˆ·æ–°"></a><strong>Config</strong> <strong>å®¢æˆ·ç«¯åˆ·æ–°</strong></h2><p>1.åœ¨ config å®¢æˆ·ç«¯å¼•å…¥ actuator ä¾èµ–</p><p>2.è·å–é…ç½®ä¿¡æ¯ç±»ä¸Šï¼Œæ·»åŠ  <font color='red'>@RefreshScope</font> æ³¨è§£</p><p>3.æ·»åŠ é…ç½®</p><p>   management.endpoints.web.exposure.include: refresh</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">management:</span><br><span class="hljs-symbol">  endpoints:</span><br><span class="hljs-symbol">    web:</span><br><span class="hljs-symbol">      exposure:</span><br><span class="hljs-symbol">        include:</span> <span class="hljs-string">&#x27;*&#x27;</span><br></code></pre></td></tr></table></figure><p>4.ä½¿ç”¨curlå·¥å…·å‘é€postè¯·æ±‚</p><p>curl -X POST <a href="http://localhost:8001/actuator/refresh">http://localhost:8001/actuator/refresh</a> </p><h1 id="Config-é›†æˆ-Eureka"><a href="#Config-é›†æˆ-Eureka" class="headerlink" title="Config é›†æˆ Eureka"></a><strong>Config</strong> <strong>é›†æˆ</strong> <strong>Eureka</strong></h1><p><img src="https://s2.loli.net/2022/05/03/4RfckzGSsDA2VyU.png" alt="image-20220503122458180"></p><p>config-clienté…ç½®ï¼š</p><p><strong>spring</strong>:<br>  <strong>cloud</strong>:<br>   <strong>config</strong>:<br>    <strong>discovery</strong>:<br>     <strong>enabled</strong>: <strong>true</strong> **<br>**     <strong>service-id</strong>: config-server</p><p>config-serveré…ç½®:</p><p><strong>eureka</strong>:<br>  <strong>client</strong>:<br>   <strong>service-url</strong>:<br>    <strong>defaultZone</strong>: <a href="http://localhost:8761/eureka">http://localhost:8761/eureka</a></p><h1 id="Bus-æ¶ˆæ¯æ€»çº¿"><a href="#Bus-æ¶ˆæ¯æ€»çº¿" class="headerlink" title="Bus æ¶ˆæ¯æ€»çº¿"></a><strong>Bus</strong> <strong>æ¶ˆæ¯æ€»çº¿</strong></h1><h2 id="Bus-æ¦‚è¿°"><a href="#Bus-æ¦‚è¿°" class="headerlink" title="Bus æ¦‚è¿°"></a><strong>Bus</strong> <strong>æ¦‚è¿°</strong></h2><p>â€¢Spring Cloud Bus æ˜¯ç”¨è½»é‡çš„æ¶ˆæ¯ä¸­é—´ä»¶å°†åˆ†å¸ƒå¼çš„èŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œå¯ä»¥ç”¨äºå¹¿æ’­é…ç½®æ–‡ä»¶çš„æ›´æ”¹æˆ–è€…æœåŠ¡çš„ç›‘æ§ç®¡ç†ã€‚å…³é”®çš„æ€æƒ³å°±æ˜¯ï¼Œæ¶ˆæ¯æ€»çº¿å¯ä»¥ä¸ºå¾®æœåŠ¡åšç›‘æ§ï¼Œä¹Ÿå¯ä»¥å®ç°åº”ç”¨ç¨‹åºä¹‹é—´ç›¸é€šä¿¡ã€‚</p><p>â€¢Spring Cloud Bus å¯é€‰çš„æ¶ˆæ¯ä¸­é—´ä»¶åŒ…æ‹¬ RabbitMQ å’Œ Kafka ã€‚</p><p><img src="https://s2.loli.net/2022/05/03/Gm6C8oalfKFnPAB.png" alt="image-20220503125727873"></p><h2 id="RabbitMQ-å›é¡¾"><a href="#RabbitMQ-å›é¡¾" class="headerlink" title="RabbitMQ å›é¡¾"></a>RabbitMQ å›é¡¾</h2><p><img src="https://s2.loli.net/2022/05/03/aJCgTqxuriY1pFL.png" alt="image-20220503132739063"></p><p>RabbitMQ æä¾›äº† 6 ç§å·¥ä½œæ¨¡å¼ï¼šç®€å•æ¨¡å¼ã€work queuesã€Publish&#x2F;Subscribe å‘å¸ƒä¸è®¢é˜…æ¨¡å¼ã€Routing è·¯ç”±æ¨¡å¼ã€Topics ä¸»é¢˜æ¨¡å¼ã€RPC è¿œç¨‹è°ƒç”¨æ¨¡å¼ï¼ˆè¿œç¨‹è°ƒç”¨ï¼Œä¸å¤ªç®— MQï¼›æš‚ä¸ä½œä»‹ç»ï¼‰ã€‚</p><h2 id="Bus-å¿«é€Ÿå…¥é—¨"><a href="#Bus-å¿«é€Ÿå…¥é—¨" class="headerlink" title="Bus å¿«é€Ÿå…¥é—¨"></a><strong>Bus</strong> <strong>å¿«é€Ÿå…¥é—¨</strong></h2><p>1.åˆ†åˆ«åœ¨ config-server å’Œ config-clientä¸­å¼•å…¥ busä¾èµ–ï¼šbus-amqp</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- bus --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-bus-amqp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2.åˆ†åˆ«åœ¨ config-server å’Œ config-clientä¸­é…ç½® RabbitMQ</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">#é…ç½®rabbitmqä¿¡æ¯</span><br><span class="hljs-attr">rabbitmq:</span><br>  <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span><br>  <span class="hljs-attr">username:</span> <span class="hljs-string">guest</span><br>  <span class="hljs-attr">password:</span> <span class="hljs-string">guest</span><br>  <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/</span><br></code></pre></td></tr></table></figure><p>3.åœ¨config-serverä¸­è®¾ç½®æš´éœ²ç›‘æ§æ–­ç‚¹ï¼šbus-refresh</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-comment"># æš´éœ²busçš„åˆ·æ–°ç«¯ç‚¹</span><br><span class="hljs-attribute">management</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">endpoints</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">web</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-attribute">exposure</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-attribute">include</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&#x27;bus-refresh&#x27;</span><br></code></pre></td></tr></table></figure><p>4.å¯åŠ¨æµ‹è¯•</p><h1 id="Stream-æ¶ˆæ¯é©±åŠ¨"><a href="#Stream-æ¶ˆæ¯é©±åŠ¨" class="headerlink" title="Stream æ¶ˆæ¯é©±åŠ¨"></a><strong>Stream</strong> <strong>æ¶ˆæ¯é©±åŠ¨</strong></h1><h2 id="Stream-æ¦‚è¿°"><a href="#Stream-æ¦‚è¿°" class="headerlink" title="Stream æ¦‚è¿°"></a><strong>Stream</strong> <strong>æ¦‚è¿°</strong></h2><p>â€¢Spring Cloud Stream æ˜¯ä¸€ä¸ªæ„å»ºæ¶ˆæ¯é©±åŠ¨å¾®æœåŠ¡åº”ç”¨çš„æ¡†æ¶ã€‚</p><p>â€¢Stream è§£å†³äº†å¼€å‘äººå‘˜æ— æ„ŸçŸ¥çš„ä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶çš„é—®é¢˜ï¼Œå› ä¸ºStreamå¯¹æ¶ˆæ¯ä¸­é—´ä»¶çš„è¿›ä¸€æ­¥å°è£…ï¼Œå¯ä»¥åšåˆ°ä»£ç å±‚é¢å¯¹ä¸­é—´ä»¶çš„æ— æ„ŸçŸ¥ï¼Œç”šè‡³äºåŠ¨æ€çš„åˆ‡æ¢ä¸­é—´ä»¶ï¼Œä½¿å¾—å¾®æœåŠ¡å¼€å‘çš„é«˜åº¦è§£è€¦ï¼ŒæœåŠ¡å¯ä»¥å…³æ³¨æ›´å¤šè‡ªå·±çš„ä¸šåŠ¡æµç¨‹ã€‚</p><p>â€¢Spring Cloud Streamç›®å‰æ”¯æŒä¸¤ç§æ¶ˆæ¯ä¸­é—´ä»¶RabbitMQå’ŒKafka</p><p><img src="https://s2.loli.net/2022/05/03/5N3ysxI1K2PDrom.png" alt="image-20220503174608530"></p><p><img src="https://s2.loli.net/2022/05/03/Dz6Z9APRHU5LM7o.png" alt="image-20220503174614732"></p><h2 id="Stream-ç»„ä»¶"><a href="#Stream-ç»„ä»¶" class="headerlink" title="Stream ç»„ä»¶"></a><strong>Stream</strong> <strong>ç»„ä»¶</strong></h2><p>â€¢Spring Cloud Stream æ„å»ºçš„åº”ç”¨ç¨‹åºä¸æ¶ˆæ¯ä¸­é—´ä»¶ä¹‹é—´æ˜¯é€šè¿‡ç»‘å®šå™¨ Binder ç›¸å…³è”çš„ã€‚ç»‘å®šå™¨å¯¹äºåº”ç”¨ç¨‹åºè€Œè¨€èµ·åˆ°äº†<font color='red'>éš”ç¦»ä½œç”¨</font>ï¼Œ å®ƒä½¿å¾—ä¸åŒæ¶ˆæ¯ä¸­é—´ä»¶çš„å®ç°ç»†èŠ‚å¯¹åº”ç”¨ç¨‹åºæ¥è¯´æ˜¯é€æ˜çš„ã€‚</p><p>â€¢binding æ˜¯æˆ‘ä»¬é€šè¿‡é…ç½®æŠŠåº”ç”¨å’Œspring cloud stream çš„ binder ç»‘å®šåœ¨ä¸€èµ·</p><p>â€¢outputï¼šå‘é€æ¶ˆæ¯ Channelï¼Œå†…ç½® Sourceæ¥å£</p><p>â€¢inputï¼šæ¥æ”¶æ¶ˆæ¯ Channelï¼Œå†…ç½® Sinkæ¥å£</p><p><img src="https://s2.loli.net/2022/05/03/m3UeKMy4CpEWBNt.png" alt="image-20220503175049491"></p><h2 id="Stream-æ¶ˆæ¯ç”Ÿäº§è€…"><a href="#Stream-æ¶ˆæ¯ç”Ÿäº§è€…" class="headerlink" title="Stream æ¶ˆæ¯ç”Ÿäº§è€…"></a><strong>Stream</strong> <strong>æ¶ˆæ¯ç”Ÿäº§è€…</strong></h2><p>1.åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§è€…æ¨¡å—ï¼Œå¼•å…¥ä¾èµ– starter-stream-rabbit</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- stream --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-stream-rabbit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2.ç¼–å†™é…ç½®ï¼Œå®šä¹‰ binderï¼Œå’Œ bingings</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">stream:</span><br>      <span class="hljs-comment"># å®šä¹‰ç»‘å®šå™¨ï¼Œç»‘å®šåˆ°å“ªä¸ªæ¶ˆæ¯ä¸­é—´ä»¶ä¸Š</span><br>      <span class="hljs-attr">binders:</span><br>        <span class="hljs-attr">itheima_binder:</span> <span class="hljs-comment"># è‡ªå®šä¹‰çš„ç»‘å®šå™¨åç§°</span><br>          <span class="hljs-attr">type:</span> <span class="hljs-string">rabbit</span> <span class="hljs-comment"># ç»‘å®šå™¨ç±»å‹</span><br>          <span class="hljs-attr">environment:</span> <span class="hljs-comment"># æŒ‡å®šmqçš„ç¯å¢ƒ</span><br>            <span class="hljs-attr">spring:</span><br>              <span class="hljs-attr">rabbitmq:</span><br>                <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>                <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span><br>                <span class="hljs-attr">username:</span> <span class="hljs-string">guest</span><br>                <span class="hljs-attr">password:</span> <span class="hljs-string">guest</span><br>                <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/</span><br>      <span class="hljs-attr">bindings:</span><br>        <span class="hljs-attr">output:</span> <span class="hljs-comment"># channelåç§°</span><br>          <span class="hljs-attr">binder:</span> <span class="hljs-string">itheima_binder</span> <span class="hljs-comment">#æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªbinder</span><br>          <span class="hljs-attr">destination:</span> <span class="hljs-string">itheima_exchange</span> <span class="hljs-comment"># æ¶ˆæ¯ç›®çš„åœ°</span><br></code></pre></td></tr></table></figure><p>3.å®šä¹‰æ¶ˆæ¯å‘é€ä¸šåŠ¡ç±»ã€‚æ·»åŠ  @EnableBinding(Source.class)ï¼Œæ³¨å…¥MessageChannel <strong>output</strong> ï¼Œå®Œæˆæ¶ˆæ¯å‘é€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@EnableBinding(Source.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageProducer</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> MessageChannel output;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">msessage</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello stream~~~&quot;</span>;<br><br>        <span class="hljs-comment">//å‘é€æ¶ˆæ¯</span><br>        output.send(MessageBuilder.withPayload(msessage).build());<br><br>        System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯å‘é€æˆåŠŸ~~~&quot;</span>);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>4.ç¼–å†™å¯åŠ¨ç±»ï¼Œæµ‹è¯•</p><h2 id="Stream-æ¶ˆæ¯æ¶ˆè´¹è€…"><a href="#Stream-æ¶ˆæ¯æ¶ˆè´¹è€…" class="headerlink" title="Stream æ¶ˆæ¯æ¶ˆè´¹è€…"></a><strong>Stream</strong> <strong>æ¶ˆæ¯æ¶ˆè´¹è€…</strong></h2><p>1.åˆ›å»ºæ¶ˆæ¯æ¶ˆè´¹è€…æ¨¡å—ï¼Œå¼•å…¥ä¾èµ– starter-stream-rabbit</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- stream --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-stream-rabbit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2.ç¼–å†™é…ç½®ï¼Œå®šä¹‰ binderï¼Œå’Œ bingings</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">stream:</span><br>      <span class="hljs-comment"># å®šä¹‰ç»‘å®šå™¨ï¼Œç»‘å®šåˆ°å“ªä¸ªæ¶ˆæ¯ä¸­é—´ä»¶ä¸Š</span><br>      <span class="hljs-attr">binders:</span><br>        <span class="hljs-attr">itheima_binder:</span> <span class="hljs-comment"># è‡ªå®šä¹‰çš„ç»‘å®šå™¨åç§°</span><br>          <span class="hljs-attr">type:</span> <span class="hljs-string">rabbit</span> <span class="hljs-comment"># ç»‘å®šå™¨ç±»å‹</span><br>          <span class="hljs-attr">environment:</span> <span class="hljs-comment"># æŒ‡å®šmqçš„ç¯å¢ƒ</span><br>            <span class="hljs-attr">spring:</span><br>              <span class="hljs-attr">rabbitmq:</span><br>                <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>                <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span><br>                <span class="hljs-attr">username:</span> <span class="hljs-string">guest</span><br>                <span class="hljs-attr">password:</span> <span class="hljs-string">guest</span><br>                <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/</span><br>      <span class="hljs-attr">bindings:</span><br>        <span class="hljs-attr">input:</span> <span class="hljs-comment"># channelåç§°</span><br>          <span class="hljs-attr">binder:</span> <span class="hljs-string">itheima_binder</span> <span class="hljs-comment">#æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªbinder</span><br>          <span class="hljs-attr">destination:</span> <span class="hljs-string">itheima_exchange</span> <span class="hljs-comment"># æ¶ˆæ¯ç›®çš„åœ°</span><br></code></pre></td></tr></table></figure><p>3.å®šä¹‰æ¶ˆæ¯æ¥æ”¶ä¸šåŠ¡ç±»ã€‚æ·»åŠ  @EnableBinding(Sink.class)ï¼Œä½¿ç”¨@StreamListener(Sink.INPUT)ï¼Œå®Œæˆæ¶ˆæ¯æ¥æ”¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¶ˆæ¯æ¥æ”¶ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@EnableBinding(&#123;Sink.class&#125;)</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageListener</span> &#123;<br><br>    <span class="hljs-meta">@StreamListener(Sink.INPUT)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receive</span><span class="hljs-params">(Message message)</span>&#123;<br><br>        System.out.println(message);<br>        System.out.println(message.getPayload());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>4.ç¼–å†™å¯åŠ¨ç±»ï¼Œæµ‹è¯•</p><h1 id="Sleuth-Zipkin-é“¾è·¯è¿½è¸ª"><a href="#Sleuth-Zipkin-é“¾è·¯è¿½è¸ª" class="headerlink" title="Sleuth+Zipkin é“¾è·¯è¿½è¸ª"></a><strong>Sleuth+Zipkin</strong> <strong>é“¾è·¯è¿½è¸ª</strong></h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a><strong>æ¦‚è¿°</strong></h2><p>â€¢Spring Cloud Sleuth å…¶å®æ˜¯ä¸€ä¸ªå·¥å…·,å®ƒåœ¨æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­èƒ½è·Ÿè¸ªä¸€ä¸ªç”¨æˆ·è¯·æ±‚çš„è¿‡ç¨‹ï¼Œæ•è·è¿™äº›è·Ÿè¸ªæ•°æ®ï¼Œå°±èƒ½æ„å»ºå¾®æœåŠ¡çš„æ•´ä¸ªè°ƒç”¨é“¾çš„è§†å›¾ï¼Œè¿™æ˜¯è°ƒè¯•å’Œç›‘æ§å¾®æœåŠ¡çš„å…³é”®å·¥å…·ã€‚</p><p>â€¢è€—æ—¶åˆ†æ</p><p>â€¢å¯è§†åŒ–é”™è¯¯</p><p>â€¢é“¾è·¯ä¼˜åŒ–</p><p>â€¢Zipkin æ˜¯ Twitter çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒè‡´åŠ›äºæ”¶é›†æœåŠ¡çš„å®šæ—¶æ•°æ®ï¼Œä»¥è§£å†³å¾®æœåŠ¡æ¶æ„ä¸­çš„å»¶è¿Ÿé—®é¢˜ï¼ŒåŒ…æ‹¬æ•°æ®çš„æ”¶é›†ã€å­˜å‚¨ã€æŸ¥æ‰¾å’Œå±•ç°ã€‚</p><p><img src="https://s2.loli.net/2022/05/03/Z39FTEyRVtDq8oM.png" alt="image-20220503204826627"></p><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a><strong>å¿«é€Ÿå…¥é—¨</strong></h2><p>1.å®‰è£…å¯åŠ¨zipkinã€‚ java â€“jar zipkin.jar</p><p>2.è®¿é—®zipkin webç•Œé¢ã€‚ <a href="http://localhost:9411/">http://localhost:9411/</a></p><p>3.åœ¨æœåŠ¡æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹åˆ†åˆ«å¼•å…¥ sleuth å’Œ zipkin ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- sleuth-zipkin  å¯ä¸è¦--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-sleuth<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- zipkinå·²ç»ä¾èµ–äº†sleuth-zipkin --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>4.åˆ†åˆ«é…ç½®æœåŠ¡æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">æœåŠ¡æ–¹</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://localhost:8761/eureka</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">feign-provider</span><br>  <span class="hljs-attr">zipkin:</span><br>    <span class="hljs-attr">base-url:</span> <span class="hljs-string">http://localhost:9411/</span>  <span class="hljs-comment"># è®¾ç½®zipkinçš„æœåŠ¡ç«¯è·¯å¾„</span><br><br>  <span class="hljs-attr">sleuth:</span><br>    <span class="hljs-attr">sampler:</span><br>      <span class="hljs-attr">probability:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># é‡‡é›†ç‡ é»˜è®¤ 0.1 ç™¾åˆ†ä¹‹åã€‚</span><br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">æ¶ˆè´¹æ–¹</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">instance:</span><br>    <span class="hljs-attr">hostname:</span> <span class="hljs-string">localhost</span> <span class="hljs-comment"># ä¸»æœºå</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://localhost:8761/eureka</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">feign-consumer</span> <span class="hljs-comment"># è®¾ç½®å½“å‰åº”ç”¨çš„åç§°ã€‚å°†æ¥ä¼šåœ¨eurekaä¸­Applicationæ˜¾ç¤ºã€‚å°†æ¥éœ€è¦ä½¿ç”¨è¯¥åç§°æ¥è·å–è·¯å¾„</span><br>  <span class="hljs-attr">zipkin:</span><br>    <span class="hljs-attr">base-url:</span> <span class="hljs-string">http://localhost:9411/</span>  <span class="hljs-comment"># è®¾ç½®zipkinçš„æœåŠ¡ç«¯è·¯å¾„</span><br><br>  <span class="hljs-attr">sleuth:</span><br>    <span class="hljs-attr">sampler:</span><br>      <span class="hljs-attr">probability:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># é‡‡é›†ç‡ é»˜è®¤ 0.1 ç™¾åˆ†ä¹‹åã€‚</span><br><br><br><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">level:</span><br>    <span class="hljs-attr">com.itheima:</span> <span class="hljs-string">debug</span><br></code></pre></td></tr></table></figure><p>5.å¯åŠ¨ï¼Œæµ‹è¯•</p>]]></content>
    
    
    <categories>
      
      <category>SpringCloudğŸ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringCloudğŸ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Turbineèšåˆç›‘æ§</title>
    <link href="/Hexo/2022/05/02/Turbine%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4/"/>
    <url>/Hexo/2022/05/02/Turbine%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4/</url>
    
    <content type="html"><![CDATA[<h2 id="Turbineèšåˆç›‘æ§"><a href="#Turbineèšåˆç›‘æ§" class="headerlink" title="Turbineèšåˆç›‘æ§"></a>Turbineèšåˆç›‘æ§</h2><h3 id="ä¸€ã€æ­å»ºç›‘æ§æ¨¡å—"><a href="#ä¸€ã€æ­å»ºç›‘æ§æ¨¡å—" class="headerlink" title="ä¸€ã€æ­å»ºç›‘æ§æ¨¡å—"></a>ä¸€ã€æ­å»ºç›‘æ§æ¨¡å—</h3><p><strong>1. åˆ›å»ºç›‘æ§æ¨¡å—</strong></p><p>åˆ›å»ºhystrix-monitoræ¨¡å—ï¼Œä½¿ç”¨Turbineèšåˆç›‘æ§å¤šä¸ªHystrix dashboardåŠŸèƒ½,</p><p><strong>2. å¼•å…¥Turbineèšåˆç›‘æ§èµ·æ­¥ä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hystrix-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hystrix-monitor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix-dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-turbine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>3. ä¿®æ”¹application.yml</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application.name:</span> <span class="hljs-string">hystrix-monitor</span><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8769</span><br><span class="hljs-attr">turbine:</span><br>  <span class="hljs-attr">combine-host-port:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-comment"># é…ç½®éœ€è¦ç›‘æ§çš„æœåŠ¡åç§°åˆ—è¡¨</span><br>  <span class="hljs-attr">app-config:</span> <span class="hljs-string">hystrix-provider,hystrix-consumer</span><br>  <span class="hljs-attr">cluster-name-expression:</span> <span class="hljs-string">&quot;&#x27;default&#x27;&quot;</span><br>  <span class="hljs-attr">aggregator:</span><br>    <span class="hljs-attr">cluster-config:</span> <span class="hljs-string">default</span><br>  <span class="hljs-comment">#instanceUrlSuffix: /actuator/hystrix.stream</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">serviceUrl:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://localhost:8761/eureka/</span><br><br></code></pre></td></tr></table></figure><p><strong>4. åˆ›å»ºå¯åŠ¨ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><br><span class="hljs-meta">@EnableTurbine</span> <span class="hljs-comment">//å¼€å¯Turbine å¾ˆèšåˆç›‘æ§åŠŸèƒ½</span><br><span class="hljs-meta">@EnableHystrixDashboard</span> <span class="hljs-comment">//å¼€å¯Hystrixä»ªè¡¨ç›˜ç›‘æ§åŠŸèƒ½</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HystrixMonitorApp</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(HystrixMonitorApp.class, args);<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="äºŒã€ä¿®æ”¹è¢«ç›‘æ§æ¨¡å—"><a href="#äºŒã€ä¿®æ”¹è¢«ç›‘æ§æ¨¡å—" class="headerlink" title="äºŒã€ä¿®æ”¹è¢«ç›‘æ§æ¨¡å—"></a>äºŒã€ä¿®æ”¹è¢«ç›‘æ§æ¨¡å—</h3><p>éœ€è¦åˆ†åˆ«ä¿®æ”¹ hystrix-provider å’Œ hystrix-consumer æ¨¡å—ï¼š</p><p><strong>1ã€å¯¼å…¥ä¾èµ–ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix-dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>2ã€é…ç½®Bean</strong></p><p>æ­¤å¤„ä¸ºäº†æ–¹ä¾¿ï¼Œå°†å…¶é…ç½®åœ¨å¯åŠ¨ç±»ä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title function_">getServlet</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">HystrixMetricsStreamServlet</span> <span class="hljs-variable">streamServlet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HystrixMetricsStreamServlet</span>();<br>        <span class="hljs-type">ServletRegistrationBean</span> <span class="hljs-variable">registrationBean</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletRegistrationBean</span>(streamServlet);<br>        registrationBean.setLoadOnStartup(<span class="hljs-number">1</span>);<br>        registrationBean.addUrlMappings(<span class="hljs-string">&quot;/actuator/hystrix.stream&quot;</span>);<br>        registrationBean.setName(<span class="hljs-string">&quot;HystrixMetricsStreamServlet&quot;</span>);<br>        <span class="hljs-keyword">return</span> registrationBean;<br>    &#125;<br></code></pre></td></tr></table></figure><p><strong>3ã€å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£@EnableHystrixDashboard</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-meta">@EnableDiscoveryClient</span><br><span class="hljs-meta">@EnableEurekaClient</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableFeignClients</span> <br><span class="hljs-meta">@EnableHystrixDashboard</span> <span class="hljs-comment">// å¼€å¯Hystrixä»ªè¡¨ç›˜ç›‘æ§åŠŸèƒ½</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsumerApp</span> &#123;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(ConsumerApp.class,args);<br>    &#125;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title function_">getServlet</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">HystrixMetricsStreamServlet</span> <span class="hljs-variable">streamServlet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HystrixMetricsStreamServlet</span>();<br>        <span class="hljs-type">ServletRegistrationBean</span> <span class="hljs-variable">registrationBean</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletRegistrationBean</span>(streamServlet);<br>        registrationBean.setLoadOnStartup(<span class="hljs-number">1</span>);<br>        registrationBean.addUrlMappings(<span class="hljs-string">&quot;/actuator/hystrix.stream&quot;</span>);<br>        registrationBean.setName(<span class="hljs-string">&quot;HystrixMetricsStreamServlet&quot;</span>);<br>        <span class="hljs-keyword">return</span> registrationBean;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€å¯åŠ¨æµ‹è¯•"><a href="#ä¸‰ã€å¯åŠ¨æµ‹è¯•" class="headerlink" title="ä¸‰ã€å¯åŠ¨æµ‹è¯•"></a>ä¸‰ã€å¯åŠ¨æµ‹è¯•</h3><p><strong>1ã€å¯åŠ¨æœåŠ¡ï¼š</strong></p><ul><li><p>eureka-server</p></li><li><p>hystrix-provider</p></li><li><p>hystrix-consumer</p></li><li><p>hystrix-monitor</p></li></ul><p><strong>2ã€è®¿é—®ï¼š</strong></p><p>åœ¨æµè§ˆå™¨è®¿é—®<a href="http://localhost:8769/hystrix/">http://localhost:8769/hystrix/</a> è¿›å…¥Hystrix Dashboardç•Œé¢</p><p><img src="https://s2.loli.net/2022/05/01/VaAlNCXsYkgJnw9.png" alt="1585421193757"></p><p>ç•Œé¢ä¸­è¾“å…¥ç›‘æ§çš„Urlåœ°å€ <a href="http://localhost:8769/turbine.stream%EF%BC%8C%E7%9B%91%E6%8E%A7%E6%97%B6%E9%97%B4%E9%97%B4%E9%9A%942000%E6%AF%AB%E7%A7%92%E5%92%8Ctitle%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE">http://localhost:8769/turbine.streamï¼Œç›‘æ§æ—¶é—´é—´éš”2000æ¯«ç§’å’Œtitleï¼Œå¦‚ä¸‹å›¾</a></p><p><img src="https://s2.loli.net/2022/05/01/m4wKPOM2fZ6NsSz.png" alt="1585421278837"></p><ul><li>å®å¿ƒåœ†ï¼šå®ƒæœ‰é¢œè‰²å’Œå¤§å°ä¹‹åˆ†ï¼Œåˆ†åˆ«ä»£è¡¨å®ä¾‹çš„ç›‘æ§ç¨‹åº¦å’Œæµé‡å¤§å°ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå®ƒçš„å¥åº·åº¦ä»ç»¿è‰²ã€é»„è‰²ã€æ©™è‰²ã€çº¢è‰²é€’å‡ã€‚é€šè¿‡è¯¥å®å¿ƒåœ†çš„å±•ç¤ºï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å¤§é‡çš„å®ä¾‹ä¸­å¿«é€Ÿçš„å‘ç°æ•…éšœå®ä¾‹å’Œé«˜å‹åŠ›å®ä¾‹ã€‚</li><li>æ›²çº¿ï¼šç”¨æ¥è®°å½• 2 åˆ†é’Ÿå†…æµé‡çš„ç›¸å¯¹å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥è§‚å¯Ÿåˆ°æµé‡çš„ä¸Šå‡å’Œä¸‹é™è¶‹åŠ¿ã€‚</li></ul><p><img src="https://pic.imgdb.cn/item/6373841c16f2c2beb196bcef.png" alt="1585421278837"></p>]]></content>
    
    
    <categories>
      
      <category>SpringCloudğŸ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringCloudğŸ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Eurakaé…ç½®è¯¦è§£</title>
    <link href="/Hexo/2022/05/02/Eureka%20%E5%85%A8%E9%83%A8%E9%85%8D%E7%BD%AE%20/"/>
    <url>/Hexo/2022/05/02/Eureka%20%E5%85%A8%E9%83%A8%E9%85%8D%E7%BD%AE%20/</url>
    
    <content type="html"><![CDATA[<h1 id="Eurakaé…ç½®è¯¦è§£"><a href="#Eurakaé…ç½®è¯¦è§£" class="headerlink" title="Eurakaé…ç½®è¯¦è§£"></a>Eurakaé…ç½®è¯¦è§£</h1><p>EurekaåŒ…å«å››ä¸ªéƒ¨åˆ†çš„é…ç½®</p><ol><li>instanceï¼šå½“å‰Eureka Instanceå®ä¾‹ä¿¡æ¯é…ç½®</li><li>clientï¼šEureka Clientå®¢æˆ·ç«¯ç‰¹æ€§é…ç½®</li><li>serverï¼šEureka Serveræ³¨å†Œä¸­å¿ƒç‰¹æ€§é…ç½®</li><li>dashboardï¼šEureka Serveræ³¨å†Œä¸­å¿ƒä»ªè¡¨ç›˜é…ç½®</li></ol><h2 id="Eureka-Instanceå®ä¾‹ä¿¡æ¯é…ç½®"><a href="#Eureka-Instanceå®ä¾‹ä¿¡æ¯é…ç½®" class="headerlink" title="Eureka Instanceå®ä¾‹ä¿¡æ¯é…ç½®"></a>Eureka Instanceå®ä¾‹ä¿¡æ¯é…ç½®</h2><p>Eureka Instanceçš„é…ç½®ä¿¡æ¯å…¨éƒ¨ä¿å­˜åœ¨org.springframework.cloud.netflix.eureka.EurekaInstanceConfigBeané…ç½®ç±»é‡Œï¼Œå®é™…ä¸Šå®ƒæ˜¯com.netflix.appinfo.EurekaInstanceConfigçš„å®ç°ç±»ï¼Œæ›¿ä»£äº†netflixçš„com.netflix.appinfo.CloudInstanceConfigçš„é»˜è®¤å®ç°ã€‚</p><p>Eureka Instanceçš„é…ç½®ä¿¡æ¯å…¨éƒ¨ä»¥eureka.instance.xxxçš„æ ¼å¼é…ç½®ã€‚</p><p><strong>é…ç½®åˆ—è¡¨</strong></p><ul><li>appname &#x3D; unknown</li></ul><p>åº”ç”¨åï¼Œé¦–å…ˆè·å–spring.application.nameçš„å€¼ï¼Œå¦‚æœå–å€¼ä¸ºç©ºï¼Œåˆ™å–é»˜è®¤unknownã€‚</p><ul><li>appGroupName &#x3D; null</li></ul><p>åº”ç”¨ç»„å</p><ul><li>instanceEnabledOnit &#x3D; false</li></ul><p>å®ä¾‹æ³¨å†Œåˆ°Eurekaä¸Šæ˜¯ï¼Œæ˜¯å¦ç«‹åˆ»å¼€å¯é€šè®¯ã€‚æœ‰æ—¶å€™åº”ç”¨åœ¨å‡†å¤‡å¥½æœåŠ¡ä¹‹å‰éœ€è¦ä¸€äº›é¢„å¤„ç†ã€‚</p><ul><li>nonSecurePort &#x3D; 80</li></ul><p>éå®‰å…¨çš„ç«¯å£</p><ul><li>securePort &#x3D; 443</li></ul><p>å®‰å…¨ç«¯å£</p><ul><li>nonSecurePortEnabled &#x3D; true</li></ul><p>æ˜¯å¦å¼€å¯éå®‰å…¨ç«¯å£é€šè®¯</p><ul><li>securePortEnabled &#x3D; false</li></ul><p>æ˜¯å¦å¼€å¯å®‰å…¨ç«¯å£é€šè®¯</p><ul><li>leaseRenewalIntervalInSeconds &#x3D; 30</li></ul><p>å®ä¾‹ç»­çº¦é—´éš”æ—¶é—´</p><ul><li>leaseExpirationDurationInSeconds &#x3D; 90</li></ul><p>å®ä¾‹è¶…æ—¶æ—¶é—´ï¼Œè¡¨ç¤ºæœ€å¤§leaseExpirationDurationInSecondsç§’åæ²¡æœ‰ç»­çº¦ï¼ŒServerå°±è®¤ä¸ºä»–ä¸å¯ç”¨äº†ï¼Œéšä¹‹å°±ä¼šå°†å…¶å‰”é™¤ã€‚</p><ul><li>virtualHostName &#x3D; unknown</li></ul><p>è™šæ‹Ÿä¸»æœºåï¼Œé¦–å…ˆè·å–spring.application.nameçš„å€¼ï¼Œå¦‚æœå–å€¼ä¸ºç©ºï¼Œåˆ™å–é»˜è®¤unknownã€‚</p><ul><li>instanceId</li></ul><p>æ³¨å†Œåˆ°eurekaä¸Šçš„å”¯ä¸€å®ä¾‹IDï¼Œä¸èƒ½ä¸ç›¸åŒappnameçš„å…¶ä»–å®ä¾‹é‡å¤ã€‚</p><ul><li>secureVirtualHostName &#x3D; unknown</li></ul><p>å®‰å…¨è™šæ‹Ÿä¸»æœºåï¼Œé¦–å…ˆè·å–spring.application.nameçš„å€¼ï¼Œå¦‚æœå–å€¼ä¸ºç©ºï¼Œåˆ™å–é»˜è®¤unknownã€‚</p><ul><li>metadataMap &#x3D; new HashMap();</li></ul><p>å®ä¾‹å…ƒæ•°æ®ï¼Œå¯ä»¥ä¾›å…¶ä»–å®ä¾‹ä½¿ç”¨ã€‚æ¯”å¦‚spring-boot-adminåœ¨ç›‘æ§æ—¶ï¼Œè·å–å®ä¾‹çš„ä¸Šä¸‹æ–‡å’Œç«¯å£ã€‚</p><ul><li>dataCenterInfo &#x3D; new MyDataCenterInfo(DataCenterInfo.Name.MyOwn);</li></ul><p>å®ä¾‹éƒ¨ç½²çš„æ•°æ®ä¸­å¿ƒã€‚å¦‚AWSã€MyOwnã€‚</p><ul><li>ipAddress&#x3D;null</li></ul><p>å®ä¾‹çš„IPåœ°å€</p><ul><li>statusPageUrlPath &#x3D; â€œ&#x2F;actuator&#x2F;infoâ€</li></ul><p>å®ä¾‹çŠ¶æ€é¡µç›¸å¯¹url</p><ul><li>statusPageUrl &#x3D; null</li></ul><p>å®ä¾‹çŠ¶æ€é¡µç»å¯¹URL</p><ul><li>homePageUrlPath &#x3D; â€œ&#x2F;â€œ</li></ul><p>å®ä¾‹ä¸»é¡µç›¸å¯¹URL</p><ul><li>homePageUrl &#x3D; null</li></ul><p>å®ä¾‹ä¸»é¡µç»å¯¹URL</p><ul><li>healthCheckUrlUrlPath &#x3D; â€œ&#x2F;actuator&#x2F;healthâ€</li></ul><p>å®ä¾‹å¥åº·æ£€æŸ¥ç›¸å¯¹URL</p><ul><li>healthCheckUrl &#x3D; null</li></ul><p>å®ä¾‹å¥åº·æ£€æŸ¥ç»å¯¹URL</p><ul><li>secureHealthCheckUrl &#x3D; null</li></ul><p>å®ä¾‹å®‰å…¨çš„å¥åº·æ£€æŸ¥ç»å¯¹URL</p><ul><li>namespace &#x3D; â€œeurekaâ€</li></ul><p>é…ç½®å±æ€§çš„å‘½åç©ºé—´ï¼ˆSpring Cloudä¸­è¢«å¿½ç•¥ï¼‰</p><ul><li>hostname &#x3D; null</li></ul><p>ä¸»æœºå,ä¸é…ç½®çš„æ—¶å€™è®²æ ¹æ®æ“ä½œç³»ç»Ÿçš„ä¸»æœºåæ¥è·å–</p><ul><li>preferIpAddress &#x3D; false</li></ul><p>æ˜¯å¦ä¼˜å…ˆä½¿ç”¨IPåœ°å€ä½œä¸ºä¸»æœºåçš„æ ‡è¯†</p><h2 id="Eureka-Clientå®¢æˆ·ç«¯ç‰¹æ€§é…ç½®"><a href="#Eureka-Clientå®¢æˆ·ç«¯ç‰¹æ€§é…ç½®" class="headerlink" title="Eureka Clientå®¢æˆ·ç«¯ç‰¹æ€§é…ç½®"></a>Eureka Clientå®¢æˆ·ç«¯ç‰¹æ€§é…ç½®</h2><p>Eureka Clientå®¢æˆ·ç«¯ç‰¹æ€§é…ç½®æ˜¯å¯¹ä½œä¸ºEurekaå®¢æˆ·ç«¯çš„ç‰¹æ€§é…ç½®ï¼ŒåŒ…æ‹¬Eurekaæ³¨å†Œä¸­å¿ƒï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªEureka Clientã€‚</p><p>Eureka Clientç‰¹æ€§é…ç½®å…¨éƒ¨åœ¨org.springframework.cloud.netflix.eureka.EurekaClientConfigBeanä¸­ï¼Œå®é™…ä¸Šå®ƒæ˜¯com.netflix.discovery.EurekaClientConfigçš„å®ç°ç±»ï¼Œæ›¿ä»£äº†netxflixçš„é»˜è®¤å®ç°ã€‚</p><p>Eureka Clientå®¢æˆ·ç«¯ç‰¹æ€§é…ç½®å…¨éƒ¨ä»¥eureka.client.xxxçš„æ ¼å¼é…ç½®ã€‚</p><p><strong>é…ç½®åˆ—è¡¨</strong></p><ul><li>enabled&#x3D;true</li></ul><p>æ˜¯å¦å¯ç”¨Eureka clientã€‚</p><ul><li>registryFetchIntervalSeconds&#x3D;30</li></ul><p>å®šæ—¶ä»Eureka Serveræ‹‰å–æœåŠ¡æ³¨å†Œä¿¡æ¯çš„é—´éš”æ—¶é—´</p><ul><li>instanceInfoReplicationIntervalSeconds&#x3D;30</li></ul><p>å®šæ—¶å°†å®ä¾‹ä¿¡æ¯ï¼ˆå¦‚æœå˜åŒ–äº†ï¼‰å¤åˆ¶åˆ°Eureka Serverçš„é—´éš”æ—¶é—´ã€‚ï¼ˆInstanceInfoReplicatorçº¿ç¨‹ï¼‰</p><ul><li>initialInstanceInfoReplicationIntervalSeconds&#x3D;40</li></ul><p>é¦–æ¬¡å°†å®ä¾‹ä¿¡æ¯å¤åˆ¶åˆ°Eureka Serverçš„å»¶è¿Ÿæ—¶é—´ã€‚ï¼ˆInstanceInfoReplicatorçº¿ç¨‹ï¼‰</p><ul><li>eurekaServiceUrlPollIntervalSeconds&#x3D;300</li></ul><p>æ‹‰å–Eureka Serveråœ°å€çš„é—´éš”æ—¶é—´ï¼ˆEureka Serveræœ‰å¯èƒ½å¢å‡ï¼‰</p><ul><li>proxyPort&#x3D;null</li></ul><p>Eureka Serverçš„ä»£ç†ç«¯å£</p><ul><li>proxyHost&#x3D;null</li></ul><p>Eureka Serverçš„ä»£ç†ä¸»æœºå</p><ul><li>proxyUserName&#x3D;null</li></ul><p>Eureka Serverçš„ä»£ç†ç”¨æˆ·å</p><ul><li>proxyPassword&#x3D;null</li></ul><p>Eureka Serverçš„ä»£ç†å¯†ç </p><ul><li>eurekaServerReadTimeoutSeconds&#x3D;8</li></ul><p>ä»Eureka Serverè¯»å–ä¿¡æ¯çš„è¶…æ—¶æ—¶é—´</p><ul><li>eurekaServerConnectTimeoutSeconds&#x3D;5</li></ul><p>è¿æ¥Eureka Serverçš„è¶…æ—¶æ—¶é—´</p><ul><li>backupRegistryImpl&#x3D;null</li></ul><p>Eureka Clientç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶è·å–æœåŠ¡æ³¨å†Œä¿¡æ¯çš„è°ƒç”¨çš„å›æº¯å®ç°ã€‚Eureka Clientå¯åŠ¨æ—¶é¦–æ¬¡ä¼šæ£€æŸ¥æœ‰æ²¡æœ‰BackupRegistryçš„å®ç°ç±»ï¼Œå¦‚æœæœ‰å®ç°ç±»ï¼Œåˆ™ä¼˜å…ˆä»è¿™ä¸ªå®ç°ç±»é‡Œè·å–æœåŠ¡æ³¨å†Œä¿¡æ¯ã€‚</p><ul><li>eurekaServerTotalConnections&#x3D;200</li></ul><p>Eureka clientè¿æ¥Eureka Serverçš„é“¾æ¥æ€»æ•°</p><ul><li>eurekaServerTotalConnectionsPerHost&#x3D;50</li></ul><p>Eureka clientè¿æ¥å•å°Eureka Serverçš„é“¾æ¥æ€»æ•°</p><ul><li>eurekaServerURLContext&#x3D;null</li></ul><p>å½“Eureka serverçš„åˆ—è¡¨åœ¨DNSä¸­æ—¶ï¼ŒEureka Serverçš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚å¦‚<a href="http://xxxx/eureka%E3%80%82">http://xxxx/eurekaã€‚</a></p><ul><li>eurekaServerPort&#x3D;null</li></ul><p>å½“Eureka serverçš„åˆ—è¡¨åœ¨DNSä¸­æ—¶ï¼ŒEureka Serverçš„ç«¯å£ã€‚</p><ul><li>eurekaServerDNSName&#x3D;null</li></ul><p>å½“Eureka serverçš„åˆ—è¡¨åœ¨DNSä¸­æ—¶ï¼Œä¸”è¦é€šè¿‡DNSNameè·å–Eureka Serveråˆ—è¡¨æ—¶ï¼ŒDNSåå­—ã€‚</p><ul><li>region&#x3D;â€us-east-1â€</li></ul><p>å®ä¾‹æ‰€å±åŒºåŸŸã€‚</p><ul><li>eurekaConnectionIdleTimeoutSeconds &#x3D; 30</li></ul><p>Eureka Clientå’ŒEureka Serverä¹‹é—´çš„Httpè¿æ¥çš„ç©ºé—²è¶…æ—¶æ—¶é—´ã€‚</p><ul><li>heartbeatExecutorThreadPoolSize&#x3D;2</li></ul><p>å¿ƒè·³ï¼ˆç»­çº¦ï¼‰æ‰§è¡Œå™¨çº¿ç¨‹æ± å¤§å°ã€‚</p><ul><li>heartbeatExecutorExponentialBackOffBound&#x3D;10</li></ul><p>å¿ƒè·³æ‰§è¡Œå™¨åœ¨ç»­çº¦è¿‡ç¨‹ä¸­è¶…æ—¶åçš„å†æ¬¡æ‰§è¡Œç»­çº¦çš„æœ€å¤§å»¶è¿Ÿå€æ•°ã€‚é»˜è®¤æœ€å¤§å»¶è¿Ÿæ—¶é—´&#x3D;10 * eureka.instance.leaseRenewalIntervalInSeconds</p><ul><li>cacheRefreshExecutorThreadPoolSize&#x3D;2</li></ul><p>cacheRefreshExecutordçš„çº¿ç¨‹æ± å¤§å°ï¼ˆè·å–æ³¨å†Œä¿¡æ¯ï¼‰</p><ul><li>cacheRefreshExecutorExponentialBackOffBound&#x3D;10</li></ul><p>cacheRefreshExecutordçš„å†æ¬¡æ‰§è¡Œçš„æœ€å¤§å»¶è¿Ÿå€æ•°ã€‚é»˜è®¤æœ€å¤§å»¶è¿Ÿæ—¶é—´&#x3D;10 *eureka.client.registryFetchIntervalSeconds</p><ul><li>serviceUrl&#x3D; new HashMap();serviceUrl.put(DEFAULT_ZONE, DEFAULT_URL);</li></ul><p>Eureka Serverçš„åˆ†åŒºåœ°å€ã€‚é»˜è®¤æ·»åŠ äº†ä¸€ä¸ªdefualtZoneã€‚ä¹Ÿå°±æ˜¯æœ€å¸¸ç”¨çš„é…ç½®eureka.client.service-url.defaultZone&#x3D;xxx</p><ul><li>registerWithEureka&#x3D;true</li></ul><p>æ˜¯å¦æ³¨å†Œåˆ°Eureka Serverã€‚</p><ul><li>preferSameZoneEureka&#x3D;true</li></ul><p>æ˜¯å¦ä½¿ç”¨ç›¸åŒZoneä¸‹çš„Eureka serverã€‚</p><ul><li>logDeltaDiff&#x3D;false</li></ul><p>æ˜¯å¦è®°å½•Eureka Serverå’ŒEureka Clientä¹‹é—´æ³¨å†Œä¿¡æ¯çš„å·®å¼‚</p><ul><li>disableDelta&#x3D;false</li></ul><p>æ˜¯å¦å¼€å¯å¢é‡åŒæ­¥æ³¨å†Œä¿¡æ¯ã€‚</p><ul><li>fetchRemoteRegionsRegistry&#x3D;null</li></ul><p>è·å–æ³¨å†ŒæœåŠ¡çš„è¿œç¨‹åœ°åŒºï¼Œä»¥é€—å·éš”å¼€ã€‚</p><ul><li>availabilityZones&#x3D;new HashMap()</li></ul><p>å¯ç”¨åˆ†åŒºåˆ—è¡¨ã€‚ç”¨é€—å·éš”å¼€ã€‚</p><ul><li>filterOnlyUpInstances &#x3D; true</li></ul><p>æ˜¯å¦åªæ‹‰å–UPçŠ¶æ€çš„å®ä¾‹ã€‚</p><ul><li>fetchRegistry&#x3D;true</li></ul><p>æ˜¯å¦æ‹‰å–æ³¨å†Œä¿¡æ¯ã€‚</p><ul><li>shouldUnregisterOnShutdown &#x3D; true</li></ul><p>æ˜¯å¦åœ¨åœæ­¢æœåŠ¡çš„æ—¶å€™å‘Eureka Serverå‘èµ·CancelæŒ‡ä»¤ã€‚</p><ul><li>shouldEnforceRegistrationAtInit &#x3D; false</li></ul><p>æ˜¯å¦åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­æ³¨å†ŒæœåŠ¡ã€‚</p><h2 id="Eureka-Serveræ³¨å†Œä¸­å¿ƒç«¯é…ç½®"><a href="#Eureka-Serveræ³¨å†Œä¸­å¿ƒç«¯é…ç½®" class="headerlink" title="Eureka Serveræ³¨å†Œä¸­å¿ƒç«¯é…ç½®"></a>Eureka Serveræ³¨å†Œä¸­å¿ƒç«¯é…ç½®</h2><p>Eureka Serveræ³¨å†Œä¸­å¿ƒç«¯çš„é…ç½®æ˜¯å¯¹æ³¨å†Œä¸­å¿ƒçš„ç‰¹æ€§é…ç½®ã€‚Eureka Serverçš„é…ç½®å…¨éƒ¨åœ¨org.springframework.cloud.netflix.eureka.server.EurekaServerConfigBeané‡Œï¼Œå®é™…ä¸Šå®ƒæ˜¯com.netflix.eureka.EurekaServerConfigçš„å®ç°ç±»ï¼Œæ›¿ä»£äº†netflixçš„é»˜è®¤å®ç°ã€‚</p><p>Eureka Serverçš„é…ç½®å…¨éƒ¨ä»¥eureka.server.xxxçš„æ ¼å¼è¿›è¡Œé…ç½®ã€‚</p><p><strong>é…ç½®åˆ—è¡¨</strong></p><ul><li>enableSelfPreservation&#x3D;true</li></ul><p>æ˜¯å¦å¼€å¯è‡ªæˆ‘ä¿æŠ¤</p><ul><li>renewalPercentThreshold &#x3D; 0.85</li></ul><p>è‡ªæˆ‘ä¿æŠ¤ç»­çº¦ç™¾åˆ†æ¯”é˜€å€¼å› å­ã€‚å¦‚æœå®é™…ç»­çº¦æ•°å°äºç»­çº¦æ•°é˜€å€¼ï¼Œåˆ™å¼€å¯è‡ªæˆ‘ä¿æŠ¤</p><ul><li>renewalThresholdUpdateIntervalMs &#x3D; 15 * 60 * 1000</li></ul><p>ç»­çº¦æ•°é˜€å€¼æ›´æ–°é¢‘ç‡ã€‚</p><ul><li>peerEurekaNodesUpdateIntervalMs &#x3D; 10 * 60 * 1000</li></ul><p>Eureka ServerèŠ‚ç‚¹æ›´æ–°é¢‘ç‡ã€‚</p><ul><li>enableReplicatedRequestCompression &#x3D; false</li></ul><p>æ˜¯å¦å¯ç”¨å¤åˆ¶è¯·æ±‚å‹ç¼©ã€‚</p><ul><li>waitTimeInMsWhenSyncEmpty&#x3D;5 * 60 * 1000</li></ul><p>å½“ä»å…¶ä»–èŠ‚ç‚¹åŒæ­¥å®ä¾‹ä¿¡æ¯ä¸ºç©ºæ—¶ç­‰å¾…çš„æ—¶é—´ã€‚</p><ul><li>peerNodeConnectTimeoutMs&#x3D;200</li></ul><p>èŠ‚ç‚¹é—´è¿æ¥çš„è¶…æ—¶æ—¶é—´ã€‚</p><ul><li>peerNodeReadTimeoutMs&#x3D;200</li></ul><p>èŠ‚ç‚¹é—´è¯»å–ä¿¡æ¯çš„è¶…æ—¶æ—¶é—´ã€‚</p><ul><li>peerNodeTotalConnections&#x3D;1000</li></ul><p>èŠ‚ç‚¹é—´è¿æ¥æ€»æ•°ã€‚</p><ul><li>peerNodeTotalConnectionsPerHost &#x3D; 500;</li></ul><p>å•ä¸ªèŠ‚ç‚¹é—´è¿æ¥æ€»æ•°ã€‚</p><ul><li>peerNodeConnectionIdleTimeoutSeconds &#x3D; 30;</li></ul><p>èŠ‚ç‚¹é—´è¿æ¥ç©ºé—²è¶…æ—¶æ—¶é—´ã€‚</p><ul><li>retentionTimeInMSInDeltaQueue &#x3D; 3 * MINUTES;</li></ul><p>å¢é‡é˜Ÿåˆ—çš„ç¼“å­˜æ—¶é—´ã€‚</p><ul><li>deltaRetentionTimerIntervalInMs &#x3D; 30 * 1000;</li></ul><p>æ¸…ç†å¢é‡é˜Ÿåˆ—ä¸­è¿‡æœŸçš„é¢‘ç‡ã€‚</p><ul><li>evictionIntervalTimerInMs &#x3D; 60 * 1000;</li></ul><p>å‰”é™¤ä»»åŠ¡é¢‘ç‡ã€‚</p><ul><li>responseCacheAutoExpirationInSeconds &#x3D; 180;</li></ul><p>æ³¨å†Œåˆ—è¡¨ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆå½“æ³¨å†Œåˆ—è¡¨æ²¡æœ‰å˜åŒ–æ—¶ï¼‰</p><ul><li>responseCacheUpdateIntervalMs &#x3D; 30 * 1000;</li></ul><p>æ³¨å†Œåˆ—è¡¨ç¼“å­˜æ›´æ–°é¢‘ç‡ã€‚</p><ul><li>useReadOnlyResponseCache &#x3D; true;</li></ul><p>æ˜¯å¦å¼€å¯æ³¨å†Œåˆ—è¡¨çš„äºŒçº§ç¼“å­˜ã€‚</p><ul><li>disableDelta&#x3D;falseã€‚</li></ul><p>æ˜¯å¦ä¸ºclientæä¾›å¢é‡ä¿¡æ¯ã€‚</p><ul><li>maxThreadsForStatusReplication &#x3D; 1;</li></ul><p>çŠ¶æ€åŒæ­¥çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚</p><ul><li>maxElementsInStatusReplicationPool &#x3D; 10000;</li></ul><p>çŠ¶æ€åŒæ­¥é˜Ÿåˆ—çš„æœ€å¤§å®¹é‡ã€‚</p><ul><li>syncWhenTimestampDiffers &#x3D; true;</li></ul><p>å½“æ—¶é—´å·®å¼‚æ—¶æ˜¯å¦åŒæ­¥ã€‚</p><ul><li>registrySyncRetries &#x3D; 0;</li></ul><p>æ³¨å†Œä¿¡æ¯åŒæ­¥é‡è¯•æ¬¡æ•°ã€‚</p><ul><li>registrySyncRetryWaitMs &#x3D; 30 * 1000;</li></ul><p>æ³¨å†Œä¿¡æ¯åŒæ­¥é‡è¯•æœŸé—´çš„æ—¶é—´é—´éš”ã€‚</p><ul><li>maxElementsInPeerReplicationPool &#x3D; 10000;</li></ul><p>èŠ‚ç‚¹é—´åŒæ­¥äº‹ä»¶çš„æœ€å¤§å®¹é‡ã€‚</p><ul><li>minThreadsForPeerReplication &#x3D; 5;</li></ul><p>èŠ‚ç‚¹é—´åŒæ­¥çš„æœ€å°çº¿ç¨‹æ•°ã€‚</p><ul><li>maxThreadsForPeerReplication &#x3D; 20;</li></ul><p>èŠ‚ç‚¹é—´åŒæ­¥çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚</p><ul><li>maxTimeForReplication &#x3D; 30000;</li></ul><p>èŠ‚ç‚¹é—´åŒæ­¥çš„æœ€å¤§æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚</p><ul><li>disableDeltaForRemoteRegions &#x3D; falseï¼›</li></ul><p>æ˜¯å¦å¯ç”¨è¿œç¨‹åŒºåŸŸå¢é‡ã€‚</p><ul><li>remoteRegionConnectTimeoutMs &#x3D; 1000;</li></ul><p>è¿œç¨‹åŒºåŸŸè¿æ¥è¶…æ—¶æ—¶é—´ã€‚</p><ul><li>remoteRegionReadTimeoutMs &#x3D; 1000;</li></ul><p>è¿œç¨‹åŒºåŸŸè¯»å–è¶…æ—¶æ—¶é—´ã€‚</p><ul><li>remoteRegionTotalConnections &#x3D; 1000;</li></ul><p>è¿œç¨‹åŒºåŸŸæœ€å¤§è¿æ¥æ•°</p><ul><li>remoteRegionTotalConnectionsPerHost &#x3D; 500;</li></ul><p>è¿œç¨‹åŒºåŸŸå•æœºè¿æ¥æ•°</p><ul><li>remoteRegionConnectionIdleTimeoutSeconds &#x3D; 30;</li></ul><p>è¿œç¨‹åŒºåŸŸè¿æ¥ç©ºé—²è¶…æ—¶æ—¶é—´ã€‚</p><ul><li>remoteRegionRegistryFetchInterval &#x3D; 30;</li></ul><p>è¿œç¨‹åŒºåŸŸæ³¨å†Œä¿¡æ¯æ‹‰å–é¢‘ç‡ã€‚</p><ul><li>remoteRegionFetchThreadPoolSize &#x3D; 20;</li></ul><p>è¿œç¨‹åŒºåŸŸæ³¨å†Œä¿¡æ¯çº¿ç¨‹æ•°ã€‚</p><h2 id="Eureka-Serveræ³¨å†Œä¸­å¿ƒä»ªè¡¨ç›˜é…ç½®"><a href="#Eureka-Serveræ³¨å†Œä¸­å¿ƒä»ªè¡¨ç›˜é…ç½®" class="headerlink" title="Eureka Serveræ³¨å†Œä¸­å¿ƒä»ªè¡¨ç›˜é…ç½®"></a><strong>Eureka Serveræ³¨å†Œä¸­å¿ƒä»ªè¡¨ç›˜é…ç½®</strong></h2><p>æ³¨å†Œä¸­å¿ƒä»ªè¡¨ç›˜çš„é…ç½®ä¸»è¦æ˜¯æ§åˆ¶æ³¨å†Œä¸­å¿ƒçš„å¯è§†åŒ–å±•ç¤ºã€‚ä»¥eureka.dashboard.xxxçš„æ ¼å¼é…ç½®ã€‚</p><ul><li>path&#x3D;â€&#x2F;â€œ</li></ul><p>ä»ªè¡¨ç›˜è®¿é—®è·¯å¾„</p><ul><li>enabled&#x3D;true</li></ul><p>æ˜¯å¦å¯ç”¨ä»ªè¡¨ç›˜</p>]]></content>
    
    
    <categories>
      
      <category>SpringCloudğŸ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringCloudğŸ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Cloud Gateway å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚</title>
    <link href="/Hexo/2022/05/01/gateway%E5%86%85%E7%BD%AE%E8%BF%87%E6%BB%A4%E5%99%A8%E5%B7%A5%E5%8E%82/"/>
    <url>/Hexo/2022/05/01/gateway%E5%86%85%E7%BD%AE%E8%BF%87%E6%BB%A4%E5%99%A8%E5%B7%A5%E5%8E%82/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring-Cloud-Gateway-å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚"><a href="#Spring-Cloud-Gateway-å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚" class="headerlink" title="Spring Cloud Gateway å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚"></a>Spring Cloud Gateway å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚</h1><h3 id="å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚"><a href="#å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚" class="headerlink" title="å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚"></a>å†…ç½®çš„è¿‡æ»¤å™¨å·¥å‚</h3><p>è¿™é‡Œç®€å•å°†Spring Cloud Gatewayå†…ç½®çš„æ‰€æœ‰è¿‡æ»¤å™¨å·¥å‚æ•´ç†æˆäº†ä¸€å¼ è¡¨æ ¼ã€‚å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="left">è¿‡æ»¤å™¨å·¥å‚</th><th align="left">ä½œç”¨</th><th align="left">å‚æ•°</th></tr></thead><tbody><tr><td align="left">AddRequestHeader</td><td align="left">ä¸ºåŸå§‹è¯·æ±‚æ·»åŠ Header</td><td align="left">Headerçš„åç§°åŠå€¼</td></tr><tr><td align="left">AddRequestParameter</td><td align="left">ä¸ºåŸå§‹è¯·æ±‚æ·»åŠ è¯·æ±‚å‚æ•°</td><td align="left">å‚æ•°åç§°åŠå€¼</td></tr><tr><td align="left">AddResponseHeader</td><td align="left">ä¸ºåŸå§‹å“åº”æ·»åŠ Header</td><td align="left">Headerçš„åç§°åŠå€¼</td></tr><tr><td align="left">DedupeResponseHeader</td><td align="left">å‰”é™¤å“åº”å¤´ä¸­é‡å¤çš„å€¼</td><td align="left">éœ€è¦å»é‡çš„Headeråç§°åŠå»é‡ç­–ç•¥</td></tr><tr><td align="left">Hystrix</td><td align="left">ä¸ºè·¯ç”±å¼•å…¥Hystrixçš„æ–­è·¯å™¨ä¿æŠ¤</td><td align="left"><code>HystrixCommand</code>çš„åç§°</td></tr><tr><td align="left">FallbackHeaders</td><td align="left">ä¸ºfallbackUriçš„è¯·æ±‚å¤´ä¸­æ·»åŠ å…·ä½“çš„å¼‚å¸¸ä¿¡æ¯</td><td align="left">Headerçš„åç§°</td></tr><tr><td align="left">PrefixPath</td><td align="left">ä¸ºåŸå§‹è¯·æ±‚è·¯å¾„æ·»åŠ å‰ç¼€</td><td align="left">å‰ç¼€è·¯å¾„</td></tr><tr><td align="left">PreserveHostHeader</td><td align="left">ä¸ºè¯·æ±‚æ·»åŠ ä¸€ä¸ªpreserveHostHeader&#x3D;trueçš„å±æ€§ï¼Œè·¯ç”±è¿‡æ»¤å™¨ä¼šæ£€æŸ¥è¯¥å±æ€§ä»¥å†³å®šæ˜¯å¦è¦å‘é€åŸå§‹çš„Host</td><td align="left">æ— </td></tr><tr><td align="left">RequestRateLimiter</td><td align="left">ç”¨äºå¯¹è¯·æ±‚é™æµï¼Œé™æµç®—æ³•ä¸ºä»¤ç‰Œæ¡¶</td><td align="left">keyResolverã€rateLimiterã€statusCodeã€denyEmptyKeyã€emptyKeyStatus</td></tr><tr><td align="left">RedirectTo</td><td align="left">å°†åŸå§‹è¯·æ±‚é‡å®šå‘åˆ°æŒ‡å®šçš„URL</td><td align="left">httpçŠ¶æ€ç åŠé‡å®šå‘çš„url</td></tr><tr><td align="left">RemoveHopByHopHeadersFilter</td><td align="left">ä¸ºåŸå§‹è¯·æ±‚åˆ é™¤IETFç»„ç»‡è§„å®šçš„ä¸€ç³»åˆ—Header</td><td align="left">é»˜è®¤å°±ä¼šå¯ç”¨ï¼Œå¯ä»¥é€šè¿‡é…ç½®æŒ‡å®šä»…åˆ é™¤å“ªäº›Header</td></tr><tr><td align="left">RemoveRequestHeader</td><td align="left">ä¸ºåŸå§‹è¯·æ±‚åˆ é™¤æŸä¸ªHeader</td><td align="left">Headeråç§°</td></tr><tr><td align="left">RemoveResponseHeader</td><td align="left">ä¸ºåŸå§‹å“åº”åˆ é™¤æŸä¸ªHeader</td><td align="left">Headeråç§°</td></tr><tr><td align="left">RewritePath</td><td align="left">é‡å†™åŸå§‹çš„è¯·æ±‚è·¯å¾„</td><td align="left">åŸå§‹è·¯å¾„æ­£åˆ™è¡¨è¾¾å¼ä»¥åŠé‡å†™åè·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼</td></tr><tr><td align="left">RewriteResponseHeader</td><td align="left">é‡å†™åŸå§‹å“åº”ä¸­çš„æŸä¸ªHeader</td><td align="left">Headeråç§°ï¼Œå€¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé‡å†™åçš„å€¼</td></tr><tr><td align="left">SaveSession</td><td align="left">åœ¨è½¬å‘è¯·æ±‚ä¹‹å‰ï¼Œå¼ºåˆ¶æ‰§è¡Œ<code>WebSession::save</code>æ“ä½œ</td><td align="left">æ— </td></tr><tr><td align="left">secureHeaders</td><td align="left">ä¸ºåŸå§‹å“åº”æ·»åŠ ä¸€ç³»åˆ—èµ·å®‰å…¨ä½œç”¨çš„å“åº”å¤´</td><td align="left">æ— ï¼Œæ”¯æŒä¿®æ”¹è¿™äº›å®‰å…¨å“åº”å¤´çš„å€¼</td></tr><tr><td align="left">SetPath</td><td align="left">ä¿®æ”¹åŸå§‹çš„è¯·æ±‚è·¯å¾„</td><td align="left">ä¿®æ”¹åçš„è·¯å¾„</td></tr><tr><td align="left">SetResponseHeader</td><td align="left">ä¿®æ”¹åŸå§‹å“åº”ä¸­æŸä¸ªHeaderçš„å€¼</td><td align="left">Headeråç§°ï¼Œä¿®æ”¹åçš„å€¼</td></tr><tr><td align="left">SetStatus</td><td align="left">ä¿®æ”¹åŸå§‹å“åº”çš„çŠ¶æ€ç </td><td align="left">HTTP çŠ¶æ€ç ï¼Œå¯ä»¥æ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²</td></tr><tr><td align="left">StripPrefix</td><td align="left">ç”¨äºæˆªæ–­åŸå§‹è¯·æ±‚çš„è·¯å¾„</td><td align="left">ä½¿ç”¨æ•°å­—è¡¨ç¤ºè¦æˆªæ–­çš„è·¯å¾„çš„æ•°é‡</td></tr><tr><td align="left">Retry</td><td align="left">é’ˆå¯¹ä¸åŒçš„å“åº”è¿›è¡Œé‡è¯•</td><td align="left">retriesã€statusesã€methodsã€series</td></tr><tr><td align="left">RequestSize</td><td align="left">è®¾ç½®å…è®¸æ¥æ”¶æœ€å¤§è¯·æ±‚åŒ…çš„å¤§å°ã€‚å¦‚æœè¯·æ±‚åŒ…å¤§å°è¶…è¿‡è®¾ç½®çš„å€¼ï¼Œåˆ™è¿”å› <code>413 Payload Too Large</code></td><td align="left">è¯·æ±‚åŒ…å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œé»˜è®¤å€¼ä¸º5M</td></tr><tr><td align="left">ModifyRequestBody</td><td align="left">åœ¨è½¬å‘è¯·æ±‚ä¹‹å‰ä¿®æ”¹åŸå§‹è¯·æ±‚ä½“å†…å®¹</td><td align="left">ä¿®æ”¹åçš„è¯·æ±‚ä½“å†…å®¹</td></tr><tr><td align="left">ModifyResponseBody</td><td align="left">ä¿®æ”¹åŸå§‹å“åº”ä½“çš„å†…å®¹</td><td align="left">ä¿®æ”¹åçš„å“åº”ä½“å†…å®¹</td></tr><tr><td align="left">Default</td><td align="left">ä¸ºæ‰€æœ‰è·¯ç”±æ·»åŠ è¿‡æ»¤å™¨</td><td align="left">è¿‡æ»¤å™¨å·¥å‚åç§°åŠå€¼</td></tr></tbody></table><p><strong>Tipsï¼š</strong>æ¯ä¸ªè¿‡æ»¤å™¨å·¥å‚éƒ½å¯¹åº”ä¸€ä¸ªå®ç°ç±»ï¼Œå¹¶ä¸”è¿™äº›ç±»çš„åç§°å¿…é¡»ä»¥<code>GatewayFilterFactory</code>ç»“å°¾ï¼Œè¿™æ˜¯Spring Cloud Gatewayçš„ä¸€ä¸ªçº¦å®šï¼Œä¾‹å¦‚<code>AddRequestHeader</code>å¯¹åº”çš„å®ç°ç±»ä¸º<code>AddRequestHeaderGatewayFilterFactory</code>ã€‚</p><hr><h4 id="1ã€AddRequestHeader-GatewayFilter-Factory"><a href="#1ã€AddRequestHeader-GatewayFilter-Factory" class="headerlink" title="1ã€AddRequestHeader GatewayFilter Factory"></a>1ã€AddRequestHeader GatewayFilter Factory</h4><p>ä¸ºåŸå§‹è¯·æ±‚æ·»åŠ Headerï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">add_request_header_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">AddRequestHeader=X-Request-Foo,</span> <span class="hljs-string">Bar</span><br></code></pre></td></tr></table></figure><p>ä¸ºåŸå§‹è¯·æ±‚æ·»åŠ åä¸º <code>X-Request-Foo</code> ï¼Œå€¼ä¸º <code>Bar</code> çš„è¯·æ±‚å¤´</p><h4 id="2ã€AddRequestParameter-GatewayFilter-Factory"><a href="#2ã€AddRequestParameter-GatewayFilter-Factory" class="headerlink" title="2ã€AddRequestParameter GatewayFilter Factory"></a>2ã€AddRequestParameter GatewayFilter Factory</h4><p>ä¸ºåŸå§‹è¯·æ±‚æ·»åŠ è¯·æ±‚å‚æ•°åŠå€¼ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">add_request_parameter_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">AddRequestParameter=foo,</span> <span class="hljs-string">bar</span><br></code></pre></td></tr></table></figure><p>ä¸ºåŸå§‹è¯·æ±‚æ·»åŠ åä¸ºfooï¼Œå€¼ä¸ºbarçš„å‚æ•°ï¼Œå³ï¼š<code>foo=bar</code></p><h4 id="3ã€AddResponseHeader-GatewayFilter-Factory"><a href="#3ã€AddResponseHeader-GatewayFilter-Factory" class="headerlink" title="3ã€AddResponseHeader GatewayFilter Factory"></a>3ã€AddResponseHeader GatewayFilter Factory</h4><p>ä¸ºåŸå§‹å“åº”æ·»åŠ Headerï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">add_response_header_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">AddResponseHeader=X-Response-Foo,</span> <span class="hljs-string">Bar</span><br></code></pre></td></tr></table></figure><p>ä¸ºåŸå§‹å“åº”æ·»åŠ åä¸º <code>X-Request-Foo</code> ï¼Œå€¼ä¸º <code>Bar</code> çš„å“åº”å¤´</p><h4 id="4ã€DedupeResponseHeader-GatewayFilter-Factory"><a href="#4ã€DedupeResponseHeader-GatewayFilter-Factory" class="headerlink" title="4ã€DedupeResponseHeader GatewayFilter Factory"></a>4ã€DedupeResponseHeader GatewayFilter Factory</h4><p>DedupeResponseHeaderå¯ä»¥æ ¹æ®é…ç½®çš„Headeråç§°åŠå»é‡ç­–ç•¥å‰”é™¤å“åº”å¤´ä¸­é‡å¤çš„å€¼ï¼Œè¿™æ˜¯Spring Cloud Greenwich SR2æä¾›çš„æ–°ç‰¹æ€§ï¼Œä½äºè¿™ä¸ªç‰ˆæœ¬æ— æ³•ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬åœ¨Gatewayä»¥åŠå¾®æœåŠ¡ä¸Šéƒ½è®¾ç½®äº†CORSï¼ˆè§£å†³è·¨åŸŸï¼‰Headerçš„è¯ï¼Œå¦‚æœä¸åšä»»ä½•é…ç½®ï¼Œé‚£ä¹ˆè¯·æ±‚ -&gt; ç½‘å…³ -&gt; å¾®æœåŠ¡ï¼Œè·å¾—çš„CORS Headerçš„å€¼ï¼Œå°±å°†ä¼šæ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>Access-Control-Allow-Credentials: <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span><br>Access-Control-Allow-Origin: https://musk.mars, https://musk.mars<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªHeaderçš„å€¼éƒ½é‡å¤äº†ï¼Œè‹¥æƒ³æŠŠè¿™ä¸¤ä¸ªHeaderçš„å€¼å»é‡çš„è¯ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ°DedupeResponseHeaderï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">dedupe_response_header_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-comment"># è‹¥éœ€è¦å»é‡çš„Headeræœ‰å¤šä¸ªï¼Œä½¿ç”¨ç©ºæ ¼åˆ†éš”</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">DedupeResponseHeader=Access-Control-Allow-Credentials</span> <span class="hljs-string">Access-Control-Allow-Origin</span><br></code></pre></td></tr></table></figure><p>å»é‡ç­–ç•¥ï¼š</p><ul><li>RETAIN_FIRSTï¼šé»˜è®¤å€¼ï¼Œä¿ç•™ç¬¬ä¸€ä¸ªå€¼</li><li>RETAIN_LASTï¼šä¿ç•™æœ€åä¸€ä¸ªå€¼</li><li>RETAIN_UNIQUEï¼šä¿ç•™æ‰€æœ‰å”¯ä¸€å€¼ï¼Œä»¥å®ƒä»¬ç¬¬ä¸€æ¬¡å‡ºç°çš„é¡ºåºä¿ç•™</li></ul><p>è‹¥æƒ³å¯¹è¯¥è¿‡æ»¤å™¨å·¥å‚æœ‰ä¸ªæ¯”è¾ƒå…¨é¢çš„äº†è§£çš„è¯ï¼Œå»ºè®®é˜…è¯»è¯¥è¿‡æ»¤å™¨å·¥å‚çš„æºç ï¼Œå› ä¸ºæºç é‡Œæœ‰è¯¦ç»†çš„æ³¨é‡ŠåŠç¤ºä¾‹ï¼Œæ¯”å®˜æ–¹æ–‡æ¡£å†™å¾—è¿˜å¥½ï¼š<code>org.springframework.cloud.gateway.filter.factory.DedupeResponseHeaderGatewayFilterFactory</code></p><h4 id="5ã€Hystrix-GatewayFilter-Factory"><a href="#5ã€Hystrix-GatewayFilter-Factory" class="headerlink" title="5ã€Hystrix GatewayFilter Factory"></a>5ã€Hystrix GatewayFilter Factory</h4><p>ä¸ºè·¯ç”±å¼•å…¥Hystrixçš„æ–­è·¯å™¨ä¿æŠ¤ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">hystrix_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Hystrix=myCommandName</span><br></code></pre></td></tr></table></figure><p>Hystrixæ˜¯Spring Cloudç¬¬ä¸€ä»£å®¹é”™ç»„ä»¶ï¼Œä¸è¿‡å·²ç»è¿›å…¥ç»´æŠ¤æ¨¡å¼ï¼Œæœªæ¥Hystrixä¼šè¢«Spring Cloudç§»é™¤æ‰ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯Alibaba Sentinel&#x2F;Resilience4Jã€‚æ‰€ä»¥æœ¬æ–‡ä¸åšè¯¦ç»†ä»‹ç»äº†ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li><a href="https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#hystrix">Hystrix GatewayFilter Factory</a></li></ul><h4 id="6ã€FallbackHeaders-GatewayFilter-Factory"><a href="#6ã€FallbackHeaders-GatewayFilter-Factory" class="headerlink" title="6ã€FallbackHeaders GatewayFilter Factory"></a>6ã€FallbackHeaders GatewayFilter Factory</h4><p>åŒæ ·æ˜¯å¯¹Hystrixçš„æ”¯æŒï¼Œä¸Šä¸€å°èŠ‚æ‰€ä»‹ç»çš„è¿‡æ»¤å™¨å·¥å‚æ”¯æŒä¸€ä¸ªé…ç½®å‚æ•°ï¼š<code>fallbackUri</code>ï¼Œè¯¥é…ç½®ç”¨äºå½“å‘ç”Ÿå¼‚å¸¸æ—¶å°†è¯·æ±‚è½¬å‘åˆ°ä¸€ä¸ªç‰¹å®šçš„uriä¸Šã€‚è€Œ<code>FallbackHeaders</code>è¿™ä¸ªè¿‡æ»¤å·¥å‚å¯ä»¥åœ¨è½¬å‘è¯·æ±‚åˆ°è¯¥uriæ—¶æ·»åŠ ä¸€ä¸ªHeaderï¼Œè¿™ä¸ªHeaderçš„å€¼ä¸ºå…·ä½“çš„å¼‚å¸¸ä¿¡æ¯ã€‚é…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">ingredients</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://ingredients</span><br>        <span class="hljs-attr">predicates:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Path=//ingredients/**</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Hystrix</span><br>          <span class="hljs-attr">args:</span><br>            <span class="hljs-attr">name:</span> <span class="hljs-string">fetchIngredients</span><br>            <span class="hljs-attr">fallbackUri:</span> <span class="hljs-string">forward:/fallback</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">ingredients-fallback</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">http://localhost:9994</span><br>        <span class="hljs-attr">predicates:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/fallback</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">FallbackHeaders</span><br>          <span class="hljs-attr">args:</span><br>            <span class="hljs-attr">executionExceptionTypeHeaderName:</span> <span class="hljs-string">Test-Header</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œä¹Ÿä¸åšè¯¦ç»†ä»‹ç»äº†ï¼Œæ„Ÿå…´è¶£å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li><a href="https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#fallback-headers">FallbackHeaders GatewayFilter Factory</a></li></ul><h4 id="7ã€PrefixPath-GatewayFilter-Factory"><a href="#7ã€PrefixPath-GatewayFilter-Factory" class="headerlink" title="7ã€PrefixPath GatewayFilter Factory"></a>7ã€PrefixPath GatewayFilter Factory</h4><p>ä¸ºåŸå§‹çš„è¯·æ±‚è·¯å¾„æ·»åŠ ä¸€ä¸ªå‰ç¼€è·¯å¾„ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">prefixpath_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">PrefixPath=/mypath</span><br></code></pre></td></tr></table></figure><p>è¯¥é…ç½®ä½¿è®¿é—®<code>$&#123;GATEWAY_URL&#125;/hello</code> ä¼šè½¬å‘åˆ°<code>https://example.org/mypath/hello</code></p><h4 id="8ã€PreserveHostHeader-GatewayFilter-Factory"><a href="#8ã€PreserveHostHeader-GatewayFilter-Factory" class="headerlink" title="8ã€PreserveHostHeader GatewayFilter Factory"></a>8ã€PreserveHostHeader GatewayFilter Factory</h4><p>ä¸ºè¯·æ±‚æ·»åŠ ä¸€ä¸ªpreserveHostHeader&#x3D;trueçš„å±æ€§ï¼Œè·¯ç”±è¿‡æ»¤å™¨ä¼šæ£€æŸ¥è¯¥å±æ€§ä»¥å†³å®šæ˜¯å¦è¦å‘é€åŸå§‹çš„Host Headerã€‚é…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">preserve_host_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">PreserveHostHeader</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä¸è®¾ç½®ï¼Œé‚£ä¹ˆåä¸º <code>Host</code> çš„Headerå°†ç”±Http Clientæ§åˆ¶</p><h4 id="9ã€RequestRateLimiter-GatewayFilter-Factory"><a href="#9ã€RequestRateLimiter-GatewayFilter-Factory" class="headerlink" title="9ã€RequestRateLimiter GatewayFilter Factory"></a>9ã€RequestRateLimiter GatewayFilter Factory</h4><p>ç”¨äºå¯¹è¯·æ±‚è¿›è¡Œé™æµï¼Œé™æµç®—æ³•ä¸ºä»¤ç‰Œæ¡¶ã€‚é…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">requestratelimiter_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">RequestRateLimiter</span><br>          <span class="hljs-attr">args:</span><br>            <span class="hljs-attr">redis-rate-limiter.replenishRate:</span> <span class="hljs-number">10</span><br>            <span class="hljs-attr">redis-rate-limiter.burstCapacity:</span> <span class="hljs-number">20</span><br></code></pre></td></tr></table></figure><p>ç”±äºå¦ä¸€ç¯‡æ–‡ç« ä¸­å·²ç»ä»‹ç»è¿‡å¦‚ä½•ä½¿ç”¨è¯¥è¿‡æ»¤å™¨å·¥å‚å®ç°ç½‘å…³é™æµï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼š</p><ul><li><a href="https://blog.51cto.com/zero01/2430532">Spring Cloud Gateway - æ‰©å±•</a></li></ul><p>æˆ–è€…å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li><a href="https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#_requestratelimiter_gatewayfilter_factory">RequestRateLimiter GatewayFilter Factory</a></li></ul><h4 id="10ã€RedirectTo-GatewayFilter-Factory"><a href="#10ã€RedirectTo-GatewayFilter-Factory" class="headerlink" title="10ã€RedirectTo GatewayFilter Factory"></a>10ã€RedirectTo GatewayFilter Factory</h4><p>å°†åŸå§‹è¯·æ±‚é‡å®šå‘åˆ°æŒ‡å®šçš„Urlï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">redirect_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">RedirectTo=302,</span> <span class="hljs-string">https://acme.org</span><br></code></pre></td></tr></table></figure><p>è¯¥é…ç½®ä½¿è®¿é—® <code>$&#123;GATEWAY_URL&#125;/hello</code> ä¼šè¢«é‡å®šå‘åˆ° <code>https://acme.org/hello</code> ï¼Œå¹¶ä¸”æºå¸¦ä¸€ä¸ª <code>Location:http://acme.org</code> çš„Headerï¼Œè€Œè¿”å›å®¢æˆ·ç«¯çš„HTTPçŠ¶æ€ç ä¸º302</p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>HTTPçŠ¶æ€ç åº”ä¸º3xxï¼Œä¾‹å¦‚301</li><li>URLå¿…é¡»æ˜¯åˆæ³•çš„URLï¼Œè¯¥URLä¼šä½œä¸º<code>Location</code> Headerçš„å€¼</li></ul><h4 id="11ã€RemoveHopByHopHeadersFilter-GatewayFilter-Factory"><a href="#11ã€RemoveHopByHopHeadersFilter-GatewayFilter-Factory" class="headerlink" title="11ã€RemoveHopByHopHeadersFilter GatewayFilter Factory"></a>11ã€RemoveHopByHopHeadersFilter GatewayFilter Factory</h4><p>ä¸ºåŸå§‹è¯·æ±‚åˆ é™¤<a href="https://tools.ietf.org/html/draft-ietf-httpbis-p1-messaging-14#section-7.1.3">IETF</a>ç»„ç»‡è§„å®šçš„ä¸€ç³»åˆ—Headerï¼Œé»˜è®¤åˆ é™¤çš„Headerå¦‚ä¸‹ï¼š</p><ul><li>Connection</li><li>Keep-Alive</li><li>Proxy-Authenticate</li><li>Proxy-Authorization</li><li>TE</li><li>Trailer</li><li>Transfer-Encoding</li><li>Upgrade</li></ul><p>å¯ä»¥é€šè¿‡é…ç½®å»æŒ‡å®šä»…åˆ é™¤å“ªäº›Headerï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">filter:</span><br>        <span class="hljs-attr">remove-hop-by-hop:</span><br>          <span class="hljs-comment"># å¤šä¸ªHeaderä½¿ç”¨é€—å·ï¼ˆ,ï¼‰åˆ†éš”</span><br>          <span class="hljs-attr">headers:</span> <span class="hljs-string">Connection,Keep-Alive</span><br></code></pre></td></tr></table></figure><h4 id="12ã€RemoveRequestHeader-GatewayFilter-Factory"><a href="#12ã€RemoveRequestHeader-GatewayFilter-Factory" class="headerlink" title="12ã€RemoveRequestHeader GatewayFilter Factory"></a>12ã€RemoveRequestHeader GatewayFilter Factory</h4><p>ä¸ºåŸå§‹è¯·æ±‚åˆ é™¤æŸä¸ªHeaderï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">removerequestheader_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">RemoveRequestHeader=X-Request-Foo</span><br></code></pre></td></tr></table></figure><p>åˆ é™¤åŸå§‹è¯·æ±‚ä¸­åä¸º <code>X-Request-Foo</code> çš„è¯·æ±‚å¤´</p><h4 id="13ã€RemoveResponseHeader-GatewayFilter-Factory"><a href="#13ã€RemoveResponseHeader-GatewayFilter-Factory" class="headerlink" title="13ã€RemoveResponseHeader GatewayFilter Factory"></a>13ã€RemoveResponseHeader GatewayFilter Factory</h4><p>ä¸ºåŸå§‹å“åº”åˆ é™¤æŸä¸ªHeaderï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">removeresponseheader_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">RemoveResponseHeader=X-Response-Foo</span><br></code></pre></td></tr></table></figure><p>åˆ é™¤åŸå§‹å“åº”ä¸­åä¸º <code>X-Request-Foo</code> çš„å“åº”å¤´</p><h4 id="14ã€RewritePath-GatewayFilter-Factory"><a href="#14ã€RewritePath-GatewayFilter-Factory" class="headerlink" title="14ã€RewritePath GatewayFilter Factory"></a>14ã€RewritePath GatewayFilter Factory</h4><p>é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼é‡å†™åŸå§‹çš„è¯·æ±‚è·¯å¾„ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">rewritepath_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">predicates:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/foo/**</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-comment"># å‚æ•°1ä¸ºåŸå§‹è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå‚æ•°2ä¸ºé‡å†™åè·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">RewritePath=/foo/(?&lt;segment&gt;.*),</span> <span class="hljs-string">/$\&#123;segment&#125;</span><br><br></code></pre></td></tr></table></figure><p>è¯¥é…ç½®ä½¿å¾—è®¿é—® <code>/foo/bar</code> æ—¶ï¼Œä¼šå°†è·¯å¾„é‡å†™ä¸º<code>/bar</code> å†è¿›è¡Œè½¬å‘ï¼Œä¹Ÿå°±æ˜¯ä¼šè½¬å‘åˆ° <code>https://example.org/bar</code>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äºYAMLè¯­æ³•ï¼Œéœ€ç”¨<code>$\</code> æ›¿æ¢ <code>$</code></p><h4 id="15ã€RewriteResponseHeader-GatewayFilter-Factory"><a href="#15ã€RewriteResponseHeader-GatewayFilter-Factory" class="headerlink" title="15ã€RewriteResponseHeader GatewayFilter Factory"></a>15ã€RewriteResponseHeader GatewayFilter Factory</h4><p>é‡å†™åŸå§‹å“åº”ä¸­çš„æŸä¸ªHeaderï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">rewriteresponseheader_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-comment"># å‚æ•°1ä¸ºHeaderåç§°ï¼Œå‚æ•°2ä¸ºå€¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå‚æ•°3ä¸ºé‡å†™åçš„å€¼</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">RewriteResponseHeader=X-Response-Foo,</span> <span class="hljs-string">password=[^&amp;]+,</span> <span class="hljs-string">password=***</span><br><br></code></pre></td></tr></table></figure><p>è¯¥é…ç½®çš„æ„ä¹‰åœ¨äºï¼šå¦‚æœå“åº”å¤´ä¸­ <code>X-Response-Foo</code> çš„å€¼ä¸º<code>/42?user=ford&amp;password=omg!what&amp;flag=true</code>ï¼Œé‚£ä¹ˆå°±ä¼šè¢«æŒ‰ç…§é…ç½®çš„å€¼é‡å†™æˆ<code>/42?user=ford&amp;password=***&amp;flag=true</code>ï¼Œä¹Ÿå°±æ˜¯æŠŠå…¶ä¸­çš„<code>password=omg!what</code>é‡å†™æˆäº†<code>password=***</code></p><h4 id="16ã€SaveSession-GatewayFilter-Factory"><a href="#16ã€SaveSession-GatewayFilter-Factory" class="headerlink" title="16ã€SaveSession GatewayFilter Factory"></a>16ã€SaveSession GatewayFilter Factory</h4><p>åœ¨è½¬å‘è¯·æ±‚ä¹‹å‰ï¼Œå¼ºåˆ¶æ‰§è¡Œ<code>WebSession::save</code>æ“ä½œï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">save_session</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">predicates:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/foo/**</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">SaveSession</span><br><br></code></pre></td></tr></table></figure><p>ä¸»è¦ç”¨åœ¨é‚£ç§åƒ Spring Session å»¶è¿Ÿæ•°æ®å­˜å‚¨ï¼ˆæ•°æ®ä¸æ˜¯ç«‹åˆ»æŒä¹…åŒ–ï¼‰çš„ï¼Œå¹¶å¸Œæœ›åœ¨è¯·æ±‚è½¬å‘å‰ç¡®ä¿sessionçŠ¶æ€ä¿å­˜æƒ…å†µã€‚å¦‚æœä½ å°†Spring SecutiryäºSpring Sessioné›†æˆä½¿ç”¨ï¼Œå¹¶æƒ³ç¡®ä¿å®‰å…¨ä¿¡æ¯éƒ½ä¼ åˆ°ä¸‹æ¸¸æœºå™¨ï¼Œä½ å°±éœ€è¦é…ç½®è¿™ä¸ªfilterã€‚</p><h4 id="17ã€secureHeaders-GatewayFilter-Factory"><a href="#17ã€secureHeaders-GatewayFilter-Factory" class="headerlink" title="17ã€secureHeaders GatewayFilter Factory"></a>17ã€secureHeaders GatewayFilter Factory</h4><p>secureHeadersè¿‡æ»¤å™¨å·¥å‚ä¸»è¦æ˜¯å‚è€ƒäº†<a href="https://blog.appcanary.com/2017/http-security-headers.html">è¿™ç¯‡åšå®¢</a>ä¸­çš„å»ºè®®ï¼Œä¸ºåŸå§‹å“åº”æ·»åŠ äº†ä¸€ç³»åˆ—èµ·å®‰å…¨ä½œç”¨çš„å“åº”å¤´ã€‚é»˜è®¤ä¼šæ·»åŠ å¦‚ä¸‹Headersï¼ˆåŒ…æ‹¬å€¼ï¼‰ï¼š</p><ul><li><code>X-Xss-Protection:1; mode=block</code></li><li><code>Strict-Transport-Security:max-age=631138519</code></li><li><code>X-Frame-Options:DENY</code></li><li><code>X-Content-Type-Options:nosniff</code></li><li><code>Referrer-Policy:no-referrer</code></li><li><code>Content-Security-Policy:default-src &#39;self&#39; https:; font-src &#39;self&#39; https: data:; img-src &#39;self&#39; https: data:; object-src &#39;none&#39;; script-src https:; style-src &#39;self&#39; https: &#39;unsafe-inline&#39;</code></li><li><code>X-Download-Options:noopen</code></li><li><code>X-Permitted-Cross-Domain-Policies:none</code></li></ul><p>å¦‚æœä½ æƒ³ä¿®æ”¹è¿™äº›Headerçš„å€¼ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨è¿™äº›Headerså¯¹åº”çš„åç¼€ï¼Œå¦‚ä¸‹ï¼š</p><ul><li><code>xss-protection-header</code></li><li><code>strict-transport-security</code></li><li><code>frame-options</code></li><li><code>content-type-options</code></li><li><code>referrer-policy</code></li><li><code>content-security-policy</code></li><li><code>download-options</code></li><li><code>permitted-cross-domain-policies</code></li></ul><p>é…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">filter:</span><br>        <span class="hljs-attr">secure-headers:</span><br>          <span class="hljs-comment"># ä¿®æ”¹ X-Xss-Protection çš„å€¼ä¸º 2; mode=unblock</span><br>          <span class="hljs-attr">xss-protection-header:</span> <span class="hljs-number">2</span><span class="hljs-string">;</span> <span class="hljs-string">mode=unblock</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæƒ³ç¦ç”¨æŸäº›Headerï¼Œå¯ä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">filter:</span><br>        <span class="hljs-attr">secure-headers:</span><br>          <span class="hljs-comment"># å¤šä¸ªä½¿ç”¨é€—å·ï¼ˆ,ï¼‰åˆ†éš”</span><br>          <span class="hljs-attr">disable:</span> <span class="hljs-string">frame-options,download-options</span><br><br></code></pre></td></tr></table></figure><h4 id="18ã€SetPath-GatewayFilter-Factory"><a href="#18ã€SetPath-GatewayFilter-Factory" class="headerlink" title="18ã€SetPath GatewayFilter Factory"></a>18ã€SetPath GatewayFilter Factory</h4><p>ä¿®æ”¹åŸå§‹çš„è¯·æ±‚è·¯å¾„ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">setpath_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">predicates:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/foo/&#123;segment&#125;</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">SetPath=/&#123;segment&#125;</span><br><br></code></pre></td></tr></table></figure><p>è¯¥é…ç½®ä½¿è®¿é—® <code>$&#123;GATEWAY_URL&#125;/foo/bar</code> æ—¶ä¼šè½¬å‘åˆ° <code>https://example.org/bar</code> ï¼Œä¹Ÿå°±æ˜¯åŸæœ¬çš„<code>/foo/bar</code>è¢«ä¿®æ”¹ä¸ºäº†<code>/bar</code></p><h4 id="19ã€SetResponseHeader-GatewayFilter-Factory"><a href="#19ã€SetResponseHeader-GatewayFilter-Factory" class="headerlink" title="19ã€SetResponseHeader GatewayFilter Factory"></a>19ã€SetResponseHeader GatewayFilter Factory</h4><p>ä¿®æ”¹åŸå§‹å“åº”ä¸­æŸä¸ªHeaderçš„å€¼ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">setresponseheader_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">SetResponseHeader=X-Response-Foo,</span> <span class="hljs-string">Bar</span><br><br></code></pre></td></tr></table></figure><p>å°†åŸå§‹å“åº”ä¸­ <code>X-Response-Foo</code> çš„å€¼ä¿®æ”¹ä¸º <code>Bar</code></p><h4 id="20ã€SetStatus-GatewayFilter-Factory"><a href="#20ã€SetStatus-GatewayFilter-Factory" class="headerlink" title="20ã€SetStatus GatewayFilter Factory"></a>20ã€SetStatus GatewayFilter Factory</h4><p>ä¿®æ”¹åŸå§‹å“åº”çš„çŠ¶æ€ç ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">setstatusstring_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-comment"># å­—ç¬¦ä¸²å½¢å¼</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">SetStatus=BAD_REQUEST</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">setstatusint_route</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">https://example.org</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-comment"># æ•°å­—å½¢å¼</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">SetStatus=401</span><br></code></pre></td></tr></table></figure><p>SetStatusdçš„å€¼å¯ä»¥æ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€‚ä½†ä¸€å®šè¦æ˜¯Spring <code>HttpStatus</code> æšä¸¾ç±»ä¸­çš„å€¼ã€‚ä¸Šé¢è¿™ä¸¤ç§é…ç½®éƒ½å¯ä»¥è¿”å›401è¿™ä¸ªHTTPçŠ¶æ€ç ã€‚</p><h4 id="21ã€StripPrefix-GatewayFilter-Factory"><a href="#21ã€StripPrefix-GatewayFilter-Factory" class="headerlink" title="21ã€StripPrefix GatewayFilter Factory"></a>21ã€StripPrefix GatewayFilter Factory</h4><p>ç”¨äºæˆªæ–­åŸå§‹è¯·æ±‚çš„è·¯å¾„ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">nameRoot</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">http://nameservice</span><br>        <span class="hljs-attr">predicates:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/name/**</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-comment"># æ•°å­—è¡¨ç¤ºè¦æˆªæ–­çš„è·¯å¾„çš„æ•°é‡</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">StripPrefix=2</span><br><br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šé…ç½®ï¼Œå¦‚æœè¯·æ±‚çš„è·¯å¾„ä¸º <code>/name/bar/foo</code> ï¼Œé‚£ä¹ˆåˆ™ä¼šæˆªæ–­æˆ<code>/foo</code>åè¿›è¡Œè½¬å‘ ï¼Œä¹Ÿå°±æ˜¯ä¼šæˆªæ–­2ä¸ªè·¯å¾„ã€‚</p><h4 id="22ã€Retry-GatewayFilter-Factory"><a href="#22ã€Retry-GatewayFilter-Factory" class="headerlink" title="22ã€Retry GatewayFilter Factory"></a>22ã€Retry GatewayFilter Factory</h4><p>é’ˆå¯¹ä¸åŒçš„å“åº”è¿›è¡Œé‡è¯•ï¼Œä¾‹å¦‚å¯ä»¥é’ˆå¯¹HTTPçŠ¶æ€ç è¿›è¡Œé‡è¯•ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">retry_test</span><br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">http://localhost:8080/flakey</span><br>        <span class="hljs-attr">predicates:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Host=*.retry.com</span><br>        <span class="hljs-attr">filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Retry</span><br>          <span class="hljs-attr">args:</span><br>            <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span><br>            <span class="hljs-attr">statuses:</span> <span class="hljs-string">BAD_GATEWAY</span><br></code></pre></td></tr></table></figure><p>å¯é…ç½®å¦‚ä¸‹å‚æ•°ï¼š</p><ul><li><code>retries</code>ï¼šé‡è¯•æ¬¡æ•°</li><li><code>statuses</code>ï¼šéœ€è¦é‡è¯•çš„çŠ¶æ€ç ï¼Œå–å€¼åœ¨ <code>org.springframework.http.HttpStatus</code> ä¸­</li><li><code>methods</code>ï¼šéœ€è¦é‡è¯•çš„è¯·æ±‚æ–¹æ³•ï¼Œå–å€¼åœ¨ <code>org.springframework.http.HttpMethod</code> ä¸­</li><li><code>series</code>ï¼šHTTPçŠ¶æ€ç åºåˆ—ï¼Œå–å€¼åœ¨ <code>org.springframework.http.HttpStatus.Series</code> ä¸­</li></ul><h4 id="23ã€RequestSize-GatewayFilter-Factory"><a href="#23ã€RequestSize-GatewayFilter-Factory" class="headerlink" title="23ã€RequestSize GatewayFilter Factory"></a>23ã€RequestSize GatewayFilter Factory</h4><p>è®¾ç½®å…è®¸æ¥æ”¶æœ€å¤§è¯·æ±‚åŒ…çš„å¤§å°ï¼Œé…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">request_size_route</span><br>      <span class="hljs-attr">uri:</span> <span class="hljs-string">http://localhost:8080/upload</span><br>      <span class="hljs-attr">predicates:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/upload</span><br>      <span class="hljs-attr">filters:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">RequestSize</span><br>        <span class="hljs-attr">args:</span><br>          <span class="hljs-comment"># å•ä½ä¸ºå­—èŠ‚</span><br>          <span class="hljs-attr">maxSize:</span> <span class="hljs-number">5000000</span><br><br></code></pre></td></tr></table></figure><p>å¦‚æœè¯·æ±‚åŒ…å¤§å°è¶…è¿‡è®¾ç½®çš„å€¼ï¼Œåˆ™ä¼šè¿”å› <code>413 Payload Too Large</code>ä»¥åŠä¸€ä¸ª<code>errorMessage</code></p><h4 id="24ã€Modify-Request-Body-GatewayFilter-Factory"><a href="#24ã€Modify-Request-Body-GatewayFilter-Factory" class="headerlink" title="24ã€Modify Request Body GatewayFilter Factory"></a>24ã€Modify Request Body GatewayFilter Factory</h4><p>åœ¨è½¬å‘è¯·æ±‚ä¹‹å‰ä¿®æ”¹åŸå§‹è¯·æ±‚ä½“å†…å®¹ï¼Œè¯¥è¿‡æ»¤å™¨å·¥å‚åªèƒ½é€šè¿‡ä»£ç é…ç½®ï¼Œä¸æ”¯æŒåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> RouteLocator <span class="hljs-title function_">routes</span><span class="hljs-params">(RouteLocatorBuilder builder)</span> &#123;<br>    <span class="hljs-keyword">return</span> builder.routes()<br>        .route(<span class="hljs-string">&quot;rewrite_request_obj&quot;</span>, r -&gt; r.host(<span class="hljs-string">&quot;*.rewriterequestobj.org&quot;</span>)<br>            .filters(f -&gt; f.prefixPath(<span class="hljs-string">&quot;/httpbin&quot;</span>)<br>                .modifyRequestBody(String.class, Hello.class, MediaType.APPLICATION_JSON_VALUE,<br>                    (exchange, s) -&gt; <span class="hljs-keyword">return</span> Mono.just(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Hello</span>(s.toUpperCase())))).uri(uri))<br>        .build();<br>&#125;<br> <br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Hello</span> &#123;<br>    String message;<br> <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Hello</span><span class="hljs-params">()</span> &#123; &#125;<br> <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Hello</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-built_in">this</span>.message = message;<br>    &#125;<br> <br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMessage</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> message;<br>    &#125;<br> <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMessage</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-built_in">this</span>.message = message;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>Tipsï¼šè¯¥è¿‡æ»¤å™¨å·¥å‚å¤„äº <strong>BETA</strong> çŠ¶æ€ï¼Œæœªæ¥APIå¯èƒ½ä¼šå˜åŒ–ï¼Œç”Ÿäº§ç¯å¢ƒè¯·æ…ç”¨</p></blockquote><h4 id="25ã€Modify-Response-Body-GatewayFilter-Factory"><a href="#25ã€Modify-Response-Body-GatewayFilter-Factory" class="headerlink" title="25ã€Modify Response Body GatewayFilter Factory"></a>25ã€Modify Response Body GatewayFilter Factory</h4><p>å¯ç”¨äºä¿®æ”¹åŸå§‹å“åº”ä½“çš„å†…å®¹ï¼Œè¯¥è¿‡æ»¤å™¨å·¥å‚åŒæ ·åªèƒ½é€šè¿‡ä»£ç é…ç½®ï¼Œä¸æ”¯æŒåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> RouteLocator <span class="hljs-title function_">routes</span><span class="hljs-params">(RouteLocatorBuilder builder)</span> &#123;<br>    <span class="hljs-keyword">return</span> builder.routes()<br>        .route(<span class="hljs-string">&quot;rewrite_response_upper&quot;</span>, r -&gt; r.host(<span class="hljs-string">&quot;*.rewriteresponseupper.org&quot;</span>)<br>            .filters(f -&gt; f.prefixPath(<span class="hljs-string">&quot;/httpbin&quot;</span>)<br>                .modifyResponseBody(String.class, String.class,<br>                    (exchange, s) -&gt; Mono.just(s.toUpperCase()))).uri(uri)<br>        .build();<br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>Tipsï¼šè¯¥è¿‡æ»¤å™¨å·¥å‚å¤„äº <strong>BETA</strong> çŠ¶æ€ï¼Œæœªæ¥APIå¯èƒ½ä¼šå˜åŒ–ï¼Œç”Ÿäº§ç¯å¢ƒè¯·æ…ç”¨</p></blockquote><h4 id="26ã€Default-Filters"><a href="#26ã€Default-Filters" class="headerlink" title="26ã€Default Filters"></a>26ã€Default Filters</h4><p>Default Filtersç”¨äºä¸ºæ‰€æœ‰è·¯ç”±æ·»åŠ è¿‡æ»¤å™¨å·¥å‚ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡Default Filteræ‰€é…ç½®çš„è¿‡æ»¤å™¨å·¥å‚ä¼šä½œç”¨åˆ°æ‰€æœ‰çš„è·¯ç”±ä¸Šã€‚é…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">default-filters:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">AddResponseHeader=X-Response-Default-Foo,</span> <span class="hljs-string">Default-Bar</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">PrefixPath=/httpbin</span><br></code></pre></td></tr></table></figure><hr><p>å®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li><a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.1.0.RELEASE/single/spring-cloud-gateway.html#_gatewayfilter_factories">GatewayFilter Factories</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>SpringCloudğŸ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringCloudğŸ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearch é›†ç¾¤æ­å»ºé…ç½®</title>
    <link href="/Hexo/2022/04/28/ElasticSearch%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"/>
    <url>/Hexo/2022/04/28/ElasticSearch%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€ElasticSearch-é›†ç¾¤"><a href="#ä¸€ã€ElasticSearch-é›†ç¾¤" class="headerlink" title="ä¸€ã€ElasticSearch é›†ç¾¤"></a>ä¸€ã€ElasticSearch é›†ç¾¤</h1><h2 id="1-1-æ­å»ºé›†ç¾¤"><a href="#1-1-æ­å»ºé›†ç¾¤" class="headerlink" title="1.1 æ­å»ºé›†ç¾¤"></a>1.1 æ­å»ºé›†ç¾¤</h2><p>Elasticsearchå¦‚æœåšé›†ç¾¤çš„è¯MasterèŠ‚ç‚¹è‡³å°‘ä¸‰å°æœåŠ¡å™¨æˆ–è€…ä¸‰ä¸ªMasterå®ä¾‹åŠ å…¥ç›¸åŒé›†ç¾¤ï¼Œä¸‰ä¸ªMasterèŠ‚ç‚¹æœ€å¤šåªèƒ½æ•…éšœä¸€å°MasterèŠ‚ç‚¹ï¼Œå¦‚æœæ•…éšœä¸¤ä¸ªMasterèŠ‚ç‚¹ï¼ŒElasticsearchå°†æ— æ³•ç»„æˆé›†ç¾¤.ä¼šæŠ¥é”™ï¼ŒKibanaä¹Ÿæ— æ³•å¯åŠ¨ï¼Œå› ä¸ºKibanaæ— æ³•è·å–é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¿¡æ¯ã€‚</p><p>ç”±äºï¼Œæˆ‘ä»¬ä½¿ç”¨åªæœ‰ä¸€å°è™šæ‹Ÿæœºï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…ä¸‰ä¸ªESå®ä¾‹ï¼Œæ­å»ºä¼ªé›†ç¾¤ï¼Œè€ŒESå¯åŠ¨æ¯”è¾ƒè€—å†…å­˜ï¼Œæ‰€ä»¥å…ˆè®¾ç½®è™šæ‹Ÿæœºçš„å†…å­˜3Gå’ŒCPUä¸ªæ•°4ä¸ª</p><p><img src="https://s2.loli.net/2022/04/28/61cCfREtkGoNQps.png" alt="1575626474666"></p><h4 id="1-1-1-æ•´ä½“æ­¥éª¤"><a href="#1-1-1-æ•´ä½“æ­¥éª¤" class="headerlink" title="1.1.1 æ•´ä½“æ­¥éª¤"></a>1.1.1 æ•´ä½“æ­¥éª¤</h4><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li><p>æ‹·è´optç›®å½•ä¸‹çš„elasticsearch-7.4.0å®‰è£…åŒ…3ä¸ªï¼Œåˆ†åˆ«å‘½åï¼š</p><p>elasticsearch-7.4.0-itcast1</p><p>elasticsearch-7.4.0-itcast2</p><p>elasticsearch-7.4.0-itcast3 </p></li><li><p>ç„¶åä¿®æ”¹elasticsearch.ymlæ–‡ä»¶ä»¶ã€‚ </p></li><li><p>ç„¶åå¯åŠ¨å¯åŠ¨itcast1ã€itcast2ã€itcast3ä¸‰ä¸ªèŠ‚ç‚¹ã€‚ </p></li><li><p>æ‰“å¼€æµè§ˆå™¨è¾“â¼Šï¼š<a href="http://192.168.149.135:9200/_cat/health?v">http://192.168.149.135:9200/_cat/health?v</a> ,å¦‚æœè¿”å›çš„node.totalæ˜¯3ï¼Œä»£è¡¨é›† ç¾¤æ­å»ºæˆåŠŸ</p></li></ul><p><strong>åœ¨æ­¤ï¼Œéœ€è¦æˆ‘ä»¬ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œåƒæœ¬æ–‡è¿™æ ·å•æœåŠ¡å™¨å¤šèŠ‚ç‚¹ï¼ˆ 3 ä¸ªèŠ‚ç‚¹ï¼‰çš„æƒ…å†µï¼Œä»…ä¾›æµ‹è¯•ä½¿ç”¨</strong>ï¼Œé›†ç¾¤ç¯å¢ƒå¦‚ä¸‹ï¼š</p><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td>cluster name</td><td>node name</td><td>IP Addr</td><td>httpç«¯å£  &#x2F; é€šä¿¡ç«¯å£</td></tr><tr><td>itcast-es</td><td>itcast1</td><td>192.168.149.135</td><td>9201   &#x2F;  9700</td></tr><tr><td>itcast-es</td><td>itcast2</td><td>192.168.149.135</td><td>9202   &#x2F;   9800</td></tr><tr><td>itcast-es</td><td>itcast3</td><td>192.168.149.135</td><td>9203   &#x2F;  9900</td></tr></tbody></table><h4 id="1-1-2-æ‹·è´å‰¯æœ¬"><a href="#1-1-2-æ‹·è´å‰¯æœ¬" class="headerlink" title="1.1.2 æ‹·è´å‰¯æœ¬"></a>1.1.2 æ‹·è´å‰¯æœ¬</h4><p>æ‹·è´optç›®å½•ä¸‹çš„elasticsearch-7.4.0å®‰è£…åŒ…3ä¸ªï¼Œæ‰“å¼€è™šæ‹Ÿæœºåˆ°optç›®å½•</p><p>æ‰§è¡Œ æ‹·è´ä¸‰ä»½</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /opt<br>cp -r  elasticsearch-7.4.0   elasticsearch-7.4.0-itcast1<br>cp -r  elasticsearch-7.4.0   elasticsearch-7.4.0-itcast2<br>cp -r  elasticsearch-7.4.0   elasticsearch-7.4.0-itcast3<br></code></pre></td></tr></table></figure><h4 id="1-1-3-ä¿®æ”¹elasticsearch-ymlé…ç½®æ–‡ä»¶"><a href="#1-1-3-ä¿®æ”¹elasticsearch-ymlé…ç½®æ–‡ä»¶" class="headerlink" title="1.1. 3 ä¿®æ”¹elasticsearch.ymlé…ç½®æ–‡ä»¶"></a>1.1. 3 ä¿®æ”¹elasticsearch.ymlé…ç½®æ–‡ä»¶</h4><p><strong>1)ã€åˆ›å»ºæ—¥å¿—ç›®å½•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /opt<br>mkdir logs<br>mkdir  data<br><span class="hljs-meta"># </span><span class="language-bash">æˆæƒç»™itheimaç”¨æˆ·</span><br>chown -R axing:axing ./logs<br>chown -R axing:axing ./data<br><br>chown -R axing:axing ./elasticsearch-7.4.0-itcast1<br>chown -R axing:axing ./elasticsearch-7.4.0-itcast2<br>chown -R axing:axing ./elasticsearch-7.4.0-itcast3<br></code></pre></td></tr></table></figure><p>æ‰“å¼€elasticsearch.ymlé…ç½®ï¼Œåˆ†åˆ«é…ç½®ä¸‹é¢ä¸‰ä¸ªèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /opt/elasticsearch-7.4.0-itcast1/config/elasticsearch.yml <br>vim /opt/elasticsearch-7.4.0-itcast2/config/elasticsearch.yml <br>vim /opt/elasticsearch-7.4.0-itcast3/config/elasticsearch.yml <br></code></pre></td></tr></table></figure><p><strong>2)ã€ä¸‹é¢æ˜¯elasticsearch-7.4.0-itcast1é…ç½®æ–‡ä»¶</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><span class="hljs-attr">cluster.name:</span> <span class="hljs-string">itcast-es</span><br><span class="hljs-attr">node.name:</span> <span class="hljs-string">itcast-1</span> <br><span class="hljs-attr">node.master:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">node.data:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">node.max_local_storage_nodes:</span> <span class="hljs-number">3</span> <br><span class="hljs-attr">network.host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><span class="hljs-attr">http.port:</span> <span class="hljs-number">9201</span><br><span class="hljs-attr">transport.tcp.port:</span> <span class="hljs-number">9700</span><br><span class="hljs-attr">discovery.seed_hosts:</span> [<span class="hljs-string">&quot;localhost:9700&quot;</span>,<span class="hljs-string">&quot;localhost:9800&quot;</span>,<span class="hljs-string">&quot;localhost:9900&quot;</span>]<br><span class="hljs-attr">cluster.initial_master_nodes:</span> [<span class="hljs-string">&quot;itcast-1&quot;</span>, <span class="hljs-string">&quot;itcast-2&quot;</span>,<span class="hljs-string">&quot;itcast-3&quot;</span>]<br><span class="hljs-attr">path.data:</span> <span class="hljs-string">/opt/data</span><br><span class="hljs-attr">path.logs:</span> <span class="hljs-string">/opt/logs</span><br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">#é›†ç¾¤åç§°</span><br><span class="hljs-attr">cluster.name:</span> <span class="hljs-string">itcast-es</span><br><span class="hljs-comment">#èŠ‚ç‚¹åç§°</span><br><span class="hljs-attr">node.name:</span> <span class="hljs-string">itcast-1</span> <br><span class="hljs-comment">#æ˜¯ä¸æ˜¯æœ‰èµ„æ ¼ä¸»èŠ‚ç‚¹</span><br><span class="hljs-attr">node.master:</span> <span class="hljs-literal">true</span><br><span class="hljs-comment">#æ˜¯å¦å­˜å‚¨æ•°æ®</span><br><span class="hljs-attr">node.data:</span> <span class="hljs-literal">true</span><br><span class="hljs-comment">#æœ€å¤§é›†ç¾¤èŠ‚ç‚¹æ•°</span><br><span class="hljs-attr">node.max_local_storage_nodes:</span> <span class="hljs-number">3</span> <br><span class="hljs-comment">#ipåœ°å€</span><br><span class="hljs-attr">network.host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><span class="hljs-comment">#ç«¯å£</span><br><span class="hljs-attr">http.port:</span> <span class="hljs-number">9201</span><br><span class="hljs-comment">#å†…éƒ¨èŠ‚ç‚¹ä¹‹é—´æ²Ÿé€šç«¯å£</span><br><span class="hljs-attr">transport.tcp.port:</span> <span class="hljs-number">9700</span><br><span class="hljs-comment">#es7.x ä¹‹åæ–°å¢çš„é…ç½®ï¼ŒèŠ‚ç‚¹å‘ç°</span><br><span class="hljs-attr">discovery.seed_hosts:</span> [<span class="hljs-string">&quot;localhost:9700&quot;</span>,<span class="hljs-string">&quot;localhost:9800&quot;</span>,<span class="hljs-string">&quot;localhost:9900&quot;</span>]<br><span class="hljs-comment">#es7.x ä¹‹åæ–°å¢çš„é…ç½®ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„é›†ç¾¤æ—¶éœ€è¦æ­¤é…ç½®æ¥é€‰ä¸¾master</span><br><span class="hljs-attr">cluster.initial_master_nodes:</span> [<span class="hljs-string">&quot;itcast-1&quot;</span>, <span class="hljs-string">&quot;itcast-2&quot;</span>,<span class="hljs-string">&quot;itcast-3&quot;</span>] <br><span class="hljs-comment">#æ•°æ®å’Œå­˜å‚¨è·¯å¾„</span><br><span class="hljs-attr">path.data:</span> <span class="hljs-string">/opt/data</span><br><span class="hljs-attr">path.logs:</span> <span class="hljs-string">/opt/logs</span><br></code></pre></td></tr></table></figure><p><strong>3)ã€ä¸‹é¢æ˜¯elasticsearch-7.4.0-itcast2é…ç½®æ–‡ä»¶</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><span class="hljs-attr">cluster.name:</span> <span class="hljs-string">itcast-es</span><br><span class="hljs-attr">node.name:</span> <span class="hljs-string">itcast-2</span> <br><span class="hljs-attr">node.master:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">node.data:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">node.max_local_storage_nodes:</span> <span class="hljs-number">3</span> <br><span class="hljs-attr">network.host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><span class="hljs-attr">http.port:</span> <span class="hljs-number">9202</span><br><span class="hljs-attr">transport.tcp.port:</span> <span class="hljs-number">9800</span><br><span class="hljs-attr">discovery.seed_hosts:</span> [<span class="hljs-string">&quot;localhost:9700&quot;</span>,<span class="hljs-string">&quot;localhost:9800&quot;</span>,<span class="hljs-string">&quot;localhost:9900&quot;</span>]<br><span class="hljs-attr">cluster.initial_master_nodes:</span> [<span class="hljs-string">&quot;itcast-1&quot;</span>, <span class="hljs-string">&quot;itcast-2&quot;</span>,<span class="hljs-string">&quot;itcast-3&quot;</span>]<br><span class="hljs-attr">path.data:</span> <span class="hljs-string">/opt/data</span><br><span class="hljs-attr">path.logs:</span> <span class="hljs-string">/opt/logs</span><br><br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">#é›†ç¾¤åç§°</span><br><span class="hljs-attr">cluster.name:</span> <span class="hljs-string">itcast-es</span><br><span class="hljs-comment">#èŠ‚ç‚¹åç§°</span><br><span class="hljs-attr">node.name:</span> <span class="hljs-string">itcast-2</span> <br><span class="hljs-comment">#æ˜¯ä¸æ˜¯æœ‰èµ„æ ¼ä¸»èŠ‚ç‚¹</span><br><span class="hljs-attr">node.master:</span> <span class="hljs-literal">true</span><br><span class="hljs-comment">#æ˜¯å¦å­˜å‚¨æ•°æ®</span><br><span class="hljs-attr">node.data:</span> <span class="hljs-literal">true</span><br><span class="hljs-comment">#æœ€å¤§é›†ç¾¤èŠ‚ç‚¹æ•°</span><br><span class="hljs-attr">node.max_local_storage_nodes:</span> <span class="hljs-number">3</span> <br><span class="hljs-comment">#ipåœ°å€</span><br><span class="hljs-attr">network.host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><span class="hljs-comment">#ç«¯å£</span><br><span class="hljs-attr">http.port:</span> <span class="hljs-number">9202</span><br><span class="hljs-comment">#å†…éƒ¨èŠ‚ç‚¹ä¹‹é—´æ²Ÿé€šç«¯å£</span><br><span class="hljs-attr">transport.tcp.port:</span> <span class="hljs-number">9800</span><br><span class="hljs-comment">#es7.x ä¹‹åæ–°å¢çš„é…ç½®ï¼ŒèŠ‚ç‚¹å‘ç°</span><br><span class="hljs-attr">discovery.seed_hosts:</span> [<span class="hljs-string">&quot;localhost:9700&quot;</span>,<span class="hljs-string">&quot;localhost:9800&quot;</span>,<span class="hljs-string">&quot;localhost:9900&quot;</span>]<br><span class="hljs-comment">#es7.x ä¹‹åæ–°å¢çš„é…ç½®ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„é›†ç¾¤æ—¶éœ€è¦æ­¤é…ç½®æ¥é€‰ä¸¾master</span><br><span class="hljs-attr">cluster.initial_master_nodes:</span> [<span class="hljs-string">&quot;itcast-1&quot;</span>, <span class="hljs-string">&quot;itcast-2&quot;</span>,<span class="hljs-string">&quot;itcast-3&quot;</span>] <br><span class="hljs-comment">#æ•°æ®å’Œå­˜å‚¨è·¯å¾„</span><br><span class="hljs-attr">path.data:</span> <span class="hljs-string">/opt/data</span><br><span class="hljs-attr">path.logs:</span> <span class="hljs-string">/opt/logs</span><br></code></pre></td></tr></table></figure><p><strong>4)ã€ä¸‹é¢æ˜¯elasticsearch-7.4.0-itcast3 é…ç½®æ–‡ä»¶</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yml"><br><br><span class="hljs-attr">cluster.name:</span> <span class="hljs-string">itcast-es</span><br><span class="hljs-attr">node.name:</span> <span class="hljs-string">itcast-3</span> <br><span class="hljs-attr">node.master:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">node.data:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">node.max_local_storage_nodes:</span> <span class="hljs-number">3</span> <br><span class="hljs-attr">network.host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><span class="hljs-attr">http.port:</span> <span class="hljs-number">9203</span><br><span class="hljs-attr">transport.tcp.port:</span> <span class="hljs-number">9900</span><br><span class="hljs-attr">discovery.seed_hosts:</span> [<span class="hljs-string">&quot;localhost:9700&quot;</span>,<span class="hljs-string">&quot;localhost:9800&quot;</span>,<span class="hljs-string">&quot;localhost:9900&quot;</span>]<br><span class="hljs-attr">cluster.initial_master_nodes:</span> [<span class="hljs-string">&quot;itcast-1&quot;</span>, <span class="hljs-string">&quot;itcast-2&quot;</span>,<span class="hljs-string">&quot;itcast-3&quot;</span>] <br><span class="hljs-attr">path.data:</span> <span class="hljs-string">/opt/data</span><br><span class="hljs-attr">path.logs:</span> <span class="hljs-string">/opt/logs</span><br></code></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">#é›†ç¾¤åç§°</span><br><span class="hljs-attr">cluster.name:</span> <span class="hljs-string">itcast-es</span><br><span class="hljs-comment">#èŠ‚ç‚¹åç§°</span><br><span class="hljs-attr">node.name:</span> <span class="hljs-string">itcast-3</span> <br><span class="hljs-comment">#æ˜¯ä¸æ˜¯æœ‰èµ„æ ¼ä¸»èŠ‚ç‚¹</span><br><span class="hljs-attr">node.master:</span> <span class="hljs-literal">true</span><br><span class="hljs-comment">#æ˜¯å¦å­˜å‚¨æ•°æ®</span><br><span class="hljs-attr">node.data:</span> <span class="hljs-literal">true</span><br><span class="hljs-comment">#æœ€å¤§é›†ç¾¤èŠ‚ç‚¹æ•°</span><br><span class="hljs-attr">node.max_local_storage_nodes:</span> <span class="hljs-number">3</span> <br><span class="hljs-comment">#ipåœ°å€</span><br><span class="hljs-attr">network.host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><span class="hljs-comment">#ç«¯å£</span><br><span class="hljs-attr">http.port:</span> <span class="hljs-number">9203</span><br><span class="hljs-comment">#å†…éƒ¨èŠ‚ç‚¹ä¹‹é—´æ²Ÿé€šç«¯å£</span><br><span class="hljs-attr">transport.tcp.port:</span> <span class="hljs-number">9900</span><br><span class="hljs-comment">#es7.x ä¹‹åæ–°å¢çš„é…ç½®ï¼ŒèŠ‚ç‚¹å‘ç°</span><br><span class="hljs-attr">discovery.seed_hosts:</span> [<span class="hljs-string">&quot;localhost:9700&quot;</span>,<span class="hljs-string">&quot;localhost:9800&quot;</span>,<span class="hljs-string">&quot;localhost:9900&quot;</span>]<br><span class="hljs-comment">#es7.x ä¹‹åæ–°å¢çš„é…ç½®ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„é›†ç¾¤æ—¶éœ€è¦æ­¤é…ç½®æ¥é€‰ä¸¾master</span><br><span class="hljs-attr">cluster.initial_master_nodes:</span> [<span class="hljs-string">&quot;itcast-1&quot;</span>, <span class="hljs-string">&quot;itcast-2&quot;</span>,<span class="hljs-string">&quot;itcast-3&quot;</span>] <br><span class="hljs-comment">#æ•°æ®å’Œå­˜å‚¨è·¯å¾„</span><br><span class="hljs-attr">path.data:</span> <span class="hljs-string">/opt/data</span><br><span class="hljs-attr">path.logs:</span> <span class="hljs-string">/opt/logs</span><br></code></pre></td></tr></table></figure><h4 id="1-1-4-æ‰§è¡Œæˆæƒ"><a href="#1-1-4-æ‰§è¡Œæˆæƒ" class="headerlink" title="1.1.4  æ‰§è¡Œæˆæƒ"></a>1.1.4  æ‰§è¡Œæˆæƒ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">åœ¨rootç”¨æˆ·ä¸‹æ‰§è¡Œ<br>chown -R axing:axing /opt/elasticsearch-7.4.0-itcast1<br>chown -R itheima:itheima /opt/elasticsearch-7.4.0-itcast2<br>chown -R itheima:itheima /opt/elasticsearch-7.4.0-itcast3<br>å¦‚æœæœ‰çš„æ—¥å¿—æ–‡ä»¶æˆæƒå¤±è´¥ï¼Œå¯ä½¿ç”¨(ä¹Ÿæ˜¯åœ¨rootä¸‹æ‰§è¡Œ)<br>cd /opt/elasticsearch-7.4.0-itcast1/logs<br>chown -R itheima:itheima ./* <br>cd /opt/elasticsearch-7.4.0-itcast2/logs<br>chown -R itheima:itheima ./* <br>cd /opt/elasticsearch-7.4.0-itcast3/logs<br>chown -R itheima:itheima ./* <br></code></pre></td></tr></table></figure><h4 id="1-1-5-å¯åŠ¨ä¸‰ä¸ªèŠ‚ç‚¹"><a href="#1-1-5-å¯åŠ¨ä¸‰ä¸ªèŠ‚ç‚¹" class="headerlink" title="1.1.5 å¯åŠ¨ä¸‰ä¸ªèŠ‚ç‚¹"></a>1.1.5 å¯åŠ¨ä¸‰ä¸ªèŠ‚ç‚¹</h4><p>å¯åŠ¨ä¹‹å‰ï¼Œè®¾ç½®ESçš„JVMå ç”¨å†…å­˜å‚æ•°ï¼Œé˜²æ­¢å†…å­˜ä¸è¶³é”™è¯¯</p><p><img src="https://s2.loli.net/2022/04/28/Y1ZbD6oplqUhEeB.png" alt="1575630754009"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /opt/elasticsearch-7.4.0-itcast1/bin/elasticsearch<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/28/BwglOKVub4zrX1W.png" alt="1575631078654"></p><p>å¯ä»¥å‘ç°ï¼ŒESå¯åŠ¨æ—¶åŠ è½½&#x2F;config&#x2F;jvm.optionsæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /opt/elasticsearch-7.4.0-itcast1/config/jvm.options<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/28/AHh6zge31SJ4wIc.png" alt="1575630948133"></p><p> é»˜è®¤æƒ…å†µä¸‹ï¼ŒESå¯åŠ¨JVMæœ€å°å†…å­˜1Gï¼Œæœ€å¤§å†…å­˜1G</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">-xms:æœ€å°å†…å­˜<br>-xmx:æœ€å¤§å†…å­˜<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸º256m</p><p><img src="https://s2.loli.net/2022/04/28/ivjEWtc7mAuKDk8.png" alt="1575631033297"></p><p>å¯åŠ¨æˆåŠŸè®¿é—®èŠ‚ç‚¹ä¸€ï¼š</p><p><img src="https://s2.loli.net/2022/04/28/VnTPoCl8mXjutig.png" alt="1575628494844"></p><p>å¯ä»¥ä»æ—¥å¿—ä¸­çœ‹åˆ°ï¼šmaster not discovered yetã€‚è¿˜æ²¡æœ‰å‘ç°ä¸»èŠ‚ç‚¹</p><p>è®¿é—®é›†ç¾¤çŠ¶æ€ä¿¡æ¯ <a href="http://192.168.149.135:9201/_cat/health?v">http://192.168.149.135:9201/_cat/health?v</a> ä¸æˆåŠŸ</p><p><img src="https://s2.loli.net/2022/04/30/T2lOU48Ld5aVtoZ.png" alt="1575628567827"></p><p>å¯åŠ¨æˆåŠŸè®¿é—®èŠ‚ç‚¹äºŒ:</p><p><img src="https://s2.loli.net/2022/04/28/6QvRd7iscVqDEjM.png" alt="1575628735672"></p><p>å¯ä»¥ä»æ—¥å¿—ä¸­çœ‹åˆ°ï¼šmaster not discovered yetã€‚è¿˜æ²¡æœ‰å‘ç°ä¸»èŠ‚ç‚¹master node changed.å·²ç»é€‰ä¸¾å‡ºä¸»èŠ‚ç‚¹itcast-2</p><p>è®¿é—®é›†ç¾¤çŠ¶æ€ä¿¡æ¯ <a href="http://192.168.149.135:9201/_cat/health?v">http://192.168.149.135:9201/_cat/health?v</a>  æˆåŠŸ</p><p><img src="/Hexo/imgs%5C1575628812009.png" alt="1575628812009"></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs tex">å¥åº·çŠ¶å†µç»“æœè§£é‡Šï¼š<br><br>cluster é›†ç¾¤åç§°<br>status é›†ç¾¤çŠ¶æ€ <br>greenä»£è¡¨å¥åº·ï¼›<br>yellowä»£è¡¨åˆ†é…äº†æ‰€æœ‰ä¸»åˆ†ç‰‡ï¼Œä½†è‡³å°‘ç¼ºå°‘ä¸€ä¸ªå‰¯æœ¬ï¼Œæ­¤æ—¶é›†ç¾¤æ•°æ®ä»æ—§å®Œæ•´ï¼›<br>red ä»£è¡¨éƒ¨åˆ†ä¸»åˆ†ç‰‡ä¸å¯ç”¨ï¼Œå¯èƒ½å·²ç»ä¸¢å¤±æ•°æ®ã€‚<br>node.totalä»£è¡¨åœ¨çº¿çš„èŠ‚ç‚¹æ€»æ•°é‡<br>node.dataä»£è¡¨åœ¨çº¿çš„æ•°æ®èŠ‚ç‚¹çš„æ•°é‡<br>shards å­˜æ´»çš„åˆ†ç‰‡æ•°é‡<br>pri å­˜æ´»çš„ä¸»åˆ†ç‰‡æ•°é‡ æ­£å¸¸æƒ…å†µä¸‹ shardsçš„æ•°é‡æ˜¯priçš„ä¸¤å€ã€‚<br>reloè¿ç§»ä¸­çš„åˆ†ç‰‡æ•°é‡ï¼Œæ­£å¸¸æƒ…å†µä¸º 0<br>init åˆå§‹åŒ–ä¸­çš„åˆ†ç‰‡æ•°é‡ æ­£å¸¸æƒ…å†µä¸º 0<br>unassignæœªåˆ†é…çš„åˆ†ç‰‡ æ­£å¸¸æƒ…å†µä¸º 0<br>pending<span class="hljs-built_in">_</span>taskså‡†å¤‡ä¸­çš„ä»»åŠ¡ï¼Œä»»åŠ¡æŒ‡è¿ç§»åˆ†ç‰‡ç­‰ æ­£å¸¸æƒ…å†µä¸º 0<br>max<span class="hljs-built_in">_</span>task<span class="hljs-built_in">_</span>wait<span class="hljs-built_in">_</span>timeä»»åŠ¡æœ€é•¿ç­‰å¾…æ—¶é—´<br>active<span class="hljs-built_in">_</span>shards<span class="hljs-built_in">_</span>percentæ­£å¸¸åˆ†ç‰‡ç™¾åˆ†æ¯” æ­£å¸¸æƒ…å†µä¸º 100<span class="hljs-comment">%</span><br></code></pre></td></tr></table></figure><p>å¯åŠ¨æˆåŠŸè®¿é—®èŠ‚ç‚¹ä¸‰</p><p>è®¿é—®é›†ç¾¤çŠ¶æ€ä¿¡æ¯ <a href="http://192.168.149.135:9201/_cat/health?v">http://192.168.149.135:9201/_cat/health?v</a>  æˆåŠŸ</p><p><img src="https://s2.loli.net/2022/04/30/WSCDZBIQrX5twOJ.png" alt="1575628972101"></p><p>å¯ä»¥çœ‹åˆ°èŠ‚ç‚¹å·²ç»å˜ä¸º3ä¸ªï¼Œè‡³æ­¤ï¼ŒESé›†ç¾¤å·²ç»æ­å»ºæˆåŠŸ~</p><h2 id="1-2-ä½¿ç”¨Kibanaé…ç½®å’Œç®¡ç†é›†ç¾¤"><a href="#1-2-ä½¿ç”¨Kibanaé…ç½®å’Œç®¡ç†é›†ç¾¤" class="headerlink" title="1.2  ä½¿ç”¨Kibanaé…ç½®å’Œç®¡ç†é›†ç¾¤"></a>1.2  ä½¿ç”¨Kibanaé…ç½®å’Œç®¡ç†é›†ç¾¤</h2><h4 id="1-2-1-é›†ç¾¤é…ç½®"><a href="#1-2-1-é›†ç¾¤é…ç½®" class="headerlink" title="1.2.1 é›†ç¾¤é…ç½®"></a>1.2.1 é›†ç¾¤é…ç½®</h4><p>å› ä¸ºä¹‹å‰æˆ‘ä»¬åœ¨å•æœºæ¼”ç¤ºçš„æ—¶å€™ä¹Ÿä½¿ç”¨åˆ°äº†Kibanaï¼Œæˆ‘ä»¬å…ˆå¤åˆ¶å‡ºæ¥ä¸€ä¸ªKibanaï¼Œç„¶åä¿®æ”¹å®ƒçš„é›†ç¾¤é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /opt/<br>cp -r kibana-7.4.0-linux-x86_64   kibana-7.4.0-linux-x86_64-cluster<br><span class="hljs-meta"># </span><span class="language-bash">ç”±äº kibana ä¸­æ–‡ä»¶ä¼—å¤šï¼Œæ­¤å¤„ä¼šç­‰å¾…å¤§çº¦1åˆ†é’Ÿçš„æ—¶é—´</span><br></code></pre></td></tr></table></figure><p>ä¿®æ”¹Kibanaçš„é›†ç¾¤é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim  kibana-7.4.0-linux-x86_64-cluster/config/kibana.yml<br>åŠ å…¥ä¸‹é¢çš„é…ç½®<br>elasticsearch.hosts: [&quot;http://localhost:9201&quot;,&quot;http://localhost:9202&quot;,&quot;http://localhost:9203&quot;]<br></code></pre></td></tr></table></figure><p>å¯åŠ¨Kibana</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh kibana --allow-root<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/30/9fYaXLJZFepgP5u.png" alt="1575629869248"></p><h4 id="1-2-2-ç®¡ç†é›†ç¾¤"><a href="#1-2-2-ç®¡ç†é›†ç¾¤" class="headerlink" title="1.2.2 ç®¡ç†é›†ç¾¤"></a>1.2.2 ç®¡ç†é›†ç¾¤</h4><p>1ã€æ‰“å¼€Kibanaï¼Œç‚¹å¼€ Stack Monitoring é›†ç¾¤ç›‘æ§</p><p><img src="https://s2.loli.net/2022/04/30/mXqJpbt3TrzLfND.png" alt="1575630589113"></p><p><img src="https://s2.loli.net/2022/04/30/otupDNP1dL6QIMT.png" alt="1575631125143"></p><p>2ã€ç‚¹å‡»ã€Nodesã€‘æŸ¥çœ‹èŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯</p><p><img src="https://s2.loli.net/2022/04/30/wuiR5KalbH7FWTP.png" alt="1575631203718"></p><p><img src="https://s2.loli.net/2022/04/30/DL2v35QdCEKkzT9.png" alt="1575631303974"></p><p>åœ¨ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€ä¸ªçº¢æ¡†å¤„æ˜¾ç¤ºã€Greenã€‘ï¼Œç»¿è‰²ï¼Œè¡¨ç¤ºé›†ç¾¤å¤„ç†å¥åº·çŠ¶æ€</p><p>ç¬¬äºŒä¸ªçº¢æ¡†æ˜¯æˆ‘ä»¬é›†ç¾¤çš„ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œæ³¨æ„ï¼Œitcast-3æ—è¾¹æ˜¯æ˜Ÿæ˜Ÿï¼Œè¡¨ç¤ºæ˜¯ä¸»èŠ‚ç‚¹</p>]]></content>
    
    
    <categories>
      
      <category>Elasticsearch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Elasticsearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElasticSearch é«˜çº§æ“ä½œ</title>
    <link href="/Hexo/2022/04/28/ElasticSearch-2/"/>
    <url>/Hexo/2022/04/28/ElasticSearch-2/</url>
    
    <content type="html"><![CDATA[<h2 id="01-ä»Šæ—¥å†…å®¹"><a href="#01-ä»Šæ—¥å†…å®¹" class="headerlink" title="01-ä»Šæ—¥å†…å®¹"></a><strong>01-ä»Šæ—¥å†…å®¹</strong></h2><ol><li><p>ElasticSearch é«˜çº§æ“ä½œ</p></li><li><p>ElasticSearch é›†ç¾¤ç®¡ç†</p></li></ol><h2 id="02-ElasticSearché«˜çº§æ“ä½œ"><a href="#02-ElasticSearché«˜çº§æ“ä½œ" class="headerlink" title="02-ElasticSearché«˜çº§æ“ä½œ"></a><strong>02-ElasticSearché«˜çº§æ“ä½œ</strong></h2><h3 id="2-1-bulkæ‰¹é‡æ“ä½œ-è„šæœ¬"><a href="#2-1-bulkæ‰¹é‡æ“ä½œ-è„šæœ¬" class="headerlink" title="2.1-bulkæ‰¹é‡æ“ä½œ-è„šæœ¬"></a>2.1-bulkæ‰¹é‡æ“ä½œ-è„šæœ¬</h3><p> è„šæœ¬ï¼š</p><p>æµ‹è¯•ç”¨çš„5å·æ–‡æ¡£</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">POST <span class="hljs-regexp">/person1/</span>_doc/<span class="hljs-number">5</span><br>&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;å¼ ä¸‰5å·&quot;</span>,<br>  <span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">18</span>,<br>  <span class="hljs-string">&quot;address&quot;</span>:<span class="hljs-string">&quot;åŒ—äº¬æµ·æ·€åŒº&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰¹é‡æ“ä½œæ–‡æœ¬</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json">#æ‰¹é‡æ“ä½œ<br>#<span class="hljs-number">1.</span>åˆ é™¤<span class="hljs-number">5</span>å·<br>#æ–°å¢<span class="hljs-number">8</span>å·<br>#æ›´æ–°<span class="hljs-number">2</span>å· nameä¸º<span class="hljs-number">2</span>å·<br>POST _bulk<br><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;delete&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_index&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;person1&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;_id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;5&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;create&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_index&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;person1&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;_id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;8&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;å…«å·&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">18</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;åŒ—äº¬&quot;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;update&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_index&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;person1&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;_id&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;doc&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2å·&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;took&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">51</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;errors&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;items&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;delete&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;_index&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;person1&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;_doc&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_id&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;5&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_version&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;result&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;deleted&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_shards&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;total&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;successful&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;failed&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_seq_no&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_primary_term&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;status&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;create&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;_index&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;person1&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;_doc&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_id&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;8&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_version&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;result&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;created&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_shards&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;total&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;successful&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;failed&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_seq_no&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">7</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_primary_term&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;status&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">201</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;update&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;_index&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;person1&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;_doc&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_id&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_version&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;result&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;updated&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_shards&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;total&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;successful&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;failed&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_seq_no&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;_primary_term&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;status&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h3 id="2-2-bulkæ‰¹é‡æ“ä½œ-JavaAPI"><a href="#2-2-bulkæ‰¹é‡æ“ä½œ-JavaAPI" class="headerlink" title="2.2-bulkæ‰¹é‡æ“ä½œ-JavaAPI"></a><strong>2.2-bulkæ‰¹é‡æ“ä½œ-JavaAPI</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    *  Bulk æ‰¹é‡æ“ä½œ</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>       <span class="hljs-comment">//åˆ›å»ºbulkrequestå¯¹è±¡ï¼Œæ•´åˆæ‰€æœ‰æ“ä½œ</span><br>       <span class="hljs-type">BulkRequest</span> <span class="hljs-variable">bulkRequest</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">BulkRequest</span>();<br><br>          <span class="hljs-comment">/*</span><br><span class="hljs-comment">       # 1. åˆ é™¤5å·è®°å½•</span><br><span class="hljs-comment">       # 2. æ·»åŠ 6å·è®°å½•</span><br><span class="hljs-comment">       # 3. ä¿®æ”¹3å·è®°å½• åç§°ä¸º â€œä¸‰å·â€</span><br><span class="hljs-comment">        */</span><br>       <span class="hljs-comment">//æ·»åŠ å¯¹åº”æ“ä½œ</span><br>       <span class="hljs-comment">//1. åˆ é™¤5å·è®°å½•</span><br>       DeleteRequest deleteRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">DeleteRequest</span>(<span class="hljs-string">&quot;person1&quot;</span>,<span class="hljs-string">&quot;5&quot;</span>);<br>       bulkRequest.add(deleteRequest);<br><br>       <span class="hljs-comment">//2. æ·»åŠ 6å·è®°å½•</span><br>       Map&lt;String, Object&gt; map=<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>       map.put(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;å…­å·&quot;</span>);<br>       IndexRequest indexRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(<span class="hljs-string">&quot;person1&quot;</span>).id(<span class="hljs-string">&quot;6&quot;</span>).source(map);<br>       bulkRequest.add(indexRequest);<br>       <span class="hljs-comment">//3. ä¿®æ”¹3å·è®°å½• åç§°ä¸º â€œä¸‰å·â€</span><br>       Map&lt;String, Object&gt; mapUpdate=<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>       mapUpdate.put(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;ä¸‰å·&quot;</span>);<br>       UpdateRequest updateRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateRequest</span>(<span class="hljs-string">&quot;person1&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>).doc(mapUpdate);<br><br>       bulkRequest.add(updateRequest);<br>       <span class="hljs-comment">//æ‰§è¡Œæ‰¹é‡æ“ä½œ</span><br><br><br>       <span class="hljs-type">BulkResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.bulk(bulkRequest, RequestOptions.DEFAULT);<br>       System.out.println(response.status());<br><br>   &#125;<br></code></pre></td></tr></table></figure><h3 id="2-3-å¯¼å…¥æ•°æ®-åˆ†æ-amp-åˆ›å»ºç´¢å¼•"><a href="#2-3-å¯¼å…¥æ•°æ®-åˆ†æ-amp-åˆ›å»ºç´¢å¼•" class="headerlink" title="2.3-å¯¼å…¥æ•°æ®-åˆ†æ&amp;åˆ›å»ºç´¢å¼•"></a><strong>2.3-å¯¼å…¥æ•°æ®-åˆ†æ&amp;åˆ›å»ºç´¢å¼•</strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs json">PUT goods<br><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;mappings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;analyzer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ik_smart&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span> <br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;double&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;createTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;date&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;categoryName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;keyword&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;brandName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;keyword&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;spec&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;object&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;saleNum&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;integer&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;stock&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;integer&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="2-4-å¯¼å…¥æ•°æ®-ä»£ç å®ç°"><a href="#2-4-å¯¼å…¥æ•°æ®-ä»£ç å®ç°" class="headerlink" title="2.4-å¯¼å…¥æ•°æ®-ä»£ç å®ç°"></a><strong>2.4-å¯¼å…¥æ•°æ®-ä»£ç å®ç°</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * ä»Mysql æ‰¹é‡å¯¼å…¥ elasticSearch</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>       <span class="hljs-comment">//1.æŸ¥è¯¢æ‰€æœ‰æ•°æ®ï¼Œmysql</span><br>       List&lt;Goods&gt; goodsList = goodsMapper.findAll();<br><br>       <span class="hljs-comment">//2.bulkå¯¼å…¥</span><br>       BulkRequest bulkRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">BulkRequest</span>();<br><br>       <span class="hljs-comment">//2.1 å¾ªç¯goodsListï¼Œåˆ›å»ºIndexRequestæ·»åŠ æ•°æ®</span><br>       <span class="hljs-keyword">for</span> (Goods goods : goodsList) &#123;<br><br>           <span class="hljs-comment">//2.2 è®¾ç½®specè§„æ ¼ä¿¡æ¯ Mapçš„æ•°æ®   specStr:&#123;&#125;</span><br>           <span class="hljs-type">String</span> <span class="hljs-variable">specStr</span> <span class="hljs-operator">=</span> goods.getSpecStr();<br><br>           <span class="hljs-comment">//å°†jsonæ ¼å¼å­—ç¬¦ä¸²è½¬ä¸ºMapé›†åˆ</span><br>           <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> JSON.parseObject(specStr, Map.class);<br><br>           <span class="hljs-comment">//è®¾ç½®spec map</span><br>           goods.setSpec(map);<br><br>           <span class="hljs-comment">//å°†goodså¯¹è±¡è½¬æ¢ä¸ºjsonå­—ç¬¦ä¸²</span><br>           <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> JSON.toJSONString(goods);<br><br>           IndexRequest indexRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(<span class="hljs-string">&quot;goods&quot;</span>).source(data,XContentType.JSON);<br>           bulkRequest.add(indexRequest);<br><br>       &#125;<br><br><br>       <span class="hljs-type">BulkResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.bulk(bulkRequest, RequestOptions.DEFAULT);<br>       System.out.println(response.status());<br><br>   &#125;<br></code></pre></td></tr></table></figure><h3 id="2-5-å¯¼å…¥æ•°æ®-ä»£ç å®ç°-è¯¦è§£ï¼ˆé€‰æ”¾ï¼‰"><a href="#2-5-å¯¼å…¥æ•°æ®-ä»£ç å®ç°-è¯¦è§£ï¼ˆé€‰æ”¾ï¼‰" class="headerlink" title="2.5-å¯¼å…¥æ•°æ®-ä»£ç å®ç°-è¯¦è§£ï¼ˆé€‰æ”¾ï¼‰"></a><strong>2.5-å¯¼å…¥æ•°æ®-ä»£ç å®ç°-è¯¦è§£ï¼ˆé€‰æ”¾ï¼‰</strong></h3><p> è½¬æ¢æˆJSONçš„åŸå› ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JSON">#specé…ç½®çš„æ•°æ®ç±»å‹æ˜¯JSONå¯¹è±¡ï¼Œæ‰€ä»¥å½“å­˜æ”¾å­—ç¬¦ä¸²çš„æ—¶å€™æŠ¥é”™<br><span class="hljs-attr">&quot;spec&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;object&quot;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>é”™è¯¯ä¿¡æ¯</p><p><img src="https://s2.loli.net/2022/04/24/rTUSbDdqBLGEhRY.png" alt="1581164001550"></p><h2 id="3-ElasticSearchæŸ¥è¯¢"><a href="#3-ElasticSearchæŸ¥è¯¢" class="headerlink" title="3-ElasticSearchæŸ¥è¯¢"></a><strong>3-ElasticSearchæŸ¥è¯¢</strong></h2><h3 id="3-1-matchAll-è„šæœ¬"><a href="#3-1-matchAll-è„šæœ¬" class="headerlink" title="3.1-matchAll-è„šæœ¬"></a>3.1-matchAll-è„šæœ¬</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs json"># é»˜è®¤æƒ…å†µä¸‹ï¼Œesä¸€æ¬¡å±•ç¤º<span class="hljs-number">10</span>æ¡æ•°æ®<span class="hljs-punctuation">,</span>é€šè¿‡fromå’Œsizeæ¥æ§åˆ¶åˆ†é¡µ<br># æŸ¥è¯¢ç»“æœè¯¦è§£<br><br>GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;match_all&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;from&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><br><span class="hljs-punctuation">&#125;</span><br><br>GET goods<br></code></pre></td></tr></table></figure><h3 id="3-2-matchAll-JavaAPI"><a href="#3-2-matchAll-JavaAPI" class="headerlink" title="3.2-matchAll-JavaAPI"></a><strong>3.2-matchAll-JavaAPI</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŸ¥è¯¢æ‰€æœ‰</span><br><span class="hljs-comment">     *  1. matchAll</span><br><span class="hljs-comment">     *  2. å°†æŸ¥è¯¢ç»“æœå°è£…ä¸ºGoodså¯¹è±¡ï¼Œè£…è½½åˆ°Listä¸­</span><br><span class="hljs-comment">     *  3. åˆ†é¡µã€‚é»˜è®¤æ˜¾ç¤º10æ¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">matchAll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//2. æ„å»ºæŸ¥è¯¢è¯·æ±‚å¯¹è±¡ï¼ŒæŒ‡å®šæŸ¥è¯¢çš„ç´¢å¼•åç§°</span><br>        SearchRequest searchRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchRequest</span>(<span class="hljs-string">&quot;goods&quot;</span>);<br><br>        <span class="hljs-comment">//4. åˆ›å»ºæŸ¥è¯¢æ¡ä»¶æ„å»ºå™¨SearchSourceBuilder</span><br>        SearchSourceBuilder sourceBuilder=<span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchSourceBuilder</span>();<br><br>        <span class="hljs-comment">//6. æŸ¥è¯¢æ¡ä»¶</span><br>        QueryBuilder queryBuilder= QueryBuilders.matchAllQuery();<br>        <span class="hljs-comment">//5. æŒ‡å®šæŸ¥è¯¢æ¡ä»¶</span><br>        sourceBuilder.query(queryBuilder);<br><br>        <span class="hljs-comment">//3. æ·»åŠ æŸ¥è¯¢æ¡ä»¶æ„å»ºå™¨ SearchSourceBuilder</span><br>        searchRequest.source(sourceBuilder);<br>        <span class="hljs-comment">// 8 . æ·»åŠ åˆ†é¡µä¿¡æ¯  ä¸è®¾ç½® é»˜è®¤10æ¡</span><br><span class="hljs-comment">//        sourceBuilder.from(0);</span><br><span class="hljs-comment">//        sourceBuilder.size(100);</span><br>        <span class="hljs-comment">//1. æŸ¥è¯¢,è·å–æŸ¥è¯¢ç»“æœ</span><br><br>        <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">searchResponse</span> <span class="hljs-operator">=</span> client.search(searchRequest, RequestOptions.DEFAULT);<br><br>        <span class="hljs-comment">//7. è·å–å‘½ä¸­å¯¹è±¡ SearchHits</span><br>        <span class="hljs-type">SearchHits</span> <span class="hljs-variable">hits</span> <span class="hljs-operator">=</span> searchResponse.getHits();<br><br>        <span class="hljs-comment">//7.1 è·å–æ€»è®°å½•æ•°</span><br>      Long total= hits.getTotalHits().value;<br>        System.out.println(<span class="hljs-string">&quot;æ€»æ•°ï¼š&quot;</span>+total);<br>        <span class="hljs-comment">//7.2 è·å–Hitsæ•°æ®  æ•°ç»„</span><br>        SearchHit[] hits1 = hits.getHits();<br>            <span class="hljs-comment">//è·å–jsonå­—ç¬¦ä¸²æ ¼å¼çš„æ•°æ®</span><br>        List&lt;Goods&gt; goodsList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (SearchHit searchHit : hits1) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sourceAsString</span> <span class="hljs-operator">=</span> searchHit.getSourceAsString();<br>            <span class="hljs-comment">//è½¬ä¸ºjavaå¯¹è±¡</span><br>            <span class="hljs-type">Goods</span> <span class="hljs-variable">goods</span> <span class="hljs-operator">=</span> JSON.parseObject(sourceAsString, Goods.class);<br>            goodsList.add(goods);<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (Goods goods : goodsList) &#123;<br>            System.out.println(goods);<br>        &#125;<br><br>    &#125;<br></code></pre></td></tr></table></figure><p>è®¾ç½®æ¡ä»¶çš„ç–‘é—®ç‚¹</p><p><img src="https://s2.loli.net/2022/04/24/T9qdyKgonA8hCRY.png" alt="1580909328868"></p><h3 id="3-3-termQuery"><a href="#3-3-termQuery" class="headerlink" title="3.3-termQuery"></a><strong>3.3-termQuery</strong></h3><p>termæŸ¥è¯¢å’Œå­—æ®µç±»å‹æœ‰å…³ç³»ï¼Œé¦–å…ˆå›é¡¾ä¸€ä¸‹ElasticSearchä¸¤ä¸ªæ•°æ®ç±»å‹</p><p> ElasticSearchä¸¤ä¸ªæ•°æ®ç±»å‹</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-built_in">text</span>ï¼šä¼šåˆ†è¯ï¼Œä¸æ”¯æŒèšåˆ<br><br>keywordï¼šä¸ä¼šåˆ†è¯ï¼Œå°†å…¨éƒ¨å†…å®¹ä½œä¸ºä¸€ä¸ªè¯æ¡ï¼Œæ”¯æŒèšåˆ<br></code></pre></td></tr></table></figure><p>termæŸ¥è¯¢ï¼šä¸ä¼šå¯¹æŸ¥è¯¢æ¡ä»¶è¿›è¡Œåˆ†è¯ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">GET</span> goods/_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;term&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;value&quot;</span>: <span class="hljs-string">&quot;åä¸º&quot;</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>termæŸ¥è¯¢ï¼ŒæŸ¥è¯¢textç±»å‹å­—æ®µæ—¶ï¼Œåªæœ‰å…¶ä¸­çš„å•è¯ç›¸åŒ¹é…éƒ½ä¼šæŸ¥åˆ°ï¼Œtextå­—æ®µä¼šå¯¹æ•°æ®è¿›è¡Œåˆ†è¯</p><p>ä¾‹å¦‚ï¼šæŸ¥è¯¢title ä¸ºâ€œåä¸ºâ€çš„ï¼Œtitle type ä¸ºtext</p><p><img src="https://s2.loli.net/2022/04/27/czqCZ5W37ju2GS8.png" alt="1580910336989"></p><p><img src="https://s2.loli.net/2022/04/27/k8U4JNWI1mEQX2F.png" alt="1580910384673"></p><p>æŸ¥è¯¢categoryName å­—æ®µæ—¶ï¼ŒcategoryNameå­—æ®µä¸ºkeyword  ,keywordï¼šä¸ä¼šåˆ†è¯ï¼Œå°†å…¨éƒ¨å†…å®¹ä½œä¸ºä¸€ä¸ªè¯æ¡,</p><p>å³å®Œå…¨åŒ¹é…ï¼Œæ‰èƒ½æŸ¥è¯¢å‡ºç»“æœ</p><p><img src="/Hexo/img/1580910596746.png" alt="1580910596746"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json">GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;term&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;categoryName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åä¸ºæ‰‹æœº&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/27/b8XqAyOINRVJiC9.png" alt="1580910648421"></p><h3 id="3-4-matchQuery"><a href="#3-4-matchQuery" class="headerlink" title="3.4-matchQuery"></a><strong>3.4-matchQuery</strong></h3><p>matchæŸ¥è¯¢ï¼š</p><p>â€¢ä¼šå¯¹æŸ¥è¯¢æ¡ä»¶è¿›è¡Œåˆ†è¯ã€‚</p><p>â€¢ç„¶åå°†åˆ†è¯åçš„æŸ¥è¯¢æ¡ä»¶å’Œè¯æ¡è¿›è¡Œç­‰å€¼åŒ¹é…</p><p>â€¢é»˜è®¤å–å¹¶é›†ï¼ˆORï¼‰</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># matchæŸ¥è¯¢</span><br><span class="hljs-built_in">GET</span> goods/_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;match&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;åä¸ºæ‰‹æœº&quot;</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-string">&quot;size&quot;</span>: 500<br>&#125;<br></code></pre></td></tr></table></figure><p>match çš„é»˜è®¤æœç´¢ï¼ˆor å¹¶é›†ï¼‰</p><p>ä¾‹å¦‚ï¼šåä¸ºæ‰‹æœºï¼Œä¼šåˆ†è¯ä¸º â€œåä¸ºâ€ï¼Œâ€œæ‰‹æœºâ€ åªè¦å‡ºç°å…¶ä¸­ä¸€ä¸ªè¯æ¡éƒ½ä¼šæœç´¢åˆ°</p><p>matchçš„ andï¼ˆäº¤é›†ï¼‰ æœç´¢</p><p>ä¾‹å¦‚ï¼šä¾‹å¦‚ï¼šåä¸ºæ‰‹æœºï¼Œä¼šåˆ†è¯ä¸º â€œåä¸ºâ€ï¼Œâ€œæ‰‹æœºâ€  ä½†è¦æ±‚â€œåä¸ºâ€ï¼Œå’Œâ€œæ‰‹æœºâ€åŒæ—¶å‡ºç°åœ¨è¯æ¡ä¸­</p><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>term queryä¼šå»å€’æ’ç´¢å¼•ä¸­å¯»æ‰¾ç¡®åˆ‡çš„termï¼Œå®ƒå¹¶ä¸çŸ¥é“åˆ†è¯å™¨çš„å­˜åœ¨ã€‚è¿™ç§æŸ¥è¯¢é€‚åˆ<strong>keyword</strong> ã€<strong>numeric</strong>ã€<strong>date</strong></li><li>match queryçŸ¥é“åˆ†è¯å™¨çš„å­˜åœ¨ã€‚å¹¶ä¸”ç†è§£æ˜¯å¦‚ä½•è¢«åˆ†è¯çš„</li></ul><h3 id="3-5-æ¨¡ç³ŠæŸ¥è¯¢-è„šæœ¬"><a href="#3-5-æ¨¡ç³ŠæŸ¥è¯¢-è„šæœ¬" class="headerlink" title="3.5-æ¨¡ç³ŠæŸ¥è¯¢-è„šæœ¬"></a><strong>3.5-æ¨¡ç³ŠæŸ¥è¯¢-è„šæœ¬</strong></h3><h3 id="3-5-1-wildcardæŸ¥è¯¢"><a href="#3-5-1-wildcardæŸ¥è¯¢" class="headerlink" title="3.5.1-wildcardæŸ¥è¯¢"></a>3.5.1-wildcardæŸ¥è¯¢</h3><p>wildcardæŸ¥è¯¢ï¼šä¼šå¯¹æŸ¥è¯¢æ¡ä»¶è¿›è¡Œåˆ†è¯ã€‚è¿˜å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ ?ï¼ˆä»»æ„å•ä¸ªå­—ç¬¦ï¼‰ å’Œ  * ï¼ˆ0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼‰</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;*å*&quot;</span>  åŒ…å«åå­—çš„<br><span class="hljs-string">&quot;å*&quot;</span>   åå­—åè¾¹å¤šä¸ªå­—ç¬¦<br><span class="hljs-string">&quot;å?&quot;</span>  åå­—åè¾¹å¤šä¸ªå­—ç¬¦<br><span class="hljs-string">&quot;*å&quot;</span>æˆ–<span class="hljs-string">&quot;?å&quot;</span> ä¼šå¼•å‘å…¨è¡¨ï¼ˆå…¨ç´¢å¼•ï¼‰æ‰«æ æ³¨æ„æ•ˆç‡é—®é¢˜<br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"># wildcard æŸ¥è¯¢ã€‚æŸ¥è¯¢æ¡ä»¶åˆ†è¯ï¼Œæ¨¡ç³ŠæŸ¥è¯¢<br>GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;wildcard&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;å*&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="3-5-2æ­£åˆ™æŸ¥è¯¢"><a href="#3-5-2æ­£åˆ™æŸ¥è¯¢" class="headerlink" title="3.5.2æ­£åˆ™æŸ¥è¯¢"></a>3.5.2æ­£åˆ™æŸ¥è¯¢</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scss">\Wï¼šåŒ¹é…åŒ…æ‹¬ä¸‹åˆ’çº¿çš„ä»»ä½•å•è¯å­—ç¬¦ï¼Œç­‰ä»·äº <span class="hljs-selector-attr">[A-Z a-z 0-9_]</span>   å¼€å¤´çš„åæ–œæ æ˜¯è½¬ä¹‰ç¬¦<br><br>+å·å¤šæ¬¡å‡ºç°<br><br>(.)*ä¸ºä»»æ„å­—ç¬¦<br>æ­£åˆ™æŸ¥è¯¢å–å†³äºæ­£åˆ™è¡¨è¾¾å¼çš„æ•ˆç‡<br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json"><br>GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;regexp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;\\w+(.)*&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h3 id="3-5-3å‰ç¼€æŸ¥è¯¢"><a href="#3-5-3å‰ç¼€æŸ¥è¯¢" class="headerlink" title="3.5.3å‰ç¼€æŸ¥è¯¢"></a>3.5.3å‰ç¼€æŸ¥è¯¢</h3><p> å¯¹keywordç±»å‹æ”¯æŒæ¯”è¾ƒå¥½</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"># å‰ç¼€æŸ¥è¯¢ å¯¹keywordç±»å‹æ”¯æŒæ¯”è¾ƒå¥½<br>GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;prefix&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;brandName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¸‰&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="3-6-æ¨¡ç³ŠæŸ¥è¯¢-JavaAPI"><a href="#3-6-æ¨¡ç³ŠæŸ¥è¯¢-JavaAPI" class="headerlink" title="3.6-æ¨¡ç³ŠæŸ¥è¯¢-JavaAPI"></a><strong>3.6-æ¨¡ç³ŠæŸ¥è¯¢-JavaAPI</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="hljs-type">WildcardQueryBuilder</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> QueryBuilders.wildcardQuery(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;å*&quot;</span>);<span class="hljs-comment">//ååå¤šä¸ªå­—ç¬¦</span><br><span class="hljs-comment">//æ­£åˆ™æŸ¥è¯¢</span><br> <span class="hljs-type">RegexpQueryBuilder</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> QueryBuilders.regexpQuery(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;\\w+(.)*&quot;</span>);<br> <span class="hljs-comment">//å‰ç¼€æŸ¥è¯¢</span><br> <span class="hljs-type">PrefixQueryBuilder</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> QueryBuilders.prefixQuery(<span class="hljs-string">&quot;brandName&quot;</span>, <span class="hljs-string">&quot;ä¸‰&quot;</span>);<br></code></pre></td></tr></table></figure><h3 id="3-7-èŒƒå›´-amp-æ’åºæŸ¥è¯¢"><a href="#3-7-èŒƒå›´-amp-æ’åºæŸ¥è¯¢" class="headerlink" title="3.7-èŒƒå›´&amp;æ’åºæŸ¥è¯¢"></a><strong>3.7-èŒƒå›´&amp;æ’åºæŸ¥è¯¢</strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs json"># èŒƒå›´æŸ¥è¯¢<br><br>GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;range&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;gte&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2000</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;lte&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3000</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;sort&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;order&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;desc&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-comment">//èŒƒå›´æŸ¥è¯¢ ä»¥price ä»·æ ¼ä¸ºæ¡ä»¶</span><br><span class="hljs-type">RangeQueryBuilder</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> QueryBuilders.rangeQuery(<span class="hljs-string">&quot;price&quot;</span>);<br><br><span class="hljs-comment">//æŒ‡å®šä¸‹é™</span><br>query.gte(<span class="hljs-number">2000</span>);<br><span class="hljs-comment">//æŒ‡å®šä¸Šé™</span><br>query.lte(<span class="hljs-number">3000</span>);<br><br>sourceBuilder.query(query);<br><br><span class="hljs-comment">//æ’åº  ä»·æ ¼ é™åºæ’åˆ—</span><br>sourceBuilder.sort(<span class="hljs-string">&quot;price&quot;</span>,SortOrder.DESC);<br></code></pre></td></tr></table></figure><h3 id="3-8-queryStringæŸ¥è¯¢"><a href="#3-8-queryStringæŸ¥è¯¢" class="headerlink" title="3.8-queryStringæŸ¥è¯¢"></a><strong>3.8-queryStringæŸ¥è¯¢</strong></h3><p> queryString å¤šæ¡ä»¶æŸ¥è¯¢</p><p>â€¢ä¼šå¯¹æŸ¥è¯¢æ¡ä»¶è¿›è¡Œåˆ†è¯ã€‚</p><p>â€¢ç„¶åå°†åˆ†è¯åçš„æŸ¥è¯¢æ¡ä»¶å’Œè¯æ¡è¿›è¡Œç­‰å€¼åŒ¹é…</p><p>â€¢é»˜è®¤å–å¹¶é›†ï¼ˆORï¼‰</p><p>â€¢å¯ä»¥æŒ‡å®šå¤šä¸ªæŸ¥è¯¢å­—æ®µ</p><p>query_stringï¼šè¯†åˆ«queryä¸­çš„è¿æ¥ç¬¦ï¼ˆor ã€andï¼‰</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># queryString</span><br><br><span class="hljs-built_in">GET</span> goods/_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;query_string&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;fields&quot;</span>: [<span class="hljs-string">&quot;title&quot;</span>,<span class="hljs-string">&quot;categoryName&quot;</span>,<span class="hljs-string">&quot;brandName&quot;</span>], <br>      <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;åä¸º AND æ‰‹æœº&quot;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><font color='green'>simple_query_stringï¼šä¸è¯†åˆ«queryä¸­çš„è¿æ¥ç¬¦</font>ï¼ˆor ã€andï¼‰ï¼ŒæŸ¥è¯¢æ—¶ä¼šå°† â€œåä¸ºâ€ã€â€andâ€ã€â€œæ‰‹æœºâ€åˆ†åˆ«è¿›è¡ŒæŸ¥è¯¢</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">GET</span> goods/_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;simple_query_string&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;fields&quot;</span>: [<span class="hljs-string">&quot;title&quot;</span>,<span class="hljs-string">&quot;categoryName&quot;</span>,<span class="hljs-string">&quot;brandName&quot;</span>], <br>      <span class="hljs-string">&quot;query&quot;</span>: <span class="hljs-string">&quot;åä¸º AND æ‰‹æœº&quot;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>query_stringï¼šæœ‰default_operatorè¿æ¥ç¬¦çš„è„šæœ¬</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json">GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;query_string&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;fields&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;title&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;brandName&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;categoryName&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åä¸ºæ‰‹æœº &quot;</span><br>      <span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;default_operator&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;AND&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>javaä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">QueryStringQueryBuilder</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> QueryBuilders.queryStringQuery(<span class="hljs-string">&quot;åä¸ºæ‰‹æœº&quot;</span>).field(<span class="hljs-string">&quot;title&quot;</span>).field(<span class="hljs-string">&quot;categoryName&quot;</span>)<br>.field(<span class="hljs-string">&quot;brandName&quot;</span>).defaultOperator(Operator.AND);<br></code></pre></td></tr></table></figure><p>simple_query_stringï¼šæœ‰default_operatorè¿æ¥ç¬¦çš„è„šæœ¬</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json">GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;simple_query_string&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;fields&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;title&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;brandName&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-string">&quot;categoryName&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åä¸ºæ‰‹æœº &quot;</span><br>      <span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;default_operator&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;OR&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šqueryä¸­çš„or   and æ˜¯æŸ¥è¯¢æ—¶ åŒ¹é…æ¡ä»¶æ˜¯å¦åŒæ—¶å‡ºç°â€”-or å‡ºç°ä¸€ä¸ªå³å¯ï¼Œand ä¸¤ä¸ªæ¡ä»¶åŒæ—¶å‡ºç°</p><p>default_operatorçš„or   and æ˜¯å¯¹ç»“æœè¿›è¡Œ å¹¶é›†ï¼ˆorï¼‰ã€äº¤é›†ï¼ˆandï¼‰</p><h3 id="3-9-å¸ƒå°”æŸ¥è¯¢-è„šæœ¬"><a href="#3-9-å¸ƒå°”æŸ¥è¯¢-è„šæœ¬" class="headerlink" title="3.9-å¸ƒå°”æŸ¥è¯¢-è„šæœ¬"></a><strong>3.9-å¸ƒå°”æŸ¥è¯¢-è„šæœ¬</strong></h3><p> boolQueryï¼šå¯¹å¤šä¸ªæŸ¥è¯¢æ¡ä»¶è¿æ¥ã€‚è¿æ¥æ–¹å¼ï¼š</p><p>â€¢mustï¼ˆandï¼‰ï¼šæ¡ä»¶å¿…é¡»æˆç«‹</p><p>â€¢must_notï¼ˆnotï¼‰ï¼šæ¡ä»¶å¿…é¡»ä¸æˆç«‹</p><p>â€¢shouldï¼ˆorï¼‰ï¼šæ¡ä»¶å¯ä»¥æˆç«‹</p><p>â€¢filterï¼šæ¡ä»¶å¿…é¡»æˆç«‹ï¼Œæ€§èƒ½<font color='cornflowerblue'>æ¯”musté«˜&lt;ã€‚ä¸ä¼šè®¡ç®—å¾—åˆ†</p><p>**å¾—åˆ†:**å³æ¡ä»¶åŒ¹é…åº¦,åŒ¹é…åº¦è¶Šé«˜ï¼Œå¾—åˆ†è¶Šé«˜</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs json"># boolquery<br>#mustå’Œfilteré…åˆä½¿ç”¨æ—¶ï¼Œmax_scoreï¼ˆå¾—åˆ†ï¼‰æ˜¯æ˜¾ç¤ºçš„<br>#must é»˜è®¤æ•°ç»„å½¢å¼<br>GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;bool&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;must&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;term&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;brandName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>              <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åä¸º&quot;</span><br>            <span class="hljs-punctuation">&#125;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;filter&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span> <br>        <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;term&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ‰‹æœº&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><br>       <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>       <span class="hljs-punctuation">&#123;</span><br>         <span class="hljs-attr">&quot;range&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;gte&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2000</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;lte&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3000</span><br>         <span class="hljs-punctuation">&#125;</span><br>         <span class="hljs-punctuation">&#125;</span><br>       <span class="hljs-punctuation">&#125;</span><br>      <br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br>#filter å•ç‹¬ä½¿ç”¨   filterå¯ä»¥æ˜¯å•ä¸ªæ¡ä»¶ï¼Œä¹Ÿå¯å¤šä¸ªæ¡ä»¶ï¼ˆæ•°ç»„å½¢å¼ï¼‰<br>GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;bool&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;filter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;term&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;brandName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>              <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åä¸º&quot;</span><br>            <span class="hljs-punctuation">&#125;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="3-10-å¸ƒå°”æŸ¥è¯¢-JavaAPI"><a href="#3-10-å¸ƒå°”æŸ¥è¯¢-JavaAPI" class="headerlink" title="3.10-å¸ƒå°”æŸ¥è¯¢-JavaAPI"></a><strong>3.10-å¸ƒå°”æŸ¥è¯¢-JavaAPI</strong></h3><p>å¸ƒå°”æŸ¥è¯¢ï¼šboolQuery </p><ol><li>æŸ¥è¯¢å“ç‰Œåç§°ä¸º:åä¸º </li><li>æŸ¥è¯¢æ ‡é¢˜åŒ…å«ï¼šæ‰‹æœº</li><li>æŸ¥è¯¢ä»·æ ¼åœ¨ï¼š2000-3000</li></ol><p>must ã€filterä¸ºè¿æ¥æ–¹å¼</p><p>termã€matchä¸ºä¸åŒçš„æŸ¥è¯¢æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1.æ„å»ºboolQuery</span><br> <span class="hljs-type">BoolQueryBuilder</span> <span class="hljs-variable">boolQuery</span> <span class="hljs-operator">=</span> QueryBuilders.boolQuery();<br> <span class="hljs-comment">//2.æ„å»ºå„ä¸ªæŸ¥è¯¢æ¡ä»¶</span><br> <span class="hljs-comment">//2.1 æŸ¥è¯¢å“ç‰Œåç§°ä¸º:åä¸º</span><br> <span class="hljs-type">TermQueryBuilder</span> <span class="hljs-variable">termQueryBuilder</span> <span class="hljs-operator">=</span> QueryBuilders.termQuery(<span class="hljs-string">&quot;brandName&quot;</span>, <span class="hljs-string">&quot;åä¸º&quot;</span>);<br> boolQuery.must(termQueryBuilder);<br> <span class="hljs-comment">//2.2. æŸ¥è¯¢æ ‡é¢˜åŒ…å«ï¼šæ‰‹æœº</span><br> <span class="hljs-type">MatchQueryBuilder</span> <span class="hljs-variable">matchQuery</span> <span class="hljs-operator">=</span> QueryBuilders.matchQuery(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;æ‰‹æœº&quot;</span>);<br> boolQuery.filter(matchQuery);<br><br> <span class="hljs-comment">//2.3 æŸ¥è¯¢ä»·æ ¼åœ¨ï¼š2000-3000</span><br> <span class="hljs-type">RangeQueryBuilder</span> <span class="hljs-variable">rangeQuery</span> <span class="hljs-operator">=</span> QueryBuilders.rangeQuery(<span class="hljs-string">&quot;price&quot;</span>);<br> rangeQuery.gte(<span class="hljs-number">2000</span>);<br> rangeQuery.lte(<span class="hljs-number">3000</span>);<br> boolQuery.filter(rangeQuery);<br><br> sourceBuilder.query(boolQuery);<br></code></pre></td></tr></table></figure><h3 id="3-11-èšåˆæŸ¥è¯¢-è„šæœ¬"><a href="#3-11-èšåˆæŸ¥è¯¢-è„šæœ¬" class="headerlink" title="3.11-èšåˆæŸ¥è¯¢-è„šæœ¬"></a><strong>3.11-èšåˆæŸ¥è¯¢-è„šæœ¬</strong></h3><p>â€¢æŒ‡æ ‡èšåˆï¼šç›¸å½“äºMySQLçš„èšåˆå‡½æ•°ã€‚maxã€minã€avgã€sumç­‰</p><p>â€¢æ¡¶èšåˆï¼šç›¸å½“äºMySQLçš„ group by æ“ä½œã€‚ä¸è¦å¯¹textç±»å‹çš„æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œä¼šå¤±è´¥ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs json"># èšåˆæŸ¥è¯¢<br><br># æŒ‡æ ‡èšåˆ èšåˆå‡½æ•°<br><br>GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;match&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ‰‹æœº&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;aggs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;max_price&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;max&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;field&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;price&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br># æ¡¶èšåˆ  åˆ†ç»„<br><br>GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;match&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ‰‹æœº&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;aggs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;goods_brands&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;terms&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;field&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;brandName&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;size&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="3-12-èšåˆæŸ¥è¯¢-JavaAPI"><a href="#3-12-èšåˆæŸ¥è¯¢-JavaAPI" class="headerlink" title="3.12-èšåˆæŸ¥è¯¢-JavaAPI"></a><strong>3.12-èšåˆæŸ¥è¯¢-JavaAPI</strong></h3><p>èšåˆæŸ¥è¯¢ï¼šæ¡¶èšåˆï¼Œåˆ†ç»„æŸ¥è¯¢</p><ol><li>æŸ¥è¯¢titleåŒ…å«æ‰‹æœºçš„æ•°æ®</li><li>æŸ¥è¯¢å“ç‰Œåˆ—è¡¨</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">     * èšåˆæŸ¥è¯¢ï¼šæ¡¶èšåˆï¼Œåˆ†ç»„æŸ¥è¯¢</span><br><span class="hljs-comment">     * 1. æŸ¥è¯¢titleåŒ…å«æ‰‹æœºçš„æ•°æ®</span><br><span class="hljs-comment">     * 2. æŸ¥è¯¢å“ç‰Œåˆ—è¡¨</span><br><span class="hljs-comment">     */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAggQuery</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>    SearchRequest searchRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchRequest</span>(<span class="hljs-string">&quot;goods&quot;</span>);<br><br>    SearchSourceBuilder sourceBuilder=<span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchSourceBuilder</span>();<br>    <span class="hljs-comment">//1. æŸ¥è¯¢titleåŒ…å«æ‰‹æœºçš„æ•°æ®</span><br><br>    <span class="hljs-type">MatchQueryBuilder</span> <span class="hljs-variable">queryBuilder</span> <span class="hljs-operator">=</span> QueryBuilders.matchQuery(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;æ‰‹æœº&quot;</span>);<br><br>    sourceBuilder.query(queryBuilder);<br>    <span class="hljs-comment">//2. æŸ¥è¯¢å“ç‰Œåˆ—è¡¨  åªå±•ç¤ºå‰100æ¡</span><br>    AggregationBuilder aggregation=AggregationBuilders.terms(<span class="hljs-string">&quot;goods_brands&quot;</span>).field(<span class="hljs-string">&quot;brandName&quot;</span>).size(<span class="hljs-number">100</span>);<br>    sourceBuilder.aggregation(aggregation);<br><br><br>    searchRequest.source(sourceBuilder);<br><br>    <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">searchResponse</span> <span class="hljs-operator">=</span> client.search(searchRequest, RequestOptions.DEFAULT);<br><br>    <span class="hljs-comment">//7. è·å–å‘½ä¸­å¯¹è±¡ SearchHits</span><br>    <span class="hljs-type">SearchHits</span> <span class="hljs-variable">hits</span> <span class="hljs-operator">=</span> searchResponse.getHits();<br><br>    <span class="hljs-comment">//7.1 è·å–æ€»è®°å½•æ•°</span><br>    Long total= hits.getTotalHits().value;<br>    System.out.println(<span class="hljs-string">&quot;æ€»æ•°ï¼š&quot;</span>+total);<br><br>    <span class="hljs-comment">// aggregations å¯¹è±¡</span><br>    <span class="hljs-type">Aggregations</span> <span class="hljs-variable">aggregations</span> <span class="hljs-operator">=</span> searchResponse.getAggregations();<br>    <span class="hljs-comment">//å°†aggregations è½¬åŒ–ä¸ºmap</span><br>    Map&lt;String, Aggregation&gt; aggregationMap = aggregations.asMap();<br><br><br>    <span class="hljs-comment">//é€šè¿‡keyè·å–goods_brands å¯¹è±¡ ä½¿ç”¨Aggregationçš„å­ç±»æ¥æ”¶  bucketså±æ€§åœ¨Termsæ¥å£ä¸­ä½“ç°</span><br><br>    <span class="hljs-comment">//        Aggregation goods_brands1 = aggregationMap.get(&quot;goods_brands&quot;);</span><br>    <span class="hljs-type">Terms</span> <span class="hljs-variable">goods_brands</span> <span class="hljs-operator">=</span>(Terms) aggregationMap.get(<span class="hljs-string">&quot;goods_brands&quot;</span>);<br><br>    <span class="hljs-comment">//è·å–buckets æ•°ç»„é›†åˆ</span><br>    List&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Terms</span>.Bucket&gt; buckets = goods_brands.getBuckets();<br><br>    Map&lt;String,Object&gt;map=<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-comment">//éå†buckets   key å±æ€§åï¼Œdoc_count ç»Ÿè®¡èšåˆæ•°</span><br>    <span class="hljs-keyword">for</span> (Terms.Bucket bucket : buckets) &#123;<br><br>        System.out.println(bucket.getKey());<br>        map.put(bucket.getKeyAsString(),bucket.getDocCount());<br>    &#125;<br><br>    System.out.println(map);<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-13-é«˜äº®æŸ¥è¯¢-è„šæœ¬"><a href="#3-13-é«˜äº®æŸ¥è¯¢-è„šæœ¬" class="headerlink" title="3.13-é«˜äº®æŸ¥è¯¢-è„šæœ¬"></a><strong>3.13-é«˜äº®æŸ¥è¯¢-è„šæœ¬</strong></h3><p>é«˜äº®ä¸‰è¦ç´ ï¼š</p><p>â€¢é«˜äº®å­—æ®µ</p><p>â€¢å‰ç¼€</p><p>â€¢åç¼€</p><p>é»˜è®¤å‰åç¼€ ï¼šem</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>æ‰‹æœº<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json">GET goods/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;match&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ç”µè§†&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;highlight&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;fields&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;pre_tags&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;font color=&#x27;red&#x27;&gt;&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;post_tags&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&lt;/font&gt;&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="3-14-é«˜äº®æŸ¥è¯¢-JavaAPI"><a href="#3-14-é«˜äº®æŸ¥è¯¢-JavaAPI" class="headerlink" title="3.14-é«˜äº®æŸ¥è¯¢-JavaAPI"></a><strong>3.14-é«˜äº®æŸ¥è¯¢-JavaAPI</strong></h3><p>  å®æ–½æ­¥éª¤ï¼š<br>      é«˜äº®æŸ¥è¯¢ï¼š<br>       1. è®¾ç½®é«˜äº®<br>                          é«˜äº®å­—æ®µ<br>                         å‰ç¼€<br>                           åç¼€<br>            2. å°†é«˜äº®äº†çš„å­—æ®µæ•°æ®ï¼Œæ›¿æ¢åŸæœ‰æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * é«˜äº®æŸ¥è¯¢ï¼š</span><br><span class="hljs-comment">     *  1. è®¾ç½®é«˜äº®</span><br><span class="hljs-comment">     *      * é«˜äº®å­—æ®µ</span><br><span class="hljs-comment">     *      * å‰ç¼€</span><br><span class="hljs-comment">     *      * åç¼€</span><br><span class="hljs-comment">     *  2. å°†é«˜äº®äº†çš„å­—æ®µæ•°æ®ï¼Œæ›¿æ¢åŸæœ‰æ•°æ®</span><br><span class="hljs-comment">     */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testHighLightQuery</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br><br>    <span class="hljs-type">SearchRequest</span> <span class="hljs-variable">searchRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchRequest</span>(<span class="hljs-string">&quot;goods&quot;</span>);<br><br>    <span class="hljs-type">SearchSourceBuilder</span> <span class="hljs-variable">sourceBulider</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SearchSourceBuilder</span>();<br><br>    <span class="hljs-comment">// 1. æŸ¥è¯¢titleåŒ…å«æ‰‹æœºçš„æ•°æ®</span><br>    <span class="hljs-type">MatchQueryBuilder</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> QueryBuilders.matchQuery(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;æ‰‹æœº&quot;</span>);<br><br>    sourceBulider.query(query);<br><br>    <span class="hljs-comment">//è®¾ç½®é«˜äº®</span><br>    <span class="hljs-type">HighlightBuilder</span> <span class="hljs-variable">highlighter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HighlightBuilder</span>();<br>    <span class="hljs-comment">//è®¾ç½®ä¸‰è¦ç´ </span><br>    highlighter.field(<span class="hljs-string">&quot;title&quot;</span>);<br>    <span class="hljs-comment">//è®¾ç½®å‰åç¼€æ ‡ç­¾</span><br>    highlighter.preTags(<span class="hljs-string">&quot;&lt;font color=&#x27;red&#x27;&gt;&quot;</span>);<br>    highlighter.postTags(<span class="hljs-string">&quot;&lt;/font&gt;&quot;</span>);<br><br>    <span class="hljs-comment">//åŠ è½½å·²ç»è®¾ç½®å¥½çš„é«˜äº®é…ç½®</span><br>    sourceBulider.highlighter(highlighter);<br><br>    searchRequest.source(sourceBulider);<br><br>    <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">searchResponse</span> <span class="hljs-operator">=</span> client.search(searchRequest, RequestOptions.DEFAULT);<br><br><br>    <span class="hljs-type">SearchHits</span> <span class="hljs-variable">searchHits</span> <span class="hljs-operator">=</span> searchResponse.getHits();<br>    <span class="hljs-comment">//è·å–è®°å½•æ•°</span><br>    <span class="hljs-type">long</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> searchHits.getTotalHits().value;<br>    System.out.println(<span class="hljs-string">&quot;æ€»è®°å½•æ•°ï¼š&quot;</span>+value);<br><br>    List&lt;Goods&gt; goodsList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    SearchHit[] hits = searchHits.getHits();<br>    <span class="hljs-keyword">for</span> (SearchHit hit : hits) &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sourceAsString</span> <span class="hljs-operator">=</span> hit.getSourceAsString();<br><br>        <span class="hljs-comment">//è½¬ä¸ºjava</span><br>        <span class="hljs-type">Goods</span> <span class="hljs-variable">goods</span> <span class="hljs-operator">=</span> JSON.parseObject(sourceAsString, Goods.class);<br><br>        <span class="hljs-comment">// è·å–é«˜äº®ç»“æœï¼Œæ›¿æ¢goodsä¸­çš„title</span><br>        Map&lt;String, HighlightField&gt; highlightFields = hit.getHighlightFields();<br>        <span class="hljs-type">HighlightField</span> <span class="hljs-variable">HighlightField</span> <span class="hljs-operator">=</span> highlightFields.get(<span class="hljs-string">&quot;title&quot;</span>);<br>        Text[] fragments = HighlightField.fragments();<br>        <span class="hljs-comment">//highlight titleæ›¿æ¢ æ›¿æ¢goodsä¸­çš„title</span><br>        goods.setTitle(fragments[<span class="hljs-number">0</span>].toString());<br>        goodsList.add(goods);<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (Goods goods : goodsList) &#123;<br>        System.out.println(goods);<br>    &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-15-é‡å»ºç´¢å¼•-amp-ç´¢å¼•åˆ«å"><a href="#3-15-é‡å»ºç´¢å¼•-amp-ç´¢å¼•åˆ«å" class="headerlink" title="3.15-é‡å»ºç´¢å¼•&amp;ç´¢å¼•åˆ«å"></a><strong>3.15-é‡å»ºç´¢å¼•&amp;ç´¢å¼•åˆ«å</strong></h3><p>éšç€ä¸šåŠ¡éœ€æ±‚çš„å˜æ›´ï¼Œç´¢å¼•çš„ç»“æ„å¯èƒ½å‘ç”Ÿæ”¹å˜ã€‚</p><p>ElasticSearchçš„ç´¢å¼•ä¸€æ—¦åˆ›å»ºï¼Œåªå…è®¸æ·»åŠ å­—æ®µï¼Œä¸å…è®¸æ”¹å˜å­—æ®µã€‚å› ä¸ºæ”¹å˜å­—æ®µï¼Œéœ€è¦é‡å»ºå€’æ’ç´¢å¼•ï¼Œå½±å“å†…éƒ¨ç¼“å­˜ç»“æ„ï¼Œæ€§èƒ½å¤ªä½ã€‚</p><p>é‚£ä¹ˆæ­¤æ—¶ï¼Œå°±éœ€è¦é‡å»ºä¸€ä¸ªæ–°çš„ç´¢å¼•ï¼Œå¹¶å°†åŸæœ‰ç´¢å¼•çš„æ•°æ®å¯¼å…¥åˆ°æ–°ç´¢å¼•ä¸­ã€‚</p><p> <img src="https://s2.loli.net/2022/04/28/JApQ6ZYWq8f3Ldm.png" alt="image-20220428113002589"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json">#æŸ¥è¯¢åˆ«å é»˜è®¤åˆ«åæ— æ³•æŸ¥çœ‹ï¼Œé»˜è®¤åˆ«ååŒç´¢å¼•å<br>GET goods/_alias/<br>#ç»“æœ<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;goods&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;aliases&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span> <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>1.æ–°å»ºstudent_index_v1ç´¢å¼•</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs json"># -------é‡å»ºç´¢å¼•-----------<br><br># æ–°å»ºstudent_index_v1ã€‚ç´¢å¼•åç§°å¿…é¡»å…¨éƒ¨å°å†™<br><br>PUT student_index_v1<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;mappings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;birthday&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;date&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br>#æŸ¥çœ‹ student_index_v1 ç»“æ„<br>GET student_index_v1<br>#æ·»åŠ æ•°æ®<br>PUT student_index_v1/_doc/<span class="hljs-number">1</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;birthday&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;1999-11-11&quot;</span><br><span class="hljs-punctuation">&#125;</span><br>#æŸ¥çœ‹æ•°æ®<br>GET student_index_v1/_search<br><br>#æ·»åŠ æ•°æ®<br>PUT student_index_v1/_doc/<span class="hljs-number">1</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;birthday&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;1999å¹´11æœˆ11æ—¥&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>2.é‡å»ºç´¢å¼•:å°†student_index_v1 æ•°æ®æ‹·è´åˆ° student_index_v2</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs json"># ä¸šåŠ¡å˜æ›´äº†ï¼Œéœ€è¦æ”¹å˜birthdayå­—æ®µçš„ç±»å‹ä¸ºtext<br><br># <span class="hljs-number">1.</span> åˆ›å»ºæ–°çš„ç´¢å¼• student_index_v2<br># <span class="hljs-number">2.</span> å°†student_index_v1 æ•°æ®æ‹·è´åˆ° student_index_v2<br><br># åˆ›å»ºæ–°çš„ç´¢å¼• student_index_v2<br>PUT student_index_v2<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;mappings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;birthday&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br># å°†student_index_v1 æ•°æ®æ‹·è´åˆ° student_index_v2<br># _reindex æ‹·è´æ•°æ®<br>POST _reindex<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;source&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;index&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;student_index_v1&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dest&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;index&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;student_index_v2&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br>GET student_index_v2/_search<br><br><br><br>PUT student_index_v2/_doc/<span class="hljs-number">2</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;birthday&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;1999å¹´11æœˆ11æ—¥&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>3.åˆ›å»ºç´¢å¼•åº“åˆ«åï¼š</p><p>æ³¨æ„ï¼šDELETE student_index_v1 è¿™ä¸€æ“ä½œå°†åˆ é™¤student_index_v1ç´¢å¼•åº“ï¼Œå¹¶ä¸æ˜¯åˆ é™¤åˆ«å</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs json"># æ€è€ƒï¼š ç°åœ¨javaä»£ç ä¸­æ“ä½œesï¼Œè¿˜æ˜¯ä½¿ç”¨çš„å®student_index_v1è€çš„ç´¢å¼•åç§°ã€‚<br># <span class="hljs-number">1.</span> æ”¹ä»£ç ï¼ˆä¸æ¨èï¼‰<br># <span class="hljs-number">2.</span> ç´¢å¼•åˆ«åï¼ˆæ¨èï¼‰<br><br># æ­¥éª¤ï¼š<br># <span class="hljs-number">0.</span> å…ˆåˆ é™¤student_index_v1<br># <span class="hljs-number">1.</span> ç»™student_index_v2èµ·ä¸ªåˆ«å student_index_v1<br><br><br><br># å…ˆåˆ é™¤student_index_v1<br>#DELETE student_index_v1 è¿™ä¸€æ“ä½œå°†åˆ é™¤student_index_v1ç´¢å¼•åº“<br>#ç´¢å¼•åº“é»˜è®¤çš„åˆ«åä¸ç´¢å¼•åº“åŒåï¼Œæ— æ³•åˆ é™¤<br><br># ç»™student_index_v1èµ·ä¸ªåˆ«å student_index_v11<br>POST student_index_v2/_alias/student_index_v11<br>#æµ‹è¯•åˆ é™¤å‘½ä»¤<br>POST /_aliases<br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;actions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;remove&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;index&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;student_index_v1&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;alias&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;student_index_v11&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br><br># ç»™student_index_v2èµ·ä¸ªåˆ«å student_index_v1<br>POST student_index_v2/_alias/student_index_v1<br><br>#æŸ¥è¯¢åˆ«å<br>GET goods/_alias/<br><br><br>GET student_index_v1/_search<br>GET student_index_v2/_search<br><br></code></pre></td></tr></table></figure><h2 id="4-ElasticSearch-é›†ç¾¤"><a href="#4-ElasticSearch-é›†ç¾¤" class="headerlink" title="4-ElasticSearch é›†ç¾¤"></a><strong>4-ElasticSearch é›†ç¾¤</strong></h2><h3 id="4-1-é›†ç¾¤ä»‹ç»"><a href="#4-1-é›†ç¾¤ä»‹ç»" class="headerlink" title="4.1-é›†ç¾¤ä»‹ç»"></a>4.1-é›†ç¾¤ä»‹ç»</h3><ul><li>é›†ç¾¤å’Œåˆ†å¸ƒå¼ï¼š</li></ul><p>â€‹            é›†ç¾¤ï¼šå¤šä¸ªäººåšä¸€æ ·çš„äº‹ã€‚</p><p>â€‹            åˆ†å¸ƒå¼ï¼šå¤šä¸ªäººåšä¸ä¸€æ ·çš„äº‹</p><ul><li>é›†ç¾¤è§£å†³çš„é—®é¢˜ï¼š</li></ul><p>â€‹            è®©ç³»ç»Ÿé«˜å¯ç”¨</p><p>â€‹            åˆ†æ‹…è¯·æ±‚å‹åŠ›</p><ul><li>åˆ†å¸ƒå¼è§£å†³çš„é—®é¢˜ï¼š</li></ul><p>â€‹        åˆ†æ‹…å­˜å‚¨å’Œè®¡ç®—çš„å‹åŠ›ï¼Œæé€Ÿ</p><p>â€‹        è§£è€¦</p><ul><li>é›†ç¾¤å’Œåˆ†å¸ƒå¼æ¶æ„å¾€å¾€æ˜¯å¹¶å­˜çš„</li></ul><p><img src="https://s2.loli.net/2022/04/28/97QAJwSGlXp6H3P.png" alt="1581042245219"></p><h3 id="4-2-ESé›†ç¾¤ç›¸å…³æ¦‚å¿µ"><a href="#4-2-ESé›†ç¾¤ç›¸å…³æ¦‚å¿µ" class="headerlink" title="4.2-ESé›†ç¾¤ç›¸å…³æ¦‚å¿µ"></a><strong>4.2-ESé›†ç¾¤ç›¸å…³æ¦‚å¿µ</strong></h3><p> es é›†ç¾¤:</p><p>â€¢ElasticSearch<font color='cornflowerblue'> å¤©ç„¶æ”¯æŒåˆ†å¸ƒå¼</font></p><p>â€¢ElasticSearch çš„è®¾è®¡<font color='cornflowerblue'>éšè—äº†åˆ†å¸ƒå¼æœ¬èº«çš„å¤æ‚æ€§</font></p><p><strong>ESé›†ç¾¤ç›¸å…³æ¦‚å¿µ</strong>:</p><p>â€¢é›†ç¾¤ï¼ˆclusterï¼‰ï¼šä¸€ç»„æ‹¥æœ‰å…±åŒçš„ cluster name çš„ èŠ‚ç‚¹ã€‚</p><p>â€¢èŠ‚ç‚¹ï¼ˆnode)  ï¼šé›†ç¾¤ä¸­çš„ä¸€ä¸ª Elasticearch å®ä¾‹</p><p>â€¢ç´¢å¼•ï¼ˆindex) ï¼šeså­˜å‚¨æ•°æ®çš„åœ°æ–¹ã€‚ç›¸å½“äºå…³ç³»æ•°æ®åº“ä¸­çš„databaseæ¦‚å¿µ</p><p><font color='red'>â€¢åˆ†ç‰‡ï¼ˆshard</font>ï¼‰ï¼šç´¢å¼•å¯ä»¥è¢«æ‹†åˆ†ä¸ºä¸åŒçš„éƒ¨åˆ†è¿›è¡Œå­˜å‚¨ï¼Œç§°ä¸ºåˆ†ç‰‡ã€‚åœ¨é›†ç¾¤ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªç´¢å¼•çš„ä¸åŒåˆ†ç‰‡å¯ä»¥æ‹†åˆ†åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸­</p><p>â€¢ä¸»åˆ†ç‰‡ï¼ˆPrimary shardï¼‰ï¼šç›¸å¯¹äºå‰¯æœ¬åˆ†ç‰‡çš„å®šä¹‰ã€‚</p><p>â€¢å‰¯æœ¬åˆ†ç‰‡ï¼ˆReplica shardï¼‰æ¯ä¸ªä¸»åˆ†ç‰‡å¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‰¯æœ¬ï¼Œæ•°æ®å’Œä¸»åˆ†ç‰‡ä¸€æ ·ã€‚</p><p><img src="https://s2.loli.net/2022/04/28/jSteId3BD5sVrhf.png" alt="image-20220428151102083"></p><p><img src="https://s2.loli.net/2022/04/28/arvxdMbgHs6UBKj.png" alt="image-20220428151156078"></p><p><img src="https://s2.loli.net/2022/04/28/YzOw2gUfNMmSPQh.png" alt="image-20220428151633735"></p><h3 id="4-3-é›†ç¾¤æ­å»º"><a href="#4-3-é›†ç¾¤æ­å»º" class="headerlink" title="4.3-é›†ç¾¤æ­å»º"></a><strong>4.3-é›†ç¾¤æ­å»º</strong></h3><pre><code class="hljs"> å‚è§ElasticSearch é›†ç¾¤-é›†ç¾¤æ­å»º.md</code></pre><h3 id="4-4-kibinaç®¡ç†é›†ç¾¤"><a href="#4-4-kibinaç®¡ç†é›†ç¾¤" class="headerlink" title="4.4-kibinaç®¡ç†é›†ç¾¤"></a><strong>4.4-kibinaç®¡ç†é›†ç¾¤</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim  kibana-7.4.0-linux-x86_64-cluster/config/kibana.yml<br></code></pre></td></tr></table></figure><p>kibana.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#æ”¯æŒä¸­æ–‡</span><br><span class="hljs-attr">i18n.locale:</span> <span class="hljs-string">&quot;zh-CN&quot;</span><br><span class="hljs-comment">#5602é¿å…ä¸ä¹‹å‰çš„å†²çª</span><br><span class="hljs-attr">server.port:</span> <span class="hljs-number">5602</span><br><span class="hljs-attr">server.host:</span> <span class="hljs-string">&quot;0.0.0.0&quot;</span><br><span class="hljs-attr">server.name:</span> <span class="hljs-string">&quot;kibana-itcast-cluster&quot;</span><br><span class="hljs-attr">elasticsearch.hosts:</span> [<span class="hljs-string">&quot;http://localhost:9201&quot;</span>,<span class="hljs-string">&quot;http://localhost:9202&quot;</span>,<span class="hljs-string">&quot;http://localhost:9203&quot;</span>]<br><span class="hljs-attr">elasticsearch.requestTimeout:</span> <span class="hljs-number">99999</span><br><br></code></pre></td></tr></table></figure><h3 id="4-5-JavaAPI-è®¿é—®é›†ç¾¤"><a href="#4-5-JavaAPI-è®¿é—®é›†ç¾¤" class="headerlink" title="4.5-JavaAPI è®¿é—®é›†ç¾¤"></a><strong>4.5-JavaAPI è®¿é—®é›†ç¾¤</strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs json">PUT cluster_test<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;mappings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br>GET cluster_test<br>GET cluster_test/_search<br><br>POST /cluster_test/_doc/<span class="hljs-number">1</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;å¼ ä¸‰&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><br>   <span class="hljs-meta">@Resource(name=&quot;clusterClient&quot;)</span><br>   RestHighLevelClient clusterClient;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * æµ‹è¯•é›†ç¾¤</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCluster</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br><br>       <span class="hljs-comment">//è®¾ç½®æŸ¥è¯¢çš„ç´¢å¼•ã€æ–‡æ¡£</span><br>       GetRequest indexRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">GetRequest</span>(<span class="hljs-string">&quot;cluster_test&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>);<br><br>       <span class="hljs-type">GetResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> clusterClient.get(indexRequest, RequestOptions.DEFAULT);<br>       System.out.println(response.getSourceAsString());<br><br>   &#125;<br></code></pre></td></tr></table></figure><p>ElasticSearchConfig</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> String host1;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port1;<br><br><span class="hljs-keyword">private</span> String host2;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port2;<br><br><span class="hljs-keyword">private</span> String host3;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port3;<br><br><span class="hljs-comment">//get/set ...</span><br><br><span class="hljs-meta">@Bean(&quot;clusterClient&quot;)</span><br>    <span class="hljs-keyword">public</span> RestHighLevelClient <span class="hljs-title function_">clusterClient</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestHighLevelClient</span>(RestClient.builder(<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHost</span>(host1,port1,<span class="hljs-string">&quot;http&quot;</span>),<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHost</span>(host2,port2,<span class="hljs-string">&quot;http&quot;</span>),<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHost</span>(host3,port3,<span class="hljs-string">&quot;http&quot;</span>)<br>        ));<br>    &#125;<br></code></pre></td></tr></table></figure><p>application.yml</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">elasticsearch:</span><br>   <span class="hljs-attr">host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.140</span><span class="hljs-number">.130</span><br>   <span class="hljs-attr">port:</span> <span class="hljs-number">9200</span><br>   <span class="hljs-attr">host1:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.140</span><span class="hljs-number">.130</span><br>   <span class="hljs-attr">port1:</span> <span class="hljs-number">9201</span><br>   <span class="hljs-attr">host2:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.140</span><span class="hljs-number">.130</span><br>   <span class="hljs-attr">port2:</span> <span class="hljs-number">9202</span><br>   <span class="hljs-attr">host3:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.140</span><span class="hljs-number">.130</span><br>   <span class="hljs-attr">port3:</span> <span class="hljs-number">9203</span><br></code></pre></td></tr></table></figure><h3 id="4-6-åˆ†ç‰‡é…ç½®"><a href="#4-6-åˆ†ç‰‡é…ç½®" class="headerlink" title="4.6-åˆ†ç‰‡é…ç½®"></a><strong>4.6-åˆ†ç‰‡é…ç½®</strong></h3><p> â€¢åœ¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šåˆ†ç‰‡é…ç½®ï¼Œåˆ™é»˜è®¤ä¸»åˆ†ç‰‡1ï¼Œå‰¯æœ¬åˆ†ç‰‡1ã€‚</p><p>â€¢åœ¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œå¯ä»¥é€šè¿‡settingsè®¾ç½®åˆ†ç‰‡</p><p><img src="https://s2.loli.net/2022/04/28/gHi4TJ2BsycW7xn.png" alt="1581043174004"></p><p><img src="https://s2.loli.net/2022/04/28/loZk8zu5HRr126q.png" alt="1581043214369"></p><p><img src="https://s2.loli.net/2022/04/28/SAmtHaOUFJrY2nk.png" alt="1581043148796"></p><p><strong>åˆ†ç‰‡é…ç½®</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs json"><br>#åˆ†ç‰‡é…ç½®<br>#<span class="hljs-attr">&quot;number_of_shards&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> ä¸»åˆ†ç‰‡æ•°é‡<br>#<span class="hljs-attr">&quot;number_of_replicas&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>  ä¸»åˆ†ç‰‡å¤‡ä»½æ•°é‡ï¼Œæ¯ä¸€ä¸ªä¸»åˆ†ç‰‡æœ‰ä¸€ä¸ªå¤‡ä»½<br># <span class="hljs-number">3</span>ä¸ªä¸»åˆ†ç‰‡+<span class="hljs-number">3</span>ä¸ªå‰¯åˆ†ç‰‡=<span class="hljs-number">6</span>ä¸ªåˆ†ç‰‡<br>PUT cluster_test1<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;number_of_shards&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;number_of_replicas&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <br>  <span class="hljs-attr">&quot;mappings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>1.ä¸‰ä¸ªèŠ‚ç‚¹æ­£å¸¸è¿è¡Œï¼ˆ0ã€1ã€2åˆ†ç‰‡æ ‡å·ï¼‰</p><p><img src="https://s2.loli.net/2022/04/28/fZWYXSDcNmt17Cz.png" alt="1581044158693"></p><p>2.itcast-3 æŒ‚æ‰</p><p><img src="https://s2.loli.net/2022/04/28/L9eyTgSqHr5ajGw.png" alt="1581044220349"></p><p>3.å°†æŒ‚æ‰èŠ‚ç‚¹çš„åˆ†ç‰‡ï¼Œ<font color='red'>è‡ªå¹³è¡¡</font>åˆ°å…¶ä»–èŠ‚ç‚¹</p><p><img src="https://s2.loli.net/2022/04/28/zsYSVt1eNfyaohM.png" alt="1581044251012"></p><p>4.itcast-3 æ¢å¤æ­£å¸¸åï¼ŒèŠ‚ç‚¹åˆ†ç‰‡å°†<font color='red'>è‡ªå¹³è¡¡</font>å›å»ï¼ˆå¹¶ä¸ä¸€å®šæ˜¯åŸæ¥çš„åˆ†ç‰‡ï¼‰</p><p><img src="https://s2.loli.net/2022/04/28/WEMPc4JBQ9gGmef.png" alt="1581044368389"></p><p><strong>åˆ†ç‰‡ä¸è‡ªå¹³è¡¡</strong></p><p>â€¢å½“èŠ‚ç‚¹æŒ‚æ‰åï¼ŒæŒ‚æ‰çš„èŠ‚ç‚¹åˆ†ç‰‡ä¼šè‡ªå¹³è¡¡åˆ°å…¶ä»–èŠ‚ç‚¹ä¸­</p><p>æ³¨æ„ï¼šåˆ†ç‰‡æ•°é‡<font color='red'>ä¸€æ—¦ç¡®å®šå¥½ï¼Œä¸èƒ½ä¿®æ”¹</font>ã€‚</p><p><strong>ç´¢å¼•åˆ†ç‰‡æ¨èé…ç½®æ–¹æ¡ˆï¼š</strong></p><p>1.æ¯ä¸ªåˆ†ç‰‡æ¨èå¤§å°10-30GB</p><p>2.åˆ†ç‰‡æ•°é‡æ¨è &#x3D; èŠ‚ç‚¹æ•°é‡ * 1~3å€</p><p><strong>æ€è€ƒï¼šæ¯”å¦‚æœ‰1000GBæ•°æ®ï¼Œåº”è¯¥æœ‰å¤šå°‘ä¸ªåˆ†ç‰‡ï¼Ÿå¤šå°‘ä¸ªèŠ‚ç‚¹</strong></p><p>1.æ¯ä¸ªåˆ†ç‰‡20GB   åˆ™å¯ä»¥åˆ†ä¸º40ä¸ªåˆ†ç‰‡</p><p>2.åˆ†ç‰‡æ•°é‡æ¨è &#x3D; èŠ‚ç‚¹æ•°é‡ * 1~3å€ â€“&gt;  40&#x2F;2&#x3D;20   å³20ä¸ªèŠ‚ç‚¹</p><h3 id="4-7-è·¯ç”±åŸç†"><a href="#4-7-è·¯ç”±åŸç†" class="headerlink" title="4.7-è·¯ç”±åŸç†"></a><strong>4.7-è·¯ç”±åŸç†</strong></h3><p> <strong>è·¯ç”±åŸç†</strong></p><p>â€¢æ–‡æ¡£å­˜å…¥å¯¹åº”çš„åˆ†ç‰‡ï¼ŒESè®¡ç®—åˆ†ç‰‡ç¼–å·çš„è¿‡ç¨‹ï¼Œç§°ä¸ºè·¯ç”±ã€‚</p><p>â€¢Elasticsearch æ˜¯æ€ä¹ˆçŸ¥é“ä¸€ä¸ªæ–‡æ¡£åº”è¯¥å­˜æ”¾åˆ°å“ªä¸ªåˆ†ç‰‡ä¸­å‘¢ï¼Ÿ</p><p>â€¢æŸ¥è¯¢æ—¶ï¼Œæ ¹æ®æ–‡æ¡£idæŸ¥è¯¢æ–‡æ¡£ï¼Œ Elasticsearch åˆè¯¥å»å“ªä¸ªåˆ†ç‰‡ä¸­æŸ¥è¯¢æ•°æ®å‘¢ï¼Ÿ</p><p>â€¢è·¯ç”±ç®—æ³• ï¼šshard_index &#x3D; hash(id) % number_of_primary_shards</p><p><img src="https://s2.loli.net/2022/04/28/8m6iFSHaypJc27d.png" alt="1581044026981"></p><p>æŸ¥è¯¢idä¸º5çš„æ–‡æ¡£ï¼šå‡å¦‚hash(5)&#x3D;17  ï¼Œæ ¹æ®ç®—æ³•17%3&#x3D;2</p><h3 id="4-8-è„‘è£‚"><a href="#4-8-è„‘è£‚" class="headerlink" title="4.8-è„‘è£‚"></a><strong>4.8-è„‘è£‚</strong></h3><p> <strong>ElasticSearch é›†ç¾¤æ­£å¸¸çŠ¶æ€ï¼š</strong></p><p>â€¢ ä¸€ä¸ªæ­£å¸¸esé›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰ï¼Œä¸»èŠ‚ç‚¹è´Ÿè´£ç®¡ç†æ•´ä¸ªé›†ç¾¤ã€‚å¦‚åˆ›å»ºæˆ–åˆ é™¤ç´¢å¼•ï¼Œè·Ÿè¸ªå“ªäº›èŠ‚ç‚¹æ˜¯ç¾¤é›†çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶å†³å®šå“ªäº›åˆ†ç‰‡åˆ†é…ç»™ç›¸å…³çš„èŠ‚ç‚¹ã€‚</p><p>â€¢é›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šé€‰æ‹©åŒä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹ã€‚</p><p><strong>è„‘è£‚ç°è±¡ï¼š</strong></p><p>â€¢è„‘è£‚é—®é¢˜çš„å‡ºç°å°±æ˜¯å› ä¸ºä»èŠ‚ç‚¹åœ¨é€‰æ‹©ä¸»èŠ‚ç‚¹ä¸Šå‡ºç°åˆ†æ­§å¯¼è‡´ä¸€ä¸ªé›†ç¾¤å‡ºç°å¤šä¸ªä¸»èŠ‚ç‚¹ä»è€Œä½¿é›†ç¾¤åˆ†è£‚ï¼Œä½¿å¾—é›†ç¾¤å¤„äºå¼‚å¸¸çŠ¶æ€ã€‚</p><p><img src="https://s2.loli.net/2022/04/28/nxDrHIyhfNQoM7G.png" alt="1581042550583"></p><p><strong>è„‘è£‚äº§ç”Ÿçš„åŸå› ï¼š</strong></p><p>1.ç½‘ç»œåŸå› ï¼šç½‘ç»œå»¶è¿Ÿ</p><p>â€‹    â€¢ä¸€èˆ¬esé›†ç¾¤ä¼šåœ¨å†…ç½‘éƒ¨ç½²ï¼Œä¹Ÿå¯èƒ½åœ¨å¤–ç½‘éƒ¨ç½²ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ã€‚</p><p>â€‹    â€¢å†…ç½‘ä¸€èˆ¬ä¸ä¼šå‡ºç°æ­¤é—®é¢˜ï¼Œå¤–ç½‘çš„ç½‘ç»œå‡ºç°é—®é¢˜çš„å¯èƒ½æ€§å¤§äº›ã€‚</p><p>2.èŠ‚ç‚¹è´Ÿè½½</p><p>â€‹    â€¢ä¸»èŠ‚ç‚¹çš„è§’è‰²æ—¢ä¸ºmasteråˆä¸ºdataã€‚æ•°æ®è®¿é—®é‡è¾ƒå¤§æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´<font color='red'>MasterèŠ‚ç‚¹åœæ­¢å“åº”ï¼ˆå‡æ­»çŠ¶æ€</font>ï¼‰ã€‚</p><p>â€‹    <img src="https://s2.loli.net/2022/04/28/vhHKE9yNqFczIJL.png" alt="1581042578379"></p><ol start="3"><li><p>JVMå†…å­˜å›æ”¶</p><p>â€¢å½“MasterèŠ‚ç‚¹è®¾ç½®çš„JVMå†…å­˜è¾ƒå°æ—¶ï¼Œå¼•å‘JVMçš„å¤§è§„æ¨¡å†…å­˜å›æ”¶ï¼Œé€ æˆESè¿›ç¨‹å¤±å»å“åº”ã€‚</p></li></ol><p><strong>é¿å…è„‘è£‚</strong>ï¼š</p><p>1.ç½‘ç»œåŸå› ï¼šdiscovery.zen.ping.timeout <font color='cornflowerblue'>è¶…æ—¶æ—¶é—´é…ç½®å¤§ä¸€ç‚¹</font>ã€‚é»˜è®¤æ˜¯3S</p><p>2.èŠ‚ç‚¹è´Ÿè½½ï¼š<font color='red'>è§’è‰²åˆ†ç¦»</font>ç­–ç•¥(å¤§å°åˆ†ç¦»)</p><p>â€‹    â€¢å€™é€‰ä¸»èŠ‚ç‚¹é…ç½®ä¸º</p><p>â€‹        â€¢node.master: true</p><p>â€‹        â€¢node.data: false</p><p>â€‹    â€¢æ•°æ®èŠ‚ç‚¹é…ç½®ä¸º</p><p>â€‹        â€¢node.master: false</p><p>â€‹        â€¢node.data: true</p><p>3.JVMå†…å­˜å›æ”¶ï¼š</p><p>ä¿®æ”¹ config&#x2F;jvm.options æ–‡ä»¶çš„ -Xms å’Œ -Xmx ä¸ºæœåŠ¡å™¨çš„å†…å­˜ä¸€åŠã€‚(<font color='red'>åˆç†å¢å¤§jvmå†…å­˜</font>)</p><h3 id="30-ElasticSearch-é›†ç¾¤-é›†ç¾¤æ‰©å®¹"><a href="#30-ElasticSearch-é›†ç¾¤-é›†ç¾¤æ‰©å®¹" class="headerlink" title="30-ElasticSearch é›†ç¾¤-é›†ç¾¤æ‰©å®¹"></a><strong>30-ElasticSearch é›†ç¾¤-é›†ç¾¤æ‰©å®¹</strong></h3><p> æŒ‰ç…§é›†ç¾¤æ­å»ºæ­¥éª¤å†å¤åˆ¶EsèŠ‚ç‚¹è¿›è¡Œé…ç½®ï¼Œå‚è§ElasticSearch é›†ç¾¤-é›†ç¾¤æ­å»º.md</p>]]></content>
    
    
    <categories>
      
      <category>Elasticsearch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Elasticsearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ikåˆ†è¯å™¨å®‰è£…</title>
    <link href="/Hexo/2022/04/25/ik%E5%88%86%E8%AF%8D%E5%99%A8%E5%AE%89%E8%A3%85/"/>
    <url>/Hexo/2022/04/25/ik%E5%88%86%E8%AF%8D%E5%99%A8%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h1 id="IKåˆ†è¯å™¨å®‰è£…"><a href="#IKåˆ†è¯å™¨å®‰è£…" class="headerlink" title="IKåˆ†è¯å™¨å®‰è£…"></a>IKåˆ†è¯å™¨å®‰è£…</h1><h3 id="1ã€ç¯å¢ƒå‡†å¤‡"><a href="#1ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1ã€ç¯å¢ƒå‡†å¤‡"></a>1ã€ç¯å¢ƒå‡†å¤‡</h3><p>Elasticsearch è¦ä½¿ç”¨ ikï¼Œå°±è¦å…ˆæ„å»º ik çš„ jaråŒ…ï¼Œè¿™é‡Œè¦ç”¨åˆ° maven åŒ…ç®¡ç†å·¥å…·ï¼Œè€Œ maven éœ€è¦java ç¯å¢ƒï¼Œè€Œ Elasticsearch å†…ç½®äº†jdkï¼Œ æ‰€ä»¥å¯ä»¥å°†JAVA_HOMEè®¾ç½®ä¸ºElasticsearch å†…ç½®çš„jdk</p><p><strong>1ï¼‰è®¾ç½®JAVA_HOME</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/profile<br><span class="hljs-meta"># </span><span class="language-bash">åœ¨profileæ–‡ä»¶æœ«å°¾æ·»åŠ </span><br><span class="hljs-meta">#</span><span class="language-bash">java environment</span><br>export JAVA_HOME=/opt/elasticsearch-7.4.0/jdk<br>export PATH=$PATH:$&#123;JAVA_HOME&#125;/bin<br><span class="hljs-meta"></span><br><span class="hljs-meta"># </span><span class="language-bash">ä¿å­˜é€€å‡ºåï¼Œé‡æ–°åŠ è½½profile</span><br>source /etc/profile<br><br></code></pre></td></tr></table></figure><p><strong>2ï¼‰ä¸‹è½½mavenå®‰è£…åŒ…</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget http://mirror.cc.columbia.edu/pub/software/apache/maven/maven-3/3.1.1/binaries/apache-maven-3.1.1-bin.tar.gz  <br></code></pre></td></tr></table></figure><p><strong>3ï¼‰è§£å‹mavenå®‰è£…åŒ…</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> xzf apache-maven-<span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>-bin.tar.gz <br></code></pre></td></tr></table></figure><p><strong>4ï¼‰è®¾ç½®è½¯è¿æ¥</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ln</span> -s apache-maven-<span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span> maven <br></code></pre></td></tr></table></figure><p><strong>5ï¼‰è®¾ç½®path</strong></p><p>æ‰“å¼€æ–‡ä»¶</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span>  /etc/<span class="hljs-keyword">profile</span>.d/maven.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><p>å°†ä¸‹é¢çš„å†…å®¹å¤åˆ¶åˆ°æ–‡ä»¶ï¼Œä¿å­˜</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">MAVEN_HOME</span>=/opt/maven  <br><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$&#123;MAVEN_HOME&#125;</span>/bin:$&#123;PATH&#125; <br></code></pre></td></tr></table></figure><p>è®¾ç½®å¥½Mavençš„è·¯å¾„ä¹‹åï¼Œéœ€è¦è¿è¡Œä¸‹é¢çš„å‘½ä»¤ä½¿å…¶ç”Ÿæ•ˆ</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile.d/maven.sh<br></code></pre></td></tr></table></figure><p><strong>6ï¼‰éªŒè¯mavenæ˜¯å¦å®‰è£…æˆåŠŸ</strong></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-keyword">mvn</span> -v<br></code></pre></td></tr></table></figure><h3 id="2ã€å®‰è£…IKåˆ†è¯å™¨"><a href="#2ã€å®‰è£…IKåˆ†è¯å™¨" class="headerlink" title="2ã€å®‰è£…IKåˆ†è¯å™¨"></a>2ã€å®‰è£…IKåˆ†è¯å™¨</h3><p><strong>1ï¼‰ä¸‹è½½IK</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/medcl/</span>elasticsearch-analysis-ik<span class="hljs-regexp">/archive/</span>v7.<span class="hljs-number">4.0</span>.zip<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œå¦‚ä¸‹å›¾ï¼š</p><p><strong>2ï¼‰è§£å‹IK</strong></p><p>ç”±äºè¿™é‡Œæ˜¯zipåŒ…ä¸æ˜¯gzåŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨unzipå‘½ä»¤è¿›è¡Œè§£å‹ï¼Œå¦‚æœæœ¬æœºç¯å¢ƒæ²¡æœ‰å®‰è£…unzipï¼Œè¯·æ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum install zip <br>yum install unzip<br></code></pre></td></tr></table></figure><p>è§£å‹IK</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">unzip v7.4.0.zip<br></code></pre></td></tr></table></figure><p><strong>3ï¼‰ç¼–è¯‘jaråŒ…</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">åˆ‡æ¢åˆ° elasticsearch-analysis-ik-7.4.0ç›®å½•</span><br>cd elasticsearch-analysis-ik-7.4.0/<br><span class="hljs-meta">#</span><span class="language-bash">æ‰“åŒ…</span><br>mvn package<br></code></pre></td></tr></table></figure><p><strong>4ï¼‰ jaråŒ…ç§»åŠ¨</strong></p><p>packageæ‰§è¡Œå®Œæ¯•åä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆtarget&#x2F;releasesç›®å½•ï¼Œå°†å…¶ä¸­çš„elasticsearch-analysis-ik-7.4.0.zipã€‚æ‹·è´åˆ°elasticsearchç›®å½•ä¸‹çš„æ–°å»ºçš„ç›®å½•plugins&#x2F;analysis-ikï¼Œå¹¶è§£å‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">åˆ‡æ¢ç›®å½•</span><br>cd /opt/elasticsearch-7.4.0/plugins/<br><span class="hljs-meta">#</span><span class="language-bash">æ–°å»ºç›®å½•</span><br>mkdir analysis-ik<br>cd analysis-ik<br><span class="hljs-meta">#</span><span class="language-bash">æ‰§è¡Œæ‹·è´</span><br>cp -R /opt/elasticsearch-analysis-ik-7.4.0/target/releases/elasticsearch-analysis-ik-7.4.0.zip      /opt/elasticsearch-7.4.0/plugins/analysis-ik<br><span class="hljs-meta">#</span><span class="language-bash">æ‰§è¡Œè§£å‹</span><br>unzip  /opt/elasticsearch-7.4.0/plugins/analysis-ik/elasticsearch-analysis-ik-7.4.0.zip<br></code></pre></td></tr></table></figure><p><strong>5ï¼‰æ‹·è´è¾å…¸</strong></p><p>å°†elasticsearch-analysis-ik-7.4.0ç›®å½•ä¸‹çš„configç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ æ‹·è´åˆ°elasticsearchçš„configç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cp -R /opt/elasticsearch-analysis-ik-7.4.0/config/*   /opt/elasticsearch-7.4.0/config<br></code></pre></td></tr></table></figure><p><strong>è®°å¾—ä¸€å®šè¦é‡å¯Elasticsearchï¼ï¼ï¼</strong></p><h3 id="3ã€ä½¿ç”¨IKåˆ†è¯å™¨"><a href="#3ã€ä½¿ç”¨IKåˆ†è¯å™¨" class="headerlink" title="3ã€ä½¿ç”¨IKåˆ†è¯å™¨"></a>3ã€ä½¿ç”¨IKåˆ†è¯å™¨</h3><p>IKåˆ†è¯å™¨æœ‰ä¸¤ç§åˆ†è¯æ¨¡å¼ï¼šik_max_wordå’Œik_smartæ¨¡å¼ã€‚</p><p>1ã€<strong>ik_max_word</strong></p><p>ä¼šå°†æ–‡æœ¬åšæœ€ç»†ç²’åº¦çš„æ‹†åˆ†ï¼Œæ¯”å¦‚ä¼šå°†â€œä¹’ä¹“çƒæ˜å¹´æ€»å† å†›â€æ‹†åˆ†ä¸ºâ€œä¹’ä¹“çƒã€ä¹’ä¹“ã€çƒã€æ˜å¹´ã€æ€»å† å†›ã€å† å†›ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">#æ–¹å¼ä¸€ik_max_word<br>GET /_analyze<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;analyzer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ik_max_word&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“çƒæ˜å¹´æ€»å† å†›&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ik_max_wordåˆ†è¯å™¨æ‰§è¡Œå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;tokens&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“çƒ&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;çƒ&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_CHAR&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ˜å¹´&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ€»å† å†›&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;å† å†›&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>2ã€<strong>ik_smart</strong><br>ä¼šåšæœ€ç²—ç²’åº¦çš„æ‹†åˆ†ï¼Œæ¯”å¦‚ä¼šå°†â€œä¹’ä¹“çƒæ˜å¹´æ€»å† å†›â€æ‹†åˆ†ä¸ºä¹’ä¹“çƒã€æ˜å¹´ã€æ€»å† å†›ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">#æ–¹å¼äºŒik_smart<br>GET /_analyze<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;analyzer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ik_smart&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“çƒæ˜å¹´æ€»å† å†›&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ik_smartåˆ†è¯å™¨æ‰§è¡Œå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;tokens&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“çƒ&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ˜å¹´&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ€»å† å†›&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>ç”±æ­¤å¯è§  ä½¿ç”¨ik_smartå¯ä»¥å°†æ–‡æœ¬â€textâ€: â€œä¹’ä¹“çƒæ˜å¹´æ€»å† å†›â€åˆ†æˆäº†ã€ä¹’ä¹“çƒã€‘ã€æ˜å¹´ã€‘ã€æ€»å† å†›ã€‘</p><p>è¿™æ ·çœ‹çš„è¯ï¼Œè¿™æ ·çš„åˆ†è¯æ•ˆæœè¾¾åˆ°äº†æˆ‘ä»¬çš„è¦æ±‚ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Elasticsearch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Elasticsearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Elasticsearchå®‰è£…</title>
    <link href="/Hexo/2022/04/25/Elasticsearch%20%E5%AE%89%E8%A3%85/"/>
    <url>/Hexo/2022/04/25/Elasticsearch%20%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h1 id="1-ElasticSearch-å®‰è£…"><a href="#1-ElasticSearch-å®‰è£…" class="headerlink" title="1 ElasticSearch å®‰è£…"></a>1 ElasticSearch å®‰è£…</h1><h2 id="1-1-ElasticSearchå®‰è£…"><a href="#1-1-ElasticSearchå®‰è£…" class="headerlink" title="1.1 ElasticSearchå®‰è£…"></a>1.1 ElasticSearchå®‰è£…</h2><p><strong>1ã€ä¸Šä¼ ElasticSearchå®‰è£…åŒ…</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">alt+p # æ‰“å¼€sftpçª—å£<br><span class="hljs-meta"># </span><span class="language-bash">ä¸Šä¼ eså®‰è£…åŒ…</span><br>put e:/software/elasticsearch-7.4.0-linux-x86_64.tar.gz<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/Dxh4Eczritb7uwR.png" alt="1574607430115"></p><p><strong>2ã€æ‰§è¡Œè§£å‹æ“ä½œ ï¼Œå¦‚ä¸‹å›¾</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">å°†elasticsearch-7.4.0-linux-x86_64.tar.gzè§£å‹åˆ°optæ–‡ä»¶å¤¹ä¸‹. -C å¤§å†™</span><br>tar -zxvf elasticsearch-7.4.0-linux-x86_64.tar.gz  -C /opt<br></code></pre></td></tr></table></figure><p><strong>3ã€åˆ›å»ºæ™®é€šç”¨æˆ·</strong></p><p>å› ä¸ºå®‰å…¨é—®é¢˜ï¼ŒElasticsearch ä¸å…è®¸rootç”¨æˆ·ç›´æ¥è¿è¡Œï¼Œæ‰€ä»¥è¦åˆ›å»ºæ–°ç”¨æˆ·ï¼Œåœ¨rootç”¨æˆ·ä¸­åˆ›å»ºæ–°ç”¨æˆ·,æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">useradd itheima  # æ–°å¢itheimaç”¨æˆ·<br>passwd  itheima  # ä¸ºitheimaç”¨æˆ·è®¾ç½®å¯†ç <br></code></pre></td></tr></table></figure><p><strong>5ã€ä¸ºæ–°ç”¨æˆ·æˆæƒï¼Œå¦‚ä¸‹å›¾</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chown -R itheima:itheima /opt/elasticsearch-7.4.0 #æ–‡ä»¶å¤¹æ‰€æœ‰è€…<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/VJt1UwLMCfqrh8R.png" alt="1574607864042"></p><p>å°† &#x2F;opt&#x2F;elasticsearch-7.4.0æ–‡ä»¶å¤¹æˆæƒç»™itheimaç”¨æˆ·ï¼Œç”±ä¸Šå›¾å¯è§ï¼Œæˆ‘ä»¬çš„æ–‡ä»¶å¤¹æƒé™èµ‹ç»™äº†itheima</p><p><strong>6ã€ä¿®æ”¹elasticsearch.ymlæ–‡ä»¶</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /opt/elasticsearch-7.4.0/config/elasticsearch.yml <br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">======================== Elasticsearch Configuration =========================</span><br>cluster.name: my-application<br>node.name: node-1<br>network.host: 0.0.0.0<br>http.port: 9200<br>cluster.initial_master_nodes: [&quot;node-1&quot;]<br></code></pre></td></tr></table></figure><p>cluster.nameï¼šé…ç½®elasticsearchçš„é›†ç¾¤åç§°ï¼Œé»˜è®¤æ˜¯elasticsearchã€‚å»ºè®®ä¿®æ”¹æˆä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°</p><p>node.nameï¼šèŠ‚ç‚¹åï¼Œelasticsearchä¼šé»˜è®¤éšæœºæŒ‡å®šä¸€ä¸ªåå­—ï¼Œå»ºè®®æŒ‡å®šä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°ï¼Œæ–¹ä¾¿ç®¡ç†</p><p>network.hostï¼šè®¾ç½®ä¸º0.0.0.0å…è®¸å¤–ç½‘è®¿é—®</p><p>http.portï¼šElasticsearchçš„httpè®¿é—®ç«¯å£</p><p>cluster.initial_master_nodesï¼šåˆå§‹åŒ–æ–°çš„é›†ç¾¤æ—¶éœ€è¦æ­¤é…ç½®æ¥é€‰ä¸¾master</p><p><strong>7ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p><p>æ–°åˆ›å»ºçš„itheimaç”¨æˆ·æœ€å¤§å¯åˆ›å»ºæ–‡ä»¶æ•°å¤ªå°ï¼Œæœ€å¤§è™šæ‹Ÿå†…å­˜å¤ªå°ï¼Œåˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œç¼–è¾‘ä¸‹åˆ—é…ç½®æ–‡ä»¶ï¼Œ æ·»åŠ ç±»ä¼¼å¦‚ä¸‹å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">åˆ‡æ¢åˆ°rootç”¨æˆ·</span><br>su root <br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">1. ===æœ€å¤§å¯åˆ›å»ºæ–‡ä»¶æ•°å¤ªå°=======</span><br>vim /etc/security/limits.conf <br><span class="hljs-meta"># </span><span class="language-bash">åœ¨æ–‡ä»¶æœ«å°¾ä¸­å¢åŠ ä¸‹é¢å†…å®¹</span><br>itheima soft nofile 65536<br>itheima hard nofile 65536<br><span class="hljs-meta"># </span><span class="language-bash">=====</span><br>vim /etc/security/limits.d/20-nproc.conf<br><span class="hljs-meta"># </span><span class="language-bash">åœ¨æ–‡ä»¶æœ«å°¾ä¸­å¢åŠ ä¸‹é¢å†…å®¹</span><br>itheima soft nofile 65536<br>itheima hard nofile 65536<br>*  hard    nproc     4096<br><span class="hljs-meta"># </span><span class="language-bash">æ³¨ï¼š* ä»£è¡¨Linuxæ‰€æœ‰ç”¨æˆ·åç§°</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">2. ===æœ€å¤§è™šæ‹Ÿå†…å­˜å¤ªå°=======</span><br>vim /etc/sysctl.conf<br><span class="hljs-meta"># </span><span class="language-bash">åœ¨æ–‡ä»¶ä¸­å¢åŠ ä¸‹é¢å†…å®¹</span><br>vm.max_map_count=655360<br><span class="hljs-meta"># </span><span class="language-bash">é‡æ–°åŠ è½½ï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤ï¼š</span><br>sysctl -p<br><br><br><br><br></code></pre></td></tr></table></figure><p><strong>8ã€å¯åŠ¨elasticsearch</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">su itheima  # åˆ‡æ¢åˆ°itheimaç”¨æˆ·å¯åŠ¨<br>cd /opt/elasticsearch-7.4.0/bin<br>./elasticsearch #å¯åŠ¨<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/qxgUBYaL5vozTMC.png" alt="1574609255103"></p><p>é€šè¿‡ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°elasticsearchå·²ç»æˆåŠŸå¯åŠ¨</p><h2 id="1-2-è®¿é—®elasticsearch"><a href="#1-2-è®¿é—®elasticsearch" class="headerlink" title="1.2 è®¿é—®elasticsearch"></a><strong>1.2 è®¿é—®elasticsearch</strong></h2><p><strong>1ã€åœ¨è®¿é—®elasticsearchå‰ï¼Œè¯·ç¡®ä¿é˜²ç«å¢™æ˜¯å…³é—­çš„ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">æš‚æ—¶å…³é—­é˜²ç«å¢™</span><br>systemctl  stop  firewalld<br><span class="hljs-meta"></span><br><span class="hljs-meta"># </span><span class="language-bash">æˆ–è€…</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">æ°¸ä¹…è®¾ç½®é˜²ç«å¢™çŠ¶æ€</span><br>systemctl enable firewalld.service  #æ‰“å¼€é˜²ç«å¢™æ°¸ä¹…æ€§ç”Ÿæ•ˆï¼Œé‡å¯åä¸ä¼šå¤åŸ <br>systemctl disable firewalld.service #å…³é—­é˜²ç«å¢™ï¼Œæ°¸ä¹…æ€§ç”Ÿæ•ˆï¼Œé‡å¯åä¸ä¼šå¤åŸ <br></code></pre></td></tr></table></figure><p>æµè§ˆå™¨è¾“å…¥<a href="http://192.168.149.135:9200/%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE">http://192.168.149.135:9200/ï¼Œå¦‚ä¸‹å›¾</a></p><p><img src="https://s2.loli.net/2022/04/26/URmesTalzC2gHI5.png" alt="1574609539550"></p><p>æ­¤æ—¶elasticsearchå·²æˆåŠŸå¯åŠ¨ï¼š</p><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs d">é‡ç‚¹å‡ ä¸ªå…³æ³¨ä¸‹å³å¯:<br>numbe<span class="hljs-string">r&quot; : &quot;</span><span class="hljs-number">7.4</span><span class="hljs-number">.0</span><span class="hljs-string">&quot;   è¡¨ç¤ºelasticsearchç‰ˆæœ¬</span><br><span class="hljs-string">lucene_version&quot;</span> : <span class="hljs-string">&quot;8.2.0&quot;</span>  è¡¨ç¤ºluceneç‰ˆæœ¬<br>name ï¼š é»˜è®¤å¯åŠ¨çš„æ—¶å€™æŒ‡å®šäº† ES å®ä¾‹åç§°<br>cluster_name ï¼š é»˜è®¤åä¸º elasticsearch<br></code></pre></td></tr></table></figure><h1 id="2-Elasticsearchè¾…åŠ©æ’ä»¶å®‰è£…"><a href="#2-Elasticsearchè¾…åŠ©æ’ä»¶å®‰è£…" class="headerlink" title="2 Elasticsearchè¾…åŠ©æ’ä»¶å®‰è£…"></a>2 Elasticsearchè¾…åŠ©æ’ä»¶å®‰è£…</h1><h2 id="2-1-Postmanå®‰è£…"><a href="#2-1-Postmanå®‰è£…" class="headerlink" title="2.1 Postmanå®‰è£…"></a>2.1 Postmanå®‰è£…</h2><p><strong>1ã€ä»€ä¹ˆæ˜¯Postman</strong></p><p>Postmanæ˜¯ä¸€ä¸ªhttpæ¨¡æ‹Ÿè¯·æ±‚çš„å·¥å…·ã€‚</p><p>å®˜ç½‘ä»‹ç»ï¼šâ€œModern software is built on APIsï¼ŒPostman helps you develop APIs fasterâ€</p><p>çœ‹å¾—å‡ºæ¥ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸“é—¨æµ‹è¯• API çš„å·¥å…·ï¼ŒPostman æä¾›åŠŸèƒ½å¼ºå¤§çš„ Web API å’Œ HTTP è¯·æ±‚çš„è°ƒè¯•ï¼Œå®ƒèƒ½å¤Ÿå‘é€ä»»ä½•ç±»å‹çš„HTTP è¯·æ±‚ (GET, POST, PUT, DELETEâ€¦)ï¼Œå¹¶ä¸”èƒ½é™„å¸¦ä»»ä½•æ•°é‡çš„å‚æ•°å’Œ Headersã€‚ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜æä¾›æµ‹è¯•æ•°æ®å’Œç¯å¢ƒé…ç½®æ•°æ®çš„å¯¼å…¥å¯¼å‡ºã€‚</p><p>è¿›å…¥å®˜ç½‘<a href="http://www.getpostman.com,ä¸‹è½½/">www.getpostman.comï¼Œä¸‹è½½</a></p><h2 id="2-2-Kibanaå®‰è£…"><a href="#2-2-Kibanaå®‰è£…" class="headerlink" title="2.2 Kibanaå®‰è£…"></a>2.2 Kibanaå®‰è£…</h2><p><strong>1ã€ä»€ä¹ˆæ˜¯Kibana</strong></p><p>Kibanaæ˜¯ä¸€ä¸ªé’ˆå¯¹Elasticsearchçš„å¼€æºåˆ†æåŠå¯è§†åŒ–å¹³å°ï¼Œç”¨æ¥æœç´¢ã€æŸ¥çœ‹äº¤äº’å­˜å‚¨åœ¨Elasticsearchç´¢å¼•ä¸­çš„æ•°æ®ã€‚ä½¿ç”¨Kibanaï¼Œå¯ä»¥é€šè¿‡å„ç§å›¾è¡¨è¿›è¡Œé«˜çº§æ•°æ®åˆ†æåŠå±•ç¤ºã€‚</p><p>Kibanaè®©æµ·é‡æ•°æ®æ›´å®¹æ˜“ç†è§£ã€‚å®ƒæ“ä½œç®€å•ï¼ŒåŸºäºæµè§ˆå™¨çš„ç”¨æˆ·ç•Œé¢å¯ä»¥å¿«é€Ÿåˆ›å»ºä»ªè¡¨æ¿ï¼ˆdashboardï¼‰å®æ—¶æ˜¾ç¤ºElasticsearchæŸ¥è¯¢åŠ¨æ€ã€‚</p><p><strong>2ã€ä¸Šä¼ kibana</strong></p><p>CRTä¸­å…‹éš†ä¸€ä¸ªçª—å£ï¼Œä¸Šä¼ Kibana</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">put â€ªE:\software\kibana-7.4.0-linux-x86_64.tar.gz<br></code></pre></td></tr></table></figure><p><strong>2ã€è§£å‹kibana</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -xzf kibana-7.4.0-linux-x86_64.tar.gz -C /opt<br></code></pre></td></tr></table></figure><p>è§£å‹åˆ°å½“å‰ç›®å½•ï¼ˆ&#x2F;optï¼‰ä¸‹</p><p><strong>3ã€ä¿®æ”¹kibanaé…ç½®</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /opt/kibana-7.4.0-linux-x86_64/config/kibana.yml<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">server.port: 5601<br>server.host: &quot;0.0.0.0&quot;<br>server.name: &quot;kibana-itcast&quot;<br>elasticsearch.hosts: [&quot;http://127.0.0.1:9200&quot;]<br>elasticsearch.requestTimeout: 99999<br></code></pre></td></tr></table></figure><p>server.portï¼šhttpè®¿é—®ç«¯å£</p><p>server.hostï¼šipåœ°å€ï¼Œ0.0.0.0è¡¨ç¤ºå¯è¿œç¨‹è®¿é—®</p><p>server.nameï¼škibanaæœåŠ¡å</p><p>elasticsearch.hostsï¼šelasticsearchåœ°å€</p><p>elasticsearch.requestTimeoutï¼šè¯·æ±‚elasticsearchè¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º30000ï¼Œæ­¤å¤„å¯æ ¹æ®æƒ…å†µè®¾ç½®</p><p><strong>4ã€å¯åŠ¨kibana</strong></p><p>ç”±äºkibanaä¸å»ºè®®ä½¿ç”¨rootç”¨æˆ·å¯åŠ¨ï¼Œå¦‚æœç”¨rootå¯åŠ¨ï¼Œéœ€è¦åŠ â€“allow-rootå‚æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">åˆ‡æ¢åˆ°kibanaçš„binç›®å½•</span><br>cd /opt/kibana-7.4.0-linux-x86_64/bin<br><span class="hljs-meta"># </span><span class="language-bash">å¯åŠ¨</span><br>./kibana --allow-root<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/3Z2GzvwP9rWQFt5.png" alt="1574610511959"></p><p>å¯åŠ¨æˆåŠŸã€‚</p><p><strong>5ã€è®¿é—®kibana</strong></p><p>1.æµè§ˆå™¨è¾“å…¥<a href="http://192.168.149.135:5601/%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE%EF%BC%9A">http://192.168.149.135:5601/ï¼Œå¦‚ä¸‹å›¾ï¼š</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">149.135</span>:<span class="hljs-number">5601</span>/<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/IriLb7ZSYTFqcuR.png" alt="1574610669598"></p><p>çœ‹åˆ°è¿™ä¸ªç•Œé¢ï¼Œè¯´æ˜Kibananå·²æˆåŠŸå®‰è£…ã€‚</p><p><code>Discover</code>ï¼šå¯è§†åŒ–æŸ¥è¯¢åˆ†æå™¨<br> <code>Visualize</code>ï¼šç»Ÿè®¡åˆ†æå›¾è¡¨<br> <code>Dashboard</code>ï¼šè‡ªå®šä¹‰ä¸»é¢æ¿ï¼ˆæ·»åŠ å›¾è¡¨ï¼‰<br> <code>Timelion</code>ï¼šTimelionæ˜¯ä¸€ä¸ªkibanaæ—¶é—´åºåˆ—å±•ç¤ºç»„ä»¶ï¼ˆæš‚æ—¶ä¸ç”¨ï¼‰<br> <code>Dev Tools</code>ï¼šConsoleæ§åˆ¶å°ï¼ˆåŒCURL&#x2F;POSTERï¼Œæ“ä½œESä»£ç å·¥å…·ï¼Œä»£ç æç¤ºï¼Œå¾ˆæ–¹ä¾¿ï¼‰<br> <code>Management</code>ï¼šç®¡ç†ç´¢å¼•åº“(index)ã€å·²ä¿å­˜çš„æœç´¢å’Œå¯è§†åŒ–ç»“æœ(save objects)ã€è®¾ç½® kibana æœåŠ¡å™¨å±æ€§ã€‚</p><h2 id="2-3-headå®‰è£…"><a href="#2-3-headå®‰è£…" class="headerlink" title="2.3 headå®‰è£…"></a>2.3 headå®‰è£…</h2><blockquote><p>Tips:<br>è¯¾åæ‰©å±•å†…å®¹</p></blockquote><p><strong>headç®€ä»‹</strong></p><p>eadæ’ä»¶æ˜¯ESçš„ä¸€ä¸ªå¯è§†åŒ–ç®¡ç†æ’ä»¶ï¼Œç”¨æ¥ç›‘è§†ESçš„çŠ¶æ€ï¼Œå¹¶é€šè¿‡headå®¢æˆ·ç«¯å’ŒESæœåŠ¡è¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚åˆ›å»ºæ˜ å°„ã€åˆ›å»ºç´¢å¼•ç­‰ã€‚</p><p>åœ¨ç™»é™†å’Œè®¿é—®headæ’ä»¶åœ°å€å’ŒElasticSearchå‰éœ€è¦äº‹å…ˆåœ¨æœåŠ¡å™¨ä¸Šå®‰è£…å’Œé…ç½®å¥½ElasticSearchä»¥åŠheadæ’ä»¶ã€‚å®‰è£…å®Œåï¼Œé»˜è®¤headæ’ä»¶çš„webç«¯å£ä¸º9100ï¼ŒElasticSearchæœåŠ¡çš„ç«¯å£ä¸º9200ï¼Œä½¿ç”¨æµè§ˆå™¨è®¿é—®headåœ°å€ï¼Œå¦‚<a href="http://10.82.25.183:9100/">http://IPåœ°å€:9100/</a>ï¼Œæ¨èä½¿ç”¨Chromeæµè§ˆå™¨ï¼Œheadæ’ä»¶å¯¹Chromeæµè§ˆå™¨å…¼å®¹æ›´ä½³ã€‚è¿›å…¥headé¡µé¢åå°†ElasticSearchè¿æ¥è¾“å…¥æ¡†ä¸­å¡«å†™æ­£ç¡®çš„ElasticSearchæœåŠ¡åœ°å€ï¼Œå°±å¯ä»¥ç›‘æ§ElasticSearchè¿è¡Œä¿¡æ¯</p><h3 id="2-3-1-Nodeå®‰è£…"><a href="#2-3-1-Nodeå®‰è£…" class="headerlink" title="2.3.1 Nodeå®‰è£…"></a>2.3.1 Nodeå®‰è£…</h3><ol><li>ä»€ä¹ˆæ˜¯Node</li></ol><p>ç®€å•çš„è¯´ Node.js å°±æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptã€‚Node.js æ˜¯ä¸€ä¸ªåŸºäº <a href="https://developers.google.com/v8/">Chrome V8</a> å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I&#x2F;O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚Node.js çš„åŒ…ç®¡ç†å™¨ <a href="https://www.npmjs.com/">npm</a>ï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿã€‚</p><ol start="2"><li>ä¸‹è½½Node</li></ol><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬å·²ç»å®‰è£…å¥½äº†Elasticsearchï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®‰è£…headæ’ä»¶ï¼Œç”±äºelasticsearch-headæ’ä»¶æ˜¯ç”±nodejsè¯­è¨€ç¼–å†™ï¼Œæ‰€ä»¥å®‰è£…elasticsearch-headå‰éœ€è¦å…ˆå®‰è£…nodejsã€‚<br>é¦–å…ˆï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…nodejså’Œgrunt</p><p>æ‰“å¼€è™šæ‹Ÿæœºï¼Œæ‰§è¡Œwgetå‘½ä»¤ä¸‹è½½Nodeï¼Œå¦‚ä¸‹å›¾ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget https://nodejs.org/dist/v10.15.2/node-v10.15.2-linux-x64.tar.xz<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/cwNXMIVEjaYmWoz.png" alt="1571160484991"></p><p>3ï¼‰è§£å‹NodeåŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar xvf node-v10.15.2-linux-x64.tar.xz<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/U5ZFAYOnL2Bhz8H.png" alt="1571160606899"></p><p>4ï¼‰è®¾ç½®è½¯è¿æ¥</p><p>è§£å‹æ–‡ä»¶çš„ bin ç›®å½•åº•ä¸‹åŒ…å«äº† nodeã€npm ç­‰å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ln å‘½ä»¤æ¥è®¾ç½®è½¯è¿æ¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">ln -s bin/npm /usr/local/bin/<br><br>ln -s bin/node /usr/local/bin/<br></code></pre></td></tr></table></figure><p>åœ¨&#x2F;etc&#x2F;profileä¸­é…ç½®å¥½pathç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">vi ~/.bash_profile<br><br>export NODE_HOME=/opt/nodejs/node-v10.15.2-linux-x64<br><br>export PATH=$PATH:$NODE_HOME/bin<br></code></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºï¼Œä½¿æ–‡ä»¶ç”Ÿæ•ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">source ~/.bash_profile<br></code></pre></td></tr></table></figure><p> æŸ¥çœ‹nodeå®‰è£…ç‰ˆæœ¬ï¼Œæ‰§è¡Œ  node -v  éªŒè¯å®‰è£…å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://s2.loli.net/2022/04/26/bSaoMATLglKh7Zm.png" alt="1571160954958"></p><h3 id="2-3-2-gruntå®‰è£…"><a href="#2-3-2-gruntå®‰è£…" class="headerlink" title="2.3.2 gruntå®‰è£…"></a><strong>2.3.2 gruntå®‰è£…</strong></h3><p>å®‰è£…gruntï¼ˆè¿è¡Œåœ¨Node.jsä¸Šé¢çš„ä»»åŠ¡ç®¡ç†å™¨ï¼ˆtask runnerï¼‰ï¼‰ï¼Œä¸ºäº†è·å¾—Gruntçš„æ›´å¤šäº§å“ç‰¹æ€§ï¼Œéœ€è¦å…¨å±€å®‰è£…Gruntâ€™s å‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰ï¼Œä½¿ç”¨npmè¿›è¡Œå®‰è£…ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install -g grunt-cli<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/6wf4lpDvuZK3IXR.png" alt="1571161497433"></p><p>æŸ¥çœ‹gruntç‰ˆæœ¬</p><p><img src="https://s2.loli.net/2022/04/26/9b3dDxRA6cmtvgF.png" alt="1571161600969"></p><p>è¾“å‡ºgruntç‰ˆæœ¬ä¿¡æ¯ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</p><h3 id="2-3-3-headå®‰è£…"><a href="#2-3-3-headå®‰è£…" class="headerlink" title="2.3.3 headå®‰è£…"></a><strong>2.3.3 headå®‰è£…</strong></h3><ol><li>æ‰§è¡Œå‘½ä»¤å®‰è£…git</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git yum install git -y<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/nKu3bdtwkTFcpRq.png" alt="1571161083235"></p><ol start="2"><li>åˆ‡æ¢åˆ°&#x2F;optç›®å½•ä¸‹,æ‰§è¡Œä¸‹é¢çš„å…‹éš†å‘½ä»¤</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone git://github.com/mobz/elasticsearch-head.git<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/RuAbWLplzkFyiv2.png" alt="1571193736229"></p><ol start="3"><li>è¿›å…¥åˆ°elasticsearch-headç›®å½•</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd elasticsearch-head<br></code></pre></td></tr></table></figure><ol start="4"><li>è¿è¡Œ</li></ol><p>åœ¨è¿è¡Œä¹‹å‰æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸‹elasticsearch.ymlï¼Œå› ä¸ºESé»˜è®¤ä¸å¼€å¯è·¨åŸŸè®¿é—®ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">å¼€å¯corsè·¨åŸŸè®¿é—®æ”¯æŒï¼Œé»˜è®¤ä¸º<span class="hljs-literal">false</span></span> <br>http.cors.enabled: true<br><span class="hljs-meta">#</span><span class="language-bash">è·¨åŸŸè®¿é—®å…è®¸çš„åŸŸååœ°å€ï¼Œ(å…è®¸æ‰€æœ‰åŸŸå)ä»¥ä¸Šä½¿ç”¨æ­£åˆ™</span><br>http.cors.allow-origin: &quot;*&quot;<br></code></pre></td></tr></table></figure><p>ç„¶åå¼€å§‹æ‰§è¡Œè¿è¡Œå‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm run start<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/26/gD649tRfclAOzkr.png" alt="1571163304853"></p><ol start="5"><li>è®¿é—®head</li></ol><p>æµè§ˆå™¨è¾“å…¥ip:port:9100ï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://s2.loli.net/2022/04/26/Cv6kGOWcrNnz2Sb.png" alt="1571163462191"></p><p>çœ‹åˆ°è¿™ä¸ªç•Œé¢è¯´æ˜æˆ‘ä»¬çš„headæ’ä»¶æˆåŠŸå®‰è£…å¹¶ä¸”æˆåŠŸè¿æ¥Elasticsearchã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Elasticsearch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Elasticsearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœç´¢å¼•æ“Elasticsearch_1</title>
    <link href="/Hexo/2022/04/24/Elasticsearch_1/"/>
    <url>/Hexo/2022/04/24/Elasticsearch_1/</url>
    
    <content type="html"><![CDATA[<h2 id="1-ä»Šæ—¥å†…å®¹"><a href="#1-ä»Šæ—¥å†…å®¹" class="headerlink" title="1-ä»Šæ—¥å†…å®¹"></a><strong>1-ä»Šæ—¥å†…å®¹</strong></h2><ol><li><p>åˆè¯† ElasticSearch</p></li><li><p>å®‰è£… ElasticSearch</p></li><li><p>ElasticSearch æ ¸å¿ƒæ¦‚å¿µ</p></li><li><p>æ“ä½œ ElasticSearch</p></li><li><p>ElasticSearch JavaAPI</p></li></ol><h2 id="2-åˆè¯†ElasticSearch"><a href="#2-åˆè¯†ElasticSearch" class="headerlink" title="2-åˆè¯†ElasticSearch"></a><strong>2-åˆè¯†ElasticSearch</strong></h2><h3 id="2-1-åŸºäºæ•°æ®åº“æŸ¥è¯¢çš„é—®é¢˜"><a href="#2-1-åŸºäºæ•°æ®åº“æŸ¥è¯¢çš„é—®é¢˜" class="headerlink" title="2.1-åŸºäºæ•°æ®åº“æŸ¥è¯¢çš„é—®é¢˜"></a>2.1-åŸºäºæ•°æ®åº“æŸ¥è¯¢çš„é—®é¢˜</h3><p><img src="https://s2.loli.net/2022/04/21/OvpXPeYwA5hn9GF.png" alt="1580888245982"></p><h3 id="2-2-å€’æ’ç´¢å¼•"><a href="#2-2-å€’æ’ç´¢å¼•" class="headerlink" title="2.2-å€’æ’ç´¢å¼•"></a><strong>2.2-å€’æ’ç´¢å¼•</strong></h3><p><strong>å€’æ’ç´¢å¼•</strong>ï¼šå°†æ–‡æ¡£è¿›è¡Œåˆ†è¯ï¼Œå½¢æˆè¯æ¡å’Œidçš„å¯¹åº”å…³ç³»å³ä¸ºåå‘ç´¢å¼•ã€‚</p><p> ä»¥å”è¯—ä¸ºä¾‹ï¼Œæ‰€å¤„åŒ…å«â€œå‰â€çš„è¯—å¥</p><p>æ­£å‘ç´¢å¼•ï¼šç”±ã€Šé™å¤œæ€ã€‹â€“&gt;çª—å‰æ˜æœˆå…‰â€”&gt;â€œå‰â€å­—</p><p>åå‘ç´¢å¼•ï¼šâ€œå‰â€å­—â€“&gt;çª—å‰æ˜æœˆå…‰â€“&gt;ã€Šé™å¤œæ€ã€‹</p><p>åå‘ç´¢å¼•çš„å®ç°å°±æ˜¯å¯¹è¯—å¥è¿›è¡Œåˆ†è¯ï¼Œåˆ†æˆå•ä¸ªçš„è¯ï¼Œç”±è¯æ¨æ®ï¼Œå³ä¸ºåå‘ç´¢å¼•</p><p>â€œåºŠå‰æ˜æœˆå…‰â€â€“&gt; åˆ†è¯</p><p>å°†ä¸€æ®µæ–‡æœ¬æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼Œæ‹†åˆ†ä¸ºä¸åŒçš„è¯æ¡ï¼ˆtermï¼‰</p><p><img src="https://pic.imgdb.cn/item/637385b116f2c2beb198faa0.png" alt="1580887683510"></p><p><img src="https://s2.loli.net/2022/04/23/AeZMwcx1yBmhqSF.png" alt="1580887667417"></p><h3 id="2-3-ESå­˜å‚¨å’ŒæŸ¥è¯¢çš„åŸç†"><a href="#2-3-ESå­˜å‚¨å’ŒæŸ¥è¯¢çš„åŸç†" class="headerlink" title="2.3-ESå­˜å‚¨å’ŒæŸ¥è¯¢çš„åŸç†"></a><strong>2.3-ESå­˜å‚¨å’ŒæŸ¥è¯¢çš„åŸç†</strong></h3><p><strong>indexï¼ˆç´¢å¼•ï¼‰</strong>ï¼šç›¸å½“äºmysqlçš„åº“</p><p><strong>æ˜ å°„</strong>ï¼šç›¸å½“äºmysql çš„è¡¨ç»“æ„</p><p>**document(æ–‡æ¡£)**ï¼šç›¸å½“äºmysqlçš„è¡¨ä¸­çš„æ•°æ®</p><p> <strong>æ•°æ®åº“æŸ¥è¯¢å­˜åœ¨çš„é—®é¢˜ï¼š</strong></p><ol><li>æ€§èƒ½ä½ï¼šä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå·¦è¾¹æœ‰é€šé…ç¬¦ï¼Œä¸ä¼šèµ°ç´¢å¼•ï¼Œä¼šå…¨è¡¨æ‰«æï¼Œæ€§èƒ½ä½</li><li>åŠŸèƒ½å¼±ï¼šå¦‚æœä»¥â€åä¸ºæ‰‹æœºâ€œä½œä¸ºæ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸å‡ºæ¥æ•°æ®</li></ol><p>Esä½¿ç”¨å€’æ’ç´¢å¼•ï¼Œå¯¹title è¿›è¡Œåˆ†è¯</p><p><img src="https://s2.loli.net/2022/04/23/8O7mIAVwRPSLZo9.png" alt="1581143412491"></p><ol><li><p>ä½¿ç”¨â€œæ‰‹æœºâ€ä½œä¸ºå…³é”®å­—æŸ¥è¯¢</p><p>ç”Ÿæˆçš„å€’æ’ç´¢å¼•ä¸­ï¼Œè¯æ¡ä¼šæ’åºï¼Œå½¢æˆä¸€é¢—æ ‘å½¢ç»“æ„ï¼Œæå‡è¯æ¡çš„æŸ¥è¯¢é€Ÿåº¦</p></li><li><p>ä½¿ç”¨â€œåä¸ºæ‰‹æœºâ€ä½œä¸ºå…³é”®å­—æŸ¥è¯¢</p><p>åä¸ºï¼š1,3</p><p>æ‰‹æœºï¼š1,2,3</p><p><img src="/Hexo/img/1581143489911.png" alt="1581143489911"></p></li></ol><h3 id="2-4-ESæ¦‚å¿µè¯¦è§£"><a href="#2-4-ESæ¦‚å¿µè¯¦è§£" class="headerlink" title="2.4-ESæ¦‚å¿µè¯¦è§£"></a><strong>2.4-ESæ¦‚å¿µè¯¦è§£</strong></h3><p>â€¢ElasticSearchæ˜¯ä¸€ä¸ªåŸºäºLuceneçš„æœç´¢æœåŠ¡å™¨</p><p><img src="https://s2.loli.net/2022/04/23/UHaXLs5mdTePvqc.png" alt="1580887955947"></p><p>â€¢æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€é«˜æ‰©å±•ã€é«˜å®æ—¶çš„æœç´¢ä¸æ•°æ®åˆ†æå¼•æ“</p><p>â€¢åŸºäºRESTful webæ¥å£</p><p>â€¢Elasticsearchæ˜¯ç”¨Javaè¯­è¨€å¼€å‘çš„ï¼Œå¹¶ä½œä¸ºApacheè®¸å¯æ¡æ¬¾ä¸‹çš„å¼€æ”¾æºç å‘å¸ƒï¼Œæ˜¯ä¸€ç§æµè¡Œçš„ä¼ä¸šçº§æœç´¢å¼•æ“</p><p>â€¢å®˜ç½‘ï¼š<a href="https://www.elastic.co/">https://www.elastic.co/</a></p><p>åº”ç”¨åœºæ™¯</p><p>â€¢æœç´¢ï¼šæµ·é‡æ•°æ®çš„æŸ¥è¯¢</p><p>â€¢æ—¥å¿—æ•°æ®åˆ†æ</p><p>â€¢å®æ—¶æ•°æ®åˆ†æ</p><h2 id="3-å®‰è£…ElasticSearch"><a href="#3-å®‰è£…ElasticSearch" class="headerlink" title="3-å®‰è£…ElasticSearch"></a><strong>3-å®‰è£…ElasticSearch</strong></h2><h3 id="3-1-ESå®‰è£…"><a href="#3-1-ESå®‰è£…" class="headerlink" title="3.1-ESå®‰è£…"></a>3.1-ESå®‰è£…</h3><p> å‚è§ElasticSearch-ESå®‰è£….md</p><p> æŸ¥çœ‹elasticæ˜¯å¦å¯åŠ¨</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ps</span> -ef|<span class="hljs-keyword">grep</span> elastic<br></code></pre></td></tr></table></figure><h3 id="3-2-ESè¾…åŠ©å·¥å…·å®‰è£…"><a href="#3-2-ESè¾…åŠ©å·¥å…·å®‰è£…" class="headerlink" title="3.2-ESè¾…åŠ©å·¥å…·å®‰è£…"></a><strong>3.2-ESè¾…åŠ©å·¥å…·å®‰è£…</strong></h3><p> å‚è§ElasticSearch-ESå®‰è£….md</p><p>åå°å¯åŠ¨</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">nohup ..<span class="hljs-regexp">/bin/</span>kibana &amp;<br></code></pre></td></tr></table></figure><h2 id="4-ElasticSearchæ ¸å¿ƒæ¦‚å¿µ"><a href="#4-ElasticSearchæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="4-ElasticSearchæ ¸å¿ƒæ¦‚å¿µ"></a><strong>4-ElasticSearchæ ¸å¿ƒæ¦‚å¿µ</strong></h2><p><strong>ç´¢å¼•ï¼ˆindexï¼‰</strong></p><p>ElasticSearchå­˜å‚¨æ•°æ®çš„åœ°æ–¹ï¼Œå¯ä»¥ç†è§£æˆå…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®åº“æ¦‚å¿µã€‚</p><p><strong>æ˜ å°„ï¼ˆmappingï¼‰</strong></p><p>mappingå®šä¹‰äº†æ¯ä¸ªå­—æ®µçš„ç±»å‹ã€å­—æ®µæ‰€ä½¿ç”¨çš„åˆ†è¯å™¨ç­‰ã€‚ç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ã€‚</p><p><strong>æ–‡æ¡£ï¼ˆdocumentï¼‰</strong></p><p>   Elasticsearchä¸­çš„æœ€å°æ•°æ®å•å…ƒï¼Œå¸¸ä»¥jsonæ ¼å¼æ˜¾ç¤ºã€‚ä¸€ä¸ªdocumentç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸€è¡Œæ•°æ®ã€‚</p><p><strong>å€’æ’ç´¢å¼•</strong></p><p>   ä¸€ä¸ªå€’æ’ç´¢å¼•ç”±æ–‡æ¡£ä¸­æ‰€æœ‰ä¸é‡å¤è¯çš„åˆ—è¡¨æ„æˆï¼Œå¯¹äºå…¶ä¸­æ¯ä¸ªè¯ï¼Œå¯¹åº”ä¸€ä¸ªåŒ…å«å®ƒçš„æ–‡æ¡£idåˆ—è¡¨ã€‚</p><p><strong>ç±»å‹ï¼ˆtypeï¼‰</strong></p><p>   ä¸€ç§typeå°±åƒä¸€ç±»è¡¨ã€‚å¦‚ç”¨æˆ·è¡¨ã€è§’è‰²è¡¨ç­‰ã€‚åœ¨Elasticsearch7.Xé»˜è®¤typeä¸º_doc</p><pre><code class="hljs"> \- ES 5.xä¸­ä¸€ä¸ªindexå¯ä»¥æœ‰å¤šç§typeã€‚  \- ES 6.xä¸­ä¸€ä¸ªindexåªèƒ½æœ‰ä¸€ç§typeã€‚  \- ES 7.xä»¥åï¼Œå°†é€æ­¥ç§»é™¤typeè¿™ä¸ªæ¦‚å¿µï¼Œç°åœ¨çš„æ“ä½œå·²ç»ä¸å†ä½¿ç”¨ï¼Œé»˜è®¤_doc</code></pre><h2 id="5-è„šæœ¬æ“ä½œES"><a href="#5-è„šæœ¬æ“ä½œES" class="headerlink" title="5-è„šæœ¬æ“ä½œES"></a><strong>5-è„šæœ¬æ“ä½œES</strong></h2><h3 id="5-1-RESTfulé£æ ¼ä»‹ç»"><a href="#5-1-RESTfulé£æ ¼ä»‹ç»" class="headerlink" title="5.1-RESTfulé£æ ¼ä»‹ç»"></a>5.1-RESTfulé£æ ¼ä»‹ç»</h3><p> 1.STï¼ˆRepresentational State Transferï¼‰ï¼Œè¡¨è¿°æ€§çŠ¶æ€è½¬ç§»ï¼Œæ˜¯ä¸€ç»„æ¶æ„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ã€‚æ»¡è¶³è¿™äº›çº¦æŸæ¡ä»¶å’ŒåŸåˆ™çš„åº”ç”¨ç¨‹åºæˆ–è®¾è®¡å°±æ˜¯RESTfulã€‚å°±æ˜¯ä¸€ç§å®šä¹‰æ¥å£çš„è§„èŒƒã€‚</p><p>2.åŸºäºHTTPã€‚</p><p>3.ä½¿ç”¨XMLæ ¼å¼å®šä¹‰æˆ–JSONæ ¼å¼å®šä¹‰ã€‚</p><p>4.æ¯ä¸€ä¸ªURIä»£è¡¨1ç§èµ„æºã€‚</p><p>5.å®¢æˆ·ç«¯ä½¿ç”¨GETã€POSTã€PUTã€DELETE 4ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯å¯¹æœåŠ¡ç«¯èµ„æºè¿›è¡Œæ“ä½œï¼š</p><p>GETï¼šç”¨æ¥è·å–èµ„æº</p><p>POSTï¼šç”¨æ¥æ–°å»ºèµ„æºï¼ˆä¹Ÿå¯ä»¥ç”¨äºæ›´æ–°èµ„æºï¼‰</p><p>PUTï¼šç”¨æ¥æ›´æ–°èµ„æº</p><p>DELETEï¼šç”¨æ¥åˆ é™¤èµ„æº</p><p><img src="https://s2.loli.net/2022/04/23/Avptnof3X4wDsq5.png" alt="1580888675397"></p><h3 id="5-2-æ“ä½œç´¢å¼•"><a href="#5-2-æ“ä½œç´¢å¼•" class="headerlink" title="5.2-æ“ä½œç´¢å¼•"></a><strong>5.2-æ“ä½œç´¢å¼•</strong></h3><p><strong>PUT</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//i</span>p:ç«¯å£/ç´¢å¼•åç§°<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">GET http:<span class="hljs-regexp">//i</span>p:ç«¯å£/ç´¢å¼•åç§°  <span class="hljs-comment"># æŸ¥è¯¢å•ä¸ªç´¢å¼•ä¿¡æ¯</span><br>GET http:<span class="hljs-regexp">//i</span>p:ç«¯å£/ç´¢å¼•åç§°<span class="hljs-number">1</span>,ç´¢å¼•åç§°<span class="hljs-number">2</span>...  <span class="hljs-comment"># æŸ¥è¯¢å¤šä¸ªç´¢å¼•ä¿¡æ¯</span><br>GET http:<span class="hljs-regexp">//i</span>p:ç«¯å£/_all  <span class="hljs-comment"># æŸ¥è¯¢æ‰€æœ‰ç´¢å¼•ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><p>â€¢åˆ é™¤ç´¢å¼•</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">DELETE http:<span class="hljs-regexp">//i</span>p:ç«¯å£/ç´¢å¼•åç§°<br></code></pre></td></tr></table></figure><p>â€¢å…³é—­ã€æ‰“å¼€ç´¢å¼•</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">POST http:<span class="hljs-regexp">//i</span>p:ç«¯å£<span class="hljs-regexp">/ç´¢å¼•åç§°/</span>_close  <br>POST http:<span class="hljs-regexp">//i</span>p:ç«¯å£<span class="hljs-regexp">/ç´¢å¼•åç§°/</span>_open <br></code></pre></td></tr></table></figure><h3 id="5-3-ESæ•°æ®ç±»å‹"><a href="#5-3-ESæ•°æ®ç±»å‹" class="headerlink" title="5.3-ESæ•°æ®ç±»å‹"></a><strong>5.3-ESæ•°æ®ç±»å‹</strong></h3><ol><li><strong>ç®€å•æ•°æ®ç±»å‹</strong></li></ol><ul><li>å­—ç¬¦ä¸²</li></ul><p>èšåˆï¼šç›¸å½“äºmysql ä¸­çš„sumï¼ˆæ±‚å’Œï¼‰</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs text">textï¼šä¼šåˆ†è¯ï¼Œä¸æ”¯æŒèšåˆ<br><br>keywordï¼šä¸ä¼šåˆ†è¯ï¼Œå°†å…¨éƒ¨å†…å®¹ä½œä¸ºä¸€ä¸ªè¯æ¡ï¼Œæ”¯æŒèšåˆ<br></code></pre></td></tr></table></figure><ul><li><p>æ•°å€¼</p></li><li><p>å¸ƒå°”ï¼šboolean</p></li><li><p>äºŒè¿›åˆ¶ï¼šbinary</p></li><li><p>èŒƒå›´ç±»å‹</p></li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-built_in">int</span>eger_range, <span class="hljs-built_in">float</span>_range, long_range, <span class="hljs-built_in">double</span>_range, date_range <br></code></pre></td></tr></table></figure><ul><li>æ—¥æœŸ:date</li></ul><ol start="2"><li><strong>å¤æ‚æ•°æ®ç±»å‹</strong></li></ol><p>â€¢æ•°ç»„ï¼š[ ]  Nested: <code>nested</code> (for arrays of JSON objects æ•°ç»„ç±»å‹çš„JSONå¯¹è±¡)  </p><p>â€¢å¯¹è±¡ï¼š{ } Object: object(for single JSON objects å•ä¸ªJSONå¯¹è±¡)</p><h3 id="5-4-æ“ä½œæ˜ å°„"><a href="#5-4-æ“ä½œæ˜ å°„" class="headerlink" title="5.4-æ“ä½œæ˜ å°„"></a><strong>5.4-æ“ä½œæ˜ å°„</strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs json">PUT person<br><br>GET person<br>#æ·»åŠ æ˜ å°„<br>PUT /person/_mapping<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;text&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;integer&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br><br><br></code></pre></td></tr></table></figure><p> #åˆ›å»ºç´¢å¼•å¹¶æ·»åŠ æ˜ å°„</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs json"> <br> #åˆ›å»ºç´¢å¼•å¹¶æ·»åŠ æ˜ å°„<br> PUT /person1<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;mappings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;integer&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br>GET person1/_mapping<br></code></pre></td></tr></table></figure><p>æ·»åŠ å­—æ®µ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json">#æ·»åŠ å­—æ®µ<br>PUT /person1/_mapping<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;integer&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="5-5-æ“ä½œæ–‡æ¡£"><a href="#5-5-æ“ä½œæ–‡æ¡£" class="headerlink" title="5.5-æ“ä½œæ–‡æ¡£"></a><strong>5.5-æ“ä½œæ–‡æ¡£</strong></h3><p>â€¢æ·»åŠ æ–‡æ¡£ï¼ŒæŒ‡å®šid</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json">POST /person1/_doc/<span class="hljs-number">2</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;å¼ ä¸‰&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">18</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;åŒ—äº¬&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><br>GET /person1/_doc/<span class="hljs-number">1</span><br><br><br></code></pre></td></tr></table></figure><p> â€¢æ·»åŠ æ–‡æ¡£ï¼Œä¸æŒ‡å®šid</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json">#æ·»åŠ æ–‡æ¡£ï¼Œä¸æŒ‡å®šid<br>POST /person1/_doc/<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;å¼ ä¸‰&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">18</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;åŒ—äº¬&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><br>#æŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£<br>GET /person1/_search<br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs json">#åˆ é™¤æŒ‡å®šidæ–‡æ¡£<br>DELETE /person1/_doc/<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="6-åˆ†è¯å™¨"><a href="#6-åˆ†è¯å™¨" class="headerlink" title="6-åˆ†è¯å™¨"></a>6-åˆ†è¯å™¨</h2><h3 id="6-1åˆ†è¯å™¨-ä»‹ç»"><a href="#6-1åˆ†è¯å™¨-ä»‹ç»" class="headerlink" title="6.1åˆ†è¯å™¨-ä»‹ç»"></a>6.1åˆ†è¯å™¨-ä»‹ç»</h3><p> â€¢IKAnalyzeræ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŸºäºjavaè¯­è¨€å¼€å‘çš„è½»é‡çº§çš„ä¸­æ–‡åˆ†è¯å·¥å…·åŒ…</p><p>â€¢æ˜¯ä¸€ä¸ªåŸºäºMavenæ„å»ºçš„é¡¹ç›®</p><p>â€¢å…·æœ‰60ä¸‡å­—&#x2F;ç§’çš„é«˜é€Ÿå¤„ç†èƒ½åŠ›</p><p>â€¢æ”¯æŒç”¨æˆ·è¯å…¸æ‰©å±•å®šä¹‰</p><p>â€¢ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/medcl/elasticsearch-analysis-ik/archive/v7.4.0.zip">https://github.com/medcl/elasticsearch-analysis-ik/archive/v7.4.0.zip</a> </p><p>å®‰è£…åŒ…åœ¨èµ„æ–™æ–‡ä»¶å¤¹ä¸­æä¾›</p><h3 id="6-2-ikåˆ†è¯å™¨å®‰è£…"><a href="#6-2-ikåˆ†è¯å™¨å®‰è£…" class="headerlink" title="6.2-ikåˆ†è¯å™¨å®‰è£…"></a><strong>6.2-ikåˆ†è¯å™¨å®‰è£…</strong></h3><p>å‚è§ ikåˆ†è¯å™¨å®‰è£….md</p><p> æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ—¶å¦‚æœå‡ºç°  æ‰“åŒ…å¤±è´¥ï¼ˆ501ç ï¼‰å°†mavené•œåƒæ¢æˆé˜¿é‡Œäº‘çš„</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">mvn <span class="hljs-keyword">package</span><br></code></pre></td></tr></table></figure><p> &#x2F;opt&#x2F;apache-maven-3.1.1&#x2F;conf&#x2F;setting.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>alimaven<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>aliyun maven<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="6-3-ikåˆ†è¯å™¨ä½¿ç”¨"><a href="#6-3-ikåˆ†è¯å™¨ä½¿ç”¨" class="headerlink" title="6.3-ikåˆ†è¯å™¨ä½¿ç”¨"></a><strong>6.3-ikåˆ†è¯å™¨ä½¿ç”¨</strong></h3><p>IKåˆ†è¯å™¨æœ‰ä¸¤ç§åˆ†è¯æ¨¡å¼ï¼šik_max_wordå’Œik_smartæ¨¡å¼ã€‚</p><p>1ã€<strong>ik_max_word</strong></p><p>ä¼šå°†æ–‡æœ¬åšæœ€<font color='red'>ç»†ç²’åº¦</font>çš„æ‹†åˆ†ï¼Œæ¯”å¦‚ä¼šå°†â€œä¹’ä¹“çƒæ˜å¹´æ€»å† å†›â€æ‹†åˆ†ä¸ºâ€œä¹’ä¹“çƒã€ä¹’ä¹“ã€çƒã€æ˜å¹´ã€æ€»å† å†›ã€å† å†›ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">#æ–¹å¼ä¸€ik_max_word<br>GET /_analyze<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;analyzer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ik_max_word&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“çƒæ˜å¹´æ€»å† å†›&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ik_max_wordåˆ†è¯å™¨æ‰§è¡Œå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;tokens&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“çƒ&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;çƒ&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_CHAR&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ˜å¹´&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ€»å† å†›&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;å† å†›&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>2ã€<strong>ik_smart</strong><br>ä¼šåšæœ€ç²—ç²’åº¦çš„æ‹†åˆ†ï¼Œæ¯”å¦‚ä¼šå°†â€œä¹’ä¹“çƒæ˜å¹´æ€»å† å†›â€æ‹†åˆ†ä¸ºä¹’ä¹“çƒã€æ˜å¹´ã€æ€»å† å†›ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">#æ–¹å¼äºŒik_smart<br>GET /_analyze<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;analyzer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ik_smart&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“çƒæ˜å¹´æ€»å† å†›&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ik_smartåˆ†è¯å™¨æ‰§è¡Œå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;tokens&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ä¹’ä¹“çƒ&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ˜å¹´&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;token&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;æ€»å† å†›&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;start_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;end_offset&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;type&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CN_WORD&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;position&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>ç”±æ­¤å¯è§  ä½¿ç”¨ik_smartå¯ä»¥å°†æ–‡æœ¬â€textâ€: â€œä¹’ä¹“çƒæ˜å¹´æ€»å† å†›â€åˆ†æˆäº†ã€ä¹’ä¹“çƒã€‘ã€æ˜å¹´ã€‘ã€æ€»å† å†›ã€‘</p><p>è¿™æ ·çœ‹çš„è¯ï¼Œè¿™æ ·çš„åˆ†è¯æ•ˆæœè¾¾åˆ°äº†æˆ‘ä»¬çš„è¦æ±‚ã€‚</p><h3 id="6-4ä½¿ç”¨IKåˆ†è¯å™¨-æŸ¥è¯¢æ–‡æ¡£"><a href="#6-4ä½¿ç”¨IKåˆ†è¯å™¨-æŸ¥è¯¢æ–‡æ¡£" class="headerlink" title="6.4ä½¿ç”¨IKåˆ†è¯å™¨-æŸ¥è¯¢æ–‡æ¡£"></a><strong>6.4ä½¿ç”¨IKåˆ†è¯å™¨-æŸ¥è¯¢æ–‡æ¡£</strong></h3><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p> â€¢è¯æ¡æŸ¥è¯¢ï¼šterm</p><p>â€‹            è¯æ¡æŸ¥è¯¢ä¸ä¼šåˆ†ææŸ¥è¯¢æ¡ä»¶ï¼Œåªæœ‰å½“è¯æ¡å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²å®Œå…¨åŒ¹é…æ—¶æ‰åŒ¹é…æœç´¢</p><p>â€¢å…¨æ–‡æŸ¥è¯¢ï¼šmatch</p><p>â€‹           å…¨æ–‡æŸ¥è¯¢ä¼šåˆ†ææŸ¥è¯¢æ¡ä»¶ï¼Œå…ˆå°†æŸ¥è¯¢æ¡ä»¶è¿›è¡Œåˆ†è¯ï¼Œç„¶åæŸ¥è¯¢ï¼Œæ±‚å¹¶é›†</p><p>1.åˆ›å»ºç´¢å¼•ï¼Œæ·»åŠ æ˜ å°„ï¼Œå¹¶æŒ‡å®šåˆ†è¯å™¨ä¸ºikåˆ†è¯å™¨</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json">PUT person2<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;mappings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;keyword&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;analyzer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ik_max_word&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>2.æ·»åŠ æ–‡æ¡£</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs awk">POST <span class="hljs-regexp">/person2/</span>_doc/<span class="hljs-number">1</span><br>&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<br>  <span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">18</span>,<br>  <span class="hljs-string">&quot;address&quot;</span>:<span class="hljs-string">&quot;åŒ—äº¬æµ·æ·€åŒº&quot;</span><br>&#125;<br><br>POST <span class="hljs-regexp">/person2/</span>_doc/<span class="hljs-number">2</span><br>&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;æå››&quot;</span>,<br>  <span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">18</span>,<br>  <span class="hljs-string">&quot;address&quot;</span>:<span class="hljs-string">&quot;åŒ—äº¬æœé˜³åŒº&quot;</span><br>&#125;<br><br>POST <span class="hljs-regexp">/person2/</span>_doc/<span class="hljs-number">3</span><br>&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;ç‹äº”&quot;</span>,<br>  <span class="hljs-string">&quot;age&quot;</span>:<span class="hljs-number">18</span>,<br>  <span class="hljs-string">&quot;address&quot;</span>:<span class="hljs-string">&quot;åŒ—äº¬æ˜Œå¹³åŒº&quot;</span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>3.æŸ¥è¯¢æ˜ å°„</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">GET person2<br></code></pre></td></tr></table></figure><p><img src="/Hexo/img/1580879388109.png" alt="1580879388109"></p><p>4.æŸ¥çœ‹åˆ†è¯æ•ˆæœ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">GET _analyze<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;analyzer&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ik_max_word&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åŒ—äº¬æµ·æ·€&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>5.è¯æ¡æŸ¥è¯¢ï¼šterm</p><p>æŸ¥è¯¢person2ä¸­åŒ¹é…åˆ°â€åŒ—äº¬â€ä¸¤å­—çš„è¯æ¡</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json">GET /person2/_search<br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;query&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;term&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åŒ—äº¬&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>6.å…¨æ–‡æŸ¥è¯¢ï¼šmatch</p><p>â€‹           å…¨æ–‡æŸ¥è¯¢ä¼šåˆ†ææŸ¥è¯¢æ¡ä»¶ï¼Œå…ˆå°†æŸ¥è¯¢æ¡ä»¶è¿›è¡Œåˆ†è¯ï¼Œç„¶åæŸ¥è¯¢ï¼Œæ±‚å¹¶é›†</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">GET <span class="hljs-regexp">/person2/</span>_search<br>&#123;<br>  <span class="hljs-string">&quot;query&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;match&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;address&quot;</span>:<span class="hljs-string">&quot;åŒ—äº¬æ˜Œå¹³&quot;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-ElasticSearch-JavaApi"><a href="#7-ElasticSearch-JavaApi" class="headerlink" title="7-ElasticSearch JavaApi-"></a><strong>7-ElasticSearch JavaApi-</strong></h2><h3 id="7-1SpringBootæ•´åˆES"><a href="#7-1SpringBootæ•´åˆES" class="headerlink" title="7.1SpringBootæ•´åˆES"></a>7.1SpringBootæ•´åˆES</h3><p> â‘ æ­å»ºSpringBootå·¥ç¨‹</p><p>â‘¡å¼•å…¥ElasticSearchç›¸å…³åæ ‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼•å…¥esçš„åæ ‡--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.elasticsearch.client<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.4.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.elasticsearch.client<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>elasticsearch-rest-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.4.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.elasticsearch<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>elasticsearch<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.4.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â‘¢æµ‹è¯•</p><p>ElasticSearchConfig</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ConfigurationProperties(prefix=&quot;elasticsearch&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ElasticSearchConfig</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String host;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;<br><br> <br><br><br><br><br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getHost</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> host;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHost</span><span class="hljs-params">(String host)</span> &#123;<br>        <span class="hljs-built_in">this</span>.host = host;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getPort</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> port;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPort</span><span class="hljs-params">(<span class="hljs-type">int</span> port)</span> &#123;<br>        <span class="hljs-built_in">this</span>.port = port;<br>    &#125;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RestHighLevelClient <span class="hljs-title function_">client</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestHighLevelClient</span>(RestClient.builder(<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHost</span>(host,port,<span class="hljs-string">&quot;http&quot;</span>)<br>        ));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ElasticsearchDay01ApplicationTests</p><p>æ³¨æ„ï¼šä½¿ç”¨@Autowiredæ³¨å…¥RestHighLevelClient å¦‚æœæŠ¥çº¢çº¿ï¼Œåˆ™æ˜¯å› ä¸ºé…ç½®ç±»æ‰€åœ¨çš„åŒ…å’Œæµ‹è¯•ç±»æ‰€åœ¨çš„åŒ…ï¼ŒåŒ…åä¸ä¸€è‡´é€ æˆçš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ElasticsearchDay01ApplicationTests</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    RestHighLevelClient client;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æµ‹è¯•</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br><br>        System.out.println(client);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-2-åˆ›å»ºç´¢å¼•"><a href="#7-2-åˆ›å»ºç´¢å¼•" class="headerlink" title="7.2-åˆ›å»ºç´¢å¼•"></a><strong>7.2-åˆ›å»ºç´¢å¼•</strong></h3><p>1.æ·»åŠ ç´¢å¼•</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ ç´¢å¼•</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addIndex</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>       <span class="hljs-comment">//1.ä½¿ç”¨clientè·å–æ“ä½œç´¢å¼•å¯¹è±¡</span><br>        <span class="hljs-type">IndicesClient</span> <span class="hljs-variable">indices</span> <span class="hljs-operator">=</span> client.indices();<br>        <span class="hljs-comment">//2.å…·ä½“æ“ä½œè·å–è¿”å›å€¼</span><br>        <span class="hljs-comment">//2.1 è®¾ç½®ç´¢å¼•åç§°</span><br>        CreateIndexRequest createIndexRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateIndexRequest</span>(<span class="hljs-string">&quot;itheima&quot;</span>);<br><br>        <span class="hljs-type">CreateIndexResponse</span> <span class="hljs-variable">createIndexResponse</span> <span class="hljs-operator">=</span> indices.create(createIndexRequest, RequestOptions.DEFAULT);<br>        <span class="hljs-comment">//3.æ ¹æ®è¿”å›å€¼åˆ¤æ–­ç»“æœ</span><br>        System.out.println(createIndexResponse.isAcknowledged());<br>    &#125;<br></code></pre></td></tr></table></figure><p>2.æ·»åŠ ç´¢å¼•ï¼Œå¹¶æ·»åŠ æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * æ·»åŠ ç´¢å¼•ï¼Œå¹¶æ·»åŠ æ˜ å°„</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addIndexAndMapping</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>      <span class="hljs-comment">//1.ä½¿ç”¨clientè·å–æ“ä½œç´¢å¼•å¯¹è±¡</span><br>       <span class="hljs-type">IndicesClient</span> <span class="hljs-variable">indices</span> <span class="hljs-operator">=</span> client.indices();<br>       <span class="hljs-comment">//2.å…·ä½“æ“ä½œè·å–è¿”å›å€¼</span><br>       <span class="hljs-comment">//2.å…·ä½“æ“ä½œï¼Œè·å–è¿”å›å€¼</span><br>       <span class="hljs-type">CreateIndexRequest</span> <span class="hljs-variable">createIndexRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateIndexRequest</span>(<span class="hljs-string">&quot;itcast&quot;</span>);<br>       <span class="hljs-comment">//2.1 è®¾ç½®mappings</span><br>       <span class="hljs-type">String</span> <span class="hljs-variable">mapping</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&#123;\n&quot;</span> +<br>               <span class="hljs-string">&quot;      \&quot;properties\&quot; : &#123;\n&quot;</span> +<br>               <span class="hljs-string">&quot;        \&quot;address\&quot; : &#123;\n&quot;</span> +<br>               <span class="hljs-string">&quot;          \&quot;type\&quot; : \&quot;text\&quot;,\n&quot;</span> +<br>               <span class="hljs-string">&quot;          \&quot;analyzer\&quot; : \&quot;ik_max_word\&quot;\n&quot;</span> +<br>               <span class="hljs-string">&quot;        &#125;,\n&quot;</span> +<br>               <span class="hljs-string">&quot;        \&quot;age\&quot; : &#123;\n&quot;</span> +<br>               <span class="hljs-string">&quot;          \&quot;type\&quot; : \&quot;long\&quot;\n&quot;</span> +<br>               <span class="hljs-string">&quot;        &#125;,\n&quot;</span> +<br>               <span class="hljs-string">&quot;        \&quot;name\&quot; : &#123;\n&quot;</span> +<br>               <span class="hljs-string">&quot;          \&quot;type\&quot; : \&quot;keyword\&quot;\n&quot;</span> +<br>               <span class="hljs-string">&quot;        &#125;\n&quot;</span> +<br>               <span class="hljs-string">&quot;      &#125;\n&quot;</span> +<br>               <span class="hljs-string">&quot;    &#125;&quot;</span>;<br>       createIndexRequest.mapping(mapping,XContentType.JSON);<br><br>       <span class="hljs-type">CreateIndexResponse</span> <span class="hljs-variable">createIndexResponse</span> <span class="hljs-operator">=</span> indices.create(createIndexRequest, RequestOptions.DEFAULT);<br>       <span class="hljs-comment">//3.æ ¹æ®è¿”å›å€¼åˆ¤æ–­ç»“æœ</span><br>       System.out.println(createIndexResponse.isAcknowledged());<br>   &#125;<br><br></code></pre></td></tr></table></figure><h3 id="7-3-æŸ¥è¯¢ã€åˆ é™¤ã€åˆ¤æ–­ç´¢å¼•"><a href="#7-3-æŸ¥è¯¢ã€åˆ é™¤ã€åˆ¤æ–­ç´¢å¼•" class="headerlink" title="7.3-æŸ¥è¯¢ã€åˆ é™¤ã€åˆ¤æ–­ç´¢å¼•"></a><strong>7.3-æŸ¥è¯¢ã€åˆ é™¤ã€åˆ¤æ–­ç´¢å¼•</strong></h3><p>æŸ¥è¯¢ç´¢å¼•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><br>   <br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æŸ¥è¯¢ç´¢å¼•</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryIndex</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">IndicesClient</span> <span class="hljs-variable">indices</span> <span class="hljs-operator">=</span> client.indices();<br><br>    GetIndexRequest getRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">GetIndexRequest</span>(<span class="hljs-string">&quot;itcast&quot;</span>);<br>    <span class="hljs-type">GetIndexResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> indices.get(getRequest, RequestOptions.DEFAULT);<br>    Map&lt;String, MappingMetaData&gt; mappings = response.getMappings();<br>    <span class="hljs-comment">//iter æç¤ºforeach</span><br>    <span class="hljs-keyword">for</span> (String key : mappings.keySet()) &#123;<br>        System.out.println(key+<span class="hljs-string">&quot;===&quot;</span>+mappings.get(key).getSourceAsMap());<br>    &#125;<br>&#125;<br><br>   <br>   <br></code></pre></td></tr></table></figure><p>åˆ é™¤ç´¢å¼•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * åˆ é™¤ç´¢å¼•</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteIndex</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">IndicesClient</span> <span class="hljs-variable">indices</span> <span class="hljs-operator">=</span> client.indices();<br>       DeleteIndexRequest deleteRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">DeleteIndexRequest</span>(<span class="hljs-string">&quot;itheima&quot;</span>);<br>       <span class="hljs-type">AcknowledgedResponse</span> <span class="hljs-variable">delete</span> <span class="hljs-operator">=</span> indices.delete(deleteRequest, RequestOptions.DEFAULT);<br>       System.out.println(delete.isAcknowledged());<br><br>   &#125;<br></code></pre></td></tr></table></figure><p>ç´¢å¼•æ˜¯å¦å­˜åœ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * ç´¢å¼•æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">existIndex</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>       <span class="hljs-type">IndicesClient</span> <span class="hljs-variable">indices</span> <span class="hljs-operator">=</span> client.indices();<br><br>       GetIndexRequest getIndexRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">GetIndexRequest</span>(<span class="hljs-string">&quot;itheima&quot;</span>);<br>       <span class="hljs-type">boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> indices.exists(getIndexRequest, RequestOptions.DEFAULT);<br><br><br>       System.out.println(exists);<br><br>   &#125;<br>   <br></code></pre></td></tr></table></figure><h3 id="7-4-æ·»åŠ æ–‡æ¡£"><a href="#7-4-æ·»åŠ æ–‡æ¡£" class="headerlink" title="7.4-æ·»åŠ æ–‡æ¡£"></a><strong>7.4-æ·»åŠ æ–‡æ¡£</strong></h3><p>1.æ·»åŠ æ–‡æ¡£,ä½¿ç”¨mapä½œä¸ºæ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDoc1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>       Map&lt;String, Object&gt; map=<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>       map.put(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>);<br>       map.put(<span class="hljs-string">&quot;age&quot;</span>,<span class="hljs-string">&quot;18&quot;</span>);<br>       map.put(<span class="hljs-string">&quot;address&quot;</span>,<span class="hljs-string">&quot;åŒ—äº¬äºŒç¯&quot;</span>);<br>       IndexRequest request=<span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(<span class="hljs-string">&quot;itcast&quot;</span>).id(<span class="hljs-string">&quot;1&quot;</span>).source(map);<br>       <span class="hljs-type">IndexResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.index(request, RequestOptions.DEFAULT);<br>       System.out.println(response.getId());<br>   &#125;<br></code></pre></td></tr></table></figure><p> 2.æ·»åŠ æ–‡æ¡£,ä½¿ç”¨å¯¹è±¡ä½œä¸ºæ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDoc2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    Person person=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>    person.setId(<span class="hljs-string">&quot;2&quot;</span>);<br>    person.setName(<span class="hljs-string">&quot;æå››&quot;</span>);<br>    person.setAge(<span class="hljs-number">20</span>);<br>    person.setAddress(<span class="hljs-string">&quot;åŒ—äº¬ä¸‰ç¯&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> JSON.toJSONString(person);<br>    IndexRequest request=<span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(<span class="hljs-string">&quot;itcast&quot;</span>).id(person.getId()).source(data,XContentType.JSON);<br>    <span class="hljs-type">IndexResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.index(request, RequestOptions.DEFAULT);<br>    System.out.println(response.getId());<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-5-ä¿®æ”¹ã€æŸ¥è¯¢ã€åˆ é™¤æ–‡æ¡£"><a href="#7-5-ä¿®æ”¹ã€æŸ¥è¯¢ã€åˆ é™¤æ–‡æ¡£" class="headerlink" title="7.5-ä¿®æ”¹ã€æŸ¥è¯¢ã€åˆ é™¤æ–‡æ¡£"></a><strong>7.5-ä¿®æ”¹ã€æŸ¥è¯¢ã€åˆ é™¤æ–‡æ¡£</strong></h3><p>1.ä¿®æ”¹æ–‡æ¡£ï¼šæ·»åŠ æ–‡æ¡£æ—¶ï¼Œå¦‚æœidå­˜åœ¨åˆ™ä¿®æ”¹ï¼Œidä¸å­˜åœ¨åˆ™æ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ä¿®æ”¹æ–‡æ¡£ï¼šæ·»åŠ æ–‡æ¡£æ—¶ï¼Œå¦‚æœidå­˜åœ¨åˆ™ä¿®æ”¹ï¼Œidä¸å­˜åœ¨åˆ™æ·»åŠ </span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">UpdateDoc</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    Person person=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>    person.setId(<span class="hljs-string">&quot;2&quot;</span>);<br>    person.setName(<span class="hljs-string">&quot;æå››&quot;</span>);<br>    person.setAge(<span class="hljs-number">20</span>);<br>    person.setAddress(<span class="hljs-string">&quot;åŒ—äº¬ä¸‰ç¯è½¦ç‹&quot;</span>);<br><br>    <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> JSON.toJSONString(person);<br><br>    IndexRequest request=<span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexRequest</span>(<span class="hljs-string">&quot;itcast&quot;</span>).id(person.getId()).source(data,XContentType.JSON);<br>    <span class="hljs-type">IndexResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.index(request, RequestOptions.DEFAULT);<br>    System.out.println(response.getId());<br>&#125;<br></code></pre></td></tr></table></figure><p>2.æ ¹æ®idæŸ¥è¯¢æ–‡æ¡£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ¹æ®idæŸ¥è¯¢æ–‡æ¡£</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getDoc</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>    <span class="hljs-comment">//è®¾ç½®æŸ¥è¯¢çš„ç´¢å¼•ã€æ–‡æ¡£</span><br>    GetRequest indexRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">GetRequest</span>(<span class="hljs-string">&quot;itcast&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>);<br><br>    <span class="hljs-type">GetResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.get(indexRequest, RequestOptions.DEFAULT);<br>    System.out.println(response.getSourceAsString());<br>&#125;<br></code></pre></td></tr></table></figure><p>3.æ ¹æ®idåˆ é™¤æ–‡æ¡£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®idåˆ é™¤æ–‡æ¡£</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delDoc</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//è®¾ç½®è¦åˆ é™¤çš„ç´¢å¼•ã€æ–‡æ¡£</span><br>        DeleteRequest deleteRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">DeleteRequest</span>(<span class="hljs-string">&quot;itcast&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>);<br><br>        <span class="hljs-type">DeleteResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.delete(deleteRequest, RequestOptions.DEFAULT);<br>        System.out.println(response.getId());<br>    &#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Elasticsearch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Elasticsearch</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker Compose</title>
    <link href="/Hexo/2022/04/21/docker-compose/"/>
    <url>/Hexo/2022/04/21/docker-compose/</url>
    
    <content type="html"><![CDATA[<h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h2><h3 id="ä¸€ã€å®‰è£…Docker-Compose"><a href="#ä¸€ã€å®‰è£…Docker-Compose" class="headerlink" title="ä¸€ã€å®‰è£…Docker Compose"></a>ä¸€ã€å®‰è£…Docker Compose</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs awk">å¸¸ç”¨çš„åŠ é€Ÿç«™ç‚¹æœ‰ï¼š<br><br>https:<span class="hljs-regexp">//mi</span>rror.ghproxy.com/<br><br>git clone<br>https:<span class="hljs-regexp">//mi</span>rror.ghproxy.com<span class="hljs-regexp">/https:/</span><span class="hljs-regexp">/github.com/</span>espnet/espnet.git<br><br>https:<span class="hljs-regexp">//gi</span>tclone.com/<br><br>git clone   https:<span class="hljs-regexp">//gi</span>tclone.com<span class="hljs-regexp">/github.com/</span>espnet/espnet.git<br><br>https:<span class="hljs-regexp">//</span>cnpmjs.org/<br><br>git clone git clone https:<span class="hljs-regexp">//gi</span>thub.com.cnpmjs.org<span class="hljs-regexp">/espnet/</span>espnet.git<br><br>https:<span class="hljs-regexp">//</span>shrill-pond-<span class="hljs-number">3</span>e81.hunsh.workers.dev/<br><br>https:<span class="hljs-regexp">//</span>fastgit.org/<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">Composeç›®å‰å·²ç»å®Œå…¨æ”¯æŒLinuxã€Mac OSå’ŒWindowsï¼Œåœ¨æˆ‘ä»¬å®‰è£…Composeä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…Dockerã€‚ä¸‹é¢æˆ‘ ä»¬ä»¥ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…åœ¨Linuxç³»ç»Ÿä¸­ã€‚</span> <br>curl -L https://mirror.ghproxy.com/https://github.com/docker/compose/releases/download/1.22.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose<br><span class="hljs-meta"># </span><span class="language-bash">è®¾ç½®æ–‡ä»¶å¯æ‰§è¡Œæƒé™</span> <br>chmod +x /usr/local/bin/docker-compose<br><span class="hljs-meta"># </span><span class="language-bash">æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</span> <br>docker-compose -version<br></code></pre></td></tr></table></figure><h3 id="äºŒã€å¸è½½Docker-Compose"><a href="#äºŒã€å¸è½½Docker-Compose" class="headerlink" title="äºŒã€å¸è½½Docker Compose"></a>äºŒã€å¸è½½Docker Compose</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…çš„ï¼Œåˆ é™¤äºŒè¿›åˆ¶æ–‡ä»¶å³å¯</span><br>rm /usr/local/bin/docker-compose<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€-ä½¿ç”¨docker-composeç¼–æ’nginx-springbooté¡¹ç›®"><a href="#ä¸‰ã€-ä½¿ç”¨docker-composeç¼–æ’nginx-springbooté¡¹ç›®" class="headerlink" title="ä¸‰ã€ ä½¿ç”¨docker composeç¼–æ’nginx+springbooté¡¹ç›®"></a>ä¸‰ã€ ä½¿ç”¨docker composeç¼–æ’nginx+springbooté¡¹ç›®</h3><ol><li>åˆ›å»ºdocker-composeç›®å½•</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir ~/docker-compose<br>cd ~/docker-compose<br></code></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™ docker-compose.yml æ–‡ä»¶</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">version: &#x27;3&#x27;<br>services:<br>  nginx:<br>   image: nginx<br>   ports:<br>    - 80:80<br>   links:<br>    - app   //æŒ‚è½½imageåç§°:app<br>   volumes:<br>    - ./nginx/conf.d:/etc/nginx/conf.d<br>  app:<br>    image: app<br>    expose:<br>      - &quot;8080&quot;<br></code></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»º.&#x2F;nginx&#x2F;conf.dç›®å½•</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir -p ./nginx/conf.d<br></code></pre></td></tr></table></figure><ol start="4"><li>åœ¨.&#x2F;nginx&#x2F;conf.dç›®å½•ä¸‹ ç¼–å†™itheima.confæ–‡ä»¶</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">server &#123;<br>    listen 80;<br>    access_log off;<br><br>    location / &#123;<br>        proxy_pass http://app:8080;<br>    &#125;<br>   <br>&#125;<br></code></pre></td></tr></table></figure><ol start="5"><li>åœ¨~&#x2F;docker-compose ç›®å½•ä¸‹ ä½¿ç”¨docker-compose å¯åŠ¨å®¹å™¨</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose up<br></code></pre></td></tr></table></figure><ol start="6"><li>æµ‹è¯•è®¿é—®</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">http://192.168.149.135/hello<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>DockerğŸ’ªğŸ’ª</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DockerğŸ’ªğŸ’ª</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker ç§æœ‰ä»“åº“æ­å»º</title>
    <link href="/Hexo/2022/04/21/docker%20%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/"/>
    <url>/Hexo/2022/04/21/docker%20%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h2 id="Docker-ç§æœ‰ä»“åº“"><a href="#Docker-ç§æœ‰ä»“åº“" class="headerlink" title="Docker ç§æœ‰ä»“åº“"></a>Docker ç§æœ‰ä»“åº“</h2><p>Dockerå®˜æ–¹çš„Docker hubï¼ˆ<a href="https://hub.docker.com)æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å…¬å…±é•œåƒçš„ä»“åº“,æˆ‘ä»¬å¯ä»¥ä»ä¸Šé¢æ‹‰å–é•œåƒ/">https://hub.docker.comï¼‰æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å…¬å…±é•œåƒçš„ä»“åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸Šé¢æ‹‰å–é•œåƒ</a> åˆ°æœ¬åœ°ï¼Œä¹Ÿå¯ä»¥æŠŠæˆ‘ä»¬è‡ªå·±çš„é•œåƒæ¨é€ä¸Šå»ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬çš„æœåŠ¡å™¨æ— æ³•è®¿é—®äº’è”ç½‘ï¼Œæˆ–è€…ä½ ä¸å¸Œæœ›å°†è‡ªå·±çš„é•œ åƒæ”¾åˆ°å…¬ç½‘å½“ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æ­å»ºè‡ªå·±çš„ç§æœ‰ä»“åº“æ¥å­˜å‚¨å’Œç®¡ç†è‡ªå·±çš„é•œåƒã€‚</p><h3 id="ä¸€ã€ç§æœ‰ä»“åº“æ­å»º"><a href="#ä¸€ã€ç§æœ‰ä»“åº“æ­å»º" class="headerlink" title="ä¸€ã€ç§æœ‰ä»“åº“æ­å»º"></a>ä¸€ã€ç§æœ‰ä»“åº“æ­å»º</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">1ã€æ‹‰å–ç§æœ‰ä»“åº“é•œåƒ</span> <br>docker pull registry<br><span class="hljs-meta"># </span><span class="language-bash">2ã€å¯åŠ¨ç§æœ‰ä»“åº“å®¹å™¨</span> <br>docker run -id --name=registry -p 5000:5000 registry<br><span class="hljs-meta"># </span><span class="language-bash">3ã€æ‰“å¼€æµè§ˆå™¨ è¾“å…¥åœ°å€http://ç§æœ‰ä»“åº“æœåŠ¡å™¨ip:5000/v2/_catalogï¼Œçœ‹åˆ°&#123;<span class="hljs-string">&quot;repositories&quot;</span>:[]&#125; è¡¨ç¤ºç§æœ‰ä»“åº“ æ­å»ºæˆåŠŸ</span><br><span class="hljs-meta"># </span><span class="language-bash">4ã€ä¿®æ”¹daemon.json</span> Â  <br>vim /etc/docker/daemon.json Â  Â <br><span class="hljs-meta"># </span><span class="language-bash">åœ¨ä¸Šè¿°æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªkeyï¼Œä¿å­˜é€€å‡ºã€‚æ­¤æ­¥ç”¨äºè®© docker ä¿¡ä»»ç§æœ‰ä»“åº“åœ°å€ï¼›æ³¨æ„å°†ç§æœ‰ä»“åº“æœåŠ¡å™¨ipä¿®æ”¹ä¸ºè‡ªå·±ç§æœ‰ä»“åº“æœåŠ¡å™¨çœŸå®ip</span> <br>&#123;&quot;insecure-registries&quot;:[&quot;ç§æœ‰ä»“åº“æœåŠ¡å™¨ip:5000&quot;]&#125; <br><span class="hljs-meta"># </span><span class="language-bash">5ã€é‡å¯docker æœåŠ¡</span> <br>systemctl restart docker<br>docker start registry<br><br></code></pre></td></tr></table></figure><h3 id="äºŒã€å°†é•œåƒä¸Šä¼ è‡³ç§æœ‰ä»“åº“"><a href="#äºŒã€å°†é•œåƒä¸Šä¼ è‡³ç§æœ‰ä»“åº“" class="headerlink" title="äºŒã€å°†é•œåƒä¸Šä¼ è‡³ç§æœ‰ä»“åº“"></a>äºŒã€å°†é•œåƒä¸Šä¼ è‡³ç§æœ‰ä»“åº“</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">1ã€æ ‡è®°é•œåƒä¸ºç§æœ‰ä»“åº“çš„é•œåƒ</span> Â  Â  <br>docker tag centos:7 ç§æœ‰ä»“åº“æœåŠ¡å™¨IP:5000/centos:7<br><span class="hljs-meta"> </span><br><span class="hljs-meta"># </span><span class="language-bash">2ã€ä¸Šä¼ æ ‡è®°çš„é•œåƒ</span> Â  Â  <br>docker push ç§æœ‰ä»“åº“æœåŠ¡å™¨IP:5000/centos:7<br><br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€-ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒ"><a href="#ä¸‰ã€-ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒ" class="headerlink" title="ä¸‰ã€ ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒ"></a>ä¸‰ã€ ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">æ‹‰å–é•œåƒ</span> <br>docker pull ç§æœ‰ä»“åº“æœåŠ¡å™¨ip:5000/centos:7<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>DockerğŸ’ªğŸ’ª</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DockerğŸ’ªğŸ’ª</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Dockeræ¶æ„</title>
    <link href="/Hexo/2022/04/20/docker/"/>
    <url>/Hexo/2022/04/20/docker/</url>
    
    <content type="html"><![CDATA[<h1 id="åˆè¯†-Docker"><a href="#åˆè¯†-Docker" class="headerlink" title="åˆè¯† Docker"></a><strong>åˆè¯†</strong> <strong>Docker</strong></h1><p>â€¢Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“</p><p>â€¢è¯ç”Ÿäº 2013 å¹´åˆï¼ŒåŸºäº Go è¯­è¨€å®ç°ï¼Œ dotCloud å…¬å¸å‡ºå“ï¼ˆåæ”¹åä¸ºDocker Incï¼‰</p><p>â€¢Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šã€‚</p><p>â€¢å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’éš”ç¦»</p><p>â€¢å®¹å™¨æ€§èƒ½å¼€é”€æä½ã€‚</p><p>Docker ä» 17.03 ç‰ˆæœ¬ä¹‹ååˆ†ä¸º CEï¼ˆCommunity Edition: ç¤¾åŒºç‰ˆï¼‰ å’Œ EEï¼ˆEnterprise Edition: ä¼ä¸šç‰ˆ</p><p>Dockerå¯ä»¥è¿è¡Œåœ¨MACã€Windowsã€CentOSã€UBUNTUç­‰æ“ä½œç³»ç»Ÿä¸Šï¼Œæœ¬è¯¾ç¨‹åŸºäºCentOS 7 å®‰è£…Dockerã€‚å®˜ç½‘ï¼š<a href="https://www.docker.com/">https://www.docker.com</a></p><h1 id="Docker-æ¶æ„"><a href="#Docker-æ¶æ„" class="headerlink" title="Docker æ¶æ„"></a><strong>Docker</strong> <strong>æ¶æ„</strong></h1><p>â€¢<strong>é•œåƒï¼ˆImageï¼‰ï¼š</strong>Docker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ ubuntu:16.04 å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu16.04 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>â€¢<strong>å®¹å™¨ï¼ˆContainerï¼‰</strong>ï¼šé•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå¯¹è±¡ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p><p>â€¢<strong>ä»“åº“ï¼ˆRepositoryï¼‰</strong>ï¼šä»“åº“å¯çœ‹æˆä¸€ä¸ªä»£ç æ§åˆ¶ä¸­å¿ƒï¼Œç”¨æ¥ä¿å­˜é•œåƒã€‚</p><p><img src="https://s2.loli.net/2022/04/18/5lVmgE9cWZrYGJv.png" alt="image-20220418202211307"></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†æ¥ä»docker hubï¼ˆ<a href="https://hub.docker.com/%EF%BC%89%E4%B8%8A%E4%B8%8B%E8%BD%BDdocker%E9%95%9C%E5%83%8F%EF%BC%8C%E5%A4%AA%E6%85%A2%E3%80%82%E4%B8%80%E8%88%AC%E9%83%BD%E4%BC%9A%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E5%99%A8%EF%BC%9A">https://hub.docker.com/ï¼‰ä¸Šä¸‹è½½dockeré•œåƒï¼Œå¤ªæ…¢ã€‚ä¸€èˆ¬éƒ½ä¼šé…ç½®é•œåƒåŠ é€Ÿå™¨ï¼š</a></p><p>â€¢USTCï¼šä¸­ç§‘å¤§é•œåƒåŠ é€Ÿå™¨ï¼ˆ<a href="https://docker.mirrors.ustc.edu.cn)/">https://docker.mirrors.ustc.edu.cnï¼‰</a></p><h2 id="â€¢é˜¿é‡Œäº‘"><a href="#â€¢é˜¿é‡Œäº‘" class="headerlink" title="â€¢é˜¿é‡Œäº‘"></a>â€¢é˜¿é‡Œäº‘</h2><h2 id="1-å®‰è£…ï¼å‡çº§Dockerå®¢æˆ·ç«¯"><a href="#1-å®‰è£…ï¼å‡çº§Dockerå®¢æˆ·ç«¯" class="headerlink" title="1. å®‰è£…ï¼å‡çº§Dockerå®¢æˆ·ç«¯"></a>1. å®‰è£…ï¼å‡çº§Dockerå®¢æˆ·ç«¯</h2><p>æ¨èå®‰è£…1.10.0ä»¥ä¸Šç‰ˆæœ¬çš„Dockerå®¢æˆ·ç«¯ï¼Œå‚è€ƒæ–‡æ¡£<a href="https://yq.aliyun.com/articles/110806">docker-ce</a></p><h2 id="2-é…ç½®é•œåƒåŠ é€Ÿå™¨"><a href="#2-é…ç½®é•œåƒåŠ é€Ÿå™¨" class="headerlink" title="2. é…ç½®é•œåƒåŠ é€Ÿå™¨"></a>2. é…ç½®é•œåƒåŠ é€Ÿå™¨</h2><p>é’ˆå¯¹Dockerå®¢æˆ·ç«¯ç‰ˆæœ¬å¤§äº 1.10.0 çš„ç”¨æˆ·</p><p>æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶&#x2F;etc&#x2F;docker&#x2F;daemon.jsonæ¥ä½¿ç”¨åŠ é€Ÿå™¨</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo mkdir -p <span class="hljs-regexp">/etc/</span>docker<br>sudo tee <span class="hljs-regexp">/etc/</span>docker/daemon.json &lt;&lt;-<span class="hljs-string">&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://9rhwfll9.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br>EOF<br>sudo systemctl daemon-reload<br>sudo systemctl restart docker<br></code></pre></td></tr></table></figure><p>â€¢ç½‘æ˜“äº‘</p><p>â€¢è…¾è®¯äº‘</p><h1 id="Docker-å‘½ä»¤"><a href="#Docker-å‘½ä»¤" class="headerlink" title="Docker å‘½ä»¤"></a><strong>Docker</strong> <strong>å‘½ä»¤</strong></h1><h2 id="Docker-è¿›ç¨‹ç›¸å…³å‘½ä»¤"><a href="#Docker-è¿›ç¨‹ç›¸å…³å‘½ä»¤" class="headerlink" title="Docker è¿›ç¨‹ç›¸å…³å‘½ä»¤"></a><strong>Docker</strong> <strong>è¿›ç¨‹ç›¸å…³å‘½ä»¤</strong></h2><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs nsis">â€¢å¯åŠ¨dockeræœåŠ¡<br><span class="hljs-params">system</span>ctl start docker <br><br>â€¢åœæ­¢dockeræœåŠ¡ <br><span class="hljs-params">system</span>ctl stop docker <br><br>â€¢é‡å¯dockeræœåŠ¡ <br><span class="hljs-params">system</span>ctl restart docker<br><br>â€¢æŸ¥çœ‹dockeræœåŠ¡çŠ¶æ€<br><span class="hljs-params">system</span>ctl status docker <br><br>â€¢å¼€æœºå¯åŠ¨dockeræœåŠ¡<br><span class="hljs-params">system</span>ctl enable docker<br><br></code></pre></td></tr></table></figure><h2 id="Docker-é•œåƒç›¸å…³å‘½ä»¤"><a href="#Docker-é•œåƒç›¸å…³å‘½ä»¤" class="headerlink" title="Docker é•œåƒç›¸å…³å‘½ä»¤"></a><strong>Docker</strong> <strong>é•œåƒç›¸å…³å‘½ä»¤</strong></h2><p><img src="https://s2.loli.net/2022/04/18/XTpbSRPrnDHhu3W.png" alt="image-20220418204538195"></p><p>â€¢æŸ¥çœ‹é•œåƒ </p><p>â€¢æœç´¢é•œåƒ </p><p>â€¢æ‹‰å–é•œåƒ </p><p>â€¢åˆ é™¤é•œåƒ</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">æŸ¥çœ‹é•œåƒ: æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰çš„é•œåƒ</span><br>docker images<br>docker images â€“q <span class="hljs-comment"># æŸ¥çœ‹æ‰€ç”¨é•œåƒçš„id</span><br><br><span class="hljs-section">æœç´¢é•œåƒ:ä»ç½‘ç»œä¸­æŸ¥æ‰¾éœ€è¦çš„é•œåƒ</span><br>docker search é•œåƒåç§°<br><br><span class="hljs-section">æ‹‰å–é•œåƒ:ä»Dockerä»“åº“ä¸‹è½½é•œåƒåˆ°æœ¬åœ°ï¼Œé•œåƒåç§°æ ¼å¼ä¸º åç§°:ç‰ˆæœ¬å·ï¼Œå¦‚æœç‰ˆæœ¬å·ä¸æŒ‡å®šåˆ™æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ã€‚ å¦‚æœä¸çŸ¥é“é•œåƒç‰ˆæœ¬ï¼Œå¯ä»¥å»docker hub æœç´¢å¯¹åº”é•œåƒæŸ¥çœ‹ã€‚</span><br>docker pull é•œåƒåç§°<br><br><span class="hljs-section">åˆ é™¤é•œåƒ: åˆ é™¤æœ¬åœ°é•œåƒ</span><br>docker rmi é•œåƒid <span class="hljs-comment"># åˆ é™¤æŒ‡å®šæœ¬åœ°é•œåƒ</span><br>docker rmi `docker images -q`  <span class="hljs-comment"># åˆ é™¤æ‰€æœ‰æœ¬åœ°é•œåƒ</span><br><br></code></pre></td></tr></table></figure><h2 id="Docker-å®¹å™¨ç›¸å…³å‘½ä»¤"><a href="#Docker-å®¹å™¨ç›¸å…³å‘½ä»¤" class="headerlink" title="Docker å®¹å™¨ç›¸å…³å‘½ä»¤"></a><strong>Docker</strong> <strong>å®¹å™¨ç›¸å…³å‘½ä»¤</strong></h2><p>â€¢æŸ¥çœ‹å®¹å™¨</p><p>â€¢åˆ›å»ºå®¹å™¨</p><p>â€¢è¿›å…¥å®¹å™¨</p><p>â€¢å¯åŠ¨å®¹å™¨</p><p>â€¢åœæ­¢å®¹å™¨</p><p>â€¢åˆ é™¤å®¹å™¨</p><p>â€¢æŸ¥çœ‹å®¹å™¨ä¿¡æ¯</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs awk">æŸ¥çœ‹å®¹å™¨<br>docker ps <span class="hljs-comment"># æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><br>ocker ps â€“a <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ æ³¨æ„-</span><br><br>docker ps â€“i ä¿æŒè¿è¡Œ<br><br>åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨<br>docker run -it --name=cl centos:<span class="hljs-number">7</span> <span class="hljs-regexp">/bin/</span>bash  <span class="hljs-comment">#å‰å°å¯åŠ¨</span><br><br><br><br>docker run -id --name=c2 centos:<span class="hljs-number">7</span><span class="hljs-comment">#å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ï¼Œexitä¸ä¼šé€€å‡º</span><br><br><br><span class="hljs-keyword">exit</span>    <span class="hljs-comment">#é€€å‡º</span><br><br>å‚æ•°è¯´æ˜ï¼š<br>-iï¼šä¿æŒå®¹å™¨è¿è¡Œã€‚é€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ã€‚åŠ å…¥itè¿™ä¸¤ä¸ªå‚æ•°åï¼Œå®¹å™¨åˆ›å»ºåè‡ªåŠ¨è¿›å…¥å®¹å™¨ä¸­ï¼Œé€€å‡ºå®¹å™¨åï¼Œå®¹å™¨è‡ªåŠ¨å…³é—­ã€‚<br>-tï¼šä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ã€‚<br>-dï¼šä»¥å®ˆæŠ¤ï¼ˆåå°ï¼‰æ¨¡å¼è¿è¡Œå®¹å™¨ã€‚åˆ›å»ºä¸€ä¸ªå®¹å™¨åœ¨åå°è¿è¡Œï¼Œéœ€è¦ä½¿ç”¨docker exec è¿›å…¥å®¹å™¨ã€‚é€€å‡ºåï¼Œå®¹å™¨ä¸ä¼šå…³é—­ã€‚<br>-it åˆ›å»ºçš„å®¹å™¨ä¸€èˆ¬ç§°ä¸ºäº¤äº’å¼å®¹å™¨ï¼Œ-id åˆ›å»ºçš„å®¹å™¨ä¸€èˆ¬ç§°ä¸ºå®ˆæŠ¤å¼å®¹å™¨<br>--nameï¼šä¸ºåˆ›å»ºçš„å®¹å™¨å‘½åã€‚<br><br></code></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs powershell">è¿›å…¥å®¹å™¨<br>docker exec å‚æ•° <span class="hljs-comment"># é€€å‡ºå®¹å™¨ï¼Œå®¹å™¨ä¸ä¼šå…³é—­</span><br><br>åœæ­¢å®¹å™¨<br>docker stop å®¹å™¨åç§°<br><br>å¯åŠ¨å®¹å™¨<br>docker <span class="hljs-built_in">start</span> å®¹å™¨åç§°<br><br>åˆ é™¤å®¹å™¨ï¼šå¦‚æœå®¹å™¨æ˜¯è¿è¡ŒçŠ¶æ€åˆ™åˆ é™¤å¤±è´¥ï¼Œéœ€è¦åœæ­¢å®¹å™¨æ‰èƒ½åˆ é™¤<br>docker <span class="hljs-built_in">rm</span> å®¹å™¨åç§°<br><br>æŸ¥çœ‹å®¹å™¨ä¿¡æ¯<br><br>docker inspect å®¹å™¨åç§°<br><br><span class="hljs-number">1</span>.åœç”¨å…¨éƒ¨è¿è¡Œä¸­çš„å®¹å™¨:<br>docker stop <span class="hljs-variable">$</span>(docker <span class="hljs-built_in">ps</span> <span class="hljs-literal">-q</span>)<br><br><span class="hljs-number">2</span>.åˆ é™¤å…¨éƒ¨å®¹å™¨ï¼š<br>docker <span class="hljs-built_in">rm</span> <span class="hljs-variable">$</span>(docker <span class="hljs-built_in">ps</span> <span class="hljs-literal">-aq</span>)<br><br></code></pre></td></tr></table></figure><h1 id="Docker-å®¹å™¨çš„æ•°æ®å·"><a href="#Docker-å®¹å™¨çš„æ•°æ®å·" class="headerlink" title="Docker å®¹å™¨çš„æ•°æ®å·"></a><strong>Docker</strong> <strong>å®¹å™¨çš„æ•°æ®å·</strong></h1><h2 id="æ•°æ®å·æ¦‚å¿µ"><a href="#æ•°æ®å·æ¦‚å¿µ" class="headerlink" title="æ•°æ®å·æ¦‚å¿µ"></a><strong>æ•°æ®å·æ¦‚å¿µ</strong></h2><p>Docker å®¹å™¨åˆ é™¤åï¼Œåœ¨å®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®è¿˜åœ¨å—ï¼Ÿ</p><p>ä¸åœ¨</p><pre><code class="hljs"> ![image-20220419101626465](https://s2.loli.net/2022/04/19/jLbefPSnQBXuIAF.png)</code></pre><p>â€¢Docker å®¹å™¨å’Œå¤–éƒ¨æœºå™¨å¯ä»¥ç›´æ¥äº¤æ¢æ–‡ä»¶å—ï¼Ÿ</p><p>   ä¸èƒ½ï¼Œè¦ç»è¿‡å®¿ä¸»æœºå™¨</p><p><img src="https://s2.loli.net/2022/04/19/sKGO7itPBCIvmjT.png" alt="image-20220419101731133"></p><p><strong>æ•°æ®å·</strong></p><p>â€¢æ•°æ®å·æ˜¯å®¿ä¸»æœºä¸­çš„ä¸€ä¸ªç›®å½•æˆ–æ–‡ä»¶</p><p>â€¢å½“å®¹å™¨ç›®å½•å’Œæ•°æ®å·ç›®å½•ç»‘å®šåï¼Œå¯¹æ–¹çš„ä¿®æ”¹ä¼š<font color='red'>ç«‹å³åŒæ­¥</font></p><p>â€¢ä¸€ä¸ªæ•°æ®å·å¯ä»¥è¢«<font color='red'>å¤šä¸ª</font>å®¹å™¨åŒæ—¶æŒ‚è½½</p><p>â€¢ä¸€ä¸ªå®¹å™¨ä¹Ÿå¯ä»¥è¢«æŒ‚è½½<font color='red'>å¤šä¸ª</font>æ•°æ®å·</p><p><strong>æ•°æ®å·ä½œç”¨</strong></p><p>â€¢å®¹å™¨æ•°æ®æŒä¹…åŒ–</p><p>â€¢å¤–éƒ¨æœºå™¨å’Œå®¹å™¨é—´æ¥é€šä¿¡</p><p>â€¢å®¹å™¨ä¹‹é—´æ•°æ®äº¤æ¢</p><p><img src="https://s2.loli.net/2022/04/19/BA2gsurHn43UhLo.png" alt="image-20220419101904276"></p><h2 id="é…ç½®æ•°æ®å·"><a href="#é…ç½®æ•°æ®å·" class="headerlink" title="é…ç½®æ•°æ®å·"></a><strong>é…ç½®æ•°æ®å·</strong></h2><p>låˆ›å»ºå¯åŠ¨å®¹å™¨æ—¶ï¼Œä½¿ç”¨ â€“v å‚æ•° è®¾ç½®æ•°æ®å·</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">*<span class="hljs-number">*d</span>ocker <span class="hljs-built_in">run</span> <span class="hljs-built_in">..</span>.â€“vå®¿ä¸»æœºç›®å½•(æ–‡ä»¶):å®¹å™¨å†…ç›®å½•(æ–‡ä»¶) <span class="hljs-built_in">..</span>. <br>docker <span class="hljs-built_in">run</span> -it <span class="hljs-attribute">--name</span>=cl -v /root/data:/root/data_container centos:7<br></code></pre></td></tr></table></figure><p><font color='red'>æ³¨æ„äº‹é¡¹ï¼š</font></p><p>â€‹    1. ç›®å½•å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„</p><p>â€‹    2. å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»º</p><p>â€‹    3. å¯ä»¥æŒ‚è½½å¤šä¸ªæ•°æ®å·</p><h2 id="æ•°æ®å·å®¹å™¨"><a href="#æ•°æ®å·å®¹å™¨" class="headerlink" title="æ•°æ®å·å®¹å™¨"></a><strong>æ•°æ®å·å®¹å™¨</strong></h2><p>å¤šå®¹å™¨è¿›è¡Œæ•°æ®äº¤æ¢</p><p>â€‹    1. å¤šä¸ªå®¹å™¨æŒ‚è½½åŒä¸€ä¸ªæ•°æ®å·</p><p>â€‹    2. æ•°æ®å·å®¹å™¨</p><p><img src="https://s2.loli.net/2022/04/19/MsvfiNejTE67X9c.png" alt="image-20220419110757772"></p><p>Dta Container c3 æ˜¯æ•°æ®å·å®¹å™¨</p><h2 id="é…ç½®æ•°æ®å·å®¹å™¨"><a href="#é…ç½®æ•°æ®å·å®¹å™¨" class="headerlink" title="é…ç½®æ•°æ®å·å®¹å™¨"></a><strong>é…ç½®æ•°æ®å·å®¹å™¨</strong></h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">1.åˆ›å»ºå¯åŠ¨c3æ•°æ®å·å®¹å™¨ï¼Œä½¿ç”¨ â€“v å‚æ•°<br>docker <span class="hljs-built_in">run</span> -it <span class="hljs-attribute">--name</span>=c3 -v /volume centos:7 /bin/bash <br><br><br>2.   åˆ›å»ºå¯åŠ¨ c1 c2 å®¹å™¨ï¼Œä½¿ç”¨ â€“-volumes-from å‚æ•° è®¾ç½®æ•°æ®å·<br>docker <span class="hljs-built_in">run</span> -it <span class="hljs-attribute">--name</span>=c1 --volumes-from c3 centos:7 /bin/bash<br><br>docker <span class="hljs-built_in">run</span> -it <span class="hljs-attribute">--name</span>=c2 --volumes-from c3 centos:7 /bin/bash  <br><br></code></pre></td></tr></table></figure><p> è®¾ç½®æ•°æ®å·</p><p><strong>æ•°æ®å·å°ç»“</strong></p><p>1.æ•°æ®å·æ¦‚å¿µ</p><p>â€¢å®¿ä¸»æœºçš„ä¸€ä¸ªç›®å½•æˆ–æ–‡ä»¶</p><p>2.æ•°æ®å·ä½œç”¨</p><p>â€¢å®¹å™¨æ•°æ®æŒä¹…åŒ–</p><p>â€¢å®¢æˆ·ç«¯å’Œå®¹å™¨æ•°æ®äº¤æ¢</p><p>â€¢å®¹å™¨é—´æ•°æ®äº¤æ¢</p><p>3.æ•°æ®å·å®¹å™¨</p><p>â€¢åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼ŒæŒ‚è½½ä¸€ä¸ªç›®å½•ï¼Œè®©å…¶ä»–å®¹å™¨ç»§æ‰¿è‡ªè¯¥å®¹å™¨( â€“volume-from )ã€‚</p><p>â€¢é€šè¿‡ç®€å•æ–¹å¼å®ç°æ•°æ®å·é…ç½®</p><h1 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a><strong>Dockerfile</strong></h1><p>æ“ä½œç³»ç»Ÿç»„æˆéƒ¨åˆ†</p><p>â€¢è¿›ç¨‹è°ƒåº¦å­ç³»ç»Ÿ</p><p>â€¢è¿›ç¨‹é€šä¿¡å­ç³»ç»Ÿ</p><p>â€¢å†…å­˜ç®¡ç†å­ç³»ç»Ÿ</p><p>â€¢è®¾å¤‡ç®¡ç†å­ç³»ç»Ÿ</p><p>â€¢æ–‡ä»¶ç®¡ç†å­ç³»ç»Ÿ</p><p>â€¢ç½‘ç»œé€šä¿¡å­ç³»ç»Ÿ</p><p>â€¢ä½œä¸šæ§åˆ¶å­ç³»ç»Ÿ</p><h2 id="Docker-é•œåƒåŸç†"><a href="#Docker-é•œåƒåŸç†" class="headerlink" title="Docker é•œåƒåŸç†"></a><strong>Docker</strong> <strong>é•œåƒåŸç†</strong></h2><p><img src="https://s2.loli.net/2022/04/19/uflos4H9KhvGL85.png" alt="image-20220419161707591"></p><p>â€¢Dockeré•œåƒæ˜¯ç”±ç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿå åŠ è€Œæˆ</p><p>â€¢æœ€åº•ç«¯æ˜¯ bootfsï¼Œå¹¶ä½¿ç”¨å®¿ä¸»æœºçš„bootfs </p><p>â€¢ç¬¬äºŒå±‚æ˜¯ rootæ–‡ä»¶ç³»ç»Ÿrootfs,ç§°ä¸ºbase image</p><p>â€¢ç„¶åå†å¾€ä¸Šå¯ä»¥å åŠ å…¶ä»–çš„é•œåƒæ–‡ä»¶</p><p>â€¢ç»Ÿä¸€æ–‡ä»¶ç³»ç»Ÿï¼ˆUnion File Systemï¼‰æŠ€æœ¯èƒ½å¤Ÿå°†ä¸åŒçš„å±‚æ•´åˆæˆä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä¸ºè¿™äº›å±‚æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„è§†è§’ï¼Œè¿™æ ·å°±éšè—äº†å¤šå±‚çš„å­˜åœ¨ï¼Œåœ¨ç”¨æˆ·çš„è§’åº¦çœ‹æ¥ï¼Œåªå­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚</p><p>â€¢ä¸€ä¸ªé•œåƒå¯ä»¥æ”¾åœ¨å¦ä¸€ä¸ªé•œåƒçš„ä¸Šé¢ã€‚ä½äºä¸‹é¢çš„é•œåƒç§°ä¸ºçˆ¶é•œåƒï¼Œæœ€åº•éƒ¨çš„é•œåƒæˆä¸ºåŸºç¡€é•œåƒã€‚</p><p>â€¢å½“ä»ä¸€ä¸ªé•œåƒå¯åŠ¨å®¹å™¨æ—¶ï¼ŒDockerä¼šåœ¨æœ€é¡¶å±‚åŠ è½½ä¸€ä¸ªè¯»å†™æ–‡ä»¶ç³»ç»Ÿä½œä¸ºå®¹å™¨</p><p><img src="https://s2.loli.net/2022/04/19/4PU9QLtpvD5VaIY.png" alt="image-20220419161841577"></p><p>1.Docker é•œåƒæœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>â€¢æ˜¯ä¸€ä¸ª<font color='red'>åˆ†å±‚æ–‡ä»¶ç³»ç»Ÿ</font></p><p>2.Docker ä¸­ä¸€ä¸ªcentosé•œåƒä¸ºä»€ä¹ˆåªæœ‰200MBï¼Œè€Œä¸€ä¸ªcentosæ“ä½œç³»ç»Ÿçš„isoæ–‡ä»¶è¦å‡ ä¸ªä¸ªGï¼Ÿ</p><p>â€¢Centosçš„isoé•œåƒæ–‡ä»¶åŒ…å«bootfså’Œrootfsï¼Œè€Œdockerçš„centosé•œåƒå¤ç”¨æ“ä½œç³»ç»Ÿçš„bootfsï¼Œåªæœ‰rootfså’Œå…¶ä»–é•œåƒå±‚</p><p>3.Docker ä¸­ä¸€ä¸ªtomcaté•œåƒä¸ºä»€ä¹ˆæœ‰500MBï¼Œè€Œä¸€ä¸ªtomcatå®‰è£…åŒ…åªæœ‰70å¤šMBï¼Ÿ</p><p>â€¢ç”±äºdockerä¸­é•œåƒæ˜¯åˆ†å±‚çš„ï¼Œ<font color='red'>tomcatè™½ç„¶åªæœ‰70å¤šMBï¼Œä½†ä»–éœ€è¦ä¾èµ–äºçˆ¶é•œåƒå’ŒåŸºç¡€é•œåƒï¼Œæ‰€æœ‰æ•´ä¸ªå¯¹å¤–æš´éœ²çš„tomcaté•œåƒå¤§å°500å¤šMB</font></p><h2 id="1-é•œåƒåˆ¶ä½œ"><a href="#1-é•œåƒåˆ¶ä½œ" class="headerlink" title="1.é•œåƒåˆ¶ä½œ"></a>1.<strong>é•œåƒåˆ¶ä½œ</strong></h2><p>Docker é•œåƒå¦‚ä½•åˆ¶ä½œï¼Ÿ</p><p>1.å®¹å™¨è½¬ä¸ºé•œåƒ</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gauss">docker commit å®¹å™¨id é•œåƒåç§°:ç‰ˆæœ¬å·<br><br>docker <span class="hljs-keyword">save</span> -o å‹ç¼©æ–‡ä»¶åç§° é•œåƒåç§°:ç‰ˆæœ¬å·<br><br>docker <span class="hljs-keyword">load</span> â€“i å‹ç¼©æ–‡ä»¶åç§°<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/19/LC3irx6jmcb8E9R.png" alt="image-20220419165036352"></p><h2 id="2-dockerfile"><a href="#2-dockerfile" class="headerlink" title="2.dockerfile"></a>2.dockerfile</h2><p><strong>Dockerfile</strong> <strong>æ¦‚å¿µ</strong></p><p>â€¢Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶</p><p>â€¢åŒ…å«äº†ä¸€æ¡æ¡çš„æŒ‡ä»¤</p><p>â€¢æ¯ä¸€æ¡æŒ‡ä»¤æ„å»ºä¸€å±‚ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼Œæœ€ç»ˆæ„å»ºå‡ºä¸€ä¸ªæ–°çš„é•œåƒ</p><p>â€¢å¯¹äºå¼€å‘äººå‘˜ï¼šå¯ä»¥ä¸ºå¼€å‘å›¢é˜Ÿæä¾›ä¸€ä¸ªå®Œå…¨ä¸€è‡´çš„å¼€å‘ç¯å¢ƒ</p><p>â€¢å¯¹äºæµ‹è¯•äººå‘˜ï¼šå¯ä»¥ç›´æ¥æ‹¿å¼€å‘æ—¶æ‰€æ„å»ºçš„é•œåƒæˆ–è€…é€šè¿‡Dockerfileæ–‡ä»¶æ„å»ºä¸€ä¸ªæ–°çš„é•œåƒå¼€å§‹å·¥ä½œäº†</p><p>â€¢å¯¹äºè¿ç»´äººå‘˜ï¼šåœ¨éƒ¨ç½²æ—¶ï¼Œå¯ä»¥å®ç°åº”ç”¨çš„æ— ç¼ç§»æ¤</p><p><img src="https://s2.loli.net/2022/04/19/b7DUC6xQqnH5fYg.png" alt="image-20220419165506997"></p><p>Dochubç½‘å€ï¼š<a href="https://hub.docker.com/">https://hub.docker.com</a> </p><p><strong>Dockerfile</strong> <strong>æ¡ˆä¾‹</strong></p><p><strong>æ¡ˆä¾‹ï¼šéœ€æ±‚</strong></p><p>è‡ªå®šä¹‰centos7é•œåƒã€‚è¦æ±‚ï¼š</p><ol><li><p>é»˜è®¤ç™»å½•è·¯å¾„ä¸º &#x2F;usr</p></li><li><p>å¯ä»¥ä½¿ç”¨vim</p></li></ol><p><strong>æ¡ˆä¾‹ï¼šå®ç°æ­¥éª¤</strong></p><p>â‘ å®šä¹‰çˆ¶é•œåƒï¼šFROM centos:7</p><p>â‘¡å®šä¹‰ä½œè€…ä¿¡æ¯ï¼šMAINTAINER  itheima <a href="mailto:&#x69;&#116;&#104;&#x65;&#105;&#109;&#x61;&#64;&#x69;&#116;&#99;&#x61;&#115;&#116;&#x2e;&#x63;&#x6e;">&#x69;&#116;&#104;&#x65;&#105;&#109;&#x61;&#64;&#x69;&#116;&#99;&#x61;&#115;&#116;&#x2e;&#x63;&#x6e;</a></p><p>â‘¢æ‰§è¡Œå®‰è£…vimå‘½ä»¤ï¼š RUN yum install -y vim</p><p>â‘£å®šä¹‰é»˜è®¤çš„å·¥ä½œç›®å½•ï¼šWORKDIR &#x2F;usr</p><p>â‘¤å®šä¹‰å®¹å™¨å¯åŠ¨æ‰§è¡Œçš„å‘½ä»¤ï¼šCMD &#x2F;bin&#x2F;bash</p><p>â‘¥é€šè¿‡dockerfileæ„å»ºé•œåƒï¼šdocker bulid â€“f dockerfileæ–‡ä»¶è·¯å¾„ â€“t é•œåƒåç§°:ç‰ˆæœ¬</p><p><img src="https://s2.loli.net/2022/04/19/Pfn2qD6phjGy7Au.png" alt="image-20220419191929690"></p><p><strong>æ¡ˆä¾‹ï¼šéœ€æ±‚</strong></p><p>å®šä¹‰dockerfileï¼Œå‘å¸ƒspringbooté¡¹ç›®</p><p><strong>æ¡ˆä¾‹ï¼šå®ç°æ­¥éª¤</strong></p><p>â‘ å®šä¹‰çˆ¶é•œåƒï¼šFROM java:8</p><p>â‘¡å®šä¹‰ä½œè€…ä¿¡æ¯ï¼šMAINTAINER  itheima <a href="mailto:&#x69;&#116;&#104;&#x65;&#105;&#109;&#97;&#64;&#105;&#x74;&#x63;&#97;&#115;&#x74;&#46;&#x63;&#110;">&#x69;&#116;&#104;&#x65;&#105;&#109;&#97;&#64;&#105;&#x74;&#x63;&#97;&#115;&#x74;&#46;&#x63;&#110;</a></p><p>â‘¢å°†jaråŒ…æ·»åŠ åˆ°å®¹å™¨ï¼š ADD springboot.jar<font color='red'> app.jar</font></p><p>â‘£å®šä¹‰å®¹å™¨å¯åŠ¨æ‰§è¡Œçš„å‘½ä»¤ï¼šCMD javaâ€“jar <font color='red'>app.jar</font></p><p>â‘¤é€šè¿‡dockerfileæ„å»ºé•œåƒï¼šdocker build â€“f dockerfileæ–‡ä»¶è·¯å¾„ â€“t é•œåƒåç§°:ç‰ˆæœ¬</p><h1 id="Docker-ç›¸å…³æ¦‚å¿µ"><a href="#Docker-ç›¸å…³æ¦‚å¿µ" class="headerlink" title="Docker ç›¸å…³æ¦‚å¿µ"></a><strong>Docker</strong> <strong>ç›¸å…³æ¦‚å¿µ</strong></h1><h2 id="dockerå®¹å™¨è™šæ‹ŸåŒ–-ä¸-ä¼ ç»Ÿè™šæ‹Ÿæœºæ¯”è¾ƒ"><a href="#dockerå®¹å™¨è™šæ‹ŸåŒ–-ä¸-ä¼ ç»Ÿè™šæ‹Ÿæœºæ¯”è¾ƒ" class="headerlink" title="dockerå®¹å™¨è™šæ‹ŸåŒ– ä¸ ä¼ ç»Ÿè™šæ‹Ÿæœºæ¯”è¾ƒ"></a>dockerå®¹å™¨è™šæ‹ŸåŒ– ä¸ ä¼ ç»Ÿè™šæ‹Ÿæœºæ¯”è¾ƒ</h2><p>å®¹å™¨å°±æ˜¯å°†è½¯ä»¶æ‰“åŒ…æˆæ ‡å‡†åŒ–å•å…ƒï¼Œä»¥ç”¨äºå¼€å‘ã€äº¤ä»˜å’Œéƒ¨ç½²ã€‚</p><p>â€¢å®¹å™¨é•œåƒæ˜¯è½»é‡çš„ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ… ï¼ŒåŒ…å«è½¯ä»¶è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼šä»£ç ã€è¿è¡Œæ—¶ç¯å¢ƒã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“å’Œè®¾ç½®ã€‚</p><p>â€¢å®¹å™¨åŒ–è½¯ä»¶åœ¨ä»»ä½•ç¯å¢ƒä¸­éƒ½èƒ½å¤Ÿå§‹ç»ˆå¦‚ä¸€åœ°è¿è¡Œã€‚</p><p>â€¢å®¹å™¨èµ‹äºˆäº†è½¯ä»¶ç‹¬ç«‹æ€§ï¼Œä½¿å…¶å…å—å¤–åœ¨ç¯å¢ƒå·®å¼‚çš„å½±å“ï¼Œä»è€Œæœ‰åŠ©äºå‡å°‘å›¢é˜Ÿé—´åœ¨ç›¸åŒåŸºç¡€è®¾æ–½ä¸Šè¿è¡Œä¸åŒè½¯ä»¶æ—¶çš„å†²çªã€‚</p><p><img src="https://s2.loli.net/2022/04/21/MiBoIWtNyrgG6xV.png" alt="image-20220421085351308"></p><p>ç›¸åŒï¼š</p><p>â€¢å®¹å™¨å’Œè™šæ‹Ÿæœºå…·æœ‰ç›¸ä¼¼çš„èµ„æºéš”ç¦»å’Œåˆ†é…ä¼˜åŠ¿</p><p>ä¸åŒï¼š</p><p>â€¢å®¹å™¨è™šæ‹ŸåŒ–çš„æ˜¯æ“ä½œç³»ç»Ÿï¼Œè™šæ‹Ÿæœºè™šæ‹ŸåŒ–çš„æ˜¯ç¡¬ä»¶ã€‚</p><p>â€¢ä¼ ç»Ÿè™šæ‹Ÿæœºå¯ä»¥è¿è¡Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå®¹å™¨åªèƒ½è¿è¡ŒåŒä¸€ç±»å‹æ“ä½œç³»ç»Ÿ</p><p><img src="https://s2.loli.net/2022/04/21/hqLeoEMJi9SIkHY.png" alt="image-20220421085552728"></p>]]></content>
    
    
    <categories>
      
      <category>DockerğŸ’ªğŸ’ª</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DockerğŸ’ªğŸ’ª</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Dockerfileå…³é”®å­—</title>
    <link href="/Hexo/2022/04/20/dockerfile/"/>
    <url>/Hexo/2022/04/20/dockerfile/</url>
    
    <content type="html"><![CDATA[<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><table><thead><tr><th>å…³é”®å­—</th><th>ä½œç”¨</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>FROM</td><td>æŒ‡å®šçˆ¶é•œåƒ</td><td>æŒ‡å®šdockerfileåŸºäºé‚£ä¸ªimageæ„å»º</td></tr><tr><td>MAINTAINER</td><td>ä½œè€…ä¿¡æ¯</td><td>ç”¨æ¥æ ‡æ˜è¿™ä¸ªdockerfileè°å†™çš„</td></tr><tr><td>LABEL</td><td>æ ‡ç­¾</td><td>ç”¨æ¥æ ‡æ˜dockerfileçš„æ ‡ç­¾ å¯ä»¥ä½¿ç”¨Labelä»£æ›¿Maintainer æœ€ç»ˆéƒ½æ˜¯åœ¨docker imageåŸºæœ¬ä¿¡æ¯ä¸­å¯ä»¥æŸ¥çœ‹</td></tr><tr><td>RUN</td><td>æ‰§è¡Œå‘½ä»¤</td><td>æ‰§è¡Œä¸€æ®µå‘½ä»¤ é»˜è®¤æ˜¯&#x2F;bin&#x2F;sh æ ¼å¼: RUN command æˆ–è€… RUN [â€œcommandâ€ , â€œparam1â€,â€param2â€]</td></tr><tr><td>CMD</td><td>å®¹å™¨å¯åŠ¨å‘½ä»¤</td><td>æä¾›å¯åŠ¨å®¹å™¨æ—¶å€™çš„é»˜è®¤å‘½ä»¤ å’ŒENTRYPOINTé…åˆä½¿ç”¨.æ ¼å¼ CMD command param1 param2 æˆ–è€… CMD [â€œcommandâ€ , â€œparam1â€,â€param2â€]</td></tr><tr><td>ENTRYPOINT</td><td>å…¥å£</td><td>ä¸€èˆ¬åœ¨åˆ¶ä½œä¸€äº›æ‰§è¡Œå°±å…³é—­çš„å®¹å™¨ä¸­ä¼šä½¿ç”¨</td></tr><tr><td>COPY</td><td>å¤åˆ¶æ–‡ä»¶</td><td>buildçš„æ—¶å€™å¤åˆ¶æ–‡ä»¶åˆ°imageä¸­</td></tr><tr><td>ADD</td><td>æ·»åŠ æ–‡ä»¶</td><td>buildçš„æ—¶å€™æ·»åŠ æ–‡ä»¶åˆ°imageä¸­ ä¸ä»…ä»…å±€é™äºå½“å‰buildä¸Šä¸‹æ–‡ å¯ä»¥æ¥æºäºè¿œç¨‹æœåŠ¡</td></tr><tr><td>ENV</td><td>ç¯å¢ƒå˜é‡</td><td>æŒ‡å®šbuildæ—¶å€™çš„ç¯å¢ƒå˜é‡ å¯ä»¥åœ¨å¯åŠ¨çš„å®¹å™¨çš„æ—¶å€™ é€šè¿‡-eè¦†ç›– æ ¼å¼ENV name&#x3D;value</td></tr><tr><td>ARG</td><td>æ„å»ºå‚æ•°</td><td>æ„å»ºå‚æ•° åªåœ¨æ„å»ºçš„æ—¶å€™ä½¿ç”¨çš„å‚æ•° å¦‚æœæœ‰ENV é‚£ä¹ˆENVçš„ç›¸åŒåå­—çš„å€¼å§‹ç»ˆè¦†ç›–argçš„å‚æ•°</td></tr><tr><td>VOLUME</td><td>å®šä¹‰å¤–éƒ¨å¯ä»¥æŒ‚è½½çš„æ•°æ®å·</td><td>æŒ‡å®šbuildçš„imageé‚£äº›ç›®å½•å¯ä»¥å¯åŠ¨çš„æ—¶å€™æŒ‚è½½åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ å¯åŠ¨å®¹å™¨çš„æ—¶å€™ä½¿ç”¨ -v ç»‘å®š æ ¼å¼ VOLUME [â€œç›®å½•â€]</td></tr><tr><td>EXPOSE</td><td>æš´éœ²ç«¯å£</td><td>å®šä¹‰å®¹å™¨è¿è¡Œçš„æ—¶å€™ç›‘å¬çš„ç«¯å£ å¯åŠ¨å®¹å™¨çš„ä½¿ç”¨-pæ¥ç»‘å®šæš´éœ²ç«¯å£ æ ¼å¼: EXPOSE 8080 æˆ–è€… EXPOSE 8080&#x2F;udp</td></tr><tr><td>WORKDIR</td><td>å·¥ä½œç›®å½•</td><td>æŒ‡å®šå®¹å™¨å†…éƒ¨çš„å·¥ä½œç›®å½• å¦‚æœæ²¡æœ‰åˆ›å»ºåˆ™è‡ªåŠ¨åˆ›å»º å¦‚æœæŒ‡å®š&#x2F; ä½¿ç”¨çš„æ˜¯ç»å¯¹åœ°å€ å¦‚æœä¸æ˜¯&#x2F;å¼€å¤´é‚£ä¹ˆæ˜¯åœ¨ä¸Šä¸€æ¡workdirçš„è·¯å¾„çš„ç›¸å¯¹è·¯å¾„</td></tr><tr><td>USER</td><td>æŒ‡å®šæ‰§è¡Œç”¨æˆ·</td><td>æŒ‡å®šbuildæˆ–è€…å¯åŠ¨çš„æ—¶å€™ ç”¨æˆ· åœ¨RUN CMD ENTRYPONTæ‰§è¡Œçš„æ—¶å€™çš„ç”¨æˆ·</td></tr><tr><td>HEALTHCHECK</td><td>å¥åº·æ£€æŸ¥</td><td>æŒ‡å®šç›‘æµ‹å½“å‰å®¹å™¨çš„å¥åº·ç›‘æµ‹çš„å‘½ä»¤ åŸºæœ¬ä¸Šæ²¡ç”¨ å› ä¸ºå¾ˆå¤šæ—¶å€™ åº”ç”¨æœ¬èº«æœ‰å¥åº·ç›‘æµ‹æœºåˆ¶</td></tr><tr><td>ONBUILD</td><td>è§¦å‘å™¨</td><td>å½“å­˜åœ¨ONBUILDå…³é”®å­—çš„é•œåƒä½œä¸ºåŸºç¡€é•œåƒçš„æ—¶å€™ å½“æ‰§è¡ŒFROMå®Œæˆä¹‹å ä¼šæ‰§è¡Œ ONBUILDçš„å‘½ä»¤ ä½†æ˜¯ä¸å½±å“å½“å‰é•œåƒ ç”¨å¤„ä¹Ÿä¸æ€ä¹ˆå¤§</td></tr><tr><td>STOPSIGNAL</td><td>å‘é€ä¿¡å·é‡åˆ°å®¿ä¸»æœº</td><td>è¯¥STOPSIGNALæŒ‡ä»¤è®¾ç½®å°†å‘é€åˆ°å®¹å™¨çš„ç³»ç»Ÿè°ƒç”¨ä¿¡å·ä»¥é€€å‡ºã€‚</td></tr><tr><td>SHELL</td><td>æŒ‡å®šæ‰§è¡Œè„šæœ¬çš„shell</td><td>æŒ‡å®šRUN CMD ENTRYPOINT æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™ ä½¿ç”¨çš„shell</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>DockerğŸ’ªğŸ’ª</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DockerğŸ’ªğŸ’ª</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Dockeråº”ç”¨éƒ¨ç½²</title>
    <link href="/Hexo/2022/04/20/docker%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2/"/>
    <url>/Hexo/2022/04/20/docker%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<h2 id="Docker-åº”ç”¨éƒ¨ç½²"><a href="#Docker-åº”ç”¨éƒ¨ç½²" class="headerlink" title="Docker åº”ç”¨éƒ¨ç½²"></a>Docker åº”ç”¨éƒ¨ç½²</h2><h3 id="ä¸€ã€éƒ¨ç½²MySQL"><a href="#ä¸€ã€éƒ¨ç½²MySQL" class="headerlink" title="ä¸€ã€éƒ¨ç½²MySQL"></a>ä¸€ã€éƒ¨ç½²MySQL</h3><p>â€¢å®¹å™¨å†…çš„ç½‘ç»œæœåŠ¡å’Œå¤–éƒ¨æœºå™¨ä¸èƒ½ç›´æ¥é€šä¿¡</p><p>â€¢å¤–éƒ¨æœºå™¨å’Œå®¿ä¸»æœºå¯ä»¥ç›´æ¥é€šä¿¡</p><p>â€¢å®¿ä¸»æœºå’Œå®¹å™¨å¯ä»¥ç›´æ¥é€šä¿¡</p><p>â€¢å½“å®¹å™¨ä¸­çš„ç½‘ç»œæœåŠ¡éœ€è¦è¢«å¤–éƒ¨æœºå™¨è®¿é—®æ—¶ï¼Œå¯ä»¥å°†å®¹å™¨ä¸­æä¾›æœåŠ¡çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£ä¸Šã€‚å¤–éƒ¨æœºå™¨è®¿é—®å®¿ä¸»æœºçš„è¯¥ç«¯å£ï¼Œä»è€Œé—´æ¥è®¿é—®å®¹å™¨çš„æœåŠ¡ã€‚</p><p>â€¢è¿™ç§æ“ä½œç§°ä¸ºï¼š**<font color='red'>ç«¯å£æ˜ å°„</font>**</p><p><img src="https://s2.loli.net/2022/04/19/7n5LC4HvlcjzJ2F.png" alt="image-20220419112650981"></p><ol><li>æœç´¢mysqlé•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker search mysql<br></code></pre></td></tr></table></figure><ol start="2"><li>æ‹‰å–mysqlé•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull mysql:5.6<br></code></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»ºå®¹å™¨ï¼Œè®¾ç½®ç«¯å£æ˜ å°„ã€ç›®å½•æ˜ å°„</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">åœ¨/rootç›®å½•ä¸‹åˆ›å»ºmysqlç›®å½•ç”¨äºå­˜å‚¨mysqlæ•°æ®ä¿¡æ¯</span><br>mkdir ~/mysql<br>cd ~/mysql<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -id \<br>-p 3307:3306 \<br>--name=c_mysql \<br>-v $PWD/conf:/etc/mysql/conf.d \<br>-v $PWD/logs:/logs \<br>-v $PWD/data:/var/lib/mysql \<br>-e MYSQL_ROOT_PASSWORD=123456 \<br>mysql:5.6<br></code></pre></td></tr></table></figure><ul><li>å‚æ•°è¯´æ˜ï¼š<ul><li><strong>-p 3307:3306</strong>ï¼šå°†å®¹å™¨çš„ 3306 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 3307 ç«¯å£ã€‚</li><li><strong>-v $PWD&#x2F;conf:&#x2F;etc&#x2F;mysql&#x2F;conf.d</strong>ï¼šå°†ä¸»æœºå½“å‰ç›®å½•ä¸‹çš„ conf&#x2F;my.cnf æŒ‚è½½åˆ°å®¹å™¨çš„ &#x2F;etc&#x2F;mysql&#x2F;my.cnfã€‚é…ç½®ç›®å½•</li><li><strong>-v $PWD&#x2F;logs:&#x2F;logs</strong>ï¼šå°†ä¸»æœºå½“å‰ç›®å½•ä¸‹çš„ logs ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ &#x2F;logsã€‚æ—¥å¿—ç›®å½•</li><li><strong>-v $PWD&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql</strong> ï¼šå°†ä¸»æœºå½“å‰ç›®å½•ä¸‹çš„dataç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ &#x2F;var&#x2F;lib&#x2F;mysql ã€‚æ•°æ®ç›®å½•</li><li><strong>-e MYSQL_ROOT_PASSWORD&#x3D;123456ï¼š</strong>åˆå§‹åŒ– root ç”¨æˆ·çš„å¯†ç ã€‚</li></ul></li></ul><ol start="4"><li>è¿›å…¥å®¹å™¨ï¼Œæ“ä½œmysql</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it c_mysql /bin/bash<br></code></pre></td></tr></table></figure><ol start="5"><li>ä½¿ç”¨å¤–éƒ¨æœºå™¨è¿æ¥å®¹å™¨ä¸­çš„mysql</li></ol><p><img src="https://s2.loli.net/2022/04/24/gzJxlkIwAjqHQtZ.png" alt="1573636765632"></p><h3 id="äºŒã€éƒ¨ç½²Tomcat"><a href="#äºŒã€éƒ¨ç½²Tomcat" class="headerlink" title="äºŒã€éƒ¨ç½²Tomcat"></a>äºŒã€éƒ¨ç½²Tomcat</h3><ol><li>æœç´¢tomcaté•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker search tomcat<br></code></pre></td></tr></table></figure><ol start="2"><li>æ‹‰å–tomcaté•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull tomcat<br></code></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»ºå®¹å™¨ï¼Œè®¾ç½®ç«¯å£æ˜ å°„ã€ç›®å½•æ˜ å°„</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">åœ¨/rootç›®å½•ä¸‹åˆ›å»ºtomcatç›®å½•ç”¨äºå­˜å‚¨tomcatæ•°æ®ä¿¡æ¯</span><br>mkdir ~/tomcat<br>cd ~/tomcat<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -id --name=c_tomcat \<br>-p 8086:8080 \<br>-v $PWD:/usr/local/tomcat/webapps \<br>tomcat <br></code></pre></td></tr></table></figure><ul><li>å‚æ•°è¯´æ˜ï¼š<ul><li><p><strong>-p 8080:8080ï¼š</strong>å°†å®¹å™¨çš„8080ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„8080ç«¯å£</p><p><strong>-v $PWD:&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;webappsï¼š</strong>å°†ä¸»æœºä¸­å½“å‰ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„webapps</p></li></ul></li></ul><ol start="4"><li>ä½¿ç”¨å¤–éƒ¨æœºå™¨è®¿é—®tomcat</li></ol><p><img src="https://s2.loli.net/2022/04/21/bfQGzUlSdesD2aN.png" alt="1573649804623"></p><h3 id="ä¸‰ã€éƒ¨ç½²Nginx"><a href="#ä¸‰ã€éƒ¨ç½²Nginx" class="headerlink" title="ä¸‰ã€éƒ¨ç½²Nginx"></a>ä¸‰ã€éƒ¨ç½²Nginx</h3><ol><li>æœç´¢nginxé•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker search nginx<br></code></pre></td></tr></table></figure><ol start="2"><li>æ‹‰å–nginxé•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull nginx<br></code></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»ºå®¹å™¨ï¼Œè®¾ç½®ç«¯å£æ˜ å°„ã€ç›®å½•æ˜ å°„</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">åœ¨/rootç›®å½•ä¸‹åˆ›å»ºnginxç›®å½•ç”¨äºå­˜å‚¨nginxæ•°æ®ä¿¡æ¯</span><br>mkdir ~/nginx<br>cd ~/nginx<br>mkdir conf<br>cd conf<br><span class="hljs-meta"># </span><span class="language-bash">åœ¨~/nginx/conf/ä¸‹åˆ›å»ºnginx.confæ–‡ä»¶,ç²˜è´´ä¸‹é¢å†…å®¹</span><br>vim nginx.conf<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs shell"><br>user  nginx;<br>worker_processes  1;<br><br>error_log  /var/log/nginx/error.log warn;<br>pid        /var/run/nginx.pid;<br><br><br>events &#123;<br>    worker_connections  1024;<br>&#125;<br><br><br>http &#123;<br>    include       /etc/nginx/mime.types;<br>    default_type  application/octet-stream;<br><br>    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;<br>                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;<br>                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;<br><br>    access_log  /var/log/nginx/access.log  main;<br><br>    sendfile        on;<br>    #tcp_nopush     on;<br><br>    keepalive_timeout  65;<br><br>    #gzip  on;<br><br>    include /etc/nginx/conf.d/*.conf;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>é€€å‡ºåˆ°Nginxç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -id --name=c_nginx \<br>-p 80:80 \<br>-v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf \<br>-v $PWD/logs:/var/log/nginx \<br>-v $PWD/html:/usr/share/nginx/html \<br>nginx<br></code></pre></td></tr></table></figure><ul><li>å‚æ•°è¯´æ˜ï¼š<ul><li><strong>-p 80:80</strong>ï¼šå°†å®¹å™¨çš„ 80ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 80 ç«¯å£ã€‚</li><li><strong>-v $PWD&#x2F;conf&#x2F;nginx.conf:&#x2F;etc&#x2F;nginx&#x2F;nginx.conf</strong>ï¼šå°†ä¸»æœºå½“å‰ç›®å½•ä¸‹çš„ &#x2F;conf&#x2F;nginx.conf æŒ‚è½½åˆ°å®¹å™¨çš„ :&#x2F;etc&#x2F;nginx&#x2F;nginx.confã€‚é…ç½®ç›®å½•</li><li><strong>-v $PWD&#x2F;logs:&#x2F;var&#x2F;log&#x2F;nginx</strong>ï¼šå°†ä¸»æœºå½“å‰ç›®å½•ä¸‹çš„ logs ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„&#x2F;var&#x2F;log&#x2F;nginxã€‚æ—¥å¿—ç›®å½•</li></ul></li></ul><ol start="4"><li>ä½¿ç”¨å¤–éƒ¨æœºå™¨è®¿é—®nginx</li></ol><p><img src="https://s2.loli.net/2022/04/24/V42rSHGxKloY9pX.png" alt="1573652396669"></p><h3 id="å››ã€éƒ¨ç½²Redis"><a href="#å››ã€éƒ¨ç½²Redis" class="headerlink" title="å››ã€éƒ¨ç½²Redis"></a>å››ã€éƒ¨ç½²Redis</h3><ol><li>æœç´¢redisé•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker search redis<br></code></pre></td></tr></table></figure><ol start="2"><li>æ‹‰å–redisé•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull redis:5.0<br></code></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»ºå®¹å™¨ï¼Œè®¾ç½®ç«¯å£æ˜ å°„</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -id --name=c_redis -p 6379:6379 redis:5.0<br></code></pre></td></tr></table></figure><ol start="4"><li>ä½¿ç”¨å¤–éƒ¨æœºå™¨è¿æ¥redis</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./redis-cli.exe -h 192.168.149.135 -p 6379<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>DockerğŸ’ªğŸ’ª</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DockerğŸ’ªğŸ’ª</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Dockerå®‰è£…</title>
    <link href="/Hexo/2022/04/19/%E5%AE%89%E8%A3%85docker/"/>
    <url>/Hexo/2022/04/19/%E5%AE%89%E8%A3%85docker/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€å®‰è£…Docker"><a href="#ä¸€ã€å®‰è£…Docker" class="headerlink" title="ä¸€ã€å®‰è£…Docker"></a>ä¸€ã€å®‰è£…Docker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"># </span><span class="language-bash">1ã€yum åŒ…æ›´æ–°åˆ°æœ€æ–°</span> <br>yum update<br><span class="hljs-meta"># </span><span class="language-bash">2ã€å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…ï¼Œ yum-util æä¾›yum-config-manageråŠŸèƒ½ï¼Œå¦å¤–ä¸¤ä¸ªæ˜¯devicemapperé©±åŠ¨ä¾èµ–çš„</span> <br>yum install -y yum-utils device-mapper-persistent-data lvm2<br><span class="hljs-meta"># </span><span class="language-bash">3ã€ è®¾ç½®yumæº</span><br>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo<br><span class="hljs-meta"># </span><span class="language-bash">4ã€ å®‰è£…dockerï¼Œå‡ºç°è¾“å…¥çš„ç•Œé¢éƒ½æŒ‰ y</span> <br>yum install -y docker-ce<br><span class="hljs-meta"># </span><span class="language-bash">5ã€ æŸ¥çœ‹dockerç‰ˆæœ¬ï¼ŒéªŒè¯æ˜¯å¦éªŒè¯æˆåŠŸ</span><br>docker -v<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>DockerğŸ’ªğŸ’ª</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DockerğŸ’ªğŸ’ª</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RabbitMQé«˜çº§ç‰¹æ€§</title>
    <link href="/Hexo/2022/04/16/rabbitMQ%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/"/>
    <url>/Hexo/2022/04/16/rabbitMQ%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="RabbitMQé«˜çº§ç‰¹æ€§"><a href="#RabbitMQé«˜çº§ç‰¹æ€§" class="headerlink" title="RabbitMQé«˜çº§ç‰¹æ€§"></a>RabbitMQé«˜çº§ç‰¹æ€§</h1><h1 id="1ã€æ¶ˆæ¯å¯é æ€§æŠ•é€’"><a href="#1ã€æ¶ˆæ¯å¯é æ€§æŠ•é€’" class="headerlink" title="1ã€æ¶ˆæ¯å¯é æ€§æŠ•é€’"></a>1ã€æ¶ˆæ¯å¯é æ€§æŠ•é€’</h1><p>åœ¨ä½¿ç”¨ RabbitMQ çš„æ—¶å€™ï¼Œä½œä¸ºæ¶ˆæ¯å‘é€æ–¹å¸Œæœ›æœç»ä»»ä½•æ¶ˆæ¯ä¸¢å¤±æˆ–è€…æŠ•é€’å¤±è´¥åœºæ™¯ã€‚RabbitMQ ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ç§æ–¹å¼ç”¨æ¥æ§åˆ¶æ¶ˆæ¯çš„æŠ•é€’å¯é æ€§æ¨¡å¼ã€‚</p><h5 id="confirm-ç¡®è®¤æ¨¡å¼"><a href="#confirm-ç¡®è®¤æ¨¡å¼" class="headerlink" title="confirm ç¡®è®¤æ¨¡å¼"></a>confirm ç¡®è®¤æ¨¡å¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;!--æ¶ˆæ¯å¯é æ€§æŠ•é€’ï¼ˆç”Ÿäº§ç«¯ï¼‰--&gt;<br>&lt;rabbit:queue id=<span class="hljs-string">&quot;test_queue_confirm&quot;</span> name=<span class="hljs-string">&quot;test_queue_confirm&quot;</span>&gt;&lt;/rabbit:queue&gt;<br>&lt;rabbit:direct-exchange name=<span class="hljs-string">&quot;test_exchange_confirm&quot;</span>&gt;<br>    &lt;rabbit:bindings&gt;<br>        &lt;rabbit:binding queue=<span class="hljs-string">&quot;test_queue_confirm&quot;</span> key=<span class="hljs-string">&quot;confirm&quot;</span>&gt;&lt;/rabbit:binding&gt;<br>    &lt;/rabbit:bindings&gt;<br>&lt;/rabbit:direct-exchange&gt;<br></code></pre></td></tr></table></figure><h5 id="return-é€€å›æ¨¡å¼"><a href="#return-é€€å›æ¨¡å¼" class="headerlink" title="return é€€å›æ¨¡å¼"></a>return é€€å›æ¨¡å¼</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å®šä¹‰rabbitmq connectionFactory --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">rabbit:connection-factory</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.host&#125;&quot;</span></span><br><span class="hljs-tag">                           <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.port&#125;&quot;</span></span><br><span class="hljs-tag">                           <span class="hljs-attr">username</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.username&#125;&quot;</span></span><br><span class="hljs-tag">                           <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.password&#125;&quot;</span></span><br><span class="hljs-tag">                           <span class="hljs-attr">virtual-host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.virtual-host&#125;&quot;</span></span><br><span class="hljs-tag">                           <span class="hljs-attr">publisher-confirms</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">                           <span class="hljs-attr">publisher-returns</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">/&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è®¾ç½®äº¤æ¢æœºå¤„ç†å¤±è´¥æ¶ˆæ¯çš„æ¨¡å¼</span><br>rabbitTemplate.setMandatory(<span class="hljs-literal">true</span>);<br><br><span class="hljs-comment">//2.è®¾ç½®ReturnCallBack</span><br>rabbitTemplate.setReturnCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RabbitTemplate</span>.ReturnCallback() &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> message   æ¶ˆæ¯å¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> replyCode é”™è¯¯ç </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> replyText é”™è¯¯ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> exchange  äº¤æ¢æœº</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> routingKey è·¯ç”±é”®</span><br><span class="hljs-comment">     */</span><br></code></pre></td></tr></table></figure><h5 id="rabbitmq-æ•´ä¸ªæ¶ˆæ¯æŠ•é€’çš„è·¯å¾„ä¸ºï¼š"><a href="#rabbitmq-æ•´ä¸ªæ¶ˆæ¯æŠ•é€’çš„è·¯å¾„ä¸ºï¼š" class="headerlink" title="rabbitmq æ•´ä¸ªæ¶ˆæ¯æŠ•é€’çš„è·¯å¾„ä¸ºï¼š"></a>rabbitmq æ•´ä¸ªæ¶ˆæ¯æŠ•é€’çš„è·¯å¾„ä¸ºï¼š</h5><p><font color='red'>producerâ€”&gt;rabbitmq brokerâ€”&gt;exchangeâ€”&gt;queueâ€”&gt;consumer</font></p><p>æ¶ˆæ¯ä» producer åˆ° exchange åˆ™ä¼šè¿”å›ä¸€ä¸ª confirmCallback ã€‚</p><p>æ¶ˆæ¯ä» exchangeâ€“&gt;queue æŠ•é€’å¤±è´¥åˆ™ä¼šè¿”å›ä¸€ä¸ª returnCallback ã€‚</p><p>æˆ‘ä»¬å°†åˆ©ç”¨è¿™ä¸¤ä¸ª callback æ§åˆ¶æ¶ˆæ¯çš„å¯é æ€§æŠ•é€’</p><h2 id="1-1-æ¶ˆæ¯çš„å¯é æŠ•é€’-å°ç»“"><a href="#1-1-æ¶ˆæ¯çš„å¯é æŠ•é€’-å°ç»“" class="headerlink" title="1.1 æ¶ˆæ¯çš„å¯é æŠ•é€’****å°ç»“"></a><strong>1.1</strong> <strong>æ¶ˆæ¯çš„å¯é æŠ•é€’****å°ç»“</strong></h2><p>Ã˜è®¾ç½®ConnectionFactoryçš„<font color='red'>publisher-confirms&#x3D;â€trueâ€ </font>å¼€å¯ ç¡®è®¤æ¨¡å¼ã€‚</p><p>Ã˜</p><p>Ã˜ä½¿ç”¨<font color='red'>rabbitTemplate.setConfirmCallback</font>è®¾ç½®å›è°ƒå‡½æ•°ã€‚å½“æ¶ˆæ¯å‘é€åˆ°exchangeåå›è°ƒconfirmæ–¹æ³•ã€‚åœ¨æ–¹æ³•ä¸­åˆ¤æ–­ackï¼Œå¦‚æœä¸ºtrueï¼Œåˆ™å‘é€æˆåŠŸï¼Œå¦‚æœä¸ºfalseï¼Œåˆ™å‘é€å¤±è´¥ï¼Œéœ€è¦å¤„ç†ã€‚</p><p>Ã˜</p><p>Ã˜è®¾ç½®ConnectionFactoryçš„<font color='red'>publisher-returns&#x3D;â€trueâ€</font> å¼€å¯ é€€å›æ¨¡å¼ã€‚</p><p>Ã˜</p><p>Ã˜ä½¿ç”¨rabbitTemplate.setReturnCallbackè®¾ç½®é€€å›å‡½æ•°ï¼Œå½“æ¶ˆæ¯ä»exchangeè·¯ç”±åˆ°queueå¤±è´¥åï¼Œå¦‚æœè®¾ç½®äº†rabbitTemplate.setMandatory(true)å‚æ•°ï¼Œåˆ™ä¼šå°†æ¶ˆæ¯é€€å›ç»™producerã€‚å¹¶æ‰§è¡Œå›è°ƒå‡½æ•°returnedMessageã€‚</p><p>Ã˜</p><p>Ã˜åœ¨RabbitMQä¸­ä¹Ÿæä¾›äº†äº‹åŠ¡æœºåˆ¶ï¼Œä½†æ˜¯æ€§èƒ½è¾ƒå·®ï¼Œæ­¤å¤„ä¸åšè®²è§£ã€‚</p><p>ä½¿ç”¨channelä¸‹åˆ—æ–¹æ³•ï¼Œå®Œæˆäº‹åŠ¡æ§åˆ¶ï¼š</p><p>txSelect(), ç”¨äºå°†å½“å‰channelè®¾ç½®æˆtransactionæ¨¡å¼</p><p>txCommit()ï¼Œç”¨äºæäº¤äº‹åŠ¡</p><p>txRollback(),ç”¨äºå›æ»šäº‹åŠ¡</p><h2 id="1-2Consumer-ACK"><a href="#1-2Consumer-ACK" class="headerlink" title="1.2Consumer ACK"></a>1.2Consumer ACK</h2><p>ackæŒ‡Acknowledgeï¼Œç¡®è®¤ã€‚ è¡¨ç¤ºæ¶ˆè´¹ç«¯æ”¶åˆ°æ¶ˆæ¯åçš„ç¡®è®¤æ–¹å¼ã€‚</p><p>æœ‰ä¸‰ç§ç¡®è®¤æ–¹å¼ï¼š</p><p>â€¢<font color='green'>è‡ªåŠ¨ç¡®è®¤ï¼šacknowledge&#x3D;â€noneâ€</font></p><p>â€¢<font color='green'>æ‰‹åŠ¨ç¡®è®¤ï¼šacknowledge&#x3D;â€manualâ€</font></p><p>â€¢æ ¹æ®å¼‚å¸¸æƒ…å†µç¡®è®¤ï¼šacknowledge&#x3D;â€autoâ€ï¼Œï¼ˆè¿™ç§æ–¹å¼ä½¿ç”¨éº»çƒ¦ï¼Œä¸ä½œè®²è§£ï¼‰</p><p>å…¶ä¸­è‡ªåŠ¨ç¡®è®¤æ˜¯æŒ‡ï¼Œå½“æ¶ˆæ¯ä¸€æ—¦è¢«Consumeræ¥æ”¶åˆ°ï¼Œåˆ™è‡ªåŠ¨ç¡®è®¤æ”¶åˆ°ï¼Œå¹¶å°†ç›¸åº” message ä» RabbitMQ çš„æ¶ˆæ¯ç¼“å­˜ä¸­ç§»é™¤ã€‚ä½†æ˜¯åœ¨å®é™…ä¸šåŠ¡å¤„ç†ä¸­ï¼Œå¾ˆå¯èƒ½æ¶ˆæ¯æ¥æ”¶åˆ°ï¼Œä¸šåŠ¡å¤„ç†å‡ºç°å¼‚å¸¸ï¼Œé‚£ä¹ˆè¯¥æ¶ˆæ¯å°±ä¼šä¸¢å¤±ã€‚å¦‚æœè®¾ç½®äº†æ‰‹åŠ¨ç¡®è®¤æ–¹å¼ï¼Œåˆ™éœ€è¦åœ¨ä¸šåŠ¡å¤„ç†æˆåŠŸåï¼Œè°ƒç”¨<font color='red'>channel.basicAck()</font>ï¼Œ<font color='green'>æ‰‹åŠ¨ç­¾æ”¶</font>ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ï¼Œåˆ™è°ƒç”¨<font color='red'>channel.basicNack()</font>æ–¹æ³•ï¼Œè®©å…¶<font color='green'>è‡ªåŠ¨é‡æ–°å‘é€</font>æ¶ˆæ¯</p><h2 id="1-2-Consumer-Ack-å°ç»“"><a href="#1-2-Consumer-Ack-å°ç»“" class="headerlink" title="1.2 Consumer Ack å°ç»“"></a><strong>1.2</strong> <strong>Consumer Ack å°ç»“</strong></h2><p>Ã˜åœ¨rabbit:listener-containeræ ‡ç­¾ä¸­è®¾ç½®acknowledgeå±æ€§ï¼Œè®¾ç½®ackæ–¹å¼ noneï¼šè‡ªåŠ¨ç¡®è®¤ï¼Œmanualï¼šæ‰‹åŠ¨ç¡®è®¤</p><p>Ã˜</p><p>Ã˜å¦‚æœåœ¨æ¶ˆè´¹ç«¯æ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œåˆ™è°ƒç”¨channel.basicAck(deliveryTag,false);æ–¹æ³•ç¡®è®¤ç­¾æ”¶æ¶ˆæ¯</p><p>Ã˜</p><p>Ã˜å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œåˆ™åœ¨catchä¸­è°ƒç”¨ basicNackæˆ– basicRejectï¼Œæ‹’ç»æ¶ˆæ¯ï¼Œè®©MQé‡æ–°å‘é€æ¶ˆæ¯ã€‚</p><h2 id="æ¶ˆæ¯å¯é æ€§æ€»ç»“"><a href="#æ¶ˆæ¯å¯é æ€§æ€»ç»“" class="headerlink" title="æ¶ˆæ¯å¯é æ€§æ€»ç»“"></a>æ¶ˆæ¯å¯é æ€§æ€»ç»“</h2><p>1.æŒä¹…åŒ–</p><p>â€¢exchangeè¦æŒä¹…åŒ–</p><p>â€¢queueè¦æŒä¹…åŒ–</p><p>â€¢messageè¦æŒä¹…åŒ–</p><p>2.ç”Ÿäº§æ–¹ç¡®è®¤Confirm</p><p>3.æ¶ˆè´¹æ–¹ç¡®è®¤Ack</p><p>4.Brokeré«˜å¯ç”¨</p><h2 id="1-3-æ¶ˆè´¹ç«¯é™æµ"><a href="#1-3-æ¶ˆè´¹ç«¯é™æµ" class="headerlink" title="1.3 æ¶ˆè´¹ç«¯é™æµ"></a>1.3 æ¶ˆè´¹ç«¯é™æµ</h2><p><img src="https://pic.imgdb.cn/item/63737fcf16f2c2beb18e7972.png" alt="image-20221115194433899"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å®šä¹‰ç›‘å¬å™¨å®¹å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener-container</span> <span class="hljs-attr">connection-factory</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span> <span class="hljs-attr">acknowledge</span>=<span class="hljs-string">&quot;manual&quot;</span> <span class="hljs-attr">prefetch</span>=<span class="hljs-string">&quot;1&quot;</span> &gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨<a href="rabbit:listener-container">rabbit:listener-container</a> ä¸­é…ç½® prefetchå±æ€§è®¾ç½®æ¶ˆè´¹ç«¯ä¸€æ¬¡æ‹‰å–å¤šå°‘æ¶ˆæ¯</p><p>æ¶ˆè´¹ç«¯çš„ç¡®è®¤æ¨¡å¼ä¸€å®šä¸ºæ‰‹åŠ¨ç¡®è®¤ã€‚acknowledge&#x3D;â€manualâ€</p><h2 id="1-4-TTL"><a href="#1-4-TTL" class="headerlink" title="1.4 TTL"></a>1.4 TTL</h2><p>TTL å…¨ç§° Time To Liveï¼ˆå­˜æ´»æ—¶é—´&#x2F;è¿‡æœŸæ—¶é—´ï¼‰ã€‚</p><p>å½“æ¶ˆæ¯åˆ°è¾¾å­˜æ´»æ—¶é—´åï¼Œè¿˜æ²¡æœ‰è¢«æ¶ˆè´¹ï¼Œä¼šè¢«è‡ªåŠ¨æ¸…é™¤ã€‚</p><p>RabbitMQå¯ä»¥å¯¹æ¶ˆæ¯è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä¹Ÿå¯ä»¥å¯¹æ•´ä¸ªé˜Ÿåˆ—ï¼ˆQueueï¼‰è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</p><p><img src="https://pic.imgdb.cn/item/63737ffd16f2c2beb18f5a54.png" alt="image-20221115200018829"></p><p>æ³¨æ„</p><p>x-message-ttlé»˜è®¤ä¸ºStringï¼Œéœ€è¦æŒ‡å®šç±»å‹value-type</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue-arguments</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--x-message-ttlæŒ‡é˜Ÿåˆ—çš„è¿‡æœŸæ—¶é—´--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;x-message-ttl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;100000&quot;</span> <span class="hljs-attr">value-type</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:queue-arguments</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ğŸ’‚â€â™‚ï¸TTL-å°ç»“"><a href="#ğŸ’‚â€â™‚ï¸TTL-å°ç»“" class="headerlink" title="ğŸ’‚â€â™‚ï¸TTL å°ç»“"></a><strong>ğŸ’‚â€â™‚ï¸TTL</strong> <strong>å°ç»“</strong></h2><p>è®¾ç½®é˜Ÿåˆ—è¿‡æœŸæ—¶é—´ä½¿ç”¨å‚æ•°ï¼šx-message-ttlï¼Œå•ä½ï¼šms(æ¯«ç§’)ï¼Œä¼šå¯¹æ•´ä¸ªé˜Ÿåˆ—æ¶ˆæ¯ç»Ÿä¸€è¿‡æœŸã€‚</p><p>è®¾ç½®æ¶ˆæ¯è¿‡æœŸæ—¶é—´ä½¿ç”¨å‚æ•°ï¼šexpirationã€‚å•ä½ï¼šms(æ¯«ç§’)ï¼Œå½“è¯¥æ¶ˆæ¯åœ¨é˜Ÿåˆ—å¤´éƒ¨æ—¶ï¼ˆæ¶ˆè´¹æ—¶ï¼‰ï¼Œä¼šå•ç‹¬åˆ¤æ–­è¿™ä¸€æ¶ˆæ¯æ˜¯å¦è¿‡æœŸã€‚</p><p>å¦‚æœä¸¤è€…éƒ½è¿›è¡Œäº†è®¾ç½®ï¼Œä»¥æ—¶é—´çŸ­çš„ä¸ºå‡†ã€‚</p><h2 id="1-5-æ­»ä¿¡é˜Ÿåˆ—"><a href="#1-5-æ­»ä¿¡é˜Ÿåˆ—" class="headerlink" title="1.5 æ­»ä¿¡é˜Ÿåˆ—"></a>1.5 æ­»ä¿¡é˜Ÿåˆ—</h2><p>æ­»ä¿¡é˜Ÿåˆ—ï¼Œè‹±æ–‡ç¼©å†™ï¼šDLX ã€‚Dead Letter Exchangeï¼ˆæ­»ä¿¡äº¤æ¢æœºï¼‰ï¼Œå½“æ¶ˆæ¯æˆä¸ºDead messageåï¼Œå¯ä»¥è¢«é‡æ–°å‘é€åˆ°å¦ä¸€ä¸ªäº¤æ¢æœºï¼Œè¿™ä¸ªäº¤æ¢æœºå°±æ˜¯DLXã€‚</p><p><img src="https://pic.imgdb.cn/item/6373800e16f2c2beb18f7f37.png" alt="image-20221115200035155"></p><p><strong>æ¶ˆæ¯æˆä¸ºæ­»ä¿¡çš„ä¸‰ç§æƒ…å†µï¼š</strong>(é¢è¯•)</p><ol><li><p>é˜Ÿåˆ—æ¶ˆæ¯é•¿åº¦åˆ°è¾¾é™åˆ¶ï¼›</p></li><li><p>æ¶ˆè´¹è€…æ‹’æ¥æ¶ˆè´¹æ¶ˆæ¯ï¼ŒbasicNack&#x2F;basicReject,å¹¶ä¸”ä¸æŠŠæ¶ˆæ¯é‡æ–°æ”¾å…¥åŸç›®æ ‡é˜Ÿåˆ—,requeue&#x3D;falseï¼›</p></li><li><p>åŸé˜Ÿåˆ—å­˜åœ¨æ¶ˆæ¯è¿‡æœŸè®¾ç½®ï¼Œæ¶ˆæ¯åˆ°è¾¾è¶…æ—¶æ—¶é—´æœªè¢«æ¶ˆè´¹ï¼›</p></li></ol><p><strong>é˜Ÿåˆ—ç»‘å®šæ­»ä¿¡äº¤æ¢æœº(ä¸æ™®é€šä¸€æ ·çš„)ï¼š</strong></p><p>ç»™é˜Ÿåˆ—è®¾ç½®å‚æ•°ï¼š <font color='cornflowerblue'>x-dead-letter-exchange</font> å’Œ<font color='cornflowerblue'> x-dead-letter-routing-key</font></p><p><img src="https://pic.imgdb.cn/item/6373801b16f2c2beb18f99c6.png" alt="image-20221115200048755"></p><p>æ­»ä¿¡é˜Ÿåˆ—è®¾ç½®æ­¥éª¤ï¼š<br>    1.  å£°æ˜æ­£å¸¸çš„é˜Ÿåˆ—(test_queue_dlx)å’Œäº¤æ¢æœº(test_exchange_dlx)<br>        2. å£°æ˜æ­»ä¿¡é˜Ÿåˆ—(queue_dlx)å’Œæ­»ä¿¡äº¤æ¢æœº(exchange_dlx)</p><pre><code class="hljs">        3. æ­£å¸¸é˜Ÿåˆ—ç»‘å®šæ­»ä¿¡äº¤æ¢æœº        è®¾ç½®ä¸¤ä¸ªå‚æ•°ï¼š        * x-dead-letter-exchangeï¼šæ­»ä¿¡äº¤æ¢æœºåç§°        * x-dead-letter-routing-keyï¼šå‘é€ç»™æ­»ä¿¡äº¤æ¢æœºçš„routingkey</code></pre><h2 id="æ­»ä¿¡é˜Ÿåˆ—å°ç»“"><a href="#æ­»ä¿¡é˜Ÿåˆ—å°ç»“" class="headerlink" title="æ­»ä¿¡é˜Ÿåˆ—å°ç»“"></a><strong>æ­»ä¿¡é˜Ÿåˆ—å°ç»“</strong></h2><ol><li><p>æ­»ä¿¡äº¤æ¢æœºå’Œæ­»ä¿¡é˜Ÿåˆ—å’Œæ™®é€šçš„æ²¡æœ‰åŒºåˆ«</p></li><li><p>å½“æ¶ˆæ¯æˆä¸ºæ­»ä¿¡åï¼Œå¦‚æœè¯¥é˜Ÿåˆ—ç»‘å®šäº†æ­»ä¿¡äº¤æ¢æœºï¼Œåˆ™æ¶ˆæ¯ä¼šè¢«æ­»ä¿¡äº¤æ¢æœºé‡æ–°è·¯ç”±åˆ°æ­»ä¿¡é˜Ÿåˆ—</p></li><li><p>æ¶ˆæ¯æˆä¸ºæ­»ä¿¡çš„ä¸‰ç§æƒ…å†µï¼š</p><ol><li><p>é˜Ÿåˆ—æ¶ˆæ¯é•¿åº¦åˆ°è¾¾é™åˆ¶ï¼›</p></li><li><p>æ¶ˆè´¹è€…æ‹’æ¥æ¶ˆè´¹æ¶ˆæ¯ï¼Œå¹¶ä¸”ä¸é‡å›é˜Ÿåˆ—ï¼›</p></li><li><p>åŸé˜Ÿåˆ—å­˜åœ¨æ¶ˆæ¯è¿‡æœŸè®¾ç½®ï¼Œæ¶ˆæ¯åˆ°è¾¾è¶…æ—¶æ—¶é—´æœªè¢«æ¶ˆè´¹ï¼›</p></li></ol></li></ol><h2 id="1-6-å»¶è¿Ÿé˜Ÿåˆ—"><a href="#1-6-å»¶è¿Ÿé˜Ÿåˆ—" class="headerlink" title="1.6 å»¶è¿Ÿé˜Ÿåˆ—"></a>1.6 å»¶è¿Ÿé˜Ÿåˆ—</h2><p>å»¶è¿Ÿé˜Ÿåˆ—ï¼Œå³æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—åä¸ä¼šç«‹å³è¢«æ¶ˆè´¹ï¼Œåªæœ‰åˆ°è¾¾æŒ‡å®šæ—¶é—´åï¼Œæ‰ä¼šè¢«æ¶ˆè´¹ã€‚</p><p>éœ€æ±‚ï¼š</p><ol><li><p>ä¸‹å•åï¼Œ30åˆ†é’Ÿæœªæ”¯ä»˜ï¼Œå–æ¶ˆè®¢å•ï¼Œå›æ»šåº“å­˜ã€‚</p></li><li><p>æ–°ç”¨æˆ·æ³¨å†ŒæˆåŠŸ7å¤©åï¼Œå‘é€çŸ­ä¿¡é—®å€™ã€‚</p></li></ol><p>å®ç°æ–¹å¼ï¼š</p><ol><li><p>å®šæ—¶å™¨</p></li><li><p>å»¶è¿Ÿé˜Ÿåˆ—</p></li></ol><p><img src="https://pic.imgdb.cn/item/6373802d16f2c2beb18fd57b.png" alt="image-20221115200105987"></p><p>å¾ˆå¯æƒœï¼Œåœ¨RabbitMQä¸­å¹¶æœªæä¾›å»¶è¿Ÿé˜Ÿåˆ—åŠŸèƒ½ã€‚</p><p>ä½†æ˜¯å¯ä»¥ä½¿ç”¨ï¼šTTL+æ­»ä¿¡é˜Ÿåˆ— ç»„åˆå®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„æ•ˆæœã€‚</p><p><img src="https://pic.imgdb.cn/item/6373803e16f2c2beb19000b4.png" alt="image-20221115200123062"></p><h2 id="å»¶è¿Ÿé˜Ÿåˆ—å°ç»“"><a href="#å»¶è¿Ÿé˜Ÿåˆ—å°ç»“" class="headerlink" title="å»¶è¿Ÿé˜Ÿåˆ—å°ç»“"></a><strong>å»¶è¿Ÿé˜Ÿåˆ—å°ç»“</strong></h2><ol><li><p>å»¶è¿Ÿé˜Ÿåˆ— æŒ‡æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—åï¼Œå¯ä»¥è¢«å»¶è¿Ÿä¸€å®šæ—¶é—´ï¼Œå†è¿›è¡Œæ¶ˆè´¹ã€‚</p></li><li><p>RabbitMQæ²¡æœ‰æä¾›å»¶è¿Ÿé˜Ÿåˆ—åŠŸèƒ½ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ ï¼š TTL + DLX æ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—æ•ˆæœã€‚</p></li></ol><h2 id="1-7-æ—¥å¿—ä¸ç›‘æ§"><a href="#1-7-æ—¥å¿—ä¸ç›‘æ§" class="headerlink" title="1.7 æ—¥å¿—ä¸ç›‘æ§"></a>1.7 æ—¥å¿—ä¸ç›‘æ§</h2><h3 id="1-7-1-RabbitMQæ—¥å¿—"><a href="#1-7-1-RabbitMQæ—¥å¿—" class="headerlink" title="1.7.1 RabbitMQæ—¥å¿—"></a><strong>1.7.1 RabbitMQæ—¥å¿—</strong></h3><p>RabbitMQé»˜è®¤æ—¥å¿—å­˜æ”¾è·¯å¾„ï¼š &#x2F;var&#x2F;log&#x2F;rabbitmq&#x2F;<a href="mailto:&#x72;&#97;&#98;&#98;&#105;&#x74;&#x40;&#x78;&#x78;&#120;&#x2e;&#x6c;&#111;&#x67;">&#x72;&#97;&#98;&#98;&#105;&#x74;&#x40;&#x78;&#x78;&#120;&#x2e;&#x6c;&#111;&#x67;</a></p><p>æ—¥å¿—åŒ…å«äº†RabbitMQçš„ç‰ˆæœ¬å·ã€Erlangçš„ç‰ˆæœ¬å·ã€RabbitMQæœåŠ¡èŠ‚ç‚¹åç§°ã€cookieçš„hashå€¼ã€RabbitMQé…ç½®æ–‡ä»¶åœ°å€ã€å†…å­˜é™åˆ¶ã€ç£ç›˜é™åˆ¶ã€é»˜è®¤è´¦æˆ·guestçš„åˆ›å»ºä»¥åŠæƒé™é…ç½®ç­‰ç­‰ã€‚</p><h3 id="1-7-2-webç®¡æ§å°ç›‘æ§"><a href="#1-7-2-webç®¡æ§å°ç›‘æ§" class="headerlink" title="1.7.2 webç®¡æ§å°ç›‘æ§"></a>1.7.2 webç®¡æ§å°ç›‘æ§</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rabbitmqctl</span> list_vhosts          æŸ¥çœ‹äº¤æ¢æœº<br></code></pre></td></tr></table></figure><h3 id="1-7-3-rabbitmgctlç®¡ç†å’Œç›‘æ§"><a href="#1-7-3-rabbitmgctlç®¡ç†å’Œç›‘æ§" class="headerlink" title="1.7.3 rabbitmgctlç®¡ç†å’Œç›‘æ§"></a>1.7.3 rabbitmgctlç®¡ç†å’Œç›‘æ§</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs applescript">æŸ¥çœ‹é˜Ÿåˆ—<br><span class="hljs-comment"># rabbitmgctl list queues</span><br>æŸ¥çœ‹exchanges<br><span class="hljs-comment">#f rabbitmgctl list exchanges</span><br>æŸ¥çœ‹ç”¨æˆ·<br><span class="hljs-comment"># rabbitmgctl list users</span><br>æŸ¥çœ‹è¿æ¥<br><span class="hljs-comment"># rabbitmgctl list connections</span><br>æŸ¥çœ‹ç¯å¢ƒå˜é‡<br><span class="hljs-comment"># rabbitmgctl environment</span><br>æŸ¥çœ‹æœªè¢«ç¡®è®¤çš„é˜Ÿåˆ—<br><span class="hljs-comment"># rabbitmgctl list queues name messages unacknowledged</span><br>æŸ¥çœ‹å•ä¸ªé˜Ÿåˆ—çš„å†…å­˜ä½¿ç”¨<br><span class="hljs-comment"># rabbitmgctl list queues name memory</span><br>æŸ¥çœ‹å‡†å¤‡å°±ç»ªçš„é˜Ÿåˆ—<br><span class="hljs-comment"># rabbitmgctl list queues name messages ready</span><br>æŸ¥çœ‹æ¶ˆè´¹è€…ä¿¡æ¯<br><span class="hljs-comment">#f rabbitmgctl list consumers</span><br></code></pre></td></tr></table></figure><h2 id="1-8-æ¶ˆæ¯è¿½è¸ªFirehose"><a href="#1-8-æ¶ˆæ¯è¿½è¸ªFirehose" class="headerlink" title="1.8 æ¶ˆæ¯è¿½è¸ªFirehose"></a><strong>1.8</strong> æ¶ˆæ¯è¿½è¸ªFirehose</h2><p>åœ¨ä½¿ç”¨ä»»ä½•æ¶ˆæ¯ä¸­é—´ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œéš¾å…ä¼šå‡ºç°æŸæ¡æ¶ˆæ¯å¼‚å¸¸ä¸¢å¤±çš„æƒ…å†µã€‚å¯¹äºRabbitMQè€Œè¨€ï¼Œå¯èƒ½æ˜¯å› ä¸ºç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…ä¸RabbitMQæ–­å¼€äº†è¿æ¥ï¼Œè€Œå®ƒä»¬ä¸RabbitMQåˆé‡‡ç”¨äº†ä¸åŒçš„ç¡®è®¤æœºåˆ¶;ä¹Ÿæœ‰å¯èƒ½æ˜¯å› ä¸ºäº¤æ¢å™¨ä¸é˜Ÿåˆ—ä¹‹é—´ä¸åŒçš„è½¬å‘ç­–ç•¥;ç”šè‡³æ˜¯äº¤æ¢å™¨å¹¶æ²¡æœ‰ä¸ä»»ä½•é˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œç”Ÿäº§è€…åˆä¸æ„ŸçŸ¥æˆ–è€…æ²¡æœ‰é‡‡å–ç›¸åº”çš„æªæ–½ï¼Œå¦å¤–RabbitMQæœ¬èº«çš„é›†ç¾¤ç­–ç•¥ä¹Ÿå¯èƒ½å¯¼è‡´æ¶ˆæ¯çš„ä¸¢å¤±ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦æœ‰ä¸€ä¸ªè¾ƒå¥½çš„æœºåˆ¶è·Ÿè¸ªè®°å½•æ¶ˆæ¯çš„æŠ•é€’è¿‡ç¨‹ï¼Œä»¥æ­¤ååŠ©å¼€å‘å’Œè¿ç»´äººå‘˜è¿›è¡Œé—®é¢˜çš„å®šä½ã€‚<br>åœ¨RabbitMQä¸­å¯ä»¥ä½¿ç”¨Firehoseå’Œrabbitmg tracingæ’ä»¶åŠŸèƒ½æ¥å®ç°æ¶ˆæ¯è¿½è¸ªã€‚</p><p>firehoseçš„æœºåˆ¶æ˜¯å°†ç”Ÿäº§è€…æŠ•é€’ç»™rabbitmqçš„æ¶ˆæ¯ï¼ŒrabbitmqæŠ•é€’ç»™æ¶ˆè´¹è€…çš„æ¶ˆæ¯æŒ‰ç…§æŒ‡å®šçš„æ ¼å¼å‘é€åˆ°é»˜è®¤çš„exchangeä¸Šã€‚è¿™ä¸ªé»˜è®¤çš„exchangeçš„åç§°ä¸ºamq.rabbitmq.traceï¼Œå®ƒæ˜¯ä¸€ä¸ªtopicç±»å‹çš„exchangeã€‚å‘é€åˆ°è¿™ä¸ªexchangeä¸Šçš„æ¶ˆæ¯çš„routing keyä¸º publish.exchangename å’Œ deliver.queuenameã€‚å…¶ä¸­exchangenameå’Œqueuenameä¸ºå®é™…exchangeå’Œqueueçš„åç§°ï¼Œåˆ†åˆ«å¯¹åº”ç”Ÿäº§è€…æŠ•é€’åˆ°exchangeçš„æ¶ˆæ¯ï¼Œå’Œæ¶ˆè´¹è€…ä»queueä¸Šè·å–çš„æ¶ˆæ¯ã€‚</p><h2 id="1-8-æ¶ˆæ¯è¿½è¸ª-rabbitmq-tracing"><a href="#1-8-æ¶ˆæ¯è¿½è¸ª-rabbitmq-tracing" class="headerlink" title="1.8 æ¶ˆæ¯è¿½è¸ª-rabbitmq tracing"></a>1.8 æ¶ˆæ¯è¿½è¸ª-rabbitmq tracing</h2><p>æ³¨æ„ï¼šæ‰“å¼€ trace ä¼šå½±å“æ¶ˆæ¯å†™å…¥åŠŸèƒ½ï¼Œé€‚å½“æ‰“å¼€ållè¯·å…³é—­ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rabbitmqctl</span> trace_onï¼šå¼€å¯Firehoseå‘½ä»¤<br><br>rabbitmqctl trace_offï¼šå…³é—­Firehoseå‘½ä»¤<br></code></pre></td></tr></table></figure><h3 id="1-8-1-æ¶ˆæ¯è¿½è¸ªrabbitmq-tracing"><a href="#1-8-1-æ¶ˆæ¯è¿½è¸ªrabbitmq-tracing" class="headerlink" title="1.8.1 æ¶ˆæ¯è¿½è¸ªrabbitmq_tracing"></a>1.8.1 æ¶ˆæ¯è¿½è¸ªrabbitmq_tracing</h3><p>rabbitmq_tracingå’ŒFirehoseåœ¨å®ç°ä¸Šå¦‚å‡ºä¸€è¾™ï¼Œåªä¸è¿‡rabbitmq_tracingçš„æ–¹å¼æ¯”Firehoseå¤šäº†ä¸€å±‚GUIçš„åŒ…è£…ï¼Œæ›´å®¹æ˜“ä½¿ç”¨å’Œç®¡ç†ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">å¯ç”¨æ’ä»¶ï¼šrabbitmq-plugins <span class="hljs-built_in">enable</span> rabbitmq_tracing<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">å…³é—­æ’ä»¶ ï¼šrabbitmq-plugins <span class="hljs-built_in">disable</span> rabbitmq_tracing<br></code></pre></td></tr></table></figure><h1 id="2-RabbitMQ-åº”ç”¨é—®é¢˜"><a href="#2-RabbitMQ-åº”ç”¨é—®é¢˜" class="headerlink" title="2. RabbitMQ  åº”ç”¨é—®é¢˜"></a><strong>2.</strong> <strong>RabbitMQ</strong>  åº”ç”¨é—®é¢˜</h1><h2 id="2-1-æ¶ˆæ¯å¯é æ€§ä¿éšœ"><a href="#2-1-æ¶ˆæ¯å¯é æ€§ä¿éšœ" class="headerlink" title="2.1 æ¶ˆæ¯å¯é æ€§ä¿éšœ"></a>2.1 æ¶ˆæ¯å¯é æ€§ä¿éšœ</h2><p>éœ€æ±‚ï¼š</p><p> 100%ç¡®ä¿æ¶ˆæ¯å‘é€æˆåŠŸ</p><p><img src="https://pic.imgdb.cn/item/6373807616f2c2beb1904c5f.png" alt="image-20221115200218855"></p><h2 id="2-2-æ¶ˆæ¯å¹‚ç­‰æ€§å¤„ç†â€“ä¹è§‚é”æœºåˆ¶"><a href="#2-2-æ¶ˆæ¯å¹‚ç­‰æ€§å¤„ç†â€“ä¹è§‚é”æœºåˆ¶" class="headerlink" title="2.2  æ¶ˆæ¯å¹‚ç­‰æ€§å¤„ç†â€“ä¹è§‚é”æœºåˆ¶"></a>2.2  æ¶ˆæ¯å¹‚ç­‰æ€§å¤„ç†â€“ä¹è§‚é”æœºåˆ¶</h2><p>å¹‚ç­‰æ€§æŒ‡ä¸€æ¬¡å’Œå¤šæ¬¡è¯·æ±‚æŸä¸€ä¸ªèµ„æºï¼Œå¯¹äºèµ„æºæœ¬èº«åº”è¯¥å…·æœ‰åŒæ ·çš„ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶ä»»æ„å¤šæ¬¡æ‰§è¡Œå¯¹èµ„æºæœ¬èº«æ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚<br>åœ¨MQä¸­æŒ‡ï¼Œæ¶ˆè´¹å¤šæ¡ç›¸åŒçš„æ¶ˆæ¯ï¼Œå¾—åˆ°ä¸æ¶ˆè´¹è¯¥æ¶ˆæ¯ä¸€æ¬¡ç›¸åŒçš„ç»“æœ,<img src="https://pic.imgdb.cn/item/6373809e16f2c2beb19081b1.png" alt="image-20221115200259621"></p>]]></content>
    
    
    <categories>
      
      <category>RabbitMQğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RabbitMQ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RabbitMQå®‰è£…è¯´æ˜æ–‡æ¡£</title>
    <link href="/Hexo/2022/04/12/RabbitMQ%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/"/>
    <url>/Hexo/2022/04/12/RabbitMQ%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/</url>
    
    <content type="html"><![CDATA[<h3 id="æ³¨æ„-è¯·ä½¿ç”¨èµ„æ–™é‡Œæä¾›çš„CentOS-7-x86-64-DVD-1810-iso-å®‰è£…è™šæ‹Ÿæœº"><a href="#æ³¨æ„-è¯·ä½¿ç”¨èµ„æ–™é‡Œæä¾›çš„CentOS-7-x86-64-DVD-1810-iso-å®‰è£…è™šæ‹Ÿæœº" class="headerlink" title="æ³¨æ„: è¯·ä½¿ç”¨èµ„æ–™é‡Œæä¾›çš„CentOS-7-x86_64-DVD-1810.iso å®‰è£…è™šæ‹Ÿæœº."></a>æ³¨æ„: è¯·ä½¿ç”¨èµ„æ–™é‡Œæä¾›çš„CentOS-7-x86_64-DVD-1810.iso å®‰è£…è™šæ‹Ÿæœº.</h3><h2 id="1-å®‰è£…ä¾èµ–ç¯å¢ƒ"><a href="#1-å®‰è£…ä¾èµ–ç¯å¢ƒ" class="headerlink" title="1. å®‰è£…ä¾èµ–ç¯å¢ƒ"></a>1. å®‰è£…ä¾èµ–ç¯å¢ƒ</h2><p>åœ¨çº¿å®‰è£…ä¾èµ–ç¯å¢ƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum install build-essential openssl openssl-devel unixODBC unixODBC-devel make gcc gcc-c++ kernel-devel m4 ncurses-devel tk tc xz<br><br></code></pre></td></tr></table></figure><h2 id="2-å®‰è£…Erlang"><a href="#2-å®‰è£…Erlang" class="headerlink" title="2. å®‰è£…Erlang"></a>2. å®‰è£…Erlang</h2><p>ä¸Šä¼ </p><p>erlang-18.3-1.el7.centos.x86_64.rpm<br>socat-1.7.3.2-5.el7.lux.x86_64.rpm<br>rabbitmq-server-3.6.5-1.noarch.rpm</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh"><br><span class="hljs-comment"># å®‰è£…</span><br>rpm -ivh erlang-18.3-1.el7.centos.x86_64.rpm<br><br></code></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯</p><p><img src="https://pic.imgdb.cn/item/63736d2e16f2c2beb17201bb.png" alt="1565526174751"></p><p>è¯´æ˜gblic ç‰ˆæœ¬å¤ªä½ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å½“å‰æœºå™¨çš„gblic ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">strings /lib64/libc.so.6 | grep GLIBC<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/63736d3016f2c2beb1720505.png" alt="1565526264426"></p><p>å½“å‰æœ€é«˜ç‰ˆæœ¬2.12ï¼Œéœ€è¦2.15.æ‰€ä»¥éœ€è¦å‡çº§glibc</p><ul><li><p>ä½¿ç”¨yumæ›´æ–°å®‰è£…ä¾èµ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make -y<br></code></pre></td></tr></table></figure></li><li><p>ä¸‹è½½rpmåŒ…</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-utils-2.17-55.el6.x86_64.rpm &amp;<br>wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-static-2.17-55.el6.x86_64.rpm &amp;<br>wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-2.17-55.el6.x86_64.rpm &amp;<br>wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-common-2.17-55.el6.x86_64.rpm &amp;<br>wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-devel-2.17-55.el6.x86_64.rpm &amp;<br>wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-headers-2.17-55.el6.x86_64.rpm &amp;<br>wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/nscd-2.17-55.el6.x86_64.rpm &amp;<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…rpmåŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo rpm -Uvh *-2.17-55.el6.x86_64.rpm --force --nodeps<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…å®Œæ¯•åå†æŸ¥çœ‹glibcç‰ˆæœ¬,å‘ç°glibcç‰ˆæœ¬å·²ç»åˆ°2.17äº†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">strings /lib64/libc.so.6 | grep GLIBC<br></code></pre></td></tr></table></figure></li></ul><p><img src="https://pic.imgdb.cn/item/63736d3316f2c2beb1720832.png" alt="1565528746057"></p><h2 id="3-å®‰è£…RabbitMQ"><a href="#3-å®‰è£…RabbitMQ" class="headerlink" title="3. å®‰è£…RabbitMQ"></a>3. å®‰è£…RabbitMQ</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># å®‰è£…</span><br>rpm -ivh socat-1.7.3.2-5.el7.lux.x86_64.rpm<br><br><span class="hljs-comment"># å®‰è£…</span><br>rpm -ivh rabbitmq-server-3.6.5-1.noarch.rpm<br><br></code></pre></td></tr></table></figure><h2 id="4-å¼€å¯ç®¡ç†ç•Œé¢åŠé…ç½®"><a href="#4-å¼€å¯ç®¡ç†ç•Œé¢åŠé…ç½®" class="headerlink" title="4. å¼€å¯ç®¡ç†ç•Œé¢åŠé…ç½®"></a>4. å¼€å¯ç®¡ç†ç•Œé¢åŠé…ç½®</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># å¼€å¯ç®¡ç†ç•Œé¢</span><br>rabbitmq-plugins <span class="hljs-built_in">enable</span> rabbitmq_management<br><span class="hljs-comment"># ä¿®æ”¹é»˜è®¤é…ç½®ä¿¡æ¯</span><br>vim /usr/lib/rabbitmq/lib/rabbitmq_server-3.6.5/ebin/rabbit.app <br><span class="hljs-comment"># æ¯”å¦‚ä¿®æ”¹å¯†ç ã€é…ç½®ç­‰ç­‰ï¼Œä¾‹å¦‚ï¼šloopback_users ä¸­çš„ &lt;&lt;&quot;guest&quot;&gt;&gt;,åªä¿ç•™guest</span><br><br></code></pre></td></tr></table></figure><h2 id="5-å¯åŠ¨"><a href="#5-å¯åŠ¨" class="headerlink" title="5. å¯åŠ¨"></a>5. å¯åŠ¨</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh"><br>service rabbitmq-server start <span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span><br>service rabbitmq-server stop <span class="hljs-comment"># åœæ­¢æœåŠ¡</span><br>service rabbitmq-server restart <span class="hljs-comment"># é‡å¯æœåŠ¡</span><br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®é…ç½®æ–‡ä»¶</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /usr/share/doc/rabbitmq-server-3.6.5/<br><br>cp rabbitmq.config.example /etc/rabbitmq/rabbitmq.config<br><br></code></pre></td></tr></table></figure><h2 id="6-é…ç½®è™šæ‹Ÿä¸»æœºåŠç”¨æˆ·"><a href="#6-é…ç½®è™šæ‹Ÿä¸»æœºåŠç”¨æˆ·" class="headerlink" title="6. é…ç½®è™šæ‹Ÿä¸»æœºåŠç”¨æˆ·"></a>6. é…ç½®è™šæ‹Ÿä¸»æœºåŠç”¨æˆ·</h2><h3 id="6-1-ç”¨æˆ·è§’è‰²"><a href="#6-1-ç”¨æˆ·è§’è‰²" class="headerlink" title="6.1. ç”¨æˆ·è§’è‰²"></a>6.1. ç”¨æˆ·è§’è‰²</h3><p>RabbitMQåœ¨å®‰è£…å¥½åï¼Œå¯ä»¥è®¿é—®<code>http://ipåœ°å€:15672</code> ï¼›å…¶è‡ªå¸¦äº†guest&#x2F;guestçš„ç”¨æˆ·åå’Œå¯†ç ï¼›å¦‚æœéœ€è¦åˆ›å»ºè‡ªå®šä¹‰ç”¨æˆ·ï¼›é‚£ä¹ˆä¹Ÿå¯ä»¥ç™»å½•ç®¡ç†ç•Œé¢åï¼Œå¦‚ä¸‹æ“ä½œï¼š</p><p><img src="https://pic.imgdb.cn/item/63736d3516f2c2beb1720b2e.png" alt="1565098043833"> </p><p><img src="https://pic.imgdb.cn/item/63736d3716f2c2beb1720d03.png" alt="1565098315375"></p><p><strong>è§’è‰²è¯´æ˜</strong>ï¼š</p><p>1ã€ è¶…çº§ç®¡ç†å‘˜(administrator)</p><p>å¯ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œå¯æŸ¥çœ‹æ‰€æœ‰çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ç”¨æˆ·ï¼Œç­–ç•¥(policy)è¿›è¡Œæ“ä½œã€‚</p><p>2ã€ ç›‘æ§è€…(monitoring)</p><p>å¯ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼ŒåŒæ—¶å¯ä»¥æŸ¥çœ‹rabbitmqèŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯(è¿›ç¨‹æ•°ï¼Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œç£ç›˜ä½¿ç”¨æƒ…å†µç­‰)</p><p>3ã€ ç­–ç•¥åˆ¶å®šè€…(policymaker)</p><p>å¯ç™»é™†ç®¡ç†æ§åˆ¶å°, åŒæ—¶å¯ä»¥å¯¹policyè¿›è¡Œç®¡ç†ã€‚ä½†æ— æ³•æŸ¥çœ‹èŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯(ä¸Šå›¾çº¢æ¡†æ ‡è¯†çš„éƒ¨åˆ†)ã€‚</p><p>4ã€ æ™®é€šç®¡ç†è€…(management)</p><p>ä»…å¯ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œæ— æ³•çœ‹åˆ°èŠ‚ç‚¹ä¿¡æ¯ï¼Œä¹Ÿæ— æ³•å¯¹ç­–ç•¥è¿›è¡Œç®¡ç†ã€‚</p><p>5ã€ å…¶ä»–</p><p>æ— æ³•ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œé€šå¸¸å°±æ˜¯æ™®é€šçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚</p><h3 id="6-2-Virtual-Hostsé…ç½®"><a href="#6-2-Virtual-Hostsé…ç½®" class="headerlink" title="6.2. Virtual Hostsé…ç½®"></a>6.2. Virtual Hostsé…ç½®</h3><p>åƒmysqlæ‹¥æœ‰æ•°æ®åº“çš„æ¦‚å¿µå¹¶ä¸”å¯ä»¥æŒ‡å®šç”¨æˆ·å¯¹åº“å’Œè¡¨ç­‰æ“ä½œçš„æƒé™ã€‚RabbitMQä¹Ÿæœ‰ç±»ä¼¼çš„æƒé™ç®¡ç†ï¼›åœ¨RabbitMQä¸­å¯ä»¥è™šæ‹Ÿæ¶ˆæ¯æœåŠ¡å™¨Virtual Hostï¼Œæ¯ä¸ªVirtual Hostsç›¸å½“äºä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„RabbitMQæœåŠ¡å™¨ï¼Œæ¯ä¸ªVirtualHostä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚exchangeã€queueã€messageä¸èƒ½äº’é€šã€‚ ç›¸å½“äºmysqlçš„dbã€‚Virtual Nameä¸€èˆ¬ä»¥&#x2F;å¼€å¤´ã€‚</p><h4 id="6-2-1-åˆ›å»ºVirtual-Hosts"><a href="#6-2-1-åˆ›å»ºVirtual-Hosts" class="headerlink" title="6.2.1. åˆ›å»ºVirtual Hosts"></a>6.2.1. åˆ›å»ºVirtual Hosts</h4><p><img src="https://pic.imgdb.cn/item/63736d3916f2c2beb1720f71.png" alt="1565098496482"></p><h4 id="6-2-2-è®¾ç½®Virtual-Hostsæƒé™"><a href="#6-2-2-è®¾ç½®Virtual-Hostsæƒé™" class="headerlink" title="6.2.2. è®¾ç½®Virtual Hostsæƒé™"></a>6.2.2. è®¾ç½®Virtual Hostsæƒé™</h4><p><img src="https://pic.imgdb.cn/item/63736d3a16f2c2beb1721146.png" alt="1565098585317"></p><p><img src="/Hexo/assets/1565098719054.png" alt="1565098719054"></p>]]></content>
    
    
    <categories>
      
      <category>RabbitMQğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RabbitMQ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RabbitMQåŸºç¡€Skill</title>
    <link href="/Hexo/2022/04/12/RabbitMQ%20%E8%AE%B2%E4%B9%89/"/>
    <url>/Hexo/2022/04/12/RabbitMQ%20%E8%AE%B2%E4%B9%89/</url>
    
    <content type="html"><![CDATA[<h1 id="1-æ¶ˆæ¯ä¸­é—´ä»¶æ¦‚è¿°"><a href="#1-æ¶ˆæ¯ä¸­é—´ä»¶æ¦‚è¿°" class="headerlink" title="1. æ¶ˆæ¯ä¸­é—´ä»¶æ¦‚è¿°"></a>1. æ¶ˆæ¯ä¸­é—´ä»¶æ¦‚è¿°</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶"><a href="#1-1-ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶" class="headerlink" title="1.1. ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶"></a>1.1. ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶</h2><p>MQå…¨ç§°ä¸ºMessage Queueï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ˜¯åº”ç”¨ç¨‹åºå’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡æ–¹æ³•ã€‚</p><ul><li><p>ä¸ºä»€ä¹ˆä½¿ç”¨MQ</p><p>åœ¨é¡¹ç›®ä¸­ï¼Œå¯å°†ä¸€äº›æ— éœ€å³æ—¶è¿”å›ä¸”è€—æ—¶çš„æ“ä½œæå–å‡ºæ¥ï¼Œè¿›è¡Œ<strong>å¼‚æ­¥å¤„ç†</strong>ï¼Œè€Œè¿™ç§å¼‚æ­¥å¤„ç†çš„æ–¹å¼å¤§å¤§çš„èŠ‚çœäº†æœåŠ¡å™¨çš„è¯·æ±‚å“åº”æ—¶é—´ï¼Œä»è€Œ<strong>æé«˜</strong>äº†<strong>ç³»ç»Ÿ</strong>çš„<strong>ååé‡</strong>ã€‚</p></li><li><p>å¼€å‘ä¸­æ¶ˆæ¯é˜Ÿåˆ—é€šå¸¸æœ‰å¦‚ä¸‹åº”ç”¨åœºæ™¯ï¼š</p><p>1ã€ä»»åŠ¡<strong>å¼‚æ­¥</strong>å¤„ç†</p><p>å°†ä¸éœ€è¦åŒæ­¥å¤„ç†çš„å¹¶ä¸”è€—æ—¶é•¿çš„æ“ä½œç”±æ¶ˆæ¯é˜Ÿåˆ—é€šçŸ¥æ¶ˆæ¯æ¥æ”¶æ–¹è¿›è¡Œå¼‚æ­¥å¤„ç†ã€‚æé«˜äº†åº”ç”¨ç¨‹åºçš„å“åº”æ—¶é—´ã€‚</p><p>2ã€åº”ç”¨ç¨‹åº<strong>è§£è€¦åˆ</strong></p><p>MQç›¸å½“äºä¸€ä¸ªä¸­ä»‹ï¼Œç”Ÿäº§æ–¹é€šè¿‡MQä¸æ¶ˆè´¹æ–¹äº¤äº’ï¼Œå®ƒå°†åº”ç”¨ç¨‹åºè¿›è¡Œè§£è€¦åˆã€‚</p><p>3ã€<strong>å‰Šå³°å¡«è°·</strong></p><p>å¦‚è®¢å•ç³»ç»Ÿï¼Œåœ¨ä¸‹å•çš„æ—¶å€™å°±ä¼šå¾€æ•°æ®åº“å†™æ•°æ®ã€‚ä½†æ˜¯æ•°æ®åº“åªèƒ½æ”¯æ’‘æ¯ç§’1000å·¦å³çš„å¹¶å‘å†™å…¥ï¼Œå¹¶å‘é‡å†é«˜å°±å®¹æ˜“å®•æœºã€‚ä½å³°æœŸçš„æ—¶å€™å¹¶å‘ä¹Ÿå°±100å¤šä¸ªï¼Œä½†æ˜¯åœ¨é«˜å³°æœŸæ—¶å€™ï¼Œå¹¶å‘é‡ä¼šçªç„¶æ¿€å¢åˆ°5000ä»¥ä¸Šï¼Œè¿™ä¸ªæ—¶å€™æ•°æ®åº“è‚¯å®šå¡æ­»äº†ã€‚</p><p><img src="https://pic.imgdb.cn/item/63736d8816f2c2beb1725fc8.png"></p><p>æ¶ˆæ¯è¢«MQä¿å­˜èµ·æ¥äº†ï¼Œç„¶åç³»ç»Ÿå°±å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ¶ˆè´¹èƒ½åŠ›æ¥æ¶ˆè´¹ï¼Œæ¯”å¦‚æ¯ç§’1000ä¸ªæ•°æ®ï¼Œè¿™æ ·æ…¢æ…¢å†™å…¥æ•°æ®åº“ï¼Œè¿™æ ·å°±ä¸ä¼šå¡æ­»æ•°æ®åº“äº†ã€‚</p><p><img src="https://pic.imgdb.cn/item/63736d8916f2c2beb1726149.png"></p><p>ä½†æ˜¯ä½¿ç”¨äº†MQä¹‹åï¼Œé™åˆ¶æ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿåº¦ä¸º1000ï¼Œä½†æ˜¯è¿™æ ·ä¸€æ¥ï¼Œé«˜å³°æœŸäº§ç”Ÿçš„æ•°æ®åŠ¿å¿…ä¼šè¢«ç§¯å‹åœ¨MQä¸­ï¼Œé«˜å³°å°±è¢«â€œå‰Šâ€æ‰äº†ã€‚ä½†æ˜¯å› ä¸ºæ¶ˆæ¯ç§¯å‹ï¼Œåœ¨é«˜å³°æœŸè¿‡åçš„ä¸€æ®µæ—¶é—´å†…ï¼Œæ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿåº¦è¿˜æ˜¯ä¼šç»´æŒåœ¨1000QPSï¼Œç›´åˆ°æ¶ˆè´¹å®Œç§¯å‹çš„æ¶ˆæ¯,è¿™å°±å«åšâ€œå¡«è°·â€</p><p><img src="https://pic.imgdb.cn/item/63736d8b16f2c2beb17262fb.png"></p></li></ul><h2 id="1-2-AMQP-å’Œ-JMS"><a href="#1-2-AMQP-å’Œ-JMS" class="headerlink" title="1.2. AMQP å’Œ JMS"></a>1.2. AMQP å’Œ JMS</h2><p>MQæ˜¯æ¶ˆæ¯é€šä¿¡çš„æ¨¡å‹ï¼›å®ç°MQçš„å¤§è‡´æœ‰ä¸¤ç§ä¸»æµæ–¹å¼ï¼šAMQPã€JMSã€‚</p><h3 id="1-2-1-AMQP"><a href="#1-2-1-AMQP" class="headerlink" title="1.2.1. AMQP"></a>1.2.1. AMQP</h3><p>AMQPæ˜¯ä¸€ç§åè®®ï¼Œæ›´å‡†ç¡®çš„è¯´æ˜¯ä¸€ç§binary wire-level protocolï¼ˆé“¾æ¥åè®®ï¼‰ã€‚è¿™æ˜¯å…¶å’ŒJMSçš„æœ¬è´¨å·®åˆ«ï¼ŒAMQPä¸ä»APIå±‚è¿›è¡Œé™å®šï¼Œè€Œæ˜¯ç›´æ¥å®šä¹‰ç½‘ç»œäº¤æ¢çš„æ•°æ®æ ¼å¼ã€‚</p><h3 id="1-2-2-JMS"><a href="#1-2-2-JMS" class="headerlink" title="1.2.2. JMS"></a>1.2.2. JMS</h3><p>JMSå³Javaæ¶ˆæ¯æœåŠ¡ï¼ˆJavaMessage Serviceï¼‰åº”ç”¨ç¨‹åºæ¥å£ï¼Œæ˜¯ä¸€ä¸ªJavaå¹³å°ä¸­å…³äºé¢å‘æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMOMï¼‰çš„APIï¼Œç”¨äºåœ¨ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´ï¼Œæˆ–åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‘é€æ¶ˆæ¯ï¼Œè¿›è¡Œå¼‚æ­¥é€šä¿¡ã€‚</p><h3 id="1-2-3-AMQP-ä¸-JMS-åŒºåˆ«"><a href="#1-2-3-AMQP-ä¸-JMS-åŒºåˆ«" class="headerlink" title="1.2.3. AMQP ä¸ JMS åŒºåˆ«"></a>1.2.3. AMQP ä¸ JMS åŒºåˆ«</h3><ul><li>JMSæ˜¯å®šä¹‰äº†ç»Ÿä¸€çš„æ¥å£ï¼Œæ¥å¯¹æ¶ˆæ¯æ“ä½œè¿›è¡Œç»Ÿä¸€ï¼›AMQPæ˜¯é€šè¿‡è§„å®šåè®®æ¥ç»Ÿä¸€æ•°æ®äº¤äº’çš„æ ¼å¼</li><li>JMSé™å®šäº†å¿…é¡»ä½¿ç”¨Javaè¯­è¨€ï¼›AMQPåªæ˜¯åè®®ï¼Œä¸è§„å®šå®ç°æ–¹å¼ï¼Œå› æ­¤æ˜¯è·¨è¯­è¨€çš„ã€‚</li><li>JMSè§„å®šäº†ä¸¤ç§æ¶ˆæ¯æ¨¡å¼ï¼›è€ŒAMQPçš„æ¶ˆæ¯æ¨¡å¼æ›´åŠ ä¸°å¯Œ</li></ul><h2 id="1-3-æ¶ˆæ¯é˜Ÿåˆ—äº§å“"><a href="#1-3-æ¶ˆæ¯é˜Ÿåˆ—äº§å“" class="headerlink" title="1.3. æ¶ˆæ¯é˜Ÿåˆ—äº§å“"></a>1.3. æ¶ˆæ¯é˜Ÿåˆ—äº§å“</h2><p>å¸‚åœºä¸Šå¸¸è§çš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰å¦‚ä¸‹ï¼š</p><ul><li>ActiveMQï¼šåŸºäºJMS</li><li>ZeroMQï¼šåŸºäºCè¯­è¨€å¼€å‘</li><li>RabbitMQï¼šåŸºäºAMQPåè®®ï¼Œerlangè¯­è¨€å¼€å‘ï¼Œç¨³å®šæ€§å¥½</li><li>RocketMQï¼šåŸºäºJMSï¼Œé˜¿é‡Œå·´å·´äº§å“</li><li>Kafkaï¼šç±»ä¼¼MQçš„äº§å“ï¼›åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œé«˜ååé‡</li></ul><h2 id="1-4-RabbitMQ"><a href="#1-4-RabbitMQ" class="headerlink" title="1.4. RabbitMQ"></a>1.4. RabbitMQ</h2><p>RabbitMQæ˜¯ç”±erlangè¯­è¨€å¼€å‘ï¼ŒåŸºäºAMQPï¼ˆAdvanced Message Queue é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰åè®®å®ç°çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå®ƒæ˜¯ä¸€ç§åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡æ–¹æ³•ï¼Œæ¶ˆæ¯é˜Ÿåˆ—åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘ä¸­åº”ç”¨éå¸¸å¹¿æ³›ã€‚</p><p>RabbitMQå®˜æ–¹åœ°å€ï¼š<a href="http://www.rabbitmq.com/">http://www.rabbitmq.com/</a></p><p>RabbitMQæä¾›äº†6ç§æ¨¡å¼ï¼šç®€å•æ¨¡å¼ï¼Œworkæ¨¡å¼ï¼ŒPublish&#x2F;Subscribeå‘å¸ƒä¸è®¢é˜…æ¨¡å¼ï¼ŒRoutingè·¯ç”±æ¨¡å¼ï¼ŒTopicsä¸»é¢˜æ¨¡å¼ï¼ŒRPCè¿œç¨‹è°ƒç”¨æ¨¡å¼ï¼ˆè¿œç¨‹è°ƒç”¨ï¼Œä¸å¤ªç®—MQï¼›æš‚ä¸ä½œä»‹ç»ï¼‰ï¼›</p><p>å®˜ç½‘å¯¹åº”æ¨¡å¼ä»‹ç»ï¼š<a href="https://www.rabbitmq.com/getstarted.html">https://www.rabbitmq.com/getstarted.html</a></p><p><img src="https://pic.imgdb.cn/item/63736d8d16f2c2beb17264f4.png" alt="1555988678324"></p><h1 id="2-å®‰è£…åŠé…ç½®RabbitMQ"><a href="#2-å®‰è£…åŠé…ç½®RabbitMQ" class="headerlink" title="2. å®‰è£…åŠé…ç½®RabbitMQ"></a>2. å®‰è£…åŠé…ç½®RabbitMQ</h1><p>è¯¦ç»†æŸ¥çœ‹ <code>èµ„æ–™/è½¯ä»¶/å®‰è£…RabbitMQ.md</code> æ–‡æ¡£ã€‚</p><h1 id="3-RabbitMQå…¥é—¨"><a href="#3-RabbitMQå…¥é—¨" class="headerlink" title="3. RabbitMQå…¥é—¨"></a>3. RabbitMQå…¥é—¨</h1><h2 id="3-1-æ­å»ºç¤ºä¾‹å·¥ç¨‹"><a href="#3-1-æ­å»ºç¤ºä¾‹å·¥ç¨‹" class="headerlink" title="3.1. æ­å»ºç¤ºä¾‹å·¥ç¨‹"></a>3.1. æ­å»ºç¤ºä¾‹å·¥ç¨‹</h2><h3 id="3-1-1-åˆ›å»ºå·¥ç¨‹"><a href="#3-1-1-åˆ›å»ºå·¥ç¨‹" class="headerlink" title="3.1.1. åˆ›å»ºå·¥ç¨‹"></a>3.1.1. åˆ›å»ºå·¥ç¨‹</h3><p><img src="https://pic.imgdb.cn/item/63736d9816f2c2beb1726ec5.png" alt="1555991321159"></p><p><img src="https://pic.imgdb.cn/item/63736d9916f2c2beb172700d.png" alt="1555991353704"></p><h3 id="3-1-2-æ·»åŠ ä¾èµ–"><a href="#3-1-2-æ·»åŠ ä¾èµ–" class="headerlink" title="3.1.2. æ·»åŠ ä¾èµ–"></a>3.1.2. æ·»åŠ ä¾èµ–</h3><p>å¾€heima-rabbitmqçš„pom.xmlæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.rabbitmq<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>amqp-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.6.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="3-2-ç¼–å†™ç”Ÿäº§è€…"><a href="#3-2-ç¼–å†™ç”Ÿäº§è€…" class="headerlink" title="3.2. ç¼–å†™ç”Ÿäº§è€…"></a>3.2. ç¼–å†™ç”Ÿäº§è€…</h2><p>ç¼–å†™æ¶ˆæ¯ç”Ÿäº§è€…com.itheima.rabbitmq.simple.Producer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.simple;<br><br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.ConnectionFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">QUEUE_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;simple_queue&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//åˆ›å»ºè¿æ¥å·¥å‚</span><br>        <span class="hljs-type">ConnectionFactory</span> <span class="hljs-variable">connectionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionFactory</span>();<br>        <span class="hljs-comment">//ä¸»æœºåœ°å€;é»˜è®¤ä¸º localhost</span><br>        connectionFactory.setHost(<span class="hljs-string">&quot;localhost&quot;</span>);<br>        <span class="hljs-comment">//è¿æ¥ç«¯å£;é»˜è®¤ä¸º 5672</span><br>        connectionFactory.setPort(<span class="hljs-number">5672</span>);<br>        <span class="hljs-comment">//è™šæ‹Ÿä¸»æœºåç§°;é»˜è®¤ä¸º /</span><br>        connectionFactory.setVirtualHost(<span class="hljs-string">&quot;/itcast&quot;</span>);<br>        <span class="hljs-comment">//è¿æ¥ç”¨æˆ·åï¼›é»˜è®¤ä¸ºguest</span><br>        connectionFactory.setUsername(<span class="hljs-string">&quot;heima&quot;</span>);<br>        <span class="hljs-comment">//è¿æ¥å¯†ç ï¼›é»˜è®¤ä¸ºguest</span><br>        connectionFactory.setPassword(<span class="hljs-string">&quot;heima&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºè¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> connectionFactory.newConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">// è¦å‘é€çš„ä¿¡æ¯</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ä½ å¥½ï¼›å°å…”å­ï¼&quot;</span>;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šäº¤æ¢æœºåç§°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤Default Exchage</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šè·¯ç”±key,ç®€å•æ¨¡å¼å¯ä»¥ä¼ é€’é˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯å…¶å®ƒå±æ€§</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ¶ˆæ¯å†…å®¹</span><br><span class="hljs-comment">         */</span><br>        channel.basicPublish(<span class="hljs-string">&quot;&quot;</span>, QUEUE_NAME, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;å·²å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);<br><br>        <span class="hljs-comment">// å…³é—­èµ„æº</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œä¸Šè¿°çš„æ¶ˆæ¯å‘é€ä¹‹åï¼›å¯ä»¥ç™»å½•rabbitMQçš„ç®¡ç†æ§åˆ¶å°ï¼Œå¯ä»¥å‘ç°é˜Ÿåˆ—å’Œå…¶æ¶ˆæ¯ï¼š</p><p><img src="https://pic.imgdb.cn/item/63736d9d16f2c2beb17272db.png" alt="1556006638979"></p><p><img src="https://pic.imgdb.cn/item/63736d9e16f2c2beb1727441.png" alt="1556006647177"></p><h2 id="3-3-ç¼–å†™æ¶ˆè´¹è€…"><a href="#3-3-ç¼–å†™æ¶ˆè´¹è€…" class="headerlink" title="3.3. ç¼–å†™æ¶ˆè´¹è€…"></a>3.3. ç¼–å†™æ¶ˆè´¹è€…</h2><p>æŠ½å–åˆ›å»ºconnectionçš„å·¥å…·ç±»com.itheima.rabbitmq.util.ConnectionUtilï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.util;<br><br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.ConnectionFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionUtil</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//åˆ›å»ºè¿æ¥å·¥å‚</span><br>        <span class="hljs-type">ConnectionFactory</span> <span class="hljs-variable">connectionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionFactory</span>();<br>        <span class="hljs-comment">//ä¸»æœºåœ°å€;é»˜è®¤ä¸º localhost</span><br>        connectionFactory.setHost(<span class="hljs-string">&quot;localhost&quot;</span>);<br>        <span class="hljs-comment">//è¿æ¥ç«¯å£;é»˜è®¤ä¸º 5672</span><br>        connectionFactory.setPort(<span class="hljs-number">5672</span>);<br>        <span class="hljs-comment">//è™šæ‹Ÿä¸»æœºåç§°;é»˜è®¤ä¸º /</span><br>        connectionFactory.setVirtualHost(<span class="hljs-string">&quot;/itcast&quot;</span>);<br>        <span class="hljs-comment">//è¿æ¥ç”¨æˆ·åï¼›é»˜è®¤ä¸ºguest</span><br>        connectionFactory.setUsername(<span class="hljs-string">&quot;heima&quot;</span>);<br>        <span class="hljs-comment">//è¿æ¥å¯†ç ï¼›é»˜è®¤ä¸ºguest</span><br>        connectionFactory.setPassword(<span class="hljs-string">&quot;heima&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºè¿æ¥</span><br>        <span class="hljs-keyword">return</span> connectionFactory.newConnection();<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç¼–å†™æ¶ˆæ¯çš„æ¶ˆè´¹è€…com.itheima.rabbitmq.simple.Consumer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.simple;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç†</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š</span><br><span class="hljs-comment">             * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€)</span><br><span class="hljs-comment">             * properties å±æ€§ä¿¡æ¯</span><br><span class="hljs-comment">             * body æ¶ˆæ¯</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//è·¯ç”±key</span><br>                System.out.println(<span class="hljs-string">&quot;è·¯ç”±keyä¸ºï¼š&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//äº¤æ¢æœº</span><br>                System.out.println(<span class="hljs-string">&quot;äº¤æ¢æœºä¸ºï¼š&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//æ¶ˆæ¯id</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯idä¸ºï¼š&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span><br>                System.out.println(<span class="hljs-string">&quot;æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.QUEUE_NAME, <span class="hljs-literal">true</span>, consumer);<br><br>        <span class="hljs-comment">//ä¸å…³é—­èµ„æºï¼Œåº”è¯¥ä¸€ç›´ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">//channel.close();</span><br>        <span class="hljs-comment">//connection.close();</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-4-å°ç»“"><a href="#3-4-å°ç»“" class="headerlink" title="3.4. å°ç»“"></a>3.4. å°ç»“</h2><p>ä¸Šè¿°çš„å…¥é—¨æ¡ˆä¾‹ä¸­ä¸­å…¶å®ä½¿ç”¨çš„æ˜¯å¦‚ä¸‹çš„ç®€å•æ¨¡å¼ï¼š</p><p><img src="https://pic.imgdb.cn/item/63736db316f2c2beb172885a.png" alt="1555991074575"></p><p>åœ¨ä¸Šå›¾çš„æ¨¡å‹ä¸­ï¼Œæœ‰ä»¥ä¸‹æ¦‚å¿µï¼š</p><ul><li>Pï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯è¦å‘é€æ¶ˆæ¯çš„ç¨‹åº</li><li>Cï¼šæ¶ˆè´¹è€…ï¼šæ¶ˆæ¯çš„æ¥å—è€…ï¼Œä¼šä¸€ç›´ç­‰å¾…æ¶ˆæ¯åˆ°æ¥ã€‚</li><li>queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå›¾ä¸­çº¢è‰²éƒ¨åˆ†ã€‚ç±»ä¼¼ä¸€ä¸ªé‚®ç®±ï¼Œå¯ä»¥ç¼“å­˜æ¶ˆæ¯ï¼›ç”Ÿäº§è€…å‘å…¶ä¸­æŠ•é€’æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ä»å…¶ä¸­å–å‡ºæ¶ˆæ¯ã€‚</li></ul><h1 id="4-AMQP"><a href="#4-AMQP" class="headerlink" title="4. AMQP"></a>4. AMQP</h1><h2 id="4-1-ç›¸å…³æ¦‚å¿µä»‹ç»"><a href="#4-1-ç›¸å…³æ¦‚å¿µä»‹ç»" class="headerlink" title="4.1. ç›¸å…³æ¦‚å¿µä»‹ç»"></a>4.1. ç›¸å…³æ¦‚å¿µä»‹ç»</h2><p>AMQP  ä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚</p><p>AMQPæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶åè®®ï¼Œæ‹¥æœ‰ä¸€äº›ç°ä»£åŒ–ç‰¹ç‚¹ï¼šå¤šä¿¡é“ã€åå•†å¼ï¼Œå¼‚æ­¥ï¼Œå®‰å…¨ï¼Œæ‰©å¹³å°ï¼Œä¸­ç«‹ï¼Œé«˜æ•ˆã€‚</p><p>RabbitMQæ˜¯AMQPåè®®çš„Erlangçš„å®ç°ã€‚</p><table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è¿æ¥Connection</td><td>ä¸€ä¸ªç½‘ç»œè¿æ¥ï¼Œæ¯”å¦‚TCP&#x2F;IPå¥—æ¥å­—è¿æ¥ã€‚</td></tr><tr><td>ä¼šè¯Session</td><td>ç«¯ç‚¹ä¹‹é—´çš„å‘½åå¯¹è¯ã€‚åœ¨ä¸€ä¸ªä¼šè¯ä¸Šä¸‹æ–‡ä¸­ï¼Œä¿è¯â€œæ°å¥½ä¼ é€’ä¸€æ¬¡â€ã€‚</td></tr><tr><td>ä¿¡é“Channel</td><td>å¤šè·¯å¤ç”¨è¿æ¥ä¸­çš„ä¸€æ¡ç‹¬ç«‹çš„åŒå‘æ•°æ®æµé€šé“ã€‚ä¸ºä¼šè¯æä¾›ç‰©ç†ä¼ è¾“ä»‹è´¨ã€‚</td></tr><tr><td>å®¢æˆ·ç«¯Client</td><td>AMQPè¿æ¥æˆ–è€…ä¼šè¯çš„å‘èµ·è€…ã€‚AMQPæ˜¯éå¯¹ç§°çš„ï¼Œå®¢æˆ·ç«¯ç”Ÿäº§å’Œæ¶ˆè´¹æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨å­˜å‚¨å’Œè·¯ç”±è¿™äº›æ¶ˆæ¯ã€‚</td></tr><tr><td>æœåŠ¡èŠ‚ç‚¹Broker</td><td>æ¶ˆæ¯ä¸­é—´ä»¶çš„æœåŠ¡èŠ‚ç‚¹ï¼›ä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥å°†ä¸€ä¸ªRabbitMQ Brokerçœ‹ä½œä¸€å°RabbitMQ æœåŠ¡å™¨ã€‚</td></tr><tr><td>ç«¯ç‚¹</td><td>AMQPå¯¹è¯çš„ä»»æ„ä¸€æ–¹ã€‚ä¸€ä¸ªAMQPè¿æ¥åŒ…æ‹¬ä¸¤ä¸ªç«¯ç‚¹ï¼ˆä¸€ä¸ªæ˜¯å®¢æˆ·ç«¯ï¼Œä¸€ä¸ªæ˜¯æœåŠ¡å™¨ï¼‰ã€‚</td></tr><tr><td>æ¶ˆè´¹è€…Consumer</td><td>ä¸€ä¸ªä»æ¶ˆæ¯é˜Ÿåˆ—é‡Œè¯·æ±‚æ¶ˆæ¯çš„å®¢æˆ·ç«¯ç¨‹åºã€‚</td></tr><tr><td>ç”Ÿäº§è€…Producer</td><td>ä¸€ä¸ªå‘äº¤æ¢æœºå‘å¸ƒæ¶ˆæ¯çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚</td></tr></tbody></table><h2 id="4-2-RabbitMQè¿è½¬æµç¨‹"><a href="#4-2-RabbitMQè¿è½¬æµç¨‹" class="headerlink" title="4.2. RabbitMQè¿è½¬æµç¨‹"></a>4.2. RabbitMQè¿è½¬æµç¨‹</h2><p>åœ¨å…¥é—¨æ¡ˆä¾‹ä¸­ï¼š</p><ul><li>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯<ol><li>ç”Ÿäº§è€…åˆ›å»ºè¿æ¥ï¼ˆConnectionï¼‰ï¼Œå¼€å¯ä¸€ä¸ªä¿¡é“ï¼ˆChannelï¼‰ï¼Œè¿æ¥åˆ°RabbitMQ Brokerï¼›</li><li>å£°æ˜é˜Ÿåˆ—å¹¶è®¾ç½®å±æ€§ï¼›å¦‚æ˜¯å¦æ’å®ƒï¼Œæ˜¯å¦æŒä¹…åŒ–ï¼Œæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼›</li><li>å°†è·¯ç”±é”®ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ä¸é˜Ÿåˆ—ç»‘å®šèµ·æ¥ï¼›</li><li>å‘é€æ¶ˆæ¯è‡³RabbitMQ Brokerï¼›</li><li>å…³é—­ä¿¡é“ï¼›</li><li>å…³é—­è¿æ¥ï¼›</li></ol></li><li>æ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯<ol><li>æ¶ˆè´¹è€…åˆ›å»ºè¿æ¥ï¼ˆConnectionï¼‰ï¼Œå¼€å¯ä¸€ä¸ªä¿¡é“ï¼ˆChannelï¼‰ï¼Œè¿æ¥åˆ°RabbitMQ Broker</li><li>å‘Broker è¯·æ±‚æ¶ˆè´¹ç›¸åº”é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œè®¾ç½®ç›¸åº”çš„å›è°ƒå‡½æ•°ï¼›</li><li>ç­‰å¾…Brokerå›åº”é—­å…³æŠ•é€’å“åº”é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯ï¼›</li><li>ç¡®è®¤ï¼ˆackï¼Œè‡ªåŠ¨ç¡®è®¤ï¼‰æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼›</li><li>RabbitMQä»é˜Ÿåˆ—ä¸­åˆ é™¤ç›¸åº”å·²ç»è¢«ç¡®è®¤çš„æ¶ˆæ¯ï¼›</li><li>å…³é—­ä¿¡é“ï¼›</li><li>å…³é—­è¿æ¥ï¼›</li></ol></li></ul><p><img src="https://pic.imgdb.cn/item/63736db716f2c2beb1728bb9.png" alt="1565105223969"></p><h2 id="4-3-ç”Ÿäº§è€…æµè½¬è¿‡ç¨‹è¯´æ˜"><a href="#4-3-ç”Ÿäº§è€…æµè½¬è¿‡ç¨‹è¯´æ˜" class="headerlink" title="4.3. ç”Ÿäº§è€…æµè½¬è¿‡ç¨‹è¯´æ˜"></a>4.3. ç”Ÿäº§è€…æµè½¬è¿‡ç¨‹è¯´æ˜</h2><ol><li>å®¢æˆ·ç«¯ä¸ä»£ç†æœåŠ¡å™¨Brokerå»ºç«‹è¿æ¥ã€‚ä¼šè°ƒç”¨newConnection() æ–¹æ³•,è¿™ä¸ªæ–¹æ³•ä¼šè¿›ä¸€æ­¥å°è£…Protocol Header 0-9-1 çš„æŠ¥æ–‡å¤´å‘é€ç»™Broker ï¼Œä»¥æ­¤é€šçŸ¥Broker æœ¬æ¬¡äº¤äº’é‡‡ç”¨çš„æ˜¯AMQPO-9-1 åè®®ï¼Œç´§æ¥ç€Broker è¿”å›Connection.Start æ¥å»ºç«‹è¿æ¥ï¼Œåœ¨è¿æ¥çš„è¿‡ç¨‹ä¸­æ¶‰åŠConnection.Start&#x2F;.Start-OK ã€Connection.Tune&#x2F;.Tune-Ok ï¼ŒConnection.Open&#x2F; .Open-Ok è¿™6 ä¸ªå‘½ä»¤çš„äº¤äº’ã€‚</li><li>å®¢æˆ·ç«¯è°ƒç”¨connection.createChannelæ–¹æ³•ã€‚æ­¤æ–¹æ³•å¼€å¯ä¿¡é“ï¼Œå…¶åŒ…è£…çš„channel.openå‘½ä»¤å‘é€ç»™Broker,ç­‰å¾…channel.basicPublishæ–¹æ³•ï¼Œå¯¹åº”çš„AMQPå‘½ä»¤ä¸ºBasic.Publish,è¿™ä¸ªå‘½ä»¤åŒ…å«äº†content Header å’Œcontent Body()ã€‚content Header åŒ…å«äº†æ¶ˆæ¯ä½“çš„å±æ€§ï¼Œä¾‹å¦‚:æŠ•é€’æ¨¡å¼ï¼Œä¼˜å…ˆçº§ç­‰ï¼Œcontent Body åŒ…å«äº†æ¶ˆæ¯ä½“æœ¬èº«ã€‚</li><li>å®¢æˆ·ç«¯å‘é€å®Œæ¶ˆæ¯éœ€è¦å…³é—­èµ„æºæ—¶ï¼Œæ¶‰åŠåˆ°Channel.Closeå’ŒChannl.Close-Ok ä¸Connetion.Closeå’ŒConnection.Close-Okçš„å‘½ä»¤äº¤äº’ã€‚</li></ol><p><img src="https://pic.imgdb.cn/item/63736db916f2c2beb1728ecf.png" alt="ç”Ÿäº§è€…æµè½¬è¿‡ç¨‹å›¾"></p><h2 id="4-4-æ¶ˆè´¹è€…æµè½¬è¿‡ç¨‹è¯´æ˜"><a href="#4-4-æ¶ˆè´¹è€…æµè½¬è¿‡ç¨‹è¯´æ˜" class="headerlink" title="4.4. æ¶ˆè´¹è€…æµè½¬è¿‡ç¨‹è¯´æ˜"></a>4.4. æ¶ˆè´¹è€…æµè½¬è¿‡ç¨‹è¯´æ˜</h2><ol><li>æ¶ˆè´¹è€…å®¢æˆ·ç«¯ä¸ä»£ç†æœåŠ¡å™¨Brokerå»ºç«‹è¿æ¥ã€‚ä¼šè°ƒç”¨newConnection() æ–¹æ³•,è¿™ä¸ªæ–¹æ³•ä¼šè¿›ä¸€æ­¥å°è£…Protocol Header 0-9-1 çš„æŠ¥æ–‡å¤´å‘é€ç»™Broker ï¼Œä»¥æ­¤é€šçŸ¥Broker æœ¬æ¬¡äº¤äº’é‡‡ç”¨çš„æ˜¯AMQPO-9-1 åè®®ï¼Œç´§æ¥ç€Broker è¿”å›Connection.Start æ¥å»ºç«‹è¿æ¥ï¼Œåœ¨è¿æ¥çš„è¿‡ç¨‹ä¸­æ¶‰åŠConnection.Start&#x2F;.Start-OK ã€Connection.Tune&#x2F;.Tune-Ok ï¼ŒConnection.Open&#x2F; .Open-Ok è¿™6 ä¸ªå‘½ä»¤çš„äº¤äº’ã€‚</li><li>æ¶ˆè´¹è€…å®¢æˆ·ç«¯è°ƒç”¨connection.createChannelæ–¹æ³•ã€‚å’Œç”Ÿäº§è€…å®¢æˆ·ç«¯ä¸€æ ·ï¼Œåè®®æ¶‰åŠChannel . Open&#x2F;Open-Okå‘½ä»¤ã€‚</li><li>åœ¨çœŸæ­£æ¶ˆè´¹ä¹‹å‰ï¼Œæ¶ˆè´¹è€…å®¢æˆ·ç«¯éœ€è¦å‘Broker å‘é€Basic.Consume å‘½ä»¤(å³è°ƒç”¨channel.basicConsume æ–¹æ³•ã€‰å°†Channel ç½®ä¸ºæ¥æ”¶æ¨¡å¼ï¼Œä¹‹åBroker å›æ‰§Basic . Consume - Ok ä»¥å‘Šè¯‰æ¶ˆè´¹è€…å®¢æˆ·ç«¯å‡†å¤‡å¥½æ¶ˆè´¹æ¶ˆæ¯ã€‚</li><li>Broker å‘æ¶ˆè´¹è€…å®¢æˆ·ç«¯æ¨é€(Push) æ¶ˆæ¯ï¼Œå³Basic.Deliver å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å’ŒBasic.Publish å‘½ä»¤ä¸€æ ·ä¼šæºå¸¦Content Header å’ŒContent Bodyã€‚</li><li>æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯å¹¶æ­£ç¡®æ¶ˆè´¹ä¹‹åï¼Œå‘Broker å‘é€ç¡®è®¤ï¼Œå³Basic.Ack å‘½ä»¤ã€‚</li><li>å®¢æˆ·ç«¯å‘é€å®Œæ¶ˆæ¯éœ€è¦å…³é—­èµ„æºæ—¶ï¼Œæ¶‰åŠåˆ°Channel.Closeå’ŒChannl.Close-Ok ä¸Connetion.Closeå’ŒConnection.Close-Okçš„å‘½ä»¤äº¤äº’ã€‚</li></ol><p><img src="https://pic.imgdb.cn/item/63736dbb16f2c2beb17290e5.png" alt="æ¶ˆè´¹è€…æµè½¬è¿‡ç¨‹å›¾"></p><h1 id="5-RabbitMQå·¥ä½œæ¨¡å¼"><a href="#5-RabbitMQå·¥ä½œæ¨¡å¼" class="headerlink" title="5. RabbitMQå·¥ä½œæ¨¡å¼"></a>5. RabbitMQå·¥ä½œæ¨¡å¼</h1><h2 id="4-1-Work-queueså·¥ä½œé˜Ÿåˆ—æ¨¡å¼"><a href="#4-1-Work-queueså·¥ä½œé˜Ÿåˆ—æ¨¡å¼" class="headerlink" title="4.1. Work queueså·¥ä½œé˜Ÿåˆ—æ¨¡å¼"></a>4.1. Work queueså·¥ä½œé˜Ÿåˆ—æ¨¡å¼</h2><h3 id="4-1-1-æ¨¡å¼è¯´æ˜"><a href="#4-1-1-æ¨¡å¼è¯´æ˜" class="headerlink" title="4.1.1. æ¨¡å¼è¯´æ˜"></a>4.1.1. æ¨¡å¼è¯´æ˜</h3><p><img src="https://pic.imgdb.cn/item/63736dbc16f2c2beb1729136.png" alt="1556009144848"></p><p><code>Work Queues</code>ä¸å…¥é—¨ç¨‹åºçš„<code>ç®€å•æ¨¡å¼</code>ç›¸æ¯”ï¼Œå¤šäº†ä¸€ä¸ªæˆ–ä¸€äº›æ¶ˆè´¹ç«¯ï¼Œå¤šä¸ªæ¶ˆè´¹ç«¯å…±åŒæ¶ˆè´¹åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚</p><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå¯¹äº ä»»åŠ¡è¿‡é‡æˆ–ä»»åŠ¡è¾ƒå¤šæƒ…å†µä½¿ç”¨å·¥ä½œé˜Ÿåˆ—å¯ä»¥æé«˜ä»»åŠ¡å¤„ç†çš„é€Ÿåº¦ã€‚</p><h3 id="4-1-2-ä»£ç "><a href="#4-1-2-ä»£ç " class="headerlink" title="4.1.2. ä»£ç "></a>4.1.2. ä»£ç </h3><p><code>Work Queues</code>ä¸å…¥é—¨ç¨‹åºçš„<code>ç®€å•æ¨¡å¼</code>çš„ä»£ç æ˜¯å‡ ä¹ä¸€æ ·çš„ï¼›å¯ä»¥å®Œå…¨å¤åˆ¶ï¼Œå¹¶å¤åˆ¶å¤šä¸€ä¸ªæ¶ˆè´¹è€…è¿›è¡Œå¤šä¸ªæ¶ˆè´¹è€…åŒæ—¶æ¶ˆè´¹æ¶ˆæ¯çš„æµ‹è¯•ã€‚</p><h4 id="1ï¼‰ç”Ÿäº§è€…"><a href="#1ï¼‰ç”Ÿäº§è€…" class="headerlink" title="1ï¼‰ç”Ÿäº§è€…"></a>1ï¼‰ç”Ÿäº§è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.work;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.ConnectionFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">QUEUE_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;work_queue&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//åˆ›å»ºè¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">30</span>; i++) &#123;<br>            <span class="hljs-comment">// å‘é€ä¿¡æ¯</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ä½ å¥½ï¼›å°å…”å­ï¼workæ¨¡å¼--&quot;</span> + i;<br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * å‚æ•°1ï¼šäº¤æ¢æœºåç§°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤Default Exchage</span><br><span class="hljs-comment">             * å‚æ•°2ï¼šè·¯ç”±key,ç®€å•æ¨¡å¼å¯ä»¥ä¼ é€’é˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">             * å‚æ•°3ï¼šæ¶ˆæ¯å…¶å®ƒå±æ€§</span><br><span class="hljs-comment">             * å‚æ•°4ï¼šæ¶ˆæ¯å†…å®¹</span><br><span class="hljs-comment">             */</span><br>            channel.basicPublish(<span class="hljs-string">&quot;&quot;</span>, QUEUE_NAME, <span class="hljs-literal">null</span>, message.getBytes());<br>            System.out.println(<span class="hljs-string">&quot;å·²å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);<br>        &#125;<br><br>        <span class="hljs-comment">// å…³é—­èµ„æº</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="2ï¼‰æ¶ˆè´¹è€…1"><a href="#2ï¼‰æ¶ˆè´¹è€…1" class="headerlink" title="2ï¼‰æ¶ˆè´¹è€…1"></a>2ï¼‰æ¶ˆè´¹è€…1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.work;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer1</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ä¸€æ¬¡åªèƒ½æ¥æ”¶å¹¶å¤„ç†ä¸€ä¸ªæ¶ˆæ¯</span><br>        channel.basicQos(<span class="hljs-number">1</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç†</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š</span><br><span class="hljs-comment">             * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€)</span><br><span class="hljs-comment">             * properties å±æ€§ä¿¡æ¯</span><br><span class="hljs-comment">             * body æ¶ˆæ¯</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-comment">//è·¯ç”±key</span><br>                    System.out.println(<span class="hljs-string">&quot;è·¯ç”±keyä¸ºï¼š&quot;</span> + envelope.getRoutingKey());<br>                    <span class="hljs-comment">//äº¤æ¢æœº</span><br>                    System.out.println(<span class="hljs-string">&quot;äº¤æ¢æœºä¸ºï¼š&quot;</span> + envelope.getExchange());<br>                    <span class="hljs-comment">//æ¶ˆæ¯id</span><br>                    System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯idä¸ºï¼š&quot;</span> + envelope.getDeliveryTag());<br>                    <span class="hljs-comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span><br>                    System.out.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…1-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>                    Thread.sleep(<span class="hljs-number">1000</span>);<br><br>                    <span class="hljs-comment">//ç¡®è®¤æ¶ˆæ¯</span><br>                    channel.basicAck(envelope.getDeliveryTag(), <span class="hljs-literal">false</span>);<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.QUEUE_NAME, <span class="hljs-literal">false</span>, consumer);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3ï¼‰æ¶ˆè´¹è€…2"><a href="#3ï¼‰æ¶ˆè´¹è€…2" class="headerlink" title="3ï¼‰æ¶ˆè´¹è€…2"></a>3ï¼‰æ¶ˆè´¹è€…2</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.work;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer2</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.QUEUE_NAME, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//ä¸€æ¬¡åªèƒ½æ¥æ”¶å¹¶å¤„ç†ä¸€ä¸ªæ¶ˆæ¯</span><br>        channel.basicQos(<span class="hljs-number">1</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç†</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š</span><br><span class="hljs-comment">             * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€)</span><br><span class="hljs-comment">             * properties å±æ€§ä¿¡æ¯</span><br><span class="hljs-comment">             * body æ¶ˆæ¯</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-comment">//è·¯ç”±key</span><br>                    System.out.println(<span class="hljs-string">&quot;è·¯ç”±keyä¸ºï¼š&quot;</span> + envelope.getRoutingKey());<br>                    <span class="hljs-comment">//äº¤æ¢æœº</span><br>                    System.out.println(<span class="hljs-string">&quot;äº¤æ¢æœºä¸ºï¼š&quot;</span> + envelope.getExchange());<br>                    <span class="hljs-comment">//æ¶ˆæ¯id</span><br>                    System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯idä¸ºï¼š&quot;</span> + envelope.getDeliveryTag());<br>                    <span class="hljs-comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span><br>                    System.out.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…2-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>                    Thread.sleep(<span class="hljs-number">1000</span>);<br><br>                    <span class="hljs-comment">//ç¡®è®¤æ¶ˆæ¯</span><br>                    channel.basicAck(envelope.getDeliveryTag(), <span class="hljs-literal">false</span>);<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.QUEUE_NAME, <span class="hljs-literal">false</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="4-1-3-æµ‹è¯•"><a href="#4-1-3-æµ‹è¯•" class="headerlink" title="4.1.3. æµ‹è¯•"></a>4.1.3. æµ‹è¯•</h3><p>å¯åŠ¨ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œç„¶åå†å¯åŠ¨ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼›åˆ°IDEAçš„ä¸¤ä¸ªæ¶ˆè´¹è€…å¯¹åº”çš„æ§åˆ¶å°æŸ¥çœ‹æ˜¯å¦ç«äº‰æ€§çš„æ¥æ”¶åˆ°æ¶ˆæ¯ã€‚</p><p><img src="https://pic.imgdb.cn/item/63736dc116f2c2beb1729695.png" alt="1556014310859"></p><p><img src="https://pic.imgdb.cn/item/63736dc316f2c2beb172995d.png" alt="1556014318106"></p><h3 id="4-1-4-å°ç»“"><a href="#4-1-4-å°ç»“" class="headerlink" title="4.1.4. å°ç»“"></a>4.1.4. å°ç»“</h3><p>åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­å¦‚æœæœ‰å¤šä¸ªæ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…ä¹‹é—´å¯¹äºåŒä¸€ä¸ªæ¶ˆæ¯çš„å…³ç³»æ˜¯<strong>ç«äº‰</strong>çš„å…³ç³»ã€‚</p><h2 id="4-2-è®¢é˜…æ¨¡å¼ç±»å‹"><a href="#4-2-è®¢é˜…æ¨¡å¼ç±»å‹" class="headerlink" title="4.2. è®¢é˜…æ¨¡å¼ç±»å‹"></a>4.2. è®¢é˜…æ¨¡å¼ç±»å‹</h2><p>è®¢é˜…æ¨¡å¼ç¤ºä¾‹å›¾ï¼š</p><p><img src="https://pic.imgdb.cn/item/63736dc516f2c2beb1729bbb.png" alt="1556014499573"></p><p>å‰é¢2ä¸ªæ¡ˆä¾‹ä¸­ï¼Œåªæœ‰3ä¸ªè§’è‰²ï¼š</p><ul><li>Pï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯è¦å‘é€æ¶ˆæ¯çš„ç¨‹åº</li><li>Cï¼šæ¶ˆè´¹è€…ï¼šæ¶ˆæ¯çš„æ¥å—è€…ï¼Œä¼šä¸€ç›´ç­‰å¾…æ¶ˆæ¯åˆ°æ¥ã€‚</li><li>queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå›¾ä¸­çº¢è‰²éƒ¨åˆ†</li></ul><p>è€Œåœ¨è®¢é˜…æ¨¡å‹ä¸­ï¼Œå¤šäº†ä¸€ä¸ªexchangeè§’è‰²ï¼Œè€Œä¸”è¿‡ç¨‹ç•¥æœ‰å˜åŒ–ï¼š</p><ul><li>Pï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯è¦å‘é€æ¶ˆæ¯çš„ç¨‹åºï¼Œä½†æ˜¯ä¸å†å‘é€åˆ°é˜Ÿåˆ—ä¸­ï¼Œè€Œæ˜¯å‘ç»™Xï¼ˆäº¤æ¢æœºï¼‰</li><li>Cï¼šæ¶ˆè´¹è€…ï¼Œæ¶ˆæ¯çš„æ¥å—è€…ï¼Œä¼šä¸€ç›´ç­‰å¾…æ¶ˆæ¯åˆ°æ¥ã€‚</li><li>Queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¥æ”¶æ¶ˆæ¯ã€ç¼“å­˜æ¶ˆæ¯ã€‚</li><li>Exchangeï¼šäº¤æ¢æœºï¼Œå›¾ä¸­çš„Xã€‚ä¸€æ–¹é¢ï¼Œæ¥æ”¶ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ã€‚å¦ä¸€æ–¹é¢ï¼ŒçŸ¥é“å¦‚ä½•å¤„ç†æ¶ˆæ¯ï¼Œä¾‹å¦‚é€’äº¤ç»™æŸä¸ªç‰¹åˆ«é˜Ÿåˆ—ã€é€’äº¤ç»™æ‰€æœ‰é˜Ÿåˆ—ã€æˆ–æ˜¯å°†æ¶ˆæ¯ä¸¢å¼ƒã€‚åˆ°åº•å¦‚ä½•æ“ä½œï¼Œå–å†³äºExchangeçš„ç±»å‹ã€‚Exchangeæœ‰å¸¸è§ä»¥ä¸‹3ç§ç±»å‹ï¼š<ul><li>Fanoutï¼šå¹¿æ’­ï¼Œå°†æ¶ˆæ¯äº¤ç»™æ‰€æœ‰ç»‘å®šåˆ°äº¤æ¢æœºçš„é˜Ÿåˆ—</li><li>Directï¼šå®šå‘ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆæŒ‡å®šrouting key çš„é˜Ÿåˆ—</li><li>Topicï¼šé€šé…ç¬¦ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆrouting patternï¼ˆè·¯ç”±æ¨¡å¼ï¼‰ çš„é˜Ÿåˆ—</li></ul></li></ul><p><strong>Exchangeï¼ˆäº¤æ¢æœºï¼‰åªè´Ÿè´£è½¬å‘æ¶ˆæ¯ï¼Œä¸å…·å¤‡å­˜å‚¨æ¶ˆæ¯çš„èƒ½åŠ›</strong>ï¼Œå› æ­¤å¦‚æœæ²¡æœ‰ä»»ä½•é˜Ÿåˆ—ä¸Exchangeç»‘å®šï¼Œæˆ–è€…æ²¡æœ‰ç¬¦åˆè·¯ç”±è§„åˆ™çš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šä¸¢å¤±ï¼</p><h2 id="4-3-Publish-x2F-Subscribeå‘å¸ƒä¸è®¢é˜…æ¨¡å¼"><a href="#4-3-Publish-x2F-Subscribeå‘å¸ƒä¸è®¢é˜…æ¨¡å¼" class="headerlink" title="4.3. Publish&#x2F;Subscribeå‘å¸ƒä¸è®¢é˜…æ¨¡å¼"></a>4.3. Publish&#x2F;Subscribeå‘å¸ƒä¸è®¢é˜…æ¨¡å¼</h2><h3 id="4-3-1-æ¨¡å¼è¯´æ˜"><a href="#4-3-1-æ¨¡å¼è¯´æ˜" class="headerlink" title="4.3.1. æ¨¡å¼è¯´æ˜"></a>4.3.1. æ¨¡å¼è¯´æ˜</h3><p><img src="https://pic.imgdb.cn/item/63736dc716f2c2beb1729e75.png" alt="1556010329032"></p><p>å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼š<br>1ã€æ¯ä¸ªæ¶ˆè´¹è€…ç›‘å¬è‡ªå·±çš„é˜Ÿåˆ—ã€‚<br>2ã€ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘ç»™brokerï¼Œç”±äº¤æ¢æœºå°†æ¶ˆæ¯è½¬å‘åˆ°ç»‘å®šæ­¤äº¤æ¢æœºçš„æ¯ä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªç»‘å®šäº¤æ¢æœºçš„é˜Ÿåˆ—éƒ½å°†æ¥æ”¶<br>åˆ°æ¶ˆæ¯</p><h3 id="4-3-2-ä»£ç "><a href="#4-3-2-ä»£ç " class="headerlink" title="4.3.2. ä»£ç "></a>4.3.2. ä»£ç </h3><h4 id="1ï¼‰ç”Ÿäº§è€…-1"><a href="#1ï¼‰ç”Ÿäº§è€…-1" class="headerlink" title="1ï¼‰ç”Ÿäº§è€…"></a>1ï¼‰ç”Ÿäº§è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.ps;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.BuiltinExchangeType;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å‘å¸ƒä¸è®¢é˜…ä½¿ç”¨çš„äº¤æ¢æœºç±»å‹ä¸ºï¼šfanout</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-comment">//äº¤æ¢æœºåç§°</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FANOUT_EXCHAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;fanout_exchange&quot;</span>;<br>    <span class="hljs-comment">//é˜Ÿåˆ—åç§°</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FANOUT_QUEUE_1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;fanout_queue_1&quot;</span>;<br>    <span class="hljs-comment">//é˜Ÿåˆ—åç§°</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FANOUT_QUEUE_2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;fanout_queue_2&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//åˆ›å»ºè¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å£°æ˜äº¤æ¢æœº</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šäº¤æ¢æœºåç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šäº¤æ¢æœºç±»å‹ï¼Œfanoutã€topicã€directã€headers</span><br><span class="hljs-comment">         */</span><br>        channel.exchangeDeclare(FANOUT_EXCHAGE, BuiltinExchangeType.FANOUT);<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(FANOUT_QUEUE_1, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br>        channel.queueDeclare(FANOUT_QUEUE_2, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœº</span><br>        channel.queueBind(FANOUT_QUEUE_1, FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>);<br>        channel.queueBind(FANOUT_QUEUE_2, FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>            <span class="hljs-comment">// å‘é€ä¿¡æ¯</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ä½ å¥½ï¼›å°å…”å­ï¼å‘å¸ƒè®¢é˜…æ¨¡å¼--&quot;</span> + i;<br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * å‚æ•°1ï¼šäº¤æ¢æœºåç§°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤Default Exchage</span><br><span class="hljs-comment">             * å‚æ•°2ï¼šè·¯ç”±key,ç®€å•æ¨¡å¼å¯ä»¥ä¼ é€’é˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">             * å‚æ•°3ï¼šæ¶ˆæ¯å…¶å®ƒå±æ€§</span><br><span class="hljs-comment">             * å‚æ•°4ï¼šæ¶ˆæ¯å†…å®¹</span><br><span class="hljs-comment">             */</span><br>            channel.basicPublish(FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>            System.out.println(<span class="hljs-string">&quot;å·²å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);<br>        &#125;<br><br>        <span class="hljs-comment">// å…³é—­èµ„æº</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2ï¼‰æ¶ˆè´¹è€…1-1"><a href="#2ï¼‰æ¶ˆè´¹è€…1-1" class="headerlink" title="2ï¼‰æ¶ˆè´¹è€…1"></a>2ï¼‰æ¶ˆè´¹è€…1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.ps;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer1</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//å£°æ˜äº¤æ¢æœº</span><br>        channel.exchangeDeclare(Producer.FANOUT_EXCHAGE, BuiltinExchangeType.FANOUT);<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.FANOUT_QUEUE_1, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœº</span><br>        channel.queueBind(Producer.FANOUT_QUEUE_1, Producer.FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç†</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š</span><br><span class="hljs-comment">             * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€)</span><br><span class="hljs-comment">             * properties å±æ€§ä¿¡æ¯</span><br><span class="hljs-comment">             * body æ¶ˆæ¯</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//è·¯ç”±key</span><br>                System.out.println(<span class="hljs-string">&quot;è·¯ç”±keyä¸ºï¼š&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//äº¤æ¢æœº</span><br>                System.out.println(<span class="hljs-string">&quot;äº¤æ¢æœºä¸ºï¼š&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//æ¶ˆæ¯id</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯idä¸ºï¼š&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…1-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.FANOUT_QUEUE_1, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="3ï¼‰æ¶ˆè´¹è€…2-1"><a href="#3ï¼‰æ¶ˆè´¹è€…2-1" class="headerlink" title="3ï¼‰æ¶ˆè´¹è€…2"></a>3ï¼‰æ¶ˆè´¹è€…2</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.ps;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer2</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//å£°æ˜äº¤æ¢æœº</span><br>        channel.exchangeDeclare(Producer.FANOUT_EXCHAGE, BuiltinExchangeType.FANOUT);<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.FANOUT_QUEUE_2, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœº</span><br>        channel.queueBind(Producer.FANOUT_QUEUE_2, Producer.FANOUT_EXCHAGE, <span class="hljs-string">&quot;&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç†</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š</span><br><span class="hljs-comment">             * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€)</span><br><span class="hljs-comment">             * properties å±æ€§ä¿¡æ¯</span><br><span class="hljs-comment">             * body æ¶ˆæ¯</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//è·¯ç”±key</span><br>                System.out.println(<span class="hljs-string">&quot;è·¯ç”±keyä¸ºï¼š&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//äº¤æ¢æœº</span><br>                System.out.println(<span class="hljs-string">&quot;äº¤æ¢æœºä¸ºï¼š&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//æ¶ˆæ¯id</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯idä¸ºï¼š&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…2-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.FANOUT_QUEUE_2, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-3-3-æµ‹è¯•"><a href="#4-3-3-æµ‹è¯•" class="headerlink" title="4.3.3. æµ‹è¯•"></a>4.3.3. æµ‹è¯•</h3><p>å¯åŠ¨æ‰€æœ‰æ¶ˆè´¹è€…ï¼Œç„¶åä½¿ç”¨ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼›åœ¨æ¯ä¸ªæ¶ˆè´¹è€…å¯¹åº”çš„æ§åˆ¶å°å¯ä»¥æŸ¥çœ‹åˆ°ç”Ÿäº§è€…å‘é€çš„æ‰€æœ‰æ¶ˆæ¯ï¼›åˆ°è¾¾<strong>å¹¿æ’­</strong>çš„æ•ˆæœã€‚</p><p>åœ¨æ‰§è¡Œå®Œæµ‹è¯•ä»£ç åï¼Œå…¶å®åˆ°RabbitMQçš„ç®¡ç†åå°æ‰¾åˆ°<code>Exchanges</code>é€‰é¡¹å¡ï¼Œç‚¹å‡» <code>fanout_exchange</code> çš„äº¤æ¢æœºï¼Œå¯ä»¥æŸ¥çœ‹åˆ°å¦‚ä¸‹çš„ç»‘å®šï¼š</p><p><img src="/Hexo/assets/1556015006220.png" alt="1556015006220"></p><h3 id="4-3-4-å°ç»“"><a href="#4-3-4-å°ç»“" class="headerlink" title="4.3.4. å°ç»“"></a>4.3.4. å°ç»“</h3><p>äº¤æ¢æœºéœ€è¦ä¸é˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œç»‘å®šä¹‹åï¼›ä¸€ä¸ªæ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…éƒ½æ”¶åˆ°ã€‚</p><p><strong>å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸å·¥ä½œé˜Ÿåˆ—æ¨¡å¼çš„åŒºåˆ«</strong></p><p>1ã€å·¥ä½œé˜Ÿåˆ—æ¨¡å¼ä¸ç”¨å®šä¹‰äº¤æ¢æœºï¼Œè€Œå‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å¼éœ€è¦å®šä¹‰äº¤æ¢æœºã€‚ </p><p>2ã€å‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å¼çš„ç”Ÿäº§æ–¹æ˜¯é¢å‘äº¤æ¢æœºå‘é€æ¶ˆæ¯ï¼Œå·¥ä½œé˜Ÿåˆ—æ¨¡å¼çš„ç”Ÿäº§æ–¹æ˜¯é¢å‘é˜Ÿåˆ—å‘é€æ¶ˆæ¯(åº•å±‚ä½¿ç”¨é»˜è®¤äº¤æ¢æœº)ã€‚</p><p>3ã€å‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å¼éœ€è¦è®¾ç½®é˜Ÿåˆ—å’Œäº¤æ¢æœºçš„ç»‘å®šï¼Œå·¥ä½œé˜Ÿåˆ—æ¨¡å¼ä¸éœ€è¦è®¾ç½®ï¼Œå®é™…ä¸Šå·¥ä½œé˜Ÿåˆ—æ¨¡å¼ä¼šå°†é˜Ÿåˆ—ç»‘ å®šåˆ°é»˜è®¤çš„äº¤æ¢æœº ã€‚</p><h2 id="4-4-Routingè·¯ç”±æ¨¡å¼"><a href="#4-4-Routingè·¯ç”±æ¨¡å¼" class="headerlink" title="4.4. Routingè·¯ç”±æ¨¡å¼"></a>4.4. Routingè·¯ç”±æ¨¡å¼</h2><h3 id="4-4-1-æ¨¡å¼è¯´æ˜"><a href="#4-4-1-æ¨¡å¼è¯´æ˜" class="headerlink" title="4.4.1. æ¨¡å¼è¯´æ˜"></a>4.4.1. æ¨¡å¼è¯´æ˜</h3><p>è·¯ç”±æ¨¡å¼ç‰¹ç‚¹ï¼š</p><ul><li>é˜Ÿåˆ—ä¸äº¤æ¢æœºçš„ç»‘å®šï¼Œä¸èƒ½æ˜¯ä»»æ„ç»‘å®šäº†ï¼Œè€Œæ˜¯è¦æŒ‡å®šä¸€ä¸ª<code>RoutingKey</code>ï¼ˆè·¯ç”±keyï¼‰</li><li>æ¶ˆæ¯çš„å‘é€æ–¹åœ¨ å‘ Exchangeå‘é€æ¶ˆæ¯æ—¶ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šæ¶ˆæ¯çš„ <code>RoutingKey</code>ã€‚</li><li>Exchangeä¸å†æŠŠæ¶ˆæ¯äº¤ç»™æ¯ä¸€ä¸ªç»‘å®šçš„é˜Ÿåˆ—ï¼Œè€Œæ˜¯æ ¹æ®æ¶ˆæ¯çš„<code>Routing Key</code>è¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰é˜Ÿåˆ—çš„<code>Routingkey</code>ä¸æ¶ˆæ¯çš„ <code>Routing key</code>å®Œå…¨ä¸€è‡´ï¼Œæ‰ä¼šæ¥æ”¶åˆ°æ¶ˆæ¯</li></ul><p><img src="/Hexo/assets/1556029284397.png" alt="1556029284397"></p><p>å›¾è§£ï¼š</p><ul><li>Pï¼šç”Ÿäº§è€…ï¼Œå‘Exchangeå‘é€æ¶ˆæ¯ï¼Œå‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šæŒ‡å®šä¸€ä¸ªrouting keyã€‚</li><li>Xï¼šExchangeï¼ˆäº¤æ¢æœºï¼‰ï¼Œæ¥æ”¶ç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œç„¶åæŠŠæ¶ˆæ¯é€’äº¤ç»™ ä¸routing keyå®Œå…¨åŒ¹é…çš„é˜Ÿåˆ—</li><li>C1ï¼šæ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦routing key ä¸º error çš„æ¶ˆæ¯</li><li>C2ï¼šæ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦routing key ä¸º infoã€errorã€warning çš„æ¶ˆæ¯</li></ul><h3 id="4-4-2-ä»£ç "><a href="#4-4-2-ä»£ç " class="headerlink" title="4.4.2. ä»£ç "></a>4.4.2. ä»£ç </h3><p>åœ¨ç¼–ç ä¸Šä¸ <code>Publish/Subscribeå‘å¸ƒä¸è®¢é˜…æ¨¡å¼</code> çš„åŒºåˆ«æ˜¯äº¤æ¢æœºçš„ç±»å‹ä¸ºï¼šDirectï¼Œè¿˜æœ‰é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœºçš„æ—¶å€™éœ€è¦æŒ‡å®šrouting keyã€‚</p><h4 id="1ï¼‰ç”Ÿäº§è€…-2"><a href="#1ï¼‰ç”Ÿäº§è€…-2" class="headerlink" title="1ï¼‰ç”Ÿäº§è€…"></a>1ï¼‰ç”Ÿäº§è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.routing;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.BuiltinExchangeType;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è·¯ç”±æ¨¡å¼çš„äº¤æ¢æœºç±»å‹ä¸ºï¼šdirect</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-comment">//äº¤æ¢æœºåç§°</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DIRECT_EXCHAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;direct_exchange&quot;</span>;<br>    <span class="hljs-comment">//é˜Ÿåˆ—åç§°</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DIRECT_QUEUE_INSERT</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;direct_queue_insert&quot;</span>;<br>    <span class="hljs-comment">//é˜Ÿåˆ—åç§°</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DIRECT_QUEUE_UPDATE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;direct_queue_update&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//åˆ›å»ºè¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å£°æ˜äº¤æ¢æœº</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šäº¤æ¢æœºåç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šäº¤æ¢æœºç±»å‹ï¼Œfanoutã€topicã€directã€headers</span><br><span class="hljs-comment">         */</span><br>        channel.exchangeDeclare(DIRECT_EXCHAGE, BuiltinExchangeType.DIRECT);<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(DIRECT_QUEUE_INSERT, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br>        channel.queueDeclare(DIRECT_QUEUE_UPDATE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœº</span><br>        channel.queueBind(DIRECT_QUEUE_INSERT, DIRECT_EXCHAGE, <span class="hljs-string">&quot;insert&quot;</span>);<br>        channel.queueBind(DIRECT_QUEUE_UPDATE, DIRECT_EXCHAGE, <span class="hljs-string">&quot;update&quot;</span>);<br><br>        <span class="hljs-comment">// å‘é€ä¿¡æ¯</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;æ–°å¢äº†å•†å“ã€‚è·¯ç”±æ¨¡å¼ï¼›routing key ä¸º insert &quot;</span> ;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šäº¤æ¢æœºåç§°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤Default Exchage</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šè·¯ç”±key,ç®€å•æ¨¡å¼å¯ä»¥ä¼ é€’é˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯å…¶å®ƒå±æ€§</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ¶ˆæ¯å†…å®¹</span><br><span class="hljs-comment">         */</span><br>        channel.basicPublish(DIRECT_EXCHAGE, <span class="hljs-string">&quot;insert&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;å·²å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);<br><br>        <span class="hljs-comment">// å‘é€ä¿¡æ¯</span><br>        message = <span class="hljs-string">&quot;ä¿®æ”¹äº†å•†å“ã€‚è·¯ç”±æ¨¡å¼ï¼›routing key ä¸º update&quot;</span> ;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šäº¤æ¢æœºåç§°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤Default Exchage</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šè·¯ç”±key,ç®€å•æ¨¡å¼å¯ä»¥ä¼ é€’é˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯å…¶å®ƒå±æ€§</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ¶ˆæ¯å†…å®¹</span><br><span class="hljs-comment">         */</span><br>        channel.basicPublish(DIRECT_EXCHAGE, <span class="hljs-string">&quot;update&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;å·²å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);<br><br>        <span class="hljs-comment">// å…³é—­èµ„æº</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="2ï¼‰æ¶ˆè´¹è€…1-2"><a href="#2ï¼‰æ¶ˆè´¹è€…1-2" class="headerlink" title="2ï¼‰æ¶ˆè´¹è€…1"></a>2ï¼‰æ¶ˆè´¹è€…1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.routing;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer1</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//å£°æ˜äº¤æ¢æœº</span><br>        channel.exchangeDeclare(Producer.DIRECT_EXCHAGE, BuiltinExchangeType.DIRECT);<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.DIRECT_QUEUE_INSERT, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœº</span><br>        channel.queueBind(Producer.DIRECT_QUEUE_INSERT, Producer.DIRECT_EXCHAGE, <span class="hljs-string">&quot;insert&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç†</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š</span><br><span class="hljs-comment">             * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€)</span><br><span class="hljs-comment">             * properties å±æ€§ä¿¡æ¯</span><br><span class="hljs-comment">             * body æ¶ˆæ¯</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//è·¯ç”±key</span><br>                System.out.println(<span class="hljs-string">&quot;è·¯ç”±keyä¸ºï¼š&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//äº¤æ¢æœº</span><br>                System.out.println(<span class="hljs-string">&quot;äº¤æ¢æœºä¸ºï¼š&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//æ¶ˆæ¯id</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯idä¸ºï¼š&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…1-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.DIRECT_QUEUE_INSERT, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="3ï¼‰æ¶ˆè´¹è€…2-2"><a href="#3ï¼‰æ¶ˆè´¹è€…2-2" class="headerlink" title="3ï¼‰æ¶ˆè´¹è€…2"></a>3ï¼‰æ¶ˆè´¹è€…2</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.routing;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer2</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//å£°æ˜äº¤æ¢æœº</span><br>        channel.exchangeDeclare(Producer.DIRECT_EXCHAGE, BuiltinExchangeType.DIRECT);<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.DIRECT_QUEUE_UPDATE, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœº</span><br>        channel.queueBind(Producer.DIRECT_QUEUE_UPDATE, Producer.DIRECT_EXCHAGE, <span class="hljs-string">&quot;update&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç†</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š</span><br><span class="hljs-comment">             * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€)</span><br><span class="hljs-comment">             * properties å±æ€§ä¿¡æ¯</span><br><span class="hljs-comment">             * body æ¶ˆæ¯</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//è·¯ç”±key</span><br>                System.out.println(<span class="hljs-string">&quot;è·¯ç”±keyä¸ºï¼š&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//äº¤æ¢æœº</span><br>                System.out.println(<span class="hljs-string">&quot;äº¤æ¢æœºä¸ºï¼š&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//æ¶ˆæ¯id</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯idä¸ºï¼š&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…2-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.DIRECT_QUEUE_UPDATE, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="4-4-3-æµ‹è¯•"><a href="#4-4-3-æµ‹è¯•" class="headerlink" title="4.4.3. æµ‹è¯•"></a>4.4.3. æµ‹è¯•</h3><p>å¯åŠ¨æ‰€æœ‰æ¶ˆè´¹è€…ï¼Œç„¶åä½¿ç”¨ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼›åœ¨æ¶ˆè´¹è€…å¯¹åº”çš„æ§åˆ¶å°å¯ä»¥æŸ¥çœ‹åˆ°ç”Ÿäº§è€…å‘é€å¯¹åº”routing keyå¯¹åº”é˜Ÿåˆ—çš„æ¶ˆæ¯ï¼›åˆ°è¾¾<strong>æŒ‰ç…§éœ€è¦æ¥æ”¶</strong>çš„æ•ˆæœã€‚</p><p>åœ¨æ‰§è¡Œå®Œæµ‹è¯•ä»£ç åï¼Œå…¶å®åˆ°RabbitMQçš„ç®¡ç†åå°æ‰¾åˆ°<code>Exchanges</code>é€‰é¡¹å¡ï¼Œç‚¹å‡» <code>direct_exchange</code> çš„äº¤æ¢æœºï¼Œå¯ä»¥æŸ¥çœ‹åˆ°å¦‚ä¸‹çš„ç»‘å®šï¼š</p><p><img src="https://pic.imgdb.cn/item/63736dd116f2c2beb172aa66.png" alt="1556031175744"></p><h3 id="4-4-4-å°ç»“"><a href="#4-4-4-å°ç»“" class="headerlink" title="4.4.4. å°ç»“"></a>4.4.4. å°ç»“</h3><p>Routingæ¨¡å¼è¦æ±‚é˜Ÿåˆ—åœ¨ç»‘å®šäº¤æ¢æœºæ—¶è¦æŒ‡å®šrouting keyï¼Œæ¶ˆæ¯ä¼šè½¬å‘åˆ°ç¬¦åˆrouting keyçš„é˜Ÿåˆ—ã€‚</p><h2 id="4-5-Topicsé€šé…ç¬¦æ¨¡å¼"><a href="#4-5-Topicsé€šé…ç¬¦æ¨¡å¼" class="headerlink" title="4.5. Topicsé€šé…ç¬¦æ¨¡å¼"></a>4.5. Topicsé€šé…ç¬¦æ¨¡å¼</h2><h3 id="4-5-1-æ¨¡å¼è¯´æ˜"><a href="#4-5-1-æ¨¡å¼è¯´æ˜" class="headerlink" title="4.5.1. æ¨¡å¼è¯´æ˜"></a>4.5.1. æ¨¡å¼è¯´æ˜</h3><p><code>Topic</code>ç±»å‹ä¸<code>Direct</code>ç›¸æ¯”ï¼Œéƒ½æ˜¯å¯ä»¥æ ¹æ®<code>RoutingKey</code>æŠŠæ¶ˆæ¯è·¯ç”±åˆ°ä¸åŒçš„é˜Ÿåˆ—ã€‚åªä¸è¿‡<code>Topic</code>ç±»å‹<code>Exchange</code>å¯ä»¥è®©é˜Ÿåˆ—åœ¨ç»‘å®š<code>Routing key</code> çš„æ—¶å€™<strong>ä½¿ç”¨é€šé…ç¬¦</strong>ï¼</p><p><code>Routingkey</code> ä¸€èˆ¬éƒ½æ˜¯æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯ç»„æˆï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä»¥â€.â€åˆ†å‰²ï¼Œä¾‹å¦‚ï¼š <code>item.insert</code></p><p> é€šé…ç¬¦è§„åˆ™ï¼š</p><p><code>#</code>ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯</p><p><code>*</code>ï¼šåŒ¹é…ä¸å¤šä¸å°‘æ°å¥½1ä¸ªè¯</p><p>ä¸¾ä¾‹ï¼š</p><p><code>item.#</code>ï¼šèƒ½å¤ŸåŒ¹é…<code>item.insert.abc</code> æˆ–è€… <code>item.insert</code></p><p><code>item.*</code>ï¼šåªèƒ½åŒ¹é…<code>item.insert</code></p><p><img src="https://pic.imgdb.cn/item/63736dd416f2c2beb172ade7.png" alt="1556031362048"></p><p><img src="https://pic.imgdb.cn/item/63736dd316f2c2beb172ac79.png" alt="1556031519931"></p><p>å›¾è§£ï¼š</p><ul><li>çº¢è‰²Queueï¼šç»‘å®šçš„æ˜¯<code>usa.#</code> ï¼Œå› æ­¤å‡¡æ˜¯ä»¥ <code>usa.</code>å¼€å¤´çš„<code>routing key</code> éƒ½ä¼šè¢«åŒ¹é…åˆ°</li><li>é»„è‰²Queueï¼šç»‘å®šçš„æ˜¯<code>#.news</code> ï¼Œå› æ­¤å‡¡æ˜¯ä»¥ <code>.news</code>ç»“å°¾çš„ <code>routing key</code> éƒ½ä¼šè¢«åŒ¹é…</li></ul><h3 id="4-5-2-ä»£ç "><a href="#4-5-2-ä»£ç " class="headerlink" title="4.5.2. ä»£ç "></a>4.5.2. ä»£ç </h3><h4 id="1ï¼‰ç”Ÿäº§è€…-3"><a href="#1ï¼‰ç”Ÿäº§è€…-3" class="headerlink" title="1ï¼‰ç”Ÿäº§è€…"></a>1ï¼‰ç”Ÿäº§è€…</h4><p>ä½¿ç”¨topicç±»å‹çš„Exchangeï¼Œå‘é€æ¶ˆæ¯çš„routing keyæœ‰3ç§ï¼š <code>item.insert</code>ã€<code>item.update</code>ã€<code>item.delete</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.topic;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.BuiltinExchangeType;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Channel;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.Connection;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é€šé…ç¬¦Topicçš„äº¤æ¢æœºç±»å‹ä¸ºï¼štopic</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> &#123;<br><br>    <span class="hljs-comment">//äº¤æ¢æœºåç§°</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC_EXCHAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;topic_exchange&quot;</span>;<br>    <span class="hljs-comment">//é˜Ÿåˆ—åç§°</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC_QUEUE_1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;topic_queue_1&quot;</span>;<br>    <span class="hljs-comment">//é˜Ÿåˆ—åç§°</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC_QUEUE_2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;topic_queue_2&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//åˆ›å»ºè¿æ¥</span><br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å£°æ˜äº¤æ¢æœº</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šäº¤æ¢æœºåç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šäº¤æ¢æœºç±»å‹ï¼Œfanoutã€topicã€topicã€headers</span><br><span class="hljs-comment">         */</span><br>        channel.exchangeDeclare(TOPIC_EXCHAGE, BuiltinExchangeType.TOPIC);<br><br><br>        <span class="hljs-comment">// å‘é€ä¿¡æ¯</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;æ–°å¢äº†å•†å“ã€‚Topicæ¨¡å¼ï¼›routing key ä¸º item.insert &quot;</span> ;<br>        channel.basicPublish(TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.insert&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;å·²å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);<br><br>        <span class="hljs-comment">// å‘é€ä¿¡æ¯</span><br>        message = <span class="hljs-string">&quot;ä¿®æ”¹äº†å•†å“ã€‚Topicæ¨¡å¼ï¼›routing key ä¸º item.update&quot;</span> ;<br>        channel.basicPublish(TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.update&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;å·²å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);<br><br>        <span class="hljs-comment">// å‘é€ä¿¡æ¯</span><br>        message = <span class="hljs-string">&quot;åˆ é™¤äº†å•†å“ã€‚Topicæ¨¡å¼ï¼›routing key ä¸º item.delete&quot;</span> ;<br>        channel.basicPublish(TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.delete&quot;</span>, <span class="hljs-literal">null</span>, message.getBytes());<br>        System.out.println(<span class="hljs-string">&quot;å·²å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);<br><br>        <span class="hljs-comment">// å…³é—­èµ„æº</span><br>        channel.close();<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="2ï¼‰æ¶ˆè´¹è€…1-3"><a href="#2ï¼‰æ¶ˆè´¹è€…1-3" class="headerlink" title="2ï¼‰æ¶ˆè´¹è€…1"></a>2ï¼‰æ¶ˆè´¹è€…1</h4><p>æ¥æ”¶ä¸¤ç§ç±»å‹çš„æ¶ˆæ¯ï¼šæ›´æ–°å•†å“å’Œåˆ é™¤å•†å“</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.topic;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer1</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//å£°æ˜äº¤æ¢æœº</span><br>        channel.exchangeDeclare(Producer.TOPIC_EXCHAGE, BuiltinExchangeType.TOPIC);<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.TOPIC_QUEUE_1, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœº</span><br>        channel.queueBind(Producer.TOPIC_QUEUE_1, Producer.TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.update&quot;</span>);<br>        channel.queueBind(Producer.TOPIC_QUEUE_1, Producer.TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.delete&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç†</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š</span><br><span class="hljs-comment">             * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€)</span><br><span class="hljs-comment">             * properties å±æ€§ä¿¡æ¯</span><br><span class="hljs-comment">             * body æ¶ˆæ¯</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//è·¯ç”±key</span><br>                System.out.println(<span class="hljs-string">&quot;è·¯ç”±keyä¸ºï¼š&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//äº¤æ¢æœº</span><br>                System.out.println(<span class="hljs-string">&quot;äº¤æ¢æœºä¸ºï¼š&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//æ¶ˆæ¯id</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯idä¸ºï¼š&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…1-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.TOPIC_QUEUE_1, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="3ï¼‰æ¶ˆè´¹è€…2-3"><a href="#3ï¼‰æ¶ˆè´¹è€…2-3" class="headerlink" title="3ï¼‰æ¶ˆè´¹è€…2"></a>3ï¼‰æ¶ˆè´¹è€…2</h4><p>æ¥æ”¶æ‰€æœ‰ç±»å‹çš„æ¶ˆæ¯ï¼šæ–°å¢å•†å“ï¼Œæ›´æ–°å•†å“å’Œåˆ é™¤å•†å“ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.topic;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.util.ConnectionUtil;<br><span class="hljs-keyword">import</span> com.rabbitmq.client.*;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer2</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> ConnectionUtil.getConnection();<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢‘é“</span><br>        <span class="hljs-type">Channel</span> <span class="hljs-variable">channel</span> <span class="hljs-operator">=</span> connection.createChannel();<br><br>        <span class="hljs-comment">//å£°æ˜äº¤æ¢æœº</span><br>        channel.exchangeDeclare(Producer.TOPIC_EXCHAGE, BuiltinExchangeType.TOPIC);<br><br>        <span class="hljs-comment">// å£°æ˜ï¼ˆåˆ›å»ºï¼‰é˜Ÿåˆ—</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ˜¯å¦ç‹¬å æœ¬æ¬¡è¿æ¥</span><br><span class="hljs-comment">         * å‚æ•°4ï¼šæ˜¯å¦åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span><br><span class="hljs-comment">         * å‚æ•°5ï¼šé˜Ÿåˆ—å…¶å®ƒå‚æ•°</span><br><span class="hljs-comment">         */</span><br>        channel.queueDeclare(Producer.TOPIC_QUEUE_2, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>);<br><br>        <span class="hljs-comment">//é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœº</span><br>        channel.queueBind(Producer.TOPIC_QUEUE_2, Producer.TOPIC_EXCHAGE, <span class="hljs-string">&quot;item.*&quot;</span>);<br><br>        <span class="hljs-comment">//åˆ›å»ºæ¶ˆè´¹è€…ï¼›å¹¶è®¾ç½®æ¶ˆæ¯å¤„ç†</span><br>        <span class="hljs-type">DefaultConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConsumer</span>(channel)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * consumerTag æ¶ˆæ¯è€…æ ‡ç­¾ï¼Œåœ¨channel.basicConsumeæ—¶å€™å¯ä»¥æŒ‡å®š</span><br><span class="hljs-comment">             * envelope æ¶ˆæ¯åŒ…çš„å†…å®¹ï¼Œå¯ä»ä¸­è·å–æ¶ˆæ¯idï¼Œæ¶ˆæ¯routingkeyï¼Œäº¤æ¢æœºï¼Œæ¶ˆæ¯å’Œé‡ä¼ æ ‡å¿—(æ”¶åˆ°æ¶ˆæ¯å¤±è´¥åæ˜¯å¦éœ€è¦é‡æ–°å‘é€)</span><br><span class="hljs-comment">             * properties å±æ€§ä¿¡æ¯</span><br><span class="hljs-comment">             * body æ¶ˆæ¯</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleDelivery</span><span class="hljs-params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="hljs-type">byte</span>[] body)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>                <span class="hljs-comment">//è·¯ç”±key</span><br>                System.out.println(<span class="hljs-string">&quot;è·¯ç”±keyä¸ºï¼š&quot;</span> + envelope.getRoutingKey());<br>                <span class="hljs-comment">//äº¤æ¢æœº</span><br>                System.out.println(<span class="hljs-string">&quot;äº¤æ¢æœºä¸ºï¼š&quot;</span> + envelope.getExchange());<br>                <span class="hljs-comment">//æ¶ˆæ¯id</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆæ¯idä¸ºï¼š&quot;</span> + envelope.getDeliveryTag());<br>                <span class="hljs-comment">//æ”¶åˆ°çš„æ¶ˆæ¯</span><br>                System.out.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…2-æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(body, <span class="hljs-string">&quot;utf-8&quot;</span>));<br>            &#125;<br>        &#125;;<br>        <span class="hljs-comment">//ç›‘å¬æ¶ˆæ¯</span><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šé˜Ÿåˆ—åç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼Œè®¾ç½®ä¸ºtrueä¸ºè¡¨ç¤ºæ¶ˆæ¯æ¥æ”¶åˆ°è‡ªåŠ¨å‘mqå›å¤æ¥æ”¶åˆ°äº†ï¼Œmqæ¥æ”¶åˆ°å›å¤ä¼šåˆ é™¤æ¶ˆæ¯ï¼Œè®¾ç½®ä¸ºfalseåˆ™éœ€è¦æ‰‹åŠ¨ç¡®è®¤</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šæ¶ˆæ¯æ¥æ”¶åˆ°åå›è°ƒ</span><br><span class="hljs-comment">         */</span><br>        channel.basicConsume(Producer.TOPIC_QUEUE_2, <span class="hljs-literal">true</span>, consumer);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="4-5-3-æµ‹è¯•"><a href="#4-5-3-æµ‹è¯•" class="headerlink" title="4.5.3. æµ‹è¯•"></a>4.5.3. æµ‹è¯•</h3><p>å¯åŠ¨æ‰€æœ‰æ¶ˆè´¹è€…ï¼Œç„¶åä½¿ç”¨ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼›åœ¨æ¶ˆè´¹è€…å¯¹åº”çš„æ§åˆ¶å°å¯ä»¥æŸ¥çœ‹åˆ°ç”Ÿäº§è€…å‘é€å¯¹åº”routing keyå¯¹åº”é˜Ÿåˆ—çš„æ¶ˆæ¯ï¼›åˆ°è¾¾<strong>æŒ‰ç…§éœ€è¦æ¥æ”¶</strong>çš„æ•ˆæœï¼›å¹¶ä¸”è¿™äº›routing keyå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚</p><p>åœ¨æ‰§è¡Œå®Œæµ‹è¯•ä»£ç åï¼Œå…¶å®åˆ°RabbitMQçš„ç®¡ç†åå°æ‰¾åˆ°<code>Exchanges</code>é€‰é¡¹å¡ï¼Œç‚¹å‡» <code>topic_exchange</code> çš„äº¤æ¢æœºï¼Œå¯ä»¥æŸ¥çœ‹åˆ°å¦‚ä¸‹çš„ç»‘å®šï¼š</p><p><img src="/Hexo/assets/1556032433333.png" alt="1556032433333"></p><h3 id="4-5-4-å°ç»“"><a href="#4-5-4-å°ç»“" class="headerlink" title="4.5.4. å°ç»“"></a>4.5.4. å°ç»“</h3><p>Topicä¸»é¢˜æ¨¡å¼å¯ä»¥å®ç° <code>Publish/Subscribeå‘å¸ƒä¸è®¢é˜…æ¨¡å¼</code> å’Œ <code> Routingè·¯ç”±æ¨¡å¼</code> çš„åŠŸèƒ½ï¼›åªæ˜¯Topicåœ¨é…ç½®routing key çš„æ—¶å€™å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Œæ˜¾å¾—æ›´åŠ çµæ´»ã€‚</p><h2 id="4-6-æ¨¡å¼æ€»ç»“"><a href="#4-6-æ¨¡å¼æ€»ç»“" class="headerlink" title="4.6. æ¨¡å¼æ€»ç»“"></a>4.6. æ¨¡å¼æ€»ç»“</h2><p>RabbitMQå·¥ä½œæ¨¡å¼ï¼š<br><strong>1ã€ç®€å•æ¨¡å¼ HelloWorld</strong><br>ä¸€ä¸ªç”Ÿäº§è€…ã€ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä¸éœ€è¦è®¾ç½®äº¤æ¢æœºï¼ˆä½¿ç”¨é»˜è®¤çš„äº¤æ¢æœºï¼‰</p><p><strong>2ã€å·¥ä½œé˜Ÿåˆ—æ¨¡å¼ Work Queue</strong><br>ä¸€ä¸ªç”Ÿäº§è€…ã€å¤šä¸ªæ¶ˆè´¹è€…ï¼ˆç«äº‰å…³ç³»ï¼‰ï¼Œä¸éœ€è¦è®¾ç½®äº¤æ¢æœºï¼ˆä½¿ç”¨é»˜è®¤çš„äº¤æ¢æœºï¼‰</p><p><strong>3ã€å‘å¸ƒè®¢é˜…æ¨¡å¼ Publish&#x2F;subscribe</strong><br>éœ€è¦è®¾ç½®ç±»å‹ä¸ºfanoutçš„äº¤æ¢æœºï¼Œå¹¶ä¸”äº¤æ¢æœºå’Œé˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œå½“å‘é€æ¶ˆæ¯åˆ°äº¤æ¢æœºåï¼Œäº¤æ¢æœºä¼šå°†æ¶ˆæ¯å‘é€åˆ°ç»‘å®šçš„é˜Ÿåˆ—</p><p><strong>4ã€è·¯ç”±æ¨¡å¼ Routing</strong><br>éœ€è¦è®¾ç½®ç±»å‹ä¸ºdirectçš„äº¤æ¢æœºï¼Œäº¤æ¢æœºå’Œé˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œå¹¶ä¸”æŒ‡å®šrouting keyï¼Œå½“å‘é€æ¶ˆæ¯åˆ°äº¤æ¢æœºåï¼Œäº¤æ¢æœºä¼šæ ¹æ®routing keyå°†æ¶ˆæ¯å‘é€åˆ°å¯¹åº”çš„é˜Ÿåˆ—</p><p><strong>5ã€é€šé…ç¬¦æ¨¡å¼ Topic</strong><br>éœ€è¦è®¾ç½®ç±»å‹ä¸ºtopicçš„äº¤æ¢æœºï¼Œäº¤æ¢æœºå’Œé˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œå¹¶ä¸”æŒ‡å®šé€šé…ç¬¦æ–¹å¼çš„routing keyï¼Œå½“å‘é€æ¶ˆæ¯åˆ°äº¤æ¢æœºåï¼Œäº¤æ¢æœºä¼šæ ¹æ®routing keyå°†æ¶ˆæ¯å‘é€åˆ°å¯¹åº”çš„é˜Ÿåˆ—</p><h1 id="5-Spring-æ•´åˆRabbitMQ"><a href="#5-Spring-æ•´åˆRabbitMQ" class="headerlink" title="5. Spring æ•´åˆRabbitMQ"></a>5. Spring æ•´åˆRabbitMQ</h1><h2 id="5-1-æ­å»ºç”Ÿäº§è€…å·¥ç¨‹"><a href="#5-1-æ­å»ºç”Ÿäº§è€…å·¥ç¨‹" class="headerlink" title="5.1. æ­å»ºç”Ÿäº§è€…å·¥ç¨‹"></a>5.1. æ­å»ºç”Ÿäº§è€…å·¥ç¨‹</h2><h3 id="5-1-1-åˆ›å»ºå·¥ç¨‹"><a href="#5-1-1-åˆ›å»ºå·¥ç¨‹" class="headerlink" title="5.1.1. åˆ›å»ºå·¥ç¨‹"></a>5.1.1. åˆ›å»ºå·¥ç¨‹</h3><p><img src="/Hexo/assets/1565149342994.png" alt="1565149342994"></p><p><img src="/Hexo/assets/1565144326498.png" alt="1565144326498"></p><h3 id="5-1-2-æ·»åŠ ä¾èµ–"><a href="#5-1-2-æ·»åŠ ä¾èµ–" class="headerlink" title="5.1.2. æ·»åŠ ä¾èµ–"></a>5.1.2. æ·»åŠ ä¾èµ–</h3><p>ä¿®æ”¹pom.xmlæ–‡ä»¶å†…å®¹ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-rabbitmq-producer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.7.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.amqp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-rabbit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.8.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.7.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-1-3-é…ç½®æ•´åˆ"><a href="#5-1-3-é…ç½®æ•´åˆ" class="headerlink" title="5.1.3. é…ç½®æ•´åˆ"></a>5.1.3. é…ç½®æ•´åˆ</h3><ol><li>åˆ›å»º<code>spring-rabbitmq-producer\src\main\resources\properties\rabbitmq.properties</code>è¿æ¥å‚æ•°ç­‰é…ç½®æ–‡ä»¶ï¼›</li></ol><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">rabbitmq.host</span>=<span class="hljs-string">192.168.12.135</span><br><span class="hljs-attr">rabbitmq.port</span>=<span class="hljs-string">5672</span><br><span class="hljs-attr">rabbitmq.username</span>=<span class="hljs-string">heima</span><br><span class="hljs-attr">rabbitmq.password</span>=<span class="hljs-string">heima</span><br><span class="hljs-attr">rabbitmq.virtual-host</span>=<span class="hljs-string">/itcast</span><br></code></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»º <code>spring-rabbitmq-producer\src\main\resources\spring\spring-rabbitmq.xml</code> æ•´åˆé…ç½®æ–‡ä»¶ï¼›</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:rabbit</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/rabbit&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/rabbit</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/rabbit/spring-rabbit.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--åŠ è½½é…ç½®æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:properties/rabbitmq.properties&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- å®šä¹‰rabbitmq connectionFactory --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:connection-factory</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.host&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.port&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">username</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.username&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.password&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">virtual-host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.virtual-host&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--å®šä¹‰ç®¡ç†äº¤æ¢æœºã€é˜Ÿåˆ—--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:admin</span> <span class="hljs-attr">connection-factory</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--å®šä¹‰æŒä¹…åŒ–é˜Ÿåˆ—ï¼Œä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºï¼›ä¸ç»‘å®šåˆ°äº¤æ¢æœºåˆ™ç»‘å®šåˆ°é»˜è®¤äº¤æ¢æœº</span><br><span class="hljs-comment">    é»˜è®¤äº¤æ¢æœºç±»å‹ä¸ºdirectï¼Œåå­—ä¸ºï¼š&quot;&quot;ï¼Œè·¯ç”±é”®ä¸ºé˜Ÿåˆ—çš„åç§°</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_queue&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_queue&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~å¹¿æ’­ï¼›æ‰€æœ‰é˜Ÿåˆ—éƒ½èƒ½æ”¶åˆ°æ¶ˆæ¯~~~~~~~~~~~~~~~~~~~~~~~~~~~~ --&gt;</span><br>    <span class="hljs-comment">&lt;!--å®šä¹‰å¹¿æ’­äº¤æ¢æœºä¸­çš„æŒä¹…åŒ–é˜Ÿåˆ—ï¼Œä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_fanout_queue_1&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_fanout_queue_1&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--å®šä¹‰å¹¿æ’­äº¤æ¢æœºä¸­çš„æŒä¹…åŒ–é˜Ÿåˆ—ï¼Œä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_fanout_queue_2&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_fanout_queue_2&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!--å®šä¹‰å¹¿æ’­ç±»å‹äº¤æ¢æœºï¼›å¹¶ç»‘å®šä¸Šè¿°ä¸¤ä¸ªé˜Ÿåˆ—--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:fanout-exchange</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_fanout_exchange&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_fanout_exchange&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:bindings</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_fanout_queue_1&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_fanout_queue_2&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:bindings</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:fanout-exchange</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~é€šé…ç¬¦ï¼›*åŒ¹é…ä¸€ä¸ªå•è¯ï¼Œ#åŒ¹é…å¤šä¸ªå•è¯ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ --&gt;</span><br>    <span class="hljs-comment">&lt;!--å®šä¹‰å¹¿æ’­äº¤æ¢æœºä¸­çš„æŒä¹…åŒ–é˜Ÿåˆ—ï¼Œä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_topic_queue_star&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_topic_queue_star&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--å®šä¹‰å¹¿æ’­äº¤æ¢æœºä¸­çš„æŒä¹…åŒ–é˜Ÿåˆ—ï¼Œä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_topic_queue_well&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_topic_queue_well&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br>    <span class="hljs-comment">&lt;!--å®šä¹‰å¹¿æ’­äº¤æ¢æœºä¸­çš„æŒä¹…åŒ–é˜Ÿåˆ—ï¼Œä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:queue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_topic_queue_well2&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_topic_queue_well2&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:topic-exchange</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;spring_topic_exchange&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;spring_topic_exchange&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:bindings</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;heima.*&quot;</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_topic_queue_star&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;heima.#&quot;</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_topic_queue_well&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:binding</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;itcast.#&quot;</span> <span class="hljs-attr">queue</span>=<span class="hljs-string">&quot;spring_topic_queue_well2&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:bindings</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:topic-exchange</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--å®šä¹‰rabbitTemplateå¯¹è±¡æ“ä½œå¯ä»¥åœ¨ä»£ç ä¸­æ–¹ä¾¿å‘é€æ¶ˆæ¯--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:template</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;rabbitTemplate&quot;</span> <span class="hljs-attr">connection-factory</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-1-4-å‘é€æ¶ˆæ¯"><a href="#5-1-4-å‘é€æ¶ˆæ¯" class="headerlink" title="5.1.4. å‘é€æ¶ˆæ¯"></a>5.1.4. å‘é€æ¶ˆæ¯</h3><p>åˆ›å»ºæµ‹è¯•æ–‡ä»¶ <code>spring-rabbitmq-producer\src\test\java\com\itheima\rabbitmq\ProducerTest.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="hljs-meta">@ContextConfiguration(locations = &quot;classpath:spring/spring-rabbitmq.xml&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProducerTest</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RabbitTemplate rabbitTemplate;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åªå‘é˜Ÿåˆ—æ¶ˆæ¯</span><br><span class="hljs-comment">     * é»˜è®¤äº¤æ¢æœºç±»å‹ä¸º direct</span><br><span class="hljs-comment">     * äº¤æ¢æœºçš„åç§°ä¸ºç©ºï¼Œè·¯ç”±é”®ä¸ºé˜Ÿåˆ—çš„åç§°</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queueTest</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//è·¯ç”±é”®ä¸é˜Ÿåˆ—åŒå</span><br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_queue&quot;</span>, <span class="hljs-string">&quot;åªå‘é˜Ÿåˆ—spring_queueçš„æ¶ˆæ¯ã€‚&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å‘é€å¹¿æ’­</span><br><span class="hljs-comment">     * äº¤æ¢æœºç±»å‹ä¸º fanout</span><br><span class="hljs-comment">     * ç»‘å®šåˆ°è¯¥äº¤æ¢æœºçš„æ‰€æœ‰é˜Ÿåˆ—éƒ½èƒ½å¤Ÿæ”¶åˆ°æ¶ˆæ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fanoutTest</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šäº¤æ¢æœºåç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šè·¯ç”±é”®åï¼ˆå¹¿æ’­è®¾ç½®ä¸ºç©ºï¼‰</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šå‘é€çš„æ¶ˆæ¯å†…å®¹</span><br><span class="hljs-comment">         */</span><br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_fanout_exchange&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;å‘é€åˆ°spring_fanout_exchangeäº¤æ¢æœºçš„å¹¿æ’­æ¶ˆæ¯&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é€šé…ç¬¦</span><br><span class="hljs-comment">     * äº¤æ¢æœºç±»å‹ä¸º topic</span><br><span class="hljs-comment">     * åŒ¹é…è·¯ç”±é”®çš„é€šé…ç¬¦ï¼Œ*è¡¨ç¤ºä¸€ä¸ªå•è¯ï¼Œ#è¡¨ç¤ºå¤šä¸ªå•è¯</span><br><span class="hljs-comment">     * ç»‘å®šåˆ°è¯¥äº¤æ¢æœºçš„åŒ¹é…é˜Ÿåˆ—èƒ½å¤Ÿæ”¶åˆ°å¯¹åº”æ¶ˆæ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">topicTest</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‚æ•°1ï¼šäº¤æ¢æœºåç§°</span><br><span class="hljs-comment">         * å‚æ•°2ï¼šè·¯ç”±é”®å</span><br><span class="hljs-comment">         * å‚æ•°3ï¼šå‘é€çš„æ¶ˆæ¯å†…å®¹</span><br><span class="hljs-comment">         */</span><br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_topic_exchange&quot;</span>, <span class="hljs-string">&quot;heima.bj&quot;</span>, <span class="hljs-string">&quot;å‘é€åˆ°spring_topic_exchangeäº¤æ¢æœºheima.bjçš„æ¶ˆæ¯&quot;</span>);<br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_topic_exchange&quot;</span>, <span class="hljs-string">&quot;heima.bj.1&quot;</span>, <span class="hljs-string">&quot;å‘é€åˆ°spring_topic_exchangeäº¤æ¢æœºheima.bj.1çš„æ¶ˆæ¯&quot;</span>);<br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_topic_exchange&quot;</span>, <span class="hljs-string">&quot;heima.bj.2&quot;</span>, <span class="hljs-string">&quot;å‘é€åˆ°spring_topic_exchangeäº¤æ¢æœºheima.bj.2çš„æ¶ˆæ¯&quot;</span>);<br>        rabbitTemplate.convertAndSend(<span class="hljs-string">&quot;spring_topic_exchange&quot;</span>, <span class="hljs-string">&quot;itcast.cn&quot;</span>, <span class="hljs-string">&quot;å‘é€åˆ°spring_topic_exchangeäº¤æ¢æœºitcast.cnçš„æ¶ˆæ¯&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="5-2-æ­å»ºæ¶ˆè´¹è€…å·¥ç¨‹"><a href="#5-2-æ­å»ºæ¶ˆè´¹è€…å·¥ç¨‹" class="headerlink" title="5.2. æ­å»ºæ¶ˆè´¹è€…å·¥ç¨‹"></a>5.2. æ­å»ºæ¶ˆè´¹è€…å·¥ç¨‹</h2><h3 id="5-2-1-åˆ›å»ºå·¥ç¨‹"><a href="#5-2-1-åˆ›å»ºå·¥ç¨‹" class="headerlink" title="5.2.1. åˆ›å»ºå·¥ç¨‹"></a>5.2.1. åˆ›å»ºå·¥ç¨‹</h3><p><img src="https://pic.imgdb.cn/item/63736dda16f2c2beb172b3bb.png" alt="1565149374831"></p><p><img src="https://pic.imgdb.cn/item/63736ddc16f2c2beb172b4ef.png" alt="1565144775216"></p><h3 id="5-2-2-æ·»åŠ ä¾èµ–"><a href="#5-2-2-æ·»åŠ ä¾èµ–" class="headerlink" title="5.2.2. æ·»åŠ ä¾èµ–"></a>5.2.2. æ·»åŠ ä¾èµ–</h3><p>ä¿®æ”¹pom.xmlæ–‡ä»¶å†…å®¹ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-rabbitmq-consumer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.7.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.amqp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-rabbit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.8.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-2-3-é…ç½®æ•´åˆ"><a href="#5-2-3-é…ç½®æ•´åˆ" class="headerlink" title="5.2.3. é…ç½®æ•´åˆ"></a>5.2.3. é…ç½®æ•´åˆ</h3><ol><li>åˆ›å»º<code>spring-rabbitmq-consumer\src\main\resources\properties\rabbitmq.properties</code>è¿æ¥å‚æ•°ç­‰é…ç½®æ–‡ä»¶ï¼›</li></ol><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">rabbitmq.host</span>=<span class="hljs-string">192.168.12.135</span><br><span class="hljs-attr">rabbitmq.port</span>=<span class="hljs-string">5672</span><br><span class="hljs-attr">rabbitmq.username</span>=<span class="hljs-string">heima</span><br><span class="hljs-attr">rabbitmq.password</span>=<span class="hljs-string">heima</span><br><span class="hljs-attr">rabbitmq.virtual-host</span>=<span class="hljs-string">/itcast</span><br></code></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»º <code>spring-rabbitmq-consumer\src\main\resources\spring\spring-rabbitmq.xml</code> æ•´åˆé…ç½®æ–‡ä»¶ï¼›</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:rabbit</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/rabbit&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/rabbit</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/rabbit/spring-rabbit.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--åŠ è½½é…ç½®æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:properties/rabbitmq.properties&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- å®šä¹‰rabbitmq connectionFactory --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:connection-factory</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.host&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.port&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">username</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.username&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.password&#125;&quot;</span></span><br><span class="hljs-tag">                               <span class="hljs-attr">virtual-host</span>=<span class="hljs-string">&quot;$&#123;rabbitmq.virtual-host&#125;&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;springQueueListener&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.SpringQueueListener&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fanoutListener1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.FanoutListener1&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;fanoutListener2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.FanoutListener2&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;topicListenerStar&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.TopicListenerStar&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;topicListenerWell&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.TopicListenerWell&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;topicListenerWell2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.itheima.rabbitmq.listener.TopicListenerWell2&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener-container</span> <span class="hljs-attr">connection-factory</span>=<span class="hljs-string">&quot;connectionFactory&quot;</span> <span class="hljs-attr">auto-declare</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;springQueueListener&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_queue&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;fanoutListener1&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_fanout_queue_1&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;fanoutListener2&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_fanout_queue_2&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;topicListenerStar&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_topic_queue_star&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;topicListenerWell&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_topic_queue_well&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">rabbit:listener</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;topicListenerWell2&quot;</span> <span class="hljs-attr">queue-names</span>=<span class="hljs-string">&quot;spring_topic_queue_well2&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">rabbit:listener-container</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-2-4-æ¶ˆæ¯ç›‘å¬å™¨"><a href="#5-2-4-æ¶ˆæ¯ç›‘å¬å™¨" class="headerlink" title="5.2.4. æ¶ˆæ¯ç›‘å¬å™¨"></a>5.2.4. æ¶ˆæ¯ç›‘å¬å™¨</h3><h4 id="1ï¼‰é˜Ÿåˆ—ç›‘å¬å™¨"><a href="#1ï¼‰é˜Ÿåˆ—ç›‘å¬å™¨" class="headerlink" title="1ï¼‰é˜Ÿåˆ—ç›‘å¬å™¨"></a>1ï¼‰é˜Ÿåˆ—ç›‘å¬å™¨</h4><p>åˆ›å»º <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\SpringQueueListener.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringQueueListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;æ¥æ”¶è·¯ç”±åç§°ä¸ºï¼š%sï¼Œè·¯ç”±é”®ä¸ºï¼š%sï¼Œé˜Ÿåˆ—åä¸ºï¼š%sçš„æ¶ˆæ¯ï¼š%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2ï¼‰å¹¿æ’­ç›‘å¬å™¨1"><a href="#2ï¼‰å¹¿æ’­ç›‘å¬å™¨1" class="headerlink" title="2ï¼‰å¹¿æ’­ç›‘å¬å™¨1"></a>2ï¼‰å¹¿æ’­ç›‘å¬å™¨1</h4><p>åˆ›å»º <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\FanoutListener1.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FanoutListener1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;å¹¿æ’­ç›‘å¬å™¨1ï¼šæ¥æ”¶è·¯ç”±åç§°ä¸ºï¼š%sï¼Œè·¯ç”±é”®ä¸ºï¼š%sï¼Œé˜Ÿåˆ—åä¸ºï¼š%sçš„æ¶ˆæ¯ï¼š%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="3ï¼‰å¹¿æ’­ç›‘å¬å™¨2"><a href="#3ï¼‰å¹¿æ’­ç›‘å¬å™¨2" class="headerlink" title="3ï¼‰å¹¿æ’­ç›‘å¬å™¨2"></a>3ï¼‰å¹¿æ’­ç›‘å¬å™¨2</h4><p>åˆ›å»º <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\FanoutListener2.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FanoutListener2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;å¹¿æ’­ç›‘å¬å™¨2ï¼šæ¥æ”¶è·¯ç”±åç§°ä¸ºï¼š%sï¼Œè·¯ç”±é”®ä¸ºï¼š%sï¼Œé˜Ÿåˆ—åä¸ºï¼š%sçš„æ¶ˆæ¯ï¼š%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4ï¼‰æ˜Ÿå·é€šé…ç¬¦ç›‘å¬å™¨"><a href="#4ï¼‰æ˜Ÿå·é€šé…ç¬¦ç›‘å¬å™¨" class="headerlink" title="4ï¼‰æ˜Ÿå·é€šé…ç¬¦ç›‘å¬å™¨"></a>4ï¼‰æ˜Ÿå·é€šé…ç¬¦ç›‘å¬å™¨</h4><p>åˆ›å»º <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\TopicListenerStar.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopicListenerStar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;é€šé…ç¬¦*ç›‘å¬å™¨ï¼šæ¥æ”¶è·¯ç”±åç§°ä¸ºï¼š%sï¼Œè·¯ç”±é”®ä¸ºï¼š%sï¼Œé˜Ÿåˆ—åä¸ºï¼š%sçš„æ¶ˆæ¯ï¼š%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="5ï¼‰äº•å·é€šé…ç¬¦ç›‘å¬å™¨"><a href="#5ï¼‰äº•å·é€šé…ç¬¦ç›‘å¬å™¨" class="headerlink" title="5ï¼‰äº•å·é€šé…ç¬¦ç›‘å¬å™¨"></a>5ï¼‰äº•å·é€šé…ç¬¦ç›‘å¬å™¨</h4><p>åˆ›å»º <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\TopicListenerWell.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopicListenerWell</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;é€šé…ç¬¦#ç›‘å¬å™¨ï¼šæ¥æ”¶è·¯ç”±åç§°ä¸ºï¼š%sï¼Œè·¯ç”±é”®ä¸ºï¼š%sï¼Œé˜Ÿåˆ—åä¸ºï¼š%sçš„æ¶ˆæ¯ï¼š%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="6ï¼‰äº•å·é€šé…ç¬¦ç›‘å¬å™¨2"><a href="#6ï¼‰äº•å·é€šé…ç¬¦ç›‘å¬å™¨2" class="headerlink" title="6ï¼‰äº•å·é€šé…ç¬¦ç›‘å¬å™¨2"></a>6ï¼‰äº•å·é€šé…ç¬¦ç›‘å¬å™¨2</h4><p>åˆ›å»º <code>spring-rabbitmq-consumer\src\main\java\com\itheima\rabbitmq\listener\TopicListenerWell2.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopicListenerWell2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageListener</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Message message)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(message.getBody(), <span class="hljs-string">&quot;utf-8&quot;</span>);<br><br>            System.out.printf(<span class="hljs-string">&quot;é€šé…ç¬¦#ç›‘å¬å™¨2ï¼šæ¥æ”¶è·¯ç”±åç§°ä¸ºï¼š%sï¼Œè·¯ç”±é”®ä¸ºï¼š%sï¼Œé˜Ÿåˆ—åä¸ºï¼š%sçš„æ¶ˆæ¯ï¼š%s \n&quot;</span>,<br>                    message.getMessageProperties().getReceivedExchange(),<br>                    message.getMessageProperties().getReceivedRoutingKey(),<br>                    message.getMessageProperties().getConsumerQueue(),<br>                    msg);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="6-Spring-Bootæ•´åˆRabbitMQ"><a href="#6-Spring-Bootæ•´åˆRabbitMQ" class="headerlink" title="6. Spring Bootæ•´åˆRabbitMQ"></a>6. Spring Bootæ•´åˆRabbitMQ</h1><h2 id="6-1-ç®€ä»‹"><a href="#6-1-ç®€ä»‹" class="headerlink" title="6.1. ç®€ä»‹"></a>6.1. ç®€ä»‹</h2><p>åœ¨Springé¡¹ç›®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨Spring-Rabbitå»æ“ä½œRabbitMQ<br><a href="https://github.com/spring-projects/spring-amqp">https://github.com/spring-projects/spring-amqp</a></p><p>å°¤å…¶æ˜¯åœ¨spring booté¡¹ç›®ä¸­åªéœ€è¦å¼•å…¥å¯¹åº”çš„amqpå¯åŠ¨å™¨ä¾èµ–å³å¯ï¼Œæ–¹ä¾¿çš„ä½¿ç”¨RabbitTemplateå‘é€æ¶ˆæ¯ï¼Œä½¿ç”¨æ³¨è§£æ¥æ”¶æ¶ˆæ¯ã€‚</p><p><em>ä¸€èˆ¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­</em>ï¼š</p><p><strong>ç”Ÿäº§è€…å·¥ç¨‹ï¼š</strong></p><ol><li><p>application.ymlæ–‡ä»¶é…ç½®RabbitMQç›¸å…³ä¿¡æ¯ï¼›</p></li><li><p>åœ¨ç”Ÿäº§è€…å·¥ç¨‹ä¸­ç¼–å†™é…ç½®ç±»ï¼Œç”¨äºåˆ›å»ºäº¤æ¢æœºå’Œé˜Ÿåˆ—ï¼Œå¹¶è¿›è¡Œç»‘å®š</p></li><li><p>æ³¨å…¥RabbitTemplateå¯¹è±¡ï¼Œé€šè¿‡RabbitTemplateå¯¹è±¡å‘é€æ¶ˆæ¯åˆ°äº¤æ¢æœº</p></li></ol><p><strong>æ¶ˆè´¹è€…å·¥ç¨‹ï¼š</strong></p><ol><li><p>application.ymlæ–‡ä»¶é…ç½®RabbitMQç›¸å…³ä¿¡æ¯</p></li><li><p>åˆ›å»ºæ¶ˆæ¯å¤„ç†ç±»ï¼Œç”¨äºæ¥æ”¶é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†</p></li></ol><h2 id="5-2-æ­å»ºç”Ÿäº§è€…å·¥ç¨‹"><a href="#5-2-æ­å»ºç”Ÿäº§è€…å·¥ç¨‹" class="headerlink" title="5.2. æ­å»ºç”Ÿäº§è€…å·¥ç¨‹"></a>5.2. æ­å»ºç”Ÿäº§è€…å·¥ç¨‹</h2><h3 id="5-2-1-åˆ›å»ºå·¥ç¨‹-1"><a href="#5-2-1-åˆ›å»ºå·¥ç¨‹-1" class="headerlink" title="5.2.1. åˆ›å»ºå·¥ç¨‹"></a>5.2.1. åˆ›å»ºå·¥ç¨‹</h3><p>åˆ›å»ºç”Ÿäº§è€…å·¥ç¨‹springboot-rabbitmq-producer</p><p><img src="https://pic.imgdb.cn/item/63736de416f2c2beb172bcbf.png" alt="1556072078816"></p><p><img src="https://pic.imgdb.cn/item/63736de316f2c2beb172bb2a.png" alt="1556072084653"></p><h3 id="5-2-2-æ·»åŠ ä¾èµ–-1"><a href="#5-2-2-æ·»åŠ ä¾èµ–-1" class="headerlink" title="5.2.2. æ·»åŠ ä¾èµ–"></a>5.2.2. æ·»åŠ ä¾èµ–</h3><p>ä¿®æ”¹pom.xmlæ–‡ä»¶å†…å®¹ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-rabbitmq-producer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-2-3-å¯åŠ¨ç±»"><a href="#5-2-3-å¯åŠ¨ç±»" class="headerlink" title="5.2.3. å¯åŠ¨ç±»"></a>5.2.3. å¯åŠ¨ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProducerApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(ProducerApplication.class);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="5-2-4-é…ç½®RabbitMQ"><a href="#5-2-4-é…ç½®RabbitMQ" class="headerlink" title="5.2.4. é…ç½®RabbitMQ"></a>5.2.4. é…ç½®RabbitMQ</h3><h4 id="1ï¼‰é…ç½®æ–‡ä»¶"><a href="#1ï¼‰é…ç½®æ–‡ä»¶" class="headerlink" title="1ï¼‰é…ç½®æ–‡ä»¶"></a>1ï¼‰é…ç½®æ–‡ä»¶</h4><p>åˆ›å»ºapplication.ymlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">rabbitmq:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span><br>    <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/itcast</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">heima</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">heima</span><br></code></pre></td></tr></table></figure><h4 id="2ï¼‰ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—"><a href="#2ï¼‰ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—" class="headerlink" title="2ï¼‰ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—"></a>2ï¼‰ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—</h4><p>åˆ›å»ºRabbitMQé˜Ÿåˆ—ä¸äº¤æ¢æœºç»‘å®šçš„é…ç½®ç±»com.itheima.rabbitmq.config.RabbitMQConfig</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.config;<br><br><span class="hljs-keyword">import</span> org.springframework.amqp.core.*;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMQConfig</span> &#123;<br>    <span class="hljs-comment">//äº¤æ¢æœºåç§°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ITEM_TOPIC_EXCHANGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;item_topic_exchange&quot;</span>;<br>    <span class="hljs-comment">//é˜Ÿåˆ—åç§°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ITEM_QUEUE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;item_queue&quot;</span>;<br><br>    <span class="hljs-comment">//å£°æ˜äº¤æ¢æœº</span><br>    <span class="hljs-meta">@Bean(&quot;itemTopicExchange&quot;)</span><br>    <span class="hljs-keyword">public</span> Exchange <span class="hljs-title function_">topicExchange</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> ExchangeBuilder.topicExchange(ITEM_TOPIC_EXCHANGE).durable(<span class="hljs-literal">true</span>).build();<br>    &#125;<br><br>    <span class="hljs-comment">//å£°æ˜é˜Ÿåˆ—</span><br>    <span class="hljs-meta">@Bean(&quot;itemQueue&quot;)</span><br>    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">itemQueue</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> QueueBuilder.durable(ITEM_QUEUE).build();<br>    &#125;<br><br>    <span class="hljs-comment">//ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœº</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Binding <span class="hljs-title function_">itemQueueExchange</span><span class="hljs-params">(<span class="hljs-meta">@Qualifier(&quot;itemQueue&quot;)</span> Queue queue,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@Qualifier(&quot;itemTopicExchange&quot;)</span> Exchange exchange)</span>&#123;<br>        <span class="hljs-keyword">return</span> BindingBuilder.bind(queue).to(exchange).with(<span class="hljs-string">&quot;item.#&quot;</span>).noargs();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-3-æ­å»ºæ¶ˆè´¹è€…å·¥ç¨‹"><a href="#5-3-æ­å»ºæ¶ˆè´¹è€…å·¥ç¨‹" class="headerlink" title="5.3. æ­å»ºæ¶ˆè´¹è€…å·¥ç¨‹"></a>5.3. æ­å»ºæ¶ˆè´¹è€…å·¥ç¨‹</h2><h3 id="5-3-1-åˆ›å»ºå·¥ç¨‹"><a href="#5-3-1-åˆ›å»ºå·¥ç¨‹" class="headerlink" title="5.3.1. åˆ›å»ºå·¥ç¨‹"></a>5.3.1. åˆ›å»ºå·¥ç¨‹</h3><p>åˆ›å»ºæ¶ˆè´¹è€…å·¥ç¨‹springboot-rabbitmq-consumer</p><p><img src="https://pic.imgdb.cn/item/63736de916f2c2beb172c222.png" alt="1556073553841"></p><p><img src="https://pic.imgdb.cn/item/63736de816f2c2beb172c0c4.png" alt="1556073567786"></p><h3 id="5-3-2-æ·»åŠ ä¾èµ–"><a href="#5-3-2-æ·»åŠ ä¾èµ–" class="headerlink" title="5.3.2. æ·»åŠ ä¾èµ–"></a>5.3.2. æ·»åŠ ä¾èµ–</h3><p>ä¿®æ”¹pom.xmlæ–‡ä»¶å†…å®¹ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-rabbitmq-consumer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-3-3-å¯åŠ¨ç±»"><a href="#5-3-3-å¯åŠ¨ç±»" class="headerlink" title="5.3.3. å¯åŠ¨ç±»"></a>5.3.3. å¯åŠ¨ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsumerApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(ConsumerApplication.class);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-3-4-é…ç½®RabbitMQ"><a href="#5-3-4-é…ç½®RabbitMQ" class="headerlink" title="5.3.4. é…ç½®RabbitMQ"></a>5.3.4. é…ç½®RabbitMQ</h3><p>åˆ›å»ºapplication.ymlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">rabbitmq:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span><br>    <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/itcast</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">heima</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">heima</span><br></code></pre></td></tr></table></figure><h3 id="5-3-5-æ¶ˆæ¯ç›‘å¬å¤„ç†ç±»"><a href="#5-3-5-æ¶ˆæ¯ç›‘å¬å¤„ç†ç±»" class="headerlink" title="5.3.5. æ¶ˆæ¯ç›‘å¬å¤„ç†ç±»"></a>5.3.5. æ¶ˆæ¯ç›‘å¬å¤„ç†ç±»</h3><p>ç¼–å†™æ¶ˆæ¯ç›‘å¬å™¨com.itheima.rabbitmq.listener.MyListener</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq.listener;<br><br><span class="hljs-keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyListener</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç›‘å¬æŸä¸ªé˜Ÿåˆ—çš„æ¶ˆæ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> message æ¥æ”¶åˆ°çš„æ¶ˆæ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@RabbitListener(queues = &quot;item_queue&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myListener1</span><span class="hljs-params">(String message)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æ¶ˆè´¹è€…æ¥æ”¶åˆ°çš„æ¶ˆæ¯ä¸ºï¼š&quot;</span> + message);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="5-4-æµ‹è¯•"><a href="#5-4-æµ‹è¯•" class="headerlink" title="5.4. æµ‹è¯•"></a>5.4. æµ‹è¯•</h2><p>åœ¨ç”Ÿäº§è€…å·¥ç¨‹springboot-rabbitmq-producerä¸­åˆ›å»ºæµ‹è¯•ç±»ï¼Œå‘é€æ¶ˆæ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.rabbitmq;<br><br><span class="hljs-keyword">import</span> com.itheima.rabbitmq.config.RabbitMQConfig;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> org.junit.runner.RunWith;<br><span class="hljs-keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><span class="hljs-keyword">import</span> org.springframework.test.context.junit4.SpringRunner;<br><br><span class="hljs-meta">@RunWith(SpringRunner.class)</span><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMQTest</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RabbitTemplate rabbitTemplate;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;<br>        rabbitTemplate.convertAndSend(RabbitMQConfig.ITEM_TOPIC_EXCHANGE, <span class="hljs-string">&quot;item.insert&quot;</span>, <span class="hljs-string">&quot;å•†å“æ–°å¢ï¼Œrouting key ä¸ºitem.insert&quot;</span>);<br>        rabbitTemplate.convertAndSend(RabbitMQConfig.ITEM_TOPIC_EXCHANGE, <span class="hljs-string">&quot;item.update&quot;</span>, <span class="hljs-string">&quot;å•†å“ä¿®æ”¹ï¼Œrouting key ä¸ºitem.update&quot;</span>);<br>        rabbitTemplate.convertAndSend(RabbitMQConfig.ITEM_TOPIC_EXCHANGE, <span class="hljs-string">&quot;item.delete&quot;</span>, <span class="hljs-string">&quot;å•†å“åˆ é™¤ï¼Œrouting key ä¸ºitem.delete&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…ˆè¿è¡Œä¸Šè¿°æµ‹è¯•ç¨‹åºï¼ˆäº¤æ¢æœºå’Œé˜Ÿåˆ—æ‰èƒ½å…ˆè¢«å£°æ˜å’Œç»‘å®šï¼‰ï¼Œç„¶åå¯åŠ¨æ¶ˆè´¹è€…ï¼›åœ¨æ¶ˆè´¹è€…å·¥ç¨‹springboot-rabbitmq-consumerä¸­æ§åˆ¶å°æŸ¥çœ‹æ˜¯å¦æ¥æ”¶åˆ°å¯¹åº”æ¶ˆæ¯ã€‚</p><p>å¦å¤–ï¼›ä¹Ÿå¯ä»¥åœ¨RabbitMQçš„ç®¡ç†æ§åˆ¶å°ä¸­æŸ¥çœ‹åˆ°äº¤æ¢æœºä¸é˜Ÿåˆ—çš„ç»‘å®šï¼š</p><p><img src="https://pic.imgdb.cn/item/63736dec16f2c2beb172c5c6.png" alt="1556074827222"></p>]]></content>
    
    
    <categories>
      
      <category>RabbitMQğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RabbitMQ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RabbitMQåŸºç¡€Skill</title>
    <link href="/Hexo/2022/04/12/RabbitMQ%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"/>
    <url>/Hexo/2022/04/12/RabbitMQ%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="3-RabbitMQé›†ç¾¤æ­å»º"><a href="#3-RabbitMQé›†ç¾¤æ­å»º" class="headerlink" title="3.RabbitMQé›†ç¾¤æ­å»º"></a>3.RabbitMQé›†ç¾¤æ­å»º</h1><p>æ‘˜è¦ï¼šå®é™…ç”Ÿäº§åº”ç”¨ä¸­éƒ½ä¼šé‡‡ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„é›†ç¾¤æ–¹æ¡ˆï¼Œå¦‚æœé€‰æ‹©RabbitMQé‚£ä¹ˆæœ‰å¿…è¦äº†è§£ä¸‹å®ƒçš„é›†ç¾¤æ–¹æ¡ˆåŸç†</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœåªæ˜¯ä¸ºäº†å­¦ä¹ RabbitMQæˆ–è€…éªŒè¯ä¸šåŠ¡å·¥ç¨‹çš„æ­£ç¡®æ€§é‚£ä¹ˆåœ¨æœ¬åœ°ç¯å¢ƒæˆ–è€…æµ‹è¯•ç¯å¢ƒä¸Šä½¿ç”¨å…¶å•å®ä¾‹éƒ¨ç½²å°±å¯ä»¥äº†ï¼Œä½†æ˜¯å‡ºäºMQä¸­é—´ä»¶æœ¬èº«çš„å¯é æ€§ã€å¹¶å‘æ€§ã€ååé‡å’Œæ¶ˆæ¯å †ç§¯èƒ½åŠ›ç­‰é—®é¢˜çš„è€ƒè™‘ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸Šä¸€èˆ¬éƒ½ä¼šè€ƒè™‘ä½¿ç”¨RabbitMQçš„é›†ç¾¤æ–¹æ¡ˆã€‚</p><h3 id="3-1-é›†ç¾¤æ–¹æ¡ˆçš„åŸç†"><a href="#3-1-é›†ç¾¤æ–¹æ¡ˆçš„åŸç†" class="headerlink" title="3.1 é›†ç¾¤æ–¹æ¡ˆçš„åŸç†"></a>3.1 é›†ç¾¤æ–¹æ¡ˆçš„åŸç†</h3><p>RabbitMQè¿™æ¬¾æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶äº§å“æœ¬èº«æ˜¯åŸºäºErlangç¼–å†™ï¼ŒErlangè¯­è¨€å¤©ç”Ÿå…·å¤‡åˆ†å¸ƒå¼ç‰¹æ€§ï¼ˆé€šè¿‡åŒæ­¥Erlangé›†ç¾¤å„èŠ‚ç‚¹çš„magic cookieæ¥å®ç°ï¼‰ã€‚å› æ­¤ï¼ŒRabbitMQå¤©ç„¶æ”¯æŒClusteringã€‚è¿™ä½¿å¾—RabbitMQæœ¬èº«ä¸éœ€è¦åƒActiveMQã€Kafkaé‚£æ ·é€šè¿‡ZooKeeperåˆ†åˆ«æ¥å®ç°HAæ–¹æ¡ˆå’Œä¿å­˜é›†ç¾¤çš„å…ƒæ•°æ®ã€‚é›†ç¾¤æ˜¯ä¿è¯å¯é æ€§çš„ä¸€ç§æ–¹å¼ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡æ°´å¹³æ‰©å±•ä»¥è¾¾åˆ°å¢åŠ æ¶ˆæ¯ååé‡èƒ½åŠ›çš„ç›®çš„ã€‚</p><p><img src="https://pic.imgdb.cn/item/63736e2716f2c2beb173271c.png" alt="1565245219265"></p><h3 id="3-2-å•æœºå¤šå®ä¾‹éƒ¨ç½²"><a href="#3-2-å•æœºå¤šå®ä¾‹éƒ¨ç½²" class="headerlink" title="3.2 å•æœºå¤šå®ä¾‹éƒ¨ç½²"></a>3.2 å•æœºå¤šå®ä¾‹éƒ¨ç½²</h3><p>ç”±äºæŸäº›å› ç´ çš„é™åˆ¶ï¼Œæœ‰æ—¶å€™ä½ ä¸å¾—ä¸åœ¨ä¸€å°æœºå™¨ä¸Šå»æ­å»ºä¸€ä¸ªrabbitmqé›†ç¾¤ï¼Œè¿™ä¸ªæœ‰ç‚¹ç±»ä¼¼zookeeperçš„å•æœºç‰ˆã€‚çœŸå®ç”Ÿæˆç¯å¢ƒè¿˜æ˜¯è¦é…æˆå¤šæœºé›†ç¾¤çš„ã€‚æœ‰å…³æ€ä¹ˆé…ç½®å¤šæœºé›†ç¾¤çš„å¯ä»¥å‚è€ƒå…¶ä»–çš„èµ„æ–™ï¼Œè¿™é‡Œä¸»è¦è®ºè¿°å¦‚ä½•åœ¨å•æœºä¸­é…ç½®å¤šä¸ªrabbitmqå®ä¾‹ã€‚</p><p>ä¸»è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.rabbitmq.com/clustering.html">https://www.rabbitmq.com/clustering.html</a></p><p>é¦–å…ˆç¡®ä¿RabbitMQè¿è¡Œæ²¡æœ‰é—®é¢˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@super ~]# rabbitmqctl status<br>Status of node rabbit@super ...<br>[&#123;pid,10232&#125;,<br> &#123;running_applications,<br>     [&#123;rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;3.6.5&quot;&#125;,<br>      &#123;rabbitmq_web_dispatch,&quot;RabbitMQ Web Dispatcher&quot;,&quot;3.6.5&quot;&#125;,<br>      &#123;webmachine,&quot;webmachine&quot;,&quot;1.10.3&quot;&#125;,<br>      &#123;mochiweb,&quot;MochiMedia Web Server&quot;,&quot;2.13.1&quot;&#125;,<br>      &#123;rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;3.6.5&quot;&#125;,<br>      &#123;rabbit,&quot;RabbitMQ&quot;,&quot;3.6.5&quot;&#125;,<br>      &#123;os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.4&quot;&#125;,<br>      &#123;syntax_tools,&quot;Syntax tools&quot;,&quot;1.7&quot;&#125;,<br>      &#123;inets,&quot;INETS  CXC 138 49&quot;,&quot;6.2&quot;&#125;,<br>      &#123;amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;3.6.5&quot;&#125;,<br>      &#123;rabbit_common,[],&quot;3.6.5&quot;&#125;,<br>      &#123;ssl,&quot;Erlang/OTP SSL application&quot;,&quot;7.3&quot;&#125;,<br>      &#123;public_key,&quot;Public key infrastructure&quot;,&quot;1.1.1&quot;&#125;,<br>      &#123;asn1,&quot;The Erlang ASN1 compiler version 4.0.2&quot;,&quot;4.0.2&quot;&#125;,<br>      &#123;ranch,&quot;Socket acceptor pool for TCP protocols.&quot;,&quot;1.2.1&quot;&#125;,<br>      &#123;mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.13.3&quot;&#125;,<br>      &#123;compiler,&quot;ERTS  CXC 138 10&quot;,&quot;6.0.3&quot;&#125;,<br>      &#123;crypto,&quot;CRYPTO&quot;,&quot;3.6.3&quot;&#125;,<br>      &#123;xmerl,&quot;XML parser&quot;,&quot;1.3.10&quot;&#125;,<br>      &#123;sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.7&quot;&#125;,<br>      &#123;stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;2.8&quot;&#125;,<br>      &#123;kernel,&quot;ERTS  CXC 138 10&quot;,&quot;4.2&quot;&#125;]&#125;,<br> &#123;os,&#123;unix,linux&#125;&#125;,<br> &#123;erlang_version,<br>     &quot;Erlang/OTP 18 [erts-7.3] [source] [64-bit] [async-threads:64] [hipe] [kernel-poll:true]\n&quot;&#125;,<br> &#123;memory,<br>     [&#123;total,56066752&#125;,<br>      &#123;connection_readers,0&#125;,<br>      &#123;connection_writers,0&#125;,<br>      &#123;connection_channels,0&#125;,<br>      &#123;connection_other,2680&#125;,<br>      &#123;queue_procs,268248&#125;,<br>      &#123;queue_slave_procs,0&#125;,<br>      &#123;plugins,1131936&#125;,<br>      &#123;other_proc,18144280&#125;,<br>      &#123;mnesia,125304&#125;,<br>      &#123;mgmt_db,921312&#125;,<br>      &#123;msg_index,69440&#125;,<br>      &#123;other_ets,1413664&#125;,<br>      &#123;binary,755736&#125;,<br>      &#123;code,27824046&#125;,<br>      &#123;atom,1000601&#125;,<br>      &#123;other_system,4409505&#125;]&#125;,<br> &#123;alarms,[]&#125;,<br> &#123;listeners,[&#123;clustering,25672,&quot;::&quot;&#125;,&#123;amqp,5672,&quot;::&quot;&#125;]&#125;,<br> &#123;vm_memory_high_watermark,0.4&#125;,<br> &#123;vm_memory_limit,411294105&#125;,<br> &#123;disk_free_limit,50000000&#125;,<br> &#123;disk_free,13270233088&#125;,<br> &#123;file_descriptors,<br>     [&#123;total_limit,924&#125;,&#123;total_used,6&#125;,&#123;sockets_limit,829&#125;,&#123;sockets_used,0&#125;]&#125;,<br> &#123;processes,[&#123;limit,1048576&#125;,&#123;used,262&#125;]&#125;,<br> &#123;run_queue,0&#125;,<br> &#123;uptime,43651&#125;,<br> &#123;kernel,&#123;net_ticktime,60&#125;&#125;]<br></code></pre></td></tr></table></figure><p>åœæ­¢rabbitmqæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@super sbin]# service rabbitmq-server stop<br>Stopping rabbitmq-server: rabbitmq-server.<br><br></code></pre></td></tr></table></figure><p>å¯åŠ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@super sbin]# RABBITMQ_NODE_PORT=5673 RABBITMQ_NODENAME=rabbit1 rabbitmq-server start<br><br>              RabbitMQ 3.6.5. Copyright (C) 2007-2016 Pivotal Software, Inc.<br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#  ##      Licensed under the MPL.  See http://www.rabbitmq.com/</span></span><br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#  ##</span></span><br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#########  Logs: /var/log/rabbitmq/rabbit1.log</span></span><br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#####  ##        /var/log/rabbitmq/rabbit1-sasl.log</span></span><br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#########</span></span><br>              Starting broker...<br> completed with 6 plugins.<br></code></pre></td></tr></table></figure><p>å¯åŠ¨ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼š</p><blockquote><p>webç®¡ç†æ’ä»¶ç«¯å£å ç”¨,æ‰€ä»¥è¿˜è¦æŒ‡å®šå…¶webæ’ä»¶å ç”¨çš„ç«¯å£å·ã€‚</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@super ~]# RABBITMQ_NODE_PORT=5674 RABBITMQ_SERVER_START_ARGS=&quot;-rabbitmq_management listener [&#123;port,15674&#125;]&quot; RABBITMQ_NODENAME=rabbit2 rabbitmq-server start<br><br>              RabbitMQ 3.6.5. Copyright (C) 2007-2016 Pivotal Software, Inc.<br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#  ##      Licensed under the MPL.  See http://www.rabbitmq.com/</span></span><br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#  ##</span></span><br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#########  Logs: /var/log/rabbitmq/rabbit2.log</span></span><br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#####  ##        /var/log/rabbitmq/rabbit2-sasl.log</span></span><br><span class="hljs-meta">  #</span><span class="language-bash"><span class="hljs-comment">#########</span></span><br>              Starting broker...<br> completed with 6 plugins.<br><br></code></pre></td></tr></table></figure><p>ç»“æŸå‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">rabbitmqctl -n rabbit1 stop<br>rabbitmqctl -n rabbit2 stop<br></code></pre></td></tr></table></figure><p>rabbit1æ“ä½œä½œä¸ºä¸»èŠ‚ç‚¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@super ~]# rabbitmqctl -n rabbit1 stop_app  <br>Stopping node rabbit1@super ...<br>[root@super ~]# rabbitmqctl -n rabbit1 reset <br>Resetting node rabbit1@super ...<br>[root@super ~]# rabbitmqctl -n rabbit1 start_app<br>Starting node rabbit1@super ...<br>[root@super ~]# <br></code></pre></td></tr></table></figure><p>rabbit2æ“ä½œä¸ºä»èŠ‚ç‚¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@super ~]# rabbitmqctl -n rabbit2 stop_app<br>Stopping node rabbit2@super ...<br>[root@super ~]# rabbitmqctl -n rabbit2 reset<br>Resetting node rabbit2@super ...<br>[root@super ~]# rabbitmqctl -n rabbit2 join_cluster rabbit1@&#x27;super&#x27; ###&#x27;&#x27;å†…æ˜¯ä¸»æœºåæ¢æˆè‡ªå·±çš„<br>Clustering node rabbit2@super with rabbit1@super ...<br>[root@super ~]# rabbitmqctl -n rabbit2 start_app<br>Starting node rabbit2@super ...<br><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">[<span class="hljs-symbol">root@</span><span class="hljs-keyword">super</span> ~]# rabbitmqctl cluster_status -n rabbit1<br>Cluster status of node <span class="hljs-symbol">rabbit1@</span><span class="hljs-keyword">super</span> ...<br>[&#123;nodes,[&#123;disc,[<span class="hljs-symbol">rabbit1@</span><span class="hljs-keyword">super</span>,<span class="hljs-symbol">rabbit2@</span><span class="hljs-keyword">super</span>]&#125;]&#125;,<br> &#123;running_nodes,[<span class="hljs-symbol">rabbit2@</span><span class="hljs-keyword">super</span>,<span class="hljs-symbol">rabbit1@</span><span class="hljs-keyword">super</span>]&#125;,<br> &#123;cluster_name,&lt;&lt;<span class="hljs-string">&quot;rabbit1@super&quot;</span>&gt;&gt;&#125;,<br> &#123;partitions,[]&#125;,<br> &#123;alarms,[&#123;<span class="hljs-symbol">rabbit2@</span><span class="hljs-keyword">super</span>,[]&#125;,&#123;<span class="hljs-symbol">rabbit1@</span><span class="hljs-keyword">super</span>,[]&#125;]&#125;]<br></code></pre></td></tr></table></figure><p>webç›‘æ§ï¼š</p><p><img src="https://pic.imgdb.cn/item/63736e2b16f2c2beb1732e55.png" alt="1566065096459"></p><h3 id="3-3-é›†ç¾¤ç®¡ç†"><a href="#3-3-é›†ç¾¤ç®¡ç†" class="headerlink" title="3.3 é›†ç¾¤ç®¡ç†"></a>3.3 é›†ç¾¤ç®¡ç†</h3><p><strong>rabbitmqctl join_cluster {cluster_node} [â€“ram]</strong><br>å°†èŠ‚ç‚¹åŠ å…¥æŒ‡å®šé›†ç¾¤ä¸­ã€‚åœ¨è¿™ä¸ªå‘½ä»¤æ‰§è¡Œå‰éœ€è¦åœæ­¢RabbitMQåº”ç”¨å¹¶é‡ç½®èŠ‚ç‚¹ã€‚</p><p><strong>rabbitmqctl cluster_status</strong><br>æ˜¾ç¤ºé›†ç¾¤çš„çŠ¶æ€ã€‚</p><p><strong>rabbitmqctl change_cluster_node_type {disc|ram}</strong><br>ä¿®æ”¹é›†ç¾¤èŠ‚ç‚¹çš„ç±»å‹ã€‚åœ¨è¿™ä¸ªå‘½ä»¤æ‰§è¡Œå‰éœ€è¦åœæ­¢RabbitMQåº”ç”¨ã€‚</p><p><strong>rabbitmqctl forget_cluster_node [â€“offline]</strong><br>å°†èŠ‚ç‚¹ä»é›†ç¾¤ä¸­åˆ é™¤ï¼Œå…è®¸ç¦»çº¿æ‰§è¡Œã€‚</p><p><strong>rabbitmqctl update_cluster_nodes {clusternode}</strong></p><p>åœ¨é›†ç¾¤ä¸­çš„èŠ‚ç‚¹åº”ç”¨å¯åŠ¨å‰å’¨è¯¢clusternodeèŠ‚ç‚¹çš„æœ€æ–°ä¿¡æ¯ï¼Œå¹¶æ›´æ–°ç›¸åº”çš„é›†ç¾¤ä¿¡æ¯ã€‚è¿™ä¸ªå’Œjoin_clusterä¸åŒï¼Œå®ƒä¸åŠ å…¥é›†ç¾¤ã€‚è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼ŒèŠ‚ç‚¹Aå’ŒèŠ‚ç‚¹Béƒ½åœ¨é›†ç¾¤ä¸­ï¼Œå½“èŠ‚ç‚¹Aç¦»çº¿äº†ï¼ŒèŠ‚ç‚¹Cåˆå’ŒèŠ‚ç‚¹Bç»„æˆäº†ä¸€ä¸ªé›†ç¾¤ï¼Œç„¶åèŠ‚ç‚¹Båˆç¦»å¼€äº†é›†ç¾¤ï¼Œå½“Aé†’æ¥çš„æ—¶å€™ï¼Œå®ƒä¼šå°è¯•è”ç³»èŠ‚ç‚¹Bï¼Œä½†æ˜¯è¿™æ ·ä¼šå¤±è´¥ï¼Œå› ä¸ºèŠ‚ç‚¹Bå·²ç»ä¸åœ¨é›†ç¾¤ä¸­äº†ã€‚</p><p><strong>rabbitmqctl cancel_sync_queue [-p vhost] {queue}</strong><br>å–æ¶ˆé˜Ÿåˆ—queueåŒæ­¥é•œåƒçš„æ“ä½œã€‚</p><p><strong>rabbitmqctl set_cluster_name {name}</strong><br>è®¾ç½®é›†ç¾¤åç§°ã€‚é›†ç¾¤åç§°åœ¨å®¢æˆ·ç«¯è¿æ¥æ—¶ä¼šé€šæŠ¥ç»™å®¢æˆ·ç«¯ã€‚Federationå’ŒShovelæ’ä»¶ä¹Ÿä¼šæœ‰ç”¨åˆ°é›†ç¾¤åç§°çš„åœ°æ–¹ã€‚é›†ç¾¤åç§°é»˜è®¤æ˜¯é›†ç¾¤ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„åç§°ï¼Œé€šè¿‡è¿™ä¸ªå‘½ä»¤å¯ä»¥é‡æ–°è®¾ç½®ã€‚</p><h3 id="3-4-RabbitMQé•œåƒé›†ç¾¤é…ç½®"><a href="#3-4-RabbitMQé•œåƒé›†ç¾¤é…ç½®" class="headerlink" title="3.4 RabbitMQé•œåƒé›†ç¾¤é…ç½®"></a>3.4 RabbitMQé•œåƒé›†ç¾¤é…ç½®</h3><blockquote><p>ä¸Šé¢å·²ç»å®ŒæˆRabbitMQé»˜è®¤é›†ç¾¤æ¨¡å¼ï¼Œä½†å¹¶ä¸ä¿è¯é˜Ÿåˆ—çš„é«˜å¯ç”¨æ€§ï¼Œå°½ç®¡äº¤æ¢æœºã€ç»‘å®šè¿™äº›å¯ä»¥å¤åˆ¶åˆ°é›†ç¾¤é‡Œçš„ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯é˜Ÿåˆ—å†…å®¹ä¸ä¼šå¤åˆ¶ã€‚è™½ç„¶è¯¥æ¨¡å¼è§£å†³ä¸€é¡¹ç›®ç»„èŠ‚ç‚¹å‹åŠ›ï¼Œä½†é˜Ÿåˆ—èŠ‚ç‚¹å®•æœºç›´æ¥å¯¼è‡´è¯¥é˜Ÿåˆ—æ— æ³•åº”ç”¨ï¼Œåªèƒ½ç­‰å¾…é‡å¯ï¼Œæ‰€ä»¥è¦æƒ³åœ¨é˜Ÿåˆ—èŠ‚ç‚¹å®•æœºæˆ–æ•…éšœä¹Ÿèƒ½æ­£å¸¸åº”ç”¨ï¼Œå°±è¦å¤åˆ¶é˜Ÿåˆ—å†…å®¹åˆ°é›†ç¾¤é‡Œçš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¿…é¡»è¦åˆ›å»ºé•œåƒé˜Ÿåˆ—ã€‚</p><p>é•œåƒé˜Ÿåˆ—æ˜¯åŸºäºæ™®é€šçš„é›†ç¾¤æ¨¡å¼çš„ï¼Œç„¶åå†æ·»åŠ ä¸€äº›ç­–ç•¥ï¼Œæ‰€ä»¥ä½ è¿˜æ˜¯å¾—å…ˆé…ç½®æ™®é€šé›†ç¾¤ï¼Œç„¶åæ‰èƒ½è®¾ç½®é•œåƒé˜Ÿåˆ—ï¼Œæˆ‘ä»¬å°±ä»¥ä¸Šé¢çš„é›†ç¾¤æ¥ç€åšã€‚</p></blockquote><p><strong>è®¾ç½®çš„é•œåƒé˜Ÿåˆ—å¯ä»¥é€šè¿‡å¼€å¯çš„ç½‘é¡µçš„ç®¡ç†ç«¯Admin-&gt;Policiesï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤ã€‚</strong></p><blockquote><p>rabbitmqctl set_policy my_ha â€œ^â€ â€˜{â€œha-modeâ€:â€allâ€}â€™</p></blockquote><p><img src="https://pic.imgdb.cn/item/63736e2e16f2c2beb173312d.png" alt="1566072300852"></p><blockquote><ul><li>Name:ç­–ç•¥åç§°</li><li>Patternï¼šåŒ¹é…çš„è§„åˆ™ï¼Œå¦‚æœæ˜¯åŒ¹é…æ‰€æœ‰çš„é˜Ÿåˆ—ï¼Œæ˜¯^.</li><li>Definition:ä½¿ç”¨ha-modeæ¨¡å¼ä¸­çš„allï¼Œä¹Ÿå°±æ˜¯åŒæ­¥æ‰€æœ‰åŒ¹é…çš„é˜Ÿåˆ—ã€‚é—®å·é“¾æ¥å¸®åŠ©æ–‡æ¡£ã€‚</li></ul></blockquote><h3 id="3-5-è´Ÿè½½å‡è¡¡-HAProxy"><a href="#3-5-è´Ÿè½½å‡è¡¡-HAProxy" class="headerlink" title="3.5 è´Ÿè½½å‡è¡¡-HAProxy"></a>3.5 è´Ÿè½½å‡è¡¡-HAProxy</h3><p>HAProxyæä¾›é«˜å¯ç”¨æ€§ã€è´Ÿè½½å‡è¡¡ä»¥åŠåŸºäºTCPå’ŒHTTPåº”ç”¨çš„ä»£ç†ï¼Œæ”¯æŒè™šæ‹Ÿä¸»æœºï¼Œå®ƒæ˜¯å…è´¹ã€å¿«é€Ÿå¹¶ä¸”å¯é çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ,åŒ…æ‹¬Twitterï¼ŒRedditï¼ŒStackOverflowï¼ŒGitHubåœ¨å†…çš„å¤šå®¶çŸ¥åäº’è”ç½‘å…¬å¸åœ¨ä½¿ç”¨ã€‚HAProxyå®ç°äº†ä¸€ç§äº‹ä»¶é©±åŠ¨ã€å•ä¸€è¿›ç¨‹æ¨¡å‹ï¼Œæ­¤æ¨¡å‹æ”¯æŒéå¸¸å¤§çš„å¹¶å‘è¿æ¥æ•°ã€‚</p><h5 id="3-5-1-å®‰è£…HAProxy"><a href="#3-5-1-å®‰è£…HAProxy" class="headerlink" title="3.5.1  å®‰è£…HAProxy"></a>3.5.1  å®‰è£…HAProxy</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">//ä¸‹è½½ä¾èµ–åŒ…<br>yum install gcc vim wget<br>//ä¸Šä¼ haproxyæºç åŒ…<br>//è§£å‹<br>tar -zxvf haproxy-1.6.5.tar.gz -C /usr/local<br>//è¿›å…¥ç›®å½•ã€è¿›è¡Œç¼–è¯‘ã€å®‰è£…<br>cd /usr/local/haproxy-1.6.5<br>make TARGET=linux31 PREFIX=/usr/local/haproxy<br>make install PREFIX=/usr/local/haproxy<br>mkdir /etc/haproxy<br>//èµ‹æƒ<br>groupadd -r -g 149 haproxy<br>useradd -g haproxy -r -s /sbin/nologin -u 149 haproxy<br>//åˆ›å»ºhaproxyé…ç½®æ–‡ä»¶<br>mkdir /etc/haproxy<br>vim /etc/haproxy/haproxy.cfg<br></code></pre></td></tr></table></figure><h5 id="3-5-2-é…ç½®HAProxy"><a href="#3-5-2-é…ç½®HAProxy" class="headerlink" title="3.5.2 é…ç½®HAProxy"></a>3.5.2 é…ç½®HAProxy</h5><p>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š&#x2F;etc&#x2F;haproxy&#x2F;haproxy.cfg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">logging options</span><br>global<br>log 127.0.0.1 local0 info<br>maxconn 5120<br>chroot /usr/local/haproxy<br>uid 99<br>gid 99<br>daemon<br>quiet<br>nbproc 20<br>pidfile /var/run/haproxy.pid<br><br>defaults<br>log global<br><br>mode tcp<br><br>option tcplog<br>option dontlognull<br>retries 3<br>option redispatch<br>maxconn 2000<br>contimeout 5s<br>   <br>     clitimeout 60s<br><br>     srvtimeout 15s<br><span class="hljs-meta">#</span><span class="language-bash">front-end IP <span class="hljs-keyword">for</span> consumers and producters</span><br><br>listen rabbitmq_cluster<br>bind 0.0.0.0:5672<br><br>mode tcp<br><span class="hljs-meta">#</span><span class="language-bash">balance url_param userid</span><br><span class="hljs-meta">#</span><span class="language-bash">balance url_param session_id check_post 64</span><br><span class="hljs-meta">#</span><span class="language-bash">balance hdr(User-Agent)</span><br><span class="hljs-meta">#</span><span class="language-bash">balance hdr(host)</span><br><span class="hljs-meta">#</span><span class="language-bash">balance hdr(Host) use_domain_only</span><br><span class="hljs-meta">#</span><span class="language-bash">balance rdp-cookie</span><br><span class="hljs-meta">#</span><span class="language-bash">balance leastconn</span><br><span class="hljs-meta">#</span><span class="language-bash">balance <span class="hljs-built_in">source</span> //ip</span><br><br>balance roundrobin<br><br>        server node1 127.0.0.1:5673 check inter 5000 rise 2 fall 2<br>        server node2 127.0.0.1:5674 check inter 5000 rise 2 fall 2<br><br>listen stats<br>bind 172.16.98.133:8100<br>mode http<br>option httplog<br>stats enable<br>stats uri /rabbitmq-stats<br>stats refresh 5s<br></code></pre></td></tr></table></figure><p>å¯åŠ¨HAproxyè´Ÿè½½</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">/usr/local/haproxy/sbin/haproxy -f /etc/haproxy/haproxy.cfg<br>//æŸ¥çœ‹haproxyè¿›ç¨‹çŠ¶æ€<br>ps -ef | grep haproxy<br><br>è®¿é—®å¦‚ä¸‹åœ°å€å¯¹mqèŠ‚ç‚¹è¿›è¡Œç›‘æ§<br>http://172.16.98.133:8100/rabbitmq-stats<br></code></pre></td></tr></table></figure><p>ä»£ç ä¸­è®¿é—®mqé›†ç¾¤åœ°å€ï¼Œåˆ™å˜ä¸ºè®¿é—®haproxyåœ°å€:5672</p>]]></content>
    
    
    <categories>
      
      <category>RabbitMQğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RabbitMQ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBooté«˜çº§</title>
    <link href="/Hexo/2022/04/11/SpringBoot%E9%AB%98%E7%BA%A7/"/>
    <url>/Hexo/2022/04/11/SpringBoot%E9%AB%98%E7%BA%A7/</url>
    
    <content type="html"><![CDATA[<h2 id="01-SpringBooté«˜çº§-ä»Šæ—¥å†…å®¹"><a href="#01-SpringBooté«˜çº§-ä»Šæ—¥å†…å®¹" class="headerlink" title="01-SpringBooté«˜çº§-ä»Šæ—¥å†…å®¹"></a><strong>01-SpringBooté«˜çº§-ä»Šæ—¥å†…å®¹</strong></h2><ul><li>SpringBootè‡ªå®šé…ç½®</li><li>SpringBootäº‹ä»¶ç›‘å¬</li><li>SpringBootæµç¨‹åˆ†æ</li><li>SpringBootç›‘æ§</li><li>SpringBootéƒ¨ç½²</li></ul><h2 id="02-SpringBootè‡ªåŠ¨é…ç½®-Condition-1"><a href="#02-SpringBootè‡ªåŠ¨é…ç½®-Condition-1" class="headerlink" title="02-SpringBootè‡ªåŠ¨é…ç½®-Condition-1"></a><strong>02-SpringBootè‡ªåŠ¨é…ç½®-Condition-1</strong></h2><p> Conditionæ˜¯Spring4.0åå¼•å…¥çš„æ¡ä»¶åŒ–é…ç½®æ¥å£ï¼Œé€šè¿‡å®ç°Conditionæ¥å£å¯ä»¥å®Œæˆæœ‰æ¡ä»¶çš„åŠ è½½ç›¸åº”çš„Bean</p><p>@Conditionalè¦é…å’ŒConditionçš„å®ç°ç±»ï¼ˆClassConditionï¼‰è¿›è¡Œä½¿ç”¨</p><ul><li>ClassCondition</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassCondition</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Condition</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> context ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ç”¨äºè·å–ç¯å¢ƒï¼ŒIOCå®¹å™¨ï¼ŒClassLoaderå¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> metadata æ³¨è§£å…ƒå¯¹è±¡ã€‚ å¯ä»¥ç”¨äºè·å–æ³¨è§£å®šä¹‰çš„å±æ€§å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">matches</span><span class="hljs-params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> &#123;<br>      <br>        <span class="hljs-comment">//1.éœ€æ±‚ï¼š å¯¼å…¥Jedisåæ ‡ååˆ›å»ºBean</span><br>        <span class="hljs-comment">//æ€è·¯ï¼šåˆ¤æ–­redis.clients.jedis.Jedis.classæ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Class&lt;?&gt; cls = Class.forName(<span class="hljs-string">&quot;redis.clients.jedis.Jedis&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            flag = <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> flag;<br>      <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>UserConfig</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-meta">@Conditional(ClassCondition.class)</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">user</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootConditionApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å¯åŠ¨SpringBootçš„åº”ç”¨ï¼Œè¿”å›Springçš„IOCå®¹å™¨</span><br>        <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> SpringApplication.run(SpringbootConditionApplication.class, args);<br><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">&quot;user&quot;</span>);<br>        System.out.println(user);<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="03-SpringBootè‡ªåŠ¨é…ç½®-Condition-2"><a href="#03-SpringBootè‡ªåŠ¨é…ç½®-Condition-2" class="headerlink" title="03-SpringBootè‡ªåŠ¨é…ç½®-Condition-2"></a><strong>03-SpringBootè‡ªåŠ¨é…ç½®-Condition-2</strong></h2><p> éœ€æ±‚ï¼šå°†ç±»çš„åˆ¤æ–­å®šä¹‰ä¸ºåŠ¨æ€çš„ã€‚åˆ¤æ–­å“ªä¸ªå­—èŠ‚ç æ–‡ä»¶å­˜åœ¨å¯ä»¥åŠ¨æ€æŒ‡å®šã€‚</p><p>è‡ªå®šä¹‰æ¡ä»¶æ³¨è§£ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Conditional;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.*;<br><br><br><span class="hljs-meta">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Conditional(ClassCondition.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> ConditionOnClass &#123;<br>    String[] value();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>æ­¤å¤„@ConditionOnClassä¸ºè‡ªå®šä¹‰æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-comment">//@Conditional(ClassCondition.class)</span><br>    <span class="hljs-meta">@ConditionOnClass(&quot;com.alibaba.fastjson.JSON&quot;)</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">user</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-meta">@ConditionalOnProperty(name = &quot;itcast&quot;,havingValue = &quot;itheima&quot;)</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">user2</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•Userå¯¹è±¡çš„åˆ›å»º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootConditionApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å¯åŠ¨SpringBootçš„åº”ç”¨ï¼Œè¿”å›Springçš„IOCå®¹å™¨</span><br>        <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> SpringApplication.run(SpringbootConditionApplication.class, args);<br><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">&quot;user&quot;</span>);<br>        System.out.println(user);<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æ¡ä»¶æ³¨è§£æºç </p><p><img src="https://s2.loli.net/2022/04/10/9qytedS6O8kbWZM.png" alt="1571383973124"></p><p><strong>SpringBoot æä¾›çš„å¸¸ç”¨æ¡ä»¶æ³¨è§£ï¼š</strong></p><p>ConditionalOnPropertyï¼šåˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦æœ‰å¯¹åº”å±æ€§å’Œå€¼æ‰åˆå§‹åŒ–Bean</p><p>ConditionalOnClassï¼šåˆ¤æ–­ç¯å¢ƒä¸­æ˜¯å¦æœ‰å¯¹åº”å­—èŠ‚ç æ–‡ä»¶æ‰åˆå§‹åŒ–Bean</p><p>ConditionalOnMissingBeanï¼šåˆ¤æ–­ç¯å¢ƒä¸­æ²¡æœ‰å¯¹åº”Beanæ‰åˆå§‹åŒ–Bean</p><h2 id="04-SpringBootè‡ªåŠ¨é…ç½®-åˆ‡æ¢å†…ç½®webæœåŠ¡å™¨"><a href="#04-SpringBootè‡ªåŠ¨é…ç½®-åˆ‡æ¢å†…ç½®webæœåŠ¡å™¨" class="headerlink" title="04-SpringBootè‡ªåŠ¨é…ç½®-åˆ‡æ¢å†…ç½®webæœåŠ¡å™¨"></a><strong>04-SpringBootè‡ªåŠ¨é…ç½®-åˆ‡æ¢å†…ç½®webæœåŠ¡å™¨</strong></h2><p>æŸ¥çœ‹ç»§æ‰¿å…³ç³»å›¾</p><p><img src="https://s2.loli.net/2022/04/10/4Iqb7uJS5GhpWzK.png" alt="1571306414687"></p><p>æ’é™¤Tomcat</p><p><img src="https://s2.loli.net/2022/04/10/1IfDn3wkZRlL5Pa.png" alt="1571306366201"></p><p>pomæ–‡ä»¶ä¸­çš„æ’é™¤ä¾èµ–æ•ˆæœ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>           <span class="hljs-comment">&lt;!--æ’é™¤tomcatä¾èµ–--&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>               <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>           <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>       <span class="hljs-comment">&lt;!--å¼•å…¥jettyçš„ä¾èµ–--&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="05-SpringBootè‡ªåŠ¨é…ç½®-Enableæ³¨è§£åŸç†"><a href="#05-SpringBootè‡ªåŠ¨é…ç½®-Enableæ³¨è§£åŸç†" class="headerlink" title="05-SpringBootè‡ªåŠ¨é…ç½®-Enableæ³¨è§£åŸç†"></a>05-SpringBootè‡ªåŠ¨é…ç½®-Enableæ³¨è§£åŸç†</h2><ul><li><p>SpringBootä¸èƒ½ç›´æ¥è·å–åœ¨å…¶ä»–å·¥ç¨‹ä¸­å®šä¹‰çš„Bean</p><p>æ¼”ç¤ºä»£ç ï¼š</p><p>springboot-enableå·¥ç¨‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@ComponentScan</span> æ‰«æèŒƒå›´ï¼šå½“å‰å¼•å¯¼ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * com.itheima.springbootenable</span><br><span class="hljs-comment"> * com.itheima.config</span><br><span class="hljs-comment"> * //1.ä½¿ç”¨<span class="hljs-doctag">@ComponentScan</span>æ‰«æcom.itheima.configåŒ…</span><br><span class="hljs-comment"> * //2.å¯ä»¥ä½¿ç”¨<span class="hljs-doctag">@Import</span>æ³¨è§£ï¼ŒåŠ è½½ç±»ã€‚è¿™äº›ç±»éƒ½ä¼šè¢«Springåˆ›å»ºï¼Œå¹¶æ”¾å…¥IOCå®¹å™¨</span><br><span class="hljs-comment"> * //3.å¯ä»¥å¯¹Importæ³¨è§£è¿›è¡Œå°è£…ã€‚</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">//@ComponentScan(&quot;com.itheima.config&quot;)</span><br><span class="hljs-comment">//@Import(UserConfig.class)</span><br><span class="hljs-meta">@EnableUser</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootEnableApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> SpringApplication.run(SpringbootEnableApplication.class, args);<br><br>     <span class="hljs-comment">//è·å–Bean</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">&quot;user&quot;</span>);<br>        System.out.println(user);<br><br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>pomä¸­å¼•å…¥springboot-enable-other</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot-enable-other<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>springboot-enable-otherå·¥ç¨‹</p><p><strong>UserConfig</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>  <span class="hljs-keyword">public</span> User <span class="hljs-title function_">user</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>  &#125;<br><br> <br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>EnableUseræ³¨è§£ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java">  <span class="hljs-keyword">import</span> org.springframework.context.annotation.Import;<br>  <br>  <span class="hljs-keyword">import</span> java.lang.annotation.*;<br>  <br>  <span class="hljs-meta">@Target(ElementType.TYPE)</span><br>  <span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br>  <span class="hljs-meta">@Import(UserConfig.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> EnableUser &#123;<br>  <br>&#125;<br>  <br></code></pre></td></tr></table></figure><p><strong>åŸå› </strong>ï¼š@ComponentScan æ‰«æèŒƒå›´ï¼šå½“å‰å¼•å¯¼ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…</p><p><strong>ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>1.ä½¿ç”¨@ComponentScanæ‰«æcom.itheima.configåŒ… </p><p>2.å¯ä»¥ä½¿ç”¨@Importæ³¨è§£ï¼ŒåŠ è½½ç±»ã€‚è¿™äº›ç±»éƒ½ä¼šè¢«Springåˆ›å»ºï¼Œå¹¶æ”¾å…¥IOCå®¹å™¨</p><p>3.å¯ä»¥å¯¹Importæ³¨è§£è¿›è¡Œå°è£…ã€‚</p><p><strong>é‡ç‚¹ï¼šEnableæ³¨è§£åº•å±‚åŸç†æ˜¯ä½¿ç”¨@Importæ³¨è§£å®ç°Beançš„åŠ¨æ€åŠ è½½</strong></p></li></ul><h2 id="06-SpringBootè‡ªåŠ¨é…ç½®-Importè¯¦è§£"><a href="#06-SpringBootè‡ªåŠ¨é…ç½®-Importè¯¦è§£" class="headerlink" title="06-SpringBootè‡ªåŠ¨é…ç½®-@Importè¯¦è§£"></a><strong>06-SpringBootè‡ªåŠ¨é…ç½®-@Importè¯¦è§£</strong></h2><p>@Enable*åº•å±‚ä¾èµ–äº@Importæ³¨è§£å¯¼å…¥ä¸€äº›ç±»ï¼Œä½¿ç”¨@Importå¯¼å…¥çš„ç±»ä¼šè¢«SpringåŠ è½½åˆ°IOCå®¹å™¨ä¸­ã€‚è€Œ@Importæä¾›4ä¸­ç”¨æ³•ï¼š</p><p>â‘ å¯¼å…¥Bean</p><p>â‘¡å¯¼å…¥é…ç½®ç±»</p><p>â‘¢å¯¼å…¥ ImportSelector å®ç°ç±»ã€‚ä¸€èˆ¬ç”¨äºåŠ è½½é…ç½®æ–‡ä»¶ä¸­çš„ç±»</p><p>â‘£å¯¼å…¥ ImportBeanDefinitionRegistrar å®ç°ç±»ã€‚</p><ul><li><p>å¯¼å…¥Bean  @Import(User.class)</p></li><li><p>å¯¼å…¥é…ç½®ç±»  @Import(UserConfig.class)</p></li><li><p>å¯¼å…¥ ImportSelector å®ç°ç±»   @Import(MyImportSelector.class)</p><p>MyImportSelector </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyImportSelector</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ImportSelector</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;com.itheima.domain.User&quot;</span>, <span class="hljs-string">&quot;com.itheima.domain.Role&quot;</span>&#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å¯¼å…¥ ImportBeanDefinitionRegistrar å®ç°ç±»ã€‚@Import({MyImportBeanDefinitionRegistrar.class})</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyImportBeanDefinitionRegistrar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ImportBeanDefinitionRegistrar</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerBeanDefinitions</span><span class="hljs-params">(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span> &#123;<br>        <span class="hljs-type">AbstractBeanDefinition</span> <span class="hljs-variable">beanDefinition</span> <span class="hljs-operator">=</span> BeanDefinitionBuilder.rootBeanDefinition(User.class).getBeanDefinition();<br>        registry.registerBeanDefinition(<span class="hljs-string">&quot;user&quot;</span>, beanDefinition);<br><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>SpringbootEnableApplicationæµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java">  <br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Import4ä¸­ç”¨æ³•ï¼š</span><br><span class="hljs-comment">   *  1. å¯¼å…¥Bean</span><br><span class="hljs-comment">   *  2. å¯¼å…¥é…ç½®ç±»</span><br><span class="hljs-comment">   *  3. å¯¼å…¥ImportSelectorçš„å®ç°ç±»ã€‚</span><br><span class="hljs-comment">   *  4. å¯¼å…¥ImportBeanDefinitionRegistrarå®ç°ç±»</span><br><span class="hljs-comment">   */</span><br><br> <br><br>```java<br> <span class="hljs-comment">//@Import(User.class)</span><br>  <span class="hljs-comment">//@Import(UserConfig.class)</span><br>  <span class="hljs-comment">//@Import(MyImportSelector.class)</span><br>  <span class="hljs-comment">//@Import(&#123;MyImportBeanDefinitionRegistrar.class&#125;)</span><br><br>  <span class="hljs-meta">@SpringBootApplication</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootEnableApplication</span> &#123;<br><br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>          <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> SpringApplication.run(SpringbootEnableApplication.class, args);<br>      <br>          <span class="hljs-comment">/*//è·å–Bean</span><br><span class="hljs-comment">          Object user = context.getBean(&quot;user&quot;);</span><br><span class="hljs-comment">          System.out.println(user);*/</span><br>      <br>          <span class="hljs-comment">/*User user = context.getBean(User.class);</span><br><span class="hljs-comment">          System.out.println(user);</span><br><span class="hljs-comment">      </span><br><span class="hljs-comment">          Role role = context.getBean(Role.class);</span><br><span class="hljs-comment">          System.out.println(role);*/</span><br>      <br>        <span class="hljs-comment">/*  Object user = context.getBean(&quot;user&quot;);</span><br><span class="hljs-comment">          System.out.println(user);*/</span><br>       Map&lt;String, User&gt; map = context.getBeansOfType(User.class);<br>          System.out.println(map);<br>      <br>      &#125;<br><br>  &#125;<br></code></pre></td></tr></table></figure></li></ul><p>@EnableAutoConfigurationä¸­ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰ç§æ–¹å¼ï¼š@Import(AutoConfigurationImportSelector.class)</p><h2 id="07-SpringBootè‡ªåŠ¨é…ç½®-EnableAutoConfigurationè¯¦è§£"><a href="#07-SpringBootè‡ªåŠ¨é…ç½®-EnableAutoConfigurationè¯¦è§£" class="headerlink" title="07-SpringBootè‡ªåŠ¨é…ç½®-@EnableAutoConfigurationè¯¦è§£"></a><strong>07-SpringBootè‡ªåŠ¨é…ç½®-@EnableAutoConfigurationè¯¦è§£</strong></h2><p><img src="https://s2.loli.net/2022/04/10/fbg16JBx8Z54QMa.png" alt="1571387384701"></p><ul><li><p>@EnableAutoConfiguration æ³¨è§£å†…éƒ¨ä½¿ç”¨ @Import(AutoConfigurationImportSelector.<strong>class</strong>)æ¥åŠ è½½é…ç½®ç±»ã€‚ </p></li><li><p>é…ç½®æ–‡ä»¶ä½ç½®ï¼šMETA-INF&#x2F;spring.factoriesï¼Œè¯¥é…ç½®æ–‡ä»¶ä¸­å®šä¹‰äº†å¤§é‡çš„é…ç½®ç±»ï¼Œå½“ SpringBoot åº”ç”¨å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åŠ è½½è¿™äº›é…ç½®ç±»ï¼Œåˆå§‹åŒ–Bean</p></li><li><p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„Beanéƒ½ä¼šè¢«åˆå§‹åŒ–ï¼Œåœ¨é…ç½®ç±»ä¸­ä½¿ç”¨Conditionæ¥åŠ è½½æ»¡è¶³æ¡ä»¶çš„Bean</p></li></ul><h2 id="08-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starteræ­¥éª¤åˆ†æ"><a href="#08-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starteræ­¥éª¤åˆ†æ" class="headerlink" title="08-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starteræ­¥éª¤åˆ†æ"></a><strong>08-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starteræ­¥éª¤åˆ†æ</strong></h2><p><strong>éœ€æ±‚ï¼š</strong>è‡ªå®šä¹‰redis-starterã€‚è¦æ±‚å½“å¯¼å…¥redisåæ ‡æ—¶ï¼ŒSpringBootè‡ªåŠ¨åˆ›å»ºJedisçš„Beanã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><p>â‘ åˆ›å»º redis-spring-boot-autoconfigure æ¨¡å—</p><p>â‘¡åˆ›å»º redis-spring-boot-starter æ¨¡å—,ä¾èµ– redis-spring-boot-autoconfigureçš„æ¨¡å—</p><p>â‘¢åœ¨ redis-spring-boot-autoconfigure æ¨¡å—ä¸­åˆå§‹åŒ– Jedis çš„ Beanã€‚å¹¶å®šä¹‰META-INF&#x2F;spring.factories æ–‡ä»¶</p><p>â‘£åœ¨æµ‹è¯•æ¨¡å—ä¸­å¼•å…¥è‡ªå®šä¹‰çš„ redis-starter ä¾èµ–ï¼Œæµ‹è¯•è·å– Jedis çš„Beanï¼Œæ“ä½œ redisã€‚</p><h2 id="09-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starterå®ç°-1"><a href="#09-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starterå®ç°-1" class="headerlink" title="09-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starterå®ç°-1"></a><strong>09-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starterå®ç°-1</strong></h2><ol><li><strong>åˆ›å»ºredis-spring-boot-starterå·¥ç¨‹</strong></li></ol><p>â€‹         pomæ–‡ä»¶ä¸­å¼•å…¥redis-spring-boot-autoconfigure</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¼•å…¥configure--&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redis-spring-boot-autoconfigure<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="2"><li><strong>åˆ›å»ºredis-spring-boot-autoconfigureé…ç½®å·¥ç¨‹</strong></li></ol><p>åˆ›å»ºRedisPropertiesé…ç½®æ–‡ä»¶å‚æ•°ç»‘å®šç±» </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;redis&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisProperties</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">host</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;localhost&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">port</span> <span class="hljs-operator">=</span> <span class="hljs-number">6379</span>;<br><br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getHost</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> host;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHost</span><span class="hljs-params">(String host)</span> &#123;<br>        <span class="hljs-built_in">this</span>.host = host;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getPort</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> port;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPort</span><span class="hljs-params">(<span class="hljs-type">int</span> port)</span> &#123;<br>        <span class="hljs-built_in">this</span>.port = port;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p> åˆ›å»ºRedisAutoConfigurationè‡ªåŠ¨é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableConfigurationProperties(RedisProperties.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisAutoConfiguration</span> &#123;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æä¾›Jedisçš„bean</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Jedis <span class="hljs-title function_">jedis</span><span class="hljs-params">(RedisProperties redisProperties)</span> &#123;<br>       <br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(redisProperties.getHost(), redisProperties.getPort());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨resourceç›®å½•ä¸‹åˆ›å»ºMETA-INFæ–‡ä»¶å¤¹å¹¶åˆ›å»ºspring.factories</p><p>æ³¨æ„ï¼šâ€\ â€œæ˜¯æ¢è¡Œä½¿ç”¨çš„</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="hljs-string">\</span><br><span class="hljs-string">  com.itheima.redis.config.RedisAutoConfiguration</span><br></code></pre></td></tr></table></figure><ol start="3"><li><strong>åœ¨springboot-enableå·¥ç¨‹ä¸­å¼•å…¥è‡ªå®šä¹‰çš„redisçš„starter</strong></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--è‡ªå®šä¹‰çš„redisçš„starter--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨SpringbootEnableApplicationå¯åŠ¨ç±»ä¸­æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> context.getBean(Jedis.class);<br>       System.out.println(jedis);<br></code></pre></td></tr></table></figure><h2 id="10-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starterå®ç°-2"><a href="#10-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starterå®ç°-2" class="headerlink" title="10-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starterå®ç°-2"></a><strong>10-SpringBootè‡ªåŠ¨é…ç½®-è‡ªå®šä¹‰starterå®ç°-2</strong></h2><p>æµ‹è¯•springboot-enableå·¥ç¨‹ä¸­çš„application.propertiesä¸­çš„é…ç½®å‚æ•°</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis.port</span>=<span class="hljs-string">6666</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ³¨è§£å®Œæˆæœ‰æ¡ä»¶åŠ è½½é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableConfigurationProperties(RedisProperties.class)</span><br><span class="hljs-meta">@ConditionalOnClass(Jedis.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisAutoConfiguration</span> &#123;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æä¾›Jedisçš„bean</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-meta">@ConditionalOnMissingBean(name = &quot;jedis&quot;)</span><br>    <span class="hljs-keyword">public</span> Jedis <span class="hljs-title function_">jedis</span><span class="hljs-params">(RedisProperties redisProperties)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;RedisAutoConfiguration....&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(redisProperties.getHost(), redisProperties.getPort());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="11-SpringBootäº‹ä»¶ç›‘å¬"><a href="#11-SpringBootäº‹ä»¶ç›‘å¬" class="headerlink" title="11-SpringBootäº‹ä»¶ç›‘å¬"></a><strong>11-SpringBootäº‹ä»¶ç›‘å¬</strong></h2><p> Javaä¸­çš„äº‹ä»¶ç›‘å¬æœºåˆ¶å®šä¹‰äº†ä»¥ä¸‹å‡ ä¸ªè§’è‰²ï¼š</p><p>â‘ äº‹ä»¶ï¼šEventï¼Œç»§æ‰¿ java.util.EventObject ç±»çš„å¯¹è±¡</p><p>â‘¡äº‹ä»¶æºï¼šSource ï¼Œä»»æ„å¯¹è±¡Object</p><p>â‘¢ç›‘å¬å™¨ï¼šListenerï¼Œå®ç° java.util.EventListener æ¥å£ çš„å¯¹è±¡</p><p>SpringBoot åœ¨é¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¼šå¯¹å‡ ä¸ªç›‘å¬å™¨è¿›è¡Œå›è°ƒï¼Œæˆ‘ä»¬å¯ä»¥å®ç°è¿™äº›ç›‘å¬å™¨æ¥å£ï¼Œåœ¨é¡¹ç›®å¯åŠ¨æ—¶å®Œæˆä¸€äº›æ“ä½œã€‚</p><ul><li><p>ApplicationContextInitializerã€</p></li><li><p>SpringApplicationRunListenerã€</p></li><li><p>CommandLineRunnerã€</p></li><li><p>ApplicationRunner</p><p>è‡ªå®šä¹‰ç›‘å¬å™¨çš„å¯åŠ¨æ—¶æœºï¼šMyApplicationRunnerå’ŒMyCommandLineRunneréƒ½æ˜¯å½“é¡¹ç›®å¯åŠ¨åæ‰§è¡Œï¼Œä½¿ç”¨@Componentæ”¾å…¥å®¹å™¨å³å¯ä½¿ç”¨</p></li></ul><p>MyApplicationRunner</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å½“é¡¹ç›®å¯åŠ¨åæ‰§è¡Œrunæ–¹æ³•ã€‚</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplicationRunner</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationRunner</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(ApplicationArguments args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        System.out.println(<span class="hljs-string">&quot;ApplicationRunner...run&quot;</span>);<br>        System.out.println(Arrays.asList(args.getSourceArgs()));<br>    &#125;<br>&#125; <br></code></pre></td></tr></table></figure><p> MyCommandLineRunner</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCommandLineRunner</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        System.out.println(<span class="hljs-string">&quot;CommandLineRunner...run&quot;</span>);<br>        System.out.println(Arrays.asList(args));<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>MyApplicationContextInitializerçš„ä½¿ç”¨è¦åœ¨resourceæ–‡ä»¶å¤¹ä¸‹æ·»åŠ META-INF&#x2F;spring.factories</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">org.springframework.context.ApplicationContextInitializer</span>=<span class="hljs-string">com.itheima.springbootlistener.listener.MyApplicationContextInitializer</span><br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplicationContextInitializer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationContextInitializer</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">initialize</span>(<span class="hljs-params">ConfigurableApplicationContext applicationContext</span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;ApplicationContextInitializer....initialize&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>MySpringApplicationRunListenerçš„ä½¿ç”¨è¦æ·»åŠ <strong>æ„é€ å™¨</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MySpringApplicationRunListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SpringApplicationRunListener</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">MySpringApplicationRunListener</span>(<span class="hljs-title class_">SpringApplication</span> application, <span class="hljs-title class_">String</span>[] args) &#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">starting</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;starting...é¡¹ç›®å¯åŠ¨ä¸­&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">environmentPrepared</span>(<span class="hljs-params">ConfigurableEnvironment environment</span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;environmentPrepared...ç¯å¢ƒå¯¹è±¡å¼€å§‹å‡†å¤‡&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">contextPrepared</span>(<span class="hljs-params">ConfigurableApplicationContext context</span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;contextPrepared...ä¸Šä¸‹æ–‡å¯¹è±¡å¼€å§‹å‡†å¤‡&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">contextLoaded</span>(<span class="hljs-params">ConfigurableApplicationContext context</span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;contextLoaded...ä¸Šä¸‹æ–‡å¯¹è±¡å¼€å§‹åŠ è½½&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">started</span>(<span class="hljs-params">ConfigurableApplicationContext context</span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;started...ä¸Šä¸‹æ–‡å¯¹è±¡åŠ è½½å®Œæˆ&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">running</span>(<span class="hljs-params">ConfigurableApplicationContext context</span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;running...é¡¹ç›®å¯åŠ¨å®Œæˆï¼Œå¼€å§‹è¿è¡Œ&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">failed</span>(<span class="hljs-params">ConfigurableApplicationContext context, Throwable exception</span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;failed...é¡¹ç›®å¯åŠ¨å¤±è´¥&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="12-SpringBootæµç¨‹åˆ†æ-åˆå§‹åŒ–"><a href="#12-SpringBootæµç¨‹åˆ†æ-åˆå§‹åŒ–" class="headerlink" title="12-SpringBootæµç¨‹åˆ†æ-åˆå§‹åŒ–"></a><strong>12-SpringBootæµç¨‹åˆ†æ-åˆå§‹åŒ–</strong></h2><ol><li><p>é…ç½®å¯åŠ¨å¼•å¯¼ç±»ï¼ˆåˆ¤æ–­æ˜¯å¦æœ‰å¯åŠ¨ä¸»ç±»ï¼‰</p></li><li><p>åˆ¤æ–­æ˜¯å¦æ˜¯Webç¯å¢ƒ</p></li><li><p>è·å–åˆå§‹åŒ–ç±»ã€ç›‘å¬å™¨ç±»</p></li></ol><p><img src="/Hexo/img/1571369439416.png" alt="1571369439416"></p><h2 id="13-SpringBootæµç¨‹åˆ†æ-run"><a href="#13-SpringBootæµç¨‹åˆ†æ-run" class="headerlink" title="13-SpringBootæµç¨‹åˆ†æ-run"></a><strong>13-SpringBootæµç¨‹åˆ†æ-run</strong></h2><ol><li><p>å¯åŠ¨è®¡æ—¶å™¨</p></li><li><p>æ‰§è¡Œç›‘å¬å™¨</p></li><li><p>å‡†å¤‡ç¯å¢ƒ</p></li><li><p>æ‰“å°bannerï¼šå¯ä»¥resourceä¸‹ç²˜è´´è‡ªå®šä¹‰çš„banner</p></li><li><p>åˆ›å»ºcontext</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">refresh<span class="hljs-constructor">Context(<span class="hljs-params">context</span>)</span>;<br></code></pre></td></tr></table></figure><p>æ‰§è¡ŒrefreshContextæ–¹æ³•åæ‰çœŸæ­£åˆ›å»ºBean</p></li></ol><p><img src="https://pic.imgdb.cn/item/6373871e16f2c2beb19b4546.png" alt="1571373793325"></p><h2 id="14-SpringBootç›‘æ§-actuatoråŸºæœ¬ä½¿ç”¨"><a href="#14-SpringBootç›‘æ§-actuatoråŸºæœ¬ä½¿ç”¨" class="headerlink" title="14-SpringBootç›‘æ§-actuatoråŸºæœ¬ä½¿ç”¨"></a><strong>14-SpringBootç›‘æ§-actuatoråŸºæœ¬ä½¿ç”¨</strong></h2><p> â‘ å¯¼å…¥ä¾èµ–åæ ‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â‘¡è®¿é—®<a href="http://localhost:8080/acruator">http://localhost:8080/acruator</a></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;_links&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;self&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;http://localhost:8080/actuator&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-keyword">false</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;health&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;http://localhost:8080/actuator/health&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-keyword">false</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;health-component-instance&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;http://localhost:8080/actuator/health/&#123;component&#125;/&#123;instance&#125;&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-keyword">true</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;health-component&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;http://localhost:8080/actuator/health/&#123;component&#125;&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-keyword">true</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;info&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;http://localhost:8080/actuator/info&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-keyword">false</span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><a href="http://localhost:8080/actuator/info">http://localhost:8080/actuator/info</a></p><p>åœ¨application.propertiesä¸­é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">info.name</span>=<span class="hljs-string">lucy</span><br><span class="hljs-attr">info.age</span>=<span class="hljs-string">99</span><br></code></pre></td></tr></table></figure><p><a href="http://localhost:8080/actuator/health">http://localhost:8080/actuator/health</a></p><p>å¼€å¯å¥åº·æ£€æŸ¥è¯¦ç»†ä¿¡æ¯</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">management.endpoint.health.show-details</span>=<span class="hljs-string">always</span><br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;UP&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;details&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;diskSpace&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;UP&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;details&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;total&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">159579508736</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;free&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">13558104064</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;threshold&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">10485760</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;redis&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;UP&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;details&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2.4.5&quot;</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="15-SpringBootç›‘æ§-actuatorå¼€å¯æ‰€æœ‰endpoint"><a href="#15-SpringBootç›‘æ§-actuatorå¼€å¯æ‰€æœ‰endpoint" class="headerlink" title="15-SpringBootç›‘æ§-actuatorå¼€å¯æ‰€æœ‰endpoint"></a><strong>15-SpringBootç›‘æ§-actuatorå¼€å¯æ‰€æœ‰endpoint</strong></h2><p> å¼€å¯æ‰€æœ‰endpoint</p><p>åœ¨application.propertiesä¸­é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">management.endpoints.web.exposure.include</span>=<span class="hljs-string">*</span><br></code></pre></td></tr></table></figure><p>å¼€å¯æ‰€æœ‰endpointçš„è¿”å›ç»“æœï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&#123;</span><br>    <span class="hljs-attr">&quot;_links&quot;</span>:<span class="hljs-string">&#123;</span><br>        <span class="hljs-attr">&quot;self&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;auditevents&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/auditevents&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;beans&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/beans&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;caches-cache&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/caches/&#123;cache&#125;&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">true</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;caches&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/caches&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;health-component-instance&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/health/&#123;component&#125;/&#123;instance&#125;&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">true</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;health&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/health&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;health-component&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/health/&#123;component&#125;&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">true</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;conditions&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/conditions&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;configprops&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/configprops&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;env&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/env&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;env-toMatch&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/env/&#123;toMatch&#125;&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">true</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;info&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/info&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;loggers&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/loggers&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;loggers-name&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/loggers/&#123;name&#125;&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">true</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;heapdump&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/heapdump&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;threaddump&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/threaddump&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;metrics-requiredMetricName&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/metrics/&#123;requiredMetricName&#125;&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">true</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;metrics&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/metrics&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;scheduledtasks&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/scheduledtasks&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;httptrace&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/httptrace&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;,</span><br>        <span class="hljs-attr">&quot;mappings&quot;</span>:<span class="hljs-string">&#123;</span><br>            <span class="hljs-attr">&quot;href&quot;</span>:<span class="hljs-string">&quot;http://localhost:8080/actuator/mappings&quot;,</span><br>            <span class="hljs-attr">&quot;templated&quot;</span>:<span class="hljs-string">false</span><br>        <span class="hljs-attr">&#125;</span><br>    <span class="hljs-attr">&#125;</span><br><span class="hljs-attr">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="16-SpringBootç›‘æ§-springboot-adminå›¾å½¢åŒ–ç•Œé¢ä½¿ç”¨"><a href="#16-SpringBootç›‘æ§-springboot-adminå›¾å½¢åŒ–ç•Œé¢ä½¿ç”¨" class="headerlink" title="16-SpringBootç›‘æ§-springboot adminå›¾å½¢åŒ–ç•Œé¢ä½¿ç”¨"></a><strong>16-SpringBootç›‘æ§-springboot adminå›¾å½¢åŒ–ç•Œé¢ä½¿ç”¨</strong></h2><p>SpringBoot Admin æœ‰ä¸¤ä¸ªè§’è‰²ï¼Œå®¢æˆ·ç«¯(Client)å’ŒæœåŠ¡ç«¯(Server)ã€‚</p><p>ä»¥ä¸‹ä¸ºåˆ›å»ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å·¥ç¨‹æ­¥éª¤ï¼š</p><p>admin-serverï¼š</p><p>â‘ åˆ›å»º admin-server æ¨¡å—</p><p>â‘¡å¯¼å…¥ä¾èµ–åæ ‡ admin-starter-server</p><p><img src="https://pic.imgdb.cn/item/6373872e16f2c2beb19b59af.png" alt="1571812312998"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>de.codecentric<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-admin-starter-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â‘¢åœ¨å¼•å¯¼ç±»ä¸Šå¯ç”¨ç›‘æ§åŠŸèƒ½@EnableAdminServer</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableAdminServer</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootAdminServerApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(SpringbootAdminServerApplication.class, args);<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>admin-clientï¼š</p><p>â‘ åˆ›å»º admin-client æ¨¡å—</p><p>â‘¡å¯¼å…¥ä¾èµ–åæ ‡ admin-starter-client</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>de.codecentric<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-admin-starter-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â‘¢é…ç½®ç›¸å…³ä¿¡æ¯ï¼šserveråœ°å€ç­‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># æ‰§è¡Œadmin.serveråœ°å€</span><br><span class="hljs-attr">spring.boot.admin.client.url</span>=<span class="hljs-string">http://localhost:9000</span><br><br><span class="hljs-attr">management.endpoint.health.show-details</span>=<span class="hljs-string">always</span><br><span class="hljs-attr">management.endpoints.web.exposure.include</span>=<span class="hljs-string">*</span><br></code></pre></td></tr></table></figure><p>â‘£å¯åŠ¨serverå’ŒclientæœåŠ¡ï¼Œè®¿é—®server</p><h2 id="17-SpringBootéƒ¨ç½²"><a href="#17-SpringBootéƒ¨ç½²" class="headerlink" title="17-SpringBootéƒ¨ç½²"></a><strong>17-SpringBootéƒ¨ç½²</strong></h2><p> SpringBoot é¡¹ç›®å¼€å‘å®Œæ¯•åï¼Œæ”¯æŒä¸¤ç§æ–¹å¼éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼š</p><p>â‘ jaråŒ…(å®˜æ–¹æ¨è)</p><p>â‘¡waråŒ…</p><p><strong>æ›´æ”¹pomæ–‡ä»¶ä¸­çš„æ‰“åŒ…æ–¹å¼ä¸ºwar</strong></p><p>ä¿®æ”¹å¯åŠ¨ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder;<br><span class="hljs-keyword">import</span> org.springframework.boot.web.servlet.support.SpringBootServletInitializer;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootDeployApplication</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SpringBootServletInitializer</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(SpringbootDeployApplication.class, args);<br>    &#125;<br><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> SpringApplicationBuilder <span class="hljs-title function_">configure</span><span class="hljs-params">(SpringApplicationBuilder builder)</span> &#123;<br>        <span class="hljs-keyword">return</span> builder.sources(SpringbootDeployApplication.class);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æŒ‡å®šæ‰“åŒ…çš„åç§°</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">finalName</span>&gt;</span>springboot<span class="hljs-tag">&lt;/<span class="hljs-name">finalName</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>           <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Springæ¡†æ¶â¤</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Redisé«˜çº§</title>
    <link href="/Hexo/2022/04/09/Redis%E9%AB%98%E7%BA%A7/"/>
    <url>/Hexo/2022/04/09/Redis%E9%AB%98%E7%BA%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬äºŒç« ï¼šRedisé«˜çº§"><a href="#ç¬¬äºŒç« ï¼šRedisé«˜çº§" class="headerlink" title="ç¬¬äºŒç« ï¼šRedisé«˜çº§"></a>ç¬¬äºŒç« ï¼šRedisé«˜çº§</h1><h2 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h2><p>ç›®æ ‡1ï¼šèƒ½å¤Ÿè¯´å‡ºredisä¸­çš„æ•°æ®åˆ é™¤ç­–ä¸ç•¥æ·˜æ±°ç­–ç•¥</p><p>ç›®æ ‡2ï¼šèƒ½å¤Ÿè¯´å‡ºä¸»ä»å¤åˆ¶çš„æ¦‚å¿µï¼Œå·¥ä½œæµç¨‹ä»¥åŠåœºæ™¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</p><p>ç›®æ ‡3ï¼šèƒ½å¤Ÿè¯´å‡ºå“¨å…µçš„ä½œç”¨ä»¥åŠå·¥ä½œåŸç†ï¼Œä»¥åŠå¦‚ä½•å¯ç”¨å“¨å…µ</p><p>ç›®æ ‡4ï¼šèƒ½å¤Ÿè¯´å‡ºé›†ç¾¤çš„æ¶æ„è®¾è®¡ï¼Œå®Œæˆé›†ç¾¤çš„æ­å»º</p><p>ç›®æ ‡5ï¼šèƒ½å¤Ÿè¯´å‡ºç¼“å­˜é¢„çƒ­ï¼Œé›ªå´©ï¼Œå‡»ç©¿ï¼Œç©¿é€çš„æ¦‚å¿µï¼Œèƒ½è¯´å‡ºredisçš„ç›¸å…³ç›‘æ§æŒ‡æ ‡</p><h2 id="1-æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥"><a href="#1-æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥" class="headerlink" title="1.æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥"></a>1.æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥</h2><h3 id="1-1-è¿‡æœŸæ•°æ®"><a href="#1-1-è¿‡æœŸæ•°æ®" class="headerlink" title="1.1 è¿‡æœŸæ•°æ®"></a>1.1 è¿‡æœŸæ•°æ®</h3><h4 id="1-1-1-Redisä¸­çš„æ•°æ®ç‰¹å¾"><a href="#1-1-1-Redisä¸­çš„æ•°æ®ç‰¹å¾" class="headerlink" title="1.1.1 Redisä¸­çš„æ•°æ®ç‰¹å¾"></a><strong>1.1.1 Redisä¸­çš„æ•°æ®ç‰¹å¾</strong></h4><p>Redisæ˜¯ä¸€ç§å†…å­˜çº§æ•°æ®åº“ï¼Œæ‰€æœ‰æ•°æ®å‡å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡TTLæŒ‡ä»¤è·å–å…¶çŠ¶æ€</p><p>TTLè¿”å›çš„å€¼æœ‰ä¸‰ç§æƒ…å†µï¼šæ­£æ•°ï¼Œ-1ï¼Œ-2</p><ul><li><strong>æ­£æ•°</strong>ï¼šä»£è¡¨è¯¥æ•°æ®åœ¨å†…å­˜ä¸­è¿˜èƒ½å­˜æ´»çš„æ—¶é—´</li><li><strong>-1</strong>ï¼šæ°¸ä¹…æœ‰æ•ˆçš„æ•°æ®</li><li><strong>2</strong> ï¼šå·²ç»è¿‡æœŸçš„æ•°æ® æˆ–è¢«åˆ é™¤çš„æ•°æ® æˆ– æœªå®šä¹‰çš„æ•°æ®</li></ul><p><strong>åˆ é™¤ç­–ç•¥å°±æ˜¯é’ˆå¯¹å·²è¿‡æœŸæ•°æ®çš„å¤„ç†ç­–ç•¥</strong>ï¼Œå·²è¿‡æœŸçš„æ•°æ®æ˜¯çœŸçš„å°±ç«‹å³åˆ é™¤äº†å—ï¼Ÿå…¶å®ä¹Ÿä¸æ˜¯ï¼Œæˆ‘ä»¬ä¼šæœ‰å¤šç§åˆ é™¤ç­–ç•¥ï¼Œæ˜¯åˆ†æƒ…å†µçš„ï¼Œåœ¨ä¸åŒçš„åœºæ™¯ä¸‹ä½¿ç”¨ä¸åŒçš„åˆ é™¤æ–¹å¼ä¼šæœ‰ä¸åŒæ•ˆæœï¼Œè¿™ä¹Ÿæ­£æ˜¯æˆ‘ä»¬è¦å°†çš„æ•°æ®çš„åˆ é™¤ç­–ç•¥çš„é—®é¢˜</p><h4 id="1-1-2-æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„"><a href="#1-1-2-æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„" class="headerlink" title="1.1.2 æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„"></a>1.1.2 æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„</h4><p>åœ¨Redisä¸­ï¼Œå¦‚ä½•ç»™æ•°æ®è®¾ç½®å®ƒçš„å¤±æ•ˆå‘¨æœŸå‘¢ï¼Ÿæ•°æ®çš„æ—¶æ•ˆåœ¨redisä¸­å¦‚ä½•å­˜å‚¨å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š</p><p><img src="https://s2.loli.net/2022/04/06/9ch84CIriRs3H5V.png"></p><p>è¿‡æœŸæ•°æ®æ˜¯ä¸€å—ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ï¼ŒHashç»“æ„ï¼Œfieldæ˜¯å†…å­˜åœ°å€ï¼Œvalueæ˜¯è¿‡æœŸæ—¶é—´ï¼Œä¿å­˜äº†æ‰€æœ‰keyçš„è¿‡æœŸæè¿°ï¼Œåœ¨æœ€ç»ˆè¿›è¡Œè¿‡æœŸå¤„ç†çš„æ—¶å€™ï¼Œå¯¹è¯¥ç©ºé—´çš„æ•°æ®è¿›è¡Œæ£€æµ‹ï¼Œ å½“æ—¶é—´åˆ°æœŸä¹‹åé€šè¿‡fieldæ‰¾åˆ°å†…å­˜è¯¥åœ°å€å¤„çš„æ•°æ®ï¼Œç„¶åè¿›è¡Œç›¸å…³æ“ä½œã€‚</p><h3 id="1-2-æ•°æ®åˆ é™¤ç­–ç•¥"><a href="#1-2-æ•°æ®åˆ é™¤ç­–ç•¥" class="headerlink" title="1.2 æ•°æ®åˆ é™¤ç­–ç•¥"></a>1.2 æ•°æ®åˆ é™¤ç­–ç•¥</h3><h4 id="1-2-1-æ•°æ®åˆ é™¤ç­–ç•¥çš„ç›®æ ‡"><a href="#1-2-1-æ•°æ®åˆ é™¤ç­–ç•¥çš„ç›®æ ‡" class="headerlink" title="1.2.1 æ•°æ®åˆ é™¤ç­–ç•¥çš„ç›®æ ‡"></a>1.2.1 æ•°æ®åˆ é™¤ç­–ç•¥çš„ç›®æ ‡</h4><p>åœ¨å†…å­˜å ç”¨ä¸CPUå ç”¨ä¹‹é—´å¯»æ‰¾ä¸€ç§å¹³è¡¡ï¼Œé¡¾æ­¤å¤±å½¼éƒ½ä¼šé€ æˆæ•´ä½“redisæ€§èƒ½çš„ä¸‹é™ï¼Œç”šè‡³å¼•å‘æœåŠ¡å™¨å®•æœºæˆ– å†…å­˜æ³„éœ²</p><p>é’ˆå¯¹è¿‡æœŸæ•°æ®è¦è¿›è¡Œåˆ é™¤çš„æ—¶å€™éƒ½æœ‰å“ªäº›åˆ é™¤ç­–ç•¥å‘¢ï¼Ÿ</p><ul><li>1.å®šæ—¶åˆ é™¤</li><li>2.æƒ°æ€§åˆ é™¤</li><li>3.å®šæœŸåˆ é™¤</li></ul><h4 id="1-2-2-å®šæ—¶åˆ é™¤"><a href="#1-2-2-å®šæ—¶åˆ é™¤" class="headerlink" title="1.2.2 å®šæ—¶åˆ é™¤"></a>1.2.2 å®šæ—¶åˆ é™¤</h4><p>åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“keyè®¾ç½®æœ‰è¿‡æœŸæ—¶é—´ï¼Œä¸”è¿‡æœŸæ—¶é—´åˆ°è¾¾æ—¶ï¼Œç”±å®šæ—¶å™¨ä»»åŠ¡ç«‹å³æ‰§è¡Œå¯¹é”®çš„åˆ é™¤æ“ä½œ</p><ul><li><strong>ä¼˜ç‚¹</strong>ï¼šèŠ‚çº¦å†…å­˜ï¼Œåˆ°æ—¶å°±åˆ é™¤ï¼Œå¿«é€Ÿé‡Šæ”¾æ‰ä¸å¿…è¦çš„å†…å­˜å ç”¨</li><li><strong>ç¼ºç‚¹</strong>ï¼šCPUå‹åŠ›å¾ˆå¤§ï¼Œæ— è®ºCPUæ­¤æ—¶è´Ÿè½½é‡å¤šé«˜ï¼Œå‡å ç”¨CPUï¼Œä¼šå½±å“redisæœåŠ¡å™¨å“åº”æ—¶é—´å’ŒæŒ‡ä»¤ååé‡</li><li><strong>æ€»ç»“</strong>ï¼šç”¨å¤„ç†å™¨æ€§èƒ½æ¢å–å­˜å‚¨ç©ºé—´ï¼ˆæ‹¿æ—¶é—´æ¢ç©ºé—´ï¼‰</li></ul><p><img src="https://s2.loli.net/2022/04/06/G1ExzXNcHZm8h2U.png"></p><h4 id="1-2-3-æƒ°æ€§åˆ é™¤"><a href="#1-2-3-æƒ°æ€§åˆ é™¤" class="headerlink" title="1.2.3 æƒ°æ€§åˆ é™¤"></a>1.2.3 æƒ°æ€§åˆ é™¤</h4><p>æ•°æ®åˆ°è¾¾è¿‡æœŸæ—¶é—´ï¼Œä¸åšå¤„ç†ã€‚ç­‰ä¸‹æ¬¡è®¿é—®è¯¥æ•°æ®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­</p><ol><li>å¦‚æœæœªè¿‡æœŸï¼Œè¿”å›æ•°æ®</li><li>å‘ç°å·²è¿‡æœŸï¼Œåˆ é™¤ï¼Œè¿”å›ä¸å­˜åœ¨</li></ol><ul><li><strong>ä¼˜ç‚¹</strong>ï¼šèŠ‚çº¦CPUæ€§èƒ½ï¼Œå‘ç°å¿…é¡»åˆ é™¤çš„æ—¶å€™æ‰åˆ é™¤</li><li><strong>ç¼ºç‚¹</strong>ï¼šå†…å­˜å‹åŠ›å¾ˆå¤§ï¼Œå‡ºç°é•¿æœŸå ç”¨å†…å­˜çš„æ•°æ®</li><li><strong>æ€»ç»“</strong>ï¼šç”¨å­˜å‚¨ç©ºé—´æ¢å–å¤„ç†å™¨æ€§èƒ½ï¼ˆæ‹¿æ—¶é—´æ¢ç©ºé—´ï¼‰</li></ul><p><img src="https://s2.loli.net/2022/04/06/fvW8YFNCUjwLXBc.png"></p><h4 id="1-2-4-å®šæœŸåˆ é™¤"><a href="#1-2-4-å®šæœŸåˆ é™¤" class="headerlink" title="1.2.4 å®šæœŸåˆ é™¤"></a>1.2.4 å®šæœŸåˆ é™¤</h4><p>å®šæ—¶åˆ é™¤å’Œæƒ°æ€§åˆ é™¤è¿™ä¸¤ç§æ–¹æ¡ˆéƒ½æ˜¯èµ°çš„æç«¯ï¼Œé‚£æœ‰æ²¡æœ‰æŠ˜ä¸­æ–¹æ¡ˆï¼Ÿ</p><p>æˆ‘ä»¬æ¥è®²redisçš„å®šæœŸåˆ é™¤æ–¹æ¡ˆï¼š</p><ul><li><p>Rediså¯åŠ¨æœåŠ¡å™¨åˆå§‹åŒ–æ—¶ï¼Œè¯»å–é…ç½®server.hzçš„å€¼ï¼Œé»˜è®¤ä¸º10</p></li><li><p>æ¯ç§’é’Ÿæ‰§è¡Œserver.hzæ¬¡<strong>serverCron()</strong>â€”â€”â€“&gt;<strong>databasesCron()</strong>â€”â€”â€”&gt;<strong>activeExpireCycle()</strong></p></li><li><p>**activeExpireCycle()*<em>å¯¹æ¯ä¸ªexpires[</em>]é€ä¸€è¿›è¡Œæ£€æµ‹ï¼Œæ¯æ¬¡æ‰§è¡Œè€—æ—¶ï¼š250ms&#x2F;server.hz</p></li><li><p>å¯¹æŸä¸ªexpires[*]æ£€æµ‹æ—¶ï¼ŒéšæœºæŒ‘é€‰Wä¸ªkeyæ£€æµ‹</p></li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å¦‚æœkeyè¶…æ—¶ï¼Œåˆ é™¤key<br><br>å¦‚æœä¸€è½®ä¸­åˆ é™¤çš„keyçš„æ•°é‡&gt;W<span class="hljs-emphasis">*25%ï¼Œå¾ªç¯è¯¥è¿‡ç¨‹</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">å¦‚æœä¸€è½®ä¸­åˆ é™¤çš„keyçš„æ•°é‡â‰¤W*</span>25%ï¼Œæ£€æŸ¥ä¸‹ä¸€ä¸ªexpires[<span class="hljs-emphasis">*]ï¼Œ0-15å¾ªç¯</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">Wå–å€¼=ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOPå±æ€§å€¼</span><br></code></pre></td></tr></table></figure><ul><li><p>å‚æ•°current_dbç”¨äºè®°å½•<strong>activeExpireCycle()</strong> è¿›å…¥å“ªä¸ªexpires[*] æ‰§è¡Œ</p></li><li><p>å¦‚æœactiveExpireCycle()æ‰§è¡Œæ—¶é—´åˆ°æœŸï¼Œä¸‹æ¬¡ä»current_dbç»§ç»­å‘ä¸‹æ‰§è¡Œ</p></li></ul><p><img src="https://s2.loli.net/2022/04/06/VWyfuXkrLbMvGAj.png"></p><p>æ€»çš„æ¥è¯´ï¼šå®šæœŸåˆ é™¤å°±æ˜¯å‘¨æœŸæ€§è½®è¯¢redisåº“ä¸­çš„æ—¶æ•ˆæ€§æ•°æ®ï¼Œé‡‡ç”¨éšæœºæŠ½å–çš„ç­–ç•¥ï¼Œåˆ©ç”¨è¿‡æœŸæ•°æ®å æ¯”çš„æ–¹å¼æ§åˆ¶åˆ é™¤é¢‘åº¦</p><ul><li><strong>ç‰¹ç‚¹1</strong>ï¼šCPUæ€§èƒ½å ç”¨è®¾ç½®æœ‰å³°å€¼ï¼Œæ£€æµ‹é¢‘åº¦å¯è‡ªå®šä¹‰è®¾ç½®</li><li><strong>ç‰¹ç‚¹2</strong>ï¼šå†…å­˜å‹åŠ›ä¸æ˜¯å¾ˆå¤§ï¼Œé•¿æœŸå ç”¨å†…å­˜çš„å†·æ•°æ®ä¼šè¢«æŒç»­æ¸…ç†</li><li><strong>æ€»ç»“</strong>ï¼šå‘¨æœŸæ€§æŠ½æŸ¥å­˜å‚¨ç©ºé—´ï¼ˆéšæœºæŠ½æŸ¥ï¼Œé‡ç‚¹æŠ½æŸ¥ï¼‰</li></ul><h4 id="1-2-5-åˆ é™¤ç­–ç•¥å¯¹æ¯”"><a href="#1-2-5-åˆ é™¤ç­–ç•¥å¯¹æ¯”" class="headerlink" title="1.2.5 åˆ é™¤ç­–ç•¥å¯¹æ¯”"></a>1.2.5 åˆ é™¤ç­–ç•¥å¯¹æ¯”</h4><p>1ï¼šå®šæ—¶åˆ é™¤ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">èŠ‚çº¦å†…å­˜ï¼Œæ— å ç”¨,<br>ä¸åˆ†æ—¶æ®µå ç”¨CPUèµ„æºï¼Œé¢‘åº¦é«˜,<br>æ‹¿æ—¶é—´æ¢ç©ºé—´<br></code></pre></td></tr></table></figure><p>2ï¼šæƒ°æ€§åˆ é™¤ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å†…å­˜å ç”¨ä¸¥é‡<br>å»¶æ—¶æ‰§è¡Œï¼ŒCPUåˆ©ç”¨ç‡é«˜<br>æ‹¿ç©ºé—´æ¢æ—¶é—´<br></code></pre></td></tr></table></figure><p>3ï¼šå®šæœŸåˆ é™¤ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å†…å­˜å®šæœŸéšæœºæ¸…ç†<br>æ¯ç§’èŠ±è´¹å›ºå®šçš„CPUèµ„æºç»´æŠ¤å†…å­˜<br>éšæœºæŠ½æŸ¥ï¼Œé‡ç‚¹æŠ½æŸ¥<br></code></pre></td></tr></table></figure><h3 id="1-3-æ•°æ®æ·˜æ±°ç­–ç•¥ï¼ˆé€å‡ºç®—æ³•ï¼‰"><a href="#1-3-æ•°æ®æ·˜æ±°ç­–ç•¥ï¼ˆé€å‡ºç®—æ³•ï¼‰" class="headerlink" title="1.3 æ•°æ®æ·˜æ±°ç­–ç•¥ï¼ˆé€å‡ºç®—æ³•ï¼‰"></a>1.3 æ•°æ®æ·˜æ±°ç­–ç•¥ï¼ˆé€å‡ºç®—æ³•ï¼‰</h3><h4 id="1-3-1-æ·˜æ±°ç­–ç•¥æ¦‚è¿°"><a href="#1-3-1-æ·˜æ±°ç­–ç•¥æ¦‚è¿°" class="headerlink" title="1.3.1 æ·˜æ±°ç­–ç•¥æ¦‚è¿°"></a>1.3.1 æ·˜æ±°ç­–ç•¥æ¦‚è¿°</h4><p>ä»€ä¹ˆå«æ•°æ®æ·˜æ±°ç­–ç•¥ï¼Ÿä»€ä¹ˆæ ·çš„åº”ç”¨åœºæ™¯éœ€è¦ç”¨åˆ°æ•°æ®æ·˜æ±°ç­–ç•¥ï¼Ÿ</p><p>å½“æ–°æ•°æ®è¿›å…¥redisæ—¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³æ€ä¹ˆåŠï¼Ÿåœ¨æ‰§è¡Œæ¯ä¸€ä¸ªå‘½ä»¤å‰ï¼Œä¼šè°ƒç”¨**freeMemoryIfNeeded()**æ£€æµ‹å†…å­˜æ˜¯å¦å……è¶³ã€‚å¦‚æœå†…å­˜ä¸æ»¡è¶³æ–° åŠ å…¥æ•°æ®çš„æœ€ä½å­˜å‚¨è¦æ±‚ï¼Œredisè¦ä¸´æ—¶åˆ é™¤ä¸€äº›æ•°æ®ä¸ºå½“å‰æŒ‡ä»¤æ¸…ç†å­˜å‚¨ç©ºé—´ã€‚æ¸…ç†æ•°æ®çš„ç­–ç•¥ç§°ä¸ºé€å‡ºç®—æ³•ã€‚</p><p>æ³¨æ„ï¼šé€å‡ºæ•°æ®çš„è¿‡ç¨‹ä¸æ˜¯100%èƒ½å¤Ÿæ¸…ç†å‡ºè¶³å¤Ÿçš„å¯ä½¿ç”¨çš„å†…å­˜ç©ºé—´ï¼Œå¦‚æœä¸æˆåŠŸåˆ™åå¤æ‰§è¡Œã€‚å½“å¯¹æ‰€æœ‰æ•°æ®å°è¯•å®Œæ¯•ï¼Œ  å¦‚ä¸èƒ½è¾¾åˆ°å†…å­˜æ¸…ç†çš„è¦æ±‚ï¼Œå°†å‡ºç°é”™è¯¯ä¿¡æ¯å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">(error) OOM command not allowed when used memory &gt;&#x27;maxmemory&#x27;<br></code></pre></td></tr></table></figure><h4 id="1-3-2-ç­–ç•¥é…ç½®"><a href="#1-3-2-ç­–ç•¥é…ç½®" class="headerlink" title="1.3.2 ç­–ç•¥é…ç½®"></a>1.3.2 ç­–ç•¥é…ç½®</h4><p>å½±å“æ•°æ®æ·˜æ±°çš„ç›¸å…³é…ç½®å¦‚ä¸‹ï¼š</p><p>1ï¼šæœ€å¤§å¯ä½¿ç”¨å†…å­˜ï¼Œå³å ç”¨ç‰©ç†å†…å­˜çš„æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸é™åˆ¶ã€‚ç”Ÿäº§ç¯å¢ƒä¸­æ ¹æ®éœ€æ±‚è®¾å®šï¼Œé€šå¸¸è®¾ç½®åœ¨50%ä»¥ä¸Š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">maxmemory</span> <span class="hljs-string">?mb</span><br></code></pre></td></tr></table></figure><p>2ï¼šæ¯æ¬¡é€‰å–å¾…åˆ é™¤æ•°æ®çš„ä¸ªæ•°ï¼Œé‡‡ç”¨éšæœºè·å–æ•°æ®çš„æ–¹å¼ä½œä¸ºå¾…æ£€æµ‹åˆ é™¤æ•°æ®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">maxmemory-samples</span> <span class="hljs-string">count</span><br></code></pre></td></tr></table></figure><p>3ï¼šå¯¹æ•°æ®è¿›è¡Œåˆ é™¤çš„é€‰æ‹©ç­–ç•¥</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">maxmemory-policy</span> <span class="hljs-string">policy</span><br></code></pre></td></tr></table></figure><p>é‚£æ•°æ®åˆ é™¤çš„ç­–ç•¥policyåˆ°åº•æœ‰å‡ ç§å‘¢ï¼Ÿä¸€å…±æ˜¯<strong>3ç±»8ç§</strong></p><p><strong>ç¬¬ä¸€ç±»</strong>ï¼šæ£€æµ‹<font color='cornflowerblue'>æ˜“å¤±</font>æ•°æ®ï¼ˆå¯èƒ½ä¼šè¿‡æœŸçš„æ•°æ®é›†server.db[i].expires ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">volatile-lruï¼šæŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</span><br><span class="hljs-attr">volatile-lfuï¼šæŒ‘é€‰æœ€è¿‘ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®æ·˜æ±°</span><br><span class="hljs-attr">volatile-ttlï¼šæŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°</span><br><span class="hljs-attr">volatile-randomï¼šä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/06/UMYEaDQl9rjZTu2.png"></p><p><strong>ç¬¬äºŒç±»</strong>ï¼šæ£€æµ‹<font color='green'>å…¨åº“æ•°æ®</font>ï¼ˆæ‰€æœ‰æ•°æ®é›†server.db[i].dict ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">allkeys-lruï¼šæŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</span><br><span class="hljs-attr">allkeLyRs-lfuï¼šï¼šæŒ‘é€‰æœ€è¿‘ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®æ·˜æ±°</span><br><span class="hljs-attr">allkeys-randomï¼šä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°ï¼Œç›¸å½“äºéšæœº</span><br></code></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰ç±»</strong>ï¼šæ”¾å¼ƒæ•°æ®é©±é€</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">no-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®(redis4.0ä¸­é»˜è®¤ç­–ç•¥)ï¼Œä¼šå¼•å‘OOM(Out</span> <span class="hljs-string">Of Memory)</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™äº›ç­–ç•¥æ˜¯é…ç½®åˆ°å“ªä¸ªå±æ€§ä¸Šï¼Ÿæ€ä¹ˆé…ç½®ï¼Ÿå¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">maxmemory-policy</span> <span class="hljs-string">volatile-lru</span><br></code></pre></td></tr></table></figure><p><strong>æ•°æ®æ·˜æ±°ç­–ç•¥é…ç½®ä¾æ®</strong></p><p> ä½¿ç”¨INFOå‘½ä»¤è¾“å‡ºç›‘æ§ä¿¡æ¯ï¼ŒæŸ¥è¯¢ç¼“å­˜ hit å’Œ miss çš„æ¬¡æ•°ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒä¼˜Redisé…ç½®</p><h2 id="2-ä¸»ä»å¤åˆ¶"><a href="#2-ä¸»ä»å¤åˆ¶" class="headerlink" title="2.ä¸»ä»å¤åˆ¶"></a>2.ä¸»ä»å¤åˆ¶</h2><h3 id="2-1-ä¸»ä»å¤åˆ¶ç®€ä»‹"><a href="#2-1-ä¸»ä»å¤åˆ¶ç®€ä»‹" class="headerlink" title="2.1 ä¸»ä»å¤åˆ¶ç®€ä»‹"></a>2.1 ä¸»ä»å¤åˆ¶ç®€ä»‹</h3><h4 id="2-1-1-é«˜å¯ç”¨"><a href="#2-1-1-é«˜å¯ç”¨" class="headerlink" title="2.1.1 é«˜å¯ç”¨"></a>2.1.1 é«˜å¯ç”¨</h4><p>é¦–å…ˆæˆ‘ä»¬è¦ç†è§£äº’è”ç½‘åº”ç”¨å› ä¸ºå…¶ç‹¬æœ‰çš„ç‰¹æ€§æˆ‘ä»¬æ¼”åŒ–å‡ºçš„<strong>ä¸‰é«˜</strong>æ¶æ„</p><ul><li><p>é«˜å¹¶å‘</p><blockquote><p>åº”ç”¨è¦æä¾›æŸä¸€ä¸šåŠ¡è¦èƒ½æ”¯æŒå¾ˆå¤šå®¢æˆ·ç«¯åŒæ—¶è®¿é—®çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬ç§°ä¸ºå¹¶å‘ï¼Œé«˜å¹¶å‘æ„æ€å°±å¾ˆæ˜ç¡®äº†</p></blockquote></li><li><p>é«˜æ€§èƒ½</p><blockquote><p>æ€§èƒ½å¸¦ç»™æˆ‘ä»¬æœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯ï¼šé€Ÿåº¦å¿«ï¼Œæ—¶é—´çŸ­</p></blockquote></li><li><p>é«˜å¯ç”¨</p></li></ul><p><strong>å¯ç”¨æ€§</strong>ï¼šä¸€å¹´ä¸­åº”ç”¨æœåŠ¡æ­£å¸¸è¿è¡Œçš„æ—¶é—´å å…¨å¹´æ—¶é—´çš„ç™¾åˆ†æ¯”ï¼Œå¦‚ä¸‹å›¾ï¼šè¡¨ç¤ºäº†åº”ç”¨æœåŠ¡åœ¨å…¨å¹´å®•æœºçš„æ—¶é—´</p><p><img src="https://s2.loli.net/2022/04/06/XU5B4Fmzy6rsaKx.png"></p><p>æˆ‘ä»¬æŠŠè¿™äº›æ—¶é—´åŠ åœ¨ä¸€èµ·å°±æ˜¯å…¨å¹´åº”ç”¨æœåŠ¡ä¸å¯ç”¨çš„æ—¶é—´ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å¾—åˆ°åº”ç”¨æœåŠ¡å…¨å¹´å¯ç”¨çš„æ—¶é—´</p><blockquote><p>4å°æ—¶27åˆ†15ç§’+11åˆ†36ç§’+2åˆ†16ç§’&#x3D;4å°æ—¶41åˆ†7ç§’&#x3D;16867ç§’</p><p>1å¹´&#x3D;365<em>24</em>60*60&#x3D;31536000ç§’</p><p>å¯ç”¨æ€§&#x3D;ï¼ˆ31536000-16867ï¼‰&#x2F;31536000*100%&#x3D;99.9465151%</p></blockquote><p>ä¸šç•Œå¯ç”¨æ€§ç›®æ ‡**5ä¸ª9ï¼Œå³99.999%**ï¼Œå³æœåŠ¡å™¨å¹´å®•æœºæ—¶é•¿ä½äº315ç§’ï¼Œçº¦5.25åˆ†é’Ÿ</p><h4 id="2-1-2-ä¸»ä»å¤åˆ¶æ¦‚å¿µ"><a href="#2-1-2-ä¸»ä»å¤åˆ¶æ¦‚å¿µ" class="headerlink" title="2.1.2 ä¸»ä»å¤åˆ¶æ¦‚å¿µ"></a>2.1.2 ä¸»ä»å¤åˆ¶æ¦‚å¿µ</h4><p>çŸ¥é“äº†ä¸‰é«˜çš„æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬æƒ³ï¼šä½ çš„â€œRedisâ€æ˜¯å¦é«˜å¯ç”¨ï¼Ÿé‚£æˆ‘ä»¬è¦æ¥åˆ†æå•æœºredisçš„é£é™©ä¸é—®é¢˜</p><p>é—®é¢˜1.æœºå™¨æ•…éšœ</p><ul><li>ç°è±¡ï¼šç¡¬ç›˜æ•…éšœã€ç³»ç»Ÿå´©æºƒ</li><li>æœ¬è´¨ï¼šæ•°æ®ä¸¢å¤±ï¼Œå¾ˆå¯èƒ½å¯¹ä¸šåŠ¡é€ æˆç¾éš¾æ€§æ‰“å‡»</li><li>ç»“è®ºï¼šåŸºæœ¬ä¸Šä¼šæ”¾å¼ƒä½¿ç”¨redis.</li></ul><p>é—®é¢˜2.å®¹é‡ç“¶é¢ˆ</p><ul><li>ç°è±¡ï¼šå†…å­˜ä¸è¶³ï¼Œä»16Gå‡çº§åˆ°64Gï¼Œä»64Gå‡çº§åˆ°128Gï¼Œæ— é™å‡çº§å†…å­˜</li><li>æœ¬è´¨ï¼šç©·ï¼Œç¡¬ä»¶æ¡ä»¶è·Ÿä¸ä¸Š</li><li>ç»“è®ºï¼šæ”¾å¼ƒä½¿ç”¨redis</li></ul><p>ç»“è®ºï¼š</p><p>ä¸ºäº†é¿å…å•ç‚¹RedisæœåŠ¡å™¨æ•…éšœï¼Œå‡†å¤‡å¤šå°æœåŠ¡å™¨ï¼Œäº’ç›¸è¿é€šã€‚å°†æ•°æ®å¤åˆ¶å¤šä¸ªå‰¯æœ¬ä¿å­˜åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶ä¿è¯æ•°æ®æ˜¯åŒæ­¥çš„ã€‚å³ä½¿æœ‰å…¶ä¸­ä¸€å°æœåŠ¡å™¨å®•æœºï¼Œå…¶ä»–æœåŠ¡å™¨ä¾ç„¶å¯ä»¥ç»§ç»­æä¾›æœåŠ¡ï¼Œå®ç°Redisçš„é«˜å¯ç”¨ï¼ŒåŒæ—¶å®ç°æ•°æ®å†—ä½™å¤‡ä»½ã€‚</p><p>å¤šå°æœåŠ¡å™¨è¿æ¥æ–¹æ¡ˆï¼š</p><p><img src="https://s2.loli.net/2022/04/06/FbnhRfgqkWISo5O.png"></p><ul><li>æä¾›æ•°æ®æ–¹ï¼š<strong>master</strong></li></ul><p>ä¸»æœåŠ¡å™¨ï¼Œä¸»èŠ‚ç‚¹ï¼Œä¸»åº“ä¸»å®¢æˆ·ç«¯ </p><ul><li>æ¥æ”¶æ•°æ®æ–¹ï¼š<strong>slave</strong></li></ul><p>ä»æœåŠ¡å™¨ï¼Œä»èŠ‚ç‚¹ï¼Œä»åº“</p><p>ä»å®¢æˆ·ç«¯</p><ul><li>éœ€è¦è§£å†³çš„é—®é¢˜ï¼š</li></ul><p>æ•°æ®åŒæ­¥ï¼ˆmasterçš„æ•°æ®å¤åˆ¶åˆ°slaveä¸­ï¼‰</p><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ¥è§£é‡Šä¸»ä»å¤åˆ¶çš„æ¦‚å¿µï¼š</p><p><strong>æ¦‚å¿µï¼šä¸»ä»å¤åˆ¶å³å°†masterä¸­çš„æ•°æ®å³æ—¶ã€æœ‰æ•ˆçš„å¤åˆ¶åˆ°slaveä¸­</strong></p><p><strong>ç‰¹å¾</strong>ï¼šä¸€ä¸ªmasterå¯ä»¥æ‹¥æœ‰å¤šä¸ªslaveï¼Œä¸€ä¸ªslaveåªå¯¹åº”ä¸€ä¸ªmaster</p><p><strong>èŒè´£</strong>ï¼šmasterå’Œslaveå„è‡ªçš„èŒè´£ä¸ä¸€æ ·</p><p>master:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">å†™æ•°æ®<br><br>æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œå°†å‡ºç°å˜åŒ–çš„æ•°æ®è‡ªåŠ¨åŒæ­¥åˆ°slave<br><br>è¯»æ•°æ®ï¼ˆå¯å¿½ç•¥ï¼‰<br></code></pre></td></tr></table></figure><p>slave:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">è¯»æ•°æ®<br><br>å†™æ•°æ®ï¼ˆç¦æ­¢ï¼‰<br></code></pre></td></tr></table></figure><h4 id="2-1-3-ä¸»ä»å¤åˆ¶çš„ä½œç”¨"><a href="#2-1-3-ä¸»ä»å¤åˆ¶çš„ä½œç”¨" class="headerlink" title="2.1.3 ä¸»ä»å¤åˆ¶çš„ä½œç”¨"></a>2.1.3 ä¸»ä»å¤åˆ¶çš„ä½œç”¨</h4><ul><li>è¯»å†™åˆ†ç¦»ï¼šmasterå†™ã€slaveè¯»ï¼Œæé«˜æœåŠ¡å™¨çš„è¯»å†™è´Ÿè½½èƒ½åŠ›</li><li>è´Ÿè½½å‡è¡¡ï¼šåŸºäºä¸»ä»ç»“æ„ï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œç”±slaveåˆ†æ‹…masterè´Ÿè½½ï¼Œå¹¶æ ¹æ®éœ€æ±‚çš„å˜åŒ–ï¼Œæ”¹å˜slaveçš„æ•° é‡ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…æ•°æ®è¯»å–è´Ÿè½½ï¼Œå¤§å¤§æé«˜RedisæœåŠ¡å™¨å¹¶å‘é‡ä¸æ•°æ®ååé‡</li><li>æ•…éšœæ¢å¤ï¼šå½“masterå‡ºç°é—®é¢˜æ—¶ï¼Œç”±slaveæä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤</li><li>æ•°æ®å†—ä½™ï¼šå®ç°æ•°æ®çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼</li><li>é«˜å¯ç”¨åŸºçŸ³ï¼šåŸºäºä¸»ä»å¤åˆ¶ï¼Œæ„å»ºå“¨å…µæ¨¡å¼ä¸é›†ç¾¤ï¼Œå®ç°Redisçš„é«˜å¯ç”¨æ–¹æ¡ˆ</li></ul><h3 id="2-2-ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹"><a href="#2-2-ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹" class="headerlink" title="2.2 ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹"></a>2.2 ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹</h3><p>ä¸»ä»å¤åˆ¶è¿‡ç¨‹å¤§ä½“å¯ä»¥åˆ†ä¸º3ä¸ªé˜¶æ®µ</p><ul><li>å»ºç«‹è¿æ¥é˜¶æ®µï¼ˆå³å‡†å¤‡é˜¶æ®µï¼‰</li><li>æ•°æ®åŒæ­¥é˜¶æ®µ</li><li>å‘½ä»¤ä¼ æ’­é˜¶æ®µï¼ˆåå¤åŒæ­¥ï¼‰</li></ul><p><img src="https://s2.loli.net/2022/04/06/PG5c2UALSZHRNyp.png"></p><p>è€Œå‘½ä»¤çš„ä¼ æ’­å…¶å®æœ‰4ç§ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/04/06/5gdyhmrpWznBvCw.png"></p><h4 id="2-2-1-ä¸»ä»å¤åˆ¶çš„å·¥ä½œæµç¨‹ï¼ˆä¸‰ä¸ªé˜¶æ®µï¼‰"><a href="#2-2-1-ä¸»ä»å¤åˆ¶çš„å·¥ä½œæµç¨‹ï¼ˆä¸‰ä¸ªé˜¶æ®µï¼‰" class="headerlink" title="2.2.1 ä¸»ä»å¤åˆ¶çš„å·¥ä½œæµç¨‹ï¼ˆä¸‰ä¸ªé˜¶æ®µï¼‰"></a>2.2.1 ä¸»ä»å¤åˆ¶çš„å·¥ä½œæµç¨‹ï¼ˆä¸‰ä¸ªé˜¶æ®µï¼‰</h4><h5 id="2-2-1-1-é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥"><a href="#2-2-1-1-é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥" class="headerlink" title="2.2.1.1 é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥"></a>2.2.1.1 é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥</h5><p>å»ºç«‹slaveåˆ°masterçš„è¿æ¥ï¼Œä½¿masterèƒ½å¤Ÿè¯†åˆ«slaveï¼Œå¹¶ä¿å­˜slaveç«¯å£å·</p><p>æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ­¥éª¤1ï¼šè®¾ç½®masterçš„åœ°å€å’Œç«¯å£ï¼Œä¿å­˜masterä¿¡æ¯</li><li>æ­¥éª¤2ï¼šå»ºç«‹socketè¿æ¥</li><li>æ­¥éª¤3ï¼šå‘é€pingå‘½ä»¤ï¼ˆå®šæ—¶å™¨ä»»åŠ¡ï¼‰</li><li>æ­¥éª¤4ï¼šèº«ä»½éªŒè¯</li><li>æ­¥éª¤5ï¼šå‘é€slaveç«¯å£ä¿¡æ¯</li></ol><p>è‡³æ­¤ï¼Œä¸»ä»è¿æ¥æˆåŠŸï¼</p><p>å½“å‰çŠ¶æ€ï¼š</p><p>slaveï¼šä¿å­˜masterçš„åœ°å€ä¸ç«¯å£</p><p>masterï¼šä¿å­˜slaveçš„ç«¯å£</p><p>æ€»ä½“ï¼šä¹‹é—´åˆ›å»ºäº†è¿æ¥çš„socket</p><p><img src="https://s2.loli.net/2022/04/07/23jYt79oecnzOgU.png" alt="image-20220407110534326"></p><p><img src="https://s2.loli.net/2022/04/06/gpyioYqLNBPsCGF.png"></p><p><strong>masterå’Œslaveäº’è”</strong></p><p>æ¥ä¸‹æ¥å°±è¦é€šè¿‡æŸç§æ–¹å¼å°†masterå’Œslaveè¿æ¥åˆ°ä¸€èµ·</p><p>æ–¹å¼ä¸€ï¼šå®¢æˆ·ç«¯å‘é€å‘½ä»¤</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slaveof</span> <span class="hljs-string">masterip masterport</span><br></code></pre></td></tr></table></figure><p>æ–¹å¼äºŒï¼šå¯åŠ¨æœåŠ¡å™¨å‚æ•°</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-server</span> <span class="hljs-string">--slaveof masterip masterport</span><br></code></pre></td></tr></table></figure><p>æ–¹å¼ä¸‰ï¼šæœåŠ¡å™¨é…ç½®ï¼ˆ<strong>ä¸»æµæ–¹å¼</strong>ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slaveof</span> <span class="hljs-string">masterip masterport</span><br></code></pre></td></tr></table></figure><p>slaveç³»ç»Ÿä¿¡æ¯</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">master_link_down_since_seconds</span><br><span class="hljs-attr">masterhost</span> <span class="hljs-string">&amp; masterport</span><br></code></pre></td></tr></table></figure><p>masterç³»ç»Ÿä¿¡æ¯</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">uslave_listening_port(å¤šä¸ª)</span><br></code></pre></td></tr></table></figure><p><strong>ä¸»ä»æ–­å¼€è¿æ¥</strong></p><p>æ–­å¼€slaveä¸masterçš„è¿æ¥ï¼Œslaveæ–­å¼€è¿æ¥åï¼Œä¸ä¼šåˆ é™¤å·²æœ‰æ•°æ®ï¼Œåªæ˜¯ä¸å†æ¥å—masterå‘é€çš„æ•°æ®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slaveof</span> <span class="hljs-string">no one</span><br></code></pre></td></tr></table></figure><p><strong>æˆæƒè®¿é—®</strong></p><p>masterå®¢æˆ·ç«¯å‘é€å‘½ä»¤è®¾ç½®å¯†ç </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">requirepass</span> <span class="hljs-string">password</span><br></code></pre></td></tr></table></figure><p>masteré…ç½®æ–‡ä»¶è®¾ç½®å¯†ç </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">config</span> <span class="hljs-string">set requirepass password</span><br><span class="hljs-attr">config</span> <span class="hljs-string">get requirepass</span><br></code></pre></td></tr></table></figure><p>slaveå®¢æˆ·ç«¯å‘é€å‘½ä»¤è®¾ç½®å¯†ç </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">auth</span> <span class="hljs-string">password</span><br></code></pre></td></tr></table></figure><p>slaveé…ç½®æ–‡ä»¶è®¾ç½®å¯†ç </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">masterauth</span> <span class="hljs-string">password</span><br></code></pre></td></tr></table></figure><p>slaveå¯åŠ¨æœåŠ¡å™¨è®¾ç½®å¯†ç </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-server</span> <span class="hljs-string">â€“a password</span><br></code></pre></td></tr></table></figure><h5 id="2-2-1-2-é˜¶æ®µäºŒï¼šæ•°æ®åŒæ­¥"><a href="#2-2-1-2-é˜¶æ®µäºŒï¼šæ•°æ®åŒæ­¥" class="headerlink" title="2.2.1.2 é˜¶æ®µäºŒï¼šæ•°æ®åŒæ­¥"></a>2.2.1.2 é˜¶æ®µäºŒï¼šæ•°æ®åŒæ­¥</h5><ul><li>åœ¨slaveåˆæ¬¡è¿æ¥masteråï¼Œå¤åˆ¶masterä¸­çš„æ‰€æœ‰æ•°æ®åˆ°slave</li><li>å°†slaveçš„æ•°æ®åº“çŠ¶æ€æ›´æ–°æˆmasterå½“å‰çš„æ•°æ®åº“çŠ¶æ€</li></ul><p>åŒæ­¥è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ­¥éª¤1ï¼šè¯·æ±‚åŒæ­¥æ•°æ®</li><li>æ­¥éª¤2ï¼šåˆ›å»ºRDBåŒæ­¥æ•°æ®</li><li>æ­¥éª¤3ï¼šæ¢å¤RDBåŒæ­¥æ•°æ®</li><li>æ­¥éª¤4ï¼šè¯·æ±‚éƒ¨åˆ†åŒæ­¥æ•°æ®</li><li>æ­¥éª¤5ï¼šæ¢å¤éƒ¨åˆ†åŒæ­¥æ•°æ®</li></ol><p>è‡³æ­¤ï¼Œæ•°æ®åŒæ­¥å·¥ä½œå®Œæˆï¼</p><p>å½“å‰çŠ¶æ€ï¼š</p><p>slaveï¼šå…·æœ‰masterç«¯å…¨éƒ¨æ•°æ®ï¼ŒåŒ…å«RDBè¿‡ç¨‹æ¥æ”¶çš„æ•°æ®</p><p>masterï¼šä¿å­˜slaveå½“å‰æ•°æ®åŒæ­¥çš„ä½ç½®</p><p>æ€»ä½“ï¼šä¹‹é—´å®Œæˆäº†æ•°æ®å…‹éš†</p><p><img src="https://s2.loli.net/2022/04/06/D89nAwLIN41UCgh.png"></p><p><strong>æ•°æ®åŒæ­¥é˜¶æ®µmasterè¯´æ˜</strong></p><p>1ï¼šå¦‚æœmasteræ•°æ®é‡å·¨å¤§ï¼Œæ•°æ®åŒæ­¥é˜¶æ®µåº”é¿å¼€æµé‡é«˜å³°æœŸï¼Œé¿å…é€ æˆmasteré˜»å¡ï¼Œå½±å“ä¸šåŠ¡æ­£å¸¸æ‰§è¡Œ</p><p>2ï¼šå¤åˆ¶ç¼“å†²åŒºå¤§å°è®¾å®šä¸åˆç†ï¼Œä¼šå¯¼è‡´æ•°æ®æº¢å‡ºã€‚å¦‚è¿›è¡Œå…¨é‡å¤åˆ¶å‘¨æœŸå¤ªé•¿ï¼Œè¿›è¡Œéƒ¨åˆ†å¤åˆ¶æ—¶å‘ç°æ•°æ®å·²ç»å­˜åœ¨ä¸¢å¤±çš„æƒ…å†µï¼Œå¿…é¡»è¿›è¡Œç¬¬äºŒæ¬¡å…¨é‡å¤åˆ¶ï¼Œè‡´ä½¿slaveé™·å…¥æ­»å¾ªç¯çŠ¶æ€ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">repl-backlog-size</span> <span class="hljs-string">?mb</span><br></code></pre></td></tr></table></figure><ol start="3"><li>masterå•æœºå†…å­˜å ç”¨ä¸»æœºå†…å­˜çš„æ¯”ä¾‹ä¸åº”è¿‡å¤§ï¼Œå»ºè®®ä½¿ç”¨50%-70%çš„å†…å­˜ï¼Œç•™ä¸‹30%-50%çš„å†…å­˜ç”¨äºæ‰§ è¡Œbgsaveå‘½ä»¤å’Œåˆ›å»ºå¤åˆ¶ç¼“å†²åŒº</li></ol><p><img src="https://s2.loli.net/2022/04/06/nBakMVctyYQWswf.png"></p><p><strong>æ•°æ®åŒæ­¥é˜¶æ®µslaveè¯´æ˜</strong></p><ol><li><p>ä¸ºé¿å…slaveè¿›è¡Œå…¨é‡å¤åˆ¶ã€éƒ¨åˆ†å¤åˆ¶æ—¶æœåŠ¡å™¨å“åº”é˜»å¡æˆ–æ•°æ®ä¸åŒæ­¥ï¼Œå»ºè®®å…³é—­æ­¤æœŸé—´çš„å¯¹å¤–æœåŠ¡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slave-serve-stale-data</span> <span class="hljs-string">yes|no</span><br></code></pre></td></tr></table></figure></li><li><p>æ•°æ®åŒæ­¥é˜¶æ®µï¼Œmasterå‘é€ç»™slaveä¿¡æ¯å¯ä»¥ç†è§£masteræ˜¯slaveçš„ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œä¸»åŠ¨å‘slaveå‘é€å‘½ä»¤</p></li><li><p>å¤šä¸ªslaveåŒæ—¶å¯¹masterè¯·æ±‚æ•°æ®åŒæ­¥ï¼Œmasterå‘é€çš„RDBæ–‡ä»¶å¢å¤šï¼Œä¼šå¯¹å¸¦å®½é€ æˆå·¨å¤§å†²å‡»ï¼Œå¦‚æœmasterå¸¦å®½ä¸è¶³ï¼Œå› æ­¤æ•°æ®åŒæ­¥éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œé€‚é‡é”™å³°</p></li><li><p>slaveè¿‡å¤šæ—¶ï¼Œå»ºè®®è°ƒæ•´æ‹“æ‰‘ç»“æ„ï¼Œç”±ä¸€ä¸»å¤šä»ç»“æ„å˜ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œä¸­é—´çš„èŠ‚ç‚¹æ—¢æ˜¯masterï¼Œä¹Ÿæ˜¯ slaveã€‚æ³¨æ„ä½¿ç”¨æ ‘çŠ¶ç»“æ„æ—¶ï¼Œç”±äºå±‚çº§æ·±åº¦ï¼Œå¯¼è‡´æ·±åº¦è¶Šé«˜çš„slaveä¸æœ€é¡¶å±‚masteré—´æ•°æ®åŒæ­¥å»¶è¿Ÿ è¾ƒå¤§ï¼Œæ•°æ®ä¸€è‡´æ€§å˜å·®ï¼Œåº”è°¨æ…é€‰æ‹©</p></li></ol><h5 id="2-2-1-3-é˜¶æ®µä¸‰ï¼šå‘½ä»¤ä¼ æ’­"><a href="#2-2-1-3-é˜¶æ®µä¸‰ï¼šå‘½ä»¤ä¼ æ’­" class="headerlink" title="2.2.1.3 é˜¶æ®µä¸‰ï¼šå‘½ä»¤ä¼ æ’­"></a>2.2.1.3 é˜¶æ®µä¸‰ï¼šå‘½ä»¤ä¼ æ’­</h5><ul><li>å½“masteræ•°æ®åº“çŠ¶æ€è¢«ä¿®æ”¹åï¼Œå¯¼è‡´ä¸»ä»æœåŠ¡å™¨æ•°æ®åº“çŠ¶æ€ä¸ä¸€è‡´ï¼Œæ­¤æ—¶éœ€è¦è®©ä¸»ä»æ•°æ®åŒæ­¥åˆ°ä¸€è‡´çš„çŠ¶æ€ï¼ŒåŒæ­¥çš„åŠ¨ä½œç§°ä¸ºå‘½ä»¤ä¼ æ’­</li><li>masterå°†æ¥æ”¶åˆ°çš„æ•°æ®å˜æ›´å‘½ä»¤å‘é€ç»™slaveï¼Œslaveæ¥æ”¶å‘½ä»¤åæ‰§è¡Œå‘½ä»¤</li></ul><p><strong>å‘½ä»¤ä¼ æ’­é˜¶æ®µçš„éƒ¨åˆ†å¤åˆ¶</strong></p><p>å‘½ä»¤ä¼ æ’­é˜¶æ®µå‡ºç°äº†æ–­ç½‘ç°è±¡ï¼š</p><p>ç½‘ç»œé—ªæ–­é—ªè¿ï¼šå¿½ç•¥</p><p>çŸ­æ—¶é—´ç½‘ç»œä¸­æ–­ï¼šéƒ¨åˆ†å¤åˆ¶</p><p>é•¿æ—¶é—´ç½‘ç»œä¸­æ–­ï¼šå…¨é‡å¤åˆ¶</p><p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦æ¥çœ‹éƒ¨åˆ†å¤åˆ¶ï¼Œéƒ¨åˆ†å¤åˆ¶çš„ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ </p><ol><li>æœåŠ¡å™¨çš„è¿è¡Œ idï¼ˆrun idï¼‰</li><li>ä¸»æœåŠ¡å™¨çš„å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</li><li>ä¸»ä»æœåŠ¡å™¨çš„å¤åˆ¶åç§»é‡</li></ol><ul><li>æœåŠ¡å™¨è¿è¡ŒIDï¼ˆrunidï¼‰</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ¦‚å¿µï¼šæœåŠ¡å™¨è¿è¡ŒIDæ˜¯æ¯ä¸€å°æœåŠ¡å™¨æ¯æ¬¡è¿è¡Œçš„èº«ä»½è¯†åˆ«ç ï¼Œä¸€å°æœåŠ¡å™¨å¤šæ¬¡è¿è¡Œå¯ä»¥ç”Ÿæˆå¤šä¸ªè¿è¡Œid<br><br>ç»„æˆï¼šè¿è¡Œidç”±40ä½å­—ç¬¦ç»„æˆï¼Œæ˜¯ä¸€ä¸ªéšæœºçš„åå…­è¿›åˆ¶å­—ç¬¦<br>ä¾‹å¦‚ï¼šfdc9ff13b9bbaab28db42b3d50f852bb5e3fcdce<br><br>ä½œç”¨ï¼šè¿è¡Œidè¢«ç”¨äºåœ¨æœåŠ¡å™¨é—´è¿›è¡Œä¼ è¾“ï¼Œè¯†åˆ«èº«ä»½<br>å¦‚æœæƒ³ä¸¤æ¬¡æ“ä½œå‡å¯¹åŒä¸€å°æœåŠ¡å™¨è¿›è¡Œï¼Œå¿…é¡»æ¯æ¬¡æ“ä½œæºå¸¦å¯¹åº”çš„è¿è¡Œidï¼Œç”¨äºå¯¹æ–¹è¯†åˆ«<br><br>å®ç°æ–¹å¼ï¼šè¿è¡Œidåœ¨æ¯å°æœåŠ¡å™¨å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œmasteråœ¨é¦–æ¬¡è¿æ¥slaveæ—¶ï¼Œä¼šå°†è‡ªå·±çš„è¿è¡ŒIDå‘é€ç»™slaveï¼Œ<br>slaveä¿å­˜æ­¤IDï¼Œé€šè¿‡info Serverå‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹èŠ‚ç‚¹çš„runid<br></code></pre></td></tr></table></figure><ul><li>å¤åˆ¶ç¼“å†²åŒº</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">æ¦‚å¿µï¼šå¤åˆ¶ç¼“å†²åŒºï¼Œåˆåå¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼Œæ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨æœåŠ¡å™¨æ‰§è¡Œè¿‡çš„å‘½ä»¤ï¼Œæ¯æ¬¡ä¼ æ’­å‘½ä»¤ï¼Œmasteréƒ½ä¼šå°†ä¼ æ’­çš„å‘½ä»¤è®°å½•ä¸‹æ¥ï¼Œå¹¶å­˜å‚¨åœ¨å¤åˆ¶ç¼“å†²åŒº<br><span class="hljs-code">å¤åˆ¶ç¼“å†²åŒºé»˜è®¤æ•°æ®å­˜å‚¨ç©ºé—´å¤§å°æ˜¯1M</span><br><span class="hljs-code">å½“å…¥é˜Ÿå…ƒç´ çš„æ•°é‡å¤§äºé˜Ÿåˆ—é•¿åº¦æ—¶ï¼Œæœ€å…ˆå…¥é˜Ÿçš„å…ƒç´ ä¼šè¢«å¼¹å‡ºï¼Œè€Œæ–°å…ƒç´ ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—</span><br><span class="hljs-code">ä½œç”¨ï¼šç”¨äºä¿å­˜masteræ”¶åˆ°çš„æ‰€æœ‰æŒ‡ä»¤ï¼ˆä»…å½±å“æ•°æ®å˜æ›´çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚setï¼Œselectï¼‰</span><br><span class="hljs-code"></span><br>æ•°æ®æ¥æºï¼šå½“masteræ¥æ”¶åˆ°ä¸»å®¢æˆ·ç«¯çš„æŒ‡ä»¤æ—¶ï¼Œé™¤äº†å°†æŒ‡ä»¤æ‰§è¡Œï¼Œä¼šå°†è¯¥æŒ‡ä»¤å­˜å‚¨åˆ°ç¼“å†²åŒºä¸­<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/06/Y42VECBl5O6dyNI.png"></p><p>å¤åˆ¶ç¼“å†²åŒºå†…éƒ¨å·¥ä½œåŸç†ï¼š</p><p>ç»„æˆ</p><ul><li><p>åç§»é‡</p><blockquote><p>æ¦‚å¿µï¼šä¸€ä¸ªæ•°å­—ï¼Œæè¿°å¤åˆ¶ç¼“å†²åŒºä¸­çš„æŒ‡ä»¤å­—èŠ‚ä½ç½®</p><p>åˆ†ç±»ï¼š</p><ul><li>masterå¤åˆ¶åç§»é‡ï¼šè®°å½•å‘é€ç»™æ‰€æœ‰slaveçš„æŒ‡ä»¤å­—èŠ‚å¯¹åº”çš„ä½ç½®ï¼ˆå¤šä¸ªï¼‰</li><li>slaveå¤åˆ¶åç§»é‡ï¼šè®°å½•slaveæ¥æ”¶masterå‘é€è¿‡æ¥çš„æŒ‡ä»¤å­—èŠ‚å¯¹åº”çš„ä½ç½®ï¼ˆä¸€ä¸ªï¼‰</li></ul><p>ä½œç”¨ï¼šåŒæ­¥ä¿¡æ¯ï¼Œæ¯”å¯¹masterä¸slaveçš„å·®å¼‚ï¼Œå½“slaveæ–­çº¿åï¼Œæ¢å¤æ•°æ®ä½¿ç”¨</p><p>æ•°æ®æ¥æºï¼š</p><ul><li>masterç«¯ï¼šå‘é€ä¸€æ¬¡è®°å½•ä¸€æ¬¡</li><li>slaveç«¯ï¼šæ¥æ”¶ä¸€æ¬¡è®°å½•ä¸€æ¬¡</li></ul></blockquote></li><li><p>å­—èŠ‚å€¼</p></li></ul><p>å·¥ä½œåŸç†</p><ul><li>é€šè¿‡offsetåŒºåˆ†ä¸åŒçš„slaveå½“å‰æ•°æ®ä¼ æ’­çš„å·®å¼‚</li><li>masterè®°å½•å·²å‘é€çš„ä¿¡æ¯å¯¹åº”çš„offset</li><li>slaveè®°å½•å·²æ¥æ”¶çš„ä¿¡æ¯å¯¹åº”çš„offset</li></ul><p><img src="https://s2.loli.net/2022/04/06/Uinbu9ATBlv4t36.png"></p><h4 id="2-2-2-æµç¨‹æ›´æ–°-å…¨é‡å¤åˆ¶-x2F-éƒ¨åˆ†å¤åˆ¶"><a href="#2-2-2-æµç¨‹æ›´æ–°-å…¨é‡å¤åˆ¶-x2F-éƒ¨åˆ†å¤åˆ¶" class="headerlink" title="2.2.2 æµç¨‹æ›´æ–°(å…¨é‡å¤åˆ¶&#x2F;éƒ¨åˆ†å¤åˆ¶)"></a>2.2.2 æµç¨‹æ›´æ–°(å…¨é‡å¤åˆ¶&#x2F;éƒ¨åˆ†å¤åˆ¶)</h4><p>æˆ‘ä»¬å†æ¬¡çš„æ€»ç»“ä¸€ä¸‹ä¸»ä»å¤åˆ¶çš„ä¸‰ä¸ªé˜¶æ®µçš„å·¥ä½œæµç¨‹ï¼š</p><p><img src="https://s2.loli.net/2022/04/06/RTrWbxvoXpsdLqQ.png"></p><h4 id="2-2-3-å¿ƒè·³æœºåˆ¶"><a href="#2-2-3-å¿ƒè·³æœºåˆ¶" class="headerlink" title="2.2.3 å¿ƒè·³æœºåˆ¶"></a>2.2.3 å¿ƒè·³æœºåˆ¶</h4><p>ä»€ä¹ˆæ˜¯å¿ƒè·³æœºåˆ¶ï¼Ÿ</p><p>è¿›å…¥å‘½ä»¤ä¼ æ’­é˜¶æ®µå€™ï¼Œmasterä¸slaveé—´éœ€è¦è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œä½¿ç”¨å¿ƒè·³æœºåˆ¶è¿›è¡Œç»´æŠ¤ï¼Œå®ç°åŒæ–¹è¿æ¥ä¿æŒåœ¨çº¿</p><p>masterå¿ƒè·³ï¼š</p><ul><li>å†…éƒ¨æŒ‡ä»¤ï¼šPING</li><li>å‘¨æœŸï¼šç”±repl-ping-slave-periodå†³å®šï¼Œé»˜è®¤10ç§’</li><li>ä½œç”¨ï¼šåˆ¤æ–­slaveæ˜¯å¦åœ¨çº¿</li><li>æŸ¥è¯¢ï¼šINFO replication  è·å–slaveæœ€åä¸€æ¬¡è¿æ¥æ—¶é—´é—´éš”ï¼Œlagé¡¹ç»´æŒåœ¨0æˆ–1è§†ä¸ºæ­£å¸¸</li></ul><p>slaveå¿ƒè·³ä»»åŠ¡</p><ul><li>å†…éƒ¨æŒ‡ä»¤ï¼šREPLCONF ACK {offset}</li><li>å‘¨æœŸï¼š1ç§’</li><li>ä½œç”¨1ï¼šæ±‡æŠ¥slaveè‡ªå·±çš„å¤åˆ¶åç§»é‡ï¼Œè·å–æœ€æ–°çš„æ•°æ®å˜æ›´æŒ‡ä»¤</li><li>ä½œç”¨2ï¼šåˆ¤æ–­masteræ˜¯å¦åœ¨çº¿</li></ul><p>å¿ƒè·³é˜¶æ®µæ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å½“slaveå¤šæ•°æ‰çº¿ï¼Œæˆ–å»¶è¿Ÿè¿‡é«˜æ—¶ï¼Œmasterä¸ºä¿éšœæ•°æ®ç¨³å®šæ€§ï¼Œå°†æ‹’ç»æ‰€æœ‰ä¿¡æ¯åŒæ­¥</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apl">min-slaves-to-write<br>min-slaves-max-lag 8<br></code></pre></td></tr></table></figure><p>slaveæ•°é‡å°‘äº2ä¸ªï¼Œæˆ–è€…æ‰€æœ‰slaveçš„å»¶è¿Ÿéƒ½å¤§äºç­‰äº8ç§’æ—¶ï¼Œå¼ºåˆ¶å…³é—­masterå†™åŠŸèƒ½ï¼Œåœæ­¢æ•°æ®åŒæ­¥</p><ul><li><p>slaveæ•°é‡ç”±slaveå‘é€<font color='red'>REPLCONF ACK</font>å‘½ä»¤åšç¡®è®¤</p></li><li><p>slaveå»¶è¿Ÿç”±slaveå‘é€<font color='red'>REPLCONF ACK</font>å‘½ä»¤åšç¡®è®¤</p></li></ul><p>è‡³æ­¤ï¼šæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºå®Œæ•´çš„ä¸»ä»å¤åˆ¶æµç¨‹ï¼š</p><img src="https://s2.loli.net/2022/04/07/JtKlugTBZnUvG9q.png"  /><h3 id="2-3-ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜"><a href="#2-3-ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜" class="headerlink" title="2.3 ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜"></a>2.3 ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜</h3><h4 id="2-3-1-é¢‘ç¹çš„å…¨é‡å¤åˆ¶"><a href="#2-3-1-é¢‘ç¹çš„å…¨é‡å¤åˆ¶" class="headerlink" title="2.3.1 é¢‘ç¹çš„å…¨é‡å¤åˆ¶"></a>2.3.1 é¢‘ç¹çš„å…¨é‡å¤åˆ¶</h4><ul><li>ä¼´éšç€ç³»ç»Ÿçš„è¿è¡Œï¼Œmasterçš„æ•°æ®é‡ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸€æ—¦masteré‡å¯ï¼Œrunidå°†å‘ç”Ÿå˜åŒ–ï¼Œä¼šå¯¼è‡´å…¨éƒ¨slaveçš„å…¨é‡å¤åˆ¶æ“ä½œ</li></ul><p>å†…éƒ¨ä¼˜åŒ–è°ƒæ•´æ–¹æ¡ˆï¼š</p><p>1ï¼šmasterå†…éƒ¨åˆ›å»ºmaster_replidå˜é‡ï¼Œä½¿ç”¨runidç›¸åŒçš„ç­–ç•¥ç”Ÿæˆï¼Œé•¿åº¦41ä½ï¼Œå¹¶å‘é€ç»™æ‰€æœ‰slave</p><p>2ï¼šåœ¨masterå…³é—­æ—¶æ‰§è¡Œå‘½ä»¤shutdown saveï¼Œè¿›è¡ŒRDBæŒä¹…åŒ–,å°†runidä¸offsetä¿å­˜åˆ°RDBæ–‡ä»¶ä¸­</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">repl-id  repl-offset<br><br>é€šè¿‡redis-check-rdbå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯<br></code></pre></td></tr></table></figure><p>3ï¼šmasteré‡å¯ååŠ è½½RDBæ–‡ä»¶ï¼Œæ¢å¤æ•°æ®ï¼Œé‡å¯åï¼Œå°†RDBæ–‡ä»¶ä¸­ä¿å­˜çš„repl-idä¸repl-offsetåŠ è½½åˆ°å†…å­˜ä¸­</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">master<span class="hljs-emphasis">_repl_</span>id=repl  master<span class="hljs-emphasis">_repl_</span>offset =repl-offset<br><br>é€šè¿‡infoå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯<br></code></pre></td></tr></table></figure><p>ä½œç”¨ï¼šæœ¬æœºä¿å­˜ä¸Šæ¬¡runidï¼Œé‡å¯åæ¢å¤è¯¥å€¼ï¼Œä½¿æ‰€æœ‰slaveè®¤ä¸ºè¿˜æ˜¯ä¹‹å‰çš„master</p><ul><li>ç¬¬äºŒç§å‡ºç°é¢‘ç¹å…¨é‡å¤åˆ¶çš„é—®é¢˜ç°è±¡ï¼šç½‘ç»œç¯å¢ƒä¸ä½³ï¼Œå‡ºç°ç½‘ç»œä¸­æ–­ï¼Œslaveä¸æä¾›æœåŠ¡</li></ul><p>é—®é¢˜åŸå› ï¼šå¤åˆ¶ç¼“å†²åŒºè¿‡å°ï¼Œæ–­ç½‘åslaveçš„offsetè¶Šç•Œï¼Œè§¦å‘å…¨é‡å¤åˆ¶</p><p>æœ€ç»ˆç»“æœï¼šslaveåå¤è¿›è¡Œå…¨é‡å¤åˆ¶</p><p>è§£å†³æ–¹æ¡ˆï¼šä¿®æ”¹å¤åˆ¶ç¼“å†²åŒºå¤§å°</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">repl-backlog-size</span> <span class="hljs-string">?mb</span><br></code></pre></td></tr></table></figure><p>å»ºè®®è®¾ç½®å¦‚ä¸‹ï¼š</p><p>1.æµ‹ç®—ä»masteråˆ°slaveçš„é‡è¿å¹³å‡æ—¶é•¿second</p><p>2.è·å–masterå¹³å‡æ¯ç§’äº§ç”Ÿå†™å‘½ä»¤æ•°æ®æ€»é‡write_size_per_second</p><p>3.æœ€ä¼˜å¤åˆ¶ç¼“å†²åŒºç©ºé—´ &#x3D; 2 * second * write_size_per_second</p><h4 id="2-3-2-é¢‘ç¹çš„ç½‘ç»œä¸­æ–­"><a href="#2-3-2-é¢‘ç¹çš„ç½‘ç»œä¸­æ–­" class="headerlink" title="2.3.2 é¢‘ç¹çš„ç½‘ç»œä¸­æ–­"></a>2.3.2 é¢‘ç¹çš„ç½‘ç»œä¸­æ–­</h4><ul><li>é—®é¢˜ç°è±¡ï¼šmasterçš„CPUå ç”¨è¿‡é«˜ æˆ– slaveé¢‘ç¹æ–­å¼€è¿æ¥</li></ul><p>é—®é¢˜åŸå› </p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">slaveæ¯1ç§’å‘é€REPLCONFACKå‘½ä»¤åˆ°master<br><br>å½“slaveæ¥åˆ°äº†æ…¢æŸ¥è¯¢æ—¶ï¼ˆkeys <span class="hljs-emphasis">* ï¼Œhgetallç­‰ï¼‰ï¼Œä¼šå¤§é‡å ç”¨CPUæ€§èƒ½</span><br><span class="hljs-emphasis"></span><br><span class="hljs-emphasis">masteræ¯1ç§’è°ƒç”¨å¤åˆ¶å®šæ—¶å‡½æ•°replicationCron()ï¼Œæ¯”å¯¹slaveå‘ç°é•¿æ—¶é—´æ²¡æœ‰è¿›è¡Œå“åº”</span><br></code></pre></td></tr></table></figure><p>æœ€ç»ˆç»“æœï¼šmasterå„ç§èµ„æºï¼ˆè¾“å‡ºç¼“å†²åŒºã€å¸¦å®½ã€è¿æ¥ç­‰ï¼‰è¢«ä¸¥é‡å ç”¨</p><p>è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œç¡®è®¤æ˜¯å¦é‡Šæ”¾slave</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">repl-timeout</span> <span class="hljs-string">seconds</span><br></code></pre></td></tr></table></figure><p>è¯¥å‚æ•°å®šä¹‰äº†è¶…æ—¶æ—¶é—´çš„é˜ˆå€¼ï¼ˆé»˜è®¤60ç§’ï¼‰ï¼Œè¶…è¿‡è¯¥å€¼ï¼Œé‡Šæ”¾slave</p><ul><li>é—®é¢˜ç°è±¡ï¼šslaveä¸masterè¿æ¥æ–­å¼€</li></ul><p>é—®é¢˜åŸå› </p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">masterå‘é€pingæŒ‡ä»¤é¢‘åº¦è¾ƒä½<br><br>masterè®¾å®šè¶…æ—¶æ—¶é—´è¾ƒçŸ­<br><br>pingæŒ‡ä»¤åœ¨ç½‘ç»œä¸­å­˜åœ¨ä¸¢åŒ…<br></code></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆï¼šæé«˜pingæŒ‡ä»¤å‘é€çš„é¢‘åº¦</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">repl-ping-slave-period</span> <span class="hljs-string">seconds</span><br></code></pre></td></tr></table></figure><p>è¶…æ—¶æ—¶é—´repl-timeçš„æ—¶é—´è‡³å°‘æ˜¯pingæŒ‡ä»¤é¢‘åº¦çš„5åˆ°10å€ï¼Œå¦åˆ™slaveå¾ˆå®¹æ˜“åˆ¤å®šè¶…æ—¶</p><h4 id="2-3-3-æ•°æ®ä¸ä¸€è‡´"><a href="#2-3-3-æ•°æ®ä¸ä¸€è‡´" class="headerlink" title="2.3.3 æ•°æ®ä¸ä¸€è‡´"></a>2.3.3 æ•°æ®ä¸ä¸€è‡´</h4><p>é—®é¢˜ç°è±¡ï¼šå¤šä¸ªslaveè·å–ç›¸åŒæ•°æ®ä¸åŒæ­¥</p><p>é—®é¢˜åŸå› ï¼šç½‘ç»œä¿¡æ¯ä¸åŒæ­¥ï¼Œæ•°æ®å‘é€æœ‰å»¶è¿Ÿ</p><p>è§£å†³æ–¹æ¡ˆ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">ä¼˜åŒ–ä¸»ä»é—´çš„ç½‘ç»œç¯å¢ƒï¼Œé€šå¸¸æ”¾ç½®åœ¨åŒä¸€ä¸ªæœºæˆ¿éƒ¨ç½²ï¼Œå¦‚ä½¿ç”¨é˜¿é‡Œäº‘ç­‰äº‘æœåŠ¡å™¨æ—¶è¦æ³¨æ„æ­¤ç°è±¡<br><br>ç›‘æ§ä¸»ä»èŠ‚ç‚¹å»¶è¿Ÿï¼ˆé€šè¿‡offsetï¼‰åˆ¤æ–­ï¼Œå¦‚æœslaveå»¶è¿Ÿè¿‡å¤§ï¼Œæš‚æ—¶å±è”½ç¨‹åºå¯¹è¯¥slaveçš„æ•°æ®è®¿é—®<br></code></pre></td></tr></table></figure><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">slave-serve-stale-data</span><span class="hljs-string">yes|no</span><br></code></pre></td></tr></table></figure><p>å¼€å¯åä»…å“åº”infoã€slaveofç­‰å°‘æ•°å‘½ä»¤ï¼ˆæ…ç”¨ï¼Œé™¤éå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜ï¼‰</p><h2 id="3-å“¨å…µæ¨¡å¼"><a href="#3-å“¨å…µæ¨¡å¼" class="headerlink" title="3.å“¨å…µæ¨¡å¼"></a>3.å“¨å…µæ¨¡å¼</h2><h3 id="3-1-å“¨å…µç®€ä»‹"><a href="#3-1-å“¨å…µç®€ä»‹" class="headerlink" title="3.1 å“¨å…µç®€ä»‹"></a>3.1 å“¨å…µç®€ä»‹</h3><h4 id="3-1-1-å“¨å…µæ¦‚å¿µ"><a href="#3-1-1-å“¨å…µæ¦‚å¿µ" class="headerlink" title="3.1.1 å“¨å…µæ¦‚å¿µ"></a>3.1.1 å“¨å…µæ¦‚å¿µ</h4><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¸šåŠ¡åœºæ™¯ï¼šå¦‚æœredisçš„masterå®•æœºäº†ï¼Œæ­¤æ—¶åº”è¯¥æ€ä¹ˆåŠï¼Ÿ</p><p><img src="https://s2.loli.net/2022/04/07/28Lq6cgheuTBAns.png"></p><p>é‚£æ­¤æ—¶æˆ‘ä»¬å¯èƒ½éœ€è¦ä»ä¸€å †çš„slaveä¸­é‡æ–°é€‰ä¸¾å‡ºä¸€ä¸ªæ–°çš„masterï¼Œé‚£è¿™ä¸ªæ“ä½œè¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿè¿™é‡Œé¢ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‡ºç°å‘¢ï¼Ÿ</p><p><img src="https://s2.loli.net/2022/04/06/hwPpjH8m5Iaovgs.png"></p><p>è¦å®ç°è¿™äº›åŠŸèƒ½ï¼Œæˆ‘ä»¬å°±éœ€è¦redisçš„å“¨å…µï¼Œé‚£å“¨å…µæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><strong>å“¨å…µ</strong></p><p>å“¨å…µ(sentinel) æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç”¨äºå¯¹ä¸»ä»ç»“æ„ä¸­çš„æ¯å°æœåŠ¡å™¨è¿›è¡Œ<strong>ç›‘æ§</strong>ï¼Œå½“å‡ºç°æ•…éšœæ—¶é€šè¿‡<strong>æŠ•ç¥¨</strong>æœºåˆ¶<strong>é€‰æ‹©</strong>æ–°çš„masterå¹¶å°†æ‰€æœ‰slaveè¿æ¥åˆ°æ–°çš„masterã€‚</p><p><img src="https://s2.loli.net/2022/04/06/JPsI69TtLcASKCM.png"></p><h4 id="3-1-2-å“¨å…µä½œç”¨"><a href="#3-1-2-å“¨å…µä½œç”¨" class="headerlink" title="3.1.2 å“¨å…µä½œç”¨"></a>3.1.2 å“¨å…µä½œç”¨</h4><p>å“¨å…µçš„ä½œç”¨ï¼š</p><ul><li><p>ç›‘æ§ï¼šç›‘æ§masterå’Œslave</p><p>ä¸æ–­çš„æ£€æŸ¥masterå’Œslaveæ˜¯å¦æ­£å¸¸è¿è¡Œ</p><p>masterå­˜æ´»æ£€æµ‹ã€masterä¸slaveè¿è¡Œæƒ…å†µæ£€æµ‹</p></li><li><p>é€šçŸ¥ï¼ˆæé†’ï¼‰ï¼šå½“è¢«ç›‘æ§çš„æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼Œå‘å…¶ä»–ï¼ˆå“¨å…µé—´ï¼Œå®¢æˆ·ç«¯ï¼‰å‘é€é€šçŸ¥</p></li><li><p>è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼šæ–­å¼€masterä¸slaveè¿æ¥ï¼Œé€‰å–ä¸€ä¸ªslaveä½œä¸ºmasterï¼Œå°†å…¶ä»–slaveè¿æ¥æ–°çš„masterï¼Œå¹¶å‘ŠçŸ¥å®¢æˆ·ç«¯æ–°çš„æœåŠ¡å™¨åœ°å€</p></li></ul><p>æ³¨æ„ï¼šå“¨å…µä¹Ÿæ˜¯ä¸€å°redisæœåŠ¡å™¨ï¼Œåªæ˜¯ä¸æä¾›æ•°æ®ç›¸å…³æœåŠ¡ï¼Œé€šå¸¸å“¨å…µçš„æ•°é‡é…ç½®ä¸ºå•æ•°</p><h3 id="3-2-å¯ç”¨å“¨å…µ"><a href="#3-2-å¯ç”¨å“¨å…µ" class="headerlink" title="3.2 å¯ç”¨å“¨å…µ"></a>3.2 å¯ç”¨å“¨å…µ</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cat</span> sentinel.<span class="hljs-keyword">conf</span> | <span class="hljs-keyword">grep</span> -v <span class="hljs-string">&quot;#&quot;</span> | <span class="hljs-keyword">grep</span> -v <span class="hljs-string">&quot;^$&quot;</span><br><br><br>sed <span class="hljs-string">&quot;s/26401/26402/g&quot;</span> sentinel-<span class="hljs-number">26401</span>.<span class="hljs-keyword">conf</span> &gt; sentinel-<span class="hljs-number">26402</span>.<span class="hljs-keyword">conf</span><br><br></code></pre></td></tr></table></figure><p>é…ç½®å“¨å…µ</p><ul><li><p>é…ç½®ä¸€æ‹–äºŒçš„ä¸»ä»ç»“æ„ï¼ˆåˆ©ç”¨ä¹‹å‰çš„æ–¹å¼å¯åŠ¨å³å¯ï¼‰</p></li><li><p>é…ç½®ä¸‰ä¸ªå“¨å…µï¼ˆé…ç½®ç›¸åŒï¼Œç«¯å£ä¸åŒï¼‰ï¼Œå‚çœ‹sentinel.conf</p></li></ul><p>1ï¼šè®¾ç½®å“¨å…µç›‘å¬çš„ä¸»æœåŠ¡å™¨ä¿¡æ¯ï¼Œ sentinel_numberè¡¨ç¤ºå‚ä¸æŠ•ç¥¨çš„å“¨å…µæ•°é‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sentinel</span> <span class="hljs-string">monitor master_name  master_hostmaster_port sentinel_number</span><br></code></pre></td></tr></table></figure><p>2ï¼šè®¾ç½®åˆ¤å®šæœåŠ¡å™¨å®•æœºæ—¶é•¿ï¼Œè¯¥è®¾ç½®æ§åˆ¶æ˜¯å¦è¿›è¡Œä¸»ä»åˆ‡æ¢</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sentinel</span> <span class="hljs-string">down-after-milliseconds master_namemillion_seconds</span><br></code></pre></td></tr></table></figure><p>3ï¼šè®¾ç½®æ•…éšœåˆ‡æ¢çš„æœ€å¤§è¶…æ—¶æ—¶</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sentinel</span> <span class="hljs-string">failover-timeout master_namemillion_seconds</span><br></code></pre></td></tr></table></figure><p>4ï¼šè®¾ç½®ä¸»ä»åˆ‡æ¢åï¼ŒåŒæ—¶è¿›è¡Œæ•°æ®åŒæ­¥çš„slaveæ•°é‡ï¼Œæ•°å€¼è¶Šå¤§ï¼Œè¦æ±‚ç½‘ç»œèµ„æºè¶Šé«˜ï¼Œæ•°å€¼è¶Šå°ï¼ŒåŒæ­¥æ—¶é—´è¶Šé•¿</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">sentinel</span> <span class="hljs-string">parallel-syncs master_name sync_slave_number</span><br></code></pre></td></tr></table></figure><ul><li>å¯åŠ¨å“¨å…µ</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-sentinel</span> <span class="hljs-string">filename</span><br></code></pre></td></tr></table></figure><h3 id="3-3-å“¨å…µå·¥ä½œåŸç†"><a href="#3-3-å“¨å…µå·¥ä½œåŸç†" class="headerlink" title="3.3 å“¨å…µå·¥ä½œåŸç†"></a>3.3 å“¨å…µå·¥ä½œåŸç†</h3><p>å“¨å…µåœ¨è¿›è¡Œä¸»ä»åˆ‡æ¢è¿‡ç¨‹ä¸­ç»å†ä¸‰ä¸ªé˜¶æ®µ</p><ul><li>ç›‘æ§</li><li>é€šçŸ¥</li><li>æ•…éšœè½¬ç§»</li></ul><h4 id="3-3-1-ç›‘æ§"><a href="#3-3-1-ç›‘æ§" class="headerlink" title="3.3.1 ç›‘æ§"></a>3.3.1 ç›‘æ§</h4><p>ç”¨äºåŒæ­¥å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯</p><p><img src="https://s2.loli.net/2022/04/06/dguq7sEhnAYMkOK.png"></p><ul><li><p>è·å–å„ä¸ªsentinelçš„çŠ¶æ€ï¼ˆæ˜¯å¦åœ¨çº¿ï¼‰</p></li><li><p>è·å–masterçš„çŠ¶æ€</p></li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">masterå±æ€§<br><span class="hljs-code">prunid</span><br><span class="hljs-code">proleï¼šmaster</span><br><span class="hljs-code">å„ä¸ªslaveçš„è¯¦ç»†ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><ul><li>è·å–æ‰€æœ‰slaveçš„çŠ¶æ€ï¼ˆæ ¹æ®masterä¸­çš„slaveä¿¡æ¯ï¼‰</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">slaveå±æ€§<br><span class="hljs-code">prunid</span><br><span class="hljs-code">proleï¼šslave</span><br><span class="hljs-code">pmaster_hostã€master_port</span><br><span class="hljs-code">poffset</span><br></code></pre></td></tr></table></figure><p>å…¶å†…éƒ¨çš„å·¥ä½œåŸç†å…·ä½“å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/04/06/VvloTp1jghLRuID.png"></p><h4 id="3-3-2-é€šçŸ¥"><a href="#3-3-2-é€šçŸ¥" class="headerlink" title="3.3.2 é€šçŸ¥"></a>3.3.2 é€šçŸ¥</h4><p>sentinelåœ¨é€šçŸ¥é˜¶æ®µè¦ä¸æ–­çš„å»è·å–master&#x2F;slaveçš„ä¿¡æ¯ï¼Œç„¶ååœ¨å„ä¸ªsentinelä¹‹é—´è¿›è¡Œå…±äº«ï¼Œå…·ä½“çš„æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/04/06/EgOFhZH9IWqcuvz.png"></p><h4 id="3-3-3-æ•…éšœè½¬ç§»"><a href="#3-3-3-æ•…éšœè½¬ç§»" class="headerlink" title="3.3.3 æ•…éšœè½¬ç§»"></a>3.3.3 æ•…éšœè½¬ç§»</h4><p>å½“masterå®•æœºåsentinelæ˜¯å¦‚ä½•çŸ¥æ™“å¹¶åˆ¤æ–­å‡ºmasteræ˜¯çœŸçš„å®•æœºäº†å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹å…·ä½“çš„æ“ä½œæµç¨‹</p><p><img src="https://s2.loli.net/2022/04/06/N1u9HIk8LsBCaAh.png"></p><p>å½“sentinelè®¤å®šmasterä¸‹çº¿ä¹‹åï¼Œæ­¤æ—¶éœ€è¦å†³å®šæ›´æ¢masterï¼Œé‚£è¿™ä»¶äº‹ç”±å“ªä¸ªsentinelæ¥åšå‘¢ï¼Ÿè¿™æ—¶å€™sentinelä¹‹é—´è¦è¿›è¡Œé€‰ä¸¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://s2.loli.net/2022/04/06/6eZGU7xlf5Opqbk.png"></p><p>åœ¨é€‰ä¸¾çš„æ—¶å€™æ¯ä¸€ä¸ªäººæ‰‹é‡Œéƒ½æœ‰ä¸€ç¥¨ï¼Œè€Œæ¯ä¸€ä¸ªäººçš„åˆéƒ½æƒ³å½“è¿™ä¸ªå¤„ç†äº‹æ•…çš„äººï¼Œé‚£æ€ä¹ˆåŠï¼Ÿå¤§å®¶å°±å¼€å§‹æŠ¢ï¼Œäºæ˜¯æ¯ä¸ªäººéƒ½ä¼šå‘å‡ºä¸€ä¸ªæŒ‡ä»¤ï¼Œåœ¨å†…ç½‘é‡Œè¾¹å‘Šè¯‰å¤§å®¶æˆ‘è¦å½“é€‰ä¸¾äººï¼Œæ¯”å¦‚è¯´ç°åœ¨çš„sentinel1å’Œsentinel4å‘å‡ºè¿™ä¸ªé€‰ä¸¾æŒ‡ä»¤äº†ï¼Œé‚£ä¹ˆsentinel2æ—¢èƒ½æ¥åˆ°sentinel1çš„ä¹Ÿèƒ½æ¥åˆ°sentinel4çš„ï¼Œæ¥åˆ°äº†ä»–ä»¬çš„ç”³è¯·ä»¥åå‘¢ï¼Œsentinel2ä»–å°±ä¼šæŠŠä»–çš„ä¸€ç¥¨æŠ•ç»™å…¶ä¸­ä¸€æ–¹ï¼ŒæŠ•ç»™è°å‘¢ï¼Ÿè°å…ˆè¿‡æ¥æˆ‘æŠ•ç»™è°ï¼Œå‡è®¾sentinel1å…ˆè¿‡æ¥ï¼Œæ‰€ä»¥è¿™ä¸ªç¥¨å°±ç»™åˆ°äº†sentinel1ã€‚é‚£ä¹ˆç»™è¿‡å»ä»¥åå‘¢ï¼Œç°åœ¨sentinel1å°±æ‹¿åˆ°äº†ä¸€ç¥¨ï¼ŒæŒ‰ç…§è¿™æ ·çš„ä¸€ç§å½¢å¼ï¼Œæœ€ç»ˆä¼šæœ‰ä¸€ä¸ªé€‰ä¸¾ç»“æœã€‚å¯¹åº”çš„é€‰ä¸¾æœ€ç»ˆå¾—ç¥¨å¤šçš„ï¼Œé‚£è‡ªç„¶å°±æˆä¸ºäº†å¤„ç†äº‹æ•…çš„äººã€‚éœ€è¦æ³¨æ„åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æœ‰å¯èƒ½ä¼šå­˜åœ¨å¤±è´¥çš„ç°è±¡ï¼Œå°±æ˜¯ä¸€è½®é€‰ä¸¾å®Œæ²¡æœ‰é€‰å–ï¼Œé‚£å°±ä¼šæ¥ç€è¿›è¡Œç¬¬äºŒè½®ç¬¬ä¸‰è½®ç›´åˆ°å®Œæˆé€‰ä¸¾ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯ç”±é€‰ä¸¾èƒœå‡ºçš„sentinelå»ä»slaveä¸­é€‰ä¸€ä¸ªæ–°çš„masterå‡ºæ¥çš„å·¥ä½œï¼Œè¿™ä¸ªæµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p><p>é¦–å…ˆå®ƒæœ‰ä¸€ä¸ªåœ¨æœåŠ¡å™¨åˆ—è¡¨ä¸­æŒ‘é€‰å¤‡é€‰masterçš„åŸåˆ™</p><ul><li><p>ä¸åœ¨çº¿çš„OUT</p></li><li><p>å“åº”æ…¢çš„OUT</p></li><li><p>ä¸åŸmasteræ–­å¼€æ—¶é—´ä¹…çš„OUT</p></li><li><p>ä¼˜å…ˆåŸåˆ™</p><p>â€‹    ä¼˜å…ˆçº§<br>â€‹        offset<br>â€‹        runid</p></li></ul><p>é€‰å‡ºæ–°çš„masterä¹‹åï¼Œå‘é€æŒ‡ä»¤ï¼ˆ sentinel ï¼‰ç»™å…¶ä»–çš„slaveï¼š</p><ul><li><p>å‘æ–°çš„masterå‘é€slaveof no one</p></li><li><p>å‘å…¶ä»–slaveå‘é€slaveof æ–°masterIPç«¯å£</p></li></ul><p><strong>æ€»ç»“</strong>ï¼šæ•…éšœè½¬ç§»é˜¶æ®µ</p><ol><li>å‘ç°é—®é¢˜ï¼Œä¸»è§‚ä¸‹çº¿ä¸å®¢è§‚ä¸‹çº¿</li><li>ç«é€‰è´Ÿè´£äºº</li><li>ä¼˜é€‰æ–°master</li><li>æ–°masterä¸Šä»»ï¼Œå…¶ä»–slaveåˆ‡æ¢masterï¼ŒåŸmasterä½œä¸ºslaveæ•…éšœæ¢å¤åè¿æ¥</li></ol><h2 id="4-é›†ç¾¤cluster"><a href="#4-é›†ç¾¤cluster" class="headerlink" title="4.é›†ç¾¤cluster"></a>4.é›†ç¾¤cluster</h2><p>ç°çŠ¶é—®é¢˜ï¼šä¸šåŠ¡å‘å±•è¿‡ç¨‹ä¸­é‡åˆ°çš„å³°å€¼ç“¶é¢ˆ</p><ul><li>redisæä¾›çš„æœåŠ¡OPSå¯ä»¥è¾¾åˆ°10ä¸‡&#x2F;ç§’ï¼Œå½“å‰ä¸šåŠ¡OPSå·²ç»è¾¾åˆ°10ä¸‡&#x2F;ç§’</li><li>å†…å­˜å•æœºå®¹é‡è¾¾åˆ°256Gï¼Œå½“å‰ä¸šåŠ¡éœ€æ±‚å†…å­˜å®¹é‡1T</li><li>ä½¿ç”¨é›†ç¾¤çš„æ–¹å¼å¯ä»¥å¿«é€Ÿè§£å†³ä¸Šè¿°é—®é¢˜</li></ul><h3 id="4-1-é›†ç¾¤ç®€ä»‹"><a href="#4-1-é›†ç¾¤ç®€ä»‹" class="headerlink" title="4.1 é›†ç¾¤ç®€ä»‹"></a>4.1 é›†ç¾¤ç®€ä»‹</h3><p>é›†ç¾¤å°±æ˜¯ä½¿ç”¨ç½‘ç»œå°†è‹¥å¹²å°è®¡ç®—æœºè”é€šèµ·æ¥ï¼Œå¹¶æä¾›ç»Ÿä¸€çš„ç®¡ç†æ–¹å¼ï¼Œä½¿å…¶å¯¹å¤–å‘ˆç°å•æœºçš„æœåŠ¡æ•ˆæœ</p><p><img src="https://s2.loli.net/2022/04/06/VixrEemUboyLqvX.png"></p><p><strong>é›†ç¾¤ä½œç”¨ï¼š</strong></p><ul><li>åˆ†æ•£å•å°æœåŠ¡å™¨çš„è®¿é—®å‹åŠ›ï¼Œå®ç°è´Ÿè½½å‡è¡¡</li><li>åˆ†æ•£å•å°æœåŠ¡å™¨çš„å­˜å‚¨å‹åŠ›ï¼Œå®ç°å¯æ‰©å±•æ€§</li><li>é™ä½å•å°æœåŠ¡å™¨å®•æœºå¸¦æ¥çš„ä¸šåŠ¡ç¾éš¾</li></ul><p><img src="https://s2.loli.net/2022/04/06/C4AlrHFd9gUN5ba.png"></p><h3 id="4-2-Clusteré›†ç¾¤ç»“æ„è®¾è®¡"><a href="#4-2-Clusteré›†ç¾¤ç»“æ„è®¾è®¡" class="headerlink" title="4.2 Clusteré›†ç¾¤ç»“æ„è®¾è®¡"></a>4.2 Clusteré›†ç¾¤ç»“æ„è®¾è®¡</h3><p><strong>æ•°æ®å­˜å‚¨è®¾è®¡ï¼š</strong></p><ol><li><p>é€šè¿‡ç®—æ³•è®¾è®¡ï¼Œè®¡ç®—å‡ºkeyåº”è¯¥ä¿å­˜çš„ä½ç½®</p></li><li><p>å°†æ‰€æœ‰çš„å­˜å‚¨ç©ºé—´è®¡åˆ’åˆ‡å‰²æˆ16384ä»½ï¼Œæ¯å°ä¸»æœºä¿å­˜ä¸€éƒ¨åˆ†</p><p>æ³¨æ„ï¼šæ¯ä»½ä»£è¡¨çš„æ˜¯ä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œä¸æ˜¯ä¸€ä¸ªkeyçš„ä¿å­˜ç©ºé—´</p></li><li><p>å°†keyæŒ‰ç…§è®¡ç®—å‡ºçš„ç»“æœæ”¾åˆ°å¯¹åº”çš„å­˜å‚¨ç©ºé—´</p></li></ol><p><img src="https://s2.loli.net/2022/04/06/Jf6MLnZQA5zjdtC.png"></p><p>é‚£redisçš„é›†ç¾¤æ˜¯å¦‚ä½•å¢å¼ºå¯æ‰©å±•æ€§çš„å‘¢ï¼Ÿè­¬å¦‚æˆ‘ä»¬è¦å¢åŠ ä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹</p><p><img src="https://s2.loli.net/2022/04/06/Q3Gvr7Ud4fzH6D9.png"></p><p>å½“æˆ‘ä»¬æŸ¥æ‰¾æ•°æ®æ—¶ï¼Œé›†ç¾¤æ˜¯å¦‚ä½•æ“ä½œçš„å‘¢ï¼Ÿ</p><ul><li>å„ä¸ªæ•°æ®åº“ç›¸äº’é€šä¿¡ï¼Œä¿å­˜å„ä¸ªåº“ä¸­æ§½çš„ç¼–å·æ•°æ®</li><li>ä¸€æ¬¡å‘½ä¸­ï¼Œç›´æ¥è¿”å›</li><li>ä¸€æ¬¡æœªå‘½ä¸­ï¼Œå‘ŠçŸ¥å…·ä½“ä½ç½®</li></ul><p><img src="https://s2.loli.net/2022/04/06/d6bpP1l2iY7BwM9.png"></p><h3 id="4-3-Clusteré›†ç¾¤ç»“æ„æ­å»º"><a href="#4-3-Clusteré›†ç¾¤ç»“æ„æ­å»º" class="headerlink" title="4.3 Clusteré›†ç¾¤ç»“æ„æ­å»º"></a>4.3 Clusteré›†ç¾¤ç»“æ„æ­å»º</h3><p>é¦–å…ˆè¦æ˜ç¡®çš„å‡ ä¸ªè¦ç‚¹ï¼š</p><ul><li>é…ç½®æœåŠ¡å™¨ï¼ˆ3ä¸»3ä»ï¼‰</li><li>å»ºç«‹é€šä¿¡ï¼ˆMeetï¼‰</li><li>åˆ†æ§½ï¼ˆSlotï¼‰</li><li>æ­å»ºä¸»ä»ï¼ˆmaster-slaveï¼‰</li></ul><p><strong>Clusteré…ç½®</strong></p><ul><li>æ˜¯å¦å¯ç”¨clusterï¼ŒåŠ å…¥clusterèŠ‚ç‚¹</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster-enabled</span> <span class="hljs-string">yes|no</span><br></code></pre></td></tr></table></figure><ul><li>clusteré…ç½®æ–‡ä»¶åï¼Œè¯¥æ–‡ä»¶å±äºè‡ªåŠ¨ç”Ÿæˆï¼Œä»…ç”¨äºå¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶å¹¶æŸ¥è¯¢æ–‡ä»¶å†…å®¹</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster-config-file</span> <span class="hljs-string">filename</span><br></code></pre></td></tr></table></figure><ul><li>èŠ‚ç‚¹æœåŠ¡å“åº”è¶…æ—¶æ—¶é—´ï¼Œç”¨äºåˆ¤å®šè¯¥èŠ‚ç‚¹æ˜¯å¦ä¸‹çº¿æˆ–åˆ‡æ¢ä¸ºä»èŠ‚ç‚¹</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster-node-timeout</span> <span class="hljs-string">milliseconds</span><br></code></pre></td></tr></table></figure><ul><li>masterè¿æ¥çš„slaveæœ€å°æ•°é‡</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster-migration-barrier</span> <span class="hljs-string">min_slave_number</span><br></code></pre></td></tr></table></figure><p><strong>ClusterèŠ‚ç‚¹æ“ä½œå‘½ä»¤</strong></p><ul><li>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">nodes</span><br></code></pre></td></tr></table></figure><ul><li>æ›´æ”¹slaveæŒ‡å‘æ–°çš„master</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">replicate master-id</span><br></code></pre></td></tr></table></figure><ul><li>å‘ç°ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œæ–°å¢master</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">meet ip:port</span><br></code></pre></td></tr></table></figure><ul><li>å¿½ç•¥ä¸€ä¸ªæ²¡æœ‰soltçš„èŠ‚ç‚¹</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">forget server_id</span><br></code></pre></td></tr></table></figure><ul><li>æ‰‹åŠ¨æ•…éšœè½¬ç§»</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">cluster</span> <span class="hljs-string">failover</span><br></code></pre></td></tr></table></figure><p><strong>é›†ç¾¤æ“ä½œå‘½ä»¤ï¼š</strong></p><ul><li>åˆ›å»ºé›†ç¾¤</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">â€“-cluster create masterhost1:masterport1 masterhost2:masterport2  masterhost3:masterport3 [masterhostn:masterportn â€¦] slavehost1:slaveport1  slavehost2:slaveport2 slavehost3:slaveport3 -â€“cluster-replicas n</span><br><br><span class="hljs-attr">redis-cli</span> <span class="hljs-string">â€“-cluster create 127.0.0.1:6501 127.0.0.1:6502 127.0.0.1:6503 127.0.0.1:6503 127.0.0.1:6504 127.0.0.1:6505 127.0.0.1:6506 --cluster-replicas 1</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šmasterä¸slaveçš„æ•°é‡è¦åŒ¹é…ï¼Œä¸€ä¸ªmasterå¯¹åº”nä¸ªslaveï¼Œç”±æœ€åçš„å‚æ•°nå†³å®š</p><p>masterä¸slaveçš„åŒ¹é…é¡ºåºä¸ºç¬¬ä¸€ä¸ªmasterä¸å‰nä¸ªslaveåˆ†ä¸ºä¸€ç»„ï¼Œå½¢æˆä¸»ä»ç»“æ„</p><ul><li><font color='red'>æ·»åŠ master</font>åˆ°å½“å‰é›†ç¾¤ä¸­ï¼Œè¿æ¥æ—¶å¯ä»¥æŒ‡å®šä»»æ„ç°æœ‰èŠ‚ç‚¹åœ°å€ä¸ç«¯å£</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster add-node new-master-host:new-master-port now-host:now-port</span><br></code></pre></td></tr></table></figure><ul><li><font color='red'>æ·»åŠ slave</font></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster add-node new-slave-host:new-slave-port master-host:master-port --cluster-slave --cluster-master-id masterid</span><br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤èŠ‚ç‚¹ï¼Œå¦‚æœ<font color='red'>åˆ é™¤çš„èŠ‚ç‚¹æ˜¯master</font>ï¼Œå¿…é¡»ä¿éšœå…¶ä¸­æ²¡æœ‰æ§½slot</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster del-node del-slave-host:del-slave-port del-slave-id</span><br></code></pre></td></tr></table></figure><ul><li><font color='red'>é‡æ–°åˆ†æ§½ï¼Œ</font>åˆ†æ§½æ˜¯ä»å…·æœ‰æ§½çš„masterä¸­åˆ’åˆ†ä¸€éƒ¨åˆ†ç»™å…¶ä»–masterï¼Œè¿‡ç¨‹ä¸­ä¸åˆ›å»ºæ–°çš„æ§½</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster reshard new-master-host:new-master:port --cluster-from src-  master-id1, src-master-id2, src-master-idn --cluster-to target-master-id --  cluster-slots slots</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå°†éœ€è¦å‚ä¸åˆ†æ§½çš„æ‰€æœ‰masteridä¸åˆ†å…ˆåé¡ºåºæ·»åŠ åˆ°å‚æ•°ä¸­ï¼Œä½¿ç”¨ï¼Œåˆ†éš”</p><p>æŒ‡å®šç›®æ ‡å¾—åˆ°çš„æ§½çš„æ•°é‡ï¼Œæ‰€æœ‰çš„æ§½å°†å¹³å‡ä»æ¯ä¸ªæ¥æºçš„masterå¤„è·å–</p><ul><li>é‡æ–°åˆ†é…æ§½ï¼Œä»å…·æœ‰æ§½çš„masterä¸­åˆ†é…æŒ‡å®šæ•°é‡çš„æ§½åˆ°å¦ä¸€ä¸ªmasterä¸­ï¼Œå¸¸ç”¨äºæ¸…ç©ºæŒ‡å®šmasterä¸­çš„æ§½</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">redis-cli</span> <span class="hljs-string">--cluster reshard src-master-host:src-master-port --cluster-from src-  master-id --cluster-to target-master-id --cluster-slots slots --cluster-yes</span><br></code></pre></td></tr></table></figure><h2 id="5-ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ"><a href="#5-ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ" class="headerlink" title="5.ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ"></a>5.ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ</h2><h3 id="5-1-ç¼“å­˜é¢„çƒ­"><a href="#5-1-ç¼“å­˜é¢„çƒ­" class="headerlink" title="5.1 ç¼“å­˜é¢„çƒ­"></a>5.1 ç¼“å­˜é¢„çƒ­</h3><p><strong>åœºæ™¯</strong>ï¼šâ€œå®•æœºâ€</p><p>æœåŠ¡å™¨å¯åŠ¨åè¿…é€Ÿå®•æœº</p><p><strong>é—®é¢˜æ’æŸ¥</strong>ï¼š</p><p>1.è¯·æ±‚æ•°é‡è¾ƒé«˜ï¼Œå¤§é‡çš„è¯·æ±‚è¿‡æ¥ä¹‹åéƒ½éœ€è¦å»ä»ç¼“å­˜ä¸­è·å–æ•°æ®ï¼Œä½†æ˜¯ç¼“å­˜ä¸­åˆæ²¡æœ‰ï¼Œæ­¤æ—¶ä»æ•°æ®åº“ä¸­æŸ¥æ‰¾æ•°æ®ç„¶åå°†æ•°æ®å†å­˜å…¥ç¼“å­˜ï¼Œé€ æˆäº†çŸ­æœŸå†…å¯¹redisçš„é«˜å¼ºåº¦æ“ä½œä»è€Œå¯¼è‡´é—®é¢˜</p><p>2.ä¸»ä»ä¹‹é—´æ•°æ®ååé‡è¾ƒå¤§ï¼Œæ•°æ®åŒæ­¥æ“ä½œé¢‘åº¦è¾ƒé«˜</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li>å‰ç½®å‡†å¤‡å·¥ä½œï¼š</li></ul><p>1.æ—¥å¸¸ä¾‹è¡Œç»Ÿè®¡æ•°æ®è®¿é—®è®°å½•ï¼Œç»Ÿè®¡è®¿é—®é¢‘åº¦è¾ƒé«˜çš„çƒ­ç‚¹æ•°æ®</p><p>2.åˆ©ç”¨LRUæ•°æ®åˆ é™¤ç­–ç•¥ï¼Œæ„å»ºæ•°æ®ç•™å­˜é˜Ÿåˆ—ä¾‹å¦‚ï¼šstormä¸kafkaé…åˆ</p><ul><li>å‡†å¤‡å·¥ä½œï¼š</li></ul><p>1.å°†ç»Ÿè®¡ç»“æœä¸­çš„æ•°æ®åˆ†ç±»ï¼Œæ ¹æ®çº§åˆ«ï¼Œredisä¼˜å…ˆåŠ è½½çº§åˆ«è¾ƒé«˜çš„çƒ­ç‚¹æ•°æ®</p><p>2.åˆ©ç”¨åˆ†å¸ƒå¼å¤šæœåŠ¡å™¨åŒæ—¶è¿›è¡Œæ•°æ®è¯»å–ï¼Œæé€Ÿæ•°æ®åŠ è½½è¿‡ç¨‹</p><p>3.çƒ­ç‚¹æ•°æ®ä¸»ä»åŒæ—¶é¢„çƒ­</p><ul><li>å®æ–½ï¼š</li></ul><p>4.ä½¿ç”¨è„šæœ¬ç¨‹åºå›ºå®šè§¦å‘æ•°æ®é¢„çƒ­è¿‡ç¨‹</p><p>5.å¦‚æœæ¡ä»¶å…è®¸ï¼Œä½¿ç”¨äº†CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰ï¼Œæ•ˆæœä¼šæ›´å¥½</p><p><strong>æ€»çš„æ¥è¯´</strong>ï¼šç¼“å­˜é¢„çƒ­å°±æ˜¯ç³»ç»Ÿå¯åŠ¨å‰ï¼Œæå‰å°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜ï¼ç”¨æˆ·ç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ï¼</p><h3 id="5-2-ç¼“å­˜é›ªå´©"><a href="#5-2-ç¼“å­˜é›ªå´©" class="headerlink" title="5.2 ç¼“å­˜é›ªå´©"></a>5.2 ç¼“å­˜é›ªå´©</h3><p><strong>åœºæ™¯</strong>ï¼šæ•°æ®åº“æœåŠ¡å™¨å´©æºƒï¼Œä¸€è¿ä¸²çš„åœºæ™¯ä¼šéšä¹‹å„¿æ¥</p><p>1.ç³»ç»Ÿå¹³ç¨³è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æ•°æ®åº“è¿æ¥é‡æ¿€å¢</p><p>2.åº”ç”¨æœåŠ¡å™¨æ— æ³•åŠæ—¶å¤„ç†è¯·æ±‚</p><p>3.å¤§é‡408ï¼Œ500é”™è¯¯é¡µé¢å‡ºç°</p><p>4.å®¢æˆ·åå¤åˆ·æ–°é¡µé¢è·å–æ•°æ®</p><p>5.æ•°æ®åº“å´©æºƒ</p><p>6.åº”ç”¨æœåŠ¡å™¨å´©æºƒ</p><p>7.é‡å¯åº”ç”¨æœåŠ¡å™¨æ— æ•ˆ</p><p>8.RedisæœåŠ¡å™¨å´©æºƒ</p><p>9.Redisé›†ç¾¤å´©æºƒ</p><p>10.é‡å¯æ•°æ®åº“åå†æ¬¡è¢«ç¬é—´æµé‡æ”¾å€’</p><p><strong>é—®é¢˜æ’æŸ¥</strong>ï¼š</p><p>1.åœ¨ä¸€ä¸ªè¾ƒçŸ­çš„æ—¶é—´å†…ï¼Œç¼“å­˜ä¸­è¾ƒå¤šçš„keyé›†ä¸­è¿‡æœŸ</p><p>2.æ­¤å‘¨æœŸå†…è¯·æ±‚è®¿é—®è¿‡æœŸçš„æ•°æ®ï¼Œredisæœªå‘½ä¸­ï¼Œrediså‘æ•°æ®åº“è·å–æ•°æ®</p><p>3.æ•°æ®åº“åŒæ—¶æ¥æ”¶åˆ°å¤§é‡çš„è¯·æ±‚æ— æ³•åŠæ—¶å¤„ç†</p><p>4.Rediså¤§é‡è¯·æ±‚è¢«ç§¯å‹ï¼Œå¼€å§‹å‡ºç°è¶…æ—¶ç°è±¡</p><p>5.æ•°æ®åº“æµé‡æ¿€å¢ï¼Œæ•°æ®åº“å´©æºƒ</p><p>6.é‡å¯åä»ç„¶é¢å¯¹ç¼“å­˜ä¸­æ— æ•°æ®å¯ç”¨</p><p>7.RedisæœåŠ¡å™¨èµ„æºè¢«ä¸¥é‡å ç”¨ï¼ŒRedisæœåŠ¡å™¨å´©æºƒ</p><p>8.Redisé›†ç¾¤å‘ˆç°å´©å¡Œï¼Œé›†ç¾¤ç“¦è§£</p><p>9.åº”ç”¨æœåŠ¡å™¨æ— æ³•åŠæ—¶å¾—åˆ°æ•°æ®å“åº”è¯·æ±‚ï¼Œæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚æ•°é‡è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨æœåŠ¡å™¨å´©æºƒ</p><p>10.åº”ç”¨æœåŠ¡å™¨ï¼Œredisï¼Œæ•°æ®åº“å…¨éƒ¨é‡å¯ï¼Œæ•ˆæœä¸ç†æƒ³</p><p>æ€»è€Œè¨€ä¹‹å°±ä¸¤ç‚¹ï¼šçŸ­æ—¶é—´èŒƒå›´å†…ï¼Œå¤§é‡keyé›†ä¸­è¿‡æœŸ</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong></p><ul><li>æ€è·¯ï¼š</li></ul><p>1.æ›´å¤šçš„é¡µé¢é™æ€åŒ–å¤„ç†</p><p>2.æ„å»ºå¤šçº§ç¼“å­˜æ¶æ„</p><p>â€‹    Nginxç¼“å­˜+redisç¼“å­˜+ehcacheç¼“å­˜</p><p>3.æ£€æµ‹Mysqlä¸¥é‡è€—æ—¶ä¸šåŠ¡è¿›è¡Œä¼˜åŒ–</p><p>â€‹    å¯¹æ•°æ®åº“çš„ç“¶é¢ˆæ’æŸ¥ï¼šä¾‹å¦‚è¶…æ—¶æŸ¥è¯¢ã€è€—æ—¶è¾ƒé«˜äº‹åŠ¡ç­‰</p><p>4.ç¾éš¾é¢„è­¦æœºåˆ¶</p><p>â€‹    ç›‘æ§redisæœåŠ¡å™¨æ€§èƒ½æŒ‡æ ‡</p><p>â€‹        CPUå ç”¨ã€CPUä½¿ç”¨ç‡</p><p>â€‹        å†…å­˜å®¹é‡</p><p>â€‹        æŸ¥è¯¢å¹³å‡å“åº”æ—¶é—´</p><p>â€‹        çº¿ç¨‹æ•°</p><p>5.é™æµã€é™çº§</p><p>çŸ­æ—¶é—´èŒƒå›´å†…ç‰ºç‰²ä¸€äº›å®¢æˆ·ä½“éªŒï¼Œé™åˆ¶ä¸€éƒ¨åˆ†è¯·æ±‚è®¿é—®ï¼Œé™ä½åº”ç”¨æœåŠ¡å™¨å‹åŠ›ï¼Œå¾…ä¸šåŠ¡ä½é€Ÿè¿è½¬åå†é€æ­¥æ”¾å¼€è®¿é—®</p><ul><li>è½åœ°å®è·µï¼š</li></ul><p>1.LRUä¸LFUåˆ‡æ¢</p><p>2.æ•°æ®æœ‰æ•ˆæœŸç­–ç•¥è°ƒæ•´</p><p>â€‹    æ ¹æ®ä¸šåŠ¡æ•°æ®æœ‰æ•ˆæœŸè¿›è¡Œåˆ†ç±»é”™å³°ï¼ŒAç±»90åˆ†é’Ÿï¼ŒBç±»80åˆ†é’Ÿï¼ŒCç±»70åˆ†é’Ÿ</p><p>â€‹    è¿‡æœŸæ—¶é—´ä½¿ç”¨å›ºå®šæ—¶é—´+éšæœºå€¼çš„å½¢å¼ï¼Œç¨€é‡Šé›†ä¸­åˆ°æœŸçš„keyçš„æ•°é‡</p><p>3.è¶…çƒ­æ•°æ®ä½¿ç”¨æ°¸ä¹…key</p><p>4.å®šæœŸç»´æŠ¤ï¼ˆè‡ªåŠ¨+äººå·¥ï¼‰</p><p>â€‹    å¯¹å³å°†è¿‡æœŸæ•°æ®åšè®¿é—®é‡åˆ†æï¼Œç¡®è®¤æ˜¯å¦å»¶æ—¶ï¼Œé…åˆè®¿é—®é‡ç»Ÿè®¡ï¼Œåšçƒ­ç‚¹æ•°æ®çš„å»¶æ—¶</p><p>5.åŠ é”ï¼šæ…ç”¨ï¼</p><p><strong>æ€»çš„æ¥è¯´</strong>ï¼šç¼“å­˜é›ªå´©å°±æ˜¯ç¬é—´è¿‡æœŸæ•°æ®é‡å¤ªå¤§ï¼Œå¯¼è‡´å¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚å¦‚èƒ½å¤Ÿæœ‰æ•ˆé¿å…è¿‡æœŸæ—¶é—´é›†ä¸­ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³é›ªå´©ç°è±¡çš„ å‡ºç°ï¼ˆçº¦40%ï¼‰ï¼Œé…åˆå…¶ä»–ç­–ç•¥ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ç›‘æ§æœåŠ¡å™¨çš„è¿è¡Œæ•°æ®ï¼Œæ ¹æ®è¿è¡Œè®°å½•åšå¿«é€Ÿè°ƒæ•´ã€‚</p><h3 id="5-3-ç¼“å­˜å‡»ç©¿"><a href="#5-3-ç¼“å­˜å‡»ç©¿" class="headerlink" title="5.3 ç¼“å­˜å‡»ç©¿"></a>5.3 ç¼“å­˜å‡»ç©¿</h3><p><strong>åœºæ™¯</strong>ï¼šè¿˜æ˜¯æ•°æ®åº“æœåŠ¡å™¨å´©æºƒï¼Œä½†æ˜¯è·Ÿä¹‹å‰çš„åœºæ™¯æœ‰ç‚¹ä¸å¤ªä¸€æ ·</p><p>1.ç³»ç»Ÿå¹³ç¨³è¿è¡Œè¿‡ç¨‹ä¸­</p><p>2.æ•°æ®åº“è¿æ¥é‡ç¬é—´æ¿€å¢</p><p>3.RedisæœåŠ¡å™¨æ— å¤§é‡keyè¿‡æœŸ</p><p>4.Rediså†…å­˜å¹³ç¨³ï¼Œæ— æ³¢åŠ¨</p><p>5.RedisæœåŠ¡å™¨CPUæ­£å¸¸</p><p>6.æ•°æ®åº“å´©æºƒ</p><p><strong>é—®é¢˜æ’æŸ¥ï¼š</strong></p><p>1.Redisä¸­æŸä¸ªkeyè¿‡æœŸï¼Œè¯¥keyè®¿é—®é‡å·¨å¤§</p><p>2.å¤šä¸ªæ•°æ®è¯·æ±‚ä»æœåŠ¡å™¨ç›´æ¥å‹åˆ°Redisåï¼Œå‡æœªå‘½ä¸­</p><p>3.Redisåœ¨çŸ­æ—¶é—´å†…å‘èµ·äº†å¤§é‡å¯¹æ•°æ®åº“ä¸­åŒä¸€æ•°æ®çš„è®¿é—®</p><p>æ€»è€Œè¨€ä¹‹å°±ä¸¤ç‚¹ï¼šå•ä¸ªkeyé«˜çƒ­æ•°æ®ï¼Œkeyè¿‡æœŸ</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><p>1.é¢„å…ˆè®¾å®š</p><p>â€‹    ä»¥ç”µå•†ä¸ºä¾‹ï¼Œæ¯ä¸ªå•†å®¶æ ¹æ®åº—é“ºç­‰çº§ï¼ŒæŒ‡å®šè‹¥å¹²æ¬¾ä¸»æ‰“å•†å“ï¼Œåœ¨è´­ç‰©èŠ‚æœŸé—´ï¼ŒåŠ å¤§æ­¤ç±»ä¿¡æ¯keyçš„è¿‡æœŸæ—¶é•¿ æ³¨æ„ï¼šè´­ç‰©èŠ‚ä¸ä»…ä»…æŒ‡å½“å¤©ï¼Œä»¥åŠåç»­è‹¥å¹²å¤©ï¼Œè®¿é—®å³°å€¼å‘ˆç°é€æ¸é™ä½çš„è¶‹åŠ¿</p><p>2.ç°åœºè°ƒæ•´</p><p>â€‹    ç›‘æ§è®¿é—®é‡ï¼Œå¯¹è‡ªç„¶æµé‡æ¿€å¢çš„æ•°æ®å»¶é•¿è¿‡æœŸæ—¶é—´æˆ–è®¾ç½®ä¸ºæ°¸ä¹…æ€§key</p><p>3.åå°åˆ·æ–°æ•°æ®</p><p>â€‹    å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼Œé«˜å³°æœŸæ¥ä¸´ä¹‹å‰ï¼Œåˆ·æ–°æ•°æ®æœ‰æ•ˆæœŸï¼Œç¡®ä¿ä¸ä¸¢å¤±</p><p>4.äºŒçº§ç¼“å­˜</p><p>â€‹    è®¾ç½®ä¸åŒçš„å¤±æ•ˆæ—¶é—´ï¼Œä¿éšœä¸ä¼šè¢«åŒæ—¶æ·˜æ±°å°±è¡Œ</p><p>5.åŠ é”</p><p>â€‹    åˆ†å¸ƒå¼é”ï¼Œé˜²æ­¢è¢«å‡»ç©¿ï¼Œä½†æ˜¯è¦æ³¨æ„ä¹Ÿæ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œæ…é‡ï¼</p><p><strong>æ€»çš„æ¥è¯´</strong>ï¼šç¼“å­˜å‡»ç©¿å°±æ˜¯å•ä¸ªé«˜çƒ­æ•°æ®è¿‡æœŸçš„ç¬é—´ï¼Œæ•°æ®è®¿é—®é‡è¾ƒå¤§ï¼Œæœªå‘½ä¸­redisåï¼Œå‘èµ·äº†å¤§é‡å¯¹åŒä¸€æ•°æ®çš„æ•°æ®åº“è®¿é—®ï¼Œå¯¼è‡´å¯¹æ•° æ®åº“æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚åº”å¯¹ç­–ç•¥åº”è¯¥åœ¨ä¸šåŠ¡æ•°æ®åˆ†æä¸é¢„é˜²æ–¹é¢è¿›è¡Œï¼Œé…åˆè¿è¡Œç›‘æ§æµ‹è¯•ä¸å³æ—¶è°ƒæ•´ç­–ç•¥ï¼Œæ¯•ç«Ÿå•ä¸ªkeyçš„è¿‡ æœŸç›‘æ§éš¾åº¦è¾ƒé«˜ï¼Œé…åˆé›ªå´©å¤„ç†ç­–ç•¥å³å¯ã€‚</p><h3 id="5-4-ç¼“å­˜ç©¿é€"><a href="#5-4-ç¼“å­˜ç©¿é€" class="headerlink" title="5.4 ç¼“å­˜ç©¿é€"></a>5.4 ç¼“å­˜ç©¿é€</h3><p><strong>åœºæ™¯</strong>ï¼šæ•°æ®åº“æœåŠ¡å™¨åˆå´©æºƒäº†ï¼Œè·Ÿä¹‹å‰çš„ä¸€æ ·å—ï¼Ÿ</p><p>1.ç³»ç»Ÿå¹³ç¨³è¿è¡Œè¿‡ç¨‹ä¸­</p><p>2.åº”ç”¨æœåŠ¡å™¨æµé‡éšæ—¶é—´å¢é‡è¾ƒå¤§</p><p>3.RedisæœåŠ¡å™¨å‘½ä¸­ç‡éšæ—¶é—´é€æ­¥é™ä½</p><p>4.Rediså†…å­˜å¹³ç¨³ï¼Œå†…å­˜æ— å‹åŠ›</p><p>5.RedisæœåŠ¡å™¨CPUå ç”¨æ¿€å¢</p><p>6.æ•°æ®åº“æœåŠ¡å™¨å‹åŠ›æ¿€å¢</p><p>7.æ•°æ®åº“å´©æºƒ</p><p><strong>é—®é¢˜æ’æŸ¥ï¼š</strong></p><p>1.Redisä¸­å¤§é¢ç§¯å‡ºç°æœªå‘½ä¸­</p><p>2.å‡ºç°éæ­£å¸¸URLè®¿é—®</p><p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p><ul><li>è·å–çš„æ•°æ®åœ¨æ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨ï¼Œæ•°æ®åº“æŸ¥è¯¢æœªå¾—åˆ°å¯¹åº”æ•°æ®</li><li>Redisè·å–åˆ°nullæ•°æ®æœªè¿›è¡ŒæŒä¹…åŒ–ï¼Œç›´æ¥è¿”å›</li><li>ä¸‹æ¬¡æ­¤ç±»æ•°æ®åˆ°è¾¾é‡å¤ä¸Šè¿°è¿‡ç¨‹</li><li>å‡ºç°é»‘å®¢æ”»å‡»æœåŠ¡å™¨</li></ul><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><p>1.ç¼“å­˜null</p><p>â€‹    å¯¹æŸ¥è¯¢ç»“æœä¸ºnullçš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼ˆé•¿æœŸä½¿ç”¨ï¼Œå®šæœŸæ¸…ç†ï¼‰ï¼Œè®¾å®šçŸ­æ—¶é™ï¼Œä¾‹å¦‚30-60ç§’ï¼Œæœ€é«˜5åˆ†é’Ÿ</p><p>2.ç™½åå•ç­–ç•¥</p><p>â€‹    æå‰é¢„çƒ­å„ç§åˆ†ç±»æ•°æ®idå¯¹åº”çš„bitmapsï¼Œidä½œä¸ºbitmapsçš„offsetï¼Œç›¸å½“äºè®¾ç½®äº†æ•°æ®ç™½åå•ã€‚å½“åŠ è½½æ­£å¸¸æ•°æ®æ—¶æ”¾è¡Œï¼ŒåŠ è½½å¼‚å¸¸æ•°æ®æ—¶ç›´æ¥æ‹¦æˆªï¼ˆæ•ˆç‡åä½ï¼‰</p><p>â€‹    ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆæœ‰å…³å¸ƒéš†è¿‡æ»¤å™¨çš„å‘½ä¸­é—®é¢˜å¯¹å½“å‰çŠ¶å†µå¯ä»¥å¿½ç•¥ï¼‰</p><p>2.å®æ–½ç›‘æ§</p><p>â€‹    å®æ—¶ç›‘æ§rediså‘½ä¸­ç‡ï¼ˆä¸šåŠ¡æ­£å¸¸èŒƒå›´æ—¶ï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ªæ³¢åŠ¨å€¼ï¼‰ä¸nullæ•°æ®çš„å æ¯”</p><p>â€‹        éæ´»åŠ¨æ—¶æ®µæ³¢åŠ¨ï¼šé€šå¸¸æ£€æµ‹3-5å€ï¼Œè¶…è¿‡5å€çº³å…¥é‡ç‚¹æ’æŸ¥å¯¹è±¡</p><p>â€‹        æ´»åŠ¨æ—¶æ®µæ³¢åŠ¨ï¼šé€šå¸¸æ£€æµ‹10-50å€ï¼Œè¶…è¿‡50å€çº³å…¥é‡ç‚¹æ’æŸ¥å¯¹è±¡</p><p>â€‹    æ ¹æ®å€æ•°ä¸åŒï¼Œå¯åŠ¨ä¸åŒçš„æ’æŸ¥æµç¨‹ã€‚ç„¶åä½¿ç”¨é»‘åå•è¿›è¡Œé˜²æ§ï¼ˆè¿è¥ï¼‰</p><p>4.keyåŠ å¯†</p><p>â€‹    é—®é¢˜å‡ºç°åï¼Œä¸´æ—¶å¯åŠ¨é˜²ç¾ä¸šåŠ¡keyï¼Œå¯¹keyè¿›è¡Œä¸šåŠ¡å±‚ä¼ è¾“åŠ å¯†æœåŠ¡ï¼Œè®¾å®šæ ¡éªŒç¨‹åºï¼Œè¿‡æ¥çš„keyæ ¡éªŒ</p><p>â€‹    ä¾‹å¦‚æ¯å¤©éšæœºåˆ†é…60ä¸ªåŠ å¯†ä¸²ï¼ŒæŒ‘é€‰2åˆ°3ä¸ªï¼Œæ··æ·†åˆ°é¡µé¢æ•°æ®idä¸­ï¼Œå‘ç°è®¿é—®keyä¸æ»¡è¶³è§„åˆ™ï¼Œé©³å›æ•°æ®è®¿é—®</p><p><strong>æ€»çš„æ¥è¯´</strong>ï¼šç¼“å­˜å‡»ç©¿æ˜¯æŒ‡è®¿é—®äº†ä¸å­˜åœ¨çš„æ•°æ®ï¼Œè·³è¿‡äº†åˆæ³•æ•°æ®çš„redisæ•°æ®ç¼“å­˜é˜¶æ®µï¼Œæ¯æ¬¡è®¿é—®æ•°æ®åº“ï¼Œå¯¼è‡´å¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚é€šå¸¸æ­¤ç±»æ•°æ®çš„å‡ºç°é‡æ˜¯ä¸€ä¸ªè¾ƒä½çš„å€¼ï¼Œå½“å‡ºç°æ­¤ç±»æƒ…å†µä»¥æ¯’æ”»æ¯’ï¼Œå¹¶åŠæ—¶æŠ¥è­¦ã€‚åº”å¯¹ç­–ç•¥åº”è¯¥åœ¨ä¸´æ—¶é¢„æ¡ˆé˜²èŒƒæ–¹é¢å¤šåšæ–‡ç« ã€‚</p><p>æ— è®ºæ˜¯é»‘åå•è¿˜æ˜¯ç™½åå•ï¼Œéƒ½æ˜¯å¯¹æ•´ä½“ç³»ç»Ÿçš„å‹åŠ›ï¼Œè­¦æŠ¥è§£é™¤åå°½å¿«ç§»é™¤ã€‚</p><h3 id="5-5-æ€§èƒ½æŒ‡æ ‡ç›‘æ§"><a href="#5-5-æ€§èƒ½æŒ‡æ ‡ç›‘æ§" class="headerlink" title="5.5 æ€§èƒ½æŒ‡æ ‡ç›‘æ§"></a>5.5 æ€§èƒ½æŒ‡æ ‡ç›‘æ§</h3><p>redisä¸­çš„ç›‘æ§æŒ‡æ ‡å¦‚ä¸‹ï¼š</p><ul><li>æ€§èƒ½æŒ‡æ ‡ï¼šPerformance</li></ul><blockquote><p>å“åº”è¯·æ±‚çš„å¹³å‡æ—¶é—´:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;latency</span><br></code></pre></td></tr></table></figure><p>å¹³å‡æ¯ç§’å¤„ç†è¯·æ±‚æ€»æ•°</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;instantaneous_ops_per_sec</span><br></code></pre></td></tr></table></figure><p>ç¼“å­˜æŸ¥è¯¢å‘½ä¸­ç‡ï¼ˆé€šè¿‡æŸ¥è¯¢æ€»æ¬¡æ•°ä¸æŸ¥è¯¢å¾—åˆ°énilæ•°æ®æ€»æ¬¡æ•°è®¡ç®—è€Œæ¥ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;hit_rate(calculated)</span><br><br></code></pre></td></tr></table></figure></blockquote><ul><li><p>å†…å­˜æŒ‡æ ‡ï¼šMemory</p><blockquote><p>å½“å‰å†…å­˜ä½¿ç”¨é‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;used_memory</span><br></code></pre></td></tr></table></figure><p>å†…å­˜ç¢ç‰‡ç‡ï¼ˆå…³ç³»åˆ°æ˜¯å¦è¿›è¡Œç¢ç‰‡æ•´ç†ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;mem_fragmentation_ratio</span><br></code></pre></td></tr></table></figure><p>ä¸ºé¿å…å†…å­˜æº¢å‡ºåˆ é™¤çš„keyçš„æ€»æ•°é‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;evicted_keys</span><br></code></pre></td></tr></table></figure><p>åŸºäºé˜»å¡æ“ä½œï¼ˆBLPOPç­‰ï¼‰å½±å“çš„å®¢æˆ·ç«¯æ•°é‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;blocked_clients</span><br></code></pre></td></tr></table></figure></blockquote></li><li><p>åŸºæœ¬æ´»åŠ¨æŒ‡æ ‡ï¼šBasic_activity</p></li></ul><blockquote><p>å½“å‰å®¢æˆ·ç«¯è¿æ¥æ€»æ•°</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;connected_clients</span><br></code></pre></td></tr></table></figure><p>å½“å‰è¿æ¥slaveæ€»æ•°</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;connected_slaves</span><br></code></pre></td></tr></table></figure><p>æœ€åä¸€æ¬¡ä¸»ä»ä¿¡æ¯äº¤æ¢è·ç°åœ¨çš„ç§’</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;master_last_io_seconds_ago</span><br></code></pre></td></tr></table></figure><p>keyçš„æ€»æ•°</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;keyspace</span><br></code></pre></td></tr></table></figure></blockquote><ul><li>æŒä¹…æ€§æŒ‡æ ‡ï¼šPersistence</li></ul><blockquote><p>å½“å‰æœåŠ¡å™¨æœ€åä¸€æ¬¡RDBæŒä¹…åŒ–çš„æ—¶é—´</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;rdb_last_save_time</span><br></code></pre></td></tr></table></figure><p>å½“å‰æœåŠ¡å™¨æœ€åä¸€æ¬¡RDBæŒä¹…åŒ–åæ•°æ®å˜åŒ–æ€»é‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;rdb_changes_since_last_save</span><br></code></pre></td></tr></table></figure></blockquote><ul><li>é”™è¯¯æŒ‡æ ‡ï¼šError</li></ul><blockquote><p>è¢«æ‹’ç»è¿æ¥çš„å®¢æˆ·ç«¯æ€»æ•°ï¼ˆåŸºäºè¾¾åˆ°æœ€å¤§è¿æ¥å€¼çš„å› ç´ ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;rejected_connections</span><br></code></pre></td></tr></table></figure><p>keyæœªå‘½ä¸­çš„æ€»æ¬¡æ•°</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;keyspace_misses</span><br></code></pre></td></tr></table></figure><p>ä¸»ä»æ–­å¼€çš„ç§’æ•°</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;master_link_down_since_seconds</span><br></code></pre></td></tr></table></figure></blockquote><p>è¦å¯¹redisçš„ç›¸å…³æŒ‡æ ‡è¿›è¡Œç›‘æ§ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€äº›ç”¨å…·ï¼š</p><ul><li>CloudInsight Redis</li><li>Prometheus</li><li>Redis-stat</li><li>Redis-faina</li><li>RedisLive</li><li>zabbix</li></ul><p>ä¹Ÿæœ‰ä¸€äº›å‘½ä»¤å·¥å…·ï¼š</p><ul><li>benchmark</li></ul><blockquote><p>æµ‹è¯•å½“å‰æœåŠ¡å™¨çš„å¹¶å‘æ€§èƒ½</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;redis-benchmark</span> <span class="hljs-string">[-h ] [-p ] [-c ] [-n &lt;requests]&gt; [-k ]</span><br></code></pre></td></tr></table></figure><p>èŒƒä¾‹1ï¼š50ä¸ªè¿æ¥ï¼Œ10000æ¬¡è¯·æ±‚å¯¹åº”çš„æ€§èƒ½</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;redis-benchmark</span><br></code></pre></td></tr></table></figure><p>èŒƒä¾‹2ï¼š100ä¸ªè¿æ¥ï¼Œ5000æ¬¡è¯·æ±‚å¯¹åº”çš„æ€§èƒ½</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;redis-benchmark</span> <span class="hljs-string">-c 100 -n 5000</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/06/e8ohLMzxv6GbW2I.png"></p></blockquote><ul><li><p>redis-cli</p><p>â€‹    monitorï¼šå¯åŠ¨æœåŠ¡å™¨è°ƒè¯•ä¿¡æ¯</p></li></ul><blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;monitor</span><br></code></pre></td></tr></table></figure></blockquote><pre><code class="hljs">  slowlogï¼šæ…¢æ—¥å¿—</code></pre><blockquote><p>è·å–æ…¢æŸ¥è¯¢æ—¥å¿—</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;slowlog</span> <span class="hljs-string">[operator]</span><br></code></pre></td></tr></table></figure><p>â€‹    get ï¼šè·å–æ…¢æŸ¥è¯¢æ—¥å¿—ä¿¡æ¯</p><p>â€‹    len ï¼šè·å–æ…¢æŸ¥è¯¢æ—¥å¿—æ¡ç›®æ•°</p><p>â€‹    reset ï¼šé‡ç½®æ…¢æŸ¥è¯¢æ—¥å¿—</p><p>ç›¸å…³é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">&gt;slowlog-log-slower-than</span> <span class="hljs-string">1000 #è®¾ç½®æ…¢æŸ¥è¯¢çš„æ—¶é—´ä¸‹çº¿ï¼Œå•ä½ï¼šå¾®å¦™</span><br><span class="hljs-attr">&gt;slowlog-max-len</span> <span class="hljs-string">100#è®¾ç½®æ…¢æŸ¥è¯¢å‘½ä»¤å¯¹åº”çš„æ—¥å¿—æ˜¾ç¤ºé•¿åº¦ï¼Œå•ä½ï¼šå‘½ä»¤æ•°</span><br></code></pre></td></tr></table></figure></blockquote>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¾®æœåŠ¡å¸¸è§é¢è¯•é¢˜</title>
    <link href="/Hexo/2022/03/04/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <url>/Hexo/2022/03/04/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="å¸¸è§é¢è¯•é¢˜"><a href="#å¸¸è§é¢è¯•é¢˜" class="headerlink" title="å¸¸è§é¢è¯•é¢˜"></a>å¸¸è§é¢è¯•é¢˜</h1><h1 id="1-å¾®æœåŠ¡ç¯‡"><a href="#1-å¾®æœåŠ¡ç¯‡" class="headerlink" title="1.å¾®æœåŠ¡ç¯‡"></a>1.å¾®æœåŠ¡ç¯‡</h1><h2 id="1-1-SpringCloudå¸¸è§ç»„ä»¶æœ‰å“ªäº›ï¼Ÿ"><a href="#1-1-SpringCloudå¸¸è§ç»„ä»¶æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="1.1.SpringCloudå¸¸è§ç»„ä»¶æœ‰å“ªäº›ï¼Ÿ"></a>1.1.SpringCloudå¸¸è§ç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</h2><p><strong>é—®é¢˜è¯´æ˜</strong>ï¼šè¿™ä¸ªé¢˜ç›®ä¸»è¦è€ƒå¯Ÿå¯¹SpringCloudçš„ç»„ä»¶åŸºæœ¬äº†è§£</p><p><strong>éš¾æ˜“ç¨‹åº¦</strong>ï¼šç®€å•</p><p><strong>å‚è€ƒè¯æœ¯</strong>ï¼š</p><p>SpringCloudåŒ…å«çš„ç»„ä»¶å¾ˆå¤šï¼Œæœ‰å¾ˆå¤šåŠŸèƒ½æ˜¯é‡å¤çš„ã€‚å…¶ä¸­æœ€å¸¸ç”¨ç»„ä»¶åŒ…æ‹¬ï¼š</p><p>â€¢æ³¨å†Œä¸­å¿ƒç»„ä»¶ï¼šEurekaã€Nacosç­‰</p><p>â€¢è´Ÿè½½å‡è¡¡ç»„ä»¶ï¼šRibbon</p><p>â€¢è¿œç¨‹è°ƒç”¨ç»„ä»¶ï¼šOpenFeign</p><p>â€¢ç½‘å…³ç»„ä»¶ï¼šZuulã€Gateway</p><p>â€¢æœåŠ¡ä¿æŠ¤ç»„ä»¶ï¼šHystrixã€Sentinel</p><p>â€¢æœåŠ¡é…ç½®ç®¡ç†ç»„ä»¶ï¼šSpringCloudConfigã€Nacos</p><h2 id="1-2-Nacosçš„æœåŠ¡æ³¨å†Œè¡¨ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#1-2-Nacosçš„æœåŠ¡æ³¨å†Œè¡¨ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="1.2.Nacosçš„æœåŠ¡æ³¨å†Œè¡¨ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ"></a>1.2.Nacosçš„æœåŠ¡æ³¨å†Œè¡¨ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ</h2><p><strong>é—®é¢˜è¯´æ˜</strong>ï¼šè€ƒå¯Ÿå¯¹Nacosæ•°æ®åˆ†çº§ç»“æ„çš„äº†è§£ï¼Œä»¥åŠNacosæºç çš„æŒæ¡æƒ…å†µ</p><p><strong>éš¾æ˜“ç¨‹åº¦</strong>ï¼šä¸€èˆ¬</p><p><strong>å‚è€ƒè¯æœ¯</strong>ï¼š</p><p>Nacosé‡‡ç”¨äº†æ•°æ®çš„åˆ†çº§å­˜å‚¨æ¨¡å‹ï¼Œæœ€å¤–å±‚æ˜¯Namespaceï¼Œç”¨æ¥éš”ç¦»ç¯å¢ƒã€‚ç„¶åæ˜¯Groupï¼Œç”¨æ¥å¯¹æœåŠ¡åˆ†ç»„ã€‚æ¥ä¸‹æ¥å°±æ˜¯æœåŠ¡ï¼ˆServiceï¼‰äº†ï¼Œä¸€ä¸ªæœåŠ¡åŒ…å«å¤šä¸ªå®ä¾‹ï¼Œä½†æ˜¯å¯èƒ½å¤„äºä¸åŒæœºæˆ¿ï¼Œå› æ­¤Serviceä¸‹æœ‰å¤šä¸ªé›†ç¾¤ï¼ˆClusterï¼‰ï¼ŒClusterä¸‹æ˜¯ä¸åŒçš„å®ä¾‹ï¼ˆInstanceï¼‰ã€‚</p><p>å¯¹åº”åˆ°Javaä»£ç ä¸­ï¼ŒNacosé‡‡ç”¨äº†ä¸€ä¸ªå¤šå±‚çš„Mapæ¥è¡¨ç¤ºã€‚ç»“æ„ä¸ºMap&lt;String, Map&lt;String, Service&gt;&gt;ï¼Œå…¶ä¸­æœ€å¤–å±‚Mapçš„keyå°±æ˜¯namespaceIdï¼Œå€¼æ˜¯ä¸€ä¸ªMapã€‚å†…å±‚Mapçš„keyæ˜¯groupæ‹¼æ¥serviceNameï¼Œå€¼æ˜¯Serviceå¯¹è±¡ã€‚Serviceå¯¹è±¡å†…éƒ¨åˆæ˜¯ä¸€ä¸ªMapï¼Œkeyæ˜¯é›†ç¾¤åç§°ï¼Œå€¼æ˜¯Clusterå¯¹è±¡ã€‚è€ŒClusterå¯¹è±¡å†…éƒ¨ç»´æŠ¤äº†Instanceçš„é›†åˆã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/q5fdnkyabj9Rl1c.png" alt="image-20210925215305446"></p><h2 id="1-3-Nacoså¦‚ä½•æ”¯æ’‘é˜¿é‡Œå†…éƒ¨æ•°åä¸‡æœåŠ¡æ³¨å†Œå‹åŠ›ï¼Ÿ"><a href="#1-3-Nacoså¦‚ä½•æ”¯æ’‘é˜¿é‡Œå†…éƒ¨æ•°åä¸‡æœåŠ¡æ³¨å†Œå‹åŠ›ï¼Ÿ" class="headerlink" title="1.3.Nacoså¦‚ä½•æ”¯æ’‘é˜¿é‡Œå†…éƒ¨æ•°åä¸‡æœåŠ¡æ³¨å†Œå‹åŠ›ï¼Ÿ"></a>1.3.Nacoså¦‚ä½•æ”¯æ’‘é˜¿é‡Œå†…éƒ¨æ•°åä¸‡æœåŠ¡æ³¨å†Œå‹åŠ›ï¼Ÿ</h2><p><strong>é—®é¢˜è¯´æ˜</strong>ï¼šè€ƒå¯Ÿå¯¹Nacosæºç çš„æŒæ¡æƒ…å†µ</p><p><strong>éš¾æ˜“ç¨‹åº¦</strong>ï¼šéš¾</p><p><strong>å‚è€ƒè¯æœ¯</strong>ï¼š</p><p>Nacoså†…éƒ¨æ¥æ”¶åˆ°æ³¨å†Œçš„è¯·æ±‚æ—¶ï¼Œä¸ä¼šç«‹å³å†™æ•°æ®ï¼Œè€Œæ˜¯å°†æœåŠ¡æ³¨å†Œçš„ä»»åŠ¡æ”¾å…¥ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—å°±ç«‹å³å“åº”ç»™å®¢æˆ·ç«¯ã€‚ç„¶ååˆ©ç”¨çº¿ç¨‹æ± è¯»å–é˜»å¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œå¼‚æ­¥æ¥å®Œæˆå®ä¾‹æ›´æ–°ï¼Œä»è€Œæé«˜å¹¶å‘å†™èƒ½åŠ›ã€‚</p><h2 id="1-4-Nacoså¦‚ä½•é¿å…å¹¶å‘è¯»å†™å†²çªé—®é¢˜ï¼Ÿ"><a href="#1-4-Nacoså¦‚ä½•é¿å…å¹¶å‘è¯»å†™å†²çªé—®é¢˜ï¼Ÿ" class="headerlink" title="1.4.Nacoså¦‚ä½•é¿å…å¹¶å‘è¯»å†™å†²çªé—®é¢˜ï¼Ÿ"></a>1.4.Nacoså¦‚ä½•é¿å…å¹¶å‘è¯»å†™å†²çªé—®é¢˜ï¼Ÿ</h2><p><strong>é—®é¢˜è¯´æ˜</strong>ï¼šè€ƒå¯Ÿå¯¹Nacosæºç çš„æŒæ¡æƒ…å†µ</p><p><strong>éš¾æ˜“ç¨‹åº¦</strong>ï¼šéš¾</p><p><strong>å‚è€ƒè¯æœ¯</strong>ï¼š</p><p>Nacosåœ¨æ›´æ–°å®ä¾‹åˆ—è¡¨æ—¶ï¼Œä¼šé‡‡ç”¨CopyOnWriteæŠ€æœ¯ï¼Œé¦–å…ˆå°†æ—§çš„å®ä¾‹åˆ—è¡¨æ‹·è´ä¸€ä»½ï¼Œç„¶åæ›´æ–°æ‹·è´çš„å®ä¾‹åˆ—è¡¨ï¼Œå†ç”¨æ›´æ–°åçš„å®ä¾‹åˆ—è¡¨æ¥è¦†ç›–æ—§çš„å®ä¾‹åˆ—è¡¨ã€‚</p><p>è¿™æ ·åœ¨æ›´æ–°çš„è¿‡ç¨‹ä¸­ï¼Œå°±ä¸ä¼šå¯¹è¯»å®ä¾‹åˆ—è¡¨çš„è¯·æ±‚äº§ç”Ÿå½±å“ï¼Œä¹Ÿä¸ä¼šå‡ºç°è„è¯»é—®é¢˜äº†ã€‚</p><h2 id="1-5-Nacosä¸Eurekaçš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ"><a href="#1-5-Nacosä¸Eurekaçš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="1.5.Nacosä¸Eurekaçš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ"></a>1.5.Nacosä¸Eurekaçš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</h2><p><strong>é—®é¢˜è¯´æ˜</strong>ï¼šè€ƒå¯Ÿå¯¹Nacosã€Eurekaçš„åº•å±‚å®ç°çš„æŒæ¡æƒ…å†µ</p><p><strong>éš¾æ˜“ç¨‹åº¦</strong>ï¼šéš¾</p><p><strong>å‚è€ƒè¯æœ¯</strong>ï¼š</p><p>Nacosä¸Eurekaæœ‰ç›¸åŒç‚¹ï¼Œä¹Ÿæœ‰ä¸åŒä¹‹å¤„ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ç‚¹æ¥æè¿°ï¼š</p><ul><li><strong>æ¥å£æ–¹å¼</strong>ï¼šNacosä¸Eurekaéƒ½å¯¹å¤–æš´éœ²äº†Resté£æ ¼çš„APIæ¥å£ï¼Œç”¨æ¥å®ç°æœåŠ¡æ³¨å†Œã€å‘ç°ç­‰åŠŸèƒ½</li><li><strong>å®ä¾‹ç±»å‹</strong>ï¼šNacosçš„å®ä¾‹æœ‰æ°¸ä¹…å’Œä¸´æ—¶å®ä¾‹ä¹‹åˆ†ï¼›è€ŒEurekaåªæ”¯æŒä¸´æ—¶å®ä¾‹</li><li><strong>å¥åº·æ£€æµ‹</strong>ï¼šNacoså¯¹ä¸´æ—¶å®ä¾‹é‡‡ç”¨å¿ƒè·³æ¨¡å¼æ£€æµ‹ï¼Œå¯¹æ°¸ä¹…å®ä¾‹é‡‡ç”¨ä¸»åŠ¨è¯·æ±‚æ¥æ£€æµ‹ï¼›Eurekaåªæ”¯æŒå¿ƒè·³æ¨¡å¼</li><li><strong>æœåŠ¡å‘ç°</strong>ï¼šNacosæ”¯æŒå®šæ—¶æ‹‰å–å’Œè®¢é˜…æ¨é€ä¸¤ç§æ¨¡å¼ï¼›Eurekaåªæ”¯æŒå®šæ—¶æ‹‰å–æ¨¡å¼</li></ul><h2 id="1-6-Sentinelçš„é™æµä¸Gatewayçš„é™æµæœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ"><a href="#1-6-Sentinelçš„é™æµä¸Gatewayçš„é™æµæœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ" class="headerlink" title="1.6.Sentinelçš„é™æµä¸Gatewayçš„é™æµæœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ"></a>1.6.Sentinelçš„é™æµä¸Gatewayçš„é™æµæœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ</h2><p><strong>é—®é¢˜è¯´æ˜</strong>ï¼šè€ƒå¯Ÿå¯¹é™æµç®—æ³•çš„æŒæ¡æƒ…å†µ</p><p><strong>éš¾æ˜“ç¨‹åº¦</strong>ï¼šéš¾</p><p><strong>å‚è€ƒè¯æœ¯</strong>ï¼š</p><p>é™æµç®—æ³•å¸¸è§çš„æœ‰ä¸‰ç§å®ç°ï¼šæ»‘åŠ¨æ—¶é—´çª—å£ã€ä»¤ç‰Œæ¡¶ç®—æ³•ã€æ¼æ¡¶ç®—æ³•ã€‚Gatewayåˆ™é‡‡ç”¨äº†åŸºäºRediså®ç°çš„ä»¤ç‰Œæ¡¶ç®—æ³•ã€‚</p><p>è€ŒSentinelå†…éƒ¨å´æ¯”è¾ƒå¤æ‚ï¼š</p><ul><li>é»˜è®¤é™æµæ¨¡å¼æ˜¯åŸºäºæ»‘åŠ¨æ—¶é—´çª—å£ç®—æ³•</li><li>æ’é˜Ÿç­‰å¾…çš„é™æµæ¨¡å¼åˆ™åŸºäºæ¼æ¡¶ç®—æ³•</li><li>è€Œçƒ­ç‚¹å‚æ•°é™æµåˆ™æ˜¯åŸºäºä»¤ç‰Œæ¡¶ç®—æ³•</li></ul><h2 id="1-7-Sentinelçš„çº¿ç¨‹éš”ç¦»ä¸Hystixçš„çº¿ç¨‹éš”ç¦»æœ‰ä»€ä¹ˆå·®åˆ«"><a href="#1-7-Sentinelçš„çº¿ç¨‹éš”ç¦»ä¸Hystixçš„çº¿ç¨‹éš”ç¦»æœ‰ä»€ä¹ˆå·®åˆ«" class="headerlink" title="1.7.Sentinelçš„çº¿ç¨‹éš”ç¦»ä¸Hystixçš„çº¿ç¨‹éš”ç¦»æœ‰ä»€ä¹ˆå·®åˆ«?"></a>1.7.Sentinelçš„çº¿ç¨‹éš”ç¦»ä¸Hystixçš„çº¿ç¨‹éš”ç¦»æœ‰ä»€ä¹ˆå·®åˆ«?</h2><p><strong>é—®é¢˜è¯´æ˜</strong>ï¼šè€ƒå¯Ÿå¯¹çº¿ç¨‹éš”ç¦»æ–¹æ¡ˆçš„æŒæ¡æƒ…å†µ</p><p><strong>éš¾æ˜“ç¨‹åº¦</strong>ï¼šä¸€èˆ¬</p><p><strong>å‚è€ƒè¯æœ¯</strong>ï¼š</p><p>Hystixé»˜è®¤æ˜¯åŸºäºçº¿ç¨‹æ± å®ç°çš„çº¿ç¨‹éš”ç¦»ï¼Œæ¯ä¸€ä¸ªè¢«éš”ç¦»çš„ä¸šåŠ¡éƒ½è¦åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æ± ï¼Œçº¿ç¨‹è¿‡å¤šä¼šå¸¦æ¥é¢å¤–çš„CPUå¼€é”€ï¼Œæ€§èƒ½ä¸€èˆ¬ï¼Œä½†æ˜¯éš”ç¦»æ€§æ›´å¼ºã€‚</p><p>Sentinelæ˜¯åŸºäºä¿¡å·é‡ï¼ˆè®¡æ•°å™¨ï¼‰å®ç°çš„çº¿ç¨‹éš”ç¦»ï¼Œä¸ç”¨åˆ›å»ºçº¿ç¨‹æ± ï¼Œæ€§èƒ½è¾ƒå¥½ï¼Œä½†æ˜¯éš”ç¦»æ€§ä¸€èˆ¬ã€‚</p><h1 id="2-MQç¯‡"><a href="#2-MQç¯‡" class="headerlink" title="2.MQç¯‡"></a>2.MQç¯‡</h1><h2 id="2-1-ä½ ä»¬ä¸ºä»€ä¹ˆé€‰æ‹©äº†RabbitMQè€Œä¸æ˜¯å…¶å®ƒçš„MQï¼Ÿ"><a href="#2-1-ä½ ä»¬ä¸ºä»€ä¹ˆé€‰æ‹©äº†RabbitMQè€Œä¸æ˜¯å…¶å®ƒçš„MQï¼Ÿ" class="headerlink" title="2.1.ä½ ä»¬ä¸ºä»€ä¹ˆé€‰æ‹©äº†RabbitMQè€Œä¸æ˜¯å…¶å®ƒçš„MQï¼Ÿ"></a>2.1.ä½ ä»¬ä¸ºä»€ä¹ˆé€‰æ‹©äº†RabbitMQè€Œä¸æ˜¯å…¶å®ƒçš„MQï¼Ÿ</h2><p>å¦‚å›¾ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/SPpDg2iYIVC5kOc.png" alt="image-20210925220034702"></p><p><strong>è¯æœ¯ï¼š</strong></p><p>kafkaæ˜¯ä»¥ååé‡é«˜è€Œé—»åï¼Œä¸è¿‡å…¶æ•°æ®ç¨³å®šæ€§ä¸€èˆ¬ï¼Œè€Œä¸”æ— æ³•ä¿è¯æ¶ˆæ¯æœ‰åºæ€§ã€‚æˆ‘ä»¬å…¬å¸çš„æ—¥å¿—æ”¶é›†ä¹Ÿæœ‰ä½¿ç”¨ï¼Œä¸šåŠ¡æ¨¡å—ä¸­åˆ™ä½¿ç”¨çš„RabbitMQã€‚</p><p>é˜¿é‡Œå·´å·´çš„RocketMQåŸºäºKafkaçš„åŸç†ï¼Œå¼¥è¡¥äº†Kafkaçš„ç¼ºç‚¹ï¼Œç»§æ‰¿äº†å…¶é«˜ååçš„ä¼˜åŠ¿ï¼Œå…¶å®¢æˆ·ç«¯ç›®å‰ä»¥Javaä¸ºä¸»ã€‚ä½†æ˜¯æˆ‘ä»¬æ‹…å¿ƒé˜¿é‡Œå·´å·´å¼€æºäº§å“çš„ç¨³å®šæ€§ï¼Œæ‰€ä»¥å°±æ²¡æœ‰ä½¿ç”¨ã€‚</p><p>RabbitMQåŸºäºé¢å‘å¹¶å‘çš„è¯­è¨€Erlangå¼€å‘ï¼Œååé‡ä¸å¦‚Kafkaï¼Œä½†æ˜¯å¯¹æˆ‘ä»¬å…¬å¸æ¥è®²å¤Ÿç”¨äº†ã€‚è€Œä¸”æ¶ˆæ¯å¯é æ€§è¾ƒå¥½ï¼Œå¹¶ä¸”æ¶ˆæ¯å»¶è¿Ÿæä½ï¼Œé›†ç¾¤æ­å»ºæ¯”è¾ƒæ–¹ä¾¿ã€‚æ”¯æŒå¤šç§åè®®ï¼Œå¹¶ä¸”æœ‰å„ç§è¯­è¨€çš„å®¢æˆ·ç«¯ï¼Œæ¯”è¾ƒçµæ´»ã€‚Springå¯¹RabbitMQçš„æ”¯æŒä¹Ÿæ¯”è¾ƒå¥½ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œæ¯”è¾ƒç¬¦åˆæˆ‘ä»¬å…¬å¸çš„éœ€æ±‚ã€‚</p><p>ç»¼åˆè€ƒè™‘æˆ‘ä»¬å…¬å¸çš„å¹¶å‘éœ€æ±‚ä»¥åŠç¨³å®šæ€§éœ€æ±‚ï¼Œæˆ‘ä»¬é€‰æ‹©äº†RabbitMQã€‚</p><h2 id="2-2-RabbitMQå¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„ä¸ä¸¢å¤±ï¼Ÿ"><a href="#2-2-RabbitMQå¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„ä¸ä¸¢å¤±ï¼Ÿ" class="headerlink" title="2.2.RabbitMQå¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„ä¸ä¸¢å¤±ï¼Ÿ"></a>2.2.RabbitMQå¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„ä¸ä¸¢å¤±ï¼Ÿ</h2><p><strong>è¯æœ¯ï¼š</strong></p><p>RabbitMQé’ˆå¯¹æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­å¯èƒ½å‘ç”Ÿé—®é¢˜çš„å„ä¸ªåœ°æ–¹ï¼Œç»™å‡ºäº†é’ˆå¯¹æ€§çš„è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶å¯èƒ½å› ä¸ºç½‘ç»œé—®é¢˜å¯¼è‡´æ¶ˆæ¯æ²¡æœ‰åˆ°è¾¾äº¤æ¢æœºï¼š<ul><li>RabbitMQæä¾›äº†publisher confirmæœºåˆ¶<ul><li>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åï¼Œå¯ä»¥ç¼–å†™ConfirmCallbackå‡½æ•°</li><li>æ¶ˆæ¯æˆåŠŸåˆ°è¾¾äº¤æ¢æœºåï¼ŒRabbitMQä¼šè°ƒç”¨ConfirmCallbacké€šçŸ¥æ¶ˆæ¯çš„å‘é€è€…ï¼Œè¿”å›ACK</li><li>æ¶ˆæ¯å¦‚æœæœªåˆ°è¾¾äº¤æ¢æœºï¼ŒRabbitMQä¹Ÿä¼šè°ƒç”¨ConfirmCallbacké€šçŸ¥æ¶ˆæ¯çš„å‘é€è€…ï¼Œè¿”å›NACK</li><li>æ¶ˆæ¯è¶…æ—¶æœªå‘é€æˆåŠŸä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸</li></ul></li></ul></li><li>æ¶ˆæ¯åˆ°è¾¾äº¤æ¢æœºåï¼Œå¦‚æœæœªèƒ½åˆ°è¾¾é˜Ÿåˆ—ï¼Œä¹Ÿä¼šå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼š<ul><li>RabbitMQæä¾›äº†publisher returnæœºåˆ¶<ul><li>ç”Ÿäº§è€…å¯ä»¥å®šä¹‰ReturnCallbackå‡½æ•°</li><li>æ¶ˆæ¯åˆ°è¾¾äº¤æ¢æœºï¼Œæœªåˆ°è¾¾é˜Ÿåˆ—ï¼ŒRabbitMQä¼šè°ƒç”¨ReturnCallbacké€šçŸ¥å‘é€è€…ï¼Œå‘ŠçŸ¥å¤±è´¥åŸå› </li></ul></li></ul></li><li>æ¶ˆæ¯åˆ°è¾¾é˜Ÿåˆ—åï¼ŒMQå®•æœºä¹Ÿå¯èƒ½å¯¼è‡´ä¸¢å¤±æ¶ˆæ¯ï¼š<ul><li>RabbitMQæä¾›äº†æŒä¹…åŒ–åŠŸèƒ½ï¼Œé›†ç¾¤çš„ä¸»ä»å¤‡ä»½åŠŸèƒ½<ul><li>æ¶ˆæ¯æŒä¹…åŒ–ï¼ŒRabbitMQä¼šå°†äº¤æ¢æœºã€é˜Ÿåˆ—ã€æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå®•æœºé‡å¯å¯ä»¥æ¢å¤æ¶ˆæ¯</li><li>é•œåƒé›†ç¾¤ï¼Œä»²è£é˜Ÿåˆ—ï¼Œéƒ½å¯ä»¥æä¾›ä¸»ä»å¤‡ä»½åŠŸèƒ½ï¼Œä¸»èŠ‚ç‚¹å®•æœºï¼Œä»èŠ‚ç‚¹ä¼šè‡ªåŠ¨åˆ‡æ¢ä¸ºä¸»ï¼Œæ•°æ®ä¾ç„¶åœ¨</li></ul></li></ul></li><li>æ¶ˆæ¯æŠ•é€’ç»™æ¶ˆè´¹è€…åï¼Œå¦‚æœæ¶ˆè´¹è€…å¤„ç†ä¸å½“ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±<ul><li>SpringAMQPåŸºäºRabbitMQæä¾›äº†æ¶ˆè´¹è€…ç¡®è®¤æœºåˆ¶ã€æ¶ˆè´¹è€…é‡è¯•æœºåˆ¶ï¼Œæ¶ˆè´¹è€…å¤±è´¥å¤„ç†ç­–ç•¥ï¼š<ul><li>æ¶ˆè´¹è€…çš„ç¡®è®¤æœºåˆ¶ï¼š<ul><li>æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯æˆåŠŸï¼Œæœªå‡ºç°å¼‚å¸¸æ—¶ï¼ŒSpringè¿”å›ACKç»™RabbitMQï¼Œæ¶ˆæ¯æ‰è¢«ç§»é™¤</li><li>æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå®•æœºï¼ŒSpringè¿”å›NACKæˆ–è€…ä¸è¿”å›ç»“æœï¼Œæ¶ˆæ¯ä¸è¢«å¼‚å¸¸</li></ul></li><li>æ¶ˆè´¹è€…é‡è¯•æœºåˆ¶ï¼š<ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹è€…å¤„ç†å¤±è´¥æ—¶ï¼Œæ¶ˆæ¯ä¼šå†æ¬¡å›åˆ°MQé˜Ÿåˆ—ï¼Œç„¶åæŠ•é€’ç»™å…¶å®ƒæ¶ˆè´¹è€…ã€‚Springæä¾›çš„æ¶ˆè´¹è€…é‡è¯•æœºåˆ¶ï¼Œåˆ™æ˜¯åœ¨å¤„ç†å¤±è´¥åä¸è¿”å›NACKï¼Œè€Œæ˜¯ç›´æ¥åœ¨æ¶ˆè´¹è€…æœ¬åœ°é‡è¯•ã€‚å¤šæ¬¡é‡è¯•éƒ½å¤±è´¥åï¼Œåˆ™æŒ‰ç…§æ¶ˆè´¹è€…å¤±è´¥å¤„ç†ç­–ç•¥æ¥å¤„ç†æ¶ˆæ¯ã€‚é¿å…äº†æ¶ˆæ¯é¢‘ç¹å…¥é˜Ÿå¸¦æ¥çš„é¢å¤–å‹åŠ›ã€‚</li></ul></li><li>æ¶ˆè´¹è€…å¤±è´¥ç­–ç•¥ï¼š<ul><li>å½“æ¶ˆè´¹è€…å¤šæ¬¡æœ¬åœ°é‡è¯•å¤±è´¥æ—¶ï¼Œæ¶ˆæ¯é»˜è®¤ä¼šä¸¢å¼ƒã€‚</li><li>Springæä¾›äº†Republishç­–ç•¥ï¼Œåœ¨å¤šæ¬¡é‡è¯•éƒ½å¤±è´¥ï¼Œè€—å°½é‡è¯•æ¬¡æ•°åï¼Œå°†æ¶ˆæ¯é‡æ–°æŠ•é€’ç»™æŒ‡å®šçš„å¼‚å¸¸äº¤æ¢æœºï¼Œå¹¶ä¸”ä¼šæºå¸¦ä¸Šå¼‚å¸¸æ ˆä¿¡æ¯ï¼Œå¸®åŠ©å®šä½é—®é¢˜ã€‚</li></ul></li></ul></li></ul></li></ul><h2 id="2-3-RabbitMQå¦‚ä½•é¿å…æ¶ˆæ¯å †ç§¯ï¼Ÿ"><a href="#2-3-RabbitMQå¦‚ä½•é¿å…æ¶ˆæ¯å †ç§¯ï¼Ÿ" class="headerlink" title="2.3.RabbitMQå¦‚ä½•é¿å…æ¶ˆæ¯å †ç§¯ï¼Ÿ"></a>2.3.RabbitMQå¦‚ä½•é¿å…æ¶ˆæ¯å †ç§¯ï¼Ÿ</h2><p><strong>è¯æœ¯ï¼š</strong></p><p>æ¶ˆæ¯å †ç§¯é—®é¢˜äº§ç”Ÿçš„åŸå› å¾€å¾€æ˜¯å› ä¸ºæ¶ˆæ¯å‘é€çš„é€Ÿåº¦è¶…è¿‡äº†æ¶ˆè´¹è€…æ¶ˆæ¯å¤„ç†çš„é€Ÿåº¦ã€‚å› æ­¤è§£å†³æ–¹æ¡ˆæ— å¤–ä¹ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ul><li>æé«˜æ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦</li><li>å¢åŠ æ›´å¤šæ¶ˆè´¹è€…</li><li>å¢åŠ é˜Ÿåˆ—æ¶ˆæ¯å­˜å‚¨ä¸Šé™</li></ul><p>1ï¼‰æé«˜æ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦</p><p>æ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦æ˜¯ç”±ä¸šåŠ¡ä»£ç å†³å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½åšçš„äº‹æƒ…åŒ…æ‹¬ï¼š</p><ul><li>å°½å¯èƒ½ä¼˜åŒ–ä¸šåŠ¡ä»£ç ï¼Œæé«˜ä¸šåŠ¡æ€§èƒ½</li><li>æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œå¼€å¯çº¿ç¨‹æ± ï¼Œå¹¶å‘å¤„ç†å¤šä¸ªæ¶ˆæ¯</li></ul><p>ä¼˜ç‚¹ï¼šæˆæœ¬ä½ï¼Œæ”¹æ”¹ä»£ç å³å¯</p><p>ç¼ºç‚¹ï¼šå¼€å¯çº¿ç¨‹æ± ä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼Œå¯¹äºé«˜é¢‘ã€ä½æ—¶å»¶çš„ä»»åŠ¡ä¸åˆé€‚ã€‚æ¨èä»»åŠ¡æ‰§è¡Œå‘¨æœŸè¾ƒé•¿çš„ä¸šåŠ¡ã€‚</p><p>2ï¼‰å¢åŠ æ›´å¤šæ¶ˆè´¹è€…</p><p>ä¸€ä¸ªé˜Ÿåˆ—ç»‘å®šå¤šä¸ªæ¶ˆè´¹è€…ï¼Œå…±åŒäº‰æŠ¢ä»»åŠ¡ï¼Œè‡ªç„¶å¯ä»¥æä¾›æ¶ˆæ¯å¤„ç†çš„é€Ÿåº¦ã€‚</p><p>ä¼˜ç‚¹ï¼šèƒ½ç”¨é’±è§£å†³çš„é—®é¢˜éƒ½ä¸æ˜¯é—®é¢˜ã€‚å®ç°ç®€å•ç²—æš´</p><p>ç¼ºç‚¹ï¼šé—®é¢˜æ˜¯æ²¡æœ‰é’±ã€‚æˆæœ¬å¤ªé«˜</p><p>3ï¼‰å¢åŠ é˜Ÿåˆ—æ¶ˆæ¯å­˜å‚¨ä¸Šé™</p><p>åœ¨RabbitMQçš„1.8ç‰ˆæœ¬åï¼ŒåŠ å…¥äº†æ–°çš„é˜Ÿåˆ—æ¨¡å¼ï¼šLazy Queue</p><p>è¿™ç§é˜Ÿåˆ—ä¸ä¼šå°†æ¶ˆæ¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯åœ¨æ”¶åˆ°æ¶ˆæ¯åç›´æ¥å†™å…¥ç£ç›˜ä¸­ï¼Œç†è®ºä¸Šæ²¡æœ‰å­˜å‚¨ä¸Šé™ã€‚å¯ä»¥è§£å†³æ¶ˆæ¯å †ç§¯é—®é¢˜ã€‚</p><p>ä¼˜ç‚¹ï¼šç£ç›˜å­˜å‚¨æ›´å®‰å…¨ï¼›å­˜å‚¨æ— ä¸Šé™ï¼›é¿å…å†…å­˜å­˜å‚¨å¸¦æ¥çš„Page Outé—®é¢˜ï¼Œæ€§èƒ½æ›´ç¨³å®šï¼›</p><p>ç¼ºç‚¹ï¼šç£ç›˜å­˜å‚¨å—åˆ°IOæ€§èƒ½çš„é™åˆ¶ï¼Œæ¶ˆæ¯æ—¶æ•ˆæ€§ä¸å¦‚å†…å­˜æ¨¡å¼ï¼Œä½†å½±å“ä¸å¤§ã€‚</p><h2 id="2-4-RabbitMQå¦‚ä½•ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Ÿ"><a href="#2-4-RabbitMQå¦‚ä½•ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Ÿ" class="headerlink" title="2.4.RabbitMQå¦‚ä½•ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Ÿ"></a>2.4.RabbitMQå¦‚ä½•ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Ÿ</h2><p><strong>è¯æœ¯ï¼š</strong></p><p>å…¶å®RabbitMQæ˜¯é˜Ÿåˆ—å­˜å‚¨ï¼Œå¤©ç„¶å…·å¤‡å…ˆè¿›å…ˆå‡ºçš„ç‰¹ç‚¹ï¼Œåªè¦æ¶ˆæ¯çš„å‘é€æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆç†è®ºä¸Šæ¥æ”¶ä¹Ÿæ˜¯æœ‰åºçš„ã€‚ä¸è¿‡å½“ä¸€ä¸ªé˜Ÿåˆ—ç»‘å®šäº†å¤šä¸ªæ¶ˆè´¹è€…æ—¶ï¼Œå¯èƒ½å‡ºç°æ¶ˆæ¯è½®è¯¢æŠ•é€’ç»™æ¶ˆè´¹è€…çš„æƒ…å†µï¼Œè€Œæ¶ˆè´¹è€…çš„å¤„ç†é¡ºåºå°±æ— æ³•ä¿è¯äº†ã€‚</p><p>å› æ­¤ï¼Œè¦ä¿è¯æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Œéœ€è¦åšçš„ä¸‹é¢å‡ ç‚¹ï¼š</p><ul><li>ä¿è¯æ¶ˆæ¯å‘é€çš„æœ‰åºæ€§</li><li>ä¿è¯ä¸€ç»„æœ‰åºçš„æ¶ˆæ¯éƒ½å‘é€åˆ°åŒä¸€ä¸ªé˜Ÿåˆ—</li><li>ä¿è¯ä¸€ä¸ªé˜Ÿåˆ—åªåŒ…å«ä¸€ä¸ªæ¶ˆè´¹è€…</li></ul><h2 id="2-5-å¦‚ä½•é˜²æ­¢MQæ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ï¼Ÿ"><a href="#2-5-å¦‚ä½•é˜²æ­¢MQæ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ï¼Ÿ" class="headerlink" title="2.5.å¦‚ä½•é˜²æ­¢MQæ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ï¼Ÿ"></a>2.5.å¦‚ä½•é˜²æ­¢MQæ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ï¼Ÿ</h2><p><strong>è¯æœ¯ï¼š</strong></p><p>æ¶ˆæ¯é‡å¤æ¶ˆè´¹çš„åŸå› å¤šç§å¤šæ ·ï¼Œä¸å¯é¿å…ã€‚æ‰€ä»¥åªèƒ½ä»æ¶ˆè´¹è€…ç«¯å…¥æ‰‹ï¼Œåªè¦èƒ½ä¿è¯æ¶ˆæ¯å¤„ç†çš„å¹‚ç­‰æ€§å°±å¯ä»¥ç¡®ä¿æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹ã€‚</p><p>è€Œå¹‚ç­‰æ€§çš„ä¿è¯åˆæœ‰å¾ˆå¤šæ–¹æ¡ˆï¼š</p><ul><li>ç»™æ¯ä¸€æ¡æ¶ˆæ¯éƒ½æ·»åŠ ä¸€ä¸ªå”¯ä¸€idï¼Œåœ¨æœ¬åœ°è®°å½•æ¶ˆæ¯è¡¨åŠæ¶ˆæ¯çŠ¶æ€ï¼Œå¤„ç†æ¶ˆæ¯æ—¶åŸºäºæ•°æ®åº“è¡¨çš„idå”¯ä¸€æ€§åšåˆ¤æ–­</li><li>åŒæ ·æ˜¯è®°å½•æ¶ˆæ¯è¡¨ï¼Œåˆ©ç”¨æ¶ˆæ¯çŠ¶æ€å­—æ®µå®ç°åŸºäºä¹è§‚é”çš„åˆ¤æ–­ï¼Œä¿è¯å¹‚ç­‰</li><li>åŸºäºä¸šåŠ¡æœ¬èº«çš„å¹‚ç­‰æ€§ã€‚æ¯”å¦‚æ ¹æ®idçš„åˆ é™¤ã€æŸ¥è¯¢ä¸šåŠ¡å¤©ç”Ÿå¹‚ç­‰ï¼›æ–°å¢ã€ä¿®æ”¹ç­‰ä¸šåŠ¡å¯ä»¥è€ƒè™‘åŸºäºæ•°æ®åº“idå”¯ä¸€æ€§ã€æˆ–è€…ä¹è§‚é”æœºåˆ¶ç¡®ä¿å¹‚ç­‰ã€‚æœ¬è´¨ä¸æ¶ˆæ¯è¡¨æ–¹æ¡ˆç±»ä¼¼ã€‚</li></ul><h2 id="2-6-å¦‚ä½•ä¿è¯RabbitMQçš„é«˜å¯ç”¨ï¼Ÿ"><a href="#2-6-å¦‚ä½•ä¿è¯RabbitMQçš„é«˜å¯ç”¨ï¼Ÿ" class="headerlink" title="2.6.å¦‚ä½•ä¿è¯RabbitMQçš„é«˜å¯ç”¨ï¼Ÿ"></a>2.6.å¦‚ä½•ä¿è¯RabbitMQçš„é«˜å¯ç”¨ï¼Ÿ</h2><p><strong>è¯æœ¯ï¼š</strong></p><p>è¦å®ç°RabbitMQçš„é«˜å¯ç”¨æ— å¤–ä¹ä¸‹é¢ä¸¤ç‚¹ï¼š</p><ul><li>åšå¥½äº¤æ¢æœºã€é˜Ÿåˆ—ã€æ¶ˆæ¯çš„æŒä¹…åŒ–</li><li>æ­å»ºRabbitMQçš„é•œåƒé›†ç¾¤ï¼Œåšå¥½ä¸»ä»å¤‡ä»½ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä»²è£é˜Ÿåˆ—ä»£æ›¿é•œåƒé›†ç¾¤ã€‚</li></ul><h2 id="2-7-ä½¿ç”¨MQå¯ä»¥è§£å†³é‚£äº›é—®é¢˜ï¼Ÿ"><a href="#2-7-ä½¿ç”¨MQå¯ä»¥è§£å†³é‚£äº›é—®é¢˜ï¼Ÿ" class="headerlink" title="2.7.ä½¿ç”¨MQå¯ä»¥è§£å†³é‚£äº›é—®é¢˜ï¼Ÿ"></a>2.7.ä½¿ç”¨MQå¯ä»¥è§£å†³é‚£äº›é—®é¢˜ï¼Ÿ</h2><p><strong>è¯æœ¯ï¼š</strong></p><p>RabbitMQèƒ½è§£å†³çš„é—®é¢˜å¾ˆå¤šï¼Œä¾‹å¦‚ï¼š</p><ul><li>è§£è€¦åˆï¼šå°†å‡ ä¸ªä¸šåŠ¡å…³è”çš„å¾®æœåŠ¡è°ƒç”¨ä¿®æ”¹ä¸ºåŸºäºMQçš„å¼‚æ­¥é€šçŸ¥ï¼Œå¯ä»¥è§£é™¤å¾®æœåŠ¡ä¹‹é—´çš„ä¸šåŠ¡è€¦åˆã€‚åŒæ—¶è¿˜æé«˜äº†ä¸šåŠ¡æ€§èƒ½ã€‚</li><li>æµé‡å‰Šå³°ï¼šå°†çªå‘çš„ä¸šåŠ¡è¯·æ±‚æ”¾å…¥MQä¸­ï¼Œä½œä¸ºç¼“å†²åŒºã€‚åç«¯çš„ä¸šåŠ¡æ ¹æ®è‡ªå·±çš„å¤„ç†èƒ½åŠ›ä»MQä¸­è·å–æ¶ˆæ¯ï¼Œé€ä¸ªå¤„ç†ä»»åŠ¡ã€‚æµé‡æ›²çº¿å˜çš„å¹³æ»‘å¾ˆå¤š</li><li>å»¶è¿Ÿé˜Ÿåˆ—ï¼šåŸºäºRabbitMQçš„æ­»ä¿¡é˜Ÿåˆ—æˆ–è€…DelayExchangeæ’ä»¶ï¼Œå¯ä»¥å®ç°æ¶ˆæ¯å‘é€åï¼Œå»¶è¿Ÿæ¥æ”¶çš„æ•ˆæœã€‚</li></ul><h1 id="3-Redisç¯‡"><a href="#3-Redisç¯‡" class="headerlink" title="3.Redisç¯‡"></a>3.Redisç¯‡</h1><h2 id="3-1-Redisä¸Memcacheçš„åŒºåˆ«ï¼Ÿ"><a href="#3-1-Redisä¸Memcacheçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="3.1.Redisä¸Memcacheçš„åŒºåˆ«ï¼Ÿ"></a>3.1.Redisä¸Memcacheçš„åŒºåˆ«ï¼Ÿ</h2><ul><li><code>redisæ”¯æŒæ›´ä¸°å¯Œçš„æ•°æ®ç±»å‹</code>ï¼ˆæ”¯æŒæ›´å¤æ‚çš„åº”ç”¨åœºæ™¯ï¼‰ï¼šRedisä¸ä»…ä»…æ”¯æŒç®€å•çš„k&#x2F;vç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚memcacheæ”¯æŒç®€å•çš„æ•°æ®ç±»å‹ï¼ŒStringã€‚</li><li><code>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–</code>ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨,è€ŒMemecacheæŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¹‹ä¸­ã€‚</li><li><code>é›†ç¾¤æ¨¡å¼</code>ï¼šmemcachedæ²¡æœ‰åŸç”Ÿçš„é›†ç¾¤æ¨¡å¼ï¼Œéœ€è¦ä¾é å®¢æˆ·ç«¯æ¥å®ç°å¾€é›†ç¾¤ä¸­åˆ†ç‰‡å†™å…¥æ•°æ®ï¼›ä½†æ˜¯ redis ç›®å‰æ˜¯åŸç”Ÿæ”¯æŒ cluster æ¨¡å¼çš„.</li><li><code>Redisä½¿ç”¨å•çº¿ç¨‹</code>ï¼šMemcachedæ˜¯å¤šçº¿ç¨‹ï¼Œéé˜»å¡IOå¤ç”¨çš„ç½‘ç»œæ¨¡å‹ï¼›Redisä½¿ç”¨å•çº¿ç¨‹çš„å¤šè·¯ IO å¤ç”¨æ¨¡å‹ã€‚</li></ul><p><img src="https://s2.loli.net/2022/04/11/aQX9ARNyIY8E3L4.png" alt="1574821356723"></p><h2 id="3-2-Redisçš„å•çº¿ç¨‹é—®é¢˜"><a href="#3-2-Redisçš„å•çº¿ç¨‹é—®é¢˜" class="headerlink" title="3.2.Redisçš„å•çº¿ç¨‹é—®é¢˜"></a>3.2.Redisçš„å•çº¿ç¨‹é—®é¢˜</h2><p><strong>é¢è¯•å®˜</strong>ï¼šRedisé‡‡ç”¨å•çº¿ç¨‹ï¼Œå¦‚ä½•ä¿è¯é«˜å¹¶å‘ï¼Ÿ</p><p><strong>é¢è¯•è¯æœ¯</strong>ï¼š</p><p>Rediså¿«çš„ä¸»è¦åŸå› æ˜¯ï¼š</p><ol><li>å®Œå…¨åŸºäºå†…å­˜</li><li>æ•°æ®ç»“æ„ç®€å•ï¼Œå¯¹æ•°æ®æ“ä½œä¹Ÿç®€å•</li><li>ä½¿ç”¨å¤šè·¯ I&#x2F;O å¤ç”¨æ¨¡å‹ï¼Œå……åˆ†åˆ©ç”¨CPUèµ„æº</li></ol><p><strong>é¢è¯•å®˜</strong>ï¼šè¿™æ ·åšçš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>é¢è¯•è¯æœ¯</strong>ï¼š</p><p>å•çº¿ç¨‹ä¼˜åŠ¿æœ‰ä¸‹é¢å‡ ç‚¹ï¼š</p><ul><li>ä»£ç æ›´æ¸…æ™°ï¼Œå¤„ç†é€»è¾‘æ›´ç®€å•</li><li>ä¸ç”¨å»è€ƒè™‘å„ç§é”çš„é—®é¢˜ï¼Œä¸å­˜åœ¨åŠ é”é‡Šæ”¾é”æ“ä½œï¼Œæ²¡æœ‰å› ä¸ºé”è€Œå¯¼è‡´çš„æ€§èƒ½æ¶ˆè€—</li><li>ä¸å­˜åœ¨å¤šè¿›ç¨‹æˆ–è€…å¤šçº¿ç¨‹å¯¼è‡´çš„CPUåˆ‡æ¢ï¼Œå……åˆ†åˆ©ç”¨CPUèµ„æº</li></ul><h2 id="3-2-Redisçš„æŒä¹…åŒ–æ–¹æ¡ˆç”±å“ªäº›ï¼Ÿ"><a href="#3-2-Redisçš„æŒä¹…åŒ–æ–¹æ¡ˆç”±å“ªäº›ï¼Ÿ" class="headerlink" title="3.2.Redisçš„æŒä¹…åŒ–æ–¹æ¡ˆç”±å“ªäº›ï¼Ÿ"></a>3.2.Redisçš„æŒä¹…åŒ–æ–¹æ¡ˆç”±å“ªäº›ï¼Ÿ</h2><p><strong>ç›¸å…³èµ„æ–™ï¼š</strong></p><p>1ï¼‰RDB æŒä¹…åŒ–</p><p>RDBæŒä¹…åŒ–å¯ä»¥ä½¿ç”¨saveæˆ–bgsaveï¼Œä¸ºäº†ä¸é˜»å¡ä¸»è¿›ç¨‹ä¸šåŠ¡ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨bgsaveï¼Œæµç¨‹ï¼š</p><ul><li>Redis è¿›ç¨‹ä¼š fork å‡ºä¸€ä¸ªå­è¿›ç¨‹ï¼ˆä¸çˆ¶è¿›ç¨‹å†…å­˜æ•°æ®ä¸€è‡´ï¼‰ã€‚</li><li>çˆ¶è¿›ç¨‹ç»§ç»­å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚å‘½ä»¤</li><li>ç”±å­è¿›ç¨‹å°†å†…å­˜ä¸­çš„æ‰€æœ‰æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶çš„ RDB æ–‡ä»¶ä¸­ã€‚</li><li>å®Œæˆå†™å…¥æ“ä½œä¹‹åï¼Œæ—§çš„ RDB æ–‡ä»¶ä¼šè¢«æ–°çš„ RDB æ–‡ä»¶æ›¿æ¢æ‰ã€‚</li></ul><p>ä¸‹é¢æ˜¯ä¸€äº›å’Œ RDB æŒä¹…åŒ–ç›¸å…³çš„é…ç½®ï¼š</p><ul><li><code>save 60 10000</code>ï¼šå¦‚æœåœ¨ 60 ç§’å†…æœ‰ 10000 ä¸ª key å‘ç”Ÿæ”¹å˜ï¼Œé‚£å°±æ‰§è¡Œ RDB æŒä¹…åŒ–ã€‚</li><li><code>stop-writes-on-bgsave-error yes</code>ï¼šå¦‚æœ Redis æ‰§è¡Œ RDB æŒä¹…åŒ–å¤±è´¥ï¼ˆå¸¸è§äºæ“ä½œç³»ç»Ÿå†…å­˜ä¸è¶³ï¼‰ï¼Œé‚£ä¹ˆ Redis å°†ä¸å†æ¥å— client å†™å…¥æ•°æ®çš„è¯·æ±‚ã€‚</li><li><code>rdbcompression yes</code>ï¼šå½“ç”Ÿæˆ RDB æ–‡ä»¶æ—¶ï¼ŒåŒæ—¶è¿›è¡Œå‹ç¼©ã€‚</li><li><code>dbfilename dump.rdb</code>ï¼šå°† RDB æ–‡ä»¶å‘½åä¸º dump.rdbã€‚</li><li><code>dir /var/lib/redis</code>ï¼šå°† RDB æ–‡ä»¶ä¿å­˜åœ¨<code>/var/lib/redis</code>ç›®å½•ä¸‹ã€‚</li></ul><p>ã€€ã€€å½“ç„¶åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†<code>stop-writes-on-bgsave-error</code>è®¾ç½®ä¸º<code>false</code>ï¼ŒåŒæ—¶è®©ç›‘æ§ç³»ç»Ÿåœ¨ Redis æ‰§è¡Œ RDB æŒä¹…åŒ–å¤±è´¥æ—¶å‘é€å‘Šè­¦ï¼Œä»¥ä¾¿äººå·¥ä»‹å…¥è§£å†³ï¼Œè€Œä¸æ˜¯ç²—æš´åœ°æ‹’ç» client çš„å†™å…¥è¯·æ±‚ã€‚</p><p>RDBæŒä¹…åŒ–çš„ä¼˜ç‚¹ï¼š</p><ul><li>RDBæŒä¹…åŒ–æ–‡ä»¶å°ï¼ŒRedisæ•°æ®æ¢å¤æ—¶é€Ÿåº¦å¿«</li><li>å­è¿›ç¨‹ä¸å½±å“çˆ¶è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥æŒç»­å¤„ç†å®¢æˆ·ç«¯å‘½ä»¤</li><li>å­è¿›ç¨‹forkæ—¶é‡‡ç”¨copy-on-writeæ–¹å¼ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ²¡æœ‰å¤ªå¤šçš„å†…å­˜æ¶ˆè€—ï¼Œæ•ˆç‡æ¯”è¾ƒå¥½ã€‚</li></ul><p> RDB æŒä¹…åŒ–çš„ç¼ºç‚¹ï¼š</p><ul><li>å­è¿›ç¨‹forkæ—¶é‡‡ç”¨copy-on-writeæ–¹å¼ï¼Œå¦‚æœRedisæ­¤æ—¶å†™æ“ä½œè¾ƒå¤šï¼Œå¯èƒ½å¯¼è‡´é¢å¤–çš„å†…å­˜å ç”¨ï¼Œç”šè‡³å†…å­˜æº¢å‡º</li><li>RDBæ–‡ä»¶å‹ç¼©ä¼šå‡å°æ–‡ä»¶ä½“ç§¯ï¼Œä½†é€šè¿‡æ—¶ä¼šå¯¹CPUæœ‰é¢å¤–çš„æ¶ˆè€—</li><li>å¦‚æœä¸šåŠ¡åœºæ™¯å¾ˆçœ‹é‡æ•°æ®çš„æŒä¹…æ€§ (durability)ï¼Œé‚£ä¹ˆä¸åº”è¯¥é‡‡ç”¨ RDB æŒä¹…åŒ–ã€‚è­¬å¦‚è¯´ï¼Œå¦‚æœ Redis æ¯ 5 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ RDB æŒä¹…åŒ–ï¼Œè¦æ˜¯ Redis æ„å¤–å¥”æºƒäº†ï¼Œé‚£ä¹ˆæœ€å¤šä¼šä¸¢å¤± 5 åˆ†é’Ÿçš„æ•°æ®ã€‚</li></ul><p>2ï¼‰AOF æŒä¹…åŒ–</p><p>ã€€ã€€å¯ä»¥ä½¿ç”¨<code>appendonly yes</code>é…ç½®é¡¹æ¥å¼€å¯ AOF æŒä¹…åŒ–ã€‚Redis æ‰§è¡Œ AOF æŒä¹…åŒ–æ—¶ï¼Œä¼šå°†æ¥æ”¶åˆ°çš„å†™å‘½ä»¤è¿½åŠ åˆ° AOF æ–‡ä»¶çš„æœ«å°¾ï¼Œå› æ­¤ Redis åªè¦å¯¹ AOF æ–‡ä»¶ä¸­çš„å‘½ä»¤è¿›è¡Œå›æ”¾ï¼Œå°±å¯ä»¥å°†æ•°æ®åº“è¿˜åŸåˆ°åŸå…ˆçš„çŠ¶æ€ã€‚<br>ã€€ã€€ä¸ RDB æŒä¹…åŒ–ç›¸æ¯”ï¼ŒAOF æŒä¹…åŒ–çš„ä¸€ä¸ªæ˜æ˜¾ä¼˜åŠ¿å°±æ˜¯ï¼Œå®ƒå¯ä»¥æé«˜æ•°æ®çš„æŒä¹…æ€§ (durability)ã€‚å› ä¸ºåœ¨ AOF æ¨¡å¼ä¸‹ï¼ŒRedis æ¯æ¬¡æ¥æ”¶åˆ° client çš„å†™å‘½ä»¤ï¼Œå°±ä¼šå°†å‘½ä»¤<code>write()</code>åˆ° AOF æ–‡ä»¶æœ«å°¾ã€‚<br>ã€€ã€€ç„¶è€Œï¼Œåœ¨ Linux ä¸­ï¼Œå°†æ•°æ®<code>write()</code>åˆ°æ–‡ä»¶åï¼Œæ•°æ®å¹¶ä¸ä¼šç«‹å³åˆ·æ–°åˆ°ç£ç›˜ï¼Œè€Œä¼šå…ˆæš‚å­˜åœ¨ OS çš„æ–‡ä»¶ç³»ç»Ÿç¼“å†²åŒºã€‚åœ¨åˆé€‚çš„æ—¶æœºï¼ŒOS æ‰ä¼šå°†ç¼“å†²åŒºçš„æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ï¼ˆå¦‚æœéœ€è¦å°†æ–‡ä»¶å†…å®¹åˆ·æ–°åˆ°ç£ç›˜ï¼Œå¯ä»¥è°ƒç”¨<code>fsync()</code>æˆ–<code>fdatasync()</code>ï¼‰ã€‚<br>ã€€ã€€é€šè¿‡<code>appendfsync</code>é…ç½®é¡¹ï¼Œå¯ä»¥æ§åˆ¶ Redis å°†å‘½ä»¤åŒæ­¥åˆ°ç£ç›˜çš„é¢‘ç‡ï¼š</p><ul><li><code>always</code>ï¼šæ¯æ¬¡ Redis å°†å‘½ä»¤<code>write()</code>åˆ° AOF æ–‡ä»¶æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨<code>fsync()</code>ï¼Œå°†å‘½ä»¤åˆ·æ–°åˆ°ç£ç›˜ã€‚è¿™å¯ä»¥ä¿è¯æœ€å¥½çš„æ•°æ®æŒä¹…æ€§ï¼Œä½†å´ä¼šç»™ç³»ç»Ÿå¸¦æ¥æå¤§çš„å¼€é”€ã€‚</li><li><code>no</code>ï¼šRedis åªå°†å‘½ä»¤<code>write()</code>åˆ° AOF æ–‡ä»¶ã€‚è¿™ä¼šè®© OS å†³å®šä½•æ—¶å°†å‘½ä»¤åˆ·æ–°åˆ°ç£ç›˜ã€‚</li><li><code>everysec</code>ï¼šé™¤äº†å°†å‘½ä»¤<code>write()</code>åˆ° AOF æ–‡ä»¶ï¼ŒRedis è¿˜ä¼šæ¯ç§’æ‰§è¡Œä¸€æ¬¡<code>fsync()</code>ã€‚åœ¨å®è·µä¸­ï¼Œæ¨èä½¿ç”¨è¿™ç§è®¾ç½®ï¼Œä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥ä¿è¯æ•°æ®æŒä¹…æ€§ï¼Œåˆä¸ä¼šæ˜æ˜¾é™ä½ Redis æ€§èƒ½ã€‚</li></ul><p>ã€€ã€€ç„¶è€Œï¼ŒAOF æŒä¹…åŒ–å¹¶ä¸æ˜¯æ²¡æœ‰ç¼ºç‚¹çš„ï¼šRedis ä¼šä¸æ–­å°†æ¥æ”¶åˆ°çš„å†™å‘½ä»¤è¿½åŠ åˆ° AOF æ–‡ä»¶ä¸­ï¼Œå¯¼è‡´ AOF æ–‡ä»¶è¶Šæ¥è¶Šå¤§ã€‚è¿‡å¤§çš„ AOF æ–‡ä»¶ä¼šæ¶ˆè€—ç£ç›˜ç©ºé—´ï¼Œå¹¶ä¸”å¯¼è‡´ Redis é‡å¯æ—¶æ›´åŠ ç¼“æ…¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨é€‚å½“æƒ…å†µä¸‹ï¼ŒRedis ä¼šå¯¹ AOF æ–‡ä»¶è¿›è¡Œé‡å†™ï¼Œå»é™¤æ–‡ä»¶ä¸­å†—ä½™çš„å‘½ä»¤ï¼Œä»¥å‡å° AOF æ–‡ä»¶çš„ä½“ç§¯ã€‚åœ¨é‡å†™ AOF æ–‡ä»¶æœŸé—´ï¼Œ Redis ä¼šå¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹ï¼Œç”±å­è¿›ç¨‹è´Ÿè´£å¯¹ AOF æ–‡ä»¶è¿›è¡Œé‡å†™ã€‚<br>ã€€ã€€å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªé…ç½®é¡¹ï¼Œæ§åˆ¶ Redis é‡å†™ AOF æ–‡ä»¶çš„é¢‘ç‡ï¼š</p><ul><li><code>auto-aof-rewrite-min-size 64mb</code></li><li><code>auto-aof-rewrite-percentage 100</code></li></ul><p>ã€€ã€€ä¸Šé¢ä¸¤ä¸ªé…ç½®çš„ä½œç”¨ï¼šå½“ AOF æ–‡ä»¶çš„ä½“ç§¯å¤§äº 64MBï¼Œå¹¶ä¸” AOF æ–‡ä»¶çš„ä½“ç§¯æ¯”ä¸Šä¸€æ¬¡é‡å†™ä¹‹åçš„ä½“ç§¯å¤§äº†è‡³å°‘ä¸€å€ï¼Œé‚£ä¹ˆ Redis å°±ä¼šæ‰§è¡Œ AOF é‡å†™ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>æŒä¹…åŒ–é¢‘ç‡é«˜ï¼Œæ•°æ®å¯é æ€§é«˜</li><li>æ²¡æœ‰é¢å¤–çš„å†…å­˜æˆ–CPUæ¶ˆè€—</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>æ–‡ä»¶ä½“ç§¯å¤§</li><li>æ–‡ä»¶å¤§å¯¼è‡´æœåŠ¡æ•°æ®æ¢å¤æ—¶æ•ˆç‡è¾ƒä½</li></ul><p><strong>é¢è¯•è¯æœ¯ï¼š</strong></p><p>Redis æä¾›äº†ä¸¤ç§æ•°æ®æŒä¹…åŒ–çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ RDBï¼Œå¦ä¸€ç§æ˜¯ AOFã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒRedis ä½¿ç”¨çš„æ˜¯ RDB æŒä¹…åŒ–ã€‚</p><p>RDBæŒä¹…åŒ–æ–‡ä»¶ä½“ç§¯è¾ƒå°ï¼Œä½†æ˜¯ä¿å­˜æ•°æ®çš„é¢‘ç‡ä¸€èˆ¬è¾ƒä½ï¼Œå¯é æ€§å·®ï¼Œå®¹æ˜“ä¸¢å¤±æ•°æ®ã€‚å¦å¤–RDBå†™æ•°æ®æ—¶ä¼šé‡‡ç”¨Forkå‡½æ•°æ‹·è´ä¸»è¿›ç¨‹ï¼Œå¯èƒ½æœ‰é¢å¤–çš„å†…å­˜æ¶ˆè€—ï¼Œæ–‡ä»¶å‹ç¼©ä¹Ÿä¼šæœ‰é¢å¤–çš„CPUæ¶ˆè€—ã€‚</p><p>ROFæŒä¹…åŒ–å¯ä»¥åšåˆ°æ¯ç§’é’ŸæŒä¹…åŒ–ä¸€æ¬¡ï¼Œå¯é æ€§é«˜ã€‚ä½†æ˜¯æŒä¹…åŒ–æ–‡ä»¶ä½“ç§¯è¾ƒå¤§ï¼Œå¯¼è‡´æ•°æ®æ¢å¤æ—¶è¯»å–æ–‡ä»¶æ—¶é—´è¾ƒé•¿ï¼Œæ•ˆç‡ç•¥ä½</p><h2 id="3-3-Redisçš„é›†ç¾¤æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#3-3-Redisçš„é›†ç¾¤æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="3.3.Redisçš„é›†ç¾¤æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>3.3.Redisçš„é›†ç¾¤æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h2><p><strong>é¢è¯•è¯æœ¯ï¼š</strong></p><p>Redisé›†ç¾¤å¯ä»¥åˆ†ä¸º<strong>ä¸»ä»é›†ç¾¤</strong>å’Œ<strong>åˆ†ç‰‡é›†ç¾¤</strong>ä¸¤ç±»ã€‚</p><p><strong>ä¸»ä»é›†ç¾¤</strong>ä¸€èˆ¬ä¸€ä¸»å¤šä»ï¼Œä¸»åº“ç”¨æ¥å†™æ•°æ®ï¼Œä»åº“ç”¨æ¥è¯»æ•°æ®ã€‚ç»“åˆå“¨å…µï¼Œå¯ä»¥å†ä¸»åº“å®•æœºæ—¶ä»æ–°é€‰ä¸»ï¼Œ<strong>ç›®çš„æ˜¯ä¿è¯Redisçš„é«˜å¯ç”¨</strong>ã€‚</p><p><strong>åˆ†ç‰‡é›†ç¾¤</strong>æ˜¯æ•°æ®åˆ†ç‰‡ï¼Œæˆ‘ä»¬ä¼šè®©å¤šä¸ªRedisèŠ‚ç‚¹ç»„æˆé›†ç¾¤ï¼Œå¹¶å°†16383ä¸ªæ’æ§½åˆ†åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šã€‚å­˜å‚¨æ•°æ®æ—¶åˆ©ç”¨å¯¹keyåšhashè¿ç®—ï¼Œå¾—åˆ°æ’æ§½å€¼åå­˜å‚¨åˆ°å¯¹åº”çš„èŠ‚ç‚¹å³å¯ã€‚å› ä¸ºå­˜å‚¨æ•°æ®é¢å‘çš„æ˜¯æ’æ§½è€ŒéèŠ‚ç‚¹æœ¬èº«ï¼Œå› æ­¤å¯ä»¥åšåˆ°é›†ç¾¤åŠ¨æ€ä¼¸ç¼©ã€‚<strong>ç›®çš„æ˜¯è®©Redisèƒ½å­˜å‚¨æ›´å¤šæ•°æ®ã€‚</strong></p><p>1ï¼‰ä¸»ä»é›†ç¾¤</p><p>ä¸»ä»é›†ç¾¤ï¼Œä¹Ÿæ˜¯è¯»å†™åˆ†ç¦»é›†ç¾¤ã€‚ä¸€èˆ¬éƒ½æ˜¯ä¸€ä¸»å¤šä»æ–¹å¼ã€‚</p><p>Redis çš„å¤åˆ¶ï¼ˆreplicationï¼‰åŠŸèƒ½å…è®¸ç”¨æˆ·æ ¹æ®ä¸€ä¸ª Redis æœåŠ¡å™¨æ¥åˆ›å»ºä»»æ„å¤šä¸ªè¯¥æœåŠ¡å™¨çš„å¤åˆ¶å“ï¼Œå…¶ä¸­è¢«å¤åˆ¶çš„æœåŠ¡å™¨ä¸ºä¸»æœåŠ¡å™¨ï¼ˆmasterï¼‰ï¼Œè€Œé€šè¿‡å¤åˆ¶åˆ›å»ºå‡ºæ¥çš„æœåŠ¡å™¨å¤åˆ¶å“åˆ™ä¸ºä»æœåŠ¡å™¨ï¼ˆslaveï¼‰ã€‚</p><p>åªè¦ä¸»ä»æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œä¸»ä»æœåŠ¡å™¨ä¸¤è€…ä¼šå…·æœ‰ç›¸åŒçš„æ•°æ®ï¼Œä¸»æœåŠ¡å™¨å°±ä¼šä¸€ç›´å°†å‘ç”Ÿåœ¨è‡ªå·±èº«ä¸Šçš„æ•°æ®æ›´æ–°åŒæ­¥ ç»™ä»æœåŠ¡å™¨ï¼Œä»è€Œä¸€ç›´ä¿è¯ä¸»ä»æœåŠ¡å™¨çš„æ•°æ®ç›¸åŒã€‚</p><ul><li>å†™æ•°æ®æ—¶åªèƒ½é€šè¿‡ä¸»èŠ‚ç‚¹å®Œæˆ</li><li>è¯»æ•°æ®å¯ä»¥ä»ä»»ä½•èŠ‚ç‚¹å®Œæˆ</li><li>å¦‚æœé…ç½®äº†<code>å“¨å…µèŠ‚ç‚¹</code>ï¼Œå½“masterå®•æœºæ—¶ï¼Œå“¨å…µä¼šä»salveèŠ‚ç‚¹é€‰å‡ºä¸€ä¸ªæ–°çš„ä¸»ã€‚</li></ul><p>ä¸»ä»é›†ç¾¤åˆ†ä¸¤ç§ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/g7HREAK8cUeCl6B.png" alt="1574821993599"> <img src="https://s2.loli.net/2022/04/11/6yMLOjaXdzx7823.png" alt="1574822026037"> </p><p>å¸¦æœ‰å“¨å…µçš„é›†ç¾¤ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/ZNlXTBpod8Mr4wS.png" alt="1574822077190"></p><p>2ï¼‰åˆ†ç‰‡é›†ç¾¤</p><p>ä¸»ä»é›†ç¾¤ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦ä¿å­˜æ‰€æœ‰ä¿¡æ¯ï¼Œå®¹æ˜“å½¢æˆæœ¨æ¡¶æ•ˆåº”ã€‚å¹¶ä¸”å½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œå•ä¸ªæœºå™¨æ— æ³•æ»¡è¶³éœ€æ±‚ã€‚æ­¤æ—¶æˆ‘ä»¬å°±è¦ä½¿ç”¨åˆ†ç‰‡é›†ç¾¤äº†ã€‚</p><p><img src="https://s2.loli.net/2022/04/11/wPjEZHoKdItXJNb.png" alt="1574822184467"> </p><p>é›†ç¾¤ç‰¹å¾ï¼š</p><ul><li><p>æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜ä¸åŒæ•°æ®</p></li><li><p>æ‰€æœ‰çš„redisèŠ‚ç‚¹å½¼æ­¤äº’è”(PING-PONGæœºåˆ¶),å†…éƒ¨ä½¿ç”¨äºŒè¿›åˆ¶åè®®ä¼˜åŒ–ä¼ è¾“é€Ÿåº¦å’Œå¸¦å®½.</p></li><li><p>èŠ‚ç‚¹çš„failæ˜¯é€šè¿‡é›†ç¾¤ä¸­è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ£€æµ‹å¤±æ•ˆæ—¶æ‰ç”Ÿæ•ˆ.</p></li><li><p>å®¢æˆ·ç«¯ä¸redisèŠ‚ç‚¹ç›´è¿,ä¸éœ€è¦ä¸­é—´proxyå±‚è¿æ¥é›†ç¾¤ä¸­ä»»ä½•ä¸€ä¸ªå¯ç”¨èŠ‚ç‚¹éƒ½å¯ä»¥è®¿é—®åˆ°æ•°æ®</p></li><li><p>redis-clusteræŠŠæ‰€æœ‰çš„ç‰©ç†èŠ‚ç‚¹æ˜ å°„åˆ°[0-16383]slotï¼ˆæ’æ§½ï¼‰ä¸Šï¼Œå®ç°åŠ¨æ€ä¼¸ç¼©</p></li></ul><p>ä¸ºäº†ä¿è¯Redisä¸­æ¯ä¸ªèŠ‚ç‚¹çš„é«˜å¯ç”¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»™æ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºreplicationï¼ˆslaveèŠ‚ç‚¹ï¼‰ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/TGw7xjXMAgUvmyW.png" alt="1574822584357"></p><p>å‡ºç°æ•…éšœæ—¶ï¼Œä¸»ä»å¯ä»¥åŠæ—¶åˆ‡æ¢ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/CUe2yxbwdlf9pno.png" alt="1574822602109"></p><h2 id="3-4-Redisçš„å¸¸ç”¨æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ"><a href="#3-4-Redisçš„å¸¸ç”¨æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="3.4.Redisçš„å¸¸ç”¨æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ"></a>3.4.Redisçš„å¸¸ç”¨æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ</h2><p>æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦åŒºåˆ«æ˜¯valueå­˜å‚¨çš„æ•°æ®æ ¼å¼ä¸åŒï¼š</p><ul><li><p>stringï¼šæœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ŒäºŒè¿›åˆ¶å®‰å…¨çš„å­—ç¬¦ä¸²ï¼Œæœ€å¤§512Mã€‚</p></li><li><p>listï¼šæŒ‰ç…§æ·»åŠ é¡ºåºä¿æŒé¡ºåºçš„å­—ç¬¦ä¸²åˆ—è¡¨ã€‚</p></li><li><p>setï¼šæ— åºçš„å­—ç¬¦ä¸²é›†åˆï¼Œä¸å­˜åœ¨é‡å¤çš„å…ƒç´ ã€‚</p></li><li><p>sorted setï¼šå·²æ’åºçš„å­—ç¬¦ä¸²é›†åˆã€‚</p></li><li><p>hashï¼škey-valueå¯¹æ ¼å¼</p></li></ul><h2 id="3-5-èŠä¸€ä¸‹Redisäº‹åŠ¡æœºåˆ¶"><a href="#3-5-èŠä¸€ä¸‹Redisäº‹åŠ¡æœºåˆ¶" class="headerlink" title="3.5.èŠä¸€ä¸‹Redisäº‹åŠ¡æœºåˆ¶"></a>3.5.èŠä¸€ä¸‹Redisäº‹åŠ¡æœºåˆ¶</h2><p><strong>ç›¸å…³èµ„æ–™ï¼š</strong></p><p>å‚è€ƒï¼š<a href="http://redisdoc.com/topic/transaction.html">http://redisdoc.com/topic/transaction.html</a></p><p>Redisäº‹åŠ¡åŠŸèƒ½æ˜¯é€šè¿‡MULTIã€EXECã€DISCARDå’ŒWATCH å››ä¸ªåŸè¯­å®ç°çš„ã€‚Redisä¼šå°†ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤åºåˆ—åŒ–ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚ä½†æ˜¯Redisäº‹åŠ¡ä¸æ”¯æŒå›æ»šæ“ä½œï¼Œå‘½ä»¤è¿è¡Œå‡ºé”™åï¼Œæ­£ç¡®çš„å‘½ä»¤ä¼šç»§ç»­æ‰§è¡Œã€‚</p><ul><li><code>MULTI</code>: ç”¨äºå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå®ƒæ€»æ˜¯è¿”å›OKã€‚ MULTIæ‰§è¡Œä¹‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘æœåŠ¡å™¨å‘é€ä»»æ„å¤šæ¡å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ä¸ä¼šç«‹å³è¢«æ‰§è¡Œï¼Œè€Œæ˜¯è¢«æ”¾åˆ°ä¸€ä¸ª<strong>å¾…æ‰§è¡Œå‘½ä»¤é˜Ÿåˆ—</strong>ä¸­</li><li><code>EXEC</code>ï¼šæŒ‰é¡ºåºæ‰§è¡Œå‘½ä»¤é˜Ÿåˆ—å†…çš„æ‰€æœ‰å‘½ä»¤ã€‚è¿”å›æ‰€æœ‰å‘½ä»¤çš„è¿”å›å€¼ã€‚äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒRedisä¸ä¼šæ‰§è¡Œå…¶å®ƒäº‹åŠ¡çš„å‘½ä»¤ã€‚</li><li><code>DISCARD</code>ï¼šæ¸…ç©ºå‘½ä»¤é˜Ÿåˆ—ï¼Œå¹¶æ”¾å¼ƒæ‰§è¡Œäº‹åŠ¡ï¼Œ å¹¶ä¸”å®¢æˆ·ç«¯ä¼šä»äº‹åŠ¡çŠ¶æ€ä¸­é€€å‡º</li><li><code>WATCH</code>ï¼šRedisçš„ä¹è§‚é”æœºåˆ¶ï¼Œåˆ©ç”¨compare-and-setï¼ˆCASï¼‰åŸç†ï¼Œå¯ä»¥ç›‘æ§ä¸€ä¸ªæˆ–å¤šä¸ªé”®ï¼Œä¸€æ—¦å…¶ä¸­æœ‰ä¸€ä¸ªé”®è¢«ä¿®æ”¹ï¼Œä¹‹åçš„äº‹åŠ¡å°±ä¸ä¼šæ‰§è¡Œ</li></ul><p>ä½¿ç”¨äº‹åŠ¡æ—¶å¯èƒ½ä¼šé‡ä¸Šä»¥ä¸‹ä¸¤ç§é”™è¯¯ï¼š</p><ul><li>æ‰§è¡Œ EXEC ä¹‹å‰ï¼Œå…¥é˜Ÿçš„å‘½ä»¤å¯èƒ½ä¼šå‡ºé”™ã€‚æ¯”å¦‚è¯´ï¼Œå‘½ä»¤å¯èƒ½ä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯ï¼ˆå‚æ•°æ•°é‡é”™è¯¯ï¼Œå‚æ•°åé”™è¯¯ï¼Œç­‰ç­‰ï¼‰ï¼Œæˆ–è€…å…¶ä»–æ›´ä¸¥é‡çš„é”™è¯¯ï¼Œæ¯”å¦‚å†…å­˜ä¸è¶³ï¼ˆå¦‚æœæœåŠ¡å™¨ä½¿ç”¨ <code>maxmemory</code> è®¾ç½®äº†æœ€å¤§å†…å­˜é™åˆ¶çš„è¯ï¼‰ã€‚<ul><li>Redis 2.6.5 å¼€å§‹ï¼ŒæœåŠ¡å™¨ä¼šå¯¹å‘½ä»¤å…¥é˜Ÿå¤±è´¥çš„æƒ…å†µè¿›è¡Œè®°å½•ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯è°ƒç”¨ EXEC å‘½ä»¤æ—¶ï¼Œæ‹’ç»æ‰§è¡Œå¹¶è‡ªåŠ¨æ”¾å¼ƒè¿™ä¸ªäº‹åŠ¡ã€‚</li></ul></li><li>å‘½ä»¤å¯èƒ½åœ¨ EXEC è°ƒç”¨ä¹‹åå¤±è´¥ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œäº‹åŠ¡ä¸­çš„å‘½ä»¤å¯èƒ½å¤„ç†äº†é”™è¯¯ç±»å‹çš„é”®ï¼Œæ¯”å¦‚å°†åˆ—è¡¨å‘½ä»¤ç”¨åœ¨äº†å­—ç¬¦ä¸²é”®ä¸Šé¢ï¼Œè¯¸å¦‚æ­¤ç±»ã€‚<ul><li>å³ä½¿äº‹åŠ¡ä¸­æœ‰æŸä¸ª&#x2F;æŸäº›å‘½ä»¤åœ¨æ‰§è¡Œæ—¶äº§ç”Ÿäº†é”™è¯¯ï¼Œ äº‹åŠ¡ä¸­çš„å…¶ä»–å‘½ä»¤ä»ç„¶ä¼šç»§ç»­æ‰§è¡Œï¼Œä¸ä¼šå›æ»šã€‚</li></ul></li></ul><p>ä¸ºä»€ä¹ˆ Redis ä¸æ”¯æŒå›æ»šï¼ˆroll backï¼‰ï¼Ÿ</p><p>ä»¥ä¸‹æ˜¯è¿™ç§åšæ³•çš„ä¼˜ç‚¹ï¼š</p><ul><li>Redis å‘½ä»¤åªä¼šå› ä¸ºé”™è¯¯çš„è¯­æ³•è€Œå¤±è´¥ï¼ˆå¹¶ä¸”è¿™äº›é—®é¢˜ä¸èƒ½åœ¨å…¥é˜Ÿæ—¶å‘ç°ï¼‰ï¼Œæˆ–æ˜¯å‘½ä»¤ç”¨åœ¨äº†é”™è¯¯ç±»å‹çš„é”®ä¸Šé¢ï¼šè¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œä»å®ç”¨æ€§çš„è§’åº¦æ¥è¯´ï¼Œå¤±è´¥çš„å‘½ä»¤æ˜¯ç”±<strong>ç¼–ç¨‹é”™è¯¯</strong>é€ æˆçš„ï¼Œè€Œè¿™äº›é”™è¯¯åº”è¯¥åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­è¢«å‘ç°ï¼Œè€Œä¸åº”è¯¥å‡ºç°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</li><li>å› ä¸ºä¸éœ€è¦å¯¹å›æ»šè¿›è¡Œæ”¯æŒï¼Œæ‰€ä»¥ Redis çš„å†…éƒ¨å¯ä»¥ä¿æŒç®€å•ä¸”å¿«é€Ÿã€‚</li></ul><p>é‰´äºæ²¡æœ‰ä»»ä½•æœºåˆ¶èƒ½é¿å…ç¨‹åºå‘˜è‡ªå·±é€ æˆçš„é”™è¯¯ï¼Œ å¹¶ä¸”è¿™ç±»é”™è¯¯é€šå¸¸ä¸ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‡ºç°ï¼Œ æ‰€ä»¥ Redis é€‰æ‹©äº†æ›´ç®€å•ã€æ›´å¿«é€Ÿçš„æ— å›æ»šæ–¹å¼æ¥å¤„ç†äº‹åŠ¡ã€‚</p><p><strong>é¢è¯•è¯æœ¯ï¼š</strong></p><p>Redisäº‹åŠ¡å…¶å®æ˜¯æŠŠä¸€ç³»åˆ—Rediså‘½ä»¤æ”¾å…¥é˜Ÿåˆ—ï¼Œç„¶åæ‰¹é‡æ‰§è¡Œï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šæœ‰å…¶å®ƒäº‹åŠ¡æ¥æ‰“æ–­ã€‚ä¸è¿‡ä¸å…³ç³»å‹æ•°æ®åº“çš„äº‹åŠ¡ä¸åŒï¼ŒRedisäº‹åŠ¡ä¸æ”¯æŒå›æ»šæ“ä½œï¼Œäº‹åŠ¡ä¸­æŸä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…¶å®ƒå‘½ä»¤ä¾ç„¶ä¼šæ‰§è¡Œã€‚</p><p>ä¸ºäº†å¼¥è¡¥ä¸èƒ½å›æ»šçš„é—®é¢˜ï¼ŒRedisä¼šåœ¨äº‹åŠ¡å…¥é˜Ÿæ—¶å°±æ£€æŸ¥å‘½ä»¤ï¼Œå¦‚æœå‘½ä»¤å¼‚å¸¸åˆ™ä¼šæ”¾å¼ƒæ•´ä¸ªäº‹åŠ¡ã€‚</p><p>å› æ­¤ï¼Œåªè¦ç¨‹åºå‘˜ç¼–ç¨‹æ˜¯æ­£ç¡®çš„ï¼Œç†è®ºä¸Šè¯´Redisä¼šæ­£ç¡®æ‰§è¡Œæ‰€æœ‰äº‹åŠ¡ï¼Œæ— éœ€å›æ»šã€‚</p><p>é¢è¯•å®˜ï¼šå¦‚æœäº‹åŠ¡æ‰§è¡Œä¸€åŠçš„æ—¶å€™Rediså®•æœºæ€ä¹ˆåŠï¼Ÿ</p><p>Redisæœ‰æŒä¹…åŒ–æœºåˆ¶ï¼Œå› ä¸ºå¯é æ€§é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨AOFæŒä¹…åŒ–ã€‚äº‹åŠ¡çš„æ‰€æœ‰å‘½ä»¤ä¹Ÿä¼šå†™å…¥AOFæ–‡ä»¶ï¼Œä½†æ˜¯å¦‚æœåœ¨æ‰§è¡ŒEXECå‘½ä»¤ä¹‹å‰ï¼ŒRediså·²ç»å®•æœºï¼Œåˆ™AOFæ–‡ä»¶ä¸­äº‹åŠ¡ä¸å®Œæ•´ã€‚ä½¿ç”¨ <code>redis-check-aof</code> ç¨‹åºå¯ä»¥ç§»é™¤ AOF æ–‡ä»¶ä¸­ä¸å®Œæ•´äº‹åŠ¡çš„ä¿¡æ¯ï¼Œç¡®ä¿æœåŠ¡å™¨å¯ä»¥é¡ºåˆ©å¯åŠ¨ã€‚</p><h2 id="3-6-Redisçš„Keyè¿‡æœŸç­–ç•¥"><a href="#3-6-Redisçš„Keyè¿‡æœŸç­–ç•¥" class="headerlink" title="3.6.Redisçš„Keyè¿‡æœŸç­–ç•¥"></a>3.6.Redisçš„Keyè¿‡æœŸç­–ç•¥</h2><h3 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a><strong>å‚è€ƒèµ„æ–™ï¼š</strong></h3><h4 id="ä¸ºä»€ä¹ˆéœ€è¦å†…å­˜å›æ”¶ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å†…å­˜å›æ”¶ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å†…å­˜å›æ”¶ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦å†…å­˜å›æ”¶ï¼Ÿ</h4><ul><li>1ã€åœ¨Redisä¸­ï¼ŒsetæŒ‡ä»¤å¯ä»¥æŒ‡å®škeyçš„è¿‡æœŸæ—¶é—´ï¼Œå½“è¿‡æœŸæ—¶é—´åˆ°è¾¾ä»¥åï¼Œkeyå°±å¤±æ•ˆäº†ï¼›</li><li>2ã€Redisæ˜¯åŸºäºå†…å­˜æ“ä½œçš„ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸€å°æœºå™¨çš„å†…å­˜æ˜¯æœ‰é™ä¸”å¾ˆå®è´µçš„ã€‚</li></ul><p>åŸºäºä»¥ä¸Šä¸¤ç‚¹ï¼Œä¸ºäº†ä¿è¯Redisèƒ½ç»§ç»­æä¾›å¯é çš„æœåŠ¡ï¼ŒRediséœ€è¦ä¸€ç§æœºåˆ¶æ¸…ç†æ‰ä¸å¸¸ç”¨çš„ã€æ— æ•ˆçš„ã€å¤šä½™çš„æ•°æ®ï¼Œå¤±æ•ˆåçš„æ•°æ®éœ€è¦åŠæ—¶æ¸…ç†ï¼Œè¿™å°±éœ€è¦å†…å­˜å›æ”¶äº†ã€‚</p><p>Redisçš„å†…å­˜å›æ”¶ä¸»è¦åˆ†ä¸ºè¿‡æœŸåˆ é™¤ç­–ç•¥å’Œå†…å­˜æ·˜æ±°ç­–ç•¥ä¸¤éƒ¨åˆ†ã€‚</p><h4 id="è¿‡æœŸåˆ é™¤ç­–ç•¥"><a href="#è¿‡æœŸåˆ é™¤ç­–ç•¥" class="headerlink" title="è¿‡æœŸåˆ é™¤ç­–ç•¥"></a>è¿‡æœŸåˆ é™¤ç­–ç•¥</h4><p>åˆ é™¤è¾¾åˆ°è¿‡æœŸæ—¶é—´çš„keyã€‚</p><ul><li>1ï¼‰å®šæ—¶åˆ é™¤</li></ul><p>å¯¹äºæ¯ä¸€ä¸ªè®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œä¸€æ—¦åˆ°è¾¾è¿‡æœŸæ—¶é—´å°±ç«‹å³åˆ é™¤ã€‚è¯¥ç­–ç•¥å¯ä»¥ç«‹å³æ¸…é™¤è¿‡æœŸçš„æ•°æ®ï¼Œå¯¹å†…å­˜è¾ƒå‹å¥½ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å ç”¨äº†å¤§é‡çš„CPUèµ„æºå»å¤„ç†è¿‡æœŸçš„æ•°æ®ï¼Œä¼šå½±å“Redisçš„ååé‡å’Œå“åº”æ—¶é—´ã€‚</p><ul><li>2ï¼‰æƒ°æ€§åˆ é™¤</li></ul><p>å½“è®¿é—®ä¸€ä¸ªkeyæ—¶ï¼Œæ‰åˆ¤æ–­è¯¥keyæ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸåˆ™åˆ é™¤ã€‚è¯¥ç­–ç•¥èƒ½æœ€å¤§é™åº¦åœ°èŠ‚çœCPUèµ„æºï¼Œä½†æ˜¯å¯¹å†…å­˜å´ååˆ†ä¸å‹å¥½ã€‚æœ‰ä¸€ç§æç«¯çš„æƒ…å†µæ˜¯å¯èƒ½å‡ºç°å¤§é‡çš„è¿‡æœŸkeyæ²¡æœ‰è¢«å†æ¬¡è®¿é—®ï¼Œå› æ­¤ä¸ä¼šè¢«æ¸…é™¤ï¼Œå¯¼è‡´å ç”¨äº†å¤§é‡çš„å†…å­˜ã€‚</p><blockquote><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ‡’æƒ°åˆ é™¤ï¼ˆè‹±æ–‡ï¼šlazy deletionï¼‰æŒ‡çš„æ˜¯ä»ä¸€ä¸ªæ•£åˆ—è¡¨ï¼ˆä¹Ÿç§°å“ˆå¸Œè¡¨ï¼‰ä¸­åˆ é™¤å…ƒç´ çš„ä¸€ç§æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œåˆ é™¤ä»…ä»…æ˜¯æŒ‡æ ‡è®°ä¸€ä¸ªå…ƒç´ è¢«åˆ é™¤ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ¸…é™¤å®ƒã€‚è¢«åˆ é™¤çš„ä½ç‚¹åœ¨æ’å…¥æ—¶è¢«å½“ä½œç©ºå…ƒç´ ï¼Œåœ¨æœç´¢ä¹‹æ—¶è¢«å½“ä½œå·²å æ®ã€‚</p></blockquote><ul><li>3ï¼‰å®šæœŸåˆ é™¤</li></ul><p>æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œæ‰«æRedisä¸­è¿‡æœŸkeyå­—å…¸ï¼Œå¹¶æ¸…é™¤éƒ¨åˆ†è¿‡æœŸçš„keyã€‚è¯¥ç­–ç•¥æ˜¯å‰ä¸¤è€…çš„ä¸€ä¸ªæŠ˜ä¸­æ–¹æ¡ˆï¼Œè¿˜å¯ä»¥é€šè¿‡è°ƒæ•´å®šæ—¶æ‰«æçš„æ—¶é—´é—´éš”å’Œæ¯æ¬¡æ‰«æçš„é™å®šè€—æ—¶ï¼Œåœ¨ä¸åŒæƒ…å†µä¸‹ä½¿å¾—CPUå’Œå†…å­˜èµ„æºè¾¾åˆ°æœ€ä¼˜çš„å¹³è¡¡æ•ˆæœã€‚</p><p>åœ¨Redisä¸­ï¼Œ<code>åŒæ—¶ä½¿ç”¨äº†å®šæœŸåˆ é™¤å’Œæƒ°æ€§åˆ é™¤</code>ã€‚ä¸è¿‡Rediså®šæœŸåˆ é™¤é‡‡ç”¨çš„æ˜¯éšæœºæŠ½å–çš„æ–¹å¼åˆ é™¤éƒ¨åˆ†Keyï¼Œå› æ­¤ä¸èƒ½ä¿è¯è¿‡æœŸkey 100%çš„åˆ é™¤ã€‚</p><p>Redisç»“åˆäº†å®šæœŸåˆ é™¤å’Œæƒ°æ€§åˆ é™¤ï¼ŒåŸºæœ¬ä¸Šèƒ½å¾ˆå¥½çš„å¤„ç†è¿‡æœŸæ•°æ®çš„æ¸…ç†ï¼Œä½†æ˜¯å®é™…ä¸Šè¿˜æ˜¯æœ‰ç‚¹é—®é¢˜çš„ï¼Œå¦‚æœè¿‡æœŸkeyè¾ƒå¤šï¼Œå®šæœŸåˆ é™¤æ¼æ‰äº†ä¸€éƒ¨åˆ†ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰åŠæ—¶å»æŸ¥ï¼Œå³æ²¡æœ‰èµ°æƒ°æ€§åˆ é™¤ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å¤§é‡çš„è¿‡æœŸkeyå †ç§¯åœ¨å†…å­˜ä¸­ï¼Œå¯¼è‡´rediså†…å­˜è€—å°½ï¼Œå½“å†…å­˜è€—å°½ä¹‹åï¼Œæœ‰æ–°çš„keyåˆ°æ¥ä¼šå‘ç”Ÿä»€ä¹ˆäº‹å‘¢ï¼Ÿæ˜¯ç›´æ¥æŠ›å¼ƒè¿˜æ˜¯å…¶ä»–æªæ–½å‘¢ï¼Ÿæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥æ¥å—æ›´å¤šçš„keyï¼Ÿ</p><h4 id="å†…å­˜æ·˜æ±°ç­–ç•¥"><a href="#å†…å­˜æ·˜æ±°ç­–ç•¥" class="headerlink" title="å†…å­˜æ·˜æ±°ç­–ç•¥"></a>å†…å­˜æ·˜æ±°ç­–ç•¥</h4><p>Redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œæ˜¯æŒ‡å†…å­˜è¾¾åˆ°maxmemoryæé™æ—¶ï¼Œä½¿ç”¨æŸç§ç®—æ³•æ¥å†³å®šæ¸…ç†æ‰å“ªäº›æ•°æ®ï¼Œä»¥ä¿è¯æ–°æ•°æ®çš„å­˜å…¥ã€‚</p><p>Redisçš„å†…å­˜æ·˜æ±°æœºåˆ¶åŒ…æ‹¬ï¼š</p><ul><li>noeviction: å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ã€‚</li><li>allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ï¼ˆ<code>server.db[i].dict</code>ï¼‰ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ keyï¼ˆè¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„ï¼‰ã€‚</li><li>allkeys-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ï¼ˆ<code>server.db[i].dict</code>ï¼‰ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª keyã€‚</li><li>volatile-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ï¼ˆ<code>server.db[i].expires</code>ï¼‰ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ keyã€‚</li><li>volatile-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ï¼ˆ<code>server.db[i].expires</code>ï¼‰ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª keyã€‚</li><li>volatile-ttlï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ï¼ˆ<code>server.db[i].expires</code>ï¼‰ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„ key ä¼˜å…ˆç§»é™¤ã€‚</li></ul><blockquote><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡maxmemory-policyå¯ä»¥é…ç½®è¦ä½¿ç”¨å“ªä¸€ä¸ªæ·˜æ±°æœºåˆ¶ã€‚</p></blockquote><p>ä»€ä¹ˆæ—¶å€™ä¼šè¿›è¡Œæ·˜æ±°ï¼Ÿ</p><p>Redisä¼šåœ¨æ¯ä¸€æ¬¡å¤„ç†å‘½ä»¤çš„æ—¶å€™ï¼ˆprocessCommandå‡½æ•°è°ƒç”¨freeMemoryIfNeededï¼‰åˆ¤æ–­å½“å‰redisæ˜¯å¦è¾¾åˆ°äº†å†…å­˜çš„æœ€å¤§é™åˆ¶ï¼Œå¦‚æœè¾¾åˆ°é™åˆ¶ï¼Œåˆ™ä½¿ç”¨å¯¹åº”çš„ç®—æ³•å»å¤„ç†éœ€è¦åˆ é™¤çš„keyã€‚</p><p>åœ¨æ·˜æ±°keyæ—¶ï¼ŒRedisé»˜è®¤æœ€å¸¸ç”¨çš„æ˜¯LRUç®—æ³•ï¼ˆLatest Recently Usedï¼‰ã€‚Redisé€šè¿‡åœ¨æ¯ä¸€ä¸ªredisObjectä¿å­˜lruå±æ€§æ¥ä¿å­˜keyæœ€è¿‘çš„è®¿é—®æ—¶é—´ï¼Œåœ¨å®ç°LRUç®—æ³•æ—¶ç›´æ¥è¯»å–keyçš„lruå±æ€§ã€‚</p><p>å…·ä½“å®ç°æ—¶ï¼ŒRediséå†æ¯ä¸€ä¸ªdbï¼Œä»æ¯ä¸€ä¸ªdbä¸­éšæœºæŠ½å–ä¸€æ‰¹æ ·æœ¬keyï¼Œé»˜è®¤æ˜¯3ä¸ªkeyï¼Œå†ä»è¿™3ä¸ªkeyä¸­ï¼Œåˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚</p><h3 id="é¢è¯•è¯æœ¯ï¼š"><a href="#é¢è¯•è¯æœ¯ï¼š" class="headerlink" title="é¢è¯•è¯æœ¯ï¼š"></a>é¢è¯•è¯æœ¯ï¼š</h3><p>Redisè¿‡æœŸç­–ç•¥åŒ…å«å®šæœŸåˆ é™¤å’Œæƒ°æ€§åˆ é™¤ä¸¤éƒ¨åˆ†ã€‚å®šæœŸåˆ é™¤æ˜¯åœ¨Rediså†…éƒ¨æœ‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œä¼šå®šæœŸåˆ é™¤ä¸€äº›è¿‡æœŸçš„keyã€‚æƒ°æ€§åˆ é™¤æ˜¯å½“ç”¨æˆ·æŸ¥è¯¢æŸä¸ªKeyæ—¶ï¼Œä¼šæ£€æŸ¥è¿™ä¸ªKeyæ˜¯å¦å·²ç»è¿‡æœŸï¼Œå¦‚æœæ²¡è¿‡æœŸåˆ™è¿”å›ç”¨æˆ·ï¼Œå¦‚æœè¿‡æœŸåˆ™åˆ é™¤ã€‚</p><p>ä½†æ˜¯è¿™ä¸¤ä¸ªç­–ç•¥éƒ½æ— æ³•ä¿è¯è¿‡æœŸkeyä¸€å®šåˆ é™¤ï¼Œæ¼ç½‘ä¹‹é±¼è¶Šæ¥è¶Šå¤šï¼Œè¿˜å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚å½“å‘ç”Ÿå†…å­˜ä¸è¶³é—®é¢˜æ—¶ï¼ŒRedisè¿˜ä¼šåšå†…å­˜å›æ”¶ã€‚å†…å­˜å›æ”¶é‡‡ç”¨LRUç­–ç•¥ï¼Œå°±æ˜¯æœ€è¿‘æœ€å°‘ä½¿ç”¨ã€‚å…¶åŸç†å°±æ˜¯è®°å½•æ¯ä¸ªKeyçš„æœ€è¿‘ä½¿ç”¨æ—¶é—´ï¼Œå†…å­˜å›æ”¶æ—¶ï¼ŒéšæœºæŠ½å–ä¸€äº›Keyï¼Œæ¯”è¾ƒå…¶ä½¿ç”¨æ—¶é—´ï¼ŒæŠŠæœ€è€çš„å‡ ä¸ªåˆ é™¤ã€‚</p><p>Redisçš„é€»è¾‘æ˜¯ï¼šæœ€è¿‘ä½¿ç”¨è¿‡çš„ï¼Œå¾ˆå¯èƒ½å†æ¬¡è¢«ä½¿ç”¨</p><h2 id="3-7-Redisåœ¨é¡¹ç›®ä¸­çš„å“ªäº›åœ°æ–¹æœ‰ç”¨åˆ°"><a href="#3-7-Redisåœ¨é¡¹ç›®ä¸­çš„å“ªäº›åœ°æ–¹æœ‰ç”¨åˆ°" class="headerlink" title="3.7.Redisåœ¨é¡¹ç›®ä¸­çš„å“ªäº›åœ°æ–¹æœ‰ç”¨åˆ°?"></a>3.7.Redisåœ¨é¡¹ç›®ä¸­çš„å“ªäº›åœ°æ–¹æœ‰ç”¨åˆ°?</h2><p>ï¼ˆ1ï¼‰å…±äº«session</p><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸‹ï¼ŒæœåŠ¡ä¼šéƒ¨ç½²åœ¨ä¸åŒçš„tomcatï¼Œå› æ­¤å¤šä¸ªtomcatçš„sessionæ— æ³•å…±äº«ï¼Œä»¥å‰å­˜å‚¨åœ¨sessionä¸­çš„æ•°æ®æ— æ³•å®ç°å…±äº«ï¼Œå¯ä»¥ç”¨redisä»£æ›¿sessionï¼Œè§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿé—´æ•°æ®å…±äº«é—®é¢˜ã€‚</p><p>ï¼ˆ2ï¼‰æ•°æ®ç¼“å­˜</p><p>Redisé‡‡ç”¨å†…å­˜å­˜å‚¨ï¼Œè¯»å†™æ•ˆç‡è¾ƒé«˜ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®åº“çš„è®¿é—®é¢‘ç‡é«˜çš„çƒ­ç‚¹æ•°æ®å­˜å‚¨åˆ°redisä¸­ï¼Œè¿™æ ·ç”¨æˆ·è¯·æ±‚æ—¶ä¼˜å…ˆä»redisä¸­è¯»å–ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›ï¼Œæé«˜å¹¶å‘èƒ½åŠ›ã€‚</p><p>ï¼ˆ3ï¼‰å¼‚æ­¥é˜Ÿåˆ—</p><p>Reidsåœ¨å†…å­˜å­˜å‚¨å¼•æ“é¢†åŸŸçš„ä¸€å¤§ä¼˜ç‚¹æ˜¯æä¾› list å’Œ set æ“ä½œï¼Œè¿™ä½¿å¾—Redisèƒ½ä½œä¸ºä¸€ä¸ªå¾ˆå¥½çš„æ¶ˆæ¯é˜Ÿåˆ—å¹³å°æ¥ä½¿ç”¨ã€‚è€Œä¸”Redisä¸­è¿˜æœ‰pub&#x2F;subè¿™æ ·çš„ä¸“ç”¨ç»“æ„ï¼Œç”¨äº1å¯¹Nçš„æ¶ˆæ¯é€šä¿¡æ¨¡å¼ã€‚</p><p>ï¼ˆ4ï¼‰åˆ†å¸ƒå¼é”</p><p>Redisä¸­çš„ä¹è§‚é”æœºåˆ¶ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°åˆ†å¸ƒå¼é”çš„æ•ˆæœï¼Œç”¨äºè§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸‹çš„å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜</p><h2 id="3-8-Redisçš„ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€"><a href="#3-8-Redisçš„ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€" class="headerlink" title="3.8.Redisçš„ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€"></a>3.8.Redisçš„ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€</h2><h3 id="1ï¼‰ç¼“å­˜ç©¿é€"><a href="#1ï¼‰ç¼“å­˜ç©¿é€" class="headerlink" title="1ï¼‰ç¼“å­˜ç©¿é€"></a>1ï¼‰ç¼“å­˜ç©¿é€</h3><p>å‚è€ƒèµ„æ–™ï¼š</p><ul><li><p>ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€</p><ul><li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å»æŸ¥è¯¢æ•°æ®éƒ½æ˜¯å­˜åœ¨ã€‚é‚£ä¹ˆè¯·æ±‚å»æŸ¥è¯¢ä¸€æ¡å‹æ ¹å„¿æ•°æ®åº“ä¸­æ ¹æœ¬å°±ä¸å­˜åœ¨çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜å’Œæ•°æ®åº“éƒ½æŸ¥è¯¢ä¸åˆ°è¿™æ¡æ•°æ®ï¼Œä½†æ˜¯è¯·æ±‚æ¯æ¬¡éƒ½ä¼šæ‰“åˆ°æ•°æ®åº“ä¸Šé¢å»ã€‚è¿™ç§æŸ¥è¯¢ä¸å­˜åœ¨æ•°æ®çš„ç°è±¡æˆ‘ä»¬ç§°ä¸º<strong>ç¼“å­˜ç©¿é€</strong>ã€‚</li></ul></li><li><p>ç©¿é€å¸¦æ¥çš„é—®é¢˜</p><ul><li>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæœ‰é»‘å®¢ä¼šå¯¹ä½ çš„ç³»ç»Ÿè¿›è¡Œæ”»å‡»ï¼Œæ‹¿ä¸€ä¸ªä¸å­˜åœ¨çš„id å»æŸ¥è¯¢æ•°æ®ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„è¯·æ±‚åˆ°æ•°æ®åº“å»æŸ¥è¯¢ã€‚å¯èƒ½ä¼šå¯¼è‡´ä½ çš„æ•°æ®åº“ç”±äºå‹åŠ›è¿‡å¤§è€Œå®•æ‰ã€‚</li></ul></li><li><p>è§£å†³åŠæ³•</p><ul><li>ç¼“å­˜ç©ºå€¼ï¼šä¹‹æ‰€ä»¥ä¼šå‘ç”Ÿç©¿é€ï¼Œå°±æ˜¯å› ä¸ºç¼“å­˜ä¸­æ²¡æœ‰å­˜å‚¨è¿™äº›ç©ºæ•°æ®çš„keyã€‚ä»è€Œå¯¼è‡´æ¯æ¬¡æŸ¥è¯¢éƒ½åˆ°æ•°æ®åº“å»äº†ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä¸ºè¿™äº›keyå¯¹åº”çš„å€¼è®¾ç½®ä¸ºnull ä¸¢åˆ°ç¼“å­˜é‡Œé¢å»ã€‚åé¢å†å‡ºç°æŸ¥è¯¢è¿™ä¸ªkey çš„è¯·æ±‚çš„æ—¶å€™ï¼Œç›´æ¥è¿”å›null ã€‚è¿™æ ·ï¼Œå°±ä¸ç”¨åœ¨åˆ°æ•°æ®åº“ä¸­å»èµ°ä¸€åœˆäº†ï¼Œä½†æ˜¯åˆ«å¿˜äº†è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</li><li>BloomFilterï¼ˆå¸ƒéš†è¿‡æ»¤ï¼‰ï¼šå°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„bitmapä¸­ï¼Œä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢« è¿™ä¸ªbitmapæ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚åœ¨ç¼“å­˜ä¹‹å‰åœ¨åŠ ä¸€å±‚ BloomFilter ï¼Œåœ¨æŸ¥è¯¢çš„æ—¶å€™å…ˆå» BloomFilter å»æŸ¥è¯¢ key æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨å°±ç›´æ¥è¿”å›ï¼Œå­˜åœ¨å†èµ°æŸ¥ç¼“å­˜ -&gt; æŸ¥ DBã€‚</li></ul></li></ul><p><strong>è¯æœ¯ï¼š</strong></p><p>ç¼“å­˜ç©¿é€æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š<strong>å…¶ä¸€</strong>æ˜¯æŠŠä¸å­˜åœ¨çš„keyè®¾ç½®nullå€¼åˆ°ç¼“å­˜ä¸­ã€‚<strong>å…¶äºŒ</strong>æ˜¯ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œåœ¨æŸ¥è¯¢ç¼“å­˜å‰å…ˆé€šè¿‡å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å†å»æŸ¥è¯¢ç¼“å­˜ã€‚</p><p>è®¾ç½®nullå€¼å¯èƒ½è¢«æ¶æ„é’ˆå¯¹ï¼Œæ”»å‡»è€…ä½¿ç”¨å¤§é‡ä¸å­˜åœ¨çš„ä¸é‡å¤key ï¼Œé‚£ä¹ˆæ–¹æ¡ˆä¸€å°±ä¼šç¼“å­˜å¤§é‡ä¸å­˜åœ¨keyæ•°æ®ã€‚æ­¤æ—¶æˆ‘ä»¬è¿˜å¯ä»¥å¯¹Keyè§„å®šæ ¼å¼æ¨¡æ¿ï¼Œç„¶åå¯¹ä¸å­˜åœ¨çš„keyåš<strong>æ­£åˆ™è§„èŒƒ</strong>åŒ¹é…ï¼Œå¦‚æœå®Œå…¨ä¸ç¬¦åˆå°±ä¸ç”¨å­˜nullå€¼åˆ°redisï¼Œè€Œæ˜¯ç›´æ¥è¿”å›é”™è¯¯ã€‚</p><h3 id="2ï¼‰ç¼“å­˜å‡»ç©¿"><a href="#2ï¼‰ç¼“å­˜å‡»ç©¿" class="headerlink" title="2ï¼‰ç¼“å­˜å‡»ç©¿"></a>2ï¼‰ç¼“å­˜å‡»ç©¿</h3><p><strong>ç›¸å…³èµ„æ–™</strong>ï¼š</p><ul><li>ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿ï¼Ÿ</li></ul><p>keyå¯èƒ½ä¼šåœ¨æŸäº›æ—¶é—´ç‚¹è¢«è¶…é«˜å¹¶å‘åœ°è®¿é—®ï¼Œæ˜¯ä¸€ç§éå¸¸â€œçƒ­ç‚¹â€çš„æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šç¼“å­˜è¢«â€œå‡»ç©¿â€çš„é—®é¢˜ã€‚</p><p>å½“è¿™ä¸ªkeyåœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒredisæŸ¥è¯¢å¤±è´¥ï¼ŒæŒç»­çš„å¤§å¹¶å‘å°±ç©¿ç ´ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒåœ¨ä¸€ä¸ªå±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚</p><ul><li>è§£å†³æ–¹æ¡ˆï¼š<ul><li>ä½¿ç”¨äº’æ–¥é”(mutex key)ï¼šmutexï¼Œå°±æ˜¯äº’æ–¥ã€‚ç®€å•åœ°æ¥è¯´ï¼Œå°±æ˜¯åœ¨ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼ˆåˆ¤æ–­æ‹¿å‡ºæ¥çš„å€¼ä¸ºç©ºï¼‰ï¼Œä¸æ˜¯ç«‹å³å»load dbï¼Œè€Œæ˜¯å…ˆä½¿ç”¨Redisçš„SETNXå»setä¸€ä¸ªäº’æ–¥keyï¼Œå½“æ“ä½œè¿”å›æˆåŠŸæ—¶ï¼Œå†è¿›è¡Œload dbçš„æ“ä½œå¹¶å›è®¾ç¼“å­˜ï¼›å¦åˆ™ï¼Œå°±é‡è¯•æ•´ä¸ªgetç¼“å­˜çš„æ–¹æ³•ã€‚SETNXï¼Œæ˜¯ã€ŒSET if Not eXistsã€çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ä¸å­˜åœ¨çš„æ—¶å€™æ‰è®¾ç½®ï¼Œå¯ä»¥åˆ©ç”¨å®ƒæ¥å®ç°äº’æ–¥çš„æ•ˆæœã€‚</li><li>è½¯è¿‡æœŸï¼šä¹Ÿå°±æ˜¯é€»è¾‘è¿‡æœŸï¼Œä¸ä½¿ç”¨redisæä¾›çš„è¿‡æœŸæ—¶é—´ï¼Œè€Œæ˜¯ä¸šåŠ¡å±‚åœ¨æ•°æ®ä¸­å­˜å‚¨è¿‡æœŸæ—¶é—´ä¿¡æ¯ã€‚æŸ¥è¯¢æ—¶ç”±ä¸šåŠ¡ç¨‹åºåˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæ•°æ®å³å°†è¿‡æœŸæ—¶ï¼Œå°†ç¼“å­˜çš„æ—¶æ•ˆå»¶é•¿ï¼Œç¨‹åºå¯ä»¥æ´¾é£ä¸€ä¸ªçº¿ç¨‹å»æ•°æ®åº“ä¸­è·å–æœ€æ–°çš„æ•°æ®ï¼Œå…¶ä»–çº¿ç¨‹è¿™æ—¶çœ‹åˆ°å»¶é•¿äº†çš„è¿‡æœŸæ—¶é—´ï¼Œå°±ä¼šç»§ç»­ä½¿ç”¨æ—§æ•°æ®ï¼Œç­‰æ´¾é£çš„çº¿ç¨‹è·å–æœ€æ–°æ•°æ®åå†æ›´æ–°ç¼“å­˜ã€‚</li></ul></li></ul><p>æ¨èä½¿ç”¨äº’æ–¥é”ï¼Œå› ä¸ºè½¯è¿‡æœŸä¼šæœ‰ä¸šåŠ¡é€»è¾‘ä¾µå…¥å’Œé¢å¤–çš„åˆ¤æ–­ã€‚</p><p><strong>é¢è¯•è¯æœ¯</strong>ï¼š</p><p>ç¼“å­˜å‡»ç©¿ä¸»è¦æ‹…å¿ƒçš„æ˜¯æŸä¸ªKeyè¿‡æœŸï¼Œæ›´æ–°ç¼“å­˜æ—¶å¼•èµ·å¯¹æ•°æ®åº“çš„çªå‘é«˜å¹¶å‘è®¿é—®ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨æ›´æ–°ç¼“å­˜æ—¶é‡‡ç”¨äº’æ–¥é”æ§åˆ¶ï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹å»æ›´æ–°ç¼“å­˜ï¼Œå…¶å®ƒçº¿ç¨‹ç­‰å¾…å¹¶é‡æ–°è¯»å–ç¼“å­˜ã€‚ä¾‹å¦‚Redisçš„setnxå‘½ä»¤å°±èƒ½å®ç°äº’æ–¥æ•ˆæœã€‚</p><h3 id="3ï¼‰ç¼“å­˜é›ªå´©"><a href="#3ï¼‰ç¼“å­˜é›ªå´©" class="headerlink" title="3ï¼‰ç¼“å­˜é›ªå´©"></a>3ï¼‰ç¼“å­˜é›ªå´©</h3><p><strong>ç›¸å…³èµ„æ–™</strong>ï¼š</p><p>ç¼“å­˜é›ªå´©ï¼Œæ˜¯æŒ‡åœ¨æŸä¸€ä¸ªæ—¶é—´æ®µï¼Œç¼“å­˜é›†ä¸­è¿‡æœŸå¤±æ•ˆã€‚å¯¹è¿™æ‰¹æ•°æ®çš„è®¿é—®æŸ¥è¯¢ï¼Œéƒ½è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œå¯¹äºæ•°æ®åº“è€Œè¨€ï¼Œå°±ä¼šäº§ç”Ÿå‘¨æœŸæ€§çš„å‹åŠ›æ³¢å³°ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>æ•°æ®åˆ†ç±»åˆ†æ‰¹å¤„ç†ï¼šé‡‡å–ä¸åŒåˆ†ç±»æ•°æ®ï¼Œç¼“å­˜ä¸åŒå‘¨æœŸ</li><li>ç›¸åŒåˆ†ç±»æ•°æ®ï¼šé‡‡ç”¨å›ºå®šæ—¶é•¿åŠ éšæœºæ•°æ–¹å¼è®¾ç½®ç¼“å­˜</li><li>çƒ­ç‚¹æ•°æ®ç¼“å­˜æ—¶é—´é•¿ä¸€äº›ï¼Œå†·é—¨æ•°æ®ç¼“å­˜æ—¶é—´çŸ­ä¸€äº›</li><li>é¿å…redisèŠ‚ç‚¹å®•æœºå¼•èµ·é›ªå´©ï¼Œæ­å»ºä¸»ä»é›†ç¾¤ï¼Œä¿è¯é«˜å¯ç”¨</li></ul><p><strong>é¢è¯•è¯æœ¯ï¼š</strong></p><p>è§£å†³ç¼“å­˜é›ªå´©é—®é¢˜çš„å…³é”®æ˜¯è®©ç¼“å­˜Keyçš„è¿‡æœŸæ—¶é—´åˆ†æ•£ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®æŒ‰ç…§ä¸šåŠ¡åˆ†ç±»ï¼Œç„¶åè®¾ç½®ä¸åŒè¿‡æœŸæ—¶é—´ã€‚ç›¸åŒä¸šåŠ¡ç±»å‹çš„keyï¼Œè®¾ç½®å›ºå®šæ—¶é•¿åŠ éšæœºæ•°ã€‚å°½å¯èƒ½ä¿è¯æ¯ä¸ªKeyçš„è¿‡æœŸæ—¶é—´éƒ½ä¸ç›¸åŒã€‚</p><p>å¦å¤–ï¼ŒRediså®•æœºä¹Ÿå¯èƒ½å¯¼è‡´ç¼“å­˜é›ªå´©ï¼Œå› æ­¤æˆ‘ä»¬è¿˜è¦æ­å»ºRedisä¸»ä»é›†ç¾¤åŠå“¨å…µç›‘æ§ï¼Œä¿è¯Redisçš„é«˜å¯ç”¨ã€‚</p><h2 id="3-9-ç¼“å­˜å†·çƒ­æ•°æ®åˆ†ç¦»"><a href="#3-9-ç¼“å­˜å†·çƒ­æ•°æ®åˆ†ç¦»" class="headerlink" title="3.9.ç¼“å­˜å†·çƒ­æ•°æ®åˆ†ç¦»"></a>3.9.ç¼“å­˜å†·çƒ­æ•°æ®åˆ†ç¦»</h2><p><strong>èƒŒæ™¯èµ„æ–™</strong>ï¼š</p><p>Redisä½¿ç”¨çš„æ˜¯å†…å­˜å­˜å‚¨ï¼Œå½“éœ€è¦æµ·é‡æ•°æ®å­˜å‚¨æ—¶ï¼Œæˆæœ¬éå¸¸é«˜ã€‚</p><p>ç»è¿‡è°ƒç ”å‘ç°ï¼Œå½“å‰ä¸»æµDDR3å†…å­˜å’Œä¸»æµSATA SSDçš„å•ä½æˆæœ¬ä»·æ ¼å·®è·å¤§æ¦‚åœ¨20å€å·¦å³ï¼Œä¸ºäº†ä¼˜åŒ–redisæœºå™¨ç»¼åˆæˆæœ¬ï¼Œæˆ‘ä»¬è€ƒè™‘å®ç°åŸºäº<strong>çƒ­åº¦ç»Ÿè®¡ çš„æ•°æ®åˆ†çº§å­˜å‚¨</strong>åŠæ•°æ®åœ¨RAM&#x2F;FLASHä¹‹é—´çš„åŠ¨æ€äº¤æ¢ï¼Œä»è€Œå¤§å¹…åº¦é™ä½æˆæœ¬ï¼Œè¾¾åˆ°æ€§èƒ½ä¸æˆæœ¬çš„é«˜å¹³è¡¡ã€‚</p><p>åŸºæœ¬æ€è·¯ï¼šåŸºäºkeyè®¿é—®æ¬¡æ•°(LFU)çš„çƒ­åº¦ç»Ÿè®¡ç®—æ³•è¯†åˆ«å‡ºçƒ­ç‚¹æ•°æ®ï¼Œå¹¶å°†çƒ­ç‚¹æ•°æ®ä¿ç•™åœ¨redisä¸­ï¼Œå¯¹äºæ— è®¿é—®&#x2F;è®¿é—®æ¬¡æ•°å°‘çš„æ•°æ®åˆ™è½¬å­˜åˆ°SSDä¸Šï¼Œå¦‚æœSSDä¸Šçš„keyå†æ¬¡å˜çƒ­ï¼Œåˆ™é‡æ–°å°†å…¶åŠ è½½åˆ°rediså†…å­˜ä¸­ã€‚</p><p>ç›®å‰æµè¡Œçš„é«˜æ€§èƒ½ç£ç›˜å­˜å‚¨ï¼Œå¹¶ä¸”éµå¾ªRedisåè®®çš„æ–¹æ¡ˆåŒ…æ‹¬ï¼š</p><ul><li>SSDBï¼š<a href="http://ssdb.io/zh_cn/">http://ssdb.io/zh_cn/</a></li><li>RocksDBï¼š<a href="https://rocksdb.org.cn/">https://rocksdb.org.cn/</a></li></ul><p>å› æ­¤ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸ç¼“å­˜æœåŠ¡ä¹‹é—´å¼•å…¥ä»£ç†ï¼Œå®ç°Rediså’ŒSSDä¹‹é—´çš„åˆ‡æ¢ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/vGtaXc54SelkC7E.png" alt="image-20200521115702956"></p><p>è¿™æ ·çš„ä»£ç†æ–¹æ¡ˆé˜¿é‡Œäº‘æä¾›çš„å°±æœ‰ã€‚å½“ç„¶ä¹Ÿæœ‰ä¸€äº›å¼€æºæ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼š<a href="https://github.com/JingchengLi/swapdb">https://github.com/JingchengLi/swapdb</a></p><h2 id="3-10-Rediså®ç°åˆ†å¸ƒå¼é”"><a href="#3-10-Rediså®ç°åˆ†å¸ƒå¼é”" class="headerlink" title="3.10.Rediså®ç°åˆ†å¸ƒå¼é”"></a>3.10.Rediså®ç°åˆ†å¸ƒå¼é”</h2><p>åˆ†å¸ƒå¼é”è¦æ»¡è¶³çš„æ¡ä»¶ï¼š</p><ul><li>å¤šè¿›ç¨‹äº’æ–¥ï¼šåŒä¸€æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯ä»¥è·å–é”</li><li>ä¿è¯é”å¯ä»¥é‡Šæ”¾ï¼šä»»åŠ¡ç»“æŸæˆ–å‡ºç°å¼‚å¸¸ï¼Œé”ä¸€å®šè¦é‡Šæ”¾ï¼Œé¿å…æ­»é”</li><li>é˜»å¡é”ï¼ˆå¯é€‰ï¼‰ï¼šè·å–é”å¤±è´¥æ—¶å¯å¦é‡è¯•</li><li>é‡å…¥é”ï¼ˆå¯é€‰ï¼‰ï¼šè·å–é”çš„ä»£ç é€’å½’è°ƒç”¨æ—¶ï¼Œä¾ç„¶å¯ä»¥è·å–é”</li></ul><h3 id="1ï¼‰æœ€åŸºæœ¬çš„åˆ†å¸ƒå¼é”ï¼š"><a href="#1ï¼‰æœ€åŸºæœ¬çš„åˆ†å¸ƒå¼é”ï¼š" class="headerlink" title="1ï¼‰æœ€åŸºæœ¬çš„åˆ†å¸ƒå¼é”ï¼š"></a>1ï¼‰æœ€åŸºæœ¬çš„åˆ†å¸ƒå¼é”ï¼š</h3><p>åˆ©ç”¨Redisçš„setnxå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤çš„ç‰¹å¾æ—¶å¦‚æœå¤šæ¬¡æ‰§è¡Œï¼Œåªæœ‰ç¬¬ä¸€æ¬¡æ‰§è¡Œä¼šæˆåŠŸï¼Œå¯ä»¥å®ç°<code>äº’æ–¥</code>çš„æ•ˆæœã€‚ä½†æ˜¯ä¸ºäº†ä¿è¯æœåŠ¡å®•æœºæ—¶ä¹Ÿå¯ä»¥é‡Šæ”¾é”ï¼Œéœ€è¦åˆ©ç”¨expireå‘½ä»¤ç»™é”è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆæœŸ</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp">setnx <span class="hljs-keyword">lock</span> thread<span class="hljs-number">-01</span> <span class="hljs-meta"># å°è¯•è·å–é”</span><br>expire <span class="hljs-keyword">lock</span> <span class="hljs-number">10</span> <span class="hljs-meta"># è®¾ç½®æœ‰æ•ˆæœŸ</span><br></code></pre></td></tr></table></figure><p><strong>é¢è¯•å®˜é—®é¢˜1</strong>ï¼šå¦‚æœexpireä¹‹å‰æœåŠ¡å®•æœºæ€ä¹ˆåŠï¼Ÿ</p><p>è¦ä¿è¯setnxå’Œexpireå‘½ä»¤çš„åŸå­æ€§ã€‚redisçš„setå‘½ä»¤å¯ä»¥æ»¡è¶³ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">set</span> key value [NX] [EX <span class="hljs-built_in">time</span>] <br></code></pre></td></tr></table></figure><p>éœ€è¦æ·»åŠ nxå’Œexçš„é€‰é¡¹ï¼š</p><ul><li>NXï¼šä¸setnxä¸€è‡´ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡ŒæˆåŠŸ</li><li>EXï¼šè®¾ç½®è¿‡æœŸæ—¶é—´</li></ul><p><strong>é¢è¯•å®˜é—®é¢˜2</strong>ï¼šé‡Šæ”¾é”çš„æ—¶å€™ï¼Œå¦‚æœè‡ªå·±çš„é”å·²ç»è¿‡æœŸäº†ï¼Œæ­¤æ—¶ä¼šå‡ºç°å®‰å…¨æ¼æ´ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</p><p>åœ¨é”ä¸­å­˜å‚¨å½“å‰è¿›ç¨‹å’Œçº¿ç¨‹æ ‡è¯†ï¼Œé‡Šæ”¾é”æ—¶å¯¹é”çš„æ ‡è¯†åˆ¤æ–­ï¼Œå¦‚æœæ˜¯è‡ªå·±çš„åˆ™åˆ é™¤ï¼Œä¸æ˜¯åˆ™æ”¾å¼ƒæ“ä½œã€‚</p><p>ä½†æ˜¯è¿™ä¸¤æ­¥æ“ä½œè¦ä¿è¯åŸå­æ€§ï¼Œéœ€è¦é€šè¿‡Luaè„šæœ¬æ¥å®ç°ã€‚</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sqf"><span class="hljs-keyword">if</span> redis.<span class="hljs-built_in">call</span>(<span class="hljs-string">&quot;get&quot;</span>,<span class="hljs-built_in">KEYS</span>[<span class="hljs-number">1</span>]) == ARGV[<span class="hljs-number">1</span>] <span class="hljs-keyword">then</span><br>    redis.<span class="hljs-built_in">call</span>(<span class="hljs-string">&quot;del&quot;</span>,<span class="hljs-built_in">KEYS</span>[<span class="hljs-number">1</span>])<br>end<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰å¯é‡å…¥åˆ†å¸ƒå¼é”"><a href="#2ï¼‰å¯é‡å…¥åˆ†å¸ƒå¼é”" class="headerlink" title="2ï¼‰å¯é‡å…¥åˆ†å¸ƒå¼é”"></a>2ï¼‰å¯é‡å…¥åˆ†å¸ƒå¼é”</h3><p>å¦‚æœæœ‰é‡å…¥çš„éœ€æ±‚ï¼Œåˆ™é™¤äº†åœ¨é”ä¸­è®°å½•è¿›ç¨‹æ ‡è¯†ï¼Œè¿˜è¦è®°å½•é‡è¯•æ¬¡æ•°ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/04/11/XyDS2k7uK4FiJap.png" alt="1574824172228"> </p><p>ä¸‹é¢æˆ‘ä»¬å‡è®¾é”çš„keyä¸ºâ€œ<code>lock</code>â€ï¼ŒhashKeyæ˜¯å½“å‰çº¿ç¨‹çš„idï¼šâ€œ<code>threadId</code>â€ï¼Œé”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´å‡è®¾ä¸º20</p><p>è·å–é”çš„æ­¥éª¤ï¼š</p><ul><li>1ã€åˆ¤æ–­lockæ˜¯å¦å­˜åœ¨ <code>EXISTS lock</code><ul><li>å­˜åœ¨ï¼Œè¯´æ˜æœ‰äººè·å–é”äº†ï¼Œä¸‹é¢åˆ¤æ–­æ˜¯ä¸æ˜¯è‡ªå·±çš„é”<ul><li>åˆ¤æ–­å½“å‰çº¿ç¨‹idä½œä¸ºhashKeyæ˜¯å¦å­˜åœ¨ï¼š<code>HEXISTS lock threadId</code><ul><li>ä¸å­˜åœ¨ï¼Œè¯´æ˜é”å·²ç»æœ‰äº†ï¼Œä¸”ä¸æ˜¯è‡ªå·±è·å–çš„ï¼Œé”è·å–å¤±è´¥ï¼Œend</li><li>å­˜åœ¨ï¼Œè¯´æ˜æ˜¯è‡ªå·±è·å–çš„é”ï¼Œé‡å…¥æ¬¡æ•°+1ï¼š<code>HINCRBY lock threadId 1</code>ï¼Œå»åˆ°æ­¥éª¤3</li></ul></li></ul></li><li>2ã€ä¸å­˜åœ¨ï¼Œè¯´æ˜å¯ä»¥è·å–é”ï¼Œ<code>HSET key threadId 1</code></li><li>3ã€è®¾ç½®é”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ï¼Œ<code>EXPIRE lock 20</code></li></ul></li></ul><p>é‡Šæ”¾é”çš„æ­¥éª¤ï¼š</p><ul><li>1ã€åˆ¤æ–­å½“å‰çº¿ç¨‹idä½œä¸ºhashKeyæ˜¯å¦å­˜åœ¨ï¼š<code>HEXISTS lock threadId</code><ul><li>ä¸å­˜åœ¨ï¼Œè¯´æ˜é”å·²ç»å¤±æ•ˆï¼Œä¸ç”¨ç®¡äº†</li><li>å­˜åœ¨ï¼Œè¯´æ˜é”è¿˜åœ¨ï¼Œé‡å…¥æ¬¡æ•°å‡1ï¼š<code>HINCRBY lock threadId -1</code>ï¼Œè·å–æ–°çš„é‡å…¥æ¬¡æ•°</li></ul></li><li>2ã€åˆ¤æ–­é‡å…¥æ¬¡æ•°æ˜¯å¦ä¸º0ï¼š<ul><li>ä¸º0ï¼Œè¯´æ˜é”å…¨éƒ¨é‡Šæ”¾ï¼Œåˆ é™¤keyï¼š<code>DEL lock</code></li><li>å¤§äº0ï¼Œè¯´æ˜é”è¿˜åœ¨ä½¿ç”¨ï¼Œé‡ç½®æœ‰æ•ˆæ—¶é—´ï¼š<code>EXPIRE lock 20</code></li></ul></li></ul><p>å¯¹åº”çš„Luaè„šæœ¬å¦‚ä¸‹ï¼š</p><p>é¦–å…ˆæ˜¯è·å–é”ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> key = KEYS[<span class="hljs-number">1</span>]; <span class="hljs-comment">-- é”çš„key</span><br><span class="hljs-keyword">local</span> threadId = ARGV[<span class="hljs-number">1</span>]; <span class="hljs-comment">-- çº¿ç¨‹å”¯ä¸€æ ‡è¯†</span><br><span class="hljs-keyword">local</span> releaseTime = ARGV[<span class="hljs-number">2</span>]; <span class="hljs-comment">-- é”çš„è‡ªåŠ¨é‡Šæ”¾æ—¶é—´</span><br><br><span class="hljs-keyword">if</span>(redis.call(<span class="hljs-string">&#x27;exists&#x27;</span>, key) == <span class="hljs-number">0</span>) <span class="hljs-keyword">then</span> <span class="hljs-comment">-- åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span><br>redis.call(<span class="hljs-string">&#x27;hset&#x27;</span>, key, threadId, <span class="hljs-string">&#x27;1&#x27;</span>); <span class="hljs-comment">-- ä¸å­˜åœ¨, è·å–é”</span><br>redis.call(<span class="hljs-string">&#x27;expire&#x27;</span>, key, releaseTime); <span class="hljs-comment">-- è®¾ç½®æœ‰æ•ˆæœŸ</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">-- è¿”å›ç»“æœ</span><br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">if</span>(redis.call(<span class="hljs-string">&#x27;hexists&#x27;</span>, key, threadId) == <span class="hljs-number">1</span>) <span class="hljs-keyword">then</span> <span class="hljs-comment">-- é”å·²ç»å­˜åœ¨ï¼Œåˆ¤æ–­threadIdæ˜¯å¦æ˜¯è‡ªå·±</span><br>redis.call(<span class="hljs-string">&#x27;hincrby&#x27;</span>, key, threadId, <span class="hljs-string">&#x27;1&#x27;</span>); <span class="hljs-comment">-- ä¸å­˜åœ¨, è·å–é”ï¼Œé‡å…¥æ¬¡æ•°+1</span><br>redis.call(<span class="hljs-string">&#x27;expire&#x27;</span>, key, releaseTime); <span class="hljs-comment">-- è®¾ç½®æœ‰æ•ˆæœŸ</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">-- è¿”å›ç»“æœ</span><br><span class="hljs-keyword">end</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">-- ä»£ç èµ°åˆ°è¿™é‡Œ,è¯´æ˜è·å–é”çš„ä¸æ˜¯è‡ªå·±ï¼Œè·å–é”å¤±è´¥</span><br></code></pre></td></tr></table></figure><p>ç„¶åæ˜¯é‡Šæ”¾é”ï¼š</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> key = KEYS[<span class="hljs-number">1</span>]; <span class="hljs-comment">-- é”çš„key</span><br><span class="hljs-keyword">local</span> threadId = ARGV[<span class="hljs-number">1</span>]; <span class="hljs-comment">-- çº¿ç¨‹å”¯ä¸€æ ‡è¯†</span><br><span class="hljs-keyword">local</span> releaseTime = ARGV[<span class="hljs-number">2</span>]; <span class="hljs-comment">-- é”çš„è‡ªåŠ¨é‡Šæ”¾æ—¶é—´</span><br><br><span class="hljs-keyword">if</span> (redis.call(<span class="hljs-string">&#x27;HEXISTS&#x27;</span>, key, threadId) == <span class="hljs-number">0</span>) <span class="hljs-keyword">then</span> <span class="hljs-comment">-- åˆ¤æ–­å½“å‰é”æ˜¯å¦è¿˜æ˜¯è¢«è‡ªå·±æŒæœ‰</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>; <span class="hljs-comment">-- å¦‚æœå·²ç»ä¸æ˜¯è‡ªå·±ï¼Œåˆ™ç›´æ¥è¿”å›</span><br><span class="hljs-keyword">end</span>;<br><span class="hljs-keyword">local</span> count = redis.call(<span class="hljs-string">&#x27;HINCRBY&#x27;</span>, key, threadId, <span class="hljs-number">-1</span>); <span class="hljs-comment">-- æ˜¯è‡ªå·±çš„é”ï¼Œåˆ™é‡å…¥æ¬¡æ•°-1</span><br><br><span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">then</span> <span class="hljs-comment">-- åˆ¤æ–­æ˜¯å¦é‡å…¥æ¬¡æ•°æ˜¯å¦å·²ç»ä¸º0</span><br>    redis.call(<span class="hljs-string">&#x27;EXPIRE&#x27;</span>, key, releaseTime); <span class="hljs-comment">-- å¤§äº0è¯´æ˜ä¸èƒ½é‡Šæ”¾é”ï¼Œé‡ç½®æœ‰æ•ˆæœŸç„¶åè¿”å›</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;<br><span class="hljs-keyword">else</span><br>    redis.call(<span class="hljs-string">&#x27;DEL&#x27;</span>, key); <span class="hljs-comment">-- ç­‰äº0è¯´æ˜å¯ä»¥é‡Šæ”¾é”ï¼Œç›´æ¥åˆ é™¤</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>;<br><span class="hljs-keyword">end</span>;<br></code></pre></td></tr></table></figure><h3 id="3ï¼‰é«˜å¯ç”¨çš„é”"><a href="#3ï¼‰é«˜å¯ç”¨çš„é”" class="headerlink" title="3ï¼‰é«˜å¯ç”¨çš„é”"></a>3ï¼‰é«˜å¯ç”¨çš„é”</h3><p><code>é¢è¯•å®˜é—®é¢˜</code>ï¼šredisåˆ†å¸ƒå¼é”ä¾èµ–ä¸redisï¼Œå¦‚æœrediså®•æœºåˆ™é”å¤±æ•ˆã€‚å¦‚ä½•è§£å†³ï¼Ÿ</p><p>æ­¤æ—¶å¤§å¤šæ•°åŒå­¦ä¼šå›ç­”è¯´ï¼šæ­å»ºä¸»ä»é›†ç¾¤ï¼Œåšæ•°æ®å¤‡ä»½ã€‚</p><p>è¿™æ ·å°±è¿›å…¥äº†é™·é˜±ï¼Œå› ä¸ºé¢è¯•å®˜çš„ä¸‹ä¸€ä¸ªé—®é¢˜å°±æ¥äº†ï¼š</p><p><code>é¢è¯•å®˜é—®é¢˜</code>ï¼šå¦‚æœæ­å»ºä¸»ä»é›†ç¾¤åšæ•°æ®å¤‡ä»½æ—¶ï¼Œè¿›ç¨‹Aè·å–é”ï¼Œmasterè¿˜æ²¡æœ‰æŠŠæ•°æ®å¤‡ä»½åˆ°slaveï¼Œmasterå®•æœºï¼Œslaveå‡çº§ä¸ºmasterï¼Œæ­¤æ—¶åŸæ¥é”å¤±æ•ˆï¼Œå…¶å®ƒè¿›ç¨‹ä¹Ÿå¯ä»¥è·å–é”ï¼Œå‡ºç°å®‰å…¨é—®é¢˜ã€‚å¦‚ä½•è§£å†³ï¼Ÿ</p><p>å…³äºè¿™ä¸ªé—®é¢˜ï¼ŒRediså®˜ç½‘ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨RedLockæ€è·¯å¯ä»¥è§£å†³ï¼š</p><blockquote><p>åœ¨Redisçš„åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å‡è®¾æœ‰Nä¸ªRedis masterã€‚è¿™äº›èŠ‚ç‚¹å®Œå…¨äº’ç›¸ç‹¬ç«‹ï¼Œä¸å­˜åœ¨ä¸»ä»å¤åˆ¶æˆ–è€…å…¶ä»–é›†ç¾¤åè°ƒæœºåˆ¶ã€‚ä¹‹å‰æˆ‘ä»¬å·²ç»æè¿°äº†åœ¨Rediså•å®ä¾‹ä¸‹æ€ä¹ˆå®‰å…¨åœ°è·å–å’Œé‡Šæ”¾é”ã€‚æˆ‘ä»¬ç¡®ä¿å°†åœ¨æ¯ï¼ˆN)ä¸ªå®ä¾‹ä¸Šä½¿ç”¨æ­¤æ–¹æ³•è·å–å’Œé‡Šæ”¾é”ã€‚åœ¨è¿™ä¸ªæ ·ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‡è®¾æœ‰5ä¸ªRedis masterèŠ‚ç‚¹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒåˆç†çš„è®¾ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨5å°æœºå™¨ä¸Šé¢æˆ–è€…5å°è™šæ‹Ÿæœºä¸Šé¢è¿è¡Œè¿™äº›å®ä¾‹ï¼Œè¿™æ ·ä¿è¯ä»–ä»¬ä¸ä¼šåŒæ—¶éƒ½å®•æ‰ã€‚</p><p>ä¸ºäº†å–åˆ°é”ï¼Œå®¢æˆ·ç«¯åº”è¯¥æ‰§è¡Œä»¥ä¸‹æ“ä½œ:</p><ol><li>è·å–å½“å‰Unixæ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</li><li>ä¾æ¬¡å°è¯•ä»Nä¸ªå®ä¾‹ï¼Œä½¿ç”¨ç›¸åŒçš„keyå’Œéšæœºå€¼è·å–é”ã€‚åœ¨æ­¥éª¤2ï¼Œå½“å‘Redisè®¾ç½®é”æ—¶,å®¢æˆ·ç«¯åº”è¯¥è®¾ç½®ä¸€ä¸ªç½‘ç»œè¿æ¥å’Œå“åº”è¶…æ—¶æ—¶é—´ï¼Œè¿™ä¸ªè¶…æ—¶æ—¶é—´åº”è¯¥å°äºé”çš„å¤±æ•ˆæ—¶é—´ã€‚ä¾‹å¦‚ä½ çš„é”è‡ªåŠ¨å¤±æ•ˆæ—¶é—´ä¸º10ç§’ï¼Œåˆ™è¶…æ—¶æ—¶é—´åº”è¯¥åœ¨5-50æ¯«ç§’ä¹‹é—´ã€‚è¿™æ ·å¯ä»¥é¿å…æœåŠ¡å™¨ç«¯Rediså·²ç»æŒ‚æ‰çš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯è¿˜åœ¨æ­»æ­»åœ°ç­‰å¾…å“åº”ç»“æœã€‚å¦‚æœæœåŠ¡å™¨ç«¯æ²¡æœ‰åœ¨è§„å®šæ—¶é—´å†…å“åº”ï¼Œå®¢æˆ·ç«¯åº”è¯¥å°½å¿«å°è¯•å¦å¤–ä¸€ä¸ªRediså®ä¾‹ã€‚</li><li>å®¢æˆ·ç«¯ä½¿ç”¨å½“å‰æ—¶é—´å‡å»å¼€å§‹è·å–é”æ—¶é—´ï¼ˆæ­¥éª¤1è®°å½•çš„æ—¶é—´ï¼‰å°±å¾—åˆ°è·å–é”ä½¿ç”¨çš„æ—¶é—´ã€‚å½“ä¸”ä»…å½“ä»å¤§å¤šæ•°ï¼ˆè¿™é‡Œæ˜¯3ä¸ªèŠ‚ç‚¹ï¼‰çš„RedisèŠ‚ç‚¹éƒ½å–åˆ°é”ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ—¶é—´å°äºé”å¤±æ•ˆæ—¶é—´æ—¶ï¼Œé”æ‰ç®—è·å–æˆåŠŸã€‚</li><li>å¦‚æœå–åˆ°äº†é”ï¼Œkeyçš„çœŸæ­£æœ‰æ•ˆæ—¶é—´ç­‰äºæœ‰æ•ˆæ—¶é—´å‡å»è·å–é”æ‰€ä½¿ç”¨çš„æ—¶é—´ï¼ˆæ­¥éª¤3è®¡ç®—çš„ç»“æœï¼‰ã€‚</li><li>å¦‚æœå› ä¸ºæŸäº›åŸå› ï¼Œè·å–é”å¤±è´¥ï¼ˆ<em>æ²¡æœ‰</em>åœ¨è‡³å°‘N&#x2F;2+1ä¸ªRediså®ä¾‹å–åˆ°é”æˆ–è€…å–é”æ—¶é—´å·²ç»è¶…è¿‡äº†æœ‰æ•ˆæ—¶é—´ï¼‰ï¼Œå®¢æˆ·ç«¯åº”è¯¥åœ¨æ‰€æœ‰çš„Rediså®ä¾‹ä¸Šè¿›è¡Œè§£é”ï¼ˆå³ä¾¿æŸäº›Rediså®ä¾‹æ ¹æœ¬å°±æ²¡æœ‰åŠ é”æˆåŠŸï¼‰ã€‚</li></ol></blockquote><h2 id="3-11-å¦‚ä½•å®ç°æ•°æ®åº“ä¸ç¼“å­˜æ•°æ®ä¸€è‡´ï¼Ÿ"><a href="#3-11-å¦‚ä½•å®ç°æ•°æ®åº“ä¸ç¼“å­˜æ•°æ®ä¸€è‡´ï¼Ÿ" class="headerlink" title="3.11.å¦‚ä½•å®ç°æ•°æ®åº“ä¸ç¼“å­˜æ•°æ®ä¸€è‡´ï¼Ÿ"></a>3.11.å¦‚ä½•å®ç°æ•°æ®åº“ä¸ç¼“å­˜æ•°æ®ä¸€è‡´ï¼Ÿ</h2><p>é¢è¯•è¯æœ¯ï¼š</p><p>å®ç°æ–¹æ¡ˆæœ‰ä¸‹é¢å‡ ç§ï¼š</p><ul><li>æœ¬åœ°ç¼“å­˜åŒæ­¥ï¼šå½“å‰å¾®æœåŠ¡çš„æ•°æ®åº“æ•°æ®ä¸ç¼“å­˜æ•°æ®åŒæ­¥ï¼Œå¯ä»¥ç›´æ¥åœ¨æ•°æ®åº“ä¿®æ”¹æ—¶åŠ å…¥å¯¹Redisçš„ä¿®æ”¹é€»è¾‘ï¼Œä¿è¯ä¸€è‡´ã€‚</li><li>è·¨æœåŠ¡ç¼“å­˜åŒæ­¥ï¼šæœåŠ¡Aè°ƒç”¨äº†æœåŠ¡Bï¼Œå¹¶å¯¹æŸ¥è¯¢ç»“æœç¼“å­˜ã€‚æœåŠ¡Bæ•°æ®åº“ä¿®æ”¹ï¼Œå¯ä»¥é€šè¿‡MQé€šçŸ¥æœåŠ¡Aï¼ŒæœåŠ¡Aä¿®æ”¹Redisç¼“å­˜æ•°æ®</li><li>é€šç”¨æ–¹æ¡ˆï¼šä½¿ç”¨Canalæ¡†æ¶ï¼Œä¼ªè£…æˆMySQLçš„salveèŠ‚ç‚¹ï¼Œç›‘å¬MySQLçš„binLogå˜åŒ–ï¼Œç„¶åä¿®æ”¹Redisç¼“å­˜æ•°æ®</li></ul>]]></content>
    
    
    <categories>
      
      <category>å¾®æœåŠ¡ğŸ‘</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¾®æœåŠ¡ğŸ™Œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudâ€”â€”å®ç”¨ç‰ˆ</title>
    <link href="/Hexo/2022/03/03/SpringCloud%E5%AE%9E%E7%94%A8%E7%AF%8702/"/>
    <url>/Hexo/2022/03/03/SpringCloud%E5%AE%9E%E7%94%A8%E7%AF%8702/</url>
    
    <content type="html"><![CDATA[<h1 id="0-å­¦ä¹ ç›®æ ‡"><a href="#0-å­¦ä¹ ç›®æ ‡" class="headerlink" title="0.å­¦ä¹ ç›®æ ‡"></a>0.å­¦ä¹ ç›®æ ‡</h1><h1 id="1-Nacosé…ç½®ç®¡ç†"><a href="#1-Nacosé…ç½®ç®¡ç†" class="headerlink" title="1.Nacosé…ç½®ç®¡ç†"></a>1.Nacosé…ç½®ç®¡ç†</h1><p>Nacosé™¤äº†å¯ä»¥åšæ³¨å†Œä¸­å¿ƒï¼ŒåŒæ ·å¯ä»¥åšé…ç½®ç®¡ç†æ¥ä½¿ç”¨ã€‚</p><h2 id="1-1-ç»Ÿä¸€é…ç½®ç®¡ç†"><a href="#1-1-ç»Ÿä¸€é…ç½®ç®¡ç†" class="headerlink" title="1.1.ç»Ÿä¸€é…ç½®ç®¡ç†"></a>1.1.ç»Ÿä¸€é…ç½®ç®¡ç†</h2><p>å½“å¾®æœåŠ¡éƒ¨ç½²çš„å®ä¾‹è¶Šæ¥è¶Šå¤šï¼Œè¾¾åˆ°æ•°åã€æ•°ç™¾æ—¶ï¼Œé€ä¸ªä¿®æ”¹å¾®æœåŠ¡é…ç½®å°±ä¼šè®©äººæŠ“ç‹‚ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å‡ºé”™ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§ç»Ÿä¸€é…ç½®ç®¡ç†æ–¹æ¡ˆï¼Œå¯ä»¥é›†ä¸­ç®¡ç†æ‰€æœ‰å®ä¾‹çš„é…ç½®ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8d4c.png" alt="image-20210714164426792"></p><p>Nacosä¸€æ–¹é¢å¯ä»¥å°†é…ç½®é›†ä¸­ç®¡ç†ï¼Œå¦ä¸€æ–¹å¯ä»¥åœ¨é…ç½®å˜æ›´æ—¶ï¼ŒåŠæ—¶é€šçŸ¥å¾®æœåŠ¡ï¼Œå®ç°é…ç½®çš„çƒ­æ›´æ–°ã€‚</p><h3 id="1-1-1-åœ¨nacosä¸­æ·»åŠ é…ç½®æ–‡ä»¶"><a href="#1-1-1-åœ¨nacosä¸­æ·»åŠ é…ç½®æ–‡ä»¶" class="headerlink" title="1.1.1.åœ¨nacosä¸­æ·»åŠ é…ç½®æ–‡ä»¶"></a>1.1.1.åœ¨nacosä¸­æ·»åŠ é…ç½®æ–‡ä»¶</h3><p>å¦‚ä½•åœ¨nacosä¸­ç®¡ç†é…ç½®å‘¢ï¼Ÿ</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8da6.png" alt="image-20210714164742924"></p><p>ç„¶ååœ¨å¼¹å‡ºçš„è¡¨å•ä¸­ï¼Œå¡«å†™é…ç½®ä¿¡æ¯ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8d85.png" alt="image-20210714164856664"></p><blockquote><p>æ³¨æ„ï¼šé¡¹ç›®çš„æ ¸å¿ƒé…ç½®ï¼Œéœ€è¦çƒ­æ›´æ–°çš„é…ç½®æ‰æœ‰æ”¾åˆ°nacosç®¡ç†çš„å¿…è¦ã€‚åŸºæœ¬ä¸ä¼šå˜æ›´çš„ä¸€äº›é…ç½®è¿˜æ˜¯ä¿å­˜åœ¨å¾®æœåŠ¡æœ¬åœ°æ¯”è¾ƒå¥½ã€‚</p></blockquote><h3 id="1-1-2-ä»å¾®æœåŠ¡æ‹‰å–é…ç½®"><a href="#1-1-2-ä»å¾®æœåŠ¡æ‹‰å–é…ç½®" class="headerlink" title="1.1.2.ä»å¾®æœåŠ¡æ‹‰å–é…ç½®"></a>1.1.2.ä»å¾®æœåŠ¡æ‹‰å–é…ç½®</h3><p>å¾®æœåŠ¡è¦æ‹‰å–nacosä¸­ç®¡ç†çš„é…ç½®ï¼Œå¹¶ä¸”ä¸æœ¬åœ°çš„application.ymlé…ç½®åˆå¹¶ï¼Œæ‰èƒ½å®Œæˆé¡¹ç›®å¯åŠ¨ã€‚</p><p>ä½†å¦‚æœå°šæœªè¯»å–application.ymlï¼Œåˆå¦‚ä½•å¾—çŸ¥nacosåœ°å€å‘¢ï¼Ÿ</p><p>å› æ­¤springå¼•å…¥äº†ä¸€ç§æ–°çš„é…ç½®æ–‡ä»¶ï¼šbootstrap.yamlæ–‡ä»¶ï¼Œä¼šåœ¨application.ymlä¹‹å‰è¢«è¯»å–ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8d69.png" alt="img"></p><p>1ï¼‰å¼•å…¥nacos-configä¾èµ–</p><p>é¦–å…ˆï¼Œåœ¨user-serviceæœåŠ¡ä¸­ï¼Œå¼•å…¥nacos-configçš„å®¢æˆ·ç«¯ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--nacosé…ç½®ç®¡ç†ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2ï¼‰æ·»åŠ bootstrap.yaml</p><p>ç„¶åï¼Œåœ¨user-serviceä¸­æ·»åŠ ä¸€ä¸ªbootstrap.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">userservice</span> <span class="hljs-comment"># æœåŠ¡åç§°</span><br>  <span class="hljs-attr">profiles:</span><br>    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span> <span class="hljs-comment">#å¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œæ˜¯dev </span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span> <span class="hljs-comment"># Nacosåœ°å€</span><br>      <span class="hljs-attr">config:</span><br>        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span> <span class="hljs-comment"># æ–‡ä»¶åç¼€å</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œä¼šæ ¹æ®spring.cloud.nacos.server-addrè·å–nacosåœ°å€ï¼Œå†æ ¹æ®</p><p><code>$&#123;spring.application.name&#125;-$&#123;spring.profiles.active&#125;.$&#123;spring.cloud.nacos.config.file-extension&#125;</code>ä½œä¸ºæ–‡ä»¶idï¼Œæ¥è¯»å–é…ç½®ã€‚</p><p>æœ¬ä¾‹ä¸­ï¼Œå°±æ˜¯å»è¯»å–<code>userservice-dev.yaml</code>ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee94ad.png" alt="image-20210714170845901"></p><p>3ï¼‰è¯»å–nacosé…ç½®</p><p>åœ¨user-serviceä¸­çš„UserControllerä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘ï¼Œè¯»å–pattern.dateformaté…ç½®ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee936f.png" alt="image-20210714170337448"></p><p>å®Œæ•´ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.itcast.user.web;<br><br><span class="hljs-keyword">import</span> cn.itcast.user.pojo.User;<br><span class="hljs-keyword">import</span> cn.itcast.user.service.UserService;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;<br><br><span class="hljs-keyword">import</span> java.time.LocalDateTime;<br><span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;<br><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br><br>    <span class="hljs-meta">@Value(&quot;$&#123;pattern.dateformat&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String dateformat;<br>    <br>    <span class="hljs-meta">@GetMapping(&quot;now&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">now</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));<br>    &#125;<br>    <span class="hljs-comment">// ...ç•¥</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨é¡µé¢è®¿é—®ï¼Œå¯ä»¥çœ‹åˆ°æ•ˆæœï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee9334.png" alt="image-20210714170449612"></p><h2 id="1-2-é…ç½®çƒ­æ›´æ–°"><a href="#1-2-é…ç½®çƒ­æ›´æ–°" class="headerlink" title="1.2.é…ç½®çƒ­æ›´æ–°"></a>1.2.é…ç½®çƒ­æ›´æ–°</h2><p>æˆ‘ä»¬æœ€ç»ˆçš„ç›®çš„ï¼Œæ˜¯ä¿®æ”¹nacosä¸­çš„é…ç½®åï¼Œå¾®æœåŠ¡ä¸­æ— éœ€é‡å¯å³å¯è®©é…ç½®ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯<strong>é…ç½®çƒ­æ›´æ–°</strong>ã€‚</p><p>è¦å®ç°é…ç½®çƒ­æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼š</p><h3 id="1-2-1-æ–¹å¼ä¸€"><a href="#1-2-1-æ–¹å¼ä¸€" class="headerlink" title="1.2.1.æ–¹å¼ä¸€"></a>1.2.1.æ–¹å¼ä¸€</h3><p>åœ¨@Valueæ³¨å…¥çš„å˜é‡æ‰€åœ¨ç±»ä¸Šæ·»åŠ æ³¨è§£@RefreshScopeï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee94cb.png" alt="image-20210714171036335"></p><h3 id="1-2-2-æ–¹å¼äºŒ"><a href="#1-2-2-æ–¹å¼äºŒ" class="headerlink" title="1.2.2.æ–¹å¼äºŒ"></a>1.2.2.æ–¹å¼äºŒ</h3><p>ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ä»£æ›¿@Valueæ³¨è§£ã€‚</p><p>åœ¨user-serviceæœåŠ¡ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªç±»ï¼Œè¯»å–patterrn.dateformatå±æ€§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.itcast.user.config;<br><br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;pattern&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PatternProperties</span> &#123;<br>    <span class="hljs-keyword">private</span> String dateformat;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨UserControllerä¸­ä½¿ç”¨è¿™ä¸ªç±»ä»£æ›¿@Valueï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee9354.png" alt="image-20210714171316124"></p><p>å®Œæ•´ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.itcast.user.web;<br><br><span class="hljs-keyword">import</span> cn.itcast.user.config.PatternProperties;<br><span class="hljs-keyword">import</span> cn.itcast.user.pojo.User;<br><span class="hljs-keyword">import</span> cn.itcast.user.service.UserService;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-keyword">import</span> java.time.LocalDateTime;<br><span class="hljs-keyword">import</span> java.time.format.DateTimeFormatter;<br><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> PatternProperties patternProperties;<br><br>    <span class="hljs-meta">@GetMapping(&quot;now&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">now</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(patternProperties.getDateformat()));<br>    &#125;<br><br>    <span class="hljs-comment">// ç•¥</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="1-3-é…ç½®å…±äº«"><a href="#1-3-é…ç½®å…±äº«" class="headerlink" title="1.3.é…ç½®å…±äº«"></a>1.3.é…ç½®å…±äº«</h2><p>å…¶å®å¾®æœåŠ¡å¯åŠ¨æ—¶ï¼Œä¼šå»nacosè¯»å–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p><ul><li><p><code>[spring.application.name]-[spring.profiles.active].yaml</code>ï¼Œä¾‹å¦‚ï¼šuserservice-dev.yaml</p></li><li><p><code>[spring.application.name].yaml</code>ï¼Œä¾‹å¦‚ï¼šuserservice.yaml</p></li></ul><p>è€Œ<code>[spring.application.name].yaml</code>ä¸åŒ…å«ç¯å¢ƒï¼Œå› æ­¤å¯ä»¥è¢«å¤šä¸ªç¯å¢ƒå…±äº«ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥æµ‹è¯•é…ç½®å…±äº«</p><h3 id="1ï¼‰æ·»åŠ ä¸€ä¸ªç¯å¢ƒå…±äº«é…ç½®"><a href="#1ï¼‰æ·»åŠ ä¸€ä¸ªç¯å¢ƒå…±äº«é…ç½®" class="headerlink" title="1ï¼‰æ·»åŠ ä¸€ä¸ªç¯å¢ƒå…±äº«é…ç½®"></a>1ï¼‰æ·»åŠ ä¸€ä¸ªç¯å¢ƒå…±äº«é…ç½®</h3><p>æˆ‘ä»¬åœ¨nacosä¸­æ·»åŠ ä¸€ä¸ªuserservice.yamlæ–‡ä»¶ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9a87.png" alt="image-20210714173233650"></p><h3 id="2ï¼‰åœ¨user-serviceä¸­è¯»å–å…±äº«é…ç½®"><a href="#2ï¼‰åœ¨user-serviceä¸­è¯»å–å…±äº«é…ç½®" class="headerlink" title="2ï¼‰åœ¨user-serviceä¸­è¯»å–å…±äº«é…ç½®"></a>2ï¼‰åœ¨user-serviceä¸­è¯»å–å…±äº«é…ç½®</h3><p>åœ¨user-serviceæœåŠ¡ä¸­ï¼Œä¿®æ”¹PatternPropertiesç±»ï¼Œè¯»å–æ–°æ·»åŠ çš„å±æ€§ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9ae3.png" alt="image-20210714173324231"></p><p>åœ¨user-serviceæœåŠ¡ä¸­ï¼Œä¿®æ”¹UserControllerï¼Œæ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9ab0.png" alt="image-20210714173721309"></p><h3 id="3ï¼‰è¿è¡Œä¸¤ä¸ªUserApplicationï¼Œä½¿ç”¨ä¸åŒçš„profile"><a href="#3ï¼‰è¿è¡Œä¸¤ä¸ªUserApplicationï¼Œä½¿ç”¨ä¸åŒçš„profile" class="headerlink" title="3ï¼‰è¿è¡Œä¸¤ä¸ªUserApplicationï¼Œä½¿ç”¨ä¸åŒçš„profile"></a>3ï¼‰è¿è¡Œä¸¤ä¸ªUserApplicationï¼Œä½¿ç”¨ä¸åŒçš„profile</h3><p>ä¿®æ”¹UserApplication2è¿™ä¸ªå¯åŠ¨é¡¹ï¼Œæ”¹å˜å…¶profileå€¼ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9ac7.png" alt="image-20210714173538538"></p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9a9b.png" alt="image-20210714173519963"></p><p>è¿™æ ·ï¼ŒUserApplication(8081)ä½¿ç”¨çš„profileæ˜¯devï¼ŒUserApplication2(8082)ä½¿ç”¨çš„profileæ˜¯testã€‚</p><p>å¯åŠ¨UserApplicationå’ŒUserApplication2</p><p>è®¿é—®<a href="http://localhost:8081/user/prop%EF%BC%8C%E7%BB%93%E6%9E%9C%EF%BC%9A">http://localhost:8081/user/propï¼Œç»“æœï¼š</a></p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9afb.png" alt="image-20210714174313344"></p><p>è®¿é—®<a href="http://localhost:8082/user/prop%EF%BC%8C%E7%BB%93%E6%9E%9C%EF%BC%9A">http://localhost:8082/user/propï¼Œç»“æœï¼š</a></p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9b17.png" alt="image-20210714174424818"></p><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸ç®¡æ˜¯devï¼Œè¿˜æ˜¯testç¯å¢ƒï¼Œéƒ½è¯»å–åˆ°äº†envSharedValueè¿™ä¸ªå±æ€§çš„å€¼ã€‚</p><h3 id="4ï¼‰é…ç½®å…±äº«çš„ä¼˜å…ˆçº§"><a href="#4ï¼‰é…ç½®å…±äº«çš„ä¼˜å…ˆçº§" class="headerlink" title="4ï¼‰é…ç½®å…±äº«çš„ä¼˜å…ˆçº§"></a>4ï¼‰é…ç½®å…±äº«çš„ä¼˜å…ˆçº§</h3><p>å½“nacosã€æœåŠ¡æœ¬åœ°åŒæ—¶å‡ºç°ç›¸åŒå±æ€§æ—¶ï¼Œä¼˜å…ˆçº§æœ‰é«˜ä½ä¹‹åˆ†ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9b75.png" alt="image-20210714174623557"></p><h2 id="1-4-æ­å»ºNacosé›†ç¾¤"><a href="#1-4-æ­å»ºNacosé›†ç¾¤" class="headerlink" title="1.4.æ­å»ºNacosé›†ç¾¤"></a>1.4.æ­å»ºNacosé›†ç¾¤</h2><p>Nacosç”Ÿäº§ç¯å¢ƒä¸‹ä¸€å®šè¦éƒ¨ç½²ä¸ºé›†ç¾¤çŠ¶æ€ï¼Œéƒ¨ç½²æ–¹å¼å‚è€ƒè¯¾å‰èµ„æ–™ä¸­çš„æ–‡æ¡£ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9b36.png" alt="image-20210714174728042"></p><h1 id="2-Feignè¿œç¨‹è°ƒç”¨"><a href="#2-Feignè¿œç¨‹è°ƒç”¨" class="headerlink" title="2.Feignè¿œç¨‹è°ƒç”¨"></a>2.Feignè¿œç¨‹è°ƒç”¨</h1><p>å…ˆæ¥çœ‹æˆ‘ä»¬ä»¥å‰åˆ©ç”¨RestTemplateå‘èµ·è¿œç¨‹è°ƒç”¨çš„ä»£ç ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfc27f86abb2aee9b5b.png" alt="image-20210714174814204"></p><p>å­˜åœ¨ä¸‹é¢çš„é—®é¢˜ï¼š</p><p>â€¢ä»£ç å¯è¯»æ€§å·®ï¼Œç¼–ç¨‹ä½“éªŒä¸ç»Ÿä¸€</p><p>â€¢å‚æ•°å¤æ‚URLéš¾ä»¥ç»´æŠ¤</p><p>Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„httpå®¢æˆ·ç«¯ï¼Œå®˜æ–¹åœ°å€ï¼š<a href="https://github.com/OpenFeign/feign">https://github.com/OpenFeign/feign</a></p><p>å…¶ä½œç”¨å°±æ˜¯å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„å®ç°httpè¯·æ±‚çš„å‘é€ï¼Œè§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9b8c.png" alt="image-20210714174918088"></p><h2 id="2-1-Feignæ›¿ä»£RestTemplate"><a href="#2-1-Feignæ›¿ä»£RestTemplate" class="headerlink" title="2.1.Feignæ›¿ä»£RestTemplate"></a>2.1.Feignæ›¿ä»£RestTemplate</h2><p>Feginçš„ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><h3 id="1ï¼‰å¼•å…¥ä¾èµ–"><a href="#1ï¼‰å¼•å…¥ä¾èµ–" class="headerlink" title="1ï¼‰å¼•å…¥ä¾èµ–"></a>1ï¼‰å¼•å…¥ä¾èµ–</h3><p>æˆ‘ä»¬åœ¨order-serviceæœåŠ¡çš„pomæ–‡ä»¶ä¸­å¼•å…¥feignçš„ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2ï¼‰æ·»åŠ æ³¨è§£"><a href="#2ï¼‰æ·»åŠ æ³¨è§£" class="headerlink" title="2ï¼‰æ·»åŠ æ³¨è§£"></a>2ï¼‰æ·»åŠ æ³¨è§£</h3><p>åœ¨order-serviceçš„å¯åŠ¨ç±»æ·»åŠ æ³¨è§£å¼€å¯Feignçš„åŠŸèƒ½ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9bbe.png" alt="image-20210714175102524"></p><h3 id="3ï¼‰ç¼–å†™Feignçš„å®¢æˆ·ç«¯"><a href="#3ï¼‰ç¼–å†™Feignçš„å®¢æˆ·ç«¯" class="headerlink" title="3ï¼‰ç¼–å†™Feignçš„å®¢æˆ·ç«¯"></a>3ï¼‰ç¼–å†™Feignçš„å®¢æˆ·ç«¯</h3><p>åœ¨order-serviceä¸­æ–°å»ºä¸€ä¸ªæ¥å£ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.itcast.order.client;<br><br><span class="hljs-keyword">import</span> cn.itcast.order.pojo.User;<br><span class="hljs-keyword">import</span> org.springframework.cloud.openfeign.FeignClient;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;<br><br><span class="hljs-meta">@FeignClient(&quot;userservice&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserClient</span> &#123;<br>    <span class="hljs-meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span><br>    User <span class="hljs-title function_">findById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå®¢æˆ·ç«¯ä¸»è¦æ˜¯åŸºäºSpringMVCçš„æ³¨è§£æ¥å£°æ˜è¿œç¨‹è°ƒç”¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š</p><ul><li>æœåŠ¡åç§°ï¼šuserservice</li><li>è¯·æ±‚æ–¹å¼ï¼šGET</li><li>è¯·æ±‚è·¯å¾„ï¼š&#x2F;user&#x2F;{id}</li><li>è¯·æ±‚å‚æ•°ï¼šLong id</li><li>è¿”å›å€¼ç±»å‹ï¼šUser</li></ul><p>è¿™æ ·ï¼ŒFeignå°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‘é€httpè¯·æ±‚ï¼Œæ— éœ€è‡ªå·±ä½¿ç”¨RestTemplateæ¥å‘é€äº†ã€‚</p><h3 id="4ï¼‰æµ‹è¯•"><a href="#4ï¼‰æµ‹è¯•" class="headerlink" title="4ï¼‰æµ‹è¯•"></a>4ï¼‰æµ‹è¯•</h3><p>ä¿®æ”¹order-serviceä¸­çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ï¼Œä½¿ç”¨Feignå®¢æˆ·ç«¯ä»£æ›¿RestTemplateï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9ba1.png" alt="image-20210714175415087"></p><p>æ˜¯ä¸æ˜¯çœ‹èµ·æ¥ä¼˜é›…å¤šäº†ã€‚</p><h3 id="5ï¼‰æ€»ç»“"><a href="#5ï¼‰æ€»ç»“" class="headerlink" title="5ï¼‰æ€»ç»“"></a>5ï¼‰æ€»ç»“</h3><p>ä½¿ç”¨Feignçš„æ­¥éª¤ï¼š</p><p>â‘  å¼•å…¥ä¾èµ–</p><p>â‘¡ æ·»åŠ @EnableFeignClientsæ³¨è§£</p><p>â‘¢ ç¼–å†™FeignClientæ¥å£</p><p>â‘£ ä½¿ç”¨FeignClientä¸­å®šä¹‰çš„æ–¹æ³•ä»£æ›¿RestTemplate</p><h2 id="2-2-è‡ªå®šä¹‰é…ç½®"><a href="#2-2-è‡ªå®šä¹‰é…ç½®" class="headerlink" title="2.2.è‡ªå®šä¹‰é…ç½®"></a>2.2.è‡ªå®šä¹‰é…ç½®</h2><p>Feignå¯ä»¥æ”¯æŒå¾ˆå¤šçš„è‡ªå®šä¹‰é…ç½®ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><table><thead><tr><th>ç±»å‹</th><th>ä½œç”¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>feign.Logger.Level</strong></td><td>ä¿®æ”¹æ—¥å¿—çº§åˆ«</td><td>åŒ…å«å››ç§ä¸åŒçš„çº§åˆ«ï¼šNONEã€BASICã€HEADERSã€FULL</td></tr><tr><td>feign.codec.Decoder</td><td>å“åº”ç»“æœçš„è§£æå™¨</td><td>httpè¿œç¨‹è°ƒç”¨çš„ç»“æœåšè§£æï¼Œä¾‹å¦‚è§£æjsonå­—ç¬¦ä¸²ä¸ºjavaå¯¹è±¡</td></tr><tr><td>feign.codec.Encoder</td><td>è¯·æ±‚å‚æ•°ç¼–ç </td><td>å°†è¯·æ±‚å‚æ•°ç¼–ç ï¼Œä¾¿äºé€šè¿‡httpè¯·æ±‚å‘é€</td></tr><tr><td>feign. Contract</td><td>æ”¯æŒçš„æ³¨è§£æ ¼å¼</td><td>é»˜è®¤æ˜¯SpringMVCçš„æ³¨è§£</td></tr><tr><td>feign. Retryer</td><td>å¤±è´¥é‡è¯•æœºåˆ¶</td><td>è¯·æ±‚å¤±è´¥çš„é‡è¯•æœºåˆ¶ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰ï¼Œä¸è¿‡ä¼šä½¿ç”¨Ribbonçš„é‡è¯•</td></tr></tbody></table><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼å°±èƒ½æ»¡è¶³æˆ‘ä»¬ä½¿ç”¨ï¼Œå¦‚æœè¦è‡ªå®šä¹‰æ—¶ï¼Œåªéœ€è¦åˆ›å»ºè‡ªå®šä¹‰çš„@Beanè¦†ç›–é»˜è®¤Beanå³å¯ã€‚</p><p>ä¸‹é¢ä»¥æ—¥å¿—ä¸ºä¾‹æ¥æ¼”ç¤ºå¦‚ä½•è‡ªå®šä¹‰é…ç½®ã€‚</p><h3 id="2-2-1-é…ç½®æ–‡ä»¶æ–¹å¼"><a href="#2-2-1-é…ç½®æ–‡ä»¶æ–¹å¼" class="headerlink" title="2.2.1.é…ç½®æ–‡ä»¶æ–¹å¼"></a>2.2.1.é…ç½®æ–‡ä»¶æ–¹å¼</h3><p>åŸºäºé…ç½®æ–‡ä»¶ä¿®æ”¹feignçš„æ—¥å¿—çº§åˆ«å¯ä»¥é’ˆå¯¹å•ä¸ªæœåŠ¡ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">feign:</span>  <br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">config:</span> <br>      <span class="hljs-attr">userservice:</span> <span class="hljs-comment"># é’ˆå¯¹æŸä¸ªå¾®æœåŠ¡çš„é…ç½®</span><br>        <span class="hljs-attr">loggerLevel:</span> <span class="hljs-string">FULL</span> <span class="hljs-comment">#  æ—¥å¿—çº§åˆ« </span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é’ˆå¯¹æ‰€æœ‰æœåŠ¡ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">feign:</span>  <br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">config:</span> <br>      <span class="hljs-attr">default:</span> <span class="hljs-comment"># è¿™é‡Œç”¨defaultå°±æ˜¯å…¨å±€é…ç½®ï¼Œå¦‚æœæ˜¯å†™æœåŠ¡åç§°ï¼Œåˆ™æ˜¯é’ˆå¯¹æŸä¸ªå¾®æœåŠ¡çš„é…ç½®</span><br>        <span class="hljs-attr">loggerLevel:</span> <span class="hljs-string">FULL</span> <span class="hljs-comment">#  æ—¥å¿—çº§åˆ« </span><br></code></pre></td></tr></table></figure><p>è€Œæ—¥å¿—çš„çº§åˆ«åˆ†ä¸ºå››ç§ï¼š</p><ul><li>NONEï¼šä¸è®°å½•ä»»ä½•æ—¥å¿—ä¿¡æ¯ï¼Œè¿™æ˜¯é»˜è®¤å€¼ã€‚</li><li>BASICï¼šä»…è®°å½•è¯·æ±‚çš„æ–¹æ³•ï¼ŒURLä»¥åŠå“åº”çŠ¶æ€ç å’Œæ‰§è¡Œæ—¶é—´</li><li>HEADERSï¼šåœ¨BASICçš„åŸºç¡€ä¸Šï¼Œé¢å¤–è®°å½•äº†è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯</li><li>FULLï¼šè®°å½•æ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„æ˜ç»†ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯ã€è¯·æ±‚ä½“ã€å…ƒæ•°æ®ã€‚</li></ul><h3 id="2-2-2-Javaä»£ç æ–¹å¼"><a href="#2-2-2-Javaä»£ç æ–¹å¼" class="headerlink" title="2.2.2.Javaä»£ç æ–¹å¼"></a>2.2.2.Javaä»£ç æ–¹å¼</h3><p>ä¹Ÿå¯ä»¥åŸºäºJavaä»£ç æ¥ä¿®æ”¹æ—¥å¿—çº§åˆ«ï¼Œå…ˆå£°æ˜ä¸€ä¸ªç±»ï¼Œç„¶åå£°æ˜ä¸€ä¸ªLogger.Levelçš„å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultFeignConfiguration</span>  &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Logger.Level <span class="hljs-title function_">feignLogLevel</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> Logger.Level.BASIC; <span class="hljs-comment">// æ—¥å¿—çº§åˆ«ä¸ºBASIC</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœè¦<strong>å…¨å±€ç”Ÿæ•ˆ</strong>ï¼Œå°†å…¶æ”¾åˆ°å¯åŠ¨ç±»çš„@EnableFeignClientsè¿™ä¸ªæ³¨è§£ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableFeignClients(defaultConfiguration = DefaultFeignConfiguration .class)</span> <br></code></pre></td></tr></table></figure><p>å¦‚æœæ˜¯<strong>å±€éƒ¨ç”Ÿæ•ˆ</strong>ï¼Œåˆ™æŠŠå®ƒæ”¾åˆ°å¯¹åº”çš„@FeignClientè¿™ä¸ªæ³¨è§£ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FeignClient(value = &quot;userservice&quot;, configuration = DefaultFeignConfiguration .class)</span> <br></code></pre></td></tr></table></figure><h2 id="2-3-Feignä½¿ç”¨ä¼˜åŒ–"><a href="#2-3-Feignä½¿ç”¨ä¼˜åŒ–" class="headerlink" title="2.3.Feignä½¿ç”¨ä¼˜åŒ–"></a>2.3.Feignä½¿ç”¨ä¼˜åŒ–</h2><p>Feignåº•å±‚å‘èµ·httpè¯·æ±‚ï¼Œä¾èµ–äºå…¶å®ƒçš„æ¡†æ¶ã€‚å…¶åº•å±‚å®¢æˆ·ç«¯å®ç°åŒ…æ‹¬ï¼š</p><p>â€¢URLConnectionï¼šé»˜è®¤å®ç°ï¼Œä¸æ”¯æŒè¿æ¥æ± </p><p>â€¢Apache HttpClient ï¼šæ”¯æŒè¿æ¥æ± </p><p>â€¢OKHttpï¼šæ”¯æŒè¿æ¥æ± </p><p>å› æ­¤æé«˜Feignçš„æ€§èƒ½ä¸»è¦æ‰‹æ®µå°±æ˜¯ä½¿ç”¨<strong>è¿æ¥æ± </strong>ä»£æ›¿é»˜è®¤çš„URLConnectionã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ç”¨Apacheçš„HttpClientæ¥æ¼”ç¤ºã€‚</p><p>1ï¼‰å¼•å…¥ä¾èµ–</p><p>åœ¨order-serviceçš„pomæ–‡ä»¶ä¸­å¼•å…¥Apacheçš„HttpClientä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--httpClientçš„ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>feign-httpclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2ï¼‰é…ç½®è¿æ¥æ± </p><p>åœ¨order-serviceçš„application.ymlä¸­æ·»åŠ é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">feign:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">config:</span><br>      <span class="hljs-attr">default:</span> <span class="hljs-comment"># defaultå…¨å±€çš„é…ç½®</span><br>        <span class="hljs-attr">loggerLevel:</span> <span class="hljs-string">BASIC</span> <span class="hljs-comment"># æ—¥å¿—çº§åˆ«ï¼ŒBASICå°±æ˜¯åŸºæœ¬çš„è¯·æ±‚å’Œå“åº”ä¿¡æ¯</span><br>  <span class="hljs-attr">httpclient:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¼€å¯feignå¯¹HttpClientçš„æ”¯æŒ</span><br>    <span class="hljs-attr">max-connections:</span> <span class="hljs-number">200</span> <span class="hljs-comment"># æœ€å¤§çš„è¿æ¥æ•°</span><br>    <span class="hljs-attr">max-connections-per-route:</span> <span class="hljs-number">50</span> <span class="hljs-comment"># æ¯ä¸ªè·¯å¾„çš„æœ€å¤§è¿æ¥æ•°</span><br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œåœ¨FeignClientFactoryBeanä¸­çš„loadBalanceæ–¹æ³•ä¸­æ‰“æ–­ç‚¹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9bd6.png" alt="image-20210714185925910"></p><p>Debugæ–¹å¼å¯åŠ¨order-serviceæœåŠ¡ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œçš„clientï¼Œåº•å±‚å°±æ˜¯Apache HttpClientï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9cb6.png" alt="image-20210714190041542"></p><p>æ€»ç»“ï¼ŒFeignçš„ä¼˜åŒ–ï¼š</p><p>1.æ—¥å¿—çº§åˆ«å°½é‡ç”¨basic</p><p>2.ä½¿ç”¨HttpClientæˆ–OKHttpä»£æ›¿URLConnection</p><p>â‘   å¼•å…¥feign-httpClientä¾èµ–</p><p>â‘¡  é…ç½®æ–‡ä»¶å¼€å¯httpClientåŠŸèƒ½ï¼Œè®¾ç½®è¿æ¥æ± å‚æ•°</p><h2 id="2-4-æœ€ä½³å®è·µ"><a href="#2-4-æœ€ä½³å®è·µ" class="headerlink" title="2.4.æœ€ä½³å®è·µ"></a>2.4.æœ€ä½³å®è·µ</h2><p>æ‰€è°“æœ€è¿‘å®è·µï¼Œå°±æ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­æ€»ç»“çš„ç»éªŒï¼Œæœ€å¥½çš„ä¸€ç§ä½¿ç”¨æ–¹å¼ã€‚</p><p>è‡ªä¹ è§‚å¯Ÿå¯ä»¥å‘ç°ï¼ŒFeignçš„å®¢æˆ·ç«¯ä¸æœåŠ¡æä¾›è€…çš„controllerä»£ç éå¸¸ç›¸ä¼¼ï¼š</p><p>feignå®¢æˆ·ç«¯ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9cfb.png" alt="image-20210714190542730"></p><p>UserControllerï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9ca3.png" alt="image-20210714190528450"></p><p>æœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ç®€åŒ–è¿™ç§é‡å¤çš„ä»£ç ç¼–å†™å‘¢ï¼Ÿ</p><h3 id="2-4-1-ç»§æ‰¿æ–¹å¼"><a href="#2-4-1-ç»§æ‰¿æ–¹å¼" class="headerlink" title="2.4.1.ç»§æ‰¿æ–¹å¼"></a>2.4.1.ç»§æ‰¿æ–¹å¼</h3><p>ä¸€æ ·çš„ä»£ç å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å…±äº«ï¼š</p><p>1ï¼‰å®šä¹‰ä¸€ä¸ªAPIæ¥å£ï¼Œåˆ©ç”¨å®šä¹‰æ–¹æ³•ï¼Œå¹¶åŸºäºSpringMVCæ³¨è§£åšå£°æ˜ã€‚</p><p>2ï¼‰Feignå®¢æˆ·ç«¯å’ŒControlleréƒ½é›†æˆæ”¹æ¥å£</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9d41.png" alt="image-20210714190640857"></p><p>ä¼˜ç‚¹ï¼š</p><ul><li>ç®€å•</li><li>å®ç°äº†ä»£ç å…±äº«</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li><p>æœåŠ¡æä¾›æ–¹ã€æœåŠ¡æ¶ˆè´¹æ–¹ç´§è€¦åˆ</p></li><li><p>å‚æ•°åˆ—è¡¨ä¸­çš„æ³¨è§£æ˜ å°„å¹¶ä¸ä¼šç»§æ‰¿ï¼Œå› æ­¤Controllerä¸­å¿…é¡»å†æ¬¡å£°æ˜æ–¹æ³•ã€å‚æ•°åˆ—è¡¨ã€æ³¨è§£</p></li></ul><h3 id="2-4-2-æŠ½å–æ–¹å¼"><a href="#2-4-2-æŠ½å–æ–¹å¼" class="headerlink" title="2.4.2.æŠ½å–æ–¹å¼"></a>2.4.2.æŠ½å–æ–¹å¼</h3><p>å°†Feignçš„ClientæŠ½å–ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œå¹¶ä¸”æŠŠæ¥å£æœ‰å…³çš„POJOã€é»˜è®¤çš„Feigné…ç½®éƒ½æ”¾åˆ°è¿™ä¸ªæ¨¡å—ä¸­ï¼Œæä¾›ç»™æ‰€æœ‰æ¶ˆè´¹è€…ä½¿ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œå°†UserClientã€Userã€Feignçš„é»˜è®¤é…ç½®éƒ½æŠ½å–åˆ°ä¸€ä¸ªfeign-apiåŒ…ä¸­ï¼Œæ‰€æœ‰å¾®æœåŠ¡å¼•ç”¨è¯¥ä¾èµ–åŒ…ï¼Œå³å¯ç›´æ¥ä½¿ç”¨ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9c78.png" alt="image-20210714214041796"></p><h3 id="2-4-3-å®ç°åŸºäºæŠ½å–çš„æœ€ä½³å®è·µ"><a href="#2-4-3-å®ç°åŸºäºæŠ½å–çš„æœ€ä½³å®è·µ" class="headerlink" title="2.4.3.å®ç°åŸºäºæŠ½å–çš„æœ€ä½³å®è·µ"></a>2.4.3.å®ç°åŸºäºæŠ½å–çš„æœ€ä½³å®è·µ</h3><h4 id="1ï¼‰æŠ½å–"><a href="#1ï¼‰æŠ½å–" class="headerlink" title="1ï¼‰æŠ½å–"></a>1ï¼‰æŠ½å–</h4><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªmoduleï¼Œå‘½åä¸ºfeign-apiï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9bea.png" alt="image-20210714204557771"></p><p>é¡¹ç›®ç»“æ„ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9c4a.png" alt="image-20210714204656214"></p><p>åœ¨feign-apiä¸­ç„¶åå¼•å…¥feignçš„starterä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œorder-serviceä¸­ç¼–å†™çš„UserClientã€Userã€DefaultFeignConfigurationéƒ½å¤åˆ¶åˆ°feign-apié¡¹ç›®ä¸­</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9d2f.png" alt="image-20210714205221970"></p><h4 id="2ï¼‰åœ¨order-serviceä¸­ä½¿ç”¨feign-api"><a href="#2ï¼‰åœ¨order-serviceä¸­ä½¿ç”¨feign-api" class="headerlink" title="2ï¼‰åœ¨order-serviceä¸­ä½¿ç”¨feign-api"></a>2ï¼‰åœ¨order-serviceä¸­ä½¿ç”¨feign-api</h4><p>é¦–å…ˆï¼Œåˆ é™¤order-serviceä¸­çš„UserClientã€Userã€DefaultFeignConfigurationç­‰ç±»æˆ–æ¥å£ã€‚</p><p>åœ¨order-serviceçš„pomæ–‡ä»¶ä¸­ä¸­å¼•å…¥feign-apiçš„ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.itcast.demo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>feign-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¿®æ”¹order-serviceä¸­çš„æ‰€æœ‰ä¸ä¸Šè¿°ä¸‰ä¸ªç»„ä»¶æœ‰å…³çš„å¯¼åŒ…éƒ¨åˆ†ï¼Œæ”¹æˆå¯¼å…¥feign-apiä¸­çš„åŒ…</p><h4 id="3ï¼‰é‡å¯æµ‹è¯•"><a href="#3ï¼‰é‡å¯æµ‹è¯•" class="headerlink" title="3ï¼‰é‡å¯æµ‹è¯•"></a>3ï¼‰é‡å¯æµ‹è¯•</h4><p>é‡å¯åï¼Œå‘ç°æœåŠ¡æŠ¥é”™äº†ï¼š</p><p><img src="/Hexo/assets/image-20210714205623048.png" alt="image-20210714205623048"></p><p>è¿™æ˜¯å› ä¸ºUserClientç°åœ¨åœ¨cn.itcast.feign.clientsåŒ…ä¸‹ï¼Œ</p><p>è€Œorder-serviceçš„@EnableFeignClientsæ³¨è§£æ˜¯åœ¨cn.itcast.orderåŒ…ä¸‹ï¼Œä¸åœ¨åŒä¸€ä¸ªåŒ…ï¼Œæ— æ³•æ‰«æåˆ°UserClientã€‚</p><h4 id="4ï¼‰è§£å†³æ‰«æåŒ…é—®é¢˜"><a href="#4ï¼‰è§£å†³æ‰«æåŒ…é—®é¢˜" class="headerlink" title="4ï¼‰è§£å†³æ‰«æåŒ…é—®é¢˜"></a>4ï¼‰è§£å†³æ‰«æåŒ…é—®é¢˜</h4><p>æ–¹å¼ä¸€ï¼š</p><p>æŒ‡å®šFeignåº”è¯¥æ‰«æçš„åŒ…ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableFeignClients(basePackages = &quot;cn.itcast.feign.clients&quot;)</span><br></code></pre></td></tr></table></figure><p>æ–¹å¼äºŒï¼š</p><p>æŒ‡å®šéœ€è¦åŠ è½½çš„Clientæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableFeignClients(clients = &#123;UserClient.class&#125;)</span><br></code></pre></td></tr></table></figure><h1 id="3-GatewayæœåŠ¡ç½‘å…³"><a href="#3-GatewayæœåŠ¡ç½‘å…³" class="headerlink" title="3.GatewayæœåŠ¡ç½‘å…³"></a>3.GatewayæœåŠ¡ç½‘å…³</h1><p>Spring Cloud Gateway æ˜¯ Spring Cloud çš„ä¸€ä¸ªå…¨æ–°é¡¹ç›®ï¼Œè¯¥é¡¹ç›®æ˜¯åŸºäº Spring 5.0ï¼ŒSpring Boot 2.0 å’Œ Project Reactor ç­‰å“åº”å¼ç¼–ç¨‹å’Œäº‹ä»¶æµæŠ€æœ¯å¼€å‘çš„ç½‘å…³ï¼Œå®ƒæ—¨åœ¨ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›ä¸€ç§ç®€å•æœ‰æ•ˆçš„ç»Ÿä¸€çš„ API è·¯ç”±ç®¡ç†æ–¹å¼ã€‚</p><h2 id="3-1-ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³"><a href="#3-1-ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³" class="headerlink" title="3.1.ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³"></a>3.1.ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³</h2><p>Gatewayç½‘å…³æ˜¯æˆ‘ä»¬æœåŠ¡çš„å®ˆé—¨ç¥ï¼Œæ‰€æœ‰å¾®æœåŠ¡çš„ç»Ÿä¸€å…¥å£ã€‚</p><p>ç½‘å…³çš„<strong>æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§</strong>ï¼š</p><ul><li>è¯·æ±‚è·¯ç”±</li><li>æƒé™æ§åˆ¶</li><li>é™æµ</li></ul><p>æ¶æ„å›¾ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9c8f.png" alt="image-20210714210131152"></p><p><strong>æƒé™æ§åˆ¶</strong>ï¼šç½‘å…³ä½œä¸ºå¾®æœåŠ¡å…¥å£ï¼Œéœ€è¦æ ¡éªŒç”¨æˆ·æ˜¯æ˜¯å¦æœ‰è¯·æ±‚èµ„æ ¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œæ‹¦æˆªã€‚</p><p><strong>è·¯ç”±å’Œè´Ÿè½½å‡è¡¡</strong>ï¼šä¸€åˆ‡è¯·æ±‚éƒ½å¿…é¡»å…ˆç»è¿‡gatewayï¼Œä½†ç½‘å…³ä¸å¤„ç†ä¸šåŠ¡ï¼Œè€Œæ˜¯æ ¹æ®æŸç§è§„åˆ™ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°æŸä¸ªå¾®æœåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè·¯ç”±ã€‚å½“ç„¶è·¯ç”±çš„ç›®æ ‡æœåŠ¡æœ‰å¤šä¸ªæ—¶ï¼Œè¿˜éœ€è¦åšè´Ÿè½½å‡è¡¡ã€‚</p><p><strong>é™æµ</strong>ï¼šå½“è¯·æ±‚æµé‡è¿‡é«˜æ—¶ï¼Œåœ¨ç½‘å…³ä¸­æŒ‰ç…§ä¸‹æµçš„å¾®æœåŠ¡èƒ½å¤Ÿæ¥å—çš„é€Ÿåº¦æ¥æ”¾è¡Œè¯·æ±‚ï¼Œé¿å…æœåŠ¡å‹åŠ›è¿‡å¤§ã€‚</p><p>åœ¨SpringCloudä¸­ç½‘å…³çš„å®ç°åŒ…æ‹¬ä¸¤ç§ï¼š</p><ul><li>gateway</li><li>zuul</li></ul><p>Zuulæ˜¯åŸºäºServletçš„å®ç°ï¼Œå±äºé˜»å¡å¼ç¼–ç¨‹ã€‚è€ŒSpringCloudGatewayåˆ™æ˜¯åŸºäºSpring5ä¸­æä¾›çš„WebFluxï¼Œå±äºå“åº”å¼ç¼–ç¨‹çš„å®ç°ï¼Œå…·å¤‡æ›´å¥½çš„æ€§èƒ½ã€‚</p><h2 id="3-2-gatewayå¿«é€Ÿå…¥é—¨"><a href="#3-2-gatewayå¿«é€Ÿå…¥é—¨" class="headerlink" title="3.2.gatewayå¿«é€Ÿå…¥é—¨"></a>3.2.gatewayå¿«é€Ÿå…¥é—¨</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¼”ç¤ºä¸‹ç½‘å…³çš„åŸºæœ¬è·¯ç”±åŠŸèƒ½ã€‚åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ›å»ºSpringBootå·¥ç¨‹gatewayï¼Œå¼•å…¥ç½‘å…³ä¾èµ–</li><li>ç¼–å†™å¯åŠ¨ç±»</li><li>ç¼–å†™åŸºç¡€é…ç½®å’Œè·¯ç”±è§„åˆ™</li><li>å¯åŠ¨ç½‘å…³æœåŠ¡è¿›è¡Œæµ‹è¯•</li></ol><h3 id="1ï¼‰åˆ›å»ºgatewayæœåŠ¡ï¼Œå¼•å…¥ä¾èµ–"><a href="#1ï¼‰åˆ›å»ºgatewayæœåŠ¡ï¼Œå¼•å…¥ä¾èµ–" class="headerlink" title="1ï¼‰åˆ›å»ºgatewayæœåŠ¡ï¼Œå¼•å…¥ä¾èµ–"></a>1ï¼‰åˆ›å»ºgatewayæœåŠ¡ï¼Œå¼•å…¥ä¾èµ–</h3><p>åˆ›å»ºæœåŠ¡ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9c63.png" alt="image-20210714210919458"></p><p>å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç½‘å…³--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--nacosæœåŠ¡å‘ç°ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ç¼–å†™å¯åŠ¨ç±»"><a href="#2ï¼‰ç¼–å†™å¯åŠ¨ç±»" class="headerlink" title="2ï¼‰ç¼–å†™å¯åŠ¨ç±»"></a>2ï¼‰ç¼–å†™å¯åŠ¨ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.itcast.gateway;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GatewayApplication</span> &#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>SpringApplication.run(GatewayApplication.class, args);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3ï¼‰ç¼–å†™åŸºç¡€é…ç½®å’Œè·¯ç”±è§„åˆ™"><a href="#3ï¼‰ç¼–å†™åŸºç¡€é…ç½®å’Œè·¯ç”±è§„åˆ™" class="headerlink" title="3ï¼‰ç¼–å†™åŸºç¡€é…ç½®å’Œè·¯ç”±è§„åˆ™"></a>3ï¼‰ç¼–å†™åŸºç¡€é…ç½®å’Œè·¯ç”±è§„åˆ™</h3><p>åˆ›å»ºapplication.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">10010</span> <span class="hljs-comment"># ç½‘å…³ç«¯å£</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">gateway</span> <span class="hljs-comment"># æœåŠ¡åç§°</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span> <span class="hljs-comment"># nacosåœ°å€</span><br>    <span class="hljs-attr">gateway:</span> <br>      <span class="hljs-attr">routes:</span> <span class="hljs-comment"># ç½‘å…³è·¯ç”±é…ç½®</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">user-service</span> <span class="hljs-comment"># è·¯ç”±idï¼Œè‡ªå®šä¹‰ï¼Œåªè¦å”¯ä¸€å³å¯</span><br>          <span class="hljs-comment"># uri: http://127.0.0.1:8081 # è·¯ç”±çš„ç›®æ ‡åœ°å€ httpå°±æ˜¯å›ºå®šåœ°å€</span><br>          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://userservice</span> <span class="hljs-comment"># è·¯ç”±çš„ç›®æ ‡åœ°å€ lbå°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œåé¢è·ŸæœåŠ¡åç§°</span><br>          <span class="hljs-attr">predicates:</span> <span class="hljs-comment"># è·¯ç”±æ–­è¨€ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè·¯ç”±è§„åˆ™çš„æ¡ä»¶</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/user/**</span> <span class="hljs-comment"># è¿™ä¸ªæ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œåªè¦ä»¥/user/å¼€å¤´å°±ç¬¦åˆè¦æ±‚</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†ç¬¦åˆ<code>Path</code> è§„åˆ™çš„ä¸€åˆ‡è¯·æ±‚ï¼Œéƒ½ä»£ç†åˆ° <code>uri</code>å‚æ•°æŒ‡å®šçš„åœ°å€ã€‚</p><p>æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°† <code>/user/**</code>å¼€å¤´çš„è¯·æ±‚ï¼Œä»£ç†åˆ°<code>lb://userservice</code>ï¼Œlbæ˜¯è´Ÿè½½å‡è¡¡ï¼Œæ ¹æ®æœåŠ¡åæ‹‰å–æœåŠ¡åˆ—è¡¨ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚</p><h3 id="4ï¼‰é‡å¯æµ‹è¯•"><a href="#4ï¼‰é‡å¯æµ‹è¯•" class="headerlink" title="4ï¼‰é‡å¯æµ‹è¯•"></a>4ï¼‰é‡å¯æµ‹è¯•</h3><p>é‡å¯ç½‘å…³ï¼Œè®¿é—®<a href="http://localhost:10010/user/1%E6%97%B6%EF%BC%8C%E7%AC%A6%E5%90%88%60/user/**%60%E8%A7%84%E5%88%99%EF%BC%8C%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E5%88%B0uri%EF%BC%9Ahttp://userservice/user/1%EF%BC%8C%E5%BE%97%E5%88%B0%E4%BA%86%E7%BB%93%E6%9E%9C%EF%BC%9A">http://localhost:10010/user/1æ—¶ï¼Œç¬¦åˆ`/user/**`è§„åˆ™ï¼Œè¯·æ±‚è½¬å‘åˆ°uriï¼šhttp://userservice/user/1ï¼Œå¾—åˆ°äº†ç»“æœï¼š</a></p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9c14.png" alt="image-20210714211908341"></p><h3 id="5ï¼‰ç½‘å…³è·¯ç”±çš„æµç¨‹å›¾"><a href="#5ï¼‰ç½‘å…³è·¯ç”±çš„æµç¨‹å›¾" class="headerlink" title="5ï¼‰ç½‘å…³è·¯ç”±çš„æµç¨‹å›¾"></a>5ï¼‰ç½‘å…³è·¯ç”±çš„æµç¨‹å›¾</h3><p>æ•´ä¸ªè®¿é—®çš„æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9c00.png" alt="image-20210714211742956"></p><p>æ€»ç»“ï¼š</p><p>ç½‘å…³æ­å»ºæ­¥éª¤ï¼š</p><ol><li><p>åˆ›å»ºé¡¹ç›®ï¼Œå¼•å…¥nacosæœåŠ¡å‘ç°å’Œgatewayä¾èµ–</p></li><li><p>é…ç½®application.ymlï¼ŒåŒ…æ‹¬æœåŠ¡åŸºæœ¬ä¿¡æ¯ã€nacosåœ°å€ã€è·¯ç”±</p></li></ol><p>è·¯ç”±é…ç½®åŒ…æ‹¬ï¼š</p><ol><li><p>è·¯ç”±idï¼šè·¯ç”±çš„å”¯ä¸€æ ‡ç¤º</p></li><li><p>è·¯ç”±ç›®æ ‡ï¼ˆuriï¼‰ï¼šè·¯ç”±çš„ç›®æ ‡åœ°å€ï¼Œhttpä»£è¡¨å›ºå®šåœ°å€ï¼Œlbä»£è¡¨æ ¹æ®æœåŠ¡åè´Ÿè½½å‡è¡¡</p></li><li><p>è·¯ç”±æ–­è¨€ï¼ˆpredicatesï¼‰ï¼šåˆ¤æ–­è·¯ç”±çš„è§„åˆ™ï¼Œ</p></li><li><p>è·¯ç”±è¿‡æ»¤å™¨ï¼ˆfiltersï¼‰ï¼šå¯¹è¯·æ±‚æˆ–å“åº”åšå¤„ç†</p></li></ol><p>æ¥ä¸‹æ¥ï¼Œå°±é‡ç‚¹æ¥å­¦ä¹ è·¯ç”±æ–­è¨€å’Œè·¯ç”±è¿‡æ»¤å™¨çš„è¯¦ç»†çŸ¥è¯†</p><h2 id="3-3-æ–­è¨€å·¥å‚"><a href="#3-3-æ–­è¨€å·¥å‚" class="headerlink" title="3.3.æ–­è¨€å·¥å‚"></a>3.3.æ–­è¨€å·¥å‚</h2><p>æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å†™çš„æ–­è¨€è§„åˆ™åªæ˜¯å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²ä¼šè¢«Predicate Factoryè¯»å–å¹¶å¤„ç†ï¼Œè½¬å˜ä¸ºè·¯ç”±åˆ¤æ–­çš„æ¡ä»¶</p><p>ä¾‹å¦‚Path&#x3D;&#x2F;user&#x2F;**æ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯ç”±</p><p><code>org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory</code>ç±»æ¥</p><p>å¤„ç†çš„ï¼Œåƒè¿™æ ·çš„æ–­è¨€å·¥å‚åœ¨SpringCloudGatewayè¿˜æœ‰åå‡ ä¸ª:</p><table><thead><tr><th><strong>åç§°</strong></th><th><strong>è¯´æ˜</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td>After</td><td>æ˜¯æŸä¸ªæ—¶é—´ç‚¹åçš„è¯·æ±‚</td><td>-  After&#x3D;2037-01-20T17:42:47.789-07:00[America&#x2F;Denver]</td></tr><tr><td>Before</td><td>æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚</td><td>-  Before&#x3D;2031-04-13T15:14:47.433+08:00[Asia&#x2F;Shanghai]</td></tr><tr><td>Between</td><td>æ˜¯æŸä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚</td><td>-  Between&#x3D;2037-01-20T17:42:47.789-07:00[America&#x2F;Denver],  2037-01-21T17:42:47.789-07:00[America&#x2F;Denver]</td></tr><tr><td>Cookie</td><td>è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›cookie</td><td>- Cookie&#x3D;chocolate, ch.p</td></tr><tr><td>Header</td><td>è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›header</td><td>- Header&#x3D;X-Request-Id, \d+</td></tr><tr><td>Host</td><td>è¯·æ±‚å¿…é¡»æ˜¯è®¿é—®æŸä¸ªhostï¼ˆåŸŸåï¼‰</td><td>-  Host&#x3D;<strong>.somehost.org,</strong>.anotherhost.org</td></tr><tr><td>Method</td><td>è¯·æ±‚æ–¹å¼å¿…é¡»æ˜¯æŒ‡å®šæ–¹å¼</td><td>- Method&#x3D;GET,POST</td></tr><tr><td>Path</td><td>è¯·æ±‚è·¯å¾„å¿…é¡»ç¬¦åˆæŒ‡å®šè§„åˆ™</td><td>- Path&#x3D;&#x2F;red&#x2F;{segment},&#x2F;blue&#x2F;**</td></tr><tr><td>Query</td><td>è¯·æ±‚å‚æ•°å¿…é¡»åŒ…å«æŒ‡å®šå‚æ•°</td><td>- Query&#x3D;name, Jackæˆ–è€…-  Query&#x3D;name</td></tr><tr><td>RemoteAddr</td><td>è¯·æ±‚è€…çš„ipå¿…é¡»æ˜¯æŒ‡å®šèŒƒå›´</td><td>- RemoteAddr&#x3D;192.168.1.1&#x2F;24</td></tr><tr><td>Weight</td><td>æƒé‡å¤„ç†</td><td></td></tr></tbody></table><p>æˆ‘ä»¬åªéœ€è¦æŒæ¡Pathè¿™ç§è·¯ç”±å·¥ç¨‹å°±å¯ä»¥äº†ã€‚</p><h2 id="3-4-è¿‡æ»¤å™¨å·¥å‚"><a href="#3-4-è¿‡æ»¤å™¨å·¥å‚" class="headerlink" title="3.4.è¿‡æ»¤å™¨å·¥å‚"></a>3.4.è¿‡æ»¤å™¨å·¥å‚</h2><p>GatewayFilteræ˜¯ç½‘å…³ä¸­æä¾›çš„ä¸€ç§è¿‡æ»¤å™¨ï¼Œå¯ä»¥å¯¹è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡è¿”å›çš„å“åº”åšå¤„ç†ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9d55.png" alt="image-20210714212312871"></p><h3 id="3-4-1-è·¯ç”±è¿‡æ»¤å™¨çš„ç§ç±»"><a href="#3-4-1-è·¯ç”±è¿‡æ»¤å™¨çš„ç§ç±»" class="headerlink" title="3.4.1.è·¯ç”±è¿‡æ»¤å™¨çš„ç§ç±»"></a>3.4.1.è·¯ç”±è¿‡æ»¤å™¨çš„ç§ç±»</h3><p>Springæä¾›äº†31ç§ä¸åŒçš„è·¯ç”±è¿‡æ»¤å™¨å·¥å‚ã€‚ä¾‹å¦‚ï¼š</p><table><thead><tr><th><strong>åç§°</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>AddRequestHeader</td><td>ç»™å½“å‰è¯·æ±‚æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´</td></tr><tr><td>RemoveRequestHeader</td><td>ç§»é™¤è¯·æ±‚ä¸­çš„ä¸€ä¸ªè¯·æ±‚å¤´</td></tr><tr><td>AddResponseHeader</td><td>ç»™å“åº”ç»“æœä¸­æ·»åŠ ä¸€ä¸ªå“åº”å¤´</td></tr><tr><td>RemoveResponseHeader</td><td>ä»å“åº”ç»“æœä¸­ç§»é™¤æœ‰ä¸€ä¸ªå“åº”å¤´</td></tr><tr><td>RequestRateLimiter</td><td>é™åˆ¶è¯·æ±‚çš„æµé‡</td></tr></tbody></table><h3 id="3-4-2-è¯·æ±‚å¤´è¿‡æ»¤å™¨"><a href="#3-4-2-è¯·æ±‚å¤´è¿‡æ»¤å™¨" class="headerlink" title="3.4.2.è¯·æ±‚å¤´è¿‡æ»¤å™¨"></a>3.4.2.è¯·æ±‚å¤´è¿‡æ»¤å™¨</h3><p>ä¸‹é¢æˆ‘ä»¬ä»¥AddRequestHeader ä¸ºä¾‹æ¥è®²è§£ã€‚</p><blockquote><p><strong>éœ€æ±‚</strong>ï¼šç»™æ‰€æœ‰è¿›å…¥userserviceçš„è¯·æ±‚æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´ï¼šTruth&#x3D;itcast is freaking awesome!</p></blockquote><p>åªéœ€è¦ä¿®æ”¹gatewayæœåŠ¡çš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ è·¯ç”±è¿‡æ»¤å³å¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">user-service</span> <br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://userservice</span> <br>        <span class="hljs-attr">predicates:</span> <br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/user/**</span> <br>        <span class="hljs-attr">filters:</span> <span class="hljs-comment"># è¿‡æ»¤å™¨</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">AddRequestHeader=Truth,</span> <span class="hljs-string">Itcast</span> <span class="hljs-string">is</span> <span class="hljs-string">freaking</span> <span class="hljs-string">awesome!</span> <span class="hljs-comment"># æ·»åŠ è¯·æ±‚å¤´</span><br></code></pre></td></tr></table></figure><p>å½“å‰è¿‡æ»¤å™¨å†™åœ¨userserviceè·¯ç”±ä¸‹ï¼Œå› æ­¤ä»…ä»…å¯¹è®¿é—®userserviceçš„è¯·æ±‚æœ‰æ•ˆã€‚</p><h3 id="3-4-3-é»˜è®¤è¿‡æ»¤å™¨"><a href="#3-4-3-é»˜è®¤è¿‡æ»¤å™¨" class="headerlink" title="3.4.3.é»˜è®¤è¿‡æ»¤å™¨"></a>3.4.3.é»˜è®¤è¿‡æ»¤å™¨</h3><p>å¦‚æœè¦å¯¹æ‰€æœ‰çš„è·¯ç”±éƒ½ç”Ÿæ•ˆï¼Œåˆ™å¯ä»¥å°†è¿‡æ»¤å™¨å·¥å‚å†™åˆ°defaultä¸‹ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">user-service</span> <br>        <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://userservice</span> <br>        <span class="hljs-attr">predicates:</span> <br>        <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/user/**</span><br>      <span class="hljs-attr">default-filters:</span> <span class="hljs-comment"># é»˜è®¤è¿‡æ»¤é¡¹</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">AddRequestHeader=Truth,</span> <span class="hljs-string">Itcast</span> <span class="hljs-string">is</span> <span class="hljs-string">freaking</span> <span class="hljs-string">awesome!</span> <br></code></pre></td></tr></table></figure><h3 id="3-4-4-æ€»ç»“"><a href="#3-4-4-æ€»ç»“" class="headerlink" title="3.4.4.æ€»ç»“"></a>3.4.4.æ€»ç»“</h3><p>è¿‡æ»¤å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>â‘  å¯¹è·¯ç”±çš„è¯·æ±‚æˆ–å“åº”åšåŠ å·¥å¤„ç†ï¼Œæ¯”å¦‚æ·»åŠ è¯·æ±‚å¤´</p><p>â‘¡ é…ç½®åœ¨è·¯ç”±ä¸‹çš„è¿‡æ»¤å™¨åªå¯¹å½“å‰è·¯ç”±çš„è¯·æ±‚ç”Ÿæ•ˆ</p><p>defaultFiltersçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>â‘  å¯¹æ‰€æœ‰è·¯ç”±éƒ½ç”Ÿæ•ˆçš„è¿‡æ»¤å™¨</p><h2 id="3-5-å…¨å±€è¿‡æ»¤å™¨"><a href="#3-5-å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="3.5.å…¨å±€è¿‡æ»¤å™¨"></a>3.5.å…¨å±€è¿‡æ»¤å™¨</h2><p>ä¸Šä¸€èŠ‚å­¦ä¹ çš„è¿‡æ»¤å™¨ï¼Œç½‘å…³æä¾›äº†31ç§ï¼Œä½†æ¯ä¸€ç§è¿‡æ»¤å™¨çš„ä½œç”¨éƒ½æ˜¯å›ºå®šçš„ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›æ‹¦æˆªè¯·æ±‚ï¼Œåšè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘åˆ™æ²¡åŠæ³•å®ç°ã€‚</p><h3 id="3-5-1-å…¨å±€è¿‡æ»¤å™¨ä½œç”¨"><a href="#3-5-1-å…¨å±€è¿‡æ»¤å™¨ä½œç”¨" class="headerlink" title="3.5.1.å…¨å±€è¿‡æ»¤å™¨ä½œç”¨"></a>3.5.1.å…¨å±€è¿‡æ»¤å™¨ä½œç”¨</h3><p>å…¨å±€è¿‡æ»¤å™¨çš„ä½œç”¨ä¹Ÿæ˜¯å¤„ç†ä¸€åˆ‡è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡å“åº”ï¼Œä¸GatewayFilterçš„ä½œç”¨ä¸€æ ·ã€‚åŒºåˆ«åœ¨äºGatewayFilteré€šè¿‡é…ç½®å®šä¹‰ï¼Œå¤„ç†é€»è¾‘æ˜¯å›ºå®šçš„ï¼›è€ŒGlobalFilterçš„é€»è¾‘éœ€è¦è‡ªå·±å†™ä»£ç å®ç°ã€‚</p><p>å®šä¹‰æ–¹å¼æ˜¯å®ç°GlobalFilteræ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">GlobalFilter</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *  å¤„ç†å½“å‰è¯·æ±‚ï¼Œæœ‰å¿…è¦çš„è¯é€šè¿‡&#123;<span class="hljs-doctag">@link</span> GatewayFilterChain&#125;å°†è¯·æ±‚äº¤ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨å¤„ç†</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> exchange è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œé‡Œé¢å¯ä»¥è·å–Requestã€Responseç­‰ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> chain ç”¨æ¥æŠŠè¯·æ±‚å§”æ‰˜ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-doctag">@code</span> Mono&lt;Void&gt;&#125; è¿”å›æ ‡ç¤ºå½“å‰è¿‡æ»¤å™¨ä¸šåŠ¡ç»“æŸ</span><br><span class="hljs-comment">     */</span><br>    Mono&lt;Void&gt; <span class="hljs-title function_">filter</span><span class="hljs-params">(ServerWebExchange exchange, GatewayFilterChain chain)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨filterä¸­ç¼–å†™è‡ªå®šä¹‰é€»è¾‘ï¼Œå¯ä»¥å®ç°ä¸‹åˆ—åŠŸèƒ½ï¼š</p><ul><li>ç™»å½•çŠ¶æ€åˆ¤æ–­</li><li>æƒé™æ ¡éªŒ</li><li>è¯·æ±‚é™æµç­‰</li></ul><h3 id="3-5-2-è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨"><a href="#3-5-2-è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="3.5.2.è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨"></a>3.5.2.è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨</h3><p>éœ€æ±‚ï¼šå®šä¹‰å…¨å±€è¿‡æ»¤å™¨ï¼Œæ‹¦æˆªè¯·æ±‚ï¼Œåˆ¤æ–­è¯·æ±‚çš„å‚æ•°æ˜¯å¦æ»¡è¶³ä¸‹é¢æ¡ä»¶ï¼š</p><ul><li><p>å‚æ•°ä¸­æ˜¯å¦æœ‰authorizationï¼Œ</p></li><li><p>authorizationå‚æ•°å€¼æ˜¯å¦ä¸ºadmin</p></li></ul><p>å¦‚æœåŒæ—¶æ»¡è¶³åˆ™æ”¾è¡Œï¼Œå¦åˆ™æ‹¦æˆª</p><p>å®ç°ï¼š</p><p>åœ¨gatewayä¸­å®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.itcast.gateway.filters;<br><br><span class="hljs-keyword">import</span> org.springframework.cloud.gateway.filter.GatewayFilterChain;<br><span class="hljs-keyword">import</span> org.springframework.cloud.gateway.filter.GlobalFilter;<br><span class="hljs-keyword">import</span> org.springframework.core.annotation.Order;<br><span class="hljs-keyword">import</span> org.springframework.http.HttpStatus;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-keyword">import</span> org.springframework.web.server.ServerWebExchange;<br><span class="hljs-keyword">import</span> reactor.core.publisher.Mono;<br><br><span class="hljs-meta">@Order(-1)</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthorizeFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">GlobalFilter</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">filter</span><span class="hljs-params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;<br>        <span class="hljs-comment">// 1.è·å–è¯·æ±‚å‚æ•°</span><br>        MultiValueMap&lt;String, String&gt; params = exchange.getRequest().getQueryParams();<br>        <span class="hljs-comment">// 2.è·å–authorizationå‚æ•°</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> params.getFirst(<span class="hljs-string">&quot;authorization&quot;</span>);<br>        <span class="hljs-comment">// 3.æ ¡éªŒ</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;admin&quot;</span>.equals(auth)) &#123;<br>            <span class="hljs-comment">// æ”¾è¡Œ</span><br>            <span class="hljs-keyword">return</span> chain.filter(exchange);<br>        &#125;<br>        <span class="hljs-comment">// 4.æ‹¦æˆª</span><br>        <span class="hljs-comment">// 4.1.ç¦æ­¢è®¿é—®ï¼Œè®¾ç½®çŠ¶æ€ç </span><br>        exchange.getResponse().setStatusCode(HttpStatus.FORBIDDEN);<br>        <span class="hljs-comment">// 4.2.ç»“æŸå¤„ç†</span><br>        <span class="hljs-keyword">return</span> exchange.getResponse().setComplete();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-5-3-è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº"><a href="#3-5-3-è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº" class="headerlink" title="3.5.3.è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº"></a>3.5.3.è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº</h3><p>è¯·æ±‚è¿›å…¥ç½‘å…³ä¼šç¢°åˆ°ä¸‰ç±»è¿‡æ»¤å™¨ï¼šå½“å‰è·¯ç”±çš„è¿‡æ»¤å™¨ã€DefaultFilterã€GlobalFilter</p><p>è¯·æ±‚è·¯ç”±åï¼Œä¼šå°†å½“å‰è·¯ç”±è¿‡æ»¤å™¨å’ŒDefaultFilterã€GlobalFilterï¼Œåˆå¹¶åˆ°ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼ˆé›†åˆï¼‰ä¸­ï¼Œæ’åºåä¾æ¬¡æ‰§è¡Œæ¯ä¸ªè¿‡æ»¤å™¨ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9d18.png" alt="image-20210714214228409"></p><p>æ’åºçš„è§„åˆ™æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>æ¯ä¸€ä¸ªè¿‡æ»¤å™¨éƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªintç±»å‹çš„orderå€¼ï¼Œ<strong>orderå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ‰§è¡Œé¡ºåºè¶Šé å‰</strong>ã€‚</li><li>GlobalFilteré€šè¿‡å®ç°Orderedæ¥å£ï¼Œæˆ–è€…æ·»åŠ @Orderæ³¨è§£æ¥æŒ‡å®šorderå€¼ï¼Œç”±æˆ‘ä»¬è‡ªå·±æŒ‡å®š</li><li>è·¯ç”±è¿‡æ»¤å™¨å’ŒdefaultFilterçš„orderç”±SpringæŒ‡å®šï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å£°æ˜é¡ºåºä»1é€’å¢ã€‚</li><li>å½“è¿‡æ»¤å™¨çš„orderå€¼ä¸€æ ·æ—¶ï¼Œä¼šæŒ‰ç…§ defaultFilter &gt; è·¯ç”±è¿‡æ»¤å™¨ &gt; GlobalFilterçš„é¡ºåºæ‰§è¡Œã€‚</li></ul><p>è¯¦ç»†å†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹æºç ï¼š</p><p><code>org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator#getFilters()</code>æ–¹æ³•æ˜¯å…ˆåŠ è½½defaultFiltersï¼Œç„¶åå†åŠ è½½æŸä¸ªrouteçš„filtersï¼Œç„¶ååˆå¹¶ã€‚</p><p><code>org.springframework.cloud.gateway.handler.FilteringWebHandler#handle()</code>æ–¹æ³•ä¼šåŠ è½½å…¨å±€è¿‡æ»¤å™¨ï¼Œä¸å‰é¢çš„è¿‡æ»¤å™¨åˆå¹¶åæ ¹æ®orderæ’åºï¼Œç»„ç»‡è¿‡æ»¤å™¨é“¾</p><h2 id="3-6-è·¨åŸŸé—®é¢˜"><a href="#3-6-è·¨åŸŸé—®é¢˜" class="headerlink" title="3.6.è·¨åŸŸé—®é¢˜"></a>3.6.è·¨åŸŸé—®é¢˜</h2><h3 id="3-6-1-ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜"><a href="#3-6-1-ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜" class="headerlink" title="3.6.1.ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜"></a>3.6.1.ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜</h3><p>è·¨åŸŸï¼šåŸŸåä¸ä¸€è‡´å°±æ˜¯è·¨åŸŸï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li><p>åŸŸåä¸åŒï¼š <a href="http://www.taobao.com/">www.taobao.com</a> å’Œ <a href="http://www.taobao.org/">www.taobao.org</a> å’Œ <a href="http://www.jd.com/">www.jd.com</a> å’Œ miaosha.jd.com</p></li><li><p>åŸŸåç›¸åŒï¼Œç«¯å£ä¸åŒï¼šlocalhost:8080å’Œlocalhost8081</p></li></ul><p>è·¨åŸŸé—®é¢˜ï¼šæµè§ˆå™¨ç¦æ­¢è¯·æ±‚çš„å‘èµ·è€…ä¸æœåŠ¡ç«¯å‘ç”Ÿè·¨åŸŸajaxè¯·æ±‚ï¼Œè¯·æ±‚è¢«æµè§ˆå™¨æ‹¦æˆªçš„é—®é¢˜</p><p>è§£å†³æ–¹æ¡ˆï¼šCORSï¼Œè¿™ä¸ªä»¥å‰åº”è¯¥å­¦ä¹ è¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ã€‚ä¸çŸ¥é“çš„å°ä¼™ä¼´å¯ä»¥æŸ¥çœ‹<a href="https://www.ruanyifeng.com/blog/2016/04/cors.html">https://www.ruanyifeng.com/blog/2016/04/cors.html</a></p><h3 id="3-6-2-æ¨¡æ‹Ÿè·¨åŸŸé—®é¢˜"><a href="#3-6-2-æ¨¡æ‹Ÿè·¨åŸŸé—®é¢˜" class="headerlink" title="3.6.2.æ¨¡æ‹Ÿè·¨åŸŸé—®é¢˜"></a>3.6.2.æ¨¡æ‹Ÿè·¨åŸŸé—®é¢˜</h3><p>æ‰¾åˆ°è¯¾å‰èµ„æ–™çš„é¡µé¢æ–‡ä»¶ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9cd7.png" alt="image-20210714215713563"></p><p>æ”¾å…¥tomcatæˆ–è€…nginxè¿™æ ·çš„webæœåŠ¡å™¨ä¸­ï¼Œå¯åŠ¨å¹¶è®¿é—®ã€‚</p><p>å¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°çœ‹åˆ°ä¸‹é¢çš„é”™è¯¯ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfd27f86abb2aee9c2c.png" alt="image-20210714215832675"></p><p>ä»localhost:8090è®¿é—®localhost:10010ï¼Œç«¯å£ä¸åŒï¼Œæ˜¾ç„¶æ˜¯è·¨åŸŸçš„è¯·æ±‚ã€‚</p><h3 id="3-6-3-è§£å†³è·¨åŸŸé—®é¢˜"><a href="#3-6-3-è§£å†³è·¨åŸŸé—®é¢˜" class="headerlink" title="3.6.3.è§£å†³è·¨åŸŸé—®é¢˜"></a>3.6.3.è§£å†³è·¨åŸŸé—®é¢˜</h3><p>åœ¨gatewayæœåŠ¡çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-comment"># ã€‚ã€‚ã€‚</span><br>      <span class="hljs-attr">globalcors:</span> <span class="hljs-comment"># å…¨å±€çš„è·¨åŸŸå¤„ç†</span><br>        <span class="hljs-attr">add-to-simple-url-handler-mapping:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># è§£å†³optionsè¯·æ±‚è¢«æ‹¦æˆªé—®é¢˜</span><br>        <span class="hljs-attr">corsConfigurations:</span><br>          <span class="hljs-string">&#x27;[/**]&#x27;</span><span class="hljs-string">:</span><br>            <span class="hljs-attr">allowedOrigins:</span> <span class="hljs-comment"># å…è®¸å“ªäº›ç½‘ç«™çš„è·¨åŸŸè¯·æ±‚ </span><br>              <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;http://localhost:8090&quot;</span><br>            <span class="hljs-attr">allowedMethods:</span> <span class="hljs-comment"># å…è®¸çš„è·¨åŸŸajaxçš„è¯·æ±‚æ–¹å¼</span><br>              <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;GET&quot;</span><br>              <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;POST&quot;</span><br>              <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;DELETE&quot;</span><br>              <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;PUT&quot;</span><br>              <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;OPTIONS&quot;</span><br>            <span class="hljs-attr">allowedHeaders:</span> <span class="hljs-string">&quot;*&quot;</span> <span class="hljs-comment"># å…è®¸åœ¨è¯·æ±‚ä¸­æºå¸¦çš„å¤´ä¿¡æ¯</span><br>            <span class="hljs-attr">allowCredentials:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># æ˜¯å¦å…è®¸æºå¸¦cookie</span><br>            <span class="hljs-attr">maxAge:</span> <span class="hljs-number">360000</span> <span class="hljs-comment"># è¿™æ¬¡è·¨åŸŸæ£€æµ‹çš„æœ‰æ•ˆæœŸ</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>SpringCloudğŸ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringCloudğŸ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nacoså®‰è£…ä½¿ç”¨æŒ‡å—</title>
    <link href="/Hexo/2022/03/02/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/"/>
    <url>/Hexo/2022/03/02/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<h1 id="Nacoså®‰è£…æŒ‡å—"><a href="#Nacoså®‰è£…æŒ‡å—" class="headerlink" title="Nacoså®‰è£…æŒ‡å—"></a>Nacoså®‰è£…æŒ‡å—</h1><h1 id="1-Windowså®‰è£…"><a href="#1-Windowså®‰è£…" class="headerlink" title="1.Windowså®‰è£…"></a>1.Windowså®‰è£…</h1><p>å¼€å‘é˜¶æ®µé‡‡ç”¨å•æœºå®‰è£…å³å¯ã€‚</p><h2 id="1-1-ä¸‹è½½å®‰è£…åŒ…"><a href="#1-1-ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="1.1.ä¸‹è½½å®‰è£…åŒ…"></a>1.1.ä¸‹è½½å®‰è£…åŒ…</h2><p>åœ¨Nacosçš„GitHubé¡µé¢ï¼Œæä¾›æœ‰ä¸‹è½½é“¾æ¥ï¼Œå¯ä»¥ä¸‹è½½ç¼–è¯‘å¥½çš„NacosæœåŠ¡ç«¯æˆ–è€…æºä»£ç ï¼š</p><p>GitHubä¸»é¡µï¼š<a href="https://github.com/alibaba/nacos">https://github.com/alibaba/nacos</a></p><p>GitHubçš„Releaseä¸‹è½½é¡µï¼š<a href="https://github.com/alibaba/nacos/releases">https://github.com/alibaba/nacos/releases</a></p><p>å¦‚å›¾ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8dee.png" alt="image-20210402161102887"></p><p>æœ¬è¯¾ç¨‹é‡‡ç”¨1.4.1.ç‰ˆæœ¬çš„Nacosï¼Œè¯¾å‰èµ„æ–™å·²ç»å‡†å¤‡äº†å®‰è£…åŒ…ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8e1f.png" alt="image-20210402161130261"></p><p>windowsç‰ˆæœ¬ä½¿ç”¨<code>nacos-server-1.4.1.zip</code>åŒ…å³å¯ã€‚</p><h2 id="1-2-è§£å‹"><a href="#1-2-è§£å‹" class="headerlink" title="1.2.è§£å‹"></a>1.2.è§£å‹</h2><p>å°†è¿™ä¸ªåŒ…è§£å‹åˆ°ä»»æ„éä¸­æ–‡ç›®å½•ä¸‹ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8dc0.png" alt="image-20210402161843337"></p><p>ç›®å½•è¯´æ˜ï¼š</p><ul><li>binï¼šå¯åŠ¨è„šæœ¬</li><li>confï¼šé…ç½®æ–‡ä»¶</li></ul><h2 id="1-3-ç«¯å£é…ç½®"><a href="#1-3-ç«¯å£é…ç½®" class="headerlink" title="1.3.ç«¯å£é…ç½®"></a>1.3.ç«¯å£é…ç½®</h2><p>Nacosçš„é»˜è®¤ç«¯å£æ˜¯8848ï¼Œå¦‚æœä½ ç”µè„‘ä¸Šçš„å…¶å®ƒè¿›ç¨‹å ç”¨äº†8848ç«¯å£ï¼Œè¯·å…ˆå°è¯•å…³é—­è¯¥è¿›ç¨‹ã€‚</p><p><strong>å¦‚æœæ— æ³•å…³é—­å ç”¨8848ç«¯å£çš„è¿›ç¨‹</strong>ï¼Œä¹Ÿå¯ä»¥è¿›å…¥nacosçš„confç›®å½•ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8dd7.png" alt="image-20210402162008280"></p><p>ä¿®æ”¹å…¶ä¸­çš„å†…å®¹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8e6c.png" alt="image-20210402162251093"></p><h2 id="1-4-å¯åŠ¨"><a href="#1-4-å¯åŠ¨" class="headerlink" title="1.4.å¯åŠ¨"></a>1.4.å¯åŠ¨</h2><p>å¯åŠ¨éå¸¸ç®€å•ï¼Œè¿›å…¥binç›®å½•ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8e56.png" alt="image-20210402162350977"></p><p>ç„¶åæ‰§è¡Œå‘½ä»¤å³å¯ï¼š</p><ul><li><p>windowså‘½ä»¤ï¼š</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">startup.<span class="hljs-built_in">cmd</span> -m standalone<br></code></pre></td></tr></table></figure></li></ul><p>æ‰§è¡Œåçš„æ•ˆæœå¦‚å›¾ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8e3a.png" alt="image-20210402162526774"></p><h2 id="1-5-è®¿é—®"><a href="#1-5-è®¿é—®" class="headerlink" title="1.5.è®¿é—®"></a>1.5.è®¿é—®</h2><p>åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€ï¼š<a href="http://127.0.0.1:8848/nacos%E5%8D%B3%E5%8F%AF%EF%BC%9A">http://127.0.0.1:8848/nacoså³å¯ï¼š</a></p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8e08.png" alt="image-20210402162630427"></p><p>é»˜è®¤çš„è´¦å·å’Œå¯†ç éƒ½æ˜¯nacosï¼Œè¿›å…¥åï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee91eb.png" alt="image-20210402162709515"></p><h1 id="2-Linuxå®‰è£…"><a href="#2-Linuxå®‰è£…" class="headerlink" title="2.Linuxå®‰è£…"></a>2.Linuxå®‰è£…</h1><p>Linuxæˆ–è€…Macå®‰è£…æ–¹å¼ä¸Windowsç±»ä¼¼ã€‚</p><h2 id="2-1-å®‰è£…JDK"><a href="#2-1-å®‰è£…JDK" class="headerlink" title="2.1.å®‰è£…JDK"></a>2.1.å®‰è£…JDK</h2><p>Nacosä¾èµ–äºJDKè¿è¡Œï¼Œç´¢å¼•Linuxä¸Šä¹Ÿéœ€è¦å®‰è£…JDKæ‰è¡Œã€‚</p><p>ä¸Šä¼ jdkå®‰è£…åŒ…ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee9205.png" alt="image-20210402172334810"></p><p>ä¸Šä¼ åˆ°æŸä¸ªç›®å½•ï¼Œä¾‹å¦‚ï¼š<code>/usr/local/</code></p><p>ç„¶åè§£å‹ç¼©ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -xvf jdk-8u144-linux-x64.tar.gz<br></code></pre></td></tr></table></figure><p>ç„¶åé‡å‘½åä¸ºjava</p><p>é…ç½®ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">export</span> JAVA_HOME=/usr/local/java<br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$JAVA_HOME</span>/bin<br></code></pre></td></tr></table></figure><p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">source</span> /etc/profile<br></code></pre></td></tr></table></figure><h2 id="2-2-ä¸Šä¼ å®‰è£…åŒ…"><a href="#2-2-ä¸Šä¼ å®‰è£…åŒ…" class="headerlink" title="2.2.ä¸Šä¼ å®‰è£…åŒ…"></a>2.2.ä¸Šä¼ å®‰è£…åŒ…</h2><p>å¦‚å›¾ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8dee.png" alt="image-20210402161102887"></p><p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è¯¾å‰èµ„æ–™ä¸­çš„tar.gzï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8e1f.png" alt="image-20210402161130261"></p><p>ä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨çš„æŸä¸ªç›®å½•ï¼Œä¾‹å¦‚<code>/usr/local/src</code>ç›®å½•ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee907e.png" alt="image-20210402163715580"></p><h2 id="2-3-è§£å‹"><a href="#2-3-è§£å‹" class="headerlink" title="2.3.è§£å‹"></a>2.3.è§£å‹</h2><p>å‘½ä»¤è§£å‹ç¼©å®‰è£…åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -xvf nacos-server-1.4.1.tar.gz<br></code></pre></td></tr></table></figure><p>ç„¶ååˆ é™¤å®‰è£…åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">rm</span> -rf nacos-server-1.4.1.tar.gz<br></code></pre></td></tr></table></figure><p>ç›®å½•ä¸­æœ€ç»ˆæ ·å¼ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8e89.png" alt="image-20210402163858429"></p><p>ç›®å½•å†…éƒ¨ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee9098.png" alt="image-20210402164414827"></p><h2 id="2-4-ç«¯å£é…ç½®"><a href="#2-4-ç«¯å£é…ç½®" class="headerlink" title="2.4.ç«¯å£é…ç½®"></a>2.4.ç«¯å£é…ç½®</h2><p>ä¸windowsä¸­ç±»ä¼¼</p><h2 id="2-5-å¯åŠ¨"><a href="#2-5-å¯åŠ¨" class="headerlink" title="2.5.å¯åŠ¨"></a>2.5.å¯åŠ¨</h2><p>åœ¨nacos&#x2F;binç›®å½•ä¸­ï¼Œè¾“å…¥å‘½ä»¤å¯åŠ¨Nacosï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sh startup.sh -m standalone<br></code></pre></td></tr></table></figure><h1 id="3-Nacosçš„ä¾èµ–"><a href="#3-Nacosçš„ä¾èµ–" class="headerlink" title="3.Nacosçš„ä¾èµ–"></a>3.Nacosçš„ä¾èµ–</h1><p>çˆ¶å·¥ç¨‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- nacoså®¢æˆ·ç«¯ä¾èµ–åŒ… --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>SpringCloudğŸ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringCloudğŸ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringCloudå…¥é—¨</title>
    <link href="/Hexo/2022/03/01/SpringCloud01/"/>
    <url>/Hexo/2022/03/01/SpringCloud01/</url>
    
    <content type="html"><![CDATA[<h1 id="SpringCloud01"><a href="#SpringCloud01" class="headerlink" title="SpringCloud01"></a>SpringCloud01</h1><h1 id="1-è®¤è¯†å¾®æœåŠ¡"><a href="#1-è®¤è¯†å¾®æœåŠ¡" class="headerlink" title="1.è®¤è¯†å¾®æœåŠ¡"></a>1.è®¤è¯†å¾®æœåŠ¡</h1><p>éšç€äº’è”ç½‘è¡Œä¸šçš„å‘å±•ï¼Œå¯¹æœåŠ¡çš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šé«˜ï¼ŒæœåŠ¡æ¶æ„ä¹Ÿä»å•ä½“æ¶æ„é€æ¸æ¼”å˜ä¸ºç°åœ¨æµè¡Œçš„å¾®æœåŠ¡æ¶æ„ã€‚è¿™äº›æ¶æ„ä¹‹é—´æœ‰æ€æ ·çš„å·®åˆ«å‘¢ï¼Ÿ</p><h2 id="1-0-å­¦ä¹ ç›®æ ‡"><a href="#1-0-å­¦ä¹ ç›®æ ‡" class="headerlink" title="1.0.å­¦ä¹ ç›®æ ‡"></a>1.0.å­¦ä¹ ç›®æ ‡</h2><p>äº†è§£å¾®æœåŠ¡æ¶æ„çš„ä¼˜ç¼ºç‚¹</p><h2 id="1-1-å•ä½“æ¶æ„"><a href="#1-1-å•ä½“æ¶æ„" class="headerlink" title="1.1.å•ä½“æ¶æ„"></a>1.1.å•ä½“æ¶æ„</h2><p><strong>å•ä½“æ¶æ„</strong>ï¼šå°†ä¸šåŠ¡çš„æ‰€æœ‰åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¼€å‘ï¼Œæ‰“æˆä¸€ä¸ªåŒ…éƒ¨ç½²ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7d95.png" alt="image-20210713202807818"></p><p>å•ä½“æ¶æ„çš„ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š</p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>æ¶æ„ç®€å•</li><li>éƒ¨ç½²æˆæœ¬ä½</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>è€¦åˆåº¦é«˜ï¼ˆç»´æŠ¤å›°éš¾ã€å‡çº§å›°éš¾ï¼‰</li></ul><h2 id="1-2-åˆ†å¸ƒå¼æ¶æ„"><a href="#1-2-åˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="1.2.åˆ†å¸ƒå¼æ¶æ„"></a>1.2.åˆ†å¸ƒå¼æ¶æ„</h2><p><strong>åˆ†å¸ƒå¼æ¶æ„</strong>ï¼šæ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿåšæ‹†åˆ†ï¼Œæ¯ä¸ªä¸šåŠ¡åŠŸèƒ½æ¨¡å—ä½œä¸ºç‹¬ç«‹é¡¹ç›®å¼€å‘ï¼Œç§°ä¸ºä¸€ä¸ªæœåŠ¡ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7d7a.png" alt="image-20210713203124797"></p><p>åˆ†å¸ƒå¼æ¶æ„çš„ä¼˜ç¼ºç‚¹ï¼š</p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>é™ä½æœåŠ¡è€¦åˆ</li><li>æœ‰åˆ©äºæœåŠ¡å‡çº§å’Œæ‹“å±•</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>æœåŠ¡è°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚</li></ul><p>åˆ†å¸ƒå¼æ¶æ„è™½ç„¶é™ä½äº†æœåŠ¡è€¦åˆï¼Œä½†æ˜¯æœåŠ¡æ‹†åˆ†æ—¶ä¹Ÿæœ‰å¾ˆå¤šé—®é¢˜éœ€è¦æ€è€ƒï¼š</p><ul><li>æœåŠ¡æ‹†åˆ†çš„ç²’åº¦å¦‚ä½•ç•Œå®šï¼Ÿ</li><li>æœåŠ¡ä¹‹é—´å¦‚ä½•è°ƒç”¨ï¼Ÿ</li><li>æœåŠ¡çš„è°ƒç”¨å…³ç³»å¦‚ä½•ç®¡ç†ï¼Ÿ</li></ul><p>äººä»¬éœ€è¦åˆ¶å®šä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„æ ‡å‡†æ¥çº¦æŸåˆ†å¸ƒå¼æ¶æ„ã€‚</p><h2 id="1-3-å¾®æœåŠ¡"><a href="#1-3-å¾®æœåŠ¡" class="headerlink" title="1.3.å¾®æœåŠ¡"></a>1.3.å¾®æœåŠ¡</h2><p>å¾®æœåŠ¡çš„æ¶æ„ç‰¹å¾ï¼š</p><ul><li>å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡æ‹†åˆ†ç²’åº¦æ›´å°ï¼Œæ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£</li><li>è‡ªæ²»ï¼šå›¢é˜Ÿç‹¬ç«‹ã€æŠ€æœ¯ç‹¬ç«‹ã€æ•°æ®ç‹¬ç«‹ï¼Œç‹¬ç«‹éƒ¨ç½²å’Œäº¤ä»˜</li><li>é¢å‘æœåŠ¡ï¼šæœåŠ¡æä¾›ç»Ÿä¸€æ ‡å‡†çš„æ¥å£ï¼Œä¸è¯­è¨€å’ŒæŠ€æœ¯æ— å…³</li><li>éš”ç¦»æ€§å¼ºï¼šæœåŠ¡è°ƒç”¨åšå¥½éš”ç¦»ã€å®¹é”™ã€é™çº§ï¼Œé¿å…å‡ºç°çº§è”é—®é¢˜</li></ul><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7db3.png" alt="image-20210713203753373"></p><p>å¾®æœåŠ¡çš„ä¸Šè¿°ç‰¹æ€§å…¶å®æ˜¯åœ¨ç»™åˆ†å¸ƒå¼æ¶æ„åˆ¶å®šä¸€ä¸ªæ ‡å‡†ï¼Œè¿›ä¸€æ­¥é™ä½æœåŠ¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæä¾›æœåŠ¡çš„ç‹¬ç«‹æ€§å’Œçµæ´»æ€§ã€‚åšåˆ°é«˜å†…èšï¼Œä½è€¦åˆã€‚</p><p>å› æ­¤ï¼Œå¯ä»¥è®¤ä¸º<strong>å¾®æœåŠ¡</strong>æ˜¯ä¸€ç§ç»è¿‡è‰¯å¥½æ¶æ„è®¾è®¡çš„<strong>åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆ</strong> ã€‚</p><p>ä½†æ–¹æ¡ˆè¯¥æ€ä¹ˆè½åœ°ï¼Ÿé€‰ç”¨ä»€ä¹ˆæ ·çš„æŠ€æœ¯æ ˆï¼Ÿå…¨çƒçš„äº’è”ç½‘å…¬å¸éƒ½åœ¨ç§¯æå°è¯•è‡ªå·±çš„å¾®æœåŠ¡è½åœ°æ–¹æ¡ˆã€‚</p><p>å…¶ä¸­åœ¨Javaé¢†åŸŸæœ€å¼•äººæ³¨ç›®çš„å°±æ˜¯SpringCloudæä¾›çš„æ–¹æ¡ˆäº†ã€‚</p><h2 id="1-4-SpringCloud"><a href="#1-4-SpringCloud" class="headerlink" title="1.4.SpringCloud"></a>1.4.SpringCloud</h2><p>SpringCloudæ˜¯ç›®å‰å›½å†…ä½¿ç”¨æœ€å¹¿æ³›çš„å¾®æœåŠ¡æ¡†æ¶ã€‚å®˜ç½‘åœ°å€ï¼š<a href="https://spring.io/projects/spring-cloud%E3%80%82">https://spring.io/projects/spring-cloudã€‚</a></p><p>SpringCloudé›†æˆäº†å„ç§å¾®æœåŠ¡åŠŸèƒ½ç»„ä»¶ï¼Œå¹¶åŸºäºSpringBootå®ç°äº†è¿™äº›ç»„ä»¶çš„è‡ªåŠ¨è£…é…ï¼Œä»è€Œæä¾›äº†è‰¯å¥½çš„å¼€ç®±å³ç”¨ä½“éªŒã€‚</p><p>å…¶ä¸­å¸¸è§çš„ç»„ä»¶åŒ…æ‹¬ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7dea.png" alt="image-20210713204155887"></p><p>å¦å¤–ï¼ŒSpringCloudåº•å±‚æ˜¯ä¾èµ–äºSpringBootçš„ï¼Œå¹¶ä¸”æœ‰ç‰ˆæœ¬çš„å…¼å®¹å…³ç³»ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7f12.png" alt="image-20210713205003790"></p><p>æˆ‘ä»¬è¯¾å ‚å­¦ä¹ çš„ç‰ˆæœ¬æ˜¯ Hoxton.SR10ï¼Œå› æ­¤å¯¹åº”çš„SpringBootç‰ˆæœ¬æ˜¯2.3.xç‰ˆæœ¬ã€‚</p><h2 id="1-5-æ€»ç»“"><a href="#1-5-æ€»ç»“" class="headerlink" title="1.5.æ€»ç»“"></a>1.5.æ€»ç»“</h2><ul><li><p>å•ä½“æ¶æ„ï¼šç®€å•æ–¹ä¾¿ï¼Œé«˜åº¦è€¦åˆï¼Œæ‰©å±•æ€§å·®ï¼Œé€‚åˆå°å‹é¡¹ç›®ã€‚ä¾‹å¦‚ï¼šå­¦ç”Ÿç®¡ç†ç³»ç»Ÿ</p></li><li><p>åˆ†å¸ƒå¼æ¶æ„ï¼šæ¾è€¦åˆï¼Œæ‰©å±•æ€§å¥½ï¼Œä½†æ¶æ„å¤æ‚ï¼Œéš¾åº¦å¤§ã€‚é€‚åˆå¤§å‹äº’è”ç½‘é¡¹ç›®ï¼Œä¾‹å¦‚ï¼šäº¬ä¸œã€æ·˜å®</p></li><li><p>å¾®æœåŠ¡ï¼šä¸€ç§è‰¯å¥½çš„åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆ</p><p>â‘ ä¼˜ç‚¹ï¼šæ‹†åˆ†ç²’åº¦æ›´å°ã€æœåŠ¡æ›´ç‹¬ç«‹ã€è€¦åˆåº¦æ›´ä½</p><p>â‘¡ç¼ºç‚¹ï¼šæ¶æ„éå¸¸å¤æ‚ï¼Œè¿ç»´ã€ç›‘æ§ã€éƒ¨ç½²éš¾åº¦æé«˜</p></li><li><p>SpringCloudæ˜¯å¾®æœåŠ¡æ¶æ„çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œé›†æˆäº†å„ç§ä¼˜ç§€å¾®æœåŠ¡åŠŸèƒ½ç»„ä»¶</p></li></ul><h1 id="2-æœåŠ¡æ‹†åˆ†å’Œè¿œç¨‹è°ƒç”¨"><a href="#2-æœåŠ¡æ‹†åˆ†å’Œè¿œç¨‹è°ƒç”¨" class="headerlink" title="2.æœåŠ¡æ‹†åˆ†å’Œè¿œç¨‹è°ƒç”¨"></a>2.æœåŠ¡æ‹†åˆ†å’Œè¿œç¨‹è°ƒç”¨</h1><p>ä»»ä½•åˆ†å¸ƒå¼æ¶æ„éƒ½ç¦»ä¸å¼€æœåŠ¡çš„æ‹†åˆ†ï¼Œå¾®æœåŠ¡ä¹Ÿæ˜¯ä¸€æ ·ã€‚</p><h2 id="2-1-æœåŠ¡æ‹†åˆ†åŸåˆ™"><a href="#2-1-æœåŠ¡æ‹†åˆ†åŸåˆ™" class="headerlink" title="2.1.æœåŠ¡æ‹†åˆ†åŸåˆ™"></a>2.1.æœåŠ¡æ‹†åˆ†åŸåˆ™</h2><p>è¿™é‡Œæˆ‘æ€»ç»“äº†å¾®æœåŠ¡æ‹†åˆ†æ—¶çš„å‡ ä¸ªåŸåˆ™ï¼š</p><ul><li>ä¸åŒå¾®æœåŠ¡ï¼Œä¸è¦é‡å¤å¼€å‘ç›¸åŒä¸šåŠ¡</li><li>å¾®æœåŠ¡æ•°æ®ç‹¬ç«‹ï¼Œä¸è¦è®¿é—®å…¶å®ƒå¾®æœåŠ¡çš„æ•°æ®åº“</li><li>å¾®æœåŠ¡å¯ä»¥å°†è‡ªå·±çš„ä¸šåŠ¡æš´éœ²ä¸ºæ¥å£ï¼Œä¾›å…¶å®ƒå¾®æœåŠ¡è°ƒç”¨</li></ul><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7f74.png" alt="image-20210713210800950"></p><h2 id="2-2-æœåŠ¡æ‹†åˆ†ç¤ºä¾‹"><a href="#2-2-æœåŠ¡æ‹†åˆ†ç¤ºä¾‹" class="headerlink" title="2.2.æœåŠ¡æ‹†åˆ†ç¤ºä¾‹"></a>2.2.æœåŠ¡æ‹†åˆ†ç¤ºä¾‹</h2><p>ä»¥è¯¾å‰èµ„æ–™ä¸­çš„å¾®æœåŠ¡cloud-demoä¸ºä¾‹ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7f57.png" alt="image-20210713211009593"></p><p>cloud-demoï¼šçˆ¶å·¥ç¨‹ï¼Œç®¡ç†ä¾èµ–</p><ul><li>order-serviceï¼šè®¢å•å¾®æœåŠ¡ï¼Œè´Ÿè´£è®¢å•ç›¸å…³ä¸šåŠ¡</li><li>user-serviceï¼šç”¨æˆ·å¾®æœåŠ¡ï¼Œè´Ÿè´£ç”¨æˆ·ç›¸å…³ä¸šåŠ¡</li></ul><p>è¦æ±‚ï¼š</p><ul><li>è®¢å•å¾®æœåŠ¡å’Œç”¨æˆ·å¾®æœåŠ¡éƒ½å¿…é¡»æœ‰å„è‡ªçš„æ•°æ®åº“ï¼Œç›¸äº’ç‹¬ç«‹</li><li>è®¢å•æœåŠ¡å’Œç”¨æˆ·æœåŠ¡éƒ½å¯¹å¤–æš´éœ²Restfulçš„æ¥å£</li><li>è®¢å•æœåŠ¡å¦‚æœéœ€è¦æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œåªèƒ½è°ƒç”¨ç”¨æˆ·æœåŠ¡çš„Restfulæ¥å£ï¼Œä¸èƒ½æŸ¥è¯¢ç”¨æˆ·æ•°æ®åº“</li></ul><h3 id="2-2-1-å¯¼å…¥Sqlè¯­å¥"><a href="#2-2-1-å¯¼å…¥Sqlè¯­å¥" class="headerlink" title="2.2.1.å¯¼å…¥Sqlè¯­å¥"></a>2.2.1.å¯¼å…¥Sqlè¯­å¥</h3><p>é¦–å…ˆï¼Œå°†è¯¾å‰èµ„æ–™æä¾›çš„<code>cloud-order.sql</code>å’Œ<code>cloud-user.sql</code>å¯¼å…¥åˆ°mysqlä¸­ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7fa2.png" alt="image-20210713211417049"></p><p>cloud-userè¡¨ä¸­åˆå§‹æ•°æ®å¦‚ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7e15.png" alt="image-20210713211550169"></p><p>cloud-orderè¡¨ä¸­åˆå§‹æ•°æ®å¦‚ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7e00.png" alt="image-20210713211657319"></p><p>cloud-orderè¡¨ä¸­æŒæœ‰cloud-userè¡¨ä¸­çš„idå­—æ®µã€‚</p><h3 id="2-2-2-å¯¼å…¥demoå·¥ç¨‹"><a href="#2-2-2-å¯¼å…¥demoå·¥ç¨‹" class="headerlink" title="2.2.2.å¯¼å…¥demoå·¥ç¨‹"></a>2.2.2.å¯¼å…¥demoå·¥ç¨‹</h3><p>ç”¨IDEAå¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„Demoï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7f41.png" alt="image-20210713211814094"></p><p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7f87.png" alt="image-20210713212656887"></p><p>å¯¼å…¥åï¼Œä¼šåœ¨IDEAå³ä¸‹è§’å‡ºç°å¼¹çª—ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7ea4.png" alt="image-20210713212349272"></p><p>ç‚¹å‡»å¼¹çª—ï¼Œç„¶åæŒ‰ä¸‹å›¾é€‰æ‹©ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7e56.png" alt="image-20210713212336185"></p><p>ä¼šå‡ºç°è¿™æ ·çš„èœå•ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7e36.png" alt="image-20210713212513324"></p><p>é…ç½®ä¸‹é¡¹ç›®ä½¿ç”¨çš„JDKï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7dd1.png" alt="image-20210713220736408"></p><h2 id="2-3-å®ç°è¿œç¨‹è°ƒç”¨æ¡ˆä¾‹"><a href="#2-3-å®ç°è¿œç¨‹è°ƒç”¨æ¡ˆä¾‹" class="headerlink" title="2.3.å®ç°è¿œç¨‹è°ƒç”¨æ¡ˆä¾‹"></a>2.3.å®ç°è¿œç¨‹è°ƒç”¨æ¡ˆä¾‹</h2><p>åœ¨order-serviceæœåŠ¡ä¸­ï¼Œæœ‰ä¸€ä¸ªæ ¹æ®idæŸ¥è¯¢è®¢å•çš„æ¥å£ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7ee9.png" alt="image-20210713212749575"></p><p>æ ¹æ®idæŸ¥è¯¢è®¢å•ï¼Œè¿”å›å€¼æ˜¯Orderå¯¹è±¡ï¼Œå¦‚å›¾ï¼š</p><p><img src="/Hexo/../img/image-20210713212901725.png" alt="image-20210713212901725"></p><p>å…¶ä¸­çš„userä¸ºnull</p><p>åœ¨user-serviceä¸­æœ‰ä¸€ä¸ªæ ¹æ®idæŸ¥è¯¢ç”¨æˆ·çš„æ¥å£ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7eff.png" alt="image-20210713213146089"></p><p>æŸ¥è¯¢çš„ç»“æœå¦‚å›¾ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7fc9.png" alt="image-20210713213213075"></p><h3 id="2-3-1-æ¡ˆä¾‹éœ€æ±‚ï¼š"><a href="#2-3-1-æ¡ˆä¾‹éœ€æ±‚ï¼š" class="headerlink" title="2.3.1.æ¡ˆä¾‹éœ€æ±‚ï¼š"></a>2.3.1.æ¡ˆä¾‹éœ€æ±‚ï¼š</h3><p>ä¿®æ”¹order-serviceä¸­çš„æ ¹æ®idæŸ¥è¯¢è®¢å•ä¸šåŠ¡ï¼Œè¦æ±‚åœ¨æŸ¥è¯¢è®¢å•çš„åŒæ—¶ï¼Œæ ¹æ®è®¢å•ä¸­åŒ…å«çš„userIdæŸ¥è¯¢å‡ºç”¨æˆ·ä¿¡æ¯ï¼Œä¸€èµ·è¿”å›ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8004.png" alt="image-20210713213312278"></p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨order-serviceä¸­ å‘user-serviceå‘èµ·ä¸€ä¸ªhttpçš„è¯·æ±‚ï¼Œè°ƒç”¨<a href="http://localhost:8081/user/%7BuserId%7D%E8%BF%99%E4%B8%AA%E6%8E%A5%E5%8F%A3%E3%80%82">http://localhost:8081/user/{userId}è¿™ä¸ªæ¥å£ã€‚</a></p><p>å¤§æ¦‚çš„æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>æ³¨å†Œä¸€ä¸ªRestTemplateçš„å®ä¾‹åˆ°Springå®¹å™¨</li><li>ä¿®æ”¹order-serviceæœåŠ¡ä¸­çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ï¼Œæ ¹æ®Orderå¯¹è±¡ä¸­çš„userIdæŸ¥è¯¢User</li><li>å°†æŸ¥è¯¢çš„Userå¡«å……åˆ°Orderå¯¹è±¡ï¼Œä¸€èµ·è¿”å›</li></ul><h3 id="2-3-2-æ³¨å†ŒRestTemplate"><a href="#2-3-2-æ³¨å†ŒRestTemplate" class="headerlink" title="2.3.2.æ³¨å†ŒRestTemplate"></a>2.3.2.æ³¨å†ŒRestTemplate</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨order-serviceæœåŠ¡ä¸­çš„OrderApplicationå¯åŠ¨ç±»ä¸­ï¼Œæ³¨å†ŒRestTemplateå®ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.itcast.order;<br><br><span class="hljs-keyword">import</span> org.mybatis.spring.annotation.MapperScan;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.web.client.RestTemplate;<br><br><span class="hljs-meta">@MapperScan(&quot;cn.itcast.order.mapper&quot;)</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(OrderApplication.class, args);<br>    &#125;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-3-3-å®ç°è¿œç¨‹è°ƒç”¨"><a href="#2-3-3-å®ç°è¿œç¨‹è°ƒç”¨" class="headerlink" title="2.3.3.å®ç°è¿œç¨‹è°ƒç”¨"></a>2.3.3.å®ç°è¿œç¨‹è°ƒç”¨</h3><p>ä¿®æ”¹order-serviceæœåŠ¡ä¸­çš„cn.itcast.order.serviceåŒ…ä¸‹çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee7ff1.png" alt="image-20210713213959569"></p><h2 id="2-4-æä¾›è€…ä¸æ¶ˆè´¹è€…"><a href="#2-4-æä¾›è€…ä¸æ¶ˆè´¹è€…" class="headerlink" title="2.4.æä¾›è€…ä¸æ¶ˆè´¹è€…"></a>2.4.æä¾›è€…ä¸æ¶ˆè´¹è€…</h2><p>åœ¨æœåŠ¡è°ƒç”¨å…³ç³»ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªä¸åŒçš„è§’è‰²ï¼š</p><p><strong>æœåŠ¡æä¾›è€…</strong>ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè¢«å…¶å®ƒå¾®æœåŠ¡è°ƒç”¨çš„æœåŠ¡ã€‚ï¼ˆæä¾›æ¥å£ç»™å…¶å®ƒå¾®æœåŠ¡ï¼‰</p><p><strong>æœåŠ¡æ¶ˆè´¹è€…</strong>ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡çš„æœåŠ¡ã€‚ï¼ˆè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡æä¾›çš„æ¥å£ï¼‰</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee803d.png" alt="image-20210713214404481"></p><p>ä½†æ˜¯ï¼ŒæœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…çš„è§’è‰²å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œè€Œæ˜¯ç›¸å¯¹äºä¸šåŠ¡è€Œè¨€ã€‚</p><p>å¦‚æœæœåŠ¡Aè°ƒç”¨äº†æœåŠ¡Bï¼Œè€ŒæœåŠ¡Båˆè°ƒç”¨äº†æœåŠ¡Cï¼ŒæœåŠ¡Bçš„è§’è‰²æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>å¯¹äºAè°ƒç”¨Bçš„ä¸šåŠ¡è€Œè¨€ï¼šAæ˜¯æœåŠ¡æ¶ˆè´¹è€…ï¼ŒBæ˜¯æœåŠ¡æä¾›è€…</li><li>å¯¹äºBè°ƒç”¨Cçš„ä¸šåŠ¡è€Œè¨€ï¼šBæ˜¯æœåŠ¡æ¶ˆè´¹è€…ï¼ŒCæ˜¯æœåŠ¡æä¾›è€…</li></ul><p>å› æ­¤ï¼ŒæœåŠ¡Bæ—¢å¯ä»¥æ˜¯æœåŠ¡æä¾›è€…ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡æ¶ˆè´¹è€…ã€‚</p><h1 id="3-Eurekaæ³¨å†Œä¸­å¿ƒ"><a href="#3-Eurekaæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="3.Eurekaæ³¨å†Œä¸­å¿ƒ"></a>3.Eurekaæ³¨å†Œä¸­å¿ƒ</h1><p>å‡å¦‚æˆ‘ä»¬çš„æœåŠ¡æä¾›è€…user-serviceéƒ¨ç½²äº†å¤šä¸ªå®ä¾‹ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee81f2.png" alt="image-20210713214925388"></p><p>å¤§å®¶æ€è€ƒå‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>order-serviceåœ¨å‘èµ·è¿œç¨‹è°ƒç”¨çš„æ—¶å€™ï¼Œè¯¥å¦‚ä½•å¾—çŸ¥user-serviceå®ä¾‹çš„ipåœ°å€å’Œç«¯å£ï¼Ÿ</li><li>æœ‰å¤šä¸ªuser-serviceå®ä¾‹åœ°å€ï¼Œorder-serviceè°ƒç”¨æ—¶è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ</li><li>order-serviceå¦‚ä½•å¾—çŸ¥æŸä¸ªuser-serviceå®ä¾‹æ˜¯å¦ä¾ç„¶å¥åº·ï¼Œæ˜¯ä¸æ˜¯å·²ç»å®•æœºï¼Ÿ</li></ul><h2 id="3-1-Eurekaçš„ç»“æ„å’Œä½œç”¨"><a href="#3-1-Eurekaçš„ç»“æ„å’Œä½œç”¨" class="headerlink" title="3.1.Eurekaçš„ç»“æ„å’Œä½œç”¨"></a>3.1.Eurekaçš„ç»“æ„å’Œä½œç”¨</h2><p>è¿™äº›é—®é¢˜éƒ½éœ€è¦åˆ©ç”¨SpringCloudä¸­çš„æ³¨å†Œä¸­å¿ƒæ¥è§£å†³ï¼Œå…¶ä¸­æœ€å¹¿ä¸ºäººçŸ¥çš„æ³¨å†Œä¸­å¿ƒå°±æ˜¯Eurekaï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8021.png" alt="image-20210713220104956"></p><p>å›ç­”ä¹‹å‰çš„å„ä¸ªé—®é¢˜ã€‚</p><p>é—®é¢˜1ï¼šorder-serviceå¦‚ä½•å¾—çŸ¥user-serviceå®ä¾‹åœ°å€ï¼Ÿ</p><p>è·å–åœ°å€ä¿¡æ¯çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>user-serviceæœåŠ¡å®ä¾‹å¯åŠ¨åï¼Œå°†è‡ªå·±çš„ä¿¡æ¯æ³¨å†Œåˆ°eureka-serverï¼ˆEurekaæœåŠ¡ç«¯ï¼‰ã€‚è¿™ä¸ªå«æœåŠ¡æ³¨å†Œ</li><li>eureka-serverä¿å­˜æœåŠ¡åç§°åˆ°æœåŠ¡å®ä¾‹åœ°å€åˆ—è¡¨çš„æ˜ å°„å…³ç³»</li><li>order-serviceæ ¹æ®æœåŠ¡åç§°ï¼Œæ‹‰å–å®ä¾‹åœ°å€åˆ—è¡¨ã€‚è¿™ä¸ªå«æœåŠ¡å‘ç°æˆ–æœåŠ¡æ‹‰å–</li></ul><p>é—®é¢˜2ï¼šorder-serviceå¦‚ä½•ä»å¤šä¸ªuser-serviceå®ä¾‹ä¸­é€‰æ‹©å…·ä½“çš„å®ä¾‹ï¼Ÿ</p><ul><li>order-serviceä»å®ä¾‹åˆ—è¡¨ä¸­åˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•é€‰ä¸­ä¸€ä¸ªå®ä¾‹åœ°å€</li><li>å‘è¯¥å®ä¾‹åœ°å€å‘èµ·è¿œç¨‹è°ƒç”¨</li></ul><p>é—®é¢˜3ï¼šorder-serviceå¦‚ä½•å¾—çŸ¥æŸä¸ªuser-serviceå®ä¾‹æ˜¯å¦ä¾ç„¶å¥åº·ï¼Œæ˜¯ä¸æ˜¯å·²ç»å®•æœºï¼Ÿ</p><ul><li>user-serviceä¼šæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤30ç§’ï¼‰å‘eureka-serverå‘èµ·è¯·æ±‚ï¼ŒæŠ¥å‘Šè‡ªå·±çŠ¶æ€ï¼Œç§°ä¸ºå¿ƒè·³</li><li>å½“è¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰å‘é€å¿ƒè·³æ—¶ï¼Œeureka-serverä¼šè®¤ä¸ºå¾®æœåŠ¡å®ä¾‹æ•…éšœï¼Œå°†è¯¥å®ä¾‹ä»æœåŠ¡åˆ—è¡¨ä¸­å‰”é™¤</li><li>order-serviceæ‹‰å–æœåŠ¡æ—¶ï¼Œå°±èƒ½å°†æ•…éšœå®ä¾‹æ’é™¤äº†</li></ul><blockquote><p>æ³¨æ„ï¼šä¸€ä¸ªå¾®æœåŠ¡ï¼Œæ—¢å¯ä»¥æ˜¯æœåŠ¡æä¾›è€…ï¼Œåˆå¯ä»¥æ˜¯æœåŠ¡æ¶ˆè´¹è€…ï¼Œå› æ­¤eurekaå°†æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ç­‰åŠŸèƒ½ç»Ÿä¸€å°è£…åˆ°äº†eureka-clientç«¯</p></blockquote><p>å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åŠ¨æ‰‹å®è·µçš„æ­¥éª¤åŒ…æ‹¬ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee807e.png" alt="image-20210713220509769"></p><h2 id="3-2-æ­å»ºeureka-server"><a href="#3-2-æ­å»ºeureka-server" class="headerlink" title="3.2.æ­å»ºeureka-server"></a>3.2.æ­å»ºeureka-server</h2><p>é¦–å…ˆå¤§å®¶æ³¨å†Œä¸­å¿ƒæœåŠ¡ç«¯ï¼šeureka-serverï¼Œè¿™å¿…é¡»æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡</p><h3 id="3-2-1-åˆ›å»ºeureka-serveræœåŠ¡"><a href="#3-2-1-åˆ›å»ºeureka-serveræœåŠ¡" class="headerlink" title="3.2.1.åˆ›å»ºeureka-serveræœåŠ¡"></a>3.2.1.åˆ›å»ºeureka-serveræœåŠ¡</h3><p>åœ¨cloud-demoçˆ¶å·¥ç¨‹ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªå­æ¨¡å—ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee820b.png" alt="image-20210713220605881"></p><p>å¡«å†™æ¨¡å—ä¿¡æ¯ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8055.png" alt="image-20210713220857396"></p><p>ç„¶åå¡«å†™æœåŠ¡ä¿¡æ¯ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8945.png" alt="image-20210713221339022"></p><h3 id="3-2-2-å¼•å…¥eurekaä¾èµ–"><a href="#3-2-2-å¼•å…¥eurekaä¾èµ–" class="headerlink" title="3.2.2.å¼•å…¥eurekaä¾èµ–"></a>3.2.2.å¼•å…¥eurekaä¾èµ–</h3><p>å¼•å…¥SpringCloudä¸ºeurekaæä¾›çš„starterä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-2-3-ç¼–å†™å¯åŠ¨ç±»"><a href="#3-2-3-ç¼–å†™å¯åŠ¨ç±»" class="headerlink" title="3.2.3.ç¼–å†™å¯åŠ¨ç±»"></a>3.2.3.ç¼–å†™å¯åŠ¨ç±»</h3><p>ç»™eureka-serveræœåŠ¡ç¼–å†™ä¸€ä¸ªå¯åŠ¨ç±»ï¼Œä¸€å®šè¦æ·»åŠ ä¸€ä¸ª@EnableEurekaServeræ³¨è§£ï¼Œå¼€å¯eurekaçš„æ³¨å†Œä¸­å¿ƒåŠŸèƒ½ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.itcast.eureka;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><span class="hljs-keyword">import</span> org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableEurekaServer</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EurekaApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(EurekaApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-2-4-ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#3-2-4-ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="3.2.4.ç¼–å†™é…ç½®æ–‡ä»¶"></a>3.2.4.ç¼–å†™é…ç½®æ–‡ä»¶</h3><p>ç¼–å†™ä¸€ä¸ªapplication.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">10086</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">eureka-server</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span> <br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://127.0.0.1:10086/eureka</span><br></code></pre></td></tr></table></figure><h3 id="3-2-5-å¯åŠ¨æœåŠ¡"><a href="#3-2-5-å¯åŠ¨æœåŠ¡" class="headerlink" title="3.2.5.å¯åŠ¨æœåŠ¡"></a>3.2.5.å¯åŠ¨æœåŠ¡</h3><p>å¯åŠ¨å¾®æœåŠ¡ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®ï¼š<a href="http://127.0.0.1:10086/">http://127.0.0.1:10086</a></p><p>çœ‹åˆ°ä¸‹é¢ç»“æœåº”è¯¥æ˜¯æˆåŠŸäº†ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8918.png" alt="image-20210713222157190"></p><h2 id="3-3-æœåŠ¡æ³¨å†Œ"><a href="#3-3-æœåŠ¡æ³¨å†Œ" class="headerlink" title="3.3.æœåŠ¡æ³¨å†Œ"></a>3.3.æœåŠ¡æ³¨å†Œ</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†user-serviceæ³¨å†Œåˆ°eureka-serverä¸­å»ã€‚</p><h3 id="1ï¼‰å¼•å…¥ä¾èµ–"><a href="#1ï¼‰å¼•å…¥ä¾èµ–" class="headerlink" title="1ï¼‰å¼•å…¥ä¾èµ–"></a>1ï¼‰å¼•å…¥ä¾èµ–</h3><p>åœ¨user-serviceçš„pomæ–‡ä»¶ä¸­ï¼Œå¼•å…¥ä¸‹é¢çš„eureka-clientä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2ï¼‰é…ç½®æ–‡ä»¶"><a href="#2ï¼‰é…ç½®æ–‡ä»¶" class="headerlink" title="2ï¼‰é…ç½®æ–‡ä»¶"></a>2ï¼‰é…ç½®æ–‡ä»¶</h3><p>åœ¨user-serviceä¸­ï¼Œä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œæ·»åŠ æœåŠ¡åç§°ã€eurekaåœ°å€ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">userservice</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://127.0.0.1:10086/eureka</span><br></code></pre></td></tr></table></figure><h3 id="3ï¼‰å¯åŠ¨å¤šä¸ªuser-serviceå®ä¾‹"><a href="#3ï¼‰å¯åŠ¨å¤šä¸ªuser-serviceå®ä¾‹" class="headerlink" title="3ï¼‰å¯åŠ¨å¤šä¸ªuser-serviceå®ä¾‹"></a>3ï¼‰å¯åŠ¨å¤šä¸ªuser-serviceå®ä¾‹</h3><p>ä¸ºäº†æ¼”ç¤ºä¸€ä¸ªæœåŠ¡æœ‰å¤šä¸ªå®ä¾‹çš„åœºæ™¯ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªSpringBootçš„å¯åŠ¨é…ç½®ï¼Œå†å¯åŠ¨ä¸€ä¸ªuser-serviceã€‚</p><p>é¦–å…ˆï¼Œå¤åˆ¶åŸæ¥çš„user-serviceå¯åŠ¨é…ç½®ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee88dc.png" alt="image-20210713222656562"></p><p>ç„¶åï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œå¡«å†™ä¿¡æ¯ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee88f4.png" alt="image-20210713222757702"></p><p>ç°åœ¨ï¼ŒSpringBootçª—å£ä¼šå‡ºç°ä¸¤ä¸ªuser-serviceå¯åŠ¨é…ç½®ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee88b2.png" alt="image-20210713222841951"></p><p>ä¸è¿‡ï¼Œç¬¬ä¸€ä¸ªæ˜¯8081ç«¯å£ï¼Œç¬¬äºŒä¸ªæ˜¯8082ç«¯å£ã€‚</p><p>å¯åŠ¨ä¸¤ä¸ªuser-serviceå®ä¾‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee88c5.png" alt="image-20210713223041491"></p><p>æŸ¥çœ‹eureka-serverç®¡ç†é¡µé¢ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee892f.png" alt="image-20210713223150650"></p><h2 id="3-4-æœåŠ¡å‘ç°"><a href="#3-4-æœåŠ¡å‘ç°" class="headerlink" title="3.4.æœåŠ¡å‘ç°"></a>3.4.æœåŠ¡å‘ç°</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†order-serviceçš„é€»è¾‘ä¿®æ”¹ï¼šå‘eureka-serveræ‹‰å–user-serviceçš„ä¿¡æ¯ï¼Œå®ç°æœåŠ¡å‘ç°ã€‚</p><h3 id="1ï¼‰å¼•å…¥ä¾èµ–-1"><a href="#1ï¼‰å¼•å…¥ä¾èµ–-1" class="headerlink" title="1ï¼‰å¼•å…¥ä¾èµ–"></a>1ï¼‰å¼•å…¥ä¾èµ–</h3><p>ä¹‹å‰è¯´è¿‡ï¼ŒæœåŠ¡å‘ç°ã€æœåŠ¡æ³¨å†Œç»Ÿä¸€éƒ½å°è£…åœ¨eureka-clientä¾èµ–ï¼Œå› æ­¤è¿™ä¸€æ­¥ä¸æœåŠ¡æ³¨å†Œæ—¶ä¸€è‡´ã€‚</p><p>åœ¨order-serviceçš„pomæ–‡ä»¶ä¸­ï¼Œå¼•å…¥ä¸‹é¢çš„eureka-clientä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2ï¼‰é…ç½®æ–‡ä»¶-1"><a href="#2ï¼‰é…ç½®æ–‡ä»¶-1" class="headerlink" title="2ï¼‰é…ç½®æ–‡ä»¶"></a>2ï¼‰é…ç½®æ–‡ä»¶</h3><p>æœåŠ¡å‘ç°ä¹Ÿéœ€è¦çŸ¥é“eurekaåœ°å€ï¼Œå› æ­¤ç¬¬äºŒæ­¥ä¸æœåŠ¡æ³¨å†Œä¸€è‡´ï¼Œéƒ½æ˜¯é…ç½®eurekaä¿¡æ¯ï¼š</p><p>åœ¨order-serviceä¸­ï¼Œä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œæ·»åŠ æœåŠ¡åç§°ã€eurekaåœ°å€ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">orderservice</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://127.0.0.1:10086/eureka</span><br></code></pre></td></tr></table></figure><h3 id="3ï¼‰æœåŠ¡æ‹‰å–å’Œè´Ÿè½½å‡è¡¡"><a href="#3ï¼‰æœåŠ¡æ‹‰å–å’Œè´Ÿè½½å‡è¡¡" class="headerlink" title="3ï¼‰æœåŠ¡æ‹‰å–å’Œè´Ÿè½½å‡è¡¡"></a>3ï¼‰æœåŠ¡æ‹‰å–å’Œè´Ÿè½½å‡è¡¡</h3><p>æœ€åï¼Œæˆ‘ä»¬è¦å»eureka-serverä¸­æ‹‰å–user-serviceæœåŠ¡çš„å®ä¾‹åˆ—è¡¨ï¼Œå¹¶ä¸”å®ç°è´Ÿè½½å‡è¡¡ã€‚</p><p>ä¸è¿‡è¿™äº›åŠ¨ä½œä¸ç”¨æˆ‘ä»¬å»åšï¼Œåªéœ€è¦æ·»åŠ ä¸€äº›æ³¨è§£å³å¯ã€‚</p><p>åœ¨order-serviceçš„OrderApplicationä¸­ï¼Œç»™RestTemplateè¿™ä¸ªBeanæ·»åŠ ä¸€ä¸ª@LoadBalancedæ³¨è§£ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8907.png" alt="image-20210713224049419"></p><p>ä¿®æ”¹order-serviceæœåŠ¡ä¸­çš„cn.itcast.order.serviceåŒ…ä¸‹çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ã€‚ä¿®æ”¹è®¿é—®çš„urlè·¯å¾„ï¼Œç”¨æœåŠ¡åä»£æ›¿ipã€ç«¯å£ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8d00.png" alt="image-20210713224245731"></p><p>springä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬ä»eureka-serverç«¯ï¼Œæ ¹æ®userserviceè¿™ä¸ªæœåŠ¡åç§°ï¼Œè·å–å®ä¾‹åˆ—è¡¨ï¼Œè€Œåå®Œæˆè´Ÿè½½å‡è¡¡ã€‚</p><h1 id="4-Ribbonè´Ÿè½½å‡è¡¡"><a href="#4-Ribbonè´Ÿè½½å‡è¡¡" class="headerlink" title="4.Ribbonè´Ÿè½½å‡è¡¡"></a>4.Ribbonè´Ÿè½½å‡è¡¡</h1><p>ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†@LoadBalancedæ³¨è§£ï¼Œå³å¯å®ç°è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸç†å‘¢ï¼Ÿ</p><h2 id="4-1-è´Ÿè½½å‡è¡¡åŸç†"><a href="#4-1-è´Ÿè½½å‡è¡¡åŸç†" class="headerlink" title="4.1.è´Ÿè½½å‡è¡¡åŸç†"></a>4.1.è´Ÿè½½å‡è¡¡åŸç†</h2><p>SpringCloudåº•å±‚å…¶å®æ˜¯åˆ©ç”¨äº†ä¸€ä¸ªåä¸ºRibbonçš„ç»„ä»¶ï¼Œæ¥å®ç°è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8cbb.png" alt="image-20210713224517686"></p><p>é‚£ä¹ˆæˆ‘ä»¬å‘å‡ºçš„è¯·æ±‚æ˜æ˜æ˜¯<a href="http://userservice/user/1%EF%BC%8C%E6%80%8E%E4%B9%88%E5%8F%98%E6%88%90%E4%BA%86http://localhost:8081%E7%9A%84%E5%91%A2%EF%BC%9F">http://userservice/user/1ï¼Œæ€ä¹ˆå˜æˆäº†http://localhost:8081çš„å‘¢ï¼Ÿ</a></p><h2 id="4-2-æºç è·Ÿè¸ª"><a href="#4-2-æºç è·Ÿè¸ª" class="headerlink" title="4.2.æºç è·Ÿè¸ª"></a>4.2.æºç è·Ÿè¸ª</h2><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬åªè¾“å…¥äº†serviceåç§°å°±å¯ä»¥è®¿é—®äº†å‘¢ï¼Ÿä¹‹å‰è¿˜è¦è·å–ipå’Œç«¯å£ã€‚</p><p>æ˜¾ç„¶æœ‰äººå¸®æˆ‘ä»¬æ ¹æ®serviceåç§°ï¼Œè·å–åˆ°äº†æœåŠ¡å®ä¾‹çš„ipå’Œç«¯å£ã€‚å®ƒå°±æ˜¯<code>LoadBalancerInterceptor</code>ï¼Œè¿™ä¸ªç±»ä¼šåœ¨å¯¹RestTemplateçš„è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼Œç„¶åä»Eurekaæ ¹æ®æœåŠ¡idè·å–æœåŠ¡åˆ—è¡¨ï¼Œéšååˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•å¾—åˆ°çœŸå®çš„æœåŠ¡åœ°å€ä¿¡æ¯ï¼Œæ›¿æ¢æœåŠ¡idã€‚</p><p>æˆ‘ä»¬è¿›è¡Œæºç è·Ÿè¸ªï¼š</p><h3 id="1ï¼‰LoadBalancerIntercepor"><a href="#1ï¼‰LoadBalancerIntercepor" class="headerlink" title="1ï¼‰LoadBalancerIntercepor"></a>1ï¼‰LoadBalancerIntercepor</h3><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8cd5.png" alt="1525620483637"></p><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„interceptæ–¹æ³•ï¼Œæ‹¦æˆªäº†ç”¨æˆ·çš„HttpRequestè¯·æ±‚ï¼Œç„¶ååšäº†å‡ ä»¶äº‹ï¼š</p><ul><li><code>request.getURI()</code>ï¼šè·å–è¯·æ±‚uriï¼Œæœ¬ä¾‹ä¸­å°±æ˜¯ <a href="http://user-service/user/8">http://user-service/user/8</a></li><li><code>originalUri.getHost()</code>ï¼šè·å–uriè·¯å¾„çš„ä¸»æœºåï¼Œå…¶å®å°±æ˜¯æœåŠ¡idï¼Œ<code>user-service</code></li><li><code>this.loadBalancer.execute()</code>ï¼šå¤„ç†æœåŠ¡idï¼Œå’Œç”¨æˆ·è¯·æ±‚ã€‚</li></ul><p>è¿™é‡Œçš„<code>this.loadBalancer</code>æ˜¯<code>LoadBalancerClient</code>ç±»å‹ï¼Œæˆ‘ä»¬ç»§ç»­è·Ÿå…¥ã€‚</p><h3 id="2ï¼‰LoadBalancerClient"><a href="#2ï¼‰LoadBalancerClient" class="headerlink" title="2ï¼‰LoadBalancerClient"></a>2ï¼‰LoadBalancerClient</h3><p>ç»§ç»­è·Ÿå…¥executeæ–¹æ³•ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfb27f86abb2aee8d31.png" alt="1525620787090"></p><p>ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>getLoadBalancer(serviceId)ï¼šæ ¹æ®æœåŠ¡idè·å–ILoadBalancerï¼Œè€ŒILoadBalancerä¼šæ‹¿ç€æœåŠ¡idå»eurekaä¸­è·å–æœåŠ¡åˆ—è¡¨å¹¶ä¿å­˜èµ·æ¥ã€‚</li><li>getServer(loadBalancer)ï¼šåˆ©ç”¨å†…ç½®çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä»æœåŠ¡åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªã€‚æœ¬ä¾‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è·å–äº†8082ç«¯å£çš„æœåŠ¡</li></ul><p>æ”¾è¡Œåï¼Œå†æ¬¡è®¿é—®å¹¶è·Ÿè¸ªï¼Œå‘ç°è·å–çš„æ˜¯8081ï¼š</p><p> <img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee888a.png" alt="1525620835911"></p><p>æœç„¶å®ç°äº†è´Ÿè½½å‡è¡¡ã€‚</p><h3 id="3ï¼‰è´Ÿè½½å‡è¡¡ç­–ç•¥IRule"><a href="#3ï¼‰è´Ÿè½½å‡è¡¡ç­–ç•¥IRule" class="headerlink" title="3ï¼‰è´Ÿè½½å‡è¡¡ç­–ç•¥IRule"></a>3ï¼‰è´Ÿè½½å‡è¡¡ç­–ç•¥IRule</h3><p>åœ¨åˆšæ‰çš„ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è·å–æœåŠ¡ä½¿é€šè¿‡ä¸€ä¸ª<code>getServer</code>æ–¹æ³•æ¥åšè´Ÿè½½å‡è¡¡:</p><p> <img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee888a.png" alt="1525620835911"></p><p>æˆ‘ä»¬ç»§ç»­è·Ÿå…¥ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee889e.png" alt="1544361421671"></p><p>ç»§ç»­è·Ÿè¸ªæºç chooseServeræ–¹æ³•ï¼Œå‘ç°è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p><p> <img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee866e.png" alt="1525622652849"></p><p>æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªruleæ˜¯è°ï¼š</p><p> <img src="/Hexo/../img/202203011142467.png" alt="1525622699666"></p><p>è¿™é‡Œçš„ruleé»˜è®¤å€¼æ˜¯ä¸€ä¸ª<code>RoundRobinRule</code>ï¼Œçœ‹ç±»çš„ä»‹ç»ï¼š</p><p> <img src="/Hexo/../img/202203011142675.png" alt="1525622754316"></p><p>è¿™ä¸å°±æ˜¯è½®è¯¢çš„æ„æ€å˜›ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæ•´ä¸ªè´Ÿè½½å‡è¡¡çš„æµç¨‹æˆ‘ä»¬å°±æ¸…æ¥šäº†ã€‚</p><h3 id="4ï¼‰æ€»ç»“"><a href="#4ï¼‰æ€»ç»“" class="headerlink" title="4ï¼‰æ€»ç»“"></a>4ï¼‰æ€»ç»“</h3><p>SpringCloudRibbonçš„åº•å±‚é‡‡ç”¨äº†ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªäº†RestTemplateå‘å‡ºçš„è¯·æ±‚ï¼Œå¯¹åœ°å€åšäº†ä¿®æ”¹ã€‚ç”¨ä¸€å¹…å›¾æ¥æ€»ç»“ä¸€ä¸‹ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8709.png" alt="image-20210713224724673"></p><p>åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>æ‹¦æˆªæˆ‘ä»¬çš„RestTemplateè¯·æ±‚<a href="http://userservice/user/1">http://userservice/user/1</a></li><li>RibbonLoadBalancerClientä¼šä»è¯·æ±‚urlä¸­è·å–æœåŠ¡åç§°ï¼Œä¹Ÿå°±æ˜¯user-service</li><li>DynamicServerListLoadBalanceræ ¹æ®user-serviceåˆ°eurekaæ‹‰å–æœåŠ¡åˆ—è¡¨</li><li>eurekaè¿”å›åˆ—è¡¨ï¼Œlocalhost:8081ã€localhost:8082</li><li>IRuleåˆ©ç”¨å†…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªï¼Œä¾‹å¦‚localhost:8081</li><li>RibbonLoadBalancerClientä¿®æ”¹è¯·æ±‚åœ°å€ï¼Œç”¨localhost:8081æ›¿ä»£userserviceï¼Œå¾—åˆ°<a href="http://localhost:8081/user/1%EF%BC%8C%E5%8F%91%E8%B5%B7%E7%9C%9F%E5%AE%9E%E8%AF%B7%E6%B1%82">http://localhost:8081/user/1ï¼Œå‘èµ·çœŸå®è¯·æ±‚</a></li></ul><h2 id="4-3-è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#4-3-è´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="4.3.è´Ÿè½½å‡è¡¡ç­–ç•¥"></a>4.3.è´Ÿè½½å‡è¡¡ç­–ç•¥</h2><h3 id="4-3-1-è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#4-3-1-è´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="4.3.1.è´Ÿè½½å‡è¡¡ç­–ç•¥"></a>4.3.1.è´Ÿè½½å‡è¡¡ç­–ç•¥</h3><p>è´Ÿè½½å‡è¡¡çš„è§„åˆ™éƒ½å®šä¹‰åœ¨IRuleæ¥å£ä¸­ï¼Œè€ŒIRuleæœ‰å¾ˆå¤šä¸åŒçš„å®ç°ç±»ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8807.png" alt="image-20210713225653000"></p><p>ä¸åŒè§„åˆ™çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><table><thead><tr><th><strong>å†…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ç±»</strong></th><th><strong>è§„åˆ™æè¿°</strong></th></tr></thead><tbody><tr><td>RoundRobinRule</td><td>ç®€å•è½®è¯¢æœåŠ¡åˆ—è¡¨æ¥é€‰æ‹©æœåŠ¡å™¨ã€‚å®ƒæ˜¯Ribboné»˜è®¤çš„è´Ÿè½½å‡è¡¡è§„åˆ™ã€‚</td></tr><tr><td>AvailabilityFilteringRule</td><td>å¯¹ä»¥ä¸‹ä¸¤ç§æœåŠ¡å™¨è¿›è¡Œå¿½ç•¥ï¼š   ï¼ˆ1ï¼‰åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°æœåŠ¡å™¨å¦‚æœ3æ¬¡è¿æ¥å¤±è´¥ï¼Œè¿™å°æœåŠ¡å™¨å°±ä¼šè¢«è®¾ç½®ä¸ºâ€œçŸ­è·¯â€çŠ¶æ€ã€‚çŸ­è·¯çŠ¶æ€å°†æŒç»­30ç§’ï¼Œå¦‚æœå†æ¬¡è¿æ¥å¤±è´¥ï¼ŒçŸ­è·¯çš„æŒç»­æ—¶é—´å°±ä¼šå‡ ä½•çº§åœ°å¢åŠ ã€‚  ï¼ˆ2ï¼‰å¹¶å‘æ•°è¿‡é«˜çš„æœåŠ¡å™¨ã€‚å¦‚æœä¸€ä¸ªæœåŠ¡å™¨çš„å¹¶å‘è¿æ¥æ•°è¿‡é«˜ï¼Œé…ç½®äº†AvailabilityFilteringRuleè§„åˆ™çš„å®¢æˆ·ç«¯ä¹Ÿä¼šå°†å…¶å¿½ç•¥ã€‚å¹¶å‘è¿æ¥æ•°çš„ä¸Šé™ï¼Œå¯ä»¥ç”±å®¢æˆ·ç«¯çš„<clientName>.<clientConfigNameSpace>.ActiveConnectionsLimitå±æ€§è¿›è¡Œé…ç½®ã€‚</td></tr><tr><td>WeightedResponseTimeRule</td><td>ä¸ºæ¯ä¸€ä¸ªæœåŠ¡å™¨èµ‹äºˆä¸€ä¸ªæƒé‡å€¼ã€‚æœåŠ¡å™¨å“åº”æ—¶é—´è¶Šé•¿ï¼Œè¿™ä¸ªæœåŠ¡å™¨çš„æƒé‡å°±è¶Šå°ã€‚è¿™ä¸ªè§„åˆ™ä¼šéšæœºé€‰æ‹©æœåŠ¡å™¨ï¼Œè¿™ä¸ªæƒé‡å€¼ä¼šå½±å“æœåŠ¡å™¨çš„é€‰æ‹©ã€‚</td></tr><tr><td><strong>ZoneAvoidanceRule</strong></td><td>ä»¥åŒºåŸŸå¯ç”¨çš„æœåŠ¡å™¨ä¸ºåŸºç¡€è¿›è¡ŒæœåŠ¡å™¨çš„é€‰æ‹©ã€‚ä½¿ç”¨Zoneå¯¹æœåŠ¡å™¨è¿›è¡Œåˆ†ç±»ï¼Œè¿™ä¸ªZoneå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœºæˆ¿ã€ä¸€ä¸ªæœºæ¶ç­‰ã€‚è€Œåå†å¯¹Zoneå†…çš„å¤šä¸ªæœåŠ¡åšè½®è¯¢ã€‚</td></tr><tr><td>BestAvailableRule</td><td>å¿½ç•¥é‚£äº›çŸ­è·¯çš„æœåŠ¡å™¨ï¼Œå¹¶é€‰æ‹©å¹¶å‘æ•°è¾ƒä½çš„æœåŠ¡å™¨ã€‚</td></tr><tr><td>RandomRule</td><td>éšæœºé€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„æœåŠ¡å™¨ã€‚</td></tr><tr><td>RetryRule</td><td>é‡è¯•æœºåˆ¶çš„é€‰æ‹©é€»è¾‘</td></tr></tbody></table><p>é»˜è®¤çš„å®ç°å°±æ˜¯ZoneAvoidanceRuleï¼Œæ˜¯ä¸€ç§è½®è¯¢æ–¹æ¡ˆ</p><h3 id="4-3-2-è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#4-3-2-è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="4.3.2.è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥"></a>4.3.2.è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥</h3><p>é€šè¿‡å®šä¹‰IRuleå®ç°å¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>ä»£ç æ–¹å¼ï¼šåœ¨order-serviceä¸­çš„OrderApplicationç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„IRuleï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> IRule <span class="hljs-title function_">randomRule</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomRule</span>();<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>é…ç½®æ–‡ä»¶æ–¹å¼ï¼šåœ¨order-serviceçš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ æ–°çš„é…ç½®ä¹Ÿå¯ä»¥ä¿®æ”¹è§„åˆ™ï¼š</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">userservice:</span> <span class="hljs-comment"># ç»™æŸä¸ªå¾®æœåŠ¡é…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œè¿™é‡Œæ˜¯userserviceæœåŠ¡</span><br>  <span class="hljs-attr">ribbon:</span><br>    <span class="hljs-attr">NFLoadBalancerRuleClassName:</span> <span class="hljs-string">com.netflix.loadbalancer.RandomRule</span> <span class="hljs-comment"># è´Ÿè½½å‡è¡¡è§„åˆ™ </span><br></code></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„</strong>ï¼Œä¸€èˆ¬ç”¨é»˜è®¤çš„è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œä¸åšä¿®æ”¹ã€‚</p></blockquote><h2 id="4-4-é¥¥é¥¿åŠ è½½"><a href="#4-4-é¥¥é¥¿åŠ è½½" class="headerlink" title="4.4.é¥¥é¥¿åŠ è½½"></a>4.4.é¥¥é¥¿åŠ è½½</h2><p>Ribboné»˜è®¤æ˜¯é‡‡ç”¨æ‡’åŠ è½½ï¼Œå³ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šå»åˆ›å»ºLoadBalanceClientï¼Œè¯·æ±‚æ—¶é—´ä¼šå¾ˆé•¿ã€‚</p><p>è€Œé¥¥é¥¿åŠ è½½åˆ™ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶åˆ›å»ºï¼Œé™ä½ç¬¬ä¸€æ¬¡è®¿é—®çš„è€—æ—¶ï¼Œé€šè¿‡ä¸‹é¢é…ç½®å¼€å¯é¥¥é¥¿åŠ è½½ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">ribbon:</span><br>  <span class="hljs-attr">eager-load:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">clients:</span> <span class="hljs-string">userservice</span><br></code></pre></td></tr></table></figure><h1 id="5-Nacosæ³¨å†Œä¸­å¿ƒ"><a href="#5-Nacosæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="5.Nacosæ³¨å†Œä¸­å¿ƒ"></a>5.Nacosæ³¨å†Œä¸­å¿ƒ</h1><p>å›½å†…å…¬å¸ä¸€èˆ¬éƒ½æ¨å´‡é˜¿é‡Œå·´å·´çš„æŠ€æœ¯ï¼Œæ¯”å¦‚æ³¨å†Œä¸­å¿ƒï¼ŒSpringCloudAlibabaä¹Ÿæ¨å‡ºäº†ä¸€ä¸ªåä¸ºNacosçš„æ³¨å†Œä¸­å¿ƒã€‚</p><h2 id="5-1-è®¤è¯†å’Œå®‰è£…Nacos"><a href="#5-1-è®¤è¯†å’Œå®‰è£…Nacos" class="headerlink" title="5.1.è®¤è¯†å’Œå®‰è£…Nacos"></a>5.1.è®¤è¯†å’Œå®‰è£…Nacos</h2><p><a href="https://nacos.io/">Nacos</a>æ˜¯é˜¿é‡Œå·´å·´çš„äº§å“ï¼Œç°åœ¨æ˜¯<a href="https://spring.io/projects/spring-cloud">SpringCloud</a>ä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚ç›¸æ¯”<a href="https://github.com/Netflix/eureka">Eureka</a>åŠŸèƒ½æ›´åŠ ä¸°å¯Œï¼Œåœ¨å›½å†…å—æ¬¢è¿ç¨‹åº¦è¾ƒé«˜ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8761.png" alt="image-20210713230444308"></p><p>å®‰è£…æ–¹å¼å¯ä»¥å‚è€ƒè¯¾å‰èµ„æ–™ã€ŠNacoså®‰è£…æŒ‡å—.mdã€‹</p><h2 id="5-2-æœåŠ¡æ³¨å†Œåˆ°nacos"><a href="#5-2-æœåŠ¡æ³¨å†Œåˆ°nacos" class="headerlink" title="5.2.æœåŠ¡æ³¨å†Œåˆ°nacos"></a>5.2.æœåŠ¡æ³¨å†Œåˆ°nacos</h2><p>Nacosæ˜¯SpringCloudAlibabaçš„ç»„ä»¶ï¼Œè€ŒSpringCloudAlibabaä¹Ÿéµå¾ªSpringCloudä¸­å®šä¹‰çš„æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°è§„èŒƒã€‚å› æ­¤ä½¿ç”¨Nacoså’Œä½¿ç”¨Eurekaå¯¹äºå¾®æœåŠ¡æ¥è¯´ï¼Œå¹¶æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</p><p>ä¸»è¦å·®å¼‚åœ¨äºï¼š</p><ul><li>ä¾èµ–ä¸åŒ</li><li>æœåŠ¡åœ°å€ä¸åŒ</li></ul><h3 id="1ï¼‰å¼•å…¥ä¾èµ–-2"><a href="#1ï¼‰å¼•å…¥ä¾èµ–-2" class="headerlink" title="1ï¼‰å¼•å…¥ä¾èµ–"></a>1ï¼‰å¼•å…¥ä¾èµ–</h3><p>åœ¨cloud-demoçˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶ä¸­çš„<code>&lt;dependencyManagement&gt;</code>ä¸­å¼•å…¥SpringCloudAlibabaçš„ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.6.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨user-serviceå’Œorder-serviceä¸­çš„pomæ–‡ä»¶ä¸­å¼•å…¥nacos-discoveryä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸è¦å¿˜äº†æ³¨é‡Šæ‰eurekaçš„ä¾èµ–ã€‚</p></blockquote><h3 id="2ï¼‰é…ç½®nacosåœ°å€"><a href="#2ï¼‰é…ç½®nacosåœ°å€" class="headerlink" title="2ï¼‰é…ç½®nacosåœ°å€"></a>2ï¼‰é…ç½®nacosåœ°å€</h3><p>åœ¨user-serviceå’Œorder-serviceçš„application.ymlä¸­æ·»åŠ nacosåœ°å€ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸è¦å¿˜äº†æ³¨é‡Šæ‰eurekaçš„åœ°å€</p></blockquote><h3 id="3ï¼‰é‡å¯"><a href="#3ï¼‰é‡å¯" class="headerlink" title="3ï¼‰é‡å¯"></a>3ï¼‰é‡å¯</h3><p>é‡å¯å¾®æœåŠ¡åï¼Œç™»å½•nacosç®¡ç†é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°å¾®æœåŠ¡ä¿¡æ¯ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8834.png" alt="image-20210713231439607"></p><h2 id="5-3-æœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹"><a href="#5-3-æœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹" class="headerlink" title="5.3.æœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹"></a>5.3.æœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹</h2><p>ä¸€ä¸ª<strong>æœåŠ¡</strong>å¯ä»¥æœ‰å¤šä¸ª<strong>å®ä¾‹</strong>ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„user-serviceï¼Œå¯ä»¥æœ‰:</p><ul><li>127.0.0.1:8081</li><li>127.0.0.1:8082</li><li>127.0.0.1:8083</li></ul><p>å‡å¦‚è¿™äº›å®ä¾‹åˆ†å¸ƒäºå…¨å›½å„åœ°çš„ä¸åŒæœºæˆ¿ï¼Œä¾‹å¦‚ï¼š</p><ul><li>127.0.0.1:8081ï¼Œåœ¨ä¸Šæµ·æœºæˆ¿</li><li>127.0.0.1:8082ï¼Œåœ¨ä¸Šæµ·æœºæˆ¿</li><li>127.0.0.1:8083ï¼Œåœ¨æ­å·æœºæˆ¿</li></ul><p>Nacoså°±å°†åŒä¸€æœºæˆ¿å†…çš„å®ä¾‹ åˆ’åˆ†ä¸ºä¸€ä¸ª<strong>é›†ç¾¤</strong>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œuser-serviceæ˜¯æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥åŒ…å«å¤šä¸ªé›†ç¾¤ï¼Œå¦‚æ­å·ã€ä¸Šæµ·ï¼Œæ¯ä¸ªé›†ç¾¤ä¸‹å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œå½¢æˆåˆ†çº§æ¨¡å‹ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee87ec.png" alt="image-20210713232522531"></p><p>å¾®æœåŠ¡äº’ç›¸è®¿é—®æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½è®¿é—®åŒé›†ç¾¤å®ä¾‹ï¼Œå› ä¸ºæœ¬åœ°è®¿é—®é€Ÿåº¦æ›´å¿«ã€‚å½“æœ¬é›†ç¾¤å†…ä¸å¯ç”¨æ—¶ï¼Œæ‰è®¿é—®å…¶å®ƒé›†ç¾¤ã€‚ä¾‹å¦‚ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8879.png" alt="image-20210713232658928"></p><p>æ­å·æœºæˆ¿å†…çš„order-serviceåº”è¯¥ä¼˜å…ˆè®¿é—®åŒæœºæˆ¿çš„user-serviceã€‚</p><h3 id="5-3-1-ç»™user-serviceé…ç½®é›†ç¾¤"><a href="#5-3-1-ç»™user-serviceé…ç½®é›†ç¾¤" class="headerlink" title="5.3.1.ç»™user-serviceé…ç½®é›†ç¾¤"></a>5.3.1.ç»™user-serviceé…ç½®é›†ç¾¤</h3><p>ä¿®æ”¹user-serviceçš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ é›†ç¾¤é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">cluster-name:</span> <span class="hljs-string">HZ</span> <span class="hljs-comment"># é›†ç¾¤åç§°</span><br></code></pre></td></tr></table></figure><p>é‡å¯ä¸¤ä¸ªuser-serviceå®ä¾‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨nacosæ§åˆ¶å°çœ‹åˆ°ä¸‹é¢ç»“æœï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee881b.png" alt="image-20210713232916215"></p><p>æˆ‘ä»¬å†æ¬¡å¤åˆ¶ä¸€ä¸ªuser-serviceå¯åŠ¨é…ç½®ï¼Œæ·»åŠ å±æ€§ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">-Dserver.port=8083 -Dspring.cloud.nacos.discovery.cluster-name=SH<br></code></pre></td></tr></table></figure><p>é…ç½®å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8863.png" alt="image-20210713233528982"></p><p>å¯åŠ¨UserApplication3åå†æ¬¡æŸ¥çœ‹nacosæ§åˆ¶å°ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8692.png" alt="image-20210713233727923"></p><h3 id="5-3-2-åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡"><a href="#5-3-2-åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡" class="headerlink" title="5.3.2.åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡"></a>5.3.2.åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡</h3><p>é»˜è®¤çš„<code>ZoneAvoidanceRule</code>å¹¶ä¸èƒ½å®ç°æ ¹æ®åŒé›†ç¾¤ä¼˜å…ˆæ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚</p><p>å› æ­¤Nacosä¸­æä¾›äº†ä¸€ä¸ª<code>NacosRule</code>çš„å®ç°ï¼Œå¯ä»¥ä¼˜å…ˆä»åŒé›†ç¾¤ä¸­æŒ‘é€‰å®ä¾‹ã€‚</p><p>1ï¼‰ç»™order-serviceé…ç½®é›†ç¾¤ä¿¡æ¯</p><p>ä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ é›†ç¾¤é…ç½®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">spring:<br>  cloud:<br>    nacos:<br>      server-addr: localhost:8848<br>      discovery:<br>        cluster-name: HZ <span class="hljs-comment"># é›†ç¾¤åç§°</span><br></code></pre></td></tr></table></figure><p>2ï¼‰ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™</p><p>ä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼Œä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">userservice:</span><br>  <span class="hljs-attr">ribbon:</span><br>    <span class="hljs-attr">NFLoadBalancerRuleClassName:</span> <span class="hljs-string">com.alibaba.cloud.nacos.ribbon.NacosRule</span> <span class="hljs-comment"># è´Ÿè½½å‡è¡¡è§„åˆ™ </span><br></code></pre></td></tr></table></figure><h2 id="5-4-æƒé‡é…ç½®"><a href="#5-4-æƒé‡é…ç½®" class="headerlink" title="5.4.æƒé‡é…ç½®"></a>5.4.æƒé‡é…ç½®</h2><p>å®é™…éƒ¨ç½²ä¸­ä¼šå‡ºç°è¿™æ ·çš„åœºæ™¯ï¼š</p><p>æœåŠ¡å™¨è®¾å¤‡æ€§èƒ½æœ‰å·®å¼‚ï¼Œéƒ¨åˆ†å®ä¾‹æ‰€åœ¨æœºå™¨æ€§èƒ½è¾ƒå¥½ï¼Œå¦ä¸€äº›è¾ƒå·®ï¼Œæˆ‘ä»¬å¸Œæœ›æ€§èƒ½å¥½çš„æœºå™¨æ‰¿æ‹…æ›´å¤šçš„ç”¨æˆ·è¯·æ±‚ã€‚</p><p>ä½†é»˜è®¤æƒ…å†µä¸‹NacosRuleæ˜¯åŒé›†ç¾¤å†…éšæœºæŒ‘é€‰ï¼Œä¸ä¼šè€ƒè™‘æœºå™¨çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>å› æ­¤ï¼ŒNacosæä¾›äº†æƒé‡é…ç½®æ¥æ§åˆ¶è®¿é—®é¢‘ç‡ï¼Œæƒé‡è¶Šå¤§åˆ™è®¿é—®é¢‘ç‡è¶Šé«˜ã€‚</p><p>åœ¨nacosæ§åˆ¶å°ï¼Œæ‰¾åˆ°user-serviceçš„å®ä¾‹åˆ—è¡¨ï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œå³å¯ä¿®æ”¹æƒé‡ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee884b.png" alt="image-20210713235133225"></p><p>åœ¨å¼¹å‡ºçš„ç¼–è¾‘çª—å£ï¼Œä¿®æ”¹æƒé‡ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee823d.png" alt="image-20210713235235219"></p><blockquote><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœæƒé‡ä¿®æ”¹ä¸º0ï¼Œåˆ™è¯¥å®ä¾‹æ°¸è¿œä¸ä¼šè¢«è®¿é—®</p></blockquote><h2 id="5-5-ç¯å¢ƒéš”ç¦»"><a href="#5-5-ç¯å¢ƒéš”ç¦»" class="headerlink" title="5.5.ç¯å¢ƒéš”ç¦»"></a>5.5.ç¯å¢ƒéš”ç¦»</h2><p>Nacosæä¾›äº†namespaceæ¥å®ç°ç¯å¢ƒéš”ç¦»åŠŸèƒ½ã€‚</p><ul><li>nacosä¸­å¯ä»¥æœ‰å¤šä¸ªnamespace</li><li>namespaceä¸‹å¯ä»¥æœ‰groupã€serviceç­‰</li><li>ä¸åŒnamespaceä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œä¾‹å¦‚ä¸åŒnamespaceçš„æœåŠ¡äº’ç›¸ä¸å¯è§</li></ul><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8374.png" alt="image-20210714000101516"></p><h3 id="5-5-1-åˆ›å»ºnamespace"><a href="#5-5-1-åˆ›å»ºnamespace" class="headerlink" title="5.5.1.åˆ›å»ºnamespace"></a>5.5.1.åˆ›å»ºnamespace</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰serviceã€dataã€groupéƒ½åœ¨åŒä¸€ä¸ªnamespaceï¼Œåä¸ºpublicï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8609.png" alt="image-20210714000414781"></p><p>æˆ‘ä»¬å¯ä»¥ç‚¹å‡»é¡µé¢æ–°å¢æŒ‰é’®ï¼Œæ·»åŠ ä¸€ä¸ªnamespaceï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8432.png" alt="image-20210714000440143"></p><p>ç„¶åï¼Œå¡«å†™è¡¨å•ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8632.png" alt="image-20210714000505928"></p><p>å°±èƒ½åœ¨é¡µé¢çœ‹åˆ°ä¸€ä¸ªæ–°çš„namespaceï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee841a.png" alt="image-20210714000522913"></p><h3 id="5-5-2-ç»™å¾®æœåŠ¡é…ç½®namespace"><a href="#5-5-2-ç»™å¾®æœåŠ¡é…ç½®namespace" class="headerlink" title="5.5.2.ç»™å¾®æœåŠ¡é…ç½®namespace"></a>5.5.2.ç»™å¾®æœåŠ¡é…ç½®namespace</h3><p>ç»™å¾®æœåŠ¡é…ç½®namespaceåªèƒ½é€šè¿‡ä¿®æ”¹é…ç½®æ¥å®ç°ã€‚</p><p>ä¾‹å¦‚ï¼Œä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">cluster-name:</span> <span class="hljs-string">HZ</span><br>        <span class="hljs-attr">namespace:</span> <span class="hljs-string">492a7d5d-237b-46a1-a99a-fa8e98e4b0f9</span> <span class="hljs-comment"># å‘½åç©ºé—´ï¼Œå¡«ID</span><br></code></pre></td></tr></table></figure><p>é‡å¯order-serviceåï¼Œè®¿é—®æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ç»“æœï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee855a.png" alt="image-20210714000830703"></p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee858d.png" alt="image-20210714000837140"></p><p>æ­¤æ—¶è®¿é—®order-serviceï¼Œå› ä¸ºnamespaceä¸åŒï¼Œä¼šå¯¼è‡´æ‰¾ä¸åˆ°userserviceï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee8448.png" alt="image-20210714000941256"></p><h2 id="5-6-Nacosä¸Eurekaçš„åŒºåˆ«"><a href="#5-6-Nacosä¸Eurekaçš„åŒºåˆ«" class="headerlink" title="5.6.Nacosä¸Eurekaçš„åŒºåˆ«"></a>5.6.Nacosä¸Eurekaçš„åŒºåˆ«</h2><p>Nacosçš„æœåŠ¡å®ä¾‹åˆ†ä¸ºä¸¤ç§lç±»å‹ï¼š</p><ul><li><p>ä¸´æ—¶å®ä¾‹ï¼šå¦‚æœå®ä¾‹å®•æœºè¶…è¿‡ä¸€å®šæ—¶é—´ï¼Œä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œé»˜è®¤çš„ç±»å‹ã€‚</p></li><li><p>éä¸´æ—¶å®ä¾‹ï¼šå¦‚æœå®ä¾‹å®•æœºï¼Œä¸ä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œä¹Ÿå¯ä»¥å«æ°¸ä¹…å®ä¾‹ã€‚</p></li></ul><p>é…ç½®ä¸€ä¸ªæœåŠ¡å®ä¾‹ä¸ºæ°¸ä¹…å®ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">ephemeral:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># è®¾ç½®ä¸ºéä¸´æ—¶å®ä¾‹</span><br></code></pre></td></tr></table></figure><p>Nacoså’ŒEurekaæ•´ä½“ç»“æ„ç±»ä¼¼ï¼ŒæœåŠ¡æ³¨å†Œã€æœåŠ¡æ‹‰å–ã€å¿ƒè·³ç­‰å¾…ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›å·®å¼‚ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9bfa27f86abb2aee85c2.png" alt="image-20210714001728017"></p><ul><li><p>Nacosä¸eurekaçš„å…±åŒç‚¹</p><ul><li>éƒ½æ”¯æŒæœåŠ¡æ³¨å†Œå’ŒæœåŠ¡æ‹‰å–</li><li>éƒ½æ”¯æŒæœåŠ¡æä¾›è€…å¿ƒè·³æ–¹å¼åšå¥åº·æ£€æµ‹</li></ul></li><li><p>Nacosä¸Eurekaçš„åŒºåˆ«</p><ul><li>Nacosæ”¯æŒæœåŠ¡ç«¯<font color='red'>ä¸»åŠ¨æ£€æµ‹æä¾›è€…çŠ¶æ€</font>ï¼šä¸´æ—¶å®ä¾‹é‡‡ç”¨å¿ƒè·³æ¨¡å¼ï¼Œéä¸´æ—¶å®ä¾‹é‡‡ç”¨ä¸»åŠ¨æ£€æµ‹æ¨¡å¼</li><li>ä¸´æ—¶å®ä¾‹å¿ƒè·³ä¸æ­£å¸¸ä¼šè¢«å‰”é™¤ï¼Œéä¸´æ—¶å®ä¾‹åˆ™ä¸ä¼šè¢«å‰”é™¤</li><li>Nacosæ”¯æŒæœåŠ¡åˆ—è¡¨å˜æ›´çš„æ¶ˆæ¯æ¨é€æ¨¡å¼ï¼ŒæœåŠ¡åˆ—è¡¨æ›´æ–°æ›´åŠæ—¶</li><li>Nacosé›†ç¾¤é»˜è®¤é‡‡ç”¨APæ–¹å¼ï¼Œå½“é›†ç¾¤ä¸­å­˜åœ¨éä¸´æ—¶å®ä¾‹æ—¶ï¼Œé‡‡ç”¨CPæ¨¡å¼ï¼›Eurekaé‡‡ç”¨APæ–¹å¼</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>SpringCloudğŸ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringCloudğŸ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RedisåŸºç¡€</title>
    <link href="/Hexo/2022/02/20/Redis%E5%9F%BA%E7%A1%80/"/>
    <url>/Hexo/2022/02/20/Redis%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç« -RedisåŸºç¡€"><a href="#ç¬¬ä¸€ç« -RedisåŸºç¡€" class="headerlink" title="ç¬¬ä¸€ç«  RedisåŸºç¡€"></a>ç¬¬ä¸€ç«  RedisåŸºç¡€</h1><p><strong>è¯¾ç¨‹è®¡åˆ’</strong></p><table><thead><tr><th>1. Redis å…¥ é—¨</th><th><strong>ï¼ˆäº†è§£ï¼‰</strong></th><th><strong>ï¼ˆæ“ä½œï¼‰</strong></th><th></th></tr></thead><tbody><tr><td>2. æ•°æ®ç±»å‹</td><td><strong>ï¼ˆé‡ç‚¹ï¼‰</strong></td><td><strong>ï¼ˆæ“ä½œï¼‰</strong></td><td><strong>ï¼ˆç†è§£ï¼‰</strong></td></tr><tr><td>3. å¸¸ç”¨æŒ‡ä»¤</td><td></td><td><strong>ï¼ˆæ“ä½œï¼‰</strong></td><td></td></tr><tr><td>4. Jedis</td><td><strong>ï¼ˆé‡ç‚¹ï¼‰</strong></td><td><strong>ï¼ˆæ“ä½œï¼‰</strong></td><td></td></tr><tr><td>5. æŒ ä¹… åŒ–</td><td><strong>ï¼ˆé‡ç‚¹ï¼‰</strong></td><td></td><td><strong>ï¼ˆç†è§£ï¼‰</strong></td></tr><tr><td>6. æ•°æ®åˆ é™¤ä¸æ·˜æ±°ç­–ç•¥</td><td></td><td></td><td><strong>ï¼ˆç†è§£ï¼‰</strong></td></tr><tr><td>7. ä¸»ä»å¤åˆ¶</td><td><strong>ï¼ˆé‡ç‚¹ï¼‰</strong></td><td><strong>ï¼ˆæ“ä½œï¼‰</strong></td><td><strong>ï¼ˆç†è§£ï¼‰</strong></td></tr><tr><td>8. å“¨ å…µ</td><td><strong>ï¼ˆé‡ç‚¹ï¼‰</strong></td><td><strong>ï¼ˆæ“ä½œï¼‰</strong></td><td><strong>ï¼ˆç†è§£ï¼‰</strong></td></tr><tr><td>9. Clusteré›†ç¾¤æ–¹æ¡ˆ</td><td><strong>ï¼ˆé‡ç‚¹ï¼‰</strong></td><td><strong>ï¼ˆæ“ä½œï¼‰</strong></td><td><strong>ï¼ˆç†è§£ï¼‰</strong></td></tr><tr><td>10. ä¼ä¸šçº§ç¼“å­˜è§£å†³æ–¹æ¡ˆ</td><td><strong>ï¼ˆé‡ç‚¹ï¼‰</strong></td><td></td><td><strong>ï¼ˆç†è§£ï¼‰</strong></td></tr><tr><td>11. æ€§èƒ½æŒ‡æ ‡ç›‘æ§</td><td><strong>ï¼ˆäº†è§£ï¼‰</strong></td><td></td><td></td></tr></tbody></table><h2 id="å­¦ä¹ ç›®æ ‡ï¼š"><a href="#å­¦ä¹ ç›®æ ‡ï¼š" class="headerlink" title="å­¦ä¹ ç›®æ ‡ï¼š"></a>å­¦ä¹ ç›®æ ‡ï¼š</h2><p>ç›®æ ‡1ï¼šèƒ½å¤Ÿè¯´å‡ºNoSQLçš„æ¦‚å¿µï¼Œredisçš„åº”ç”¨åœºæ™¯ï¼Œèƒ½å¤Ÿå®Œæˆredisçš„ä¸‹è½½å®‰è£…ä¸å¯åŠ¨ä»¥åŠä¸€äº›å¸¸ç”¨çš„é…ç½®</p><p>ç›®æ ‡2ï¼šèƒ½å¤Ÿè¯´å‡ºrediså¸¸ç”¨çš„5ç§æ•°æ®ç±»å‹ï¼Œå¯¹åº”è¿™äº›æ•°æ®ç±»å‹çš„åŸºæœ¬æ“ä½œï¼Œåº”ç”¨åœºæ™¯åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆ</p><p>ç›®æ ‡3ï¼šèƒ½å¤Ÿè¯´å‡ºredisä¸­å¸¸ç”¨çš„ä¸€äº›åŸºæœ¬æŒ‡ä»¤</p><p>ç›®æ ‡4ï¼šèƒ½å¤Ÿä½¿ç”¨jediså®Œæˆå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„å¼€å‘</p><p>ç›®æ ‡5ï¼šèƒ½å¤Ÿè¯´å‡ºredisæ•°æ®æŒä¹…åŒ–çš„ä¸¤ç§æ–¹å¼ï¼Œå„è‡ªç›¸å…³çš„æ“ä½œé…ç½®åŠæŒ‡ä»¤ï¼Œä»¥åŠä¸¤ç§æ–¹å¼çš„ä¼˜ç¼ºç‚¹æ¯”è¾ƒ</p><h2 id="1-Redis-ç®€ä»‹"><a href="#1-Redis-ç®€ä»‹" class="headerlink" title="1. Redis ç®€ä»‹"></a>1. Redis ç®€ä»‹</h2><p>åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä»¥ä¸‹3ä¸ªéƒ¨åˆ†çš„å†…å®¹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><p>â—† Redis ç®€ä»‹ï¼ˆNoSQLæ¦‚å¿µã€Redisæ¦‚å¿µï¼‰</p><p>â—† Redis çš„ä¸‹è½½ä¸å®‰è£…</p><p>â—† Redis çš„åŸºæœ¬æ“ä½œ</p><h3 id="1-1-NoSQLæ¦‚å¿µ"><a href="#1-1-NoSQLæ¦‚å¿µ" class="headerlink" title="1.1 NoSQLæ¦‚å¿µ"></a>1.1 NoSQLæ¦‚å¿µ</h3><h4 id="1-1-1-é—®é¢˜ç°è±¡"><a href="#1-1-1-é—®é¢˜ç°è±¡" class="headerlink" title="1.1.1 é—®é¢˜ç°è±¡"></a>1.1.1 é—®é¢˜ç°è±¡</h4><p>åœ¨è®²è§£NoSQLçš„æ¦‚å¿µä¹‹å‰å‘¢ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç°è±¡ï¼š</p><p>ï¼ˆ1ï¼‰é—®é¢˜ç°è±¡</p><p>æ¯å¹´åˆ°äº†è¿‡å¹´æœŸé—´ï¼Œå¤§å®¶éƒ½ä¼šè‡ªè§‰è‡ªå‘çš„ç»„ç»‡ä¸€åœºæ´»åŠ¨ï¼Œå«åšæ˜¥è¿ï¼ä»¥å‰æˆ‘ä»¬ä¹°ç¥¨éƒ½æ˜¯åˆ°ç«è½¦ç«™æ’é˜Ÿï¼Œåæ¥å‘¢æœ‰äº†12306ï¼Œæœ‰äº†ä»–ä»¥åå°±æ›´æ–¹ä¾¿äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç½‘ä¸Šä¹°ç¥¨ï¼Œä½†æ˜¯å¸¦æ¥çš„é—®é¢˜ï¼Œå¤§å®¶ä¹Ÿå¾ˆæ¸…æ¥šï¼Œæ˜¥èŠ‚æœŸé—´ä¹°ç¥¨è¿›ä¸å»ï¼Œè¿›å»äº†åˆ·ä¸ç€ç¥¨ã€‚ä»€ä¹ˆåŸå› å‘¢ï¼Œäººå¤ªå¤šäº†ï¼</p><p><img src="https://s2.loli.net/2022/04/10/RT8oWg4NVIZ6fjM.png"></p><p>é™¤äº†è¿™ç§åšé“è·¯çš„ï¼Œå®ƒç³»ç»Ÿåšçš„ä¸ä¸“ä¸šä»¥å¤–ï¼Œè¿˜æœ‰é©¬çˆ¸çˆ¸åšçš„æ·˜å®ï¼Œå®ƒé¢ä¸´ä¸€æ ·çš„é—®é¢˜ã€‚æ·˜å®ä¹Ÿå´©ï¼Œä¹Ÿæ˜¯ç”¨æˆ·é‡å¤ªå¤§ï¼ä½œä¸ºæˆ‘ä»¬æ•´ä¸ªç”µå•†ç•Œçš„ä¸œå“¥æ¥è¯´ï¼Œä»–ç¬¬ä¸€æ¬¡åšå›¾ä¹¦ä¿ƒé”€çš„æ—¶å€™ï¼Œä¹Ÿé‡åˆ°äº†æœåŠ¡å™¨å´©æ‰çš„è¿™æ ·ä¸€ä¸ªç°è±¡ï¼ŒåŸå› åŒæ ·æ˜¯å› ä¸ºç”¨æˆ·é‡å¤ªå¤§ï¼<img src="https://s2.loli.net/2022/03/31/pXc5VBG2tLJoNlx.png"></p><p>ï¼ˆ2ï¼‰ç°è±¡ç‰¹å¾</p><p>å†æ¥çœ‹è¿™å‡ ä¸ªç°è±¡ï¼Œæœ‰ä¸¤ä¸ªéå¸¸ç›¸ä¼¼çš„ç‰¹å¾ï¼š</p><p>ç¬¬ä¸€ï¼Œç”¨æˆ·æ¯”è¾ƒå¤šï¼Œæµ·é‡ç”¨æˆ·</p><p>ç¬¬äºŒï¼Œé«˜å¹¶å‘</p><p>è¿™ä¸¤ä¸ªç°è±¡å‡ºç°ä»¥åï¼Œå¯¹åº”çš„å°±ä¼šé€ æˆæˆ‘ä»¬çš„æœåŠ¡å™¨ç˜«ç—ªã€‚æ ¸å¿ƒæœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å¹¶ä¸æ˜¯æˆ‘ä»¬çš„åº”ç”¨æœåŠ¡å™¨ï¼Œè€Œæ˜¯æˆ‘ä»¬çš„å…³ç³»å‹æ•°æ®åº“ã€‚å…³ç³»å‹æ•°æ®åº“æ‰æ˜¯æœ€ç»ˆçš„ç½ªé­ç¥¸é¦–ï¼</p><p>ï¼ˆ3ï¼‰é€ æˆåŸå› </p><p>ä»€ä¹ˆæ ·çš„åŸå› å¯¼è‡´çš„æ•´ä¸ªç³»ç»Ÿå´©æ‰çš„å‘¢ï¼š</p><p>1.æ€§èƒ½ç“¶é¢ˆï¼šç£ç›˜IOæ€§èƒ½ä½ä¸‹</p><p>å…³ç³»å‹æ•°æ®åº“èœå­˜å–æ•°æ®çš„æ—¶å€™å’Œè¯»å–æ•°æ®çš„æ—¶å€™ä»–è¦èµ°ç£ç›˜IOã€‚ç£ç›˜è¿™ä¸ªæ€§èƒ½æœ¬èº«æ˜¯æ¯”è¾ƒä½çš„ã€‚</p><p>2.æ‰©å±•ç“¶é¢ˆï¼šæ•°æ®å…³ç³»å¤æ‚ï¼Œæ‰©å±•æ€§å·®ï¼Œä¸ä¾¿äºå¤§è§„æ¨¡é›†ç¾¤</p><p>æˆ‘ä»¬è¯´å…³ç³»å‹æ•°æ®åº“ï¼Œå®ƒé‡Œé¢è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»éå¸¸å¤æ‚ï¼Œä¸çŸ¥é“å¤§å®¶èƒ½ä¸èƒ½æƒ³è±¡ä¸€ç‚¹ï¼Œå°±æ˜¯ä¸€å¼ è¡¨ï¼Œé€šè¿‡å®ƒçš„å¤–é”®å…³è”äº†ä¸ƒå…«å¼ è¡¨ï¼Œè¿™ä¸ƒå…«å¼ è¡¨åˆé€šè¿‡å¥¹çš„å¤–ä»¶ï¼Œæ¯å¼ åˆå…³è”äº†å››äº”å¼ è¡¨ã€‚ä½ æƒ³æƒ³ï¼ŒæŸ¥è¯¢ä¸€ä¸‹ï¼Œä½ è¦æƒ³æ‹¿åˆ°æ•°æ®ï¼Œä½ å°±è¦ä»Aåˆ°Bã€Båˆ°Cã€Cåˆ°Dçš„ä¸€ç›´è¿™ä¹ˆå…³è”ä¸‹å»ï¼Œæœ€ç»ˆéå¸¸å½±å“æŸ¥è¯¢çš„æ•ˆç‡ã€‚åŒæ—¶ï¼Œä½ æƒ³æ‰©å±•ä¸‹ï¼Œä¹Ÿå¾ˆéš¾!</p><p>ï¼ˆ4ï¼‰è§£å†³æ€è·¯</p><p>é¢å¯¹è¿™æ ·çš„ç°è±¡ï¼Œæˆ‘ä»¬è¦æƒ³è§£å†³æ€ä¹ˆç‰ˆå‘¢ã€‚ä¸¤æ–¹é¢ï¼š</p><p>ä¸€ï¼Œé™ä½ç£ç›˜IOæ¬¡æ•°ï¼Œè¶Šä½è¶Šå¥½ã€‚</p><p>äºŒï¼Œå»é™¤æ•°æ®é—´å…³ç³»ï¼Œè¶Šç®€å•è¶Šå¥½ã€‚</p><p>é™ä½ç£ç›˜IOæ¬¡æ•°ï¼Œè¶Šä½è¶Šå¥½ï¼Œæ€ä¹ˆæï¼Ÿæˆ‘ä¸ç”¨ä½ ç£ç›˜ä¸å°±è¡Œäº†å—ï¼Ÿäºæ˜¯ï¼Œå†…å­˜å­˜å‚¨çš„æ€æƒ³å°±æå‡ºæ¥äº†ï¼Œæˆ‘æ•°æ®ä¸æ”¾åˆ°ä½ ç£ç›˜é‡Œè¾¹ï¼Œæ”¾å†…å­˜é‡Œï¼Œè¿™æ ·æ˜¯ä¸æ˜¯æ•ˆç‡å°±é«˜äº†ã€‚</p><p>ç¬¬äºŒï¼Œä½ çš„æ•°æ®å…³ç³»å¾ˆå¤æ‚ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿå¹²è„†ç®€å•ç‚¹ï¼Œæˆ‘æ–­å¼€ä½ çš„å…³ç³»ï¼Œæˆ‘ä¸å­˜å…³ç³»äº†ï¼Œæˆ‘åªå­˜æ•°æ®ï¼Œè¿™æ ·ä¸å°±æ²¡è¿™äº‹äº†å—ï¼Ÿ</p><p>æŠŠè¿™ä¸¤ä¸ªç‰¹å¾ä¸€åˆå¹¶ä¸€èµ·ï¼Œå°±å‡ºæ¥äº†ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šNoSQL</p><h4 id="1-1-2-NoSQLçš„æ¦‚å¿µ"><a href="#1-1-2-NoSQLçš„æ¦‚å¿µ" class="headerlink" title="1.1.2 NoSQLçš„æ¦‚å¿µ"></a>1.1.2 NoSQLçš„æ¦‚å¿µ</h4><p>ï¼ˆ1ï¼‰æ¦‚å¿µ</p><p>NoSQLï¼šå³ Not-Only SQLï¼ˆ æ³›æŒ‡éå…³ç³»å‹çš„æ•°æ®åº“ï¼‰ï¼Œä½œä¸ºå…³ç³»å‹æ•°æ®åº“çš„è¡¥å……ã€‚ ä½œç”¨ï¼šåº”å¯¹åŸºäºæµ·é‡ç”¨æˆ·å’Œæµ·é‡æ•°æ®å‰æä¸‹çš„æ•°æ®å¤„ç†é—®é¢˜ã€‚</p><p>ä»–è¯´è¿™å¥è¯è¯´çš„éå¸¸å®¢æ°”ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯æˆ‘ä»¬æ•°æ®å­˜å‚¨è¦ç”¨SQLï¼Œä½†æ˜¯å‘¢å¯ä»¥ä¸ä»…ä»…ç”¨SQLï¼Œè¿˜å¯ä»¥ç”¨åˆ«çš„ä¸œè¥¿ï¼Œé‚£åˆ«çš„ä¸œè¥¿å«ä»€ä¹ˆå‘¢ï¼Ÿäºæ˜¯ä»–å®šä¹‰äº†ä¸€å¥è¯å«åšNoSQLã€‚è¿™ä¸ªæ„æ€å°±æ˜¯è¯´æˆ‘ä»¬å­˜å‚¨æ•°æ®ï¼Œå¯ä»¥ä¸å…‰ä½¿ç”¨SQLï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨éSQLçš„è¿™ç§å­˜å‚¨æ–¹æ¡ˆï¼Œè¿™å°±æ˜¯æ‰€è°“çš„NoSQLã€‚</p><p>ï¼ˆ2ï¼‰ç‰¹å¾</p><p>å¯æ‰©å®¹ï¼Œå¯ä¼¸ç¼©ã€‚SQLæ•°æ®å…³ç³»è¿‡äºå¤æ‚ï¼Œä½ æ‰©å®¹ä¸€ä¸‹éš¾åº¦å¾ˆé«˜ï¼Œé‚£æˆ‘ä»¬Nosql è¿™ç§çš„ï¼Œä¸å­˜å…³ç³»ï¼Œæ‰€ä»¥å®ƒçš„æ‰©å®¹å°±ç®€å•ä¸€äº›ã€‚</p><p>å¤§æ•°æ®é‡ä¸‹é«˜æ€§èƒ½ã€‚åŒ…æ•°æ®éå¸¸å¤šçš„æ—¶å€™ï¼Œå®ƒçš„æ€§èƒ½é«˜ï¼Œå› ä¸ºä½ ä¸èµ°ç£ç›˜IOï¼Œä½ èµ°çš„æ˜¯å†…å­˜ï¼Œæ€§èƒ½è‚¯å®šè¦æ¯”ç£ç›˜IOçš„æ€§èƒ½å¿«ä¸€äº›ã€‚</p><p>çµæ´»çš„æ•°æ®æ¨¡å‹ã€é«˜å¯ç”¨ã€‚ä»–è®¾è®¡äº†è‡ªå·±çš„ä¸€äº›æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œè¿™æ ·èƒ½ä¿è¯æ•ˆç‡ä¸Šæ¥è¯´æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œæœ€åä¸€ä¸ªé«˜å¯ç”¨ï¼Œæˆ‘ä»¬ç­‰åˆ°é›†ç¾¤å†…éƒ¨åˆ†å†å»å®ƒï¼</p><p>ï¼ˆ3ï¼‰å¸¸è§ Nosql æ•°æ®åº“</p><p>ç›®å‰å¸‚é¢ä¸Šå¸¸è§çš„Nosqläº§å“ï¼šRedisã€memcacheã€HBaseã€MongoDB</p><p>ï¼ˆ4ï¼‰åº”ç”¨åœºæ™¯-ç”µå•†ä¸ºä¾‹</p><p>æˆ‘ä»¬ä»¥ç”µå•†ä¸ºä¾‹ï¼Œæ¥çœ‹ä¸€çœ‹ä»–åœ¨è¿™é‡Œè¾¹èµ·åˆ°çš„ä½œç”¨ã€‚</p><p>ç¬¬ä¸€ç±»ï¼Œåœ¨ç”µå•†ä¸­æˆ‘ä»¬çš„åŸºç¡€æ•°æ®ä¸€å®šè¦å­˜å‚¨èµ·æ¥ï¼Œæ¯”å¦‚è¯´å•†å“åç§°ï¼Œä»·æ ¼ï¼Œç”Ÿäº§å‚å•†ï¼Œè¿™äº›éƒ½å±äºåŸºç¡€æ•°æ®ï¼Œè¿™äº›æ•°æ®æ”¾åœ¨MySQLæ•°æ®åº“ã€‚</p><p>ç¬¬äºŒç±»ï¼Œæˆ‘ä»¬å•†å“çš„é™„åŠ ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´ï¼Œä½ ä¹°äº†ä¸€ä¸ªå•†å“è¯„ä»·äº†ä¸€ä¸‹ï¼Œè¿™ä¸ªè¯„ä»·å®ƒä¸å±äºå•†å“æœ¬èº«ã€‚å°±åƒä½ ä¹°ä¸€ä¸ªè‹¹æœï¼Œâ€œè¿™ä¸ªè‹¹æœå¾ˆå¥½åƒâ€å°±æ˜¯è¯„è®ºï¼Œä½†æ˜¯ä½ èƒ½è¯´å¾ˆå¥½åƒæ˜¯è¿™ä¸ªå•†å“çš„å±æ€§å˜›ï¼Ÿä¸èƒ½è¿™ä¹ˆè¯´ï¼Œé‚£åªæ˜¯ä¸€ä¸ªäººå¯¹ä»–çš„è¯„è®ºè€Œå·²ã€‚è¿™ä¸€ç±»æ•°æ®å‘¢ï¼Œæˆ‘ä»¬æ”¾åœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬æ”¾åˆ°MongoDBã€‚å®ƒä¹Ÿå¯ä»¥ç”¨æ¥åŠ å¿«æˆ‘ä»¬çš„è®¿é—®ï¼Œä»–å±äºNoSQLçš„ä¸€ç§ã€‚</p><p>ç¬¬ä¸‰ï¼Œå›¾ç‰‡å†…çš„ä¿¡æ¯ã€‚æ³¨æ„è¿™ç§ä¿¡æ¯ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå›ºå®šï¼Œä»–æœ‰ä¸“ç”¨çš„å­˜å‚¨åŒºï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨æ–‡ä»¶ç³»ç»Ÿæ¥å­˜å‚¨ã€‚è‡³äºæ˜¯ä¸æ˜¯åˆ†å¸ƒå¼ï¼Œè¦çœ‹ä½ çš„ç³»ç»Ÿçš„ä¸€ä¸ªæ•´ä¸ª   ç“¶é¢ˆ   äº†ï¼Ÿå¦‚æœè¯´ä½ å‘ç°ä½ éœ€è¦åšåˆ†å¸ƒå¼ï¼Œé‚£å°±åšï¼Œä¸éœ€è¦çš„è¯ï¼Œä¸€å°ä¸»æœºå°±æå®šäº†ã€‚</p><p>ç¬¬å››ï¼Œæœç´¢å…³é”®å­—ã€‚ä¸ºäº†åŠ å¿«æœç´¢ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°ä¸€äº›æŠ€æœ¯ï¼Œæœ‰äº›äººå¯èƒ½äº†è§£è¿‡ï¼Œåƒåˆ†ESã€Luceneã€solréƒ½å±äºæœç´¢æŠ€æœ¯ã€‚é‚£è¯´çš„è¿™ä¹ˆçƒ­é—¹ï¼Œæˆ‘ä»¬çš„ç”µå•†è§£å†³æ–¹æ¡ˆä¸­è¿˜æ²¡å‡ºç°æˆ‘ä»¬çš„rediså•Šï¼æ³¨æ„ç¬¬äº”ç±»ä¿¡æ¯ã€‚</p><p>ç¬¬äº”ï¼Œçƒ­ç‚¹ä¿¡æ¯ã€‚è®¿é—®é¢‘åº¦æ¯”è¾ƒé«˜çš„ä¿¡æ¯ï¼Œè¿™ç§ä¸œè¥¿çš„ç¬¬äºŒç‰¹å¾å°±æ˜¯å®ƒå…·æœ‰æ³¢æ®µæ€§ã€‚æ¢å¥è¯è¯´ä»–ä¸æ˜¯ç¨³å®šçš„ï¼Œå®ƒå…·æœ‰ä¸€ä¸ªæ—¶æ•ˆæ€§çš„ã€‚é‚£ä¹ˆè¿™ç±»ä¿¡æ¯æ”¾å“ªå„¿äº†ï¼Œæ”¾åˆ°æˆ‘ä»¬çš„redisè¿™ä¸ªè§£å†³æ–¹æ¡ˆä¸­æ¥è¿›è¡Œå­˜å‚¨ã€‚</p><p>å…·ä½“çš„æˆ‘ä»¬ä»æˆ‘ä»¬çš„æ•´ä¸ªæ•°æ®å­˜å‚¨ç»“æ„çš„è®¾è®¡ä¸Šæ¥çœ‹ä¸€ä¸‹ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/9zTYoERfQZdstvJ.png"></p><p>æˆ‘ä»¬çš„åŸºç¡€æ•°æ®éƒ½å­˜MySQL,åœ¨å®ƒçš„åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘ä»¬æŠŠå®ƒè¿åœ¨ä¸€å—å„¿ï¼ŒåŒæ—¶å¯¹å¤–æä¾›æœåŠ¡ã€‚å‘ä¸Šèµ°ï¼Œæœ‰ä¸€äº›ä¿¡æ¯åŠ è½½å®Œä»¥å,è¦æ”¾åˆ°æˆ‘ä»¬çš„MongoDBä¸­ã€‚è¿˜æœ‰ä¸€ç±»ä¿¡æ¯ï¼Œæˆ‘ä»¬æ”¾åˆ°æˆ‘ä»¬ä¸“ç”¨çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼ˆæ¯”å¦‚å›¾ç‰‡ï¼‰ï¼Œå°±æ”¾åˆ°æˆ‘ä»¬çš„è¿™ä¸ªæœç´¢ä¸“ç”¨çš„ï¼Œå¦‚Luceneã€solråŠé›†ç¾¤é‡Œè¾¹ï¼Œæˆ–è€…ç”¨ESçš„è¿™ç§æŠ€æœ¯é‡Œè¾¹ã€‚é‚£ä¹ˆå‰©ä¸‹æ¥çš„çƒ­ç‚¹ä¿¡æ¯ï¼Œæ”¾åˆ°æˆ‘ä»¬çš„redisé‡Œé¢ã€‚</p><h3 id="1-2-Redisæ¦‚å¿µ"><a href="#1-2-Redisæ¦‚å¿µ" class="headerlink" title="1.2 Redisæ¦‚å¿µ"></a>1.2 Redisæ¦‚å¿µ</h3><h4 id="1-2-1-redisæ¦‚å¿µ"><a href="#1-2-1-redisæ¦‚å¿µ" class="headerlink" title="1.2.1 redisæ¦‚å¿µ"></a>1.2.1 redisæ¦‚å¿µ</h4><p>æ¦‚å¿µï¼šRedis (REmote DIctionary Server) æ˜¯ç”¨ C è¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„é«˜æ€§èƒ½é”®å€¼å¯¹ï¼ˆkey-valueï¼‰æ•°æ®åº“ã€‚</p><p>ç‰¹å¾ï¼š</p><p>ï¼ˆ1ï¼‰æ•°æ®é—´æ²¡æœ‰å¿…ç„¶çš„å…³è”å…³ç³»ï¼›</p><p>ï¼ˆ2ï¼‰å†…éƒ¨é‡‡ç”¨å•çº¿ç¨‹æœºåˆ¶è¿›è¡Œå·¥ä½œï¼›</p><p>ï¼ˆ3ï¼‰é«˜æ€§èƒ½ã€‚å®˜æ–¹æä¾›æµ‹è¯•æ•°æ®ï¼Œ50ä¸ªå¹¶å‘æ‰§è¡Œ100000 ä¸ªè¯·æ±‚,è¯»çš„é€Ÿåº¦æ˜¯110000 æ¬¡&#x2F;s,å†™çš„é€Ÿåº¦æ˜¯81000æ¬¡&#x2F;sã€‚</p><p>ï¼ˆ4ï¼‰å¤šæ•°æ®ç±»å‹æ”¯æŒ</p><p>å­—ç¬¦ä¸²ç±»å‹ï¼Œstring  list</p><p>åˆ—è¡¨ç±»å‹ï¼Œhash  set</p><p>æ•£åˆ—ç±»å‹ï¼Œzset&#x2F;sorted_set</p><p>é›†åˆç±»å‹</p><p>æœ‰åºé›†åˆç±»å‹</p><p>ï¼ˆ5ï¼‰æ”¯æŒæŒä¹…åŒ–ï¼Œå¯ä»¥è¿›è¡Œæ•°æ®ç¾éš¾æ¢å¤</p><h4 id="1-2-2-redisçš„åº”ç”¨åœºæ™¯"><a href="#1-2-2-redisçš„åº”ç”¨åœºæ™¯" class="headerlink" title="1.2.2 redisçš„åº”ç”¨åœºæ™¯"></a>1.2.2 redisçš„åº”ç”¨åœºæ™¯</h4><p>ï¼ˆ1ï¼‰ä¸ºçƒ­ç‚¹æ•°æ®åŠ é€ŸæŸ¥è¯¢ï¼ˆä¸»è¦åœºæ™¯ï¼‰ã€‚å¦‚çƒ­ç‚¹å•†å“ã€çƒ­ç‚¹æ–°é—»ã€çƒ­ç‚¹èµ„è®¯ã€æ¨å¹¿ç±»ç­‰é«˜è®¿é—®é‡ä¿¡æ¯ç­‰ã€‚</p><p>ï¼ˆ2ï¼‰å³æ—¶ä¿¡æ¯æŸ¥è¯¢ã€‚å¦‚å„ä½æ’è¡Œæ¦œã€å„ç±»ç½‘ç«™è®¿é—®ç»Ÿè®¡ã€å…¬äº¤åˆ°ç«™ä¿¡æ¯ã€åœ¨çº¿äººæ•°ä¿¡æ¯ï¼ˆèŠå¤©å®¤ã€ç½‘ç«™ï¼‰ã€è®¾å¤‡ä¿¡å·ç­‰ã€‚</p><p>ï¼ˆ3ï¼‰æ—¶æ•ˆæ€§ä¿¡æ¯æ§åˆ¶ã€‚å¦‚éªŒè¯ç æ§åˆ¶ã€æŠ•ç¥¨æ§åˆ¶ç­‰ã€‚</p><p>ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ•°æ®å…±äº«ã€‚å¦‚åˆ†å¸ƒå¼é›†ç¾¤æ¶æ„ä¸­çš„ session åˆ†ç¦»<br>æ¶ˆæ¯é˜Ÿåˆ—.</p><h3 id="1-3-Redis-çš„ä¸‹è½½ä¸å®‰è£…"><a href="#1-3-Redis-çš„ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="1.3 Redis çš„ä¸‹è½½ä¸å®‰è£…"></a>1.3 Redis çš„ä¸‹è½½ä¸å®‰è£…</h3><p>åæœŸæ‰€æœ‰èµ„æ–™åˆ†4ä¸­ä¸åŒè‰²å—æ˜¾ç¤ºï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/03/31/khOcyR4qHCXmTWL.png"></p><h4 id="1-3-1-Redis-çš„ä¸‹è½½ä¸å®‰è£…"><a href="#1-3-1-Redis-çš„ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="1.3.1 Redis çš„ä¸‹è½½ä¸å®‰è£…"></a>1.3.1 Redis çš„ä¸‹è½½ä¸å®‰è£…</h4><p>æœ¬è¯¾ç¨‹æ‰€ç¤ºï¼Œå‡åŸºäºCenter OS7å®‰è£…Redisã€‚</p><p>ï¼ˆ1)ä¸‹è½½Redis</p><p>ä¸‹è½½å®‰è£…åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget http://download.redis.io/releases/redis-5.0.0.tar.gz<br></code></pre></td></tr></table></figure><p>è§£å‹å®‰è£…åŒ…ï¼š</p><p><font color='red'>æ³¨æ„linux ä¸­â€“ä¸windowsçš„ä¸åŒï¼Œå»ºè®®æ‰‹æ‰“ï¼</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar â€“xvf redis-5.0.0.tar.gz<br><br><br>yum -y install gcc gcc-c++ libstdc++-devel<br><br>å»ºç«‹è½¯é“¾æ¥<br><span class="hljs-built_in">ln</span> -s redis-5.0.0 redis<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘ï¼ˆåœ¨è§£å‹çš„ç›®å½•ä¸­æ‰§è¡Œï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make<br></code></pre></td></tr></table></figure><p>å®‰è£…ï¼ˆåœ¨è§£å‹çš„ç›®å½•ä¸­æ‰§è¡Œï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make install<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰å®‰è£… Redis</p><p>redis-serverï¼ŒæœåŠ¡å™¨å¯åŠ¨å‘½ä»¤ å®¢æˆ·ç«¯å¯åŠ¨å‘½ä»¤</p><p>redis-cliï¼Œredisæ ¸å¿ƒé…ç½®æ–‡ä»¶</p><p>redis.confï¼ŒRDBæ–‡ä»¶æ£€æŸ¥å·¥å…·ï¼ˆå¿«ç…§æŒä¹…åŒ–æ–‡ä»¶ï¼‰</p><p>redis-check-dumpï¼ŒAOFæ–‡ä»¶ä¿®å¤å·¥å…·</p><p>redis-check-aof</p><h3 id="1-4-RedisæœåŠ¡å™¨å¯åŠ¨"><a href="#1-4-RedisæœåŠ¡å™¨å¯åŠ¨" class="headerlink" title="1.4 RedisæœåŠ¡å™¨å¯åŠ¨"></a>1.4 RedisæœåŠ¡å™¨å¯åŠ¨</h3><h4 id="1-4-1-RedisæœåŠ¡å™¨å¯åŠ¨"><a href="#1-4-1-RedisæœåŠ¡å™¨å¯åŠ¨" class="headerlink" title="1.4.1 RedisæœåŠ¡å™¨å¯åŠ¨"></a>1.4.1 RedisæœåŠ¡å™¨å¯åŠ¨</h4><p>å¯åŠ¨æœåŠ¡å™¨â€”â€”å‚æ•°å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-server [--port port]<br></code></pre></td></tr></table></figure><p>èŒƒä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-server --port 6379<br></code></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡å™¨â€”â€”é…ç½®æ–‡ä»¶å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-server config_file_name<br></code></pre></td></tr></table></figure><p>èŒƒä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-server redis.conf<br></code></pre></td></tr></table></figure><h4 id="1-4-2-Rediså®¢æˆ·ç«¯å¯åŠ¨"><a href="#1-4-2-Rediså®¢æˆ·ç«¯å¯åŠ¨" class="headerlink" title="1.4.2 Rediså®¢æˆ·ç«¯å¯åŠ¨"></a>1.4.2 Rediså®¢æˆ·ç«¯å¯åŠ¨</h4><p>å¯åŠ¨å®¢æˆ·ç«¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-cli [-h host] [-p port]<br></code></pre></td></tr></table></figure><p>èŒƒ ä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-cli â€“h 61.129.65.248 â€“p 6384<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæœåŠ¡å™¨å¯åŠ¨æŒ‡å®šç«¯å£ä½¿ç”¨çš„æ˜¯â€“portï¼Œå®¢æˆ·ç«¯å¯åŠ¨æŒ‡å®šç«¯å£ä½¿ç”¨çš„æ˜¯-pã€‚-çš„æ•°é‡ä¸åŒã€‚</p><h4 id="1-4-3-RedisåŸºç¡€ç¯å¢ƒè®¾ç½®çº¦å®š"><a href="#1-4-3-RedisåŸºç¡€ç¯å¢ƒè®¾ç½®çº¦å®š" class="headerlink" title="1.4.3 RedisåŸºç¡€ç¯å¢ƒè®¾ç½®çº¦å®š"></a>1.4.3 RedisåŸºç¡€ç¯å¢ƒè®¾ç½®çº¦å®š</h4><p>åˆ›å»ºé…ç½®æ–‡ä»¶å­˜å‚¨ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> conf<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæœåŠ¡å™¨æ–‡ä»¶å­˜å‚¨ç›®å½•ï¼ˆåŒ…å«æ—¥å¿—ã€æ•°æ®ã€ä¸´æ—¶é…ç½®æ–‡ä»¶ç­‰ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> data<br><br><br><span class="hljs-built_in">cp</span> redis.conf ./conf<br><br><span class="hljs-built_in">cat</span> redis.conf |grep -v <span class="hljs-string">&quot;#&quot;</span> | grep -v <span class="hljs-string">&quot;^$&quot;</span> &gt;redis-6379.conf<br><br></code></pre></td></tr></table></figure><p>åˆ›å»ºå¿«é€Ÿè®¿é—®é“¾æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ln</span> -s redis-5.0.0 redis<br></code></pre></td></tr></table></figure><h3 id="1-5-é…ç½®æ–‡ä»¶å¯åŠ¨ä¸å¸¸ç”¨é…ç½®"><a href="#1-5-é…ç½®æ–‡ä»¶å¯åŠ¨ä¸å¸¸ç”¨é…ç½®" class="headerlink" title="1.5 é…ç½®æ–‡ä»¶å¯åŠ¨ä¸å¸¸ç”¨é…ç½®"></a>1.5 é…ç½®æ–‡ä»¶å¯åŠ¨ä¸å¸¸ç”¨é…ç½®</h3><h4 id="1-5-1-æœåŠ¡å™¨ç«¯è®¾å®š"><a href="#1-5-1-æœåŠ¡å™¨ç«¯è®¾å®š" class="headerlink" title="1.5.1 æœåŠ¡å™¨ç«¯è®¾å®š"></a>1.5.1 æœåŠ¡å™¨ç«¯è®¾å®š</h4><p>è®¾ç½®æœåŠ¡å™¨ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œå¼€å¯åæœåŠ¡å™¨æ§åˆ¶å°ä¸­å°†æ‰“å°æœåŠ¡å™¨è¿è¡Œä¿¡æ¯ï¼ˆåŒæ—¥å¿—å†…å®¹ç›¸åŒï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">daemonize <span class="hljs-built_in">yes</span>|no<br></code></pre></td></tr></table></figure><p>ç»‘å®šä¸»æœºåœ°å€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">bind</span> ip<br></code></pre></td></tr></table></figure><p>è®¾ç½®æœåŠ¡å™¨ç«¯å£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">port port<br></code></pre></td></tr></table></figure><p>è®¾ç½®æœåŠ¡å™¨æ–‡ä»¶ä¿å­˜åœ°å€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">dir</span> path<br></code></pre></td></tr></table></figure><h4 id="1-5-2-å®¢æˆ·ç«¯é…ç½®"><a href="#1-5-2-å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="1.5.2  å®¢æˆ·ç«¯é…ç½®"></a>1.5.2  å®¢æˆ·ç«¯é…ç½®</h4><p> æœåŠ¡å™¨å…è®¸å®¢æˆ·ç«¯è¿æ¥æœ€å¤§æ•°é‡ï¼Œé»˜è®¤0ï¼Œè¡¨ç¤ºæ— é™åˆ¶ã€‚å½“å®¢æˆ·ç«¯è¿æ¥åˆ°è¾¾ä¸Šé™åï¼ŒRedisä¼šæ‹’ç»æ–°çš„è¿æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">maxclients count<br></code></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯é—²ç½®ç­‰å¾…æœ€å¤§æ—¶é•¿ï¼Œè¾¾åˆ°æœ€å¤§å€¼åå…³é—­å¯¹åº”è¿æ¥ã€‚å¦‚éœ€å…³é—­è¯¥åŠŸèƒ½ï¼Œè®¾ç½®ä¸º 0</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">timeout</span> seconds<br></code></pre></td></tr></table></figure><h4 id="1-5-3-æ—¥å¿—é…ç½®"><a href="#1-5-3-æ—¥å¿—é…ç½®" class="headerlink" title="1.5.3  æ—¥å¿—é…ç½®"></a>1.5.3  æ—¥å¿—é…ç½®</h4><p>è®¾ç½®æœåŠ¡å™¨ä»¥æŒ‡å®šæ—¥å¿—è®°å½•çº§åˆ«</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">loglevel debug|verbose|notice|warning<br></code></pre></td></tr></table></figure><p>æ—¥å¿—è®°å½•æ–‡ä»¶å</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">logfile filename<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ—¥å¿—çº§åˆ«å¼€å‘æœŸè®¾ç½®ä¸ºverboseå³å¯ï¼Œç”Ÿäº§ç¯å¢ƒä¸­é…ç½®ä¸ºnoticeï¼Œç®€åŒ–æ—¥å¿—è¾“å‡ºé‡ï¼Œé™ä½å†™æ—¥å¿—IOçš„é¢‘åº¦ã€‚</p><h3 id="1-6-RedisåŸºæœ¬æ“ä½œ"><a href="#1-6-RedisåŸºæœ¬æ“ä½œ" class="headerlink" title="1.6 RedisåŸºæœ¬æ“ä½œ"></a>1.6 RedisåŸºæœ¬æ“ä½œ</h3><h4 id="1-6-1-å‘½ä»¤è¡Œæ¨¡å¼å·¥å…·ä½¿ç”¨æ€è€ƒ"><a href="#1-6-1-å‘½ä»¤è¡Œæ¨¡å¼å·¥å…·ä½¿ç”¨æ€è€ƒ" class="headerlink" title="1.6.1  å‘½ä»¤è¡Œæ¨¡å¼å·¥å…·ä½¿ç”¨æ€è€ƒ"></a>1.6.1  å‘½ä»¤è¡Œæ¨¡å¼å·¥å…·ä½¿ç”¨æ€è€ƒ</h4><p>åŠŸèƒ½æ€§å‘½ä»¤</p><p>å¸®åŠ©ä¿¡æ¯æŸ¥é˜…</p><p>é€€å‡ºæŒ‡ä»¤</p><p>æ¸…é™¤å±å¹•ä¿¡æ¯</p><h4 id="1-6-2-ä¿¡æ¯è¯»å†™"><a href="#1-6-2-ä¿¡æ¯è¯»å†™" class="headerlink" title="1.6.2  ä¿¡æ¯è¯»å†™"></a>1.6.2  ä¿¡æ¯è¯»å†™</h4><p>è®¾ç½® keyï¼Œvalue æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">set</span> key value<br></code></pre></td></tr></table></figure><p>èŒƒä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">set</span> name itheima<br></code></pre></td></tr></table></figure><p>æ ¹æ® key æŸ¥è¯¢å¯¹åº”çš„ valueï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›ç©ºï¼ˆnilï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">get key<br></code></pre></td></tr></table></figure><p>èŒƒä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">get name<br></code></pre></td></tr></table></figure><h4 id="1-6-3-å¸®åŠ©ä¿¡æ¯"><a href="#1-6-3-å¸®åŠ©ä¿¡æ¯" class="headerlink" title="1.6.3  å¸®åŠ©ä¿¡æ¯"></a>1.6.3  å¸®åŠ©ä¿¡æ¯</h4><p>è·å–å‘½ä»¤å¸®åŠ©æ–‡æ¡£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">help</span> [<span class="hljs-built_in">command</span>]<br></code></pre></td></tr></table></figure><p>èŒƒä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">help</span> <span class="hljs-built_in">set</span><br></code></pre></td></tr></table></figure><p>è·å–ç»„ä¸­æ‰€æœ‰å‘½ä»¤ä¿¡æ¯åç§°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">help</span> [@group-name]<br></code></pre></td></tr></table></figure><p>èŒƒä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">help</span> @string<br></code></pre></td></tr></table></figure><p>1.6.4  é€€å‡ºå‘½ä»¤è¡Œå®¢æˆ·ç«¯æ¨¡å¼</p><p>é€€å‡ºå®¢æˆ·ç«¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">quit<br><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure><p>å¿«æ·é”®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">Ctrl+C<br></code></pre></td></tr></table></figure><h4 id="1-6-4-rediså…¥é—¨æ€»ç»“"><a href="#1-6-4-rediså…¥é—¨æ€»ç»“" class="headerlink" title="1.6.4  rediså…¥é—¨æ€»ç»“"></a>1.6.4  rediså…¥é—¨æ€»ç»“</h4><p>åˆ°è¿™é‡Œï¼ŒRedis å…¥é—¨çš„ç›¸å…³çŸ¥è¯†ï¼Œæˆ‘ä»¬å°±å…¨éƒ¨å­¦ä¹ å®Œäº†ï¼Œå†æ¥å›é¡¾ä¸€ä¸‹ï¼Œè¿™ä¸ªéƒ¨åˆ†æˆ‘ä»¬ä¸»è¦è®²è§£äº†å“ªäº›å†…å®¹å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹Redisè¿›è¡Œäº†ä¸€ä¸ªç®€å•ä»‹ç»ï¼ŒåŒ…æ‹¬NoSQLçš„æ¦‚å¿µã€Redisçš„æ¦‚å¿µç­‰ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬ä»‹ç»äº†Redis çš„ä¸‹è½½ä¸å®‰è£…ã€‚åŒ…æ‹¬ä¸‹è½½ä¸å®‰è£…ã€æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯å¯åŠ¨ã€ä»¥åŠç›¸å…³é…ç½®æ–‡ä»¶ï¼ˆ3ç±»ï¼‰ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä»‹ç»äº†Redis çš„åŸºæœ¬æ“ä½œã€‚åŒ…æ‹¬æ•°æ®è¯»å†™ã€é€€å‡ºä¸å¸®åŠ©ä¿¡æ¯è·å–ã€‚</p><h2 id="2-æ•°æ®ç±»å‹"><a href="#2-æ•°æ®ç±»å‹" class="headerlink" title="2. æ•°æ®ç±»å‹"></a>2. æ•°æ®ç±»å‹</h2><p>åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¸€å…±è¦å­¦ä¹ ä¸‰å¤§å—å†…å®¹ï¼Œé¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸‹æ•°æ®ç±»å‹ï¼Œæ¥ä¸‹æ¥å°†é’ˆå¯¹ç€æˆ‘ä»¬è¦å­¦ä¹ çš„æ•°æ®ç±»å‹è¿›è¡Œé€ä¸€çš„è®²è§£ï¼Œå¦‚stringã€hashã€listã€setç­‰ï¼Œæœ€åæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥æ€»ç»“å‰é¢çš„æ•°æ®ç±»å‹çš„ä½¿ç”¨åœºæ™¯ã€‚</p><h3 id="2-1-æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»"><a href="#2-1-æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»" class="headerlink" title="2.1  æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»"></a>2.1  æ•°æ®å­˜å‚¨ç±»å‹ä»‹ç»</h3><h4 id="2-1-1-ä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§"><a href="#2-1-1-ä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§" class="headerlink" title="2.1.1  ä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§"></a>2.1.1  ä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§</h4><p>åœ¨è®²è§£æ•°æ®ç±»å‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæ•°æ®ç±»å‹æ—¢ç„¶æ˜¯ç”¨æ¥æè¿°æ•°æ®çš„å­˜å‚¨æ ¼å¼çš„ï¼Œå¦‚æœä½ ä¸çŸ¥é“å“ªäº›æ•°æ®æœªæ¥ä¼šè¿›å…¥åˆ°æˆ‘ä»¬æ¥çš„redisä¸­ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ•°æ®ç±»å‹çš„é€‰æ‹©ï¼Œä½ å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€å—æ¥çœ‹ä¸€ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰åŸå§‹ä¸šåŠ¡åŠŸèƒ½è®¾è®¡</p><p>ç§’æ€ã€‚ä»–è¿™ä¸ªé‡Œè¾¹æ•°æ®å˜åŒ–é€Ÿåº¦ç‰¹åˆ«çš„å¿«ï¼Œè®¿é—®é‡ä¹Ÿç‰¹åˆ«çš„é«˜ï¼Œç”¨æˆ·å¤§é‡æ¶Œå…¥ä»¥åéƒ½ä¼šé’ˆå¯¹ç€ä¸€éƒ¨åˆ†æ•°æ®è¿›è¡Œæ“ä½œï¼Œè¿™ä¸€ç±»è¦è®°ä½ã€‚</p><p>618æ´»åŠ¨ã€‚å¯¹äºæˆ‘ä»¬äº¬ä¸œçš„618æ´»åŠ¨ã€ä»¥åŠå¤©çŒ«çš„åŒ11æ´»åŠ¨ï¼Œç›¸ä¿¡å¤§å®¶ä¸ç”¨è¯´éƒ½çŸ¥é“è¿™äº›æ•°æ®ä¸€å®šè¦è¿›å»ï¼Œå› ä¸ºä»–ä»¬çš„è®¿é—®é¢‘åº¦å®åœ¨å¤ªé«˜äº†ã€‚</p><p>æ’é˜Ÿè´­ç¥¨ã€‚æˆ‘ä»¬12306çš„ç¥¨åŠ¡ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åœ¨åŸå§‹è®¾è®¡çš„æ—¶å€™ï¼Œä»–ä»¬å°±æ³¨å®šäº†è¦è¿›redisã€‚</p><p>ï¼ˆ2ï¼‰è¿è¥å¹³å°ç›‘æ§åˆ°çš„çªå‘é«˜é¢‘è®¿é—®æ•°æ®</p><p>æ­¤ç±»å¹³å°ä¸´æ—¶ç›‘æ§åˆ°çš„è¿™äº›æ•°æ®ï¼Œæ¯”å¦‚è¯´ç°åœ¨å‡ºæ¥çš„ä¸€ä¸ªå…«å¦çš„ä¿¡æ¯ï¼Œè¿™ä¸ªæ–°é—»ä¸€æ—¦å‡ºç°ä»¥åå‘¢ï¼Œé¡ºé€Ÿçš„è¢«å›´è§‚äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šå˜å¾—è®¿é‡ç‰¹åˆ«é«˜ï¼Œé‚£ä¹ˆè¿™ç±»ä¿¡æ¯ä¹Ÿè¦è¿›å…¥è¿›å»ã€‚</p><p>ï¼ˆ3ï¼‰é«˜é¢‘ã€å¤æ‚çš„ç»Ÿè®¡æ•°æ®</p><p>åœ¨çº¿äººæ•°ã€‚æ¯”å¦‚è¯´ç›´æ’­ç°åœ¨å¾ˆç«ï¼Œç›´æ’­é‡Œè¾¹æœ‰å¾ˆå¤šæ•°æ®ï¼Œä¾‹å¦‚åœ¨çº¿äººæ•°ã€‚è¿›ä¸€ä¸ªäººå‡ºä¸€ä¸ªäººï¼Œè¿™ä¸ªæ•°æ®å°±è¦è·³åŠ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªè®¿é—®é€Ÿåº¦éå¸¸çš„å¿«ï¼Œè€Œä¸”è®¿é‡å¾ˆé«˜ï¼Œå¹¶ä¸”å®ƒé‡Œè¾¹æœ‰ä¸€ä¸ªå¤æ‚çš„æ•°æ®ç»Ÿè®¡ï¼Œåœ¨è¿™é‡Œè¿™ç§ä¿¡æ¯ä¹Ÿè¦è¿›å…¥åˆ°æˆ‘ä»¬çš„redisä¸­ã€‚</p><p>æŠ•ç¥¨æ’è¡Œæ¦œã€‚æŠ•ç¥¨æŠ•ç¥¨ç±»çš„ä¿¡æ¯ä»–çš„å˜åŒ–é€Ÿåº¦ä¹Ÿæ¯”è¾ƒå¿«ï¼Œä¸ºäº†è¿½æ±‚ä¸€ä¸ªæ›´å¿«çš„ä¸€ä¸ªå³æ—¶æŠ•ç¥¨çš„åæ¬¡å˜åŒ–ï¼Œè¿™ç§æ•°æ®æœ€å¥½ä¹Ÿæ”¾åˆ°redisä¸­ã€‚</p><h4 id="2-1-2-Redis-æ•°æ®ç±»å‹-5ç§å¸¸ç”¨"><a href="#2-1-2-Redis-æ•°æ®ç±»å‹-5ç§å¸¸ç”¨" class="headerlink" title="2.1.2  Redis æ•°æ®ç±»å‹(5ç§å¸¸ç”¨)"></a>2.1.2  Redis æ•°æ®ç±»å‹(5ç§å¸¸ç”¨)</h4><p>åŸºäºä»¥ä¸Šæ•°æ®ç‰¹å¾æˆ‘ä»¬è¿›è¡Œåˆ†æï¼Œæœ€ç»ˆå¾—å‡ºæ¥æˆ‘ä»¬çš„Redisä¸­è¦è®¾è®¡5ç§ æ•°æ®ç±»å‹ï¼š</p><p><font color='red'>stringã€hashã€listã€setã€sorted_set&#x2F;zset</font>ï¼ˆåº”ç”¨æ€§è¾ƒä½ï¼‰</p><h3 id="2-2-stringæ•°æ®ç±»å‹"><a href="#2-2-stringæ•°æ®ç±»å‹" class="headerlink" title="2.2  stringæ•°æ®ç±»å‹"></a>2.2  stringæ•°æ®ç±»å‹</h3><p>åœ¨å­¦ä¹ ç¬¬ä¸€ä¸ªæ•°æ®ç±»å‹ä¹‹å‰ï¼Œå…ˆç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ï¼Œåœ¨éšåè¿™éƒ¨åˆ†å†…å®¹çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ¯ä¸€ç§æ•°æ®ç±»å‹éƒ½åˆ†æˆä¸‰å—æ¥è®²ï¼šé¦–å…ˆæ˜¯è®²ä¸‹å®ƒçš„åŸºæœ¬æ“ä½œï¼Œæ¥ä¸‹æ¥è®²ä¸€äº›å®ƒçš„æ‰©å±•æ“ä½œï¼Œæœ€åæˆ‘ä»¬ä¼šå»åšä¸€ä¸ªå°çš„æ¡ˆä¾‹åˆ†æã€‚</p><h4 id="2-2-1Redis-æ•°æ®å­˜å‚¨æ ¼å¼"><a href="#2-2-1Redis-æ•°æ®å­˜å‚¨æ ¼å¼" class="headerlink" title="2.2.1Redis æ•°æ®å­˜å‚¨æ ¼å¼"></a>2.2.1Redis æ•°æ®å­˜å‚¨æ ¼å¼</h4><p>åœ¨å­¦ä¹ stringè¿™ä¸ªæ•°æ®å½¢å¼ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦æ˜ç™½stringåˆ°åº•æ˜¯ä¿®é¥°ä»€ä¹ˆçš„ã€‚æˆ‘ä»¬çŸ¥é“redis è‡ªèº«æ˜¯ä¸€ä¸ª Mapï¼Œå…¶ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é‡‡ç”¨ key : value çš„å½¢å¼å­˜å‚¨ã€‚</p><p>å¯¹äºè¿™ç§ç»“æ„æ¥è¯´ï¼Œæˆ‘ä»¬ç”¨æ¥å­˜å‚¨æ•°æ®ä¸€å®šæ˜¯ä¸€ä¸ªå€¼å‰é¢å¯¹åº”ä¸€ä¸ªåç§°ã€‚æˆ‘ä»¬é€šè¿‡åç§°æ¥è®¿é—®åé¢çš„å€¼ã€‚æŒ‰ç…§è¿™ç§å½¢åŠ¿ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å‡ºæ¥æˆ‘ä»¬çš„å­˜å‚¨æ ¼å¼ã€‚å‰é¢è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬ç§°ä¸ºkeyã€‚åé¢çš„ä¸€éƒ¨åˆ†ç§°ä¸ºvalueï¼Œè€Œæˆ‘ä»¬çš„æ•°æ®ç±»å‹ï¼Œä»–ä¸€å®šæ˜¯ä¿®é¥°valueçš„ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/ligrCGuzxQhfXys.png"></p><p>æ•°æ®ç±»å‹æŒ‡çš„æ˜¯å­˜å‚¨çš„æ•°æ®çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ <font color='red'>value</font> éƒ¨åˆ†çš„ç±»å‹ï¼Œkey éƒ¨åˆ†æ°¸è¿œéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p><h4 id="2-2-2-string-ç±»å‹"><a href="#2-2-2-string-ç±»å‹" class="headerlink" title="2.2.2  string ç±»å‹"></a>2.2.2  string ç±»å‹</h4><p>ï¼ˆ1ï¼‰å­˜å‚¨çš„æ•°æ®ï¼šå•ä¸ªæ•°æ®ï¼Œæœ€ç®€å•çš„æ•°æ®å­˜å‚¨ç±»å‹ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®å­˜å‚¨ç±»å‹ã€‚</p><p>stringï¼Œä»–å°±æ˜¯å­˜ä¸€ä¸ªå­—ç¬¦ä¸²å„¿ï¼Œæ³¨æ„æ˜¯valueé‚£ä¸€éƒ¨åˆ†æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯redisä¸­æœ€åŸºæœ¬ã€æœ€ç®€å•çš„å­˜å‚¨æ•°æ®çš„æ ¼å¼ã€‚</p><p>ï¼ˆ2ï¼‰å­˜å‚¨æ•°æ®çš„æ ¼å¼ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜ä¸€ä¸ªæ•°æ®</p><p>æ¯ä¸€ä¸ªç©ºé—´ä¸­åªèƒ½ä¿å­˜ä¸€ä¸ªå­—ç¬¦ä¸²ä¿¡æ¯ï¼Œè¿™ä¸ªä¿¡æ¯é‡Œè¾¹å¦‚æœæ˜¯å­˜çš„çº¯æ•°å­—ï¼Œä»–ä¹Ÿèƒ½å½“æ•°å­—ä½¿ç”¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„æ•°æ®çš„å­˜å‚¨ç©ºé—´ã€‚</p><p>ï¼ˆ3ï¼‰å­˜å‚¨å†…å®¹ï¼šé€šå¸¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸²ä»¥æ•´æ•°çš„å½¢å¼å±•ç¤ºï¼Œå¯ä»¥ä½œä¸ºæ•°å­—æ“ä½œä½¿ç”¨.</p><p><img src="https://s2.loli.net/2022/03/31/GtRMFiDwTlzy9jN.png"></p><p>ä¸€ä¸ªkeyå¯¹ä¸€ä¸ªvalueï¼Œè€Œè¿™ä¸ªitheimaå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„stringç±»å‹ï¼Œå½“ç„¶å®ƒä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªçº¯æ•°å­—çš„æ ¼å¼ã€‚</p><h4 id="2-2-3-string-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"><a href="#2-2-3-string-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="2.2.3  string ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a>2.2.3  string ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</h4><p>ï¼ˆ1ï¼‰åŸºç¡€æŒ‡ä»¤</p><p>æ·»åŠ &#x2F;ä¿®æ”¹æ•°æ®æ·»åŠ &#x2F;ä¿®æ”¹æ•°æ®</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">set</span> key <span class="hljs-comment">value</span><br></code></pre></td></tr></table></figure><p>è·å–æ•°æ®</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">get</span> <span class="hljs-built_in">key</span><br></code></pre></td></tr></table></figure><p>åˆ é™¤æ•°æ®</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">del</span> <span class="hljs-built_in">key</span><br></code></pre></td></tr></table></figure><p>åˆ¤å®šæ€§æ·»åŠ æ•°æ®</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">setnx key value</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/31/9neijsrDxf5kzMA.png" alt="image-20220306153440641"></p><p>æ·»åŠ &#x2F;ä¿®æ”¹å¤šä¸ªæ•°æ®  <font color='cornflowerblue'>Muliple</font></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">mset</span> key1 value1 key2 value2 â€¦<br></code></pre></td></tr></table></figure><p>è·å–å¤šä¸ªæ•°æ®</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">mget</span> key1 key2 â€¦<br></code></pre></td></tr></table></figure><p>è·å–æ•°æ®å­—ç¬¦ä¸ªæ•°ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ï¼‰</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-built_in">strlen</span> <span class="hljs-built_in">key</span><br></code></pre></td></tr></table></figure><p>è¿½åŠ ä¿¡æ¯åˆ°åŸå§‹ä¿¡æ¯åéƒ¨ï¼ˆå¦‚æœåŸå§‹ä¿¡æ¯å­˜åœ¨å°±è¿½åŠ ï¼Œå¦åˆ™æ–°å»ºï¼‰</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">append</span> <span class="hljs-built_in">key</span> value<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰å•æ•°æ®æ“ä½œä¸å¤šæ•°æ®æ“ä½œçš„é€‰æ‹©ä¹‹æƒ‘</p><p>å³set ä¸msetçš„å…³ç³»ã€‚è¿™å¯¹äºè¿™ä¸¤ä¸ªæ“ä½œæ¥è¯´ï¼Œæ²¡æœ‰ä»€ä¹ˆä½ åº”è¯¥é€‰å“ªä¸ªï¼Œè€Œæ˜¯ä»–ä»¬è‡ªå·±çš„ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Œä½ è¦æ ¹æ®è¿™ä¸ªç‰¹å¾å»æ¯”å¯¹ä½ çš„ä¸šåŠ¡ï¼Œçœ‹çœ‹ç©¶ç«Ÿé€‚ç”¨äºå“ªä¸ªã€‚</p><p><img src="https://s2.loli.net/2022/03/31/ALfCWX7zJ5ykhYp.png"></p><p>å‡å¦‚è¯´è¿™æ˜¯æˆ‘ä»¬ç°åœ¨çš„æœåŠ¡å™¨ï¼Œä»–è¦å‘redisè¦æ•°æ®çš„è¯ï¼Œå®ƒä¼šå‘å‡ºä¸€æ¡æŒ‡ä»¤ã€‚é‚£ä¹ˆå½“è¿™æ¡æŒ‡ä»¤å‘è¿‡æ¥çš„æ—¶å€™ï¼Œæ¯”å¦‚è¯´æ˜¯è¿™ä¸ªsetæŒ‡ä»¤è¿‡æ¥ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠè¿™ä¸ªç»“æœè¿”å›ç»™ä½ ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¦æ€è€ƒè¿™é‡Œè¾¹ä¸€å…±ç»è¿‡äº†å¤šé•¿æ—¶é—´ã€‚</p><p>é¦–å…ˆï¼Œå‘é€setæŒ‡ä»¤è¦æ—¶é—´ï¼Œè¿™æ˜¯ç½‘ç»œçš„ä¸€ä¸ªæ—¶é—´ï¼Œæ¥ä¸‹æ¥redisè¦å»è¿è¡Œè¿™ä¸ªæŒ‡ä»¤è¦æ¶ˆè€—æ—¶é—´ï¼Œæœ€ç»ˆæŠŠè¿™ä¸ªç»“æœè¿”å›ç»™ä½ åˆæœ‰ä¸€ä¸ªæ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´åˆæ˜¯ä¸€ä¸ªç½‘ç»œçš„æ—¶é—´ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼šä¸€ä¸ªæŒ‡ä»¤å‘é€çš„è¿‡ç¨‹ä¸­éœ€è¦æ¶ˆè€—è¿™æ ·çš„æ—¶é—´.</p><p>ä½†æ˜¯å¦‚æœè¯´ç°åœ¨ä¸æ˜¯ä¸€æ¡æŒ‡ä»¤äº†ï¼Œä½ è¦å‘3ä¸ªsetçš„è¯ï¼Œè¿˜è¦å¤šé•¿æ—¶é—´å‘¢ï¼Ÿå¯¹åº”çš„å‘é€æ—¶é—´è¦ä¹˜3äº†ï¼Œå› ä¸ºè¿™æ˜¯ä¸‰ä¸ªå•æ¡æŒ‡ä»¤,è€Œè¿è¡Œçš„æ“ä½œæ—¶é—´å‘¢ï¼Œå®ƒä¹Ÿè¦ä¹˜3äº†ï¼Œä½†æœ€ç»ˆè¿”å›çš„ä¹Ÿè¦å‘3æ¬¡ï¼Œæ‰€ä»¥è¿™è¾¹ä¹Ÿè¦ä¹˜3ã€‚</p><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼šå•æŒ‡ä»¤å‘3æ¡å®ƒéœ€è¦çš„æ—¶é—´ï¼Œå‡å®šä»–ä»¬ä¸¤ä¸ªä¸€æ ·ï¼Œæ˜¯6ä¸ªç½‘ç»œæ—¶é—´åŠ 3ä¸ªå¤„ç†æ—¶é—´ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒåˆæˆä¸€ä¸ªmsetå‘¢ï¼Œæˆ‘ä»¬æƒ³ä¸€æƒ³ã€‚</p><p>å‡å¦‚è¯´ç”¨å¤šæŒ‡ä»¤å‘3ä¸ªæŒ‡ä»¤çš„è¯ï¼Œå…¶å®åªéœ€è¦å‘ä¸€æ¬¡å°±è¡Œäº†ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼Œå¤šæŒ‡ä»¤å‘3ä¸ªæŒ‡ä»¤çš„è¯ï¼Œå…¶å®å®ƒæ˜¯ä¸¤ä¸ªç½‘ç»œæ—¶é—´åŠ ä¸Š3ä¸ªredisçš„æ“ä½œæ—¶é—´ï¼Œä¸ºä»€ä¹ˆè¿™å†™ä¸€ä¸ªå°åŠ å·å‘¢ï¼Œå°±æ˜¯å› ä¸ºæ¯•ç«Ÿå‘çš„ä¿¡æ¯é‡å˜å¤§äº†ï¼Œæ‰€ä»¥ç½‘ç»œæ—¶é—´æœ‰å¯èƒ½ä¼šå˜é•¿ã€‚</p><p>é‚£ä¹ˆé€šè¿‡è¿™å¼ å›¾ï¼Œä½ å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼Œæˆ‘ä»¬å•æŒ‡ä»¤å’Œå¤šæŒ‡ä»¤ä»–ä»¬çš„å·®åˆ«å°±åœ¨äºä½ å‘é€çš„æ¬¡æ•°æ˜¯å¤šè¿˜æ˜¯å°‘ã€‚å½“ä½ å½±å“çš„æ•°æ®æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œä½ å¯ä»¥ç”¨å•æŒ‡ä»¤ï¼Œä¹Ÿå¯ä»¥ç”¨å¤šæŒ‡ä»¤ã€‚ä½†æ˜¯ä¸€æ—¦è¿™ä¸ªé‡å¤§äº†ï¼Œä½ å°±è¦é€‰æ‹©å¤šæŒ‡ä»¤äº†ï¼Œä»–çš„æ•ˆç‡ä¼šé«˜ä¸€äº›ã€‚</p><h3 id="2-3-string-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"><a href="#2-3-string-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ" class="headerlink" title="2.3  string ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"></a>2.3  string ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</h3><h4 id="2-3-1-string-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"><a href="#2-3-1-string-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ" class="headerlink" title="2.3.1  string ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"></a>2.3.1  string ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</h4><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€stringçš„æ‰©å±•æ“ä½œï¼Œåˆ†æˆä¸¤å¤§å—ï¼šä¸€å—æ˜¯å¯¹æ•°å­—è¿›è¡Œæ“ä½œçš„ï¼Œç¬¬äºŒå—æ˜¯å¯¹æˆ‘ä»¬çš„keyçš„æ—¶é—´è¿›è¡Œæ“ä½œçš„ã€‚</p><p>è®¾ç½®æ•°å€¼æ•°æ®å¢åŠ æŒ‡å®šèŒƒå›´çš„å€¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">incr key<br>incrby key increment<br>incrbyfloat key increment<br></code></pre></td></tr></table></figure><p>è®¾ç½®æ•°å€¼æ•°æ®å‡å°‘æŒ‡å®šèŒƒå›´çš„å€¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">decr key<br>decrby key increment<br></code></pre></td></tr></table></figure><p>è®¾ç½®æ•°æ®å…·æœ‰æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">setex key seconds value<br>psetex key milliseconds value<br></code></pre></td></tr></table></figure><h4 id="2-3-2-string-ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"><a href="#2-3-2-string-ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="2.3.2  string ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"></a>2.3.2  string ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹</h4><p>(1)æ•°æ®æ“ä½œä¸æˆåŠŸçš„åé¦ˆä¸æ•°æ®æ­£å¸¸æ“ä½œä¹‹é—´çš„å·®å¼‚</p><p>è¡¨ç¤ºè¿è¡Œç»“æœæ˜¯å¦æˆåŠŸ</p><p>(integer) 0  â†’ false                 å¤±è´¥</p><p>(integer) 1  â†’ true                  æˆåŠŸ</p><p>è¡¨ç¤ºè¿è¡Œç»“æœå€¼</p><p>(integer) 3  â†’ 3                        3ä¸ª</p><p>(integer) 1  â†’ 1                         1ä¸ª</p><p>(2)æ•°æ®æœªè·å–åˆ°æ—¶ï¼Œå¯¹åº”çš„æ•°æ®ä¸ºï¼ˆnilï¼‰ï¼Œç­‰åŒäºnull</p><p>(3)æ•°æ®æœ€å¤§å­˜å‚¨é‡ï¼š512MB</p><p>(4)stringåœ¨rediså†…éƒ¨å­˜å‚¨é»˜è®¤å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“é‡åˆ°å¢å‡ç±»æ“ä½œincrï¼Œdecræ—¶ä¼šè½¬æˆæ•°å€¼å‹è¿›è¡Œè®¡ç®—</p><p>(5)æŒ‰æ•°å€¼è¿›è¡Œæ“ä½œçš„æ•°æ®ï¼Œå¦‚æœåŸå§‹æ•°æ®ä¸èƒ½è½¬æˆæ•°å€¼ï¼Œæˆ–è¶…è¶Šäº†redis æ•°å€¼ä¸Šé™èŒƒå›´ï¼Œå°†æŠ¥é”™<br>9223372036854775807ï¼ˆjavaä¸­Longå‹æ•°æ®æœ€å¤§å€¼ï¼ŒLong.MAX_VALUEï¼‰</p><p>(6)redisæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œé‡‡ç”¨å•çº¿ç¨‹å¤„ç†æ‰€æœ‰ä¸šåŠ¡ï¼Œå‘½ä»¤æ˜¯ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œçš„ï¼Œå› æ­¤æ— éœ€è€ƒè™‘å¹¶å‘å¸¦æ¥çš„æ•°æ®å½±å“.</p><h3 id="2-4stringåº”ç”¨åœºæ™¯ä¸keyå‘½åçº¦å®š"><a href="#2-4stringåº”ç”¨åœºæ™¯ä¸keyå‘½åçº¦å®š" class="headerlink" title="2.4stringåº”ç”¨åœºæ™¯ä¸keyå‘½åçº¦å®š"></a>2.4stringåº”ç”¨åœºæ™¯ä¸keyå‘½åçº¦å®š</h3><h4 id="2-4-1-åº”ç”¨åœºæ™¯"><a href="#2-4-1-åº”ç”¨åœºæ™¯" class="headerlink" title="2.4.1  åº”ç”¨åœºæ™¯"></a>2.4.1  åº”ç”¨åœºæ™¯</h4><p>å®ƒçš„åº”ç”¨åœºæ™¯åœ¨äºï¼šä¸»é¡µé«˜é¢‘è®¿é—®ä¿¡æ¯æ˜¾ç¤ºæ§åˆ¶ï¼Œä¾‹å¦‚æ–°æµªå¾®åšå¤§Vä¸»é¡µæ˜¾ç¤ºç²‰ä¸æ•°ä¸å¾®åšæ•°é‡ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/4AV1d8B6UpRMOrS.png" alt="stringåº”ç”¨åœºæ™¯"></p><p>æˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸‹ï¼šè¿™äº›ä¿¡æ¯æ˜¯ä¸æ˜¯ä½ è¿›å…¥å¤§Vçš„é¡µé¢å„¿ä»¥åå°±è¦è¯»å–è¿™å†™ä¿¡æ¯çš„å•Šï¼Œé‚£è¿™ç§ä¿¡æ¯ä¸€å®šè¦å­˜å‚¨åˆ°æˆ‘ä»¬çš„redisä¸­ï¼Œå› ä¸ºä»–çš„è®¿é—®é‡å¤ªé«˜äº†ï¼é‚£è¿™ç§æ•°æ®åº”è¯¥æ€ä¹ˆå­˜å‘¢ï¼Ÿæˆ‘ä»¬æ¥ä¸€å—å„¿çœ‹ä¸€ä¸‹æ–¹æ¡ˆï¼</p><h4 id="2-4-2-è§£å†³æ–¹æ¡ˆ"><a href="#2-4-2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2.4.2  è§£å†³æ–¹æ¡ˆ"></a>2.4.2  è§£å†³æ–¹æ¡ˆ</h4><p>ï¼ˆ1ï¼‰åœ¨redisä¸­ä¸ºå¤§Vç”¨æˆ·è®¾å®šç”¨æˆ·ä¿¡æ¯ï¼Œä»¥ç”¨æˆ·ä¸»é”®å’Œå±æ€§å€¼ä½œä¸ºkeyï¼Œåå°è®¾å®šå®šæ—¶åˆ·æ–°ç­–ç•¥å³å¯ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">eg:user:id:3506728370:fansâ†’12210947<br>eg:user:id:3506728370:blogsâ†’6164<br>eg:user:id:3506728370:focusesâ†’83<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ä¹Ÿå¯ä»¥ä½¿ç”¨jsonæ ¼å¼ä¿å­˜æ•°æ®</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">eg:user:id:3506728370    â†’&#123;â€œfansâ€ï¼š12210947ï¼Œâ€œblogsâ€ï¼š6164ï¼Œâ€œ focuses â€ï¼š83 &#125;<br></code></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰ key çš„è®¾ç½®çº¦å®š</p><p>æ•°æ®åº“ä¸­çš„çƒ­ç‚¹æ•°æ®keyå‘½åæƒ¯ä¾‹</p><table><thead><tr><th></th><th><strong>è¡¨å</strong></th><th><strong>ä¸»é”®å</strong></th><th>ä¸»é”®å€¼</th><th><strong>å­—æ®µå</strong></th></tr></thead><tbody><tr><td>eg1ï¼š</td><td>order</td><td>id</td><td>29437595</td><td>name</td></tr><tr><td>eg2ï¼š</td><td>equip</td><td>id</td><td>390472345</td><td>type</td></tr><tr><td>eg3ï¼š</td><td>news</td><td>id</td><td>202004150</td><td>title</td></tr></tbody></table><h3 id="2-5-hashçš„åŸºæœ¬æ“ä½œ"><a href="#2-5-hashçš„åŸºæœ¬æ“ä½œ" class="headerlink" title="2.5  hashçš„åŸºæœ¬æ“ä½œ"></a>2.5  hashçš„åŸºæœ¬æ“ä½œ</h3><p>ä¸‹é¢æˆ‘ä»¬æ¥å­¦ä¹ ç¬¬äºŒä¸ªæ•°æ®ç±»å‹hashã€‚</p><h4 id="2-5-1-æ•°æ®å­˜å‚¨çš„å›°æƒ‘"><a href="#2-5-1-æ•°æ®å­˜å‚¨çš„å›°æƒ‘" class="headerlink" title="2.5.1  æ•°æ®å­˜å‚¨çš„å›°æƒ‘"></a>2.5.1  æ•°æ®å­˜å‚¨çš„å›°æƒ‘</h4><p>å¯¹è±¡ç±»æ•°æ®çš„å­˜å‚¨å¦‚æœå…·æœ‰è¾ƒé¢‘ç¹çš„æ›´æ–°éœ€æ±‚æ“ä½œä¼šæ˜¾å¾—ç¬¨é‡ï¼</p><p>åœ¨æ­£å¼å­¦ä¹ ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªå…³äºæ•°æ®å­˜å‚¨çš„å›°æƒ‘ï¼š</p><p><img src="https://s2.loli.net/2022/03/31/4RHpxlNbmqYUVj6.png"></p><p>æ¯”å¦‚è¯´å‰é¢æˆ‘ä»¬ç”¨ä»¥ä¸Šå½¢å¼å­˜äº†æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬ç”¨å•æ¡å»å­˜çš„è¯ï¼Œå®ƒå­˜çš„æ¡æ•°ä¼šå¾ˆå¤šã€‚ä½†å¦‚æœæˆ‘ä»¬ç”¨jsonæ ¼å¼ï¼Œå®ƒå­˜ä¸€æ¡æ•°æ®å°±å¤Ÿäº†ã€‚é—®é¢˜æ¥äº†ï¼Œå‡å¦‚è¯´ç°åœ¨ç²‰ä¸æ•°é‡å‘ç”Ÿå˜åŒ–äº†ï¼Œä½ è¦æŠŠæ•´ä¸ªå€¼éƒ½æ”¹äº†ã€‚ä½†æ˜¯ç”¨å•æ¡å­˜çš„è¯å°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œä½ åªéœ€è¦æ”¹å…¶ä¸­ä¸€ä¸ªå°±è¡Œäº†ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±æƒ³ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–°çš„å­˜å‚¨ç»“æ„ï¼Œèƒ½å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ã€‚</p><p>æˆ‘ä»¬ä¸€å—å„¿æ¥åˆ†æä¸€ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/03/31/Ld58FrAzysHbhKZ.png"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šå•æ¡çš„è¯æ˜¯å¯¹åº”çš„æ•°æ®åœ¨åé¢æ”¾ç€ã€‚ä»”ç»†è§‚å¯Ÿï¼šæˆ‘ä»¬çœ‹å·¦è¾¹æ˜¯ä¸æ˜¯é•¿å¾—éƒ½ä¸€æ¨¡ä¸€æ ·å•Šï¼Œéƒ½æ˜¯å¯¹åº”çš„è¡¨åã€IDç­‰çš„ä¸€ç³»åˆ—çš„ä¸œè¥¿ã€‚æˆ‘ä»¬å¯ä»¥å°†å³è¾¹çº¢æ¡†ä¸­çš„è¿™ä¸ªåŒºåŸŸç»™ä»–å°èµ·æ¥ã€‚</p><p>é‚£å¦‚æœè¦æ˜¯è¿™æ ·çš„å½¢å¼çš„è¯ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬æŠŠå®ƒä¸€åˆå¹¶ï¼Œå¹¶æŠŠå³è¾¹çš„ä¸œè¥¿ç»™ä»–å˜æˆè¿™ä¸ªæ ¼å¼ï¼Œè¿™ä¸å°±è¡Œäº†å—ï¼Ÿ</p><p><img src="https://s2.loli.net/2022/03/31/6ihAQ9vMEmK4d1O.png"></p><p>è¿™ä¸ªå›¾å…¶å®å¤§å®¶å¹¶ä¸é™Œç”Ÿï¼Œç¬¬ä¸€ï¼Œä½ å‰é¢å­¦è¿‡ä¸€ä¸ªä¸œè¥¿å«hashmapä¸å°±è¿™æ ¼å¼å—ï¼Ÿç¬¬äºŒï¼Œredisè‡ªèº«ä¸ä¹Ÿæ˜¯è¿™æ ¼å¼å—ï¼Ÿé‚£æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ³¨æ„ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦è®²çš„ç¬¬äºŒç§æ ¼å¼ï¼Œhashã€‚</p><p><img src="https://s2.loli.net/2022/03/31/So32NDiwOxydfrZ.png"></p><p>åœ¨å³è¾¹å¯¹åº”çš„å€¼ï¼Œæˆ‘ä»¬å°±å­˜å…·ä½“çš„å€¼ï¼Œé‚£å·¦è¾¹å„¿è¿™å°±æ˜¯æˆ‘ä»¬çš„keyã€‚é—®é¢˜æ¥äº†ï¼Œé‚£ä¸­é—´çš„è¿™ä¸€å—å«ä»€ä¹ˆå‘¢ï¼Ÿè¿™ä¸ªä¸œè¥¿æˆ‘ä»¬ç»™ä»–èµ·ä¸ªåå„¿ï¼Œå«åšfieldå­—æ®µã€‚é‚£ä¹ˆå³è¾¹å„¿æ•´ä½“è¿™å—å„¿ç©ºé—´æˆ‘ä»¬å°±ç§°ä¸ºhashï¼Œä¹Ÿå°±æ˜¯è¯´hashæ˜¯å­˜äº†ä¸€ä¸ªkey valueçš„å­˜å‚¨ç©ºé—´ã€‚</p><h4 id="2-5-2-hash-ç±»å‹"><a href="#2-5-2-hash-ç±»å‹" class="headerlink" title="2.5.2  hash ç±»å‹"></a>2.5.2  hash ç±»å‹</h4><p>æ–°çš„å­˜å‚¨éœ€æ±‚ï¼šå¯¹ä¸€ç³»åˆ—å­˜å‚¨çš„æ•°æ®è¿›è¡Œç¼–ç»„ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œå…¸å‹åº”ç”¨å­˜å‚¨å¯¹è±¡ä¿¡æ¯</p><p>éœ€è¦çš„å­˜å‚¨ç»“æ„ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜å¤šä¸ªé”®å€¼å¯¹æ•°æ®</p><p>hashç±»å‹ï¼šåº•å±‚ä½¿ç”¨å“ˆå¸Œè¡¨ç»“æ„å®ç°æ•°æ®å­˜å‚¨</p><p><img src="https://s2.loli.net/2022/03/31/2ZAzdIbxjiN4gmX.png"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™ç§ç»“æ„å«åšhashï¼Œå·¦è¾¹ä¸€ä¸ªkeyï¼Œå¯¹å³è¾¹ä¸€ä¸ªå­˜å‚¨ç©ºé—´ã€‚è¿™é‡Œè¦æ˜ç¡®ä¸€ç‚¹ï¼Œå³è¾¹è¿™å—å„¿å­˜å‚¨ç©ºé—´å«hashï¼Œä¹Ÿå°±æ˜¯è¯´hashæ˜¯æŒ‡çš„ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œä»–æŒ‡çš„ä¸æ˜¯ä¸€ä¸ªæ•°æ®ï¼Œæ˜¯è¿™é‡Œè¾¹çš„ä¸€å †æ•°æ®ï¼Œé‚£ä¹ˆå®ƒåº•å±‚å‘¢ï¼Œæ˜¯ç”¨hashè¡¨çš„ç»“æ„æ¥å®ç°çš„ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</p><p>å¦‚æœfieldæ•°é‡è¾ƒå°‘ï¼Œå­˜å‚¨ç»“æ„ä¼˜åŒ–ä¸ºç±»æ•°ç»„ç»“æ„</p><p>å¦‚æœfieldæ•°é‡è¾ƒå¤šï¼Œå­˜å‚¨ç»“æ„ä½¿ç”¨HashMapç»“æ„</p><h4 id="2-5-3-hash-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"><a href="#2-5-3-hash-ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="2.5.3  hash ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a>2.5.3  hash ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</h4><p>æ·»åŠ &#x2F;ä¿®æ”¹æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hset key field value<br></code></pre></td></tr></table></figure><p>è·å–æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">hget key field<br>hgetall key<br></code></pre></td></tr></table></figure><p>åˆ é™¤æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hdel key field1 [field2]<br></code></pre></td></tr></table></figure><p>è®¾ç½®fieldçš„å€¼ï¼Œå¦‚æœè¯¥fieldå­˜åœ¨åˆ™ä¸åšä»»ä½•æ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hsetnx key field value<br></code></pre></td></tr></table></figure><p>æ·»åŠ &#x2F;ä¿®æ”¹å¤šä¸ªæ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hmset key field1 value1 field2 value2 â€¦<br></code></pre></td></tr></table></figure><p>è·å–å¤šä¸ªæ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hmget key field1 field2 â€¦<br></code></pre></td></tr></table></figure><p>è·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„æ•°é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hlen key<br></code></pre></td></tr></table></figure><p>è·å–å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—æ®µ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexists key field<br></code></pre></td></tr></table></figure><h3 id="2-6-hashçš„æ‹“å±•æ“ä½œ"><a href="#2-6-hashçš„æ‹“å±•æ“ä½œ" class="headerlink" title="2.6  hashçš„æ‹“å±•æ“ä½œ"></a>2.6  hashçš„æ‹“å±•æ“ä½œ</h3><p>åœ¨çœ‹å®Œhashçš„åŸºæœ¬æ“ä½œåï¼Œæˆ‘ä»¬å†æ¥çœ‹ä»–çš„æ‹“å±•æ“ä½œï¼Œä»–çš„æ‹“å±•æ“ä½œç›¸å¯¹æ¯”è¾ƒç®€å•ï¼š</p><h4 id="2-6-1-hash-ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ"><a href="#2-6-1-hash-ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ" class="headerlink" title="2.6.1  hash ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ"></a>2.6.1  hash ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ</h4><p>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰çš„å­—æ®µåæˆ–å­—æ®µå€¼</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gauss">hkeys <span class="hljs-built_in">key</span><br>hvals <span class="hljs-built_in">key</span><br></code></pre></td></tr></table></figure><p>è®¾ç½®æŒ‡å®šå­—æ®µçš„æ•°å€¼æ•°æ®å¢åŠ æŒ‡å®šèŒƒå›´çš„å€¼</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">hincrby</span> key <span class="hljs-meta">field</span> increment<br><span class="hljs-symbol">hincrbyfloat</span> key <span class="hljs-meta">field</span> increment<br></code></pre></td></tr></table></figure><h4 id="2-6-2-hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"><a href="#2-6-2-hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="2.6.2  hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"></a>2.6.2  hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹</h4><p>(1)hashç±»å‹ä¸­valueåªèƒ½å­˜å‚¨<font color='red'>å­—ç¬¦ä¸²</font>ï¼Œä¸å…è®¸å­˜å‚¨å…¶ä»–æ•°æ®ç±»å‹ï¼Œä¸å­˜åœ¨åµŒå¥—ç°è±¡ã€‚å¦‚æœæ•°æ®æœªè·å–åˆ°ï¼Œå¯¹åº”çš„å€¼ä¸ºï¼ˆnilï¼‰ã€‚</p><p>(2ï¼‰æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 232 - 1 ä¸ªé”®å€¼å¯¹<br>hashç±»å‹ååˆ†è´´è¿‘å¯¹è±¡çš„æ•°æ®å­˜å‚¨å½¢å¼ï¼Œå¹¶ä¸”å¯ä»¥çµæ´»æ·»åŠ åˆ é™¤å¯¹è±¡å±æ€§ã€‚ä½†hashè®¾è®¡åˆè¡·ä¸æ˜¯ä¸ºäº†å­˜å‚¨å¤§é‡å¯¹è±¡è€Œè®¾è®¡ çš„ï¼Œåˆ‡è®°ä¸å¯æ»¥ç”¨ï¼Œæ›´ä¸å¯ä»¥å°†hashä½œä¸ºå¯¹è±¡åˆ—è¡¨ä½¿ç”¨ã€‚</p><p>(3)hgetall æ“ä½œå¯ä»¥è·å–å…¨éƒ¨å±æ€§ï¼Œå¦‚æœå†…éƒ¨fieldè¿‡å¤šï¼Œéå†æ•´ä½“æ•°æ®æ•ˆç‡å°±å¾ˆä¼šä½ï¼Œæœ‰å¯èƒ½æˆä¸ºæ•°æ®è®¿é—®ç“¶é¢ˆã€‚</p><h3 id="2-7-hashåº”ç”¨åœºæ™¯"><a href="#2-7-hashåº”ç”¨åœºæ™¯" class="headerlink" title="2.7  hashåº”ç”¨åœºæ™¯"></a>2.7  hashåº”ç”¨åœºæ™¯</h3><h4 id="2-7-1-åº”ç”¨åœºæ™¯"><a href="#2-7-1-åº”ç”¨åœºæ™¯" class="headerlink" title="2.7.1  åº”ç”¨åœºæ™¯"></a>2.7.1  åº”ç”¨åœºæ™¯</h4><p>åŒ11æ´»åŠ¨æ—¥ï¼Œé”€å”®æ‰‹æœºå……å€¼å¡çš„å•†å®¶å¯¹ç§»åŠ¨ã€è”é€šã€ç”µä¿¡çš„30å…ƒã€50å…ƒã€100å…ƒå•†å“æ¨å‡ºæŠ¢è´­æ´»åŠ¨ï¼Œæ¯ç§å•†å“æŠ¢è´­ä¸Šé™1000  å¼ ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/CfsrG8gvkWwpQSq.png"></p><p>ä¹Ÿå°±æ˜¯å•†å®¶æœ‰äº†ï¼Œå•†å“æœ‰äº†ï¼Œæ•°é‡æœ‰äº†ã€‚æœ€ç»ˆæˆ‘ä»¬çš„ç”¨æˆ·ä¹°ä¸œè¥¿å°±æ˜¯åœ¨æ”¹å˜è¿™ä¸ªæ•°é‡ã€‚é‚£ä½ è¯´è¿™ä¸ªç»“æ„åº”è¯¥æ€ä¹ˆå­˜å‘¢ï¼Ÿå¯¹åº”çš„å•†å®¶çš„IDä½œä¸ºkeyï¼Œç„¶åè¿™äº›å……å€¼å¡çš„IDä½œä¸ºfieldï¼Œæœ€åè¿™äº›æ•°é‡ä½œä¸ºvalueã€‚è€Œæˆ‘ä»¬æ‰€è°“çš„æ“ä½œæ˜¯å…¶å®å°±æ˜¯increaè¿™ä¸ªæ“ä½œï¼Œåªä¸è¿‡ä½ ä¼ è´Ÿå€¼å°±è¡Œäº†ã€‚çœ‹ä¸€çœ‹å¯¹åº”çš„è§£å†³æ–¹æ¡ˆï¼š</p><h4 id="2-7-2-è§£å†³æ–¹æ¡ˆ"><a href="#2-7-2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2.7.2  è§£å†³æ–¹æ¡ˆ"></a>2.7.2  è§£å†³æ–¹æ¡ˆ</h4><p>ä»¥å•†å®¶idä½œä¸ºkey</p><p>å°†å‚ä¸æŠ¢è´­çš„å•†å“idä½œä¸ºfield</p><p>å°†å‚ä¸æŠ¢è´­çš„å•†å“æ•°é‡ä½œä¸ºå¯¹åº”çš„value</p><p>æŠ¢è´­æ—¶ä½¿ç”¨é™å€¼çš„æ–¹å¼æ§åˆ¶äº§å“æ•°é‡</p><p>æ³¨æ„ï¼šå®é™…ä¸šåŠ¡ä¸­è¿˜æœ‰è¶…å–ç­‰å®é™…é—®é¢˜ï¼Œè¿™é‡Œä¸åšè®¨è®º</p><h3 id="2-8-liståŸºæœ¬æ“ä½œ"><a href="#2-8-liståŸºæœ¬æ“ä½œ" class="headerlink" title="2.8  liståŸºæœ¬æ“ä½œ"></a>2.8  liståŸºæœ¬æ“ä½œ</h3><p>å‰é¢æˆ‘ä»¬å­˜æ•°æ®çš„æ—¶å€™å‘¢ï¼Œå•ä¸ªæ•°æ®ä¹Ÿèƒ½å­˜ï¼Œå¤šä¸ªæ•°æ®ä¹Ÿèƒ½å­˜ï¼Œä½†æ˜¯è¿™é‡Œé¢æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å­˜å¤šä¸ªæ•°æ®ç”¨hashçš„æ—¶å€™å®ƒæ˜¯æ²¡æœ‰é¡ºåºçš„ã€‚æˆ‘ä»¬å¹³æ—¶æ“ä½œï¼Œå®é™…ä¸Šæ•°æ®å¾ˆå¤šæƒ…å†µä¸‹éƒ½æ˜¯æœ‰é¡ºåºçš„ï¼Œé‚£æœ‰æ²¡æœ‰ä¸€ç§èƒ½å¤Ÿç”¨æ¥å­˜å‚¨å¸¦æœ‰é¡ºåºçš„è¿™ç§æ•°æ®æ¨¡å‹å‘¢ï¼Œlistå°±ä¸“é—¨æ¥å¹²è¿™äº‹å„¿ã€‚</p><h4 id="2-8-1-list-ç±»å‹"><a href="#2-8-1-list-ç±»å‹" class="headerlink" title="2.8.1  list ç±»å‹"></a>2.8.1  list ç±»å‹</h4><p>æ•°æ®å­˜å‚¨éœ€æ±‚ï¼šå­˜å‚¨å¤šä¸ªæ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›å…¥å­˜å‚¨ç©ºé—´çš„é¡ºåºè¿›è¡ŒåŒºåˆ†</p><p>éœ€è¦çš„å­˜å‚¨ç»“æ„ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜å¤šä¸ªæ•°æ®ï¼Œä¸”é€šè¿‡æ•°æ®å¯ä»¥ä½“ç°è¿›å…¥é¡ºåº</p><p>listç±»å‹ï¼šä¿å­˜å¤šä¸ªæ•°æ®ï¼Œåº•å±‚ä½¿ç”¨åŒå‘é“¾è¡¨å­˜å‚¨ç»“æ„å®ç°</p><p>å…ˆæ¥é€šè¿‡ä¸€å¼ å›¾ï¼Œå›å¿†ä¸€ä¸‹é¡ºåºè¡¨ã€é“¾è¡¨ã€åŒå‘é“¾è¡¨ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/XeqFQWa5ElobZDi.png"></p><p>listå¯¹åº”çš„å­˜å‚¨ç»“æ„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé‡Œè¾¹å­˜çš„è¿™ä¸ªä¸œè¥¿æ˜¯ä¸ªåˆ—è¡¨ï¼Œä»–æœ‰ä¸€ä¸ªå¯¹åº”çš„åç§°ã€‚å°±æ˜¯keyå­˜ä¸€ä¸ªlistçš„è¿™æ ·ç»“æ„ã€‚å¯¹åº”çš„åŸºæœ¬æ“ä½œï¼Œä½ å…¶å®æ˜¯å¯ä»¥æƒ³åˆ°çš„ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/sFnb1v9i7UoBJ6h.png"></p><p>æ¥çœ‹ä¸€ä¸‹ï¼Œå› ä¸ºå®ƒæ˜¯åŒå‘çš„ï¼Œæ‰€ä»¥ä»–å·¦è¾¹å³è¾¹éƒ½èƒ½æ“ä½œï¼Œå®ƒå¯¹åº”çš„æ“ä½œç»“æ„ä¸¤è¾¹éƒ½èƒ½è¿›æ•°æ®ã€‚è¿™å°±æ˜¯é“¾è¡¨çš„ä¸€ä¸ªå­˜å‚¨ç»“æ„ã€‚å¾€å¤–æ‹¿æ•°æ®çš„æ—¶å€™æ€ä¹ˆæ‹¿å‘¢ï¼Ÿé€šå¸¸æ˜¯ä»ä¸€ç«¯æ‹¿ï¼Œå½“ç„¶å¦ä¸€ç«¯ä¹Ÿèƒ½æ‹¿ã€‚å¦‚æœä¸¤ç«¯éƒ½èƒ½æ‹¿çš„è¯ï¼Œè¿™å°±æ˜¯ä¸ªåŒç«¯é˜Ÿåˆ—ï¼Œä¸¤è¾¹å„¿éƒ½èƒ½æ“ä½œã€‚å¦‚æœåªèƒ½ä»ä¸€ç«¯è¿›ä¸€ç«¯å‡ºï¼Œè¿™ä¸ªæ¨¡å‹å’±ä»¬å‰é¢äº†è§£è¿‡ï¼Œå«åšæ ˆã€‚</p><h4 id="2-8-2-list-ç±»å‹æ•°æ®åŸºæœ¬æ“ä½œ"><a href="#2-8-2-list-ç±»å‹æ•°æ®åŸºæœ¬æ“ä½œ" class="headerlink" title="2.8.2 list ç±»å‹æ•°æ®åŸºæœ¬æ“ä½œ"></a>2.8.2 list ç±»å‹æ•°æ®åŸºæœ¬æ“ä½œ</h4><p>æœ€åçœ‹ä¸€ä¸‹ä»–çš„åŸºæœ¬æ“ä½œ</p><p>æ·»åŠ &#x2F;ä¿®æ”¹æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">lpush key value1 [value2] â€¦â€¦<br>rpush key value1 [value2] â€¦â€¦<br></code></pre></td></tr></table></figure><p>è·å–æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">lrange key start stop<br>lindex key index<br>llen key<br></code></pre></td></tr></table></figure><p>è·å–å¹¶ç§»é™¤æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">lpop key<br>rpop key<br></code></pre></td></tr></table></figure><h3 id="2-9-listæ‰©å±•æ“ä½œ"><a href="#2-9-listæ‰©å±•æ“ä½œ" class="headerlink" title="2.9  listæ‰©å±•æ“ä½œ"></a>2.9  listæ‰©å±•æ“ä½œ</h3><h4 id="2-9-1-list-ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ"><a href="#2-9-1-list-ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ" class="headerlink" title="2.9.1  list ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ"></a>2.9.1  list ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ</h4><p>ç§»é™¤æŒ‡å®šæ•°æ®</p><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs q">lrem <span class="hljs-built_in">key</span> <span class="hljs-built_in">count</span> <span class="hljs-built_in">value</span><br></code></pre></td></tr></table></figure><p>è§„å®šæ—¶é—´å†…è·å–å¹¶ç§»é™¤æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">blpop key1 [key2] <span class="hljs-built_in">timeout</span><br>brpop key1 [key2] <span class="hljs-built_in">timeout</span><br>brpoplpush <span class="hljs-built_in">source</span> destination <span class="hljs-built_in">timeout</span><br></code></pre></td></tr></table></figure><h4 id="2-9-2-list-ç±»å‹æ•°æ®æ“ä½œæ³¨æ„äº‹é¡¹"><a href="#2-9-2-list-ç±»å‹æ•°æ®æ“ä½œæ³¨æ„äº‹é¡¹" class="headerlink" title="2.9.2  list ç±»å‹æ•°æ®æ“ä½œæ³¨æ„äº‹é¡¹"></a>2.9.2  list ç±»å‹æ•°æ®æ“ä½œæ³¨æ„äº‹é¡¹</h4><p>ï¼ˆ1ï¼‰listä¸­ä¿å­˜çš„æ•°æ®éƒ½æ˜¯stringç±»å‹çš„ï¼Œæ•°æ®æ€»å®¹é‡æ˜¯æœ‰é™çš„ï¼Œæœ€å¤š232 - 1 ä¸ªå…ƒç´ (4294967295)ã€‚</p><p>ï¼ˆ2ï¼‰listå…·æœ‰ç´¢å¼•çš„æ¦‚å¿µï¼Œä½†æ˜¯æ“ä½œæ•°æ®æ—¶é€šå¸¸ä»¥<font color='red'>é˜Ÿåˆ—</font>çš„å½¢å¼è¿›è¡Œå…¥é˜Ÿå‡ºé˜Ÿæ“ä½œï¼Œæˆ–ä»¥<font color='red'>æ ˆçš„å½¢å¼</font>è¿›è¡Œå…¥æ ˆå‡ºæ ˆæ“ä½œ</p><p>ï¼ˆ3ï¼‰è·å–å…¨éƒ¨æ•°æ®æ“ä½œç»“æŸç´¢å¼•è®¾ç½®ä¸º-1</p><p>ï¼ˆ4ï¼‰listå¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†é¡µæ“ä½œï¼Œé€šå¸¸ç¬¬ä¸€é¡µçš„ä¿¡æ¯æ¥è‡ªäºlistï¼Œç¬¬2é¡µåŠæ›´å¤šçš„ä¿¡æ¯é€šè¿‡æ•°æ®åº“çš„å½¢å¼åŠ è½½</p><h3 id="2-10-list-åº”ç”¨åœºæ™¯"><a href="#2-10-list-åº”ç”¨åœºæ™¯" class="headerlink" title="2.10 list åº”ç”¨åœºæ™¯"></a>2.10 list åº”ç”¨åœºæ™¯</h3><h4 id="2-10-1-åº”ç”¨åœºæ™¯"><a href="#2-10-1-åº”ç”¨åœºæ™¯" class="headerlink" title="2.10.1  åº”ç”¨åœºæ™¯"></a>2.10.1  åº”ç”¨åœºæ™¯</h4><p>ä¼ä¸šè¿è¥è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿå°†äº§ç”Ÿå‡ºå¤§é‡çš„è¿è¥æ•°æ®ï¼Œå¦‚ä½•ä¿éšœå¤šå°æœåŠ¡å™¨æ“ä½œæ—¥å¿—çš„ç»Ÿä¸€é¡ºåºè¾“å‡ºï¼Ÿ</p><p><img src="https://s2.loli.net/2022/03/31/2sLOUCop14Agl5X.png"></p><p>å‡å¦‚ç°åœ¨ä½ æœ‰å¤šå°æœåŠ¡å™¨ï¼Œæ¯ä¸€å°æœåŠ¡å™¨éƒ½ä¼šäº§ç”Ÿå®ƒçš„æ—¥å¿—ï¼Œå‡è®¾ä½ æ˜¯ä¸€ä¸ªè¿ç»´äººå‘˜ï¼Œä½ æƒ³çœ‹å®ƒçš„æ“ä½œæ—¥å¿—ï¼Œä½ æ€ä¹ˆçœ‹å‘¢ï¼Ÿæ‰“å¼€Aæœºå™¨çš„æ—¥å¿—çœ‹ä¸€çœ‹ï¼Œæ‰“å¼€Bæœºå™¨çš„æ—¥å¿—å†çœ‹ä¸€çœ‹å—ï¼Ÿè¿™æ ·çš„è¯ä½ ä¼šå¯èƒ½ä¼šç–¯æ‰çš„ï¼å› ä¸ºå·¦è¾¹çœ‹çš„æœ‰å¯èƒ½å®ƒçš„æ—¶é—´æ˜¯11:01ï¼Œå³è¾¹11:02ï¼Œç„¶åå†çœ‹å·¦è¾¹11:03ï¼Œå®ƒä»¬æœ¬èº«æ˜¯è¿ç»­çš„ï¼Œä½†æ˜¯ä½ åœ¨çœ‹çš„æ—¶å€™å°±åˆ†æˆå››ä¸ªæ–‡ä»¶äº†ï¼Œè¿™ä¸ªæ—¶å€™ä½ çœ‹èµ·æ¥å°±ä¼šå¾ˆéº»çƒ¦ã€‚èƒ½ä¸èƒ½æŠŠä»–ä»¬åˆå¹¶å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼æ€ä¹ˆåšå‘¢ï¼Ÿå»ºç«‹èµ·redisæœåŠ¡å™¨ã€‚å½“ä»–ä»¬éœ€è¦è®°æ—¥å¿—çš„æ—¶å€™ï¼Œè®°åœ¨å“ªå„¿,å…¨éƒ¨å‘ç»™redisã€‚ç­‰åˆ°ä½ æƒ³çœ‹çš„æ—¶å€™ï¼Œé€šè¿‡æœåŠ¡å™¨è®¿é—®redisè·å–æ—¥å¿—ã€‚ç„¶åå¾—åˆ°ä»¥åï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„æ—¥å¿—ä¿¡æ¯ã€‚é‚£ä¹ˆè¿™é‡Œé¢å°±å¯ä»¥è·å–åˆ°å®Œæ•´çš„æ—¥å¿—äº†ï¼Œä¾é ä»€ä¹ˆæ¥å®ç°å‘¢ï¼Ÿå°±ä¾é æˆ‘ä»¬çš„listçš„æ¨¡å‹çš„é¡ºåºæ¥å®ç°ã€‚è¿›æ¥ä¸€ç»„æ•°æ®å°±å¾€é‡ŒåŠ ï¼Œè°å…ˆè¿›æ¥è°å…ˆåŠ è¿›å»ï¼Œå®ƒæ˜¯æœ‰ä¸€å®šçš„é¡ºåºçš„ã€‚</p><h4 id="2-10-2-è§£å†³æ–¹æ¡ˆ"><a href="#2-10-2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2.10.2  è§£å†³æ–¹æ¡ˆ"></a>2.10.2  è§£å†³æ–¹æ¡ˆ</h4><p>ä¾èµ–listçš„æ•°æ®å…·æœ‰é¡ºåºçš„ç‰¹å¾å¯¹ä¿¡æ¯è¿›è¡Œç®¡ç†</p><p>ä½¿ç”¨é˜Ÿåˆ—æ¨¡å‹è§£å†³å¤šè·¯ä¿¡æ¯æ±‡æ€»åˆå¹¶çš„é—®é¢˜</p><p>ä½¿ç”¨æ ˆæ¨¡å‹è§£å†³æœ€æ–°æ¶ˆæ¯çš„é—®é¢˜</p><h3 id="2-11-set-åŸºæœ¬æ“ä½œ"><a href="#2-11-set-åŸºæœ¬æ“ä½œ" class="headerlink" title="2.11  set åŸºæœ¬æ“ä½œ"></a>2.11  set åŸºæœ¬æ“ä½œ</h3><h4 id="2-11-1-setç±»å‹"><a href="#2-11-1-setç±»å‹" class="headerlink" title="2.11.1 setç±»å‹"></a>2.11.1 setç±»å‹</h4><p>æ–°çš„å­˜å‚¨éœ€æ±‚ï¼šå­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œåœ¨æŸ¥è¯¢æ–¹é¢æä¾›æ›´é«˜çš„æ•ˆç‡</p><p>éœ€è¦çš„å­˜å‚¨ç»“æ„ï¼šèƒ½å¤Ÿä¿å­˜å¤§é‡çš„æ•°æ®ï¼Œé«˜æ•ˆçš„å†…éƒ¨å­˜å‚¨æœºåˆ¶ï¼Œä¾¿äºæŸ¥è¯¢</p><p>setç±»å‹ï¼šä¸hashå­˜å‚¨ç»“æ„å®Œå…¨ç›¸åŒï¼Œ<font color='red'>ä»…å­˜å‚¨é”®ï¼Œä¸å­˜å‚¨å€¼ï¼ˆnilï¼‰</font>ï¼Œå¹¶ä¸”å€¼æ˜¯ä¸å…è®¸é‡å¤çš„</p><p><img src="https://s2.loli.net/2022/03/31/18FHbJRfQd7ZGxL.png"></p><p>é€šè¿‡è¿™ä¸ªåç§°ï¼Œå¤§å®¶ä¹ŸåŸºæœ¬ä¸Šèƒ½å¤Ÿè®¤è¯†åˆ°å’Œæˆ‘ä»¬Javaä¸­çš„setå®Œå…¨ä¸€æ ·ã€‚æˆ‘ä»¬ç°åœ¨è¦å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œå¹¶ä¸”è¦æ±‚æé«˜å®ƒçš„æŸ¥è¯¢æ•ˆç‡ã€‚ç”¨listè¿™ç§é“¾è¡¨å½¢å¼ï¼Œå®ƒçš„æŸ¥è¯¢æ•ˆç‡æ˜¯ä¸é«˜çš„ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶å€™æˆ‘ä»¬å°±æƒ³ï¼Œæœ‰æ²¡æœ‰é«˜æ•ˆçš„å­˜å‚¨æœºåˆ¶ã€‚å…¶å®å‰é¢å’±è®²Javaçš„æ—¶å€™è¯´è¿‡hashè¡¨çš„ç»“æ„å°±éå¸¸çš„å¥½ï¼Œä½†æ˜¯è¿™é‡Œè¾¹æˆ‘ä»¬å·²ç»æœ‰hashäº†ï¼Œä»–åšäº†è¿™ä¹ˆä¸€ä¸ªè®¾å®šï¼Œå¹²å˜›å‘¢ï¼Œä»–æŠŠhashçš„å­˜å‚¨ç©ºé—´ç»™æ”¹ä¸€ä¸‹ï¼Œå³è¾¹ä½ åŸæ¥å­˜æ•°æ®æ”¹æ‰,å…¨éƒ¨å­˜ç©ºï¼Œé‚£ä½ è¯´æ•°æ®æ”¾å“ªå„¿äº†ï¼Ÿæ”¾åˆ°åŸæ¥çš„filedçš„ä½ç½®ï¼Œä¹Ÿå°±åœ¨è¿™é‡Œè¾¹å­˜çœŸæ­£çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¨¡å‹å°±æ˜¯æˆ‘ä»¬çš„set æ¨¡å‹ã€‚</p><p>setç±»å‹ï¼šä¸hashå­˜å‚¨ç»“æ„å®Œå…¨ç›¸åŒï¼Œä»…å­˜å‚¨é”®ï¼Œä¸å­˜å‚¨å€¼ï¼ˆnilï¼‰ï¼Œå¹¶ä¸”å€¼æ˜¯ä¸å…è®¸é‡å¤çš„ã€‚</p><p>çœ‹ä¸€ä¸‹å®ƒçš„æ•´ä¸ªç»“æ„ï¼š</p><p><img src="https://s2.loli.net/2022/03/31/Fnqf5viE86X9mMU.png"></p><h4 id="2-11-2-setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"><a href="#2-11-2-setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="2.11.2 setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ"></a>2.11.2 setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ</h4><p>æ·»åŠ æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sadd key member1 [member2]<br></code></pre></td></tr></table></figure><p>è·å–å…¨éƒ¨æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">smembers key<br></code></pre></td></tr></table></figure><p>åˆ é™¤æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">srem key member1 [member2]<br></code></pre></td></tr></table></figure><p>è·å–é›†åˆæ•°æ®æ€»é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">scard key<br></code></pre></td></tr></table></figure><p>åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šæ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sismember key member<br></code></pre></td></tr></table></figure><p>éšæœºè·å–é›†åˆä¸­æŒ‡å®šæ•°é‡çš„æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">srandmember key [count]<br></code></pre></td></tr></table></figure><p>éšæœºè·å–é›†ä¸­çš„æŸä¸ªæ•°æ®å¹¶å°†è¯¥æ•°æ®ç§»é™¤é›†åˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">spop key [count]<br></code></pre></td></tr></table></figure><h3 id="2-12-set-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"><a href="#2-12-set-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ" class="headerlink" title="2.12  set ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"></a>2.12  set ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</h3><h4 id="2-12-1-set-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"><a href="#2-12-1-set-ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ" class="headerlink" title="2.12.1  set ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ"></a>2.12.1  set ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ</h4><p>æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤ã€å¹¶ã€å·®é›†</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">sinter key1 <span class="hljs-selector-attr">[key2 â€¦]</span>  <br>sunion key1 <span class="hljs-selector-attr">[key2 â€¦]</span>  <br>sdiff key1 <span class="hljs-selector-attr">[key2 â€¦]</span><br></code></pre></td></tr></table></figure><p>æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤ã€å¹¶ã€å·®é›†å¹¶å­˜å‚¨åˆ°æŒ‡å®šé›†åˆä¸­</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">sinterstore destination key1 <span class="hljs-selector-attr">[key2 â€¦]</span>  <br>sunionstore destination key1 <span class="hljs-selector-attr">[key2 â€¦]</span>  <br>sdiffstore destination key1 <span class="hljs-selector-attr">[key2 â€¦]</span><br></code></pre></td></tr></table></figure><p>å°†æŒ‡å®šæ•°æ®ä»åŸå§‹é›†åˆä¸­ç§»åŠ¨åˆ°ç›®æ ‡é›†åˆä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">smove <span class="hljs-built_in">source</span> destination member<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸‹é¢ä¸€å¼ å›¾å›å¿†ä¸€ä¸‹äº¤ã€å¹¶ã€å·®</p><p><img src="https://s2.loli.net/2022/03/31/rLK86za9oVPF2NM.png"></p><h4 id="2-12-2-set-ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"><a href="#2-12-2-set-ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="2.12.2  set ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹"></a>2.12.2  set ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹</h4><p>set ç±»å‹ä¸å…è®¸æ•°æ®é‡å¤ï¼Œå¦‚æœæ·»åŠ çš„æ•°æ®åœ¨ set ä¸­å·²ç»å­˜åœ¨ï¼Œå°†åªä¿ç•™ä¸€ä»½ã€‚</p><p>set è™½ç„¶ä¸hashçš„å­˜å‚¨ç»“æ„ç›¸åŒï¼Œä½†æ˜¯æ— æ³•å¯ç”¨hashä¸­å­˜å‚¨å€¼çš„ç©ºé—´ã€‚</p><h3 id="2-13-setåº”ç”¨åœºæ™¯"><a href="#2-13-setåº”ç”¨åœºæ™¯" class="headerlink" title="2.13  setåº”ç”¨åœºæ™¯"></a>2.13  setåº”ç”¨åœºæ™¯</h3><h4 id="2-13-1-setåº”ç”¨åœºæ™¯"><a href="#2-13-1-setåº”ç”¨åœºæ™¯" class="headerlink" title="2.13.1  setåº”ç”¨åœºæ™¯"></a>2.13.1  setåº”ç”¨åœºæ™¯</h4><p>ï¼ˆ1ï¼‰é»‘åå•</p><p>èµ„è®¯ç±»ä¿¡æ¯ç±»ç½‘ç«™è¿½æ±‚é«˜è®¿é—®é‡ï¼Œä½†æ˜¯ç”±äºå…¶ä¿¡æ¯çš„ä»·å€¼ï¼Œå¾€å¾€å®¹æ˜“è¢«ä¸æ³•åˆ†å­åˆ©ç”¨ï¼Œé€šè¿‡çˆ¬è™«æŠ€æœ¯ï¼Œ  å¿«é€Ÿè·å–ä¿¡æ¯ï¼Œä¸ªåˆ«ç‰¹ç§è¡Œä¸šç½‘ç«™ä¿¡æ¯é€šè¿‡çˆ¬è™«è·å–åˆ†æåï¼Œå¯ä»¥è½¬æ¢æˆå•†ä¸šæœºå¯†è¿›è¡Œå‡ºå”®ã€‚ä¾‹å¦‚ç¬¬ä¸‰æ–¹ç« è½¦ç¥¨ã€æœºç¥¨ã€é…’åº—åˆ·ç¥¨ä»£è´­è½¯ä»¶ï¼Œç”µå•†åˆ·è¯„è®ºã€åˆ·å¥½è¯„ã€‚</p><p>åŒæ—¶çˆ¬è™«å¸¦æ¥çš„ä¼ªæµé‡ä¹Ÿä¼šç»™ç»è¥è€…å¸¦æ¥é”™è§‰ï¼Œäº§ç”Ÿé”™è¯¯çš„å†³ç­–ï¼Œæœ‰æ•ˆé¿å…ç½‘ç«™è¢«çˆ¬è™«åå¤çˆ¬å–æˆä¸ºæ¯ä¸ªç½‘ç«™éƒ½è¦è€ƒè™‘çš„åŸºæœ¬é—®é¢˜ã€‚åœ¨åŸºäºæŠ€æœ¯å±‚é¢åŒºåˆ†å‡ºçˆ¬è™«ç”¨æˆ·åï¼Œéœ€è¦å°†æ­¤ç±»ç”¨æˆ·è¿›è¡Œæœ‰æ•ˆçš„å±è”½ï¼Œè¿™å°±æ˜¯é»‘åå•çš„å…¸å‹åº”ç”¨ã€‚</p><p>ps:ä¸æ˜¯è¯´çˆ¬è™«ä¸€å®šåšæ‘§æ¯æ€§çš„å·¥ä½œï¼Œæœ‰äº›å°å‹ç½‘ç«™éœ€è¦çˆ¬è™«ä¸ºå…¶å¸¦æ¥ä¸€äº›æµé‡ã€‚</p><p>ï¼ˆ2ï¼‰ç™½åå•</p><p>å¯¹äºå®‰å…¨æ€§æ›´é«˜çš„åº”ç”¨è®¿é—®ï¼Œä»…ä»…é é»‘åå•æ˜¯ä¸èƒ½è§£å†³å®‰å…¨é—®é¢˜çš„ï¼Œæ­¤æ—¶éœ€è¦è®¾å®šå¯è®¿é—®çš„ç”¨æˆ·ç¾¤ä½“ï¼Œ ä¾èµ–ç™½åå•åšæ›´ä¸ºè‹›åˆ»çš„è®¿é—®éªŒè¯ã€‚</p><h4 id="2-13-2-è§£å†³æ–¹æ¡ˆ"><a href="#2-13-2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2.13.2  è§£å†³æ–¹æ¡ˆ"></a>2.13.2  è§£å†³æ–¹æ¡ˆ</h4><p>åŸºäºç»è¥æˆ˜ç•¥è®¾å®šé—®é¢˜ç”¨æˆ·å‘ç°ã€é‰´åˆ«è§„åˆ™</p><p>å‘¨æœŸæ€§æ›´æ–°æ»¡è¶³è§„åˆ™çš„ç”¨æˆ·é»‘åå•ï¼ŒåŠ å…¥seté›†åˆ</p><p>ç”¨æˆ·è¡Œä¸ºä¿¡æ¯è¾¾åˆ°åä¸é»‘åå•è¿›è¡Œæ¯”å¯¹ï¼Œç¡®è®¤è¡Œä¸ºå»å‘</p><p>é»‘åå•è¿‡æ»¤IPåœ°å€ï¼šåº”ç”¨äºå¼€æ”¾æ¸¸å®¢è®¿é—®æƒé™çš„ä¿¡æ¯æº</p><p>é»‘åå•è¿‡æ»¤è®¾å¤‡ä¿¡æ¯ï¼šåº”ç”¨äºé™å®šè®¿é—®è®¾å¤‡çš„ä¿¡æ¯æº</p><p>é»‘åå•è¿‡æ»¤ç”¨æˆ·ï¼šåº”ç”¨äºåŸºäºè®¿é—®æƒé™çš„ä¿¡æ¯æº</p><h3 id="2-14-å®è·µæ¡ˆä¾‹"><a href="#2-14-å®è·µæ¡ˆä¾‹" class="headerlink" title="2.14  å®è·µæ¡ˆä¾‹"></a>2.14  å®è·µæ¡ˆä¾‹</h3><h4 id="2-14-1ä¸šåŠ¡åœºæ™¯"><a href="#2-14-1ä¸šåŠ¡åœºæ™¯" class="headerlink" title="2.14.1ä¸šåŠ¡åœºæ™¯"></a>2.14.1ä¸šåŠ¡åœºæ™¯</h4><p>ä½¿ç”¨å¾®ä¿¡çš„è¿‡ç¨‹ä¸­ï¼Œå½“å¾®ä¿¡æ¥æ”¶æ¶ˆæ¯åï¼Œä¼šé»˜è®¤å°†æœ€è¿‘æ¥æ”¶çš„æ¶ˆæ¯ç½®é¡¶ï¼Œå½“å¤šä¸ªå¥½å‹åŠå…³æ³¨çš„è®¢é˜…å·åŒæ—¶å‘ é€æ¶ˆæ¯æ—¶ï¼Œè¯¥æ’åºä¼šä¸åœçš„è¿›è¡Œäº¤æ›¿ã€‚åŒæ—¶è¿˜å¯ä»¥å°†é‡è¦çš„ä¼šè¯è®¾ç½®ä¸ºç½®é¡¶ã€‚ä¸€æ—¦ç”¨æˆ·ç¦»çº¿åï¼Œå†æ¬¡æ‰“å¼€å¾®ä¿¡æ—¶ï¼Œæ¶ˆæ¯è¯¥æŒ‰ç…§ä»€ä¹ˆæ ·çš„é¡ºåºæ˜¾ç¤ºã€‚</p><p>æˆ‘ä»¬åˆ†æä¸€ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2022/03/31/neBNmzjHs8x1Zkb.png"></p><p>100è¿™å°æ‰‹æœºä»£è¡¨ä½ ã€‚è€Œ200ã€300ã€400è¿™ä¸‰å°ä»£è¡¨ä½ å¥½å‹çš„æ‰‹æœºã€‚åœ¨è¿™é‡Œæœ‰ä¸€äº›ä¸œè¥¿éœ€è¦äº¤ä»£ä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘ä»¬æ¯ä¸ªäººçš„éƒ½ä¼šå¯¹è‡ªå·±çš„å¾®ä¿¡ä¸­çš„ä¸€äº›æ¯”è¾ƒé‡è¦çš„äººè®¾ç½®ä¼šè¯ç½®é¡¶ï¼Œå°†ä»–çš„é‚£æ¡å¯¹è¯æ”¾åœ¨æœ€ä¸Šé¢ã€‚æˆ‘ä»¬å‡å®šè¿™ä¸ªäººæœ‰ä¸¤ä¸ªä¼šè¯ç½®é¡¶çš„å¥½å‹ï¼Œåˆ†åˆ«æ˜¯400å’Œ500ï¼Œè€Œè¿™é‡Œè¾¹å°±åŒ…å«400.</p><p>ä¸‹é¢å‘¢ï¼Œæˆ‘ä»¬å°±æ¥å‘è¿™ä¸ªæ¶ˆæ¯ï¼Œç¬¬ä¸€ä¸ªå‘æ¶ˆæ¯çš„æ˜¯300ï¼Œä»–å‘äº†ä¸ªæ¶ˆæ¯ç»™100ã€‚å‘å®Œä»¥åï¼Œè¿™ä¸ªä¸œè¥¿åº”è¯¥æ€ä¹ˆå­˜å‚¨å‘¢ï¼Ÿåœ¨è¿™é‡Œé¢ä¸€å®šè¦åˆ†å¼€ï¼Œè®°å½•ç½®é¡¶çš„è¿™äº›äººçš„ä¼šè¯ï¼Œå¯¹åº”çš„ä¼šè¯æ˜¾ç¤ºé¡ºåºå’Œéç½®é¡¶çš„ä¸€å®šè¦åˆ†ä¸¤ã€‚</p><p>è¿™é‡Œé¢æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªæ¨¡å‹ï¼Œä¸€ä¸ªæ˜¯æ™®é€šçš„ï¼Œä¸€ä¸ªæ˜¯ç½®é¡¶çš„ï¼Œè€Œä¸Šé¢çš„è¿™ä¸ªç½®é¡¶çš„ç”¨æˆ·å‘¢ï¼Œæˆ‘ä»¬ç”¨setæ¥å­˜å‚¨ï¼Œå› ä¸ºä¸é‡å¤ã€‚è€Œä¸‹é¢è¿™äº›å› ä¸ºæœ‰é¡ºåºï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ç”¨listå»å­˜å‚¨,ä¸ç„¶ä½ æ€ä¹ˆè¡¨è¾¾é¡ºåºå‘¢ï¼Ÿ</p><p><img src="https://s2.loli.net/2022/03/31/2A6l4Kg8YXECPuc.png"></p><p>é‚£å½“300å‘ç»™æ¶ˆæ¯ç»™100ä»¥åï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å…ˆåˆ¤å®šä½ åœ¨ç½®é¡¶äººç¾¤ä¸­å—ï¼Ÿä¸åœ¨,é‚£å¥½ï¼Œ300çš„æ¶ˆæ¯å¯¹åº”çš„é¡ºåºå°±åº”è¯¥æ”¾åœ¨æ™®é€šçš„åˆ—è¡¨é‡Œè¾¹ã€‚è€Œåœ¨è¿™é‡Œè¾¹ï¼Œæˆ‘ä»¬æŠŠ300åŠ è¿›å»ã€‚ç¬¬ä¸€ä¸ªæ•°æ®ä¹Ÿå°±æ˜¯ç°åœ¨300ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/u1j8ETQGwsOhWmF.png"></p><p>æ¥ä¸‹æ¥400ï¼Œå‘äº†ä¸ªæ¶ˆæ¯ã€‚åˆ¤æ–­ä¸€ä¸‹ï¼Œä»–æ˜¯éœ€è¦ç½®é¡¶çš„ï¼Œæ‰€ä»¥400å°†è¿›å…¥listçš„ç½®é¡¶é‡Œè¾¹æ”¾ç€ã€‚å½“å‰è¿˜æ²¡æœ‰ç‰¹æ®Šçš„åœ°æ–¹ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/HogsIJnQCzGfaXK.png"></p><p>å†æ¥200å‘æ¶ˆæ¯äº†ï¼Œå’Œåˆšæ‰çš„åˆ¤å®šæ–¹æ³•ä¸€æ ·ï¼Œå…ˆçœ‹åœ¨ä¸åœ¨ç½®é¡¶é‡Œï¼Œä¸åœ¨çš„è¯è¿›æ™®é€šï¼Œç„¶ååœ¨æ™®é€šé‡Œè¾¹æŠŠ200åŠ å…¥å°±è¡Œäº†ï¼ŒOKï¼Œåˆ°è¿™é‡Œç›®å‰è¿˜æ²¡æœ‰é¡ºåºå˜åŒ–ã€‚</p><p>æ¥ä¸‹æ¥200åˆå‘æ¶ˆæ¯è¿‡æ¥ï¼ŒåŒä¸€ä¸ªäººç»™ä½ è¿å‘äº†ä¸¤æ¡ï¼Œé‚£è¿™ä¸ªæ—¶å€™200çš„æ¶ˆæ¯åˆ°è¾¾ä»¥åï¼Œå…ˆåˆ¤æ–­æ˜¯å¦åœ¨ç½®é¡¶èŒƒå›´ï¼Œä¸åœ¨ï¼Œæ¥ä¸‹æ¥ä»–è¦æ”¾åœ¨listæ™®é€šä¸­ï¼Œè¿™é‡Œä½ è¦æ³¨æ„ä¸€ç‚¹ï¼Œå› ä¸ºè¿™é‡Œè¾¹å·²ç»æœ‰200ï¼Œæ‰€ä»¥è¿›æ¥ä»¥åå…ˆå¹²ä¸€ä»¶äº‹å„¿ï¼ŒæŠŠ200æ€æ‰ï¼Œæ²¡æœ‰200ï¼Œç„¶åå†æŠŠ200åŠ è¿›æ¥ï¼Œé‚£ä½ æƒ³ä¸€ä¸‹ï¼Œç°åœ¨è¿™ä¸ªä½ç½®é¡ºåºæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±æ˜¯æ–°çš„éƒ½åœ¨å³è¾¹ï¼Œå¯¹ä¸å¯¹ï¼Ÿ</p><p>è¿˜è®°å¾—æˆ‘ä»¬è¯´listæ¨¡å‹ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ï¼Œå®ƒæ˜¯å¯ä»¥ä¸¤å¤´è¿›ä¸¤å¤´å‡ºã€‚å½“ç„¶æˆ‘ä»¬åŒç«¯ä»ä¸€å¤´è¿›ä¸€å¤´å‡ºï¼Œè¿™å°±æ˜¯æ ˆæ¨¡å‹ï¼Œç°åœ¨å’±ä»¬è¿ç”¨çš„å°±æ˜¯listæ¨¡å‹ä¸­çš„æ ˆæ¨¡å‹ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/O6IQ5jdcus3zEaL.png"></p><p>ç°åœ¨300å‘æ¶ˆæ¯ï¼Œå…ˆåˆ¤å®šä»–åœ¨ä¸åœ¨ï¼Œä¸åœ¨ï¼Œç”¨æ™®é€šçš„é˜Ÿåˆ—ï¼Œæ¥ä¸‹æ¥æŒ‰ç…§åˆšæ‰çš„æ“ä½œï¼Œä¸ç®¡ä½ é‡Œè¾¹åŸæ¥æœ‰æ²¡æœ‰300ï¼Œæˆ‘å…ˆæŠŠ300æ€æ‰ï¼Œæ²¡äº†ï¼Œ200è‡ªç„¶å°±å¡«åˆ°300çš„ä½ç½®äº†ï¼Œä»–ç°åœ¨æ˜¯listé‡Œé¢å”¯ä¸€ä¸€ä¸ªï¼Œç„¶åè®©300è¿›æ¥ï¼Œæ³¨æ„æ˜¯ä»å³ä¾§è¿›æ¥çš„ï¼Œé‚£ä¹ˆç°åœ¨300å°±æ˜¯æœ€æ–°çš„ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/rwuI5R28Fnc3KkS.png"></p><p>é‚£ä¹ˆåˆ°è¿™é‡Œå‘¢ï¼Œæˆ‘ä»¬è®©100æ¥è¯»å–æ¶ˆæ¯ã€‚ä½ è§‰å¾—è¿™ä¸ªæ¶ˆæ¯é¡ºåºåº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿé¦–å…ˆç½®é¡¶çš„400æœ‰ä¸€ä¸ªï¼Œä»–è·‘åœ¨æœ€ä¸Šé¢ï¼Œç„¶ålistæ™®é€šå¦‚æœå‡ºæ¥çš„è¯ï¼Œ300æ˜¯æœ€æ–°çš„æ¶ˆæ¯ï¼Œè€Œ200åœ¨ä»–åé¢çš„ã€‚ç”¨è¿™ç§å½¢å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥åšå‡ºæ¥ä»–çš„æ¶ˆæ¯é¡ºåºæ¥ã€‚</p><h4 id="2-14-2-è§£å†³æ–¹æ¡ˆ"><a href="#2-14-2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2.14.2  è§£å†³æ–¹æ¡ˆ"></a>2.14.2  è§£å†³æ–¹æ¡ˆ</h4><p>çœ‹ä¸€ä¸‹æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆï¼š</p><p>ä¾èµ–listçš„æ•°æ®å…·æœ‰é¡ºåºçš„ç‰¹å¾å¯¹æ¶ˆæ¯è¿›è¡Œç®¡ç†ï¼Œå°†listç»“æ„ä½œä¸ºæ ˆä½¿ç”¨</p><p>ç½®é¡¶ä¸æ™®é€šä¼šè¯åˆ†åˆ«åˆ›å»ºç‹¬ç«‹çš„liståˆ†åˆ«ç®¡ç†</p><p>å½“æŸä¸ªlistä¸­æ¥æ”¶åˆ°ç”¨æˆ·æ¶ˆæ¯åï¼Œå°†æ¶ˆæ¯å‘é€æ–¹çš„idä»listçš„ä¸€ä¾§åŠ å…¥listï¼ˆæ­¤å¤„è®¾å®šå·¦ä¾§ï¼‰</p><p>å¤šä¸ªç›¸åŒidå‘å‡ºçš„æ¶ˆæ¯åå¤å…¥æ ˆä¼šå‡ºç°é—®é¢˜ï¼Œåœ¨å…¥æ ˆä¹‹å‰æ— è®ºæ˜¯å¦å…·æœ‰å½“å‰idå¯¹åº”çš„æ¶ˆæ¯ï¼Œå…ˆåˆ é™¤å¯¹åº”id</p><p>æ¨é€æ¶ˆæ¯æ—¶å…ˆæ¨é€ç½®é¡¶ä¼šè¯listï¼Œå†æ¨é€æ™®é€šä¼šè¯listï¼Œæ¨é€å®Œæˆçš„listæ¸…é™¤æ‰€æœ‰æ•°æ®<br>æ¶ˆæ¯çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯å¾®ä¿¡ç”¨æˆ·å¯¹è¯æ•°é‡é‡‡ç”¨è®¡æ•°å™¨çš„æ€æƒ³å¦è¡Œè®°å½•ï¼Œä¼´éšlistæ“ä½œåŒæ­¥æ›´æ–°</p><h4 id="2-14-3-æ•°æ®ç±»å‹æ€»ç»“"><a href="#2-14-3-æ•°æ®ç±»å‹æ€»ç»“" class="headerlink" title="2.14.3  æ•°æ®ç±»å‹æ€»ç»“"></a>2.14.3  æ•°æ®ç±»å‹æ€»ç»“</h4><p>æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨æ•´ä¸ªæ•°æ®ç±»å‹çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»äº†å“ªäº›å†…å®¹ï¼š</p><p>é¦–å…ˆæˆ‘ä»¬äº†è§£äº†ä¸€ä¸‹æ•°æ®ç±»å‹ï¼Œæ¥ä¸‹æ¥é’ˆå¯¹ç€æˆ‘ä»¬è¦å­¦ä¹ çš„æ•°æ®ç±»å‹ï¼Œè¿›è¡Œé€ä¸€è®²è§£äº†<font color='red'>stringã€hashã€listã€set</font>ç­‰ï¼Œæœ€åé€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ€»ç»“äº†ä¸€ä¸‹å‰é¢çš„æ•°æ®ç±»å‹çš„ä½¿ç”¨åœºæ™¯ã€‚</p><h2 id="3-å¸¸ç”¨æŒ‡ä»¤"><a href="#3-å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="3. å¸¸ç”¨æŒ‡ä»¤"></a>3. å¸¸ç”¨æŒ‡ä»¤</h2><p>åœ¨è¿™éƒ¨åˆ†ä¸­å‘¢ï¼Œæˆ‘ä»¬å®¶å­¦ä¹ ä¸¤ä¸ªçŸ¥è¯†ï¼Œç¬¬ä¸€ä¸ªæ˜¯keyçš„å¸¸ç”¨æŒ‡ä»¤ï¼Œç¬¬äºŒä¸ªæ˜¯æ•°æ®åº“çš„å¸¸ç”¨æŒ‡ä»¤ã€‚å’Œå‰é¢æˆ‘ä»¬å­¦æ•°æ®ç±»å‹åšä¸€ä¸‹åŒºåˆ†ï¼Œå‰é¢ä½ å­¦çš„é‚£äº›æŒ‡ä»¤å‘¢ï¼Œéƒ½æ˜¯é’ˆå¯¹æŸä¸€ä¸ªæ•°æ®ç±»å‹æ“ä½œçš„ï¼Œç°åœ¨å­¦çš„éƒ½æ˜¯å¯¹æ‰€æœ‰çš„æ“ä½œçš„ï¼Œæ¥çœ‹ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ Keyçš„æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å…ˆæƒ³ä¸€ä¸‹çš„æ“ä½œæˆ‘ä»¬åº”è¯¥å­¦å“ªäº›ä¸œè¥¿:</p><h3 id="3-1-key-æ“ä½œåˆ†æ"><a href="#3-1-key-æ“ä½œåˆ†æ" class="headerlink" title="3.1  key æ“ä½œåˆ†æ"></a>3.1  key æ“ä½œåˆ†æ</h3><h4 id="3-1-1-keyåº”è¯¥è®¾è®¡å“ªäº›æ“ä½œï¼Ÿ"><a href="#3-1-1-keyåº”è¯¥è®¾è®¡å“ªäº›æ“ä½œï¼Ÿ" class="headerlink" title="3.1.1  keyåº”è¯¥è®¾è®¡å“ªäº›æ“ä½œï¼Ÿ"></a>3.1.1  keyåº”è¯¥è®¾è®¡å“ªäº›æ“ä½œï¼Ÿ</h4><p>keyæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡keyè·å–redisä¸­ä¿å­˜çš„æ•°æ®</p><p>å¯¹äºkeyè‡ªèº«çŠ¶æ€çš„ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚ï¼šåˆ é™¤ï¼Œåˆ¤å®šå­˜åœ¨ï¼Œè·å–ç±»å‹ç­‰</p><p>å¯¹äºkeyæœ‰æ•ˆæ€§æ§åˆ¶ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚ï¼šæœ‰æ•ˆæœŸè®¾å®šï¼Œåˆ¤å®šæ˜¯å¦æœ‰æ•ˆï¼Œæœ‰æ•ˆçŠ¶æ€çš„åˆ‡æ¢ç­‰</p><p>å¯¹äºkeyå¿«é€ŸæŸ¥è¯¢æ“ä½œï¼Œä¾‹å¦‚ï¼šæŒ‰æŒ‡å®šç­–ç•¥æŸ¥è¯¢key</p><h4 id="3-1-2-key-åŸºæœ¬æ“ä½œ"><a href="#3-1-2-key-åŸºæœ¬æ“ä½œ" class="headerlink" title="3.1.2  key åŸºæœ¬æ“ä½œ"></a>3.1.2  key åŸºæœ¬æ“ä½œ</h4><p>åˆ é™¤æŒ‡å®škey</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">del key<br></code></pre></td></tr></table></figure><p>è·å–keyæ˜¯å¦å­˜åœ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">exists key<br></code></pre></td></tr></table></figure><p>è·å–keyçš„ç±»å‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> key<br></code></pre></td></tr></table></figure><p>3.1.3  æ‹“å±•æ“ä½œ</p><p>æ’åº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sort</span><br></code></pre></td></tr></table></figure><p>æ”¹å</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">rename key newkey<br>renamenx key newkey<br></code></pre></td></tr></table></figure><h4 id="3-1-3-key-æ‰©å±•æ“ä½œï¼ˆæ—¶æ•ˆæ€§æ§åˆ¶ï¼‰"><a href="#3-1-3-key-æ‰©å±•æ“ä½œï¼ˆæ—¶æ•ˆæ€§æ§åˆ¶ï¼‰" class="headerlink" title="3.1.3  key æ‰©å±•æ“ä½œï¼ˆæ—¶æ•ˆæ€§æ§åˆ¶ï¼‰"></a>3.1.3  key æ‰©å±•æ“ä½œï¼ˆæ—¶æ•ˆæ€§æ§åˆ¶ï¼‰</h4><p>ä¸ºæŒ‡å®škeyè®¾ç½®æœ‰æ•ˆæœŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">expire key seconds<br>pexpire key milliseconds<br>expireat key timestamp<br>pexpireat key milliseconds-timestamp<br></code></pre></td></tr></table></figure><p>è·å–keyçš„æœ‰æ•ˆæ—¶é—´</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">ttl key   -1æ°¸ä¹…æœ‰æ•ˆ<br>pttl key<br></code></pre></td></tr></table></figure><p>åˆ‡æ¢keyä»æ—¶æ•ˆæ€§è½¬æ¢ä¸ºæ°¸ä¹…æ€§</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">persist key<br></code></pre></td></tr></table></figure><h4 id="3-1-4-key-æ‰©å±•æ“ä½œï¼ˆæŸ¥è¯¢æ¨¡å¼ï¼‰"><a href="#3-1-4-key-æ‰©å±•æ“ä½œï¼ˆæŸ¥è¯¢æ¨¡å¼ï¼‰" class="headerlink" title="3.1.4  key æ‰©å±•æ“ä½œï¼ˆæŸ¥è¯¢æ¨¡å¼ï¼‰"></a>3.1.4  key æ‰©å±•æ“ä½œï¼ˆæŸ¥è¯¢æ¨¡å¼ï¼‰</h4><p>æŸ¥è¯¢key</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">keys pattern<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢æ¨¡å¼è§„åˆ™</p><p>*åŒ¹é…ä»»æ„æ•°é‡çš„ä»»æ„ç¬¦å·      ?    é…åˆä¸€ä¸ªä»»æ„ç¬¦å·    []    åŒ¹é…ä¸€ä¸ªæŒ‡å®šç¬¦å·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">keys *  keys    æŸ¥è¯¢æ‰€æœ‰<br>it*  keys       æŸ¥è¯¢æ‰€æœ‰ä»¥itå¼€å¤´<br>*heima          æŸ¥è¯¢æ‰€æœ‰ä»¥heimaç»“å°¾<br>keys ??heima    æŸ¥è¯¢æ‰€æœ‰å‰é¢ä¸¤ä¸ªå­—ç¬¦ä»»æ„ï¼Œåé¢ä»¥heimaç»“å°¾ æŸ¥è¯¢æ‰€æœ‰ä»¥<br>keys user:?     user:å¼€å¤´ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦ä»»æ„<br>keys u[st]er:1  æŸ¥è¯¢æ‰€æœ‰ä»¥uå¼€å¤´ï¼Œä»¥er:1ç»“å°¾ï¼Œä¸­é—´åŒ…å«ä¸€ä¸ªå­—æ¯ï¼Œsæˆ–t<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/31/sVu8XNiMvZkJcIU.png" alt="image-20220307195729486"></p><h3 id="3-2-æ•°æ®åº“æŒ‡ä»¤"><a href="#3-2-æ•°æ®åº“æŒ‡ä»¤" class="headerlink" title="3.2  æ•°æ®åº“æŒ‡ä»¤"></a>3.2  æ•°æ®åº“æŒ‡ä»¤</h3><h4 id="3-2-1-key-çš„é‡å¤é—®é¢˜"><a href="#3-2-1-key-çš„é‡å¤é—®é¢˜" class="headerlink" title="3.2.1  key çš„é‡å¤é—®é¢˜"></a>3.2.1  key çš„é‡å¤é—®é¢˜</h4><p>åœ¨è¿™ä¸ªåœ°æ–¹æˆ‘ä»¬æ¥è®²ä¸€ä¸‹æ•°æ®åº“çš„å¸¸ç”¨æŒ‡ä»¤ï¼Œåœ¨è®²è¿™ä¸ªä¸œè¥¿ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š</p><p>å‡å¦‚è¯´ä½ ä»¬åä¸ªäººåŒæ—¶æ“ä½œredisï¼Œä¼šä¸ä¼šå‡ºç°keyåå­—å‘½åå†²çªçš„é—®é¢˜ï¼Ÿ</p><p>ä¸€å®šä¼šï¼Œä¸ºä»€ä¹ˆ?å› ä¸ºä½ çš„keyæ˜¯ç”±ç¨‹åºè€Œå®šä¹‰çš„ã€‚ä½ æƒ³å†™ä»€ä¹ˆå†™ä»€ä¹ˆï¼Œé‚£åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å¤§å®¶éƒ½åœ¨ä¸åœçš„åŠ ï¼Œæ—©æ™šæœ‰ä¸€å¤©ä»–ä¼šå†²çªçš„ã€‚</p><p>redisåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¼´éšç€æ“ä½œæ•°æ®é‡çš„å¢åŠ ï¼Œä¼šå‡ºç°å¤§é‡çš„æ•°æ®ä»¥åŠå¯¹åº”çš„keyã€‚</p><p>é‚£è¿™ä¸ªé—®é¢˜æˆ‘ä»¬è¦ä¸è¦è§£å†³ï¼Ÿè¦ï¼æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæˆ‘ä»¬æœ€å¥½æŠŠæ•°æ®è¿›è¡Œä¸€ä¸ªåˆ†ç±»ï¼Œé™¤äº†å‘½åè§„èŒƒæˆ‘ä»¬åšç»Ÿä¸€ä»¥å¤–ï¼Œå¦‚æœè¿˜èƒ½æŠŠå®ƒåˆ†å¼€ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å†²çªçš„æœºç‡å°±ä¼šå°ä¸€äº›äº†ï¼Œè¿™å°±æ˜¯å’±ä»¬ä¸‹é¢è¦è¯´çš„è§£å†³æ–¹æ¡ˆï¼</p><h4 id="3-2-2-è§£å†³æ–¹æ¡ˆ"><a href="#3-2-2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="3.2.2  è§£å†³æ–¹æ¡ˆ"></a>3.2.2  è§£å†³æ–¹æ¡ˆ</h4><p>redisä¸ºæ¯ä¸ªæœåŠ¡æä¾›æœ‰16ä¸ªæ•°æ®åº“ï¼Œç¼–å·ä»0åˆ°15</p><p>æ¯ä¸ªæ•°æ®åº“ä¹‹é—´çš„æ•°æ®ç›¸äº’ç‹¬ç«‹</p><p><img src="https://s2.loli.net/2022/03/31/WyGNRUeBpo4QM8P.png"></p><p>åœ¨å¯¹åº”çš„æ•°æ®åº“ä¸­åˆ’å‡ºä¸€å—åŒºåŸŸï¼Œè¯´ä»–å°±æ˜¯å‡ ï¼Œä½ å°±ç”¨å‡ é‚£å—ï¼ŒåŒæ—¶ï¼Œå…¶ä»–çš„è¿™äº›éƒ½å¯ä»¥è¿›è¡Œå®šä¹‰ï¼Œä¸€å…±æ˜¯16ä¸ªï¼Œè¿™é‡Œè¾¹éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œä»–ä»¬è¿™16ä¸ªå…±ç”¨redisçš„å†…å­˜ã€‚æ²¡æœ‰è¯´è°å¤§è°å°ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°å­—åªæ˜¯ä»£è¡¨äº†ä¸€å—å„¿åŒºåŸŸï¼ŒåŒºåŸŸå…·ä½“å¤šå¤§æœªçŸ¥ã€‚è¿™æ˜¯æ•°æ®åº“çš„ä¸€ä¸ªåˆ†åŒºçš„ä¸€ä¸ªç­–ç•¥ï¼</p><h4 id="3-2-3-æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ"><a href="#3-2-3-æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="3.2.3   æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ"></a>3.2.3   æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ</h4><p>åˆ‡æ¢æ•°æ®åº“</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">select</span> <span class="hljs-keyword">index</span><br></code></pre></td></tr></table></figure><p>å…¶ä»–æ“ä½œ</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-built_in">ping</span><br></code></pre></td></tr></table></figure><h4 id="3-2-4-æ•°æ®åº“æ‰©å±•æ“ä½œ"><a href="#3-2-4-æ•°æ®åº“æ‰©å±•æ“ä½œ" class="headerlink" title="3.2.4  æ•°æ®åº“æ‰©å±•æ“ä½œ"></a>3.2.4  æ•°æ®åº“æ‰©å±•æ“ä½œ</h4><p>æ•°æ®ç§»åŠ¨</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">move</span> key <span class="hljs-keyword">db</span><br></code></pre></td></tr></table></figure><p>æ•°æ®æ€»é‡</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">dbsize</span><br></code></pre></td></tr></table></figure><p>æ•°æ®æ¸…é™¤</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">flushdb  </span><br><span class="hljs-attribute">flushall</span><br></code></pre></td></tr></table></figure><h2 id="4-Jedis"><a href="#4-Jedis" class="headerlink" title="4. Jedis"></a>4. Jedis</h2><p>åœ¨å­¦ä¹ å®Œredisåï¼Œæˆ‘ä»¬ç°åœ¨å°±è¦ç”¨Javaæ¥è¿æ¥redisäº†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„è¿™ä¸€ç« è¦å­¦çš„Jedisäº†ã€‚åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸»è¦è®²è§£ä»¥ä¸‹3ä¸ªå†…å®¹ï¼š</p><p>HelloWorldï¼ˆJedisç‰ˆï¼‰</p><p>Jedisç®€æ˜“å·¥å…·ç±»å¼€å‘</p><p>å¯è§†åŒ–å®¢æˆ·ç«¯</p><h3 id="4-1-Jedisç®€ä»‹"><a href="#4-1-Jedisç®€ä»‹" class="headerlink" title="4.1  Jedisç®€ä»‹"></a>4.1  Jedisç®€ä»‹</h3><h4 id="4-1-1-ç¼–ç¨‹è¯­è¨€ä¸redis"><a href="#4-1-1-ç¼–ç¨‹è¯­è¨€ä¸redis" class="headerlink" title="4.1.1  ç¼–ç¨‹è¯­è¨€ä¸redis"></a>4.1.1  ç¼–ç¨‹è¯­è¨€ä¸redis</h4><p><img src="https://s2.loli.net/2022/03/31/IiAzZdebmskWYGr.png"></p><p>å¯¹äºæˆ‘ä»¬ç°åœ¨çš„æ•°æ®æ¥è¯´ï¼Œå®ƒæ˜¯åœ¨æˆ‘ä»¬çš„redisä¸­ï¼Œè€Œæœ€ç»ˆæˆ‘ä»¬æ˜¯è¦åšç¨‹åºã€‚é‚£ä¹ˆç¨‹åºå°±è¦å’Œæˆ‘ä»¬çš„redisè¿›è¡Œè¿æ¥ã€‚å¹²ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿä¸¤ä»¶äº‹ï¼šç¨‹åºä¸­æœ‰æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æŠŠè¿™äº›æ•°æ®å…¨éƒ¨äº¤ç»™redisç®¡ç†ã€‚åŒæ—¶ï¼Œredisä¸­çš„æ•°æ®è¿˜èƒ½å–å‡ºæ¥ï¼Œå›åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ã€‚é‚£åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œåœ¨Javaä¸redisä¹‹é—´æ‰“äº¤é“çš„è¿™ä¸ªä¸œè¥¿å°±å«åšJedis.ç®€å•è¯´ï¼ŒJediså°±æ˜¯æä¾›äº†Javaä¸redisçš„è¿æ¥æœåŠ¡çš„ï¼Œé‡Œè¾¹æœ‰å„ç§å„æ ·çš„APIæ¥å£ï¼Œä½ å¯ä»¥å»è°ƒç”¨å®ƒã€‚</p><p>é™¤äº†Jediså¤–ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–çš„è¿™ç§è¿æ¥æœåŠ¡å‘¢ï¼Ÿå…¶å®è¿˜æœ‰å¾ˆå¤šï¼Œäº†è§£ä¸€ä¸‹ï¼š</p><p>Javaè¯­è¨€è¿æ¥redisæœåŠ¡ Jedisï¼ˆSpringDataã€Redis ã€ Lettuceï¼‰</p><p>å…¶å®ƒè¯­è¨€ï¼šC ã€C++ ã€C# ã€Erlangã€Lua ã€Objective-C ã€Perl ã€PHP ã€Python ã€Ruby ã€Scala</p><h4 id="4-1-2-å‡†å¤‡å·¥ä½œ"><a href="#4-1-2-å‡†å¤‡å·¥ä½œ" class="headerlink" title="4.1.2  å‡†å¤‡å·¥ä½œ"></a>4.1.2  å‡†å¤‡å·¥ä½œ</h4><p>(1)jaråŒ…å¯¼å…¥</p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://mvnrepository.com/artifact/redis.clients/jedis">https://mvnrepository.com/artifact/redis.clients/jedis</a></p><p>åŸºäºmaven</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>(2)å®¢æˆ·ç«¯è¿æ¥redis</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stata">å…³é—­æœåŠ¡<br><br>redis-<span class="hljs-keyword">cli</span> shutdown<br><br>\##å¸¦æœ‰å¯†ç çš„rediså…³é—­<br><br>redis-<span class="hljs-keyword">cli</span> -a lvniankeji shutdown<br><br>å¦‚æœéé»˜è®¤ç«¯å£ï¼Œå¯æŒ‡å®šç«¯å£:<br><br>redis-<span class="hljs-keyword">cli</span> -p 6379 shutdown<br><br>å¯åŠ¨å‘½ä»¤è¿›å…¥rediså<br><br>redis-server <span class="hljs-keyword">conf</span>/redis.<span class="hljs-keyword">conf</span><br></code></pre></td></tr></table></figure><p>è¿æ¥redis</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">Jedis jedis</span> = new Jedis(<span class="hljs-string">&quot;localhost&quot;</span>, 6379);<br></code></pre></td></tr></table></figure><p>æ“ä½œredis</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">jedis.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;itheima&quot;</span>);  jedis.<span class="hljs-built_in">get</span>(<span class="hljs-string">&quot;name&quot;</span>);<br></code></pre></td></tr></table></figure><p>å…³é—­redisè¿æ¥</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">jedis.close()<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>APIæ–‡æ¡£</p><p><a href="http://xetorthio.github.io/jedis/">http://xetorthio.github.io/jedis/</a></p><h4 id="4-1-3-ä»£ç å®ç°"><a href="#4-1-3-ä»£ç å®ç°" class="headerlink" title="4.1.3 ä»£ç å®ç°"></a>4.1.3 ä»£ç å®ç°</h4><p>åˆ›å»ºï¼šcom.itheima.JedisTest</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JedisTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1.è·å–è¿æ¥å¯¹è±¡</span><br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">&quot;192.168.40.130&quot;</span>,<span class="hljs-number">6379</span>);<br>        <span class="hljs-comment">//2.æ‰§è¡Œæ“ä½œ</span><br>        jedis.set(<span class="hljs-string">&quot;age&quot;</span>,<span class="hljs-string">&quot;39&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">hello</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">&quot;hello&quot;</span>);<br>        System.out.println(hello);<br>        jedis.lpush(<span class="hljs-string">&quot;list1&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-string">&quot;c&quot;</span>,<span class="hljs-string">&quot;d&quot;</span>);<br>        List&lt;String&gt; list1 = jedis.lrange(<span class="hljs-string">&quot;list1&quot;</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span> (String s:list1 ) &#123;<br>            System.out.println(s);<br>        &#125;<br>        jedis.sadd(<span class="hljs-string">&quot;set1&quot;</span>,<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;def&quot;</span>,<span class="hljs-string">&quot;poi&quot;</span>,<span class="hljs-string">&quot;cba&quot;</span>);<br>        <span class="hljs-type">Long</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> jedis.scard(<span class="hljs-string">&quot;set1&quot;</span>);<br>        System.out.println(len);<br>        <span class="hljs-comment">//3.å…³é—­è¿æ¥</span><br>        jedis.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-2-Jedisç®€æ˜“å·¥å…·ç±»å¼€å‘"><a href="#4-2-Jedisç®€æ˜“å·¥å…·ç±»å¼€å‘" class="headerlink" title="4.2  Jedisç®€æ˜“å·¥å…·ç±»å¼€å‘"></a>4.2  Jedisç®€æ˜“å·¥å…·ç±»å¼€å‘</h3><p>å‰é¢æˆ‘ä»¬åšçš„ç¨‹åºè¿˜æ˜¯æœ‰ç‚¹å„¿å°é—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬çš„Jediså¯¹è±¡çš„ç®¡ç†æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ï¼ŒçœŸå®ä¼ä¸šå¼€å‘ä¸­æ˜¯ä¸å¯èƒ½è®©ä½ å»newä¸€ä¸ªçš„ï¼Œé‚£æ¥ä¸‹æ¥å’±ä»¬å°±è¦åšä¸€ä¸ªå·¥å…·ç±»ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åšä¸€ä¸ªåˆ›å»ºJedisçš„è¿™æ ·çš„ä¸€ä¸ªå·¥å…·ã€‚</p><h4 id="4-2-1-åŸºäºè¿æ¥æ± è·å–è¿æ¥"><a href="#4-2-1-åŸºäºè¿æ¥æ± è·å–è¿æ¥" class="headerlink" title="4.2.1  åŸºäºè¿æ¥æ± è·å–è¿æ¥"></a>4.2.1  åŸºäºè¿æ¥æ± è·å–è¿æ¥</h4><p>JedisPoolï¼šJedisæä¾›çš„è¿æ¥æ± æŠ€æœ¯ </p><p>poolConfig:è¿æ¥æ± é…ç½®å¯¹è±¡ </p><p>host:redisæœåŠ¡åœ°å€</p><p>port:redisæœåŠ¡ç«¯å£å·</p><p>JedisPoolçš„æ„é€ å™¨å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">JedisPool</span><span class="hljs-params">(GenericObjectPoolConfig poolConfig, String host, <span class="hljs-type">int</span> port)</span> &#123;<br><span class="hljs-built_in">this</span>(poolConfig, host, port, <span class="hljs-number">2000</span>, (String)<span class="hljs-literal">null</span>, <span class="hljs-number">0</span>, (String)<span class="hljs-literal">null</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-2-å°è£…è¿æ¥å‚æ•°"><a href="#4-2-2-å°è£…è¿æ¥å‚æ•°" class="headerlink" title="4.2.2  å°è£…è¿æ¥å‚æ•°"></a>4.2.2  å°è£…è¿æ¥å‚æ•°</h4><p>åˆ›å»ºjedisçš„é…ç½®æ–‡ä»¶ï¼šjedis.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">jedis.host</span>=<span class="hljs-string">192.168.40.130  </span><br><span class="hljs-attr">jedis.port</span>=<span class="hljs-string">6379  </span><br><span class="hljs-attr">jedis.maxTotal</span>=<span class="hljs-string">50  </span><br><span class="hljs-attr">jedis.maxIdle</span>=<span class="hljs-string">10</span><br></code></pre></td></tr></table></figure><h4 id="4-2-3-åŠ è½½é…ç½®ä¿¡æ¯"><a href="#4-2-3-åŠ è½½é…ç½®ä¿¡æ¯" class="headerlink" title="4.2.3  åŠ è½½é…ç½®ä¿¡æ¯"></a>4.2.3  åŠ è½½é…ç½®ä¿¡æ¯</h4><p> åˆ›å»ºJedisUtilsï¼šcom.itheima.util.JedisUtilsï¼Œä½¿ç”¨é™æ€ä»£ç å—åˆå§‹åŒ–èµ„æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JedisUtils</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> maxTotal;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> maxIdel;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String host;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> port;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> JedisPoolConfig jpc;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> JedisPool jp;<br><br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">bundle</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;redis&quot;</span>);<br>        maxTotal = Integer.parseInt(bundle.getString(<span class="hljs-string">&quot;redis.maxTotal&quot;</span>));<br>        maxIdel = Integer.parseInt(bundle.getString(<span class="hljs-string">&quot;redis.maxIdel&quot;</span>));<br>        host = bundle.getString(<span class="hljs-string">&quot;redis.host&quot;</span>);<br>        port = Integer.parseInt(bundle.getString(<span class="hljs-string">&quot;redis.port&quot;</span>));<br>        <span class="hljs-comment">//Jedisè¿æ¥æ± é…ç½®</span><br>        jpc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPoolConfig</span>();<br>        jpc.setMaxTotal(maxTotal);<br>        jpc.setMaxIdle(maxIdel);<br>        jp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(jpc,host,port);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-4-è·å–è¿æ¥"><a href="#4-2-4-è·å–è¿æ¥" class="headerlink" title="4.2.4  è·å–è¿æ¥"></a>4.2.4  è·å–è¿æ¥</h4><p> å¯¹å¤–è®¿é—®æ¥å£ï¼Œæä¾›jedisè¿æ¥å¯¹è±¡ï¼Œè¿æ¥ä»è¿æ¥æ± è·å–ï¼Œåœ¨JedisUtilsä¸­æ·»åŠ ä¸€ä¸ªè·å–jedisçš„æ–¹æ³•ï¼šgetJedis</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Jedis <span class="hljs-title function_">getJedis</span><span class="hljs-params">()</span>&#123;<br><span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br><span class="hljs-keyword">return</span> jedis;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-3-å¯è§†åŒ–å®¢æˆ·ç«¯"><a href="#4-3-å¯è§†åŒ–å®¢æˆ·ç«¯" class="headerlink" title="4.3  å¯è§†åŒ–å®¢æˆ·ç«¯"></a>4.3  å¯è§†åŒ–å®¢æˆ·ç«¯</h3><p>4.3.1  Redis Desktop Manager</p><p><img src="https://s2.loli.net/2022/03/31/nyqo6AR4E7jQTNc.png"></p><h2 id="5-æŒä¹…åŒ–"><a href="#5-æŒä¹…åŒ–" class="headerlink" title="5. æŒä¹…åŒ–"></a>5. æŒä¹…åŒ–</h2><p>ä¸‹é¢å‘¢ï¼Œè¿›å…¥åˆ°æŒä¹…åŒ–çš„å­¦ä¹ .è¿™éƒ¨åˆ†å†…å®¹ç†è§£çš„ä¸œè¥¿å¤šï¼Œæ“ä½œçš„ä¸œè¥¿å°‘ã€‚åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è®²è§£å››ä¸ªä¸œè¥¿ï¼š</p><p>æŒä¹…åŒ–ç®€ä»‹</p><p>RDB</p><p>AOF</p><p>RDBä¸AOFåŒºåˆ«</p><h3 id="5-1-æŒä¹…åŒ–ç®€ä»‹"><a href="#5-1-æŒä¹…åŒ–ç®€ä»‹" class="headerlink" title="5.1  æŒä¹…åŒ–ç®€ä»‹"></a>5.1  æŒä¹…åŒ–ç®€ä»‹</h3><h4 id="5-1-1-åœºæ™¯-æ„å¤–æ–­ç”µ"><a href="#5-1-1-åœºæ™¯-æ„å¤–æ–­ç”µ" class="headerlink" title="5.1.1  åœºæ™¯-æ„å¤–æ–­ç”µ"></a>5.1.1  åœºæ™¯-æ„å¤–æ–­ç”µ</h4><p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰é‡è§è¿‡ï¼Œå°±æ˜¯æ­£å·¥ä½œçš„æ—¶å€™åœç”µäº†ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯ç¬”è®°æœ¬ç”µè„‘è¿˜å¥½ï¼Œä½ æœ‰ç”µæ± ï¼Œä½†å¦‚æœä½ ç”¨çš„æ˜¯å°å¼æœºå‘¢ï¼Œé‚£ææ€•å°±æ¯”è¾ƒç¾éš¾äº†ï¼Œå‡å¦‚ä½ ç°åœ¨æ­£åœ¨å†™ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ–‡æ¡£ï¼Œå¦‚æœä½ è¦ä½¿ç”¨çš„æ˜¯wordï¼Œè¿™ç§åŠå…¬è‡ªåŠ¨åŒ–è½¯ä»¶çš„è¯ï¼Œä»–ä¸€æ—¦é‡åˆ°åœç”µï¼Œå…¶å®ä½ ä¸ç”¨æ‹…å¿ƒï¼Œå› ä¸ºå®ƒä¼šç»™ä½ ç”Ÿæˆä¸€äº›å…¶ä»–çš„æ–‡ä»¶ã€‚</p><p><img src="https://s2.loli.net/2022/03/31/R6JyQoOAPshTkrG.png"></p><p>å…¶å®ä»–ä»¬éƒ½åœ¨åšä¸€ä»¶äº‹å„¿ï¼Œå¸®ä½ è‡ªåŠ¨æ¢å¤ï¼Œæœ‰äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å‰é¢çš„ä¸œè¥¿å°±ä¸å†ä¸¢äº†ã€‚é‚£ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ¢å¤å‘¢ï¼Ÿä½ è¦å…ˆäº†è§£ä»–çš„æ•´ä¸ªè¿‡ç¨‹ã€‚</p><p>æˆ‘ä»¬è¯´è‡ªåŠ¨æ¢å¤ï¼Œå…¶å®åŸºäºçš„ä¸€ä¸ªå‰æå°±æ˜¯ä»–æå‰æŠŠä½ çš„æ•°æ®ç»™å­˜èµ·æ¥äº†ã€‚ä½ å¹³å¸¸æ“ä½œçš„æ‰€æœ‰ä¿¡æ¯éƒ½æ˜¯åœ¨å†…å­˜ä¸­çš„ï¼Œè€Œæˆ‘ä»¬çœŸæ­£çš„ä¿¡æ¯æ˜¯ä¿å­˜åœ¨ç¡¬ç›˜ä¸­çš„ï¼Œå†…å­˜ä¸­çš„ä¿¡æ¯æ–­ç”µä»¥åå°±æ¶ˆå¤±äº†ï¼Œç¡¬ç›˜ä¸­çš„ä¿¡æ¯æ–­ç”µä»¥åè¿˜å¯ä»¥ä¿ç•™ä¸‹æ¥ï¼</p><p><img src="https://s2.loli.net/2022/03/31/6Dron2M17pXlHym.png"></p><p>æˆ‘ä»¬å°†æ–‡ä»¶ç”±å†…å­˜ä¸­ä¿å­˜åˆ°ç¡¬ç›˜ä¸­çš„è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å«åšæ•°æ®ä¿å­˜ï¼Œä¹Ÿå°±å«åšæŒä¹…åŒ–ã€‚ä½†æ˜¯æŠŠå®ƒä¿å­˜ä¸‹æ¥ä¸æ˜¯ä½ çš„ç›®çš„ï¼Œæœ€ç»ˆä½ è¿˜è¦æŠŠå®ƒå†è¯»å–å‡ºæ¥ï¼Œå®ƒåŠ è½½åˆ°å†…å­˜ä¸­è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å«åšæ•°æ®æ¢å¤ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„wordä¸ºä»€ä¹ˆæ–­ç”µä»¥åè¿˜èƒ½å¤Ÿç»™ä½ ä¿ç•™æ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ‰§è¡Œäº†ä¸€ä¸ªè‡ªåŠ¨å¤‡ä»½çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡è‡ªåŠ¨çš„å½¢å¼ï¼ŒæŠŠä½ çš„æ•°æ®å­˜å‚¨èµ·æ¥ï¼Œé‚£ä¹ˆæœ‰äº†è¿™ç§å½¢å¼ä»¥åï¼Œæˆ‘ä»¬çš„æ•°æ®å°±å¯ä»¥ç”±å†…å­˜åˆ°ç¡¬ç›˜ä¸Šå®ç°ä¿å­˜ã€‚</p><h4 id="5-1-2-ä»€ä¹ˆæ˜¯æŒä¹…åŒ–"><a href="#5-1-2-ä»€ä¹ˆæ˜¯æŒä¹…åŒ–" class="headerlink" title="5.1.2  ä»€ä¹ˆæ˜¯æŒä¹…åŒ–"></a>5.1.2  ä»€ä¹ˆæ˜¯æŒä¹…åŒ–</h4><p>(1)ä»€ä¹ˆæ˜¯æŒä¹…åŒ–</p><p>åˆ©ç”¨æ°¸ä¹…æ€§å­˜å‚¨ä»‹è´¨å°†æ•°æ®è¿›è¡Œä¿å­˜ï¼Œåœ¨ç‰¹å®šçš„æ—¶é—´å°†ä¿å­˜çš„æ•°æ®è¿›è¡Œæ¢å¤çš„å·¥ä½œæœºåˆ¶ç§°ä¸ºæŒä¹…åŒ– ã€‚</p><p>æŒä¹…åŒ–ç”¨äºé˜²æ­¢æ•°æ®çš„æ„å¤–ä¸¢å¤±ï¼Œç¡®ä¿æ•°æ®å®‰å…¨æ€§ã€‚</p><p>(2)æŒä¹…åŒ–è¿‡ç¨‹ä¿å­˜ä»€ä¹ˆï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“ä¸€ç‚¹ï¼Œè®¡ç®—æœºä¸­çš„æ•°æ®å…¨éƒ¨éƒ½æ˜¯äºŒè¿›åˆ¶ï¼Œå¦‚æœç°åœ¨æˆ‘è¦ä½ ç»™æˆ‘ä¿å­˜ä¸€ç»„æ•°æ®çš„è¯ï¼Œä½ æœ‰ä»€ä¹ˆæ ·çš„æ–¹å¼å‘¢ï¼Œå…¶å®æœ€ç®€å•çš„å°±æ˜¯ç°åœ¨é•¿ä»€ä¹ˆæ ·ï¼Œæˆ‘å°±è®°ä¸‹æ¥å°±è¡Œäº†ï¼Œé‚£ä¹ˆè¿™ç§æ˜¯è®°å½•çº¯ç²¹çš„æ•°æ®ï¼Œä¹Ÿå«åšå¿«ç…§å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯å®ƒä¿å­˜çš„æ˜¯æŸä¸€æ—¶åˆ»çš„æ•°æ®çŠ¶æ€ã€‚</p><p>è¿˜æœ‰ä¸€ç§å½¢å¼ï¼Œå®ƒä¸è®°å½•ä½ çš„æ•°æ®ï¼Œå®ƒè®°å½•ä½ æ‰€æœ‰çš„æ“ä½œè¿‡ç¨‹ï¼Œæ¯”å¦‚è¯´å¤§å®¶ç”¨ideaçš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰é‡åˆ°è¿‡å†™é”™äº†ctrl+zæ’¤é”€ï¼Œç„¶åctrl+yè¿˜èƒ½æ¢å¤ï¼Œè¿™ä¸ªåœ°æ–¹å®ƒä¹Ÿæ˜¯åœ¨è®°å½•ï¼Œä½†æ˜¯è®°å½•çš„æ˜¯ä½ æ‰€æœ‰çš„æ“ä½œè¿‡ç¨‹ï¼Œé‚£æˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œæ“ä½œè¿‡ç¨‹ï¼Œæˆ‘éƒ½ç»™ä½ ç•™ä¸‹æ¥äº†ï¼Œä½ è¯´æ•°æ®è¿˜ä¼šä¸¢å—ï¼Ÿè‚¯å®šä¸ä¼šä¸¢ï¼Œå› ä¸ºä½ æ‰€æœ‰çš„æ“ä½œè¿‡ç¨‹æˆ‘éƒ½ä¿å­˜äº†ã€‚è¿™ç§ä¿å­˜æ“ä½œè¿‡ç¨‹çš„å­˜å‚¨ï¼Œç”¨ä¸“ä¸šæœ¯è¯­æ¥è¯´å¯ä»¥è¯´æ˜¯æ—¥å¿—ï¼Œè¿™æ˜¯ä¸¤ç§ä¸åŒçš„ä¿å­˜æ•°æ®çš„å½¢å¼å•Šã€‚</p><p><img src="https://s2.loli.net/2022/03/31/yfdkbh7D5ME43lC.png"></p><p>æ€»ç»“ä¸€ä¸‹ï¼š</p><p>ç¬¬ä¸€ç§ï¼šå°†å½“å‰æ•°æ®çŠ¶æ€è¿›è¡Œä¿å­˜ï¼Œå¿«ç…§å½¢å¼ï¼Œå­˜å‚¨æ•°æ®ç»“æœï¼Œå­˜å‚¨æ ¼å¼ç®€å•ï¼Œå…³æ³¨ç‚¹åœ¨æ•°æ®ã€‚</p><p>ç¬¬äºŒç§ï¼šå°†æ•°æ®çš„æ“ä½œè¿‡ç¨‹è¿›è¡Œä¿å­˜ï¼Œæ—¥å¿—å½¢å¼ï¼Œå­˜å‚¨æ“ä½œè¿‡ç¨‹ï¼Œå­˜å‚¨æ ¼å¼å¤æ‚ï¼Œå…³æ³¨ç‚¹åœ¨æ•°æ®çš„æ“ä½œè¿‡ç¨‹ã€‚</p><h3 id="5-2-RDB"><a href="#5-2-RDB" class="headerlink" title="5.2  RDB"></a>5.2  RDB</h3><h4 id="5-2-1-saveæŒ‡ä»¤"><a href="#5-2-1-saveæŒ‡ä»¤" class="headerlink" title="5.2.1  saveæŒ‡ä»¤"></a>5.2.1  saveæŒ‡ä»¤</h4><p>æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡ä¿å­˜æ“ä½œ</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">save</span><br></code></pre></td></tr></table></figure><p><strong>saveæŒ‡ä»¤ç›¸å…³é…ç½®</strong></p><p>è®¾ç½®æœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé»˜è®¤å€¼ä¸º dump.rdbï¼Œé€šå¸¸è®¾ç½®ä¸ºdump-ç«¯å£å·.rdb</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">dbfilename filename</span><br></code></pre></td></tr></table></figure><p>è®¾ç½®å­˜å‚¨.rdbæ–‡ä»¶çš„è·¯å¾„ï¼Œé€šå¸¸è®¾ç½®æˆå­˜å‚¨ç©ºé—´è¾ƒå¤§çš„ç›®å½•ä¸­ï¼Œç›®å½•åç§°data</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">dir</span> <span class="hljs-built_in">path</span><br></code></pre></td></tr></table></figure><p>è®¾ç½®å­˜å‚¨è‡³æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦å‹ç¼©æ•°æ®ï¼Œé»˜è®¤yesï¼Œè®¾ç½®ä¸ºnoï¼ŒèŠ‚çœ CPU è¿è¡Œæ—¶é—´ï¼Œä½†å­˜å‚¨æ–‡ä»¶å˜å¤§</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rdbcompression</span> <span class="hljs-literal">yes</span>|<span class="hljs-literal">no</span><br></code></pre></td></tr></table></figure><p>è®¾ç½®è¯»å†™æ–‡ä»¶è¿‡ç¨‹æ˜¯å¦è¿›è¡ŒRDBæ ¼å¼æ ¡éªŒï¼Œé»˜è®¤yesï¼Œè®¾ç½®ä¸ºnoï¼ŒèŠ‚çº¦è¯»å†™10%æ—¶é—´æ¶ˆè€—ï¼Œå•å­˜åœ¨æ•°æ®æŸåçš„é£é™©</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">rdbchecksum</span> <span class="hljs-literal">yes</span>|<span class="hljs-literal">no</span><br></code></pre></td></tr></table></figure><p><strong>saveæŒ‡ä»¤å·¥ä½œåŸç†</strong></p><p><img src="https://s2.loli.net/2022/03/31/tLHrMNkITsjR8zw.png"></p><p><img src="https://s2.loli.net/2022/03/31/UZBE6kGnMdeWsta.png"></p><p>éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œæ¥çœ‹ä¸€ä¸‹ï¼Œç°åœ¨æœ‰å››ä¸ªå®¢æˆ·ç«¯å„è‡ªè¦æ‰§è¡Œä¸€ä¸ªæŒ‡ä»¤ï¼ŒæŠŠè¿™äº›æŒ‡ä»¤å‘é€åˆ°redisæœåŠ¡å™¨åï¼Œä»–ä»¬æ‰§è¡Œæœ‰ä¸€ä¸ªå…ˆåé¡ºåºé—®é¢˜ï¼Œå‡å®šå°±æ˜¯æŒ‰ç…§1234çš„é¡ºåºæ”¾è¿‡å»çš„è¯ï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</p><p>è®°å¾—redisæ˜¯ä¸ªå•çº¿ç¨‹çš„å·¥ä½œæ¨¡å¼ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰€æœ‰çš„å‘½ä»¤éƒ½ä¼šè¿›åˆ°è¿™ä¸ªé˜Ÿåˆ—é‡Œè¾¹ï¼Œåœ¨è¿™å„¿æ’é˜Ÿæ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€ä¸ªæ¶ˆå¤±ä¸€ä¸ªï¼Œå½“æ‰€æœ‰çš„å‘½ä»¤éƒ½æ‰§è¡Œå®Œäº†ï¼ŒOKï¼Œç»“æœè¾¾åˆ°äº†ã€‚</p><p>ä½†æ˜¯å¦‚æœç°åœ¨æˆ‘ä»¬æ‰§è¡Œçš„æ—¶å€™saveæŒ‡ä»¤ä¿å­˜çš„æ•°æ®é‡å¾ˆå¤§ä¼šæ˜¯ä»€ä¹ˆç°è±¡å‘¢ï¼Ÿ</p><p>ä»–ä¼šéå¸¸è€—æ—¶ï¼Œä»¥è‡³äºå½±å“åˆ°å®ƒåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œåé¢çš„æŒ‡ä»¤éƒ½è¦ç­‰ï¼Œæ‰€ä»¥è¯´è¿™ç§æ¨¡å¼æ˜¯ä¸å‹å¥½çš„ï¼Œè¿™æ˜¯saveæŒ‡ä»¤å¯¹åº”çš„ä¸€ä¸ªé—®é¢˜ï¼Œå½“cpuæ‰§è¡Œçš„æ—¶å€™ä¼šé˜»å¡redisæœåŠ¡å™¨ï¼Œç›´åˆ°ä»–æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬ä¸å»ºè®®å¤§å®¶åœ¨çº¿ä¸Šç¯å¢ƒç”¨saveæŒ‡ä»¤ã€‚</p><h4 id="5-2-2-bgsaveæŒ‡ä»¤"><a href="#5-2-2-bgsaveæŒ‡ä»¤" class="headerlink" title="5.2.2  bgsaveæŒ‡ä»¤"></a>5.2.2  bgsaveæŒ‡ä»¤</h4><p>background save</p><p><img src="https://s2.loli.net/2022/03/31/9UFytMAIeKQlVZH.png" alt="image-20220308112041652"></p><p>ä¹‹å‰æˆ‘ä»¬è®²åˆ°äº†å½“saveæŒ‡ä»¤çš„æ•°æ®é‡è¿‡å¤§æ—¶ï¼Œå•çº¿ç¨‹æ‰§è¡Œæ–¹å¼é€ æˆæ•ˆç‡è¿‡ä½ï¼Œé‚£åº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</p><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š<strong>bgsave</strong>æŒ‡ä»¤ï¼Œbgå…¶å®æ˜¯backgroundçš„æ„æ€ï¼Œåå°æ‰§è¡Œçš„æ„æ€</p><p>æ‰‹åŠ¨å¯åŠ¨åå°ä¿å­˜æ“ä½œï¼Œä½†ä¸æ˜¯ç«‹å³æ‰§è¡Œ</p><p><img src="https://s2.loli.net/2022/03/31/FQBz45LhdJpTR6G.png" alt="image-20220308112116483"></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">bgsave</span><br></code></pre></td></tr></table></figure><p><strong>bgsaveæŒ‡ä»¤ç›¸å…³é…ç½®</strong></p><p>åå°å­˜å‚¨è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°é”™è¯¯ç°è±¡ï¼Œæ˜¯å¦åœæ­¢ä¿å­˜æ“ä½œï¼Œé»˜è®¤yes</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">stop-writes-on-bgsave-error</span> <span class="hljs-string">yes|no</span><br></code></pre></td></tr></table></figure><p>å…¶ ä»–</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">dbfilename</span> <span class="hljs-string">filename  </span><br><span class="hljs-attr">dir</span> <span class="hljs-string">path  </span><br><span class="hljs-attr">rdbcompression</span> <span class="hljs-string">yes|no  </span><br><span class="hljs-attr">rdbchecksum</span> <span class="hljs-string">yes|no</span><br></code></pre></td></tr></table></figure><p><strong>bgsaveæŒ‡ä»¤å·¥ä½œåŸç†</strong></p><p><img src="https://s2.loli.net/2022/03/31/mAIiNb8BjgC9K5X.png"></p><p>å½“æ‰§è¡Œbgsaveçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯å‘å‡ºbgsaveæŒ‡ä»¤ç»™åˆ°redisæœåŠ¡å™¨ã€‚æ³¨æ„ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡å™¨é©¬ä¸Šå›ä¸€ä¸ªç»“æœå‘Šè¯‰å®¢æˆ·ç«¯åå°å·²ç»å¼€å§‹äº†ï¼Œä¸æ­¤åŒæ—¶å®ƒä¼šåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œä½¿ç”¨Linuxçš„forkå‡½æ•°åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œè®©è¿™ä¸ªå­è¿›ç¨‹å»æ‰§è¡Œsaveç›¸å…³çš„æ“ä½œï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¸»è¿›ç¨‹ä¸€ç›´åœ¨å¤„ç†æŒ‡ä»¤ï¼Œè€Œå­è¿›ç¨‹åœ¨æ‰§è¡Œåå°çš„ä¿å­˜ï¼Œå®ƒä¼šä¸ä¼šå¹²æ‰°åˆ°ä¸»è¿›ç¨‹çš„æ‰§è¡Œå—ï¼Ÿ</p><p><font color='red'>ç­”æ¡ˆæ˜¯ä¸ä¼šï¼Œæ‰€ä»¥è¯´ä»–æ‰æ˜¯ä¸»æµæ–¹æ¡ˆ</font>ã€‚å­è¿›ç¨‹å¼€å§‹æ‰§è¡Œä¹‹åï¼Œå®ƒå°±ä¼šåˆ›å»ºå•ŠRDBæ–‡ä»¶æŠŠå®ƒå­˜èµ·æ¥ï¼Œæ“ä½œå®Œä»¥åä»–ä¼šæŠŠè¿™ä¸ªç»“æœè¿”å›ï¼Œä¹Ÿå°±æ˜¯è¯´bgsaveçš„è¿‡ç¨‹åˆ†æˆä¸¤ä¸ªè¿‡ç¨‹ï¼Œç¬¬ä¸€ä¸ªæ˜¯æœåŠ¡ç«¯æ‹¿åˆ°æŒ‡ä»¤ç›´æ¥å‘Šè¯‰å®¢æˆ·ç«¯å¼€å§‹æ‰§è¡Œäº†ï¼›å¦å¤–ä¸€ä¸ªè¿‡ç¨‹æ˜¯ä¸€ä¸ªå­è¿›ç¨‹åœ¨å®Œæˆåå°çš„ä¿å­˜æ“ä½œï¼Œæ“ä½œå®Œä»¥åå›ä¸€ä¸ªæ¶ˆæ¯ã€‚</p><h4 id="5-2-3-saveé…ç½®è‡ªåŠ¨æ‰§è¡Œ"><a href="#5-2-3-saveé…ç½®è‡ªåŠ¨æ‰§è¡Œ" class="headerlink" title="5.2.3 saveé…ç½®è‡ªåŠ¨æ‰§è¡Œ"></a>5.2.3 saveé…ç½®è‡ªåŠ¨æ‰§è¡Œ</h4><p>è®¾ç½®<font color='red'>è‡ªåŠ¨æŒä¹…åŒ–</font>çš„æ¡ä»¶ï¼Œæ»¡è¶³é™å®šæ—¶é—´èŒƒå›´å†…keyçš„å˜åŒ–æ•°é‡è¾¾åˆ°æŒ‡å®šæ•°é‡å³è¿›è¡ŒæŒä¹…åŒ–</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">save</span> <span class="hljs-string">second changes</span><br></code></pre></td></tr></table></figure><p>å‚æ•°</p><p>secondï¼šç›‘æ§æ—¶é—´èŒƒå›´</p><p>changesï¼šç›‘æ§keyçš„å˜åŒ–é‡</p><p>èŒƒä¾‹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">save 900 1<br>save 300 10<br>save 60 10000<br></code></pre></td></tr></table></figure><p>å…¶ä»–ç›¸å…³é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs linux">dbfilename filename<br>dir path<br>rdbcompression yes|no<br>rdbchecksum yes|no<br>stop-writes-on-bgsave-error yes|no<br></code></pre></td></tr></table></figure><p><strong>saveé…ç½®å·¥ä½œåŸç†</strong></p><p><img src="https://s2.loli.net/2022/03/31/ZxBd2A1tEi5ar6F.png"></p><h4 id="5-2-4-RDBä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”"><a href="#5-2-4-RDBä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”" class="headerlink" title="5.2.4 RDBä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”"></a>5.2.4 RDBä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”</h4><table><thead><tr><th align="center">æ–¹å¼</th><th align="center">saveæŒ‡ä»¤</th><th align="center">bgsaveæŒ‡ä»¤(å»ºè®®)</th></tr></thead><tbody><tr><td align="center">è¯»å†™</td><td align="center">åŒæ­¥</td><td align="center">å¼‚æ­¥</td></tr><tr><td align="center">é˜»å¡å®¢æˆ·ç«¯æŒ‡ä»¤</td><td align="center">æ˜¯</td><td align="center">å¦</td></tr><tr><td align="center">é¢å¤–å†…å­˜æ¶ˆè€—</td><td align="center">å¦</td><td align="center">æ˜¯</td></tr><tr><td align="center">å¯åŠ¨æ–°è¿›ç¨‹</td><td align="center">å¦</td><td align="center">æ˜¯</td></tr></tbody></table><p><strong>RDBç‰¹æ®Šå¯åŠ¨å½¢å¼</strong> </p><p>æœåŠ¡å™¨è¿è¡Œè¿‡ç¨‹ä¸­é‡å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">debug reload<br></code></pre></td></tr></table></figure><p>å…³é—­æœåŠ¡å™¨æ—¶æŒ‡å®šä¿å­˜æ•°æ® -RDB</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">shutdown save<br></code></pre></td></tr></table></figure><p>å…¨é‡å¤åˆ¶ï¼ˆåœ¨ä¸»ä»å¤åˆ¶ä¸­è¯¦ç»†è®²è§£ï¼‰</p><p><strong>ä»€ä¹ˆæ˜¯RDBï¼Ÿ</strong></p><p>RDBæ–¹å¼çš„æŒä¹…åŒ–æ˜¯<font color='red'>Redisæ•°æ®åº“é»˜è®¤çš„æŒä¹…åŒ–æœºåˆ¶</font>,æ˜¯ä¿è¯redisä¸­æ•°æ®å¯é æ€§çš„æ–¹å¼ä¹‹ä¸€ï¼Œè¿™ç§æ–¹å¼å¯ä»¥æŒ‰ç…§ä¸€å®šçš„æ—¶é—´å‘¨æœŸç­–ç•¥æŠŠå†…å­˜ä¸­çš„æ•°æ®ä»¥å¿«ç…§(äºŒè¿›åˆ¶æ•°æ®)çš„å½¢å¼ä¿å­˜åˆ°ç£ç›˜æ–‡ä»¶ä¸­ï¼Œå³å¿«ç…§å­˜å‚¨ã€‚å¯¹åº”äº§ç”Ÿçš„æ•°æ®æ–‡ä»¶ä¸ºdump.rdbã€‚</p><p><strong>RDBä¼˜ç‚¹ï¼š</strong></p><ul><li>RDBæ˜¯ä¸€ä¸ªç´§å‡‘å‹ç¼©çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå­˜å‚¨æ•ˆç‡è¾ƒé«˜</li><li>RDBå†…éƒ¨å­˜å‚¨çš„æ˜¯redisåœ¨æŸä¸ª<font color='red'>æ—¶é—´ç‚¹</font>çš„æ•°æ®å¿«ç…§ï¼Œéå¸¸é€‚åˆç”¨äºæ•°æ®å¤‡ä»½ï¼Œå…¨é‡å¤åˆ¶ç­‰åœºæ™¯</li><li>RDBæ¢å¤æ•°æ®çš„é€Ÿåº¦è¦æ¯”AOFå¿«å¾ˆå¤š</li><li>åº”ç”¨ï¼šæœåŠ¡å™¨ä¸­æ¯Xå°æ—¶æ‰§è¡Œbgsaveå¤‡ä»½ï¼Œå¹¶å°†RDBæ–‡ä»¶æ‹·è´åˆ°è¿œç¨‹æœºå™¨ä¸­ï¼Œç”¨äºç¾éš¾æ¢å¤ã€‚</li></ul><p><strong>RDBç¼ºç‚¹</strong></p><ul><li>RDBæ–¹å¼æ— è®ºæ˜¯æ‰§è¡ŒæŒ‡ä»¤è¿˜æ˜¯åˆ©ç”¨é…ç½®ï¼Œæ— æ³•åšåˆ°å®æ—¶æŒä¹…åŒ–ï¼Œå…·æœ‰è¾ƒå¤§çš„å¯èƒ½æ€§ä¸¢å¤±æ•°æ®</li><li>bgsaveæŒ‡ä»¤æ¯æ¬¡è¿è¡Œè¦æ‰§è¡Œforkæ“ä½œåˆ›å»ºå­è¿›ç¨‹ï¼Œè¦ç‰ºç‰²æ‰ä¸€äº›æ€§èƒ½</li><li>Redisçš„ä¼—å¤šç‰ˆæœ¬ä¸­æœªè¿›è¡ŒRDBæ–‡ä»¶æ ¼å¼çš„ç‰ˆæœ¬ç»Ÿä¸€ï¼Œæœ‰å¯èƒ½å‡ºç°å„ç‰ˆæœ¬æœåŠ¡ä¹‹é—´æ•°æ®æ ¼å¼æ— æ³•å…¼å®¹ç°è±¡</li></ul><p><img src="https://s2.loli.net/2022/03/31/XyZaWuY6IbTMVS8.png"></p><h3 id="5-3-AOF"><a href="#5-3-AOF" class="headerlink" title="5.3  AOF"></a>5.3  AOF</h3><ul><li>å…¨ç§°ï¼šappend only file</li><li>AOFæ˜¯Redisè¿›è¡ŒæŒä¹…åŒ–çš„å¦å¤–ä¸€ç§æ“ä½œæ–¹å¼</li></ul><p>ä¸ºä»€ä¹ˆè¦æœ‰AOF,è¿™å¾—ä»RDBçš„å­˜å‚¨çš„å¼Šç«¯è¯´èµ·ï¼š</p><ul><li>å­˜å‚¨æ•°æ®é‡è¾ƒå¤§ï¼Œæ•ˆç‡è¾ƒä½ï¼ŒåŸºäºå¿«ç…§æ€æƒ³ï¼Œæ¯æ¬¡è¯»å†™éƒ½æ˜¯å…¨éƒ¨æ•°æ®ï¼Œå½“æ•°æ®é‡å·¨å¤§æ—¶ï¼Œæ•ˆç‡éå¸¸ä½</li><li>å¤§æ•°æ®é‡ä¸‹çš„IOæ€§èƒ½è¾ƒä½</li><li>åŸºäºforkåˆ›å»ºå­è¿›ç¨‹ï¼Œå†…å­˜äº§ç”Ÿé¢å¤–æ¶ˆè€—</li><li>å®•æœºå¸¦æ¥çš„æ•°æ®ä¸¢å¤±é£é™©</li></ul><p>é‚£è§£å†³çš„æ€è·¯æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>ä¸å†™å…¨æ•°æ®ï¼Œä»…è®°å½•éƒ¨åˆ†æ•°æ®</li><li>é™ä½åŒºåˆ†æ•°æ®æ˜¯å¦æ”¹å˜çš„éš¾åº¦ï¼Œæ”¹è®°å½•æ•°æ®ä¸ºè®°å½•æ“ä½œè¿‡ç¨‹</li><li>å¯¹æ‰€æœ‰æ“ä½œå‡è¿›è¡Œè®°å½•ï¼Œæ’é™¤ä¸¢å¤±æ•°æ®çš„é£é™©</li></ul><h4 id="5-3-1-AOFæ¦‚å¿µ"><a href="#5-3-1-AOFæ¦‚å¿µ" class="headerlink" title="5.3.1 AOFæ¦‚å¿µ"></a>5.3.1 AOFæ¦‚å¿µ</h4><p><strong>AOF</strong>(append only file)æŒä¹…åŒ–ï¼šä»¥ç‹¬ç«‹æ—¥å¿—çš„æ–¹å¼è®°å½•æ¯æ¬¡å†™å‘½ä»¤ï¼Œé‡å¯æ—¶å†é‡æ–°æ‰§è¡ŒAOFæ–‡ä»¶ä¸­å‘½ä»¤ è¾¾åˆ°æ¢å¤æ•°æ®çš„ç›®çš„ã€‚<strong>ä¸RDBç›¸æ¯”å¯ä»¥ç®€å•ç†è§£ä¸ºç”±è®°å½•æ•°æ®æ”¹ä¸ºè®°å½•æ•°æ®äº§ç”Ÿçš„å˜åŒ–</strong></p><p>AOFçš„ä¸»è¦ä½œç”¨æ˜¯è§£å†³äº†æ•°æ®æŒä¹…åŒ–çš„å®æ—¶æ€§ï¼Œç›®å‰å·²ç»æ˜¯RedisæŒä¹…åŒ–çš„ä¸»æµæ–¹å¼</p><p><strong>AOFå†™æ•°æ®è¿‡ç¨‹</strong></p><p><img src="https://s2.loli.net/2022/03/31/qdUCVnkmIB1f5FG.png"></p><p><strong>å¯åŠ¨AOFç›¸å…³é…ç½®</strong></p><p>å¼€å¯AOFæŒä¹…åŒ–åŠŸèƒ½ï¼Œé»˜è®¤noï¼Œå³ä¸å¼€å¯çŠ¶æ€</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">appendonly</span> <span class="hljs-string">yes|no</span><br></code></pre></td></tr></table></figure><p>AOFæŒä¹…åŒ–æ–‡ä»¶åï¼Œé»˜è®¤æ–‡ä»¶åä¸ºappendonly.aofï¼Œå»ºè®®é…ç½®ä¸ºappendonly-ç«¯å£å·.aof</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">appendfilename</span> <span class="hljs-string">filename</span><br></code></pre></td></tr></table></figure><p>AOFæŒä¹…åŒ–æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼Œä¸RDBæŒä¹…åŒ–æ–‡ä»¶ä¿æŒä¸€è‡´å³å¯</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">dir</span><br></code></pre></td></tr></table></figure><p>AOFå†™æ•°æ®ç­–ç•¥ï¼Œé»˜è®¤ä¸ºeverysec</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">appendfsync</span> <span class="hljs-string">always|everysec|no</span><br></code></pre></td></tr></table></figure><h4 id="5-3-2-AOFæ‰§è¡Œç­–ç•¥"><a href="#5-3-2-AOFæ‰§è¡Œç­–ç•¥" class="headerlink" title="5.3.2 AOFæ‰§è¡Œç­–ç•¥"></a>5.3.2 AOFæ‰§è¡Œç­–ç•¥</h4><p>AOFå†™æ•°æ®ä¸‰ç§ç­–ç•¥(appendfsync)</p><ul><li><p><strong>always</strong>(æ¯æ¬¡ï¼‰ï¼šæ¯æ¬¡å†™å…¥æ“ä½œå‡åŒæ­¥åˆ°AOFæ–‡ä»¶ä¸­æ•°æ®é›¶è¯¯å·®ï¼Œæ€§èƒ½è¾ƒä½ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚</p></li><li><p>**<font color='red'>everysec</font>**ï¼ˆæ¯ç§’ï¼‰ï¼šæ¯ç§’å°†ç¼“å†²åŒºä¸­çš„æŒ‡ä»¤åŒæ­¥åˆ°AOFæ–‡ä»¶ä¸­ï¼Œåœ¨ç³»ç»Ÿçªç„¶å®•æœºçš„æƒ…å†µä¸‹ä¸¢å¤±1ç§’å†…çš„æ•°æ® æ•°æ®å‡†ç¡®æ€§è¾ƒé«˜ï¼Œæ€§èƒ½è¾ƒé«˜ï¼Œå»ºè®®ä½¿ç”¨ï¼Œä¹Ÿæ˜¯é»˜è®¤é…ç½®</p></li><li><p><strong>no</strong>ï¼ˆç³»ç»Ÿæ§åˆ¶ï¼‰ï¼šç”±æ“ä½œç³»ç»Ÿæ§åˆ¶æ¯æ¬¡åŒæ­¥åˆ°AOFæ–‡ä»¶çš„å‘¨æœŸï¼Œæ•´ä½“è¿‡ç¨‹ä¸å¯æ§</p></li><li><p><img src="https://s2.loli.net/2022/03/31/logGXirBq16bdzY.png" alt="image-20220308120532715"></p></li></ul><h4 id="5-3-3-AOFé‡å†™"><a href="#5-3-3-AOFé‡å†™" class="headerlink" title="5.3.3 AOFé‡å†™"></a>5.3.3 AOFé‡å†™</h4><p>åœºæ™¯ï¼šAOFå†™æ•°æ®é‡åˆ°çš„é—®é¢˜ï¼Œå¦‚æœè¿ç»­æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤è¯¥å¦‚ä½•å¤„ç†</p><p><img src="https://s2.loli.net/2022/03/31/FsojQERd4Kmlq2k.png"></p><p><strong>ä»€ä¹ˆå«AOFé‡å†™ï¼Ÿ</strong></p><p>éšç€å‘½ä»¤ä¸æ–­å†™å…¥AOFï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒRediså¼•å…¥äº†AOFé‡å†™æœºåˆ¶å‹ç¼©æ–‡ä»¶ä½“ç§¯ã€‚AOFæ–‡ä»¶é‡ å†™æ˜¯å°†Redisè¿›ç¨‹å†…çš„æ•°æ®è½¬åŒ–ä¸ºå†™å‘½ä»¤åŒæ­¥åˆ°æ–°AOFæ–‡ä»¶çš„è¿‡ç¨‹ã€‚ç®€å•è¯´å°±æ˜¯å°†å¯¹åŒä¸€ä¸ªæ•°æ®çš„è‹¥å¹²ä¸ªæ¡å‘½ä»¤æ‰§è¡Œç»“ æœè½¬åŒ–æˆæœ€ç»ˆç»“æœæ•°æ®å¯¹åº”çš„æŒ‡ä»¤è¿›è¡Œè®°å½•ã€‚</p><p><strong>AOFé‡å†™ä½œç”¨</strong></p><ul><li>é™ä½ç£ç›˜å ç”¨é‡ï¼Œæé«˜ç£ç›˜åˆ©ç”¨ç‡</li><li>æé«˜æŒä¹…åŒ–æ•ˆç‡ï¼Œé™ä½æŒä¹…åŒ–å†™æ—¶é—´ï¼Œæé«˜IOæ€§èƒ½</li><li>é™ä½æ•°æ®æ¢å¤ç”¨æ—¶ï¼Œæé«˜æ•°æ®æ¢å¤æ•ˆç‡</li></ul><p><strong>AOFé‡å†™è§„åˆ™</strong></p><ul><li><p>è¿›ç¨‹å†…å…·æœ‰æ—¶æ•ˆæ€§çš„æ•°æ®ï¼Œå¹¶ä¸”æ•°æ®å·²è¶…æ—¶å°†ä¸å†å†™å…¥æ–‡ä»¶</p></li><li><p>éå†™å…¥ç±»çš„æ— æ•ˆæŒ‡ä»¤å°†è¢«å¿½ç•¥ï¼Œåªä¿ç•™æœ€ç»ˆæ•°æ®çš„å†™å…¥å‘½ä»¤</p><p>å¦‚del key1ã€ hdel key2ã€srem key3ã€set key4 111ã€set key4 222ç­‰</p><p>å¦‚selectæŒ‡ä»¤è™½ç„¶ä¸æ›´æ”¹æ•°æ®ï¼Œä½†æ˜¯æ›´æ”¹äº†æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼Œæ­¤ç±»å‘½ä»¤åŒæ ·éœ€è¦è®°å½•</p></li><li><p>å¯¹åŒä¸€æ•°æ®çš„å¤šæ¡å†™å‘½ä»¤åˆå¹¶ä¸ºä¸€æ¡å‘½ä»¤</p></li></ul><p>å¦‚lpushlist1 aã€lpush list1 bã€lpush list1 cå¯ä»¥è½¬åŒ–ä¸ºï¼šlpush list1 a b cã€‚</p><p>ä¸ºé˜²æ­¢æ•°æ®é‡è¿‡å¤§é€ æˆå®¢æˆ·ç«¯ç¼“å†²åŒºæº¢å‡ºï¼Œå¯¹listã€setã€hashã€zsetç­‰ç±»å‹ï¼Œæ¯æ¡æŒ‡ä»¤æœ€å¤šå†™å…¥64ä¸ªå…ƒç´ </p><p><strong>AOFé‡å†™æ–¹å¼</strong></p><ul><li>æ‰‹åŠ¨é‡å†™</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">bgrewriteaof</span><br></code></pre></td></tr></table></figure><p><strong>æ‰‹åŠ¨é‡å†™åŸç†åˆ†æï¼š</strong></p><p><img src="https://s2.loli.net/2022/03/31/Q1GbOa9MUpf3qTr.png"></p><ul><li>è‡ªåŠ¨é‡å†™</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">auto-aof-rewrite-min-size</span> <span class="hljs-string">size</span><br><span class="hljs-attr">auto-aof-rewrite-percentage</span> <span class="hljs-string">percentage</span><br></code></pre></td></tr></table></figure><p>è‡ªåŠ¨é‡å†™è§¦å‘æ¡ä»¶è®¾ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">auto-aof-rewrite-min-size</span> <span class="hljs-string">size</span><br><span class="hljs-attr">auto-aof-rewrite-percentage</span> <span class="hljs-string">percent</span><br></code></pre></td></tr></table></figure><p>è‡ªåŠ¨é‡å†™è§¦å‘æ¯”å¯¹å‚æ•°ï¼ˆ è¿è¡ŒæŒ‡ä»¤info Persistenceè·å–å…·ä½“ä¿¡æ¯ ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">aof_current_size</span>  <span class="hljs-string"></span><br><span class="hljs-attr">aof_base_size</span><br></code></pre></td></tr></table></figure><p> è‡ªåŠ¨é‡å†™è§¦å‘æ¡ä»¶å…¬å¼ï¼š</p><p><img src="https://s2.loli.net/2022/03/31/AFB3em2QJuPDptd.png"></p><h4 id="5-3-4-AOFå·¥ä½œæµç¨‹åŠé‡å†™æµç¨‹"><a href="#5-3-4-AOFå·¥ä½œæµç¨‹åŠé‡å†™æµç¨‹" class="headerlink" title="5.3.4 AOFå·¥ä½œæµç¨‹åŠé‡å†™æµç¨‹"></a>5.3.4 AOFå·¥ä½œæµç¨‹åŠé‡å†™æµç¨‹</h4><p><img src="https://s2.loli.net/2022/03/31/1OwI85BjPMLAu3f.png"></p><p><img src="https://s2.loli.net/2022/03/31/TbeCcRHt1EzIQv6.png"></p><p><img src="https://s2.loli.net/2022/03/31/rYIRDmSuAG3jBwV.png"></p><h3 id="5-4-RDBä¸AOFåŒºåˆ«"><a href="#5-4-RDBä¸AOFåŒºåˆ«" class="headerlink" title="5.4  RDBä¸AOFåŒºåˆ«"></a>5.4  RDBä¸AOFåŒºåˆ«</h3><h4 id="5-4-1-RDBä¸AOFå¯¹æ¯”ï¼ˆä¼˜ç¼ºç‚¹ï¼‰"><a href="#5-4-1-RDBä¸AOFå¯¹æ¯”ï¼ˆä¼˜ç¼ºç‚¹ï¼‰" class="headerlink" title="5.4.1 RDBä¸AOFå¯¹æ¯”ï¼ˆä¼˜ç¼ºç‚¹ï¼‰"></a>5.4.1 RDBä¸AOFå¯¹æ¯”ï¼ˆä¼˜ç¼ºç‚¹ï¼‰</h4><table><thead><tr><th>æŒä¹…åŒ–æ–¹å¼</th><th>RDB</th><th>AOF</th></tr></thead><tbody><tr><td>å ç”¨å­˜å‚¨ç©ºé—´</td><td>å°ï¼ˆæ•°æ®çº§ï¼šå‹ç¼©ï¼‰</td><td>å¤§ï¼ˆæŒ‡ä»¤çº§ï¼šé‡å†™ï¼‰</td></tr><tr><td>å­˜å‚¨é€Ÿåº¦</td><td>æ…¢</td><td>å¿«</td></tr><tr><td>æ¢å¤é€Ÿåº¦</td><td>å¿«</td><td>æ…¢</td></tr><tr><td>æ•°æ®å®‰å…¨æ€§</td><td>ä¼šä¸¢å¤±æ•°æ®</td><td>ä¾æ®ç­–ç•¥å†³å®š</td></tr><tr><td>èµ„æºæ¶ˆè€—</td><td>é«˜&#x2F;é‡é‡çº§</td><td>ä½&#x2F;è½»é‡çº§</td></tr><tr><td>å¯åŠ¨ä¼˜å…ˆçº§</td><td>ä½</td><td>é«˜</td></tr></tbody></table><h4 id="5-4-2-RDBä¸AOFåº”ç”¨åœºæ™¯"><a href="#5-4-2-RDBä¸AOFåº”ç”¨åœºæ™¯" class="headerlink" title="5.4.2 RDBä¸AOFåº”ç”¨åœºæ™¯"></a>5.4.2 RDBä¸AOFåº”ç”¨åœºæ™¯</h4><p>RDBä¸AOFçš„é€‰æ‹©ä¹‹æƒ‘</p><ul><li>å¯¹æ•°æ®éå¸¸æ•æ„Ÿï¼Œå»ºè®®ä½¿ç”¨é»˜è®¤çš„AOFæŒä¹…åŒ–æ–¹æ¡ˆ</li></ul><p>AOFæŒä¹…åŒ–ç­–ç•¥ä½¿ç”¨everysecondï¼Œæ¯ç§’é’Ÿfsyncä¸€æ¬¡ã€‚è¯¥ç­–ç•¥redisä»å¯ä»¥ä¿æŒå¾ˆå¥½çš„å¤„ç†æ€§èƒ½ï¼Œå½“å‡º ç°é—®é¢˜æ—¶ï¼Œæœ€å¤šä¸¢å¤±0-1ç§’å†…çš„æ•°æ®ã€‚</p><p>æ³¨æ„ï¼šç”±äºAOFæ–‡ä»¶å­˜å‚¨ä½“ç§¯è¾ƒå¤§ï¼Œä¸”æ¢å¤é€Ÿåº¦è¾ƒæ…¢</p><ul><li>æ•°æ®å‘ˆç°é˜¶æ®µæœ‰æ•ˆæ€§ï¼Œå»ºè®®ä½¿ç”¨RDBæŒä¹…åŒ–æ–¹æ¡ˆ</li></ul><p>æ•°æ®å¯ä»¥è‰¯å¥½çš„åšåˆ°é˜¶æ®µå†…æ— ä¸¢å¤±ï¼ˆè¯¥é˜¶æ®µæ˜¯å¼€å‘è€…æˆ–è¿ç»´äººå‘˜æ‰‹å·¥ç»´æŠ¤çš„ï¼‰ï¼Œä¸”æ¢å¤é€Ÿåº¦è¾ƒå¿«ï¼Œé˜¶æ®µ ç‚¹æ•°æ®æ¢å¤é€šå¸¸é‡‡ç”¨RDBæ–¹æ¡ˆ</p><p>æ³¨æ„ï¼šåˆ©ç”¨RDBå®ç°ç´§å‡‘çš„æ•°æ®æŒä¹…åŒ–ä¼šä½¿Redisé™çš„å¾ˆä½ï¼Œæ…é‡æ€»ç»“ï¼š</p><p><strong>ç»¼åˆæ¯”å¯¹</strong></p><ul><li>RDBä¸AOFçš„é€‰æ‹©å®é™…ä¸Šæ˜¯åœ¨åšä¸€ç§æƒè¡¡ï¼Œæ¯ç§éƒ½æœ‰åˆ©æœ‰å¼Š</li><li>å¦‚ä¸èƒ½æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œå¯¹ä¸šåŠ¡æ•°æ®éå¸¸æ•æ„Ÿï¼Œé€‰ç”¨AOF</li><li>å¦‚èƒ½æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œä¸”è¿½æ±‚å¤§æ•°æ®é›†çš„æ¢å¤é€Ÿåº¦ï¼Œé€‰ç”¨RDB</li><li>ç¾éš¾æ¢å¤é€‰ç”¨RDB</li><li>åŒä¿é™©ç­–ç•¥ï¼ŒåŒæ—¶å¼€å¯ RDBå’Œ AOFï¼Œé‡å¯åï¼ŒRedisä¼˜å…ˆä½¿ç”¨ AOF æ¥æ¢å¤æ•°æ®ï¼Œé™ä½ä¸¢å¤±æ•°æ®çš„é‡</li></ul>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linuxè™šæ‹Ÿæœºredisè¿æ¥æŠ¥é”™</title>
    <link href="/Hexo/2022/02/20/linux%E8%99%9A%E6%8B%9F%E6%9C%BAredis%E8%BF%9E%E6%8E%A5%E6%8A%A5%E9%94%99/"/>
    <url>/Hexo/2022/02/20/linux%E8%99%9A%E6%8B%9F%E6%9C%BAredis%E8%BF%9E%E6%8E%A5%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æµ‹è¯•äº†ä¸€ä¸‹åœ¨æœ¬æœºï¼ˆwin10ç³»ç»Ÿï¼‰è¿œç¨‹è¿æ¥ centosä¸‹çš„redisï¼Œç»“æœæŠ¥äº†ä»¥ä¸‹é”™è¯¯ï¼š</p><p><font color='red'> -DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect</font></p><p>ç¿»è¯‘é™„ä¸Šâ€¦.</p><p><img src="https://img1.imgtp.com/2022/10/15/LQWcTUwa.png" alt="image-20220307230726168"></p><p>è‹±è¯­å‹‰å¼ºåŠæ ¼çš„æˆ‘å‹‰å¼ºçœ‹äº†ä¸€ä¸‹è¿™æ®µæ¼äººçš„è‹±æ–‡ï¼Œè²Œä¼¼æœ‰ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p><p>é¦–å…ˆæŸ¥çœ‹äº†ä¸€ä¸‹è¿›ç¨‹ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ps</span> -ef | <span class="hljs-keyword">grep</span> redis<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/31/4UPen98dxwfpR71.png" alt="image-20220307230628875"></p><p>è²Œä¼¼å¾ˆæ­£å¸¸ï¼</p><p>å®ƒè¯´æ²¡æœ‰ç»‘å®šIP</p><p>æˆ‘çœ‹äº†çœ‹</p><p><img src="https://s2.loli.net/2022/03/31/ePshIjuSYB4Tdgw.png" alt="image-20220307230917595"></p><p><img src="https://s2.loli.net/2022/03/31/ZaYlpbuWs6KRhXG.png"></p><p>redis-server redis-6379.conf</p><p>æ­£å¸¸ï¼</p><p>éš¾é“æ˜¯ç«¯å£åŸå› ï¼Ÿ</p><p>äºæ˜¯ï¼šæˆ‘çœ‹äº†çœ‹ç­ç«å¢™</p><p>å…³é—­é˜²ç«å¢™:service iptables stop</p><p>å¼€å¯é˜²ç«å¢™:service iptables start</p><p>é˜²ç«å¢™çŠ¶æ€:service iptables status</p><p>æ°¸ä¹…å…³é—­:chkconfig iptables off</p><p>æ°¸ä¹…å¼€å¯:chkconfig iptables on</p><p><img src="https://img1.imgtp.com/2022/10/15/pmD774EY.png" alt="image-20220307231339145"></p><p><img src="https://s2.loli.net/2022/03/31/8JCRclYrF5Enf6D.png" alt="image-20220307231418130"></p><p>å¾ˆæ­£å¸¸ï¼3</p><p>å…³é—­ï¼š systemctl stop firewalldï¼ˆäº‹å®è¯æ˜ï¼Œåªæ‰§è¡Œè¿™ä¸ªï¼Œé‡å¯ä¹‹åæ˜¯ä¸è¡Œçš„ï¼Œè¿˜å¿…é¡»æ‰§è¡Œsystemclt disable firewalldï¼‰</p><p>ï¼ˆ3ï¼‰å¯¹å¤–å¼€å‘ç«¯å£</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">æŸ¥çœ‹æƒ³å¼€çš„ç«¯å£æ˜¯å¦å·²å¼€ï¼šfirewall-cmd --query-port=6379/tcp<br>æ·»åŠ æŒ‡å®šéœ€è¦å¼€æ”¾çš„ç«¯å£ï¼šfirewall-cmd --add-port=123/tcp --permanent<br>é‡è½½å…¥æ·»åŠ çš„ç«¯å£ï¼šfirewall-cmd --reload<br>æŸ¥è¯¢æŒ‡å®šç«¯å£æ˜¯å¦å¼€å¯æˆåŠŸï¼šfirewall-cmd --query-port=123/tcp<br>ç§»é™¤æŒ‡å®šç«¯å£ï¼šfirewall-cmd --permanent --remove-port=123/tcp<br><br></code></pre></td></tr></table></figure><p>äºæ˜¯å°±å‰©ä¸‹äº†èº«ä»½éªŒè¯å¯†ç ï¼</p><p>æˆ‘ä¸€baiduo.comå</p><p><a href="https://www.cnblogs.com/doufuyu/p/10861282.html">https://www.cnblogs.com/doufuyu/p/10861282.html</a></p><h1 id="ï¼‘-ä¿®æ”¹redis-confé…ç½®æ–‡ä»¶ï¼Œå°†ç»‘å®šçš„ipåœ°å€ç«¯å£å·ç»™æ³¨é‡Šæ‰ã€‚"><a href="#ï¼‘-ä¿®æ”¹redis-confé…ç½®æ–‡ä»¶ï¼Œå°†ç»‘å®šçš„ipåœ°å€ç«¯å£å·ç»™æ³¨é‡Šæ‰ã€‚" class="headerlink" title="ï¼‘.ä¿®æ”¹redis.confé…ç½®æ–‡ä»¶ï¼Œå°†ç»‘å®šçš„ipåœ°å€ç«¯å£å·ç»™æ³¨é‡Šæ‰ã€‚"></a>ï¼‘.ä¿®æ”¹redis.confé…ç½®æ–‡ä»¶ï¼Œå°†ç»‘å®šçš„ipåœ°å€ç«¯å£å·ç»™æ³¨é‡Šæ‰ã€‚</h1><p>ï¼ˆredisé»˜è®¤ç»‘å®šæœ¬æœºåœ°å€ï¼Œæ‰€ä»¥å…¶ä»–IPè¿æ¥ä¸ä¸Šï¼Œå°†è¿™ä¸€è¡Œæ³¨é‡Šæ‰ï¼š# bind 127.0.0.1ï¼‰ </p><p><img src="https://s2.loli.net/2022/03/31/N6tnsKfvjHlDOQU.png" alt="image-20220307225923784"></p><p><img src="https://s2.loli.net/2022/03/31/vSzMADokNd6nHws.png"></p><h1 id="ï¼’-Linuxä¸Šçš„redisé»˜è®¤å¤„äºå®‰å…¨ä¿æŠ¤æ¨¡å¼ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•å»ºç«‹è¿æ¥ï¼Œæä¾›äº†ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œ"><a href="#ï¼’-Linuxä¸Šçš„redisé»˜è®¤å¤„äºå®‰å…¨ä¿æŠ¤æ¨¡å¼ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•å»ºç«‹è¿æ¥ï¼Œæä¾›äº†ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œ" class="headerlink" title="ï¼’.Linuxä¸Šçš„redisé»˜è®¤å¤„äºå®‰å…¨ä¿æŠ¤æ¨¡å¼ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•å»ºç«‹è¿æ¥ï¼Œæä¾›äº†ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œ"></a>ï¼’.Linuxä¸Šçš„redisé»˜è®¤å¤„äºå®‰å…¨ä¿æŠ¤æ¨¡å¼ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•å»ºç«‹è¿æ¥ï¼Œæä¾›äº†ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œ</h1><h2 id="2-1-ä¸€åœ¨redis-confä¸­è®¾ç½®ä¿æŠ¤æ¨¡å¼ä¸ºnoï¼ˆprotected-mode-noï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š"><a href="#2-1-ä¸€åœ¨redis-confä¸­è®¾ç½®ä¿æŠ¤æ¨¡å¼ä¸ºnoï¼ˆprotected-mode-noï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š" class="headerlink" title="2.1 ä¸€åœ¨redis.confä¸­è®¾ç½®ä¿æŠ¤æ¨¡å¼ä¸ºnoï¼ˆprotected-mode noï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š"></a>2.1 ä¸€åœ¨redis.confä¸­è®¾ç½®ä¿æŠ¤æ¨¡å¼ä¸ºnoï¼ˆprotected-mode noï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š</h2><p><img src="https://s2.loli.net/2022/03/31/1FXOEZICKorDipS.png" alt="image-20220307230024918"></p><h2 id="2-2-redisé»˜è®¤æ˜¯ä¸éœ€è¦å¯†ç çš„ï¼Œå¯ä»¥ç›´æ¥ç™»å½•ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åŠ ä¸Šå®‰å…¨è®¤è¯ï¼Œå³åŠ ä¸Šè¿æ¥å¯†ç ï¼ˆrequirepass-â€œmy-keywordâ€ï¼‰ï¼Œè§ä¸‹å›¾"><a href="#2-2-redisé»˜è®¤æ˜¯ä¸éœ€è¦å¯†ç çš„ï¼Œå¯ä»¥ç›´æ¥ç™»å½•ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åŠ ä¸Šå®‰å…¨è®¤è¯ï¼Œå³åŠ ä¸Šè¿æ¥å¯†ç ï¼ˆrequirepass-â€œmy-keywordâ€ï¼‰ï¼Œè§ä¸‹å›¾" class="headerlink" title="2.2 redisé»˜è®¤æ˜¯ä¸éœ€è¦å¯†ç çš„ï¼Œå¯ä»¥ç›´æ¥ç™»å½•ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åŠ ä¸Šå®‰å…¨è®¤è¯ï¼Œå³åŠ ä¸Šè¿æ¥å¯†ç ï¼ˆrequirepass â€œmy_keywordâ€ï¼‰ï¼Œè§ä¸‹å›¾"></a>2.2 redisé»˜è®¤æ˜¯ä¸éœ€è¦å¯†ç çš„ï¼Œå¯ä»¥ç›´æ¥ç™»å½•ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åŠ ä¸Šå®‰å…¨è®¤è¯ï¼Œå³åŠ ä¸Šè¿æ¥å¯†ç ï¼ˆrequirepass â€œmy_keywordâ€ï¼‰ï¼Œè§ä¸‹å›¾</h2><p><img src="https://s2.loli.net/2022/03/31/ivJ39uxXNUQFVKC.png" alt="image-20220307230250589"></p><p>æœ€åï¼Œ<em>æ€æ‰redisçš„ç›¸å…³è¿›ç¨‹å¹¶é‡å¯æœåŠ¡ï¼Œè®°å¾—å¯åŠ¨æ—¶ä¸€å®šè¦æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚æˆ‘çš„å¯åŠ¨å‘½ä»¤ä¸ºï¼š</em>&#x2F;usr&#x2F;local&#x2F;redis&#x2F;bin&#x2F;redis-server &#x2F;usr&#x2F;local&#x2F;redis&#x2F;etc&#x2F;redis.conf</p><p>å®Œç¾è§£å†³ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringåŸºæœ¬é¢è¯•é¢˜</title>
    <link href="/Hexo/2022/02/14/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <url>/Hexo/2022/02/14/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring-æ¦‚è¿°"><a href="#Spring-æ¦‚è¿°" class="headerlink" title="Spring æ¦‚è¿°"></a>Spring æ¦‚è¿°</h1><h2 id="1-ä»€ä¹ˆæ˜¯-spring"><a href="#1-ä»€ä¹ˆæ˜¯-spring" class="headerlink" title="1.  ä»€ä¹ˆæ˜¯ spring?"></a>1.  ä»€ä¹ˆæ˜¯ spring?</h2><p>Spring æ˜¯ä¸ª java ä¼ä¸šçº§åº”ç”¨çš„å¼€æºå¼€å‘æ¡†æ¶ã€‚Spring ä¸»è¦ç”¨æ¥å¼€å‘ Java åº”ç”¨ï¼Œ ä½†æ˜¯æœ‰äº›æ‰©å±•æ˜¯é’ˆå¯¹æ„å»º J2EE å¹³å°çš„ web åº”ç”¨ã€‚Spring æ¡†æ¶ç›®æ ‡æ˜¯ç®€åŒ– Java ä¼ä¸šçº§åº”ç”¨å¼€å‘ï¼Œå¹¶é€šè¿‡ POJO ä¸ºåŸºç¡€çš„ç¼–ç¨‹æ¨¡å‹ä¿ƒè¿›è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚</p><h2 id="2-ä½¿ç”¨-Spring-æ¡†æ¶çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-ä½¿ç”¨-Spring-æ¡†æ¶çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.  ä½¿ç”¨ Spring æ¡†æ¶çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.  ä½¿ç”¨ Spring æ¡†æ¶çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><strong>è½»é‡ï¼š</strong>Spring æ˜¯è½»é‡çš„ï¼ŒåŸºæœ¬çš„ç‰ˆæœ¬å¤§çº¦ 2MB</p><p><strong>æ§åˆ¶åè½¬ï¼š</strong>Spring é€šè¿‡æ§åˆ¶åè½¬å®ç°äº†æ¾æ•£è€¦åˆï¼Œ å¯¹è±¡ä»¬ç»™å‡ºå®ƒä»¬çš„ä¾èµ–ï¼Œ è€Œä¸æ˜¯</p><p>åˆ›å»ºæˆ–æŸ¥æ‰¾ä¾èµ–çš„å¯¹è±¡ä»¬</p><p><strong>é¢å‘åˆ‡é¢çš„ç¼–ç¨‹(AOP)ï¼š</strong>Spring æ”¯æŒé¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œå¹¶ä¸”æŠŠåº”ç”¨ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡åˆ†å¼€</p><p><strong>å®¹å™¨ï¼š</strong>Spring åŒ…å«å¹¶ç®¡ç†åº”ç”¨ä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®</p><p><strong>MVC æ¡†æ¶ï¼š</strong> Spring çš„ WEB æ¡†æ¶æ˜¯ä¸ªç²¾å¿ƒè®¾è®¡çš„æ¡†æ¶ï¼Œ æ˜¯ Web æ¡†æ¶çš„ä¸€ä¸ªå¾ˆå¥½çš„</p><p>æ›¿ä»£å“</p><p><strong>äº‹åŠ¡ç®¡ç†ï¼š</strong>Spring æä¾›ä¸€ä¸ªæŒç»­çš„äº‹åŠ¡ç®¡ç†æ¥å£ï¼Œå¯ä»¥æ‰©å±•åˆ°ä¸Šè‡³æœ¬åœ°äº‹åŠ¡ä¸‹è‡³å…¨å±€äº‹åŠ¡ï¼ˆ JTAï¼‰</p><p><strong>å¼‚å¸¸å¤„ç†ï¼š</strong> Spring æä¾›æ–¹ä¾¿çš„ API æŠŠå…·ä½“æŠ€æœ¯ç›¸å…³çš„å¼‚å¸¸ï¼ˆ æ¯”å¦‚ç”± JDBC ï¼Œ Hibernate or JDO æŠ›å‡ºçš„ï¼‰ è½¬åŒ–ä¸ºä¸€è‡´çš„ unchecked å¼‚å¸¸</p><h2 id="3-Spring-ç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ"><a href="#3-Spring-ç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ" class="headerlink" title="3.   Spring ç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ"></a>3.   Spring ç”±å“ªäº›æ¨¡å—ç»„æˆï¼Ÿ</h2><p><strong>ä»¥ä¸‹æ˜¯ Spring æ¡†æ¶çš„åŸºæœ¬æ¨¡å—ï¼š</strong> Core module</p><p>Bean module Context module</p><p>Expression Language module JDBC module</p><p>ORM module OXM module</p><p>Java Messaging Service(JMS) module Transaction module</p><p>Web module</p><p>Web-Servlet module Web-Struts module Web-Portlet module</p><h2 id="4-æ ¸å¿ƒå®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡-æ¨¡å—"><a href="#4-æ ¸å¿ƒå®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡-æ¨¡å—" class="headerlink" title="4.  æ ¸å¿ƒå®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡) æ¨¡å—"></a>4.  æ ¸å¿ƒå®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡) æ¨¡å—</h2><p>è¿™æ˜¯åŸºæœ¬çš„ Spring æ¨¡å—ï¼Œæä¾› spring æ¡†æ¶çš„åŸºç¡€åŠŸèƒ½ï¼ŒBeanFactory æ˜¯ ä»»ä½•ä»¥spring ä¸ºåŸºç¡€çš„åº”ç”¨çš„æ ¸å¿ƒã€‚Spring æ¡†æ¶å»ºç«‹åœ¨æ­¤æ¨¡å—ä¹‹ä¸Šï¼Œå®ƒä½¿ Spring æˆä¸ºä¸€ä¸ªå®¹å™¨ã€‚</p><h2 id="5-BeanFactory-â€“-BeanFactory-å®ç°ä¸¾ä¾‹"><a href="#5-BeanFactory-â€“-BeanFactory-å®ç°ä¸¾ä¾‹" class="headerlink" title="5.  BeanFactory â€“ BeanFactory å®ç°ä¸¾ä¾‹"></a>5.  BeanFactory â€“ BeanFactory å®ç°ä¸¾ä¾‹</h2><p>Bean å·¥å‚æ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªå®ç°ï¼Œæä¾›äº†æ§åˆ¶åè½¬åŠŸèƒ½ï¼Œç”¨æ¥æŠŠåº”ç”¨çš„é…ç½®å’Œä¾èµ–ä»æ­£çœŸçš„åº”ç”¨ä»£ç ä¸­åˆ†ç¦»ã€‚æœ€å¸¸ç”¨çš„ BeanFactory å®ç°æ˜¯ XmlBeanFactory ç±»ã€‚</p><h2 id="6-XMLBeanFactory"><a href="#6-XMLBeanFactory" class="headerlink" title="6.  XMLBeanFactory"></a>6.  XMLBeanFactory</h2><p>æœ€å¸¸ç”¨çš„å°±æ˜¯  org.springframework.beans.factory.xml.XmlBeanFactory   ï¼Œå®ƒæ ¹æ® XML æ–‡ä»¶ä¸­çš„å®šä¹‰åŠ è½½ beansã€‚è¯¥å®¹å™¨ä» XML æ–‡ä»¶è¯»å–é…ç½®å…ƒæ•°æ®å¹¶ç”¨å®ƒå»åˆ›å»ºä¸€ä¸ªå®Œå…¨é…ç½®çš„ç³»ç»Ÿæˆ–åº”ç”¨ã€‚</p><h2 id="7-è§£é‡Š-AOP-æ¨¡å—"><a href="#7-è§£é‡Š-AOP-æ¨¡å—" class="headerlink" title="7.  è§£é‡Š AOP æ¨¡å—"></a>7.  è§£é‡Š AOP æ¨¡å—</h2><p>AOP æ¨¡å—ç”¨äºå‘ç»™æˆ‘ä»¬çš„ Spring åº”ç”¨åšé¢å‘åˆ‡é¢çš„å¼€å‘ï¼Œ å¾ˆå¤šæ”¯æŒç”± AOP è”ç›Ÿæä¾›ï¼Œ è¿™æ ·å°±ç¡®ä¿äº† Spring å’Œå…¶ä»– AOP æ¡†æ¶çš„å…±é€šæ€§ã€‚è¿™ä¸ªæ¨¡å—å°†å…ƒæ•°æ®ç¼–ç¨‹å¼•å…¥Springã€‚</p><h2 id="8-è§£é‡Š-JDBC-æŠ½è±¡å’Œ-DAO-æ¨¡å—"><a href="#8-è§£é‡Š-JDBC-æŠ½è±¡å’Œ-DAO-æ¨¡å—" class="headerlink" title="8.  è§£é‡Š JDBC æŠ½è±¡å’Œ DAO æ¨¡å—"></a>8.  è§£é‡Š JDBC æŠ½è±¡å’Œ DAO æ¨¡å—</h2><p>é€šè¿‡ä½¿ç”¨ JDBC æŠ½è±¡å’Œ DAO æ¨¡å—ï¼Œä¿è¯æ•°æ®åº“ä»£ç çš„ç®€æ´ï¼Œå¹¶èƒ½é¿å…æ•°æ®åº“èµ„æºé”™è¯¯å…³é—­å¯¼è‡´çš„é—®é¢˜ï¼Œå®ƒåœ¨å„ç§ä¸åŒçš„æ•°æ®åº“çš„é”™è¯¯ä¿¡æ¯ä¹‹ä¸Šï¼Œæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å¼‚å¸¸è®¿é—®å±‚ã€‚å®ƒè¿˜åˆ©ç”¨ Spring çš„ AOP æ¨¡å—ç»™ Spring åº”ç”¨ä¸­çš„å¯¹è±¡æä¾›äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚</p><h2 id="9-è§£é‡Šå¯¹è±¡-x2F-å…³ç³»æ˜ å°„é›†æˆæ¨¡å—"><a href="#9-è§£é‡Šå¯¹è±¡-x2F-å…³ç³»æ˜ å°„é›†æˆæ¨¡å—" class="headerlink" title="9.  è§£é‡Šå¯¹è±¡&#x2F;å…³ç³»æ˜ å°„é›†æˆæ¨¡å—"></a>9.  è§£é‡Šå¯¹è±¡&#x2F;å…³ç³»æ˜ å°„é›†æˆæ¨¡å—</h2><p>Spring é€šè¿‡æä¾› ORM æ¨¡å—ï¼Œ æ”¯æŒæˆ‘ä»¬åœ¨ç›´æ¥ JDBC ä¹‹ä¸Šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡&#x2F;å…³ç³»æ˜ å°„æ˜ å°„(ORM)å·¥å…·ï¼ŒSpring æ”¯æŒé›†æˆä¸»æµçš„ ORM æ¡†æ¶ï¼Œå¦‚ Hiberate,JDO å’Œ  iBATIS SQL Mapsã€‚Spring çš„äº‹åŠ¡ç®¡ç†åŒæ ·æ”¯æŒä»¥ä¸Šæ‰€æœ‰ ORM æ¡†æ¶åŠ JDBCã€‚</p><h2 id="10-è§£é‡Š-WEB-æ¨¡å—"><a href="#10-è§£é‡Š-WEB-æ¨¡å—" class="headerlink" title="10.   è§£é‡Š WEB æ¨¡å—"></a>10.   è§£é‡Š WEB æ¨¡å—</h2><p>Spring çš„ WEB æ¨¡å—æ˜¯æ„å»ºåœ¨ application context æ¨¡å—åŸºç¡€ä¹‹ä¸Šï¼Œ æä¾›ä¸€ä¸ªé€‚åˆweb åº”ç”¨çš„ä¸Šä¸‹æ–‡ã€‚è¿™ä¸ªæ¨¡å—ä¹ŸåŒ…æ‹¬æ”¯æŒå¤šç§é¢å‘ web çš„ä»»åŠ¡ï¼Œå¦‚é€æ˜åœ°å¤„ç†å¤šä¸ªæ–‡ä»¶ä¸Šä¼ è¯·æ±‚å’Œç¨‹åºçº§è¯·æ±‚å‚æ•°çš„ç»‘å®šåˆ°ä½ çš„ä¸šåŠ¡å¯¹è±¡ã€‚å®ƒä¹Ÿæœ‰å¯¹ Jakarta Struts çš„æ”¯æŒã€‚</p><h2 id="12-Spring-é…ç½®æ–‡ä»¶"><a href="#12-Spring-é…ç½®æ–‡ä»¶" class="headerlink" title="12.   Spring é…ç½®æ–‡ä»¶"></a>12.   Spring é…ç½®æ–‡ä»¶</h2><p>Spring é…ç½®æ–‡ä»¶æ˜¯ä¸ª XML æ–‡ä»¶ï¼Œ è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†ç±»ä¿¡æ¯ï¼Œ æè¿°äº†å¦‚ä½•é…ç½®å®ƒä»¬ï¼Œ ä»¥åŠå¦‚ä½•ç›¸äº’è°ƒç”¨ã€‚</p><h2 id="13-ä»€ä¹ˆæ˜¯-Spring-IOC-å®¹å™¨ï¼Ÿ"><a href="#13-ä»€ä¹ˆæ˜¯-Spring-IOC-å®¹å™¨ï¼Ÿ" class="headerlink" title="13.   ä»€ä¹ˆæ˜¯ Spring IOC å®¹å™¨ï¼Ÿ"></a>13.   ä»€ä¹ˆæ˜¯ Spring IOC å®¹å™¨ï¼Ÿ</h2><p>Spring IOC è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œç®¡ç†å¯¹è±¡ï¼ˆé€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼Œè£…é…å¯¹è±¡ï¼Œé…ç½®å¯¹è±¡ï¼Œ å¹¶ä¸”ç®¡ç†è¿™äº›å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p><h2 id="14-IOC-çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#14-IOC-çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="14.   IOC çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>14.   IOC çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>IOC æˆ– ä¾èµ–æ³¨å…¥æŠŠåº”ç”¨çš„ä»£ç é‡é™åˆ°æœ€ä½ã€‚å®ƒä½¿åº”ç”¨å®¹æ˜“æµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•ä¸å†éœ€è¦å•ä¾‹å’Œ JNDI æŸ¥æ‰¾æœºåˆ¶ã€‚æœ€å°çš„ä»£ä»·å’Œæœ€å°çš„ä¾µå…¥æ€§ä½¿æ¾æ•£è€¦åˆå¾—ä»¥å®ç°ã€‚IOC å®¹å™¨æ”¯æŒåŠ è½½æœåŠ¡æ—¶çš„é¥¿æ±‰å¼åˆå§‹åŒ–å’Œæ‡’åŠ è½½ã€‚</p><h2 id="15-ApplicationContext-é€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#15-ApplicationContext-é€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="15.  ApplicationContext é€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>15.  ApplicationContext é€šå¸¸çš„å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>l <font color='red'>FileSystemXm</font>lApplicationContext ï¼š æ­¤å®¹å™¨ä»ä¸€ä¸ª XML æ–‡ä»¶ä¸­åŠ è½½ beans çš„å®šä¹‰ï¼Œ XML Bean é…ç½®æ–‡ä»¶çš„å…¨è·¯å¾„åå¿…é¡»æä¾›ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚</p><p>l <font color='red'>ClassPathXml</font>ApplicationContextï¼šæ­¤å®¹å™¨ä¹Ÿä»ä¸€ä¸ª XML æ–‡ä»¶ä¸­åŠ è½½ beans çš„å®šä¹‰ï¼Œ è¿™é‡Œï¼Œ ä½ éœ€è¦æ­£ç¡®è®¾ç½® classpath å› ä¸ºè¿™ä¸ªå®¹å™¨å°†åœ¨ classpath é‡Œæ‰¾bean é…ç½®ã€‚</p><p>l <font color='red'>WebXml</font>ApplicationContextï¼šæ­¤å®¹å™¨åŠ è½½ä¸€ä¸ª XML æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªWEB åº”ç”¨çš„æ‰€æœ‰ beanã€‚</p><h2 id="16-Bean-å·¥-å‚-å’Œ-Application-contexts-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#16-Bean-å·¥-å‚-å’Œ-Application-contexts-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="16.  Bean å·¥ å‚ å’Œ Application contexts æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>16.  Bean å·¥ å‚ å’Œ Application contexts æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>Application contexts æä¾›ä¸€ç§æ–¹æ³•å¤„ç†æ–‡æœ¬æ¶ˆæ¯ï¼Œä¸€ä¸ªé€šå¸¸çš„åšæ³•æ˜¯åŠ è½½æ–‡ä»¶èµ„æº</p><p>ï¼ˆæ¯”å¦‚é•œåƒï¼‰ï¼Œå®ƒä»¬å¯ä»¥å‘æ³¨å†Œä¸ºç›‘å¬å™¨çš„ bean å‘å¸ƒäº‹ä»¶ã€‚å¦å¤–ï¼Œåœ¨å®¹å™¨æˆ–å®¹å™¨å†…çš„å¯¹è±¡ä¸Šæ‰§è¡Œçš„é‚£äº›ä¸å¾—ä¸ç”± bean å·¥å‚ä»¥ç¨‹åºåŒ–æ–¹å¼å¤„ç†çš„æ“ä½œï¼Œ å¯ä»¥åœ¨Application contexts ä¸­ ä»¥ å£° æ˜ çš„ æ–¹ å¼ å¤„ ç† ã€‚ Application contexts å® ç° äº†MessageSource   æ¥å£ï¼Œè¯¥æ¥å£çš„å®ç°ä»¥å¯æ’æ‹”çš„æ–¹å¼æä¾›è·å–æœ¬åœ°åŒ–æ¶ˆæ¯çš„æ–¹æ³•ã€‚</p><h2 id="17-ä¸€ä¸ª-Spring-çš„åº”ç”¨çœ‹èµ·æ¥è±¡ä»€ä¹ˆï¼Ÿ"><a href="#17-ä¸€ä¸ª-Spring-çš„åº”ç”¨çœ‹èµ·æ¥è±¡ä»€ä¹ˆï¼Ÿ" class="headerlink" title="17.   ä¸€ä¸ª Spring çš„åº”ç”¨çœ‹èµ·æ¥è±¡ä»€ä¹ˆï¼Ÿ"></a>17.   ä¸€ä¸ª Spring çš„åº”ç”¨çœ‹èµ·æ¥è±¡ä»€ä¹ˆï¼Ÿ</h2><p>l ä¸€ä¸ªå®šä¹‰äº†ä¸€äº›åŠŸèƒ½çš„æ¥å£</p><p>l è¿™å®ç°åŒ…æ‹¬å±æ€§ï¼Œå®ƒçš„ Setter ï¼Œ getter æ–¹æ³•å’Œå‡½æ•°ç­‰</p><p>l Spring AOP</p><p>l Spring çš„ XML é…ç½®æ–‡ä»¶</p><p>l ä½¿ç”¨ä»¥ä¸ŠåŠŸèƒ½çš„å®¢æˆ·ç«¯ç¨‹åº</p><h1 id="ä¾èµ–æ³¨å…¥"><a href="#ä¾èµ–æ³¨å…¥" class="headerlink" title="ä¾èµ–æ³¨å…¥"></a>ä¾èµ–æ³¨å…¥</h1><h2 id="18-ä»€ä¹ˆæ˜¯-Spring-çš„ä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#18-ä»€ä¹ˆæ˜¯-Spring-çš„ä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="18.   ä»€ä¹ˆæ˜¯ Spring çš„ä¾èµ–æ³¨å…¥ï¼Ÿ"></a>18.   ä»€ä¹ˆæ˜¯ Spring çš„ä¾èµ–æ³¨å…¥ï¼Ÿ</h2><p>ä¾èµ–æ³¨å…¥ï¼Œ æ˜¯ IOC çš„ä¸€ä¸ªæ–¹é¢ï¼Œ æ˜¯ä¸ªé€šå¸¸çš„æ¦‚å¿µï¼Œ å®ƒæœ‰å¤šç§è§£é‡Šã€‚è¿™æ¦‚å¿µæ˜¯è¯´ä½ ä¸ç”¨åˆ›å»ºå¯¹è±¡ï¼Œè€Œåªéœ€è¦æè¿°å®ƒå¦‚ä½•è¢«åˆ›å»ºã€‚ä½ ä¸åœ¨ä»£ç é‡Œç›´æ¥ç»„è£…ä½ çš„ç»„ä»¶å’ŒæœåŠ¡ï¼Œ  ä½†æ˜¯è¦åœ¨é…ç½®æ–‡ä»¶é‡Œæè¿°å“ªäº›ç»„ä»¶éœ€è¦å“ªäº›æœåŠ¡ï¼Œä¹‹åä¸€ä¸ªå®¹å™¨ï¼ˆ IOC å®¹å™¨ï¼‰è´Ÿè´£æŠŠä»–ä»¬ç»„è£…èµ·æ¥ã€‚</p><h2 id="19-æœ‰å“ªäº›ä¸åŒç±»å‹çš„-IOCï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ–¹å¼ï¼Ÿ"><a href="#19-æœ‰å“ªäº›ä¸åŒç±»å‹çš„-IOCï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ–¹å¼ï¼Ÿ" class="headerlink" title="19.   æœ‰å“ªäº›ä¸åŒç±»å‹çš„ IOCï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ–¹å¼ï¼Ÿ"></a>19.   æœ‰å“ªäº›ä¸åŒç±»å‹çš„ IOCï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ–¹å¼ï¼Ÿ</h2><p>æ„é€ å™¨ä¾èµ–æ³¨å…¥ï¼šæ„é€ å™¨ä¾èµ–æ³¨å…¥é€šè¿‡å®¹å™¨è§¦å‘ä¸€ä¸ªç±»çš„æ„é€ å™¨æ¥å®ç°çš„ï¼Œè¯¥ç±»æœ‰ä¸€  ç³»åˆ—å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªå¯¹å…¶ä»–ç±»çš„ä¾èµ–ã€‚</p><p>Setter æ–¹æ³•æ³¨å…¥ï¼šSetter æ–¹æ³•æ³¨å…¥æ˜¯å®¹å™¨é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å™¨æˆ–æ— å‚ static å·¥å‚ æ–¹æ³•å®ä¾‹åŒ– bean ä¹‹åï¼Œ è°ƒç”¨è¯¥ bean çš„ setter æ–¹æ³•ï¼Œ å³å®ç°äº†åŸºäº setter çš„ä¾èµ–æ³¨å…¥ã€‚</p><h2 id="20-å“ªç§ä¾èµ–æ³¨å…¥æ–¹å¼ä½ å»ºè®®ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æ˜¯-Setter-æ–¹æ³•æ³¨å…¥ï¼Ÿ"><a href="#20-å“ªç§ä¾èµ–æ³¨å…¥æ–¹å¼ä½ å»ºè®®ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æ˜¯-Setter-æ–¹æ³•æ³¨å…¥ï¼Ÿ" class="headerlink" title="20.   å“ªç§ä¾èµ–æ³¨å…¥æ–¹å¼ä½ å»ºè®®ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æ˜¯ Setter æ–¹æ³•æ³¨å…¥ï¼Ÿ"></a>20.   å“ªç§ä¾èµ–æ³¨å…¥æ–¹å¼ä½ å»ºè®®ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æ˜¯ Setter æ–¹æ³•æ³¨å…¥ï¼Ÿ</h2><p>ä½ ä¸¤ç§ä¾èµ–æ–¹å¼éƒ½å¯ä»¥ä½¿ç”¨ï¼Œ æ„é€ å™¨æ³¨å…¥å’Œ Setter æ–¹æ³•æ³¨å…¥ã€‚æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨æ„é€ å™¨å‚æ•°å®ç°å¼ºåˆ¶ä¾èµ–ï¼Œsetter æ–¹æ³•å®ç°å¯é€‰ä¾èµ–ã€‚</p><h1 id="Spring-Beans"><a href="#Spring-Beans" class="headerlink" title="Spring Beans"></a>Spring Beans</h1><h2 id="21-ä»€ä¹ˆæ˜¯-Spring-beansï¼Ÿ"><a href="#21-ä»€ä¹ˆæ˜¯-Spring-beansï¼Ÿ" class="headerlink" title="21. ä»€ä¹ˆæ˜¯ Spring beansï¼Ÿ"></a>21. ä»€ä¹ˆæ˜¯ Spring beansï¼Ÿ</h2><p>Spring beans æ˜¯é‚£äº›å½¢æˆ Spring åº”ç”¨çš„ä¸»å¹²çš„ java å¯¹è±¡ã€‚å®ƒä»¬è¢« Spring IOC å®¹å™¨åˆå§‹åŒ–ï¼Œè£…é…ï¼Œå’Œç®¡ç†ã€‚è¿™äº› beans é€šè¿‡å®¹å™¨ä¸­é…ç½®çš„å…ƒæ•°æ®åˆ›å»ºã€‚æ¯”å¦‚ï¼Œä»¥ XML æ–‡ä»¶ä¸­<bean/> çš„å½¢å¼å®šä¹‰ã€‚</p><p>Spring æ¡†æ¶å®šä¹‰çš„ beans éƒ½æ˜¯å•ä»¶ beansã€‚åœ¨ bean tag ä¸­æœ‰ä¸ªå±æ€§â€singletonâ€ï¼Œå¦‚æœå®ƒè¢«èµ‹ä¸º TRUEï¼Œ bean å°±æ˜¯å•ä»¶ï¼Œ å¦åˆ™å°±æ˜¯ä¸€ä¸ª prototype beanã€‚é»˜è®¤æ˜¯TRUEï¼Œ æ‰€ä»¥æ‰€æœ‰åœ¨ Spring æ¡†æ¶ä¸­çš„ beans ç¼ºçœéƒ½æ˜¯å•ä»¶ã€‚ç‚¹å‡»<a href="http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247484197&idx=1&sn=028543ecb1602022ca72e26d4aad181b&chksm=eb538613dc240f057a755cb1e4d7f6bd5388fe270a6b9b80ff5cd2336382381e3a658d8513d1&scene=21">è¿™é‡Œ</a>ä¸€å›¾ Spring Bean çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><h2 id="22-ä¸€ä¸ª-Spring-Bean-å®šä¹‰-åŒ…å«ä»€ä¹ˆï¼Ÿ"><a href="#22-ä¸€ä¸ª-Spring-Bean-å®šä¹‰-åŒ…å«ä»€ä¹ˆï¼Ÿ" class="headerlink" title="22.   ä¸€ä¸ª Spring Bean å®šä¹‰ åŒ…å«ä»€ä¹ˆï¼Ÿ"></a>22.   ä¸€ä¸ª Spring Bean å®šä¹‰ åŒ…å«ä»€ä¹ˆï¼Ÿ</h2><p>ä¸€ä¸ª Spring Bean çš„å®šä¹‰åŒ…å«å®¹å™¨å¿…çŸ¥çš„æ‰€æœ‰é…ç½®å…ƒæ•°æ®ï¼Œ åŒ…æ‹¬å¦‚ä½•åˆ›å»ºä¸€ä¸ªbeanï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¯¦æƒ…åŠå®ƒçš„ä¾èµ–ã€‚</p><h2 id="23-å¦‚ä½•ç»™-Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼Ÿ"><a href="#23-å¦‚ä½•ç»™-Spring-å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼Ÿ" class="headerlink" title="23.   å¦‚ä½•ç»™ Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼Ÿ"></a>23.   å¦‚ä½•ç»™ Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ï¼Ÿ</h2><p>è¿™é‡Œæœ‰ä¸‰ç§é‡è¦çš„æ–¹æ³•ç»™ Spring å®¹å™¨æä¾›é…ç½®å…ƒæ•°æ®ã€‚</p><p>l XML é…ç½®æ–‡ä»¶ã€‚</p><p>l åŸºäºæ³¨è§£çš„é…ç½®ã€‚</p><p>l åŸºäº java çš„é…ç½®ã€‚</p><h2 id="24-ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ"><a href="#24-ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="24.   ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ"></a>24.   ä½ æ€æ ·å®šä¹‰ç±»çš„ä½œç”¨åŸŸï¼Ÿ</h2><p>å½“å®šä¹‰ä¸€ä¸ª<bean> åœ¨ Spring é‡Œï¼Œæˆ‘ä»¬è¿˜èƒ½ç»™è¿™ä¸ª bean å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸã€‚å®ƒå¯ä»¥é€šè¿‡ bean å®šä¹‰ä¸­çš„ scope å±æ€§æ¥å®šä¹‰ã€‚å¦‚ï¼Œå½“ Spring è¦åœ¨éœ€è¦çš„æ—¶å€™æ¯æ¬¡ç”Ÿäº§ä¸€ä¸ªæ–°çš„ bean å®ä¾‹ï¼Œbean çš„ scope å±æ€§è¢«æŒ‡å®šä¸º prototypeã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€ä¸ª bean æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™å¿…é¡»è¿”å›åŒä¸€ä¸ªå®ä¾‹ï¼Œ è¿™ä¸ª bean çš„ scope å±æ€§ å¿…é¡»è®¾ä¸ºsingletonã€‚</p><h2 id="25-è§£é‡Š-Spring-æ”¯æŒçš„å‡ ç§-bean-çš„ä½œç”¨åŸŸ"><a href="#25-è§£é‡Š-Spring-æ”¯æŒçš„å‡ ç§-bean-çš„ä½œç”¨åŸŸ" class="headerlink" title="25.   è§£é‡Š Spring æ”¯æŒçš„å‡ ç§ bean çš„ä½œç”¨åŸŸ"></a>25.   è§£é‡Š Spring æ”¯æŒçš„å‡ ç§ bean çš„ä½œç”¨åŸŸ</h2><p><strong>Spring æ¡†æ¶æ”¯æŒä»¥ä¸‹äº”ç§ bean çš„ä½œç”¨åŸŸï¼š</strong></p><p>l <strong>singleton</strong> <strong>:</strong> bean åœ¨æ¯ä¸ª Spring ioc å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p><p>l <strong>prototypeï¼š</strong>ä¸€ä¸ª bean çš„å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ã€‚</p><p>l <strong>requestï¼š</strong>æ¯æ¬¡ http è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ª beanï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäº web çš„ Spring</p><p>ApplicationContext æƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</p><p>l <strong>session****ï¼š</strong> åœ¨ä¸€ä¸ª HTTP Session ä¸­ï¼Œ ä¸€ä¸ª bean å®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäº web çš„ Spring ApplicationContext æƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</p><p>l <strong>global-sessionï¼š</strong>åœ¨ä¸€ä¸ªå…¨å±€çš„ HTTP Session ä¸­ï¼Œ ä¸€ä¸ª bean å®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäº web çš„ Spring ApplicationContext æƒ…å½¢ä¸‹æœ‰æ•ˆã€‚</p><p>l <strong>ç¼ºçœçš„</strong> <strong>Spring</strong> <strong>bean</strong> <strong>çš„ä½œç”¨åŸŸæ˜¯</strong> <strong>Singleton****ã€‚</strong></p><p><strong>26.</strong>  <strong>Spring</strong> <strong>æ¡†æ¶ä¸­çš„å•ä¾‹</strong> <strong>bean</strong> <strong>æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</strong></p><p><strong>ä¸ï¼ŒSpring æ¡†æ¶ä¸­çš„å•ä¾‹ bean ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</strong></p><p><strong>27.</strong>   <strong>è§£é‡Š</strong> <strong>Spring</strong> <strong>æ¡†æ¶ä¸­</strong> <strong>bean</strong> <strong>çš„ç”Ÿå‘½å‘¨æœŸ</strong></p><p>Spring å®¹å™¨ ä» XML æ–‡ä»¶ä¸­è¯»å– bean çš„å®šä¹‰ï¼Œ å¹¶å®ä¾‹åŒ– beanã€‚Spring æ ¹æ® bean çš„å®šä¹‰å¡«å……æ‰€æœ‰çš„å±æ€§ã€‚</p><p>å¦‚ æœ bean å® ç° äº† BeanNameAware æ¥ å£ ï¼Œ Spring ä¼  é€’ bean çš„ ID åˆ°setBeanName æ–¹æ³•ã€‚</p><p>å¦‚æœ Bean å®ç°äº† BeanFactoryAware æ¥å£ï¼Œ Spring ä¼ é€’ beanfactory ç»™setBeanFactory æ–¹æ³•ã€‚</p><p>å¦‚ æœ æœ‰ ä»» ä½• ä¸ bean ç›¸ å…³ è” çš„ BeanPostProcessors ï¼Œ Spring ä¼š åœ¨postProcesserBeforeInitialization()æ–¹æ³•å†…è°ƒç”¨å®ƒä»¬ã€‚</p><p>å¦‚æœ bean å®ç° IntializingBean äº†ï¼Œè°ƒç”¨å®ƒçš„ afterPropertySet æ–¹æ³•ï¼Œ å¦‚æœ bean å£°æ˜äº†åˆå§‹åŒ–æ–¹æ³•ï¼Œè°ƒç”¨æ­¤åˆå§‹åŒ–æ–¹æ³•ã€‚</p><p>å¦‚ æœ æœ‰ BeanPostProcessors å’Œ bean  å…³ è” ï¼Œ è¿™ äº›  bean  çš„postProcessAfterInitialization() æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚</p><p>å¦‚æœ bean å®ç°äº† DisposableBeanï¼Œå®ƒå°†è°ƒç”¨ destroy()æ–¹æ³•ã€‚ç‚¹å‡»<a href="http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247484197&idx=1&sn=028543ecb1602022ca72e26d4aad181b&chksm=eb538613dc240f057a755cb1e4d7f6bd5388fe270a6b9b80ff5cd2336382381e3a658d8513d1&scene=21">è¿™é‡Œ</a>ä¸€å›¾ Spring Bean çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><h2 id="28-å“ªäº›æ˜¯é‡è¦çš„-bean-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ-ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ"><a href="#28-å“ªäº›æ˜¯é‡è¦çš„-bean-ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ-ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ" class="headerlink" title="28.   å“ªäº›æ˜¯é‡è¦çš„ bean ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ"></a>28.   å“ªäº›æ˜¯é‡è¦çš„ bean ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ ä½ èƒ½é‡è½½å®ƒä»¬å—ï¼Ÿ</h2><p>æœ‰ä¸¤ä¸ªé‡è¦çš„ bean ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯ setup ï¼Œ å®ƒæ˜¯åœ¨å®¹å™¨åŠ è½½ bean çš„æ—¶å€™è¢«è°ƒç”¨ã€‚ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯ teardown å®ƒæ˜¯åœ¨å®¹å™¨å¸è½½ç±»çš„æ—¶å€™è¢«è°ƒç”¨ã€‚</p><p>The bean æ ‡ç­¾æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼ˆ init-method å’Œ destroy-methodï¼‰ã€‚ç”¨å®ƒä»¬ä½ å¯ä»¥è‡ªå·±å®šåˆ¶åˆå§‹åŒ–å’Œæ³¨é”€æ–¹æ³•ã€‚ å®ƒä»¬ä¹Ÿæœ‰ç›¸åº”çš„æ³¨è§£ï¼ˆ @PostConstruct å’Œ@PreDestroyï¼‰ã€‚</p><h2 id="29-ä»€ä¹ˆæ˜¯-Spring-çš„å†…éƒ¨-beanï¼Ÿ"><a href="#29-ä»€ä¹ˆæ˜¯-Spring-çš„å†…éƒ¨-beanï¼Ÿ" class="headerlink" title="29.   ä»€ä¹ˆæ˜¯ Spring çš„å†…éƒ¨ beanï¼Ÿ"></a>29.   ä»€ä¹ˆæ˜¯ Spring çš„å†…éƒ¨ beanï¼Ÿ</h2><p>å½“ä¸€ä¸ª bean ä»…è¢«ç”¨ä½œå¦ä¸€ä¸ª bean çš„å±æ€§æ—¶ï¼Œ å®ƒèƒ½è¢«å£°æ˜ä¸ºä¸€ä¸ªå†…éƒ¨ beanï¼Œ ä¸ºäº†å®šä¹‰ inner beanï¼Œåœ¨ Spring çš„  åŸºäº XML çš„  é…ç½®å…ƒæ•°æ®ä¸­ï¼Œå¯ä»¥åœ¨  <property/>æˆ–  <constructor-arg/> å…ƒç´ å†…ä½¿ç”¨<bean/> å…ƒç´ ï¼Œå†…éƒ¨ bean é€šå¸¸æ˜¯åŒ¿åçš„ï¼Œå®ƒä»¬çš„ Scope ä¸€èˆ¬æ˜¯ prototypeã€‚</p><h2 id="30-åœ¨-Spring-ä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ª-java-é›†åˆï¼Ÿ"><a href="#30-åœ¨-Spring-ä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ª-java-é›†åˆï¼Ÿ" class="headerlink" title="30.   åœ¨ Spring ä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ª java é›†åˆï¼Ÿ"></a>30.   åœ¨ Spring ä¸­å¦‚ä½•æ³¨å…¥ä¸€ä¸ª java é›†åˆï¼Ÿ</h2><p><strong>Spring æä¾›ä»¥ä¸‹å‡ ç§é›†åˆçš„é…ç½®å…ƒç´ ï¼š</strong></p><p><list>ç±»å‹ç”¨äºæ³¨å…¥ä¸€åˆ—å€¼ï¼Œ å…è®¸æœ‰ç›¸åŒçš„å€¼ã€‚</p><p><set> ç±»å‹ç”¨äºæ³¨å…¥ä¸€ç»„å€¼ï¼Œ ä¸å…è®¸æœ‰ç›¸åŒçš„å€¼ã€‚</p><p><map> ç±»å‹ç”¨äºæ³¨å…¥ä¸€ç»„é”®å€¼å¯¹ï¼Œé”®å’Œå€¼éƒ½å¯ä»¥ä¸ºä»»æ„ç±»å‹ã€‚</p><p><props>ç±»å‹ç”¨äºæ³¨å…¥ä¸€ç»„é”®å€¼å¯¹ï¼Œé”®å’Œå€¼éƒ½åªèƒ½ä¸º String ç±»å‹ã€‚</p><h2 id="31-ä»€ä¹ˆæ˜¯-bean-è£…é…ï¼Ÿ"><a href="#31-ä»€ä¹ˆæ˜¯-bean-è£…é…ï¼Ÿ" class="headerlink" title="31.   ä»€ä¹ˆæ˜¯ bean è£…é…ï¼Ÿ"></a>31.   ä»€ä¹ˆæ˜¯ bean è£…é…ï¼Ÿ</h2><p>è£…é…ï¼Œæˆ– bean è£…é…æ˜¯æŒ‡åœ¨ Spring å®¹å™¨ä¸­æŠŠ bean ç»„è£…åˆ°ä¸€èµ·ï¼Œå‰ææ˜¯å®¹å™¨éœ€è¦çŸ¥é“ bean çš„ä¾èµ–å…³ç³»ï¼Œå¦‚ä½•é€šè¿‡ä¾èµ–æ³¨å…¥æ¥æŠŠå®ƒä»¬è£…é…åˆ°ä¸€èµ·ã€‚</p><h2 id="32-ä»€ä¹ˆæ˜¯-bean-çš„è‡ªåŠ¨è£…é…ï¼Ÿ"><a href="#32-ä»€ä¹ˆæ˜¯-bean-çš„è‡ªåŠ¨è£…é…ï¼Ÿ" class="headerlink" title="32.   ä»€ä¹ˆæ˜¯ bean çš„è‡ªåŠ¨è£…é…ï¼Ÿ"></a>32.   ä»€ä¹ˆæ˜¯ bean çš„è‡ªåŠ¨è£…é…ï¼Ÿ</h2><p>Spring å®¹ å™¨ èƒ½ å¤Ÿ è‡ª åŠ¨ è£… é… ç›¸ äº’ åˆ ä½œ çš„ bean ï¼Œ è¿™ æ„ å‘³ ç€ å®¹ å™¨ ä¸ éœ€ è¦</p><p><constructor-arg>å’Œ<property>é…ç½®ï¼Œèƒ½é€šè¿‡ Bean å·¥å‚è‡ªåŠ¨å¤„ç† bean ä¹‹é—´çš„åä½œã€‚</p><h2 id="33-è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…"><a href="#33-è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…" class="headerlink" title="33.   è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…"></a>33.   è§£é‡Šä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…</h2><p>æœ‰äº”ç§è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å¯¼ Spring å®¹å™¨ç”¨è‡ªåŠ¨è£…é…æ–¹å¼æ¥è¿›è¡Œä¾èµ–æ³¨å…¥noï¼šé»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œé€šè¿‡æ˜¾å¼è®¾ç½® ref å±æ€§æ¥è¿›è¡Œè£…é…ã€‚byNameï¼šé€šè¿‡å‚æ•°å è‡ªåŠ¨è£…é…ï¼ŒSpring å®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç° bean çš„ autowire å±æ€§è¢«è®¾ç½®æˆ bynameï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥ bean çš„å±æ€§å…·æœ‰ç›¸åŒåå­—çš„beanã€‚</p><p>byTypeï¼šé€šè¿‡å‚æ•°ç±»å‹è‡ªåŠ¨è£…é…ï¼ŒSpring å®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç° bean çš„ autowire å±æ€§è¢«è®¾ç½®æˆ byTypeï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥ bean çš„å±æ€§å…·æœ‰ç›¸åŒç±»å‹çš„beanã€‚å¦‚æœæœ‰å¤šä¸ª bean ç¬¦åˆæ¡ä»¶ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</p><p>constructorï¼šè¿™ä¸ªæ–¹å¼ç±»ä¼¼äº byTypeï¼Œ ä½†æ˜¯è¦æä¾›ç»™æ„é€ å™¨å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰ç¡®å®šçš„å¸¦å‚æ•°çš„æ„é€ å™¨å‚æ•°ç±»å‹ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>autodetectï¼šé¦–å…ˆå°è¯•ä½¿ç”¨ constructor æ¥è‡ªåŠ¨è£…é…ï¼Œå¦‚æœæ— æ³•å·¥ä½œï¼Œåˆ™ä½¿ç”¨ byType æ–¹å¼ã€‚</p><h2 id="34-è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ"><a href="#34-è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ" class="headerlink" title="34. è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ"></a>34. è‡ªåŠ¨è£…é…æœ‰å“ªäº›å±€é™æ€§ï¼Ÿ</h2><p>è‡ªåŠ¨è£…é…çš„å±€é™æ€§æ˜¯ï¼š</p><p>é‡å†™ï¼š ä½ ä»éœ€ç”¨ <constructor-arg>å’Œ  <property>  é…ç½®æ¥å®šä¹‰ä¾èµ–ï¼Œæ„å‘³ç€æ€»è¦é‡å†™è‡ªåŠ¨è£…é…ã€‚</p><p>åŸºæœ¬æ•°æ®ç±»å‹ï¼šä½ ä¸èƒ½è‡ªåŠ¨è£…é…ç®€å•çš„å±æ€§ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒString å­—ç¬¦ä¸²ï¼Œå’Œç±»ã€‚æ¨¡ç³Šç‰¹æ€§ï¼šè‡ªåŠ¨è£…é…ä¸å¦‚æ˜¾å¼è£…é…ç²¾ç¡®ï¼Œå¦‚æœæœ‰å¯èƒ½ï¼Œå»ºè®®ä½¿ç”¨æ˜¾å¼è£…é…ã€‚</p><h2 id="35-ä½ å¯ä»¥åœ¨-Spring-ä¸­æ³¨å…¥ä¸€ä¸ª-null-å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ"><a href="#35-ä½ å¯ä»¥åœ¨-Spring-ä¸­æ³¨å…¥ä¸€ä¸ª-null-å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ" class="headerlink" title="35.   ä½ å¯ä»¥åœ¨ Spring ä¸­æ³¨å…¥ä¸€ä¸ª null å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ"></a>35.   ä½ å¯ä»¥åœ¨ Spring ä¸­æ³¨å…¥ä¸€ä¸ª null å’Œä¸€ä¸ªç©ºå­—ç¬¦ä¸²å—ï¼Ÿ</h2><p>å¯ä»¥ã€‚</p><h1 id="Spring-æ³¨è§£"><a href="#Spring-æ³¨è§£" class="headerlink" title="Spring æ³¨è§£"></a>Spring æ³¨è§£</h1><h2 id="36-ä»€ä¹ˆæ˜¯åŸºäº-Java-çš„-Spring-æ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­"><a href="#36-ä»€ä¹ˆæ˜¯åŸºäº-Java-çš„-Spring-æ³¨è§£é…ç½®-ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­" class="headerlink" title="36.   ä»€ä¹ˆæ˜¯åŸºäº Java çš„ Spring æ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­"></a>36.   ä»€ä¹ˆæ˜¯åŸºäº Java çš„ Spring æ³¨è§£é…ç½®? ç»™ä¸€äº›æ³¨è§£çš„ä¾‹å­</h2><p>åŸºäº Java çš„é…ç½®ï¼Œ å…è®¸ä½ åœ¨å°‘é‡çš„ Java æ³¨è§£çš„å¸®åŠ©ä¸‹ï¼Œ è¿›è¡Œä½ çš„å¤§éƒ¨åˆ† Spring é…ç½®è€Œéé€šè¿‡ XML æ–‡ä»¶ã€‚</p><p>ä»¥@Configuration æ³¨è§£ä¸ºä¾‹ï¼Œå®ƒç”¨æ¥æ ‡è®°ç±»å¯ä»¥å½“åšä¸€ä¸ª bean çš„å®šä¹‰ï¼Œè¢« Spring IOC å®¹å™¨ä½¿ç”¨ã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯@Bean æ³¨è§£ï¼Œå®ƒè¡¨ç¤ºæ­¤æ–¹æ³•å°†è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ª bean æ³¨å†Œè¿› Spring åº”ç”¨ä¸Šä¸‹æ–‡ã€‚ç‚¹å‡»<a href="http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247484195&idx=1&sn=e28f9c3a2f7628061fe15bef668f2ea7&chksm=eb538615dc240f030a66def589edf773ff3dab16902fce130e4bdeb246b3da8da6c3e25e44d6&scene=21">è¿™é‡Œ</a>å­¦ä¹  JAVA å‡ å¤§å…ƒæ³¨è§£ã€‚</p><h2 id="37-ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ"><a href="#37-ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ" class="headerlink" title="37.   ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ"></a>37.   ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®ï¼Ÿ</h2><p>ç›¸å¯¹äº XML æ–‡ä»¶ï¼Œæ³¨è§£å‹çš„é…ç½®ä¾èµ–äºé€šè¿‡å­—èŠ‚ç å…ƒæ•°æ®è£…é…ç»„ä»¶ï¼Œè€Œéå°–æ‹¬å·çš„å£°æ˜ã€‚</p><p>å¼€å‘è€…é€šè¿‡åœ¨ç›¸åº”çš„ç±»ï¼Œæ–¹æ³•æˆ–å±æ€§ä¸Šä½¿ç”¨æ³¨è§£çš„æ–¹å¼ï¼Œç›´æ¥ç»„ä»¶ç±»ä¸­è¿›è¡Œé…ç½®ï¼Œè€Œ  ä¸æ˜¯ä½¿ç”¨ xml è¡¨è¿° bean çš„è£…é…å…³ç³»ã€‚</p><h2 id="38-æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ"><a href="#38-æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ" class="headerlink" title="38.   æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ"></a>38.   æ€æ ·å¼€å¯æ³¨è§£è£…é…ï¼Ÿ</h2><p>æ³¨è§£è£…é…åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¼€å¯çš„ï¼Œä¸ºäº†ä½¿ç”¨æ³¨è§£è£…é…ï¼Œ æˆ‘ä»¬å¿…é¡»åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­é…ç½®  <a href="context:annotation-config/">context:annotation-config/</a>å…ƒç´ ã€‚</p><h2 id="39-Required-æ³¨è§£"><a href="#39-Required-æ³¨è§£" class="headerlink" title="39.  @Required  æ³¨è§£"></a>39.  @Required  æ³¨è§£</h2><p>è¿™ä¸ªæ³¨è§£è¡¨æ˜ bean çš„å±æ€§å¿…é¡»åœ¨é…ç½®çš„æ—¶å€™è®¾ç½®ï¼Œé€šè¿‡ä¸€ä¸ª bean å®šä¹‰çš„æ˜¾å¼çš„å±æ€§å€¼æˆ–é€šè¿‡è‡ªåŠ¨è£…é…ï¼Œ è‹¥@Required æ³¨è§£çš„ bean å±æ€§æœªè¢«è®¾ç½®ï¼Œ å®¹å™¨å°†æŠ›å‡ºBeanInitializationExceptionã€‚</p><h2 id="40-Autowired-æ³¨-è§£"><a href="#40-Autowired-æ³¨-è§£" class="headerlink" title="40.  @Autowired æ³¨ è§£"></a>40.  @Autowired æ³¨ è§£</h2><p>@Autowired æ³¨è§£æä¾›äº†æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œ åŒ…æ‹¬åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•å®Œæˆè‡ªåŠ¨è£…é…ã€‚å®ƒçš„ç”¨æ³•å’Œ@Required ä¸€æ ·ï¼Œ ä¿®é¥° setter æ–¹æ³•ã€æ„é€ å™¨ã€å±æ€§æˆ–è€…å…·æœ‰ä»»æ„åç§°å’Œ&#x2F; æˆ–å¤šä¸ªå‚æ•°çš„ PN æ–¹æ³•ã€‚</p><h2 id="41-Qualifier-æ³¨-è§£"><a href="#41-Qualifier-æ³¨-è§£" class="headerlink" title="41.  @Qualifier æ³¨ è§£"></a>41.  @Qualifier æ³¨ è§£</h2><p>å½“æœ‰å¤šä¸ªç›¸åŒç±»å‹çš„ bean å´åªæœ‰ä¸€ä¸ªéœ€è¦è‡ªåŠ¨è£…é…æ—¶ï¼Œ å°†@Qualifier æ³¨è§£å’Œ@Autowire æ³¨è§£ç»“åˆä½¿ç”¨ä»¥æ¶ˆé™¤è¿™ç§æ··æ·†ï¼Œ æŒ‡å®šéœ€è¦è£…é…çš„ç¡®åˆ‡çš„ beanã€‚ç‚¹å‡»<a href="http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247484331&idx=1&sn=acf8750f5b4174cf238527498f06e307&chksm=eb53869ddc240f8bfebeb73cd5bae0fed5ebf4b349f37a62129afc7f0432fbf99500245f129a&scene=21">è¿™</a>é‡Œå­¦ä¹ æ›´å¤šå¸¸ç”¨æ³¨è§£ã€‚</p><h1 id="Spring-æ•°æ®è®¿é—®"><a href="#Spring-æ•°æ®è®¿é—®" class="headerlink" title="Spring æ•°æ®è®¿é—®"></a>Spring æ•°æ®è®¿é—®</h1><h2 id="42-åœ¨-Spring-æ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨-JDBCï¼Ÿ"><a href="#42-åœ¨-Spring-æ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨-JDBCï¼Ÿ" class="headerlink" title="42. åœ¨ Spring æ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ JDBCï¼Ÿ"></a>42. åœ¨ Spring æ¡†æ¶ä¸­å¦‚ä½•æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ JDBCï¼Ÿ</h2><p>ä½¿ç”¨ SpringJDBC æ¡†æ¶ï¼Œèµ„æºç®¡ç†å’Œé”™è¯¯å¤„ç†çš„ä»£ä»·éƒ½ä¼šè¢«å‡è½»ã€‚æ‰€ä»¥å¼€å‘è€…åªéœ€å†™ statements å’Œ queries ä»æ•°æ®å­˜å–æ•°æ®ï¼Œ JDBC ä¹Ÿå¯ä»¥åœ¨ Spring æ¡†æ¶æä¾›çš„æ¨¡æ¿ç±»çš„å¸®åŠ©ä¸‹æ›´æœ‰æ•ˆåœ°è¢«ä½¿ç”¨ï¼Œè¿™ä¸ªæ¨¡æ¿å« JdbcTemplate</p><h2 id="43-JdbcTemplate"><a href="#43-JdbcTemplate" class="headerlink" title="43.  JdbcTemplate"></a>43.  JdbcTemplate</h2><p>JdbcTemplate ç±»æä¾›äº†å¾ˆå¤šä¾¿åˆ©çš„æ–¹æ³•è§£å†³è¯¸å¦‚æŠŠæ•°æ®åº“æ•°æ®è½¬å˜æˆåŸºæœ¬æ•°æ®ç±»å‹æˆ–å¯¹è±¡ï¼Œæ‰§è¡Œå†™å¥½çš„æˆ–å¯è°ƒç”¨çš„æ•°æ®åº“æ“ä½œè¯­å¥ï¼Œæä¾›è‡ªå®šä¹‰çš„æ•°æ®é”™è¯¯å¤„ç†ã€‚</p><h2 id="44-Spring-å¯¹-DAO-çš„æ”¯æŒ"><a href="#44-Spring-å¯¹-DAO-çš„æ”¯æŒ" class="headerlink" title="44.  Spring å¯¹ DAO çš„æ”¯æŒ"></a>44.  Spring å¯¹ DAO çš„æ”¯æŒ</h2><p>Spring å¯¹æ•°æ®è®¿é—®å¯¹è±¡ï¼ˆ DAOï¼‰ çš„æ”¯æŒæ—¨åœ¨ç®€åŒ–å®ƒå’Œæ•°æ®è®¿é—®æŠ€æœ¯å¦‚ JDBCï¼Œ Hibernate or JDO ç»“åˆä½¿ç”¨ã€‚è¿™ä½¿æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åˆ‡æ¢æŒä¹…å±‚ã€‚ç¼–ç æ—¶ä¹Ÿä¸ç”¨æ‹…å¿ƒä¼šæ•è·æ¯ç§æŠ€æœ¯ç‰¹æœ‰çš„å¼‚å¸¸ã€‚</p><h2 id="45-ä½¿ç”¨-Spring-é€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®-Hibernateï¼Ÿ"><a href="#45-ä½¿ç”¨-Spring-é€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®-Hibernateï¼Ÿ" class="headerlink" title="45.   ä½¿ç”¨ Spring é€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—® Hibernateï¼Ÿ"></a>45.   ä½¿ç”¨ Spring é€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—® Hibernateï¼Ÿ</h2><p>åœ¨ Spring ä¸­æœ‰ä¸¤ç§æ–¹å¼è®¿é—® Hibernateï¼š</p><p>æ§åˆ¶åè½¬ Hibernate Template å’Œ Callback</p><p>ç»§æ‰¿ HibernateDAOSupport æä¾›ä¸€ä¸ª AOP æ‹¦æˆªå™¨</p><h2 id="46-Spring-æ”¯æŒçš„-ORM"><a href="#46-Spring-æ”¯æŒçš„-ORM" class="headerlink" title="46.  Spring æ”¯æŒçš„ ORM"></a>46.  Spring æ”¯æŒçš„ ORM</h2><p>Spring æ”¯æŒä»¥ä¸‹ ORMï¼š</p><p>Hibernate iBatis</p><p>JPA (Java Persistence API) TopLink</p><p>JDO (Java Data Objects) OJB</p><h2 id="47-å¦‚ä½•é€šè¿‡-HibernateDaoSupport-å°†-Spring-å’Œ-Hibernate-ç»“åˆèµ·æ¥ï¼Ÿ"><a href="#47-å¦‚ä½•é€šè¿‡-HibernateDaoSupport-å°†-Spring-å’Œ-Hibernate-ç»“åˆèµ·æ¥ï¼Ÿ" class="headerlink" title="47. å¦‚ä½•é€šè¿‡ HibernateDaoSupport å°† Spring å’Œ Hibernate ç»“åˆèµ·æ¥ï¼Ÿ"></a>47. å¦‚ä½•é€šè¿‡ HibernateDaoSupport å°† Spring å’Œ Hibernate ç»“åˆèµ·æ¥ï¼Ÿ</h2><p>ç”¨ Spring çš„ SessionFactory è°ƒç”¨ LocalSessionFactoryã€‚é›†æˆè¿‡ç¨‹åˆ†ä¸‰æ­¥ï¼š é… ç½® the Hibernate SessionFactory</p><p>ç»§æ‰¿ HibernateDaoSupport å®ç°ä¸€ä¸ª DAO åœ¨ AOP æ”¯æŒçš„äº‹åŠ¡ä¸­è£…é…</p><h2 id="48-Spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹"><a href="#48-Spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹" class="headerlink" title="48.  Spring æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹"></a>48.  Spring æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹</h2><p>Spring æ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š</p><p>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼šè¿™æ„å‘³ä½ é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œç»™ä½ å¸¦æ¥æå¤§çš„çµæ´»æ€§ï¼Œä½†æ˜¯  éš¾ç»´æŠ¤ã€‚</p><p>å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼šè¿™æ„å‘³ç€ä½ å¯ä»¥å°†ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†åˆ†ç¦»ï¼Œä½ åªéœ€ç”¨æ³¨è§£å’Œ XML é…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚</p><h2 id="49-Spring-æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"><a href="#49-Spring-æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="49.  Spring æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"></a>49.  Spring æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h2><p>å®ƒä¸ºä¸åŒçš„äº‹åŠ¡ API å¦‚ JTAï¼Œ JDBCï¼Œ Hibernateï¼Œ JPA å’Œ JDOï¼Œ æä¾›ä¸€ä¸ªä¸å˜çš„ç¼–ç¨‹æ¨¡å¼ã€‚</p><p>å®ƒä¸ºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æä¾›äº†ä¸€å¥—ç®€å•çš„ API è€Œä¸æ˜¯ä¸€äº›å¤æ‚çš„äº‹åŠ¡ API å¦‚å®ƒæ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚</p><p>å®ƒå’Œ Spring å„ç§æ•°æ®è®¿é—®æŠ½è±¡å±‚å¾ˆå¥½å¾—é›†æˆã€‚</p><h2 id="50-ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"><a href="#50-ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ" class="headerlink" title="50.   ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"></a>50.   ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ</h2><p>å¤§å¤šæ•° Spring æ¡†æ¶çš„ç”¨æˆ·é€‰æ‹©å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œå› ä¸ºå®ƒå¯¹åº”ç”¨ä»£ç çš„å½±å“æœ€å°ï¼Œå› æ­¤æ›´ç¬¦åˆä¸€ä¸ªæ— ä¾µå…¥çš„è½»é‡çº§å®¹å™¨çš„æ€æƒ³ã€‚å£°æ˜å¼äº‹åŠ¡ç®¡ç†è¦ä¼˜äºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œ  è™½ç„¶æ¯”ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ˆè¿™ç§æ–¹å¼å…è®¸ä½ é€šè¿‡ä»£ç æ§åˆ¶äº‹åŠ¡ï¼‰å°‘äº†ä¸€ç‚¹çµæ´»æ€§ã€‚</p><h1 id="Spring-é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰"><a href="#Spring-é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰" class="headerlink" title="Spring é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰"></a>Spring é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</h1><h2 id="51-è§£é‡Š-AOP"><a href="#51-è§£é‡Š-AOP" class="headerlink" title="51.   è§£é‡Š AOP"></a>51.   è§£é‡Š AOP</h2><p>é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œæˆ– AOPï¼Œ æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€æœ¯ï¼Œå…è®¸ç¨‹åºæ¨¡å—åŒ–æ¨ªå‘åˆ‡å‰²å…³æ³¨ç‚¹ï¼Œæˆ–æ¨ªåˆ‡å…¸å‹çš„è´£ä»»åˆ’åˆ†ï¼Œ å¦‚æ—¥å¿—å’Œäº‹åŠ¡ç®¡ç†ã€‚</p><h2 id="52-Aspect-åˆ‡-é¢"><a href="#52-Aspect-åˆ‡-é¢" class="headerlink" title="52.  Aspect åˆ‡ é¢"></a>52.  Aspect åˆ‡ é¢</h2><p>AOP æ ¸å¿ƒå°±æ˜¯åˆ‡é¢ï¼Œ å®ƒå°†å¤šä¸ªç±»çš„é€šç”¨è¡Œä¸ºå°è£…æˆå¯é‡ç”¨çš„æ¨¡å—ï¼Œ è¯¥æ¨¡å—å«æœ‰ä¸€ç»„API æä¾›æ¨ªåˆ‡åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œ ä¸€ä¸ªæ—¥å¿—æ¨¡å—å¯ä»¥è¢«ç§°ä½œæ—¥å¿—çš„ AOP åˆ‡é¢ã€‚æ ¹æ®éœ€æ±‚çš„ä¸åŒï¼Œ ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥æœ‰è‹¥å¹²åˆ‡é¢ã€‚åœ¨ Spring AOP ä¸­ï¼Œ åˆ‡é¢é€šè¿‡å¸¦æœ‰@Aspect æ³¨è§£çš„ç±»å®ç°ã€‚</p><h2 id="52-åœ¨-Spring-AOP-ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#52-åœ¨-Spring-AOP-ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="52. åœ¨ Spring AOP ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>52. åœ¨ Spring AOP ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>å…³æ³¨ç‚¹æ˜¯åº”ç”¨ä¸­ä¸€ä¸ªæ¨¡å—çš„è¡Œä¸ºï¼Œä¸€ä¸ªå…³æ³¨ç‚¹å¯èƒ½ä¼šè¢«å®šä¹‰æˆä¸€ä¸ªæˆ‘ä»¬æƒ³å®ç°çš„ä¸€ä¸ª  åŠŸèƒ½ã€‚</p><p>æ¨ªåˆ‡å…³æ³¨ç‚¹æ˜¯ä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œæ­¤å…³æ³¨ç‚¹æ˜¯æ•´ä¸ªåº”ç”¨éƒ½ä¼šä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¹¶å½±å“æ•´ä¸ªåº”ç”¨ï¼Œ  æ¯”å¦‚æ—¥å¿—ï¼Œå®‰å…¨å’Œæ•°æ®ä¼ è¾“ï¼Œå‡ ä¹åº”ç”¨çš„æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦çš„åŠŸèƒ½ã€‚å› æ­¤è¿™äº›éƒ½å±äºæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚</p><h2 id="54-è¿æ¥ç‚¹"><a href="#54-è¿æ¥ç‚¹" class="headerlink" title="54.   è¿æ¥ç‚¹"></a>54.   è¿æ¥ç‚¹</h2><p>è¿æ¥ç‚¹ä»£è¡¨ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æŸä¸ªä½ç½®ï¼Œåœ¨è¿™ä¸ªä½ç½®æˆ‘ä»¬å¯ä»¥æ’å…¥ä¸€ä¸ª AOP åˆ‡é¢ï¼Œ å®ƒå®é™…ä¸Šæ˜¯ä¸ªåº”ç”¨ç¨‹åºæ‰§è¡Œ Spring AOP çš„ä½ç½®ã€‚</p><h2 id="55-é€šçŸ¥"><a href="#55-é€šçŸ¥" class="headerlink" title="55.   é€šçŸ¥"></a>55.   é€šçŸ¥</h2><p>é€š çŸ¥æ˜¯ ä¸ªåœ¨ æ–¹ æ³•æ‰§ è¡Œå‰ æˆ– æ‰§è¡Œ åè¦ åš çš„åŠ¨ ä½œï¼Œ å® é™…ä¸Š æ˜¯ç¨‹ åº æ‰§è¡Œ æ—¶è¦ é€š è¿‡SpringAOP æ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚</p><p>Spring åˆ‡é¢å¯ä»¥åº”ç”¨äº”ç§ç±»å‹çš„é€šçŸ¥ï¼š beforeï¼šå‰ç½®é€šçŸ¥ï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå‰è¢«è°ƒç”¨</p><p>afterï¼šåœ¨æ–¹æ³•æ‰§è¡Œä¹‹åè°ƒç”¨çš„é€šçŸ¥ï¼Œæ— è®ºæ–¹æ³•æ‰§è¡Œæ˜¯å¦æˆåŠŸafter-returningï¼šä»…å½“æ–¹æ³•æˆåŠŸå®Œæˆåæ‰§è¡Œçš„é€šçŸ¥</p><p>after-throwingï¼šåœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸é€€å‡ºæ—¶æ‰§è¡Œçš„é€šçŸ¥aroundï¼šåœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œä¹‹åè°ƒç”¨çš„é€šçŸ¥</p><h2 id="56-åˆ‡ç‚¹"><a href="#56-åˆ‡ç‚¹" class="headerlink" title="56.   åˆ‡ç‚¹"></a>56.   åˆ‡ç‚¹</h2><p>åˆ‡å…¥ç‚¹æ˜¯ä¸€ä¸ªæˆ–ä¸€ç»„è¿æ¥ç‚¹ï¼Œé€šçŸ¥å°†åœ¨è¿™äº›ä½ç½®æ‰§è¡Œã€‚å¯ä»¥é€šè¿‡è¡¨è¾¾å¼æˆ–åŒ¹é…çš„æ–¹å¼  æŒ‡æ˜åˆ‡å…¥ç‚¹ã€‚</p><h2 id="57-ä»€ä¹ˆæ˜¯å¼•å…¥ï¼Ÿ"><a href="#57-ä»€ä¹ˆæ˜¯å¼•å…¥ï¼Ÿ" class="headerlink" title="57.   ä»€ä¹ˆæ˜¯å¼•å…¥ï¼Ÿ"></a>57.   ä»€ä¹ˆæ˜¯å¼•å…¥ï¼Ÿ</h2><p>å¼•å…¥å…è®¸æˆ‘ä»¬åœ¨å·²å­˜åœ¨çš„ç±»ä¸­å¢åŠ æ–°çš„æ–¹æ³•å’Œå±æ€§ã€‚</p><h2 id="58-ä»€ä¹ˆæ˜¯ç›®æ ‡å¯¹è±¡ï¼Ÿ"><a href="#58-ä»€ä¹ˆæ˜¯ç›®æ ‡å¯¹è±¡ï¼Ÿ" class="headerlink" title="58.   ä»€ä¹ˆæ˜¯ç›®æ ‡å¯¹è±¡ï¼Ÿ"></a>58.   ä»€ä¹ˆæ˜¯ç›®æ ‡å¯¹è±¡ï¼Ÿ</h2><p>è¢«ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ‡é¢æ‰€é€šçŸ¥çš„å¯¹è±¡ã€‚å®ƒé€šå¸¸æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚ä¹ŸæŒ‡è¢«é€šçŸ¥ï¼ˆadvisedï¼‰ å¯¹è±¡ã€‚</p><h2 id="59-ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ"><a href="#59-ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ" class="headerlink" title="59.   ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ"></a>59.   ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ</h2><p>ä»£ç†æ˜¯é€šçŸ¥ç›®æ ‡å¯¹è±¡ååˆ›å»ºçš„å¯¹è±¡ã€‚ä»å®¢æˆ·ç«¯çš„è§’åº¦çœ‹ï¼Œä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡æ˜¯ä¸€æ ·  çš„ã€‚</p><h2 id="60-æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ"><a href="#60-æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ" class="headerlink" title="60.   æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ"></a>60.   æœ‰å‡ ç§ä¸åŒç±»å‹çš„è‡ªåŠ¨ä»£ç†ï¼Ÿ</h2><p>BeanNameAutoProxyCreator DefaultAdvisorAutoProxyCreator Metadata autoproxying</p><h2 id="61-ä»€ä¹ˆæ˜¯ç»‡å…¥ã€‚ä»€ä¹ˆæ˜¯ç»‡å…¥åº”ç”¨çš„ä¸åŒç‚¹ï¼Ÿ"><a href="#61-ä»€ä¹ˆæ˜¯ç»‡å…¥ã€‚ä»€ä¹ˆæ˜¯ç»‡å…¥åº”ç”¨çš„ä¸åŒç‚¹ï¼Ÿ" class="headerlink" title="61.   ä»€ä¹ˆæ˜¯ç»‡å…¥ã€‚ä»€ä¹ˆæ˜¯ç»‡å…¥åº”ç”¨çš„ä¸åŒç‚¹ï¼Ÿ"></a>61.   ä»€ä¹ˆæ˜¯ç»‡å…¥ã€‚ä»€ä¹ˆæ˜¯ç»‡å…¥åº”ç”¨çš„ä¸åŒç‚¹ï¼Ÿ</h2><p>ç»‡å…¥æ˜¯å°†åˆ‡é¢å’Œåˆ°å…¶ä»–åº”ç”¨ç±»å‹æˆ–å¯¹è±¡è¿æ¥æˆ–åˆ›å»ºä¸€ä¸ªè¢«é€šçŸ¥å¯¹è±¡çš„è¿‡ç¨‹ã€‚</p><p>ç»‡å…¥å¯ä»¥åœ¨ç¼–è¯‘æ—¶ï¼ŒåŠ è½½æ—¶ï¼Œæˆ–è¿è¡Œæ—¶å®Œæˆã€‚</p><h2 id="62-è§£é‡ŠåŸºäº-XML-Schema-æ–¹å¼çš„åˆ‡é¢å®ç°"><a href="#62-è§£é‡ŠåŸºäº-XML-Schema-æ–¹å¼çš„åˆ‡é¢å®ç°" class="headerlink" title="62.   è§£é‡ŠåŸºäº XML Schema æ–¹å¼çš„åˆ‡é¢å®ç°"></a>62.   è§£é‡ŠåŸºäº XML Schema æ–¹å¼çš„åˆ‡é¢å®ç°</h2><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ‡é¢ç”±å¸¸è§„ç±»ä»¥åŠåŸºäº XML çš„é…ç½®å®ç°ã€‚</p><h2 id="63-è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°"><a href="#63-è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°" class="headerlink" title="63.   è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°"></a>63.   è§£é‡ŠåŸºäºæ³¨è§£çš„åˆ‡é¢å®ç°</h2><p>åœ¨è¿™ç§æƒ…å†µä¸‹(åŸºäº@AspectJ çš„å®ç°)ï¼Œæ¶‰åŠåˆ°çš„åˆ‡é¢å£°æ˜çš„é£æ ¼ä¸å¸¦æœ‰ java5 æ ‡æ³¨çš„æ™®é€š java ç±»ä¸€è‡´ã€‚</p><h1 id="Spring-çš„-MVC"><a href="#Spring-çš„-MVC" class="headerlink" title="Spring çš„ MVC"></a>Spring çš„ MVC</h1><h2 id="64-ä»€ä¹ˆæ˜¯-Spring-çš„-MVC-æ¡†æ¶ï¼Ÿ"><a href="#64-ä»€ä¹ˆæ˜¯-Spring-çš„-MVC-æ¡†æ¶ï¼Ÿ" class="headerlink" title="64.   ä»€ä¹ˆæ˜¯ Spring çš„ MVC æ¡†æ¶ï¼Ÿ"></a>64.   ä»€ä¹ˆæ˜¯ Spring çš„ MVC æ¡†æ¶ï¼Ÿ</h2><p>Spring é…å¤‡æ„å»º Web åº”ç”¨çš„å…¨åŠŸèƒ½ MVC æ¡†æ¶ã€‚Spring å¯ä»¥å¾ˆä¾¿æ·åœ°å’Œå…¶ä»– MVC æ¡†æ¶é›†æˆï¼Œå¦‚ Strutsï¼ŒSpring çš„ MVC æ¡†æ¶ç”¨æ§åˆ¶åè½¬æŠŠä¸šåŠ¡å¯¹è±¡å’Œæ§åˆ¶é€»è¾‘æ¸…æ™°åœ°éš”ç¦»ã€‚å®ƒä¹Ÿå…è®¸ä»¥å£°æ˜çš„æ–¹å¼æŠŠè¯·æ±‚å‚æ•°å’Œä¸šåŠ¡å¯¹è±¡ç»‘å®šã€‚</p><h2 id="65-DispatcherServlet"><a href="#65-DispatcherServlet" class="headerlink" title="65.  DispatcherServlet"></a>65.  DispatcherServlet</h2><p>Spring çš„ MVC æ¡†æ¶æ˜¯å›´ç»• DispatcherServlet æ¥è®¾è®¡çš„ï¼Œå®ƒç”¨æ¥å¤„ç†æ‰€æœ‰çš„ HTTP è¯·æ±‚å’Œå“åº”ã€‚</p><h2 id="66-WebApplicationContext"><a href="#66-WebApplicationContext" class="headerlink" title="66.  WebApplicationContext"></a>66.  WebApplicationContext</h2><p>WebApplicationContext ç»§æ‰¿äº† ApplicationContext  å¹¶å¢åŠ äº†ä¸€äº› WEB åº”ç”¨å¿…å¤‡çš„ç‰¹æœ‰åŠŸèƒ½ï¼Œå®ƒä¸åŒäºä¸€èˆ¬çš„ ApplicationContext ï¼Œå› ä¸ºå®ƒèƒ½å¤„ç†ä¸»é¢˜ï¼Œå¹¶æ‰¾åˆ°è¢«å…³è”çš„ servletã€‚</p><h2 id="67-ä»€ä¹ˆæ˜¯-Spring-MVC-æ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ"><a href="#67-ä»€ä¹ˆæ˜¯-Spring-MVC-æ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ" class="headerlink" title="67.   ä»€ä¹ˆæ˜¯ Spring MVC æ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ"></a>67.   ä»€ä¹ˆæ˜¯ Spring MVC æ¡†æ¶çš„æ§åˆ¶å™¨ï¼Ÿ</h2><p>æ§åˆ¶å™¨æä¾›ä¸€ä¸ªè®¿é—®åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œæ­¤è¡Œä¸ºé€šå¸¸é€šè¿‡æœåŠ¡æ¥å£å®ç°ã€‚æ§åˆ¶å™¨è§£æç”¨  æˆ·è¾“å…¥å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªç”±è§†å›¾å‘ˆç°ç»™ç”¨æˆ·çš„æ¨¡å‹ã€‚Spring ç”¨ä¸€ä¸ªéå¸¸æŠ½è±¡çš„æ–¹å¼å®ç°äº†ä¸€ä¸ªæ§åˆ¶å±‚ï¼Œå…è®¸ç”¨æˆ·åˆ›å»ºå¤šç§ç”¨é€”çš„æ§åˆ¶å™¨ã€‚</p><h2 id="68-Controller-æ³¨-è§£"><a href="#68-Controller-æ³¨-è§£" class="headerlink" title="68.  @Controller æ³¨ è§£"></a>68.  @Controller æ³¨ è§£</h2><p>è¯¥æ³¨è§£è¡¨æ˜è¯¥ç±»æ‰®æ¼”æ§åˆ¶å™¨çš„è§’è‰²ï¼ŒSpring ä¸éœ€è¦ä½ ç»§æ‰¿ä»»ä½•å…¶ä»–æ§åˆ¶å™¨åŸºç±»æˆ–å¼•ç”¨ Servlet API ã€‚</p><h2 id="69-RequestMapping-æ³¨-è§£"><a href="#69-RequestMapping-æ³¨-è§£" class="headerlink" title="69.  @RequestMapping æ³¨ è§£"></a>69.  @RequestMapping æ³¨ è§£</h2><p>è¯¥æ³¨è§£æ˜¯ç”¨æ¥æ˜ å°„ä¸€ä¸ª URL åˆ°ä¸€ä¸ªç±»æˆ–ä¸€ä¸ªç‰¹å®šçš„æ–¹å¤„ç†æ³•ä¸Šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Springæ¡†æ¶â¤</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>SSHè¿æ¥æœ¬åœ°linuxç³»ç»Ÿ</title>
    <link href="/Hexo/2022/02/14/SSH%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0linux%E7%B3%BB%E7%BB%9F/"/>
    <url>/Hexo/2022/02/14/SSH%E8%BF%9E%E6%8E%A5%E6%9C%AC%E5%9C%B0linux%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="SSHè¿æ¥æœ¬åœ°linuxç³»ç»Ÿ"><a href="#SSHè¿æ¥æœ¬åœ°linuxç³»ç»Ÿ" class="headerlink" title="SSHè¿æ¥æœ¬åœ°linuxç³»ç»Ÿ"></a>SSHè¿æ¥æœ¬åœ°linuxç³»ç»Ÿ</h1><p><font color='red'>å‰æï¼šå®‰è£…å¥½centerOSç³»ç»Ÿå¹¶èƒ½å¯åŠ¨</font></p><p><img src="/Hexo/image-ypysss.test.upcdn.net/image-20220417203220067.png" alt="image-20220417203220067"></p><p>ç›®æ ‡ï¼š<strong>è¿é€šå¤–ç½‘å¹¶è®¾ç½®SSH</strong></p><h2 id="1-ç½‘å¡é…ç½®æ–‡ä»¶è·¯å¾„"><a href="#1-ç½‘å¡é…ç½®æ–‡ä»¶è·¯å¾„" class="headerlink" title="1.ç½‘å¡é…ç½®æ–‡ä»¶è·¯å¾„"></a><strong>1.ç½‘å¡é…ç½®æ–‡ä»¶è·¯å¾„</strong></h2><p>æ‰“å¼€linuxæœ¬åœ°ç»ˆç«¯ å¿«æ·é”®ä¸€èˆ¬æ˜¯ctrl+alt+f2(f1~f3)</p><p><img src="https://s2.loli.net/2022/04/17/WCfr8choQipDEtP.png" alt="image-20220304173653989"></p><p>è¿™é‡Œæ˜¯ç®¡ç†å‘˜ç™»å½•,å¯†ç æ˜¯<font color='red'>éšè—å¼çš„è¾“å…¥(è¾“å…¥çœ‹ä¸è§)</font></p><p>è¿™æ ·å°±æ˜¾ç¤ºæˆåŠŸç™»å½•äº†ï¼</p><p>ä¸‹é¢æŸ¥çœ‹ç½‘å¡é…ç½®ï¼š</p><p>é¦–å…ˆæŸ¥çœ‹ç½‘å¡åœ°å€ï¼š</p><p>è¾“å…¥</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ip addr</span><br></code></pre></td></tr></table></figure><img src="https://s2.loli.net/2022/04/17/X4fnz1xEam8LBMr.png" alt="image-20220304174114876"  /><p>åœ°å€ä¸ºï¼šens32</p><p>è¾“å…¥cat &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-<font color='red'>ens32</font></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs linux">cat /etc/sysconfig/network-scripts/ifcfg-ens32<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/17/8pDF6STMXLPyc7Z.png"></p><p>æˆ‘ä»¬éœ€è¦é…ç½®ä»¥ä¸‹å‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs linux">BOOTPROTO=static<br>IPADDR=192.168.44.3<br>NETMASK=255.255.255.0<br>GATEWAY=192.168.44.1<br>ONBOOT=yes<br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬é‡‡ç”¨viç¼–è¾‘æ¨¡å¼,æˆ‘è¿™é‡Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œå°±é‡‡ç”¨å‘½ä»¤æ–¹å¼é…ç½®äº†</p><h2 id="2-ä¿®æ”¹ONBOOTå€¼ä»noæ”¹ä¸ºyesï¼š-æ¿€æ´»ç½‘å¡"><a href="#2-ä¿®æ”¹ONBOOTå€¼ä»noæ”¹ä¸ºyesï¼š-æ¿€æ´»ç½‘å¡" class="headerlink" title="2.ä¿®æ”¹ONBOOTå€¼ä»noæ”¹ä¸ºyesï¼š æ¿€æ´»ç½‘å¡"></a>2.<strong>ä¿®æ”¹ONBOOTå€¼ä»noæ”¹ä¸ºyesï¼š æ¿€æ´»ç½‘å¡</strong></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/ONBOOT=no/ONBOOT=yes/g&#x27;</span> <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens32<br></code></pre></td></tr></table></figure><p>æˆ–è€…ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/ONBOOT=.*/ONBOOT=yes/g&#x27;</span> <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens32<br></code></pre></td></tr></table></figure><h2 id="3-ä¿®æ”¹BOOTPROTOå€¼ä»dhcpæ”¹ä¸ºstaticï¼š-é™æ€IP"><a href="#3-ä¿®æ”¹BOOTPROTOå€¼ä»dhcpæ”¹ä¸ºstaticï¼š-é™æ€IP" class="headerlink" title="3.ä¿®æ”¹BOOTPROTOå€¼ä»dhcpæ”¹ä¸ºstaticï¼š é™æ€IP"></a>3.<strong>ä¿®æ”¹BOOTPROTOå€¼ä»dhcpæ”¹ä¸ºstaticï¼š é™æ€IP</strong></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/BOOTPROTO=dhcp/BOOTPROTO=static/g&#x27;</span> <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens32<br></code></pre></td></tr></table></figure><p>æˆ–è€…ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sed -i <span class="hljs-string">&#x27;s/BOOTPROTO=.* /BOOTPROTO=static/g&#x27;</span> <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens3<br></code></pre></td></tr></table></figure><h2 id="4-é…ç½®ç½‘å¡IP"><a href="#4-é…ç½®ç½‘å¡IP" class="headerlink" title="4.é…ç½®ç½‘å¡IP"></a>4.<strong>é…ç½®ç½‘å¡IP</strong></h2><p>é…ç½®è™šæ‹Ÿæœºç½‘ç»œè®¾ç½®</p><p><img src="https://s2.loli.net/2022/04/17/O7vyu8gNMSijxw3.png" alt="image-20220304175639996"></p><p>é…ç½®ç½‘ç»œè™šæ‹Ÿ</p><img src="https://s2.loli.net/2022/04/17/N4KzktMEhfivjTI.png" alt="image-20220304175841165" style="zoom:50%;" /><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-string">&#x27;IPADDR=192.168.248.11&#x27;</span> &gt;&gt;  <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens33<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œçš„<font color='red'>192.168.248.11</font> è¦å’Œä½ çš„VMnet8ç½‘å¡ä¿æŒåœ¨åŒä¸€ç½‘æ®µ(sshè¿æ¥åœ°å€)</p><p>VMWareè½¯ä»¶å·¦ä¸Šè§’ ç¼–è¾‘â€“&gt;è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨â€“&gt;VMnet8åé¢æ˜¯ 192.168.42.1</p><p><img src="https://s2.loli.net/2022/04/17/4tAuQqjs32iVrJF.png" alt="image-20220304175010191"></p><h2 id="5-é…ç½®ç½‘ç»œæ©ç "><a href="#5-é…ç½®ç½‘ç»œæ©ç " class="headerlink" title="5.é…ç½®ç½‘ç»œæ©ç "></a>5.<strong>é…ç½®ç½‘ç»œæ©ç </strong></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-string">&#x27;PREFIX=24&#x27;</span> &gt;&gt;  <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens32<br></code></pre></td></tr></table></figure><h2 id="6-é…ç½®ç½‘å…³"><a href="#6-é…ç½®ç½‘å…³" class="headerlink" title="6.é…ç½®ç½‘å…³"></a>6.<strong>é…ç½®ç½‘å…³</strong></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-string">&#x27;GATEWAY=192.168.42.1&#x27;</span> &gt;&gt;  <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens32<br></code></pre></td></tr></table></figure><p>VMWareè½¯ä»¶å·¦ä¸Šè§’ ç¼–è¾‘â€“&gt;è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨â€“&gt;VMnet8 NATè®¾ç½®é‡Œå¯ä»¥çœ‹åˆ°æ˜¯192.168.42.1</p><h2 id="7-é…ç½®DNS"><a href="#7-é…ç½®DNS" class="headerlink" title="7.é…ç½®DNS"></a>7.<strong>é…ç½®DNS</strong></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">echo <span class="hljs-string">&#x27;DNS1=119.29.29.29&#x27;</span> &gt;&gt;  <span class="hljs-regexp">/etc/</span>sysconfig<span class="hljs-regexp">/network-scripts/i</span>fcfg-ens33<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯255.255.255.0ä»¥å†…</p><h2 id="8-é‡å¯ç½‘å¡"><a href="#8-é‡å¯ç½‘å¡" class="headerlink" title="8.é‡å¯ç½‘å¡"></a>8.<strong>é‡å¯ç½‘å¡</strong></h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl restart network</span><br></code></pre></td></tr></table></figure><h2 id="9-æ£€æŸ¥æ˜¯å¦è¿é€šå¤–ç½‘"><a href="#9-æ£€æŸ¥æ˜¯å¦è¿é€šå¤–ç½‘" class="headerlink" title="9.æ£€æŸ¥æ˜¯å¦è¿é€šå¤–ç½‘"></a>9.<strong>æ£€æŸ¥æ˜¯å¦è¿é€šå¤–ç½‘</strong></h2><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">ping</span> <span class="hljs-selector-attr">[www.baidu.com]</span>(<span class="hljs-attribute">http</span>:<span class="hljs-comment">//www.baidu.com)</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/04/17/jv4ChIgUJ2uSTGL.png" alt="image-20220304175523054"></p><p>å‡ºç°æ•°æ®ä¼ è¾“è¯´æ˜æˆåŠŸäº†ï¼</p><h2 id="10-é…ç½®æœ¬æœºwindows"><a href="#10-é…ç½®æœ¬æœºwindows" class="headerlink" title="10.é…ç½®æœ¬æœºwindows"></a>10.é…ç½®æœ¬æœºwindows</h2><p>æ‰¾åˆ°è¿™ä¸ª</p><p><img src="/Hexo/../img/202203041759401.png" alt="image-20220304175939371"></p><img src="https://s2.loli.net/2022/04/17/89sNRbJlLmYfyO5.png" alt="image-20220304180058700" style="zoom:67%;" /><p><img src="https://s2.loli.net/2022/04/17/xakwJ8VsXWcuz2b.png" alt="image-20220304180445191">é…ç½®å‚ç…§è‡ªå·±é…çš„è™šæ‹Ÿæœºå‚æ•°ï¼</p><p>ï¼</p><p><img src="https://s2.loli.net/2022/04/17/tZ4Me9ra5sXwgGh.png" alt="image-20220304180306155"></p><h2 id="11-è¿æ¥SSH"><a href="#11-è¿æ¥SSH" class="headerlink" title="11.è¿æ¥SSH"></a>11.è¿æ¥SSH</h2><p>æˆ‘ä»¬ä½¿ç”¨xshellè¿æ¥è™šæ‹Ÿæœº</p><p><img src="https://s2.loli.net/2022/04/17/ZXyAOTd3Jx84rQE.png" alt="image-20220304180803510"></p><p><img src="https://s2.loli.net/2022/04/17/gUB23AkTWDhbMyZ.png" alt="image-20220304180816632"></p><p><img src="https://s2.loli.net/2022/04/17/tNDrRGy4Uhd2H3C.png" alt="image-20220304180829449"></p><p>è¾“å…¥è´¦æˆ·å¯†ç </p><h2 id="12-å°è¯•ç½‘ç»œè¿æ¥"><a href="#12-å°è¯•ç½‘ç»œè¿æ¥" class="headerlink" title="12.å°è¯•ç½‘ç»œè¿æ¥"></a>12.å°è¯•ç½‘ç»œè¿æ¥</h2><p><img src="https://s2.loli.net/2022/04/17/yboWtVP8rIn59Zf.png" alt="image-20220304180938879"></p><p>æˆåŠŸï¼</p>]]></content>
    
    
    <categories>
      
      <category>linuxâœ”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linuxâœ”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringbootåŸºç¡€è®²ä¹‰</title>
    <link href="/Hexo/2022/02/10/Springboot%E5%9F%BA%E7%A1%80%E8%AE%B2%E4%B9%89/"/>
    <url>/Hexo/2022/02/10/Springboot%E5%9F%BA%E7%A1%80%E8%AE%B2%E4%B9%89/</url>
    
    <content type="html"><![CDATA[<h2 id="01-ä»Šæ—¥å†…å®¹"><a href="#01-ä»Šæ—¥å†…å®¹" class="headerlink" title="01-ä»Šæ—¥å†…å®¹"></a><strong>01-ä»Šæ—¥å†…å®¹</strong></h2><ul><li>Springæ¦‚è¿°ã€å¿«é€Ÿå…¥é—¨</li><li>SpringBooté…ç½®</li><li>SpringBootæ•´åˆ</li></ul><h2 id="02-SpringBootæ¦‚è¿°"><a href="#02-SpringBootæ¦‚è¿°" class="headerlink" title="02-SpringBootæ¦‚è¿°"></a><strong>02-SpringBootæ¦‚è¿°</strong></h2><p> SpringBootæä¾›äº†ä¸€ç§å¿«é€Ÿä½¿ç”¨Springçš„æ–¹å¼ï¼ŒåŸºäºçº¦å®šä¼˜äºé…ç½®çš„æ€æƒ³ï¼Œå¯ä»¥è®©å¼€å‘äººå‘˜ä¸å¿…åœ¨é…ç½®ä¸é€»è¾‘ä¸šåŠ¡ä¹‹é—´è¿›è¡Œæ€ç»´çš„åˆ‡æ¢ï¼Œå…¨èº«å¿ƒçš„æŠ•å…¥åˆ°é€»è¾‘ä¸šåŠ¡çš„ä»£ç ç¼–å†™ä¸­ï¼Œä»è€Œå¤§å¤§æé«˜äº†å¼€å‘çš„æ•ˆç‡</p><p><strong>SpringBootåŠŸèƒ½</strong></p><p> <strong>1</strong>ï¼‰ <strong>è‡ªåŠ¨é…ç½®</strong></p><p>Spring Bootçš„è‡ªåŠ¨é…ç½®æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶ï¼ˆæ›´å‡†ç¡®åœ°è¯´ï¼Œæ˜¯åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼‰çš„è¿‡ç¨‹ï¼Œè€ƒè™‘äº†ä¼—å¤šå› ç´ ï¼Œæ‰å†³å®šSpringé…ç½®åº”è¯¥ç”¨å“ªä¸ªï¼Œä¸è¯¥ç”¨å“ªä¸ªã€‚è¯¥è¿‡ç¨‹æ˜¯SpringBootè‡ªåŠ¨å®Œæˆçš„ã€‚</p><p><strong>2</strong>ï¼‰ <strong>èµ·æ­¥ä¾èµ–</strong></p><p>èµ·æ­¥ä¾èµ–æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªMavené¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆProject Object Modelï¼ŒPOMï¼‰ï¼Œå®šä¹‰äº†å¯¹å…¶ä»–åº“çš„ä¼ é€’ä¾èµ–ï¼Œè¿™äº›ä¸œè¥¿åŠ åœ¨ä¸€èµ·å³æ”¯æŒæŸé¡¹åŠŸèƒ½ã€‚</p><p>ç®€å•çš„è¯´ï¼Œèµ·æ­¥ä¾èµ–å°±æ˜¯å°†å…·å¤‡æŸç§åŠŸèƒ½çš„åæ ‡æ‰“åŒ…åˆ°ä¸€èµ·ï¼Œå¹¶æä¾›ä¸€äº›é»˜è®¤çš„åŠŸèƒ½ã€‚</p><p><strong>3</strong>ï¼‰ <strong>è¾…åŠ©åŠŸèƒ½</strong></p><p>æä¾›äº†ä¸€äº›å¤§å‹é¡¹ç›®ä¸­å¸¸è§çš„éåŠŸèƒ½æ€§ç‰¹æ€§ï¼Œå¦‚åµŒå…¥å¼æœåŠ¡å™¨ã€å®‰å…¨ã€æŒ‡æ ‡ï¼Œå¥åº·æ£€æµ‹ã€å¤–éƒ¨é…ç½®ç­‰ã€‚</p><p><strong>æ³¨æ„ï¼šSpring Boot å¹¶ä¸æ˜¯å¯¹ Spring åŠŸèƒ½ä¸Šçš„å¢å¼ºï¼Œè€Œæ˜¯æä¾›äº†ä¸€ç§å¿«é€Ÿä½¿ç”¨ Spring çš„æ–¹å¼ã€‚</strong></p><h2 id="03-SpringBootå¿«é€Ÿå…¥é—¨"><a href="#03-SpringBootå¿«é€Ÿå…¥é—¨" class="headerlink" title="03-SpringBootå¿«é€Ÿå…¥é—¨"></a><strong>03-SpringBootå¿«é€Ÿå…¥é—¨</strong></h2><p> <strong>éœ€æ±‚</strong>ï¼šæ­å»ºSpringBootå·¥ç¨‹ï¼Œå®šä¹‰HelloController.hello()æ–¹æ³•ï¼Œè¿”å›â€Hello SpringBoot!â€ã€‚</p><p><strong>å®ç°æ­¥éª¤</strong>ï¼š</p><p>â‘ åˆ›å»ºMavené¡¹ç›®</p><p>â‘¡å¯¼å…¥SpringBootèµ·æ­¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--springbootå·¥ç¨‹éœ€è¦ç»§æ‰¿çš„çˆ¶å·¥ç¨‹--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.8.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--webå¼€å‘çš„èµ·æ­¥ä¾èµ–--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â‘¢å®šä¹‰Controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot; hello Spring Boot !&quot;</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>â‘£ç¼–å†™å¼•å¯¼ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¼•å¯¼ç±»ã€‚ SpringBooté¡¹ç›®çš„å…¥å£</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(HelloApplication.class,args);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>â‘¤å¯åŠ¨æµ‹è¯•</p><h2 id="04-å¿«é€Ÿæ„å»ºSpringBootå·¥ç¨‹"><a href="#04-å¿«é€Ÿæ„å»ºSpringBootå·¥ç¨‹" class="headerlink" title="04-å¿«é€Ÿæ„å»ºSpringBootå·¥ç¨‹"></a><strong>04-å¿«é€Ÿæ„å»ºSpringBootå·¥ç¨‹</strong></h2><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee617a.png" alt="1571298554472"></p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee618a.png" alt="1571298596604"></p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee619b.png" alt="1571298632944"></p><h2 id="05-SpringBootèµ·æ­¥ä¾èµ–åŸç†åˆ†æ"><a href="#05-SpringBootèµ·æ­¥ä¾èµ–åŸç†åˆ†æ" class="headerlink" title="05-SpringBootèµ·æ­¥ä¾èµ–åŸç†åˆ†æ"></a>05-SpringBootèµ·æ­¥ä¾èµ–åŸç†åˆ†æ</h2><ul><li><p>åœ¨spring-boot-starter-parentä¸­å®šä¹‰äº†å„ç§æŠ€æœ¯çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œç»„åˆäº†ä¸€å¥—æœ€ä¼˜æ­é…çš„æŠ€æœ¯ç‰ˆæœ¬ã€‚</p></li><li><p>åœ¨å„ç§starterä¸­ï¼Œå®šä¹‰äº†å®Œæˆè¯¥åŠŸèƒ½éœ€è¦çš„åæ ‡åˆé›†ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†ç‰ˆæœ¬ä¿¡æ¯æ¥è‡ªäºçˆ¶å·¥ç¨‹ã€‚</p></li><li><p>æˆ‘ä»¬çš„å·¥ç¨‹ç»§æ‰¿parentï¼Œå¼•å…¥starteråï¼Œé€šè¿‡ä¾èµ–ä¼ é€’ï¼Œå°±å¯ä»¥ç®€å•æ–¹ä¾¿è·å¾—éœ€è¦çš„jaråŒ…ï¼Œå¹¶ä¸”ä¸ä¼šå­˜åœ¨ç‰ˆæœ¬å†²çªç­‰é—®é¢˜ã€‚</p></li></ul><h2 id="06-SpringBooté…ç½®-é…ç½®æ–‡ä»¶åˆ†ç±»"><a href="#06-SpringBooté…ç½®-é…ç½®æ–‡ä»¶åˆ†ç±»" class="headerlink" title="06-SpringBooté…ç½®-é…ç½®æ–‡ä»¶åˆ†ç±»"></a><strong>06-SpringBooté…ç½®-é…ç½®æ–‡ä»¶åˆ†ç±»</strong></h2><p>SpringBootæ˜¯åŸºäºçº¦å®šçš„ï¼Œæ‰€ä»¥å¾ˆå¤šé…ç½®éƒ½æœ‰é»˜è®¤å€¼ï¼Œä½†å¦‚æœæƒ³ä½¿ç”¨è‡ªå·±çš„é…ç½®æ›¿æ¢é»˜è®¤é…ç½®çš„è¯ï¼Œå°±å¯ä»¥ä½¿ç”¨application.propertiesæˆ–è€…application.ymlï¼ˆapplication.yamlï¼‰è¿›è¡Œé…ç½®ã€‚</p><ol><li><p>é»˜è®¤é…ç½®æ–‡ä»¶åç§°ï¼šapplication</p></li><li><p>åœ¨åŒä¸€çº§ç›®å½•ä¸‹ä¼˜å…ˆçº§ä¸ºï¼šproperties&gt;yml &gt; yaml</p></li></ol><p>ä¾‹å¦‚ï¼šé…ç½®å†…ç½®Tomcatçš„ç«¯å£</p><p>propertiesï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">8080</span><br></code></pre></td></tr></table></figure><p>yml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server: port:</span> <span class="hljs-number">8080</span><br><br></code></pre></td></tr></table></figure><h2 id="07-SpringBooté…ç½®-yamlåŸºæœ¬è¯­æ³•"><a href="#07-SpringBooté…ç½®-yamlåŸºæœ¬è¯­æ³•" class="headerlink" title="07-SpringBooté…ç½®-yamlåŸºæœ¬è¯­æ³•"></a><strong>07-SpringBooté…ç½®-yamlåŸºæœ¬è¯­æ³•</strong></h2><ul><li>å¤§å°å†™æ•æ„Ÿ</li><li>æ•°æ®å€¼å‰è¾¹å¿…é¡»æœ‰ç©ºæ ¼ï¼Œä½œä¸ºåˆ†éš”ç¬¦</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»</li><li>ç¼©è¿›æ—¶ä¸å…è®¸ä½¿ç”¨Tabé”®ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ï¼ˆå„ä¸ªç³»ç»Ÿ Tabå¯¹åº”çš„ ç©ºæ ¼æ•°ç›®å¯èƒ½ä¸åŒï¼Œå¯¼è‡´å±‚æ¬¡æ··ä¹±ï¼‰ã€‚</li><li>ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦ä¾§å¯¹é½å³å¯</li><li>â€˜â€™#â€ è¡¨ç¤ºæ³¨é‡Šï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥ã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span> <br><span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>  <br>    <span class="hljs-attr">address:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br><span class="hljs-attr">name:</span> <span class="hljs-string">abc</span><br><br></code></pre></td></tr></table></figure><h2 id="08-SpringBooté…ç½®-yamlæ•°æ®æ ¼å¼"><a href="#08-SpringBooté…ç½®-yamlæ•°æ®æ ¼å¼" class="headerlink" title="08-SpringBooté…ç½®-yamlæ•°æ®æ ¼å¼"></a><strong>08-SpringBooté…ç½®-yamlæ•°æ®æ ¼å¼</strong></h2><p>**å¯¹è±¡(map)**ï¼šé”®å€¼å¯¹çš„é›†åˆã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">person:</span>  <br>   <span class="hljs-attr">name:</span> <span class="hljs-string">zhangsan</span><br><span class="hljs-comment"># è¡Œå†…å†™æ³•</span><br><span class="hljs-attr">person:</span> &#123;<span class="hljs-attr">name:</span> <span class="hljs-string">zhangsan</span>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>æ•°ç»„</strong>ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">address:</span><br><span class="hljs-keyword"></span>  - <span class="hljs-keyword">beijing</span><br><span class="hljs-keyword"></span>  - <span class="hljs-keyword">shanghai</span><br><span class="hljs-keyword"></span><span class="hljs-comment"># è¡Œå†…å†™æ³•</span><br><span class="hljs-keyword">address: </span>[<span class="hljs-keyword">beijing,shanghai]</span><br><span class="hljs-keyword"></span><br></code></pre></td></tr></table></figure><p><strong>çº¯é‡</strong>ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">msg1:</span> <span class="hljs-string">&#x27;hello \n world&#x27;</span>  <span class="hljs-comment"># å•å¼•å¿½ç•¥è½¬ä¹‰å­—ç¬¦</span><br><span class="hljs-attr">msg2:</span> <span class="hljs-string">&quot;hello \n world&quot;</span>  <span class="hljs-comment"># åŒå¼•è¯†åˆ«è½¬ä¹‰å­—ç¬¦</span><br><br></code></pre></td></tr></table></figure><p><strong>å‚æ•°å¼•ç”¨</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">lisi</span> <br><span class="hljs-attr">person:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">$&#123;name&#125;</span> <span class="hljs-comment"># å¼•ç”¨ä¸Šè¾¹å®šä¹‰çš„nameå€¼</span><br><br></code></pre></td></tr></table></figure><h2 id="09-SpringBooté…ç½®-è·å–æ•°æ®-1"><a href="#09-SpringBooté…ç½®-è·å–æ•°æ®-1" class="headerlink" title="09-SpringBooté…ç½®-è·å–æ•°æ®_1"></a>09-SpringBooté…ç½®-è·å–æ•°æ®_1</h2><p>@<strong>Value</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">#è·å–æ™®é€šé…ç½®<br><span class="hljs-meta">@Value(&quot;$&#123;name&#125;&quot;)</span><br> <span class="hljs-keyword">private</span> String name;<br> #è·å–å¯¹è±¡å±æ€§<br> <span class="hljs-meta">@Value(&quot;$&#123;person.name&#125;&quot;)</span><br> <span class="hljs-keyword">private</span> String name2;<br>#è·å–æ•°ç»„<br> <span class="hljs-meta">@Value(&quot;$&#123;address[0]&#125;&quot;)</span><br> <span class="hljs-keyword">private</span> String address1;<br>#è·å–çº¯é‡<br> <span class="hljs-meta">@Value(&quot;$&#123;msg1&#125;&quot;)</span><br> <span class="hljs-keyword">private</span> String msg1;<br><br></code></pre></td></tr></table></figure><p><strong>Evironment</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br> <span class="hljs-keyword">private</span> Environment env;<br><br>System.out.println(env.getProperty(<span class="hljs-string">&quot;person.name&quot;</span>));<br><br> System.out.println(env.getProperty(<span class="hljs-string">&quot;address[0]&quot;</span>));<br><br></code></pre></td></tr></table></figure><h2 id="10-SpringBooté…ç½®-è·å–æ•°æ®-2"><a href="#10-SpringBooté…ç½®-è·å–æ•°æ®-2" class="headerlink" title="10-SpringBooté…ç½®-è·å–æ•°æ®_2"></a><strong>10-SpringBooté…ç½®-è·å–æ•°æ®_2</strong></h2><p> @ConfigurationProperties </p><p><strong>æ³¨æ„</strong>ï¼šprefixä¸€å®šè¦å†™</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> String[] address;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String[] getAddress() &#123;<br>        <span class="hljs-keyword">return</span> address;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAddress</span><span class="hljs-params">(String[] address)</span> &#123;<br>        <span class="hljs-built_in">this</span>.address = address;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Person&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="11-SpringBooté…ç½®-profile"><a href="#11-SpringBooté…ç½®-profile" class="headerlink" title="11-SpringBooté…ç½®-profile"></a><strong>11-SpringBooté…ç½®-profile</strong></h2><ol><li><p><strong>profileæ˜¯ç”¨æ¥å®Œæˆä¸åŒç¯å¢ƒä¸‹ï¼Œé…ç½®åŠ¨æ€åˆ‡æ¢åŠŸèƒ½çš„</strong>ã€‚</p></li><li><p><strong>profileé…ç½®æ–¹å¼</strong></p><pre><code class="hljs">  å¤šprofileæ–‡ä»¶æ–¹å¼ï¼šæä¾›å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ªä»£è¡¨ä¸€ç§ç¯å¢ƒã€‚        application-dev.properties/yml å¼€å‘ç¯å¢ƒ        application-test.properties/yml æµ‹è¯•ç¯å¢ƒ        application-pro.properties/yml ç”Ÿäº§ç¯å¢ƒ</code></pre><p>   ymlå¤šæ–‡æ¡£æ–¹å¼ï¼š</p><pre><code class="hljs">        åœ¨ymlä¸­ä½¿ç”¨  --- åˆ†éš”ä¸åŒé…ç½®</code></pre></li><li><p><strong>profileæ¿€æ´»æ–¹å¼</strong></p></li></ol><ul><li>é…ç½®æ–‡ä»¶ï¼š å†é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼šspring.profiles.active&#x3D;dev</li><li>è™šæ‹Ÿæœºå‚æ•°ï¼šåœ¨VM options æŒ‡å®šï¼š-Dspring.profiles.active&#x3D;dev</li><li>å‘½ä»¤è¡Œå‚æ•°ï¼šjava â€“jar xxx.jar  â€“spring.profiles.active&#x3D;dev</li></ul><h2 id="12-SpringBooté…ç½®-é¡¹ç›®å†…éƒ¨é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº"><a href="#12-SpringBooté…ç½®-é¡¹ç›®å†…éƒ¨é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº" class="headerlink" title="12-SpringBooté…ç½®-é¡¹ç›®å†…éƒ¨é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº"></a><strong>12-SpringBooté…ç½®-é¡¹ç›®å†…éƒ¨é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº</strong></h2><p> åŠ è½½é¡ºåºä¸ºä¸Šæ–‡çš„æ’åˆ—é¡ºåºï¼Œé«˜ä¼˜å…ˆçº§é…ç½®çš„å±æ€§ä¼šç”Ÿæ•ˆ</p><ul><li>file:.&#x2F;config&#x2F;ï¼šå½“å‰é¡¹ç›®ä¸‹çš„&#x2F;configç›®å½•ä¸‹</li><li>file:.&#x2F;           ï¼šå½“å‰é¡¹ç›®çš„æ ¹ç›®å½•</li><li>classpath:&#x2F;config&#x2F;ï¼šclasspathçš„&#x2F;configç›®å½•</li><li>classpath:&#x2F;  ï¼šclasspathçš„æ ¹ç›®å½•</li></ul><h2 id="13-SpringBooté…ç½®-é¡¹ç›®å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº"><a href="#13-SpringBooté…ç½®-é¡¹ç›®å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº" class="headerlink" title="13-SpringBooté…ç½®-é¡¹ç›®å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº"></a><strong>13-SpringBooté…ç½®-é¡¹ç›®å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº</strong></h2><p> å¤–éƒ¨é…ç½®æ–‡ä»¶çš„ä½¿ç”¨æ˜¯ä¸ºäº†å¯¹èƒ½ä¸æ–‡ä»¶çš„é…åˆ</p><p>1.å‘½ä»¤è¡Œ</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">java -jar app.jar --name=&quot;Springâ€œ --server.port=<span class="hljs-number">9000</span><br></code></pre></td></tr></table></figure><p>2.æŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">java -jar myproject.jar --spring.config.location=e://application.properties<br></code></pre></td></tr></table></figure><p>3.å¤–éƒ¨ä¸å¸¦profileçš„propertiesæ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">classpath:/config/application.properties<br>classpath:/application.properties<br></code></pre></td></tr></table></figure><p> <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config">https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config</a></p><p><img src="https://pic.imgdb.cn/item/6373870116f2c2beb19b2154.png" alt="1571299932949"></p><h2 id="14-SpringBootæ•´åˆJunit"><a href="#14-SpringBootæ•´åˆJunit" class="headerlink" title="14-SpringBootæ•´åˆJunit"></a><strong>14-SpringBootæ•´åˆJunit</strong></h2><ol><li><p>æ­å»ºSpringBootå·¥ç¨‹</p></li><li><p>å¼•å…¥starter-testèµ·æ­¥ä¾èµ–</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>       <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="3"><li>ç¼–å†™æµ‹è¯•ç±»</li></ol><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs less"><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æµ‹è¯•ç±»</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-variable">@RunWith</span>(SpringRunner.class)<br><span class="hljs-variable">@SpringBootTest</span>(classes = SpringbootJunitApplication.class )<br>public class UserServiceTest &#123;<br><br>    <span class="hljs-variable">@Test</span><br>    public void test()&#123;<br>        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-number">111</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>4.æµ‹è¯•</p><h2 id="15-SpringBootæ•´åˆmybatis"><a href="#15-SpringBootæ•´åˆmybatis" class="headerlink" title="15-SpringBootæ•´åˆmybatis"></a><strong>15-SpringBootæ•´åˆmybatis</strong></h2><p>â‘ æ­å»ºSpringBootå·¥ç¨‹</p><p>â‘¡å¼•å…¥mybatisèµ·æ­¥ä¾èµ–ï¼Œæ·»åŠ mysqlé©±åŠ¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--&lt;scope&gt;runtime&lt;/scope&gt;--&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â‘¢ç¼–å†™DataSourceå’ŒMyBatisç›¸å…³é…ç½®</p><p>application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># datasource</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql:///springboot?serverTimezone=UTC</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><br><br><span class="hljs-comment"># mybatis</span><br><span class="hljs-attr">mybatis:</span><br>  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*Mapper.xml</span> <span class="hljs-comment"># mapperæ˜ å°„æ–‡ä»¶è·¯å¾„</span><br>  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.itheima.springbootmybatis.domain</span><br><br>  <span class="hljs-comment"># config-location:  # æŒ‡å®šmybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><p>â‘£å®šä¹‰è¡¨å’Œå®ä½“ç±»</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> int id;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> username;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> password;<br><br><br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">getId</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setId</span>(<span class="hljs-params">int id</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getUsername</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> username;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setUsername</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">username</span> = username;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getPassword</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> password;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setPassword</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> password</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span> = password;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;id=&quot;</span> + id +<br>                <span class="hljs-string">&quot;, username=&#x27;&quot;</span> + username + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, password=&#x27;&quot;</span> + password + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â‘¤ç¼–å†™daoå’Œmapperæ–‡ä»¶&#x2F;çº¯æ³¨è§£å¼€å‘</p><p>ç¼–å†™dao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><br><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserXmlMapper</span> &#123;<br><br>    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">findAll</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>mapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.itheima.springbootmybatis.mapper.UserXmlMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>        select * from t_user<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p>çº¯æ³¨è§£å¼€å‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><br><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br><br>    <span class="hljs-meta">@Select(&quot;select * from t_user&quot;)</span><br>    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">findAll</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>â‘¥æµ‹è¯•</p><h2 id="16-SpringBootæ•´åˆredis"><a href="#16-SpringBootæ•´åˆredis" class="headerlink" title="16-SpringBootæ•´åˆredis"></a><strong>16-SpringBootæ•´åˆredis</strong></h2><p>â‘ æ­å»ºSpringBootå·¥ç¨‹</p><p>â‘¡å¼•å…¥redisèµ·æ­¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â‘¢é…ç½®redisç›¸å…³å±æ€§</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <span class="hljs-comment"># redisçš„ä¸»æœºip</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span><br><br></code></pre></td></tr></table></figure><p>â‘£æ³¨å…¥RedisTemplateæ¨¡æ¿</p><p>â‘¤ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RunWith(SpringRunner.class)</span><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootRedisApplicationTests</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisTemplate redisTemplate;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSet</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//å­˜å…¥æ•°æ®</span><br>        redisTemplate.boundValueOps(<span class="hljs-string">&quot;name&quot;</span>).set(<span class="hljs-string">&quot;zhangsan&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGet</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//è·å–æ•°æ®</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> redisTemplate.boundValueOps(<span class="hljs-string">&quot;name&quot;</span>).get();<br>        System.out.println(name);<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>SpringBootè®²ä¹‰</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringbootåŸºç¡€</title>
    <link href="/Hexo/2022/02/09/%E9%BB%91%E9%A9%ACSpringBoot%E8%AE%B2%E4%B9%89/"/>
    <url>/Hexo/2022/02/09/%E9%BB%91%E9%A9%ACSpringBoot%E8%AE%B2%E4%B9%89/</url>
    
    <content type="html"><![CDATA[<hr><h2 id="categories-SpringBootè®²ä¹‰"><a href="#categories-SpringBootè®²ä¹‰" class="headerlink" title="categories: SpringBootè®²ä¹‰"></a>categories: SpringBootè®²ä¹‰</h2><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>â€‹        æ­£å¦‚ä¸Šé¢æåˆ°çš„ï¼Œè¿™é—¨æŠ€æœ¯æ˜¯ç”¨æ¥åŠ é€Ÿå¼€å‘Springç¨‹åºçš„ï¼Œå› æ­¤å­¦ä¹ è¿™é—¨æŠ€æœ¯æ˜¯æœ‰ä¸€å®šçš„é—¨æ§›çš„ã€‚ä½ å¯ä»¥ç†è§£ä¸ºä½ ç°åœ¨æ˜¯ä¸€é—¨ä¼ ç»Ÿçš„æ‰‹å·¥è‰ºäººï¼Œç°åœ¨å·¥è‰ºå‡çº§ï¼Œå¯ä»¥åŠ é€Ÿä½ çš„ç”Ÿäº§åˆ¶ä½œè¿‡ç¨‹ï¼Œä½†æ˜¯å‰ææ˜¯ä½ è¦ä¼šåŸå§‹å·¥è‰ºï¼Œç„¶åæ‰èƒ½å­¦ä¹ æ–°çš„å·¥è‰ºã€‚å—¯ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Ÿæœ‰ä¸€å®šçš„é—¨æ§›ï¼Œè‡³å°‘Springæ€ä¹ˆå›äº‹ï¼Œä¸Springé…åˆåœ¨ä¸€èµ·å·¥ä½œçš„ä¸€å †æŠ€æœ¯åˆæ˜¯æ€ä¹ˆå›äº‹ï¼Œè¿™äº›ææ˜ç™½æ‰èƒ½æ¥çœ‹è¿™ä¸ªæŠ€æœ¯ï¼Œä¸ç„¶å°±åªèƒ½å­¦ä¸ªçš®æ¯›ï¼Œæˆ–è€…å­¦ç€å­¦ç€å°±å¼€å§‹å› ä¸ºå…¶ä»–æŠ€æœ¯ä¸å¤ªè¿‡å…³ï¼Œç„¶åå°±å­¦ä¸ä¸‹å»äº†ï¼Œç„¶åï¼Œå°±æ²¡æœ‰ç„¶åäº†ï¼Œæœæ–­å¼ƒå‘äº†ã€‚ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæ—¢æ¥ä¹‹åˆ™å®‰ä¹‹ï¼ŒåŠ æ²¹å­¦ä¹ å§ï¼ŒæŠ•èµ„è‡ªå·±è‚¯å®šæ˜¯æ²¡æ¯›ç—…çš„ã€‚</p><h3 id="è¯¾ç¨‹å†…å®¹è¯´æ˜"><a href="#è¯¾ç¨‹å†…å®¹è¯´æ˜" class="headerlink" title="è¯¾ç¨‹å†…å®¹è¯´æ˜"></a>è¯¾ç¨‹å†…å®¹è¯´æ˜</h3><p>â€‹        SpringBootè¿™é—¨æŠ€æœ¯è¯¾ç¨‹æ‰€åŒ…å«çš„æŠ€æœ¯ç‚¹å…¶å®å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œä½†æ˜¯å›´ç»•ç€SpringBootçš„å‘¨è¾¹çŸ¥è¯†ï¼Œä¹Ÿå°±æ˜¯SpringBootæ•´åˆå…¶ä»–æŠ€æœ¯ï¼Œè¿™æ ·çš„çŸ¥è¯†é‡å¾ˆå¤§ï¼Œä¾‹å¦‚SpringBootæ•´åˆMyBatisç­‰ç­‰ã€‚å› æ­¤ä¸ºäº†èƒ½å¤Ÿå°†æœ¬è¯¾ç¨‹åˆ¶ä½œçš„èƒ½å¤Ÿé€‚åº”äºå„ä¸ªå±‚é¢çš„å­¦ä¹ è€…è¿›è¡Œå­¦ä¹ ï¼Œæœ¬å¥—è¯¾ç¨‹ä¼šé’ˆå¯¹å°ç™½ï¼Œåˆå­¦è€…ï¼Œå¼€å‘è€…ä¸‰ç§ä¸åŒçš„äººç¾¤æ¥è®¾è®¡å…¨å¥—è¯¾ç¨‹ã€‚å…·ä½“è¿™ä¸‰ç§äººç¾¤å¦‚ä½•åˆ’åˆ†ï¼Œå°±æŒ‰ç…§æˆ‘çš„æè¿°å½¢å¼æ¥åˆ†å§ï¼Œå„ä½å°ä¼™ä¼´å¯ä»¥å¯¹å·å…¥åº§ï¼Œæ¯ç§äººç¾¤çœ‹è¯¾ç¨‹çš„èµ·å§‹ä½ç½®ç•¥æœ‰å·®åˆ«ã€‚</p><table><thead><tr><th>å­¦ä¹ è€…</th><th>å½’ç±»æ–¹å¼</th></tr></thead><tbody><tr><td><strong>å°ç™½</strong></td><td>å®Œå…¨æ²¡æœ‰ç”¨è¿‡SpringBootæŠ€æœ¯</td></tr><tr><td><strong>åˆå­¦è€…</strong></td><td>èƒ½ä½¿ç”¨SpringBootæŠ€æœ¯å®ŒæˆåŸºç¡€çš„SSMæ•´åˆ</td></tr><tr><td><strong>å¼€å‘è€…</strong></td><td>èƒ½ä½¿ç”¨SpringBootæŠ€æœ¯å®ç°å¸¸è§çš„æŠ€æœ¯æ•´åˆå·¥ä½œ</td></tr></tbody></table><p>â€‹        ç®€å•è¯´å°±æ˜¯ä½ èƒ½ç”¨SpringBootåšå¤šå°‘ä¸œè¥¿ï¼Œä¸€ç‚¹ä¸ä¼šå°±æ˜¯å°ç™½ï¼Œä¼šä¸€ç‚¹å°±æ˜¯åˆå­¦è€…ï¼Œå¤§éƒ¨åˆ†éƒ½ä¼šå°±æ˜¯å¼€å‘è€…ã€‚å…¶å®è¿™ä¸ªåˆ’åˆ†ä¹Ÿä¸ç”¨å¤ªçº ç»“ï¼Œè¿™ä¸ªåˆ’åˆ†ä»…ä»…æ˜¯ä¸ºäº†å¸®åŠ©ä½ å¯¹æœ¬æŠ€æœ¯è¯¾ç¨‹æ‰€åŒ…å«çš„é˜¶æ®µæ¨¡å—åˆ’åˆ†åšä¸€ä¸ªæ¸…æ™°è®¤çŸ¥ï¼Œå› ä¸ºæœ¬è¯¾ç¨‹ä¸­ä¼šå°†SpringBootæŠ€æœ¯åˆ’åˆ†æˆ4ä¸ªå•å…ƒï¼Œæ¯ä¸ªå•å…ƒæ˜¯é’ˆå¯¹ä¸åŒçš„å­¦ä¹ è€…å‡†å¤‡çš„ã€‚</p><table><thead><tr><th>å­¦ä¹ è€…</th><th>è¯¾ç¨‹å•å…ƒ</th></tr></thead><tbody><tr><td><strong>å°ç™½</strong></td><td><font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font></td></tr><tr><td><strong>åˆå­¦è€…</strong></td><td><font color="#cc0000"><b>åº”ç”¨ç¯‡</b></font>ï¼ˆ  è¿ç»´å®ç”¨ç¯‡  &amp;  å¼€å‘å®ç”¨ç¯‡  ï¼‰</td></tr><tr><td><strong>å¼€å‘è€…</strong></td><td><font color="#990000"><b>åŸç†ç¯‡</b></font></td></tr></tbody></table><p>â€‹        çœ‹å®Œè¿™ä¸ªåˆ’åˆ†ä½ å°±åº”è¯¥æœ‰è¿™ä¹ˆä¸ªæ¦‚å¿µï¼Œæˆ‘æ²¡æœ‰ç”¨è¿‡SpringBootæŠ€æœ¯ï¼Œæ‰€ä»¥ä»åŸºç¡€ç¯‡å¼€å§‹å­¦ä¹ ï¼›æˆ–è€…æˆ‘ä¼šä¸€ç‚¹SpringBootæŠ€æœ¯ï¼Œé‚£æˆ‘ä»å®ç”¨ç¯‡å¼€å§‹å­¦å°±å¥½äº†ã€‚å°±æ˜¯è¿™ä¸ªæ„æ€ã€‚</p><p>â€‹        æ¯ä¸ªè¯¾ç¨‹å•å…ƒå†…å®¹è®¾ç½®ä¸åŒï¼Œç›®æ ‡ä¹Ÿä¸ä¸€æ ·ï¼Œä½œä¸ºå­¦ä¹ è€…å¦‚æœæƒ³è¾¾æˆæœ€ä½³çš„å­¦ä¹ æ•ˆæœï¼Œæœ€å¥½æ˜ç¡®è‡ªå·±çš„å­¦ä¹ ç›®æ ‡å†è¿›è¡Œå­¦ä¹ ï¼Œè¿™æ ·ç›®æ ‡æ˜ç¡®ï¼Œå­¦ä¹ çš„æ—¶å€™èƒ½å¤Ÿæ›´è½»æ¾ï¼Œä½ å°±ä¸ä¼šåœ¨å­¦ä¹ çš„æ—¶å€™çº ç»“å¦‚ä¸‹çš„é—®é¢˜äº†ã€‚æ¯”å¦‚å­¦ç€<font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font>åœ¨é‚£æƒ³ï¼Œè¿™ä¸ªä¸œè¥¿æ˜¯ä¸ªä»€ä¹ˆåŸç†å•Šï¼Ÿè¿™ä¸ªä¸œè¥¿æ˜¯è¿™ä¹ˆç”¨çš„ï¼Œé‚£ä¸ªä¸œè¥¿è¯¥æ€ä¹ˆç”¨å•Šï¼Ÿå› ä¸ºåŸç†æ€§çš„å†…å®¹ç»Ÿä¸€æ”¾ç½®åˆ°äº†<font color="#990000"><b>åŸç†ç¯‡</b></font>è®²è§£äº†ï¼Œåº”ç”¨ç›¸å…³çš„å†…å®¹ç»Ÿä¸€æ”¾åˆ°<font color="#cc0000"><b>åº”ç”¨ç¯‡</b></font>é‡Œé¢è®²è§£ï¼Œä½ åœ¨<font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font>é˜¶æ®µçº ç»“ä¹Ÿæ²¡æœ‰ç”¨ï¼Œè¿™ä¸€éƒ¨åˆ†ä¸è®²è¿™äº›çŸ¥è¯†ï¼Œåœ¨<font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font>å…ˆæŠŠSpringBootçš„åŸºç¡€ä½¿ç”¨æŒæ¡å®Œå†è¯´åé¢çš„çŸ¥è¯†å§ã€‚</p><p>â€‹        æ­¤å¤–è¿˜æœ‰ä¸€ç‚¹éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œç›®å‰SpringBootæŠ€æœ¯å‘å±•é€Ÿåº¦å¾ˆå¿«ï¼Œæ›´æ–°é€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œå› æ­¤åç»­è¿˜ä¼šå¯¹æœ¬å¥—è¯¾ç¨‹è¿›è¡ŒæŒç»­æ›´æ–°ï¼Œç‰¹æ­¤åœ¨ä¸‰ä¸ªè¯¾ç¨‹å•å…ƒçš„åŸºç¡€ä¸Šè¿½åŠ ä¸€ä¸ª<strong>ç•ªå¤–ç¯‡</strong>ã€‚ç•ªå¤–ç¯‡çš„è®¾ç½®ä¸ºäº†è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š</p><ul><li>æŒç»­æ›´æ–°SpringBootåç»­å‘å±•å‡ºç°çš„æ–°æŠ€æœ¯</li><li>è®²è§£éƒ¨åˆ†çŸ¥è¯†ç‚¹è§„æ¨¡è¾ƒå¤§çš„æ”¯çº¿çŸ¥è¯†ï¼ˆä¾‹å¦‚WebFluxï¼‰</li><li>æ‰©å±•éå®ç”¨æ€§çŸ¥è¯†ï¼Œæ‰©å±•å­¦ä¹ è€…è§†é‡</li></ul><p>â€‹        æ¯ä¸€ä¸ªè¯¾ç¨‹å•å…ƒçš„å­¦ä¹ ç›®æ ‡å¦‚ä¸‹ï¼Œè¯·å„ä½æŸ¥æ”¶ï¼Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å¯ä»¥é˜¶æ®µæ€§çš„ç»™è‡ªå·±æä¸ªé—®é¢˜ï¼Œä¸‹é¢åˆ—å‡ºæ¥çš„è¿™äº›å­¦ä¹ ç›®æ ‡ä½ æ˜¯å¦è¾¾æˆäº†ï¼Œå¯ä»¥æ£€éªŒä½ çš„å­¦ä¹ æˆæœã€‚</p><table><thead><tr><th>è¯¾ç¨‹å•å…ƒ</th><th>å­¦ä¹ ç›®æ ‡</th></tr></thead><tbody><tr><td><font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font></td><td>èƒ½å¤Ÿåˆ›å»ºSpringBootå·¥ç¨‹<br/>åŸºäºSpringBootå®ç°ssm&#x2F;ssmpæ•´åˆ</td></tr><tr><td><font color="#cc0000"><b>åº”ç”¨ç¯‡</b></font></td><td>èƒ½å¤ŸæŒæ¡SpringBootç¨‹åºå¤šç¯å¢ƒå¼€å‘<br/>èƒ½å¤ŸåŸºäºLinuxç³»ç»Ÿå‘å¸ƒSpringBootå·¥ç¨‹<br/>èƒ½å¤Ÿè§£å†³çº¿ä¸Šçµæ´»é…ç½®SpringBootå·¥ç¨‹çš„éœ€æ±‚<br/>èƒ½å¤ŸåŸºäºSpringBootæ•´åˆä»»æ„ç¬¬ä¸‰æ–¹æŠ€æœ¯</td></tr><tr><td><font color="#990000"><b>åŸç†ç¯‡</b></font></td><td>æŒæ¡SpringBootå†…éƒ¨å·¥ä½œæµç¨‹<br/>ç†è§£SpringBootæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯çš„åŸç†<br/>å®ç°è‡ªå®šä¹‰å¼€å‘æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯çš„ç»„ä»¶</td></tr><tr><td><strong>ç•ªå¤–ç¯‡</strong></td><td>æŒæ¡SpringBootæ•´åˆéå¸¸è§çš„ç¬¬ä¸‰æ–¹æŠ€æœ¯<br/>æŒæ¡ç›¸åŒé¢†åŸŸçš„æ›´å¤šçš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶æå‡åŒé¢†åŸŸæ–¹æ¡ˆè®¾è®¡èƒ½åŠ›</td></tr></tbody></table><p>æ•´ä½“è¯¾ç¨‹åŒ…å«çš„å†…å®¹å°±æ˜¯è¿™äº›å•¦ï¼Œè¦æƒ³å®Œæˆå‰é¢è¿™äº›å†…å®¹çš„å­¦ä¹ ï¼Œé¡ºåˆ©çš„è¾¾æˆå­¦ä¹ ç›®æ ‡ï¼Œæœ‰äº›ä¸œè¥¿è¿˜æ˜¯è¦æå‰å’Œå¤§å®¶è¯´æ¸…æ¥šçš„ã€‚SpringBootè¯¾ç¨‹ä¸åƒæ˜¯JavaåŸºç¡€ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰åŸºç¡€ï¼Œéƒ½å¯ä»¥å¬ä¸€å¬ï¼Œè¿™ä¸ªè¯¾ç¨‹è¿˜çœŸä¸è¡Œï¼Œéœ€è¦ä¸€å®šçš„å‰ç½®çŸ¥è¯†ã€‚ä¸‹é¢ç»™å¤§å®¶åˆ—è¡¨ä¸€äº›å‰ç½®çŸ¥è¯†ï¼Œå¦‚æœè¿˜æœ‰ä¸å¤ªä¼šçš„ï¼Œéœ€è¦æƒ³åŠæ³•å¿«é€Ÿè¡¥æ•‘ä¸€ä¸‹</p><h3 id="è¯¾ç¨‹å‰ç½®çŸ¥è¯†è¯´æ˜"><a href="#è¯¾ç¨‹å‰ç½®çŸ¥è¯†è¯´æ˜" class="headerlink" title="è¯¾ç¨‹å‰ç½®çŸ¥è¯†è¯´æ˜"></a>è¯¾ç¨‹å‰ç½®çŸ¥è¯†è¯´æ˜</h3><table><thead><tr><th>è¯¾ç¨‹å•å…ƒ</th><th>å‰ç½®çŸ¥è¯†</th><th>è¦æ±‚</th></tr></thead><tbody><tr><td><font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font></td><td>JavaåŸºç¡€è¯­æ³•</td><td>é¢å‘å¯¹è±¡ï¼Œå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼Œç±»ä¸æ¥å£ï¼Œé›†åˆï¼ŒIOï¼Œç½‘ç»œç¼–ç¨‹ç­‰</td></tr><tr><td><font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font></td><td>Springä¸SpringMVC</td><td>çŸ¥é“Springæ˜¯ç”¨æ¥ç®¡ç†beanï¼Œèƒ½å¤ŸåŸºäºRestfulå®ç°é¡µé¢è¯·æ±‚äº¤äº’åŠŸèƒ½</td></tr><tr><td><font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font></td><td>Mybatisä¸Mybatis-Plus</td><td>åŸºäºMybatiså’ŒMybatisPlusèƒ½å¤Ÿå¼€å‘å‡ºåŒ…å«åŸºç¡€CRUDåŠŸèƒ½çš„æ ‡å‡†Daoæ¨¡å—</td></tr><tr><td><font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font></td><td>æ•°æ®åº“MySQL</td><td>èƒ½å¤Ÿè¯»æ‡‚åŸºç¡€CRUDåŠŸèƒ½çš„SQLè¯­å¥</td></tr><tr><td><font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font></td><td>æœåŠ¡å™¨</td><td>çŸ¥é“æœåŠ¡å™¨ä¸webå·¥ç¨‹çš„å…³ç³»ï¼Œç†Ÿæ‚‰webæœåŠ¡å™¨çš„åŸºç¡€é…ç½®</td></tr><tr><td><font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font></td><td>maven</td><td>çŸ¥é“mavençš„ä¾èµ–å…³ç³»ï¼ŒçŸ¥é“ä»€ä¹ˆæ˜¯ä¾èµ–èŒƒå›´ï¼Œä¾èµ–ä¼ é€’ï¼Œæ’é™¤ä¾èµ–ï¼Œå¯é€‰ä¾èµ–ï¼Œç»§æ‰¿</td></tr><tr><td><font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font></td><td>webæŠ€æœ¯ï¼ˆå«vueï¼ŒElementUI)</td><td>çŸ¥é“vueå¦‚ä½•å‘é€ajaxè¯·æ±‚ï¼Œå¦‚ä½•è·å–å“åº”æ•°æ®ï¼Œå¦‚ä½•è¿›è¡Œæ•°æ®æ¨¡å‹åŒå‘ç»‘å®š</td></tr><tr><td><font color="#cc0000"><b>åº”ç”¨ç¯‡</b></font></td><td>Linuxï¼ˆCenterOS7ï¼‰</td><td>ç†Ÿæ‚‰å¸¸ç”¨çš„LinuxåŸºç¡€æŒ‡ä»¤ï¼Œç†Ÿæ‚‰Linuxç³»ç»Ÿç›®å½•ç»“æ„</td></tr><tr><td><font color="#cc0000"><b>åº”ç”¨ç¯‡</b></font></td><td>å®ç”¨å¼€å‘æŠ€æœ¯</td><td>ç¼“å­˜ï¼šRedisã€MongoDBã€â€¦â€¦<br/>æ¶ˆæ¯ä¸­é—´ä»¶:RocketMqã€RabbitMqã€â€¦â€¦</td></tr><tr><td><font color="#990000"><b>åŸç†ç¯‡</b></font></td><td>Spring</td><td>äº†è§£SpringåŠ è½½beançš„å„ç§æ–¹å¼<br/>çŸ¥é“Springå®¹å™¨åº•å±‚å·¥ä½œåŸç†ï¼Œèƒ½å¤Ÿé˜…è¯»ç®€å•çš„Springåº•å±‚æºç </td></tr></tbody></table><p>â€‹        çœ‹ç€ç•¥å¾®æœ‰ç‚¹å¤šï¼Œå…¶å®è¿˜å¥½å§ï¼Œå¦‚æœä¸ªåˆ«æŠ€æœ¯çœŸçš„ä¸ä¼šï¼Œåœ¨å­¦ä¹ è¯¾ç¨‹çš„æ—¶å€™å¤šç”¨å¿ƒå¬å°±å¥½ï¼ŒåŸºç¡€ç¯‡æ˜¯å¯ä»¥è·Ÿç€å­¦ä¸‹æ¥äº†ï¼Œåé¢çš„å®ç”¨ç¯‡å’ŒåŸç†ç¯‡å°±æ¯”è¾ƒéš¾äº†ã€‚æ¯”å¦‚æˆ‘è¦åœ¨Linuxç³»ç»Ÿä¸‹æ“ä½œï¼Œå‘½ä»¤æˆ‘å°±ç›´æ¥ä½¿ç”¨äº†ï¼Œç„¶åä½ çœ‹ä¸æ‡‚å¯èƒ½å­¦ä¹ èµ·æ¥å°±æ¯”è¾ƒå¿ƒç´¯äº†ã€‚</p><p>â€‹        è¯¾ç¨‹å®‰æ’å°±è¯´åˆ°è¿™é‡Œäº†ï¼Œä¸‹é¢è¿›å…¥åˆ°SpringBoot<font color="#ff0000"><b>åŸºç¡€ç¯‡</b></font>çš„å­¦ä¹ </p><h1 id="SpringBootåŸºç¡€ç¯‡"><a href="#SpringBootåŸºç¡€ç¯‡" class="headerlink" title="SpringBootåŸºç¡€ç¯‡"></a>SpringBootåŸºç¡€ç¯‡</h1><p>â€‹        åœ¨åŸºç¡€ç¯‡ä¸­ï¼Œæˆ‘ç»™å­¦ä¹ è€…çš„å®šä½æ˜¯å…ˆä¸Šæ‰‹ï¼Œèƒ½å¤Ÿä½¿ç”¨SpringBootæ­å»ºåŸºäºSpringBootçš„webé¡¹ç›®å¼€å‘ï¼Œæ‰€ä»¥å†…å®¹è®¾ç½®è¾ƒå°‘ï¼Œä¸»è¦åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š</p><ul><li>SpringBootå¿«é€Ÿå…¥é—¨</li><li>SpringBootåŸºç¡€é…ç½®</li><li>åŸºäºSpringBootæ•´åˆSSMP</li></ul><h2 id="JC-1-å¿«é€Ÿä¸Šæ‰‹SpringBoot"><a href="#JC-1-å¿«é€Ÿä¸Šæ‰‹SpringBoot" class="headerlink" title="JC-1.å¿«é€Ÿä¸Šæ‰‹SpringBoot"></a>JC-1.å¿«é€Ÿä¸Šæ‰‹SpringBoot</h2><p>â€‹    å­¦ä¹ ä»»æ„ä¸€é¡¹æŠ€æœ¯ï¼Œé¦–å…ˆè¦çŸ¥é“è¿™ä¸ªæŠ€æœ¯çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä¸ç„¶å­¦å®Œä»¥åï¼Œä½ éƒ½ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯æŠ€æœ¯å¯¹åº”çš„åº”ç”¨åœºæ™¯ã€‚SpringBootæŠ€æœ¯ç”±Pivotalå›¢é˜Ÿç ”å‘åˆ¶ä½œï¼ŒåŠŸèƒ½çš„è¯ç®€å•æ¦‚æ‹¬å°±æ˜¯åŠ é€ŸSpringç¨‹åºçš„å¼€å‘ï¼Œè¿™ä¸ªåŠ é€Ÿè¦ä»å¦‚ä¸‹ä¸¤ä¸ªæ–¹é¢æ¥è¯´</p><ul><li>Springç¨‹åºåˆå§‹æ­å»ºè¿‡ç¨‹</li><li>Springç¨‹åºçš„å¼€å‘è¿‡ç¨‹</li></ul><p>â€‹    é€šè¿‡ä¸Šé¢ä¸¤ä¸ªæ–¹é¢çš„å®šä½ï¼Œæˆ‘ä»¬å¯ä»¥äº§ç”Ÿä¸¤ä¸ªæ¨¡ç³Šçš„æ¦‚å¿µï¼š</p><ol><li>SpringBootå¼€å‘å›¢é˜Ÿè®¤ä¸ºåŸå§‹çš„Springç¨‹åºåˆå§‹æ­å»ºçš„æ—¶å€™å¯èƒ½æœ‰äº›ç¹çï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¯ä»¥ç®€åŒ–çš„ï¼Œé‚£åŸå§‹çš„Springç¨‹åºåˆå§‹æ­å»ºè¿‡ç¨‹éƒ½åŒ…å«å“ªäº›ä¸œè¥¿äº†å‘¢ï¼Ÿä¸ºä»€ä¹ˆè§‰å¾—ç¹çå‘¢ï¼Ÿæœ€åŸºæœ¬çš„Springç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶æˆ–é…ç½®ç±»ï¼Œç”¨æ¥æè¿°Springçš„é…ç½®ä¿¡æ¯ï¼Œè«éè¿™ä¸ªæ–‡ä»¶éƒ½å¯ä»¥ä¸å†™ï¼Ÿæ­¤å¤–ç°åœ¨ä¼ä¸šçº§å¼€å‘ä½¿ç”¨Springå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯åšwebå¼€å‘ï¼Œå¦‚æœåšwebå¼€å‘çš„è¯ï¼Œè¿˜è¦åœ¨åŠ è½½webç¯å¢ƒæ—¶åŠ è½½æ—¶åŠ è½½æŒ‡å®šçš„springé…ç½®ï¼Œè¿™éƒ½æ˜¯æœ€åŸºæœ¬çš„éœ€æ±‚äº†ï¼Œä¸å†™çš„è¯æ€ä¹ˆçŸ¥é“åŠ è½½å“ªä¸ªé…ç½®æ–‡ä»¶&#x2F;é…ç½®ç±»å‘¢ï¼Ÿé‚£æ¢äº†SpringBootæŠ€æœ¯ä»¥åå‘¢ï¼Œè¿™äº›è¿˜è¦å†™å—ï¼Ÿè°œåº•ç¨åæ­æ™“ï¼Œå…ˆå–ä¸ªå…³å­</li><li>SpringBootå¼€å‘å›¢é˜Ÿè®¤ä¸ºåŸå§‹çš„Springç¨‹åºå¼€å‘çš„è¿‡ç¨‹ä¹Ÿæœ‰äº›ç¹çï¼Œè¿™ä¸ªè¿‡ç¨‹ä»ç„¶å¯ä»¥ç®€åŒ–ã€‚å¼€å‘è¿‡ç¨‹æ— å¤–ä¹ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯ï¼Œå¯¼å…¥å¯¹åº”çš„jaråŒ…ï¼ˆæˆ–åæ ‡ï¼‰ç„¶åå°†è¿™ä¸ªæŠ€æœ¯çš„æ ¸å¿ƒå¯¹è±¡äº¤ç»™Springå®¹å™¨ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯é…ç½®æˆSpringå®¹å™¨ç®¡æ§çš„beanå°±å¯ä»¥äº†ã€‚è¿™éƒ½æ˜¯åŸºæœ¬æ“ä½œå•Šï¼Œéš¾é“è¿™äº›ä¸œè¥¿SpringBootä¹Ÿèƒ½å¸®æˆ‘ä»¬ç®€åŒ–ï¼Ÿ</li></ol><p>â€‹    å¸¦ç€ä¸Šé¢è¿™äº›ç–‘é—®æˆ‘ä»¬å°±ç€æ‰‹ç¬¬ä¸€ä¸ªSpringBootç¨‹åºçš„å¼€å‘äº†ï¼Œçœ‹çœ‹åˆ°åº•ä½¿ç”¨SpringBootæŠ€æœ¯èƒ½ç®€åŒ–å¼€å‘åˆ°ä»€ä¹ˆç¨‹åº¦ã€‚</p><p>â€‹    <font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹        å¦‚æœå¯¹Springç¨‹åºçš„åŸºç¡€å¼€å‘ä¸å¤ªæ‡‚çš„å°ä¼™ä¼´ï¼Œçœ‹åˆ°è¿™é‡Œå¯ä»¥å¼ƒå‘äº†ï¼Œä¸‹é¢çš„å†…å®¹å­¦ä¹ éœ€è¦å…·å¤‡SpringæŠ€æœ¯çš„çŸ¥è¯†ï¼Œç¡¬ç€å¤´çš®å­¦ä¸ä¸‹å»çš„ã€‚</p><h3 id="JC-1-1-SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆä¸€ï¼‰"><a href="#JC-1-1-SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆä¸€ï¼‰" class="headerlink" title="JC-1-1.SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆä¸€ï¼‰"></a>JC-1-1.SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆä¸€ï¼‰</h3><p>â€‹    ä¸‹é¢è®©æˆ‘ä»¬å¼€å§‹åšç¬¬ä¸€ä¸ªSpringBootç¨‹åºå§ï¼Œæœ¬è¯¾ç¨‹åŸºäºIdea2020.3ç‰ˆæœ¬åˆ¶ä½œï¼Œä½¿ç”¨çš„Mavenç‰ˆæœ¬ä¸º3.6.1ï¼ŒJDKç‰ˆæœ¬ä¸º1.8ã€‚å¦‚æœä½ çš„ç¯å¢ƒå’Œä¸Šè¿°ç¯å¢ƒä¸åŒï¼Œå¯èƒ½åœ¨æ“ä½œç•Œé¢å’Œæ“ä½œè¿‡ç¨‹ä¸­ç•¥æœ‰ä¸åŒï¼Œåªè¦è½¯ä»¶åŒ¹é…å…¼å®¹å³å¯ï¼ˆè¯´åˆ°è¿™ä¸ªIdeaå’ŒMavenï¼Œå®ƒä»¬ä¸¤ä¸ªè¿˜çœŸä¸æ˜¯ä»€ä¹ˆç‰ˆæœ¬éƒ½èƒ½æ­åˆ°ä¸€èµ·çš„ï¼Œè¯´å¤šäº†éƒ½æ˜¯æ³ªå•Šï¼‰ã€‚</p><p>â€‹    ä¸‹é¢ä½¿ç”¨SpringBootæŠ€æœ¯å¿«é€Ÿæ„å»ºä¸€ä¸ªSpringMVCçš„ç¨‹åºï¼Œé€šè¿‡è¿™ä¸ªè¿‡ç¨‹ä½“ä¼š<font color="#ff0000"><b>ç®€åŒ–</b></font>äºŒå­—çš„å«ä¹‰</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šåˆ›å»ºæ–°æ¨¡å—ï¼Œé€‰æ‹©Spring Initializrï¼Œå¹¶é…ç½®æ¨¡å—ç›¸å…³åŸºç¡€ä¿¡æ¯</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-k2mXIVve-1644501801357)(img\image-20211116125259385.png)]</p><p>â€‹    <font color="#ff0000"><b>ç‰¹åˆ«å…³æ³¨</b></font>ï¼šç¬¬3æ­¥ç‚¹å‡»Nextæ—¶ï¼ŒIdeaéœ€è¦è”ç½‘çŠ¶æ€æ‰å¯ä»¥è¿›å…¥åˆ°åé¢é‚£ä¸€é¡µï¼Œå¦‚æœä¸èƒ½æ­£å¸¸è”ç½‘ï¼Œå°±æ— æ³•æ­£ç¡®åˆ°è¾¾å³é¢é‚£ä¸ªè®¾ç½®é¡µäº†ï¼Œä¼šä¸€ç›´<font color="#ff0000"><b>è”ç½‘</b></font>è½¬è½¬è½¬</p><p>â€‹    <font color="#ff0000"><b>ç‰¹åˆ«å…³æ³¨</b></font>ï¼šç¬¬5æ­¥é€‰æ‹©javaç‰ˆæœ¬å’Œä½ è®¡ç®—æœºä¸Šå®‰è£…çš„JDKç‰ˆæœ¬åŒ¹é…å³å¯ï¼Œä½†æ˜¯æœ€ä½è¦æ±‚ä¸ºJDK8æˆ–ä»¥ä¸Šç‰ˆæœ¬ï¼Œæ¨èä½¿ç”¨8æˆ–11</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé€‰æ‹©å½“å‰æ¨¡å—éœ€è¦ä½¿ç”¨çš„æŠ€æœ¯é›†</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-NzoLngKo-1644501801358)(img\image-20211116125615728.png)]</p><p>â€‹    æŒ‰ç…§è¦æ±‚ï¼Œå·¦ä¾§é€‰æ‹©webï¼Œç„¶ååœ¨ä¸­é—´é€‰æ‹©Spring Webå³å¯ï¼Œé€‰å®Œå³ä¾§å°±å‡ºç°äº†æ–°çš„å†…å®¹é¡¹ï¼Œè¿™å°±è¡¨ç¤ºå‹¾é€‰æˆåŠŸäº†</p><p>â€‹    <font color="#ff0000"><b>å…³æ³¨</b></font>ï¼šæ­¤å¤„é€‰æ‹©çš„SpringBootçš„ç‰ˆæœ¬ä½¿ç”¨é»˜è®¤çš„å°±å¯ä»¥äº†ï¼Œéœ€è¦è¯´ä¸€ç‚¹ï¼ŒSpringBootçš„ç‰ˆæœ¬å‡çº§é€Ÿåº¦å¾ˆå¿«ï¼Œå¯èƒ½æ˜¨å¤©åˆ›å»ºå·¥ç¨‹çš„æ—¶å€™é»˜è®¤ç‰ˆæœ¬æ˜¯2.5.4ï¼Œä»Šå¤©å†åˆ›å»ºå·¥ç¨‹é»˜è®¤ç‰ˆæœ¬å°±å˜æˆ2.5.5äº†ï¼Œå·®åˆ«ä¸å¤§ï¼Œæ— éœ€è¿‡äºçº ç»“ï¼Œå›å¤´å¯ä»¥åˆ°é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å¯¹åº”çš„ç‰ˆæœ¬</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šå¼€å‘æ§åˆ¶å™¨ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-comment">//Restæ¨¡å¼</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/books&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookController</span> &#123;<br>    <span class="hljs-meta">@GetMapping</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getById</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;springboot is running...&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;springboot is running...&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    å…¥é—¨æ¡ˆä¾‹åˆ¶ä½œçš„SpringMVCçš„æ§åˆ¶å™¨åŸºäºResté£æ ¼å¼€å‘ï¼Œå½“ç„¶æ­¤å¤„ä½¿ç”¨åŸå§‹æ ¼å¼åˆ¶ä½œSpringMVCçš„ç¨‹åºä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä¸Šä¾‹ä¸­çš„@RestControllerä¸@GetMappingæ³¨è§£æ˜¯åŸºäºRestfulå¼€å‘çš„å…¸å‹æ³¨è§£</p><p>â€‹    <font color="#ff0000"><b>å…³æ³¨</b></font>ï¼šåšåˆ°è¿™é‡ŒSpringBootç¨‹åºçš„æœ€åŸºç¡€çš„å¼€å‘å·²ç»åšå®Œäº†ï¼Œç°åœ¨å°±å¯ä»¥æ­£å¸¸çš„è¿è¡ŒSpringç¨‹åºäº†ã€‚å¯èƒ½æœ‰äº›å°ä¼™ä¼´ä¼šæœ‰ç–‘æƒ‘ï¼ŒTomcatæœåŠ¡å™¨æ²¡æœ‰é…ç½®ï¼Œ&#x3D;-Springä¹Ÿæ²¡æœ‰é…ç½®ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰é…ç½®è¿™å°±èƒ½ç”¨å—ï¼Ÿè¿™å°±æ˜¯SpringBootæŠ€æœ¯çš„å¼ºå¤§ä¹‹å¤„ã€‚å…³äºå†…éƒ¨å·¥ä½œæµç¨‹åé¢å†è¯´ï¼Œå…ˆä¸“å¿ƒå­¦ä¹ å¼€å‘è¿‡ç¨‹</p><p><strong>æ­¥éª¤â‘£</strong>ï¼šè¿è¡Œè‡ªåŠ¨ç”Ÿæˆçš„Applicationç±»</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-EG5tuU36-1644501801358)(img\image-20211116130152452.png)]</p><p>â€‹    ä½¿ç”¨å¸¦mainæ–¹æ³•çš„javaç¨‹åºçš„è¿è¡Œå½¢å¼æ¥è¿è¡Œç¨‹åºï¼Œè¿è¡Œå®Œæ¯•åï¼Œæ§åˆ¶å°è¾“å‡ºä¸Šè¿°ä¿¡æ¯ã€‚</p><p>â€‹    ä¸éš¾çœ‹å‡ºï¼Œè¿è¡Œçš„ä¿¡æ¯ä¸­åŒ…å«äº†8080çš„ç«¯å£ï¼ŒTomcatè¿™ç§ç†Ÿæ‚‰çš„å­—æ ·ï¼Œéš¾é“è¿™é‡Œå¯åŠ¨äº†TomcatæœåŠ¡å™¨ï¼Ÿæ˜¯çš„ï¼Œè¿™é‡Œå·²ç»å¯åŠ¨äº†ã€‚é‚£æœåŠ¡å™¨æ²¡æœ‰é…ç½®ï¼Œå“ªé‡Œæ¥çš„å‘¢ï¼Ÿåé¢å†è¯´ã€‚ç°åœ¨ä½ å°±å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®è¯·æ±‚çš„è·¯å¾„ï¼Œæµ‹è¯•åŠŸèƒ½æ˜¯å¦å·¥ä½œæ­£å¸¸äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">è®¿é—®è·¯å¾„ï¼šhttp:<span class="hljs-comment">//localhost:8080/books</span><br></code></pre></td></tr></table></figure><p>â€‹    æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆç¥å¥‡ï¼Ÿç›®å‰çš„æ•ˆæœå…¶å®ä¾èµ–çš„åº•å±‚é€»è¾‘è¿˜æ˜¯å¾ˆå¤æ‚çš„ï¼Œä½†æ˜¯ä»å¼€å‘è€…è§’åº¦æ¥çœ‹ï¼Œç›®å‰åªæœ‰ä¸¤ä¸ªæ–‡ä»¶å±•ç°åˆ°äº†å¼€å‘è€…é¢å‰</p><ul><li><p>pom.xml</p><p>â€‹    è¿™æ˜¯mavençš„é…ç½®æ–‡ä»¶ï¼Œæè¿°äº†å½“å‰å·¥ç¨‹æ„å»ºæ—¶ç›¸åº”çš„é…ç½®ä¿¡æ¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot_01_01_quickstart<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é…ç½®ä¸­æœ‰ä¸¤ä¸ªä¿¡æ¯éœ€è¦å…³æ³¨ï¼Œä¸€ä¸ªæ˜¯parentï¼Œä¹Ÿå°±æ˜¯å½“å‰å·¥ç¨‹ç»§æ‰¿äº†å¦å¤–ä¸€ä¸ªå·¥ç¨‹ï¼Œå¹²ä»€ä¹ˆç”¨çš„åé¢å†è¯´ï¼Œè¿˜æœ‰ä¾èµ–åæ ‡ï¼Œå¹²ä»€ä¹ˆç”¨çš„åé¢å†è¯´</p></li><li><p>Applicationç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(Application.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    è¿™ä¸ªç±»åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±ä¸€å¥ä»£ç ï¼Œå‰é¢è¿è¡Œç¨‹åºå°±æ˜¯è¿è¡Œçš„è¿™ä¸ªç±»</p></li></ul><p>â€‹    åˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¤§èƒ†æ¨æµ‹ä¸€ä¸‹ï¼Œå¦‚æœä¸Šé¢è¿™ä¸¤ä¸ªæ–‡ä»¶æ²¡æœ‰çš„è¯ï¼ŒSpringBootè‚¯å®šæ²¡æ³•ç©ï¼Œçœ‹æ¥æ ¸å¿ƒå°±æ˜¯è¿™ä¸¤ä¸ªæ–‡ä»¶äº†ã€‚ç”±äºæ˜¯åˆ¶ä½œç¬¬ä¸€ä¸ªSpringBootç¨‹åºï¼Œå…ˆä¸è¦å…³æ³¨è¿™ä¸¤ä¸ªæ–‡ä»¶çš„åŠŸèƒ½ï¼Œåé¢è¯¦ç»†è®²è§£å†…éƒ¨å·¥ä½œæµç¨‹ã€‚</p><p>â€‹    é€šè¿‡ä¸Šé¢çš„åˆ¶ä½œï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼ŒSpringBootç¨‹åºç®€ç›´å¤ªå¥½å†™äº†ï¼Œå‡ ä¹ä»€ä¹ˆéƒ½æ²¡å†™ï¼ŒåŠŸèƒ½å°±æœ‰äº†ï¼Œè¿™ä¹Ÿæ˜¯SpringBootæŠ€æœ¯ä¸ºä»€ä¹ˆç°åœ¨è¿™ä¹ˆç«çš„åŸå› ï¼Œå’ŒSpirngç¨‹åºç›¸æ¯”ï¼ŒSpringBootç¨‹åºåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å„ä¸ªå±‚é¢å‡å…·æœ‰ä¼˜åŠ¿</p><table><thead><tr><th><strong>ç±»é…ç½®æ–‡ä»¶</strong></th><th><strong>Spring</strong></th><th><strong>SpringBoot</strong></th></tr></thead><tbody><tr><td>pomæ–‡ä»¶ä¸­çš„åæ ‡</td><td><strong>æ‰‹å·¥æ·»åŠ </strong></td><td><strong>å‹¾é€‰æ·»åŠ </strong></td></tr><tr><td>web3.0é…ç½®ç±»</td><td><strong>æ‰‹å·¥åˆ¶ä½œ</strong></td><td><strong>æ— </strong></td></tr><tr><td>Spring&#x2F;SpringMVCé…ç½®ç±»</td><td><strong>æ‰‹å·¥åˆ¶ä½œ</strong></td><td><strong>æ— </strong></td></tr><tr><td>æ§åˆ¶å™¨</td><td><strong>æ‰‹å·¥åˆ¶ä½œ</strong></td><td><strong>æ‰‹å·¥åˆ¶ä½œ</strong></td></tr></tbody></table><p>â€‹    ä¸€å¥è¯æ€»ç»“ä¸€ä¸‹å°±æ˜¯<font color="#ff0000"><b>èƒ½å°‘å†™å°±å°‘å†™</b></font>ï¼Œ<font color="#ff0000"><b>èƒ½ä¸å†™å°±ä¸å†™</b></font>ï¼Œè¿™å°±æ˜¯SpringBootæŠ€æœ¯ç»™æˆ‘ä»¬å¸¦æ¥çš„å¥½å¤„ï¼Œè¡Œäº†ï¼Œç°åœ¨ä½ å°±å¯ä»¥åŠ¨æ‰‹åšä¸€åšSpringBootç¨‹åºäº†ï¼Œçœ‹çœ‹æ•ˆæœå¦‚ä½•ï¼Œæ˜¯å¦çœŸçš„å¸®åŠ©ä½ ç®€åŒ–å¼€å‘äº†</p><p><strong>æ€»ç»“</strong></p><ol><li>å¼€å‘SpringBootç¨‹åºå¯ä»¥æ ¹æ®å‘å¯¼è¿›è¡Œè”ç½‘å¿«é€Ÿåˆ¶ä½œ</li><li>SpringBootç¨‹åºéœ€è¦åŸºäºJDK8ä»¥ä¸Šç‰ˆæœ¬è¿›è¡Œåˆ¶ä½œ</li><li>SpringBootç¨‹åºä¸­éœ€è¦ä½¿ç”¨ä½•ç§åŠŸèƒ½é€šè¿‡å‹¾é€‰é€‰æ‹©æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥æ‰‹å·¥æ·»åŠ å¯¹åº”çš„è¦ä½¿ç”¨çš„æŠ€æœ¯ï¼ˆåæœŸè®²è§£ï¼‰</li><li>è¿è¡ŒSpringBootç¨‹åºé€šè¿‡è¿è¡ŒApplicationç¨‹åºå…¥å£è¿›è¡Œ</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹    å‰é¢åˆ¶ä½œçš„æ—¶å€™è¯´è¿‡ï¼Œè¿™ä¸ªè¿‡ç¨‹å¿…é¡»è”ç½‘æ‰å¯ä»¥è¿›è¡Œï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™ä½ ä¼šé‡åˆ°ä¸€äº›è«åå…¶å¦™çš„é—®é¢˜ï¼Œæ¯”å¦‚åŸºäºIdeaå¼€å‘æ—¶ï¼Œä½ ä¼šå‘ç°ä½ é…ç½®äº†ä¸€äº›åæ ‡ï¼Œç„¶åMavenä¸‹è½½å¯¹åº”ä¸œè¥¿çš„æ—¶å€™æ­»æ…¢æ­»æ…¢çš„ï¼Œç”šè‡³è¿˜ä¼šå¤±è´¥ã€‚å…¶å®è¿™å’ŒIdeaè¿™æ¬¾IDEå·¥å…·æœ‰å…³ï¼Œä¸‡ä¸€Ideaä¸èƒ½æ­£å¸¸è®¿é—®ç½‘ç»œçš„è¯ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å°±æ— æ³•åˆ¶ä½œSpringBootç¨‹åºäº†å‘¢ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è¯´</p><h3 id="JC-1-2-SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆäºŒï¼‰"><a href="#JC-1-2-SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆäºŒï¼‰" class="headerlink" title="JC-1-2.SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆäºŒï¼‰"></a>JC-1-2.SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆäºŒï¼‰</h3><p>â€‹    å¦‚æœIdeaä¸èƒ½æ­£å¸¸è”ç½‘ï¼Œè¿™ä¸ªSpringBootç¨‹åºå°±æ— æ³•åˆ¶ä½œäº†å—ï¼Ÿå¼€ä»€ä¹ˆç©ç¬‘ï¼Œä¸–ä¸ŠIDEå·¥å…·åƒåƒä¸‡ï¼Œéš¾é“SpringBootæŠ€æœ¯è¿˜å¿…é¡»åŸºäºIdeaæ¥åšäº†ï¼Ÿè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚å¼€å‘SpringBootç¨‹åºï¼Œå¯ä»¥ä¸åŸºäºä»»æ„çš„IDEå·¥å…·è¿›è¡Œï¼Œå…¶å®åœ¨SpringBootçš„å®˜ç½‘é‡Œé¢å°±å¯ä»¥ç›´æ¥åˆ›å»ºSpringBootç¨‹åº</p><p>â€‹    SpringBootå®˜ç½‘å’ŒSpringçš„å®˜ç½‘æ˜¯åœ¨ä¸€èµ·çš„ï¼Œéƒ½æ˜¯  spring.io  ã€‚ä½ å¯ä»¥é€šè¿‡é¡¹ç›®ä¸€çº§ä¸€çº§çš„æ‰¾åˆ°SpringBootæŠ€æœ¯çš„ä»‹ç»é¡µï¼Œç„¶ååœ¨é¡µé¢ä¸­é—´éƒ¨ä½æ‰¾åˆ°å¦‚ä¸‹å†…å®¹</p><p><img src="https://img-blog.csdnimg.cn/4d63791f0b9644ffb7c8a58f4b915b41.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ­¥éª¤â‘ </strong>ï¼šç‚¹å‡»Spring Initializråè¿›å…¥åˆ°åˆ›å»ºSpringBootç¨‹åºçš„ç•Œé¢ä¸Šï¼Œä¸‹é¢æ˜¯è¾“å…¥ä¿¡æ¯çš„è¿‡ç¨‹ï¼Œå’Œå‰é¢çš„ä¸€æ ·ï¼Œåªæ˜¯ç•Œé¢å˜äº†è€Œå·²ï¼Œæ ¹æ®è‡ªå·±çš„è¦æ±‚ï¼Œåœ¨å·¦ä¾§é€‰æ‹©å¯¹åº”ä¿¡æ¯å’Œè¾“å…¥å¯¹åº”çš„ä¿¡æ¯å³å¯</p><p><img src="https://img-blog.csdnimg.cn/1e0c46f6aa4a4922823367bdb7a68d29.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå³ä¾§çš„ADD DEPENDENCIESç”¨äºé€‰æ‹©ä½¿ç”¨ä½•ç§æŠ€æœ¯ï¼Œå’Œä¹‹å‰å‹¾é€‰çš„Spring WEBæ˜¯åœ¨åšåŒä¸€ä»¶äº‹ï¼Œä»…ä»…æ˜¯ç•Œé¢ä¸åŒè€Œå·²ï¼Œç‚¹å‡»åæ‰“å¼€ç½‘é¡µç‰ˆçš„æŠ€æœ¯é€‰æ‹©ç•Œé¢</p><p><img src="https://img-blog.csdnimg.cn/493732631f7948c4b546ed4449277f4e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šæ‰€æœ‰ä¿¡æ¯è®¾ç½®å®Œæ¯•åï¼Œç‚¹å‡»ä¸‹é¢å·¦ä¾§æŒ‰é’®ï¼Œç”Ÿæˆä¸€ä¸ªæ–‡ä»¶åŒ…</p><p><strong>æ­¥éª¤â‘£</strong>ï¼šä¿å­˜åå¾—åˆ°ä¸€ä¸ªå‹ç¼©æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ‰“å¼€åå°±æ˜¯åˆ›å»ºçš„SpringBootå·¥ç¨‹æ–‡ä»¶å¤¹äº†        </p><p><strong>æ­¥éª¤â‘¤</strong>ï¼šè§£å‹ç¼©æ­¤æ–‡ä»¶åï¼Œå¾—åˆ°å·¥ç¨‹ç›®å½•ï¼Œåœ¨Ideaä¸­å¯¼å…¥å³å¯ä½¿ç”¨ï¼Œå’Œä¹‹å‰åˆ›å»ºçš„ä¸œè¥¿å®Œå…¨ä¸€æ ·ã€‚ä¸‹é¢å°±å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªControlleræµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½ç”¨äº†ã€‚</p><p><font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹    åšåˆ°è¿™é‡Œå…¶å®å¯ä»¥é€æ¼ä¸€ä¸ªå°ç§˜å¯†ï¼ŒIdeaå·¥å…·ä¸­åˆ›å»ºSpringBootå·¥ç¨‹å…¶å®è¿æ¥çš„å°±æ˜¯SpringBootçš„å®˜ç½‘ï¼Œèµ°çš„å°±æ˜¯è¿™ä¸ªè¿‡ç¨‹ï¼Œåªä¸è¿‡IdeaæŠŠç•Œé¢ç»™æ•´åˆäº†ä¸€ä¸‹ï¼Œè¯»å–åˆ°äº†Springå®˜ç½‘ç»™çš„ä¿¡æ¯ï¼Œç„¶åå±•ç¤ºåˆ°äº†Ideaçš„ç•Œé¢ä¸­è€Œå·²ï¼Œä¸ä¿¡ä½ å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªæ­¥éª¤</p><p>â€‹    ä¸Šé¢æè¿°äº†è¿æ¥çš„ç½‘å€ï¼Œå†çœ‹çœ‹SpringBootå®˜ç½‘åˆ›å»ºå·¥ç¨‹çš„URLåœ°å€ï¼Œæ˜¯ä¸æ˜¯ä¸€æ ·ï¼Ÿ</p><p><img src="https://img-blog.csdnimg.cn/282b585d0562414babc8ece66b44f5c7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ€»ç»“</strong></p><ol><li>æ‰“å¼€SpringBootå®˜ç½‘ï¼Œé€‰æ‹©Quickstart Your Project</li></ol><p><img src="https://img-blog.csdnimg.cn/fd9866115a7f461ca7c688fb87690649.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><ol start="2"><li><p>åˆ›å»ºå·¥ç¨‹</p><p><img src="https://img-blog.csdnimg.cn/a652151a1d9140f1b7a6fe58a67ac3b9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>å¹¶ä¿å­˜é¡¹ç›®</p></li><li><p>è§£å‹é¡¹ç›®ï¼Œé€šè¿‡IDEå¯¼å…¥é¡¹ç›®</p></li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹    ç°åœ¨åˆ›å»ºå·¥ç¨‹é çš„æ˜¯è®¿é—®å›½å¤–çš„Springä¸»ç«™ï¼Œä½†æ˜¯äº’è”ç½‘è®¿é—®æ˜¯å¯ä»¥æ§åˆ¶çš„ï¼Œå¦‚æœä¸€å¤©è¿™ä¸ªç½‘ç«™ä½ åœ¨å›½å†…éƒ½æ— æ³•è®¿é—®äº†ï¼Œé‚£å‰é¢è¿™ä¸¤ç§æ–¹å¼éƒ½æ— æ³•åˆ›å»ºSpringBootå·¥ç¨‹äº†ï¼Œè¿™æ—¶å€™åˆè¯¥æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è¯´</p><h3 id="JC-1-3-SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆä¸‰ï¼‰"><a href="#JC-1-3-SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆä¸‰ï¼‰" class="headerlink" title="JC-1-3.SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆä¸‰ï¼‰"></a>JC-1-3.SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆä¸‰ï¼‰</h3><p>â€‹    å‰é¢æåˆ°ç½‘ç«™å¦‚æœè¢«é™åˆ¶è®¿é—®äº†ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå¼€åŠ¨è„‘ç­‹æƒ³ä¸€æƒ³ï¼Œä¸ç®¡æ˜¯æ–¹å¼ä¸€è¿˜æ˜¯æ–¹å¼äºŒå…¶å®éƒ½æ˜¯èµ°çš„åŒä¸€ä¸ªåœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯SpringBootçš„å®˜ç½‘åˆ›å»ºçš„SpringBootå·¥ç¨‹ï¼Œé‚£å¦‚æœæˆ‘ä»¬å›½å†…æœ‰è¿™ä¹ˆä¸€ä¸ªç½‘ç«™èƒ½æä¾›è¿™æ ·çš„åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å°±è§£å†³äº†å‘¢ï¼Ÿå¿…ç„¶çš„å˜›ï¼Œæ–°çš„é—®é¢˜åˆæ¥äº†ï¼Œè¿™ä¸ªå›½å†…çš„ç½‘ç«™æœ‰å—ï¼Ÿè¿˜çœŸæœ‰ï¼Œé˜¿é‡Œæä¾›äº†ä¸€ä¸ªï¼Œä¸‹é¢é—®é¢˜å°±ç®€å•äº†ï¼Œç½‘å€å‘Šè¯‰æˆ‘ä»¬å°±OKäº†ï¼Œæ²¡é”™ï¼Œå°±æ˜¯è¿™æ ·</p><p>â€‹    åˆ›å»ºå·¥ç¨‹æ—¶ï¼Œåˆ‡æ¢é€‰æ‹©starteræœåŠ¡è·¯å¾„ï¼Œç„¶åæ‰‹å·¥æ”¶å…¥é˜¿é‡Œäº‘æä¾›ç»™æˆ‘ä»¬çš„ä½¿ç”¨åœ°å€å³å¯ã€‚åœ°å€ï¼š<a href="http://start.aliyun.comæˆ–https//start.aliyun.com">http://start.aliyun.comæˆ–https://start.aliyun.com</a></p><p><img src="https://img-blog.csdnimg.cn/d9ac1e3b6493428dadf9d4d3a36446ea.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    é˜¿é‡Œä¸ºäº†ä¾¿äºè‡ªå·±å¼€å‘ä½¿ç”¨ï¼Œå› æ­¤åœ¨ä¾èµ–åæ ‡ä¸­æ·»åŠ äº†ä¸€äº›é˜¿é‡Œç›¸å…³çš„æŠ€æœ¯ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ¨å¹¿è‡ªå·±çš„æŠ€æœ¯å§ï¼Œæ‰€ä»¥åœ¨ä¾èµ–é€‰æ‹©åˆ—è¡¨ä¸­ï¼Œä½ æœ‰äº†æ›´å¤šçš„é€‰æ‹©ã€‚ä¸è¿‡æœ‰ä¸€ç‚¹éœ€è¦è¯´æ¸…æ¥šï¼Œé˜¿é‡Œäº‘åœ°å€é»˜è®¤åˆ›å»ºçš„SpringBootå·¥ç¨‹ç‰ˆæœ¬æ˜¯<font color="#ff0000"><b>2.4.1</b></font>ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³æ›´æ¢å…¶ä»–çš„ç‰ˆæœ¬ï¼Œåˆ›å»ºé¡¹ç›®åæ‰‹å·¥ä¿®æ”¹å³å¯ï¼Œåˆ«å¿˜äº†åˆ·æ–°ä¸€ä¸‹ï¼ŒåŠ è½½æ–°ç‰ˆæœ¬ä¿¡æ¯</p><p><img src="https://img-blog.csdnimg.cn/52ec1cb171904d36be570d23d3b522f8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    é˜¿é‡Œäº‘æä¾›çš„åœ°å€æ›´ç¬¦åˆå›½å†…å¼€å‘è€…çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œé‡Œé¢æœ‰ä¸€äº›SpringBootå®˜ç½‘ä¸Šæ²¡æœ‰ç»™å‡ºçš„åæ ‡ï¼Œå¤§å®¶å¯ä»¥å¥½å¥½çœ‹ä¸€çœ‹ã€‚</p><p>â€‹    <font color="#ff0000"><b>æ³¨æ„</b></font>ï¼šé˜¿é‡Œäº‘æä¾›çš„å·¥ç¨‹åˆ›å»ºåœ°å€åˆå§‹åŒ–å®Œæ¯•åå’Œå®ç”¨SpringBootå®˜ç½‘åˆ›å»ºå‡ºæ¥çš„å·¥ç¨‹ç•¥æœ‰åŒºåˆ«ã€‚ä¸»è¦æ˜¯åœ¨é…ç½®æ–‡ä»¶çš„å½¢å¼ä¸Šæœ‰åŒºåˆ«ã€‚è¿™ä¸ªä¿¡æ¯åœ¨åé¢è®²è§£Bootç¨‹åºçš„æ‰§è¡Œæµç¨‹æ—¶ç»™å¤§å®¶æ­æ™“</p><p><strong>æ€»ç»“</strong></p><ol><li>é€‰æ‹©startæ¥æºä¸ºè‡ªå®šä¹‰URL</li><li>è¾“å…¥é˜¿é‡Œäº‘startåœ°å€</li><li>åˆ›å»ºé¡¹ç›®</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹    åšåˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸‰ç§æ–¹å¼åˆ›å»ºSpringBootå·¥ç¨‹ï¼Œä½†æ˜¯æ¯ç§æ–¹å¼éƒ½è¦æ±‚ä½ å¿…é¡»èƒ½ä¸Šç½‘æ‰èƒ½åˆ›å»ºå·¥ç¨‹ã€‚å‡å¦‚æœ‰ä¸€å¤©ï¼Œä½ åŠ å…¥äº†ä¸€ä¸ªä¿å¯†çº§åˆ«æ¯”è¾ƒé«˜çš„é¡¹ç›®ç»„ï¼Œæ•´ä¸ªé¡¹ç›®ç»„æ²¡æœ‰å¤–ç½‘ï¼Œæ•´ä¸ªäº‹æƒ…æ˜¯ä¸æ˜¯å°±ä¸èƒ½åšäº†å‘¢ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è¯´</p><h3 id="JC-1-4-SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆå››ï¼‰"><a href="#JC-1-4-SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆå››ï¼‰" class="headerlink" title="JC-1-4.SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆå››ï¼‰"></a>JC-1-4.SpringBootå…¥é—¨ç¨‹åºåˆ¶ä½œï¼ˆå››ï¼‰</h3><p>â€‹    ä¸èƒ½ä¸Šç½‘ï¼Œè¿˜æƒ³åˆ›å»ºSpringBootå·¥ç¨‹ï¼Œèƒ½ä¸èƒ½åšå‘¢ï¼Ÿèƒ½åšï¼Œä½†æ˜¯ä½ è¦å…ˆé—®é—®è‡ªå·±è”ç½‘å’Œä¸è”ç½‘åˆ°åº•å·®åˆ«æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªä¿¡æ¯æ‰¾åˆ°ä»¥åï¼Œä½ å°±å‘ç°ï¼Œä½ æŠŠè”ç½‘è¦å¹²çš„äº‹æƒ…éƒ½æå‰å‡†å¤‡å¥½ï¼Œå°±æ— éœ€è”ç½‘äº†ã€‚</p><p>â€‹    è”ç½‘åšä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆSpringBootå·¥ç¨‹ä¹Ÿæ˜¯åŸºäºMavenæ„å»ºçš„ï¼Œè€ŒMavenå·¥ç¨‹å½“ä½¿ç”¨äº†ä¸€äº›è‡ªå·±éœ€è¦ä½¿ç”¨åˆä¸å­˜åœ¨çš„ä¸œè¥¿æ—¶ï¼Œå°±è¦å»ä¸‹è½½ã€‚å…¶å®SpringBootå·¥ç¨‹åˆ›å»ºçš„æ—¶å€™å°±æ˜¯å»ä¸‹è½½ä¸€äº›å¿…è¦çš„ç»„ä»¶çš„ã€‚ä½ æŠŠè¿™äº›ä¸œè¥¿ç»™æå‰å‡†å¤‡å¥½å°±å¯ä»¥äº†å—ï¼Ÿæ˜¯çš„ï¼Œå°±æ˜¯è¿™æ ·ã€‚</p><p>â€‹    ä¸‹é¢å’±ä»¬å°±ä¸€èµ·æ‰‹å·¥åˆ›å»ºä¸€ä¸ªSpringBootå·¥ç¨‹</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šåˆ›å»ºå·¥ç¨‹æ—¶ï¼Œé€‰æ‹©æ‰‹å·¥åˆ›å»ºMavenå·¥ç¨‹</p><p><img src="https://img-blog.csdnimg.cn/2c42c68cfe7d40ea9fd975160960b1f3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå‚ç…§æ ‡å‡†SpringBootå·¥ç¨‹çš„pomæ–‡ä»¶ï¼Œä¹¦å†™è‡ªå·±çš„pomæ–‡ä»¶å³å¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springboot_01_04_quickstart<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    ç”¨ä»€ä¹ˆå†™ä»€ä¹ˆï¼Œä¸ç”¨çš„éƒ½å¯ä»¥ä¸å†™ã€‚å½“ç„¶ï¼Œç°åœ¨å°ä¼™ä¼´ä»¬å¯èƒ½è¿˜ä¸çŸ¥é“ç”¨ä»€ä¹ˆå’Œä¸ç”¨ä»€ä¹ˆï¼Œæœ€ç®€å•çš„å°±æ˜¯å¤åˆ¶ç²˜è´´äº†ï¼Œéšç€åé¢çš„å­¦ä¹ ï¼Œä½ å°±çŸ¥é“å“ªäº›å¯ä»¥çœç•¥äº†ã€‚æ­¤å¤„æˆ‘åˆ å‡äº†ä¸€äº›ç›®å‰ä¸æ˜¯å¿…é¡»çš„ä¸œè¥¿ï¼Œä¸€æ ·èƒ½ç”¨</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä¹‹å‰è¿è¡ŒSpringBootå·¥ç¨‹éœ€è¦ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç¼ºä¸äº†ï¼Œè‡ªå·±æ‰‹å†™ä¸€ä¸ªå°±è¡Œäº†ï¼Œå»ºè®®æŒ‰ç…§ä¹‹å‰çš„ç›®å½•ç»“æ„æ¥åˆ›å»ºï¼Œå…ˆåˆ«ç©èŠ±æ ·ï¼Œå…ˆå­¦èµ°åå­¦è·‘ã€‚ç±»åå¯ä»¥è‡ªå®šä¹‰ï¼Œå…³è”çš„åç§°ä¸€åˆ‡ä¿®æ”¹å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(&lt;Application.class);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    <font color="#ff0000"><b>å…³æ³¨</b></font>ï¼šç±»ä¸Šé¢çš„æ³¨è§£@SpringBootApplicationåƒä¸‡åˆ«ä¸¢äº†ï¼Œè¿™ä¸ªæ˜¯æ ¸å¿ƒï¼Œåé¢å†ä»‹ç»</p><p>â€‹    <font color="#ff0000"><b>å…³æ³¨</b></font>ï¼šç±»åå¯ä»¥è‡ªå®šä¹‰ï¼Œåªè¦ä¿éšœä¸‹é¢ä»£ç ä¸­ä½¿ç”¨çš„ç±»åå’Œä½ è‡ªå·±å®šä¹‰çš„åç§°ä¸€æ ·å³å¯ï¼Œä¹Ÿå°±æ˜¯runæ–¹æ³•ä¸­çš„é‚£ä¸ªclasså¯¹åº”çš„åç§°</p><p><strong>æ­¥éª¤â‘£</strong>ï¼šä¸‹é¢å°±å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªControlleræµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½ç”¨äº†ï¼Œå’Œä¹‹å‰æ²¡æœ‰å·®åˆ«äº†</p><p>â€‹    çœ‹åˆ°è¿™é‡Œå…¶å®åº”è¯¥èƒ½å¤Ÿæƒ³æ˜ç™½äº†ï¼Œé€šè¿‡å‘å¯¼æˆ–è€…ç½‘ç«™åˆ›å»ºçš„SpringBootå·¥ç¨‹å…¶å®å°±æ˜¯å¸®ä½ å†™äº†ä¸€äº›ä»£ç ï¼Œè€Œç°åœ¨æ˜¯è‡ªå·±æ‰‹å†™ï¼Œå†™çš„å†…å®¹éƒ½ä¸€æ ·ï¼Œä»…æ­¤è€Œå·²ã€‚</p><p><font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹    å¦‚æœä½ çš„è®¡ç®—æœºä¸Šä»æ¥æ²¡æœ‰åˆ›å»ºæˆåŠŸè¿‡SpringBootå·¥ç¨‹ï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡æœ‰ä¸‹è½½è¿‡SpringBootå¯¹åº”çš„åæ ‡ï¼Œé‚£ç”¨æ‰‹å†™åˆ›å»ºçš„æ–¹å¼åœ¨ä¸è”ç½‘çš„æƒ…å†µä¸‹è‚¯å®šè¯¥æ˜¯ä¸èƒ½ç”¨çš„ã€‚æ‰€è°“æ‰‹å†™ï¼Œå…¶å®å°±æ˜¯è‡ªå·±å†™åˆ«äººå¸®ä½ ç”Ÿæˆçš„ä¸œè¥¿ï¼Œä½†æ˜¯å¼•ç”¨çš„åæ ‡å¯¹åº”çš„èµ„æºå¿…é¡»ä¿éšœmavenä»“åº“é‡Œé¢æœ‰æ‰è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¿˜æ˜¯è¦å»ä¸‹è½½çš„</p><p><strong>æ€»ç»“</strong></p><ol><li>åˆ›å»ºæ™®é€šMavenå·¥ç¨‹</li><li>ç»§æ‰¿spring-boot-starter-parent</li><li>æ·»åŠ ä¾èµ–spring-boot-starter-web</li><li>åˆ¶ä½œå¼•å¯¼ç±»Application</li></ol><p>åˆ°è¿™é‡Œå…¶å®å­¦ä¹ äº†4ç§åˆ›å»ºSpringBootå·¥ç¨‹çš„æ–¹å¼ï¼Œå…¶å®æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯æ ¹æ®SpringBootå·¥ç¨‹çš„æ–‡ä»¶æ ¼å¼è¦æ±‚ï¼Œé€šè¿‡ä¸åŒæ—¶æ–¹å¼ç”Ÿæˆæˆ–è€…æ‰‹å†™å¾—åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œæ•ˆæœå®Œå…¨ä¸€æ ·ã€‚</p><h4 id="æ•™ä½ ä¸€æ‹›ï¼šåœ¨Ideaä¸­éšè—æŒ‡å®šæ–‡ä»¶-x2F-æ–‡ä»¶å¤¹"><a href="#æ•™ä½ ä¸€æ‹›ï¼šåœ¨Ideaä¸­éšè—æŒ‡å®šæ–‡ä»¶-x2F-æ–‡ä»¶å¤¹" class="headerlink" title="æ•™ä½ ä¸€æ‹›ï¼šåœ¨Ideaä¸­éšè—æŒ‡å®šæ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹"></a>æ•™ä½ ä¸€æ‹›ï¼šåœ¨Ideaä¸­éšè—æŒ‡å®šæ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹</h4><p>â€‹    åˆ›å»ºSpringBootå·¥ç¨‹æ—¶ï¼Œä½¿ç”¨SpringBootå‘å¯¼ä¹Ÿå¥½ï¼Œé˜¿é‡Œäº‘ä¹Ÿç½¢ï¼Œå…¶å®éƒ½æ˜¯ä¸ºäº†ä¸€ä¸ªç›®çš„ï¼Œå¾—åˆ°ä¸€ä¸ªæ ‡å‡†çš„SpringBootå·¥ç¨‹æ–‡ä»¶ç»“æ„ã€‚è¿™ä¸ªæ—¶å€™å°±æœ‰æ–°çš„é—®é¢˜å‡ºç°äº†ï¼Œæ ‡å‡†çš„å·¥ç¨‹ç»“æ„ä¸­åŒ…å«äº†ä¸€äº›æœªçŸ¥çš„æ–‡ä»¶å¤¹ï¼Œåœ¨å¼€å‘çš„æ—¶å€™çœ‹èµ·æ¥ç‰¹åˆ«åˆ«æ‰­ï¼Œè¿™ä¸€èŠ‚å°±æ¥è¯´è¯´è¿™äº›æ–‡ä»¶æ€ä¹ˆå¤„ç†ã€‚</p><p>â€‹    å¤„ç†æ–¹æ¡ˆæ— å¤–ä¹ä¸¤ç§ï¼Œå¦‚æœä½ å¯¹æ¯ä¸€ä¸ªæ–‡ä»¶&#x2F;ç›®å½•è¶³å¤Ÿäº†è§£ï¼Œæ²¡æœ‰ç”¨çš„å®Œå…¨å¯ä»¥åˆ é™¤æ‰ï¼Œæˆ–è€…ä¸åˆ é™¤ï¼Œä½†æ˜¯çœ‹ç€åˆ«æ‰­ï¼Œå°±è®¾ç½®æ–‡ä»¶ä¸ºçœ‹ä¸åˆ°å°±è¡Œäº†ã€‚åˆ é™¤ä¸è¯´äº†ï¼Œç›´æ¥Deleteæ‰å°±å¥½äº†ï¼Œè¿™ä¸€èŠ‚è¯´è¯´å¦‚ä½•éšè—æŒ‡å®šçš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ä¿¡æ¯ã€‚</p><p>â€‹    æ—¢ç„¶æ˜¯åœ¨Ideaä¸‹åšéšè—åŠŸèƒ½ï¼Œè‚¯å®šéš¶å±äºIdeaçš„è®¾ç½®ï¼Œè®¾ç½®æ–¹å¼å¦‚ä¸‹ã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šæ‰“å¼€è®¾ç½®ï¼Œã€Filesã€‘â†’ã€Settingsã€‘</p><p><img src="https://img-blog.csdnimg.cn/65548565229d4d83b3e65994c4d36755.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_12,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šæ‰“å¼€æ–‡ä»¶ç±»å‹è®¾ç½®ç•Œé¢ï¼Œã€Editorã€‘â†’ã€File Typesã€‘â†’ã€Ignored Files and Foldersã€‘ï¼Œå¿½ç•¥æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¾ç¤º<br><img src="https://img-blog.csdnimg.cn/4e691f3fb68e48a28c7de28b52fa4548.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šæ·»åŠ ä½ è¦éšè—çš„æ–‡ä»¶åç§°æˆ–æ–‡ä»¶å¤¹åç§°ï¼Œå¯ä»¥ä½¿ç”¨*å·é€šé…ç¬¦ï¼Œè¡¨ç¤ºä»»æ„ï¼Œè®¾ç½®å®Œæ¯•å³å¯</p><p>â€‹    åˆ°è¿™é‡Œå°±åšå®Œäº†ï¼Œå…¶å®å°±æ˜¯Ideaçš„ä¸€ä¸ªå°åŠŸèƒ½</p><p><strong>æ€»ç»“</strong></p><ol><li>Ideaä¸­éšè—æŒ‡å®šæ–‡ä»¶æˆ–æŒ‡å®šç±»å‹æ–‡ä»¶<ol><li>ã€Filesã€‘â†’ã€Settingsã€‘</li><li>ã€Editorã€‘â†’ã€File Typesã€‘â†’ã€Ignored Files and Foldersã€‘</li><li>è¾“å…¥è¦éšè—çš„åç§°ï¼Œæ”¯æŒ*å·é€šé…ç¬¦</li><li>å›è½¦ç¡®è®¤æ·»åŠ </li></ol></li></ol><h3 id="JC-1-5-SpringBootç®€ä»‹"><a href="#JC-1-5-SpringBootç®€ä»‹" class="headerlink" title="JC-1-5.SpringBootç®€ä»‹"></a>JC-1-5.SpringBootç®€ä»‹</h3><p>â€‹    å…¥é—¨æ¡ˆä¾‹åšå®Œäº†ï¼Œè¿™ä¸ªæ—¶å€™å›å¿†ä¸€ä¸‹å’±ä»¬ä¹‹å‰è¯´çš„SpringBootçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆè¿˜è®°å¾—å—ï¼ŸåŠ é€ŸSpringç¨‹åºçš„å¼€å‘ï¼Œç°åœ¨æ˜¯å¦æ·±æœ‰ä½“ä¼šï¼Ÿå†æ¥çœ‹SpringBootæŠ€æœ¯çš„è®¾è®¡åˆè¡·å°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚</p><p>â€‹    SpringBootæ˜¯ç”±Pivotalå›¢é˜Ÿæä¾›çš„å…¨æ–°æ¡†æ¶ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥<font color="#ff0000"><b>ç®€åŒ–Springåº”ç”¨çš„åˆå§‹æ­å»ºä»¥åŠå¼€å‘è¿‡ç¨‹</b></font>ã€‚</p><p>â€‹    éƒ½ç®€åŒ–äº†äº†å“ªäº›ä¸œè¥¿å‘¢ï¼Ÿå…¶å®å°±æ˜¯é’ˆå¯¹åŸå§‹çš„Springç¨‹åºåˆ¶ä½œçš„ä¸¤ä¸ªæ–¹é¢è¿›è¡Œäº†ç®€åŒ–ï¼š</p><ul><li>Springç¨‹åºç¼ºç‚¹<ul><li>ä¾èµ–è®¾ç½®ç¹ç<ul><li>ä»¥å‰å†™Springç¨‹åºï¼Œä½¿ç”¨çš„æŠ€æœ¯éƒ½è¦è‡ªå·±ä¸€ä¸ªä¸€ä¸ªçš„å†™ï¼Œç°åœ¨ä¸éœ€è¦äº†ï¼Œå¦‚æœåšè¿‡åŸå§‹SpringMVCç¨‹åºçš„å°ä¼™ä¼´åº”è¯¥çŸ¥é“ï¼Œå†™SpringMVCç¨‹åºï¼Œæœ€åŸºç¡€çš„spring-webå’Œspring-webmvcè¿™ä¸¤ä¸ªåæ ‡æ—¶å¿…é¡»çš„ï¼Œå°±è¿™è¿˜ä¸åŒ…å«ä½ ç”¨jsonå•Šç­‰ç­‰è¿™äº›åæ ‡ï¼Œç°åœ¨å‘¢ï¼Ÿä¸€ä¸ªåæ ‡æå®šé¢</li></ul></li><li>é…ç½®ç¹ç<ul><li>ä»¥å‰å†™é…ç½®ç±»æˆ–è€…é…ç½®æ–‡ä»¶ï¼Œç„¶åç”¨ä»€ä¹ˆä¸œè¥¿å°±è¦è‡ªå·±å†™åŠ è½½beanè¿™äº›ä¸œè¥¿ï¼Œç°åœ¨å‘¢ï¼Ÿä»€ä¹ˆéƒ½æ²¡å†™ï¼Œç…§æ ·èƒ½ç”¨</li></ul></li></ul></li></ul><blockquote><p>å›é¡¾</p><p>â€‹    é€šè¿‡ä¸Šé¢ä¸¤ä¸ªæ–¹é¢çš„å®šä½ï¼Œæˆ‘ä»¬å¯ä»¥äº§ç”Ÿä¸¤ä¸ªæ¨¡ç³Šçš„æ¦‚å¿µï¼š</p><ol><li>SpringBootå¼€å‘å›¢é˜Ÿè®¤ä¸ºåŸå§‹çš„Springç¨‹åºåˆå§‹æ­å»ºçš„æ—¶å€™å¯èƒ½æœ‰äº›ç¹çï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¯ä»¥ç®€åŒ–çš„ï¼Œé‚£åŸå§‹çš„Springç¨‹åºåˆå§‹æ­å»ºè¿‡ç¨‹éƒ½åŒ…å«å“ªäº›ä¸œè¥¿äº†å‘¢ï¼Ÿä¸ºä»€ä¹ˆè§‰å¾—ç¹çå‘¢ï¼Ÿæœ€åŸºæœ¬çš„Springç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶æˆ–é…ç½®ç±»ï¼Œç”¨æ¥æè¿°Springçš„é…ç½®ä¿¡æ¯ï¼Œè«éè¿™ä¸ªæ–‡ä»¶éƒ½å¯ä»¥ä¸å†™ï¼Ÿæ­¤å¤–ç°åœ¨ä¼ä¸šçº§å¼€å‘ä½¿ç”¨Springå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯åšwebå¼€å‘ï¼Œå¦‚æœåšwebå¼€å‘çš„è¯ï¼Œè¿˜è¦åœ¨åŠ è½½webç¯å¢ƒæ—¶åŠ è½½æ—¶åŠ è½½æŒ‡å®šçš„springé…ç½®ï¼Œè¿™éƒ½æ˜¯æœ€åŸºæœ¬çš„éœ€æ±‚äº†ï¼Œä¸å†™çš„è¯æ€ä¹ˆçŸ¥é“åŠ è½½å“ªä¸ªé…ç½®æ–‡ä»¶&#x2F;é…ç½®ç±»å‘¢ï¼Ÿé‚£æ¢äº†SpringBootæŠ€æœ¯ä»¥åå‘¢ï¼Œè¿™äº›è¿˜è¦å†™å—ï¼Ÿè°œåº•ç¨åæ­æ™“ï¼Œå…ˆå–ä¸ªå…³å­</li><li>SpringBootå¼€å‘å›¢é˜Ÿè®¤ä¸ºåŸå§‹çš„Springç¨‹åºå¼€å‘çš„è¿‡ç¨‹ä¹Ÿæœ‰äº›ç¹çï¼Œè¿™ä¸ªè¿‡ç¨‹ä»ç„¶å¯ä»¥ç®€åŒ–ã€‚å¼€å‘è¿‡ç¨‹æ— å¤–ä¹ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯ï¼Œå¯¼å…¥å¯¹åº”çš„jaråŒ…ï¼ˆæˆ–åæ ‡ï¼‰ç„¶åå°†è¿™ä¸ªæŠ€æœ¯çš„æ ¸å¿ƒå¯¹è±¡äº¤ç»™Springå®¹å™¨ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯é…ç½®æˆSpringå®¹å™¨ç®¡æ§çš„beanå°±å¯ä»¥äº†ã€‚è¿™éƒ½æ˜¯åŸºæœ¬æ“ä½œå•Šï¼Œéš¾é“è¿™äº›ä¸œè¥¿SpringBootä¹Ÿèƒ½å¸®æˆ‘ä»¬ç®€åŒ–ï¼Ÿ</li></ol></blockquote><p>â€‹    å†æ¥çœ‹çœ‹å‰é¢æå‡ºçš„ä¸¤ä¸ªé—®é¢˜ï¼Œå·²ç»æœ‰ç­”æ¡ˆäº†ï¼Œéƒ½ç®€åŒ–äº†ï¼Œéƒ½ä¸ç”¨å†™äº†ï¼Œè¿™å°±æ˜¯SpringBootç»™æˆ‘ä»¬å¸¦æ¥çš„å¥½å¤„ã€‚è¿™äº›ç®€åŒ–æ“ä½œåœ¨SpringBootä¸­æœ‰ä¸“ä¸šçš„ç”¨è¯­ï¼Œä¹Ÿæ˜¯SpringBootç¨‹åºçš„æ ¸å¿ƒåŠŸèƒ½åŠä¼˜ç‚¹ï¼š</p><ul><li>èµ·æ­¥ä¾èµ–ï¼ˆç®€åŒ–ä¾èµ–é…ç½®ï¼‰<ul><li>ä¾èµ–é…ç½®çš„ä¹¦å†™ç®€åŒ–å°±æ˜¯é è¿™ä¸ªèµ·æ­¥ä¾èµ–è¾¾æˆçš„</li></ul></li><li>è‡ªåŠ¨é…ç½®ï¼ˆç®€åŒ–å¸¸ç”¨å·¥ç¨‹ç›¸å…³é…ç½®ï¼‰<ul><li>é…ç½®è¿‡äºç¹çï¼Œä½¿ç”¨è‡ªåŠ¨é…ç½®å°±å¯ä»¥åšå“åº”çš„ç®€åŒ–ï¼Œä½†æ˜¯å†…éƒ¨è¿˜æ˜¯å¾ˆå¤æ‚çš„ï¼Œåé¢å…·ä½“å±•å¼€è¯´</li></ul></li><li>è¾…åŠ©åŠŸèƒ½ï¼ˆå†…ç½®æœåŠ¡å™¨ï¼Œâ€¦â€¦ï¼‰<ul><li>é™¤äº†ä¸Šé¢çš„åŠŸèƒ½ï¼Œå…¶å®SpringBootç¨‹åºè¿˜æœ‰å…¶ä»–çš„ä¸€äº›ä¼˜åŠ¿ï¼Œæ¯”å¦‚æˆ‘ä»¬æ²¡æœ‰é…ç½®TomcatæœåŠ¡å™¨ï¼Œä½†æ˜¯èƒ½æ­£å¸¸è¿è¡Œï¼Œè¿™æ˜¯SpringBootç¨‹åºçš„ä¸€ä¸ªå¯ä»¥æ„ŸçŸ¥åˆ°çš„åŠŸèƒ½ï¼Œä¹Ÿæ˜¯SpringBootçš„è¾…åŠ©åŠŸèƒ½ä¹‹ä¸€ã€‚ä¸€ä¸ªè¾…åŠ©åŠŸèƒ½éƒ½èƒ½åšçš„è¿™ä¹ˆ6ï¼Œå¤ªç‰›äº†</li></ul></li></ul><p>â€‹    ä¸‹é¢ç»“åˆå…¥é—¨ç¨‹åºæ¥è¯´è¯´è¿™äº›ç®€åŒ–æ“ä½œéƒ½åœ¨å“ªäº›æ–¹é¢è¿›è¡Œä½“ç°çš„ï¼Œä¸€å…±åˆ†ä¸º4ä¸ªæ–¹é¢</p><ul><li>parent</li><li>starter</li><li>å¼•å¯¼ç±»</li><li>å†…åµŒtomcat</li></ul><h4 id="parent"><a href="#parent" class="headerlink" title="parent"></a>parent</h4><p>â€‹    SpringBootå…³æ³¨åˆ°å¼€å‘è€…åœ¨è¿›è¡Œå¼€å‘æ—¶ï¼Œå¾€å¾€å¯¹ä¾èµ–ç‰ˆæœ¬çš„é€‰æ‹©å…·æœ‰å›ºå®šçš„æ­é…æ ¼å¼ï¼Œå¹¶ä¸”è¿™äº›ä¾èµ–ç‰ˆæœ¬çš„é€‰æ‹©è¿˜ä¸èƒ½ä¹±æ­é…ã€‚æ¯”å¦‚AæŠ€æœ¯çš„2.0ç‰ˆä¸BæŠ€æœ¯çš„3.5ç‰ˆå¯ä»¥åˆä½œåœ¨ä¸€èµ·ï¼Œä½†æ˜¯å’ŒBæŠ€æœ¯çš„3.7ç‰ˆåˆå¹¶ä½¿ç”¨æ—¶å°±æœ‰å†²çªã€‚å…¶å®å¾ˆå¤šå¼€å‘è€…éƒ½ä¸€ç›´æƒ³åšä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯å°†å„ç§å„æ ·çš„æŠ€æœ¯é…åˆä½¿ç”¨çš„å¸¸è§ä¾èµ–ç‰ˆæœ¬è¿›è¡Œæ”¶é›†æ•´ç†ï¼Œåˆ¶ä½œå‡ºäº†æœ€åˆç†çš„ä¾èµ–ç‰ˆæœ¬é…ç½®æ–¹æ¡ˆï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥å°±æ–¹ä¾¿å¤šäº†ã€‚</p><p>â€‹    SpringBootä¸€çœ‹è¿™ç§æƒ…å†µso easyå•Šï¼Œäºæ˜¯å°†æ‰€æœ‰çš„æŠ€æœ¯ç‰ˆæœ¬çš„å¸¸è§ä½¿ç”¨æ–¹æ¡ˆéƒ½ç»™å¼€å‘è€…æ•´ç†äº†å‡ºæ¥ï¼Œä»¥åå¼€å‘è€…ä½¿ç”¨æ—¶ç›´æ¥ç”¨å®ƒæä¾›çš„ç‰ˆæœ¬æ–¹æ¡ˆï¼Œå°±ä¸ç”¨æ‹…å¿ƒå†²çªé—®é¢˜äº†ï¼Œç›¸å½“äºSpringBootåšäº†æ— æ•°ä¸ªæŠ€æœ¯ç‰ˆæœ¬æ­é…çš„åˆ—è¡¨ï¼Œè¿™ä¸ªæŠ€æœ¯æ­é…åˆ—è¡¨çš„åå­—å«åš<font color="#ff0000"><b>parent</b></font>ã€‚</p><p>â€‹    <font color="#ff0000"><b>parent</b></font>è‡ªèº«å…·æœ‰å¾ˆå¤šä¸ªç‰ˆæœ¬ï¼Œæ¯ä¸ª<font color="#ff0000"><b>parent</b></font>ç‰ˆæœ¬ä¸­åŒ…å«æœ‰å‡ ç™¾ä¸ªå…¶ä»–æŠ€æœ¯çš„ç‰ˆæœ¬å·ï¼Œä¸åŒçš„parenté—´ä½¿ç”¨çš„å„ç§æŠ€æœ¯çš„ç‰ˆæœ¬å·æœ‰å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å½“å¼€å‘è€…ä½¿ç”¨æŸäº›æŠ€æœ¯æ—¶ï¼Œç›´æ¥ä½¿ç”¨SpringBootæä¾›çš„<font color="#ff0000"><b>parent</b></font>å°±è¡Œäº†ï¼Œç”±<font color="#ff0000"><b>parent</b></font>å¸®åŠ©å¼€å‘è€…ç»Ÿä¸€çš„è¿›è¡Œå„ç§æŠ€æœ¯çš„ç‰ˆæœ¬ç®¡ç†</p><p>â€‹    æ¯”å¦‚ä½ ç°åœ¨è¦ä½¿ç”¨Springé…åˆMyBatiså¼€å‘ï¼Œæ²¡æœ‰parentä¹‹å‰æ€ä¹ˆåšå‘¢ï¼Ÿé€‰ä¸ªSpringçš„ç‰ˆæœ¬ï¼Œå†é€‰ä¸ªMyBatisçš„ç‰ˆæœ¬ï¼Œå†æŠŠè¿™äº›æŠ€æœ¯ä½¿ç”¨æ—¶å…³è”çš„å…¶ä»–æŠ€æœ¯çš„ç‰ˆæœ¬é€ä¸€ç¡®å®šä¸‹æ¥ã€‚å½“ä½ Springçš„ç‰ˆæœ¬å‘ç”Ÿå˜åŒ–éœ€è¦åˆ‡æ¢æ—¶ï¼Œä½ çš„MyBatisç‰ˆæœ¬æœ‰å¯èƒ½ä¹Ÿè¦è·Ÿç€åˆ‡æ¢ï¼Œå…³è”æŠ€æœ¯å‘¢ï¼Ÿå¯èƒ½éƒ½è¦åˆ‡æ¢ï¼Œè€Œä¸”åˆ‡æ¢åè¿˜å¯èƒ½å‡ºç°é—®é¢˜ã€‚ç°åœ¨è¿™ä¸€åˆ‡å·¥ä½œéƒ½å¯ä»¥äº¤ç»™parentæ¥åšäº†ã€‚ä½ æ— éœ€å…³æ³¨è¿™äº›æŠ€æœ¯é—´çš„ç‰ˆæœ¬å†²çªé—®é¢˜ï¼Œä½ åªéœ€è¦å…³æ³¨ä½ ç”¨ä»€ä¹ˆæŠ€æœ¯å°±è¡Œäº†ï¼Œå†²çªé—®é¢˜ç”±<font color="#ff0000"><b>parent</b></font>è´Ÿè´£å¤„ç†ã€‚</p><p>â€‹    æœ‰äººå¯èƒ½ä¼šæå‡ºæ¥ï¼Œä¸‡ä¸€<font color="#ff0000"><b>parent</b></font>ç»™æˆ‘å¯¼å…¥äº†ä¸€äº›æˆ‘ä¸æƒ³ä½¿ç”¨çš„ä¾èµ–æ€ä¹ˆåŠï¼Ÿè®°æ¸…æ¥šï¼Œè¿™ä¸€ç‚¹å¾ˆå…³é”®ï¼Œ<font color="#ff0000"><b>parent</b></font>ä»…ä»…å¸®æˆ‘ä»¬è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œå®ƒä¸è´Ÿè´£å¸®ä½ å¯¼å…¥åæ ‡ï¼Œè¯´ç™½äº†ç”¨ä»€ä¹ˆè¿˜æ˜¯ä½ è‡ªå·±å®šï¼Œåªä¸è¿‡ç‰ˆæœ¬ä¸éœ€è¦ä½ ç®¡ç†äº†ã€‚æ•´ä½“ä¸Šæ¥è¯´ï¼Œ<font color="#ff0000"><b>ä½¿ç”¨parentå¯ä»¥å¸®åŠ©å¼€å‘è€…è¿›è¡Œç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†</b></font></p><p>â€‹    <font color="#ff0000"><b>å…³æ³¨</b></font>ï¼šparentå®šä¹‰å‡ºæ¥ä»¥åï¼Œå¹¶ä¸æ˜¯ç›´æ¥ä½¿ç”¨çš„ï¼Œä»…ä»…ç»™äº†å¼€å‘è€…ä¸€ä¸ªè¯´æ˜ä¹¦ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å®é™…ä½¿ç”¨ï¼Œè¿™ä¸ªä¸€å®šè¦ç¡®è®¤æ¸…æ¥š</p><p>â€‹    é‚£SpringBootåˆæ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„å‘¢ï¼Ÿå¯ä»¥æŸ¥é˜…SpringBootçš„é…ç½®æºç ï¼Œçœ‹åˆ°è¿™äº›å®šä¹‰</p><ul><li>é¡¹ç›®ä¸­çš„pom.xmlä¸­ç»§æ‰¿äº†ä¸€ä¸ªåæ ‡</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>æ‰“å¼€åå¯ä»¥æŸ¥é˜…åˆ°å…¶ä¸­åˆç»§æ‰¿äº†ä¸€ä¸ªåæ ‡</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>è¿™ä¸ªåæ ‡ä¸­å®šä¹‰äº†ä¸¤ç»„ä¿¡æ¯ï¼Œç¬¬ä¸€ç»„æ˜¯å„å¼å„æ ·çš„ä¾èµ–ç‰ˆæœ¬å·å±æ€§ï¼Œä¸‹é¢åˆ—å‡ºä¾èµ–ç‰ˆæœ¬å±æ€§çš„å±€éƒ¨ï¼Œå¯ä»¥çœ‹çš„å‡ºæ¥ï¼Œå®šä¹‰äº†è‹¥å¹²ä¸ªæŠ€æœ¯çš„ä¾èµ–ç‰ˆæœ¬å·</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">activemq.version</span>&gt;</span>5.16.3<span class="hljs-tag">&lt;/<span class="hljs-name">activemq.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aspectj.version</span>&gt;</span>1.9.7<span class="hljs-tag">&lt;/<span class="hljs-name">aspectj.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">assertj.version</span>&gt;</span>3.19.0<span class="hljs-tag">&lt;/<span class="hljs-name">assertj.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-codec.version</span>&gt;</span>1.15<span class="hljs-tag">&lt;/<span class="hljs-name">commons-codec.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-dbcp2.version</span>&gt;</span>2.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">commons-dbcp2.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-lang3.version</span>&gt;</span>3.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">commons-lang3.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-pool.version</span>&gt;</span>1.6<span class="hljs-tag">&lt;/<span class="hljs-name">commons-pool.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-pool2.version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">commons-pool2.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2.version</span>&gt;</span>1.4.200<span class="hljs-tag">&lt;/<span class="hljs-name">h2.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hibernate.version</span>&gt;</span>5.4.32.Final<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hibernate-validator.version</span>&gt;</span>6.2.0.Final<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-validator.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">httpclient.version</span>&gt;</span>4.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">httpclient.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">jackson-bom.version</span>&gt;</span>2.12.4<span class="hljs-tag">&lt;/<span class="hljs-name">jackson-bom.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">javax-jms.version</span>&gt;</span>2.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">javax-jms.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">javax-json.version</span>&gt;</span>1.1.4<span class="hljs-tag">&lt;/<span class="hljs-name">javax-json.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">javax-websocket.version</span>&gt;</span>1.1<span class="hljs-tag">&lt;/<span class="hljs-name">javax-websocket.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">jetty-el.version</span>&gt;</span>9.0.48<span class="hljs-tag">&lt;/<span class="hljs-name">jetty-el.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">junit.version</span>&gt;</span>4.13.2<span class="hljs-tag">&lt;/<span class="hljs-name">junit.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    ç¬¬äºŒç»„æ˜¯å„å¼å„æ ·çš„çš„ä¾èµ–åæ ‡ä¿¡æ¯ï¼Œå¯ä»¥çœ‹å‡ºä¾èµ–åæ ‡å®šä¹‰ä¸­æ²¡æœ‰å…·ä½“çš„ä¾èµ–ç‰ˆæœ¬å·ï¼Œè€Œæ˜¯å¼•ç”¨äº†ç¬¬ä¸€ç»„ä¿¡æ¯ä¸­å®šä¹‰çš„ä¾èµ–ç‰ˆæœ¬å±æ€§å€¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hibernate<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hibernate-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;hibernate.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span><br></code></pre></td></tr></table></figure><p><font color="#ff0000"><b>å…³æ³¨</b></font>ï¼šä¸Šé¢çš„ä¾èµ–åæ ‡å®šä¹‰æ˜¯å‡ºç°åœ¨<dependencyManagement>æ ‡ç­¾ä¸­çš„ï¼Œå…¶å®æ˜¯å¯¹å¼•ç”¨åæ ‡çš„ä¾èµ–ç®¡ç†ï¼Œå¹¶ä¸æ˜¯å®é™…ä½¿ç”¨çš„åæ ‡ã€‚å› æ­¤å½“ä½ çš„é¡¹ç›®ä¸­ç»§æ‰¿äº†è¿™ç»„parentä¿¡æ¯åï¼Œåœ¨ä¸ä½¿ç”¨å¯¹åº”åæ ‡çš„æƒ…å†µä¸‹ï¼Œå‰é¢çš„è¿™ç»„å®šä¹‰æ˜¯ä¸ä¼šå…·ä½“å¯¼å…¥æŸä¸ªä¾èµ–çš„</p><p><font color="#ff0000"><b>å…³æ³¨</b></font>ï¼šå› ä¸ºåœ¨mavenä¸­ç»§æ‰¿æœºä¼šåªæœ‰ä¸€æ¬¡ï¼Œä¸Šè¿°ç»§æ‰¿çš„æ ¼å¼è¿˜å¯ä»¥åˆ‡æ¢æˆå¯¼å…¥çš„å½¢å¼è¿›è¡Œï¼Œå¹¶ä¸”åœ¨é˜¿é‡Œäº‘çš„starteråˆ›å»ºå·¥ç¨‹æ—¶å°±ä½¿ç”¨äº†æ­¤ç§å½¢å¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring-boot.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>å¼€å‘SpringBootç¨‹åºè¦ç»§æ‰¿spring-boot-starter-parent</li><li>spring-boot-starter-parentä¸­å®šä¹‰äº†è‹¥å¹²ä¸ªä¾èµ–ç®¡ç†</li><li>ç»§æ‰¿parentæ¨¡å—å¯ä»¥é¿å…å¤šä¸ªä¾èµ–ä½¿ç”¨ç›¸åŒæŠ€æœ¯æ—¶å‡ºç°ä¾èµ–ç‰ˆæœ¬å†²çª</li><li>ç»§æ‰¿parentçš„å½¢å¼ä¹Ÿå¯ä»¥é‡‡ç”¨å¼•å…¥ä¾èµ–çš„å½¢å¼å®ç°æ•ˆæœ</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹    parentä¸­å®šä¹‰äº†è‹¥å¹²ä¸ªä¾èµ–ç‰ˆæœ¬ç®¡ç†ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰ä½¿ç”¨ï¼Œé‚£è¿™ä¸ªè®¾å®šä¹Ÿå°±ä¸ç”Ÿæ•ˆå•Šï¼Œç©¶ç«Ÿè°åœ¨ä½¿ç”¨è¿™äº›å®šä¹‰å‘¢ï¼Ÿ</p><h4 id="starter"><a href="#starter" class="headerlink" title="starter"></a>starter</h4><p>â€‹    SpringBootå…³æ³¨åˆ°å¼€å‘è€…åœ¨å®é™…å¼€å‘æ—¶ï¼Œå¯¹äºä¾èµ–åæ ‡çš„ä½¿ç”¨å¾€å¾€éƒ½æœ‰ä¸€äº›å›ºå®šçš„ç»„åˆæ–¹å¼ï¼Œæ¯”å¦‚ä½¿ç”¨spring-webmvcå°±ä¸€å®šè¦ä½¿ç”¨spring-webã€‚æ¯æ¬¡éƒ½è¦å›ºå®šæ­é…ç€å†™ï¼Œéå¸¸ç¹çï¼Œè€Œä¸”æ ¼å¼å›ºå®šï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯å«é‡ã€‚</p><p>â€‹    SpringBootä¸€çœ‹è¿™ç§æƒ…å†µï¼Œçœ‹æ¥éœ€è¦ç»™å¼€å‘è€…å¸¦æ¥ä¸€äº›å¸®åŠ©äº†ã€‚å®‰æ’ï¼ŒæŠŠæ‰€æœ‰çš„æŠ€æœ¯ä½¿ç”¨çš„å›ºå®šæ­é…æ ¼å¼éƒ½ç»™å¼€å‘å‡ºæ¥ï¼Œä»¥åä½ ç”¨æŸä¸ªæŠ€æœ¯ï¼Œå°±ä¸ç”¨ä¸€æ¬¡å†™ä¸€å †ä¾èµ–äº†ï¼Œè¿˜å®¹æ˜“å†™é”™ï¼Œæˆ‘ç»™ä½ åšä¸€ä¸ªä¸œè¥¿ï¼Œä»£è¡¨ä¸€å †ä¸œè¥¿ï¼Œå¼€å‘è€…ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ç”¨æˆ‘åšå¥½çš„è¿™ä¸ªä¸œè¥¿å°±å¥½äº†ï¼Œå¯¹äºè¿™æ ·çš„å›ºå®šæŠ€æœ¯æ­é…ï¼ŒSpringBootç»™å®ƒèµ·äº†ä¸ªåå­—å«åš<font color="#ff0000"><b>starter</b></font>ã€‚</p><p>â€‹    starterå®šä¹‰äº†ä½¿ç”¨æŸç§æŠ€æœ¯æ—¶å¯¹äºä¾èµ–çš„å›ºå®šæ­é…æ ¼å¼ï¼Œä¹Ÿæ˜¯ä¸€ç§æœ€ä½³è§£å†³æ–¹æ¡ˆï¼Œ<font color="#ff0000"><b>ä½¿ç”¨starterå¯ä»¥å¸®åŠ©å¼€å‘è€…å‡å°‘ä¾èµ–é…ç½®</b></font></p><p>â€‹    è¿™ä¸ªä¸œè¥¿å…¶å®åœ¨å…¥é—¨æ¡ˆä¾‹é‡Œé¢å·²ç»ä½¿ç”¨è¿‡äº†ï¼Œå…¥é—¨æ¡ˆä¾‹ä¸­çš„webåŠŸèƒ½å°±æ˜¯ä½¿ç”¨è¿™ç§æ–¹å¼æ·»åŠ ä¾èµ–çš„ã€‚å¯ä»¥æŸ¥é˜…SpringBootçš„é…ç½®æºç ï¼Œçœ‹åˆ°è¿™äº›å®šä¹‰</p><ul><li>é¡¹ç›®ä¸­çš„pom.xmlå®šä¹‰äº†ä½¿ç”¨SpringMVCæŠ€æœ¯ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å†™SpringMVCçš„åæ ‡ï¼Œè€Œæ˜¯æ·»åŠ äº†ä¸€ä¸ªåå­—ä¸­åŒ…å«starterçš„ä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>åœ¨spring-boot-starter-webä¸­åˆå®šä¹‰äº†è‹¥å¹²ä¸ªå…·ä½“ä¾èµ–çš„åæ ‡</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    ä¹‹å‰æåˆ°è¿‡å¼€å‘SpringMVCç¨‹åºéœ€è¦å¯¼å…¥spring-webmvcçš„åæ ‡å’Œspringæ•´åˆwebå¼€å‘çš„åæ ‡ï¼Œå°±æ˜¯ä¸Šé¢è¿™ç»„åæ ‡ä¸­çš„æœ€åä¸¤ä¸ªäº†ã€‚</p><p>â€‹    ä½†æ˜¯æˆ‘ä»¬å‘ç°é™¤äº†è¿™ä¸¤ä¸ªè¿˜æœ‰å…¶ä»–çš„ï¼Œæ¯”å¦‚ç¬¬äºŒä¸ªï¼Œå«åšspring-boot-starter-jsonã€‚çœ‹åç§°å°±çŸ¥é“ï¼Œè¿™ä¸ªæ˜¯ä¸jsonæœ‰å…³çš„åæ ‡äº†ï¼Œä½†æ˜¯çœ‹åå­—å‘ç°å’Œæœ€åä¸¤ä¸ªåˆä¸å¤ªä¸€æ ·ï¼Œå®ƒçš„åå­—ä¸­ä¹Ÿæœ‰starterï¼Œæ‰“å¼€çœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆï¼Ÿ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-datatype-jdk8<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-datatype-jsr310<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.module<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-module-parameter-names<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªstarterä¸­åˆåŒ…å«äº†è‹¥å¹²ä¸ªåæ ‡ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨SpringMVCå¼€å‘é€šå¸¸éƒ½ä¼šä½¿ç”¨åˆ°Jsonï¼Œä½¿ç”¨jsonåˆç¦»ä¸å¼€è¿™é‡Œé¢å®šä¹‰çš„è¿™äº›åæ ‡ï¼Œçœ‹æ¥è¿˜çœŸæ˜¯æ–¹ä¾¿ï¼ŒSpringBootæŠŠæˆ‘ä»¬å¼€å‘ä¸­ä½¿ç”¨çš„ä¸œè¥¿èƒ½ç”¨åˆ°çš„éƒ½ç»™æå‰åšå¥½äº†ã€‚ä½ ä»”ç»†çœ‹å®Œä¼šå‘ç°ï¼Œé‡Œé¢æœ‰ä¸€äº›ä½ æ²¡ç”¨è¿‡çš„ã€‚çš„ç¡®ä¼šå‡ºç°è¿™ç§è¿‡é‡å¯¼å…¥çš„å¯èƒ½æ€§ï¼Œæ²¡å…³ç³»ï¼Œå¯ä»¥é€šè¿‡mavenä¸­çš„æ’é™¤ä¾èµ–å‰”é™¤æ‰ä¸€éƒ¨åˆ†ã€‚ä¸è¿‡ä½ ä¸ç®¡å®ƒä¹Ÿæ²¡äº‹ï¼Œå¤§ä¸äº†å°±æ˜¯è¿‡é‡å¯¼å…¥å‘—ã€‚</p><p>â€‹    åˆ°è¿™é‡ŒåŸºæœ¬ä¸Šå¾—åˆ°äº†ä¸€ä¸ªä¿¡æ¯ï¼Œä½¿ç”¨starterå¯ä»¥å¸®å¼€å‘è€…å¿«é€Ÿé…ç½®ä¾èµ–å…³ç³»ã€‚ä»¥å‰å†™ä¾èµ–3ä¸ªåæ ‡çš„ï¼Œç°åœ¨å†™å¯¼å…¥ä¸€ä¸ªå°±æå®šäº†ï¼Œå°±æ˜¯åŠ é€Ÿä¾èµ–é…ç½®çš„ã€‚</p><p><strong>starterä¸parentçš„åŒºåˆ«</strong></p><p>â€‹    æœ¦æœ¦èƒ§èƒ§ä¸­æ„Ÿè§‰starterä¸parentå¥½åƒéƒ½æ˜¯å¸®åŠ©æˆ‘ä»¬ç®€åŒ–é…ç½®çš„ï¼Œä½†æ˜¯åŠŸèƒ½åˆä¸ä¸€æ ·ï¼Œæ¢³ç†ä¸€ä¸‹ã€‚</p><p>â€‹    <font color="#ff0000"><b>starter</b></font>æ˜¯ä¸€ä¸ªåæ ‡ä¸­å®šäº†è‹¥å¹²ä¸ªåæ ‡ï¼Œä»¥å‰å†™å¤šä¸ªçš„ï¼Œç°åœ¨å†™ä¸€ä¸ªï¼Œ<font color="#ff0000"><b>æ˜¯ç”¨æ¥å‡å°‘ä¾èµ–é…ç½®çš„ä¹¦å†™é‡çš„</b></font></p><p>â€‹    <font color="#ff0000"><b>parent</b></font>æ˜¯å®šä¹‰äº†å‡ ç™¾ä¸ªä¾èµ–ç‰ˆæœ¬å·ï¼Œä»¥å‰å†™ä¾èµ–éœ€è¦è‡ªå·±æ‰‹å·¥æ§åˆ¶ç‰ˆæœ¬ï¼Œç°åœ¨ç”±SpringBootç»Ÿä¸€ç®¡ç†ï¼Œè¿™æ ·å°±ä¸å­˜åœ¨ç‰ˆæœ¬å†²çªäº†ï¼Œ<font color="#ff0000"><b>æ˜¯ç”¨æ¥å‡å°‘ä¾èµ–å†²çªçš„</b></font></p><p><strong>å®é™…å¼€å‘åº”ç”¨æ–¹å¼</strong></p><ul><li><p>å®é™…å¼€å‘ä¸­å¦‚æœéœ€è¦ç”¨ä»€ä¹ˆæŠ€æœ¯ï¼Œå…ˆå»æ‰¾æœ‰æ²¡æœ‰è¿™ä¸ªæŠ€æœ¯å¯¹åº”çš„starter</p><ul><li>å¦‚æœæœ‰å¯¹åº”çš„starterï¼Œç›´æ¥å†™starterï¼Œè€Œä¸”æ— éœ€æŒ‡å®šç‰ˆæœ¬ï¼Œç‰ˆæœ¬ç”±parentæä¾›</li><li>å¦‚æœæ²¡æœ‰å¯¹åº”çš„starterï¼Œæ‰‹å†™åæ ‡å³å¯</li></ul></li><li><p>å®é™…å¼€å‘ä¸­å¦‚æœå‘ç°åæ ‡å‡ºç°äº†å†²çªç°è±¡ï¼Œç¡®è®¤ä½ è¦ä½¿ç”¨çš„å¯è¡Œçš„ç‰ˆæœ¬å·ï¼Œä½¿ç”¨æ‰‹å·¥ä¹¦å†™çš„æ–¹å¼æ·»åŠ å¯¹åº”ä¾èµ–ï¼Œè¦†ç›–SpringBootæä¾›ç»™æˆ‘ä»¬çš„é…ç½®ç®¡ç†</p><ul><li>æ–¹å¼ä¸€ï¼šç›´æ¥å†™åæ ‡</li><li>æ–¹å¼äºŒï¼šè¦†ç›–<properties>ä¸­å®šä¹‰çš„ç‰ˆæœ¬å·ï¼Œå°±æ˜¯ä¸‹é¢è¿™å †ä¸œè¥¿äº†ï¼Œå“ªä¸ªå†²çªäº†è¦†ç›–å“ªä¸ªå°±OKäº†</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">activemq.version</span>&gt;</span>5.16.3<span class="hljs-tag">&lt;/<span class="hljs-name">activemq.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aspectj.version</span>&gt;</span>1.9.7<span class="hljs-tag">&lt;/<span class="hljs-name">aspectj.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">assertj.version</span>&gt;</span>3.19.0<span class="hljs-tag">&lt;/<span class="hljs-name">assertj.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-codec.version</span>&gt;</span>1.15<span class="hljs-tag">&lt;/<span class="hljs-name">commons-codec.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-dbcp2.version</span>&gt;</span>2.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">commons-dbcp2.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-lang3.version</span>&gt;</span>3.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">commons-lang3.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-pool.version</span>&gt;</span>1.6<span class="hljs-tag">&lt;/<span class="hljs-name">commons-pool.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">commons-pool2.version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">commons-pool2.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2.version</span>&gt;</span>1.4.200<span class="hljs-tag">&lt;/<span class="hljs-name">h2.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hibernate.version</span>&gt;</span>5.4.32.Final<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hibernate-validator.version</span>&gt;</span>6.2.0.Final<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-validator.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">httpclient.version</span>&gt;</span>4.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">httpclient.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">jackson-bom.version</span>&gt;</span>2.12.4<span class="hljs-tag">&lt;/<span class="hljs-name">jackson-bom.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">javax-jms.version</span>&gt;</span>2.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">javax-jms.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">javax-json.version</span>&gt;</span>1.1.4<span class="hljs-tag">&lt;/<span class="hljs-name">javax-json.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">javax-websocket.version</span>&gt;</span>1.1<span class="hljs-tag">&lt;/<span class="hljs-name">javax-websocket.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">jetty-el.version</span>&gt;</span>9.0.48<span class="hljs-tag">&lt;/<span class="hljs-name">jetty-el.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">junit.version</span>&gt;</span>4.13.2<span class="hljs-tag">&lt;/<span class="hljs-name">junit.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><p><font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹    SpringBootå®˜æ–¹ç»™å‡ºäº†å¥½å¤šä¸ªstarterçš„å®šä¹‰ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ï¼Œè€Œä¸”åç§°éƒ½æ˜¯å¦‚ä¸‹æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">å‘½åè§„åˆ™ï¼šspring-boot-starter-æŠ€æœ¯åç§°<br></code></pre></td></tr></table></figure><p>â€‹    æ‰€ä»¥ä»¥åè§äº†spring-boot-starter-aaaè¿™æ ·çš„åå­—ï¼Œè¿™å°±æ˜¯SpringBootå®˜æ–¹ç»™å‡ºçš„starterå®šä¹‰ã€‚é‚£éå®˜æ–¹å®šä¹‰çš„ä¹Ÿæœ‰å—ï¼Ÿæœ‰çš„ï¼Œå…·ä½“å‘½åæ–¹å¼åˆ°æ•´åˆç« èŠ‚å†è¯´</p><p><strong>æ€»ç»“</strong></p><ol><li>å¼€å‘SpringBootç¨‹åºéœ€è¦å¯¼å…¥åæ ‡æ—¶é€šå¸¸å¯¼å…¥å¯¹åº”çš„starter</li><li>æ¯ä¸ªä¸åŒçš„starteræ ¹æ®åŠŸèƒ½ä¸åŒï¼Œé€šå¸¸åŒ…å«å¤šä¸ªä¾èµ–åæ ‡</li><li>ä½¿ç”¨starterå¯ä»¥å®ç°å¿«é€Ÿé…ç½®çš„æ•ˆæœï¼Œè¾¾åˆ°ç®€åŒ–é…ç½®çš„ç›®çš„</li></ol><h4 id="å¼•å¯¼ç±»"><a href="#å¼•å¯¼ç±»" class="headerlink" title="å¼•å¯¼ç±»"></a>å¼•å¯¼ç±»</h4><p>â€‹    é…ç½®è¯´å®Œäº†ï¼Œæˆ‘ä»¬å‘ç°SpringBootç¡®å®å¸®åŠ©æˆ‘ä»¬å‡å°‘äº†å¾ˆå¤šé…ç½®å·¥ä½œï¼Œä¸‹é¢è¯´ä¸€ä¸‹ç¨‹åºæ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚ç›®å‰ç¨‹åºè¿è¡Œçš„å…¥å£å°±æ˜¯SpringBootå·¥ç¨‹åˆ›å»ºæ—¶è‡ªå¸¦çš„é‚£ä¸ªç±»äº†ï¼Œå¸¦æœ‰mainæ–¹æ³•çš„é‚£ä¸ªç±»ï¼Œè¿è¡Œè¿™ä¸ªç±»å°±å¯ä»¥å¯åŠ¨SpringBootå·¥ç¨‹çš„è¿è¡Œ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot0101QuickstartApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) &#123;<br>        <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">Springboot0101QuickstartApplication</span>.<span class="hljs-property">class</span>, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    SpringBootæœ¬èº«æ˜¯ä¸ºäº†åŠ é€ŸSpringç¨‹åºçš„å¼€å‘çš„ï¼Œè€ŒSpringç¨‹åºè¿è¡Œçš„åŸºç¡€æ˜¯éœ€è¦åˆ›å»ºè‡ªå·±çš„Springå®¹å™¨å¯¹è±¡ï¼ˆIoCå®¹å™¨ï¼‰å¹¶å°†æ‰€æœ‰çš„å¯¹è±¡äº¤ç»™Springçš„å®¹å™¨ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„Beanã€‚é‚£è¿˜äº†SpringBootåŠ é€Ÿå¼€å‘Springç¨‹åºï¼Œè¿™ä¸ªå®¹å™¨è¿˜åœ¨å—ï¼Ÿè¿™ä¸ªç–‘é—®ä¸ç”¨è¯´ï¼Œä¸€å®šåœ¨ã€‚å½“å‰è¿™ä¸ªç±»è¿è¡Œåå°±ä¼šäº§ç”Ÿä¸€ä¸ªSpringå®¹å™¨å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥å°†è¿™ä¸ªå¯¹è±¡ä¿å­˜èµ·æ¥ï¼Œé€šè¿‡å®¹å™¨å¯¹è±¡ç›´æ¥æ“ä½œBeanã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot0101QuickstartApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> SpringApplication.run(Springboot0101QuickstartApplication.class, args);<br>        <span class="hljs-type">BookController</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> ctx.getBean(BookController.class);<br>        System.out.println(<span class="hljs-string">&quot;bean======&gt;&quot;</span> + bean);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    é€šè¿‡ä¸Šè¿°æ“ä½œä¸éš¾çœ‹å‡ºï¼Œå…¶å®SpringBootç¨‹åºå¯åŠ¨è¿˜æ˜¯åˆ›å»ºäº†ä¸€ä¸ªSpringå®¹å™¨å¯¹è±¡ã€‚è¿™ä¸ªç±»åœ¨SpringBootç¨‹åºä¸­æ˜¯æ‰€æœ‰åŠŸèƒ½çš„å…¥å£ï¼Œç§°è¿™ä¸ªç±»ä¸º<font color="#ff0000"><b>å¼•å¯¼ç±»</b></font>ã€‚</p><p>â€‹    ä½œä¸ºä¸€ä¸ªå¼•å¯¼ç±»æœ€å…¸å‹çš„ç‰¹å¾å°±æ˜¯å½“å‰ç±»ä¸Šæ–¹å£°æ˜äº†ä¸€ä¸ªæ³¨è§£<font color="#ff0000"><b>@SpringBootApplication</b></font></p><p><strong>æ€»ç»“</strong></p><ol><li>SpringBootå·¥ç¨‹æä¾›å¼•å¯¼ç±»ç”¨æ¥å¯åŠ¨ç¨‹åº</li><li>SpringBootå·¥ç¨‹å¯åŠ¨ååˆ›å»ºå¹¶åˆå§‹åŒ–Springå®¹å™¨</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹    ç¨‹åºç°åœ¨å·²ç»è¿è¡Œäº†ï¼Œé€šè¿‡å¼•å¯¼ç±»çš„mainæ–¹æ³•è¿è¡Œäº†èµ·æ¥ã€‚ä½†æ˜¯è¿è¡Œjavaç¨‹åºä¸åº”è¯¥æ˜¯æ‰§è¡Œå®Œå°±ç»“æŸäº†å—ï¼Ÿä½†æ˜¯æˆ‘ä»¬ç°åœ¨æ˜æ˜¾æ˜¯å¯åŠ¨äº†ä¸€ä¸ªwebæœåŠ¡å™¨å•Šï¼Œä¸ç„¶ç½‘é¡µæ€ä¹ˆèƒ½æ­£å¸¸è®¿é—®å‘¢ï¼Ÿè¿™ä¸ªæœåŠ¡å™¨æ˜¯åœ¨å“ªé‡Œå†™çš„å‘¢ï¼Ÿ</p><h4 id="å†…åµŒtomcat"><a href="#å†…åµŒtomcat" class="headerlink" title="å†…åµŒtomcat"></a>å†…åµŒtomcat</h4><p>â€‹    å½“å‰æˆ‘ä»¬åšçš„SpringBootå…¥é—¨æ¡ˆä¾‹å‹¾é€‰äº†Spirng-webçš„åŠŸèƒ½ï¼Œå¹¶ä¸”å¯¼å…¥äº†å¯¹åº”çš„starterã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    SpringBootå‘ç°ï¼Œæ—¢ç„¶ä½ è¦åšwebç¨‹åºï¼Œè‚¯å®šç¦»ä¸å¼€ä½¿ç”¨webæœåŠ¡å™¨ï¼Œè¿™æ ·å§ï¼Œå¸®äººå¸®åˆ°åº•ï¼Œé€ä½›é€åˆ°è¥¿ã€‚æˆ‘å¸®ä½ æä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œä½ è¦æ„¿æ„ç”¨çš„ï¼Œç›´æ¥ä½¿ç”¨å°±å¥½äº†ï¼Œå¹²è„†æˆ‘å†å¤šç»™ä½ å‡ ç§é€‰æ‹©ï¼Œä½ éšä¾¿åˆ‡æ¢ã€‚ä¸‡ä¸€ä½ ä¸æƒ³ç”¨æˆ‘ç»™ä½ æä¾›çš„ï¼Œä¹Ÿè¡Œï¼Œä½ å¯ä»¥è‡ªå·±æã€‚</p><p>â€‹    ç”±äºè¿™ä¸ªåŠŸèƒ½ä¸å±äºç¨‹åºçš„ä¸»ä½“åŠŸèƒ½ï¼Œå¯ç”¨å¯ä¸ç”¨ï¼Œäºæ˜¯ä¹SpringBootå°†å…¶å®šä½æˆè¾…åŠ©åŠŸèƒ½ï¼Œåˆ«å°çœ‹è¿™ä¹ˆä¸€ä¸ªè¾…åŠ©åŠŸèƒ½ï¼Œå®ƒå¯æ˜¯å¸®æˆ‘ä»¬å¼€å‘è€…åˆå‡å°‘äº†å¥½å¤šçš„è®¾ç½®æ€§å·¥ä½œã€‚</p><p>â€‹    ä¸‹é¢å°±å›´ç»•ç€è¿™ä¸ªå†…ç½®çš„webæœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å†…ç½®çš„tomcatæœåŠ¡å™¨æ¥ç ”ç©¶å‡ ä¸ªé—®é¢˜</p><ol><li>è¿™ä¸ªæœåŠ¡å™¨åœ¨ä»€ä¹ˆä½ç½®å®šä¹‰çš„</li><li>è¿™ä¸ªæœåŠ¡å™¨æ˜¯æ€ä¹ˆè¿è¡Œçš„</li><li>è¿™ä¸ªæœåŠ¡å™¨å¦‚æœæƒ³æ¢æ€ä¹ˆæ¢ï¼Ÿè™½ç„¶è¿™ä¸ªéœ€æ±‚å¾ˆåƒåœ¾ï¼Œæå¾—å¼€å‘è€…ä¼šå¥½å¤šwebæœåŠ¡å™¨ä¸€æ ·ï¼Œç”¨åˆ«äººæä¾›å¥½çš„ä¸é¦™ä¹ˆï¼Ÿéè¦è‡ªå·±æŠ˜è…¾</li></ol><p><strong>å†…åµŒTomcatå®šä¹‰ä½ç½®</strong></p><p>â€‹    è¯´åˆ°å®šä¹‰çš„ä½ç½®ï¼Œæˆ‘ä»¬å°±æƒ³ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¼€å‘webç¨‹åºï¼Œç”¨çš„ç€webæœåŠ¡å™¨å—ï¼Ÿè‚¯å®šç”¨ä¸ç€å•Šã€‚é‚£å¦‚æœè¿™ä¸ªä¸œè¥¿è¢«åŠ å…¥åˆ°ä½ çš„ç¨‹åºä¸­ï¼Œä¼´éšç€ä»€ä¹ˆæŠ€æœ¯è¿›æ¥çš„å‘¢ï¼Ÿè‚¯å®šæ˜¯webç›¸å…³çš„åŠŸèƒ½å•Šï¼Œæ²¡é”™ï¼Œå°±æ˜¯å‰é¢å¯¼å…¥çš„webç›¸å…³çš„starteråšçš„è¿™ä»¶äº‹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    æ‰“å¼€æŸ¥çœ‹webçš„starterå¯¼å…¥äº†å“ªäº›ä¸œè¥¿</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    ç¬¬ä¸‰ä¸ªä¾èµ–å°±æ˜¯è¿™ä¸ªtomcatå¯¹åº”çš„ä¸œè¥¿äº†ï¼Œå±…ç„¶ä¹Ÿæ˜¯ä¸€ä¸ªstarterï¼Œå†æ‰“å¼€çœ‹çœ‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>jakarta.annotation<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jakarta.annotation-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-embed-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>9.0.52<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-annotations-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-embed-el<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>9.0.52<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-embed-websocket<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>9.0.52<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-annotations-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    è¿™é‡Œé¢æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„åæ ‡ï¼Œtomcat-embed-coreï¼Œå«åštomcatå†…åµŒæ ¸å¿ƒã€‚å°±æ˜¯è¿™ä¸ªä¸œè¥¿æŠŠtomcatåŠŸèƒ½å¼•å…¥åˆ°äº†æˆ‘ä»¬çš„ç¨‹åºä¸­ã€‚ç›®å‰è§£å†³äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ‰¾åˆ°æ ¹å„¿äº†ï¼Œè°æŠŠtomcatå¼•å…¥åˆ°ç¨‹åºä¸­çš„ï¼Ÿspring-boot-starter-webä¸­çš„spring-boot-starter-tomcatåšçš„ã€‚ä¹‹æ‰€ä»¥ä½ æ„Ÿè§‰å¾ˆå¥‡å¦™çš„åŸå› å°±æ˜¯ï¼Œè¿™ä¸ªä¸œè¥¿æ˜¯é»˜è®¤åŠ å…¥åˆ°ç¨‹åºä¸­äº†ï¼Œæ‰€ä»¥æ„Ÿè§‰å¾ˆç¥å¥‡ï¼Œå±…ç„¶ä»€ä¹ˆéƒ½ä¸åšï¼Œå°±æœ‰äº†webæœåŠ¡å™¨å¯¹åº”çš„åŠŸèƒ½ï¼Œå†æ¥è¯´ç¬¬äºŒä¸ªé—®é¢˜ï¼Œè¿™ä¸ªæœåŠ¡å™¨æ˜¯æ€ä¹ˆè¿è¡Œçš„</p><p><strong>å†…åµŒTomcatè¿è¡ŒåŸç†</strong></p><p>â€‹    TomcatæœåŠ¡å™¨æ˜¯ä¸€æ¬¾è½¯ä»¶ï¼Œè€Œä¸”æ˜¯ä¸€æ¬¾ä½¿ç”¨javaè¯­è¨€å¼€å‘çš„è½¯ä»¶ï¼Œç†Ÿæ‚‰çš„å°ä¼™ä¼´å¯èƒ½æœ‰å°è±¡ï¼Œtomcatå®‰è£…ç›®å½•ä¸­ä¿å­˜æœ‰jarï¼Œå¥½å¤šä¸ªjarã€‚</p><p>â€‹    ä¸‹é¢çš„é—®é¢˜æ¥äº†ï¼Œæ—¢ç„¶æ˜¯ä½¿ç”¨javaè¯­è¨€å¼€å‘çš„ï¼Œè¿è¡Œçš„æ—¶å€™è‚¯å®šç¬¦åˆjavaç¨‹åºè¿è¡Œçš„åŸç†ï¼Œjavaç¨‹åºè¿è¡Œé çš„æ˜¯ä»€ä¹ˆï¼Ÿå¯¹è±¡å‘€ï¼Œä¸€åˆ‡çš†å¯¹è±¡ï¼Œä¸‡ç‰©çš†å¯¹è±¡ã€‚é‚£tomcatè¿è¡Œèµ·æ¥å‘¢ï¼Ÿä¹Ÿæ˜¯å¯¹è±¡ã€‚</p><p>â€‹    å¦‚æœæ˜¯å¯¹è±¡ï¼Œé‚£Springå®¹å™¨æ˜¯ç”¨æ¥ç®¡ç†å¯¹è±¡çš„ï¼Œè¿™ä¸ªå¯¹è±¡èƒ½ä¸èƒ½äº¤ç»™Springå®¹å™¨ç®¡ç†å‘¢ï¼ŸæŠŠå—å»æ‰ï¼Œæ˜¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥äº¤ç»™Springå®¹å™¨ç®¡ç†ï¼Œè¡Œäº†ï¼Œè¿™ä¸‹é€šäº†ã€‚tomcatæœåŠ¡å™¨è¿è¡Œå…¶å®æ˜¯ä»¥å¯¹è±¡çš„å½¢å¼åœ¨Springå®¹å™¨ä¸­è¿è¡Œçš„ï¼Œæ€ªä¸å¾—æˆ‘ä»¬æ²¡æœ‰å®‰è£…è¿™ä¸ªtomcatï¼Œè€Œä¸”è¿˜èƒ½ç”¨ã€‚é—¹äº†ç™½å¤©è¿™ä¸œè¥¿æœ€åæ˜¯ä»¥ä¸€ä¸ªå¯¹è±¡çš„å½¢å¼å­˜åœ¨ï¼Œä¿å­˜åœ¨Springå®¹å™¨ä¸­æ‚„æ‚„è¿è¡Œçš„ã€‚å…·ä½“è¿è¡Œçš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å°±æ˜¯ä¸Šå‰é¢æåˆ°çš„é‚£ä¸ªtomcatå†…åµŒæ ¸å¿ƒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-embed-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>9.0.52<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    é‚£æ—¢ç„¶æ˜¯ä¸ªå¯¹è±¡ï¼Œå¦‚æœæŠŠè¿™ä¸ªå¯¹è±¡ä»Springå®¹å™¨ä¸­å»æ‰æ˜¯ä¸æ˜¯å°±æ²¡æœ‰webæœåŠ¡å™¨çš„åŠŸèƒ½å‘¢ï¼Ÿæ˜¯è¿™æ ·çš„ï¼Œé€šè¿‡ä¾èµ–æ’é™¤å¯ä»¥å»æ‰è¿™ä¸ªwebæœåŠ¡å™¨åŠŸèƒ½</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    ä¸Šé¢å¯¹web-starteråšäº†ä¸€ä¸ªæ“ä½œï¼Œä½¿ç”¨mavençš„æ’é™¤ä¾èµ–å»æ‰äº†ä½¿ç”¨tomcatçš„starterã€‚è¿™ä¸‹å¥½äº†ï¼Œå®¹å™¨ä¸­è‚¯å®šæ²¡æœ‰è¿™ä¸ªå¯¹è±¡äº†ï¼Œé‡æ–°å¯åŠ¨ç¨‹åºå¯ä»¥è§‚å¯Ÿåˆ°ç¨‹åºè¿è¡Œäº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åƒä¹‹å‰é‚£æ ·è¿è¡Œåä¼šç­‰ç€ç”¨æˆ·å‘è¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥åœæ‰äº†ï¼Œå°±æ˜¯è¿™ä¸ªåŸå› äº†ã€‚</p><p><strong>æ›´æ¢å†…åµŒTomcat</strong></p><p>â€‹    é‚£æ ¹æ®ä¸Šé¢çš„æ“ä½œæˆ‘ä»¬æ€è€ƒæ˜¯å¦å¯ä»¥æ¢ä¸ªæœåŠ¡å™¨å‘¢ï¼Ÿå¿…é¡»çš„å˜›ã€‚æ ¹æ®SpringBootçš„å·¥ä½œæœºåˆ¶ï¼Œç”¨ä»€ä¹ˆæŠ€æœ¯ï¼ŒåŠ å…¥ä»€ä¹ˆä¾èµ–å°±è¡Œäº†ã€‚SpringBootæä¾›äº†3æ¬¾å†…ç½®çš„æœåŠ¡å™¨</p><ul><li><p>tomcat(é»˜è®¤)ï¼šapacheå‡ºå“ï¼Œç²‰ä¸å¤šï¼Œåº”ç”¨é¢å¹¿ï¼Œè´Ÿè½½äº†è‹¥å¹²è¾ƒé‡çš„ç»„ä»¶</p></li><li><p>jettyï¼šæ›´è½»é‡çº§ï¼Œè´Ÿè½½æ€§èƒ½è¿œä¸åŠtomcat</p></li><li><p>undertowï¼šè´Ÿè½½æ€§èƒ½å‹‰å¼ºè·‘èµ¢tomcat</p><p>æƒ³ç”¨å“ªä¸ªï¼ŒåŠ ä¸ªåæ ‡å°±OKã€‚å‰ææ˜¯æŠŠtomcatæ’é™¤æ‰ï¼Œå› ä¸ºtomcatæ˜¯é»˜è®¤åŠ è½½çš„ã€‚</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    ç°åœ¨å°±å·²ç»æˆåŠŸæ›¿æ¢äº†webæœåŠ¡å™¨ï¼Œæ ¸å¿ƒæ€æƒ³å°±æ˜¯ç”¨ä»€ä¹ˆåŠ å…¥å¯¹åº”åæ ‡å°±å¯ä»¥äº†ã€‚å¦‚æœæœ‰starterï¼Œä¼˜å…ˆä½¿ç”¨starterã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>å†…åµŒTomcatæœåŠ¡å™¨æ˜¯SpringBootè¾…åŠ©åŠŸèƒ½ä¹‹ä¸€</li><li>å†…åµŒTomcatå·¥ä½œåŸç†æ˜¯å°†TomcatæœåŠ¡å™¨ä½œä¸ºå¯¹è±¡è¿è¡Œï¼Œå¹¶å°†è¯¥å¯¹è±¡äº¤ç»™Springå®¹å™¨ç®¡ç†</li><li>å˜æ›´å†…åµŒæœåŠ¡å™¨æ€æƒ³æ˜¯å»é™¤ç°æœ‰æœåŠ¡å™¨ï¼Œæ·»åŠ å…¨æ–°çš„æœåŠ¡å™¨</li></ol><p>â€‹    åˆ°è¿™é‡Œç¬¬ä¸€ç« å¿«é€Ÿä¸Šæ‰‹SpringBootå°±ç»“æŸäº†ï¼Œè¿™ä¸€ç« æˆ‘ä»¬å­¦ä¹ äº†ä¸¤å¤§å—çŸ¥è¯†</p><ol><li>ä½¿ç”¨äº†4ç§æ–¹å¼åˆ¶ä½œäº†SpringBootçš„å…¥é—¨ç¨‹åºï¼Œä¸ç®¡æ˜¯å“ªä¸€ç§ï¼Œå…¶å®å†…éƒ¨éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„</li><li>å­¦ä¹ äº†å…¥é—¨ç¨‹åºçš„å·¥ä½œæµç¨‹ï¼ŒçŸ¥é“ä»€ä¹ˆæ˜¯parentï¼Œä»€ä¹ˆæ˜¯starterï¼Œè¿™ä¸¤ä¸ªä¸œè¥¿æ˜¯æ€ä¹ˆé…åˆå·¥ä½œçš„ï¼Œä»¥åŠæˆ‘ä»¬çš„ç¨‹åºä¸ºä»€ä¹ˆå¯åŠ¨èµ·æ¥æ˜¯ä¸€ä¸ªtomcatæœåŠ¡å™¨ç­‰ç­‰</li></ol><p>â€‹    ç¬¬ä¸€ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå†å¾€ä¸‹å­¦ä¹ å°±è¦å»åŸºäºä¼šåˆ›å»ºSpringBootå·¥ç¨‹çš„åŸºç¡€ä¸Šï¼Œç ”ç©¶SpringBootå·¥ç¨‹çš„å…·ä½“ç»†èŠ‚äº†ã€‚</p><h2 id="JC-2-SpringBootåŸºç¡€é…ç½®"><a href="#JC-2-SpringBootåŸºç¡€é…ç½®" class="headerlink" title="JC-2.SpringBootåŸºç¡€é…ç½®"></a>JC-2.SpringBootåŸºç¡€é…ç½®</h2><p>â€‹    å…¥é—¨æ¡ˆä¾‹åšå®Œäº†ï¼Œä¸‹é¢å°±è¦ç ”ç©¶SpringBootçš„ç”¨æ³•äº†ã€‚é€šè¿‡å…¥é—¨æ¡ˆä¾‹ï¼Œå„ä½å°ä¼™ä¼´èƒ½å¤Ÿæ„ŸçŸ¥åˆ°ä¸€ä¸ªä¿¡æ¯ï¼ŒSpringBootæ²¡æœ‰å…·ä½“çš„åŠŸèƒ½ï¼Œå®ƒåœ¨è¾…åŠ©åŠ å¿«Springç¨‹åºçš„å¼€å‘æ•ˆç‡ã€‚æˆ‘ä»¬å‘ç°ç°åœ¨å‡ ä¹ä¸ç”¨åšä»»ä½•çš„é…ç½®ï¼ŒåŠŸèƒ½å°±æœ‰äº†ï¼Œç¡®å®å¾ˆå¥½ç”¨ã€‚ä½†æ˜¯ä»”ç»†æƒ³æƒ³ï¼Œæ²¡æœ‰åšé…ç½®æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€é…ç½®å·²ç»åšå¥½äº†ï¼Œä¸ç”¨ä½ è‡ªå·±å†™äº†ã€‚ä½†æ˜¯æ–°çš„é—®é¢˜åˆæ¥äº†ï¼Œå¦‚æœä¸æƒ³ç”¨å·²ç»å†™å¥½çš„é»˜è®¤é…ç½®ï¼Œè¯¥å¦‚ä½•å¹²é¢„å‘¢ï¼Ÿè¿™å°±æ˜¯è¿™ä¸€ç« å’±ä»¬è¦ç ”ç©¶çš„é—®é¢˜ã€‚</p><p>â€‹    å¦‚æœæˆ‘ä»¬æƒ³ä¿®æ”¹é»˜è®¤çš„é…ç½®iï¼Œè¿™ä¸ªä¿¡æ¯åº”è¯¥å†™åœ¨ä»€ä¹ˆä½ç½®å‘¢ï¼Ÿç›®å‰æˆ‘ä»¬æ¥è§¦çš„å…¥é—¨æ¡ˆä¾‹ä¸­ä¸€å…±æœ‰3ä¸ªæ–‡ä»¶ï¼Œç¬¬ä¸€æ˜¯pom.xmlæ–‡ä»¶ï¼Œè®¾ç½®é¡¹ç›®çš„ä¾èµ–çš„ï¼Œè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½ç ”ç©¶çš„ï¼Œç›¸å…³çš„é«˜çº§å†…å®¹å’±ä»¬åˆ°åŸç†ç¯‡å†è¯´ï¼Œç¬¬äºŒæ˜¯å¼•å¯¼ç±»ï¼Œè¿™ä¸ªæ˜¯æ‰§è¡ŒSpringBootç¨‹åºçš„å…¥å£ï¼Œä¹Ÿä¸åƒæ˜¯åšé…ç½®çš„åœ°æ–¹ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªä¿¡æ¯ï¼Œå°±æ˜¯åœ¨resourcesç›®å½•ä¸‹é¢æœ‰ä¸€ä¸ªç©ºç™½çš„æ–‡ä»¶ï¼Œå«åšapplication.propertiesã€‚ä¸€çœ‹å°±æ˜¯ä¸ªé…ç½®æ–‡ä»¶ï¼Œå’±ä»¬è¿™ä¸€ç« å°±æ¥è¯´è¯´é…ç½®æ–‡ä»¶æ€ä¹ˆå†™ï¼Œèƒ½å†™ä»€ä¹ˆï¼Œæ€ä¹ˆå¹²é¢„SpringBootçš„é»˜è®¤é…ç½®ï¼Œä¿®æ”¹æˆè‡ªå·±çš„é…ç½®ã€‚</p><p>â€‹    </p><h3 id="JC-2-1-å±æ€§é…ç½®"><a href="#JC-2-1-å±æ€§é…ç½®" class="headerlink" title="JC-2-1.å±æ€§é…ç½®"></a>JC-2-1.å±æ€§é…ç½®</h3><p>â€‹    SpringBooté€šè¿‡é…ç½®æ–‡ä»¶application.propertieså°±å¯ä»¥ä¿®æ”¹é»˜è®¤çš„é…ç½®ï¼Œé‚£å’±ä»¬å°±å…ˆæ‰¾ä¸ªç®€å•çš„é…ç½®ä¸‹æ‰‹ï¼Œå½“å‰è®¿é—®tomcatçš„é»˜è®¤ç«¯å£æ˜¯8080ï¼Œå¥½ç†Ÿæ‚‰çš„å‘³é“ï¼Œä½†æ˜¯ä¸ä¾¿äºä¹¦å†™ï¼Œæˆ‘ä»¬å…ˆæ”¹æˆ80ï¼Œé€šè¿‡è¿™ä¸ªæ“ä½œæ¥ç†Ÿæ‚‰ä¸€ä¸‹SpringBootçš„é…ç½®æ ¼å¼æ˜¯ä»€ä¹ˆæ ·çš„</p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-zr2EIVyr-1644501801360)(img\image-20211123165428245.png)]</p><p>â€‹    é‚£è¯¥å¦‚ä½•å†™å‘¢ï¼Ÿpropertiesæ ¼å¼çš„æ–‡ä»¶ä¹¦å†™è§„èŒƒæ˜¯key&#x3D;value</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">name</span>=<span class="hljs-string">itheima</span><br></code></pre></td></tr></table></figure><p>â€‹    è¿™ä¸ªæ ¼å¼è‚¯å®šæ˜¯ä¸èƒ½é¢ è¦†çš„ï¼Œé‚£å°±å°è¯•æ€§çš„å†™å°±è¡Œäº†ï¼Œæ”¹ç«¯å£ï¼Œå†™portã€‚å½“ä½ è¾“å…¥portåï¼Œç¥å¥‡çš„äº‹æƒ…å°±å‘ç”Ÿäº†ï¼Œè¿™ç©æ„å„¿å¸¦æç¤ºï¼Œå¤ªå¥½äº†</p><p><img src="https://img-blog.csdnimg.cn/2a7d6072ea4540f1923319d452f6ede0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    æ ¹æ®æç¤ºæ•²å›è½¦ï¼Œè¾“å…¥80ç«¯å£ï¼Œæå®š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">80</span><br></code></pre></td></tr></table></figure><p>â€‹    ä¸‹é¢å°±å¯ä»¥ç›´æ¥è¿è¡Œç¨‹åºï¼Œæµ‹è¯•æ•ˆæœäº†ã€‚</p><p>â€‹    æˆ‘ä»¬æƒŠå¥‡çš„å‘ç°SpringBootè¿™ç©æ„å„¿ç‹ å•Šï¼Œä»¥å‰ä¿®æ”¹ç«¯å£åœ¨å“ªé‡Œæ”¹ï¼ŸtomcatæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ä¸­æ”¹ï¼Œç°åœ¨å‘¢ï¼ŸSpringBootä¸“ç”¨çš„é…ç½®æ–‡ä»¶ä¸­æ”¹ï¼Œæ˜¯ä¸æ˜¯æ„å‘³ç€ä»¥åæ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥å†™åœ¨è¿™ä¸€ä¸ªæ–‡ä»¶ä¸­å‘¢ï¼Ÿæ˜¯çš„ï¼Œç®€åŒ–å¼€å‘è€…é…ç½®çš„ä¹¦å†™ä½ç½®ï¼Œé›†ä¸­ç®¡ç†ã€‚å¦™å•Šï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶äº†ã€‚</p><p>â€‹    å…¶å®åˆ°è¿™é‡Œæˆ‘ä»¬åº”è¯¥å¾—åˆ°å¦‚ä¸‹ä¸‰ä¸ªä¿¡æ¯</p><ol><li>SpringBootç¨‹åºå¯ä»¥åœ¨application.propertiesæ–‡ä»¶ä¸­è¿›è¡Œå±æ€§é…ç½®</li><li>application.propertiesæ–‡ä»¶ä¸­åªè¦è¾“å…¥è¦é…ç½®çš„å±æ€§å…³é”®å­—å°±å¯ä»¥æ ¹æ®æç¤ºè¿›è¡Œè®¾ç½®</li><li>SpringBootå°†é…ç½®ä¿¡æ¯é›†ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å†™ï¼Œä¸ç®¡ä½ æ˜¯æœåŠ¡å™¨çš„é…ç½®ï¼Œè¿˜æ˜¯æ•°æ®åº“çš„é…ç½®ï¼Œæ€»ä¹‹éƒ½å†™åœ¨ä¸€èµ·ï¼Œé€ƒç¦»ä¸€ä¸ªé¡¹ç›®åå‡ ç§é…ç½®æ–‡ä»¶æ ¼å¼çš„å°´å°¬å±€é¢</li></ol><p><strong>æ€»ç»“</strong></p><ol><li>SpringBooté»˜è®¤é…ç½®æ–‡ä»¶æ˜¯application.properties</li></ol><p>â€‹    åšå®Œäº†ç«¯å£çš„é…ç½®ï¼Œè¶çƒ­æ‰“é“ï¼Œå†åšå‡ ä¸ªé…ç½®ï¼Œç›®å‰é¡¹ç›®å¯åŠ¨æ—¶ä¼šæ˜¾ç¤ºä¸€äº›æ—¥å¿—ä¿¡æ¯ï¼Œå°±æ¥æ”¹ä¸€æ”¹è¿™é‡Œé¢çš„ä¸€äº›è®¾ç½®ã€‚</p><p><strong>å…³é—­è¿è¡Œæ—¥å¿—å›¾è¡¨ï¼ˆbanner)</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">spring.main.banner-mode</span>=<span class="hljs-string">off</span><br></code></pre></td></tr></table></figure><p><strong>è®¾ç½®è¿è¡Œæ—¥å¿—çš„æ˜¾ç¤ºçº§åˆ«</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">logging.level.root</span>=<span class="hljs-string">debug</span><br></code></pre></td></tr></table></figure><p>â€‹    ä½ ä¼šå‘ç°ï¼Œç°åœ¨è¿™ä¹ˆæé…ç½®å¤ªçˆ½äº†ï¼Œä»¥å‰ä½ åšé…ç½®æ€ä¹ˆåšï¼Ÿä¸åŒçš„æŠ€æœ¯æœ‰è‡ªå·±ä¸“ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸åŒæ ¼å¼ä¹Ÿä¸ç»Ÿä¸€ï¼Œç°åœ¨å‘¢ï¼Ÿä¸ç”¨ä¸œå¥”è¥¿èµ°çš„æ‰¾é…ç½®æ–‡ä»¶å†™é…ç½®äº†ï¼Œç»Ÿä¸€æ ¼å¼äº†ï¼Œè¿™å°±æ˜¯å¤§ç§¦å¸å›½å•Šï¼Œç»Ÿä¸€å…­å›½ã€‚SpringBootæ¯”å¤§ç§¦ç‹ ï¼Œå› ä¸ºæœªæ¥å‡ºç°çš„æŠ€æœ¯è¿˜æ²¡å‡ºç°å‘¢ï¼Œä½†æ˜¯ç°åœ¨å·²ç»ç¡®è®¤äº†ï¼Œé…ç½®éƒ½å†™è¿™ä¸ªæ–‡ä»¶é‡Œé¢ã€‚</p><p>â€‹    æˆ‘ä»¬ç°åœ¨é…ç½®äº†3ä¸ªä¿¡æ¯ï¼Œä½†æ˜¯åˆæœ‰æ–°çš„é—®é¢˜äº†ã€‚è¿™ä¸ªé…ç½®æ˜¯éšä¾¿å†™çš„å—ï¼Ÿä»€ä¹ˆéƒ½èƒ½é…ï¼Ÿæœ‰æ²¡æœ‰ä¸€ä¸ªä¸œè¥¿æ˜¾ç¤ºæ‰€æœ‰èƒ½é…ç½®çš„é¡¹å‘¢ï¼Ÿæ­¤å¤–è¿™ä¸ªé…ç½®å’Œä»€ä¹ˆä¸œè¥¿æœ‰å…³å‘¢ï¼Ÿä¼šä¸ä¼šå› ä¸ºæˆ‘å†™äº†ä»€ä¹ˆä¸œè¥¿ä»¥åæ‰å¯ä»¥å†™ä»€ä¹ˆé…ç½®å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ç°åœ¨æ²¡æœ‰å†™æ•°æ®åº“ç›¸å…³çš„ä¸œè¥¿ï¼Œèƒ½å¦é…ç½®æ•°æ®å‘¢ï¼Ÿä¸€ä¸ªä¸€ä¸ªæ¥ï¼Œå…ˆè¯´ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œéƒ½èƒ½é…ç½®ä»€ä¹ˆã€‚</p><p>â€‹    æ‰“å¼€SpringBootçš„å®˜ç½‘ï¼Œæ‰¾åˆ°SpringBootå®˜æ–¹æ–‡æ¡£ï¼Œæ‰“å¼€æŸ¥çœ‹é™„å½•ä¸­çš„Application Propertieså°±å¯ä»¥è·å–åˆ°å¯¹åº”çš„é…ç½®é¡¹äº†ï¼Œç½‘å€å¥‰ä¸Šï¼š<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties">https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties</a></p><p>â€‹    èƒ½å†™ä»€ä¹ˆçš„é—®é¢˜è§£å†³äº†ï¼Œå†æ¥è¯´ç¬¬äºŒä¸ªé—®é¢˜ï¼Œè¿™ä¸ªé…ç½®é¡¹å’Œä»€ä¹ˆæœ‰å…³ã€‚åœ¨pomä¸­æ³¨é‡Šæ‰å¯¼å…¥çš„spring-boot-starter-webï¼Œç„¶ååˆ·æ–°å·¥ç¨‹ï¼Œä½ ä¼šå‘ç°é…ç½®çš„æç¤ºæ¶ˆå¤±äº†ã€‚é—¹äº†åŠå¤©æ˜¯è®¾å®šä½¿ç”¨äº†ä»€ä¹ˆæŠ€æœ¯æ‰èƒ½åšä»€ä¹ˆé…ç½®ã€‚ä¹Ÿåˆç†ï¼Œä¸ç„¶é…ç½®çš„ä¸œè¥¿éƒ½æ²¡æœ‰ä½¿ç”¨å¯¹åº”æŠ€æœ¯ï¼Œé…äº†ä¹Ÿæ˜¯ç™½é…ã€‚</p><p><font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹    æ‰€æœ‰çš„starterä¸­éƒ½ä¼šä¾èµ–ä¸‹é¢è¿™ä¸ªstarterï¼Œå«åšspring-boot-starterã€‚è¿™ä¸ªstarteræ˜¯æ‰€æœ‰çš„SpringBootçš„starterçš„åŸºç¡€ä¾èµ–ï¼Œé‡Œé¢å®šä¹‰äº†SpringBootç›¸å…³çš„åŸºç¡€é…ç½®ï¼Œå…³äºè¿™ä¸ªstarteræˆ‘ä»¬åˆ°å¼€å‘åº”ç”¨ç¯‡å’ŒåŸç†ç¯‡ä¸­å†æ·±å…¥è®²è§£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;<br>    &lt;version&gt;<span class="hljs-number">2.5</span><span class="hljs-number">.4</span>&lt;/version&gt;<br>    &lt;scope&gt;compile&lt;/scope&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>SpringBootä¸­å¯¼å…¥å¯¹åº”starteråï¼Œæä¾›å¯¹åº”é…ç½®å±æ€§</li><li>ä¹¦å†™SpringBooté…ç½®é‡‡ç”¨å…³é”®å­—+æç¤ºå½¢å¼ä¹¦å†™</li></ol><h3 id="JC-2-2-é…ç½®æ–‡ä»¶åˆ†ç±»"><a href="#JC-2-2-é…ç½®æ–‡ä»¶åˆ†ç±»" class="headerlink" title="JC-2-2.é…ç½®æ–‡ä»¶åˆ†ç±»"></a>JC-2-2.é…ç½®æ–‡ä»¶åˆ†ç±»</h3><p>â€‹    ç°åœ¨å·²ç»èƒ½å¤Ÿè¿›è¡ŒSpringBootç›¸å…³çš„é…ç½®äº†ï¼Œä½†æ˜¯propertiesæ ¼å¼çš„é…ç½®å†™èµ·æ¥æ€»æ˜¯è§‰å¾—çœ‹ç€ä¸èˆ’æœï¼Œæ‰€ä»¥å°±æœŸæœ›å­˜åœ¨ä¸€ç§ä¹¦å†™èµ·æ¥æ›´ç®€ä¾¿çš„é…ç½®æ ¼å¼æä¾›ç»™å¼€å‘è€…ä½¿ç”¨ã€‚æœ‰å—ï¼Ÿè¿˜çœŸæœ‰ï¼ŒSpringBooté™¤äº†æ”¯æŒpropertiesæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œè¿˜æ”¯æŒå¦å¤–ä¸¤ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚åˆ†åˆ«å¦‚ä¸‹:</p><ul><li><p>propertiesæ ¼å¼</p></li><li><p>ymlæ ¼å¼</p></li><li><p>yamlæ ¼å¼</p><p> ä¸€çœ‹åˆ°å…¨æ–°çš„æ–‡ä»¶æ ¼å¼ï¼Œå„ä½å°ä¼™ä¼´è‚¯å®šæƒ³ï¼Œè¿™ä¸‹åˆè¦å­¦ä¹ æ–°çš„è¯­æ³•æ ¼å¼äº†ã€‚æ€ä¹ˆè¯´å‘¢ï¼Ÿä»çŸ¥è¯†è§’åº¦æ¥è¯´ï¼Œè¦å­¦ï¼Œä»å¼€å‘è§’åº¦æ¥è¯´ï¼Œä¸ç”¨å­¦ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºSpringBootçš„é…ç½®åœ¨Ideaå·¥å…·ä¸‹æœ‰æç¤ºå•Šï¼Œè·Ÿç€æç¤ºèµ°å°±è¡Œäº†ã€‚ä¸‹é¢åˆ—ä¸¾ä¸‰ç§ä¸åŒæ–‡ä»¶æ ¼å¼é…ç½®ç›¸åŒçš„å±æ€§èŒƒä¾‹ï¼Œå…ˆäº†è§£ä¸€ä¸‹</p></li><li><p>application.propertiesï¼ˆpropertiesæ ¼å¼ï¼‰</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">80</span><br></code></pre></td></tr></table></figure><ul><li>application.ymlï¼ˆymlæ ¼å¼ï¼‰</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs YML"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">81</span><br></code></pre></td></tr></table></figure><ul><li>application.yamlï¼ˆyamlæ ¼å¼ï¼‰</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">82</span><br></code></pre></td></tr></table></figure><p>â€‹    ä»”ç»†çœ‹ä¼šå‘ç°ymlæ ¼å¼å’Œyamlæ ¼å¼é™¤äº†æ–‡ä»¶ååç¼€ä¸ä¸€æ ·ï¼Œæ ¼å¼å®Œå…¨ä¸€æ ·ï¼Œæ˜¯è¿™æ ·çš„ï¼Œymlå’Œyamlæ–‡ä»¶æ ¼å¼å°±æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªæ˜¯æ–‡ä»¶åç¼€ä¸åŒï¼Œæ‰€ä»¥å¯ä»¥åˆå¹¶æˆä¸€ç§æ ¼å¼æ¥çœ‹ã€‚é‚£å¯¹äºè¿™ä¸‰ç§æ ¼å¼æ¥è¯´ï¼Œä»¥åç”¨å“ªä¸€ç§æ¯”è¾ƒå¤šå‘¢ï¼Ÿè®°æ¸…æ¥šï¼Œä»¥ååŸºæœ¬ä¸Šéƒ½æ˜¯ç”¨ymlæ ¼å¼çš„ï¼Œæœ¬è¯¾ç¨‹åé¢çš„æ‰€æœ‰çŸ¥è¯†éƒ½æ˜¯åŸºäºymlæ ¼å¼æ¥åˆ¶ä½œçš„ï¼Œä»¥ååœ¨ä¼ä¸šå¼€å‘è¿‡ç¨‹ä¸­ç”¨è¿™ä¸ªæ ¼å¼çš„æœºä¼šä¹Ÿæœ€å¤šï¼Œä¸€å®šè¦é‡ç‚¹æŒæ¡ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>SpringBootæä¾›äº†3ç§é…ç½®æ–‡ä»¶çš„æ ¼å¼<ul><li>propertiesï¼ˆä¼ ç»Ÿæ ¼å¼&#x2F;é»˜è®¤æ ¼å¼ï¼‰</li><li><strong>yml</strong>ï¼ˆä¸»æµæ ¼å¼ï¼‰</li><li>yaml</li></ul></li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹    ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“ä½¿ç”¨ä¸‰ç§æ ¼å¼éƒ½å¯ä»¥åšé…ç½®äº†ï¼Œå¥½å¥‡å®å®ä»¬å°±æœ‰æ–°çš„çµé­‚æ‹·é—®äº†ï¼Œä¸‡ä¸€æˆ‘ä¸‰ä¸ªéƒ½å†™äº†ï¼Œä»–ä»¬ä¸‰ä¸ªè°è¯´äº†ç®—å‘¢ï¼Ÿæ‰“ä¸€æ¶å—ï¼Ÿ</p><h4 id="é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§"><a href="#é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§" class="headerlink" title="é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§"></a>é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</h4><p>â€‹    å…¶å®ä¸‰ä¸ªæ–‡ä»¶å¦‚æœå…±å­˜çš„è¯ï¼Œè°ç”Ÿæ•ˆè¯´çš„å°±æ˜¯é…ç½®æ–‡ä»¶åŠ è½½çš„ä¼˜å…ˆçº§åˆ«ã€‚å…ˆè¯´ä¸€ç‚¹ï¼Œè™½ç„¶ä»¥åè¿™ç§æƒ…å†µå¾ˆå°‘å‡ºç°ï¼Œä½†æ˜¯è¿™ä¸ªçŸ¥è¯†è¿˜æ˜¯å¯ä»¥å­¦ä¹ ä¸€ä¸‹çš„ã€‚æˆ‘ä»¬å°±è®©ä¸‰ä¸ªé…ç½®æ–‡ä»¶ä¹¦å†™åŒæ ·çš„ä¿¡æ¯ï¼Œæ¯”å¦‚éƒ½é…ç½®ç«¯å£ï¼Œç„¶åæˆ‘ä»¬è®©æ¯ä¸ªæ–‡ä»¶é…ç½®çš„ç«¯å£å·éƒ½ä¸ä¸€æ ·ï¼Œæœ€åå¯åŠ¨ç¨‹åºåçœ‹å¯åŠ¨ç«¯å£æ˜¯å¤šå°‘å°±çŸ¥é“è°çš„åŠ è½½ä¼˜å…ˆçº§æ¯”è¾ƒé«˜äº†ã€‚</p><ul><li>application.propertiesï¼ˆpropertiesæ ¼å¼ï¼‰</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">80</span><br></code></pre></td></tr></table></figure><ul><li>application.ymlï¼ˆymlæ ¼å¼ï¼‰</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs YML"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">81</span><br></code></pre></td></tr></table></figure><ul><li>application.yamlï¼ˆyamlæ ¼å¼ï¼‰</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">82</span><br></code></pre></td></tr></table></figure><p>â€‹    å¯åŠ¨åå‘ç°ç›®å‰çš„å¯åŠ¨ç«¯å£ä¸º80ï¼ŒæŠŠ80å¯¹åº”çš„æ–‡ä»¶åˆ é™¤æ‰ï¼Œç„¶åå†å¯åŠ¨ï¼Œç°åœ¨ç«¯å£åˆæ”¹æˆäº†81ã€‚ç°åœ¨æˆ‘ä»¬å°±å·²ç»çŸ¥é“äº†3ä¸ªæ–‡ä»¶çš„åŠ è½½ä¼˜å…ˆé¡ºåºæ˜¯ä»€ä¹ˆ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs XML">application.properties  &gt;  application.yml  &gt;  application.yaml<br></code></pre></td></tr></table></figure><p>â€‹    è™½ç„¶å¾—åˆ°äº†ä¸€ä¸ªçŸ¥è¯†ç»“è®ºï¼Œä½†æ˜¯æˆ‘ä»¬å®é™…å¼€å‘çš„æ—¶å€™è¿˜æ˜¯è¦çœ‹æœ€ç»ˆçš„æ•ˆæœä¸ºå‡†ã€‚ä¹Ÿå°±æ˜¯ä½ è¦çš„æœ€ç»ˆæ•ˆæœæ˜¯ä»€ä¹ˆè‡ªå·±æ˜¯æ˜ç¡®çš„ï¼Œä¸Šè¿°ç»“è®ºåªèƒ½å¸®åŠ©ä½ åˆ†æç»“è®ºäº§ç”Ÿçš„åŸå› ã€‚è¿™ä¸ªçŸ¥è¯†äº†è§£ä¸€ä¸‹å°±è¡Œäº†ï¼Œå› ä¸ºä»¥ååŒæ—¶å†™å¤šç§é…ç½®æ–‡ä»¶æ ¼å¼çš„æƒ…å†µå®åœ¨æ˜¯è¾ƒå°‘ã€‚</p><p>â€‹    æœ€åæˆ‘ä»¬æŠŠé…ç½®æ–‡ä»¶å†…å®¹ç»™ä¿®æ”¹ä¸€ä¸‹</p><ul><li>application.propertiesï¼ˆpropertiesæ ¼å¼ï¼‰</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">80</span><br><span class="hljs-attr">spring.main.banner-mode</span>=<span class="hljs-string">off</span><br></code></pre></td></tr></table></figure><ul><li>application.ymlï¼ˆymlæ ¼å¼ï¼‰</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs YML"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">81</span><br><span class="hljs-attr">logging:</span> <br>  <span class="hljs-attr">level:</span> <br>    <span class="hljs-attr">root:</span> <span class="hljs-string">debug</span><br></code></pre></td></tr></table></figure><ul><li>application.yamlï¼ˆyamlæ ¼å¼ï¼‰</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">82</span><br></code></pre></td></tr></table></figure><p>â€‹    æˆ‘ä»¬å‘ç°ä¸ä»…ç«¯å£ç”Ÿæ•ˆäº†ï¼Œæœ€ç»ˆæ˜¾ç¤º80ï¼ŒåŒæ—¶å…¶ä»–ä¸¤æ¡é…ç½®ä¹Ÿç”Ÿæ•ˆäº†ï¼Œçœ‹æ¥æ¯ä¸ªé…ç½®æ–‡ä»¶ä¸­çš„é¡¹éƒ½ä¼šç”Ÿæ•ˆï¼Œåªä¸è¿‡å¦‚æœå¤šä¸ªé…ç½®æ–‡ä»¶ä¸­æœ‰ç›¸åŒç±»å‹çš„é…ç½®ä¼šä¼˜å…ˆçº§é«˜çš„æ–‡ä»¶è¦†ç›–ä¼˜å…ˆçº§çš„æ–‡ä»¶ä¸­çš„é…ç½®ã€‚å¦‚æœé…ç½®é¡¹ä¸åŒçš„è¯ï¼Œé‚£æ‰€æœ‰çš„é…ç½®é¡¹éƒ½ä¼šç”Ÿæ•ˆã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>é…ç½®æ–‡ä»¶é—´çš„åŠ è½½ä¼˜å…ˆçº§    propertiesï¼ˆæœ€é«˜ï¼‰&gt;  yml  &gt;  yamlï¼ˆæœ€ä½ï¼‰</li><li>ä¸åŒé…ç½®æ–‡ä»¶ä¸­ç›¸åŒé…ç½®æŒ‰ç…§åŠ è½½ä¼˜å…ˆçº§ç›¸äº’è¦†ç›–ï¼Œä¸åŒé…ç½®æ–‡ä»¶ä¸­ä¸åŒé…ç½®å…¨éƒ¨ä¿ç•™</li></ol><h4 id="æ•™ä½ ä¸€æ‹›ï¼šè‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±è§£å†³æ–¹æ¡ˆ"><a href="#æ•™ä½ ä¸€æ‹›ï¼šè‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±è§£å†³æ–¹æ¡ˆ" class="headerlink" title="æ•™ä½ ä¸€æ‹›ï¼šè‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±è§£å†³æ–¹æ¡ˆ"></a>æ•™ä½ ä¸€æ‹›ï¼š<strong>è‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±è§£å†³æ–¹æ¡ˆ</strong></h4><p>â€‹    å¯èƒ½æœ‰äº›å°ä¼™ä¼´ä¼šåŸºäºå„ç§å„æ ·çš„åŸå› å¯¼è‡´é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰æç¤ºï¼Œè¿™ä¸ªç¡®å®å¾ˆè®©äººå¤´ç–¼ï¼Œæ‰€ä»¥ä¸‹é¢ç»™å¤§å®¶è¯´ä¸€ä¸‹å¦‚æœè‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±äº†æ€ä¹ˆè§£å†³ã€‚</p><p>â€‹    å…ˆè¦æ˜ç¡®ä¸€ä¸ªæ ¸å¿ƒï¼Œå°±æ˜¯è‡ªåŠ¨æç¤ºåŠŸèƒ½ä¸æ˜¯SpringBootæŠ€æœ¯ç»™æˆ‘ä»¬æä¾›çš„ï¼Œæ˜¯æˆ‘ä»¬åœ¨Ideaå·¥å…·ä¸‹ç¼–ç¨‹ï¼Œè¿™ä¸ªç¼–ç¨‹å·¥å…·ç»™æˆ‘ä»¬æä¾›çš„ã€‚æ˜ç™½äº†è¿™ä¸€ç‚¹åï¼Œå†æ¥è¯´ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§ç°è±¡ã€‚å…¶å®è¿™ä¸ªè‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±çš„åŸå› è¿˜æ˜¯è›®å¤šçš„ï¼Œå¦‚æœæƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦çŸ¥é“ä¸ºä»€ä¹ˆä¼šæ¶ˆå¤±ï¼Œå¤§ä½“åŸå› æœ‰å¦‚ä¸‹3ç§ï¼š</p><ol><li><p>Ideaè®¤ä¸ºä½ ç°åœ¨å†™é…ç½®çš„æ–‡ä»¶ä¸æ˜¯ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥æ‹’ç»ç»™ä½ æä¾›æç¤ºåŠŸèƒ½</p></li><li><p>Ideaè®¤å®šä½ æ˜¯åˆç†çš„é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯IdeaåŠ è½½ä¸åˆ°å¯¹åº”çš„æç¤ºä¿¡æ¯</p><p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦è§£å†³ç¬¬ä¸€ä¸ªç°è±¡ï¼Œç¬¬äºŒç§ç°è±¡åˆ°åŸç†ç¯‡å†è®²è§£ã€‚ç¬¬ä¸€ç§ç°è±¡çš„è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š</p></li></ol><p><strong>æ­¥éª¤â‘ </strong>ï¼šæ‰“å¼€è®¾ç½®ï¼Œã€Filesã€‘â†’ã€Project Structureâ€¦ã€‘</p><p><img src="https://img-blog.csdnimg.cn/7c25d385c9614db2b327416439aa6803.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_11,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåœ¨å¼¹å‡ºçª—å£ä¸­å·¦ä¾§é€‰æ‹©ã€Facetsã€‘ï¼Œå³ä¾§é€‰ä¸­Springè·¯å¾„ä¸‹å¯¹åº”çš„æ¨¡å—åç§°ï¼Œä¹Ÿå°±æ˜¯ä½ è‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±çš„é‚£ä¸ªæ¨¡å—<br><img src="https://img-blog.csdnimg.cn/9c2cafc4043e45ee83e4b64dce9c3b97.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_15,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/5a9bc70b83384f7db49a898837e35e44.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šç‚¹å‡»Customize Spring BootæŒ‰é’®ï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ°å½“å‰æ¨¡å—å¯¹åº”çš„é…ç½®æ–‡ä»¶æ˜¯å“ªäº›äº†ã€‚å¦‚æœæ²¡æœ‰ä½ æƒ³è¦ç§°ä¸ºé…ç½®æ–‡ä»¶çš„æ–‡ä»¶æ ¼å¼ï¼Œå°±æœ‰å¯èƒ½æ— æ³•å¼¹å‡ºæç¤º<br><img src="https://img-blog.csdnimg.cn/8b9d6baec361440b92037be13065c436.png#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/eaaf0bad694948cfb3700f08077f4f98.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ­¥éª¤â‘£</strong>ï¼šé€‰æ‹©æ·»åŠ é…ç½®æ–‡ä»¶ï¼Œç„¶åé€‰ä¸­è¦ä½œä¸ºé…ç½®æ–‡ä»¶çš„å…·ä½“æ–‡ä»¶å°±OKäº†</p><p><img src="https://img-blog.csdnimg.cn/20051747acea4d57866fa6b3dff452eb.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/4d2063fe6a6a4ac8932ee25b7fe38855.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_19,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    åˆ°è¿™é‡Œå°±åšå®Œäº†ï¼Œå…¶å®å°±æ˜¯Ideaçš„ä¸€ä¸ªå°åŠŸèƒ½<br><img src="https://img-blog.csdnimg.cn/8be658971fbf4b94887c5a29eaff4164.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ€»ç»“</strong></p><ol><li><p>æŒ‡å®šSpringBooté…ç½®æ–‡ä»¶</p><ul><li>Setting â†’ Project Structure â†’ Facets</li><li>é€‰ä¸­å¯¹åº”é¡¹ç›®&#x2F;å·¥ç¨‹</li><li>Customize Spring Boot</li><li>é€‰æ‹©é…ç½®æ–‡ä»¶</li></ul></li></ol><h3 id="JC-2-3-yamlæ–‡ä»¶"><a href="#JC-2-3-yamlæ–‡ä»¶" class="headerlink" title="JC-2-3.yamlæ–‡ä»¶"></a>JC-2-3.yamlæ–‡ä»¶</h3><p>â€‹    SpringBootçš„é…ç½®ä»¥åä¸»è¦ä½¿ç”¨ymlç»“å°¾çš„è¿™ç§æ–‡ä»¶æ ¼å¼ï¼Œå¹¶ä¸”åœ¨ä¹¦å†™æ—¶å¯ä»¥é€šè¿‡æç¤ºçš„å½¢å¼åŠ è½½æ­£ç¡®çš„æ ¼å¼ã€‚ä½†æ˜¯è¿™ç§æ–‡ä»¶è¿˜æ˜¯æœ‰ä¸¥æ ¼çš„ä¹¦å†™æ ¼å¼è¦æ±‚çš„ã€‚ä¸‹é¢å°±æ¥è¯´ä¸€ä¸‹å…·ä½“çš„è¯­æ³•æ ¼å¼ã€‚</p><p>â€‹    YAMLï¼ˆYAML Ainâ€™t Markup Languageï¼‰ï¼Œä¸€ç§æ•°æ®åºåˆ—åŒ–æ ¼å¼ã€‚å…·æœ‰å®¹æ˜“é˜…è¯»ã€å®¹æ˜“ä¸è„šæœ¬è¯­è¨€äº¤äº’ã€ä»¥æ•°æ®ä¸ºæ ¸å¿ƒï¼Œé‡æ•°æ®è½»æ ¼å¼çš„ç‰¹ç‚¹ã€‚å¸¸è§çš„æ–‡ä»¶æ‰©å±•åæœ‰ä¸¤ç§ï¼š</p><ul><li><p>.ymlæ ¼å¼ï¼ˆä¸»æµï¼‰</p></li><li><p>.yamlæ ¼å¼</p><p> å¯¹äºæ–‡ä»¶è‡ªèº«åœ¨ä¹¦å†™æ—¶ï¼Œå…·æœ‰ä¸¥æ ¼çš„è¯­æ³•æ ¼å¼è¦æ±‚ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p></li></ul><ol><li>å¤§å°å†™æ•æ„Ÿ</li><li>å±æ€§å±‚çº§å…³ç³»ä½¿ç”¨å¤šè¡Œæè¿°ï¼Œ<strong>æ¯è¡Œç»“å°¾ä½¿ç”¨å†’å·ç»“æŸ</strong></li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼ŒåŒå±‚çº§å·¦ä¾§å¯¹é½ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ï¼ˆä¸å…è®¸ä½¿ç”¨Tabé”®ï¼‰</li><li>å±æ€§å€¼å‰é¢æ·»åŠ ç©ºæ ¼ï¼ˆå±æ€§åä¸å±æ€§å€¼ä¹‹é—´ä½¿ç”¨å†’å·+ç©ºæ ¼ä½œä¸ºåˆ†éš”ï¼‰</li><li>#å· è¡¨ç¤ºæ³¨é‡Š</li></ol><p>  ä¸Šè¿°è§„åˆ™ä¸è¦æ­»è®°ç¡¬èƒŒï¼ŒæŒ‰ç…§ä¹¦å†™ä¹ æƒ¯æ…¢æ…¢é€‚åº”ï¼Œå¹¶ä¸”åœ¨Ideaä¸‹ç”±äºå…·æœ‰æç¤ºåŠŸèƒ½ï¼Œæ…¢æ…¢é€‚åº”ç€å†™æ ¼å¼å°±è¡Œäº†ã€‚æ ¸å¿ƒçš„ä¸€æ¡è§„åˆ™è¦è®°ä½ï¼Œ<font color="#ff0000"><b>æ•°æ®å‰é¢è¦åŠ ç©ºæ ¼ä¸å†’å·éš”å¼€</b></font></p><p>â€‹    ä¸‹é¢åˆ—å‡ºå¸¸è§çš„æ•°æ®ä¹¦å†™æ ¼å¼ï¼Œç†Ÿæ‚‰ä¸€ä¸‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">boolean:</span> <span class="hljs-literal">TRUE</span>  <span class="hljs-comment">#TRUE,true,True,FALSE,falseï¼ŒFalseå‡å¯</span><br><span class="hljs-attr">float:</span> <span class="hljs-number">3.14</span>    <span class="hljs-comment">#6.8523015e+5  #æ”¯æŒç§‘å­¦è®¡æ•°æ³•</span><br><span class="hljs-attr">int:</span> <span class="hljs-number">123</span>       <span class="hljs-comment">#0b1010_0111_0100_1010_1110    #æ”¯æŒäºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶</span><br><span class="hljs-attr">null:</span> <span class="hljs-string">~</span>        <span class="hljs-comment">#ä½¿ç”¨~è¡¨ç¤ºnull</span><br><span class="hljs-attr">string:</span> <span class="hljs-string">HelloWorld</span>      <span class="hljs-comment">#å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥ä¹¦å†™</span><br><span class="hljs-attr">string2:</span> <span class="hljs-string">&quot;Hello World&quot;</span>  <span class="hljs-comment">#å¯ä»¥ä½¿ç”¨åŒå¼•å·åŒ…è£¹ç‰¹æ®Šå­—ç¬¦</span><br><span class="hljs-attr">date:</span> <span class="hljs-number">2018-02-17</span>        <span class="hljs-comment">#æ—¥æœŸå¿…é¡»ä½¿ç”¨yyyy-MM-ddæ ¼å¼</span><br><span class="hljs-attr">datetime:</span> <span class="hljs-number">2018-02-17T15:02:31+08:00</span>  <span class="hljs-comment">#æ—¶é—´å’Œæ—¥æœŸä¹‹é—´ä½¿ç”¨Tè¿æ¥ï¼Œæœ€åä½¿ç”¨+ä»£è¡¨æ—¶åŒº</span><br></code></pre></td></tr></table></figure><p>â€‹    æ­¤å¤–ï¼Œyamlæ ¼å¼ä¸­ä¹Ÿå¯ä»¥è¡¨ç¤ºæ•°ç»„ï¼Œåœ¨å±æ€§åä¹¦å†™ä½ç½®çš„ä¸‹æ–¹ä½¿ç”¨å‡å·ä½œä¸ºæ•°æ®å¼€å§‹ç¬¦å·ï¼Œæ¯è¡Œä¹¦å†™ä¸€ä¸ªæ•°æ®ï¼Œå‡å·ä¸æ•°æ®é—´ç©ºæ ¼åˆ†éš”</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">subject:</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">Java</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å‰ç«¯</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å¤§æ•°æ®</span><br><span class="hljs-attr">enterprise:</span><br><span class="hljs-attr">name:</span> <span class="hljs-string">itcast</span><br>    <span class="hljs-attr">age:</span> <span class="hljs-number">16</span><br>    <span class="hljs-attr">subject:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">Java</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">å‰ç«¯</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">å¤§æ•°æ®</span><br><span class="hljs-attr">likes:</span> [<span class="hljs-string">ç‹è€…è£è€€</span>,<span class="hljs-string">åˆºæ¿€æˆ˜åœº</span>]<span class="hljs-comment">#æ•°ç»„ä¹¦å†™ç¼©ç•¥æ ¼å¼</span><br><span class="hljs-attr">users:</span> <span class="hljs-comment">#å¯¹è±¡æ•°ç»„æ ¼å¼ä¸€</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Tom</span><br>   <span class="hljs-attr">age:</span> <span class="hljs-number">4</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Jerry</span><br>    <span class="hljs-attr">age:</span> <span class="hljs-number">5</span><br><span class="hljs-attr">users:</span> <span class="hljs-comment">#å¯¹è±¡æ•°ç»„æ ¼å¼äºŒ</span><br>  <span class="hljs-bullet">-</span>  <br>    <span class="hljs-attr">name:</span> <span class="hljs-string">Tom</span><br>    <span class="hljs-attr">age:</span> <span class="hljs-number">4</span><br>  <span class="hljs-bullet">-</span>   <br>    <span class="hljs-attr">name:</span> <span class="hljs-string">Jerry</span><br>    <span class="hljs-attr">age:</span> <span class="hljs-number">5</span>    <br><span class="hljs-attr">users2:</span> [ &#123; <span class="hljs-string">name:Tom</span> , <span class="hljs-string">age:4</span> &#125; , &#123; <span class="hljs-string">name:Jerry</span> , <span class="hljs-string">age:5</span> &#125; ]<span class="hljs-comment">#å¯¹è±¡æ•°ç»„ç¼©ç•¥æ ¼å¼</span><br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>yamlè¯­æ³•è§„åˆ™<ul><li>å¤§å°å†™æ•æ„Ÿ</li><li>å±æ€§å±‚çº§å…³ç³»ä½¿ç”¨å¤šè¡Œæè¿°ï¼Œæ¯è¡Œç»“å°¾ä½¿ç”¨å†’å·ç»“æŸ</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼ŒåŒå±‚çº§å·¦ä¾§å¯¹é½ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ï¼ˆä¸å…è®¸ä½¿ç”¨Tabé”®ï¼‰</li><li>å±æ€§å€¼å‰é¢æ·»åŠ ç©ºæ ¼ï¼ˆå±æ€§åä¸å±æ€§å€¼ä¹‹é—´ä½¿ç”¨å†’å·+ç©ºæ ¼ä½œä¸ºåˆ†éš”ï¼‰</li><li>#å· è¡¨ç¤ºæ³¨é‡Š</li></ul></li><li>æ³¨æ„å±æ€§åå†’å·åé¢ä¸æ•°æ®ä¹‹é—´æœ‰ä¸€ä¸ª<strong>ç©ºæ ¼</strong></li><li>å­—é¢å€¼ã€å¯¹è±¡æ•°æ®æ ¼å¼ã€æ•°ç»„æ•°æ®æ ¼å¼</li></ol><p><strong>æ€è€ƒ</strong></p><p>â€‹    ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº†yamlå…·æœ‰ä¸¥æ ¼çš„æ•°æ®æ ¼å¼è¦æ±‚ï¼Œå¹¶ä¸”å·²ç»å¯ä»¥æ­£ç¡®çš„ä¹¦å†™yamlæ–‡ä»¶äº†ï¼Œé‚£è¿™äº›æ–‡ä»¶ä¹¦å†™åå…¶å®æ˜¯åœ¨å®šä¹‰ä¸€äº›æ•°æ®ã€‚è¿™äº›æ•°æ®æ—¶ç»™è°ç”¨çš„å‘¢ï¼Ÿå¤§éƒ¨åˆ†æ˜¯SpringBootæ¡†æ¶å†…éƒ¨ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³é…ç½®ä¸€äº›æ•°æ®è‡ªå·±ä½¿ç”¨ï¼Œèƒ½ä¸èƒ½ç”¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œé‚£å¦‚ä½•è¯»å–yamlæ–‡ä»¶ä¸­çš„æ•°æ®å‘¢ï¼Ÿå’±ä»¬ä¸‹ä¸€èŠ‚å†è¯´ã€‚</p><h3 id="JC-2-4-yamlæ•°æ®è¯»å–"><a href="#JC-2-4-yamlæ•°æ®è¯»å–" class="headerlink" title="JC-2-4.yamlæ•°æ®è¯»å–"></a>JC-2-4.yamlæ•°æ®è¯»å–</h3><p>â€‹    å¯¹äºyamlæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå…¶å®ä½ å°±å¯ä»¥æƒ³è±¡æˆè¿™å°±æ˜¯ä¸€ä¸ªå°å‹çš„æ•°æ®åº“ï¼Œé‡Œé¢ä¿å­˜æœ‰è‹¥å¹²æ•°æ®ï¼Œæ¯ä¸ªæ•°æ®éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„åå­—ï¼Œå¦‚æœä½ æƒ³è¯»å–é‡Œé¢çš„æ•°æ®ï¼Œè‚¯å®šæ˜¯æ”¯æŒçš„ï¼Œä¸‹é¢å°±ä»‹ç»3ç§è¯»å–æ•°æ®çš„æ–¹å¼</p><h4 id="è¯»å–å•ä¸€æ•°æ®"><a href="#è¯»å–å•ä¸€æ•°æ®" class="headerlink" title="è¯»å–å•ä¸€æ•°æ®"></a>è¯»å–å•ä¸€æ•°æ®</h4><p>â€‹    yamlä¸­ä¿å­˜çš„å•ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨Springä¸­çš„æ³¨è§£ç›´æ¥è¯»å–ï¼Œä½¿ç”¨@Valueå¯ä»¥è¯»å–å•ä¸ªæ•°æ®ï¼Œå±æ€§åå¼•ç”¨æ–¹å¼ï¼š<font color="#ff0000"><b>${ä¸€çº§å±æ€§å.äºŒçº§å±æ€§åâ€¦â€¦}</b></font></p><p><img src="https://img-blog.csdnimg.cn/84b52886f5fa4e79ba6e9baabf17fd18.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    è®°å¾—ä½¿ç”¨@Valueæ³¨è§£æ—¶ï¼Œè¦å°†è¯¥æ³¨å…¥å†™åœ¨æŸä¸€ä¸ªæŒ‡å®šçš„Springç®¡æ§çš„beançš„å±æ€§åä¸Šæ–¹ã€‚ç°åœ¨å°±å¯ä»¥è¯»å–åˆ°å¯¹åº”çš„å•ä¸€æ•°æ®è¡Œäº†</p><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨@Valueé…åˆSpELè¯»å–å•ä¸ªæ•°æ®</li><li>å¦‚æœæ•°æ®å­˜åœ¨å¤šå±‚çº§ï¼Œä¾æ¬¡ä¹¦å†™å±‚çº§åç§°å³å¯</li></ol><h4 id="è¯»å–å…¨éƒ¨æ•°æ®"><a href="#è¯»å–å…¨éƒ¨æ•°æ®" class="headerlink" title="è¯»å–å…¨éƒ¨æ•°æ®"></a>è¯»å–å…¨éƒ¨æ•°æ®</h4><p>â€‹    è¯»å–å•ä¸€æ•°æ®å¯ä»¥è§£å†³è¯»å–æ•°æ®çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå®šä¹‰çš„æ•°æ®é‡è¿‡å¤§ï¼Œè¿™ä¹ˆä¸€ä¸ªä¸€ä¸ªä¹¦å†™è‚¯å®šä¼šç´¯æ­»äººçš„ï¼ŒSpringBootæä¾›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œèƒ½å¤ŸæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½å°è£…åˆ°è¿™ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¿™ä¸ªå¯¹è±¡å«åšEnvironmentï¼Œä½¿ç”¨è‡ªåŠ¨è£…é…æ³¨è§£å¯ä»¥å°†æ‰€æœ‰çš„yamlæ•°æ®å°è£…åˆ°è¿™ä¸ªå¯¹è±¡ä¸­</p><p><img src="https://img-blog.csdnimg.cn/de6d753acd1f45558113b064ad587599.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    æ•°æ®å°è£…åˆ°äº†Environmentå¯¹è±¡ä¸­ï¼Œè·å–å±æ€§æ—¶ï¼Œé€šè¿‡Environmentçš„æ¥å£æ“ä½œè¿›è¡Œï¼Œå…·ä½“æ–¹æ³•æ—¶getPropertiesï¼ˆStringï¼‰ï¼Œå‚æ•°å¡«å†™å±æ€§åå³å¯</p><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨Environmentå¯¹è±¡å°è£…å…¨éƒ¨é…ç½®ä¿¡æ¯</li><li>ä½¿ç”¨@Autowiredè‡ªåŠ¨è£…é…æ•°æ®åˆ°Environmentå¯¹è±¡ä¸­</li></ol><h4 id="è¯»å–å¯¹è±¡æ•°æ®"><a href="#è¯»å–å¯¹è±¡æ•°æ®" class="headerlink" title="è¯»å–å¯¹è±¡æ•°æ®"></a>è¯»å–å¯¹è±¡æ•°æ®</h4><p>â€‹    å•ä¸€æ•°æ®è¯»å–ä¹¦å†™æ¯”è¾ƒç¹çï¼Œå…¨æ•°æ®å°è£…åˆå°è£…çš„å¤ªå‰å®³äº†ï¼Œæ¯æ¬¡æ‹¿æ•°æ®è¿˜è¦ä¸€ä¸ªä¸€ä¸ªçš„getPropertiesï¼ˆï¼‰,æ€»ä¹‹ç”¨èµ·æ¥éƒ½ä¸æ˜¯å¾ˆèˆ’æœã€‚ç”±äºJavaæ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šå°†ä¸€ç»„æ•°æ®å°è£…æˆä¸€ä¸ªå¯¹è±¡ã€‚SpringBootä¹Ÿæä¾›äº†å¯ä»¥å°†ä¸€ç»„yamlå¯¹è±¡æ•°æ®å°è£…ä¸€ä¸ªJavaå¯¹è±¡çš„æ“ä½œ</p><p>â€‹    é¦–å…ˆå®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†è¯¥å¯¹è±¡çº³å…¥Springç®¡æ§çš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰æˆä¸€ä¸ªbeanï¼Œç„¶åä½¿ç”¨æ³¨è§£@ConfigurationPropertiesæŒ‡å®šè¯¥å¯¹è±¡åŠ è½½å“ªä¸€ç»„yamlä¸­é…ç½®çš„ä¿¡æ¯ã€‚</p><p><img src="https://img-blog.csdnimg.cn/b42c189f888b4da0b4ccc883c1763939.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    è¿™ä¸ª@ConfigurationPropertieså¿…é¡»å‘Šè¯‰ä»–åŠ è½½çš„æ•°æ®å‰ç¼€æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·å½“å‰å‰ç¼€ä¸‹çš„æ‰€æœ‰å±æ€§å°±å°è£…åˆ°è¿™ä¸ªå¯¹è±¡ä¸­ã€‚è®°å¾—æ•°æ®å±æ€§åè¦ä¸å¯¹è±¡çš„å˜é‡åä¸€ä¸€å¯¹åº”å•Šï¼Œä¸ç„¶æ²¡æ³•å°è£…ã€‚å…¶å®ä»¥åå¦‚æœä½ è¦å®šä¹‰ä¸€ç»„æ•°æ®è‡ªå·±ä½¿ç”¨ï¼Œå°±å¯ä»¥å…ˆå†™ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå®šä¹‰å¥½å±æ€§ï¼Œä¸‹é¢åˆ°é…ç½®ä¸­æ ¹æ®è¿™ä¸ªæ ¼å¼ä¹¦å†™å³å¯ã€‚</p><p>â€‹    <img src="https://img-blog.csdnimg.cn/1bc51cc345db4427b1e399d1078f6d3c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    <font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹        ç»†å¿ƒçš„å°ä¼™ä¼´ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œè‡ªå®šä¹‰çš„è¿™ç§æ•°æ®åœ¨yamlæ–‡ä»¶ä¸­ä¹¦å†™æ—¶æ²¡æœ‰å¼¹å‡ºæç¤ºï¼Œæ˜¯è¿™æ ·çš„ï¼Œå’±ä»¬åˆ°åŸç†ç¯‡å†æ­ç§˜å¦‚ä½•å¼¹å‡ºæç¤ºã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ç»‘å®šé…ç½®ä¿¡æ¯åˆ°å°è£…ç±»ä¸­</li><li>å°è£…ç±»éœ€è¦å®šä¹‰ä¸ºSpringç®¡ç†çš„beanï¼Œå¦åˆ™æ— æ³•è¿›è¡Œå±æ€§æ³¨å…¥</li></ol><h4 id="yamlæ–‡ä»¶ä¸­çš„æ•°æ®å¼•ç”¨"><a href="#yamlæ–‡ä»¶ä¸­çš„æ•°æ®å¼•ç”¨" class="headerlink" title="yamlæ–‡ä»¶ä¸­çš„æ•°æ®å¼•ç”¨"></a>yamlæ–‡ä»¶ä¸­çš„æ•°æ®å¼•ç”¨</h4><p>â€‹    å¦‚æœä½ åœ¨ä¹¦å†™yamlæ•°æ®æ—¶ï¼Œç»å¸¸å‡ºç°å¦‚ä¸‹ç°è±¡ï¼Œæ¯”å¦‚å¾ˆå¤šä¸ªæ–‡ä»¶éƒ½å…·æœ‰ç›¸åŒçš„ç›®å½•å‰ç¼€</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">center:</span><br><span class="hljs-attr">dataDir:</span> <span class="hljs-string">/usr/local/fire/data</span><br>    <span class="hljs-attr">tmpDir:</span> <span class="hljs-string">/usr/local/fire/tmp</span><br>    <span class="hljs-attr">logDir:</span> <span class="hljs-string">/usr/local/fire/log</span><br>    <span class="hljs-attr">msgDir:</span> <span class="hljs-string">/usr/local/fire/msgDir</span><br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">center:</span><br><span class="hljs-attr">dataDir:</span> <span class="hljs-string">D:/usr/local/fire/data</span><br>    <span class="hljs-attr">tmpDir:</span> <span class="hljs-string">D:/usr/local/fire/tmp</span><br>    <span class="hljs-attr">logDir:</span> <span class="hljs-string">D:/usr/local/fire/log</span><br>    <span class="hljs-attr">msgDir:</span> <span class="hljs-string">D:/usr/local/fire/msgDir</span><br></code></pre></td></tr></table></figure><p>â€‹    è¿™ä¸ªæ—¶å€™ä½ å¯ä»¥ä½¿ç”¨å¼•ç”¨æ ¼å¼æ¥å®šä¹‰æ•°æ®ï¼Œå…¶å®å°±æ˜¯æäº†ä¸ªå˜é‡åï¼Œç„¶åå¼•ç”¨å˜é‡äº†ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">baseDir:</span> <span class="hljs-string">/usr/local/fire</span><br><span class="hljs-attr">center:</span><br>    <span class="hljs-attr">dataDir:</span> <span class="hljs-string">$&#123;baseDir&#125;/data</span><br>    <span class="hljs-attr">tmpDir:</span> <span class="hljs-string">$&#123;baseDir&#125;/tmp</span><br>    <span class="hljs-attr">logDir:</span> <span class="hljs-string">$&#123;baseDir&#125;/log</span><br>    <span class="hljs-attr">msgDir:</span> <span class="hljs-string">$&#123;baseDir&#125;/msgDir</span><br></code></pre></td></tr></table></figure><p>â€‹    è¿˜æœ‰ä¸€ä¸ªæ³¨æ„äº‹é¡¹ï¼Œåœ¨ä¹¦å†™å­—ç¬¦ä¸²æ—¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ï¼Œéœ€è¦å°†æ•°æ®å­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å·åŒ…è£¹èµ·æ¥</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">lesson:</span> <span class="hljs-string">&quot;Spring\tboot\nlesson&quot;</span><br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨${å±æ€§å}æ–¹å¼å¼•ç”¨å±æ€§å€¼</li><li>å¦‚æœå±æ€§ä¸­å‡ºç°ç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨åŒå¼•å·åŒ…è£¹èµ·æ¥ä½œä¸ºå­—ç¬¦è§£æ</li></ol><p>â€‹    åˆ°è¿™é‡Œæœ‰å…³yamlæ–‡ä»¶çš„åŸºç¡€ä½¿ç”¨å°±å…ˆå‘Šä¸€æ®µè½ï¼Œåœ¨å®ç”¨ç¯‡ä¸­å†ç»§ç»­ç ”ç©¶æ›´æ·±å…¥çš„å†…å®¹ã€‚</p><h2 id="JC-3-åŸºäºSpringBootå®ç°SSMPæ•´åˆ"><a href="#JC-3-åŸºäºSpringBootå®ç°SSMPæ•´åˆ" class="headerlink" title="JC-3.åŸºäºSpringBootå®ç°SSMPæ•´åˆ"></a>JC-3.åŸºäºSpringBootå®ç°SSMPæ•´åˆ</h2><p>â€‹    é‡å¤´æˆæ¥äº†ï¼ŒSpringBootä¹‹æ‰€ä»¥å¥½ç”¨ï¼Œå°±æ˜¯å®ƒèƒ½æ–¹ä¾¿å¿«æ·çš„æ•´åˆå…¶ä»–æŠ€æœ¯ï¼Œè¿™ä¸€éƒ¨åˆ†å’±ä»¬å°±æ¥èŠèŠä¸€äº›æŠ€æœ¯çš„æ•´åˆæ–¹å¼ï¼Œé€šè¿‡è¿™ä¸€ç« çš„å­¦ä¹ ï¼Œå¤§å®¶èƒ½å¤Ÿæ„Ÿå—åˆ°SpringBootåˆ°åº•æœ‰å¤šé…·ç‚«ã€‚è¿™ä¸€ç« å’±ä»¬å­¦ä¹ å¦‚ä¸‹æŠ€æœ¯çš„æ•´åˆæ–¹å¼</p><ul><li><p>æ•´åˆJUnit</p></li><li><p>æ•´åˆMyBatis</p></li><li><p>æ•´åˆMyBatis-Plus</p></li><li><p>æ•´åˆDruid</p><p> ä¸Šé¢è¿™äº›æŠ€æœ¯éƒ½æ•´åˆå®Œæ¯•åï¼Œæˆ‘ä»¬åšä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œä¹Ÿç®—æ˜¯å­¦æœ‰æ‰€ç”¨å§ã€‚æ¶‰åŠçš„æŠ€æœ¯æ¯”è¾ƒå¤šï¼Œç»¼åˆè¿ç”¨ä¸€ä¸‹ã€‚</p></li></ul><h3 id="JC-3-1-æ•´åˆJUnit"><a href="#JC-3-1-æ•´åˆJUnit" class="headerlink" title="JC-3-1.æ•´åˆJUnit"></a>JC-3-1.æ•´åˆJUnit</h3><p>â€‹    SpringBootæŠ€æœ¯çš„å®šä½ç”¨äºç®€åŒ–å¼€å‘ï¼Œå†å…·ä½“ç‚¹æ˜¯ç®€åŒ–Springç¨‹åºçš„å¼€å‘ã€‚æ‰€ä»¥åœ¨æ•´åˆä»»æ„æŠ€æœ¯çš„æ—¶å€™ï¼Œå¦‚æœä½ æƒ³ç›´è§‚æ„Ÿè§¦åˆ°ç®€åŒ–çš„æ•ˆæœï¼Œä½ å¿…é¡»å…ˆçŸ¥é“ä½¿ç”¨éSpringBootæŠ€æœ¯æ—¶å¯¹åº”çš„æ•´åˆæ˜¯å¦‚ä½•åšçš„ï¼Œç„¶åå†çœ‹åŸºäºSpringBootçš„æ•´åˆæ˜¯å¦‚ä½•åšçš„ï¼Œæ‰èƒ½æ¯”å¯¹å‡ºæ¥ç®€åŒ–åœ¨äº†å“ªé‡Œã€‚</p><p>â€‹    æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¸ä½¿ç”¨SpringBootæŠ€æœ¯æ—¶ï¼ŒSpringæ•´åˆJUnitçš„åˆ¶ä½œæ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-comment">//åŠ è½½springæ•´åˆjunitä¸“ç”¨çš„ç±»è¿è¡Œå™¨</span><br><span class="hljs-meta">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="hljs-comment">//æŒ‡å®šå¯¹åº”çš„é…ç½®ä¿¡æ¯</span><br><span class="hljs-meta">@ContextConfiguration(classes = SpringConfig.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AccountServiceTestCase</span> &#123;<br>    <span class="hljs-comment">//æ³¨å…¥ä½ è¦æµ‹è¯•çš„å¯¹è±¡</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> AccountService accountService;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetById</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//æ‰§è¡Œè¦æµ‹è¯•çš„å¯¹è±¡å¯¹åº”çš„æ–¹æ³•</span><br>        System.out.println(accountService.findById(<span class="hljs-number">2</span>));<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>â€‹    å…¶ä¸­æ ¸å¿ƒä»£ç æ˜¯å‰ä¸¤ä¸ªæ³¨è§£ï¼Œç¬¬ä¸€ä¸ªæ³¨è§£@RunWithæ˜¯è®¾ç½®Springä¸“ç”¨äºæµ‹è¯•çš„ç±»è¿è¡Œå™¨ï¼Œç®€å•è¯´å°±æ˜¯Springç¨‹åºæ‰§è¡Œç¨‹åºæœ‰è‡ªå·±çš„ä¸€å¥—ç‹¬ç«‹çš„è¿è¡Œç¨‹åºçš„æ–¹å¼ï¼Œä¸èƒ½ä½¿ç”¨JUnitæä¾›çš„ç±»è¿è¡Œæ–¹å¼äº†ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸‹ï¼Œä½†æ˜¯æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œç¢ç£¨ä¸€ä¸‹ï¼Œ<font color="#ff0000"><b>æ¯æ¬¡éƒ½æŒ‡å®šä¸€æ ·çš„ä¸œè¥¿ï¼Œè¿™ä¸ªä¸œè¥¿å†™èµ·æ¥æ²¡æœ‰æŠ€æœ¯å«é‡å•Š</b></font>ï¼Œç¬¬äºŒä¸ªæ³¨è§£@ContextConfigurationæ˜¯ç”¨æ¥è®¾ç½®Springæ ¸å¿ƒé…ç½®æ–‡ä»¶æˆ–é…ç½®ç±»çš„ï¼Œç®€å•è¯´å°±æ˜¯åŠ è½½Springçš„ç¯å¢ƒä½ è¦å‘Šè¯‰Springå…·ä½“çš„ç¯å¢ƒé…ç½®æ˜¯åœ¨å“ªé‡Œå†™çš„ï¼Œè™½ç„¶æ¯æ¬¡åŠ è½½çš„æ–‡ä»¶éƒ½æœ‰å¯èƒ½ä¸åŒï¼Œä½†æ˜¯ä»”ç»†æƒ³æƒ³ï¼Œå¦‚æœæ–‡ä»¶åæ˜¯å›ºå®šçš„ï¼Œè¿™ä¸ªè²Œä¼¼ä¹Ÿæ˜¯ä¸€ä¸ªå›ºå®šæ ¼å¼ã€‚ä¼¼ç„¶<font color="#ff0000"><b>æœ‰å¯èƒ½æ˜¯å›ºå®šæ ¼å¼ï¼Œé‚£å°±æœ‰å¯èƒ½æ¯æ¬¡éƒ½å†™ä¸€æ ·çš„ä¸œè¥¿ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ²¡æœ‰æŠ€æœ¯å«é‡çš„å†…å®¹ä¹¦å†™</b></font></p><p>â€‹    SpringBootå°±æŠ“ä½ä¸Šè¿°ä¸¤æ¡æ²¡æœ‰æŠ€æœ¯å«é‡çš„å†…å®¹ä¹¦å†™è¿›è¡Œå¼€å‘ç®€åŒ–ï¼Œèƒ½èµ°é»˜è®¤å€¼çš„èµ°é»˜è®¤å€¼ï¼Œèƒ½ä¸å†™çš„å°±ä¸å†™ï¼Œå…·ä½“æ ¼å¼å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot04JunitApplicationTests</span> &#123;<br>    <span class="hljs-comment">//æ³¨å…¥ä½ è¦æµ‹è¯•çš„å¯¹è±¡</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//æ‰§è¡Œè¦æµ‹è¯•çš„å¯¹è±¡å¯¹åº”çš„æ–¹æ³•</span><br>        bookDao.save();<br>        System.out.println(<span class="hljs-string">&quot;two...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    çœ‹çœ‹è¿™æ¬¡ç®€åŒ–æˆä»€ä¹ˆæ ·äº†ï¼Œä¸€ä¸ªæ³¨è§£å°±æå®šäº†ï¼Œè€Œä¸”è¿˜æ²¡æœ‰å‚æ•°ï¼Œå†ä½“ä¼šSpringBootæ•´åˆå…¶ä»–æŠ€æœ¯çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Œå°±ä¸¤ä¸ªå­—â€”â€”<font color="#ff0000"><b>ç®€åŒ–</b></font>ã€‚ä½¿ç”¨ä¸€ä¸ªæ³¨è§£@SpringBootTestæ›¿æ¢äº†å‰é¢ä¸¤ä¸ªæ³¨è§£ã€‚è‡³äºå†…éƒ¨æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿå’Œä¹‹å‰ä¸€æ ·ï¼Œåªä¸è¿‡éƒ½èµ°é»˜è®¤å€¼ã€‚</p><p>â€‹    è¿™ä¸ªæ—¶å€™æœ‰äººå°±é—®äº†ï¼Œä½ åŠ è½½çš„é…ç½®ç±»æˆ–è€…é…ç½®æ–‡ä»¶æ˜¯å“ªä¸€ä¸ªï¼Ÿå°±æ˜¯æˆ‘ä»¬å‰é¢å¯åŠ¨ç¨‹åºä½¿ç”¨çš„å¼•å¯¼ç±»ã€‚å¦‚æœæƒ³æ‰‹å·¥æŒ‡å®šå¼•å¯¼ç±»æœ‰ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ–¹å¼ä½¿ç”¨å±æ€§çš„å½¢å¼è¿›è¡Œï¼Œåœ¨æ³¨è§£@SpringBootTestä¸­æ·»åŠ classeså±æ€§æŒ‡å®šé…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@SpringBootTest(classes = Springboot04JunitApplication.class)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot04JunitApplicationTests</span> &#123;<br>    <span class="hljs-comment">//æ³¨å…¥ä½ è¦æµ‹è¯•çš„å¯¹è±¡</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//æ‰§è¡Œè¦æµ‹è¯•çš„å¯¹è±¡å¯¹åº”çš„æ–¹æ³•</span><br>        bookDao.save();<br>        System.out.println(<span class="hljs-string">&quot;two...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    ç¬¬äºŒç§æ–¹å¼å›å½’åŸå§‹é…ç½®æ–¹å¼ï¼Œä»ç„¶ä½¿ç”¨@ContextConfigurationæ³¨è§£è¿›è¡Œï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-meta">@ContextConfiguration(classes = Springboot04JunitApplication.class)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot04JunitApplicationTests</span> &#123;<br>    <span class="hljs-comment">//æ³¨å…¥ä½ è¦æµ‹è¯•çš„å¯¹è±¡</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//æ‰§è¡Œè¦æµ‹è¯•çš„å¯¹è±¡å¯¹åº”çš„æ–¹æ³•</span><br>        bookDao.save();<br>        System.out.println(<span class="hljs-string">&quot;two...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    <font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹        ä½¿ç”¨SpringBootæ•´åˆJUnitéœ€è¦ä¿éšœå¯¼å…¥testå¯¹åº”çš„starterï¼Œç”±äºåˆå§‹åŒ–é¡¹ç›®æ—¶æ­¤é¡¹æ˜¯é»˜è®¤å¯¼å…¥çš„ï¼Œæ‰€ä»¥æ­¤å¤„æ²¡æœ‰æåŠï¼Œå…¶å®å’Œä¹‹å‰å­¦ä¹ çš„å†…å®¹ä¸€æ ·ï¼Œç”¨ä»€ä¹ˆæŠ€æœ¯å¯¼å…¥å¯¹åº”çš„starterå³å¯ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>å¯¼å…¥æµ‹è¯•å¯¹åº”çš„starter</li><li>æµ‹è¯•ç±»ä½¿ç”¨@SpringBootTestä¿®é¥°</li><li>ä½¿ç”¨è‡ªåŠ¨è£…é…çš„å½¢å¼æ·»åŠ è¦æµ‹è¯•çš„å¯¹è±¡</li><li>æµ‹è¯•ç±»å¦‚æœå­˜åœ¨äºå¼•å¯¼ç±»æ‰€åœ¨åŒ…æˆ–å­åŒ…ä¸­æ— éœ€æŒ‡å®šå¼•å¯¼ç±»</li><li>æµ‹è¯•ç±»å¦‚æœä¸å­˜åœ¨äºå¼•å¯¼ç±»æ‰€åœ¨çš„åŒ…æˆ–å­åŒ…ä¸­éœ€è¦é€šè¿‡classeså±æ€§æŒ‡å®šå¼•å¯¼ç±»</li></ol><h3 id="JC-3-2-æ•´åˆMyBatis"><a href="#JC-3-2-æ•´åˆMyBatis" class="headerlink" title="JC-3-2.æ•´åˆMyBatis"></a>JC-3-2.æ•´åˆMyBatis</h3><p>â€‹    æ•´åˆå®ŒJUnitä¸‹é¢å†æ¥è¯´ä¸€ä¸‹æ•´åˆMyBatisï¼Œè¿™ä¸ªæŠ€æœ¯æ˜¯å¤§éƒ¨åˆ†å…¬å¸éƒ½è¦ä½¿ç”¨çš„æŠ€æœ¯ï¼ŒåŠ¡å¿…æŒæ¡ã€‚å¦‚æœå¯¹Springæ•´åˆMyBatisä¸ç†Ÿæ‚‰çš„å°ä¼™ä¼´å¥½å¥½å¤ä¹ ä¸€ä¸‹ï¼Œä¸‹é¢åˆ—ä¸¾å‡ºåŸå§‹æ•´åˆçš„å…¨éƒ¨å†…å®¹ï¼Œä»¥é…ç½®ç±»çš„å½¢å¼ä¸ºä¾‹è¿›è¡Œ</p><ul><li><p>å¯¼å…¥åæ ‡ï¼ŒMyBatisåæ ‡ä¸èƒ½å°‘ï¼ŒSpringæ•´åˆMyBatisè¿˜æœ‰è‡ªå·±ä¸“ç”¨çš„åæ ‡ï¼Œæ­¤å¤–Springè¿›è¡Œæ•°æ®åº“æ“ä½œçš„jdbcåæ ‡æ˜¯å¿…é¡»çš„ï¼Œå‰©ä¸‹è¿˜æœ‰mysqlé©±åŠ¨åæ ‡ï¼Œæœ¬ä¾‹ä¸­ä½¿ç”¨äº†Druidæ•°æ®æºï¼Œè¿™ä¸ªå€’æ˜¯å¯ä»¥ä¸è¦</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.47<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--1.å¯¼å…¥mybatisä¸springæ•´åˆçš„jaråŒ…--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å¯¼å…¥springæ“ä½œæ•°æ®åº“å¿…é€‰çš„åŒ…--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.10.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>Springæ ¸å¿ƒé…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ComponentScan(&quot;com.itheima&quot;)</span><br><span class="hljs-meta">@PropertySource(&quot;jdbc.properties&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringConfig</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>MyBatisè¦äº¤ç»™Springæ¥ç®¡çš„bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-comment">//å®šä¹‰mybatisä¸“ç”¨çš„é…ç½®ç±»</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisConfig</span> &#123;<br><span class="hljs-comment">//    å®šä¹‰åˆ›å»ºSqlSessionFactoryå¯¹åº”çš„bean</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> SqlSessionFactoryBean <span class="hljs-title function_">sqlSessionFactory</span><span class="hljs-params">(DataSource dataSource)</span>&#123;<br>        <span class="hljs-comment">//SqlSessionFactoryBeanæ˜¯ç”±mybatis-springåŒ…æä¾›çš„ï¼Œä¸“ç”¨äºæ•´åˆç”¨çš„å¯¹è±¡</span><br>        <span class="hljs-type">SqlSessionFactoryBean</span> <span class="hljs-variable">sfb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBean</span>();<br>        <span class="hljs-comment">//è®¾ç½®æ•°æ®æºæ›¿ä»£åŸå§‹é…ç½®ä¸­çš„environmentsçš„é…ç½®</span><br>        sfb.setDataSource(dataSource);<br>        <span class="hljs-comment">//è®¾ç½®ç±»å‹åˆ«åæ›¿ä»£åŸå§‹é…ç½®ä¸­çš„typeAliasesçš„é…ç½®</span><br>        sfb.setTypeAliasesPackage(<span class="hljs-string">&quot;com.itheima.domain&quot;</span>);<br>        <span class="hljs-keyword">return</span> sfb;<br>    &#125;<br><span class="hljs-comment">//    å®šä¹‰åŠ è½½æ‰€æœ‰çš„æ˜ å°„é…ç½®</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MapperScannerConfigurer <span class="hljs-title function_">mapperScannerConfigurer</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">MapperScannerConfigurer</span> <span class="hljs-variable">msc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MapperScannerConfigurer</span>();<br>        msc.setBasePackage(<span class="hljs-string">&quot;com.itheima.dao&quot;</span>);<br>        <span class="hljs-keyword">return</span> msc;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ•°æ®æºå¯¹åº”çš„beanï¼Œæ­¤å¤„ä½¿ç”¨Druidæ•°æ®æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcConfig</span> &#123;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String driver;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String url;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String userName;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String password;<br><br>    <span class="hljs-meta">@Bean(&quot;dataSource&quot;)</span><br>    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();<br>        ds.setDriverClassName(driver);<br>        ds.setUrl(url);<br>        ds.setUsername(userName);<br>        ds.setPassword(password);<br>        <span class="hljs-keyword">return</span> ds;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆpropertiesæ ¼å¼ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">jdbc.driver</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br><span class="hljs-attr">jdbc.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/spring_db?useSSL=false</span><br><span class="hljs-attr">jdbc.username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">jdbc.password</span>=<span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æ ¼å¼åŸºæœ¬ä¸Šæ˜¯ç®€æ ¼å¼äº†ï¼Œè¦å†™çš„ä¸œè¥¿è¿˜çœŸä¸å°‘ã€‚ä¸‹é¢çœ‹çœ‹SpringBootæ•´åˆMyBaitsæ ¼å¼</p></li></ul><p><strong>æ­¥éª¤â‘ </strong>ï¼šåˆ›å»ºæ¨¡å—æ—¶å‹¾é€‰è¦ä½¿ç”¨çš„æŠ€æœ¯ï¼ŒMyBatisï¼Œç”±äºè¦æ“ä½œæ•°æ®åº“ï¼Œè¿˜è¦å‹¾é€‰å¯¹åº”æ•°æ®åº“</p><p><img src="https://img-blog.csdnimg.cn/577c0b8368a346009489dd066be5b529.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><img src="https://img-blog.csdnimg.cn/01df447afbec4340b81101cdbb70e270.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    æˆ–è€…æ‰‹å·¥å¯¼å…¥å¯¹åº”æŠ€æœ¯çš„starterï¼Œå’Œå¯¹åº”æ•°æ®åº“çš„åæ ‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--1.å¯¼å…¥å¯¹åº”çš„starter--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®æ•°æ®æºç›¸å…³ä¿¡æ¯ï¼Œæ²¡æœ‰è¿™ä¸ªä¿¡æ¯ä½ è¿æ¥å“ªä¸ªæ•°æ®åº“éƒ½ä¸çŸ¥é“</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#2.é…ç½®ç›¸å…³ä¿¡æ¯</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p>â€‹    å®Œäº†ï¼Œå°±è¿™ä¹ˆå¤šï¼Œæ²¡äº†ã€‚æœ‰äººå°±å¾ˆçº³é—·ï¼Œè¿™å°±ç»“æŸäº†ï¼Ÿå¯¹ï¼Œè¿™å°±ç»“æŸäº†ï¼ŒSpringBootæŠŠé…ç½®ä¸­æ‰€æœ‰å¯èƒ½å‡ºç°çš„é€šç”¨é…ç½®éƒ½ç®€åŒ–äº†ã€‚ä¸‹é¢å°±å¯ä»¥å†™ä¸€ä¸‹MyBatisç¨‹åºè¿è¡Œéœ€è¦çš„Daoï¼ˆæˆ–è€…Mapperï¼‰å°±å¯ä»¥è¿è¡Œäº†</p><p><strong>å®ä½“ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String type;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String description;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ˜ å°„æ¥å£ï¼ˆDaoï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookDao</span> &#123;<br>    <span class="hljs-meta">@Select(&quot;select * from tbl_book where id = #&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Book <span class="hljs-title function_">getById</span><span class="hljs-params">(Integer id)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æµ‹è¯•ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot05MybatisApplicationTests</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(bookDao.getById(<span class="hljs-number">1</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    å®Œç¾ï¼Œå¼€å‘ä»æ­¤å˜çš„å°±è¿™ä¹ˆç®€å•ã€‚å†ä½“ä¼šä¸€ä¸‹SpringBootå¦‚ä½•è¿›è¡Œç¬¬ä¸‰æ–¹æŠ€æœ¯æ•´åˆçš„ï¼Œæ˜¯ä¸æ˜¯å¾ˆä¼˜ç§€ï¼Ÿå…·ä½“å†…éƒ¨çš„åŸç†åˆ°åŸç†ç¯‡å†å±•å¼€è®²è§£</p><p>â€‹    <font color="#ff0000"><b>æ³¨æ„</b></font>ï¼šå½“å‰ä½¿ç”¨çš„SpringBootç‰ˆæœ¬æ˜¯2.5.4ï¼Œå¯¹åº”çš„åæ ‡è®¾ç½®ä¸­Mysqlé©±åŠ¨ä½¿ç”¨çš„æ˜¯8xç‰ˆæœ¬ã€‚å½“SpringBoot2.4.3ï¼ˆä¸å«ï¼‰ç‰ˆæœ¬ä¹‹å‰ä¼šå‡ºç°ä¸€ä¸ªå°BUGï¼Œå°±æ˜¯MySQLé©±åŠ¨å‡çº§åˆ°8ä»¥åè¦æ±‚å¼ºåˆ¶é…ç½®æ—¶åŒºï¼Œå¦‚æœä¸è®¾ç½®ä¼šå‡ºé—®é¢˜ã€‚è§£å†³æ–¹æ¡ˆå¾ˆç®€å•ï¼Œé©±åŠ¨urlä¸Šé¢æ·»åŠ ä¸Šå¯¹åº”è®¾ç½®å°±è¡Œäº†</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-comment">#2.é…ç½®ç›¸å…³ä¿¡æ¯</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p>â€‹    è¿™é‡Œè®¾ç½®çš„UTCæ˜¯å…¨çƒæ ‡å‡†æ—¶é—´ï¼Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯è‹±å›½æ—¶é—´ï¼Œä¸­å›½å¤„åœ¨ä¸œå…«åŒºï¼Œéœ€è¦åœ¨è¿™ä¸ªåŸºç¡€ä¸ŠåŠ ä¸Š8å°æ—¶ï¼Œè¿™æ ·æ‰èƒ½å’Œä¸­å›½åœ°åŒºçš„æ—¶é—´å¯¹åº”çš„ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹é…ç½®ä¸å†™UTCï¼Œå†™Asia&#x2F;Shanghaiä¹Ÿå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-comment">#2.é…ç½®ç›¸å…³ä¿¡æ¯</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p>â€‹    å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½è®¾ç½®è¿™ä¸ªä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥å»ä¿®æ”¹mysqlä¸­çš„é…ç½®æ–‡ä»¶mysql.iniï¼Œåœ¨mysqldé¡¹ä¸­æ·»åŠ default-time-zone&#x3D;+8:00ä¹Ÿå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…¶å®æ–¹å¼æ–¹æ³•å¾ˆå¤šï¼Œè¿™é‡Œå°±è¯´è¿™ä¹ˆå¤šå§ã€‚</p><p>â€‹    æ­¤å¤–åœ¨è¿è¡Œç¨‹åºæ—¶è¿˜ä¼šç»™å‡ºä¸€ä¸ªæç¤ºï¼Œè¯´æ•°æ®åº“é©±åŠ¨è¿‡æ—¶çš„è­¦å‘Šï¼Œæ ¹æ®æç¤ºä¿®æ”¹é…ç½®å³å¯ï¼Œå¼ƒç”¨<strong>com.mysql.jdbc.Driver</strong>ï¼Œæ¢ç”¨<font color="#ff0000"><b>com.mysql.cj.jdbc.Driver</b></font>ã€‚å‰é¢çš„ä¾‹å­ä¸­å·²ç»æ›´æ¢äº†é©±åŠ¨äº†ï¼Œåœ¨æ­¤è¯´æ˜ä¸€ä¸‹ã€‚</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">Loading class `com.mysql.jdbc.Driver&#x27;. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver&#x27;. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li><p>æ•´åˆæ“ä½œéœ€è¦å‹¾é€‰MyBatisæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯å¯¼å…¥MyBatiså¯¹åº”çš„starter</p></li><li><p>æ•°æ®åº“è¿æ¥ç›¸å…³ä¿¡æ¯è½¬æ¢æˆé…ç½®</p></li><li><p>æ•°æ®åº“SQLæ˜ å°„éœ€è¦æ·»åŠ @Mapperè¢«å®¹å™¨è¯†åˆ«åˆ°</p></li><li><p>MySQL 8.Xé©±åŠ¨å¼ºåˆ¶è¦æ±‚è®¾ç½®æ—¶åŒº</p><ul><li>ä¿®æ”¹urlï¼Œæ·»åŠ serverTimezoneè®¾å®š</li><li>ä¿®æ”¹MySQLæ•°æ®åº“é…ç½®</li></ul></li><li><p>é©±åŠ¨ç±»è¿‡æ—¶ï¼Œæé†’æ›´æ¢ä¸ºcom.mysql.cj.jdbc.Driver</p></li></ol><h3 id="JC-3-3-æ•´åˆMyBatis-Plus"><a href="#JC-3-3-æ•´åˆMyBatis-Plus" class="headerlink" title="JC-3-3.æ•´åˆMyBatis-Plus"></a>JC-3-3.æ•´åˆMyBatis-Plus</h3><p>â€‹    åšå®Œäº†ä¸¤ç§æŠ€æœ¯çš„æ•´åˆäº†ï¼Œå„ä½å°ä¼™ä¼´è¦å­¦ä¼šæ€»ç»“ï¼Œæˆ‘ä»¬åšè¿™ä¸ªæ•´åˆç©¶ç«Ÿå“ªäº›æ˜¯æ ¸å¿ƒï¼Ÿæ€»ç»“ä¸‹æ¥å°±ä¸¤å¥è¯</p><ul><li>å¯¼å…¥å¯¹åº”æŠ€æœ¯çš„starteråæ ‡</li><li>æ ¹æ®å¯¹åº”æŠ€æœ¯çš„è¦æ±‚åšé…ç½®</li></ul><p>â€‹    è™½ç„¶çœ‹èµ·æ¥æœ‰ç‚¹è™šï¼Œä½†æ˜¯ç¡®å®æ˜¯è¿™ä¸ªç†å„¿ï¼Œä¸‹é¢è¶çƒ­æ‰“é“ï¼Œå†æ¢ä¸€ä¸ªæŠ€æœ¯ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ä¸Šé¢è¿™ä¸¤æ­¥ã€‚</p><p>â€‹    æ¥ä¸‹æ¥åœ¨MyBatisçš„åŸºç¡€ä¸Šå†å‡çº§ä¸€ä¸‹ï¼Œæ•´åˆMyBaitsPlusï¼ˆç®€ç§°MPï¼‰ï¼Œå›½äººå¼€å‘çš„æŠ€æœ¯ï¼Œç¬¦åˆä¸­å›½äººå¼€å‘ä¹ æƒ¯ï¼Œè°ç”¨è°çŸ¥é“ã€‚æ¥å§ï¼Œä¸€èµ·åšæ•´åˆ</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥å¯¹åº”çš„starter</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    å…³äºè¿™ä¸ªåæ ‡ï¼Œæ­¤å¤„è¦è¯´æ˜ä¸€ç‚¹ï¼Œä¹‹å‰æˆ‘ä»¬çœ‹çš„starteréƒ½æ˜¯spring-boot-starter-ï¼Ÿï¼Ÿï¼Ÿï¼Œä¹Ÿå°±æ˜¯è¯´éƒ½æ˜¯ä¸‹é¢çš„æ ¼å¼</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">Spring-boot-start-***<br></code></pre></td></tr></table></figure><p>â€‹    è€Œè¿™ä¸ªåæ ‡çš„åå­—ä¹¦å†™æ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯ç¬¬ä¸‰æ–¹æŠ€æœ¯åç§°åœ¨å‰ï¼Œbootå’Œstarteråœ¨åã€‚æ­¤å¤„ç®€å•æä¸€ä¸‹å‘½åè§„èŒƒï¼ŒåæœŸåŸç†ç¯‡ä¼šå†è¯¦ç»†è®²è§£</p><table><thead><tr><th>starteræ‰€å±</th><th>å‘½åè§„åˆ™</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å®˜æ–¹æä¾›</td><td>spring-boot-starter-æŠ€æœ¯åç§°</td><td>spring-boot-starter-web <br/>spring-boot-starter-test</td></tr><tr><td>ç¬¬ä¸‰æ–¹æä¾›</td><td>ç¬¬ä¸‰æ–¹æŠ€æœ¯åç§°-spring-boot-starter</td><td>druid-spring-boot-starter</td></tr><tr><td>ç¬¬ä¸‰æ–¹æä¾›</td><td>ç¬¬ä¸‰æ–¹æŠ€æœ¯åç§°-boot-starterï¼ˆç¬¬ä¸‰æ–¹æŠ€æœ¯åç§°è¿‡é•¿ï¼Œç®€åŒ–å‘½åï¼‰</td><td>mybatis-plus-boot-starter</td></tr></tbody></table><p><font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹    æœ‰äº›å°ä¼™ä¼´åœ¨åˆ›å»ºé¡¹ç›®æ—¶æƒ³é€šè¿‡å‹¾é€‰çš„å½¢å¼æ‰¾åˆ°è¿™ä¸ªåå­—ï¼Œåˆ«ç¿»äº†ï¼Œæ²¡æœ‰ã€‚æˆªæ­¢ç›®å‰ï¼ŒSpringBootå®˜ç½‘è¿˜æœªæ”¶å½•æ­¤åæ ‡ï¼Œè€Œæˆ‘ä»¬Ideaåˆ›å»ºæ¨¡å—æ—¶è¯»å–çš„æ˜¯SpringBootå®˜ç½‘çš„Spring Initializrï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰ã€‚å¦‚æœæ¢ç”¨é˜¿é‡Œäº‘çš„urlåˆ›å»ºé¡¹ç›®å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„åæ ‡</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®æ•°æ®æºç›¸å…³ä¿¡æ¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#2.é…ç½®ç›¸å…³ä¿¡æ¯</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p>â€‹    æ²¡äº†ï¼Œå°±è¿™ä¹ˆå¤šï¼Œå‰©ä¸‹çš„å°±æ˜¯å†™MyBaitsPlusçš„ç¨‹åºäº†</p><p><strong>æ˜ å°„æ¥å£ï¼ˆDaoï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookDao</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;Book&gt; &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    æ ¸å¿ƒåœ¨äºDaoæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªBaseMapperçš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¸­å¸®åŠ©å¼€å‘è€…é¢„å®šäº†è‹¥å¹²ä¸ªå¸¸ç”¨çš„APIæ¥å£ï¼Œç®€åŒ–äº†é€šç”¨APIæ¥å£çš„å¼€å‘å·¥ä½œã€‚</p><p><img src="https://img-blog.csdnimg.cn/bed3f2ea31484700b79b164ebc323ba4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    ä¸‹é¢å°±å¯ä»¥å†™ä¸€ä¸ªæµ‹è¯•ç±»è¿›è¡Œæµ‹è¯•äº†ï¼Œæ­¤å¤„çœç•¥ã€‚</p><p><font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹    ç›®å‰æ•°æ®åº“çš„è¡¨åå®šä¹‰è§„åˆ™æ˜¯tbl_æ¨¡å—åç§°ï¼Œä¸ºäº†èƒ½å’Œå®ä½“ç±»ç›¸å¯¹åº”ï¼Œéœ€è¦åšä¸€ä¸ªé…ç½®ï¼Œç›¸å…³çŸ¥è¯†å„ä½å°ä¼™ä¼´å¯ä»¥åˆ°MyBatisPlusè¯¾ç¨‹ä¸­å»å­¦ä¹ ï¼Œæ­¤å¤„ä»…ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚é…ç½®application.ymlæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ï¼Œè®¾ç½®æ‰€æœ‰è¡¨åçš„é€šç”¨å‰ç¼€å</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">table-prefix:</span> <span class="hljs-string">tbl_</span><span class="hljs-comment">#è®¾ç½®æ‰€æœ‰è¡¨çš„é€šç”¨å‰ç¼€åç§°ä¸ºtbl_</span><br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>æ‰‹å·¥æ·»åŠ MyBatis-Pluså¯¹åº”çš„starter</li><li>æ•°æ®å±‚æ¥å£ä½¿ç”¨BaseMapperç®€åŒ–å¼€å‘</li><li>éœ€è¦ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹æŠ€æœ¯æ— æ³•é€šè¿‡å‹¾é€‰ç¡®å®šæ—¶ï¼Œéœ€è¦æ‰‹å·¥æ·»åŠ åæ ‡</li></ol><h3 id="JC-3-4-æ•´åˆDruid"><a href="#JC-3-4-æ•´åˆDruid" class="headerlink" title="JC-3-4.æ•´åˆDruid"></a>JC-3-4.æ•´åˆDruid</h3><p>â€‹    ä½¿ç”¨SpringBootæ•´åˆäº†3ä¸ªæŠ€æœ¯äº†ï¼Œå‘ç°å¥—è·¯åŸºæœ¬ç›¸åŒï¼Œå¯¼å…¥å¯¹åº”çš„starterï¼Œç„¶ååšé…ç½®ï¼Œå„ä½å°ä¼™ä¼´éœ€è¦ä¸€ç›´å¼ºåŒ–è¿™å¥—æ€æƒ³ã€‚ä¸‹é¢å†æ•´åˆä¸€ä¸ªæŠ€æœ¯ï¼Œç»§ç»­æ·±å…¥å¼ºåŒ–æ­¤æ€æƒ³ã€‚</p><p>â€‹    å‰é¢æ•´åˆMyBatiså’ŒMPçš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ•°æ®æºå¯¹è±¡éƒ½æ˜¯SpringBooté»˜è®¤çš„æ•°æ®æºå¯¹è±¡ï¼Œä¸‹é¢æˆ‘ä»¬æ‰‹å·¥æ§åˆ¶ä¸€ä¸‹ï¼Œè‡ªå·±æŒ‡å®šäº†ä¸€ä¸ªæ•°æ®æºå¯¹è±¡ï¼ŒDruidã€‚</p><p>â€‹    åœ¨æ²¡æœ‰æŒ‡å®šæ•°æ®æºæ—¶ï¼Œæˆ‘ä»¬çš„é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-comment">#2.é…ç½®ç›¸å…³ä¿¡æ¯</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p>â€‹    æ­¤æ—¶è™½ç„¶æ²¡æœ‰æŒ‡å®šæ•°æ®æºï¼Œä½†æ˜¯æ ¹æ®SpringBootçš„å¾·è¡Œï¼Œè‚¯å®šå¸®æˆ‘ä»¬é€‰äº†ä¸€ä¸ªå®ƒè®¤ä¸ºæœ€å¥½çš„æ•°æ®æºå¯¹è±¡ï¼Œè¿™å°±æ˜¯HiKariã€‚é€šè¿‡å¯åŠ¨æ—¥å¿—å¯ä»¥æŸ¥çœ‹åˆ°å¯¹åº”çš„èº«å½±ã€‚</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">2021-11-29 09:39:15.202  INFO 12260 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...<br>2021-11-29 09:39:15.208  WARN 12260 --- [           main] com.zaxxer.hikari.util.DriverDataSource  : Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.<br>2021-11-29 09:39:15.551  INFO 12260 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.<br></code></pre></td></tr></table></figure><p>â€‹    ä¸Šè¿°ä¿¡æ¯ä¸­æ¯ä¸€è¡Œéƒ½æœ‰HiKariçš„èº«å½±ï¼Œå¦‚æœéœ€è¦æ›´æ¢æ•°æ®æºï¼Œå…¶å®åªéœ€è¦ä¸¤æ­¥å³å¯ã€‚</p><ol><li>å¯¼å…¥å¯¹åº”çš„æŠ€æœ¯åæ ‡</li><li>é…ç½®ä½¿ç”¨æŒ‡å®šçš„æ•°æ®æºç±»å‹</li></ol><p>â€‹    ä¸‹é¢å°±åˆ‡æ¢ä¸€ä¸‹æ•°æ®æºå¯¹è±¡</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥å¯¹åº”çš„åæ ‡ï¼ˆæ³¨æ„ï¼Œæ˜¯åæ ‡ï¼Œæ­¤å¤„ä¸æ˜¯starterï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤â‘¡</strong>ï¼šä¿®æ”¹é…ç½®ï¼Œåœ¨æ•°æ®æºé…ç½®ä¸­æœ‰ä¸€ä¸ªtypeå±æ€§ï¼Œä¸“ç”¨äºæŒ‡å®šæ•°æ®æºç±»å‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br></code></pre></td></tr></table></figure><p>â€‹    è¿™é‡Œå…¶å®è¦æå‡ºä¸€ä¸ªé—®é¢˜çš„ï¼Œç›®å‰çš„æ•°æ®æºé…ç½®æ ¼å¼æ˜¯ä¸€ä¸ªé€šç”¨æ ¼å¼ï¼Œä¸ç®¡ä½ æ¢ä»€ä¹ˆæ•°æ®æºéƒ½å¯ä»¥ç”¨è¿™ç§å½¢å¼è¿›è¡Œé…ç½®ã€‚ä½†æ˜¯æ–°çš„é—®é¢˜åˆæ¥äº†ï¼Œå¦‚æœå¯¹æ•°æ®æºè¿›è¡Œä¸ªæ€§åŒ–çš„é…ç½®ï¼Œä¾‹å¦‚é…ç½®æ•°æ®æºå¯¹åº”çš„è¿æ¥æ•°é‡ï¼Œè¿™ä¸ªæ—¶å€™å°±æœ‰æ–°çš„é—®é¢˜äº†ã€‚æ¯ä¸ªæ•°æ®æºæŠ€æœ¯å¯¹åº”çš„é…ç½®åç§°éƒ½ä¸€æ ·å—ï¼Ÿè‚¯å®šä¸æ˜¯å•Šï¼Œå„ä¸ªå‚å•†ä¸å¯èƒ½æå‰å•†é‡å¥½éƒ½å†™ä¸€æ ·çš„åå­—å•Šï¼Œæ€ä¹ˆåŠï¼Ÿå°±è¦ä½¿ç”¨ä¸“ç”¨çš„é…ç½®æ ¼å¼äº†ã€‚è¿™ä¸ªæ—¶å€™ä¸Šé¢è¿™ç§é€šç”¨æ ¼å¼å°±ä¸èƒ½ä½¿ç”¨äº†ï¼Œæ€ä¹ˆåŠï¼Ÿè¿˜èƒ½æ€ä¹ˆåŠï¼ŸæŒ‰ç…§SpringBootæ•´åˆå…¶ä»–æŠ€æœ¯çš„é€šç”¨è§„åˆ™æ¥å¥—å•Šï¼Œå¯¼å…¥å¯¹åº”çš„starterï¼Œè¿›è¡Œç›¸åº”çš„é…ç½®å³å¯ã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥å¯¹åº”çš„starter</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤â‘¡</strong>ï¼šä¿®æ”¹é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span><br>      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>      <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p>â€‹    æ³¨æ„è§‚å¯Ÿï¼Œé…ç½®é¡¹ä¸­ï¼Œåœ¨datasourceä¸‹é¢å¹¶ä¸æ˜¯ç›´æ¥é…ç½®urlè¿™äº›å±æ€§çš„ï¼Œè€Œæ˜¯å…ˆé…ç½®äº†ä¸€ä¸ªdruidèŠ‚ç‚¹ï¼Œç„¶åå†é…ç½®çš„urlè¿™äº›ä¸œè¥¿ã€‚è¨€å¤–ä¹‹æ„ï¼Œurlè¿™ä¸ªå±æ€§æ—¶druidä¸‹é¢çš„å±æ€§ï¼Œé‚£ä½ èƒ½æƒ³åˆ°å—ï¼Ÿé™¤äº†è¿™4ä¸ªå¸¸è§„é…ç½®å¤–ï¼Œè¿˜æœ‰druidä¸“ç”¨çš„å…¶ä»–é…ç½®ã€‚é€šè¿‡æç¤ºåŠŸèƒ½å¯ä»¥æ‰“å¼€druidç›¸å…³çš„é…ç½®æŸ¥é˜…</p><p><img src="https://img-blog.csdnimg.cn/3c41fcf138ed47de84a10a5792a223f1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    ä¸druidç›¸å…³çš„é…ç½®è¶…è¿‡200æ¡ä»¥ä¸Šï¼Œè¿™å°±å‘Šè¯‰ä½ ï¼Œå¦‚æœæƒ³åšdruidç›¸å…³çš„é…ç½®ï¼Œä½¿ç”¨è¿™ç§æ ¼å¼å°±å¯ä»¥äº†ï¼Œè¿™é‡Œå°±ä¸å±•å¼€æè¿°äº†ï¼Œå¤ªå¤šäº†ã€‚</p><p>â€‹    è¿™æ˜¯æˆ‘ä»¬åšçš„ç¬¬4ä¸ªæŠ€æœ¯çš„æ•´åˆæ–¹æ¡ˆï¼Œè¿˜æ˜¯é‚£ä¸¤å¥è¯ï¼š<font color="#ff0000"><b>å¯¼å…¥å¯¹åº”starterï¼Œä½¿ç”¨å¯¹åº”é…ç½®</b></font>ã€‚æ²¡äº†ï¼ŒSpringBootæ•´åˆå…¶ä»–æŠ€æœ¯å°±è¿™ä¹ˆç®€å•ç²—æš´ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>æ•´åˆDruidéœ€è¦å¯¼å…¥Druidå¯¹åº”çš„starter</li><li>æ ¹æ®Druidæä¾›çš„é…ç½®æ–¹å¼è¿›è¡Œé…ç½®</li><li>æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯é€šç”¨æ–¹å¼<ul><li>å¯¼å…¥å¯¹åº”çš„starter</li><li>æ ¹æ®æä¾›çš„é…ç½®æ ¼å¼ï¼Œé…ç½®éé»˜è®¤å€¼å¯¹åº”çš„é…ç½®é¡¹</li></ul></li></ol><h3 id="JC-3-5-SSMPæ•´åˆç»¼åˆæ¡ˆä¾‹"><a href="#JC-3-5-SSMPæ•´åˆç»¼åˆæ¡ˆä¾‹" class="headerlink" title="JC-3-5.SSMPæ•´åˆç»¼åˆæ¡ˆä¾‹"></a>JC-3-5.SSMPæ•´åˆç»¼åˆæ¡ˆä¾‹</h3><p>â€‹    SpringBootèƒ½å¤Ÿæ•´åˆçš„æŠ€æœ¯å¤ªå¤šå¤ªå¤šäº†ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´æ…¢æ…¢æ¥ï¼Œä¸€ç‚¹ç‚¹æŒæ¡ã€‚å‰é¢å’±ä»¬åšäº†4ä¸ªæ•´åˆäº†ï¼Œä¸‹é¢å°±é€šè¿‡ä¸€ä¸ªç¨å¾®ç»¼åˆä¸€ç‚¹çš„æ¡ˆä¾‹ï¼Œå°†æ‰€æœ‰çŸ¥è¯†è´¯ç©¿èµ·æ¥ï¼ŒåŒæ—¶åšä¸€ä¸ªå°åŠŸèƒ½ï¼Œä½“ä¼šä¸€ä¸‹ã€‚ä¸è¿‡æœ‰è¨€åœ¨å…ˆï¼Œè¿™ä¸ªæ¡ˆä¾‹åˆ¶ä½œçš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šæœ‰è¿™ç§æ„Ÿè§‰ï¼Œè¯´å¥½çš„SpringBootæ•´åˆå…¶ä»–æŠ€æœ¯çš„æ¡ˆä¾‹ï¼Œä¸ºä»€ä¹ˆæ„Ÿè§‰SpringBootæ•´åˆå…¶ä»–æŠ€æœ¯çš„èº«å½±ä¸å¤šå‘¢ï¼Ÿå› ä¸ºè¿™ä¸œè¥¿ä¹¦å†™å¤ªç®€å•äº†ï¼Œç®€å•åˆ°ç¬é—´å†™å®Œï¼Œå¤§é‡çš„æ—¶é—´åšçš„ä¸æ˜¯è¿™äº›æ•´åˆå·¥ä½œã€‚</p><p>â€‹    å…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªæ¡ˆä¾‹çš„æœ€ç»ˆæ•ˆæœ</p><p><strong>ä¸»é¡µé¢</strong></p><p><img src="https://img-blog.csdnimg.cn/7fdd795639014815b57842ca920df948.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ·»åŠ </strong></p><p><img src="https://img-blog.csdnimg.cn/6a4a2c9038aa4715a4f13455572e2d34.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>åˆ é™¤</strong></p><p><img src="https://img-blog.csdnimg.cn/29ca8d9aa3f94dceab33633b87e80f44.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>ä¿®æ”¹</strong></p><p><strong>åˆ†é¡µ</strong></p><p><img src="https://img-blog.csdnimg.cn/599fb035bda745678affe4923a79f17a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ¡ä»¶æŸ¥è¯¢</strong></p><p><img src="https://img-blog.csdnimg.cn/c0e684ceddd54df381f52a00955d5181.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    æ•´ä½“æ¡ˆä¾‹ä¸­éœ€è¦é‡‡ç”¨çš„æŠ€æœ¯å¦‚ä¸‹ï¼Œå…ˆäº†è§£ä¸€ä¸‹ï¼Œåšåˆ°å“ªä¸€ä¸ªè¯´å“ªä¸€ä¸ª</p><ol><li>å®ä½“ç±»å¼€å‘â€”â€”â€”â€”ä½¿ç”¨Lombokå¿«é€Ÿåˆ¶ä½œå®ä½“ç±»</li><li>Daoå¼€å‘â€”â€”â€”â€”æ•´åˆMyBatisPlusï¼Œåˆ¶ä½œæ•°æ®å±‚æµ‹è¯•</li><li>Serviceå¼€å‘â€”â€”â€”â€”åŸºäºMyBatisPlusè¿›è¡Œå¢é‡å¼€å‘ï¼Œåˆ¶ä½œä¸šåŠ¡å±‚æµ‹è¯•ç±»</li><li>Controllerå¼€å‘â€”â€”â€”â€”åŸºäºRestfulå¼€å‘ï¼Œä½¿ç”¨PostManæµ‹è¯•æ¥å£åŠŸèƒ½</li><li>Controllerå¼€å‘â€”â€”â€”â€”å‰åç«¯å¼€å‘åè®®åˆ¶ä½œ</li><li>é¡µé¢å¼€å‘â€”â€”â€”â€”åŸºäºVUE+ElementUIåˆ¶ä½œï¼Œå‰åç«¯è”è°ƒï¼Œé¡µé¢æ•°æ®å¤„ç†ï¼Œé¡µé¢æ¶ˆæ¯å¤„ç†<ul><li>åˆ—è¡¨</li><li>æ–°å¢</li><li>ä¿®æ”¹</li><li>åˆ é™¤</li><li>åˆ†é¡µ</li><li>æŸ¥è¯¢</li></ul></li><li>é¡¹ç›®å¼‚å¸¸å¤„ç†</li><li>æŒ‰æ¡ä»¶æŸ¥è¯¢â€”â€”â€”â€”é¡µé¢åŠŸèƒ½è°ƒæ•´ã€Controllerä¿®æ­£åŠŸèƒ½ã€Serviceä¿®æ­£åŠŸèƒ½</li></ol><p>â€‹    å¯ä»¥çœ‹çš„å‡ºæ¥ï¼Œä¸œè¥¿è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œå¸Œæœ›é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹ï¼Œå„ä½å°ä¼™ä¼´èƒ½å¤Ÿå®ŒæˆåŸºç¡€å¼€å‘çš„æŠ€èƒ½è®­ç»ƒã€‚æ•´ä½“å¼€å‘è¿‡ç¨‹é‡‡ç”¨åšä¸€å±‚æµ‹ä¸€å±‚çš„å½¢å¼è¿›è¡Œï¼Œè¿‡ç¨‹å®Œæ•´ï¼Œæˆ˜çº¿è¾ƒé•¿ï¼Œå¸Œæœ›å„ä½èƒ½è·Ÿè¿›è¿›åº¦ï¼Œå®Œæˆè¿™ä¸ªå°æ¡ˆä¾‹çš„åˆ¶ä½œã€‚</p><h4 id="0-æ¨¡å—åˆ›å»º"><a href="#0-æ¨¡å—åˆ›å»º" class="headerlink" title="0.æ¨¡å—åˆ›å»º"></a>0.æ¨¡å—åˆ›å»º</h4><p>â€‹    å¯¹äºè¿™ä¸ªæ¡ˆä¾‹å¦‚æœæŒ‰ç…§ä¼ä¸šå¼€å‘çš„å½¢å¼è¿›è¡Œåº”è¯¥åˆ¶ä½œåå°å¾®æœåŠ¡ï¼Œå‰åç«¯åˆ†ç¦»çš„å¼€å‘ã€‚</p><p><img src="https://img-blog.csdnimg.cn/1dc9a89a91ad4566ac147cd2250c1378.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>æˆ‘çŸ¥é“è¿™ä¸ªå¯¹åˆå­¦çš„å°ä¼™ä¼´è¦æ±‚å¤ªé«˜äº†ï¼Œå’±ä»¬ç®€åŒ–ä¸€ä¸‹ã€‚åå°åšå•ä½“æœåŠ¡å™¨ï¼Œå‰ç«¯ä¸ä½¿ç”¨å‰åç«¯åˆ†ç¦»çš„åˆ¶ä½œäº†ã€‚</p><p><img src="https://img-blog.csdnimg.cn/8b8ca02845654636b55ec48852772440.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>ä¸€ä¸ªæœåŠ¡å™¨å³å……å½“åå°æœåŠ¡è°ƒç”¨ï¼Œåˆè´Ÿè´£å‰ç«¯é¡µé¢å±•ç¤ºï¼Œé™ä½å­¦ä¹ çš„é—¨æ§›ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—ï¼ŒåŠ è½½è¦ä½¿ç”¨çš„æŠ€æœ¯å¯¹åº”çš„starterï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶æ ¼å¼ä¸ºymlæ ¼å¼ï¼Œå¹¶æŠŠwebè®¿é—®ç«¯å£å…ˆè®¾ç½®æˆ80ã€‚</p><p><strong>pom.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>application.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><h4 id="1-å®ä½“ç±»å¼€å‘"><a href="#1-å®ä½“ç±»å¼€å‘" class="headerlink" title="1.å®ä½“ç±»å¼€å‘"></a>1.å®ä½“ç±»å¼€å‘</h4><p>â€‹    æœ¬æ¡ˆä¾‹å¯¹åº”çš„æ¨¡å—è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs tex">-- ----------------------------<br>-- Table structure for tbl<span class="hljs-built_in">_</span>book<br>-- ----------------------------<br>DROP TABLE IF EXISTS `tbl<span class="hljs-built_in">_</span>book`;<br>CREATE TABLE `tbl<span class="hljs-built_in">_</span>book`  (<br>  `id` int(11) NOT NULL AUTO<span class="hljs-built_in">_</span>INCREMENT,<br>  `type` varchar(20) CHARACTER SET utf8 COLLATE utf8<span class="hljs-built_in">_</span>general<span class="hljs-built_in">_</span>ci NULL DEFAULT NULL,<br>  `name` varchar(50) CHARACTER SET utf8 COLLATE utf8<span class="hljs-built_in">_</span>general<span class="hljs-built_in">_</span>ci NULL DEFAULT NULL,<br>  `description` varchar(255) CHARACTER SET utf8 COLLATE utf8<span class="hljs-built_in">_</span>general<span class="hljs-built_in">_</span>ci NULL DEFAULT NULL,<br>  PRIMARY KEY (`id`) USING BTREE<br>) ENGINE = InnoDB AUTO<span class="hljs-built_in">_</span>INCREMENT = 51 CHARACTER SET = utf8 COLLATE = utf8<span class="hljs-built_in">_</span>general<span class="hljs-built_in">_</span>ci ROW<span class="hljs-built_in">_</span>FORMAT = Dynamic;<br><br>-- ----------------------------<br>-- Records of tbl<span class="hljs-built_in">_</span>book<br>-- ----------------------------<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (1, &#x27;è®¡ç®—æœºç†è®º&#x27;, &#x27;Springå®æˆ˜ ç¬¬5ç‰ˆ&#x27;, &#x27;Springå…¥é—¨ç»å…¸æ•™ç¨‹ï¼Œæ·±å…¥ç†è§£SpringåŸç†æŠ€æœ¯å†…å¹•&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (2, &#x27;è®¡ç®—æœºç†è®º&#x27;, &#x27;Spring 5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®æˆ˜&#x27;, &#x27;åå¹´æ²‰æ·€ä¹‹ä½œï¼Œæ‰‹å†™Springç²¾åæ€æƒ³&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (3, &#x27;è®¡ç®—æœºç†è®º&#x27;, &#x27;Spring 5 è®¾è®¡æ¨¡å¼&#x27;, &#x27;æ·±å…¥Springæºç å‰–æSpringæºç ä¸­è•´å«çš„10å¤§è®¾è®¡æ¨¡å¼&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (4, &#x27;è®¡ç®—æœºç†è®º&#x27;, &#x27;Spring MVC+MyBatiså¼€å‘ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜&#x27;, &#x27;å…¨æ–¹ä½è§£æé¢å‘Webåº”ç”¨çš„è½»é‡çº§æ¡†æ¶ï¼Œå¸¦ä½ æˆä¸ºSpring MVCå¼€å‘é«˜æ‰‹&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (5, &#x27;è®¡ç®—æœºç†è®º&#x27;, &#x27;è½»é‡çº§Java Webä¼ä¸šåº”ç”¨å®æˆ˜&#x27;, &#x27;æºç çº§å‰–æSpringæ¡†æ¶ï¼Œé€‚åˆå·²æŒæ¡JavaåŸºç¡€çš„è¯»è€…&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (6, &#x27;è®¡ç®—æœºç†è®º&#x27;, &#x27;Javaæ ¸å¿ƒæŠ€æœ¯ å·I åŸºç¡€çŸ¥è¯†ï¼ˆåŸä¹¦ç¬¬11ç‰ˆï¼‰&#x27;, &#x27;Core Java ç¬¬11ç‰ˆï¼ŒJoltå¤§å¥–è·å¥–ä½œå“ï¼Œé’ˆå¯¹Java SE9ã€10ã€11å…¨é¢æ›´æ–°&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (7, &#x27;è®¡ç®—æœºç†è®º&#x27;, &#x27;æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº&#x27;, &#x27;5ä¸ªç»´åº¦å…¨é¢å‰–æJVMï¼Œå¤§å‚é¢è¯•çŸ¥è¯†ç‚¹å…¨è¦†ç›–&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (8, &#x27;è®¡ç®—æœºç†è®º&#x27;, &#x27;Javaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬4ç‰ˆï¼‰&#x27;, &#x27;Javaå­¦ä¹ å¿…è¯»ç»å…¸,æ®¿å ‚çº§è‘—ä½œï¼èµ¢å¾—äº†å…¨çƒç¨‹åºå‘˜çš„å¹¿æ³›èµèª‰&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (9, &#x27;è®¡ç®—æœºç†è®º&#x27;, &#x27;é›¶åŸºç¡€å­¦Javaï¼ˆå…¨å½©ç‰ˆï¼‰&#x27;, &#x27;é›¶åŸºç¡€è‡ªå­¦ç¼–ç¨‹çš„å…¥é—¨å›¾ä¹¦ï¼Œç”±æµ…å…¥æ·±ï¼Œè¯¦è§£Javaè¯­è¨€çš„ç¼–ç¨‹æ€æƒ³å’Œæ ¸å¿ƒæŠ€æœ¯&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (10, &#x27;å¸‚åœºè¥é”€&#x27;, &#x27;ç›´æ’­å°±è¯¥è¿™ä¹ˆåšï¼šä¸»æ’­é«˜æ•ˆæ²Ÿé€šå®æˆ˜æŒ‡å—&#x27;, &#x27;æå­æŸ’ã€æä½³ç¦ã€è–‡å¨…æˆé•¿ä¸ºç½‘çº¢çš„ç§˜å¯†éƒ½åœ¨ä¹¦ä¸­&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (11, &#x27;å¸‚åœºè¥é”€&#x27;, &#x27;ç›´æ’­é”€è®²å®æˆ˜ä¸€æœ¬é€š&#x27;, &#x27;å’Œç§‹å¶ä¸€èµ·å­¦ç³»åˆ—ç½‘ç»œè¥é”€ä¹¦ç±&#x27;);<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (12, &#x27;å¸‚åœºè¥é”€&#x27;, &#x27;ç›´æ’­å¸¦è´§ï¼šæ·˜å®ã€å¤©çŒ«ç›´æ’­ä»æ–°æ‰‹åˆ°é«˜æ‰‹&#x27;, &#x27;ä¸€æœ¬æ•™ä½ å¦‚ä½•ç©è½¬ç›´æ’­çš„ä¹¦ï¼Œ10å ‚è¯¾è½»æ¾å®ç°å¸¦è´§æœˆå…¥3W+&#x27;);<br></code></pre></td></tr></table></figure><p>â€‹    æ ¹æ®ä¸Šè¿°è¡¨ç»“æ„ï¼Œåˆ¶ä½œå¯¹åº”çš„å®ä½“ç±»</p><p><strong>å®ä½“ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String type;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String description;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    å®ä½“ç±»çš„å¼€å‘å¯ä»¥è‡ªåŠ¨é€šè¿‡å·¥å…·æ‰‹å·¥ç”Ÿæˆget&#x2F;setæ–¹æ³•ï¼Œç„¶åè¦†ç›–toString()æ–¹æ³•ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œç­‰ç­‰ã€‚ä¸è¿‡è¿™ä¸€å¥—æ“ä½œä¹¦å†™å¾ˆç¹çï¼Œæœ‰å¯¹åº”çš„å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–å¼€å‘ï¼Œä»‹ç»ä¸€ä¸ªå°å·¥å…·ï¼Œlombokã€‚</p><p>â€‹    Lombokï¼Œä¸€ä¸ªJavaç±»åº“ï¼Œæä¾›äº†ä¸€ç»„æ³¨è§£ï¼Œç®€åŒ–POJOå®ä½“ç±»å¼€å‘ï¼ŒSpringBootç›®å‰é»˜è®¤é›†æˆäº†lombokæŠ€æœ¯ï¼Œå¹¶æä¾›äº†å¯¹åº”çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œæ‰€ä»¥åªéœ€è¦æä¾›å¯¹åº”çš„åæ ‡å³å¯ï¼Œåœ¨pom.xmlä¸­æ·»åŠ lombokçš„åæ ‡ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--lombok--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    ä½¿ç”¨lombokå¯ä»¥é€šè¿‡ä¸€ä¸ªæ³¨è§£@Dataå®Œæˆä¸€ä¸ªå®ä½“ç±»å¯¹åº”çš„getterï¼Œsetterï¼ŒtoStringï¼Œequalsï¼ŒhashCodeç­‰æ“ä½œçš„å¿«é€Ÿæ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String type;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String description;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    åˆ°è¿™é‡Œå®ä½“ç±»å°±åšå¥½äº†ï¼Œæ˜¯ä¸æ˜¯æ¯”ä¸ä½¿ç”¨lombokç®€åŒ–å¥½å¤šï¼Œè¿™ç§å·¥å…·åœ¨Javaå¼€å‘ä¸­è¿˜æœ‰Nå¤šï¼Œåé¢è¯¾ç¨‹ä¸­é‡åˆ°äº†èƒ½ç”¨çš„ä¸œè¥¿æ—¶ï¼Œåœ¨ä¸å¢åŠ å„ä½å°ä¼™ä¼´å¤§é‡çš„å­¦ä¹ æ—¶é—´çš„æƒ…å†µä¸‹ï¼Œå°½é‡å¤šç»™å¤§å®¶ä»‹ç»ä¸€äº›</p><p><strong>æ€»ç»“</strong></p><ol><li>å®ä½“ç±»åˆ¶ä½œ</li><li>ä½¿ç”¨lombokç®€åŒ–å¼€å‘<ul><li>å¯¼å…¥lombokæ— éœ€æŒ‡å®šç‰ˆæœ¬ï¼Œç”±SpringBootæä¾›ç‰ˆæœ¬</li><li>@Dataæ³¨è§£</li></ul></li></ol><h4 id="2-æ•°æ®å±‚å¼€å‘â€”â€”åŸºç¡€CRUD"><a href="#2-æ•°æ®å±‚å¼€å‘â€”â€”åŸºç¡€CRUD" class="headerlink" title="2.æ•°æ®å±‚å¼€å‘â€”â€”åŸºç¡€CRUD"></a>2.æ•°æ®å±‚å¼€å‘â€”â€”åŸºç¡€CRUD</h4><p>â€‹    æ•°æ®å±‚å¼€å‘æœ¬æ¬¡ä½¿ç”¨MyBatisPlusæŠ€æœ¯ï¼Œæ•°æ®æºä½¿ç”¨å‰é¢å­¦ä¹ çš„Druidï¼Œå­¦éƒ½å­¦äº†éƒ½ç”¨ä¸Š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥MyBatisPlusä¸Druidå¯¹åº”çš„starterï¼Œå½“ç„¶mysqlçš„é©±åŠ¨ä¸èƒ½å°‘</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®æ•°æ®åº“è¿æ¥ç›¸å…³çš„æ•°æ®æºé…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span><br>      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>      <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨MPçš„æ ‡å‡†é€šç”¨æ¥å£BaseMapperåŠ é€Ÿå¼€å‘ï¼Œåˆ«å¿˜äº†@Mapperå’Œæ³›å‹çš„æŒ‡å®š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookDao</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;Book&gt; &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤â‘£</strong>ï¼šåˆ¶ä½œæµ‹è¯•ç±»æµ‹è¯•ç»“æœï¼Œè¿™ä¸ªæµ‹è¯•ç±»åˆ¶ä½œæ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œä¸è¿‡åœ¨ä¼ä¸šå¼€å‘ä¸­å¾€å¾€éƒ½ä¸ºåŠ é€Ÿå¼€å‘è·³è¿‡æ­¤æ­¥ï¼Œä¸”è¡Œä¸”çæƒœå§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">package</span> com.itheima.dao;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;<br><span class="hljs-keyword">import</span> com.itheima.domain.Book;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookDaoTestCase</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetById</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(bookDao.selectById(<span class="hljs-number">1</span>));<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSave</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Book</span> <span class="hljs-variable">book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>();<br>        book.setType(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        book.setName(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        book.setDescription(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        bookDao.insert(book);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Book</span> <span class="hljs-variable">book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>();<br>        book.setId(<span class="hljs-number">17</span>);<br>        book.setType(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®abcdefg&quot;</span>);<br>        book.setName(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        book.setDescription(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        bookDao.updateById(book);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete</span><span class="hljs-params">()</span>&#123;<br>        bookDao.deleteById(<span class="hljs-number">16</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAll</span><span class="hljs-params">()</span>&#123;<br>        bookDao.selectList(<span class="hljs-literal">null</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font></p><p>â€‹    MPæŠ€æœ¯é»˜è®¤çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ä¸ºé›ªèŠ±ç®—æ³•ï¼Œç”Ÿæˆçš„ä¸»é”®IDé•¿åº¦è¾ƒå¤§ï¼Œå’Œç›®å‰çš„æ•°æ®åº“è®¾å®šè§„åˆ™ä¸ç›¸ç¬¦ï¼Œéœ€è¦é…ç½®ä¸€ä¸‹ä½¿MPä½¿ç”¨æ•°æ®åº“çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œæ–¹å¼å˜›è¿˜æ˜¯è€ä¸€å¥—ï¼Œåšé…ç½®ã€‚åœ¨application.ymlä¸­æ·»åŠ å¯¹åº”é…ç½®å³å¯ï¼Œå…·ä½“å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span><br>      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>      <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br><br><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">table-prefix:</span> <span class="hljs-string">tbl_</span><span class="hljs-comment">#è®¾ç½®è¡¨åé€šç”¨å‰ç¼€</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span><span class="hljs-comment">#è®¾ç½®ä¸»é”®idå­—æ®µçš„ç”Ÿæˆç­–ç•¥ä¸ºå‚ç…§æ•°æ®åº“è®¾å®šçš„ç­–ç•¥ï¼Œå½“å‰æ•°æ®åº“è®¾ç½®idç”Ÿæˆç­–ç•¥ä¸ºè‡ªå¢</span><br></code></pre></td></tr></table></figure><h5 id="æŸ¥çœ‹MPè¿è¡Œæ—¥å¿—"><a href="#æŸ¥çœ‹MPè¿è¡Œæ—¥å¿—" class="headerlink" title="æŸ¥çœ‹MPè¿è¡Œæ—¥å¿—"></a>æŸ¥çœ‹MPè¿è¡Œæ—¥å¿—</h5><p>â€‹    åœ¨è¿›è¡Œæ•°æ®å±‚æµ‹è¯•çš„æ—¶å€™ï¼Œå› ä¸ºåŸºç¡€çš„CRUDæ“ä½œå‡ç”±MPç»™æˆ‘ä»¬æä¾›äº†ï¼Œæ‰€ä»¥å°±å‡ºç°äº†ä¸€ä¸ªå±€é¢ï¼Œå¼€å‘è€…ä¸éœ€è¦ä¹¦å†™SQLè¯­å¥äº†ï¼Œè¿™æ ·ç¨‹åºè¿è¡Œçš„æ—¶å€™æ€»æœ‰ä¸€ç§æ„Ÿè§‰ï¼Œä¸€åˆ‡çš„ä¸€åˆ‡éƒ½æ˜¯é»‘ç›’çš„ï¼Œä½œä¸ºå¼€å‘è€…æˆ‘ä»¬å•¥ä¹Ÿä¸çŸ¥é“å°±å®Œäº†ã€‚å¦‚æœç¨‹åºæ­£å¸¸è¿è¡Œè¿˜å¥½ï¼Œå¦‚æœæŠ¥é”™äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±å¾ˆå´©æºƒï¼Œä½ ç”šè‡³éƒ½ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹ï¼Œå› ä¸ºä¼ é€’å‚æ•°ã€å°è£…SQLè¯­å¥è¿™äº›æ“ä½œå®Œå…¨ä¸æ˜¯ä½ å¹²é¢„å¼€å‘å‡ºæ¥çš„ï¼Œæ‰€ä»¥æŸ¥çœ‹æ‰§è¡ŒæœŸè¿è¡Œçš„SQLè¯­å¥å°±æˆä¸ºå½“åŠ¡ä¹‹æ€¥ã€‚</p><p>â€‹    SpringBootæ•´åˆMPçš„æ—¶å€™å……åˆ†è€ƒè™‘åˆ°äº†è¿™ç‚¹ï¼Œé€šè¿‡é…ç½®çš„å½¢å¼å°±å¯ä»¥æŸ¥é˜…æ‰§è¡ŒæœŸSQLè¯­å¥ï¼Œé…ç½®å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">table-prefix:</span> <span class="hljs-string">tbl_</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br></code></pre></td></tr></table></figure><p>â€‹    å†æ¥çœ‹è¿è¡Œç»“æœï¼Œæ­¤æ—¶å°±æ˜¾ç¤ºäº†è¿è¡ŒæœŸæ‰§è¡ŒSQLçš„æƒ…å†µã€‚</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tex">Creating a new SqlSession<br>SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9a6717] was not registered for synchronization because synchronization is not active<br>JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@6ca30b8a] will not be managed by Spring<br>==&gt;  Preparing: SELECT id,type,name,description FROM tbl<span class="hljs-built_in">_</span>book<br>==&gt; Parameters: <br>&lt;==    Columns: id, type, name, description<br>&lt;==        Row: 1, è®¡ç®—æœºç†è®º, Springå®æˆ˜ ç¬¬5ç‰ˆ, Springå…¥é—¨ç»å…¸æ•™ç¨‹ï¼Œæ·±å…¥ç†è§£SpringåŸç†æŠ€æœ¯å†…å¹•<br>&lt;==        Row: 2, è®¡ç®—æœºç†è®º, Spring 5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®æˆ˜, åå¹´æ²‰æ·€ä¹‹ä½œï¼Œæ‰‹å†™Springç²¾åæ€æƒ³<br>&lt;==        Row: 3, è®¡ç®—æœºç†è®º, Spring 5 è®¾è®¡æ¨¡å¼, æ·±å…¥Springæºç å‰–æSpringæºç ä¸­è•´å«çš„10å¤§è®¾è®¡æ¨¡å¼<br>&lt;==        Row: 4, è®¡ç®—æœºç†è®º, Spring MVC+MyBatiså¼€å‘ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜, å…¨æ–¹ä½è§£æé¢å‘Webåº”ç”¨çš„è½»é‡çº§æ¡†æ¶ï¼Œå¸¦ä½ æˆä¸ºSpring MVCå¼€å‘é«˜æ‰‹<br>&lt;==        Row: 5, è®¡ç®—æœºç†è®º, è½»é‡çº§Java Webä¼ä¸šåº”ç”¨å®æˆ˜, æºç çº§å‰–æSpringæ¡†æ¶ï¼Œé€‚åˆå·²æŒæ¡JavaåŸºç¡€çš„è¯»è€…<br>&lt;==        Row: 6, è®¡ç®—æœºç†è®º, Javaæ ¸å¿ƒæŠ€æœ¯ å·I åŸºç¡€çŸ¥è¯†ï¼ˆåŸä¹¦ç¬¬11ç‰ˆï¼‰, Core Java ç¬¬11ç‰ˆï¼ŒJoltå¤§å¥–è·å¥–ä½œå“ï¼Œé’ˆå¯¹Java SE9ã€10ã€11å…¨é¢æ›´æ–°<br>&lt;==        Row: 7, è®¡ç®—æœºç†è®º, æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº, 5ä¸ªç»´åº¦å…¨é¢å‰–æJVMï¼Œå¤§å‚é¢è¯•çŸ¥è¯†ç‚¹å…¨è¦†ç›–<br>&lt;==        Row: 8, è®¡ç®—æœºç†è®º, Javaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬4ç‰ˆï¼‰, Javaå­¦ä¹ å¿…è¯»ç»å…¸,æ®¿å ‚çº§è‘—ä½œï¼èµ¢å¾—äº†å…¨çƒç¨‹åºå‘˜çš„å¹¿æ³›èµèª‰<br>&lt;==        Row: 9, è®¡ç®—æœºç†è®º, é›¶åŸºç¡€å­¦Javaï¼ˆå…¨å½©ç‰ˆï¼‰, é›¶åŸºç¡€è‡ªå­¦ç¼–ç¨‹çš„å…¥é—¨å›¾ä¹¦ï¼Œç”±æµ…å…¥æ·±ï¼Œè¯¦è§£Javaè¯­è¨€çš„ç¼–ç¨‹æ€æƒ³å’Œæ ¸å¿ƒæŠ€æœ¯<br>&lt;==        Row: 10, å¸‚åœºè¥é”€, ç›´æ’­å°±è¯¥è¿™ä¹ˆåšï¼šä¸»æ’­é«˜æ•ˆæ²Ÿé€šå®æˆ˜æŒ‡å—, æå­æŸ’ã€æä½³ç¦ã€è–‡å¨…æˆé•¿ä¸ºç½‘çº¢çš„ç§˜å¯†éƒ½åœ¨ä¹¦ä¸­<br>&lt;==        Row: 11, å¸‚åœºè¥é”€, ç›´æ’­é”€è®²å®æˆ˜ä¸€æœ¬é€š, å’Œç§‹å¶ä¸€èµ·å­¦ç³»åˆ—ç½‘ç»œè¥é”€ä¹¦ç±<br>&lt;==        Row: 12, å¸‚åœºè¥é”€, ç›´æ’­å¸¦è´§ï¼šæ·˜å®ã€å¤©çŒ«ç›´æ’­ä»æ–°æ‰‹åˆ°é«˜æ‰‹, ä¸€æœ¬æ•™ä½ å¦‚ä½•ç©è½¬ç›´æ’­çš„ä¹¦ï¼Œ10å ‚è¯¾è½»æ¾å®ç°å¸¦è´§æœˆå…¥3W+<br>&lt;==        Row: 13, æµ‹è¯•ç±»å‹, æµ‹è¯•æ•°æ®, æµ‹è¯•æè¿°æ•°æ®<br>&lt;==        Row: 14, æµ‹è¯•æ•°æ®update, æµ‹è¯•æ•°æ®update, æµ‹è¯•æ•°æ®update<br>&lt;==        Row: 15, -----------------, æµ‹è¯•æ•°æ®123, æµ‹è¯•æ•°æ®123<br>&lt;==      Total: 15<br></code></pre></td></tr></table></figure><p>â€‹    å…¶ä¸­æ¸…æ™°çš„æ ‡æ³¨äº†å½“å‰æ‰§è¡Œçš„SQLè¯­å¥æ˜¯ä»€ä¹ˆï¼Œæºå¸¦äº†ä»€ä¹ˆå‚æ•°ï¼Œå¯¹åº”çš„æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆï¼Œæ‰€æœ‰ä¿¡æ¯åº”æœ‰å°½æœ‰ã€‚</p><p>â€‹    æ­¤å¤„è®¾ç½®çš„æ˜¯æ—¥å¿—çš„æ˜¾ç¤ºå½¢å¼ï¼Œå½“å‰é…ç½®çš„æ˜¯æ§åˆ¶å°è¾“å‡ºï¼Œå½“ç„¶è¿˜å¯ä»¥ç”±æ›´å¤šçš„é€‰æ‹©ï¼Œæ ¹æ®éœ€æ±‚åˆ‡æ¢å³å¯</p><p><img src="https://img-blog.csdnimg.cn/3cf3eaf4f9e54db39903713c2f9f31c9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ€»ç»“</strong></p><ol><li><p>æ‰‹å·¥å¯¼å…¥starteråæ ‡ï¼ˆ2ä¸ªï¼‰ï¼Œmysqlé©±åŠ¨ï¼ˆ1ä¸ªï¼‰</p></li><li><p>é…ç½®æ•°æ®æºä¸MyBatisPluså¯¹åº”çš„é…ç½®</p></li><li><p>å¼€å‘Daoæ¥å£ï¼ˆç»§æ‰¿BaseMapperï¼‰</p></li><li><p>åˆ¶ä½œæµ‹è¯•ç±»æµ‹è¯•DaoåŠŸèƒ½æ˜¯å¦æœ‰æ•ˆ</p></li><li><p>ä½¿ç”¨é…ç½®æ–¹å¼å¼€å¯æ—¥å¿—ï¼Œè®¾ç½®æ—¥å¿—è¾“å‡ºæ–¹å¼ä¸ºæ ‡å‡†è¾“å‡ºå³å¯æŸ¥é˜…SQLæ‰§è¡Œæ—¥å¿—</p></li></ol><h4 id="3-æ•°æ®å±‚å¼€å‘â€”â€”åˆ†é¡µåŠŸèƒ½åˆ¶ä½œ"><a href="#3-æ•°æ®å±‚å¼€å‘â€”â€”åˆ†é¡µåŠŸèƒ½åˆ¶ä½œ" class="headerlink" title="3.æ•°æ®å±‚å¼€å‘â€”â€”åˆ†é¡µåŠŸèƒ½åˆ¶ä½œ"></a>3.æ•°æ®å±‚å¼€å‘â€”â€”åˆ†é¡µåŠŸèƒ½åˆ¶ä½œ</h4><p>â€‹    å‰é¢ä»…ä»…æ˜¯ä½¿ç”¨äº†MPæä¾›çš„åŸºç¡€CRUDåŠŸèƒ½ï¼Œå®é™…ä¸ŠMPç»™æˆ‘ä»¬æä¾›äº†å‡ ä¹æ‰€æœ‰çš„åŸºç¡€æ“ä½œï¼Œè¿™ä¸€èŠ‚è¯´ä¸€ä¸‹å¦‚æœå®ç°æ•°æ®åº“ç«¯çš„åˆ†é¡µæ“ä½œ</p><p>â€‹    MPæä¾›çš„åˆ†é¡µæ“ä½œAPIå¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetPage</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>);<br>    bookDao.selectPage(page, <span class="hljs-literal">null</span>);<br>    System.out.println(page.getCurrent());<br>    System.out.println(page.getSize());<br>    System.out.println(page.getTotal());<br>    System.out.println(page.getPages());<br>    System.out.println(page.getRecords());<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    å…¶ä¸­selectPageæ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªå°è£…åˆ†é¡µæ•°æ®çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡newçš„å½¢å¼åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼Œå½“ç„¶è¿™ä¸ªå¯¹è±¡ä¹Ÿæ˜¯MPæä¾›çš„ï¼Œåˆ«é€‰é”™åŒ…äº†ã€‚åˆ›å»ºæ­¤å¯¹è±¡æ—¶å°±éœ€è¦æŒ‡å®šåˆ†é¡µçš„ä¸¤ä¸ªåŸºæœ¬æ•°æ®</p><ul><li>å½“å‰æ˜¾ç¤ºç¬¬å‡ é¡µ</li><li>æ¯é¡µæ˜¾ç¤ºå‡ æ¡æ•°æ®</li></ul><p>â€‹    å¯ä»¥é€šè¿‡åˆ›å»ºPageå¯¹è±¡æ—¶åˆ©ç”¨æ„é€ æ–¹æ³•åˆå§‹åŒ–è¿™ä¸¤ä¸ªæ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><p>â€‹    å°†è¯¥å¯¹è±¡ä¼ å…¥åˆ°æŸ¥è¯¢æ–¹æ³•selectPageåï¼Œå¯ä»¥å¾—åˆ°æŸ¥è¯¢ç»“æœï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šå‘ç°å½“å‰æ“ä½œæŸ¥è¯¢ç»“æœè¿”å›å€¼ä»ç„¶æ˜¯ä¸€ä¸ªIPageå¯¹è±¡ï¼Œè¿™åˆæ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> bookDao.selectPage(page, <span class="hljs-literal">null</span>);<br></code></pre></td></tr></table></figure><p>â€‹    åŸæ¥è¿™ä¸ªIPageå¯¹è±¡ä¸­å°è£…äº†è‹¥å¹²ä¸ªæ•°æ®ï¼Œè€ŒæŸ¥è¯¢çš„ç»“æœä½œä¸ºIPageå¯¹è±¡å°è£…çš„ä¸€ä¸ªæ•°æ®å­˜åœ¨çš„ï¼Œå¯ä»¥ç†è§£ä¸ºæŸ¥è¯¢ç»“æœå¾—åˆ°åï¼Œåˆå¡åˆ°äº†è¿™ä¸ªIPageå¯¹è±¡ä¸­ï¼Œå…¶å®è¿˜æ˜¯ä¸ºäº†é«˜åº¦çš„å°è£…ï¼Œä¸€ä¸ªIPageæè¿°äº†åˆ†é¡µæ‰€æœ‰çš„ä¿¡æ¯ã€‚ä¸‹é¢5ä¸ªæ“ä½œå°±æ˜¯IPageå¯¹è±¡ä¸­å°è£…çš„æ‰€æœ‰ä¿¡æ¯äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetPage</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>);<br>    bookDao.selectPage(page, <span class="hljs-literal">null</span>);<br>    System.out.println(page.getCurrent());<span class="hljs-comment">//å½“å‰é¡µç å€¼</span><br>    System.out.println(page.getSize());<span class="hljs-comment">//æ¯é¡µæ˜¾ç¤ºæ•°</span><br>    System.out.println(page.getTotal());<span class="hljs-comment">//æ•°æ®æ€»é‡</span><br>    System.out.println(page.getPages());<span class="hljs-comment">//æ€»é¡µæ•°</span><br>    System.out.println(page.getRecords());<span class="hljs-comment">//è¯¦ç»†æ•°æ®</span><br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    åˆ°è¿™é‡Œå°±çŸ¥é“è¿™äº›æ•°æ®å¦‚ä½•è·å–äº†ï¼Œä½†æ˜¯å½“ä½ å»æ‰§è¡Œè¿™ä¸ªæ“ä½œæ—¶ï¼Œä½ ä¼šå‘ç°å¹¶ä¸åƒæˆ‘ä»¬åˆ†æçš„è¿™æ ·ï¼Œå®é™…ä¸Šè¿™ä¸ªåˆ†é¡µå½“å‰æ˜¯æ— æ•ˆçš„ã€‚ä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿè¿™ä¸ªè¦æºäºMPçš„å†…éƒ¨æœºåˆ¶ã€‚</p><p>â€‹    å¯¹äºMySQLçš„åˆ†é¡µæ“ä½œä½¿ç”¨limitå…³é”®å­—è¿›è¡Œï¼Œè€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•°æ®åº“éƒ½ä½¿ç”¨limitå…³é”®å­—å®ç°çš„ï¼Œè¿™ä¸ªæ—¶å€™MPä¸ºäº†åˆ¶ä½œçš„å…¼å®¹æ€§å¼ºï¼Œå°†åˆ†é¡µæ“ä½œè®¾ç½®ä¸ºåŸºç¡€æŸ¥è¯¢æ“ä½œçš„å‡çº§ç‰ˆï¼Œä½ å¯ä»¥ç†è§£ä¸ºIPhone6ä¸IPhone6S-PLUSçš„å…³ç³»ã€‚</p><p>â€‹    åŸºç¡€æ“ä½œä¸­æœ‰æŸ¥è¯¢å…¨éƒ¨çš„åŠŸèƒ½ï¼Œè€Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šåªéœ€è¦å‡çº§ä¸€ä¸‹ï¼ˆPLUSï¼‰å°±å¯ä»¥å¾—åˆ°åˆ†é¡µæ“ä½œã€‚æ‰€ä»¥MPå°†åˆ†é¡µæ“ä½œåšæˆäº†ä¸€ä¸ªå¼€å…³ï¼Œä½ ç”¨åˆ†é¡µåŠŸèƒ½å°±æŠŠå¼€å…³å¼€å¯ï¼Œä¸ç”¨å°±ä¸éœ€è¦å¼€å¯è¿™ä¸ªå¼€å…³ã€‚è€Œæˆ‘ä»¬ç°åœ¨æ²¡æœ‰å¼€å¯è¿™ä¸ªå¼€å…³ï¼Œæ‰€ä»¥åˆ†é¡µæ“ä½œæ˜¯æ²¡æœ‰çš„ã€‚è¿™ä¸ªå¼€å…³æ˜¯é€šè¿‡MPçš„æ‹¦æˆªå™¨çš„å½¢å¼å­˜åœ¨çš„ï¼Œå…¶ä¸­çš„åŸç†è¿™é‡Œä¸åˆ†æäº†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å­¦ä¹ MyBatisPlusè¿™é—¨è¯¾ç¨‹è¿›è¡Œè¯¦ç»†è§£è¯»ã€‚å…·ä½“è®¾ç½®æ–¹å¼å¦‚ä¸‹</p><p><strong>å®šä¹‰MPæ‹¦æˆªå™¨å¹¶å°†å…¶è®¾ç½®ä¸ºSpringç®¡æ§çš„bean</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MPConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();<br>        interceptor.addInnerInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>());<br>        <span class="hljs-keyword">return</span> interceptor;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    ä¸Šè¿°ä»£ç ç¬¬ä¸€è¡Œæ˜¯åˆ›å»ºMPçš„æ‹¦æˆªå™¨æ ˆï¼Œè¿™ä¸ªæ—¶å€™æ‹¦æˆªå™¨æ ˆä¸­æ²¡æœ‰å…·ä½“çš„æ‹¦æˆªå™¨ï¼Œç¬¬äºŒè¡Œæ˜¯åˆå§‹åŒ–äº†åˆ†é¡µæ‹¦æˆªå™¨ï¼Œå¹¶æ·»åŠ åˆ°æ‹¦æˆªå™¨æ ˆä¸­ã€‚å¦‚æœåæœŸå¼€å‘å…¶ä»–åŠŸèƒ½ï¼Œéœ€è¦æ·»åŠ å…¨æ–°çš„æ‹¦æˆªå™¨ï¼ŒæŒ‰ç…§ç¬¬äºŒè¡Œçš„æ ¼å¼ç»§ç»­addè¿›å»æ–°çš„æ‹¦æˆªå™¨å°±å¯ä»¥äº†ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨IPageå°è£…åˆ†é¡µæ•°æ®</li><li>åˆ†é¡µæ“ä½œä¾èµ–MyBatisPlusåˆ†é¡µæ‹¦æˆªå™¨å®ç°åŠŸèƒ½</li><li>å€ŸåŠ©MyBatisPlusæ—¥å¿—æŸ¥é˜…æ‰§è¡ŒSQLè¯­å¥</li></ol><h4 id="4-æ•°æ®å±‚å¼€å‘â€”â€”æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½åˆ¶ä½œ"><a href="#4-æ•°æ®å±‚å¼€å‘â€”â€”æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½åˆ¶ä½œ" class="headerlink" title="4.æ•°æ®å±‚å¼€å‘â€”â€”æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½åˆ¶ä½œ"></a>4.æ•°æ®å±‚å¼€å‘â€”â€”æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½åˆ¶ä½œ</h4><p>â€‹    é™¤äº†åˆ†é¡µåŠŸèƒ½ï¼ŒMPè¿˜æä¾›æœ‰å¼ºå¤§çš„æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½ã€‚ä»¥å¾€æˆ‘ä»¬å†™æ¡ä»¶æŸ¥è¯¢è¦è‡ªå·±åŠ¨æ€æ‹¼å†™å¤æ‚çš„SQLè¯­å¥ï¼Œç°åœ¨ç®€å•äº†ï¼ŒMPå°†è¿™äº›æ“ä½œéƒ½åˆ¶ä½œæˆAPIæ¥å£ï¼Œè°ƒç”¨ä¸€ä¸ªåˆä¸€ä¸ªçš„æ–¹æ³•å°±å¯ä»¥å®ç°å„ç§å¥—ä»¶çš„æ‹¼è£…ã€‚è¿™é‡Œç»™å¤§å®¶æ™®åŠä¸€ä¸‹åŸºæœ¬æ ¼å¼ï¼Œè¯¦ç»†çš„æ“ä½œè¿˜æ˜¯åˆ°MPçš„è¯¾ç¨‹ä¸­æŸ¥é˜…å§</p><p>â€‹    ä¸‹é¢çš„æ“ä½œå°±æ˜¯æ‰§è¡Œä¸€ä¸ªæ¨¡ç³ŠåŒ¹é…å¯¹åº”çš„æ“ä½œï¼Œç”±likeæ¡ä»¶ä¹¦å†™å˜ä¸ºäº†likeæ–¹æ³•çš„è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetBy</span><span class="hljs-params">()</span>&#123;<br>    QueryWrapper&lt;Book&gt; qw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>    qw.like(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;Spring&quot;</span>);<br>    bookDao.selectList(qw);<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    å…¶ä¸­ç¬¬ä¸€å¥QueryWrapperå¯¹è±¡æ˜¯ä¸€ä¸ªç”¨äºå°è£…æŸ¥è¯¢æ¡ä»¶çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ä»¥åŠ¨æ€ä½¿ç”¨APIè°ƒç”¨çš„æ–¹æ³•æ·»åŠ æ¡ä»¶ï¼Œæœ€ç»ˆè½¬åŒ–æˆå¯¹åº”çš„SQLè¯­å¥ã€‚ç¬¬äºŒå¥å°±æ˜¯ä¸€ä¸ªæ¡ä»¶äº†ï¼Œéœ€è¦ä»€ä¹ˆæ¡ä»¶ï¼Œä½¿ç”¨QueryWapperå¯¹è±¡ç›´æ¥è°ƒç”¨å¯¹åº”æ“ä½œå³å¯ã€‚æ¯”å¦‚åšå¤§äºå°äºå…³ç³»ï¼Œå°±å¯ä»¥ä½¿ç”¨ltæˆ–gtæ–¹æ³•ï¼Œç­‰äºä½¿ç”¨eqæ–¹æ³•ï¼Œç­‰ç­‰ï¼Œæ­¤å¤„ä¸åšæ›´å¤šçš„è§£é‡Šäº†ã€‚</p><p>â€‹    è¿™ç»„APIä½¿ç”¨è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯å…³äºå±æ€§å­—æ®µåçš„ä¹¦å†™å­˜åœ¨ç€å®‰å…¨éšæ‚£ï¼Œæ¯”å¦‚æŸ¥è¯¢å­—æ®µnameï¼Œå½“å‰æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢æ€ä¹¦å†™çš„ï¼Œä¸‡ä¸€å†™é”™ï¼Œç¼–è¯‘å™¨è¿˜æ²¡æœ‰åŠæ³•å‘ç°ï¼Œåªèƒ½å°†é—®é¢˜æŠ›åˆ°è¿è¡Œå™¨é€šè¿‡å¼‚å¸¸å †æ ˆå‘Šè¯‰å¼€å‘è€…ï¼Œä¸å¤ªå‹å¥½ã€‚</p><p>â€‹    MPé’ˆå¯¹å­—æ®µæ£€æŸ¥è¿›è¡Œäº†åŠŸèƒ½å‡çº§ï¼Œå…¨é¢æ”¯æŒLambdaè¡¨è¾¾å¼ï¼Œå°±æœ‰äº†ä¸‹é¢è¿™ç»„APIã€‚ç”±QueryWrapperå¯¹è±¡å‡çº§ä¸ºLambdaQueryWrapperå¯¹è±¡ï¼Œè¿™ä¸‹å°±å˜äº†ä¸Šè¿°é—®é¢˜çš„å‡ºç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetBy2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span>;<br>    LambdaQueryWrapper&lt;Book&gt; lqw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;Book&gt;();<br>    lqw.like(Book::getName,name);<br>    bookDao.selectList(lqw);<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    ä¸ºäº†ä¾¿äºå¼€å‘è€…åŠ¨æ€æ‹¼å†™SQLï¼Œé˜²æ­¢å°†nullæ•°æ®ä½œä¸ºæ¡ä»¶ä½¿ç”¨ï¼ŒMPè¿˜æä¾›äº†åŠ¨æ€æ‹¼è£…SQLçš„å¿«æ·ä¹¦å†™æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetBy2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span>;<br>    LambdaQueryWrapper&lt;Book&gt; lqw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;Book&gt;();<br>    <span class="hljs-comment">//if(name != null) lqw.like(Book::getName,name);//æ–¹å¼ä¸€ï¼šJAVAä»£ç æ§åˆ¶</span><br>    lqw.like(name != <span class="hljs-literal">null</span>,Book::getName,name);<span class="hljs-comment">//æ–¹å¼äºŒï¼šAPIæ¥å£æä¾›æ§åˆ¶å¼€å…³</span><br>    bookDao.selectList(lqw);<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    å…¶å®å°±æ˜¯ä¸ªæ ¼å¼ï¼Œæ²¡æœ‰åŒºåˆ«ã€‚å…³äºMPçš„åŸºç¡€æ“ä½œå°±è¯´åˆ°è¿™é‡Œå§ï¼Œå¦‚æœè¿™ä¸€å—çŸ¥è¯†ä¸å¤ªç†Ÿæ‚‰çš„å°ä¼™ä¼´è¿˜æ˜¯å»å®Œæ•´çš„å­¦ä¹ ä¸€ä¸‹MPçš„çŸ¥è¯†å§ï¼Œè¿™é‡Œåªæ˜¯èœ»èœ“ç‚¹æ°´çš„ç”¨äº†å‡ ä¸ªæ“ä½œè€Œå·²ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li><p>ä½¿ç”¨QueryWrapperå¯¹è±¡å°è£…æŸ¥è¯¢æ¡ä»¶</p></li><li><p>æ¨èä½¿ç”¨LambdaQueryWrapperå¯¹è±¡</p></li><li><p>æ‰€æœ‰æŸ¥è¯¢æ“ä½œå°è£…æˆæ–¹æ³•è°ƒç”¨</p></li><li><p>æŸ¥è¯¢æ¡ä»¶æ”¯æŒåŠ¨æ€æ¡ä»¶æ‹¼è£…</p></li></ol><h4 id="5-ä¸šåŠ¡å±‚å¼€å‘"><a href="#5-ä¸šåŠ¡å±‚å¼€å‘" class="headerlink" title="5.ä¸šåŠ¡å±‚å¼€å‘"></a>5.ä¸šåŠ¡å±‚å¼€å‘</h4><p>â€‹    æ•°æ®å±‚å¼€å‘å‘Šä¸€æ®µè½ï¼Œä¸‹é¢è¿›è¡Œä¸šåŠ¡å±‚å¼€å‘ï¼Œå…¶å®æ ‡å‡†ä¸šåŠ¡å±‚å¼€å‘å¾ˆå¤šåˆå­¦è€…è®¤ä¸ºå°±æ˜¯è°ƒç”¨æ•°æ®å±‚ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Ÿè¿™ä¸ªç†è§£æ˜¯æ²¡æœ‰å¤§é—®é¢˜çš„ï¼Œæ›´ç²¾å‡†çš„è¯´æ³•åº”è¯¥æ˜¯<font color="#ff0000"><b>ç»„ç»‡ä¸šåŠ¡é€»è¾‘åŠŸèƒ½ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå¯¹æ•°æ®æŒä¹…å±‚å‘èµ·è°ƒç”¨</b></font>ã€‚æœ‰ä»€ä¹ˆå·®åˆ«å‘¢ï¼Ÿç›®æ ‡æ˜¯ä¸ºäº†ç»„ç»‡å‡ºç¬¦åˆéœ€æ±‚çš„ä¸šåŠ¡é€»è¾‘åŠŸèƒ½ï¼Œè‡³äºè°ƒä¸è°ƒç”¨æ•°æ®å±‚è¿˜çœŸä¸å¥½è¯´ï¼Œæœ‰éœ€æ±‚å°±è°ƒç”¨ï¼Œæ²¡æœ‰éœ€æ±‚å°±ä¸è°ƒç”¨ã€‚</p><p>â€‹    ä¸€ä¸ªå¸¸è¯†æ€§çš„çŸ¥è¯†æ™®åŠä¸€ä¸‹ï¼Œä¸šåŠ¡å±‚çš„æ–¹æ³•åå®šä¹‰ä¸€å®šè¦ä¸ä¸šåŠ¡æœ‰å…³ï¼Œä¾‹å¦‚ç™»å½•æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">login(String username,String password);<br></code></pre></td></tr></table></figure><p>â€‹    è€Œæ•°æ®å±‚çš„æ–¹æ³•åå®šä¹‰ä¸€å®šä¸ä¸šåŠ¡æ— å…³ï¼Œæ˜¯ä¸€å®šï¼Œä¸æ˜¯å¯èƒ½ï¼Œä¹Ÿä¸æ˜¯æœ‰å¯èƒ½ï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·åå¯†ç æŸ¥è¯¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">selectByUserNameAndPassword(String username,String password);<br></code></pre></td></tr></table></figure><p>â€‹    æˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™æ˜¯å¯ä»¥æ ¹æ®å®Œæˆçš„å·¥ä½œä¸åŒåˆ’åˆ†æˆä¸åŒèŒèƒ½çš„å¼€å‘å›¢é˜Ÿçš„ã€‚æ¯”å¦‚ä¸€ä¸ªå“¥ä»¬åˆ¶ä½œæ•°æ®å±‚ï¼Œä»–å°±å¯ä»¥ä¸çŸ¥é“ä¸šåŠ¡æ˜¯ä»€ä¹ˆæ ·å­ï¼Œæ‹¿åˆ°çš„éœ€æ±‚æ–‡æ¡£è¦æ±‚å¯èƒ½æ˜¯è¿™æ ·çš„</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">æ¥å£ï¼šä¼ å…¥ç”¨æˆ·åä¸å¯†ç å­—æ®µï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”ç»“æœï¼Œç»“æœæ˜¯å•æ¡æ•°æ®<br>æ¥å£ï¼šä¼ å…¥IDå­—æ®µï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”ç»“æœï¼Œç»“æœæ˜¯å•æ¡æ•°æ®<br>æ¥å£ï¼šä¼ å…¥ç¦»èŒå­—æ®µï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”ç»“æœï¼Œç»“æœæ˜¯å¤šæ¡æ•°æ®<br></code></pre></td></tr></table></figure><p>â€‹    ä½†æ˜¯è¿›è¡Œä¸šåŠ¡åŠŸèƒ½å¼€å‘çš„å“¥ä»¬ï¼Œæ‹¿åˆ°çš„éœ€æ±‚æ–‡æ¡£è¦æ±‚å·®åˆ«å°±å¾ˆå¤§</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">æ¥å£ï¼šä¼ å…¥ç”¨æˆ·åä¸å¯†ç å­—æ®µï¼Œå¯¹ç”¨æˆ·åå­—æ®µåšé•¿åº¦æ ¡éªŒï¼Œ4-15ä½ï¼Œå¯¹å¯†ç å­—æ®µåšé•¿åº¦æ ¡éªŒï¼Œ8åˆ°24ä½ï¼Œå¯¹å–µå–µå–µå­—æ®µåšç‰¹æ®Šå­—ç¬¦æ ¡éªŒï¼Œä¸å…è®¸å­˜åœ¨ç©ºæ ¼ï¼ŒæŸ¥è¯¢ç»“æœä¸ºå¯¹è±¡ã€‚å¦‚æœä¸ºnullï¼Œè¿”å›BusinessExceptionï¼Œå°è£…æ¶ˆæ¯ç INFO<span class="hljs-built_in">_</span>LOGON<span class="hljs-built_in">_</span>USERNAME<span class="hljs-built_in">_</span>PASSWORD<span class="hljs-built_in">_</span>ERROR<br></code></pre></td></tr></table></figure><p>â€‹    ä½ æ¯”è¾ƒä¸€ä¸‹ï¼Œèƒ½æ˜¯ä¸€å›äº‹å—ï¼Ÿå·®åˆ«å¤ªå¤§äº†ï¼Œæ‰€ä»¥è¯´ä¸šåŠ¡å±‚æ–¹æ³•å®šä¹‰ä¸æ•°æ®å±‚æ–¹æ³•å®šä¹‰å·®å¼‚åŒ–å¾ˆå¤§ï¼Œåªä¸è¿‡æœ‰äº›å…¥é—¨çº§çš„å¼€å‘è€…æ‰‹æ‡’æˆ–è€…æ²¡æœ‰ä½¿ç”¨è¿‡å…¬å¸ç›¸å…³çš„ISOæ ‡å‡†åŒ–æ–‡æ¡£è€Œå·²ã€‚</p><p>â€‹    å¤šä½™çš„è¯ä¸è¯´äº†ï¼Œå’±ä»¬åšæ¡ˆä¾‹å°±ç®€å•åˆ¶ä½œäº†ï¼Œä¸šåŠ¡å±‚æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookService</span> &#123;<br>    Boolean <span class="hljs-title function_">save</span><span class="hljs-params">(Book book)</span>;<br>    Boolean <span class="hljs-title function_">update</span><span class="hljs-params">(Book book)</span>;<br>    Boolean <span class="hljs-title function_">delete</span><span class="hljs-params">(Integer id)</span>;<br>    Book <span class="hljs-title function_">getById</span><span class="hljs-params">(Integer id)</span>;<br>    List&lt;Book&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">()</span>;<br>    IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(<span class="hljs-type">int</span> currentPage,<span class="hljs-type">int</span> pageSize)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    ä¸šåŠ¡å±‚å®ç°ç±»å¦‚ä¸‹ï¼Œè½¬è°ƒæ•°æ®å±‚å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BookService</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">save</span><span class="hljs-params">(Book book)</span> &#123;<br>        <span class="hljs-keyword">return</span> bookDao.insert(book) &gt; <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">update</span><span class="hljs-params">(Book book)</span> &#123;<br>        <span class="hljs-keyword">return</span> bookDao.updateById(book) &gt; <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">delete</span><span class="hljs-params">(Integer id)</span> &#123;<br>        <span class="hljs-keyword">return</span> bookDao.deleteById(id) &gt; <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Book <span class="hljs-title function_">getById</span><span class="hljs-params">(Integer id)</span> &#123;<br>        <span class="hljs-keyword">return</span> bookDao.selectById(id);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;Book&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bookDao.selectList(<span class="hljs-literal">null</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(<span class="hljs-type">int</span> currentPage, <span class="hljs-type">int</span> pageSize)</span> &#123;<br>        <span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(currentPage,pageSize);<br>        bookDao.selectPage(page,<span class="hljs-literal">null</span>);<br>        <span class="hljs-keyword">return</span> page;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    åˆ«å¿˜äº†å¯¹ä¸šåŠ¡å±‚æ¥å£è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ç±»å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceTest</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> IBookService bookService;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetById</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(bookService.getById(<span class="hljs-number">4</span>));<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSave</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Book</span> <span class="hljs-variable">book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>();<br>        book.setType(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        book.setName(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        book.setDescription(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        bookService.save(book);<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Book</span> <span class="hljs-variable">book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>();<br>        book.setId(<span class="hljs-number">17</span>);<br>        book.setType(<span class="hljs-string">&quot;-----------------&quot;</span>);<br>        book.setName(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        book.setDescription(<span class="hljs-string">&quot;æµ‹è¯•æ•°æ®123&quot;</span>);<br>        bookService.updateById(book);<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete</span><span class="hljs-params">()</span>&#123;<br>        bookService.removeById(<span class="hljs-number">18</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAll</span><span class="hljs-params">()</span>&#123;<br>        bookService.list();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetPage</span><span class="hljs-params">()</span>&#123;<br>        IPage&lt;Book&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;Book&gt;(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>);<br>        bookService.page(page);<br>        System.out.println(page.getCurrent());<br>        System.out.println(page.getSize());<br>        System.out.println(page.getTotal());<br>        System.out.println(page.getPages());<br>        System.out.println(page.getRecords());<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>Serviceæ¥å£åç§°å®šä¹‰æˆä¸šåŠ¡åç§°ï¼Œå¹¶ä¸Daoæ¥å£åç§°è¿›è¡ŒåŒºåˆ†</li><li>åˆ¶ä½œæµ‹è¯•ç±»æµ‹è¯•ServiceåŠŸèƒ½æ˜¯å¦æœ‰æ•ˆ</li></ol><h5 id="ä¸šåŠ¡å±‚å¿«é€Ÿå¼€å‘"><a href="#ä¸šåŠ¡å±‚å¿«é€Ÿå¼€å‘" class="headerlink" title="ä¸šåŠ¡å±‚å¿«é€Ÿå¼€å‘"></a>ä¸šåŠ¡å±‚å¿«é€Ÿå¼€å‘</h5><p>â€‹    å…¶å®MPæŠ€æœ¯ä¸ä»…æä¾›äº†æ•°æ®å±‚å¿«é€Ÿå¼€å‘æ–¹æ¡ˆï¼Œä¸šåŠ¡å±‚MPä¹Ÿç»™äº†ä¸€ä¸ªé€šç”¨æ¥å£ï¼Œä¸ªäººè§‚ç‚¹ä¸æ¨èä½¿ç”¨ï¼Œå‡‘åˆèƒ½ç”¨å§ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå°è£…+ç»§æ‰¿çš„æ€æƒ³ï¼Œä»£ç ç»™å‡ºï¼Œå®é™…å¼€å‘æ…ç”¨</p><p>â€‹    ä¸šåŠ¡å±‚æ¥å£å¿«é€Ÿå¼€å‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IBookService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;Book&gt; &#123;<br>    <span class="hljs-comment">//æ·»åŠ éé€šç”¨æ“ä½œAPIæ¥å£</span><br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    ä¸šåŠ¡å±‚æ¥å£å®ç°ç±»å¿«é€Ÿå¼€å‘ï¼Œå…³æ³¨ç»§æ‰¿çš„ç±»éœ€è¦ä¼ å…¥ä¸¤ä¸ªæ³›å‹ï¼Œä¸€ä¸ªæ˜¯æ•°æ®å±‚æ¥å£ï¼Œå¦ä¸€ä¸ªæ˜¯å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;BookDao, Book&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBookService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br><span class="hljs-comment">//æ·»åŠ éé€šç”¨æ“ä½œAPI</span><br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    å¦‚æœæ„Ÿè§‰MPæä¾›çš„åŠŸèƒ½ä¸è¶³ä»¥æ”¯æ’‘ä½ çš„ä½¿ç”¨éœ€è¦ï¼Œå…¶å®æ˜¯ä¸€å®šä¸èƒ½æ”¯æ’‘çš„ï¼Œå› ä¸ºéœ€æ±‚ä¸å¯èƒ½æ˜¯é€šç”¨çš„ï¼Œåœ¨åŸå§‹æ¥å£åŸºç¡€ä¸Šæ¥ç€å®šä¹‰æ–°çš„APIæ¥å£å°±è¡Œäº†ï¼Œæ­¤å¤„ä¸å†è¯´å¤ªå¤šäº†ï¼Œå°±æ˜¯è‡ªå®šä¹‰è‡ªå·±çš„æ“ä½œäº†ï¼Œä½†æ˜¯ä¸è¦å’Œå·²æœ‰çš„APIæ¥å£åå†²çªå³å¯ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨é€šç”¨æ¥å£ï¼ˆISerivce<T>ï¼‰å¿«é€Ÿå¼€å‘Service</li><li>ä½¿ç”¨é€šç”¨å®ç°ç±»ï¼ˆServiceImpl&lt;M,T&gt;ï¼‰å¿«é€Ÿå¼€å‘ServiceImpl</li><li>å¯ä»¥åœ¨é€šç”¨æ¥å£åŸºç¡€ä¸ŠåšåŠŸèƒ½é‡è½½æˆ–åŠŸèƒ½è¿½åŠ </li><li>æ³¨æ„é‡è½½æ—¶ä¸è¦è¦†ç›–åŸå§‹æ“ä½œï¼Œé¿å…åŸå§‹æä¾›çš„åŠŸèƒ½ä¸¢å¤±</li></ol><h4 id="6-è¡¨ç°å±‚å¼€å‘"><a href="#6-è¡¨ç°å±‚å¼€å‘" class="headerlink" title="6.è¡¨ç°å±‚å¼€å‘"></a>6.è¡¨ç°å±‚å¼€å‘</h4><p>â€‹    ç»ˆäºåšåˆ°è¡¨ç°å±‚äº†ï¼Œåšäº†è¿™ä¹ˆå¤šéƒ½æ˜¯åŸºç¡€å·¥ä½œã€‚å…¶å®ä½ ç°åœ¨å›å¤´çœ‹çœ‹ï¼Œå“ªé‡Œè¿˜æœ‰ä»€ä¹ˆSpringBootçš„å½±å­ï¼Ÿå‰é¢1,2æ­¥å°±æå®Œäº†ã€‚ç»§ç»­å®Œæˆè¡¨ç°å±‚åˆ¶ä½œå§ï¼Œå’±ä»¬è¡¨ç°å±‚çš„å¼€å‘ä½¿ç”¨åŸºäºRestfulçš„è¡¨ç°å±‚æ¥å£å¼€å‘ï¼ŒåŠŸèƒ½æµ‹è¯•é€šè¿‡Postmanå·¥å…·è¿›è¡Œ</p><p>â€‹    è¡¨ç°å±‚æ¥å£å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/books&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookController2</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> IBookService bookService;<br><br>    <span class="hljs-meta">@GetMapping</span><br>    <span class="hljs-keyword">public</span> List&lt;Book&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> bookService.list();<br>    &#125;<br><br>    <span class="hljs-meta">@PostMapping</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">save</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Book book)</span>&#123;<br>        <span class="hljs-keyword">return</span> bookService.save(book);<br>    &#125;<br><br>    <span class="hljs-meta">@PutMapping</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Book book)</span>&#123;<br>        <span class="hljs-keyword">return</span> bookService.modify(book);<br>    &#125;<br><br>    <span class="hljs-meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">delete</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Integer id)</span>&#123;<br>        <span class="hljs-keyword">return</span> bookService.delete(id);<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(&quot;&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Book <span class="hljs-title function_">getById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Integer id)</span>&#123;<br>        <span class="hljs-keyword">return</span> bookService.getById(id);<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(&quot;&#123;currentPage&#125;/&#123;pageSize&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> currentPage,<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> pageSize)</span>&#123;<br>        <span class="hljs-keyword">return</span> bookService.getPage(currentPage,pageSize, <span class="hljs-literal">null</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    åœ¨å®ç”¨Postmanæµ‹è¯•æ—¶å…³æ³¨æäº¤ç±»å‹ï¼Œå¯¹åº”ä¸Šå³å¯ï¼Œä¸ç„¶å°±ä¼šæŠ¥405çš„é”™è¯¯ç äº†</p><p><strong>æ™®é€šGETè¯·æ±‚</strong></p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-LKxw1Kdz-1644501801365)(img\image-20211129152237371.png)]</p><p><strong>PUTè¯·æ±‚ä¼ é€’jsonæ•°æ®ï¼Œåå°å®ç”¨@RequestBodyæ¥æ”¶æ•°æ®</strong></p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-CfE6uCcP-1644501801365)(img\image-20211129152300177.png)]</p><p><strong>GETè¯·æ±‚ä¼ é€’è·¯å¾„å˜é‡ï¼Œåå°å®ç”¨@PathVariableæ¥æ”¶æ•°æ®</strong></p><p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-z24utnSu-1644501801365)(C:\Users\itcast\AppData\Roaming\Typora\typora-user-images\image-20211129152320073.png)]</p><p><strong>æ€»ç»“</strong></p><ol><li>åŸºäºRestfulåˆ¶ä½œè¡¨ç°å±‚æ¥å£<ul><li>æ–°å¢ï¼šPOST</li><li>åˆ é™¤ï¼šDELETE</li><li>ä¿®æ”¹ï¼šPUT</li><li>æŸ¥è¯¢ï¼šGET</li></ul></li><li>æ¥æ”¶å‚æ•°<ul><li>å®ä½“æ•°æ®ï¼š@RequestBody</li><li>è·¯å¾„å˜é‡ï¼š@PathVariable</li></ul></li></ol><h4 id="7-è¡¨ç°å±‚æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†"><a href="#7-è¡¨ç°å±‚æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†" class="headerlink" title="7.è¡¨ç°å±‚æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†"></a>7.è¡¨ç°å±‚æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†</h4><p>â€‹    ç›®å‰æˆ‘ä»¬é€šè¿‡Postmanæµ‹è¯•åä¸šåŠ¡å±‚æ¥å£åŠŸèƒ½æ—¶é€šçš„ï¼Œä½†æ˜¯è¿™æ ·çš„ç»“æœç»™åˆ°å‰ç«¯å¼€å‘è€…ä¼šå‡ºç°ä¸€ä¸ªå°é—®é¢˜ã€‚ä¸åŒçš„æ“ä½œç»“æœæ‰€å±•ç¤ºçš„æ•°æ®æ ¼å¼å·®å¼‚åŒ–ä¸¥é‡</p><p>â€‹    <strong>å¢åˆ æ”¹æ“ä½œç»“æœ</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">true<br></code></pre></td></tr></table></figure><p>â€‹    <strong>æŸ¥è¯¢å•ä¸ªæ•°æ®æ“ä½œç»“æœ</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;è®¡ç®—æœºç†è®º&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Springå®æˆ˜ ç¬¬5ç‰ˆ&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Springå…¥é—¨ç»å…¸æ•™ç¨‹&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>â€‹    <strong>æŸ¥è¯¢å…¨éƒ¨æ•°æ®æ“ä½œç»“æœ</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;è®¡ç®—æœºç†è®º&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Springå®æˆ˜ ç¬¬5ç‰ˆ&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Springå…¥é—¨ç»å…¸æ•™ç¨‹&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;è®¡ç®—æœºç†è®º&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Spring 5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®æˆ˜&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;åå¹´æ²‰æ·€ä¹‹ä½œ&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><p>â€‹    æ¯ç§ä¸åŒæ“ä½œè¿”å›çš„æ•°æ®æ ¼å¼éƒ½ä¸ä¸€æ ·ï¼Œè€Œä¸”è¿˜ä¸çŸ¥é“ä»¥åè¿˜ä¼šæœ‰ä»€ä¹ˆæ ¼å¼ï¼Œè¿™æ ·çš„ç»“æœè®©å‰ç«¯äººå‘˜çœ‹äº†æ˜¯å¾ˆå®¹æ˜“è®©äººå´©æºƒçš„ï¼Œå¿…é¡»å°†æ‰€æœ‰æ“ä½œçš„æ“ä½œç»“æœæ•°æ®æ ¼å¼ç»Ÿä¸€èµ·æ¥ï¼Œéœ€è¦è®¾è®¡è¡¨ç°å±‚è¿”å›ç»“æœçš„æ¨¡å‹ç±»ï¼Œç”¨äºåç«¯ä¸å‰ç«¯è¿›è¡Œæ•°æ®æ ¼å¼ç»Ÿä¸€ï¼Œä¹Ÿç§°ä¸º<strong>å‰åç«¯æ•°æ®åè®®</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">R</span> &#123;<br>    <span class="hljs-keyword">private</span> Boolean flag;<br>    <span class="hljs-keyword">private</span> Object data;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    å…¶ä¸­flagç”¨äºæ ‡è¯†æ“ä½œæ˜¯å¦æˆåŠŸï¼Œdataç”¨äºå°è£…æ“ä½œæ•°æ®ï¼Œç°åœ¨çš„æ•°æ®æ ¼å¼å°±å˜äº†</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JSON"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;flag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;è®¡ç®—æœºç†è®º&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Springå®æˆ˜ ç¬¬5ç‰ˆ&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Springå…¥é—¨ç»å…¸æ•™ç¨‹&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>â€‹    è¡¨ç°å±‚å¼€å‘æ ¼å¼ä¹Ÿéœ€è¦è½¬æ¢ä¸€ä¸‹</p><p><img src="https://img-blog.csdnimg.cn/6068d287c3844fffa20d3b7fdffcf460.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><img src="https://img-blog.csdnimg.cn/7cc173d92d6c47128f57f759b63248c2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><img src="https://img-blog.csdnimg.cn/6aa3f5e7649a48edb11f8e60121bf529.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹    ç»“æœè¿™ä¹ˆä¸€æŠ˜è…¾ï¼Œå…¨æ ¼å¼ç»Ÿä¸€ï¼Œç°åœ¨åç«¯å‘é€ç»™å‰ç«¯çš„æ•°æ®æ ¼å¼å°±ç»Ÿä¸€äº†ï¼Œå…å»äº†ä¸å°‘å‰ç«¯è§£ææ•°æ®çš„éº»çƒ¦ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li><p>è®¾è®¡ç»Ÿä¸€çš„è¿”å›å€¼ç»“æœç±»å‹ä¾¿äºå‰ç«¯å¼€å‘è¯»å–æ•°æ®</p></li><li><p>è¿”å›å€¼ç»“æœç±»å‹å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªè¡Œè®¾å®šï¼Œæ²¡æœ‰å›ºå®šæ ¼å¼</p></li><li><p>è¿”å›å€¼ç»“æœæ¨¡å‹ç±»ç”¨äºåç«¯ä¸å‰ç«¯è¿›è¡Œæ•°æ®æ ¼å¼ç»Ÿä¸€ï¼Œä¹Ÿç§°ä¸ºå‰åç«¯æ•°æ®åè®®</p></li></ol><h4 id="8-å‰åç«¯è”é€šæ€§æµ‹è¯•"><a href="#8-å‰åç«¯è”é€šæ€§æµ‹è¯•" class="headerlink" title="8.å‰åç«¯è”é€šæ€§æµ‹è¯•"></a>8.å‰åç«¯è”é€šæ€§æµ‹è¯•</h4><p>â€‹    åç«¯çš„è¡¨ç°å±‚æ¥å£å¼€å‘å®Œæ¯•ï¼Œå°±å¯ä»¥è¿›è¡Œå‰ç«¯çš„å¼€å‘äº†ã€‚</p><p>â€‹    å°†å‰ç«¯äººå‘˜å¼€å‘çš„é¡µé¢ä¿å­˜åˆ°lresourcesç›®å½•ä¸‹çš„staticç›®å½•ä¸­ï¼Œå»ºè®®æ‰§è¡Œmavençš„cleanç”Ÿå‘½å‘¨æœŸï¼Œé¿å…ç¼“å­˜çš„é—®é¢˜å‡ºç°ã€‚</p><p>â€‹    [å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-OUveCVDG-1644501801366)(img\image-20211129153831990.png)]</p><p>â€‹    åœ¨è¿›è¡Œå…·ä½“çš„åŠŸèƒ½å¼€å‘ä¹‹å‰ï¼Œå…ˆåšè”é€šæ€§çš„æµ‹è¯•ï¼Œé€šè¿‡é¡µé¢å‘é€å¼‚æ­¥æäº¤ï¼ˆaxiosï¼‰ï¼Œè¿™ä¸€æ­¥è°ƒè¯•é€šè¿‡åå†è¿›è¡Œè¿›ä¸€æ­¥çš„åŠŸèƒ½å¼€å‘</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//åˆ—è¡¨</span><br><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) &#123;<br>axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/books&quot;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>&#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">data</span>);<br>&#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹    åªè¦åå°ä»£ç èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå‰ç«¯èƒ½å¤Ÿåœ¨æ—¥å¿—ä¸­æ¥æ”¶åˆ°æ•°æ®ï¼Œå°±è¯æ˜å‰åç«¯æ˜¯é€šçš„ï¼Œä¹Ÿå°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥çš„åŠŸèƒ½å¼€å‘äº†</p><p><strong>æ€»ç»“</strong></p><ol><li>å•ä½“é¡¹ç›®ä¸­é¡µé¢æ”¾ç½®åœ¨resources&#x2F;staticç›®å½•ä¸‹</li><li>createdé’©å­å‡½æ•°ç”¨äºåˆå§‹åŒ–é¡µé¢æ—¶å‘èµ·è°ƒç”¨</li><li>é¡µé¢ä½¿ç”¨axioså‘é€å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®åç¡®è®¤å‰åç«¯æ˜¯å¦è”é€š</li></ol><h4 id="9-é¡µé¢åŸºç¡€åŠŸèƒ½å¼€å‘"><a href="#9-é¡µé¢åŸºç¡€åŠŸèƒ½å¼€å‘" class="headerlink" title="9.é¡µé¢åŸºç¡€åŠŸèƒ½å¼€å‘"></a>9.é¡µé¢åŸºç¡€åŠŸèƒ½å¼€å‘</h4><h5 id="F-1-åˆ—è¡¨åŠŸèƒ½ï¼ˆéåˆ†é¡µç‰ˆï¼‰"><a href="#F-1-åˆ—è¡¨åŠŸèƒ½ï¼ˆéåˆ†é¡µç‰ˆï¼‰" class="headerlink" title="F-1.åˆ—è¡¨åŠŸèƒ½ï¼ˆéåˆ†é¡µç‰ˆï¼‰"></a>F-1.åˆ—è¡¨åŠŸèƒ½ï¼ˆéåˆ†é¡µç‰ˆï¼‰</h5><p>â€‹        åˆ—è¡¨åŠŸèƒ½ä¸»è¦æ“ä½œå°±æ˜¯åŠ è½½å®Œæ•°æ®ï¼Œå°†æ•°æ®å±•ç¤ºåˆ°é¡µé¢ä¸Šï¼Œæ­¤å¤„è¦åˆ©ç”¨VUEçš„æ•°æ®æ¨¡å‹ç»‘å®šï¼Œå‘é€è¯·æ±‚å¾—åˆ°æ•°æ®ï¼Œç„¶åé¡µé¢ä¸Šè¯»å–æŒ‡å®šæ•°æ®å³å¯</p><p>â€‹        <strong>é¡µé¢æ•°æ®æ¨¡å‹å®šä¹‰</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">data:&#123;<br>dataList: [],//å½“å‰é¡µè¦å±•ç¤ºçš„åˆ—è¡¨æ•°æ®<br>...<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//åˆ—è¡¨</span><br><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) &#123;<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/books&quot;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>;<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        è¿™æ ·åœ¨é¡µé¢åŠ è½½æ—¶å°±å¯ä»¥è·å–åˆ°æ•°æ®ï¼Œå¹¶ä¸”ç”±VUEå°†æ•°æ®å±•ç¤ºåˆ°é¡µé¢ä¸Šäº†</p><p>æ€»ç»“ï¼š</p><ol><li>å°†æŸ¥è¯¢æ•°æ®è¿”å›åˆ°é¡µé¢ï¼Œåˆ©ç”¨å‰ç«¯æ•°æ®ç»‘å®šè¿›è¡Œæ•°æ®å±•ç¤º</li></ol><h5 id="F-2-æ·»åŠ åŠŸèƒ½"><a href="#F-2-æ·»åŠ åŠŸèƒ½" class="headerlink" title="F-2.æ·»åŠ åŠŸèƒ½"></a>F-2.æ·»åŠ åŠŸèƒ½</h5><p>â€‹        æ·»åŠ åŠŸèƒ½ç”¨äºæ”¶é›†æ•°æ®çš„è¡¨å•æ˜¯é€šè¿‡ä¸€ä¸ªå¼¹çª—å±•ç¤ºçš„ï¼Œå› æ­¤åœ¨æ·»åŠ æ“ä½œå‰é¦–å…ˆè¦è¿›è¡Œå¼¹çª—çš„å±•ç¤ºï¼Œæ·»åŠ åéšè—å¼¹çª—å³å¯ã€‚å› ä¸ºè¿™ä¸ªå¼¹çª—ä¸€ç›´å­˜åœ¨ï¼Œå› æ­¤å½“é¡µé¢åŠ è½½æ—¶é¦–å…ˆè®¾ç½®è¿™ä¸ªå¼¹çª—ä¸ºä¸å¯æ˜¾ç¤ºçŠ¶æ€ï¼Œéœ€è¦å±•ç¤ºï¼Œåˆ‡æ¢çŠ¶æ€å³å¯</p><p>â€‹        <strong>é»˜è®¤çŠ¶æ€</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">data:&#123;<br>dialogFormVisible: false,//æ·»åŠ è¡¨å•æ˜¯å¦å¯è§<br>...<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        <strong>åˆ‡æ¢ä¸ºæ˜¾ç¤ºçŠ¶æ€</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//å¼¹å‡ºæ·»åŠ çª—å£</span><br><span class="hljs-title function_">handleCreate</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">true</span>;<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        ç”±äºæ¯æ¬¡æ·»åŠ æ•°æ®éƒ½æ˜¯ä½¿ç”¨åŒä¸€ä¸ªå¼¹çª—å½•å…¥æ•°æ®ï¼Œæ‰€ä»¥æ¯æ¬¡æ“ä½œçš„ç—•è¿¹å°†åœ¨ä¸‹ä¸€æ¬¡æ“ä½œæ—¶å±•ç¤ºå‡ºæ¥ï¼Œéœ€è¦åœ¨æ¯æ¬¡æ“ä½œä¹‹å‰æ¸…ç†æ‰ä¸Šæ¬¡æ“ä½œçš„ç—•è¿¹</p><p>â€‹        <strong>å®šä¹‰æ¸…ç†æ•°æ®æ“ä½œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//é‡ç½®è¡¨å•</span><br><span class="hljs-title function_">resetForm</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span> = &#123;&#125;;<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        <strong>åˆ‡æ¢å¼¹çª—çŠ¶æ€æ—¶æ¸…ç†æ•°æ®</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//å¼¹å‡ºæ·»åŠ çª—å£</span><br><span class="hljs-title function_">handleCreate</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">true</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resetForm</span>();<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        è‡³æ­¤å‡†å¤‡å·¥ä½œå®Œæˆï¼Œä¸‹é¢å°±è¦è°ƒç”¨åå°å®Œæˆæ·»åŠ æ“ä½œäº†</p><p>â€‹        <strong>æ·»åŠ æ“ä½œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ·»åŠ </span><br>handleAdd () &#123;<br>    <span class="hljs-comment">//å‘é€å¼‚æ­¥è¯·æ±‚</span><br>    axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/books&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>&#123;<br>        <span class="hljs-comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚ï¼Œæ˜¾ç¤ºæ•°æ®</span><br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">false</span>;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;æ·»åŠ å¤±è´¥&quot;</span>);<br>        &#125;<br>    &#125;).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><ol><li>å°†è¦ä¿å­˜çš„æ•°æ®ä¼ é€’åˆ°åå°ï¼Œé€šè¿‡postè¯·æ±‚çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’jsonæ•°æ®åˆ°åå°</li><li>æ ¹æ®è¿”å›çš„æ“ä½œç»“æœå†³å®šä¸‹ä¸€æ­¥æ“ä½œ<ul><li>å¦‚ä½•æ˜¯trueå°±å…³é—­æ·»åŠ çª—å£ï¼Œæ˜¾ç¤ºæ·»åŠ æˆåŠŸçš„æ¶ˆæ¯</li><li>å¦‚æœæ˜¯falseä¿ç•™æ·»åŠ çª—å£ï¼Œæ˜¾ç¤ºæ·»åŠ å¤±è´¥çš„æ¶ˆæ¯</li></ul></li><li>æ— è®ºæ·»åŠ æ˜¯å¦æˆåŠŸï¼Œé¡µé¢å‡è¿›è¡Œåˆ·æ–°ï¼ŒåŠ¨æ€åŠ è½½æ•°æ®ï¼ˆå¯¹getAllæ“ä½œå‘èµ·è°ƒç”¨ï¼‰</li></ol><p>â€‹        <strong>å–æ¶ˆæ·»åŠ æ“ä½œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//å–æ¶ˆ</span><br><span class="hljs-title function_">cancel</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">false</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&quot;æ“ä½œå–æ¶ˆ&quot;</span>);<br>&#125;,<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>è¯·æ±‚æ–¹å¼ä½¿ç”¨POSTè°ƒç”¨åå°å¯¹åº”æ“ä½œ</li><li>æ·»åŠ æ“ä½œç»“æŸååŠ¨æ€åˆ·æ–°é¡µé¢åŠ è½½æ•°æ®</li><li>æ ¹æ®æ“ä½œç»“æœä¸åŒï¼Œæ˜¾ç¤ºå¯¹åº”çš„æç¤ºä¿¡æ¯</li><li>å¼¹å‡ºæ·»åŠ Divæ—¶æ¸…é™¤è¡¨å•æ•°æ®</li></ol><h5 id="F-3-åˆ é™¤åŠŸèƒ½"><a href="#F-3-åˆ é™¤åŠŸèƒ½" class="headerlink" title="F-3.åˆ é™¤åŠŸèƒ½"></a>F-3.åˆ é™¤åŠŸèƒ½</h5><p>â€‹        æ¨¡ä»¿æ·»åŠ æ“ä½œåˆ¶ä½œåˆ é™¤åŠŸèƒ½ï¼Œå·®åˆ«ä¹‹å¤„åœ¨äºåˆ é™¤æ“ä½œä»…ä¼ é€’ä¸€ä¸ªå¾…åˆ é™¤çš„æ•°æ®idåˆ°åå°å³å¯</p><p>â€‹        <strong>åˆ é™¤æ“ä½œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">// åˆ é™¤</span><br><span class="hljs-title function_">handleDelete</span>(<span class="hljs-params">row</span>) &#123;<br>    axios.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;/books/&quot;</span>+row.<span class="hljs-property">id</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>&#123;<br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;åˆ é™¤å¤±è´¥&quot;</span>);<br>        &#125;<br>    &#125;).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        <strong>åˆ é™¤æ“ä½œæç¤ºä¿¡æ¯</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">// åˆ é™¤</span><br><span class="hljs-title function_">handleDelete</span>(<span class="hljs-params">row</span>) &#123;<br>    <span class="hljs-comment">//1.å¼¹å‡ºæç¤ºæ¡†</span><br>    <span class="hljs-variable language_">this</span>.$confirm(<span class="hljs-string">&quot;æ­¤æ“ä½œæ°¸ä¹…åˆ é™¤å½“å‰æ•°æ®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ&quot;</span>,<span class="hljs-string">&quot;æç¤º&quot;</span>,&#123;<br>        <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;info&#x27;</span><br>    &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-comment">//2.åšåˆ é™¤ä¸šåŠ¡</span><br>        axios.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&quot;/books/&quot;</span>+row.<span class="hljs-property">id</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>&#123;<br>       <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;åˆ é™¤å¤±è´¥&quot;</span>);<br>        &#125;<br>        &#125;).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>        &#125;);<br>    &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-comment">//3.å–æ¶ˆåˆ é™¤</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&quot;å–æ¶ˆåˆ é™¤æ“ä½œ&quot;</span>);<br>    &#125;);<br>&#125;ï¼Œ<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>è¯·æ±‚æ–¹å¼ä½¿ç”¨Deleteè°ƒç”¨åå°å¯¹åº”æ“ä½œ</li><li>åˆ é™¤æ“ä½œéœ€è¦ä¼ é€’å½“å‰è¡Œæ•°æ®å¯¹åº”çš„idå€¼åˆ°åå°</li><li>åˆ é™¤æ“ä½œç»“æŸååŠ¨æ€åˆ·æ–°é¡µé¢åŠ è½½æ•°æ®</li><li>æ ¹æ®æ“ä½œç»“æœä¸åŒï¼Œæ˜¾ç¤ºå¯¹åº”çš„æç¤ºä¿¡æ¯</li><li>åˆ é™¤æ“ä½œå‰å¼¹å‡ºæç¤ºæ¡†é¿å…è¯¯æ“ä½œ</li></ol><h5 id="F-4-ä¿®æ”¹åŠŸèƒ½"><a href="#F-4-ä¿®æ”¹åŠŸèƒ½" class="headerlink" title="F-4.ä¿®æ”¹åŠŸèƒ½"></a>F-4.ä¿®æ”¹åŠŸèƒ½</h5><p>â€‹        ä¿®æ”¹åŠŸèƒ½å¯ä»¥è¯´æ˜¯åˆ—è¡¨åŠŸèƒ½ã€åˆ é™¤åŠŸèƒ½ä¸æ·»åŠ åŠŸèƒ½çš„åˆä½“ã€‚å‡ ä¸ªç›¸ä¼¼ç‚¹å¦‚ä¸‹ï¼š</p><ol><li><p>é¡µé¢ä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªå¼¹çª—ç”¨æ¥åŠ è½½ä¿®æ”¹çš„æ•°æ®ï¼Œè¿™ä¸€ç‚¹ä¸æ·»åŠ ç›¸åŒï¼Œéƒ½æ˜¯è¦å¼¹çª—</p></li><li><p>å¼¹å‡ºçª—å£ä¸­è¦åŠ è½½å¾…ä¿®æ”¹çš„æ•°æ®ï¼Œè€Œæ•°æ®éœ€è¦é€šè¿‡æŸ¥è¯¢å¾—åˆ°ï¼Œè¿™ä¸€ç‚¹ä¸æŸ¥è¯¢å…¨éƒ¨ç›¸åŒï¼Œéƒ½æ˜¯è¦æŸ¥æ•°æ®</p></li><li><p>æŸ¥è¯¢æ“ä½œéœ€è¦å°†è¦ä¿®æ”¹çš„æ•°æ®idå‘é€åˆ°åå°ï¼Œè¿™ä¸€ç‚¹ä¸åˆ é™¤ç›¸åŒï¼Œéƒ½æ˜¯ä¼ é€’idåˆ°åå°</p></li><li><p>æŸ¥è¯¢å¾—åˆ°æ•°æ®åéœ€è¦å±•ç¤ºåˆ°å¼¹çª—ä¸­ï¼Œè¿™ä¸€ç‚¹ä¸æŸ¥è¯¢å…¨éƒ¨ç›¸åŒï¼Œéƒ½æ˜¯è¦é€šè¿‡æ•°æ®æ¨¡å‹ç»‘å®šå±•ç¤ºæ•°æ®</p></li><li><p>ä¿®æ”¹æ•°æ®æ—¶éœ€è¦å°†è¢«ä¿®æ”¹çš„æ•°æ®ä¼ é€’åˆ°åå°ï¼Œè¿™ä¸€ç‚¹ä¸æ·»åŠ ç›¸åŒï¼Œéƒ½æ˜¯è¦ä¼ é€’æ•°æ®</p><p>æ‰€ä»¥æ•´ä½“ä¸Šæ¥çœ‹ï¼Œä¿®æ”¹åŠŸèƒ½å°±æ˜¯å‰é¢å‡ ä¸ªåŠŸèƒ½çš„å¤§åˆä½“</p><p><strong>æŸ¥è¯¢å¹¶å±•ç¤ºæ•°æ®</strong></p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//å¼¹å‡ºç¼–è¾‘çª—å£</span><br><span class="hljs-title function_">handleUpdate</span>(<span class="hljs-params">row</span>) &#123;<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/books/&quot;</span>+row.<span class="hljs-property">id</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>&#123;<br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>)&#123;<br>            <span class="hljs-comment">//å±•ç¤ºå¼¹å±‚ï¼ŒåŠ è½½æ•°æ®</span><br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible4Edit</span> = <span class="hljs-literal">true</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;æ•°æ®åŒæ­¥å¤±è´¥ï¼Œè‡ªåŠ¨åˆ·æ–°&quot;</span>);<br>        &#125;<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        <strong>ä¿®æ”¹æ“ä½œ</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//ä¿®æ”¹</span><br><span class="hljs-title function_">handleEdit</span>(<span class="hljs-params"></span>) &#123;<br>    axios.<span class="hljs-title function_">put</span>(<span class="hljs-string">&quot;/books&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>&#123;<br>        <span class="hljs-comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚å¹¶åˆ·æ–°é¡µé¢</span><br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible4Edit</span> = <span class="hljs-literal">false</span>;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•&quot;</span>);<br>        &#125;<br>    &#125;).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>åŠ è½½è¦ä¿®æ”¹æ•°æ®é€šè¿‡ä¼ é€’å½“å‰è¡Œæ•°æ®å¯¹åº”çš„idå€¼åˆ°åå°æŸ¥è¯¢æ•°æ®ï¼ˆåŒåˆ é™¤ä¸æŸ¥è¯¢å…¨éƒ¨ï¼‰</li><li>åˆ©ç”¨å‰ç«¯åŒå‘æ•°æ®ç»‘å®šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®è¿›è¡Œå›æ˜¾ï¼ˆåŒæŸ¥è¯¢å…¨éƒ¨ï¼‰</li><li>è¯·æ±‚æ–¹å¼ä½¿ç”¨PUTè°ƒç”¨åå°å¯¹åº”æ“ä½œï¼ˆåŒæ–°å¢ä¼ é€’æ•°æ®ï¼‰</li><li>ä¿®æ”¹æ“ä½œç»“æŸååŠ¨æ€åˆ·æ–°é¡µé¢åŠ è½½æ•°æ®ï¼ˆåŒæ–°å¢ï¼‰</li><li>æ ¹æ®æ“ä½œç»“æœä¸åŒï¼Œæ˜¾ç¤ºå¯¹åº”çš„æç¤ºä¿¡æ¯ï¼ˆåŒæ–°å¢ï¼‰</li></ol><p>â€‹    </p><h4 id="10-ä¸šåŠ¡æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†"><a href="#10-ä¸šåŠ¡æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†" class="headerlink" title="10.ä¸šåŠ¡æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†"></a>10.ä¸šåŠ¡æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†</h4><p>â€‹    ç›®å‰çš„åŠŸèƒ½åˆ¶ä½œåŸºæœ¬ä¸Šè¾¾æˆäº†æ­£å¸¸ä½¿ç”¨çš„æƒ…å†µï¼Œä»€ä¹ˆå«æ­£å¸¸ä½¿ç”¨å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¿™ä¸ªç¨‹åºä¸å‡ºBUGï¼Œå¦‚æœæˆ‘ä»¬æä¸€ä¸ªBUGå‡ºæ¥ï¼Œä½ ä¼šå‘ç°ç¨‹åºé©¬ä¸Šå´©æºƒæ‰ã€‚æ¯”å¦‚åå°æ‰‹å·¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œçœ‹çœ‹å‰ç«¯æ¥æ”¶åˆ°çš„æ•°æ®ä»€ä¹ˆæ ·å­</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2021-09-15T03:27:31.038+00:00&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;error&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Internal Server Error&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/books&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>â€‹    é¢å¯¹è¿™ç§æƒ…å†µï¼Œå‰ç«¯çš„åŒå­¦åˆä¸ä¼šäº†ï¼Œè¿™åˆæ˜¯ä»€ä¹ˆæ ¼å¼ï¼Ÿæ€ä¹ˆå’Œä¹‹å‰çš„æ ¼å¼ä¸ä¸€æ ·ï¼Ÿ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;flag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;è®¡ç®—æœºç†è®º&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Springå®æˆ˜ ç¬¬5ç‰ˆ&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Springå…¥é—¨ç»å…¸æ•™ç¨‹&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>â€‹    çœ‹æ¥ä¸ä»…è¦å¯¹æ­£ç¡®çš„æ“ä½œæ•°æ®æ ¼å¼åšå¤„ç†ï¼Œè¿˜è¦å¯¹é”™è¯¯çš„æ“ä½œæ•°æ®æ ¼å¼åšåŒæ ·çš„æ ¼å¼å¤„ç†</p><p>â€‹    é¦–å…ˆåœ¨å½“å‰çš„æ•°æ®ç»“æœä¸­æ·»åŠ æ¶ˆæ¯å­—æ®µï¼Œç”¨æ¥å…¼å®¹åå°å‡ºç°çš„æ“ä½œæ¶ˆæ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">R</span>&#123;<br>    <span class="hljs-keyword">private</span> Boolean flag;<br>    <span class="hljs-keyword">private</span> Object data;<br>    <span class="hljs-keyword">private</span> String msg;<span class="hljs-comment">//ç”¨äºå°è£…æ¶ˆæ¯</span><br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    åå°ä»£ç ä¹Ÿè¦æ ¹æ®æƒ…å†µåšå¤„ç†ï¼Œå½“å‰æ˜¯æ¨¡æ‹Ÿçš„é”™è¯¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@PostMapping</span><br><span class="hljs-keyword">public</span> R <span class="hljs-title function_">save</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Book book)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">Boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> bookService.insert(book);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(flag , flag ? <span class="hljs-string">&quot;æ·»åŠ æˆåŠŸ^_^&quot;</span> : <span class="hljs-string">&quot;æ·»åŠ å¤±è´¥-_-!&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    ç„¶ååœ¨è¡¨ç°å±‚åšç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ï¼Œä½¿ç”¨SpringMVCæä¾›çš„å¼‚å¸¸å¤„ç†å™¨åšç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@RestControllerAdvice</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProjectExceptionAdvice</span> &#123;<br>    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span><br>    <span class="hljs-keyword">public</span> R <span class="hljs-title function_">doOtherException</span><span class="hljs-params">(Exception ex)</span>&#123;<br>        <span class="hljs-comment">//è®°å½•æ—¥å¿—</span><br>        <span class="hljs-comment">//å‘é€æ¶ˆæ¯ç»™è¿ç»´</span><br>        <span class="hljs-comment">//å‘é€é‚®ä»¶ç»™å¼€å‘äººå‘˜,exå¯¹è±¡å‘é€ç»™å¼€å‘äººå‘˜</span><br>        ex.printStackTrace();<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(<span class="hljs-literal">false</span>,<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;ç³»ç»Ÿé”™è¯¯ï¼Œè¯·ç¨åå†è¯•ï¼&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹    é¡µé¢ä¸Šå¾—åˆ°æ•°æ®åï¼Œå…ˆåˆ¤å®šæ˜¯å¦æœ‰åå°ä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯ï¼Œæ ‡å¿—å°±æ˜¯å½“å‰æ“ä½œæ˜¯å¦æˆåŠŸï¼Œå¦‚æœè¿”å›æ“ä½œç»“æœfalseï¼Œå°±è¯»å–åå°ä¼ é€’çš„æ¶ˆæ¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//æ·»åŠ </span><br>handleAdd () &#123;<br><span class="hljs-comment">//å‘é€ajaxè¯·æ±‚</span><br>    axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/books&quot;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>&#123;<br>        <span class="hljs-comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚ï¼Œæ˜¾ç¤ºæ•°æ®</span><br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">false</span>;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">&quot;æ·»åŠ æˆåŠŸ&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">msg</span>);<span class="hljs-comment">//æ¶ˆæ¯æ¥è‡ªäºåå°ä¼ é€’è¿‡æ¥ï¼Œè€Œéå›ºå®šå†…å®¹</span><br>        &#125;<br>    &#125;).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨æ³¨è§£@RestControllerAdviceå®šä¹‰SpringMVCå¼‚å¸¸å¤„ç†å™¨ç”¨æ¥å¤„ç†å¼‚å¸¸çš„</li><li>å¼‚å¸¸å¤„ç†å™¨å¿…é¡»è¢«æ‰«æåŠ è½½ï¼Œå¦åˆ™æ— æ³•ç”Ÿæ•ˆ</li><li>è¡¨ç°å±‚è¿”å›ç»“æœçš„æ¨¡å‹ç±»ä¸­æ·»åŠ æ¶ˆæ¯å±æ€§ç”¨æ¥ä¼ é€’æ¶ˆæ¯åˆ°é¡µé¢</li></ol><p>â€‹    </p><h4 id="11-é¡µé¢åŠŸèƒ½å¼€å‘"><a href="#11-é¡µé¢åŠŸèƒ½å¼€å‘" class="headerlink" title="11.é¡µé¢åŠŸèƒ½å¼€å‘"></a>11.é¡µé¢åŠŸèƒ½å¼€å‘</h4><h5 id="F-5-åˆ†é¡µåŠŸèƒ½"><a href="#F-5-åˆ†é¡µåŠŸèƒ½" class="headerlink" title="F-5.åˆ†é¡µåŠŸèƒ½"></a>F-5.åˆ†é¡µåŠŸèƒ½</h5><p>â€‹        åˆ†é¡µåŠŸèƒ½çš„åˆ¶ä½œç”¨äºæ›¿æ¢å‰é¢çš„æŸ¥è¯¢å…¨éƒ¨ï¼Œå…¶ä¸­è¦ä½¿ç”¨åˆ°elementUIæä¾›çš„åˆ†é¡µç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;!--åˆ†é¡µç»„ä»¶--&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pagination-container&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">el-pagination</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pagiantion&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">@<span class="hljs-attr">current-change</span>=<span class="hljs-string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">:current-page</span>=<span class="hljs-string">&quot;pagination.currentPage&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">:page-size</span>=<span class="hljs-string">&quot;pagination.pageSize&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">layout</span>=<span class="hljs-string">&quot;total, prev, pager, next, jumper&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">:total</span>=<span class="hljs-string">&quot;pagination.total&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">el-pagination</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>â€‹        ä¸ºäº†é…åˆåˆ†é¡µç»„ä»¶ï¼Œå°è£…åˆ†é¡µå¯¹åº”çš„æ•°æ®æ¨¡å‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">data:&#123;<br>pagination: &#123;<br>//åˆ†é¡µç›¸å…³æ¨¡å‹æ•°æ®<br>currentPage: 1,//å½“å‰é¡µç <br>pageSize:10,//æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°<br>total:0,//æ€»è®°å½•æ•°<br>&#125;<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        ä¿®æ”¹æŸ¥è¯¢å…¨éƒ¨åŠŸèƒ½ä¸ºåˆ†é¡µæŸ¥è¯¢ï¼Œé€šè¿‡è·¯å¾„å˜é‡ä¼ é€’é¡µç ä¿¡æ¯å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) &#123;<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/books/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">&quot;/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        åå°æä¾›å¯¹åº”çš„åˆ†é¡µåŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@GetMapping(&quot;/&#123;currentPage&#125;/&#123;pageSize&#125;&quot;)</span><br><span class="hljs-keyword">public</span> R <span class="hljs-title function_">getAll</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Integer currentPage,<span class="hljs-meta">@PathVariable</span> Integer pageSize)</span>&#123;<br>    IPage&lt;Book&gt; pageBook = bookService.getPage(currentPage, pageSize);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(<span class="hljs-literal">null</span> != pageBook ,pageBook);<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹        é¡µé¢æ ¹æ®åˆ†é¡µæ“ä½œç»“æœè¯»å–å¯¹åº”æ•°æ®ï¼Œå¹¶è¿›è¡Œæ•°æ®æ¨¡å‹ç»‘å®š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) &#123;<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/books/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">&quot;/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">total</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">total</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">current</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pagesize</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">size</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">records</span>;<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p>â€‹        å¯¹åˆ‡æ¢é¡µç æ“ä½œè®¾ç½®è°ƒç”¨å½“å‰åˆ†é¡µæ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//åˆ‡æ¢é¡µç </span><br><span class="hljs-title function_">handleCurrentChange</span>(<span class="hljs-params">currentPage</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span> = currentPage;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>&#125;,<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨elåˆ†é¡µç»„ä»¶</li><li>å®šä¹‰åˆ†é¡µç»„ä»¶ç»‘å®šçš„æ•°æ®æ¨¡å‹</li><li>å¼‚æ­¥è°ƒç”¨è·å–åˆ†é¡µæ•°æ®</li><li>åˆ†é¡µæ•°æ®é¡µé¢å›æ˜¾</li></ol><h5 id="F-6-åˆ é™¤åŠŸèƒ½ç»´æŠ¤"><a href="#F-6-åˆ é™¤åŠŸèƒ½ç»´æŠ¤" class="headerlink" title="F-6.åˆ é™¤åŠŸèƒ½ç»´æŠ¤"></a>F-6.åˆ é™¤åŠŸèƒ½ç»´æŠ¤</h5><p>â€‹        ç”±äºä½¿ç”¨äº†åˆ†é¡µåŠŸèƒ½ï¼Œå½“æœ€åä¸€é¡µåªæœ‰ä¸€æ¡æ•°æ®æ—¶ï¼Œåˆ é™¤æ“ä½œå°±ä¼šå‡ºç°BUGï¼Œæœ€åä¸€é¡µæ— æ•°æ®ä½†æ˜¯ç‹¬ç«‹å±•ç¤ºï¼Œå¯¹åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½è¿›è¡Œåå°åŠŸèƒ½ç»´æŠ¤ï¼Œå¦‚æœå½“å‰é¡µç å€¼å¤§äºæœ€å¤§é¡µç å€¼ï¼Œé‡æ–°æ‰§è¡ŒæŸ¥è¯¢ã€‚å…¶å®è¿™ä¸ªé—®é¢˜è§£å†³æ–¹æ¡ˆå¾ˆå¤šï¼Œè¿™é‡Œç»™å‡ºæ¯”è¾ƒç®€å•çš„ä¸€ç§å¤„ç†æ–¹æ¡ˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@GetMapping(&quot;&#123;currentPage&#125;/&#123;pageSize&#125;&quot;)</span><br><span class="hljs-keyword">public</span> R <span class="hljs-title function_">getPage</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> currentPage,<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> pageSize)</span>&#123;<br>    IPage&lt;Book&gt; page = bookService.getPage(currentPage, pageSize);<br>    <span class="hljs-comment">//å¦‚æœå½“å‰é¡µç å€¼å¤§äºäº†æ€»é¡µç å€¼ï¼Œé‚£ä¹ˆé‡æ–°æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œä½¿ç”¨æœ€å¤§é¡µç å€¼ä½œä¸ºå½“å‰é¡µç å€¼</span><br>    <span class="hljs-keyword">if</span>( currentPage &gt; page.getPages())&#123;<br>        page = bookService.getPage((<span class="hljs-type">int</span>)page.getPages(), pageSize);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(<span class="hljs-literal">true</span>, page);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="F-7-æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½"><a href="#F-7-æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½" class="headerlink" title="F-7.æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½"></a>F-7.æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½</h5><p>â€‹        æœ€åä¸€ä¸ªåŠŸèƒ½æ¥åšæ¡ä»¶æŸ¥è¯¢ï¼Œå…¶å®æ¡ä»¶æŸ¥è¯¢å¯ä»¥ç†è§£ä¸ºåˆ†é¡µæŸ¥è¯¢çš„æ—¶å€™é™¤äº†æºå¸¦åˆ†é¡µæ•°æ®å†å¤šå¸¦å‡ ä¸ªæ•°æ®çš„æŸ¥è¯¢ã€‚è¿™äº›å¤šå¸¦çš„æ•°æ®å°±æ˜¯æŸ¥è¯¢æ¡ä»¶ã€‚æ¯”è¾ƒä¸€ä¸‹ä¸å¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢ä¸å¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢å·®åˆ«ä¹‹å¤„ï¼Œè¿™ä¸ªåŠŸèƒ½å°±å¥½åšäº†</p><ul><li><p>é¡µé¢å°è£…çš„æ•°æ®ï¼šå¸¦ä¸å¸¦æ¡ä»¶å½±å“çš„ä»…ä»…æ˜¯ä¸€æ¬¡æ€§ä¼ é€’åˆ°åå°çš„æ•°æ®æ€»é‡ï¼Œç”±ä¼ é€’2ä¸ªåˆ†é¡µç›¸å…³çš„æ•°æ®è½¬æ¢æˆ2ä¸ªåˆ†é¡µæ•°æ®åŠ è‹¥å¹²ä¸ªæ¡ä»¶</p></li><li><p>åå°æŸ¥è¯¢åŠŸèƒ½ï¼šæŸ¥è¯¢æ—¶ç”±ä¸å¸¦æ¡ä»¶ï¼Œè½¬æ¢æˆå¸¦æ¡ä»¶ï¼Œåæ­£ä¸å¸¦æ¡ä»¶çš„æ—¶å€™æŸ¥è¯¢æ¡ä»¶å¯¹è±¡ä½¿ç”¨çš„æ˜¯nullï¼Œç°åœ¨æ¢æˆå…·ä½“æ¡ä»¶ï¼Œå·®åˆ«ä¸å¤§</p></li><li><p>æŸ¥è¯¢ç»“æœï¼šä¸ç®¡å¸¦ä¸å¸¦æ¡ä»¶ï¼Œå‡ºæ¥çš„æ•°æ®åªæ˜¯æœ‰æ•°é‡ä¸Šçš„å·®åˆ«ï¼Œå…¶ä»–éƒ½å·®åˆ«ï¼Œè¿™ä¸ªå¯ä»¥å¿½ç•¥</p><p>ç»è¿‡ä¸Šè¿°åˆ†æï¼Œçœ‹æ¥éœ€è¦åœ¨é¡µé¢å‘é€è¯·æ±‚çš„æ ¼å¼æ–¹é¢åšä¸€å®šçš„ä¿®æ”¹ï¼Œåå°çš„è°ƒç”¨æ•°æ®å±‚æ“ä½œæ—¶å‘é€ä¿®æ”¹ï¼Œå…¶ä»–æ²¡æœ‰åŒºåˆ«</p><p>é¡µé¢å‘é€è¯·æ±‚æ—¶ï¼Œä¸¤ä¸ªåˆ†é¡µæ•°æ®ä»ç„¶ä½¿ç”¨è·¯å¾„å˜é‡ï¼Œå…¶ä»–æ¡ä»¶é‡‡ç”¨åŠ¨æ€æ‹¼è£…urlå‚æ•°çš„å½¢å¼ä¼ é€’</p><p><strong>é¡µé¢å°è£…æŸ¥è¯¢æ¡ä»¶å­—æ®µ</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">pagination: &#123;<br>//åˆ†é¡µç›¸å…³æ¨¡å‹æ•°æ®<br>currentPage: 1,//å½“å‰é¡µç <br>pageSize:10,//æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°<br>total:0,//æ€»è®°å½•æ•°<br>name: &quot;&quot;,<br>type: &quot;&quot;,<br>description: &quot;&quot;<br>&#125;,<br></code></pre></td></tr></table></figure><p>é¡µé¢æ·»åŠ æŸ¥è¯¢æ¡ä»¶å­—æ®µå¯¹åº”çš„æ•°æ®æ¨¡å‹ç»‘å®šåç§°</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;filter-container&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;å›¾ä¹¦ç±»åˆ«&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;pagination.type&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;filter-item&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;å›¾ä¹¦åç§°&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;pagination.name&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;filter-item&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;å›¾ä¹¦æè¿°&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;pagination.description&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;filter-item&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getAll()&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dalfBut&quot;</span>&gt;</span>æŸ¥è¯¢<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;butT&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCreate()&quot;</span>&gt;</span>æ–°å»º<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å°†æŸ¥è¯¢æ¡ä»¶ç»„ç»‡æˆurlå‚æ•°ï¼Œæ·»åŠ åˆ°è¯·æ±‚urlåœ°å€ä¸­ï¼Œè¿™é‡Œå¯ä»¥å€ŸåŠ©å…¶ä»–ç±»åº“å¿«é€Ÿå¼€å‘ï¼Œå½“å‰ä½¿ç”¨æ‰‹å·¥å½¢å¼æ‹¼æ¥ï¼Œé™ä½å­¦ä¹ è¦æ±‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.è·å–æŸ¥è¯¢æ¡ä»¶,æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶</span><br>    param = <span class="hljs-string">&quot;?name=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">name</span>;<br>    param += <span class="hljs-string">&quot;&amp;type=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">type</span>;<br>    param += <span class="hljs-string">&quot;&amp;description=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">description</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;-----------------&quot;</span>+ param);<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/books/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">&quot;/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>+param).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">records</span>;<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p>åå°ä»£ç ä¸­å®šä¹‰å®ä½“ç±»å°æŸ¥è¯¢æ¡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@GetMapping(&quot;&#123;currentPage&#125;/&#123;pageSize&#125;&quot;)</span><br><span class="hljs-keyword">public</span> R <span class="hljs-title function_">getAll</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> currentPage,<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> pageSize,Book book)</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;å‚æ•°=====&gt;&quot;</span>+book);<br>    IPage&lt;Book&gt; pageBook = bookService.getPage(currentPage,pageSize);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(<span class="hljs-literal">null</span> != pageBook ,pageBook);<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹åº”ä¸šåŠ¡å±‚æ¥å£ä¸å®ç°ç±»è¿›è¡Œä¿®æ­£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IBookService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;Book&gt; &#123;<br>    IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(Integer currentPage,Integer pageSize,Book queryBook)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;BookDao,Book&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBookService</span> &#123;<br>    <span class="hljs-keyword">public</span> IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(Integer currentPage,Integer pageSize,Book queryBook)</span>&#123;<br>        <span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(currentPage,pageSize);<br>        LambdaQueryWrapper&lt;Book&gt; lqw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;Book&gt;();<br>        lqw.like(Strings.isNotEmpty(queryBook.getName()),Book::getName,queryBook.getName());<br>        lqw.like(Strings.isNotEmpty(queryBook.getType()),Book::getType,queryBook.getType());<br>        lqw.like(Strings.isNotEmpty(queryBook.getDescription()),Book::getDescription,queryBook.getDescription());<br>        <span class="hljs-keyword">return</span> bookDao.selectPage(page,lqw);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é¡µé¢å›æ˜¾æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.è·å–æŸ¥è¯¢æ¡ä»¶,æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶</span><br>    param = <span class="hljs-string">&quot;?name=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">name</span>;<br>    param += <span class="hljs-string">&quot;&amp;type=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">type</span>;<br>    param += <span class="hljs-string">&quot;&amp;description=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">description</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;-----------------&quot;</span>+ param);<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/books/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">&quot;/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>+param).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">total</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">total</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">current</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pagesize</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">size</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">records</span>;<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure></li></ul><p><strong>æ€»ç»“</strong></p><ol><li>å®šä¹‰æŸ¥è¯¢æ¡ä»¶æ•°æ®æ¨¡å‹ï¼ˆå½“å‰å°è£…åˆ°åˆ†é¡µæ•°æ®æ¨¡å‹ä¸­ï¼‰</li><li>å¼‚æ­¥è°ƒç”¨åˆ†é¡µåŠŸèƒ½å¹¶é€šè¿‡è¯·æ±‚å‚æ•°ä¼ é€’æ•°æ®åˆ°åå°</li></ol><h2 id="åŸºç¡€ç¯‡å®Œç»“"><a href="#åŸºç¡€ç¯‡å®Œç»“" class="headerlink" title="åŸºç¡€ç¯‡å®Œç»“"></a>åŸºç¡€ç¯‡å®Œç»“</h2><p>â€‹    åŸºç¡€ç¯‡åˆ°è¿™é‡Œå°±å…¨éƒ¨ç»“æŸäº†ï¼Œåœ¨åŸºç¡€ç¯‡ä¸­å¸¦ç€å¤§å®¶å­¦ä¹ äº†å¦‚æœåˆ›å»ºä¸€ä¸ªSpringBootå·¥ç¨‹ï¼Œç„¶åå­¦ä¹ äº†SpringBootçš„åŸºç¡€é…ç½®è¯­æ³•æ ¼å¼ï¼Œæ¥ä¸‹æ¥å¯¹å¸¸è§çš„å¸‚é¢ä¸Šçš„å®ç”¨æŠ€æœ¯åšäº†æ•´åˆï¼Œæœ€åé€šè¿‡ä¸€ä¸ªå°çš„æ¡ˆä¾‹å¯¹å‰é¢å­¦ä¹ çš„å†…å®¹åšäº†ä¸€ä¸ªç»¼åˆåº”ç”¨ã€‚æ•´ä½“æ¥è¯´å°±æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„å…¥é—¨ï¼Œå…³äºSpringBootçš„å®é™…å¼€å‘å…¶å®æ¥è§¦çš„è¿˜æ˜¯å¾ˆå°‘çš„ï¼Œæˆ‘ä»¬åˆ°å®ç”¨ç¯‡å’ŒåŸç†ç¯‡ä¸­ç»§ç»­å§ï¼Œå„ä½å°ä¼™ä¼´ï¼ŒåŠ æ²¹å­¦ä¹ ï¼Œå†è§ã€‚</p><p>æ€æ‹¼è£…urlå‚æ•°çš„å½¢å¼ä¼ é€’</p><p>  <strong>é¡µé¢å°è£…æŸ¥è¯¢æ¡ä»¶å­—æ®µ</strong></p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">pagination: &#123;<br>//åˆ†é¡µç›¸å…³æ¨¡å‹æ•°æ®<br>currentPage: 1,//å½“å‰é¡µç <br>pageSize:10,//æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°<br>total:0,//æ€»è®°å½•æ•°<br>name: &quot;&quot;,<br>type: &quot;&quot;,<br>description: &quot;&quot;<br>&#125;,<br></code></pre></td></tr></table></figure><p>  é¡µé¢æ·»åŠ æŸ¥è¯¢æ¡ä»¶å­—æ®µå¯¹åº”çš„æ•°æ®æ¨¡å‹ç»‘å®šåç§°</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;filter-container&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;å›¾ä¹¦ç±»åˆ«&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;pagination.type&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;filter-item&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;å›¾ä¹¦åç§°&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;pagination.name&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;filter-item&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;å›¾ä¹¦æè¿°&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;pagination.description&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;filter-item&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getAll()&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dalfBut&quot;</span>&gt;</span>æŸ¥è¯¢<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;butT&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleCreate()&quot;</span>&gt;</span>æ–°å»º<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>  å°†æŸ¥è¯¢æ¡ä»¶ç»„ç»‡æˆurlå‚æ•°ï¼Œæ·»åŠ åˆ°è¯·æ±‚urlåœ°å€ä¸­ï¼Œè¿™é‡Œå¯ä»¥å€ŸåŠ©å…¶ä»–ç±»åº“å¿«é€Ÿå¼€å‘ï¼Œå½“å‰ä½¿ç”¨æ‰‹å·¥å½¢å¼æ‹¼æ¥ï¼Œé™ä½å­¦ä¹ è¦æ±‚</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.è·å–æŸ¥è¯¢æ¡ä»¶,æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶</span><br>    param = <span class="hljs-string">&quot;?name=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">name</span>;<br>    param += <span class="hljs-string">&quot;&amp;type=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">type</span>;<br>    param += <span class="hljs-string">&quot;&amp;description=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">description</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;-----------------&quot;</span>+ param);<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/books/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">&quot;/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>+param).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">records</span>;<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p>  åå°ä»£ç ä¸­å®šä¹‰å®ä½“ç±»å°æŸ¥è¯¢æ¡ä»¶</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@GetMapping(&quot;&#123;currentPage&#125;/&#123;pageSize&#125;&quot;)</span><br><span class="hljs-keyword">public</span> R <span class="hljs-title function_">getAll</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> currentPage,<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> pageSize,Book book)</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;å‚æ•°=====&gt;&quot;</span>+book);<br>    IPage&lt;Book&gt; pageBook = bookService.getPage(currentPage,pageSize);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(<span class="hljs-literal">null</span> != pageBook ,pageBook);<br>&#125;<br></code></pre></td></tr></table></figure><p>  å¯¹åº”ä¸šåŠ¡å±‚æ¥å£ä¸å®ç°ç±»è¿›è¡Œä¿®æ­£</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IBookService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;Book&gt; &#123;<br>    IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(Integer currentPage,Integer pageSize,Book queryBook)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;BookDao,Book&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBookService</span> &#123;<br>    <span class="hljs-keyword">public</span> IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(Integer currentPage,Integer pageSize,Book queryBook)</span>&#123;<br>        <span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(currentPage,pageSize);<br>        LambdaQueryWrapper&lt;Book&gt; lqw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;Book&gt;();<br>        lqw.like(Strings.isNotEmpty(queryBook.getName()),Book::getName,queryBook.getName());<br>        lqw.like(Strings.isNotEmpty(queryBook.getType()),Book::getType,queryBook.getType());<br>        lqw.like(Strings.isNotEmpty(queryBook.getDescription()),Book::getDescription,queryBook.getDescription());<br>        <span class="hljs-keyword">return</span> bookDao.selectPage(page,lqw);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>  é¡µé¢å›æ˜¾æ•°æ®</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.è·å–æŸ¥è¯¢æ¡ä»¶,æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶</span><br>    param = <span class="hljs-string">&quot;?name=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">name</span>;<br>    param += <span class="hljs-string">&quot;&amp;type=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">type</span>;<br>    param += <span class="hljs-string">&quot;&amp;description=&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">description</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;-----------------&quot;</span>+ param);<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/books/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">&quot;/&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>+param).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">total</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">total</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">current</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pagesize</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">size</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">records</span>;<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>å®šä¹‰æŸ¥è¯¢æ¡ä»¶æ•°æ®æ¨¡å‹ï¼ˆå½“å‰å°è£…åˆ°åˆ†é¡µæ•°æ®æ¨¡å‹ä¸­ï¼‰</li><li>å¼‚æ­¥è°ƒç”¨åˆ†é¡µåŠŸèƒ½å¹¶é€šè¿‡è¯·æ±‚å‚æ•°ä¼ é€’æ•°æ®åˆ°åå°</li></ol><h2 id="åŸºç¡€ç¯‡å®Œç»“-1"><a href="#åŸºç¡€ç¯‡å®Œç»“-1" class="headerlink" title="åŸºç¡€ç¯‡å®Œç»“"></a>åŸºç¡€ç¯‡å®Œç»“</h2><p>â€‹    åŸºç¡€ç¯‡åˆ°è¿™é‡Œå°±å…¨éƒ¨ç»“æŸäº†ï¼Œåœ¨åŸºç¡€ç¯‡ä¸­å¸¦ç€å¤§å®¶å­¦ä¹ äº†å¦‚æœåˆ›å»ºä¸€ä¸ªSpringBootå·¥ç¨‹ï¼Œç„¶åå­¦ä¹ äº†SpringBootçš„åŸºç¡€é…ç½®è¯­æ³•æ ¼å¼ï¼Œæ¥ä¸‹æ¥å¯¹å¸¸è§çš„å¸‚é¢ä¸Šçš„å®ç”¨æŠ€æœ¯åšäº†æ•´åˆï¼Œæœ€åé€šè¿‡ä¸€ä¸ªå°çš„æ¡ˆä¾‹å¯¹å‰é¢å­¦ä¹ çš„å†…å®¹åšäº†ä¸€ä¸ªç»¼åˆåº”ç”¨ã€‚æ•´ä½“æ¥è¯´å°±æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„å…¥é—¨ï¼Œå…³äºSpringBootçš„å®é™…å¼€å‘å…¶å®æ¥è§¦çš„è¿˜æ˜¯å¾ˆå°‘çš„ï¼Œæˆ‘ä»¬åˆ°å®ç”¨ç¯‡å’ŒåŸç†ç¯‡ä¸­ç»§ç»­å§ï¼Œå„ä½å°ä¼™ä¼´ï¼ŒåŠ æ²¹å­¦ä¹ ï¼Œå†è§ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ElementUI+Vue</title>
    <link href="/Hexo/2022/02/05/Vue%E5%92%8CElement/"/>
    <url>/Hexo/2022/02/05/Vue%E5%92%8CElement/</url>
    
    <content type="html"><![CDATA[<h1 id="1ã€Vue-å¿«é€Ÿå…¥é—¨"><a href="#1ã€Vue-å¿«é€Ÿå…¥é—¨" class="headerlink" title="1ã€Vue å¿«é€Ÿå…¥é—¨"></a>1ã€Vue å¿«é€Ÿå…¥é—¨</h1><h2 id="1-1ã€Vueçš„ä»‹ç»"><a href="#1-1ã€Vueçš„ä»‹ç»" class="headerlink" title="1.1ã€Vueçš„ä»‹ç»"></a>1.1ã€Vueçš„ä»‹ç»</h2><ul><li>Vueæ˜¯ä¸€å¥—æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼å‰ç«¯æ¡†æ¶ã€‚</li><li>åªå…³æ³¨è§†å›¾å±‚ï¼Œå¹¶ä¸”éå¸¸å®¹æ˜“å­¦ä¹ ï¼Œè¿˜å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸å…¶å®ƒåº“æˆ–å·²æœ‰é¡¹ç›®æ•´åˆã€‚</li><li>é€šè¿‡å°½å¯èƒ½ç®€å•çš„APIæ¥å®ç°å“åº”æ•°æ®çš„ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚</li><li>ç‰¹ç‚¹<br>æ˜“ç”¨ï¼šåœ¨æœ‰HTMLCSSJavaScriptçš„åŸºç¡€ä¸Šï¼Œå¿«é€Ÿä¸Šæ‰‹ã€‚<br>çµæ´»ï¼šç®€å•å°å·§çš„æ ¸å¿ƒï¼Œæ¸è¿›å¼æŠ€æœ¯æ ˆï¼Œè¶³ä»¥åº”ä»˜ä»»ä½•è§„æ¨¡çš„åº”ç”¨ã€‚<br>æ€§èƒ½ï¼š20kbmin+gzipè¿è¡Œå¤§å°ã€è¶…å¿«è™šæ‹ŸDOMã€æœ€çœå¿ƒçš„ä¼˜åŒ–ã€‚</li></ul><h2 id="1-2ã€Vueçš„å¿«é€Ÿå…¥é—¨"><a href="#1-2ã€Vueçš„å¿«é€Ÿå…¥é—¨" class="headerlink" title="1.2ã€Vueçš„å¿«é€Ÿå…¥é—¨"></a>1.2ã€Vueçš„å¿«é€Ÿå…¥é—¨</h2><ul><li><strong>å¼€å‘æ­¥éª¤</strong></li></ul><ol><li>ä¸‹è½½å’Œå¼•å…¥vue.jsæ–‡ä»¶ã€‚</li><li>ç¼–å†™å…¥é—¨ç¨‹åºã€‚<br>è§†å›¾ï¼šè´Ÿè´£é¡µé¢æ¸²æŸ“ï¼Œä¸»è¦ç”±HTML+CSSæ„æˆã€‚<br>è„šæœ¬ï¼šè´Ÿè´£ä¸šåŠ¡æ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ä»¥åŠæ•°æ®çš„å¤„ç†é€»è¾‘ã€‚</li></ol><ul><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¿«é€Ÿå…¥é—¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- è§†å›¾ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        &#123;&#123;msg&#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// è„šæœ¬</span></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">msg</span>:<span class="hljs-string">&quot;Hello Vue&quot;</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="1-3ã€Vueå¿«é€Ÿå…¥é—¨è¯¦è§£"><a href="#1-3ã€Vueå¿«é€Ÿå…¥é—¨è¯¦è§£" class="headerlink" title="1.3ã€Vueå¿«é€Ÿå…¥é—¨è¯¦è§£"></a>1.3ã€Vueå¿«é€Ÿå…¥é—¨è¯¦è§£</h2><ul><li><p>Vue æ ¸å¿ƒå¯¹è±¡ï¼šæ¯ä¸€ä¸ª Vue ç¨‹åºéƒ½æ˜¯ä»ä¸€ä¸ª Vue æ ¸å¿ƒå¯¹è±¡å¼€å§‹çš„ã€‚</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">let vm = new Vue(&#123;<br> é€‰é¡¹åˆ—è¡¨;<br>&#125;);<br></code></pre></td></tr></table></figure></li><li><p>é€‰é¡¹åˆ—è¡¨<br>elé€‰é¡¹ï¼šç”¨äºæ¥æ”¶è·å–åˆ°é¡µé¢ä¸­çš„å…ƒç´ ã€‚(æ ¹æ®å¸¸ç”¨é€‰æ‹©å™¨è·å–)ã€‚<br>dataé€‰é¡¹ï¼šç”¨äºä¿å­˜å½“å‰Vueå¯¹è±¡ä¸­çš„æ•°æ®ã€‚åœ¨è§†å›¾ä¸­å£°æ˜çš„å˜é‡éœ€è¦åœ¨æ­¤å¤„èµ‹å€¼ã€‚<br>methodsé€‰é¡¹ï¼šç”¨äºå®šä¹‰æ–¹æ³•ã€‚æ–¹æ³•å¯ä»¥ç›´æ¥é€šè¿‡å¯¹è±¡åè°ƒç”¨ï¼Œthisä»£è¡¨å½“å‰Vueå¯¹è±¡ã€‚</p></li><li><p>æ•°æ®ç»‘å®š<br>åœ¨è§†å›¾éƒ¨åˆ†è·å–è„šæœ¬éƒ¨åˆ†çš„æ•°æ®ã€‚</p></li></ul><h2 id="1-4ã€Vueå¿«é€Ÿå…¥é—¨çš„å‡çº§"><a href="#1-4ã€Vueå¿«é€Ÿå…¥é—¨çš„å‡çº§" class="headerlink" title="1.4ã€Vueå¿«é€Ÿå…¥é—¨çš„å‡çº§"></a>1.4ã€Vueå¿«é€Ÿå…¥é—¨çš„å‡çº§</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¿«é€Ÿå…¥é—¨å‡çº§<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- è§†å›¾ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å§“åï¼š&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç­çº§ï¼š&#123;&#123;classRoom&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;hi()&quot;</span>&gt;</span>æ‰“æ‹›å‘¼<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;update()&quot;</span>&gt;</span>ä¿®æ”¹ç­çº§<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// è„šæœ¬</span></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">classRoom</span>:<span class="hljs-string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">study</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">&quot;æ­£åœ¨&quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">classRoom</span> + <span class="hljs-string">&quot;å¥½å¥½å­¦ä¹ !&quot;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//å®šä¹‰æ‰“æ‹›å‘¼æ–¹æ³•</span></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">hi</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        vm.<span class="hljs-title function_">study</span>();</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//å®šä¹‰ä¿®æ”¹ç­çº§</span></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">update</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        vm.<span class="hljs-property">classRoom</span> = <span class="hljs-string">&quot;ä¼ æ™ºæ’­å®¢&quot;</span>;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="1-5ã€Vueå°ç»“"><a href="#1-5ã€Vueå°ç»“" class="headerlink" title="1.5ã€Vueå°ç»“"></a>1.5ã€Vueå°ç»“</h2><ul><li>Vueæ˜¯ä¸€å¥—æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼å‰ç«¯æ¡†æ¶ã€‚</li><li>Vueçš„ç¨‹åºåŒ…å«è§†å›¾å’Œè„šæœ¬ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ã€‚</li><li>è„šæœ¬éƒ¨åˆ†<ul><li>Vueæ ¸å¿ƒå¯¹è±¡ã€‚</li><li>é€‰é¡¹åˆ—è¡¨<ul><li>elï¼šæ¥æ”¶è·å–çš„å…ƒç´ ã€‚</li><li>dataï¼šä¿å­˜æ•°æ®ã€‚</li><li>methodsï¼šå®šä¹‰æ–¹æ³•ã€‚</li></ul></li></ul></li><li>è§†å›¾éƒ¨åˆ†<ul><li>æ•°æ®ç»‘å®šï¼š</li></ul></li></ul><h1 id="2ã€Vue-å¸¸ç”¨æŒ‡ä»¤"><a href="#2ã€Vue-å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="2ã€Vue å¸¸ç”¨æŒ‡ä»¤"></a>2ã€Vue å¸¸ç”¨æŒ‡ä»¤</h1><h2 id="2-1ã€æŒ‡ä»¤ä»‹ç»"><a href="#2-1ã€æŒ‡ä»¤ä»‹ç»" class="headerlink" title="2.1ã€æŒ‡ä»¤ä»‹ç»"></a>2.1ã€æŒ‡ä»¤ä»‹ç»</h2><ul><li><p>æŒ‡ä»¤ï¼šæ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Šå±æ€§ï¼Œä¸åŒæŒ‡ä»¤å…·æœ‰ä¸åŒå«ä¹‰ã€‚ä¾‹å¦‚ v-htmlï¼Œv-ifï¼Œv-forã€‚</p></li><li><p>ä½¿ç”¨æŒ‡ä»¤æ—¶ï¼Œé€šå¸¸ç¼–å†™åœ¨æ ‡ç­¾çš„å±æ€§ä¸Šï¼Œå€¼å¯ä»¥ä½¿ç”¨ JS çš„è¡¨è¾¾å¼ã€‚</p></li><li><p>å¸¸ç”¨æŒ‡ä»¤</p><p><img src="/Hexo/../img/202202152002841.png"></p></li></ul><h2 id="2-2ã€æ–‡æœ¬æ’å€¼"><a href="#2-2ã€æ–‡æœ¬æ’å€¼" class="headerlink" title="2.2ã€æ–‡æœ¬æ’å€¼"></a>2.2ã€æ–‡æœ¬æ’å€¼</h2><ul><li><p>v-htmlï¼šæŠŠæ–‡æœ¬è§£æä¸º HTML ä»£ç ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ–‡æœ¬æ’å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">msg</span>:<span class="hljs-string">&quot;&lt;b&gt;Hello Vue&lt;/b&gt;&quot;</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="2-3ã€ç»‘å®šå±æ€§"><a href="#2-3ã€ç»‘å®šå±æ€§" class="headerlink" title="2.3ã€ç»‘å®šå±æ€§"></a>2.3ã€ç»‘å®šå±æ€§</h2><ul><li><p>v-bindï¼šä¸º HTML æ ‡ç­¾ç»‘å®šå±æ€§å€¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç»‘å®šå±æ€§<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.my</span>&#123;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-bind:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>ç™¾åº¦ä¸€ä¸‹<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;url&quot;</span>&gt;</span>ç™¾åº¦ä¸€ä¸‹<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;cls&quot;</span>&gt;</span>æˆ‘æ˜¯div<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;https://www.baidu.com&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">cls</span>:<span class="hljs-string">&quot;my&quot;</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="2-4ã€æ¡ä»¶æ¸²æŸ“"><a href="#2-4ã€æ¡ä»¶æ¸²æŸ“" class="headerlink" title="2.4ã€æ¡ä»¶æ¸²æŸ“"></a>2.4ã€æ¡ä»¶æ¸²æŸ“</h2><ul><li><p>v-ifï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“æŸå…ƒç´ ï¼Œåˆ¤å®šä¸ºçœŸæ—¶æ¸²æŸ“,å¦åˆ™ä¸æ¸²æŸ“ã€‚</p></li><li><p>v-elseï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“ã€‚</p></li><li><p>v-else-ifï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“ã€‚</p></li><li><p>v-showï¼šæ ¹æ®æ¡ä»¶å±•ç¤ºæŸå…ƒç´ ï¼ŒåŒºåˆ«åœ¨äºåˆ‡æ¢çš„æ˜¯displayå±æ€§çš„å€¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ¡ä»¶æ¸²æŸ“<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- åˆ¤æ–­numçš„å€¼ï¼Œå¯¹3å–ä½™  ä½™æ•°ä¸º0æ˜¾ç¤ºdiv1  ä½™æ•°ä¸º1æ˜¾ç¤ºdiv2  ä½™æ•°ä¸º2æ˜¾ç¤ºdiv3 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;num % 3 == 0&quot;</span>&gt;</span>div1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;num % 3 == 1&quot;</span>&gt;</span>div2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>=<span class="hljs-string">&quot;num % 3 == 2&quot;</span>&gt;</span>div3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;flag&quot;</span>&gt;</span>div4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">num</span>:<span class="hljs-number">1</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">flag</span>:<span class="hljs-literal">false</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="2-5ã€åˆ—è¡¨æ¸²æŸ“"><a href="#2-5ã€åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="2.5ã€åˆ—è¡¨æ¸²æŸ“"></a>2.5ã€åˆ—è¡¨æ¸²æŸ“</h2><ul><li><p>v-forï¼šåˆ—è¡¨æ¸²æŸ“ï¼Œéå†å®¹å™¨çš„å…ƒç´ æˆ–è€…å¯¹è±¡çš„å±æ€§ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åˆ—è¡¨æ¸²æŸ“<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;name in names&quot;</span>&gt;</span><br>                &#123;&#123;name&#125;&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;value in student&quot;</span>&gt;</span><br>                &#123;&#123;value&#125;&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">names</span>:[<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-string">&quot;æå››&quot;</span>,<span class="hljs-string">&quot;ç‹äº”&quot;</span>],</span><br><span class="language-javascript">            <span class="hljs-attr">student</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">age</span>:<span class="hljs-number">23</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="2-6ã€äº‹ä»¶ç»‘å®š"><a href="#2-6ã€äº‹ä»¶ç»‘å®š" class="headerlink" title="2.6ã€äº‹ä»¶ç»‘å®š"></a>2.6ã€äº‹ä»¶ç»‘å®š</h2><ul><li><p>v-onï¼šä¸º HTML æ ‡ç­¾ç»‘å®šäº‹ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>äº‹ä»¶ç»‘å®š<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;change()&quot;</span>&gt;</span>æ”¹å˜divçš„å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:dblclick</span>=<span class="hljs-string">&quot;change()&quot;</span>&gt;</span>æ”¹å˜divçš„å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;change()&quot;</span>&gt;</span>æ”¹å˜divçš„å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;é»‘é©¬ç¨‹åºå‘˜&quot;</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">change</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;ä¼ æ™ºæ’­å®¢&quot;</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="2-7ã€è¡¨å•ç»‘å®š"><a href="#2-7ã€è¡¨å•ç»‘å®š" class="headerlink" title="2.7ã€è¡¨å•ç»‘å®š"></a>2.7ã€è¡¨å•ç»‘å®š</h2><ul><li><p><strong>è¡¨å•ç»‘å®š</strong><br>v-modelï¼šåœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚</p></li><li><p><strong>åŒå‘æ•°æ®ç»‘å®š</strong><br>æ›´æ–°dataæ•°æ®ï¼Œé¡µé¢ä¸­çš„æ•°æ®ä¹Ÿä¼šæ›´æ–°ã€‚<br>æ›´æ–°é¡µé¢æ•°æ®ï¼Œdataæ•°æ®ä¹Ÿä¼šæ›´æ–°ã€‚</p></li><li><p><strong>MVVMæ¨¡å‹(ModelViewViewModel)ï¼šæ˜¯MVCæ¨¡å¼çš„æ”¹è¿›ç‰ˆ</strong><br>åœ¨å‰ç«¯é¡µé¢ä¸­ï¼ŒJSå¯¹è±¡è¡¨ç¤ºModelï¼Œé¡µé¢è¡¨ç¤ºViewï¼Œä¸¤è€…åšåˆ°äº†æœ€å¤§é™åº¦çš„åˆ†ç¦»ã€‚<br>å°†Modelå’ŒViewå…³è”èµ·æ¥çš„å°±æ˜¯ViewModelï¼Œå®ƒæ˜¯æ¡¥æ¢ã€‚<br>ViewModelè´Ÿè´£æŠŠModelçš„æ•°æ®åŒæ­¥åˆ°Viewæ˜¾ç¤ºå‡ºæ¥ï¼Œè¿˜è´Ÿè´£æŠŠViewä¿®æ”¹çš„æ•°æ®åŒæ­¥å›Modelã€‚</p><p><img src="/Hexo/../img/20220215202319.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è¡¨å•ç»‘å®š<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">&quot;off&quot;</span>&gt;</span><br>            å§“åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>            å¹´é¾„ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;age&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">username</span>:<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">age</span>:<span class="hljs-number">23</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="2-8ã€å°ç»“"><a href="#2-8ã€å°ç»“" class="headerlink" title="2.8ã€å°ç»“"></a>2.8ã€å°ç»“</h2><ul><li><strong>æŒ‡ä»¤ï¼šæ˜¯å¸¦æœ‰v-å‰ç¼€çš„ç‰¹æ®Šå±æ€§ï¼Œä¸åŒæŒ‡ä»¤å…·æœ‰ä¸åŒå«ä¹‰ã€‚</strong></li><li><strong>æ–‡æœ¬æ’å€¼</strong><br>v-htmlï¼šæŠŠæ–‡æœ¬è§£æä¸ºHTMLä»£ç ã€‚</li><li><strong>ç»‘å®šå±æ€§</strong><br>v-bindï¼šä¸ºHTMLæ ‡ç­¾ç»‘å®šå±æ€§å€¼ã€‚</li><li><strong>æ¡ä»¶æ¸²æŸ“</strong><br>v-ifï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“æŸå…ƒç´ ï¼Œåˆ¤å®šä¸ºçœŸæ—¶æ¸²æŸ“,å¦åˆ™ä¸æ¸²æŸ“ã€‚<br>v-elseï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“ã€‚<br>v-else-ifï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“ã€‚<br>v-showï¼šæ ¹æ®æ¡ä»¶å±•ç¤ºæŸå…ƒç´ ï¼ŒåŒºåˆ«åœ¨äºåˆ‡æ¢çš„æ˜¯displayå±æ€§çš„å€¼ã€‚</li><li><strong>åˆ—è¡¨æ¸²æŸ“</strong><br>v-forï¼šåˆ—è¡¨æ¸²æŸ“ï¼Œéå†å®¹å™¨çš„å…ƒç´ æˆ–è€…å¯¹è±¡çš„å±æ€§ã€‚</li><li><strong>äº‹ä»¶ç»‘å®š</strong><br>v-onï¼šä¸ºHTMLæ ‡ç­¾ç»‘å®šäº‹ä»¶ã€‚</li><li><strong>è¡¨å•ç»‘å®š</strong><br>v-modelï¼šåœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚</li></ul><h1 id="3ã€Element-åŸºæœ¬ä½¿ç”¨"><a href="#3ã€Element-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="3ã€Element åŸºæœ¬ä½¿ç”¨"></a>3ã€Element åŸºæœ¬ä½¿ç”¨</h1><h2 id="3-1ã€Elementä»‹ç»"><a href="#3-1ã€Elementä»‹ç»" class="headerlink" title="3.1ã€Elementä»‹ç»"></a>3.1ã€Elementä»‹ç»</h2><ul><li><p>Elementï¼šç½‘ç«™å¿«é€Ÿæˆå‹å·¥å…·ã€‚æ˜¯é¥¿äº†ä¹ˆå…¬å¸å‰ç«¯å¼€å‘å›¢é˜Ÿæä¾›çš„ä¸€å¥—åŸºäºVueçš„ç½‘ç«™ç»„ä»¶åº“ã€‚</p></li><li><p>ä½¿ç”¨Elementå‰æå¿…é¡»è¦æœ‰Vueã€‚</p></li><li><p>ç»„ä»¶ï¼šç»„æˆç½‘é¡µçš„éƒ¨ä»¶ï¼Œä¾‹å¦‚è¶…é“¾æ¥ã€æŒ‰é’®ã€å›¾ç‰‡ã€è¡¨æ ¼ç­‰ç­‰~</p></li><li><p>Elementå®˜ç½‘ï¼š<a href="https://element.eleme.cn/#/zh-CN">https://element.eleme.cn/#/zh-CN</a></p></li><li><p>è‡ªå·±å®Œæˆçš„æŒ‰é’®</p><p><img src="/Hexo/../img/20220215202455.png"></p></li><li><p>Element æä¾›çš„æŒ‰é’®</p><p><img src="/Hexo/../img/20220215202457.png"></p></li></ul><h2 id="3-2ã€Elementå¿«é€Ÿå…¥é—¨"><a href="#3-2ã€Elementå¿«é€Ÿå…¥é—¨" class="headerlink" title="3.2ã€Elementå¿«é€Ÿå…¥é—¨"></a>3.2ã€Elementå¿«é€Ÿå…¥é—¨</h2><ul><li><p><strong>å¼€å‘æ­¥éª¤</strong></p><ol><li>ä¸‹è½½ Element æ ¸å¿ƒåº“ã€‚</li><li>å¼•å…¥ Element æ ·å¼æ–‡ä»¶ã€‚</li><li>å¼•å…¥ Vue æ ¸å¿ƒ js æ–‡ä»¶ã€‚</li><li>å¼•å…¥ Element æ ¸å¿ƒ js æ–‡ä»¶ã€‚</li><li>ç¼–å†™æŒ‰é’®æ ‡ç­¾ã€‚</li><li>é€šè¿‡ Vue æ ¸å¿ƒå¯¹è±¡åŠ è½½å…ƒç´ ã€‚</li></ol></li><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¿«é€Ÿå…¥é—¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;element-ui/lib/index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æˆ‘æ˜¯æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span>&gt;</span>é»˜è®¤æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;success&quot;</span>&gt;</span>æˆåŠŸæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span>ä¿¡æ¯æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;warning&quot;</span>&gt;</span>è­¦å‘ŠæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;danger&quot;</span>&gt;</span>å±é™©æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">plain</span>&gt;</span>æœ´ç´ æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">plain</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;success&quot;</span> <span class="hljs-attr">plain</span>&gt;</span>æˆåŠŸæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;info&quot;</span> <span class="hljs-attr">plain</span>&gt;</span>ä¿¡æ¯æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;warning&quot;</span> <span class="hljs-attr">plain</span>&gt;</span>è­¦å‘ŠæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;danger&quot;</span> <span class="hljs-attr">plain</span>&gt;</span>å±é™©æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">round</span>&gt;</span>åœ†è§’æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">round</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;success&quot;</span> <span class="hljs-attr">round</span>&gt;</span>æˆåŠŸæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;info&quot;</span> <span class="hljs-attr">round</span>&gt;</span>ä¿¡æ¯æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;warning&quot;</span> <span class="hljs-attr">round</span>&gt;</span>è­¦å‘ŠæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;danger&quot;</span> <span class="hljs-attr">round</span>&gt;</span>å±é™©æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-search&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-edit&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;success&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-check&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;info&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-message&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;warning&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-star-off&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;danger&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-delete&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span></span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="3-3ã€åŸºç¡€å¸ƒå±€"><a href="#3-3ã€åŸºç¡€å¸ƒå±€" class="headerlink" title="3.3ã€åŸºç¡€å¸ƒå±€"></a>3.3ã€åŸºç¡€å¸ƒå±€</h2><p>å°†é¡µé¢åˆ†æˆæœ€å¤š 24 ä¸ªéƒ¨åˆ†ï¼Œè‡ªç”±åˆ‡åˆ†ã€‚</p><p><img src="/Hexo/.%5Cimg%5C%E5%9F%BA%E7%A1%80%E5%B8%83%E5%B1%80.png"></p><ul><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åŸºç¡€å¸ƒå±€<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;element-ui/lib/index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.el-row</span> &#123;</span><br><span class="language-css">            <span class="hljs-comment">/* è¡Œè·ä¸º20px */</span></span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.bg-purple-dark</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: red;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.bg-purple</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: blue;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.bg-purple-light</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: green;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.grid-content</span> &#123;</span><br><span class="language-css">            <span class="hljs-comment">/* è¾¹æ¡†åœ†æ¶¦åº¦ */</span></span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">            <span class="hljs-comment">/* è¡Œé«˜ä¸º36px */</span></span><br><span class="language-css">            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">36px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">      </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;24&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple-dark&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;12&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;12&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple-light&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;8&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;8&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple-light&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;8&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;6&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;6&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple-light&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;6&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;6&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple-light&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple-light&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple-light&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;grid-content bg-purple-light&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span></span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="3-4ã€å®¹å™¨å¸ƒå±€"><a href="#3-4ã€å®¹å™¨å¸ƒå±€" class="headerlink" title="3.4ã€å®¹å™¨å¸ƒå±€"></a>3.4ã€å®¹å™¨å¸ƒå±€</h2><p>å°†é¡µé¢åˆ†æˆå¤´éƒ¨åŒºåŸŸã€ä¾§è¾¹æ åŒºåŸŸã€ä¸»åŒºåŸŸã€åº•éƒ¨åŒºåŸŸã€‚</p><p><img src="/Hexo/../img/20220215202514.png"></p><ul><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å®¹å™¨å¸ƒå±€<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;element-ui/lib/index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.el-header</span>, <span class="hljs-selector-class">.el-footer</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#d18e66</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.el-aside</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#55e658</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">580px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.el-main</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#5fb1f3</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">520px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-container</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-header</span>&gt;</span>å¤´éƒ¨åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">el-header</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-container</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-aside</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;200px&quot;</span>&gt;</span>ä¾§è¾¹æ åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">el-aside</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-container</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-main</span>&gt;</span>ä¸»åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">el-main</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-footer</span>&gt;</span>åº•éƒ¨åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">el-footer</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span></span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="3-5ã€è¡¨å•ç»„ä»¶"><a href="#3-5ã€è¡¨å•ç»„ä»¶" class="headerlink" title="3.5ã€è¡¨å•ç»„ä»¶"></a>3.5ã€è¡¨å•ç»„ä»¶</h2><p>ç”±è¾“å…¥æ¡†ã€ä¸‹æ‹‰åˆ—è¡¨ã€å•é€‰æ¡†ã€å¤šé€‰æ¡†ç­‰æ§ä»¶ç»„æˆï¼Œç”¨ä»¥æ”¶é›†ã€æ ¡éªŒã€æäº¤æ•°æ®ã€‚</p><ul><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è¡¨å•ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;element-ui/lib/index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">&quot;ruleForm&quot;</span> <span class="hljs-attr">:rules</span>=<span class="hljs-string">&quot;rules&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;ruleForm&quot;</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">&quot;100px&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo-ruleForm&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æ´»åŠ¨åç§°&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ruleForm.name&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æ´»åŠ¨åŒºåŸŸ&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;region&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ruleForm.region&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è¯·é€‰æ‹©æ´»åŠ¨åŒºåŸŸ&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;åŒºåŸŸä¸€&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;shanghai&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-option</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-option</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;åŒºåŸŸäºŒ&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;beijing&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-option</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-select</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æ´»åŠ¨æ—¶é—´&quot;</span> <span class="hljs-attr">required</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;11&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;date1&quot;</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">el-date-picker</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;date&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;é€‰æ‹©æ—¥æœŸ&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ruleForm.date1&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100%;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-date-picker</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;line&quot;</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;11&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;date2&quot;</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">el-time-picker</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;é€‰æ‹©æ—¶é—´&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ruleForm.date2&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100%;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-time-picker</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;å³æ—¶é…é€&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;delivery&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-switch</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ruleForm.delivery&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-switch</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æ´»åŠ¨æ€§è´¨&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;type&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox-group</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ruleForm.type&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;ç¾é£Ÿ/é¤å…çº¿ä¸Šæ´»åŠ¨&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;type&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-checkbox</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;åœ°æ¨æ´»åŠ¨&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;type&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-checkbox</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;çº¿ä¸‹ä¸»é¢˜æ´»åŠ¨&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;type&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-checkbox</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;å•çº¯å“ç‰Œæ›å…‰&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;type&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-checkbox</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-checkbox-group</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;ç‰¹æ®Šèµ„æº&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;resource&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-radio-group</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ruleForm.resource&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-radio</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;çº¿ä¸Šå“ç‰Œå•†èµåŠ©&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-radio</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-radio</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;çº¿ä¸‹åœºåœ°å…è´¹&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-radio</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-radio-group</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æ´»åŠ¨å½¢å¼&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;desc&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;textarea&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;ruleForm.desc&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;submitForm(&#x27;ruleForm&#x27;)&quot;</span>&gt;</span>ç«‹å³åˆ›å»º<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;resetForm(&#x27;ruleForm&#x27;)&quot;</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">ruleForm</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">region</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">date1</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">date2</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">delivery</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">type</span>: [],</span><br><span class="language-javascript">                <span class="hljs-attr">resource</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">desc</span>: <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">rules</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">name</span>: [</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è¯·è¾“å…¥æ´»åŠ¨åç§°&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">min</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;é•¿åº¦åœ¨ 3 åˆ° 5 ä¸ªå­—ç¬¦&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;blur&#x27;</span> &#125;</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">          <span class="hljs-attr">region</span>: [</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è¯·é€‰æ‹©æ´»åŠ¨åŒºåŸŸ&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;change&#x27;</span> &#125;</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">          <span class="hljs-attr">date1</span>: [</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;date&#x27;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è¯·é€‰æ‹©æ—¥æœŸ&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;change&#x27;</span> &#125;</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">          <span class="hljs-attr">date2</span>: [</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;date&#x27;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è¯·é€‰æ‹©æ—¶é—´&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;change&#x27;</span> &#125;</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">          <span class="hljs-attr">type</span>: [</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;array&#x27;</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæ´»åŠ¨æ€§è´¨&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;change&#x27;</span> &#125;</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">          <span class="hljs-attr">resource</span>: [</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è¯·é€‰æ‹©æ´»åŠ¨èµ„æº&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;change&#x27;</span> &#125;</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">          <span class="hljs-attr">desc</span>: [</span><br><span class="language-javascript">            &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è¯·å¡«å†™æ´»åŠ¨å½¢å¼&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;blur&#x27;</span> &#125;</span><br><span class="language-javascript">          ]</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">submitForm</span>(<span class="hljs-params">formName</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>[formName].<span class="hljs-title function_">validate</span>(<span class="hljs-function">(<span class="hljs-params">valid</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (valid) &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;submit!&#x27;</span>);</span><br><span class="language-javascript">                &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;error submit!!&#x27;</span>);</span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">                &#125;);</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-title function_">resetForm</span>(<span class="hljs-params">formName</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>[formName].<span class="hljs-title function_">resetFields</span>();</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="3-6ã€è¡¨æ ¼ç»„ä»¶"><a href="#3-6ã€è¡¨æ ¼ç»„ä»¶" class="headerlink" title="3.6ã€è¡¨æ ¼ç»„ä»¶"></a>3.6ã€è¡¨æ ¼ç»„ä»¶</h2><p>ç”¨äºå±•ç¤ºå¤šæ¡ç»“æ„ç±»ä¼¼çš„æ•°æ®ï¼Œå¯å¯¹æ•°æ®è¿›è¡Œç¼–è¾‘ã€åˆ é™¤æˆ–å…¶ä»–è‡ªå®šä¹‰æ“ä½œã€‚</p><ul><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è¡¨æ ¼ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;element-ui/lib/index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span></span><br><span class="hljs-tag">              <span class="hljs-attr">:data</span>=<span class="hljs-string">&quot;tableData&quot;</span></span><br><span class="hljs-tag">              <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100%&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span></span><br><span class="hljs-tag">                <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;date&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æ—¥æœŸ&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;180&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span></span><br><span class="hljs-tag">                <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;name&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;å§“å&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;180&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span></span><br><span class="hljs-tag">                <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;address&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;åœ°å€&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span></span><br><span class="hljs-tag">                <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æ“ä½œ&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;180&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;warning&quot;</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;danger&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">tableData</span>: [&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">date</span>: <span class="hljs-string">&#x27;2016-05-02&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ç‹å°è™&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1518 å¼„&#x27;</span></span><br><span class="language-javascript">            &#125;, &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">date</span>: <span class="hljs-string">&#x27;2016-05-04&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ç‹å°è™&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1517 å¼„&#x27;</span></span><br><span class="language-javascript">            &#125;, &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">date</span>: <span class="hljs-string">&#x27;2016-05-01&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ç‹å°è™&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1519 å¼„&#x27;</span></span><br><span class="language-javascript">            &#125;, &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">date</span>: <span class="hljs-string">&#x27;2016-05-03&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ç‹å°è™&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1516 å¼„&#x27;</span></span><br><span class="language-javascript">            &#125;]</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="3-7ã€é¡¶éƒ¨å¯¼èˆªæ ç»„ä»¶"><a href="#3-7ã€é¡¶éƒ¨å¯¼èˆªæ ç»„ä»¶" class="headerlink" title="3.7ã€é¡¶éƒ¨å¯¼èˆªæ ç»„ä»¶"></a>3.7ã€é¡¶éƒ¨å¯¼èˆªæ ç»„ä»¶</h2><p><img src="/Hexo/../img/20220215202523.png"></p><ul><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é¡¶éƒ¨å¯¼èˆªæ <span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;element-ui/lib/index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span></span><br><span class="hljs-tag">      <span class="hljs-attr">:default-active</span>=<span class="hljs-string">&quot;activeIndex2&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-menu-demo&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;horizontal&quot;</span></span><br><span class="hljs-tag">      @<span class="hljs-attr">select</span>=<span class="hljs-string">&quot;handleSelect&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">background-color</span>=<span class="hljs-string">&quot;#545c64&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">text-color</span>=<span class="hljs-string">&quot;#fff&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">active-text-color</span>=<span class="hljs-string">&quot;#ffd04b&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span>å¤„ç†ä¸­å¿ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>æˆ‘çš„å·¥ä½œå°<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-1&quot;</span>&gt;</span>é€‰é¡¹1<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-2&quot;</span>&gt;</span>é€‰é¡¹2<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-3&quot;</span>&gt;</span>é€‰é¡¹3<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-4&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>é€‰é¡¹4<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-4-1&quot;</span>&gt;</span>é€‰é¡¹1<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-4-2&quot;</span>&gt;</span>é€‰é¡¹2<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-4-3&quot;</span>&gt;</span>é€‰é¡¹3<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;3&quot;</span> <span class="hljs-attr">disabled</span>&gt;</span>æ¶ˆæ¯ä¸­å¿ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.ele.me&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span>è®¢å•ç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span></span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="3-8ã€ä¾§è¾¹å¯¼èˆªæ ç»„ä»¶"><a href="#3-8ã€ä¾§è¾¹å¯¼èˆªæ ç»„ä»¶" class="headerlink" title="3.8ã€ä¾§è¾¹å¯¼èˆªæ ç»„ä»¶"></a>3.8ã€ä¾§è¾¹å¯¼èˆªæ ç»„ä»¶</h2><p><img src="/Hexo/../img/20220215202528.png"></p><ul><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ä¾§è¾¹å¯¼èˆªæ <span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;element-ui/lib/index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;6&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span></span><br><span class="hljs-tag">          <span class="hljs-attr">default-active</span>=<span class="hljs-string">&quot;2&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-menu-vertical-demo&quot;</span></span><br><span class="hljs-tag">          @<span class="hljs-attr">open</span>=<span class="hljs-string">&quot;handleOpen&quot;</span></span><br><span class="hljs-tag">          @<span class="hljs-attr">close</span>=<span class="hljs-string">&quot;handleClose&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">background-color</span>=<span class="hljs-string">&quot;#545c64&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">text-color</span>=<span class="hljs-string">&quot;#fff&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">active-text-color</span>=<span class="hljs-string">&quot;#ffd04b&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-location&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å¯¼èˆªä¸€<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item-group</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>åˆ†ç»„ä¸€<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-1&quot;</span>&gt;</span>é€‰é¡¹1<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-2&quot;</span>&gt;</span>é€‰é¡¹2<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item-group</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item-group</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;åˆ†ç»„2&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-3&quot;</span>&gt;</span>é€‰é¡¹3<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item-group</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-4&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>é€‰é¡¹4<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-4-1&quot;</span>&gt;</span>é€‰é¡¹1<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-menu&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>å¯¼èˆªäºŒ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;3&quot;</span> <span class="hljs-attr">disabled</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-document&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>å¯¼èˆªä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-setting&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>å¯¼èˆªå››<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span></span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="3-9ã€å°ç»“"><a href="#3-9ã€å°ç»“" class="headerlink" title="3.9ã€å°ç»“"></a>3.9ã€å°ç»“</h2><ul><li>Elementï¼šç½‘ç«™å¿«é€Ÿæˆå‹å·¥å…·ã€‚æ˜¯ä¸€å¥—ä¸ºå¼€å‘è€…ã€è®¾è®¡å¸ˆã€äº§å“ç»ç†å‡†å¤‡çš„åŸºäºVueçš„æ¡Œé¢ç«¯ç»„ä»¶åº“ã€‚</li><li>ä½¿ç”¨Elementå‰æå¿…é¡»è¦æœ‰Vueã€‚</li><li>ä½¿ç”¨æ­¥éª¤<br>1.ä¸‹è½½Elementæ ¸å¿ƒåº“ã€‚<br>2.å¼•å…¥Elementæ ·å¼æ–‡ä»¶ã€‚<br>3.å¼•å…¥Vueæ ¸å¿ƒjsæ–‡ä»¶ã€‚<br>4.å¼•å…¥Elementæ ¸å¿ƒjsæ–‡ä»¶ã€‚<br>5.å€ŸåŠ©å¸¸ç”¨ç»„ä»¶ç¼–å†™ç½‘é¡µã€‚</li><li>å¸¸ç”¨ç»„ä»¶<br>ç½‘é¡µåŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œå¸ƒå±€ã€æŒ‰é’®ã€è¡¨æ ¼ã€è¡¨å•ç­‰ç­‰~~~<br>å¸¸ç”¨ç»„ä»¶ä¸éœ€è¦è®°ä½ï¼Œåªéœ€è¦åœ¨Elementå®˜ç½‘ä¸­å¤åˆ¶ä½¿ç”¨å³å¯ã€‚</li></ul><h1 id="4ã€ç»¼åˆæ¡ˆä¾‹-å­¦ç”Ÿåˆ—è¡¨"><a href="#4ã€ç»¼åˆæ¡ˆä¾‹-å­¦ç”Ÿåˆ—è¡¨" class="headerlink" title="4ã€ç»¼åˆæ¡ˆä¾‹ å­¦ç”Ÿåˆ—è¡¨"></a>4ã€ç»¼åˆæ¡ˆä¾‹ å­¦ç”Ÿåˆ—è¡¨</h1><h2 id="4-1ã€æ¡ˆä¾‹æ•ˆæœå’Œåˆ†æ"><a href="#4-1ã€æ¡ˆä¾‹æ•ˆæœå’Œåˆ†æ" class="headerlink" title="4.1ã€æ¡ˆä¾‹æ•ˆæœå’Œåˆ†æ"></a>4.1ã€æ¡ˆä¾‹æ•ˆæœå’Œåˆ†æ</h2><p><img src="/Hexo/../img/20220215202533.png"></p><h2 id="4-2ã€å¤´éƒ¨åŒºåŸŸçš„å®ç°"><a href="#4-2ã€å¤´éƒ¨åŒºåŸŸçš„å®ç°" class="headerlink" title="4.2ã€å¤´éƒ¨åŒºåŸŸçš„å®ç°"></a>4.2ã€å¤´éƒ¨åŒºåŸŸçš„å®ç°</h2><ul><li><p><strong>å®ç°æ€è·¯</strong></p><ul><li>å¤´éƒ¨æ•ˆæœå®ç°ã€‚</li><li>ä¾§è¾¹æ å’Œä¸»åŒºåŸŸæ•ˆæœå®ç°ã€‚</li></ul></li><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å­¦ç”Ÿåˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;element-ui/lib/index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">      <span class="hljs-selector-class">.el-header</span>&#123;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#545c64</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.header-img</span>&#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;div&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-container</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- å¤´éƒ¨ --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-header&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-container</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-image</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;img/export.png&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header-img&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-image</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span></span><br><span class="hljs-tag">            <span class="hljs-attr">:default-active</span>=<span class="hljs-string">&quot;activeIndex2&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;horizontal&quot;</span></span><br><span class="hljs-tag">            @<span class="hljs-attr">select</span>=<span class="hljs-string">&quot;handleSelect&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">background-color</span>=<span class="hljs-string">&quot;#545c64&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">text-color</span>=<span class="hljs-string">&quot;white&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">active-text-color</span>=<span class="hljs-string">&quot;#ffd04b&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin-left: auto;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span>å¤„ç†ä¸­å¿ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>æˆ‘çš„å·¥ä½œå°<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-1&quot;</span>&gt;</span>é€‰é¡¹1<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-2&quot;</span>&gt;</span>é€‰é¡¹2<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-3&quot;</span>&gt;</span>é€‰é¡¹3<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;3&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;å­¦ç”Ÿåˆ—è¡¨.html&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_self&quot;</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">el-header</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span></span><br><span class="language-javascript">    &#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="4-3ã€ä¾§è¾¹æ åŒºåŸŸçš„å®ç°"><a href="#4-3ã€ä¾§è¾¹æ åŒºåŸŸçš„å®ç°" class="headerlink" title="4.3ã€ä¾§è¾¹æ åŒºåŸŸçš„å®ç°"></a>4.3ã€ä¾§è¾¹æ åŒºåŸŸçš„å®ç°</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- ä¾§è¾¹æ åŒºåŸŸ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-container</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height: 580px; border: 1px solid #eee&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-aside</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;200px&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: rgb(238, 241, 246)&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span> <span class="hljs-attr">:default-openeds</span>=<span class="hljs-string">&quot;[&#x27;1&#x27;]&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-menu&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>å­¦å·¥éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item-group</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-1&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-help&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>åœ¨æ ¡å­¦ç”Ÿç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-2&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-help&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>å­¦ç”Ÿå‡çº§/ç•™çº§<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;1-3&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-help&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>å­¦ç”Ÿå°±ä¸šæƒ…å†µ<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item-group</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-menu&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>å’¨è¯¢éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item-group</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-1&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-help&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>æ„å‘å­¦ç”Ÿç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-2&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-help&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>æœªæŠ¥åå­¦ç”Ÿç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;2-3&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-help&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>å·²æŠ¥åå­¦ç”Ÿç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item-group</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;3&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-menu&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>æ•™ç ”éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item-group</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;3-1&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-help&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>å·²æœ‰è¯¾ç¨‹ç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;3-2&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-help&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>æ­£åœ¨ç ”å‘è¯¾ç¨‹ç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;3-3&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-icon-help&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>æ–°æŠ€æœ¯è¯¾ç¨‹ç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item-group</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-aside</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="4-4ã€ä¸»åŒºåŸŸçš„å®ç°"><a href="#4-4ã€ä¸»åŒºåŸŸçš„å®ç°" class="headerlink" title="4.4ã€ä¸»åŒºåŸŸçš„å®ç°"></a>4.4ã€ä¸»åŒºåŸŸçš„å®ç°</h2><p><strong>ä¸»åŒºåŸŸå’Œä¾§è¾¹æ åŒºåŸŸæ”¾åœ¨ä¸€èµ·</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- ä¸»åŒºåŸŸ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-container</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-main</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">b</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red;font-size: 20px;&quot;</span>&gt;</span>å­¦ç”Ÿåˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float:right&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span>&gt;</span>æ·»åŠ å­¦ç”Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">&quot;tableData&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;date&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æ—¥æœŸ&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;140&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;å§“å&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;120&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;address&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;åœ°å€&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span></span><br><span class="hljs-tag">                             <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;æ“ä½œ&quot;</span></span><br><span class="hljs-tag">                             <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;180&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;warning&quot;</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;danger&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-main</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>åœ¨vueä¸­å®šä¹‰data</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>        <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#div&quot;</span>,<br>        <span class="hljs-attr">data</span>:&#123;<br>          <span class="hljs-attr">tableData</span>:[<br>            &#123;<br>              <span class="hljs-attr">date</span>:<span class="hljs-string">&quot;2088-08-08&quot;</span>,<br>              <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<br>              <span class="hljs-attr">address</span>:<span class="hljs-string">&quot;åŒ—äº¬å¸‚æ˜Œå¹³åŒº&quot;</span><br>            &#125;,&#123;<br>              <span class="hljs-attr">date</span>:<span class="hljs-string">&quot;2088-08-08&quot;</span>,<br>              <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;æå››&quot;</span>,<br>              <span class="hljs-attr">address</span>:<span class="hljs-string">&quot;åŒ—äº¬å¸‚æ˜Œå¹³åŒº&quot;</span><br>            &#125;,&#123;<br>              <span class="hljs-attr">date</span>:<span class="hljs-string">&quot;2088-08-08&quot;</span>,<br>              <span class="hljs-attr">name</span>:<span class="hljs-string">&quot;ç‹äº”&quot;</span>,<br>              <span class="hljs-attr">address</span>:<span class="hljs-string">&quot;åŒ—äº¬å¸‚æ˜Œå¹³åŒº&quot;</span><br>            &#125;,<br>          ]<br>        &#125;<br>    &#125;);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯VueğŸ±â€ğŸ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰ç«¯VueğŸ‘€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ‰“å€’é¢è¯•å®˜-â€”â€”ä¹‹Spring63é—®</title>
    <link href="/Hexo/2022/02/05/spring63%E9%97%AE/"/>
    <url>/Hexo/2022/02/05/spring63%E9%97%AE/</url>
    
    <content type="html"><![CDATA[<p><img src="https://i0.hdslb.com/bfs/album/87471128d8ab998baf5068ff5826b648c72ed8f0.png" alt="87471128d8ab998baf5068ff5826b648c72ed8f0.png (604Ã—345)"></p><p>Springæ˜¯ä¸€ä¸ªè½»é‡çº§Javaå¼€å‘æ¡†æ¶ï¼Œæœ€æ—©æœ‰Rod Johnsonåˆ›å»ºï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„ä¸šåŠ¡é€»è¾‘å±‚å’Œå…¶ä»–å„å±‚çš„è€¦åˆé—®é¢˜ã€‚å®ƒæ˜¯ä¸€ä¸ªåˆ†å±‚çš„JavaSE&#x2F;JavaEE full-stackï¼ˆä¸€ç«™å¼)è½»é‡çº§å¼€æºæ¡†æ¶ï¼Œä¸ºå¼€å‘Javaåº”ç”¨ç¨‹åºæä¾›å…¨é¢çš„åŸºç¡€æ¶æ„æ”¯æŒã€‚Springè´Ÿè´£åŸºç¡€æ¶æ„ï¼Œå› æ­¤Javaå¼€å‘è€…å¯ä»¥ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚</p><p>Springæ˜¯ä¸€ä¸ªå…¨é¢çš„ã€ä¼ä¸šåº”ç”¨å¼€å‘ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆï¼Œè´¯ç©¿è¡¨ç°å±‚ã€ä¸šåŠ¡å±‚ã€æŒä¹…å±‚ã€‚ä½†æ˜¯å®ƒä»ç„¶å¯ä»¥å’Œå…¶ä»–çš„æ¡†æ¶æ— ç¼æ•´åˆã€‚</p><h3 id="Spring-ç‰¹ç‚¹"><a href="#Spring-ç‰¹ç‚¹" class="headerlink" title="Spring ç‰¹ç‚¹"></a>Spring ç‰¹ç‚¹</h3><p><strong>è½»é‡çº§ï¼š</strong> ç»„ä»¶å¤§å°ä¸å¼€é”€ä¸¤æ–¹é¢è€Œè¨€Springéƒ½æ˜¯è½»é‡çš„ã€‚å®Œæ•´çš„Springæ¡†æ¶å¯ä»¥åœ¨ä¸€ä¸ªå¤§å°åªæœ‰1Må¤šçš„JARæ–‡ä»¶ä¸­å‘å¸ƒï¼Œå¹¶ä¸”Springæ‰€éœ€çš„å¤„ç†å¼€é”€ä¹Ÿæ˜¯å¾®ä¸è¶³é“çš„ã€‚æ­¤å¤–ï¼ŒSpringæ˜¯éä¾µå…¥å¼ï¼Œå…¸å‹æ¡ˆä¾‹ï¼ŒSpringåº”ç”¨ä¸­çš„å¯¹è±¡ä¸ä¾èµ–äºSpringç‰¹å®šçš„ç±»</p><p><strong>æ§åˆ¶åè½¬ï¼š</strong> Springé€šè¿‡æ§åˆ¶åè½¬ï¼ˆIOCï¼‰æŠ€æœ¯å®ç°è§£è€¦ã€‚ä¸€ä¸ªå¯¹è±¡ä¾èµ–çš„å…¶ä»–å¯¹è±¡ä¼šé€šè¿‡è¢«åŠ¨çš„æ–¹å¼ä¼ é€’è¿›æ¥ï¼Œè€Œä¸éœ€è¦å¯¹è±¡è‡ªå·±åˆ›å»ºæˆ–è€…æŸ¥æ‰¾ä¾èµ–ã€‚</p><p><strong>é¢å‘åˆ‡é¢ï¼š</strong> æ”¯æŒåˆ‡é¢ï¼ˆAOPï¼‰ç¼–ç¨‹ï¼Œå¹¶ä¸”å§åº”ç”¨ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡åŒºåˆ†å¼€ã€‚</p><p><strong>å®¹å™¨ï¼š</strong> SpringåŒ…å«å¹¶ç®¡ç†åº”ç”¨å¯¹è±¡çš„é…ç½®å’Œç”Ÿå‘½å‘¨æœŸï¼Œåœ¨è¿™ä¸ªæ„ä¹‰ä¸Šå®ƒæ˜¯ä¸€ç§å®¹å™¨ã€‚å¯ä»¥é…ç½®æ¯ä¸ªbeanå¦‚ä½•è¢«åˆ›å»ºã€é”€æ¯ï¼Œbeançš„ä½œç”¨èŒƒå›´æ˜¯å•ä¾‹è¿˜æ˜¯æ¯æ¬¡éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œä»¥åŠä»–ä»¬æ˜¯å¦‚ä½•ç›¸äº’å…³è”ã€‚</p><p><strong>æ¡†æ¶é›†åˆï¼š</strong> å°†ç®€å•çš„ç»„ä»¶é…ç½®ï¼Œç»„åˆæˆä¸ºå¤æ‚çš„æ¡†æ¶ï¼›åº”ç”¨å¯¹è±¡è¢«ç”³æ˜å¼ç»„åˆï¼›æä¾›è®¸å¤šåŸºç¡€åŠŸèƒ½ï¼ˆäº‹åŠ¡ç®¡ç†ã€æŒä¹…åŒ–æ¡†æ¶ç»§æ‰¿ï¼‰ï¼Œæä¾›åº”ç”¨é€»è¾‘å¼€å‘æ¥å£<a href="http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488067&idx=2&sn=bc20c4f449d5cada1335b24ea6210687&chksm=ceabf50bf9dc7c1d8486a0c1954d658778d5c652355560b65543b39aabee3cdce47732198b33&scene=21#wechat_redirect">å…³æ³¨Javaé¡¹ç›®åˆ†äº«</a></p><h3 id="Spring-æ¡†æ¶ä¼˜ç¼ºç‚¹"><a href="#Spring-æ¡†æ¶ä¼˜ç¼ºç‚¹" class="headerlink" title="Spring æ¡†æ¶ä¼˜ç¼ºç‚¹"></a>Spring æ¡†æ¶ä¼˜ç¼ºç‚¹</h3><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul><li>æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ï¼šSpringå°±æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œå¯ä»¥å°†æ‰€æœ‰å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤ï¼Œäº¤ç»™Springç®¡ç†ã€‚</li><li>AOPç¼–ç¨‹çš„æ”¯æŒï¼šSpringæä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°å¯¹ç¨‹åºè¿›è¡Œæƒé™æ‹¦æˆªã€è¿è¡Œç›‘æ§ç­‰åŠŸèƒ½ã€‚</li><li>å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒï¼šåªéœ€è¦é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¼–ç¨‹ã€‚</li><li>æ–¹ä¾¿ç¨‹åºçš„æµ‹è¯•ï¼šSpringå¯¹Junit4æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ³¨è§£æ–¹ä¾¿çš„æµ‹è¯•Springç¨‹åºã€‚</li><li>æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶ï¼šSpringä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå…¶å†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶çš„ç›´æ¥æ”¯æŒï¼ˆå¦‚ï¼šStrutsã€Hibernateã€MyBatisç­‰ï¼‰ã€‚</li><li>é™ä½JavaEE APIçš„ä½¿ç”¨éš¾åº¦ï¼šSpringå¯¹JavaEEå¼€å‘ä¸­éå¸¸éš¾ç”¨çš„ä¸€äº›APIï¼ˆJDBCã€JavaMailã€è¿œç¨‹è°ƒç”¨ç­‰ï¼‰ï¼Œéƒ½æä¾›äº†å°è£…ï¼Œä½¿è¿™äº›APIåº”ç”¨éš¾åº¦å¤§å¤§é™ä½ã€‚å…³æ³¨Javaé¡¹ç›®åˆ†äº«</li></ul><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ul><li>Springä¾èµ–åå°„ï¼Œåå°„å½±å“æ€§èƒ½</li><li>ä½¿ç”¨é—¨æ§›å‡é«˜ï¼Œå…¥é—¨Springéœ€è¦è¾ƒé•¿æ—¶é—´</li></ul><h3 id="Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼"><a href="#Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼" class="headerlink" title="Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼"></a>Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼</h3><p>Spring æ¡†æ¶ä¸­ä½¿ç”¨åˆ°äº†å¤§é‡çš„è®¾è®¡æ¨¡å¼ï¼Œä¸‹é¢åˆ—ä¸¾äº†æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„ï¼š</p><ul><li><code>ä»£ç†æ¨¡å¼</code>â€”åœ¨ AOP å’Œ remoting ä¸­è¢«ç”¨çš„æ¯”è¾ƒå¤šã€‚</li><li><code>å•ä¾‹æ¨¡å¼</code>â€”åœ¨ spring é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ bean é»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ã€‚</li><li><code>æ¨¡æ¿æ–¹æ³•</code>â€”ç”¨æ¥è§£å†³ä»£ç é‡å¤çš„é—®é¢˜ã€‚æ¯”å¦‚. RestTemplate, JmsTemplate, JpaTempl ateã€‚</li><li><code>å‰ç«¯æ§åˆ¶å™¨</code>â€”Spring æä¾›äº† DispatcherServlet æ¥å¯¹è¯·æ±‚è¿›è¡Œåˆ†å‘ã€‚</li><li><code>è§†å›¾å¸®åŠ©(View Helper )</code>â€”Spring æä¾›äº†ä¸€ç³»åˆ—çš„ JSP æ ‡ç­¾ï¼Œé«˜æ•ˆå®æ¥è¾…åŠ©å°†åˆ†æ•£çš„ä»£ç æ•´åˆåœ¨è§†å›¾é‡Œã€‚</li><li><code>ä¾èµ–æ³¨å…¥</code>â€”è´¯ç©¿äº BeanFactory &#x2F; ApplicationContext æ¥å£çš„æ ¸å¿ƒç†å¿µã€‚</li><li><code>å·¥å‚æ¨¡å¼</code>â€”BeanFactory ç”¨æ¥åˆ›å»ºå¯¹è±¡çš„å®ä¾‹</li></ul><h3 id="Springæ ¸å¿ƒç»„ä»¶"><a href="#Springæ ¸å¿ƒç»„ä»¶" class="headerlink" title="Springæ ¸å¿ƒç»„ä»¶"></a>Springæ ¸å¿ƒç»„ä»¶</h3><p>Spring æ€»å…±å¤§çº¦æœ‰ 20 ä¸ªæ¨¡å—ï¼Œ ç”± 1300 å¤šä¸ªä¸åŒçš„æ–‡ä»¶æ„æˆã€‚è€Œè¿™äº›ç»„ä»¶è¢«åˆ†åˆ«æ•´åˆåœ¨æ ¸å¿ƒå®¹å™¨ï¼ˆCore Containerï¼‰ ã€ AOPï¼ˆAspect Oriented Programmingï¼‰å’Œè®¾å¤‡æ”¯æŒï¼ˆInstrmentationï¼‰ ã€æ•°æ®è®¿é—®ä¸é›†æˆï¼ˆData Access&#x2F;Integerationï¼‰ ã€ Webã€ æ¶ˆæ¯ï¼ˆMessagingï¼‰ ã€ Testç­‰ 6 ä¸ªæ¨¡å—ä¸­ã€‚ä»¥ä¸‹æ˜¯ Spring 5 çš„æ¨¡å—ç»“æ„å›¾ï¼š</p><p><img src="https://gitee.com/lin-liangxing/pictuer/raw/master/640" alt="å›¾ç‰‡"></p><ul><li><code>spring core</code>ï¼šæä¾›äº†æ¡†æ¶çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼ŒåŒ…æ‹¬æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼ŒIOCï¼‰å’Œä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰åŠŸèƒ½ã€‚</li><li><code>spring beans</code>ï¼šæä¾›äº†BeanFactoryï¼Œæ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªç»å…¸å®ç°ï¼ŒSpringå°†ç®¡ç†å¯¹è±¡ç§°ä¸ºBeanã€‚å…³æ³¨Javaé¡¹ç›®åˆ†äº«</li><li><code>spring context</code>ï¼šæ„å»ºäº core å°è£…åŒ…åŸºç¡€ä¸Šçš„ context å°è£…åŒ…ï¼Œæä¾›äº†ä¸€ç§æ¡†æ¶å¼çš„å¯¹è±¡è®¿é—®æ–¹æ³•ã€‚</li><li><code>spring jdbc</code>ï¼šæä¾›äº†ä¸€ä¸ªJDBCçš„æŠ½è±¡å±‚ï¼Œæ¶ˆé™¤äº†çƒ¦ççš„JDBCç¼–ç å’Œæ•°æ®åº“å‚å•†ç‰¹æœ‰çš„é”™è¯¯ä»£ç è§£æï¼Œ ç”¨äºç®€åŒ–JDBCã€‚</li><li><code>spring aop</code>ï¼šæä¾›äº†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹å®ç°ï¼Œè®©ä½ å¯ä»¥è‡ªå®šä¹‰æ‹¦æˆªå™¨ã€åˆ‡ç‚¹ç­‰ã€‚</li><li><code>spring Web</code>ï¼šæä¾›äº†é’ˆå¯¹ Web å¼€å‘çš„é›†æˆç‰¹æ€§ï¼Œä¾‹å¦‚æ–‡ä»¶ä¸Šä¼ ï¼Œåˆ©ç”¨ servlet listeners è¿›è¡Œ ioc å®¹å™¨åˆå§‹åŒ–å’Œé’ˆå¯¹ Web çš„ ApplicationContextã€‚</li><li><code>spring test</code>ï¼šä¸»è¦ä¸ºæµ‹è¯•æä¾›æ”¯æŒçš„ï¼Œæ”¯æŒä½¿ç”¨JUnitæˆ–TestNGå¯¹Springç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚<a href="http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488067&idx=2&sn=bc20c4f449d5cada1335b24ea6210687&chksm=ceabf50bf9dc7c1d8486a0c1954d658778d5c652355560b65543b39aabee3cdce47732198b33&scene=21#wechat_redirect">å…³æ³¨Javaé¡¹ç›®åˆ†äº«</a></li></ul><h3 id="Spring-æ§åˆ¶åè½¬ï¼ˆIOCï¼‰"><a href="#Spring-æ§åˆ¶åè½¬ï¼ˆIOCï¼‰" class="headerlink" title="Spring æ§åˆ¶åè½¬ï¼ˆIOCï¼‰"></a>Spring æ§åˆ¶åè½¬ï¼ˆIOCï¼‰</h3><h4 id="æ§åˆ¶åè½¬ï¼ˆIOCï¼‰æ¦‚å¿µ"><a href="#æ§åˆ¶åè½¬ï¼ˆIOCï¼‰æ¦‚å¿µ" class="headerlink" title="æ§åˆ¶åè½¬ï¼ˆIOCï¼‰æ¦‚å¿µ"></a>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰æ¦‚å¿µ</h4><p>æ§åˆ¶åè½¬å³IOC (Inversion of Control)ï¼Œå®ƒæŠŠä¼ ç»Ÿä¸Šç”±ç¨‹åºä»£ç ç›´æ¥æ“æ§çš„å¯¹è±¡çš„è°ƒç”¨æƒäº¤ç»™å®¹å™¨ï¼Œé€šè¿‡å®¹å™¨æ¥å®ç°å¯¹è±¡ç»„ä»¶çš„è£…é…å’Œç®¡ç†ã€‚</p><p>Spring é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æè¿° Bean åŠ Bean ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œåˆ©ç”¨ Java è¯­è¨€çš„åå°„åŠŸèƒ½(ä¾èµ–æ³¨å…¥DI)å®ä¾‹åŒ– Bean å¹¶å»ºç«‹ Bean ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚Spring çš„ IoC å®¹å™¨åœ¨å®Œæˆè¿™äº›åº•å±‚å·¥ä½œçš„åŸºç¡€ä¸Šï¼Œè¿˜æä¾› äº† Bean å®ä¾‹ç¼“å­˜ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ Bean å®ä¾‹ä»£ç†ã€äº‹ä»¶å‘å¸ƒã€èµ„æºè£…è½½ç­‰é«˜çº§æœåŠ¡ã€‚</p><h4 id="Spring-å®¹å™¨é«˜å±‚è§†å›¾"><a href="#Spring-å®¹å™¨é«˜å±‚è§†å›¾" class="headerlink" title="Spring å®¹å™¨é«˜å±‚è§†å›¾"></a>Spring å®¹å™¨é«˜å±‚è§†å›¾</h4><p>Spring å¯åŠ¨æ—¶è¯»å–åº”ç”¨ç¨‹åºæä¾›çš„ Bean é…ç½®ä¿¡æ¯ï¼Œå¹¶åœ¨ Spring å®¹å™¨ä¸­ç”Ÿæˆä¸€ä»½ç›¸åº”çš„ Bean é…</p><p>ç½®æ³¨å†Œè¡¨ï¼Œç„¶åæ ¹æ®è¿™å¼ æ³¨å†Œè¡¨å®ä¾‹åŒ– Beanï¼Œè£…é…å¥½ Bean ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¸ºä¸Šå±‚åº”ç”¨æä¾›å‡†</p><p>å¤‡å°±ç»ªçš„è¿è¡Œç¯å¢ƒã€‚å…¶ä¸­ Bean ç¼“å­˜æ± ä¸º HashMap å®ç°</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0MlqnzhGibA78IUXKeQWmwERSichtKhe06a9rkwpd2EEqPp9thHaicZibNA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><h3 id="IOC-å®¹å™¨å®ç°"><a href="#IOC-å®¹å™¨å®ç°" class="headerlink" title="IOC å®¹å™¨å®ç°"></a>IOC å®¹å™¨å®ç°</h3><h4 id="BeanFactory-æ¡†æ¶åŸºç¡€è®¾æ–½"><a href="#BeanFactory-æ¡†æ¶åŸºç¡€è®¾æ–½" class="headerlink" title="BeanFactory-æ¡†æ¶åŸºç¡€è®¾æ–½"></a>BeanFactory-æ¡†æ¶åŸºç¡€è®¾æ–½</h4><p>BeanFactory æ˜¯ Spring æ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å‘ Spring æœ¬èº«ï¼›</p><p>ApplicationContext é¢å‘ä½¿ç”¨Spring æ¡†æ¶çš„å¼€å‘è€…ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨åœºåˆæˆ‘ä»¬éƒ½ç›´æ¥ä½¿ç”¨ ApplicationContext è€Œéåº•å±‚çš„ BeanFactoryã€‚å…³æ³¨Javaé¡¹ç›®åˆ†äº«</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0Tow34ibDcqvM6b5war9XAlBVU0ibAm86TD7kDgOEJsvDKYEaiakh8J1KQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><ul><li><strong>BeanDefinitionRegistry æ³¨å†Œè¡¨</strong>ï¼šSpring é…ç½®æ–‡ä»¶ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹å…ƒç´ åœ¨ Spring å®¹å™¨é‡Œéƒ½é€šè¿‡ä¸€ä¸ª BeanDefinition å¯¹è±¡è¡¨ç¤ºï¼Œå®ƒæè¿°äº† Bean çš„é…ç½®ä¿¡æ¯ã€‚è€Œ BeanDefinitionRegistry æ¥å£æä¾›äº†å‘å®¹å™¨æ‰‹å·¥æ³¨å†ŒBeanDefinition å¯¹è±¡çš„æ–¹æ³•ã€‚</li><li><strong>BeanFactory é¡¶å±‚æ¥å£</strong>ï¼šä½äºç±»ç»“æ„æ ‘çš„é¡¶ç«¯ ï¼Œå®ƒæœ€ä¸»è¦çš„æ–¹æ³•å°±æ˜¯ getBean(String beanName)ï¼Œè¯¥æ–¹æ³•ä»å®¹å™¨ä¸­è¿”å›ç‰¹å®šåç§°çš„ Beanï¼ŒBeanFactory çš„åŠŸèƒ½é€šè¿‡å…¶ä»–çš„æ¥å£å¾—åˆ°ä¸æ–­æ‰©å±•ï¼š</li><li><strong>ListableBeanFactory</strong>ï¼šè¯¥æ¥å£å®šä¹‰äº†è®¿é—®å®¹å™¨ä¸­ Bean åŸºæœ¬ä¿¡æ¯çš„è‹¥å¹²æ–¹æ³•ï¼Œå¦‚æŸ¥çœ‹ Bean çš„ä¸ªæ•°ã€è·å–æŸä¸€ç±»å‹Bean çš„é…ç½®åã€æŸ¥çœ‹å®¹å™¨ä¸­æ˜¯å¦åŒ…æ‹¬æŸä¸€ Bean ç­‰æ–¹æ³•ï¼›</li><li><strong>HierarchicalBeanFactory çˆ¶å­çº§</strong>ï¼šçˆ¶å­çº§è” IoC å®¹å™¨çš„æ¥å£ï¼Œå­å®¹å™¨å¯ä»¥é€šè¿‡æ¥å£æ–¹æ³•è®¿é—®çˆ¶å®¹å™¨ï¼›é€šè¿‡HierarchicalBeanFactory æ¥å£ï¼Œ Spring çš„ IoC å®¹å™¨å¯ä»¥å»ºç«‹çˆ¶å­å±‚çº§å…³è”çš„å®¹å™¨ä½“ç³»ï¼Œå­å®¹å™¨å¯ä»¥è®¿é—®çˆ¶å®¹å™¨ä¸­çš„ Beanï¼Œä½†çˆ¶å®¹å™¨ä¸èƒ½è®¿é—®å­å®¹å™¨çš„ Beanã€‚Spring ä½¿ç”¨çˆ¶å­å®¹å™¨å®ç°äº†å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨ Spring MVC ä¸­ï¼Œå±•ç°å±‚ Bean ä½äºä¸€ä¸ªå­å®¹å™¨ä¸­ï¼Œè€Œä¸šåŠ¡å±‚å’ŒæŒä¹…å±‚çš„ Bean ä½äºçˆ¶å®¹å™¨ä¸­ã€‚è¿™æ ·ï¼Œå±•ç°å±‚ Bean å°±å¯ä»¥å¼•ç”¨ä¸šåŠ¡å±‚å’ŒæŒä¹…å±‚çš„ Beanï¼Œè€Œä¸šåŠ¡å±‚å’ŒæŒä¹…å±‚çš„ Bean åˆ™çœ‹ä¸åˆ°å±•ç°å±‚çš„ Beanã€‚</li><li><strong>ConfigurableBeanFactory</strong>ï¼šæ˜¯ä¸€ä¸ªé‡è¦çš„æ¥å£ï¼Œå¢å¼ºäº† IoC å®¹å™¨çš„å¯å®šåˆ¶æ€§ï¼Œå®ƒå®šä¹‰äº†è®¾ç½®ç±»è£…è½½å™¨ã€å±æ€§ç¼–è¾‘å™¨ã€å®¹å™¨åˆå§‹åŒ–åç½®å¤„ç†å™¨ç­‰æ–¹æ³•ï¼›</li><li><strong>AutowireCapableBeanFactory è‡ªåŠ¨è£…é…</strong>ï¼šå®šä¹‰äº†å°†å®¹å™¨ä¸­çš„ Bean æŒ‰æŸç§è§„åˆ™ï¼ˆå¦‚æŒ‰åå­—åŒ¹é…ã€æŒ‰ç±»å‹åŒ¹é…ç­‰ï¼‰è¿›è¡Œè‡ªåŠ¨è£…é…çš„æ–¹æ³•ï¼›</li><li><strong>SingletonBeanRegistry è¿è¡ŒæœŸé—´æ³¨å†Œå•ä¾‹ Bean</strong>ï¼šå®šä¹‰äº†å…è®¸åœ¨è¿è¡ŒæœŸé—´å‘å®¹å™¨æ³¨å†Œå•å®ä¾‹ Bean çš„æ–¹æ³•ï¼›å¯¹äºå•å®ä¾‹ï¼ˆ singletonï¼‰çš„ Bean æ¥è¯´ï¼ŒBeanFactory ä¼šç¼“å­˜ Bean å®ä¾‹ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡ä½¿ç”¨ getBean() è·å– Bean æ—¶å°†ç›´æ¥ä»IoC å®¹å™¨çš„ç¼“å­˜ä¸­è·å– Bean å®ä¾‹ã€‚Spring åœ¨ DefaultSingletonBeanRegistry ç±»ä¸­æä¾›äº†ä¸€ä¸ªç”¨äºç¼“å­˜å•å®ä¾‹ Bean çš„ç¼“å­˜å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨ HashMap å®ç°çš„ç¼“å­˜å™¨ï¼Œå•å®ä¾‹çš„ Bean ä»¥beanName ä¸ºé”®ä¿å­˜åœ¨è¿™ä¸ª HashMap ä¸­ã€‚</li><li><strong>ä¾èµ–æ—¥å¿—æ¡†æ¶</strong>ï¼šåœ¨åˆå§‹åŒ– BeanFactory æ—¶ï¼Œå¿…é¡»ä¸ºå…¶æä¾›ä¸€ç§æ—¥å¿—æ¡†æ¶ï¼Œæ¯”å¦‚ä½¿ç”¨ Log4Jï¼Œ å³åœ¨ç±»è·¯å¾„ä¸‹æä¾› Log4J é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·å¯åŠ¨ Spring å®¹å™¨æ‰ä¸ä¼šæŠ¥é”™ã€‚</li></ul><h3 id="ApplicationContext-é¢å‘å¼€å‘åº”ç”¨"><a href="#ApplicationContext-é¢å‘å¼€å‘åº”ç”¨" class="headerlink" title="ApplicationContext é¢å‘å¼€å‘åº”ç”¨"></a>ApplicationContext é¢å‘å¼€å‘åº”ç”¨</h3><p>ApplicationContext ç”± BeanFactory æ´¾ç”Ÿè€Œæ¥ï¼Œæä¾›äº†æ›´å¤šé¢å‘å®é™…åº”ç”¨çš„åŠŸèƒ½ã€‚</p><p>ApplicationContext ç»§æ‰¿äº† HierarchicalBeanFactory å’Œ ListableBeanFactory æ¥å£ï¼Œåœ¨æ­¤åŸºç¡€</p><p>ä¸Šï¼Œè¿˜é€šè¿‡å¤šä¸ªå…¶ä»–çš„æ¥å£æ‰©å±•äº† BeanFactory çš„åŠŸèƒ½ï¼š</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0OSH1zbqFYrpHZeIM2C9YgGIMa6ZRLR6BWZnVRcqAlBKjEqNFZa6QWg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><ul><li>ClassPathXmlApplicationContextï¼šé»˜è®¤ä»ç±»è·¯å¾„åŠ è½½é…ç½®æ–‡ä»¶</li><li>FileSystemXmlApplicationContextï¼šé»˜è®¤ä»æ–‡ä»¶ç³»ç»Ÿä¸­è£…è½½é…ç½®æ–‡ä»¶</li><li>ApplicationEventPublisherï¼šè®©å®¹å™¨æ‹¥æœ‰å‘å¸ƒåº”ç”¨ä¸Šä¸‹æ–‡äº‹ä»¶çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬å®¹å™¨å¯åŠ¨äº‹ä»¶ã€å…³é—­äº‹ä»¶ç­‰ã€‚</li><li>MessageSourceï¼šä¸ºåº”ç”¨æä¾› i18n å›½é™…åŒ–æ¶ˆæ¯è®¿é—®çš„åŠŸèƒ½ï¼›</li><li>ResourcePatternResolver ï¼šæ‰€æœ‰ ApplicationContext å®ç°ç±»éƒ½å®ç°äº†ç±»ä¼¼äº</li><li>PathMatchingResourcePatternResolverï¼šé€šè¿‡å¸¦å‰ç¼€çš„ Ant é£æ ¼çš„èµ„æºæ–‡ä»¶è·¯å¾„è£…è½½ Spring çš„é…ç½®æ–‡ä»¶ã€‚</li><li>LifeCycleï¼šè¯¥æ¥å£æ˜¯ Spring 2.0 åŠ å…¥çš„ï¼Œè¯¥æ¥å£æä¾›äº† start()å’Œ stop()ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸»è¦ç”¨äºæ§åˆ¶å¼‚æ­¥å¤„ç†è¿‡ç¨‹ã€‚åœ¨å…·ä½“ä½¿ç”¨æ—¶ï¼Œè¯¥æ¥å£åŒæ—¶è¢« ApplicationContext å®ç°åŠå…·ä½“Bean å®ç°ï¼Œ ApplicationContext ä¼šå°† start&#x2F;stop çš„ä¿¡æ¯ä¼ é€’ç»™å®¹å™¨ä¸­æ‰€æœ‰å®ç°äº†è¯¥æ¥å£çš„ Beanï¼Œä»¥è¾¾åˆ°ç®¡ç†å’Œæ§åˆ¶ JMXã€ä»»åŠ¡è°ƒåº¦ç­‰ç›®çš„ã€‚</li><li>ConfigurableApplicationContext ï¼šæ‰©å±•äº ApplicationContextï¼Œå®ƒæ–°å¢åŠ äº†ä¸¤ä¸ªä¸»è¦çš„æ–¹æ³•ï¼šrefresh()å’Œ close()ï¼Œè®© ApplicationContext å…·æœ‰å¯åŠ¨ã€åˆ·æ–°å’Œå…³é—­åº”ç”¨ä¸Šä¸‹æ–‡çš„èƒ½åŠ›ã€‚åœ¨åº”ç”¨ä¸Šä¸‹æ–‡å…³é—­çš„æƒ…å†µä¸‹è°ƒç”¨ refresh()å³å¯å¯åŠ¨åº”ç”¨ä¸Šä¸‹æ–‡ï¼Œåœ¨å·²ç»å¯åŠ¨çš„çŠ¶æ€ä¸‹ï¼Œè°ƒç”¨ refresh()åˆ™æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°è£…è½½é…ç½®ä¿¡æ¯ï¼Œè€Œè°ƒç”¨ close()åˆ™å¯å…³é—­åº”ç”¨ä¸Šä¸‹æ–‡ã€‚</li></ul><h3 id="BeanFactory-å’Œ-ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#BeanFactory-å’Œ-ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>BeanFactory å’Œ ApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>BeanFactoryå’ŒApplicationContextæ˜¯Springçš„ä¸¤å¤§æ ¸å¿ƒæ¥å£ï¼Œéƒ½å¯ä»¥å½“åšSpringçš„å®¹å™¨ã€‚å…¶ä¸­ApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ã€‚</p><h4 id="ä¾èµ–å…³ç³»"><a href="#ä¾èµ–å…³ç³»" class="headerlink" title="ä¾èµ–å…³ç³»"></a>ä¾èµ–å…³ç³»</h4><p>BeanFactoryï¼šæ˜¯Springé‡Œé¢æœ€åº•å±‚çš„æ¥å£ï¼ŒåŒ…å«äº†å„ç§Beançš„å®šä¹‰ï¼Œè¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ã€å®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p><p>ApplicationContextï¼šæ¥å£ä½œä¸ºBeanFactoryçš„æ´¾ç”Ÿï¼Œé™¤äº†æä¾›BeanFactoryæ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼š</p><ul><li>ç»§æ‰¿MessageSourceï¼Œå› æ­¤æ”¯æŒå›½é™…åŒ–ã€‚</li><li>ç»Ÿä¸€çš„èµ„æºæ–‡ä»¶è®¿é—®æ–¹å¼ã€‚</li><li>æä¾›åœ¨ç›‘å¬å™¨ä¸­æ³¨å†Œbeançš„äº‹ä»¶ã€‚</li><li>åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚</li><li>è½½å…¥å¤šä¸ªï¼ˆæœ‰ç»§æ‰¿å…³ç³»ï¼‰ä¸Šä¸‹æ–‡ ï¼Œä½¿å¾—æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡éƒ½ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„å±‚æ¬¡ï¼Œæ¯”å¦‚åº”ç”¨çš„webå±‚ã€‚</li></ul><h4 id="åŠ è½½æ–¹å¼"><a href="#åŠ è½½æ–¹å¼" class="headerlink" title="åŠ è½½æ–¹å¼"></a>åŠ è½½æ–¹å¼</h4><p>BeanFactroyï¼šé‡‡ç”¨çš„æ˜¯å»¶è¿ŸåŠ è½½å½¢å¼æ¥æ³¨å…¥Beançš„ï¼Œå³åªæœ‰åœ¨ä½¿ç”¨åˆ°æŸä¸ªBeanæ—¶(è°ƒgetBean())ï¼Œæ‰å¯¹è¯¥Beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›å­˜åœ¨çš„Springçš„é…ç½®é—®é¢˜ã€‚å¦‚æœBeançš„æŸä¸€ä¸ªå±æ€§æ²¡æœ‰æ³¨å…¥ï¼ŒBeanFacotryåŠ è½½åï¼Œç›´è‡³ç¬¬ä¸€æ¬¡ä½¿ç”¨è°ƒç”¨getBeanæ–¹æ³•æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>ApplicationContextï¼šå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€æ¬¡æ€§åˆ›å»ºäº†æ‰€æœ‰çš„Beanã€‚è¿™æ ·ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°Springä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯ï¼Œè¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ã€‚ApplicationContextå¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanï¼Œé€šè¿‡é¢„è½½å…¥å•å®ä¾‹bean ,ç¡®ä¿å½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œä½ å°±ä¸ç”¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ›å»ºå¥½äº†ã€‚</p><p>ç›¸å¯¹äºåŸºæœ¬çš„BeanFactoryï¼ŒApplicationContext å”¯ä¸€çš„ä¸è¶³æ˜¯å ç”¨å†…å­˜ç©ºé—´ã€‚å½“åº”ç”¨ç¨‹åºé…ç½®Beanè¾ƒå¤šæ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚</p><h4 id="åˆ›å»ºæ–¹å¼"><a href="#åˆ›å»ºæ–¹å¼" class="headerlink" title="åˆ›å»ºæ–¹å¼"></a>åˆ›å»ºæ–¹å¼</h4><p>BeanFactoryé€šå¸¸ä»¥ç¼–ç¨‹çš„æ–¹å¼è¢«åˆ›å»ºï¼ŒApplicationContextè¿˜èƒ½ä»¥å£°æ˜çš„æ–¹å¼åˆ›å»ºï¼Œå¦‚ä½¿ç”¨ContextLoaderã€‚</p><h4 id="æ³¨å†Œæ–¹å¼"><a href="#æ³¨å†Œæ–¹å¼" class="headerlink" title="æ³¨å†Œæ–¹å¼"></a>æ³¨å†Œæ–¹å¼</h4><p>BeanFactoryå’ŒApplicationContextéƒ½æ”¯æŒBeanPostProcessorã€BeanFactoryPostProcessorçš„ä½¿ç”¨ï¼Œä½†ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«æ˜¯ï¼šBeanFactoryéœ€è¦æ‰‹åŠ¨æ³¨å†Œï¼Œè€ŒApplicationContextåˆ™æ˜¯è‡ªåŠ¨æ³¨å†Œã€‚</p><h4 id="ApplicationContexté€šå¸¸çš„å®ç°"><a href="#ApplicationContexté€šå¸¸çš„å®ç°" class="headerlink" title="ApplicationContexté€šå¸¸çš„å®ç°"></a>ApplicationContexté€šå¸¸çš„å®ç°</h4><ul><li>FileSystemXmlApplicationContext ï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼ŒXML Bean é…ç½®æ–‡ä»¶çš„å…¨è·¯å¾„åå¿…é¡»æä¾›ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚</li><li>ClassPathXmlApplicationContextï¼šæ­¤å®¹å™¨ä¹Ÿä»ä¸€ä¸ªXMLæ–‡ä»¶ä¸­åŠ è½½beansçš„å®šä¹‰ï¼Œè¿™é‡Œï¼Œä½ éœ€è¦æ­£ç¡®è®¾ç½®classpathå› ä¸ºè¿™ä¸ªå®¹å™¨å°†åœ¨classpathé‡Œæ‰¾beané…ç½®ã€‚</li><li>WebXmlApplicationContextï¼šæ­¤å®¹å™¨åŠ è½½ä¸€ä¸ªXMLæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªWEBåº”ç”¨çš„æ‰€æœ‰beanã€‚</li></ul><h3 id="Springçš„ä¾èµ–æ³¨å…¥"><a href="#Springçš„ä¾èµ–æ³¨å…¥" class="headerlink" title="Springçš„ä¾èµ–æ³¨å…¥"></a>Springçš„ä¾èµ–æ³¨å…¥</h3><p>å…¶ä¸»è¦å®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼šä¾èµ–æ³¨å…¥å’Œä¾èµ–æŸ¥æ‰¾ã€‚</p><p><strong>ä¾èµ–æ³¨å…¥ï¼š</strong> ç›¸å¯¹äºIoCè€Œè¨€ï¼Œä¾èµ–æ³¨å…¥(DI)æ›´åŠ å‡†ç¡®åœ°æè¿°äº†IoCçš„è®¾è®¡ç†å¿µã€‚æ‰€è°“ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ï¼Œå³ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨åº”ç”¨ç³»ç»Ÿè¿è¡ŒæœŸæ¥å†³å®šï¼Œä¹Ÿå°±æ˜¯ç”±å®¹å™¨åŠ¨æ€åœ°å°†æŸç§ä¾èµ–å…³ç³»çš„ç›®æ ‡å¯¹è±¡å®ä¾‹æ³¨å…¥åˆ°åº”ç”¨ç³»ç»Ÿä¸­çš„å„ä¸ªå…³è”çš„ç»„ä»¶ä¹‹ä¸­ã€‚ç»„ä»¶ä¸åšå®šä½æŸ¥è¯¢ï¼Œåªæä¾›æ™®é€šçš„Javaæ–¹æ³•è®©å®¹å™¨å»å†³å®šä¾èµ–å…³ç³»ã€‚</p><h4 id="ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™"><a href="#ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™" class="headerlink" title="ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™"></a>ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™</h4><p>åº”ç”¨ç»„ä»¶ä¸åº”è¯¥è´Ÿè´£æŸ¥æ‰¾èµ„æºæˆ–è€…å…¶ä»–ä¾èµ–çš„åä½œå¯¹è±¡ã€‚é…ç½®å¯¹è±¡çš„å·¥ä½œåº”è¯¥ç”±IoCå®¹å™¨è´Ÿè´£ï¼Œâ€œæŸ¥æ‰¾èµ„æºâ€çš„é€»è¾‘åº”è¯¥ä»åº”ç”¨ç»„ä»¶çš„ä»£ç ä¸­æŠ½å–å‡ºæ¥ï¼Œäº¤ç»™IoCå®¹å™¨è´Ÿè´£ã€‚å®¹å™¨å…¨æƒè´Ÿè´£ç»„ä»¶çš„è£…é…ï¼Œå®ƒä¼šæŠŠç¬¦åˆä¾èµ–å…³ç³»çš„å¯¹è±¡é€šè¿‡å±æ€§ï¼ˆJavaBeanä¸­çš„setterï¼‰æˆ–è€…æ˜¯æ„é€ å™¨ä¼ é€’ç»™éœ€è¦çš„å¯¹è±¡ã€‚</p><p><strong>ä¾èµ–æ³¨å…¥ä¼˜åŠ¿</strong></p><p>ä¾èµ–æ³¨å…¥ä¹‹æ‰€ä»¥æ›´æµè¡Œæ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ç§æ›´å¯å–çš„æ–¹å¼ï¼šè®©å®¹å™¨å…¨æƒè´Ÿè´£ä¾èµ–æŸ¥è¯¢ï¼Œå—ç®¡ç»„ä»¶åªéœ€è¦æš´éœ²JavaBeançš„setteræ–¹æ³•æˆ–è€…å¸¦å‚æ•°çš„æ„é€ å™¨æˆ–è€…æ¥å£ï¼Œä½¿å®¹å™¨å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ç»„è£…å¯¹è±¡çš„ä¾èµ–å…³ç³»ã€‚å…¶ä¸ä¾èµ–æŸ¥æ‰¾æ–¹å¼ç›¸æ¯”ï¼Œä¸»è¦ä¼˜åŠ¿ä¸ºï¼š</p><ul><li>æŸ¥æ‰¾å®šä½æ“ä½œä¸åº”ç”¨ä»£ç å®Œå…¨æ— å…³</li><li>ä¸ä¾èµ–äºå®¹å™¨çš„APIï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä»»ä½•å®¹å™¨ä»¥å¤–ä½¿ç”¨åº”ç”¨å¯¹è±¡</li><li>ä¸éœ€è¦ç‰¹æ®Šçš„æ¥å£ï¼Œç»å¤§å¤šæ•°å¯¹è±¡å¯ä»¥åšåˆ°å®Œå…¨ä¸å¿…ä¾èµ–å®¹å™¨</li></ul><p><strong>ä¾èµ–æ³¨å…¥å®ç°æ–¹å¼</strong></p><p>ä¾èµ–æ³¨å…¥æ˜¯æ—¶ä¸‹æœ€æµè¡Œçš„IoCå®ç°æ–¹å¼ï¼Œä¾èµ–æ³¨å…¥åˆ†ä¸ºæ¥å£æ³¨å…¥ï¼ˆInterface Injectionï¼‰ï¼ŒSetteræ–¹æ³•æ³¨å…¥ï¼ˆSetter Injectionï¼‰å’Œæ„é€ å™¨æ³¨å…¥ï¼ˆConstructor Injectionï¼‰ä¸‰ç§æ–¹å¼ã€‚å…¶ä¸­æ¥å£æ³¨å…¥ç”±äºåœ¨çµæ´»æ€§å’Œæ˜“ç”¨æ€§æ¯”è¾ƒå·®ï¼Œç°åœ¨ä»Spring4å¼€å§‹å·²è¢«åºŸå¼ƒã€‚</p><ul><li>æ„é€ å™¨ä¾èµ–æ³¨å…¥ï¼šæ„é€ å™¨ä¾èµ–æ³¨å…¥é€šè¿‡å®¹å™¨è§¦å‘ä¸€ä¸ªç±»çš„æ„é€ å™¨æ¥å®ç°çš„ï¼Œè¯¥ç±»æœ‰ä¸€ç³»åˆ—å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªå¯¹å…¶ä»–ç±»çš„ä¾èµ–</li><li>Setteræ–¹æ³•æ³¨å…¥ï¼šSetteræ–¹æ³•æ³¨å…¥æ˜¯å®¹å™¨é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å™¨æˆ–æ— å‚staticå·¥å‚ æ–¹æ³•å®ä¾‹åŒ–beanä¹‹åï¼Œè°ƒç”¨è¯¥beançš„setteræ–¹æ³•ï¼Œå³å®ç°äº†åŸºäºsetterçš„ä¾èµ–æ³¨å…¥</li></ul><h3 id="æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ-Setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«"><a href="#æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ-Setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«" class="headerlink" title="æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ Setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«"></a>æ„é€ å™¨ä¾èµ–æ³¨å…¥å’Œ Setteræ–¹æ³•æ³¨å…¥çš„åŒºåˆ«</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0lH4hMib9aswKY6j9Zo8uic4cyfe0O1ffibIlZ3U7wBrcgM5fbLPhlQ6Ww/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><p>ä¸¤ç§ä¾èµ–æ–¹å¼éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ„é€ å™¨æ³¨å…¥å’ŒSetteræ–¹æ³•æ³¨å…¥ã€‚æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨æ„é€ å™¨å‚æ•°å®ç°å¼ºåˆ¶ä¾èµ–ï¼Œsetteræ–¹æ³•å®ç°å¯é€‰ä¾èµ–ã€‚</p><h3 id="WebApplication-ä½“ç³»æ¶æ„"><a href="#WebApplication-ä½“ç³»æ¶æ„" class="headerlink" title="WebApplication ä½“ç³»æ¶æ„"></a>WebApplication ä½“ç³»æ¶æ„</h3><p>WebApplicationContext æ˜¯ä¸“é—¨ä¸º Web åº”ç”¨å‡†å¤‡çš„ï¼Œå®ƒå…è®¸ä»ç›¸å¯¹äº Web æ ¹ç›®å½•çš„è·¯å¾„ä¸­è£…è½½é…ç½®æ–‡ä»¶å®Œæˆåˆå§‹åŒ–å·¥ä½œã€‚ä» WebApplicationContext ä¸­å¯ä»¥è·å¾—ServletContext çš„å¼•ç”¨ï¼Œæ•´ä¸ª Web åº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡å°†ä½œä¸ºå±æ€§æ”¾ç½®åˆ° ServletContext ä¸­ï¼Œä»¥ä¾¿ Web åº”ç”¨ç¯å¢ƒå¯ä»¥è®¿é—® Spring åº”ç”¨ä¸Šä¸‹æ–‡ã€‚</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0Fo7yHGEqLyKswLXWG2hcoC2BIjf3Or55gib5puaaYRRVR5J4LZxKH4Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><h3 id="Spring-Bean-å®šä¹‰"><a href="#Spring-Bean-å®šä¹‰" class="headerlink" title="Spring Bean å®šä¹‰"></a>Spring Bean å®šä¹‰</h3><p>ä¸€ä¸ªSpring Bean çš„å®šä¹‰åŒ…å«å®¹å™¨å¿…çŸ¥çš„æ‰€æœ‰é…ç½®å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬å¦‚ä½•åˆ›å»ºä¸€ä¸ªbeanï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¯¦æƒ…åŠå®ƒçš„ä¾èµ–ã€‚</p><ul><li>Springå…ƒæ•°æ®é…ç½®æ–¹å¼</li><li>XMLé…ç½®æ–‡ä»¶</li><li>åŸºäºæ³¨è§£çš„é…ç½®</li><li>åŸºäºjavaçš„é…ç½®</li></ul><h3 id="Spring-Bean-ä½œç”¨åŸŸ"><a href="#Spring-Bean-ä½œç”¨åŸŸ" class="headerlink" title="Spring Bean ä½œç”¨åŸŸ"></a>Spring Bean ä½œç”¨åŸŸ</h3><p>Spring 3 ä¸­ä¸º Bean å®šä¹‰äº† 5 ä¸­ä½œç”¨åŸŸï¼Œåˆ†åˆ«ä¸º singletonï¼ˆå•ä¾‹ï¼‰ã€prototypeï¼ˆåŸå‹ï¼‰ã€requestã€session å’Œ global sessionï¼Œ5 ç§ä½œç”¨åŸŸè¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li><strong>singleton</strong>ï¼šå•ä¾‹æ¨¡å¼ï¼ˆå¤šçº¿ç¨‹ä¸‹ä¸å®‰å…¨ï¼‰ã€‚Spring IoC å®¹å™¨ä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªå…±äº«çš„ Bean å®ä¾‹ï¼Œæ— è®ºæœ‰å¤šå°‘ä¸ªBean å¼•ç”¨å®ƒï¼Œå§‹ç»ˆæŒ‡å‘åŒä¸€å¯¹è±¡ã€‚è¯¥æ¨¡å¼åœ¨å¤šçº¿ç¨‹ä¸‹æ˜¯ä¸å®‰å…¨çš„ã€‚Singleton ä½œç”¨åŸŸæ˜¯Spring ä¸­çš„ç¼ºçœä½œç”¨åŸŸï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤ºçš„å°† Bean å®šä¹‰ä¸º singleton æ¨¡å¼ï¼Œé…ç½®ä¸ºï¼š</li><li><strong>prototype</strong>:åŸå‹æ¨¡å¼æ¯æ¬¡ä½¿ç”¨æ—¶åˆ›å»ºã€‚æ¯æ¬¡é€šè¿‡ Spring å®¹å™¨è·å– prototype å®šä¹‰çš„ bean æ—¶ï¼Œå®¹å™¨éƒ½å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ï¼Œæ¯ä¸ª Bean å®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§å’ŒçŠ¶æ€ï¼Œè€Œ singleton å…¨å±€åªæœ‰ä¸€ä¸ªå¯¹è±¡ã€‚æ ¹æ®ç»éªŒï¼Œå¯¹æœ‰çŠ¶æ€çš„beanä½¿ç”¨prototypeä½œç”¨åŸŸï¼Œè€Œå¯¹æ— çŠ¶æ€çš„beanä½¿ç”¨singleton ä½œç”¨åŸŸã€‚</li><li><strong>Request</strong>ï¼šä¸€æ¬¡ request ä¸€ä¸ªå®ä¾‹ã€‚åœ¨ä¸€æ¬¡ Http è¯·æ±‚ä¸­ï¼Œå®¹å™¨ä¼šè¿”å›è¯¥ Bean çš„åŒä¸€å®ä¾‹ã€‚è€Œå¯¹ä¸åŒçš„ Http è¯·æ±‚åˆ™ä¼šäº§ç”Ÿæ–°çš„ Beanï¼Œè€Œä¸”è¯¥ bean ä»…åœ¨å½“å‰ Http Request å†…æœ‰æ•ˆ,å½“å‰ Http è¯·æ±‚ç»“æŸï¼Œè¯¥ beanå®ä¾‹ä¹Ÿå°†ä¼šè¢«é”€æ¯ã€‚</li><li><strong>session</strong>ï¼šåœ¨ä¸€æ¬¡ Http Session ä¸­ï¼Œå®¹å™¨ä¼šè¿”å›è¯¥ Bean çš„åŒä¸€å®ä¾‹ã€‚è€Œå¯¹ä¸åŒçš„ Session è¯·æ±‚åˆ™ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼Œè¯¥ bean å®ä¾‹ä»…åœ¨å½“å‰ Session å†…æœ‰æ•ˆã€‚åŒ Http è¯·æ±‚ç›¸åŒï¼Œæ¯ä¸€æ¬¡session è¯·æ±‚åˆ›å»ºæ–°çš„å®ä¾‹ï¼Œè€Œä¸åŒçš„å®ä¾‹ä¹‹é—´ä¸å…±äº«å±æ€§ï¼Œä¸”å®ä¾‹ä»…åœ¨è‡ªå·±çš„ session è¯·æ±‚å†…æœ‰æ•ˆï¼Œè¯·æ±‚ç»“æŸï¼Œåˆ™å®ä¾‹å°†è¢«é”€æ¯ã€‚</li><li><strong>global Session</strong>ï¼šåœ¨ä¸€ä¸ªå…¨å±€çš„ Http Session ä¸­ï¼Œå®¹å™¨ä¼šè¿”å›è¯¥ Bean çš„åŒä¸€ä¸ªå®ä¾‹ï¼Œä»…åœ¨ä½¿ç”¨ portlet context æ—¶æœ‰æ•ˆã€‚</li></ul><h3 id="Springå¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜"><a href="#Springå¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜" class="headerlink" title="Springå¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜"></a>Springå¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜</h3><p>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªæœ‰æ— çŠ¶æ€çš„Beanæ‰å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å…±äº«ï¼Œåœ¨Springä¸­ï¼Œç»å¤§éƒ¨åˆ†Beanéƒ½å¯ä»¥å£°æ˜ä¸ºsingletonä½œç”¨åŸŸï¼Œå› ä¸ºSpringå¯¹ä¸€äº›Beanä¸­éçº¿ç¨‹å®‰å…¨çŠ¶æ€é‡‡ç”¨ThreadLocalè¿›è¡Œå¤„ç†ï¼Œè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><p>ThreadLocalå’Œçº¿ç¨‹åŒæ­¥æœºåˆ¶éƒ½æ˜¯ä¸ºäº†è§£å†³å¤šçº¿ç¨‹ä¸­ç›¸åŒå˜é‡çš„è®¿é—®å†²çªé—®é¢˜ã€‚åŒæ­¥æœºåˆ¶é‡‡ç”¨äº†â€œæ—¶é—´æ¢ç©ºé—´â€çš„æ–¹å¼ï¼Œä»…æä¾›ä¸€ä»½å˜é‡ï¼Œä¸åŒçš„çº¿ç¨‹åœ¨è®¿é—®å‰éœ€è¦è·å–é”ï¼Œæ²¡è·å¾—é”çš„çº¿ç¨‹åˆ™éœ€è¦æ’é˜Ÿã€‚è€ŒThreadLocalé‡‡ç”¨äº†â€œç©ºé—´æ¢æ—¶é—´â€çš„æ–¹å¼ã€‚</p><p>ThreadLocalä¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œéš”ç¦»äº†å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„è®¿é—®å†²çªã€‚å› ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å¯¹è¯¥å˜é‡è¿›è¡ŒåŒæ­¥äº†ã€‚ThreadLocalæä¾›äº†çº¿ç¨‹å®‰å…¨çš„å…±äº«å¯¹è±¡ï¼Œåœ¨ç¼–å†™å¤šçº¿ç¨‹ä»£ç æ—¶ï¼Œå¯ä»¥æŠŠä¸å®‰å…¨çš„å˜é‡å°è£…è¿›ThreadLocalã€‚<a href="http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488067&idx=2&sn=bc20c4f449d5cada1335b24ea6210687&chksm=ceabf50bf9dc7c1d8486a0c1954d658778d5c652355560b65543b39aabee3cdce47732198b33&scene=21#wechat_redirect">å…³æ³¨Javaé¡¹ç›®åˆ†äº«</a></p><h3 id="Spring-Bean-ç”Ÿå‘½å‘¨æœŸ"><a href="#Spring-Bean-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Spring Bean ç”Ÿå‘½å‘¨æœŸ"></a>Spring Bean ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0BfSQX2THg4LXdRh84Yrzg15uRicib8r9jxa7QHxibKKPTjB82DvLw8C7Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><p><strong>å®ä¾‹åŒ–</strong></p><ol><li>å®ä¾‹åŒ–ä¸€ä¸ª Beanï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ newã€‚</li></ol><p><strong>IOC ä¾èµ–æ³¨å…¥</strong></p><ol><li>æŒ‰ç…§ Spring ä¸Šä¸‹æ–‡å¯¹å®ä¾‹åŒ–çš„ Bean è¿›è¡Œé…ç½®ï¼Œä¹Ÿå°±æ˜¯ IOC æ³¨å…¥ã€‚</li></ol><p><strong>setBeanName å®ç°</strong></p><ol><li>å¦‚æœè¿™ä¸ª Bean å·²ç»å®ç°äº† BeanNameAware æ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„ <code>setBeanName(String)</code>æ–¹æ³•ï¼Œæ­¤å¤„ä¼ é€’çš„å°±æ˜¯ Spring é…ç½®æ–‡ä»¶ä¸­ Bean çš„ id å€¼</li></ol><p><strong>BeanFactoryAware å®ç°</strong></p><ol><li>å¦‚æœè¿™ä¸ª Bean å·²ç»å®ç°äº† BeanFactoryAware æ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„ setBeanFactoryï¼Œ</li></ol><p><code>setBeanFactory(BeanFactory)</code>ä¼ é€’çš„æ˜¯ Spring å·¥å‚è‡ªèº«ï¼ˆå¯ä»¥ç”¨è¿™ä¸ªæ–¹å¼æ¥è·å–å…¶å®ƒ Beanï¼Œåªéœ€åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸€ä¸ªæ™®é€šçš„ Bean å°±å¯ä»¥ï¼‰ã€‚</p><p><strong>ApplicationContextAware å®ç°</strong></p><ol><li>å¦‚æœè¿™ä¸ª Bean å·²ç»å®ç°äº† ApplicationContextAware æ¥å£ï¼Œä¼šè°ƒç”¨<code>setApplicationContext(ApplicationContext)</code>æ–¹æ³•ï¼Œä¼ å…¥ Spring ä¸Šä¸‹æ–‡ï¼ˆåŒæ ·è¿™ä¸ªæ–¹å¼ä¹Ÿå¯ä»¥å®ç°æ­¥éª¤ 4 çš„å†…å®¹ï¼Œä½†æ¯” 4 æ›´å¥½ï¼Œå› ä¸º ApplicationContext æ˜¯ BeanFactory çš„å­æ¥å£ï¼Œæœ‰æ›´å¤šçš„å®ç°æ–¹æ³•ï¼‰</li></ol><p><strong>postProcessBeforeInitialization æ¥å£å®ç°-åˆå§‹åŒ–é¢„å¤„ç†</strong></p><ol><li>å¦‚æœè¿™ä¸ª Bean å…³è”äº† BeanPostProcessor æ¥å£ï¼Œå°†ä¼šè°ƒç”¨<code>postProcessBeforeInitialization(Object obj, String s)</code>æ–¹æ³•ï¼ŒBeanPostProcessor ç»å¸¸è¢«ç”¨ä½œæ˜¯ Bean å†…å®¹çš„æ›´æ”¹ï¼Œå¹¶ä¸”ç”±äºè¿™ä¸ªæ˜¯åœ¨ Bean åˆå§‹åŒ–ç»“æŸæ—¶è°ƒç”¨é‚£ä¸ªçš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è¢«åº”ç”¨äºå†…å­˜æˆ–ç¼“å­˜æŠ€æœ¯ã€‚</li></ol><p><strong>init-method</strong></p><ol><li>å¦‚æœ Bean åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­é…ç½®äº† init-method å±æ€§ä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„åˆå§‹åŒ–æ–¹æ³•ã€‚</li></ol><p><strong>postProcessAfterInitialization</strong></p><ol><li>å¦‚æœè¿™ä¸ª Bean å…³è”äº† BeanPostProcessor æ¥å£ï¼Œå°†ä¼šè°ƒç”¨<code>postProcessAfterInitialization(Object obj, String s)</code>æ–¹æ³•ã€‚</li></ol><blockquote><p>æ³¨ï¼šä»¥ä¸Šå·¥ä½œå®Œæˆä»¥åå°±å¯ä»¥åº”ç”¨è¿™ä¸ª Bean äº†ï¼Œé‚£è¿™ä¸ª Bean æ˜¯ä¸€ä¸ª Singleton çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬è°ƒç”¨åŒä¸€ä¸ª id çš„ Bean ä¼šæ˜¯åœ¨å†…å®¹åœ°å€ç›¸åŒçš„å®ä¾‹ï¼Œå½“ç„¶åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥é…ç½®é Singletonã€‚</p></blockquote><p><strong>Destroy è¿‡æœŸè‡ªåŠ¨æ¸…ç†é˜¶æ®µ</strong></p><ol><li>å½“ Bean ä¸å†éœ€è¦æ—¶ï¼Œä¼šç»è¿‡æ¸…ç†é˜¶æ®µï¼Œå¦‚æœ Bean å®ç°äº† DisposableBean è¿™ä¸ªæ¥å£ï¼Œä¼šè°ƒç”¨é‚£ä¸ªå…¶å®ç°çš„ destroy()æ–¹æ³•ï¼›</li></ol><p><strong>destroy-method è‡ªé…ç½®æ¸…ç†</strong></p><ol><li>æœ€åï¼Œå¦‚æœè¿™ä¸ª Bean çš„ Spring é…ç½®ä¸­é…ç½®äº† <code>destroy-method</code> å±æ€§ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„é”€æ¯æ–¹æ³•ã€‚</li></ol><h3 id="beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•"><a href="#beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•" class="headerlink" title="beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•"></a>beanç”Ÿå‘½å‘¨æœŸæ–¹æ³•</h3><p>bean æ ‡ç­¾æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼ˆ<code>init-method</code> å’Œ <code>destroy-method</code>ï¼‰ã€‚ç”¨å®ƒä»¬ä½ å¯ä»¥è‡ªå·±å®šåˆ¶</p><p>åˆå§‹åŒ–å’Œæ³¨é”€æ–¹æ³•ã€‚å®ƒä»¬ä¹Ÿæœ‰ç›¸åº”çš„æ³¨è§£ï¼ˆ<code>@PostConstruct</code> å’Œ<code>@PreDestroy</code>ï¼‰ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attribute">init-method</span>=<span class="hljs-string">&quot;åˆå§‹åŒ–æ–¹æ³•&quot;</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-string">&quot;é”€æ¯æ–¹æ³•&quot;</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿä»€ä¹ˆæ˜¯Spring-inner-beansï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿä»€ä¹ˆæ˜¯Spring-inner-beansï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿä»€ä¹ˆæ˜¯Spring inner beansï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Springçš„å†…éƒ¨beanï¼Ÿä»€ä¹ˆæ˜¯Spring inner beansï¼Ÿ</h3><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œå½“ä¸€ä¸ªbeanä»…è¢«ç”¨ä½œå¦ä¸€ä¸ªbeançš„å±æ€§æ—¶ï¼Œå®ƒèƒ½è¢«å£°æ˜ä¸ºä¸€ä¸ªå†…éƒ¨beanã€‚</p><p>å†…éƒ¨beanå¯ä»¥ç”¨setteræ³¨å…¥â€œå±æ€§â€å’Œæ„é€ æ–¹æ³•æ³¨å…¥â€œæ„é€ å‚æ•°â€çš„æ–¹å¼æ¥å®ç°ï¼Œå†…éƒ¨beané€šå¸¸æ˜¯åŒ¿åçš„ï¼Œå®ƒä»¬çš„Scopeä¸€èˆ¬æ˜¯prototypeã€‚</p><p>Spring ä¾èµ–æ³¨å…¥å››ç§æ–¹å¼æ„é€ å™¨æ³¨å…¥</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/*å¸¦å‚æ•°ï¼Œæ–¹ä¾¿åˆ©ç”¨æ„é€ å™¨è¿›è¡Œæ³¨å…¥*/</span><br> <br> <span class="hljs-keyword">public</span> <span class="hljs-title class_">CatDaoImpl</span>(<span class="hljs-title class_">String</span> message)&#123;<br> <br> <span class="hljs-variable language_">this</span>. message = message;<br> <br> &#125;<br>&lt;bean id=<span class="hljs-string">&quot;CatDaoImpl&quot;</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;com.CatDaoImpl&quot;</span>&gt;<br> <br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot; message &quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span></span><br> <br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><p>setter æ–¹æ³•æ³¨å…¥</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs csharp"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Id</span> &#123;<br> <br> <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> id;<br> <br> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">getId</span>()</span> &#123; <span class="hljs-keyword">return</span> id; &#125;<br> <br> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id</span>)</span> &#123; <span class="hljs-keyword">this</span>.id = id; &#125;<br> <br>&#125;<br>&lt;bean id=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;com.id &quot;</span>&gt; &lt;property name=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">&quot;123&quot;</span>&gt;&lt;/property&gt; &lt;/bean&gt;<br></code></pre></td></tr></table></figure><p>é™æ€å·¥å‚æ³¨å…¥</p><p>é™æ€å·¥å‚é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é€šè¿‡è°ƒç”¨é™æ€å·¥å‚çš„æ–¹æ³•æ¥è·å–è‡ªå·±éœ€è¦çš„å¯¹è±¡ï¼Œä¸ºäº†è®© spring ç®¡ç†æ‰€æœ‰å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡â€å·¥ç¨‹ç±».é™æ€æ–¹æ³•()â€æ¥è·å–å¯¹è±¡ï¼Œè€Œæ˜¯ä¾ç„¶é€šè¿‡ spring æ³¨å…¥çš„å½¢å¼è·å–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs xml">public class DaoFactory &#123; //é™æ€å·¥å‚<br> <br> public static final FactoryDao getStaticFactoryDaoImpl()&#123;<br> <br> return new StaticFacotryDaoImpl();<br> <br> &#125;<br> <br>&#125;<br> <br>public class SpringAction &#123;<br> <br> private FactoryDao staticFactoryDao; //æ³¨å…¥å¯¹è±¡<br> <br> //æ³¨å…¥å¯¹è±¡çš„ set æ–¹æ³•<br> <br> public void setStaticFactoryDao(FactoryDao staticFactoryDao) &#123;<br> <br> this.staticFactoryDao = staticFactoryDao;<br> <br> &#125;<br> <br>&#125;<br> <span class="hljs-comment">&lt;!--factory-method=&quot;getStaticFactoryDaoImpl&quot;æŒ‡å®šè°ƒç”¨å“ªä¸ªå·¥å‚æ–¹æ³•--&gt;</span><br> <br> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;springAction&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot; SpringAction&quot;</span> &gt;</span><br> <br> <span class="hljs-comment">&lt;!--ä½¿ç”¨é™æ€å·¥å‚çš„æ–¹æ³•æ³¨å…¥å¯¹è±¡,å¯¹åº”ä¸‹é¢çš„é…ç½®æ–‡ä»¶--&gt;</span><br> <br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;staticFactoryDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;staticFactoryDao&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br> <br> <span class="hljs-comment">&lt;!--æ­¤å¤„è·å–å¯¹è±¡çš„æ–¹å¼æ˜¯ä»å·¥å‚ç±»ä¸­è·å–é™æ€æ–¹æ³•--&gt;</span><br> <br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;staticFactoryDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;DaoFactory&quot;</span></span><br><span class="hljs-tag"> </span><br><span class="hljs-tag"><span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;getStaticFactoryDaoImpl&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å®ä¾‹å·¥å‚</p><p>å®ä¾‹å·¥å‚çš„æ„æ€æ˜¯è·å–å¯¹è±¡å®ä¾‹çš„æ–¹æ³•ä¸æ˜¯é™æ€çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦é¦–å…ˆ new å·¥å‚ç±»ï¼Œå†è°ƒç”¨æ™®é€šçš„å®ä¾‹æ–¹æ³•ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs xml"> public class DaoFactory &#123; //å®ä¾‹å·¥å‚<br> <br> public FactoryDao getFactoryDaoImpl()&#123;<br> <br> return new FactoryDaoImpl();<br><br> <br> &#125;<br> <br>&#125;<br> <br>public class SpringAction &#123;<br> <br> private FactoryDao factoryDao; //æ³¨å…¥å¯¹è±¡<br> <br> public void setFactoryDao(FactoryDao factoryDao) &#123;<br> <br> this.factoryDao = factoryDao;<br> <br> &#125;<br> <br>&#125;<br> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;springAction&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;SpringAction&quot;</span>&gt;</span><br> <br> <span class="hljs-comment">&lt;!--ä½¿ç”¨å®ä¾‹å·¥å‚çš„æ–¹æ³•æ³¨å…¥å¯¹è±¡,å¯¹åº”ä¸‹é¢çš„é…ç½®æ–‡ä»¶--&gt;</span><br> <br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;factoryDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;factoryDao&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br> <br> <span class="hljs-comment">&lt;!--æ­¤å¤„è·å–å¯¹è±¡çš„æ–¹å¼æ˜¯ä»å·¥å‚ç±»ä¸­è·å–å®ä¾‹æ–¹æ³•--&gt;</span><br> <br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;daoFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.DaoFactory&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br> <br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;factoryDao&quot;</span> <span class="hljs-attr">factory-bean</span>=<span class="hljs-string">&quot;daoFactory&quot;</span></span><br><span class="hljs-tag"> </span><br><span class="hljs-tag"><span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;getFactoryDaoImpl&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-ç§ä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…"><a href="#5-ç§ä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…" class="headerlink" title="5 ç§ä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…"></a>5 ç§ä¸åŒæ–¹å¼çš„è‡ªåŠ¨è£…é…</h3><p>Spring è£…é…åŒ…æ‹¬æ‰‹åŠ¨è£…é…å’Œè‡ªåŠ¨è£…é…ï¼Œæ‰‹åŠ¨è£…é…æ˜¯æœ‰åŸºäº xml è£…é…ã€æ„é€ æ–¹æ³•ã€setter æ–¹æ³•ç­‰è‡ªåŠ¨è£…é…æœ‰äº”ç§è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å¯¼ Spring å®¹å™¨ç”¨è‡ªåŠ¨è£…é…æ–¹å¼æ¥è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</p><ul><li><code>no</code>ï¼šé»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œé€šè¿‡æ˜¾å¼è®¾ç½® ref å±æ€§æ¥è¿›è¡Œè£…é…ã€‚</li><li><code>byName</code>ï¼šé€šè¿‡å‚æ•°å è‡ªåŠ¨è£…é…ï¼ŒSpring å®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç° bean çš„ autowire å±æ€§è¢«è®¾ç½®æˆ byNameï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥ bean çš„å±æ€§å…·æœ‰ç›¸åŒåå­—çš„ beanã€‚</li><li><code>byType</code>ï¼šé€šè¿‡å‚æ•°ç±»å‹è‡ªåŠ¨è£…é…ï¼ŒSpring å®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç° bean çš„ autowire å±æ€§è¢«è®¾ç½®æˆ byTypeï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥ bean çš„å±æ€§å…·æœ‰ç›¸åŒç±»å‹çš„ beanã€‚å¦‚æœæœ‰å¤šä¸ª bean ç¬¦åˆæ¡ä»¶ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</li><li><code>constructor</code>ï¼šè¿™ä¸ªæ–¹å¼ç±»ä¼¼äº byTypeï¼Œ ä½†æ˜¯è¦æä¾›ç»™æ„é€ å™¨å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰ç¡®å®šçš„å¸¦å‚æ•°çš„æ„é€ å™¨å‚æ•°ç±»å‹ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li><li><code>autodetect</code>ï¼šé¦–å…ˆå°è¯•ä½¿ç”¨ constructor æ¥è‡ªåŠ¨è£…é…ï¼Œå¦‚æœæ— æ³•å·¥ä½œï¼Œåˆ™ä½¿ç”¨ byType æ–¹å¼ã€‚</li></ul><h3 id="Spring-ä¸­æ³¨å…¥ä¸€ä¸ª-Java-Collection"><a href="#Spring-ä¸­æ³¨å…¥ä¸€ä¸ª-Java-Collection" class="headerlink" title="Spring ä¸­æ³¨å…¥ä¸€ä¸ª Java Collection"></a>Spring ä¸­æ³¨å…¥ä¸€ä¸ª Java Collection</h3><p>Spring æä¾›äº†ä»¥ä¸‹å››ç§é›†åˆç±»çš„é…ç½®å…ƒç´ ï¼š</p><ul><li><code>&lt;list&gt;</code> : è¯¥æ ‡ç­¾ç”¨æ¥è£…é…å¯é‡å¤çš„ list å€¼ã€‚</li><li><code>&lt;set&gt;</code> : è¯¥æ ‡ç­¾ç”¨æ¥è£…é…æ²¡æœ‰é‡å¤çš„ set å€¼ã€‚</li><li><code>&lt;map&gt;</code>: è¯¥æ ‡ç­¾å¯ç”¨æ¥æ³¨å…¥é”®å’Œå€¼å¯ä»¥ä¸ºä»»ä½•ç±»å‹çš„é”®å€¼å¯¹ã€‚</li><li><code>&lt;props&gt;</code> : è¯¥æ ‡ç­¾æ”¯æŒæ³¨å…¥é”®å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„é”®å€¼å¯¹ã€‚</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span> <br> <span class="hljs-comment">&lt;!-- Definition for javaCollection --&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;javaCollection&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.howtodoinjava.JavaCollection&quot;</span>&gt;</span> <br> <span class="hljs-comment">&lt;!-- java.util.List --&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;customList&quot;</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>INDIA<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Pakistan<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>USA<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>UK<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> <br> <br> <span class="hljs-comment">&lt;!-- java.util.Set --&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;customSet&quot;</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>INDIA<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Pakistan<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>USA<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>UK<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> <br> <br> <span class="hljs-comment">&lt;!-- java.util.Map --&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;customMap&quot;</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;INDIA&quot;</span>/&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;2&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Pakistan&quot;</span>/&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;3&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;USA&quot;</span>/&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;4&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;UK&quot;</span>/&gt;</span> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> <br> <br> <span class="hljs-comment">&lt;!-- java.util.Properties --&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;customProperies&quot;</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;admin&quot;</span>&gt;</span>admin@nospam.com<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;support&quot;</span>&gt;</span>support@nospam.com<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> <br> <br> <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹"><a href="#ä½¿ç”¨-Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹" class="headerlink" title="ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹"></a>ä½¿ç”¨@Autowiredæ³¨è§£è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹</h3><p>åœ¨ä½¿ç”¨@Autowiredæ³¨è§£ä¹‹å‰éœ€è¦åœ¨Springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œ<code>&lt;context:annotation-config /&gt;</code>ã€‚</p><p>åœ¨å¯åŠ¨spring IoCæ—¶ï¼Œå®¹å™¨è‡ªåŠ¨è£…è½½äº†ä¸€ä¸ª<code>AutowiredAnnotationBeanPostProcessor</code>åç½®å¤„ç†å™¨ï¼Œå½“å®¹å™¨æ‰«æåˆ°<code>@Autowied</code>ã€<code>@Resource</code>æˆ–<code>@Inject</code>æ—¶ï¼Œå°±ä¼šåœ¨IoCå®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾éœ€è¦çš„beanï¼Œå¹¶è£…é…ç»™è¯¥å¯¹è±¡çš„å±æ€§ã€‚åœ¨ä½¿ç”¨<code>@Autowired</code>æ—¶ï¼Œé¦–å…ˆåœ¨å®¹å™¨ä¸­æŸ¥è¯¢å¯¹åº”ç±»å‹çš„beanï¼š</p><ul><li>å¦‚æœæŸ¥è¯¢ç»“æœåˆšå¥½ä¸ºä¸€ä¸ªï¼Œå°±å°†è¯¥beanè£…é…ç»™<code>@Autowired</code>æŒ‡å®šçš„æ•°æ®ï¼›</li><li>å¦‚æœæŸ¥è¯¢çš„ç»“æœä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆ<code>@Autowired</code>ä¼šæ ¹æ®åç§°æ¥æŸ¥æ‰¾ï¼›</li><li>å¦‚æœä¸Šè¿°æŸ¥æ‰¾çš„ç»“æœä¸ºç©ºï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è§£å†³æ–¹æ³•æ—¶ï¼Œä½¿ç”¨<code>required=false</code>ã€‚<a href="http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488067&idx=2&sn=bc20c4f449d5cada1335b24ea6210687&chksm=ceabf50bf9dc7c1d8486a0c1954d658778d5c652355560b65543b39aabee3cdce47732198b33&scene=21#wechat_redirect">å…³æ³¨Javaé¡¹ç›®åˆ†äº«</a></li></ul><h2 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h2><h3 id="AOPåŸç†"><a href="#AOPåŸç†" class="headerlink" title="AOPåŸç†"></a>AOPåŸç†</h3><p>OOP(Object-Oriented Programming)é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶é€‚ç”¨äºå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚</p><p>AOP(Aspect-Oriented Programming)ï¼Œä¸€èˆ¬ç§°ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œä½œä¸ºé¢å‘å¯¹è±¡çš„ä¸€ç§è¡¥å……ï¼Œç”¨äºå°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œä½†å´å¯¹å¤šä¸ªå¯¹è±¡äº§ç”Ÿå½±å“çš„å…¬å…±è¡Œä¸ºå’Œé€»è¾‘ï¼ŒæŠ½å–å¹¶å°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—è¢«å‘½åä¸ºâ€œåˆ‡é¢â€ï¼ˆAspectï¼‰ï¼Œå‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½äº†æ¨¡å—é—´çš„è€¦åˆåº¦ï¼ŒåŒæ—¶æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚</p><p>AOP ä¸»è¦åº”ç”¨åœºæ™¯æœ‰</p><ul><li>Authentication æƒé™</li><li>Caching ç¼“å­˜</li><li>Context passing å†…å®¹ä¼ é€’</li><li>Error handling é”™è¯¯å¤„ç†</li><li>Lazy loading æ‡’åŠ è½½</li><li>Debugging è°ƒè¯•</li><li>logging, tracing, profiling and monitoring è®°å½•è·Ÿè¸ª ä¼˜åŒ– æ ¡å‡†</li><li>Performance optimization æ€§èƒ½ä¼˜åŒ–</li><li>Persistence æŒä¹…åŒ–</li><li>Resource pooling èµ„æºæ± </li><li>Synchronization åŒæ­¥</li><li>Transactions äº‹åŠ¡</li></ul><h3 id="AOP-æ ¸å¿ƒæ¦‚å¿µ"><a href="#AOP-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="AOP æ ¸å¿ƒæ¦‚å¿µ"></a>AOP æ ¸å¿ƒæ¦‚å¿µ</h3><ul><li><p>åˆ‡é¢ï¼ˆaspectï¼‰ï¼šç±»æ˜¯å¯¹ç‰©ä½“ç‰¹å¾çš„æŠ½è±¡ï¼Œåˆ‡é¢å°±æ˜¯å¯¹æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æŠ½è±¡</p></li><li><p>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šå¯¹å“ªäº›æ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œæ‹¦æˆªåæ€ä¹ˆå¤„ç†ï¼Œè¿™äº›å…³æ³¨ç‚¹ç§°ä¹‹ä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹</p></li><li><p>è¿æ¥ç‚¹ï¼ˆjoinpointï¼‰ï¼šè¢«æ‹¦æˆªåˆ°çš„ç‚¹ï¼Œå› ä¸º Spring åªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼Œæ‰€ä»¥åœ¨ Springä¸­è¿æ¥ç‚¹æŒ‡çš„å°±æ˜¯è¢«æ‹¦æˆªåˆ°çš„æ–¹æ³•ï¼Œå®é™…ä¸Šè¿æ¥ç‚¹è¿˜å¯ä»¥æ˜¯å­—æ®µæˆ–è€…æ„é€ å™¨</p></li><li><p>åˆ‡å…¥ç‚¹ï¼ˆpointcutï¼‰ï¼šå¯¹è¿æ¥ç‚¹è¿›è¡Œæ‹¦æˆªçš„å®šä¹‰</p></li><li><p>é€šçŸ¥ï¼ˆadviceï¼‰ï¼šæ‰€è°“é€šçŸ¥æŒ‡çš„å°±æ˜¯æŒ‡æ‹¦æˆªåˆ°è¿æ¥ç‚¹ä¹‹åè¦æ‰§è¡Œçš„ä»£ç ï¼Œé€šçŸ¥åˆ†ä¸ºå‰ç½®ã€åç½®ã€å¼‚å¸¸ã€æœ€ç»ˆã€ç¯ç»•é€šçŸ¥äº”ç±»</p></li><li><p>ç›®æ ‡å¯¹è±¡ï¼šä»£ç†çš„ç›®æ ‡å¯¹è±¡</p></li><li><p>ç»‡å…¥ï¼ˆweaveï¼‰ï¼šå°†åˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶å¯¼è‡´ä»£ç†å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹</p></li><li><ul><li>ç¼–è¯‘æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»ç¼–è¯‘æ—¶è¢«ç»‡å…¥ã€‚AspectJçš„ç»‡å…¥ç¼–è¯‘å™¨æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢çš„ï¼›</li><li>ç±»åŠ è½½æœŸï¼šåˆ‡é¢åœ¨ç›®æ ‡ç±»åŠ è½½åˆ°JVMæ—¶è¢«ç»‡å…¥ã€‚éœ€è¦ç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œå®ƒå¯ä»¥åœ¨ç›®æ ‡ç±»è¢«å¼•å…¥åº”ç”¨ä¹‹å‰å¢å¼ºè¯¥ç›®æ ‡ç±»çš„å­—èŠ‚ç ã€‚AspectJ5çš„åŠ è½½æ—¶ç»‡å…¥å°±æ”¯æŒä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ï¼›</li><li>è¿è¡ŒæœŸï¼šåˆ‡é¢åœ¨åº”ç”¨è¿è¡Œçš„æŸä¸ªæ—¶åˆ»è¢«ç»‡å…¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ç»‡å…¥åˆ‡é¢æ—¶ï¼ŒAOPå®¹å™¨ä¼šä¸ºç›®æ ‡å¯¹è±¡åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚SpringAOPå°±æ˜¯ä»¥è¿™ç§æ–¹å¼ç»‡å…¥åˆ‡é¢ã€‚</li></ul></li><li><p>å¼•å…¥ï¼ˆintroductionï¼‰ï¼šåœ¨ä¸ä¿®æ”¹ä»£ç çš„å‰æä¸‹ï¼Œå¼•å…¥å¯ä»¥åœ¨è¿è¡ŒæœŸä¸ºç±»åŠ¨æ€åœ°æ·»åŠ ä¸€äº›æ–¹æ³•æˆ–å­—æ®µ</p></li></ul><h3 id="Spring-ä¸­çš„ä»£ç†"><a href="#Spring-ä¸­çš„ä»£ç†" class="headerlink" title="Spring ä¸­çš„ä»£ç†"></a>Spring ä¸­çš„ä»£ç†</h3><p>å°† Advice åº”ç”¨äºç›®æ ‡å¯¹è±¡ååˆ›å»ºçš„å¯¹è±¡ç§°ä¸ºä»£ç†ã€‚åœ¨å®¢æˆ·ç«¯å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡æ˜¯ç›¸åŒçš„ã€‚</p><blockquote><p>Advice + Target Object &#x3D; Proxy</p></blockquote><h3 id="AOP-å®ç°æ–¹å¼"><a href="#AOP-å®ç°æ–¹å¼" class="headerlink" title="AOP å®ç°æ–¹å¼"></a>AOP å®ç°æ–¹å¼</h3><p>AOPå®ç°çš„å…³é”®åœ¨äºä»£ç†æ¨¡å¼ï¼ŒAOPä»£ç†ä¸»è¦åˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ã€‚</p><ul><li>AspectJ é™æ€ä»£ç†çš„å¢å¼ºï¼Œæ‰€è°“é™æ€ä»£ç†ï¼Œå°±æ˜¯AOPæ¡†æ¶ä¼šåœ¨ç¼–è¯‘é˜¶æ®µç”ŸæˆAOPä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºç¼–è¯‘æ—¶å¢å¼ºï¼Œä»–ä¼šåœ¨ç¼–è¯‘é˜¶æ®µå°†AspectJ(åˆ‡é¢)ç»‡å…¥åˆ°Javaå­—èŠ‚ç ä¸­ï¼Œè¿è¡Œçš„æ—¶å€™å°±æ˜¯å¢å¼ºä¹‹åçš„AOPå¯¹è±¡ã€‚</li><li>Spring AOPä½¿ç”¨çš„åŠ¨æ€ä»£ç†ï¼Œæ‰€è°“çš„åŠ¨æ€ä»£ç†å°±æ˜¯è¯´AOPæ¡†æ¶ä¸ä¼šå»ä¿®æ”¹å­—èŠ‚ç ï¼Œè€Œæ˜¯æ¯æ¬¡è¿è¡Œæ—¶åœ¨å†…å­˜ä¸­ä¸´æ—¶ä¸ºæ–¹æ³•ç”Ÿæˆä¸€ä¸ªAOPå¯¹è±¡ï¼Œè¿™ä¸ªAOPå¯¹è±¡åŒ…å«äº†ç›®æ ‡å¯¹è±¡çš„å…¨éƒ¨æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç‰¹å®šçš„åˆ‡ç‚¹åšäº†å¢å¼ºå¤„ç†ï¼Œå¹¶å›è°ƒåŸå¯¹è±¡çš„æ–¹æ³•ã€‚</li></ul><h3 id="AOP-ä¸¤ç§ä»£ç†æ–¹å¼"><a href="#AOP-ä¸¤ç§ä»£ç†æ–¹å¼" class="headerlink" title="AOP ä¸¤ç§ä»£ç†æ–¹å¼"></a>AOP ä¸¤ç§ä»£ç†æ–¹å¼</h3><p>Spring æä¾›äº†ä¸¤ç§æ–¹å¼æ¥ç”Ÿæˆä»£ç†å¯¹è±¡: JDK Proxy å’Œ Cglibï¼Œå…·ä½“ä½¿ç”¨å“ªç§æ–¹å¼ç”Ÿæˆç”±AopProxyFactory æ ¹æ® AdvisedSupport å¯¹è±¡çš„é…ç½®æ¥å†³å®šã€‚é»˜è®¤çš„ç­–ç•¥æ˜¯å¦‚æœç›®æ ‡ç±»æ˜¯æ¥å£ï¼Œåˆ™ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼Œå¦åˆ™ä½¿ç”¨ Cglib æ¥ç”Ÿæˆä»£ç†ã€‚</p><h3 id="JDK-åŠ¨æ€æ¥å£ä»£ç†"><a href="#JDK-åŠ¨æ€æ¥å£ä»£ç†" class="headerlink" title="JDK åŠ¨æ€æ¥å£ä»£ç†"></a>JDK åŠ¨æ€æ¥å£ä»£ç†</h3><p>JDK åŠ¨æ€ä»£ç†ä¸»è¦æ¶‰åŠåˆ° java.lang.reflect åŒ…ä¸­çš„ä¸¤ä¸ªç±»ï¼šProxy å’Œ InvocationHandlerã€‚</p><p>InvocationHandleræ˜¯ä¸€ä¸ªæ¥å£ï¼Œé€šè¿‡å®ç°è¯¥æ¥å£å®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼Œå¹¶é€šè¿‡åå°„æœºåˆ¶è°ƒç”¨ç›®æ ‡ç±»çš„ä»£ç ï¼ŒåŠ¨æ€å°†æ¨ªåˆ‡é€»è¾‘å’Œä¸šåŠ¡é€»è¾‘ç¼–åˆ¶åœ¨ä¸€èµ·ã€‚</p><p>Proxy åˆ©ç”¨ InvocationHandler åŠ¨æ€åˆ›å»ºä¸€ä¸ªç¬¦åˆæŸä¸€æ¥å£çš„å®ä¾‹ï¼Œç”Ÿæˆç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ã€‚</p><h3 id="CGLib-åŠ¨æ€ä»£ç†"><a href="#CGLib-åŠ¨æ€ä»£ç†" class="headerlink" title="CGLib åŠ¨æ€ä»£ç†"></a>CGLib åŠ¨æ€ä»£ç†</h3><p>CGLib å…¨ç§°ä¸º Code Generation Libraryï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„é«˜æ€§èƒ½ï¼Œé«˜è´¨é‡çš„ä»£ç ç”Ÿæˆç±»åº“ï¼Œå¯ä»¥åœ¨è¿è¡ŒæœŸæ‰©å±• Java ç±»ä¸å®ç° Java æ¥å£ï¼ŒCGLib å°è£…äº† asmï¼Œå¯ä»¥å†è¿è¡ŒæœŸåŠ¨æ€ç”Ÿæˆæ–°çš„ classã€‚å’Œ JDK åŠ¨æ€ä»£ç†ç›¸æ¯”è¾ƒï¼šJDK åˆ›å»ºä»£ç†æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œå°±æ˜¯åªèƒ½ä¸ºæ¥å£åˆ›å»ºä»£ç†å®ä¾‹ï¼Œè€Œå¯¹äºæ²¡æœ‰é€šè¿‡æ¥å£å®šä¹‰ä¸šåŠ¡æ–¹æ³•çš„ç±»ï¼Œåˆ™å¯ä»¥é€šè¿‡ CGLib åˆ›å»ºåŠ¨æ€ä»£ç†ã€‚</p><p>å®ç°åŸç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Aspect</span><br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionDemo</span> &#123;<br> <br> <span class="hljs-meta">@Pointcut(value=&quot;execution(* com.yangxin.core.service.*.*.*(..))&quot;)</span><br> <br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">point</span><span class="hljs-params">()</span>&#123;<br> <br> &#125;<br> <br> <span class="hljs-meta">@Before(value=&quot;point()&quot;)</span><br> <br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>&#123;<br> <br> System.out.println(<span class="hljs-string">&quot;transaction begin&quot;</span>);<br> <br> &#125;<br> <br> <span class="hljs-meta">@AfterReturning(value = &quot;point()&quot;)</span><br> <br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span>&#123;<br> <br> System.out.println(<span class="hljs-string">&quot;transaction commit&quot;</span>);<br> <br> &#125;<br> <br> <span class="hljs-meta">@Around(&quot;point()&quot;)</span><br> <br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable&#123;<br> <br> System.out.println(<span class="hljs-string">&quot;transaction begin&quot;</span>);<br> <br> joinPoint.proceed();<br> <br> System.out.println(<span class="hljs-string">&quot;transaction commit&quot;</span>);<br> <br> &#125; &#125;<br></code></pre></td></tr></table></figure><h3 id="Springåœ¨è¿è¡Œæ—¶é€šçŸ¥å¯¹è±¡"><a href="#Springåœ¨è¿è¡Œæ—¶é€šçŸ¥å¯¹è±¡" class="headerlink" title="Springåœ¨è¿è¡Œæ—¶é€šçŸ¥å¯¹è±¡"></a>Springåœ¨è¿è¡Œæ—¶é€šçŸ¥å¯¹è±¡</h3><p>é€šè¿‡åœ¨ä»£ç†ç±»ä¸­åŒ…è£¹åˆ‡é¢ï¼ŒSpringåœ¨è¿è¡ŒæœŸæŠŠåˆ‡é¢ç»‡å…¥åˆ°Springç®¡ç†çš„beanä¸­ã€‚ä»£ç†å°è£…äº†ç›®æ ‡ç±»ï¼Œå¹¶æ‹¦æˆªè¢«é€šçŸ¥æ–¹æ³•çš„è°ƒç”¨ï¼Œå†æŠŠè°ƒç”¨è½¬å‘ç»™çœŸæ­£çš„ç›®æ ‡beanã€‚å½“ä»£ç†æ‹¦æˆªåˆ°æ–¹æ³•è°ƒç”¨æ—¶ï¼Œåœ¨è°ƒç”¨ç›®æ ‡beanæ–¹æ³•ä¹‹å‰ï¼Œä¼šæ‰§è¡Œåˆ‡é¢é€»è¾‘ã€‚</p><p>ç›´åˆ°åº”ç”¨éœ€è¦è¢«ä»£ç†çš„beanæ—¶ï¼ŒSpringæ‰åˆ›å»ºä»£ç†å¯¹è±¡ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯ApplicationContextçš„è¯ï¼Œåœ¨ApplicationContextä»BeanFactoryä¸­åŠ è½½æ‰€æœ‰beançš„æ—¶å€™ï¼ŒSpringæ‰ä¼šåˆ›å»ºè¢«ä»£ç†çš„å¯¹è±¡ã€‚å› ä¸ºSpringè¿è¡Œæ—¶æ‰åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ç‰¹æ®Šçš„ç¼–è¯‘å™¨æ¥ç»‡å…¥SpringAOPçš„åˆ‡é¢ã€‚</p><h3 id="Springåªæ”¯æŒæ–¹æ³•çº§åˆ«çš„è¿æ¥ç‚¹"><a href="#Springåªæ”¯æŒæ–¹æ³•çº§åˆ«çš„è¿æ¥ç‚¹" class="headerlink" title="Springåªæ”¯æŒæ–¹æ³•çº§åˆ«çš„è¿æ¥ç‚¹"></a>Springåªæ”¯æŒæ–¹æ³•çº§åˆ«çš„è¿æ¥ç‚¹</h3><p>å› ä¸ºSpringåŸºäºåŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥Springåªæ”¯æŒæ–¹æ³•è¿æ¥ç‚¹ã€‚Springç¼ºå°‘å¯¹å­—æ®µè¿æ¥ç‚¹çš„æ”¯æŒï¼Œè€Œä¸”å®ƒä¸æ”¯æŒæ„é€ å™¨è¿æ¥ç‚¹ã€‚æ–¹æ³•ä¹‹å¤–çš„è¿æ¥ç‚¹æ‹¦æˆªåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨Aspectæ¥è¡¥å……ã€‚</p><p>åœ¨Spring AOP ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ spring aop ä¸­ concern å’Œ cross-cutting concern çš„ä¸åŒä¹‹å¤„</p><p>å…³æ³¨ç‚¹ï¼ˆconcernï¼‰æ˜¯åº”ç”¨ä¸­ä¸€ä¸ªæ¨¡å—çš„è¡Œä¸ºï¼Œä¸€ä¸ªå…³æ³¨ç‚¹å¯èƒ½ä¼šè¢«å®šä¹‰æˆä¸€ä¸ªæˆ‘ä»¬æƒ³å®ç°çš„ä¸€ä¸ªåŠŸèƒ½ã€‚</p><p>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcross-cutting concernï¼‰æ˜¯ä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œæ­¤å…³æ³¨ç‚¹æ˜¯æ•´ä¸ªåº”ç”¨éƒ½ä¼šä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¹¶å½±å“æ•´ä¸ªåº”ç”¨ï¼Œæ¯”å¦‚æ—¥å¿—ï¼Œå®‰å…¨å’Œæ•°æ®ä¼ è¾“ï¼Œå‡ ä¹åº”ç”¨çš„æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦çš„åŠŸèƒ½ã€‚å› æ­¤è¿™äº›éƒ½å±äºæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚</p><h3 id="Springé€šçŸ¥ç±»å‹"><a href="#Springé€šçŸ¥ç±»å‹" class="headerlink" title="Springé€šçŸ¥ç±»å‹"></a>Springé€šçŸ¥ç±»å‹</h3><p>åœ¨AOPæœ¯è¯­ä¸­ï¼Œåˆ‡é¢çš„å·¥ä½œè¢«ç§°ä¸ºé€šçŸ¥ï¼Œå®é™…ä¸Šæ˜¯ç¨‹åºæ‰§è¡Œæ—¶è¦é€šè¿‡SpringAOPæ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚Springåˆ‡é¢å¯ä»¥åº”ç”¨5ç§ç±»å‹çš„é€šçŸ¥ï¼š</p><ul><li>å‰ç½®é€šçŸ¥ï¼ˆBeforeï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰è°ƒç”¨é€šçŸ¥åŠŸèƒ½ï¼›</li><li>åç½®é€šçŸ¥ï¼ˆAfterï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•å®Œæˆä¹‹åè°ƒç”¨é€šçŸ¥ï¼Œæ­¤æ—¶ä¸ä¼šå…³å¿ƒæ–¹æ³•çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼›</li><li>è¿”å›é€šçŸ¥ï¼ˆAfter-returning ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åè°ƒç”¨é€šçŸ¥ï¼›</li><li>å¼‚å¸¸é€šçŸ¥ï¼ˆAfter-throwingï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åè°ƒç”¨é€šçŸ¥ï¼›</li><li>ç¯ç»•é€šçŸ¥ï¼ˆAroundï¼‰ï¼šé€šçŸ¥åŒ…è£¹äº†è¢«é€šçŸ¥çš„æ–¹æ³•ï¼Œåœ¨è¢«é€šçŸ¥çš„æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œè°ƒç”¨ä¹‹åæ‰§è¡Œè‡ªå®šä¹‰çš„è¡Œä¸ºã€‚</li></ul><h4 id="åŒä¸€ä¸ªaspectï¼Œä¸åŒadviceçš„æ‰§è¡Œé¡ºåºï¼š"><a href="#åŒä¸€ä¸ªaspectï¼Œä¸åŒadviceçš„æ‰§è¡Œé¡ºåºï¼š" class="headerlink" title="åŒä¸€ä¸ªaspectï¼Œä¸åŒadviceçš„æ‰§è¡Œé¡ºåºï¼š"></a>åŒä¸€ä¸ªaspectï¼Œä¸åŒadviceçš„æ‰§è¡Œé¡ºåºï¼š</h4><p>æ²¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š</p><ul><li>around before advice</li><li>before advice</li><li>target method æ‰§è¡Œ</li><li>around after advice</li><li>after advice</li><li>afterReturning</li></ul><p>æœ‰å¼‚å¸¸æƒ…å†µä¸‹çš„æ‰§è¡Œé¡ºåºï¼š</p><ul><li>around before advice</li><li>before advice</li><li>target method æ‰§è¡Œ</li><li>around after advice</li><li>after advice</li><li>afterThrowing:å¼‚å¸¸å‘ç”Ÿ</li><li>java.lang.RuntimeException: å¼‚å¸¸å‘ç”Ÿ</li></ul><h2 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h2><h3 id="Spring-MVC-åŸç†"><a href="#Spring-MVC-åŸç†" class="headerlink" title="Spring MVC åŸç†"></a>Spring MVC åŸç†</h3><p>Spring çš„æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ï¼ˆMVCï¼‰æ¡†æ¶æ˜¯å›´ç»•ä¸€ä¸ª DispatcherServlet æ¥è®¾è®¡çš„ï¼Œè¿™ä¸ª Servletä¼šæŠŠè¯·æ±‚åˆ†å‘ç»™å„ä¸ªå¤„ç†å™¨ï¼Œå¹¶æ”¯æŒå¯é…ç½®çš„å¤„ç†å™¨æ˜ å°„ã€è§†å›¾æ¸²æŸ“ã€æœ¬åœ°åŒ–ã€æ—¶åŒºä¸ä¸»é¢˜æ¸²æŸ“ç­‰ï¼Œç”šè‡³è¿˜èƒ½æ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€‚</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p><strong>Http è¯·æ±‚åˆ° DispatcherServlet</strong></p><p>(1) å®¢æˆ·ç«¯è¯·æ±‚æäº¤åˆ° DispatcherServletã€‚</p><p><strong>HandlerMapping å¯»æ‰¾å¤„ç†å™¨</strong></p><p>(2) ç”± DispatcherServlet æ§åˆ¶å™¨æŸ¥è¯¢ä¸€ä¸ªæˆ–å¤šä¸ª HandlerMappingï¼Œæ‰¾åˆ°å¤„ç†è¯·æ±‚çš„Controllerã€‚</p><p><strong>è°ƒç”¨å¤„ç†å™¨ Controller</strong></p><p>(3) DispatcherServlet å°†è¯·æ±‚æäº¤åˆ° Controllerã€‚</p><p><strong>Controller è°ƒç”¨ä¸šåŠ¡é€»è¾‘å¤„ç†åï¼Œè¿”å› ModelAndView</strong></p><p>(4)(5)è°ƒç”¨ä¸šåŠ¡å¤„ç†å’Œè¿”å›ç»“æœï¼šController è°ƒç”¨ä¸šåŠ¡é€»è¾‘å¤„ç†åï¼Œè¿”å› ModelAndViewã€‚</p><p><strong>DispatcherServlet æŸ¥è¯¢ ModelAndView</strong></p><p>(6)(7)å¤„ç†è§†å›¾æ˜ å°„å¹¶è¿”å›æ¨¡å‹ï¼šDispatcherServlet æŸ¥è¯¢ä¸€ä¸ªæˆ–å¤šä¸ª ViewResoler è§†å›¾è§£æå™¨ï¼Œæ‰¾åˆ° ModelAndView æŒ‡å®šçš„è§†å›¾ã€‚</p><p><strong>ModelAndView åé¦ˆæµè§ˆå™¨ HTTP</strong></p><p>(8) Http å“åº”ï¼šè§†å›¾è´Ÿè´£å°†ç»“æœæ˜¾ç¤ºåˆ°å®¢æˆ·ç«¯ã€‚</p><h2 id="Spring-DATA"><a href="#Spring-DATA" class="headerlink" title="Spring DATA"></a>Spring DATA</h2><h3 id="Spring-ORMç†è§£"><a href="#Spring-ORMç†è§£" class="headerlink" title="Spring ORMç†è§£"></a>Spring ORMç†è§£</h3><p>Spring é€šè¿‡æä¾›ORMæ¨¡å—ï¼Œæ”¯æŒæˆ‘ä»¬åœ¨ç›´æ¥JDBCä¹‹ä¸Šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡&#x2F;å…³ç³»æ˜ å°„æ˜ å°„(ORM)å·¥å…·ï¼ŒSpring æ”¯æŒé›†æˆä¸»æµçš„ORMæ¡†æ¶ï¼Œå¦‚Hiberateï¼ŒJDOå’Œ iBATISï¼ŒJPAï¼ŒTopLinkï¼ŒJDOï¼ŒOJB ã€‚Springçš„äº‹åŠ¡ç®¡ç†åŒæ ·æ”¯æŒä»¥ä¸Šæ‰€æœ‰ORMæ¡†æ¶åŠJDBCã€‚</p><p><strong>è§£é‡ŠJDBCæŠ½è±¡å’ŒDAOæ¨¡å—</strong></p><p>é€šè¿‡ä½¿ç”¨JDBCæŠ½è±¡å’ŒDAOæ¨¡å—ï¼Œä¿è¯æ•°æ®åº“ä»£ç çš„ç®€æ´ï¼Œå¹¶èƒ½é¿å…æ•°æ®åº“èµ„æºé”™è¯¯å…³é—­å¯¼è‡´çš„é—®é¢˜ï¼Œå®ƒåœ¨å„ç§ä¸åŒçš„æ•°æ®åº“çš„é”™è¯¯ä¿¡æ¯ä¹‹ä¸Šï¼Œæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å¼‚å¸¸è®¿é—®å±‚ã€‚å®ƒè¿˜åˆ©ç”¨Springçš„AOP æ¨¡å—ç»™Springåº”ç”¨ä¸­çš„å¯¹è±¡æä¾›äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚</p><h3 id="Spring-DAO-çš„æ”¯æŒ"><a href="#Spring-DAO-çš„æ”¯æŒ" class="headerlink" title="Spring DAO çš„æ”¯æŒ"></a>Spring DAO çš„æ”¯æŒ</h3><p>Spring DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰ ä½¿å¾— JDBCï¼ŒHibernate æˆ– JDO è¿™æ ·çš„æ•°æ®è®¿é—®æŠ€æœ¯æ›´å®¹æ˜“ä»¥ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼å·¥ä½œã€‚è¿™ä½¿å¾—ç”¨æˆ·å®¹æ˜“åœ¨æŒä¹…æ€§æŠ€æœ¯ä¹‹é—´åˆ‡æ¢ã€‚å®ƒè¿˜å…è®¸æ‚¨åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œæ— éœ€è€ƒè™‘æ•è·æ¯ç§æŠ€æœ¯ä¸åŒçš„å¼‚å¸¸ã€‚</p><h3 id="Spring-JDBC-API"><a href="#Spring-JDBC-API" class="headerlink" title="Spring JDBC API"></a>Spring JDBC API</h3><ul><li>JdbcTemplate</li><li>SimpleJdbcTemplate</li><li>NamedParameterJdbcTemplate</li><li>SimpleJdbcInsert</li><li>SimpleJdbcCall</li></ul><h3 id="JdbcTemplateæ˜¯ä»€ä¹ˆ"><a href="#JdbcTemplateæ˜¯ä»€ä¹ˆ" class="headerlink" title="JdbcTemplateæ˜¯ä»€ä¹ˆ"></a>JdbcTemplateæ˜¯ä»€ä¹ˆ</h3><p>JdbcTemplate ç±»æä¾›äº†å¾ˆå¤šä¾¿åˆ©çš„æ–¹æ³•è§£å†³è¯¸å¦‚æŠŠæ•°æ®åº“æ•°æ®è½¬å˜æˆåŸºæœ¬æ•°æ®ç±»å‹æˆ–å¯¹è±¡ï¼Œæ‰§è¡Œå†™å¥½çš„æˆ–å¯è°ƒç”¨çš„æ•°æ®åº“æ“ä½œè¯­å¥ï¼Œæä¾›è‡ªå®šä¹‰çš„æ•°æ®é”™è¯¯å¤„ç†ã€‚</p><h3 id="ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿ"><a href="#ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿ" class="headerlink" title="ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿ"></a>ä½¿ç”¨Springé€šè¿‡ä»€ä¹ˆæ–¹å¼è®¿é—®Hibernateï¼Ÿ</h3><p>æœ‰ä¸¤ç§æ–¹å¼è®¿é—®Hibernateï¼š</p><ul><li>ä½¿ç”¨ Hibernate æ¨¡æ¿å’Œå›è°ƒè¿›è¡Œæ§åˆ¶åè½¬</li><li>æ‰©å±• HibernateDAOSupport å¹¶åº”ç”¨ AOP æ‹¦æˆªå™¨èŠ‚ç‚¹</li></ul><h3 id="Spring-æ”¯æŒçš„-ORM"><a href="#Spring-æ”¯æŒçš„-ORM" class="headerlink" title="Spring æ”¯æŒçš„ ORM"></a>Spring æ”¯æŒçš„ ORM</h3><p>Spring æ”¯æŒä»¥ä¸‹ ORMï¼š</p><ul><li>Hibernate</li><li>iBatis</li><li>JPA (Java Persistence API)</li><li>TopLink</li><li>JDO (Java Data Objects)</li><li>OJB</li></ul><p><strong>å¦‚ä½•é€šè¿‡ HibernateDaoSupport å°† Spring å’Œ Hibernate ç»“åˆèµ·æ¥ï¼Ÿ</strong></p><p>ç”¨ Spring çš„ SessionFactory è°ƒç”¨ LocalSessionFactoryã€‚é›†æˆè¿‡ç¨‹åˆ†ä¸‰æ­¥ï¼š</p><ul><li>é…ç½® the Hibernate SessionFactory</li><li>ç»§æ‰¿ HibernateDaoSupport</li><li>å®ç°ä¸€ä¸ª DAO åœ¨ AOP æ”¯æŒçš„äº‹åŠ¡ä¸­è£…é…</li></ul><h3 id="Spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹"><a href="#Spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹" class="headerlink" title="Spring æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹"></a>Spring æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹</h3><p>Spring æ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š</p><ul><li>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼šè¿™æ„å‘³ä½ é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œç»™ä½ å¸¦æ¥æå¤§çš„çµæ´»æ€§ï¼Œä½†æ˜¯ éš¾ç»´æŠ¤ã€‚</li><li>å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼šè¿™æ„å‘³ç€ä½ å¯ä»¥å°†ä¸šåŠ¡ä»£ç å’Œäº‹åŠ¡ç®¡ç†åˆ†ç¦»ï¼Œä½ åªéœ€ç”¨æ³¨è§£å’Œ XML é…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚</li></ul><h3 id="Spring-æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"><a href="#Spring-æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="Spring æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"></a>Spring æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h3><p>å®ƒä¸ºä¸åŒçš„äº‹åŠ¡ API å¦‚ JTAï¼ŒJDBCï¼ŒHibernateï¼ŒJPA å’Œ JDOï¼Œæä¾›ä¸€ä¸ªä¸å˜ çš„ç¼–ç¨‹æ¨¡å¼ã€‚</p><p>å®ƒä¸ºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æä¾›äº†ä¸€å¥—ç®€å•çš„ API è€Œä¸æ˜¯ä¸€äº›å¤æ‚çš„äº‹åŠ¡ API å¦‚ å®ƒæ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚å®ƒå’Œ Spring å„ç§æ•°æ®è®¿é—®æŠ½è±¡å±‚å¾ˆå¥½å¾—é›†æˆã€‚</p><h3 id="ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"><a href="#ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ" class="headerlink" title="ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ"></a>ä½ æ›´å€¾å‘ç”¨é‚£ç§äº‹åŠ¡ç®¡ç†ç±»å‹ï¼Ÿ</h3><p>å¤§å¤šæ•° Spring æ¡†æ¶çš„ç”¨æˆ·é€‰æ‹©å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œå› ä¸ºå®ƒå¯¹åº”ç”¨ä»£ç çš„å½±å“æœ€å°ï¼Œå›  æ­¤æ›´ç¬¦åˆä¸€ä¸ªæ— ä¾µå…¥çš„è½»é‡çº§å®¹å™¨çš„æ€æƒ³ã€‚å£°æ˜å¼äº‹åŠ¡ç®¡ç†è¦ä¼˜äºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œ è™½ç„¶æ¯”ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ˆè¿™ç§æ–¹å¼å…è®¸ä½ é€šè¿‡ä»£ç æ§åˆ¶äº‹åŠ¡ï¼‰å°‘äº†ä¸€ç‚¹çµæ´»æ€§ã€‚</p><h3 id="Springå¸¸ç”¨æ³¨è§£"><a href="#Springå¸¸ç”¨æ³¨è§£" class="headerlink" title="Springå¸¸ç”¨æ³¨è§£"></a>Springå¸¸ç”¨æ³¨è§£</h3><h4 id="å£°æ˜beançš„æ³¨è§£"><a href="#å£°æ˜beançš„æ³¨è§£" class="headerlink" title="å£°æ˜beançš„æ³¨è§£"></a>å£°æ˜beançš„æ³¨è§£</h4><ul><li><code>@Component</code> ï¼šç»„ä»¶ï¼Œæ²¡æœ‰æ˜ç¡®çš„è§’è‰²</li><li><code>@Service</code> ï¼šåœ¨ä¸šåŠ¡é€»è¾‘å±‚ä½¿ç”¨</li><li><code>@Repository</code> ï¼šåœ¨æ•°æ®è®¿é—®å±‚ä½¿ç”¨</li><li><code>@Controller</code> ï¼šåœ¨å±•ç°å±‚ä½¿ç”¨ï¼Œæ§åˆ¶å±‚çš„å£°æ˜</li><li><code>@RestController</code> ï¼š<code>@Controller</code>å’Œ<code>@ResponseBody</code>ç»„åˆï¼Œï¼Œæ§åˆ¶å±‚çš„å£°æ˜</li></ul><h4 id="æ³¨å…¥beançš„æ³¨è§£"><a href="#æ³¨å…¥beançš„æ³¨è§£" class="headerlink" title="æ³¨å…¥beançš„æ³¨è§£"></a>æ³¨å…¥beançš„æ³¨è§£</h4><ul><li><code>@Autowired</code>ï¼š</li></ul><p>Springè‡ªå¸¦çš„æ³¨è§£ï¼Œé€šè¿‡<code>AutowiredAnnotationBeanPostProcessor</code> ç±»å®ç°çš„ä¾èµ–æ³¨å…¥ï¼Œä½œç”¨åœ¨CONSTRUCTORã€METHODã€PARAMETERã€FIELDã€ANNOTATION_TYPEã€‚é»˜è®¤æ˜¯æ ¹æ®ç±»å‹ï¼ˆbyType ï¼‰è¿›è¡Œè‡ªåŠ¨è£…é…çš„ã€‚å¦‚æœæœ‰å¤šä¸ªç±»å‹ä¸€æ ·çš„Beanå€™é€‰è€…ï¼Œéœ€è¦æŒ‡å®šæŒ‰ç…§åç§°ï¼ˆbyName ï¼‰è¿›è¡Œè£…é…ï¼Œåˆ™éœ€è¦é…åˆ@Qualifierã€‚</p><p>æŒ‡å®šåç§°åï¼Œå¦‚æœSpring IOCå®¹å™¨ä¸­æ²¡æœ‰å¯¹åº”çš„ç»„ä»¶beanæŠ›å‡ºNoSuchBeanDefinitionExceptionã€‚ä¹Ÿå¯ä»¥å°†@Autowiredä¸­requiredé…ç½®ä¸ºfalseï¼Œå¦‚æœé…ç½®ä¸ºfalseä¹‹åï¼Œå½“æ²¡æœ‰æ‰¾åˆ°ç›¸åº”beançš„æ—¶å€™ï¼Œç³»ç»Ÿä¸ä¼šæŠ›å¼‚å¸¸</p><ul><li><code>@Inject</code>ï¼š</li></ul><p>JSR330 (Dependency Injection for Java)ä¸­çš„è§„èŒƒï¼Œéœ€è¦å¯¼å…¥javax.inject.Inject jaråŒ… ï¼Œæ‰èƒ½å®ç°æ³¨å…¥ ä½œç”¨CONSTRUCTORã€METHODã€FIELDä¸Š</p><p>æ ¹æ®ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…çš„ï¼Œå¦‚æœéœ€è¦æŒ‰åç§°è¿›è¡Œè£…é…ï¼Œåˆ™éœ€è¦é…åˆ@Named</p><ul><li><code>@Resource</code>ï¼š</li></ul><p>JSR250è§„èŒƒçš„å®ç°ï¼Œåœ¨javax.annotationåŒ…ä¸‹ï¼Œä½œç”¨TYPEã€FIELDã€METHODä¸Šã€‚</p><p>é»˜è®¤æ ¹æ®å±æ€§åç§°è¿›è¡Œè‡ªåŠ¨è£…é…çš„ï¼Œå¦‚æœæœ‰å¤šä¸ªç±»å‹ä¸€æ ·çš„Beanå€™é€‰è€…ï¼Œåˆ™å¯ä»¥é€šè¿‡nameè¿›è¡ŒæŒ‡å®šè¿›è¡Œæ³¨å…¥</p><h4 id="javaé…ç½®ç±»ç›¸å…³æ³¨è§£"><a href="#javaé…ç½®ç±»ç›¸å…³æ³¨è§£" class="headerlink" title="javaé…ç½®ç±»ç›¸å…³æ³¨è§£"></a>javaé…ç½®ç±»ç›¸å…³æ³¨è§£</h4><ul><li><code>@Configuration</code> ï¼šå£°æ˜å½“å‰ç±»ä¸ºé…ç½®ç±»ï¼Œç›¸å½“äºxmlå½¢å¼çš„Springé…ç½®ï¼ˆç±»ä¸Šï¼‰ï¼Œå£°æ˜å½“å‰ç±»ä¸ºé…ç½®ç±»ï¼Œå…¶ä¸­å†…éƒ¨ç»„åˆäº†@Componentæ³¨è§£ï¼Œè¡¨æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªbeanï¼ˆç±»ä¸Šï¼‰</li><li><code>@Bean</code> ï¼šæ³¨è§£åœ¨æ–¹æ³•ä¸Šï¼Œå£°æ˜å½“å‰æ–¹æ³•çš„è¿”å›å€¼ä¸ºä¸€ä¸ªbeanï¼Œæ›¿ä»£xmlä¸­çš„æ–¹å¼ï¼ˆæ–¹æ³•ä¸Šï¼‰</li><li><code>@ComponentScan</code> ï¼šç”¨äºå¯¹Componentè¿›è¡Œæ‰«æï¼Œç›¸å½“äºxmlä¸­çš„ï¼ˆç±»ä¸Šï¼‰</li><li><code>@WishlyConfiguration</code> ï¼šä¸º@Configurationä¸@ComponentScançš„ç»„åˆæ³¨è§£ï¼Œå¯ä»¥æ›¿ä»£è¿™ä¸¤ä¸ªæ³¨è§£</li></ul><h4 id="åˆ‡é¢ï¼ˆAOPï¼‰ç›¸å…³æ³¨è§£"><a href="#åˆ‡é¢ï¼ˆAOPï¼‰ç›¸å…³æ³¨è§£" class="headerlink" title="åˆ‡é¢ï¼ˆAOPï¼‰ç›¸å…³æ³¨è§£"></a>åˆ‡é¢ï¼ˆAOPï¼‰ç›¸å…³æ³¨è§£</h4><p>Springæ”¯æŒAspectJçš„æ³¨è§£å¼åˆ‡é¢ç¼–ç¨‹</p><ul><li><code>@Aspect</code>ï¼šå£°æ˜ä¸€ä¸ªåˆ‡é¢ï¼ˆç±»ä¸Šï¼‰ï¼Œä½¿ç”¨@Afterã€@Beforeã€@Aroundå®šä¹‰å»ºè¨€ï¼ˆadviceï¼‰ï¼Œå¯ç›´æ¥å°†æ‹¦æˆªè§„åˆ™ï¼ˆåˆ‡ç‚¹ï¼‰ä½œä¸ºå‚æ•°ã€‚</li><li><code>@After</code> ï¼šåœ¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰</li><li><code>@Before</code> ï¼šåœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰</li><li><code>@Around</code> ï¼šåœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰ä¸ä¹‹åæ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰</li><li><code>@PointCut</code> ï¼šå£°æ˜åˆ‡ç‚¹åœ¨javaé…ç½®ç±»ä¸­ä½¿ç”¨@EnableAspectJAutoProxyæ³¨è§£å¼€å¯Springå¯¹AspectJä»£ç†çš„æ”¯æŒï¼ˆç±»ä¸Šï¼‰<a href="http://mp.weixin.qq.com/s?__biz=Mzg2ODU0NTA2Mw==&mid=2247488067&idx=2&sn=bc20c4f449d5cada1335b24ea6210687&chksm=ceabf50bf9dc7c1d8486a0c1954d658778d5c652355560b65543b39aabee3cdce47732198b33&scene=21#wechat_redirect">å…³æ³¨Javaé¡¹ç›®åˆ†äº«</a></li></ul><h3 id="Beançš„å±æ€§æ”¯æŒ"><a href="#Beançš„å±æ€§æ”¯æŒ" class="headerlink" title="@Beançš„å±æ€§æ”¯æŒ"></a>@Beançš„å±æ€§æ”¯æŒ</h3><p>@Scope è®¾ç½®Springå®¹å™¨å¦‚ä½•æ–°å»ºBeanå®ä¾‹ï¼ˆæ–¹æ³•ä¸Šï¼Œå¾—æœ‰@Beanï¼‰ï¼Œå…¶è®¾ç½®ç±»å‹åŒ…æ‹¬ï¼š</p><ul><li><code>Singleton</code>ï¼šå•ä¾‹,ä¸€ä¸ªSpringå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªbeanå®ä¾‹ï¼Œé»˜è®¤æ¨¡å¼</li><li><code>Protetype</code>ï¼šæ¯æ¬¡è°ƒç”¨æ–°å»ºä¸€ä¸ªbean</li><li><code>Request</code>ï¼šwebé¡¹ç›®ä¸­ï¼Œç»™æ¯ä¸ªhttp requestæ–°å»ºä¸€ä¸ªbean</li><li><code>Session</code> ï¼šwebé¡¹ç›®ä¸­ï¼Œç»™æ¯ä¸ªhttp sessionæ–°å»ºä¸€ä¸ªbean</li><li><code>Global</code>ï¼šSessionç»™æ¯ä¸€ä¸ª global http sessionæ–°å»ºä¸€ä¸ªBeanå®ä¾‹</li><li><code>@StepScope</code>ï¼šåœ¨Spring Batchä¸­è¿˜æœ‰æ¶‰åŠ(Spring Batch ä¹‹ èƒŒæ™¯æ¡†æ¶ç®€ä»‹_vincent-CSDNåšå®¢)</li><li><code>@PostConstruct</code> ï¼šç”±JSR-250æä¾›ï¼Œåœ¨æ„é€ å‡½æ•°æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œï¼Œç­‰ä»·äºxmlé…ç½®æ–‡ä»¶ä¸­beançš„initMethod</li><li><code>@PreDestory</code> ï¼šç”±JSR-250æä¾›ï¼Œåœ¨Beané”€æ¯ä¹‹å‰æ‰§è¡Œï¼Œç­‰ä»·äºxmlé…ç½®æ–‡ä»¶ä¸­beançš„destroyMethod</li></ul><h3 id="Valueæ³¨è§£"><a href="#Valueæ³¨è§£" class="headerlink" title="@Valueæ³¨è§£"></a>@Valueæ³¨è§£</h3><p>ä¸ºå±æ€§æ³¨å…¥å€¼,æ”¯æŒå¦‚ä¸‹æ–¹å¼çš„æ³¨å…¥ï¼š</p><p>æ³¨å…¥æ™®é€šå­—ç¬¦</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>æ³¨å…¥æ“ä½œç³»ç»Ÿå±æ€§</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0vgNFBShprngOeIOGRzAwB9c0yabT5ANH8vemFZrtPxSzJVL0Ox5qoQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><p>æ³¨å…¥è¡¨è¾¾å¼ç»“æœ</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs00kfjJT0DaibiatmySaRu9XstMSSnMs9BMRzj1gA8nX0t8q9SpAtnA6Gg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><p>æ³¨å…¥å…¶å®ƒbeanå±æ€§</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0wRawW1KEduGGdTL5CcrjtcOUurRQmRPAUwCLNE5D75WEmgOViacneEw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><p>æ³¨å…¥æ–‡ä»¶èµ„æº</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0KvjXt7iaxpwaEF3eYSq9SCp8quzYBWibb3uOVwwI5gnEyl1VZ1ia4w1mA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><p>æ³¨å…¥ç½‘ç«™èµ„æº</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0O9W5icQUjVKtARtl0Easy7pAHbnib07bfSncdicdMUne92KNJotQ58qOA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><p>æ³¨å…¥é…ç½®æ–‡ä»¶</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbud8CU3hg3Mg9dvdxcasogs0d8icjekqCaN1KSDJ3gibibjoU97naELI2PicicydsDZ4wkMg6Xj8j5kUZxw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å›¾ç‰‡"></p><p><code>@PropertySource</code> åŠ è½½é…ç½®æ–‡ä»¶(ç±»ä¸Š)ï¼Œè¿˜éœ€é…ç½®ä¸€ä¸ª<code>PropertySourcesPlaceholderConfigurer</code>çš„beanã€‚</p><h3 id="ç¯å¢ƒåˆ‡æ¢"><a href="#ç¯å¢ƒåˆ‡æ¢" class="headerlink" title="ç¯å¢ƒåˆ‡æ¢"></a>ç¯å¢ƒåˆ‡æ¢</h3><ul><li><code>@Profile</code> ï¼šé€šè¿‡è®¾å®šEnvironmentçš„ActiveProfilesæ¥è®¾å®šå½“å‰contextéœ€è¦ä½¿ç”¨çš„é…ç½®ç¯å¢ƒã€‚ï¼ˆç±»æˆ–æ–¹æ³•ä¸Šï¼‰</li><li><code>@Conditional</code>ï¼šSpring4ä¸­å¯ä»¥ä½¿ç”¨æ­¤æ³¨è§£å®šä¹‰æ¡ä»¶è¯çš„beanï¼Œé€šè¿‡å®ç°Conditionæ¥å£ï¼Œå¹¶é‡å†™matchesæ–¹æ³•ï¼Œä»è€Œå†³å®šè¯¥beanæ˜¯å¦è¢«å®ä¾‹åŒ–ã€‚ï¼ˆæ–¹æ³•ä¸Šï¼‰</li></ul><h3 id="å¼‚æ­¥ç›¸å…³"><a href="#å¼‚æ­¥ç›¸å…³" class="headerlink" title="å¼‚æ­¥ç›¸å…³"></a>å¼‚æ­¥ç›¸å…³</h3><ul><li><code>@EnableAsync</code>ï¼šé…ç½®ç±»ä¸­ï¼Œé€šè¿‡æ­¤æ³¨è§£å¼€å¯å¯¹å¼‚æ­¥ä»»åŠ¡çš„æ”¯æŒï¼Œå™äº‹æ€§AsyncConfigureræ¥å£ï¼ˆç±»ä¸Šï¼‰</li><li><code>@Async</code>ï¼šåœ¨å®é™…æ‰§è¡Œçš„beanæ–¹æ³•ä½¿ç”¨è¯¥æ³¨è§£æ¥ç”³æ˜å…¶æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼ˆæ–¹æ³•ä¸Šæˆ–ç±»ä¸Šæ‰€æœ‰çš„æ–¹æ³•éƒ½å°†å¼‚æ­¥ï¼Œéœ€è¦@EnableAsyncå¼€å¯å¼‚æ­¥ä»»åŠ¡ï¼‰</li></ul><h3 id="å®šæ—¶ä»»åŠ¡ç›¸å…³"><a href="#å®šæ—¶ä»»åŠ¡ç›¸å…³" class="headerlink" title="å®šæ—¶ä»»åŠ¡ç›¸å…³"></a>å®šæ—¶ä»»åŠ¡ç›¸å…³</h3><ul><li><code>@EnableScheduling</code> ï¼šåœ¨é…ç½®ç±»ä¸Šä½¿ç”¨ï¼Œå¼€å¯è®¡åˆ’ä»»åŠ¡çš„æ”¯æŒï¼ˆç±»ä¸Šï¼‰</li><li><code>@Scheduled</code> ï¼šæ¥ç”³æ˜è¿™æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼ŒåŒ…æ‹¬cron,fixDelay,fixRateç­‰ç±»å‹ï¼ˆæ–¹æ³•ä¸Šï¼Œéœ€å…ˆå¼€å¯è®¡åˆ’ä»»åŠ¡çš„æ”¯æŒï¼‰</li></ul><h3 id="Enable-æ³¨è§£è¯´æ˜"><a href="#Enable-æ³¨è§£è¯´æ˜" class="headerlink" title="@Enable æ³¨è§£è¯´æ˜"></a>@Enable æ³¨è§£è¯´æ˜</h3><p>è¿™äº›æ³¨è§£ä¸»è¦ç”¨æ¥å¼€å¯å¯¹xxxçš„æ”¯æŒã€‚</p><ul><li><code>@EnableAspectJAutoProxy</code> ï¼šå¼€å¯å¯¹AspectJè‡ªåŠ¨ä»£ç†çš„æ”¯æŒ</li><li><code>@EnableAsync</code> ï¼šå¼€å¯å¼‚æ­¥æ–¹æ³•çš„æ”¯æŒ</li><li><code>@EnableScheduling</code> ï¼šå¼€å¯è®¡åˆ’ä»»åŠ¡çš„æ”¯æŒ</li><li><code>@EnableWebMvc</code> ï¼šå¼€å¯Web MVCçš„é…ç½®æ”¯æŒ</li><li><code>@EnableConfigurationProperties</code> ï¼šå¼€å¯å¯¹@ConfigurationPropertiesæ³¨è§£é…ç½®Beançš„æ”¯æŒ</li><li><code>@EnableJpaRepositories</code> ï¼šå¼€å¯å¯¹SpringData JPA Repositoryçš„æ”¯æŒ</li><li><code>@EnableTransactionManagement</code> ï¼šå¼€å¯æ³¨è§£å¼äº‹åŠ¡çš„æ”¯æŒ</li><li><code>@EnableCaching</code> ï¼šå¼€å¯æ³¨è§£å¼çš„ç¼“å­˜æ”¯æŒ</li></ul><h3 id="æµ‹è¯•ç›¸å…³æ³¨è§£"><a href="#æµ‹è¯•ç›¸å…³æ³¨è§£" class="headerlink" title="æµ‹è¯•ç›¸å…³æ³¨è§£"></a>æµ‹è¯•ç›¸å…³æ³¨è§£</h3><ul><li><code>@RunWith</code> ï¼šè¿è¡Œå™¨ï¼ŒSpringä¸­é€šå¸¸ç”¨äºå¯¹JUnitçš„æ”¯æŒ</li><li><code>@ContextConfiguration</code>ï¼šç”¨æ¥åŠ è½½é…ç½®ApplicationContextï¼Œå…¶ä¸­classeså±æ€§ç”¨æ¥åŠ è½½é…ç½®ç±»</li></ul><h3 id="SpringMVCéƒ¨åˆ†"><a href="#SpringMVCéƒ¨åˆ†" class="headerlink" title="SpringMVCéƒ¨åˆ†"></a>SpringMVCéƒ¨åˆ†</h3><ul><li><code>@EnableWebMvc</code> ï¼šåœ¨é…ç½®ç±»ä¸­å¼€å¯Web MVCçš„é…ç½®æ”¯æŒï¼Œå¦‚ä¸€äº›ViewResolveræˆ–è€…MessageConverterç­‰ï¼Œè‹¥æ— æ­¤å¥ï¼Œé‡å†™WebMvcConfigurerAdapteræ–¹æ³•ï¼ˆç”¨äºå¯¹SpringMVCçš„é…ç½®ï¼‰ã€‚</li><li><code>@Controller</code> ï¼šå£°æ˜è¯¥ç±»ä¸ºSpringMVCä¸­çš„Controller</li><li><code>@RequestMapping</code> ï¼šç”¨äºæ˜ å°„Webè¯·æ±‚ï¼ŒåŒ…æ‹¬è®¿é—®è·¯å¾„å’Œå‚æ•°ï¼ˆç±»æˆ–æ–¹æ³•ä¸Šï¼‰</li><li><code>@ResponseBody</code> ï¼šæ”¯æŒå°†è¿”å›å€¼æ”¾åœ¨responseå†…ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé¡µé¢ï¼Œé€šå¸¸ç”¨æˆ·è¿”å›jsonæ•°æ®ï¼ˆè¿”å›å€¼æ—æˆ–æ–¹æ³•ä¸Šï¼‰</li><li><code>@RequestBody</code> ï¼šå…è®¸requestçš„å‚æ•°åœ¨requestä½“ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ç›´æ¥è¿æ¥åœ¨åœ°å€åé¢ã€‚ï¼ˆæ”¾åœ¨å‚æ•°å‰ï¼‰</li><li><code>@PathVariable</code> ï¼šç”¨äºæ¥æ”¶è·¯å¾„å‚æ•°ï¼Œæ¯”å¦‚@RequestMapping(â€œ&#x2F;hello&#x2F;{name}â€)ç”³æ˜çš„è·¯å¾„ï¼Œå°†æ³¨è§£æ”¾åœ¨å‚æ•°ä¸­å‰ï¼Œå³å¯è·å–è¯¥å€¼ï¼Œé€šå¸¸ä½œä¸ºRestfulçš„æ¥å£å®ç°æ–¹æ³•ã€‚</li><li><code>@RestController</code> ï¼šè¯¥æ³¨è§£ä¸ºä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œç›¸å½“äº@Controllerå’Œ@ResponseBodyçš„ç»„åˆï¼Œæ³¨è§£åœ¨ç±»ä¸Šï¼Œæ„å‘³ç€ï¼Œè¯¥Controllerçš„æ‰€æœ‰æ–¹æ³•éƒ½é»˜è®¤åŠ ä¸Šäº†@ResponseBodyã€‚</li><li><code>@ControllerAdvice</code> ï¼šé€šè¿‡è¯¥æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯¹äºæ§åˆ¶å™¨çš„å…¨å±€é…ç½®æ”¾ç½®åœ¨åŒä¸€ä¸ªä½ç½®ï¼Œæ³¨è§£äº†@Controllerçš„ç±»çš„æ–¹æ³•å¯ä½¿ç”¨@ExceptionHandlerã€@InitBinderã€@ModelAttributeæ³¨è§£åˆ°æ–¹æ³•ä¸Šï¼Œè¿™å¯¹æ‰€æœ‰æ³¨è§£äº† @RequestMappingçš„æ§åˆ¶å™¨å†…çš„æ–¹æ³•æœ‰æ•ˆã€‚</li><li><code>@ExceptionHandler</code> ï¼šç”¨äºå…¨å±€å¤„ç†æ§åˆ¶å™¨é‡Œçš„å¼‚å¸¸</li><li><code>@InitBinder</code> ï¼šç”¨æ¥è®¾ç½®WebDataBinderï¼ŒWebDataBinderç”¨æ¥è‡ªåŠ¨ç»‘å®šå‰å°è¯·æ±‚å‚æ•°åˆ°Modelä¸­ã€‚</li><li><code>@ModelAttribute</code> ï¼šæœ¬æ¥çš„ä½œç”¨æ˜¯ç»‘å®šé”®å€¼å¯¹åˆ°Modelé‡Œï¼Œåœ¨@ControllerAdviceä¸­æ˜¯è®©å…¨å±€çš„@RequestMappingï¼šéƒ½èƒ½è·å¾—åœ¨æ­¤å¤„è®¾ç½®çš„é”®å€¼å¯¹ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>zookeeperè®²ä¹‰</title>
    <link href="/Hexo/2022/01/28/zookeeper%E8%AE%B2%E4%B9%89md/"/>
    <url>/Hexo/2022/01/28/zookeeper%E8%AE%B2%E4%B9%89md/</url>
    
    <content type="html"><![CDATA[<h1 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h1><h2 id="1-åˆè¯†-Zookeeper"><a href="#1-åˆè¯†-Zookeeper" class="headerlink" title="1)åˆè¯† Zookeeper"></a>1)åˆè¯† Zookeeper</h2><h3 id="1-1-Zookeeperæ¦‚å¿µ"><a href="#1-1-Zookeeperæ¦‚å¿µ" class="headerlink" title="1.1)Zookeeperæ¦‚å¿µ"></a>1.1)Zookeeperæ¦‚å¿µ</h3><p>â€¢Zookeeper æ˜¯ Apache Hadoop é¡¹ç›®ä¸‹çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªæ ‘å½¢ç›®å½•æœåŠ¡ã€‚</p><p>â€¢Zookeeper ç¿»è¯‘è¿‡æ¥å°±æ˜¯ åŠ¨ç‰©å›­ç®¡ç†å‘˜ï¼Œä»–æ˜¯ç”¨æ¥ç®¡ Hadoopï¼ˆå¤§è±¡ï¼‰ã€Hive(èœœèœ‚)ã€Pig(å° çŒª)çš„ç®¡ç†å‘˜ã€‚ç®€ç§°zk</p><p>â€¢Zookeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€å¼€æºçš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„åè°ƒæœåŠ¡ã€‚</p><p>â€¢Zookeeper æä¾›çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><p>â€¢é…ç½®ç®¡ç†</p><p>â€¢åˆ†å¸ƒå¼é”</p><p>â€¢é›†ç¾¤ç®¡ç†</p><p><img src="/Hexo/../img/202203121507475.png" alt="1592054580488"></p><p><img src="/Hexo/../img/202203121507388.png" alt="1592054603167"></p><h2 id="2-ZooKeeper-å®‰è£…ä¸é…ç½®"><a href="#2-ZooKeeper-å®‰è£…ä¸é…ç½®" class="headerlink" title="2)ZooKeeper å®‰è£…ä¸é…ç½®"></a>2)ZooKeeper å®‰è£…ä¸é…ç½®</h2><h3 id="2-1-ä¸‹è½½å®‰è£…"><a href="#2-1-ä¸‹è½½å®‰è£…" class="headerlink" title="2.1) ä¸‹è½½å®‰è£…"></a>2.1) ä¸‹è½½å®‰è£…</h3><h4 id="2-1-1ã€ç¯å¢ƒå‡†å¤‡"><a href="#2-1-1ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.1.1ã€ç¯å¢ƒå‡†å¤‡"></a><strong>2.1.1ã€ç¯å¢ƒå‡†å¤‡</strong></h4><p>ZooKeeperæœåŠ¡å™¨æ˜¯ç”¨Javaåˆ›å»ºçš„ï¼Œå®ƒè¿è¡Œåœ¨JVMä¹‹ä¸Šã€‚éœ€è¦å®‰è£…JDK 7æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</p><h4 id="2-1-2ã€ä¸Šä¼ "><a href="#2-1-2ã€ä¸Šä¼ " class="headerlink" title="2.1.2ã€ä¸Šä¼ "></a><strong>2.1.2ã€ä¸Šä¼ </strong></h4><p>å°†ä¸‹è½½çš„ZooKeeperæ”¾åˆ°&#x2F;opt&#x2F;ZooKeeperç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">ä¸Šä¼ zookeeper alt+p</span><br>put f:/setup/apache-zookeeper-3.5.6-bin.tar.gz<br><span class="hljs-meta">#</span><span class="language-bash">æ‰“å¼€ optç›®å½•</span><br>cd /opt<br><span class="hljs-meta">#</span><span class="language-bash">åˆ›å»ºzooKeeperç›®å½•</span><br>mkdir  zooKeeper<br><span class="hljs-meta">#</span><span class="language-bash">å°†zookeeperå®‰è£…åŒ…ç§»åŠ¨åˆ° /opt/zooKeeper</span><br>mv apache-zookeeper-3.5.6-bin.tar.gz /opt/zookeeper/<br></code></pre></td></tr></table></figure><h4 id="2-1-3ã€è§£å‹"><a href="#2-1-3ã€è§£å‹" class="headerlink" title="2.1.3ã€è§£å‹"></a><strong>2.1.3ã€è§£å‹</strong></h4><p>å°†taråŒ…è§£å‹åˆ°&#x2F;opt&#x2F;zookeeperç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -zxvf apache-ZooKeeper-3.5.6-bin.tar.gz <br></code></pre></td></tr></table></figure><h3 id="2-2-é…ç½®å¯åŠ¨"><a href="#2-2-é…ç½®å¯åŠ¨" class="headerlink" title="2.2) é…ç½®å¯åŠ¨"></a>2.2) é…ç½®å¯åŠ¨</h3><h4 id="2-2-1ã€é…ç½®zoo-cfg"><a href="#2-2-1ã€é…ç½®zoo-cfg" class="headerlink" title="2.2.1ã€é…ç½®zoo.cfg"></a><strong>2.2.1ã€é…ç½®zoo.cfg</strong></h4><p>è¿›å…¥åˆ°confç›®å½•æ‹·è´ä¸€ä¸ªzoo_sample.cfgå¹¶å®Œæˆé…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">è¿›å…¥åˆ°confç›®å½•</span><br>cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/<br><span class="hljs-meta">#</span><span class="language-bash">æ‹·è´</span><br>cp  zoo_sample.cfg  zoo.cfg<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹zoo.cfg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">æ‰“å¼€ç›®å½•</span><br>cd /opt/zooKeeper/<br><span class="hljs-meta">#</span><span class="language-bash">åˆ›å»ºzooKeeperå­˜å‚¨ç›®å½•</span><br>mkdir  zkdata<br><span class="hljs-meta">#</span><span class="language-bash">ä¿®æ”¹zoo.cfg</span><br>vim /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/zoo.cfg<br></code></pre></td></tr></table></figure><p><img src="/Hexo/../img/202203121507501.png" alt="1577548250377"></p><p>ä¿®æ”¹å­˜å‚¨ç›®å½•ï¼šdataDir&#x3D;&#x2F;opt&#x2F;zookeeper&#x2F;zkdata</p><h4 id="2-2-2ã€å¯åŠ¨ZooKeeper"><a href="#2-2-2ã€å¯åŠ¨ZooKeeper" class="headerlink" title="2.2.2ã€å¯åŠ¨ZooKeeper"></a><strong>2.2.2ã€å¯åŠ¨ZooKeeper</strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/bin/<br><span class="hljs-meta">#</span><span class="language-bash">å¯åŠ¨</span><br> ./zkServer.sh  start<br></code></pre></td></tr></table></figure><p><img src="/Hexo/../img/202203121511797.png" alt="image-20220312151138755"></p><p>çœ‹åˆ°ä¸Šå›¾è¡¨ç¤ºZooKeeperæˆåŠŸå¯åŠ¨</p><p><strong>3ã€æŸ¥çœ‹ZooKeeperçŠ¶æ€</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./zkServer.sh status<br></code></pre></td></tr></table></figure><p>zookeeperå¯åŠ¨æˆåŠŸã€‚standaloneä»£è¡¨zkæ²¡æœ‰æ­å»ºé›†ç¾¤ï¼Œç°åœ¨æ˜¯å•èŠ‚ç‚¹</p><p><img src="/Hexo/../img/202203121511659.png" alt="1577548175232"></p><p>zookeeperæ²¡æœ‰å¯åŠ¨</p><p><img src="/Hexo/../img/202203121511702.png" alt="image-20220312151128652"></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="3-ZooKeeper-å‘½ä»¤æ“ä½œ"><a href="#3-ZooKeeper-å‘½ä»¤æ“ä½œ" class="headerlink" title="3)ZooKeeper å‘½ä»¤æ“ä½œ"></a>3)ZooKeeper å‘½ä»¤æ“ä½œ</h2><h3 id="3-1-Zookeeperå‘½ä»¤æ“ä½œæ•°æ®æ¨¡å‹"><a href="#3-1-Zookeeperå‘½ä»¤æ“ä½œæ•°æ®æ¨¡å‹" class="headerlink" title="3.1)Zookeeperå‘½ä»¤æ“ä½œæ•°æ®æ¨¡å‹"></a>3.1)Zookeeperå‘½ä»¤æ“ä½œæ•°æ®æ¨¡å‹</h3><p>â€¢ZooKeeper æ˜¯ä¸€ä¸ª<font color='red'>æ ‘å½¢ç›®å½•</font>æœåŠ¡,å…¶æ•°æ®æ¨¡å‹å’ŒUnixçš„æ–‡ä»¶ç³»ç»Ÿç›®å½•æ ‘å¾ˆç±»ä¼¼ï¼Œæ‹¥æœ‰ä¸€ä¸ªå±‚æ¬¡åŒ–ç»“æ„ã€‚</p><p>â€¢è¿™é‡Œé¢çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½è¢«ç§°ä¸ºï¼š ZNodeï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½ä¼šä¿å­˜è‡ªå·±çš„æ•°æ®å’ŒèŠ‚ç‚¹ä¿¡æ¯ã€‚ </p><p>â€¢ èŠ‚ç‚¹å¯ä»¥æ‹¥æœ‰å­èŠ‚ç‚¹ï¼ŒåŒæ—¶ä¹Ÿå…è®¸å°‘é‡ï¼ˆ1MBï¼‰æ•°æ®å­˜å‚¨åœ¨è¯¥èŠ‚ç‚¹ä¹‹ä¸‹ã€‚</p><p>â€¢èŠ‚ç‚¹å¯ä»¥åˆ†ä¸ºå››å¤§ç±»ï¼š</p><p>â€¢PERSISTENT æŒä¹…åŒ–èŠ‚ç‚¹ </p><p>â€¢EPHEMERAL ä¸´æ—¶èŠ‚ç‚¹ ï¼š-e</p><p>â€¢PERSISTENT_SEQUENTIAL æŒä¹…åŒ–é¡ºåºèŠ‚ç‚¹ ï¼š-s</p><p>â€¢EPHEMERAL_SEQUENTIAL ä¸´æ—¶é¡ºåºèŠ‚ç‚¹  ï¼š-es</p><p><img src="/Hexo/../img/202203121512484.png" alt="image-20220312151241438"></p><p><img src="/Hexo/../img/202203121509147.png" alt="1592054844023"></p><h3 id="3-2-Zookeeperå‘½ä»¤æ“ä½œæœåŠ¡ç«¯å‘½ä»¤"><a href="#3-2-Zookeeperå‘½ä»¤æ“ä½œæœåŠ¡ç«¯å‘½ä»¤" class="headerlink" title="3.2)Zookeeperå‘½ä»¤æ“ä½œæœåŠ¡ç«¯å‘½ä»¤"></a><strong>3.2)Zookeeperå‘½ä»¤æ“ä½œæœåŠ¡ç«¯å‘½ä»¤</strong></h3><p>â€¢å¯åŠ¨ ZooKeeper æœåŠ¡: .&#x2F;zkServer.sh start</p><p>â€¢æŸ¥çœ‹ ZooKeeper æœåŠ¡çŠ¶æ€: .&#x2F;zkServer.sh status</p><p>â€¢åœæ­¢ ZooKeeper æœåŠ¡: .&#x2F;zkServer.sh stop </p><p>â€¢é‡å¯ ZooKeeper æœåŠ¡: .&#x2F;zkServer.sh restart </p><p><img src="/Hexo/../img/202203121512852.png" alt="1592055088686"></p><h3 id="3-3-Zookeeperå®¢æˆ·ç«¯å¸¸ç”¨å‘½ä»¤"><a href="#3-3-Zookeeperå®¢æˆ·ç«¯å¸¸ç”¨å‘½ä»¤" class="headerlink" title="3.3)Zookeeperå®¢æˆ·ç«¯å¸¸ç”¨å‘½ä»¤"></a><strong>3.3)Zookeeperå®¢æˆ·ç«¯å¸¸ç”¨å‘½ä»¤</strong></h3><p>â€¢è¿æ¥ZooKeeperæœåŠ¡ç«¯</p><p><font color='red'>æ³¨æ„-ä¸å¯å¤åˆ¶</font></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">./zkCli.sh â€“server ip:port<br> ./zkCli.sh -server localhost:2181<br></code></pre></td></tr></table></figure><p>â€¢æ–­å¼€è¿æ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">quit<br></code></pre></td></tr></table></figure><p>â€¢æŸ¥çœ‹å‘½ä»¤å¸®åŠ©</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">help<br></code></pre></td></tr></table></figure><p>â€¢æ˜¾ç¤ºæŒ‡å®šç›®å½•ä¸‹èŠ‚ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> ç›®å½•<br></code></pre></td></tr></table></figure><p>â€¢åˆ›å»ºèŠ‚ç‚¹</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">create</span> /èŠ‚ç‚¹<span class="hljs-built_in">path</span> value<br></code></pre></td></tr></table></figure><p>â€¢è·å–èŠ‚ç‚¹å€¼</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">get</span> /èŠ‚ç‚¹<span class="hljs-type">path</span><br></code></pre></td></tr></table></figure><p>â€¢è®¾ç½®èŠ‚ç‚¹å€¼</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">set</span> /èŠ‚ç‚¹<span class="hljs-built_in">path</span> value<br></code></pre></td></tr></table></figure><p>â€¢åˆ é™¤å•ä¸ªèŠ‚ç‚¹</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">delete</span> /èŠ‚ç‚¹<span class="hljs-keyword">path</span><br></code></pre></td></tr></table></figure><p>â€¢åˆ é™¤å¸¦æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">deleteall /èŠ‚ç‚¹<span class="hljs-built_in">path</span><br></code></pre></td></tr></table></figure><p><img src="/Hexo/../img/202203121512697.png" alt="1592055332198"></p><p><img src="/Hexo/../img/202203121512020.png" alt="1592055345400"></p><h3 id="3-4-å®¢æˆ·ç«¯å‘½ä»¤-åˆ›å»ºä¸´æ—¶æœ‰åºèŠ‚ç‚¹"><a href="#3-4-å®¢æˆ·ç«¯å‘½ä»¤-åˆ›å»ºä¸´æ—¶æœ‰åºèŠ‚ç‚¹" class="headerlink" title="3.4)å®¢æˆ·ç«¯å‘½ä»¤-åˆ›å»ºä¸´æ—¶æœ‰åºèŠ‚ç‚¹"></a>3.4)å®¢æˆ·ç«¯å‘½ä»¤-åˆ›å»ºä¸´æ—¶æœ‰åºèŠ‚ç‚¹</h3><p>â€¢åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs n1ql"><span class="hljs-keyword">create</span> -<span class="hljs-built_in">e</span> /èŠ‚ç‚¹<span class="hljs-keyword">path</span> <span class="hljs-keyword">value</span><br></code></pre></td></tr></table></figure><p>â€¢åˆ›å»ºé¡ºåºèŠ‚ç‚¹</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">create</span> -s /èŠ‚ç‚¹<span class="hljs-built_in">path</span> value<br></code></pre></td></tr></table></figure><p>åˆ›å»ºé¡ºåºä¸´æ—¶ç»“ç‚¹</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-built_in">create</span> -es /èŠ‚ç‚¹<span class="hljs-built_in">path</span> value<br></code></pre></td></tr></table></figure><p>â€¢æŸ¥è¯¢èŠ‚ç‚¹è¯¦ç»†ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> â€“s /èŠ‚ç‚¹path <br></code></pre></td></tr></table></figure><p>â€¢czxidï¼šèŠ‚ç‚¹è¢«åˆ›å»ºçš„äº‹åŠ¡ID </p><p>â€¢ctime: åˆ›å»ºæ—¶é—´ </p><p>â€¢mzxid: æœ€åä¸€æ¬¡è¢«æ›´æ–°çš„äº‹åŠ¡ID </p><p>â€¢mtime: ä¿®æ”¹æ—¶é—´ </p><p>â€¢pzxidï¼šå­èŠ‚ç‚¹åˆ—è¡¨æœ€åä¸€æ¬¡è¢«æ›´æ–°çš„äº‹åŠ¡ID</p><p>â€¢cversionï¼šå­èŠ‚ç‚¹çš„ç‰ˆæœ¬å· </p><p>â€¢dataversionï¼šæ•°æ®ç‰ˆæœ¬å· </p><p>â€¢aclversionï¼šæƒé™ç‰ˆæœ¬å· </p><p>â€¢ephemeralOwnerï¼šç”¨äºä¸´æ—¶èŠ‚ç‚¹ï¼Œä»£è¡¨ä¸´æ—¶èŠ‚ç‚¹çš„äº‹åŠ¡IDï¼Œå¦‚æœä¸ºæŒä¹…èŠ‚ç‚¹åˆ™ä¸º0 </p><p>â€¢dataLengthï¼šèŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®çš„é•¿åº¦ </p><p>â€¢numChildrenï¼šå½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•° </p><p><img src="/Hexo/../img/202203121512699.png" alt="1592055462588"></p><p><img src="/Hexo/../img/202203122111362.png" alt="image-20220312211150283"></p><h6 id="2022å¹´3æœˆ12æ—¥21-16-02"><a href="#2022å¹´3æœˆ12æ—¥21-16-02" class="headerlink" title="2022å¹´3æœˆ12æ—¥21:16:02"></a>2022å¹´3æœˆ12æ—¥21:16:02</h6><h2 id="4-ZooKeeper-JavaAPI-æ“ä½œ"><a href="#4-ZooKeeper-JavaAPI-æ“ä½œ" class="headerlink" title="4)ZooKeeper JavaAPI æ“ä½œ"></a>4)ZooKeeper JavaAPI æ“ä½œ</h2><h3 id="4-1-uratorä»‹ç»"><a href="#4-1-uratorä»‹ç»" class="headerlink" title="4.1)uratorä»‹ç»"></a>4.1)uratorä»‹ç»</h3><p>â€¢Curator æ˜¯ Apache ZooKeeper çš„Javaå®¢æˆ·ç«¯åº“ã€‚</p><p>â€¢å¸¸è§çš„ZooKeeper Java API ï¼š</p><p>â€¢åŸç”ŸJava API</p><p>â€¢ZkClient</p><p>â€¢Curator</p><p>â€¢Curator é¡¹ç›®çš„ç›®æ ‡æ˜¯ç®€åŒ– ZooKeeper å®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚</p><p>â€¢Curator æœ€åˆæ˜¯ Netfix ç ”å‘çš„,åæ¥æçŒ®äº† Apache åŸºé‡‘ä¼š,ç›®å‰æ˜¯ Apache çš„é¡¶çº§é¡¹ç›®ã€‚</p><p>â€¢å®˜ç½‘ï¼š<a href="http://curator.apache.org/">http://curator.apache.org/</a></p><h3 id="4-2-JavaAPIæ“ä½œå»ºç«‹è¿æ¥"><a href="#4-2-JavaAPIæ“ä½œå»ºç«‹è¿æ¥" class="headerlink" title="4.2)JavaAPIæ“ä½œå»ºç«‹è¿æ¥"></a>4.2)JavaAPIæ“ä½œå»ºç«‹è¿æ¥</h3><p>1ï¼Œæ­å»ºé¡¹ç›®</p><p>åˆ›å»ºé¡¹ç›®curator-zk</p><p>å¼•å…¥pomå’Œæ—¥å¿—æ–‡ä»¶</p><p>èµ„æ–™æ–‡ä»¶å¤¹ä¸‹pom.xmlå’Œlog4j.properties</p><p><img src="/Hexo/../img/202203121512563.png" alt="1592055569716"></p><p>2ã€åˆ›å»ºæµ‹è¯•ç±»ï¼Œä½¿ç”¨curatorè¿æ¥zookeeper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Before</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testConnect</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">//é‡è¯•ç­–ç•¥</span><br>    <span class="hljs-type">RetryPolicy</span> <span class="hljs-variable">retryPolicy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">3000</span>, <span class="hljs-number">10</span>);<br>    <span class="hljs-comment">//2.ç¬¬äºŒç§æ–¹å¼</span><br>    <span class="hljs-comment">//CuratorFrameworkFactory.builder();</span><br>    client = CuratorFrameworkFactory.builder()<br>        .connectString(<span class="hljs-string">&quot;192.168.200.130:2181&quot;</span>)<br>        .sessionTimeoutMs(<span class="hljs-number">60</span> * <span class="hljs-number">1000</span>)<br>        .connectionTimeoutMs(<span class="hljs-number">15</span> * <span class="hljs-number">1000</span>)<br>        .retryPolicy(retryPolicy)<br>        .namespace(<span class="hljs-string">&quot;itheima&quot;</span>)<br>        .build();<br>    <span class="hljs-comment">//å¼€å¯è¿æ¥</span><br>    client.start();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-3-Zookeeper-JavaAPIæ“ä½œ-åˆ›å»ºèŠ‚ç‚¹"><a href="#4-3-Zookeeper-JavaAPIæ“ä½œ-åˆ›å»ºèŠ‚ç‚¹" class="headerlink" title="4.3)Zookeeper JavaAPIæ“ä½œ-åˆ›å»ºèŠ‚ç‚¹"></a>4.3)Zookeeper JavaAPIæ“ä½œ-åˆ›å»ºèŠ‚ç‚¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* åˆ›å»ºèŠ‚ç‚¹ï¼šcreate æŒä¹… ä¸´æ—¶ é¡ºåº æ•°æ®</span><br><span class="hljs-comment">* 1. åŸºæœ¬åˆ›å»º ï¼šcreate().forPath(&quot;&quot;)</span><br><span class="hljs-comment">* 2. åˆ›å»ºèŠ‚ç‚¹ å¸¦æœ‰æ•°æ®:create().forPath(&quot;&quot;,data)</span><br><span class="hljs-comment">* 3. è®¾ç½®èŠ‚ç‚¹çš„ç±»å‹ï¼šcreate().withMode().forPath(&quot;&quot;,data)</span><br><span class="hljs-comment">* 4. åˆ›å»ºå¤šçº§èŠ‚ç‚¹  /app1/p1 ï¼šcreate().creatingParentsIfNeeded().forPath(&quot;&quot;,data)</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreate</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//2. åˆ›å»ºèŠ‚ç‚¹ å¸¦æœ‰æ•°æ®</span><br>    <span class="hljs-comment">//å¦‚æœåˆ›å»ºèŠ‚ç‚¹ï¼Œæ²¡æœ‰æŒ‡å®šæ•°æ®ï¼Œåˆ™é»˜è®¤å°†å½“å‰å®¢æˆ·ç«¯çš„ipä½œä¸ºæ•°æ®å­˜å‚¨</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> client.create().forPath(<span class="hljs-string">&quot;/app2&quot;</span>, <span class="hljs-string">&quot;hehe&quot;</span>.getBytes());<br>    System.out.println(path);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreate2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//1. åŸºæœ¬åˆ›å»º</span><br>    <span class="hljs-comment">//å¦‚æœåˆ›å»ºèŠ‚ç‚¹ï¼Œæ²¡æœ‰æŒ‡å®šæ•°æ®ï¼Œåˆ™é»˜è®¤å°†å½“å‰å®¢æˆ·ç«¯çš„ipä½œä¸ºæ•°æ®å­˜å‚¨</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> client.create().forPath(<span class="hljs-string">&quot;/app1&quot;</span>);<br>    System.out.println(path);<br>&#125;<br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreate3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//3. è®¾ç½®èŠ‚ç‚¹çš„ç±»å‹</span><br>    <span class="hljs-comment">//é»˜è®¤ç±»å‹ï¼šæŒä¹…åŒ–</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> client.create().withMode(CreateMode.EPHEMERAL).forPath(<span class="hljs-string">&quot;/app3&quot;</span>);<br>    System.out.println(path);<br>&#125;<br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreate4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//4. åˆ›å»ºå¤šçº§èŠ‚ç‚¹  /app1/p1</span><br>    <span class="hljs-comment">//creatingParentsIfNeeded():å¦‚æœçˆ¶èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºçˆ¶èŠ‚ç‚¹</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> client.create().creatingParentsIfNeeded().forPath(<span class="hljs-string">&quot;/app4/p1&quot;</span>);<br>    System.out.println(path);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-4-ZookeeperJavaAPIæ“ä½œ-æŸ¥è¯¢èŠ‚ç‚¹"><a href="#4-4-ZookeeperJavaAPIæ“ä½œ-æŸ¥è¯¢èŠ‚ç‚¹" class="headerlink" title="4.4)ZookeeperJavaAPIæ“ä½œ-æŸ¥è¯¢èŠ‚ç‚¹"></a>4.4)ZookeeperJavaAPIæ“ä½œ-æŸ¥è¯¢èŠ‚ç‚¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æŸ¥è¯¢èŠ‚ç‚¹ï¼š</span><br><span class="hljs-comment">* 1. æŸ¥è¯¢æ•°æ®ï¼šget: getData().forPath()</span><br><span class="hljs-comment">* 2. æŸ¥è¯¢å­èŠ‚ç‚¹ï¼š ls: getChildren().forPath()</span><br><span class="hljs-comment">* 3. æŸ¥è¯¢èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯ï¼šls -s:getData().storingStatIn(çŠ¶æ€å¯¹è±¡).forPath()</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGet1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//1. æŸ¥è¯¢æ•°æ®ï¼šget</span><br>    <span class="hljs-type">byte</span>[] data = client.getData().forPath(<span class="hljs-string">&quot;/app1&quot;</span>);<br>    System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data));<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGet2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">// 2. æŸ¥è¯¢å­èŠ‚ç‚¹ï¼š ls</span><br>    List&lt;String&gt; path = client.getChildren().forPath(<span class="hljs-string">&quot;/&quot;</span>);<br>    System.out.println(path);<br>&#125;<br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGet3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-type">Stat</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stat</span>();<br>    System.out.println(status);<br>    <span class="hljs-comment">//3. æŸ¥è¯¢èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯ï¼šls -s</span><br>    client.getData().storingStatIn(status).forPath(<span class="hljs-string">&quot;/app1&quot;</span>);<br>    System.out.println(status);<br>&#125;<br></code></pre></td></tr></table></figure><p>Statç±»</p><h3 id="4-5-Zookeeper-JavaAPIæ“ä½œ-ä¿®æ”¹èŠ‚ç‚¹"><a href="#4-5-Zookeeper-JavaAPIæ“ä½œ-ä¿®æ”¹èŠ‚ç‚¹" class="headerlink" title="4.5)Zookeeper JavaAPIæ“ä½œ-ä¿®æ”¹èŠ‚ç‚¹"></a>4.5)Zookeeper JavaAPIæ“ä½œ-ä¿®æ”¹èŠ‚ç‚¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* ä¿®æ”¹æ•°æ®</span><br><span class="hljs-comment">* 1. åŸºæœ¬ä¿®æ”¹æ•°æ®ï¼šsetData().forPath()</span><br><span class="hljs-comment">* 2. æ ¹æ®ç‰ˆæœ¬ä¿®æ”¹: setData().withVersion().forPath()</span><br><span class="hljs-comment">* * version æ˜¯é€šè¿‡æŸ¥è¯¢å‡ºæ¥çš„ã€‚ç›®çš„å°±æ˜¯ä¸ºäº†è®©å…¶ä»–å®¢æˆ·ç«¯æˆ–è€…çº¿ç¨‹ä¸å¹²æ‰°æˆ‘ã€‚</span><br><span class="hljs-comment">*</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSet</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>client.setData().forPath(<span class="hljs-string">&quot;/app1&quot;</span>, <span class="hljs-string">&quot;itcast&quot;</span>.getBytes());<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSetForVersion</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-type">Stat</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stat</span>();<br>    <span class="hljs-comment">//3. æŸ¥è¯¢èŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯ï¼šls -s</span><br>    client.getData().storingStatIn(status).forPath(<span class="hljs-string">&quot;/app1&quot;</span>);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> status.getVersion();<span class="hljs-comment">//æŸ¥è¯¢å‡ºæ¥çš„ 3</span><br>    System.out.println(version);<br>    client.setData().withVersion(version).forPath(<span class="hljs-string">&quot;/app1&quot;</span>, <span class="hljs-string">&quot;hehe&quot;</span>.getBytes());<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-6-Zookeeper-JavaAPIæ“ä½œ-åˆ é™¤èŠ‚ç‚¹"><a href="#4-6-Zookeeper-JavaAPIæ“ä½œ-åˆ é™¤èŠ‚ç‚¹" class="headerlink" title="4.6)Zookeeper JavaAPIæ“ä½œ-åˆ é™¤èŠ‚ç‚¹"></a>4.6)Zookeeper JavaAPIæ“ä½œ-åˆ é™¤èŠ‚ç‚¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* åˆ é™¤èŠ‚ç‚¹ï¼š delete deleteall</span><br><span class="hljs-comment">* 1. åˆ é™¤å•ä¸ªèŠ‚ç‚¹:delete().forPath(&quot;/app1&quot;);</span><br><span class="hljs-comment">* 2. åˆ é™¤å¸¦æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹:delete().deletingChildrenIfNeeded().forPath(&quot;/app1&quot;);</span><br><span class="hljs-comment">* 3. å¿…é¡»æˆåŠŸçš„åˆ é™¤:ä¸ºäº†é˜²æ­¢ç½‘ç»œæŠ–åŠ¨ã€‚æœ¬è´¨å°±æ˜¯é‡è¯•ã€‚  client.delete().guaranteed().forPath(&quot;/app2&quot;);</span><br><span class="hljs-comment">* 4. å›è°ƒï¼šinBackground</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">// 1. åˆ é™¤å•ä¸ªèŠ‚ç‚¹</span><br>    client.delete().forPath(<span class="hljs-string">&quot;/app1&quot;</span>);<br>&#125;<br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//2. åˆ é™¤å¸¦æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹</span><br>    client.delete().deletingChildrenIfNeeded().forPath(<span class="hljs-string">&quot;/app4&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//3. å¿…é¡»æˆåŠŸçš„åˆ é™¤</span><br>    client.delete().guaranteed().forPath(<span class="hljs-string">&quot;/app2&quot;</span>);<br>&#125;<br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//4. å›è°ƒ</span><br>    client.delete().guaranteed().inBackground(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BackgroundCallback</span>()&#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processResult</span><span class="hljs-params">(CuratorFramework client, CuratorEvent event)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>            System.out.println(<span class="hljs-string">&quot;æˆ‘è¢«åˆ é™¤äº†~&quot;</span>);<br>            System.out.println(event);<br>        &#125;<br>    &#125;).forPath(<span class="hljs-string">&quot;/app1&quot;</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure><h6 id="2022å¹´3æœˆ13æ—¥21-15-26"><a href="#2022å¹´3æœˆ13æ—¥21-15-26" class="headerlink" title="2022å¹´3æœˆ13æ—¥21:15:26"></a>2022å¹´3æœˆ13æ—¥21:15:26</h6><h3 id="4-7-Zookeeper-JavaAPIæ“ä½œ-Watchç›‘å¬æ¦‚è¿°"><a href="#4-7-Zookeeper-JavaAPIæ“ä½œ-Watchç›‘å¬æ¦‚è¿°" class="headerlink" title="4.7)Zookeeper JavaAPIæ“ä½œ-Watchç›‘å¬æ¦‚è¿°"></a>4.7)Zookeeper JavaAPIæ“ä½œ-Watchç›‘å¬æ¦‚è¿°</h3><p>â€¢ZooKeeper å…è®¸ç”¨æˆ·åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€äº›Watcherï¼Œå¹¶ä¸”åœ¨ä¸€äº›ç‰¹å®šäº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼ŒZooKeeper æœåŠ¡ç«¯ä¼šå°†äº‹ä»¶é€šçŸ¥åˆ°æ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯ä¸Šå»ï¼Œè¯¥æœºåˆ¶æ˜¯ ZooKeeper å®ç°åˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„é‡è¦ç‰¹æ€§ã€‚</p><p>â€¢ZooKeeper ä¸­å¼•å…¥äº†Watcheræœºåˆ¶æ¥å®ç°äº†å‘å¸ƒ&#x2F;è®¢é˜…åŠŸèƒ½èƒ½ï¼Œèƒ½å¤Ÿè®©å¤šä¸ªè®¢é˜…è€…åŒæ—¶ç›‘å¬æŸä¸€ä¸ªå¯¹è±¡ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è‡ªèº«çŠ¶æ€å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…ã€‚</p><p>â€¢ZooKeeper åŸç”Ÿæ”¯æŒé€šè¿‡æ³¨å†ŒWatcheræ¥è¿›è¡Œäº‹ä»¶ç›‘å¬ï¼Œä½†æ˜¯å…¶ä½¿ç”¨å¹¶ä¸æ˜¯ç‰¹åˆ«æ–¹ä¾¿</p><pre><code class="hljs">éœ€è¦å¼€å‘äººå‘˜è‡ªå·±åå¤æ³¨å†ŒWatcherï¼Œæ¯”è¾ƒç¹çã€‚</code></pre><p>â€¢Curatorå¼•å…¥äº† Cache æ¥å®ç°å¯¹ ZooKeeper æœåŠ¡ç«¯äº‹ä»¶çš„ç›‘å¬ã€‚</p><p>â€¢ZooKeeperæä¾›äº†ä¸‰ç§Watcherï¼š</p><p>â€¢NodeCache : åªæ˜¯ç›‘å¬æŸä¸€ä¸ªç‰¹å®šçš„èŠ‚ç‚¹</p><p>â€¢PathChildrenCache : ç›‘æ§ä¸€ä¸ªZNodeçš„å­èŠ‚ç‚¹. </p><p>â€¢TreeCache : å¯ä»¥ç›‘æ§æ•´ä¸ªæ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œç±»ä¼¼äºPathChildrenCacheå’ŒNodeCacheçš„ç»„åˆ</p><p><img src="/Hexo/../img/202203121513884.png" alt="1592057429708"></p><h3 id="4-8Zookeeper-JavaAPIæ“ä½œ-Watchç›‘å¬-NodeCache"><a href="#4-8Zookeeper-JavaAPIæ“ä½œ-Watchç›‘å¬-NodeCache" class="headerlink" title="4.8Zookeeper JavaAPIæ“ä½œ-Watchç›‘å¬-NodeCache"></a>4.8Zookeeper JavaAPIæ“ä½œ-Watchç›‘å¬-NodeCache</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ¼”ç¤º NodeCacheï¼šç»™æŒ‡å®šä¸€ä¸ªèŠ‚ç‚¹æ³¨å†Œç›‘å¬å™¨</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testNodeCache</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//1. åˆ›å»ºNodeCacheå¯¹è±¡</span><br>    <span class="hljs-keyword">final</span> <span class="hljs-type">NodeCache</span> <span class="hljs-variable">nodeCache</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeCache</span>(client,<span class="hljs-string">&quot;/app1&quot;</span>);<br>    <span class="hljs-comment">//2. æ³¨å†Œç›‘å¬</span><br>   nodeCache.getListenable().addListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeCacheListener</span>() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nodeChanged</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>            System.out.println(<span class="hljs-string">&quot;èŠ‚ç‚¹å˜åŒ–äº†~&quot;</span>);<br>            <span class="hljs-comment">//è·å–ä¿®æ”¹èŠ‚ç‚¹åçš„æ•°æ®</span><br>            <span class="hljs-type">byte</span>[] data = nodeCache.getCurrentData().getData();<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data));<br>            &#125;<br>        &#125;);<br>    <span class="hljs-comment">//3. å¼€å¯ç›‘å¬.å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™å¼€å¯ç›‘å¬æ˜¯ï¼ŒåŠ è½½ç¼“å†²æ•°æ®</span><br>    nodeCache.start(<span class="hljs-literal">true</span>);<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)&#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-9-Zookeeper-JavaAPIæ“ä½œ-Watchç›‘å¬-PathChildrenCache"><a href="#4-9-Zookeeper-JavaAPIæ“ä½œ-Watchç›‘å¬-PathChildrenCache" class="headerlink" title="4.9)Zookeeper JavaAPIæ“ä½œ-Watchç›‘å¬-PathChildrenCache"></a><strong>4.9)Zookeeper</strong> JavaAPIæ“ä½œ-Watchç›‘å¬-PathChildrenCache</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPathChildrenCache</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//1.åˆ›å»ºç›‘å¬å¯¹è±¡</span><br>    <span class="hljs-type">PathChildrenCache</span> <span class="hljs-variable">pathChildrenCache</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PathChildrenCache</span>(client,<span class="hljs-string">&quot;/app2&quot;</span>,<span class="hljs-literal">true</span>);<br>    <span class="hljs-comment">//2. ç»‘å®šç›‘å¬å™¨</span><br>    pathChildrenCache.getListenable().addListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PathChildrenCacheListener</span>() &#123;    <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">childEvent</span><span class="hljs-params">(CuratorFramework client, PathChildrenCacheEvent event)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>            System.out.println(<span class="hljs-string">&quot;å­èŠ‚ç‚¹å˜åŒ–äº†~&quot;</span>);<br>            System.out.println(event);<br>            <span class="hljs-comment">//ç›‘å¬å­èŠ‚ç‚¹çš„æ•°æ®å˜æ›´ï¼Œå¹¶ä¸”æ‹¿åˆ°å˜æ›´åçš„æ•°æ®</span><br>            <span class="hljs-comment">//1.è·å–ç±»å‹</span><br>            PathChildrenCacheEvent.<span class="hljs-type">Type</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> event.getType();<br>            <span class="hljs-comment">//2.åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯update</span><br>            <span class="hljs-keyword">if</span>(type.equals(PathChildrenCacheEvent.Type.CHILD_UPDATED))&#123;<br>                System.out.println(<span class="hljs-string">&quot;æ•°æ®å˜äº†ï¼ï¼ï¼&quot;</span>);<br>                <span class="hljs-type">byte</span>[] data = event.getData().getData();<br>                System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data));<br>            &#125;<br>        &#125;<br>    &#125;);<br>    <span class="hljs-comment">//3. å¼€å¯</span><br>    pathChildrenCache.start();<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)&#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-10-Zookeeper-JavaAPIæ“ä½œ-Watchç›‘å¬-TreeCache"><a href="#4-10-Zookeeper-JavaAPIæ“ä½œ-Watchç›‘å¬-TreeCache" class="headerlink" title="4.10)Zookeeper JavaAPIæ“ä½œ-Watchç›‘å¬-TreeCache"></a><strong>4.10)Zookeeper</strong> JavaAPIæ“ä½œ-Watchç›‘å¬-TreeCache</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* æ¼”ç¤º TreeCacheï¼šç›‘å¬æŸä¸ªèŠ‚ç‚¹è‡ªå·±å’Œæ‰€æœ‰å­èŠ‚ç‚¹ä»¬</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testTreeCache</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//1. åˆ›å»ºç›‘å¬å™¨</span><br>    <span class="hljs-type">TreeCache</span> <span class="hljs-variable">treeCache</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeCache</span>(client,<span class="hljs-string">&quot;/app2&quot;</span>);<br>    <span class="hljs-comment">//2. æ³¨å†Œç›‘å¬</span><br>    treeCache.getListenable().addListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeCacheListener</span>() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">childEvent</span><span class="hljs-params">(CuratorFramework client, TreeCacheEvent event)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>            System.out.println(<span class="hljs-string">&quot;èŠ‚ç‚¹å˜åŒ–äº†&quot;</span>);<br>            System.out.println(event);<br>        &#125;<br>    &#125;);<br>    <span class="hljs-comment">//3. å¼€å¯</span><br>    treeCache.start();<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)&#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-11-Zookeeperåˆ†å¸ƒå¼é”-æ¦‚å¿µ"><a href="#4-11-Zookeeperåˆ†å¸ƒå¼é”-æ¦‚å¿µ" class="headerlink" title="4.11)Zookeeperåˆ†å¸ƒå¼é”-æ¦‚å¿µ"></a>4.11)Zookeeperåˆ†å¸ƒå¼é”-æ¦‚å¿µ</h3><p>â€¢åœ¨æˆ‘ä»¬è¿›è¡Œå•æœºåº”ç”¨å¼€å‘ï¼Œæ¶‰åŠå¹¶å‘åŒæ­¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€é‡‡ç”¨synchronizedæˆ–è€…Lockçš„æ–¹å¼æ¥è§£å†³å¤šçº¿ç¨‹é—´çš„ä»£ç åŒæ­¥é—®é¢˜ï¼Œè¿™æ—¶å¤šçº¿ç¨‹çš„è¿è¡Œéƒ½æ˜¯åœ¨åŒä¸€ä¸ªJVMä¹‹ä¸‹ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p><p>â€¢ä½†å½“æˆ‘ä»¬çš„åº”ç”¨æ˜¯åˆ†å¸ƒå¼é›†ç¾¤å·¥ä½œçš„æƒ…å†µä¸‹ï¼Œå±äºå¤šJVMä¸‹çš„å·¥ä½œç¯å¢ƒï¼Œè·¨JVMä¹‹é—´å·²ç»æ— æ³•é€šè¿‡å¤šçº¿ç¨‹çš„é”è§£å†³åŒæ­¥é—®é¢˜ã€‚</p><p>â€¢é‚£ä¹ˆå°±éœ€è¦ä¸€ç§æ›´åŠ é«˜çº§çš„é”æœºåˆ¶ï¼Œæ¥å¤„ç†ç§è·¨æœºå™¨çš„è¿›ç¨‹ä¹‹é—´çš„æ•°æ®åŒæ­¥é—®é¢˜â€”â€”è¿™å°±æ˜¯åˆ†å¸ƒå¼é”ã€‚</p><p><img src="/Hexo/../img/202203121513619.png" alt="1592057871141"></p><h3 id="4-12-Zookeeper-åˆ†å¸ƒå¼é”-zookeeperåˆ†å¸ƒå¼é”åŸç†"><a href="#4-12-Zookeeper-åˆ†å¸ƒå¼é”-zookeeperåˆ†å¸ƒå¼é”åŸç†" class="headerlink" title="4.12)Zookeeper åˆ†å¸ƒå¼é”-zookeeperåˆ†å¸ƒå¼é”åŸç†"></a><strong>4.12)Zookeeper</strong> åˆ†å¸ƒå¼é”-zookeeperåˆ†å¸ƒå¼é”åŸç†</h3><p>â€¢æ ¸å¿ƒæ€æƒ³ï¼šå½“å®¢æˆ·ç«¯è¦è·å–é”ï¼Œåˆ™åˆ›å»ºèŠ‚ç‚¹ï¼Œä½¿ç”¨å®Œé”ï¼Œåˆ™åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚</p><p>1.å®¢æˆ·ç«¯è·å–é”æ—¶ï¼Œåœ¨lockèŠ‚ç‚¹ä¸‹åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹ã€‚</p><p>2.ç„¶åè·å–lockä¸‹é¢çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œå®¢æˆ·ç«¯è·å–åˆ°æ‰€æœ‰çš„å­èŠ‚ç‚¹ä¹‹åï¼Œå¦‚æœå‘ç°è‡ªå·±åˆ›å»ºçš„å­èŠ‚ç‚¹åºå·æœ€å°ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¯¥å®¢æˆ·ç«¯è·å–åˆ°äº†é”ã€‚ä½¿ç”¨å®Œé”åï¼Œå°†è¯¥èŠ‚ç‚¹åˆ é™¤ã€‚</p><p>3.å¦‚æœå‘ç°è‡ªå·±åˆ›å»ºçš„èŠ‚ç‚¹å¹¶élockæ‰€æœ‰å­èŠ‚ç‚¹ä¸­æœ€å°çš„ï¼Œè¯´æ˜è‡ªå·±è¿˜æ²¡æœ‰è·å–åˆ°é”ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯éœ€è¦æ‰¾åˆ°æ¯”è‡ªå·±å°çš„é‚£ä¸ªèŠ‚ç‚¹ï¼ŒåŒæ—¶å¯¹å…¶æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ï¼Œç›‘å¬åˆ é™¤äº‹ä»¶ã€‚</p><p>4.å¦‚æœå‘ç°æ¯”è‡ªå·±å°çš„é‚£ä¸ªèŠ‚ç‚¹è¢«åˆ é™¤ï¼Œåˆ™å®¢æˆ·ç«¯çš„</p><pre><code class="hljs">Watcherä¼šæ”¶åˆ°ç›¸åº”é€šçŸ¥ï¼Œæ­¤æ—¶å†æ¬¡åˆ¤æ–­è‡ªå·±åˆ›å»ºçš„èŠ‚ç‚¹æ˜¯å¦æ˜¯lockå­èŠ‚ç‚¹ä¸­åºå·æœ€å°çš„ï¼Œå¦‚æœæ˜¯åˆ™è·å–åˆ°äº†é”ï¼Œå¦‚æœä¸æ˜¯åˆ™é‡å¤ä»¥ä¸Šæ­¥éª¤ç»§ç»­è·å–åˆ°æ¯”è‡ªå·±å°çš„ä¸€ä¸ªèŠ‚ç‚¹å¹¶æ³¨å†Œç›‘å¬ã€‚</code></pre><p><img src="/Hexo/../img/202203121513004.png" alt="1592057925831"></p><h3 id="4-13-Zookeeper-åˆ†å¸ƒå¼é”-æ¨¡æ‹Ÿ12306å”®ç¥¨æ¡ˆä¾‹"><a href="#4-13-Zookeeper-åˆ†å¸ƒå¼é”-æ¨¡æ‹Ÿ12306å”®ç¥¨æ¡ˆä¾‹" class="headerlink" title="4.13)Zookeeper åˆ†å¸ƒå¼é”-æ¨¡æ‹Ÿ12306å”®ç¥¨æ¡ˆä¾‹"></a><strong>4.13)Zookeeper</strong> åˆ†å¸ƒå¼é”-æ¨¡æ‹Ÿ12306å”®ç¥¨æ¡ˆä¾‹</h3><p><strong>Curatorå®ç°åˆ†å¸ƒå¼é”API</strong></p><ul><li><p>åœ¨Curatorä¸­æœ‰äº”ç§é”æ–¹æ¡ˆï¼š</p><ul><li><p>InterProcessSemaphoreMutexï¼šåˆ†å¸ƒå¼æ’å®ƒé”ï¼ˆéå¯é‡å…¥é”ï¼‰</p></li><li><p>InterProcessMutexï¼šåˆ†å¸ƒå¼å¯é‡å…¥æ’å®ƒé”</p></li><li><p>InterProcessReadWriteLockï¼šåˆ†å¸ƒå¼è¯»å†™é”</p></li><li><p>InterProcessMultiLockï¼šå°†å¤šä¸ªé”ä½œä¸ºå•ä¸ªå®ä½“ç®¡ç†çš„å®¹å™¨</p></li><li><p>InterProcessSemaphoreV2ï¼šå…±äº«ä¿¡å·é‡</p></li></ul></li></ul><p><img src="/Hexo/../img/202203121513467.png" alt="1592058017457"></p><p>1,åˆ›å»ºçº¿ç¨‹è¿›è¡ŒåŠ é”è®¾ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ticket12306</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tickets</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<span class="hljs-comment">//æ•°æ®åº“çš„ç¥¨æ•°</span><br>    <span class="hljs-keyword">private</span> InterProcessMutex lock ;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-comment">//è·å–é”</span><br>            <span class="hljs-keyword">try</span> &#123;<br>            lock.acquire(<span class="hljs-number">3</span>, TimeUnit.SECONDS);<br>                <span class="hljs-keyword">if</span>(tickets &gt; <span class="hljs-number">0</span>)&#123;<br>                    System.out.println(Thread.currentThread()+<span class="hljs-string">&quot;:&quot;</span>+tickets);<br>                    Thread.sleep(<span class="hljs-number">100</span>);<br>                    tickets--;<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>                e.printStackTrace();<br>            &#125;<span class="hljs-keyword">finally</span> &#123;<br>                <span class="hljs-comment">//é‡Šæ”¾é”</span><br>                <span class="hljs-keyword">try</span> &#123;<br>                    lock.release();<br>                &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2,åˆ›å»ºè¿æ¥ï¼Œå¹¶ä¸”åˆå§‹åŒ–é”</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">Ticket12306</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//é‡è¯•ç­–ç•¥</span><br>    <span class="hljs-type">RetryPolicy</span> <span class="hljs-variable">retryPolicy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">3000</span>, <span class="hljs-number">10</span>);<br>    <span class="hljs-comment">//2.ç¬¬äºŒç§æ–¹å¼</span><br>    <span class="hljs-comment">//CuratorFrameworkFactory.builder();</span><br>    <span class="hljs-type">CuratorFramework</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> CuratorFrameworkFactory.builder()<br>        .connectString(<span class="hljs-string">&quot;192.168.149.135:2181&quot;</span>)<br>        .sessionTimeoutMs(<span class="hljs-number">60</span> * <span class="hljs-number">1000</span>)<br>        .connectionTimeoutMs(<span class="hljs-number">15</span> * <span class="hljs-number">1000</span>)<br>        .retryPolicy(retryPolicy)<br>        .build();<br>    <span class="hljs-comment">//å¼€å¯è¿æ¥</span><br>    client.start();<br>    lock = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InterProcessMutex</span>(client,<span class="hljs-string">&quot;/lock&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>3,è¿è¡Œå¤šä¸ªçº¿ç¨‹è¿›è¡Œæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LockTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Ticket12306</span> <span class="hljs-variable">ticket12306</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Ticket12306</span>();<br>        <span class="hljs-comment">//åˆ›å»ºå®¢æˆ·ç«¯</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ticket12306,<span class="hljs-string">&quot;æºç¨‹&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ticket12306,<span class="hljs-string">&quot;é£çŒª&quot;</span>);<br>        t1.start();<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-ZooKeeper-é›†ç¾¤æ­å»º"><a href="#5-ZooKeeper-é›†ç¾¤æ­å»º" class="headerlink" title="5)ZooKeeper é›†ç¾¤æ­å»º"></a>5)ZooKeeper é›†ç¾¤æ­å»º</h2><h3 id="5-1-Zookeeperé›†ç¾¤ä»‹ç»"><a href="#5-1-Zookeeperé›†ç¾¤ä»‹ç»" class="headerlink" title="5.1)Zookeeperé›†ç¾¤ä»‹ç»"></a><strong>5.1)Zookeeper</strong>é›†ç¾¤ä»‹ç»</h3><p>Leaderé€‰ä¸¾ï¼š</p><p>â€¢Serveridï¼šæœåŠ¡å™¨ID</p><p>  æ¯”å¦‚æœ‰ä¸‰å°æœåŠ¡å™¨ï¼Œç¼–å·åˆ†åˆ«æ˜¯1,2,3ã€‚</p><p>  ç¼–å·è¶Šå¤§åœ¨é€‰æ‹©ç®—æ³•ä¸­çš„æƒé‡è¶Šå¤§ã€‚</p><p>â€¢Zxidï¼šæ•°æ®ID</p><p>  æœåŠ¡å™¨ä¸­å­˜æ”¾çš„æœ€å¤§æ•°æ®ID.å€¼è¶Šå¤§è¯´æ˜æ•°æ®  è¶Šæ–°ï¼Œåœ¨é€‰ä¸¾ç®—æ³•ä¸­æ•°æ®è¶Šæ–°æƒé‡è¶Šå¤§ã€‚</p><p>â€¢åœ¨Leaderé€‰ä¸¾çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸå°ZooKeeper</p><pre><code class="hljs">è·å¾—äº†è¶…è¿‡åŠæ•°çš„é€‰ç¥¨ï¼Œåˆ™æ­¤ZooKeeperå°±å¯ä»¥æˆä¸ºLeaderäº†ã€‚</code></pre><h3 id="5-2-æ­å»ºè¦æ±‚"><a href="#5-2-æ­å»ºè¦æ±‚" class="headerlink" title="5.2)æ­å»ºè¦æ±‚"></a>5.2)æ­å»ºè¦æ±‚</h3><p>çœŸå®çš„é›†ç¾¤æ˜¯éœ€è¦éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šçš„ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬æµ‹è¯•æ—¶åŒæ—¶å¯åŠ¨å¾ˆå¤šä¸ªè™šæ‹Ÿæœºå†…å­˜ä¼šåƒä¸æ¶ˆï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šæ­å»º<strong>ä¼ªé›†ç¾¤</strong>ï¼Œä¹Ÿå°±æ˜¯æŠŠæ‰€æœ‰çš„æœåŠ¡éƒ½æ­å»ºåœ¨ä¸€å°è™šæ‹Ÿæœºä¸Šï¼Œç”¨ç«¯å£è¿›è¡ŒåŒºåˆ†ã€‚</p><p>æˆ‘ä»¬è¿™é‡Œè¦æ±‚æ­å»ºä¸€ä¸ªä¸‰ä¸ªèŠ‚ç‚¹çš„Zookeeperé›†ç¾¤ï¼ˆä¼ªé›†ç¾¤ï¼‰ã€‚</p><h3 id="5-3-å‡†å¤‡å·¥ä½œ"><a href="#5-3-å‡†å¤‡å·¥ä½œ" class="headerlink" title="5.3)å‡†å¤‡å·¥ä½œ"></a><strong>5.3)å‡†å¤‡å·¥ä½œ</strong></h3><p>é‡æ–°éƒ¨ç½²ä¸€å°è™šæ‹Ÿæœºä½œä¸ºæˆ‘ä»¬æ­å»ºé›†ç¾¤çš„æµ‹è¯•æœåŠ¡å™¨ã€‚</p><p>ï¼ˆ1ï¼‰å®‰è£…JDK  ã€æ­¤æ­¥éª¤çœç•¥ã€‘ã€‚</p><p>ï¼ˆ2ï¼‰Zookeeperå‹ç¼©åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨<br>ï¼ˆ3ï¼‰å°†Zookeeperè§£å‹ ï¼Œå»ºç«‹&#x2F;usr&#x2F;local&#x2F;zookeeper-clusterç›®å½•ï¼Œå°†è§£å‹åçš„Zookeeperå¤åˆ¶åˆ°ä»¥ä¸‹ä¸‰ä¸ªç›®å½•</p><p>&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-1</p><p>&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-2</p><p>&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-3</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@localhost ~]# mkdir /usr/local/zookeeper-cluster<br>[root@localhost ~]# cp -r  apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-1<br>[root@localhost ~]# cp -r  apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-2<br>[root@localhost ~]# cp -r  apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-3<br></code></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰åˆ›å»ºdataç›®å½• ï¼Œå¹¶ä¸”å°† confä¸‹zoo_sample.cfg æ–‡ä»¶æ”¹åä¸º zoo.cfg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir /usr/local/zookeeper-cluster/zookeeper-1/data<br>mkdir /usr/local/zookeeper-cluster/zookeeper-2/data<br>mkdir /usr/local/zookeeper-cluster/zookeeper-3/data<br><br>mv  /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo_sample.cfg  /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg<br>mv  /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo_sample.cfg  /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg<br>mv  /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo_sample.cfg  /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg<br></code></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰ é…ç½®æ¯ä¸€ä¸ªZookeeper çš„dataDir å’Œ clientPort åˆ†åˆ«ä¸º2181  2182  2183</p><p>ä¿®æ”¹&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-1&#x2F;conf&#x2F;zoo.cfg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg<br><br>clientPort=2181<br>dataDir=/usr/local/zookeeper-cluster/zookeeper-1/data<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-2&#x2F;conf&#x2F;zoo.cfg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg<br><br>clientPort=2182<br>dataDir=/usr/local/zookeeper-cluster/zookeeper-2/data<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-3&#x2F;conf&#x2F;zoo.cfg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg<br><br>clientPort=2183<br>dataDir=/usr/local/zookeeper-cluster/zookeeper-3/data<br></code></pre></td></tr></table></figure><h3 id="5-4-é…ç½®é›†ç¾¤"><a href="#5-4-é…ç½®é›†ç¾¤" class="headerlink" title="5.4)é…ç½®é›†ç¾¤"></a><strong>5.4)é…ç½®é›†ç¾¤</strong></h3><p>ï¼ˆ1ï¼‰åœ¨æ¯ä¸ªzookeeperçš„ data ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª myid æ–‡ä»¶ï¼Œå†…å®¹åˆ†åˆ«æ˜¯1ã€2ã€3 ã€‚è¿™ä¸ªæ–‡ä»¶å°±æ˜¯è®°å½•æ¯ä¸ªæœåŠ¡å™¨çš„ID</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">echo 1 &gt;/usr/local/zookeeper-cluster/zookeeper-1/data/myid<br>echo 2 &gt;/usr/local/zookeeper-cluster/zookeeper-2/data/myid<br>echo 3 &gt;/usr/local/zookeeper-cluster/zookeeper-3/data/myid<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰åœ¨æ¯ä¸€ä¸ªzookeeper çš„ zoo.cfgé…ç½®å®¢æˆ·ç«¯è®¿é—®ç«¯å£ï¼ˆclientPortï¼‰å’Œé›†ç¾¤æœåŠ¡å™¨IPåˆ—è¡¨ã€‚</p><p>é›†ç¾¤æœåŠ¡å™¨IPåˆ—è¡¨å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg<br>vim /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg<br>vim /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg<br><br>server.1=192.168.149.135:2881:3881<br>server.2=192.168.149.135:2882:3882<br>server.3=192.168.149.135:2883:3883<br></code></pre></td></tr></table></figure><p>è§£é‡Šï¼šserver.æœåŠ¡å™¨ID&#x3D;æœåŠ¡å™¨IPåœ°å€ï¼šæœåŠ¡å™¨ä¹‹é—´é€šä¿¡ç«¯å£ï¼šæœåŠ¡å™¨ä¹‹é—´æŠ•ç¥¨é€‰ä¸¾ç«¯å£</p><h3 id="5-5-å¯åŠ¨é›†ç¾¤"><a href="#5-5-å¯åŠ¨é›†ç¾¤" class="headerlink" title="5.5)å¯åŠ¨é›†ç¾¤"></a><strong>5.5)å¯åŠ¨é›†ç¾¤</strong></h3><p>å¯åŠ¨é›†ç¾¤å°±æ˜¯åˆ†åˆ«å¯åŠ¨æ¯ä¸ªå®ä¾‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh start<br>/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh start<br>/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh start<br></code></pre></td></tr></table></figure><p><img src="/Hexo/../img/202203121513508.png" alt="image-20220312151332448"> </p><p>å¯åŠ¨åæˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸‹æ¯ä¸ªå®ä¾‹çš„è¿è¡ŒçŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status<br>/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status<br>/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status<br></code></pre></td></tr></table></figure><p>å…ˆæŸ¥è¯¢ç¬¬ä¸€ä¸ªæœåŠ¡</p><p><img src="/Hexo/../img/202203121513326.png" alt="image-20220312151343292"> </p><p>Modeä¸ºfollowerè¡¨ç¤ºæ˜¯<strong>è·Ÿéšè€…</strong>ï¼ˆä»ï¼‰</p><p>å†æŸ¥è¯¢ç¬¬äºŒä¸ªæœåŠ¡Mod ä¸ºleaderè¡¨ç¤ºæ˜¯<strong>é¢†å¯¼è€…</strong>ï¼ˆä¸»ï¼‰</p><p><img src="/Hexo/../img/202203121513560.png" alt="image-20220312151351510"> </p><p>æŸ¥è¯¢ç¬¬ä¸‰ä¸ªä¸ºè·Ÿéšè€…ï¼ˆä»ï¼‰</p><p><img src="/Hexo/../img/202203121514253.png" alt="image-20220312151401203"> </p><h3 id="5-6-æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸"><a href="#5-6-æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸" class="headerlink" title="5.6)æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸"></a><strong>5.6)æ¨¡æ‹Ÿé›†ç¾¤å¼‚å¸¸</strong></h3><p>ï¼ˆ1ï¼‰é¦–å…ˆæˆ‘ä»¬å…ˆæµ‹è¯•å¦‚æœæ˜¯ä»æœåŠ¡å™¨æŒ‚æ‰ï¼Œä¼šæ€ä¹ˆæ ·</p><p>æŠŠ3å·æœåŠ¡å™¨åœæ‰ï¼Œè§‚å¯Ÿ1å·å’Œ2å·ï¼Œå‘ç°çŠ¶æ€å¹¶æ²¡æœ‰å˜åŒ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh stop<br><br>/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status<br>/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status<br></code></pre></td></tr></table></figure><p><img src="/Hexo/../img/202203121514251.png" alt="image-20220312151408189"> </p><p>ç”±æ­¤å¾—å‡ºç»“è®ºï¼Œ3ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œä»æœåŠ¡å™¨æŒ‚æ‰ï¼Œé›†ç¾¤æ­£å¸¸</p><p>ï¼ˆ2ï¼‰æˆ‘ä»¬å†æŠŠ1å·æœåŠ¡å™¨ï¼ˆä»æœåŠ¡å™¨ï¼‰ä¹Ÿåœæ‰ï¼ŒæŸ¥çœ‹2å·ï¼ˆä¸»æœåŠ¡å™¨ï¼‰çš„çŠ¶æ€ï¼Œå‘ç°å·²ç»åœæ­¢è¿è¡Œäº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh stop<br><br>/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status<br></code></pre></td></tr></table></figure><p><img src="/Hexo/../img/202203121514305.png" alt="image-20220312151421244"> </p><p>ç”±æ­¤å¾—å‡ºç»“è®ºï¼Œ3ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œ2ä¸ªä»æœåŠ¡å™¨éƒ½æŒ‚æ‰ï¼Œä¸»æœåŠ¡å™¨ä¹Ÿæ— æ³•è¿è¡Œã€‚å› ä¸ºå¯è¿è¡Œçš„æœºå™¨æ²¡æœ‰è¶…è¿‡é›†ç¾¤æ€»æ•°é‡çš„åŠæ•°ã€‚</p><p>ï¼ˆ3ï¼‰æˆ‘ä»¬å†æ¬¡æŠŠ1å·æœåŠ¡å™¨å¯åŠ¨èµ·æ¥ï¼Œå‘ç°2å·æœåŠ¡å™¨åˆå¼€å§‹æ­£å¸¸å·¥ä½œäº†ã€‚è€Œä¸”ä¾ç„¶æ˜¯é¢†å¯¼è€…ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh start<br><br>/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status<br></code></pre></td></tr></table></figure><p><img src="/Hexo/../img/202203121514501.png" alt="image-20220312151438444"> </p><p>ï¼ˆ4ï¼‰æˆ‘ä»¬æŠŠ3å·æœåŠ¡å™¨ä¹Ÿå¯åŠ¨èµ·æ¥ï¼ŒæŠŠ2å·æœåŠ¡å™¨åœæ‰,åœæ‰åè§‚å¯Ÿ1å·å’Œ3å·çš„çŠ¶æ€ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh start<br>/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh stop<br><br>/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status<br>/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status<br></code></pre></td></tr></table></figure><p><img src="/Hexo/../img/202203121514156.png" alt="image-20220312151452088"> </p><p>å‘ç°æ–°çš„leaderäº§ç”Ÿäº†~  </p><p>ç”±æ­¤æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œå½“é›†ç¾¤ä¸­çš„ä¸»æœåŠ¡å™¨æŒ‚äº†ï¼Œé›†ç¾¤ä¸­çš„å…¶ä»–æœåŠ¡å™¨ä¼šè‡ªåŠ¨è¿›è¡Œé€‰ä¸¾çŠ¶æ€ï¼Œç„¶åäº§ç”Ÿæ–°å¾—leader </p><p>ï¼ˆ5ï¼‰æˆ‘ä»¬å†æ¬¡æµ‹è¯•ï¼Œå½“æˆ‘ä»¬æŠŠ2å·æœåŠ¡å™¨é‡æ–°å¯åŠ¨èµ·æ¥å¯åŠ¨åï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ2å·æœåŠ¡å™¨ä¼šå†æ¬¡æˆä¸ºæ–°çš„é¢†å¯¼å—ï¼Ÿæˆ‘ä»¬çœ‹ç»“æœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh start<br><br>/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status<br>/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status<br></code></pre></td></tr></table></figure><p><img src="/Hexo/../img/202203121515528.png" alt="image-20220312151501479"> </p><p>æˆ‘ä»¬ä¼šå‘ç°ï¼Œ2å·æœåŠ¡å™¨å¯åŠ¨åä¾ç„¶æ˜¯è·Ÿéšè€…ï¼ˆä»æœåŠ¡å™¨ï¼‰ï¼Œ3å·æœåŠ¡å™¨ä¾ç„¶æ˜¯é¢†å¯¼è€…ï¼ˆä¸»æœåŠ¡å™¨ï¼‰ï¼Œæ²¡æœ‰æ’¼åŠ¨3å·æœåŠ¡å™¨çš„é¢†å¯¼åœ°ä½ã€‚</p><p>ç”±æ­¤æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œå½“é¢†å¯¼è€…äº§ç”Ÿåï¼Œå†æ¬¡æœ‰æ–°æœåŠ¡å™¨åŠ å…¥é›†ç¾¤ï¼Œä¸ä¼šå½±å“åˆ°ç°ä»»é¢†å¯¼è€…ã€‚</p><h2 id="6-Zookeeper-æ ¸å¿ƒç†è®º"><a href="#6-Zookeeper-æ ¸å¿ƒç†è®º" class="headerlink" title="6)Zookeeper æ ¸å¿ƒç†è®º"></a>6)Zookeeper æ ¸å¿ƒç†è®º</h2><p><strong>Zookeepeé›†ç¾¤è§’è‰²</strong></p><p>åœ¨ZooKeeperé›†ç¾¤æœä¸­åŠ¡ä¸­æœ‰ä¸‰ä¸ªè§’è‰²ï¼š</p><p>â€¢Leader é¢†å¯¼è€… ï¼š          </p><pre><code class="hljs">1. å¤„ç†äº‹åŠ¡è¯·æ±‚2. é›†ç¾¤å†…éƒ¨å„æœåŠ¡å™¨çš„è°ƒåº¦è€…</code></pre><p>â€¢Follower è·Ÿéšè€… ï¼š</p><pre><code class="hljs">1. å¤„ç†å®¢æˆ·ç«¯éäº‹åŠ¡è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™LeaderæœåŠ¡å™¨2. å‚ä¸Leaderé€‰ä¸¾æŠ•ç¥¨</code></pre><p>â€¢Observer è§‚å¯Ÿè€…ï¼š</p><pre><code class="hljs">1. å¤„ç†å®¢æˆ·ç«¯éäº‹åŠ¡è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™LeaderæœåŠ¡å™¨</code></pre><p><img src="/Hexo/../img/202203121515396.png" alt="1592058451822"></p>]]></content>
    
    
    <categories>
      
      <category>åˆ†å¸ƒå¼zookeeper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>zookeeper</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>doubleå¿«é€Ÿå…¥é—¨-é«˜çº§ç‰¹æ€§</title>
    <link href="/Hexo/2022/01/25/Dubbo/"/>
    <url>/Hexo/2022/01/25/Dubbo/</url>
    
    <content type="html"><![CDATA[<h2 id="1-ä»Šæ—¥å†…å®¹"><a href="#1-ä»Šæ—¥å†…å®¹" class="headerlink" title="1-ä»Šæ—¥å†…å®¹"></a><strong>1-ä»Šæ—¥å†…å®¹</strong></h2><p> åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ç›¸å…³æ¦‚å¿µ</p><p>dubbo æ¦‚è¿°</p><p>dubboå¿«é€Ÿå…¥é—¨</p><p>dubboçš„é«˜çº§ç‰¹æ€§</p><h2 id="2-ç›¸å…³æ¦‚å¿µ"><a href="#2-ç›¸å…³æ¦‚å¿µ" class="headerlink" title="2-ç›¸å…³æ¦‚å¿µ"></a><strong>2-ç›¸å…³æ¦‚å¿µ</strong></h2><h3 id="2-1-äº’è”ç½‘é¡¹ç›®æ¶æ„-ç‰¹ç‚¹"><a href="#2-1-äº’è”ç½‘é¡¹ç›®æ¶æ„-ç‰¹ç‚¹" class="headerlink" title="2.1-äº’è”ç½‘é¡¹ç›®æ¶æ„-ç‰¹ç‚¹"></a>2.1-äº’è”ç½‘é¡¹ç›®æ¶æ„-ç‰¹ç‚¹</h3><p>äº’è”ç½‘é¡¹ç›®æ¶æ„-ç‰¹ç‚¹</p><ol><li><p>ç”¨æˆ·å¤š</p></li><li><p>æµé‡å¤§ï¼Œå¹¶å‘é«˜</p></li><li><p>æµ·é‡æ•°æ®</p></li><li><p>æ˜“å—æ”»å‡»</p></li><li><p>åŠŸèƒ½ç¹ç</p></li><li><p>å˜æ›´å¿«</p></li></ol><p><strong>ä¼ ç»Ÿé¡¹ç›®å’Œäº’è”ç½‘é¡¹ç›®çš„ä¸åŒ</strong></p><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec132.png" alt="1581310475046"></p><p><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼š<br>    ç¾è§‚ã€åŠŸèƒ½ã€é€Ÿåº¦ã€ç¨³å®šæ€§</p><p><strong>è¡¡é‡ä¸€ä¸ªç½‘ç«™é€Ÿåº¦æ˜¯å¦å¿«:</strong><br>    æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ä¸€ç¬é—´å®Œæˆ;é¡µé¢å†…è·³è½¬ï¼Œ-åˆ¹é‚£é—´å®Œæˆã€‚<br>    æ ¹æ®ä½›ç»ã€Šåƒ§è¡¹å¾‹ã€‹è®°è½½:ä¸€ åˆ¹é‚£è€…ä¸º-å¿µ,äºŒåå¿µä¸º-ç¬,äºŒåç¬ä¸º-å¼¹<br>    æŒ‡ï¼ŒäºŒåå¼¹æŒ‡ä¸º-ç½—é¢„ï¼Œ äºŒåç½—é¢„ä¸º-é¡»è‡¾ï¼Œä¸€æ—¥ä¸€å¤œæœ‰ä¸‰åé¡»è‡¾ã€‚</p><h3 id="2-2-äº’è”ç½‘é¡¹ç›®æ¶æ„-ç›®æ ‡"><a href="#2-2-äº’è”ç½‘é¡¹ç›®æ¶æ„-ç›®æ ‡" class="headerlink" title="2.2-äº’è”ç½‘é¡¹ç›®æ¶æ„-ç›®æ ‡"></a>2.2-äº’è”ç½‘é¡¹ç›®æ¶æ„-ç›®æ ‡</h3><p><strong>è¡¡é‡ç½‘ç«™çš„æ€§èƒ½æŒ‡æ ‡:</strong><br>    **å“åº”æ—¶é—´:**æŒ‡æ‰§è¡Œä¸€ä¸ªè¯·æ±‚ä»å¼€å§‹åˆ°æœ€åæ”¶åˆ°å“åº”æ•°æ®æ‰€èŠ±è´¹çš„æ€»ä½“æ—¶é—´ã€‚<br>    **å¹¶å‘æ•°:**æŒ‡ç³»ç»ŸåŒæ—¶èƒ½å¤„ç†çš„è¯·æ±‚æ•°é‡ã€‚<br>    <strong>å¹¶å‘è¿æ¥æ•°:</strong> æŒ‡çš„æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå¹¶å»ºç«‹äº†TCPè¿æ¥ã€‚æ¯ç§’é’ŸæœåŠ¡å™¨è¿æ¥çš„æ€»TCPæ•°é‡<br>    **è¯·æ±‚æ•°:**ä¹Ÿç§°ä¸ºQPS(Query Per Second)æŒ‡æ¯ç§’å¤šå°‘è¯·æ±‚.<br>    **å¹¶å‘ç”¨æˆ·æ•°:**å•ä½æ—¶é—´å†…æœ‰å¤šå°‘ç”¨æˆ·<br>    **ååé‡:**æŒ‡å•ä½æ—¶é—´å†…ç³»ç»Ÿèƒ½å¤„ç†çš„è¯·æ±‚æ•°é‡ã€‚</p><pre><code class="hljs">â—QPS: Query Per Secondæ¯ç§’æŸ¥è¯¢æ•°ã€‚â—TPS: Transactions Per Secondæ¯ç§’äº‹åŠ¡æ•°ã€‚â—ä¸€ä¸ªäº‹åŠ¡æ˜¯æŒ‡ä¸€ ä¸ªå®¢æˆ·æœºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ç„¶åæœåŠ¡å™¨åšå‡ºååº”çš„è¿‡ç¨‹ã€‚å®¢æˆ·æœºåœ¨å‘é€è¯·æ±‚æ—¶å¼€å§‹è®¡æ—¶ï¼Œæ”¶åˆ°æœåŠ¡å™¨å“åº”åç»“æŸè®¡æ—¶ï¼Œä»¥æ­¤æ¥è®¡ç®—ä½¿ç”¨çš„æ—¶é—´å’Œå®Œæˆçš„äº‹åŠ¡ä¸ªæ•°ã€‚â—ä¸€ä¸ªé¡µé¢çš„ä¸€æ¬¡è®¿é—®ï¼Œåªä¼šå½¢æˆä¸€ ä¸ªTPS; ä½†-æ¬¡é¡µé¢è¯·æ±‚ï¼Œå¯èƒ½äº§ç”Ÿå¤šæ¬¡å¯¹æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œå°±ä¼šæœ‰å¤šä¸ªQPS  QPS&gt;=å¹¶å‘è¿æ¥æ•°&gt;= TPS</code></pre><p><strong>å¤§å‹äº’è”ç½‘é¡¹ç›®æ¶æ„ç›®æ ‡</strong>:</p><pre><code class="hljs">â—**é«˜æ€§èƒ½:**æä¾›å¿«é€Ÿçš„è®¿é—®ä½“éªŒã€‚â—**é«˜å¯ç”¨:**ç½‘ç«™æœåŠ¡- å¯ä»¥æ­£å¸¸è®¿é—®</code></pre><h3 id="2-3-é›†ç¾¤å’Œåˆ†å¸ƒå¼"><a href="#2-3-é›†ç¾¤å’Œåˆ†å¸ƒå¼" class="headerlink" title="2.3-é›†ç¾¤å’Œåˆ†å¸ƒå¼"></a>2.3-é›†ç¾¤å’Œåˆ†å¸ƒå¼</h3><p>é›†ç¾¤å’Œåˆ†å¸ƒå¼ï¼Œ<br>â—é›†ç¾¤:å¾ˆå¤šâ€œäººâ€ä¸€èµ·ï¼Œå¹²ä¸€æ ·çš„äº‹ã€‚<br>â—ä¸€ä¸ªä¸šåŠ¡æ¨¡å—ï¼Œéƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šã€‚<br>â—åˆ†å¸ƒå¼:å¾ˆå¤šâ€äººâ€ä¸€èµ·ï¼Œå¹²ä¸æ ·çš„äº‹ã€‚è¿™äº›ä¸ä¸€æ ·çš„äº‹ï¼Œ åˆèµ·æ¥æ˜¯ä¸€ä»¶å¤§äº‹ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec459.png"></p><h3 id="2-4-æ¶æ„æ¼”è¿›"><a href="#2-4-æ¶æ„æ¼”è¿›" class="headerlink" title="2.4-æ¶æ„æ¼”è¿›"></a>2.4-æ¶æ„æ¼”è¿›</h3><p><strong>å•ä½“æ¶æ„ï¼š</strong></p><p><strong>ä¼˜ç‚¹:</strong><br>    ç®€å•:å¼€å‘éƒ¨ç½²éƒ½å¾ˆæ–¹ä¾¿ï¼Œå°å‹é¡¹ç›®é¦–é€‰<br><strong>ç¼ºç‚¹:</strong><br>â—é¡¹ç›®å¯åŠ¨æ…¢<br>â—å¯é æ€§å·®</p><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec142.png" alt="1581313584459"></p><p><strong>å‚ç›´æ¶æ„ï¼š</strong>å‚ç›´æ¶æ„æ˜¯æŒ‡å°†å•ä½“æ¶æ„ä¸­çš„å¤šä¸ªæ¨¡å—æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„é¡¹ç›®ã€‚å½¢æˆå¤šä¸ªç‹¬ç«‹çš„å•ä½“æ¶æ„ã€‚</p><p><strong>å•ä½“æ¶æ„å­˜åœ¨çš„é—®é¢˜:</strong></p><ul><li><p>é¡¹ç›®å¯åŠ¨æ…¢</p></li><li><p>å¯é æ€§å·®</p></li><li><p>å¯ä¼¸ç¼©æ€§å·®</p></li><li><p>æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§å·®</p></li><li><p>æ€§èƒ½ä½</p></li></ul><p><strong>å‚ç›´æ¶æ„å­˜åœ¨çš„é—®é¢˜:</strong> é‡å¤åŠŸèƒ½å¤ªå¤š</p><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec0fa.png" alt="1581313910427"></p><p><strong>åˆ†å¸ƒå¼æ¶æ„ï¼š</strong>æ˜¯æŒ‡åœ¨å‚ç›´æ¶æ„çš„åŸºç¡€ä¸Š,å°†å…¬å…±ä¸šåŠ¡æ¨¡å—æŠ½å–å‡ºæ¥,ä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ä¾›å…¶ä»–è°ƒç”¨è€…æ¶ˆè´¹ï¼Œä»¥å®ç°æœåŠ¡çš„å…±äº«å’Œé‡ç”¨ã€‚åº•å±‚é€šè¿‡RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨å®ç°ï¼‰<br>    <strong>RPC:</strong> Remote Procedure Callè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚æœ‰éå¸¸å¤šçš„åè®®å’ŒæŠ€æœ¯æ¥éƒ½å®ç°äº†RPCçš„è¿‡ç¨‹ã€‚æ¯”å¦‚: HTTP RESTé£æ ¼ï¼ŒJava RMIè§„èŒƒã€WebService SOAPåè®®Hessionç­‰ç­‰ã€‚<br><strong>å‚ç›´æ¶æ„å­˜åœ¨çš„é—®é¢˜:</strong><br>    â—é‡å¤åŠŸèƒ½å¤ªå¤š</p><p><strong>åˆ†å¸ƒå¼æ¶æ„å­˜åœ¨çš„é—®é¢˜:</strong><br>    â—æœåŠ¡æä¾›æ–¹- -æ—¦äº§ç”Ÿå˜æ›´,æ‰€æœ‰æ¶ˆè´¹æ–¹éƒ½éœ€è¦å˜æ›´ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec119.png"></p><p>**SOA: (Service- Oriented Architecture,é¢å‘æœåŠ¡çš„æ¶æ„)**ï¼šæ˜¯ä¸€ä¸ªç»„ä»¶æ¨¡å‹,å®ƒå°†åº”ç”¨ç¨‹åºçš„ä¸åŒåŠŸèƒ½å•å…ƒ(ç§°ä¸ºæœåŠ¡)è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶é€šè¿‡è¿™äº›æœåŠ¡ä¹‹é—´å®šä¹‰è‰¯å¥½çš„æ¥å£å’Œå¥‘çº¦è”ç³»èµ·æ¥ã€‚</p><p>**ESB: (Enterparise Servce Bus)**ï¼šä¼ä¸šæœåŠ¡æ€»çº¿,æœåŠ¡ä¸­ä»‹ã€‚ä¸»è¦æ˜¯æä¾›äº†ä¸€ä¸€ä¸ªæœ<br>åŠ¡äºæœåŠ¡ä¹‹é—´çš„äº¤äº’ã€‚ESBåŒ…å«çš„åŠŸèƒ½å¦‚:è´Ÿè½½å‡è¡¡ï¼Œæµé‡æ§åˆ¶ï¼ŒåŠ å¯†å¤„ç†ï¼ŒæœåŠ¡<br>çš„ç›‘æ§ï¼Œå¼‚å¸¸å¤„ç†ï¼Œç›‘æ§å‘Šæ€¥ç­‰ç­‰ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec18a.png" alt="1581314362523"></p><p><strong>å¾®æœåŠ¡æ¶æ„ï¼š</strong></p><p>â—å¾®æœåŠ¡æ¶æ„æ˜¯åœ¨SOAä¸Šåšçš„å‡å,å¾®æœåŠ¡æ¶æ„å¼ºè°ƒçš„ä¸€ä¸ªé‡ç‚¹æ˜¯â€œä¸šåŠ¡éœ€è¦å½»åº•çš„ç»„ä»¶åŒ–å’ŒæœåŠ¡åŒ–â€ï¼ŒåŸæœ‰çš„å•ä¸ª<br>ä¸šåŠ¡ç³»ç»Ÿä¼šæ‹†åˆ†ä¸ºå¤šä¸ªå¯ä»¥ç‹¬ç«‹å¼€å‘ã€è®¾è®¡ã€è¿è¡Œçš„å°åº”ç”¨ã€‚è¿™äº›å°åº”ç”¨ä¹‹é—´é€šè¿‡æœåŠ¡å®Œæˆäº¤äº’å’Œé›†æˆã€‚</p><p>â—å¾®æœåŠ¡æ¶æ„&#x3D; 80%çš„SOAæœåŠ¡æ¶æ„æ€æƒ³+ 100%çš„ç»„ä»¶åŒ–æ¶æ„æ€æƒ³+ 80%çš„é¢†åŸŸå»ºæ¨¡æ€æƒ³</p><p><strong>ç‰¹ç‚¹:</strong><br>â—æœåŠ¡å®ç°ç»„ä»¶åŒ–:å¼€å‘è€…å¯ä»¥è‡ªç”±é€‰æ‹©å¼€å‘æŠ€æœ¯ã€‚ä¹Ÿä¸éœ€è¦åè°ƒå…¶ä»–å›¢é˜Ÿ<br>â—æœåŠ¡ä¹‹é—´äº¤äº’ä¸€ èˆ¬ä½¿ç”¨REST API<br>â—å»ä¸­å¿ƒåŒ–:æ¯ä¸ªå¾®æœåŠ¡æœ‰è‡ªå·±ç§æœ‰çš„æ•°æ®åº“æŒä¹…åŒ–ä¸šåŠ¡æ•°æ®<br>â—è‡ªåŠ¨åŒ–éƒ¨ç½²:æŠŠåº”ç”¨æ‹†åˆ†æˆä¸ºä¸€ ä¸ª-ä¸ªç‹¬ç«‹çš„å•ä¸ªæœåŠ¡,æ–¹ä¾¿è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æµ‹è¯•ã€è¿ç»´</p><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec154.png"></p><h2 id="3-dubbo-æ¦‚è¿°"><a href="#3-dubbo-æ¦‚è¿°" class="headerlink" title="3-dubbo æ¦‚è¿°"></a>3-dubbo æ¦‚è¿°</h2><p><strong>Dubboæ¦‚å¿µ</strong></p><p>â—Dubboæ˜¯é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½ã€è½»é‡çº§çš„Java RPCæ¡†æ¶ã€‚<br>â—è‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œé€æ˜åŒ–çš„RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆ,ä»¥åŠSOAæœåŠ¡æ²»ç†æ–¹æ¡ˆã€‚<br>â—å®˜ç½‘: htp:&#x2F;&#x2F;ubbo.apache.orgo</p><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec17b.png"></p><p>èŠ‚ç‚¹è§’è‰²è¯´æ˜: .<br>â—Provider: æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹<br>â—Contahier: æœåŠ¡è¿è¡Œå®¹å™¨<br>â—Consumer: è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹<br>â—Registry: æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ³¨å†Œä¸­å¿ƒ<br>â—Monitor:ç»Ÿè®¡æœåŠ¡çš„è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´çš„ç›‘æ§ä¸­å¿ƒ</p><h2 id="4-dubboå¿«é€Ÿå…¥é—¨"><a href="#4-dubboå¿«é€Ÿå…¥é—¨" class="headerlink" title="4-dubboå¿«é€Ÿå…¥é—¨"></a>4-dubboå¿«é€Ÿå…¥é—¨</h2><h3 id="4-1zookeeperå®‰è£…"><a href="#4-1zookeeperå®‰è£…" class="headerlink" title="4.1zookeeperå®‰è£…"></a>4.1zookeeperå®‰è£…</h3><p>å®‰è£…æ­¥éª¤ï¼š</p><p>ç¬¬ä¸€æ­¥ï¼šå®‰è£… jdkï¼ˆç•¥ï¼‰<br>ç¬¬äºŒæ­¥ï¼šæŠŠ zookeeper çš„å‹ç¼©åŒ…ï¼ˆzookeeper-3.4.6.tar.gzï¼‰ä¸Šä¼ åˆ° linux ç³»ç»Ÿ<br>ç¬¬ä¸‰æ­¥ï¼šè§£å‹ç¼©å‹ç¼©åŒ…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -zxvf  zookeeper-3.4.6.tar.gz<br></code></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ï¼šè¿›å…¥zookeeper-3.4.6ç›®å½•ï¼Œåˆ›å»ºdataç›®å½•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">mkdir</span> data<br></code></pre></td></tr></table></figure><p>ç¬¬äº”æ­¥ï¼šè¿›å…¥confç›®å½• ï¼ŒæŠŠzoo_sample.cfg æ”¹åä¸ºzoo.cfg</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> conf<br><span class="hljs-built_in">mv</span> zoo_sample.cfg zoo.cfg<br></code></pre></td></tr></table></figure><p>ç¬¬å…­æ­¥ï¼šæ‰“å¼€zoo.cfgæ–‡ä»¶,  ä¿®æ”¹dataå±æ€§ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">dataDir=/root/zookeeper-3.4.6/data<br></code></pre></td></tr></table></figure><p>è¿›å…¥Zookeeperçš„binç›®å½•ï¼Œå¯åŠ¨æœåŠ¡å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">./zkServer.sh start<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec168.png" alt="1581315609244"></p><p>åœæ­¢æœåŠ¡å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">./zkServer.sh stop<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼šstandalone å•èŠ‚ç‚¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">./zkServer.sh status<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/623e9c0227f86abb2aeec8f5.png" alt="1581315645227"></p><h3 id="4-2springå’Œspringmvcæ•´åˆ"><a href="#4-2springå’Œspringmvcæ•´åˆ" class="headerlink" title="4.2springå’Œspringmvcæ•´åˆ"></a>4.2springå’Œspringmvcæ•´åˆ</h3><p>å®æ–½æ­¥éª¤ï¼š</p><p>1.åˆ›å»ºæœåŠ¡æä¾›è€…Provideræ¨¡å—<br>2.åˆ›å»ºæœåŠ¡æ¶ˆè´¹è€…Consumeræ¨¡å—<br>3.åœ¨æœåŠ¡æä¾›è€…æ¨¡å—ç¼–å†™UserServicelmplæä¾›æœåŠ¡<br>4.åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸­çš„UserC ontrollerè¿œç¨‹è°ƒç”¨<br>5.UserServicelmplæä¾›çš„æœåŠ¡<br>6.åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ªæœåŠ¡ï¼Œæµ‹è¯•</p><p>Dubboä½œä¸ºä¸€ä¸ªRPCæ¡†æ¶ï¼Œå…¶æœ€æ ¸å¿ƒçš„åŠŸèƒ½å°±æ˜¯è¦å®ç°è·¨ç½‘ç»œçš„è¿œç¨‹è°ƒç”¨ã€‚æœ¬å°èŠ‚å°±æ˜¯è¦åˆ›å»ºä¸¤ä¸ªåº”ç”¨ï¼Œä¸€ä¸ªä½œä¸ºæœåŠ¡çš„æä¾›æ–¹ï¼Œä¸€ä¸ªä½œä¸ºæœåŠ¡çš„æ¶ˆè´¹æ–¹ã€‚é€šè¿‡Dubboæ¥å®ç°æœåŠ¡æ¶ˆè´¹æ–¹è¿œç¨‹è°ƒç”¨æœåŠ¡æä¾›æ–¹çš„æ–¹æ³•ã€‚</p><p>1 æœåŠ¡æä¾›æ–¹å¼€å‘</p><p>å¼€å‘æ­¥éª¤ï¼š</p><p>ï¼ˆ1ï¼‰åˆ›å»ºmavenå·¥ç¨‹ï¼ˆæ‰“åŒ…æ–¹å¼ä¸ºwarï¼‰dubbodemo_providerï¼Œåœ¨pom.xmlæ–‡ä»¶ä¸­å¯¼å…¥å¦‚ä¸‹åæ ‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">spring.version</span>&gt;</span>5.0.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">spring.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-beans<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-aspects<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jms<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context-support<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- dubboç›¸å…³ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.6.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.sgroschupf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zkclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javassist<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javassist<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.12.1.GA<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.47<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- æŒ‡å®šç«¯å£ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>8081<span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- è¯·æ±‚è·¯å¾„ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">path</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">path</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰é…ç½®web.xmlæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">web-app</span> <span class="hljs-keyword">PUBLIC</span></span><br><span class="hljs-meta"> <span class="hljs-string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span><br><span class="hljs-meta"> <span class="hljs-string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">display-name</span>&gt;</span>Archetype Created Web Application<span class="hljs-tag">&lt;/<span class="hljs-name">display-name</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰åˆ›å»ºæœåŠ¡æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.service;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HelloService</span> &#123;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">sayHello</span><span class="hljs-params">(String name)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰åˆ›å»ºæœåŠ¡å®ç°ç±»</p><p><strong>æ³¨æ„ï¼š</strong>æœåŠ¡å®ç°ç±»ä¸Šä½¿ç”¨çš„Serviceæ³¨è§£æ˜¯Dubboæä¾›çš„ï¼Œç”¨äºå¯¹å¤–å‘å¸ƒæœåŠ¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.service.impl;<br><span class="hljs-keyword">import</span> com.alibaba.dubbo.config.annotation.Service;<br><span class="hljs-keyword">import</span> com.itheima.service.HelloService;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HelloService</span> &#123;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">sayHello</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello &quot;</span> + name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>tomcat7:run</p><p>2 æœåŠ¡æ¶ˆè´¹æ–¹å¼€å‘</p><p>å¼€å‘æ­¥éª¤ï¼š</p><p>ï¼ˆ1ï¼‰åˆ›å»ºmavenå·¥ç¨‹ï¼ˆæ‰“åŒ…æ–¹å¼ä¸ºwarï¼‰dubbodemo_consumerï¼Œpom.xmlé…ç½®å’Œä¸Šé¢æœåŠ¡æä¾›è€…ç›¸åŒï¼Œåªéœ€è¦å°†Tomcatæ’ä»¶çš„ç«¯å£å·æ”¹ä¸º8082å³å¯</p><p>ï¼ˆ2ï¼‰é…ç½®web.xmlæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">web-app</span> <span class="hljs-keyword">PUBLIC</span></span><br><span class="hljs-meta"> <span class="hljs-string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span><br><span class="hljs-meta"> <span class="hljs-string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">display-name</span>&gt;</span>Archetype Created Web Application<span class="hljs-tag">&lt;/<span class="hljs-name">display-name</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springmvc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æŒ‡å®šåŠ è½½çš„é…ç½®æ–‡ä»¶ ï¼Œé€šè¿‡å‚æ•°contextConfigLocationåŠ è½½ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext-web.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springmvc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰å°†æœåŠ¡æä¾›è€…å·¥ç¨‹ä¸­çš„HelloServiceæ¥å£å¤åˆ¶åˆ°å½“å‰å·¥ç¨‹</p><p>ï¼ˆ4ï¼‰ç¼–å†™Controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.controller;<br><span class="hljs-keyword">import</span> com.alibaba.dubbo.config.annotation.Reference;<br><span class="hljs-keyword">import</span> com.itheima.service.HelloService;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;<br><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;/demo&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br>    <span class="hljs-meta">@Reference</span><br>    <span class="hljs-keyword">private</span> HelloService helloService;<br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">(String name)</span>&#123;<br>        <span class="hljs-comment">//è¿œç¨‹è°ƒç”¨</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> helloService.sayHello(name);<br>        System.out.println(result);<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šControllerä¸­æ³¨å…¥HelloServiceä½¿ç”¨çš„æ˜¯Dubboæä¾›çš„@Referenceæ³¨è§£</p><p><font color='red'><strong>è¿œç¨‹æ³¨å…¥</strong></font></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> ä»zookeeperæ³¨å†Œä¸­å¿ƒè·å–userServiceçš„è®¿é—®url<br><span class="hljs-bullet">2.</span> è¿›è¡Œè¿œç¨‹è°ƒç”¨RPC<br><span class="hljs-bullet">3.</span> å°†ç»“æœå°è£…ä¸ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚ç»™å˜é‡èµ‹å€¼<br></code></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec1e2.png"></p><h3 id="4-3æœåŠ¡æä¾›è€…"><a href="#4-3æœåŠ¡æä¾›è€…" class="headerlink" title="4.3æœåŠ¡æä¾›è€…"></a>4.3æœåŠ¡æä¾›è€…</h3><p>åœ¨dubbodemo_providerå·¥ç¨‹ä¸­src&#x2F;main&#x2F;resourcesä¸‹åˆ›å»ºapplicationContext-service.xml </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:dubbo</span>=<span class="hljs-string">&quot;http://code.alibabatech.com/schema/dubbo&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">         http://www.springframework.org/schema/mvc</span></span><br><span class="hljs-string"><span class="hljs-tag">         http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">         http://code.alibabatech.com/schema/dubbo</span></span><br><span class="hljs-string"><span class="hljs-tag">         http://code.alibabatech.com/schema/dubbo/dubbo.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">         http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">         http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å½“å‰åº”ç”¨åç§°ï¼Œç”¨äºæ³¨å†Œä¸­å¿ƒè®¡ç®—åº”ç”¨é—´ä¾èµ–å…³ç³»ï¼Œæ³¨æ„ï¼šæ¶ˆè´¹è€…å’Œæä¾›è€…åº”ç”¨åä¸è¦ä¸€æ · --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dubbo:application</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dubbodemo_provider&quot;</span> /&gt;</span><br><span class="hljs-comment">&lt;!-- è¿æ¥æœåŠ¡æ³¨å†Œä¸­å¿ƒzookeeper ipä¸ºzookeeperæ‰€åœ¨æœåŠ¡å™¨çš„ipåœ°å€--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dubbo:registry</span> <span class="hljs-attr">address</span>=<span class="hljs-string">&quot;zookeeper://192.168.134.129:2181&quot;</span>/&gt;</span><br><span class="hljs-comment">&lt;!-- æ³¨å†Œ  åè®®å’Œport   ç«¯å£é»˜è®¤æ˜¯20880 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dubbo:protocol</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dubbo&quot;</span> <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;20881&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dubbo:protocol</span>&gt;</span><br>    <br><span class="hljs-comment">&lt;!-- æ‰«ææŒ‡å®šåŒ…ï¼ŒåŠ ä¸Š@Serviceæ³¨è§£çš„ç±»ä¼šè¢«å‘å¸ƒä¸ºæœåŠ¡  --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dubbo:annotation</span> <span class="hljs-attr">package</span>=<span class="hljs-string">&quot;com.itheima.service.impl&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4-4æœåŠ¡æ¶ˆè´¹è€…"><a href="#4-4æœåŠ¡æ¶ˆè´¹è€…" class="headerlink" title="4.4æœåŠ¡æ¶ˆè´¹è€…"></a>4.4æœåŠ¡æ¶ˆè´¹è€…</h3><p>åœ¨dubbodemo_consumerå·¥ç¨‹ä¸­src&#x2F;main&#x2F;resourcesä¸‹åˆ›å»ºapplicationContext-web.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:dubbo</span>=<span class="hljs-string">&quot;http://code.alibabatech.com/schema/dubbo&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">http://www.springframework.org/schema/mvc</span></span><br><span class="hljs-string"><span class="hljs-tag">http://www.springframework.org/schema/mvc/spring-mvc.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">http://code.alibabatech.com/schema/dubbo</span></span><br><span class="hljs-string"><span class="hljs-tag">http://code.alibabatech.com/schema/dubbo/dubbo.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- å½“å‰åº”ç”¨åç§°ï¼Œç”¨äºæ³¨å†Œä¸­å¿ƒè®¡ç®—åº”ç”¨é—´ä¾èµ–å…³ç³»ï¼Œæ³¨æ„ï¼šæ¶ˆè´¹è€…å’Œæä¾›è€…åº”ç”¨åä¸è¦ä¸€æ · --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dubbo:application</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dubbodemo-consumer&quot;</span> /&gt;</span><br><span class="hljs-comment">&lt;!-- è¿æ¥æœåŠ¡æ³¨å†Œä¸­å¿ƒzookeeper ipä¸ºzookeeperæ‰€åœ¨æœåŠ¡å™¨çš„ipåœ°å€--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dubbo:registry</span> <span class="hljs-attr">address</span>=<span class="hljs-string">&quot;zookeeper://192.168.134.129:2181&quot;</span>/&gt;</span><br><span class="hljs-comment">&lt;!-- åŒ…æ‰«æçš„æ–¹å¼ å¼•ç”¨æœåŠ¡ æ‰«æ@Reference --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dubbo:annotation</span> <span class="hljs-attr">package</span>=<span class="hljs-string">&quot;com.itheima.controller&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œæµ‹è¯•</p><p>tomcat7:runå¯åŠ¨</p><p>åœ¨æµè§ˆå™¨è¾“å…¥<a href="http://localhost:8082/demo/hello.do?name=Jack%EF%BC%8C%E6%9F%A5%E7%9C%8B%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C">http://localhost:8082/demo/hello.do?name=Jackï¼ŒæŸ¥çœ‹æµè§ˆå™¨è¾“å‡ºç»“æœ</a></p><h2 id="5-dubboé«˜çº§ç‰¹æ€§"><a href="#5-dubboé«˜çº§ç‰¹æ€§" class="headerlink" title="5-dubboé«˜çº§ç‰¹æ€§"></a>5-dubboé«˜çº§ç‰¹æ€§</h2><h3 id="5-1dubbo-adminå®‰è£…"><a href="#5-1dubbo-adminå®‰è£…" class="headerlink" title="5.1dubbo-adminå®‰è£…"></a>5.1dubbo-adminå®‰è£…</h3><p>dubbo- admin<br>    â—dubbo-adminç®¡ç†å¹³å°ï¼Œæ˜¯å›¾å½¢åŒ–çš„æœåŠ¡ç®¡ç†é¡µé¢<br>    â—ä»æ³¨å†Œä¸­å¿ƒä¸­è·å–åˆ°æ‰€æœ‰çš„æä¾›è€… &#x2F;æ¶ˆè´¹è€…è¿›è¡Œé…ç½®ç®¡ç†<br>    â—è·¯ç”±è§„åˆ™ã€åŠ¨æ€é…ç½®ã€æœåŠ¡é™çº§ã€è®¿é—®æ§åˆ¶ã€æƒé‡è°ƒæ•´ã€è´Ÿè½½å‡è¡¡ç­‰ç®¡ç†åŠŸèƒ½<br>    â—dubbo- adminæ˜¯ä¸€ä¸ªå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ã€‚å‰ç«¯ä½¿ç”¨vueï¼Œåç«¯ä½¿ç”¨springboot<br>    â—å®‰è£…dubbo-adminå…¶å®å°±æ˜¯éƒ¨ç½²è¯¥é¡¹ç›®</p><p>å…·ä½“å®‰è£…å‚è§ï¼šdubbo-admin.md</p><h3 id="5-2-dubbo-adminä½¿ç”¨"><a href="#5-2-dubbo-adminä½¿ç”¨" class="headerlink" title="5.2-dubbo-adminä½¿ç”¨"></a>5.2-dubbo-adminä½¿ç”¨</h3><p>å…·ä½“å®‰è£…å‚è§ï¼šdubbo-admin.md</p><h3 id="5-3åºåˆ—åŒ–"><a href="#5-3åºåˆ—åŒ–" class="headerlink" title="5.3åºåˆ—åŒ–"></a>5.3åºåˆ—åŒ–</h3><ol><li>dubbo å†…éƒ¨å·²ç»å°†åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹å†…éƒ¨å°è£…äº†</li><li>æˆ‘ä»¬åªéœ€è¦åœ¨å®šä¹‰pojoç±»æ—¶<strong>å®ç°seriali zableæ¥å£</strong>å³å¯</li><li>ä¸€èˆ¬ä¼šå®šä¹‰ä¸€ ä¸ªå…¬å…±çš„pojoæ¨¡å—,è®©ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…éƒ½ä¾èµ–è¯¥æ¨¡å—ã€‚</li></ol><p><img src="https://pic.imgdb.cn/item/623e9c0227f86abb2aeec926.png" alt="1581317650919"></p><p>Userå¯¹è±¡æœªå®ç°seriali zableæ¥å£</p><p>é”™è¯¯ä¿¡æ¯ï¼š</p><p><img src="https://pic.imgdb.cn/item/623e9c0227f86abb2aeeca51.png" alt="1581317583708"></p><p>è§£å†³åŠæ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">User <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span><br></code></pre></td></tr></table></figure><h3 id="5-4åœ°å€ç¼“å­˜"><a href="#5-4åœ°å€ç¼“å­˜" class="headerlink" title="5.4åœ°å€ç¼“å­˜"></a>5.4åœ°å€ç¼“å­˜</h3><p><strong>æ³¨å†Œä¸­å¿ƒæŒ‚äº†ï¼ŒæœåŠ¡æ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®ï¼Ÿ</strong></p><ol><li>å¯ä»¥ï¼Œå› ä¸ºdubboæœåŠ¡æ¶ˆè´¹è€…åœ¨ç¬¬ä¸€-æ¬¡è°ƒç”¨æ—¶ï¼Œä¼šå°†æœåŠ¡æä¾›æ–¹åœ°å€ç¼“å­˜åˆ°æœ¬åœ°ï¼Œä»¥ååœ¨è°ƒç”¨åˆ™ä¸ä¼šè®¿é—®æ³¨å†Œä¸­å¿ƒã€‚</li><li>å½“æœåŠ¡æä¾›è€…åœ°å€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ³¨å†Œä¸­å¿ƒä¼šé€šçŸ¥æœåŠ¡æ¶ˆè´¹è€…ã€‚</li></ol><p><img src="https://pic.imgdb.cn/item/623e9c0127f86abb2aeec17b.png"></p><h3 id="5-5-è¶…æ—¶"><a href="#5-5-è¶…æ—¶" class="headerlink" title="5.5 è¶…æ—¶"></a>5.5 è¶…æ—¶</h3><p><img src="https://pic.imgdb.cn/item/623e9c0327f86abb2aeed523.png"></p><ul><li>æœåŠ¡æ¶ˆè´¹è€…åœ¨è°ƒç”¨æœåŠ¡æä¾›è€…çš„æ—¶å€™å‘ç”Ÿäº†é˜»å¡ã€ç­‰å¾…çš„æƒ…å½¢,è¿™ä¸ªæ—¶å€™,æœåŠ¡æ¶ˆè´¹è€…ä¼šç›´ç­‰å¾…ä¸‹å»ã€‚</li><li>åœ¨æŸä¸ªå³°å€¼æ—¶åˆ»ï¼Œå¤§é‡çš„è¯·æ±‚éƒ½åœ¨åŒæ—¶è¯·æ±‚æœåŠ¡æ¶ˆè´¹è€…,ä¼šé€ æˆçº¿ç¨‹çš„å¤§é‡å †ç§¯ï¼ŒåŠ¿å¿…ä¼šé€ æˆé›ªå´©ã€‚</li><li>dubboåˆ©ç”¨è¶…æ—¶æœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®¾ç½®-ä¸ªè¶…æ—¶æ—¶é—´, åœ¨è¿™ä¸ªæ—¶é—´æ®µå†…ï¼Œæ— æ³•å®ŒæˆæœåŠ¡è®¿é—®,åˆ™è‡ªåŠ¨æ–­å¼€è¿æ¥ã€‚</li><li>ä½¿ç”¨timeoutå±æ€§é…ç½®è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼1000ï¼Œå•ä½æ¯«ç§’</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//timeout è¶…æ—¶æ—¶é—´ å•ä½æ¯«ç§’  retries é‡è¯•æ¬¡æ•°</span><br><span class="hljs-meta">@Service(timeout = 3000,retries=0)</span><br></code></pre></td></tr></table></figure><h3 id="5-6é‡è¯•"><a href="#5-6é‡è¯•" class="headerlink" title="5.6é‡è¯•"></a>5.6é‡è¯•</h3><p><img src="https://pic.imgdb.cn/item/623e9c0327f86abb2aeed543.png" alt="1581322543136"></p><ol><li>è®¾ç½®äº†è¶…æ—¶æ—¶é—´ï¼Œåœ¨è¿™ä¸ªæ—¶é—´æ®µå†…ï¼Œæ— æ³•å®ŒæˆæœåŠ¡è®¿é—®,åˆ™è‡ªåŠ¨æ–­å¼€è¿æ¥ã€‚</li><li>å¦‚æœå‡ºç°ç½‘ç»œæŠ–åŠ¨,åˆ™è¿™ä¸€-æ¬¡è¯·æ±‚å°±ä¼šå¤±è´¥ã€‚</li><li>Dubboæä¾›é‡è¯•æœºåˆ¶æ¥é¿å…ç±»ä¼¼é—®é¢˜çš„å‘ç”Ÿã€‚</li><li>é€šè¿‡retrieså±æ€§æ¥è®¾ç½®é‡è¯•æ¬¡æ•°ã€‚é»˜è®¤ä¸º2æ¬¡</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//timeout è¶…æ—¶æ—¶é—´ å•ä½æ¯«ç§’  retries é‡è¯•æ¬¡æ•°</span><br><span class="hljs-meta">@Service(timeout = 3000,retries=0)</span><br></code></pre></td></tr></table></figure><h3 id="5-7å¤šç‰ˆæœ¬"><a href="#5-7å¤šç‰ˆæœ¬" class="headerlink" title="5.7å¤šç‰ˆæœ¬"></a>5.7å¤šç‰ˆæœ¬</h3><p><img src="https://pic.imgdb.cn/item/623e9c0327f86abb2aeed55e.png"></p><p>**ç°åº¦å‘å¸ƒ:**å½“å‡ºç°æ–°åŠŸèƒ½æ—¶,ä¼šè®©ä¸€éƒ¨åˆ†ç”¨æˆ·å…ˆä½¿ç”¨æ–°åŠŸèƒ½ï¼Œç”¨æˆ·åé¦ˆæ²¡é—®é¢˜æ—¶ï¼Œå†å°†æ‰€æœ‰ç”¨æˆ·è¿ç§»åˆ°æ–°åŠŸèƒ½ã€‚</p><p>dubboä¸­ä½¿ç”¨versionå±æ€§æ¥è®¾ç½®å’Œè°ƒç”¨åŒä¸€ä¸ªæ¥å£çš„ä¸åŒç‰ˆæœ¬</p><p>ç”Ÿäº§è€…é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service(version=&quot;v2.0&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImp12</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;...&#125;<br></code></pre></td></tr></table></figure><p>æ¶ˆè´¹è€…é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Reference(version = &quot;v2.0&quot;)</span><span class="hljs-comment">//è¿œç¨‹æ³¨å…¥</span><br><span class="hljs-keyword">private</span> UserService userService;<br></code></pre></td></tr></table></figure><h3 id="5-8è´Ÿè½½å‡è¡¡"><a href="#5-8è´Ÿè½½å‡è¡¡" class="headerlink" title="5.8è´Ÿè½½å‡è¡¡"></a>5.8è´Ÿè½½å‡è¡¡</h3><p><strong>è´Ÿè½½å‡è¡¡ç­–ç•¥(4ç§) :</strong><br>**Random:**æŒ‰æƒé‡éšæœºï¼Œé»˜è®¤å€¼ã€‚æŒ‰æƒé‡è®¾ç½®éšæœºæ¦‚ç‡ã€‚</p><p><strong>RoundRobin:</strong> æŒ‰æƒé‡è½®è¯¢ã€‚</p><p><strong>LeastActive:</strong> æœ€å°‘æ´»è·ƒè°ƒç”¨æ•°,ç›¸åŒæ´»è·ƒæ•°çš„éšæœºã€‚</p><p>**ConsistentHash:**ä¸€ è‡´æ€§Hash,ç›¸åŒå‚æ•°çš„è¯·æ±‚æ€»æ˜¯å‘åˆ°åŒä¸€æä¾›è€…ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9c0427f86abb2aeedbb5.png"></p><p>æœåŠ¡æä¾›è€…é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service(weight = 100)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImp12</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;...&#125;<br></code></pre></td></tr></table></figure><p>application.xml é…ç½®parameter key</p><p>æ¶ˆè´¹è€…é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-comment">//@Reference(loadbalance = &quot;roundrobin&quot;)</span><br><span class="hljs-comment">//@Reference(loadbalance = &quot;leastactive&quot;)</span><br><span class="hljs-comment">//@Reference(loadbalance = &quot;consistenthash&quot;)</span><br><span class="hljs-meta">@Reference(loadbalance = &quot;random&quot;)</span><span class="hljs-comment">//é»˜è®¤ æŒ‰æƒé‡éšæœº</span><br><span class="hljs-keyword">private</span> UserService userService;<br></code></pre></td></tr></table></figure><h3 id="5-9é›†ç¾¤å®¹é”™"><a href="#5-9é›†ç¾¤å®¹é”™" class="headerlink" title="5.9é›†ç¾¤å®¹é”™"></a>5.9é›†ç¾¤å®¹é”™</h3><p><img src="https://pic.imgdb.cn/item/623e9c0427f86abb2aeedb28.png" alt="1581324308044"></p><p><strong>é›†ç¾¤å®¹é”™æ¨¡å¼:</strong><br>    **Failover Cluster:**å¤±è´¥é‡è¯•ã€‚é»˜è®¤å€¼ã€‚å½“å‡ºç°å¤±è´¥ï¼Œé‡è¯•å…¶å®ƒæœåŠ¡å™¨ï¼Œé»˜è®¤é‡è¯•2æ¬¡ï¼Œä½¿ç”¨retriesé…ç½®ã€‚ä¸€èˆ¬ç”¨äºè¯»æ“ä½œ<br>    **Failfast Cluster :**å¿«é€Ÿå¤±è´¥,å‘èµ·-æ¬¡è°ƒç”¨ï¼Œå¤±è´¥ç«‹å³æŠ¥é”™ã€‚é€šå¸¸ç”¨äºå†™æ“ä½œã€‚<br>    **Failsafe Cluster:**å¤±è´¥å®‰å…¨ï¼Œå‡ºç°å¼‚å¸¸æ—¶ï¼Œç›´æ¥å¿½ç•¥ã€‚è¿”å›ä¸€ä¸ªç©ºç»“æœã€‚<br>    **Failback Cluster:**å¤±è´¥è‡ªåŠ¨æ¢å¤,åå°è®°å½•å¤±è´¥è¯·æ±‚,å®šæ—¶é‡å‘ã€‚<br>    **Forking Cluster :**å¹¶è¡Œè°ƒç”¨å¤šä¸ªæœåŠ¡å™¨ï¼Œåªè¦ä¸€ä¸ªæˆåŠŸå³è¿”å›ã€‚<br>    <strong>Broadcast Cluster:</strong> å¹¿æ’­è°ƒç”¨æ‰€æœ‰æä¾›è€…,é€ä¸ªè°ƒç”¨ï¼Œä»»æ„ä¸€å°æŠ¥é”™åˆ™æŠ¥é”™ã€‚</p><p>æ¶ˆè´¹è€…é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Reference(cluster = &quot;failover&quot;)</span><span class="hljs-comment">//è¿œç¨‹æ³¨å…¥</span><br><span class="hljs-keyword">private</span> UserService userService;<br></code></pre></td></tr></table></figure><h3 id="5-10æœåŠ¡é™çº§"><a href="#5-10æœåŠ¡é™çº§" class="headerlink" title="5.10æœåŠ¡é™çº§"></a>5.10æœåŠ¡é™çº§</h3><p><strong>æœåŠ¡é™çº§</strong>ï¼šå½“æœåŠ¡å™¨å‹åŠ›å‰§å¢çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µåŠæµé‡ï¼Œå¯¹ä¸€äº›æœåŠ¡å’Œé¡µé¢æœ‰ç­–ç•¥çš„ä¸å¤„ç†æˆ–æ¢ç§ç®€å•çš„æ–¹å¼å¤„ç†ï¼Œä»è€Œé‡Šæ”¾æœåŠ¡å™¨èµ„æºä»¥ä¿è¯<strong>æ ¸å¿ƒäº¤æ˜“</strong>æ­£å¸¸è¿ä½œæˆ–é«˜æ•ˆè¿ä½œ</p><p><strong>æœåŠ¡é™çº§æ–¹å¼:</strong><br><strong>mock&#x3D; force:return null</strong>ï¼šè¡¨ç¤ºæ¶ˆè´¹æ–¹å¯¹è¯¥æœåŠ¡çš„æ–¹æ³•è°ƒç”¨éƒ½ç›´æ¥è¿”å›nullå€¼,ä¸å‘èµ·è¿œç¨‹è°ƒç”¨ã€‚ç”¨æ¥å±è”½ä¸é‡è¦æœåŠ¡ä¸å¯ç”¨æ—¶å¯¹è°ƒç”¨æ–¹çš„å½±å“ã€‚</p><p><strong>mock&#x3D;fail:return null</strong>ï¼šè¡¨ç¤ºæ¶ˆè´¹æ–¹å¯¹è¯¥æœåŠ¡çš„æ–¹æ³•è°ƒç”¨åœ¨å¤±è´¥åï¼Œå†è¿”å›nullå€¼,ä¸æŠ›å¼‚å¸¸ã€‚ç”¨æ¥å®¹å¿ä¸é‡è¦æœåŠ¡ä¸ç¨³å®šæ—¶å¯¹è°ƒç”¨æ–¹çš„å½±å“</p><p><img src="https://pic.imgdb.cn/item/623e9c0427f86abb2aeedc3c.png"></p><p>æ¶ˆè´¹æ–¹é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è¿œç¨‹æ³¨å…¥</span><br><span class="hljs-meta">@Reference(mock =â€œ force :return null&quot;)</span><span class="hljs-comment">//ä¸å†è°ƒç”¨userServiceçš„æœåŠ¡</span><br><span class="hljs-keyword">private</span> UserService userService;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åˆ†å¸ƒå¼dubbo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åˆ†å¸ƒå¼dubbo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>double-adminå…ƒæ•°æ®æ˜¾ç¤ºä¿®å¤</title>
    <link href="/Hexo/2022/01/23/Dubbo-admin%E5%85%83%E6%95%B0%E6%8D%AE%E6%98%BE%E7%A4%BA%E4%BF%AE%E5%A4%8D/"/>
    <url>/Hexo/2022/01/23/Dubbo-admin%E5%85%83%E6%95%B0%E6%8D%AE%E6%98%BE%E7%A4%BA%E4%BF%AE%E5%A4%8D/</url>
    
    <content type="html"><![CDATA[<p><img src="https://pic.imgdb.cn/item/623e9c0327f86abb2aeed2c7.png" alt="image-20220310223719962"></p><p>çœ‹çœ‹å®˜æ–¹è¯´æ˜ï¼š</p><img src="https://pic.imgdb.cn/item/623e9c0327f86abb2aeed2e1.png" alt="image-20220310223751131" style="zoom:50%;" /><p>è¿™é‡Œè¿˜æœ‰äººæé—®äº†çš„</p><img src="https://s2.loli.net/2022/05/17/fph3qUBaWSA42yV.png" alt="image-20220310223830058" style="zoom:50%;" /><p><img src="https://s2.loli.net/2022/05/17/7PiM1Zq6W5VNznR.png" alt="image-20220310230223819"></p><p>åŸæ¥æ˜¯è¦åœ¨<a href="https://so.csdn.net/so/search?q=zookeeper&spm=1001.2101.3001.7020">zookeeper</a>é‡Œé¢å¢åŠ è¿™ä¸ªèŠ‚ç‚¹: &#x2F;dubbo&#x2F;config&#x2F;dubbo&#x2F;dubbo.properties ï¼Œå¹¶ä¸”è®¾ç½®å€¼ã€‚</p><p>åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸ªæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.curator.framework.CuratorFramework;<br><span class="hljs-keyword">import</span> org.apache.curator.framework.CuratorFrameworkFactory;<br><span class="hljs-keyword">import</span> org.apache.curator.retry.ExponentialBackoffRetry;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-type">CuratorFramework</span> <span class="hljs-variable">zkClient</span> <span class="hljs-operator">=</span> CuratorFrameworkFactory.builder().<br>                connectString(<span class="hljs-string">&quot;192.168.232.130:2181&quot;</span>).<br>                retryPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">3</span>)).build();<br>        zkClient.start();<br> <br><br>```java<br>        <span class="hljs-title function_">if</span> <span class="hljs-params">(zkClient.checkExists()</span>.forPath(<span class="hljs-string">&quot;/dubbo/config/dubbo/dubbo.properties&quot;</span>) == <span class="hljs-literal">null</span>) &#123;<br>            zkClient.create().creatingParentsIfNeeded().forPath(<span class="hljs-string">&quot;/dubbo/config/dubbo/dubbo.properties&quot;</span>);<br>        &#125;<br>        zkClient.setData().forPath(<span class="hljs-string">&quot;/dubbo/config/dubbo/dubbo.properties&quot;</span>, (<span class="hljs-string">&quot;dubbo.registry.address=zookeeper://192.168.232.130:2181\n&quot;</span> +<br>                <span class="hljs-string">&quot;dubbo.metadata-report.address=zookeeper://192.168.232.130:2181&quot;</span>).getBytes());<br><br>&#125;<span class="hljs-keyword">catch</span> (Exception e) &#123;<br>e.printStackTrace();<br>&#125;<br>&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/wangxq0224/article/details/99304253">https://blog.csdn.net/wangxq0224/article/details/99304253</a></p><p>é‡å¯äº†æ‰€æœ‰ä¸œè¥¿</p><p><img src="https://s2.loli.net/2022/05/17/HVjB6Mrn4hATCvq.png"></p><p>æˆåŠŸäº†ï¼çªè‰</p>]]></content>
    
    
    <categories>
      
      <category>åˆ†å¸ƒå¼dubbo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>dubbo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>zookeeperå®‰è£…</title>
    <link href="/Hexo/2022/01/23/Zookeeper%E5%AE%89%E8%A3%85/"/>
    <url>/Hexo/2022/01/23/Zookeeper%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h2 id="1-1-ä¸‹è½½å®‰è£…"><a href="#1-1-ä¸‹è½½å®‰è£…" class="headerlink" title="1.1 ä¸‹è½½å®‰è£…"></a>1.1 ä¸‹è½½å®‰è£…</h2><p><strong>1ã€ç¯å¢ƒå‡†å¤‡</strong></p><p>ZooKeeperæœåŠ¡å™¨æ˜¯ç”¨Javaåˆ›å»ºçš„ï¼Œå®ƒè¿è¡Œåœ¨JVMä¹‹ä¸Šã€‚éœ€è¦å®‰è£…JDK 7æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</p><p><strong>2ã€ä¸Šä¼ </strong></p><p>å°†ä¸‹è½½çš„ZooKeeperæ”¾åˆ°&#x2F;opt&#x2F;ZooKeeperç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">ä¸Šä¼ zookeeper alt+p</span><br>put f:/setup/apache-zookeeper-3.5.6-bin.tar.gz<br><span class="hljs-meta">#</span><span class="language-bash">æ‰“å¼€ optç›®å½•</span><br>cd /opt<br><span class="hljs-meta">#</span><span class="language-bash">åˆ›å»ºzooKeeperç›®å½•</span><br>mkdir  zooKeeper<br><span class="hljs-meta">#</span><span class="language-bash">å°†zookeeperå®‰è£…åŒ…ç§»åŠ¨åˆ° /opt/zooKeeper</span><br>mv apache-zookeeper-3.5.6-bin.tar.gz /opt/zookeeper/<br></code></pre></td></tr></table></figure><p><strong>3ã€è§£å‹</strong></p><p>å°†taråŒ…è§£å‹åˆ°&#x2F;opt&#x2F;zookeeperç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -zxvf apache-ZooKeeper-3.5.6-bin.tar.gz <br></code></pre></td></tr></table></figure><h2 id="1-2-é…ç½®å¯åŠ¨"><a href="#1-2-é…ç½®å¯åŠ¨" class="headerlink" title="1.2 é…ç½®å¯åŠ¨"></a>1.2 é…ç½®å¯åŠ¨</h2><p><strong>1ã€é…ç½®zoo.cfg</strong></p><p>è¿›å…¥åˆ°confç›®å½•æ‹·è´ä¸€ä¸ªzoo_sample.cfgå¹¶å®Œæˆé…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">è¿›å…¥åˆ°confç›®å½•</span><br>cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/<br><span class="hljs-meta">#</span><span class="language-bash">æ‹·è´</span><br>cp  zoo_sample.cfg  zoo.cfg<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹zoo.cfg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">æ‰“å¼€ç›®å½•</span><br>cd /opt/zooKeeper/<br><span class="hljs-meta">#</span><span class="language-bash">åˆ›å»ºzooKeeperå­˜å‚¨ç›®å½•</span><br>mkdir  zkdata<br><span class="hljs-meta">#</span><span class="language-bash">ä¿®æ”¹zoo.cfg</span><br>vim /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/zoo.cfg<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/31/A4KP1ETms7qn8Ra.png" alt="1577548250377"></p><p>ä¿®æ”¹å­˜å‚¨ç›®å½•ï¼šdataDir&#x3D;&#x2F;opt&#x2F;zookeeper&#x2F;zkdata</p><p><strong>2ã€å¯åŠ¨ZooKeeper</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/bin/<br><span class="hljs-meta">#</span><span class="language-bash">å¯åŠ¨</span><br> ./zkServer.sh  start<br><span class="hljs-meta"> #</span><span class="language-bash">åœæ­¢</span><br> ./zkServer.sh  stop<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/03/31/R1wDPJrgx2zd3sy.png" alt="1577548052037"></p><p>çœ‹åˆ°ä¸Šå›¾è¡¨ç¤ºZooKeeperæˆåŠŸå¯åŠ¨</p><p><strong>3ã€æŸ¥çœ‹ZooKeeperçŠ¶æ€</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./zkServer.sh status<br></code></pre></td></tr></table></figure><p>zookeeperå¯åŠ¨æˆåŠŸã€‚standaloneä»£è¡¨zkæ²¡æœ‰æ­å»ºé›†ç¾¤ï¼Œç°åœ¨æ˜¯å•èŠ‚ç‚¹</p><p><img src="https://s2.loli.net/2022/03/31/YNefBkDhCKJpL8Q.png" alt="1577548175232"></p><p>zookeeperæ²¡æœ‰å¯åŠ¨</p><h3 id="1-2-1ã€ç«¯å£å†²çª"><a href="#1-2-1ã€ç«¯å£å†²çª" class="headerlink" title="1.2.1ã€ç«¯å£å†²çª"></a>1.2.1ã€ç«¯å£å†²çª</h3><p>æ¯ä¸ªç«¯å£éƒ½æœ‰ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œkillæ‰è¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹å°±å¯ä»¥äº†</p><p>æ¯ä¸ªç«¯å£éƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹å ç”¨ç€ï¼Œ</p><p>ç¬¬ä¸€æ­¥ã€ç”¨ä¸‹é¢å‘½ä»¤</p><p>netstat -anp |grep ç«¯å£</p><p>æ‰¾å‡ºå ç”¨è¿™ä¸ªç«¯å£çš„è¿›ç¨‹ï¼Œ</p><p>ç¬¬äºŒæ­¥ã€ç”¨ä¸‹é¢å‘½ä»¤</p><p>kill -9 PID</p><p>æ€æ‰å°±è¡Œäº†</p><h3 id="1-2-2ã€é€šè¿‡å¼€å¯å…³é—­æœåŠ¡çš„æ–¹æ³•æ¥å¼€å¯-x2F-å…³é—­ç«¯å£"><a href="#1-2-2ã€é€šè¿‡å¼€å¯å…³é—­æœåŠ¡çš„æ–¹æ³•æ¥å¼€å¯-x2F-å…³é—­ç«¯å£" class="headerlink" title="1.2.2ã€é€šè¿‡å¼€å¯å…³é—­æœåŠ¡çš„æ–¹æ³•æ¥å¼€å¯&#x2F;å…³é—­ç«¯å£"></a>1.2.2ã€é€šè¿‡å¼€å¯å…³é—­æœåŠ¡çš„æ–¹æ³•æ¥å¼€å¯&#x2F;å…³é—­ç«¯å£</h3><p>å› ä¸ºæ¯ä¸ªç«¯å£éƒ½æœ‰å¯¹åº”çš„æœåŠ¡ï¼Œå› æ­¤è¦å…³é—­ç«¯å£åªè¦å…³é—­ç›¸åº”çš„æœåŠ¡å°±å¯ä»¥äº†ã€‚</p><p>linuxä¸­å¼€æœºè‡ªåŠ¨å¯åŠ¨çš„æœåŠ¡ä¸€èˆ¬éƒ½å­˜æ”¾åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š</p><p>&#x2F;etc&#x2F;init.d&#x2F;æ–‡ä»¶å¤¹ä¸‹çš„æœåŠ¡ï¼š<br>è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æœåŠ¡éƒ½å¯ä»¥é€šè¿‡è¿è¡Œç›¸åº”çš„SCRIPTæ¥å¯åŠ¨æˆ–å…³é—­ã€‚<br>ä¾‹å¦‚ï¼šå¯åŠ¨sendmailæœåŠ¡ï¼š .&#x2F;sendmail start (æ‰“å¼€äº†TCP 25ç«¯å£)<br>å…³é—­sendmailæœåŠ¡ï¼š .&#x2F;sendmail stop ï¼ˆå…³é—­TCP 25 ç«¯å£ï¼‰</p><p>æŸ¥çœ‹sendmailæœåŠ¡å½“å‰çŠ¶æ€ï¼š .&#x2F;sendmail? status ï¼ˆæŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œï¼‰</p><p>&#x2F;etc&#x2F;xinetd.d&#x2F;æ–‡ä»¶å¤¹ä¸‹çš„æœåŠ¡ï¼š<br>è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æœåŠ¡éœ€è¦é€šè¿‡æ›´æ”¹æœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶é‡æ–°å¯åŠ¨xinetdæ‰å¯ä»¥ã€‚</p><p>ä¾‹å¦‚ï¼šè¦å¯åŠ¨å…¶ä¸­çš„authæœåŠ¡ï¼Œæ‰“å¼€&#x2F;etc&#x2F;xinetd.d&#x2F;authé…ç½®æ–‡ä»¶ï¼Œæ›´æ”¹â€œdisable&#x3D;noâ€ï¼Œä¿å­˜é€€å‡ºã€‚</p><p>è¿è¡Œ&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;xinetd restart </p><p>è¦åœæ­¢å…¶ä¸­çš„authæœåŠ¡ï¼Œæ‰“å¼€&#x2F;etc&#x2F;xinetd.d&#x2F;authé…ç½®æ–‡ä»¶ï¼Œæ›´æ”¹â€œdisable&#x3D;yesâ€ï¼Œä¿å­˜é€€å‡ºã€‚</p><p>è¿è¡Œ&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;xinetd restart</p><h3 id="1-2-3ã€é€šè¿‡é˜²ç«å¢™é™åˆ¶ç«¯å£"><a href="#1-2-3ã€é€šè¿‡é˜²ç«å¢™é™åˆ¶ç«¯å£" class="headerlink" title="1.2.3ã€é€šè¿‡é˜²ç«å¢™é™åˆ¶ç«¯å£"></a>1.2.3ã€é€šè¿‡é˜²ç«å¢™é™åˆ¶ç«¯å£</h3><p>ä»¥ä¸‹ä»‹ç»çš„æ–¹æ³•åœ¨<a href="http://www.kubiji.cn/topic-id119.html">Linuxå‘½ä»¤</a>ä¸‹ä½¿ç”¨ï¼Œå¾ˆç®€ä¾¿ã€‚<br>å¼€ç«¯å£ä¸ºï¼š</p><p>iptables -A INPUT -p  $port  -j ACCEPT</p><p>å…³æŠŠACCEPTæ”¹ä¸ºDROPå³å¯ï¼Œå³ï¼š</p><p>iptables -A INPUT -p $port  -j DROP<br>å…¶ä¸­$portå³ä¸ºç«¯å£æ•°å­—ï¼Œiptablesçš„å…·ä½“ç”¨æ³•å¯</p><h3 id="1-2-4-å…³é—­linuxTCP-x2F-6"><a href="#1-2-4-å…³é—­linuxTCP-x2F-6" class="headerlink" title="1.2.4 å…³é—­linuxTCP&#x2F;6"></a>1.2.4 å…³é—­linuxTCP&#x2F;6</h3><p>1ã€æ‰“å¼€&#x2F;etc&#x2F;sysctl.conf</p><p>2ã€æ·»åŠ å¦‚ä¸‹ä¸‰æ¡è®¾ç½®</p><p>   net.ipv6.conf.all.disable_ipv6 &#x3D; 1<br>   net.ipv6.conf.default.disable_ipv6 &#x3D; 1<br>   net.ipv6.conf.lo.disable_ipv6 &#x3D; 1<br>3ã€ä¿å­˜ä¿®æ”¹<br>4ã€æ‰§è¡Œï¼š<br>  sudo sysctl -p<br>5ã€æŸ¥çœ‹çŠ¶æ€ï¼š<br> cat &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv6&#x2F;conf&#x2F;all&#x2F;disable_ipv6<br> æ˜¾ç¤ºåº”è¯¥æ˜¯1<br>6ã€ç»“æŸ</p>]]></content>
    
    
    <categories>
      
      <category>åˆ†å¸ƒå¼zookeeper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>zookeeper</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mavené«˜çº§</title>
    <link href="/Hexo/2022/01/23/Maven%E9%AB%98%E7%BA%A7/"/>
    <url>/Hexo/2022/01/23/Maven%E9%AB%98%E7%BA%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="Mavené«˜çº§"><a href="#Mavené«˜çº§" class="headerlink" title="Mavené«˜çº§"></a>Mavené«˜çº§</h1><h2 id="1-åˆ†æ¨¡å—å¼€å‘ä¸è®¾è®¡"><a href="#1-åˆ†æ¨¡å—å¼€å‘ä¸è®¾è®¡" class="headerlink" title="1)åˆ†æ¨¡å—å¼€å‘ä¸è®¾è®¡"></a>1)åˆ†æ¨¡å—å¼€å‘ä¸è®¾è®¡</h2><h3 id="1-1-å·¥ç¨‹æ¨¡å—ä¸æ¨¡å—åˆ’åˆ†"><a href="#1-1-å·¥ç¨‹æ¨¡å—ä¸æ¨¡å—åˆ’åˆ†" class="headerlink" title="1.1)å·¥ç¨‹æ¨¡å—ä¸æ¨¡å—åˆ’åˆ†"></a><strong>1.1)å·¥ç¨‹æ¨¡å—ä¸æ¨¡å—åˆ’åˆ†</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee6289.png" alt="1592058795771"></p><h3 id="1-2-ssm-pojoæ‹†åˆ†"><a href="#1-2-ssm-pojoæ‹†åˆ†" class="headerlink" title="1.2)ssm_pojoæ‹†åˆ†"></a><strong>1.2)ssm_pojoæ‹†åˆ†</strong></h3><p>æ–°å»ºæ¨¡å—</p><p>æ‹·è´åŸå§‹é¡¹ç›®ä¸­å¯¹åº”çš„ç›¸å…³å†…å®¹åˆ°ssm_pojoæ¨¡å—ä¸­</p><pre><code class="hljs">å®ä½“ç±»ï¼ˆUserï¼‰é…ç½®æ–‡ä»¶ï¼ˆæ— ï¼‰</code></pre><h3 id="1-3-ssm-daoæ‹†åˆ†"><a href="#1-3-ssm-daoæ‹†åˆ†" class="headerlink" title="1.3)ssm_daoæ‹†åˆ†"></a><strong>1.3)ssm_daoæ‹†åˆ†</strong></h3><ul><li><p>æ–°å»ºæ¨¡å—</p></li><li><p>æ‹·è´åŸå§‹é¡¹ç›®ä¸­å¯¹åº”çš„ç›¸å…³å†…å®¹åˆ°ssm_daoæ¨¡å—ä¸­</p><ul><li><p>æ•°æ®å±‚æ¥å£ï¼ˆUserDaoï¼‰</p></li><li><p>é…ç½®æ–‡ä»¶ï¼šä¿ç•™ä¸æ•°æ®å±‚ç›¸å…³é…ç½®æ–‡ä»¶(3ä¸ªï¼‰</p></li><li><p>æ³¨æ„ï¼šåˆ†é¡µæ’ä»¶åœ¨é…ç½®ä¸­ä¸SqlSessionFactoryBeanç»‘å®šï¼Œéœ€è¦ä¿ç•™</p></li><li><p>pom.xmlï¼šå¼•å…¥æ•°æ®å±‚ç›¸å…³åæ ‡å³å¯ï¼Œåˆ é™¤springmvcç›¸å…³åæ ‡</p><ul><li><p>spring</p></li><li><p>mybatis</p></li><li><p>spring æ•´åˆmybatis</p></li><li><p>mysql</p></li><li><p>druid</p></li><li><p>pagehelper</p></li><li><p>ç›´æ¥ä¾èµ–ssm_pojoï¼ˆå¯¹ssm_pojoæ¨¡å—æ‰§è¡ŒinstallæŒ‡ä»¤ï¼Œå°†å…¶å®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼‰</p></li></ul></li></ul></li></ul><h3 id="1-4-ssm-serviceæ‹†åˆ†"><a href="#1-4-ssm-serviceæ‹†åˆ†" class="headerlink" title="1.4)ssm_serviceæ‹†åˆ†"></a><strong>1.4)ssm_serviceæ‹†åˆ†</strong></h3><ul><li><p>æ–°å»ºæ¨¡å—</p></li><li><p>æ‹·è´åŸå§‹é¡¹ç›®ä¸­å¯¹åº”çš„ç›¸å…³å†…å®¹åˆ°ssm_serviceæ¨¡å—ä¸­</p><ul><li><p>ä¸šåŠ¡å±‚æ¥å£ä¸å®ç°ç±»ï¼ˆUserServiceã€UserServiceImplï¼‰</p></li><li><p>é…ç½®æ–‡ä»¶ï¼šä¿ç•™ä¸æ•°æ®å±‚ç›¸å…³é…ç½®æ–‡ä»¶(1ä¸ªï¼‰</p></li><li><p>pom.xmlï¼šå¼•å…¥æ•°æ®å±‚ç›¸å…³åæ ‡å³å¯ï¼Œåˆ é™¤springmvcç›¸å…³åæ ‡</p><ul><li><p>spring</p></li><li><p>junit</p></li><li><p>spring æ•´åˆjunit</p></li><li><p>ç›´æ¥ä¾èµ–ssm_daoï¼ˆå¯¹ssm_daoæ¨¡å—æ‰§è¡ŒinstallæŒ‡ä»¤ï¼Œå°†å…¶å®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼‰</p></li><li><p>é—´æ¥ä¾èµ–ssm_pojoï¼ˆç”±ssm_daoæ¨¡å—è´Ÿè´£ä¾èµ–å…³ç³»çš„å»ºç«‹ï¼‰</p></li></ul></li><li><p>ä¿®æ”¹serviceæ¨¡å—springæ ¸å¿ƒé…ç½®æ–‡ä»¶åï¼Œæ·»åŠ æ¨¡å—åç§°ï¼Œæ ¼å¼ï¼šapplicationContext-service.xml</p></li><li><p>ä¿®æ”¹daoæ¨¡å—springæ ¸å¿ƒé…ç½®æ–‡ä»¶åï¼Œæ·»åŠ æ¨¡å—åç§°ï¼Œæ ¼å¼ï¼šapplicationContext-dao.xml</p></li><li><p>ä¿®æ”¹å•å…ƒæµ‹è¯•å¼•å…¥çš„é…ç½®æ–‡ä»¶åç§°ï¼Œç”±å•ä¸ªæ–‡ä»¶ä¿®æ”¹ä¸ºå¤šä¸ªæ–‡ä»¶</p></li></ul></li></ul><h3 id="1-5-ssm-controlæ‹†åˆ†"><a href="#1-5-ssm-controlæ‹†åˆ†" class="headerlink" title="1.5)ssm_controlæ‹†åˆ†"></a><strong>1.5)ssm_controlæ‹†åˆ†</strong></h3><ul><li><p>æ–°å»ºæ¨¡å—ï¼ˆä½¿ç”¨webappæ¨¡æ¿ï¼‰</p></li><li><p>æ‹·è´åŸå§‹é¡¹ç›®ä¸­å¯¹åº”çš„ç›¸å…³å†…å®¹åˆ°ssm_controlleræ¨¡å—ä¸­</p><ul><li><p>ç°å±‚æ§åˆ¶å™¨ç±»ä¸ç›¸å…³è®¾ç½®ç±»ï¼ˆUserControllerã€å¼‚å¸¸ç›¸å…³â€¦â€¦ï¼‰</p></li><li><p>é…ç½®æ–‡ä»¶ï¼šä¿ç•™ä¸è¡¨ç°å±‚ç›¸å…³é…ç½®æ–‡ä»¶(1ä¸ªï¼‰ã€æœåŠ¡å™¨ç›¸å…³é…ç½®æ–‡ä»¶ï¼ˆ1ä¸ªï¼‰</p></li><li><p>pom.xmlï¼šå¼•å…¥æ•°æ®å±‚ç›¸å…³åæ ‡å³å¯ï¼Œåˆ é™¤springmvcç›¸å…³åæ ‡</p><ul><li><p>spring</p></li><li><p>springmvc</p></li><li><p>jackson</p></li><li><p>servlet</p></li><li><p>tomcatæœåŠ¡å™¨æ’ä»¶</p></li><li><p>ç›´æ¥ä¾èµ–ssm_serviceï¼ˆå¯¹ssm_serviceæ¨¡å—æ‰§è¡ŒinstallæŒ‡ä»¤ï¼Œå°†å…¶å®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼‰</p></li><li><p>é—´æ¥ä¾èµ–ssm_daoã€ssm_pojo</p></li></ul></li><li><p>ä¿®æ”¹web.xmlé…ç½®æ–‡ä»¶ä¸­åŠ è½½springç¯å¢ƒçš„é…ç½®æ–‡ä»¶åç§°ï¼Œä½¿ç”¨*é€šé…ï¼ŒåŠ è½½æ‰€æœ‰applicationContext-å¼€å§‹çš„é…ç½®æ–‡ä»¶</p></li></ul></li></ul><p><strong>å°èŠ‚</strong></p><p>åˆ†æ¨¡å—å¼€å‘</p><ul><li><p>æ¨¡å—ä¸­ä»…åŒ…å«å½“å‰æ¨¡å—å¯¹åº”çš„åŠŸèƒ½ç±»ä¸é…ç½®æ–‡ä»¶</p></li><li><p>springæ ¸å¿ƒé…ç½®æ ¹æ®æ¨¡å—åŠŸèƒ½ä¸åŒè¿›è¡Œç‹¬ç«‹åˆ¶ä½œ</p></li><li><p>å½“å‰æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—é€šè¿‡å¯¼å…¥åæ ‡çš„å½¢å¼åŠ å…¥å½“å‰æ¨¡å—åæ‰å¯ä»¥ä½¿ç”¨</p></li><li><p>web.xmléœ€è¦åŠ è½½æ‰€æœ‰çš„springæ ¸å¿ƒé…ç½®æ–‡ä»¶</p></li></ul><h2 id="2-èšåˆ"><a href="#2-èšåˆ" class="headerlink" title="2)èšåˆ"></a>2)èšåˆ</h2><h3 id="2-1-å¤šæ¨¡å—æ„å»ºç»´æŠ¤"><a href="#2-1-å¤šæ¨¡å—æ„å»ºç»´æŠ¤" class="headerlink" title="2.1)å¤šæ¨¡å—æ„å»ºç»´æŠ¤"></a><strong>2.1)å¤šæ¨¡å—æ„å»ºç»´æŠ¤</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee62a2.png" alt="1592059171938"></p><h3 id="2-2-èšåˆ"><a href="#2-2-èšåˆ" class="headerlink" title="2.2)èšåˆ"></a><strong>2.2)èšåˆ</strong></h3><ul><li><p>ä½œç”¨ï¼šèšåˆç”¨äºå¿«é€Ÿæ„å»ºmavenå·¥ç¨‹ï¼Œä¸€æ¬¡æ€§æ„å»ºå¤šä¸ªé¡¹ç›®&#x2F;æ¨¡å—ã€‚</p></li><li><p>åˆ¶ä½œæ–¹å¼ï¼š</p><ul><li><p>åˆ›å»ºä¸€ä¸ªç©ºæ¨¡å—ï¼Œæ‰“åŒ…ç±»å‹å®šä¹‰ä¸ºpom</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>å®šä¹‰å½“å‰æ¨¡å—è¿›è¡Œæ„å»ºæ“ä½œæ—¶å…³è”çš„å…¶ä»–æ¨¡å—åç§°</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>../ssm_controller<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>../ssm_service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>../ssm_dao<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>../ssm_pojo<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul></li></ul><p>æ³¨æ„äº‹é¡¹ï¼šå‚ä¸èšåˆæ“ä½œçš„æ¨¡å—æœ€ç»ˆæ‰§è¡Œé¡ºåºä¸æ¨¡å—é—´çš„ä¾èµ–å…³ç³»æœ‰å…³ï¼Œä¸é…ç½®é¡ºåºæ— å…³</p><h2 id="3-ç»§æ‰¿"><a href="#3-ç»§æ‰¿" class="headerlink" title="3)ç»§æ‰¿"></a>3)ç»§æ‰¿</h2><h3 id="3-1-æ¨¡å—ä¾èµ–å…³ç³»ç»´æŠ¤"><a href="#3-1-æ¨¡å—ä¾èµ–å…³ç³»ç»´æŠ¤" class="headerlink" title="3.1)æ¨¡å—ä¾èµ–å…³ç³»ç»´æŠ¤"></a><strong>3.1)æ¨¡å—ä¾èµ–å…³ç³»ç»´æŠ¤</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee62b8.png" alt="1592059337530"></p><h3 id="3-2-ç»§æ‰¿"><a href="#3-2-ç»§æ‰¿" class="headerlink" title="3.2)ç»§æ‰¿"></a><strong>3.2)ç»§æ‰¿</strong></h3><ul><li><p>ä½œç”¨ï¼šé€šè¿‡ç»§æ‰¿å¯ä»¥å®ç°åœ¨å­å·¥ç¨‹ä¸­æ²¿ç”¨çˆ¶å·¥ç¨‹ä¸­çš„é…ç½®</p><ul><li>mavenä¸­çš„ç»§æ‰¿ä¸javaä¸­çš„ç»§æ‰¿ç›¸ä¼¼ï¼Œåœ¨å­å·¥ç¨‹ä¸­é…ç½®ç»§æ‰¿å…³ç³»</li></ul></li><li><p>åˆ¶ä½œæ–¹å¼ï¼š</p><ul><li><p>åœ¨å­å·¥ç¨‹ä¸­å£°æ˜å…¶çˆ¶å·¥ç¨‹åæ ‡ä¸å¯¹åº”çš„ä½ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å®šä¹‰è¯¥å·¥ç¨‹çš„çˆ¶å·¥ç¨‹--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itheima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>ssm<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å¡«å†™çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../ssm/pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">relativePath</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="3-3-ç»§æ‰¿ä¾èµ–å®šä¹‰"><a href="#3-3-ç»§æ‰¿ä¾èµ–å®šä¹‰" class="headerlink" title="3.3)ç»§æ‰¿ä¾èµ–å®šä¹‰"></a><strong>3.3)ç»§æ‰¿ä¾èµ–å®šä¹‰</strong></h3><p>åœ¨çˆ¶å·¥ç¨‹ä¸­å®šä¹‰ä¾èµ–ç®¡ç†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å£°æ˜æ­¤å¤„è¿›è¡Œä¾èµ–ç®¡ç†--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å…·ä½“çš„ä¾èµ–--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--springç¯å¢ƒ--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.9.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-4-ç»§æ‰¿ä¾èµ–ä½¿ç”¨"><a href="#3-4-ç»§æ‰¿ä¾èµ–ä½¿ç”¨" class="headerlink" title="3.4)ç»§æ‰¿ä¾èµ–ä½¿ç”¨"></a><strong>3.4)ç»§æ‰¿ä¾èµ–ä½¿ç”¨</strong></h3><p>åœ¨å­å·¥ç¨‹ä¸­å®šä¹‰ä¾èµ–å…³ç³»ï¼Œæ— éœ€å£°æ˜ä¾èµ–ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å‚ç…§çˆ¶å·¥ç¨‹ä¸­ä¾èµ–çš„ç‰ˆæœ¬</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--springç¯å¢ƒ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-5-ç»§æ‰¿çš„èµ„æº"><a href="#3-5-ç»§æ‰¿çš„èµ„æº" class="headerlink" title="3.5)ç»§æ‰¿çš„èµ„æº"></a><strong>3.5)ç»§æ‰¿çš„èµ„æº</strong></h3><p>groupIdï¼šé¡¹ç›®ç»„IDï¼Œé¡¹ç›®åæ ‡çš„æ ¸å¿ƒå…ƒç´ </p><p>versionï¼šé¡¹ç›®ç‰ˆæœ¬ï¼Œé¡¹ç›®åæ ‡çš„æ ¸å¿ƒå› ç´ </p><p>descriptionï¼šé¡¹ç›®çš„æè¿°ä¿¡æ¯</p><p>organizationï¼šé¡¹ç›®çš„ç»„ç»‡ä¿¡æ¯</p><p>inceptionYearï¼šé¡¹ç›®çš„åˆ›å§‹å¹´ä»½</p><p>urlï¼šé¡¹ç›®çš„URLåœ°å€</p><p>developersï¼šé¡¹ç›®çš„å¼€å‘è€…ä¿¡æ¯</p><p>contributorsï¼šé¡¹ç›®çš„è´¡çŒ®è€…ä¿¡æ¯</p><p>distributionManagementï¼šé¡¹ç›®çš„éƒ¨ç½²é…ç½®</p><p>issueManagementï¼šé¡¹ç›®çš„ç¼ºé™·è·Ÿè¸ªç³»ç»Ÿä¿¡æ¯</p><p>ciManagementï¼šé¡¹ç›®çš„æŒç»­é›†æˆç³»ç»Ÿä¿¡æ¯</p><p>scmï¼šé¡¹ç›®çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè¥¿æºª</p><p>malilingListsï¼šé¡¹ç›®çš„é‚®ä»¶åˆ—è¡¨ä¿¡æ¯</p><p>propertiesï¼šè‡ªå®šä¹‰çš„Mavenå±æ€§</p><p>dependenciesï¼šé¡¹ç›®çš„ä¾èµ–é…ç½®</p><p>dependencyManagementï¼šé¡¹ç›®çš„ä¾èµ–ç®¡ç†é…ç½®</p><p>repositoriesï¼šé¡¹ç›®çš„ä»“åº“é…ç½®</p><p>buildï¼šåŒ…æ‹¬é¡¹ç›®çš„æºç ç›®å½•é…ç½®ã€è¾“å‡ºç›®å½•é…ç½®ã€æ’ä»¶é…ç½®ã€æ’ä»¶ç®¡ç†é…ç½®ç­‰</p><p>reportingï¼šåŒ…æ‹¬é¡¹ç›®çš„æŠ¥å‘Šè¾“å‡ºç›®å½•é…ç½®ã€æŠ¥å‘Šæ’ä»¶é…ç½®ç­‰</p><h3 id="3-6-ç»§æ‰¿ä¸èšåˆ"><a href="#3-6-ç»§æ‰¿ä¸èšåˆ" class="headerlink" title="3.6)ç»§æ‰¿ä¸èšåˆ"></a><strong>3.6)ç»§æ‰¿ä¸èšåˆ</strong></h3><p>ä½œç”¨</p><ul><li><p>èšåˆç”¨äºå¿«é€Ÿæ„å»ºé¡¹ç›®</p></li><li><p>ç»§æ‰¿ç”¨äºå¿«é€Ÿé…ç½®</p></li></ul><p>ç›¸åŒç‚¹ï¼š</p><ul><li><p>èšåˆä¸ç»§æ‰¿çš„pom.xmlæ–‡ä»¶æ‰“åŒ…æ–¹å¼å‡ä¸ºpomï¼Œå¯ä»¥å°†ä¸¤ç§å…³ç³»åˆ¶ä½œåˆ°åŒä¸€ä¸ªpomæ–‡ä»¶ä¸­</p></li><li><p>èšåˆä¸ç»§æ‰¿å‡å±äºè®¾è®¡å‹æ¨¡å—ï¼Œå¹¶æ— å®é™…çš„æ¨¡å—å†…å®¹</p></li></ul><p>ä¸åŒç‚¹ï¼š</p><ul><li><p>èšåˆæ˜¯åœ¨å½“å‰æ¨¡å—ä¸­é…ç½®å…³ç³»ï¼Œèšåˆå¯ä»¥æ„ŸçŸ¥åˆ°å‚ä¸èšåˆçš„æ¨¡å—æœ‰å“ªäº›</p></li><li><p>ç»§æ‰¿æ˜¯åœ¨å­æ¨¡å—ä¸­é…ç½®å…³ç³»ï¼Œçˆ¶æ¨¡å—æ— æ³•æ„ŸçŸ¥å“ªäº›å­æ¨¡å—ç»§æ‰¿äº†è‡ªå·±</p></li></ul><h2 id="4-å±æ€§"><a href="#4-å±æ€§" class="headerlink" title="4)å±æ€§"></a>4)å±æ€§</h2><h3 id="4-1-ç‰ˆæœ¬ç»Ÿä¸€çš„é‡è¦æ€§"><a href="#4-1-ç‰ˆæœ¬ç»Ÿä¸€çš„é‡è¦æ€§" class="headerlink" title="4.1)ç‰ˆæœ¬ç»Ÿä¸€çš„é‡è¦æ€§"></a><strong>4.1)ç‰ˆæœ¬ç»Ÿä¸€çš„é‡è¦æ€§</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee62d6.png" alt="1592059609949"></p><h3 id="4-2-å±æ€§ç±»åˆ«"><a href="#4-2-å±æ€§ç±»åˆ«" class="headerlink" title="4.2)å±æ€§ç±»åˆ«"></a><strong>4.2)å±æ€§ç±»åˆ«</strong></h3><p>1.è‡ªå®šä¹‰å±æ€§</p><p>2.å†…ç½®å±æ€§</p><p>3.Settingå±æ€§</p><p>4.Javaç³»ç»Ÿå±æ€§</p><p>5.ç¯å¢ƒå˜é‡å±æ€§</p><h3 id="4-3-å±æ€§ç±»åˆ«ï¼šè‡ªå®šä¹‰å±æ€§"><a href="#4-3-å±æ€§ç±»åˆ«ï¼šè‡ªå®šä¹‰å±æ€§" class="headerlink" title="4.3)å±æ€§ç±»åˆ«ï¼šè‡ªå®šä¹‰å±æ€§"></a><strong>4.3)å±æ€§ç±»åˆ«ï¼šè‡ªå®šä¹‰å±æ€§</strong></h3><p>ä½œç”¨</p><ul><li>ç­‰åŒäºå®šä¹‰å˜é‡ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç»´æŠ¤</li></ul><p>å®šä¹‰æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å®šä¹‰è‡ªå®šä¹‰å±æ€§--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">spring.version</span>&gt;</span>5.1.9.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">spring.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">junit.version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">junit.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p>èšåˆä¸ç»§æ‰¿çš„pom.xmlæ–‡ä»¶æ‰“åŒ…æ–¹å¼å‡ä¸ºpomï¼Œå¯ä»¥å°†ä¸¤ç§å…³ç³»åˆ¶ä½œåˆ°åŒä¸€ä¸ªpomæ–‡ä»¶ä¸­</p></li><li><p>èšåˆä¸ç»§æ‰¿å‡å±äºè®¾è®¡å‹æ¨¡å—ï¼Œå¹¶æ— å®é™…çš„æ¨¡å—å†…å®¹</p></li></ul><p>è°ƒç”¨æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4-4-å±æ€§ç±»åˆ«ï¼šå†…ç½®å±æ€§"><a href="#4-4-å±æ€§ç±»åˆ«ï¼šå†…ç½®å±æ€§" class="headerlink" title="4.4)å±æ€§ç±»åˆ«ï¼šå†…ç½®å±æ€§"></a><strong>4.4)å±æ€§ç±»åˆ«ï¼šå†…ç½®å±æ€§</strong></h3><p>ä½œç”¨</p><ul><li>ä½¿ç”¨mavenå†…ç½®å±æ€§ï¼Œå¿«é€Ÿé…ç½®</li></ul><p>è°ƒç”¨æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml">$&#123;basedir&#125;<br>$&#123;version&#125;<br></code></pre></td></tr></table></figure><h3 id="4-5-å±æ€§ç±»åˆ«ï¼šSettingå±æ€§"><a href="#4-5-å±æ€§ç±»åˆ«ï¼šSettingå±æ€§" class="headerlink" title="4.5)å±æ€§ç±»åˆ«ï¼šSettingå±æ€§"></a><strong>4.5)å±æ€§ç±»åˆ«ï¼šSettingå±æ€§</strong></h3><p>ä½œç”¨</p><ul><li>ä½¿ç”¨Mavené…ç½®æ–‡ä»¶setting.xmlä¸­çš„æ ‡ç­¾å±æ€§ï¼Œç”¨äºåŠ¨æ€é…ç½®</li></ul><p>è°ƒç”¨æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">$&#123;settings.localRepository&#125; <br></code></pre></td></tr></table></figure><h3 id="4-6-å±æ€§ç±»åˆ«ï¼šJavaç³»ç»Ÿå±æ€§"><a href="#4-6-å±æ€§ç±»åˆ«ï¼šJavaç³»ç»Ÿå±æ€§" class="headerlink" title="4.6)å±æ€§ç±»åˆ«ï¼šJavaç³»ç»Ÿå±æ€§"></a><strong>4.6)å±æ€§ç±»åˆ«ï¼šJavaç³»ç»Ÿå±æ€§</strong></h3><p>ä½œç”¨</p><ul><li>è¯»å–Javaç³»ç»Ÿå±æ€§</li></ul><p>è°ƒç”¨æ ¼å¼</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$&#123;user.home&#125; <br></code></pre></td></tr></table></figure><p>ç³»ç»Ÿå±æ€§æŸ¥è¯¢æ–¹å¼</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">mvn <span class="hljs-keyword">help</span>:<span class="hljs-keyword">system</span> <br></code></pre></td></tr></table></figure><h3 id="4-7-å±æ€§ç±»åˆ«ï¼šç¯å¢ƒå˜é‡å±æ€§"><a href="#4-7-å±æ€§ç±»åˆ«ï¼šç¯å¢ƒå˜é‡å±æ€§" class="headerlink" title="4.7)å±æ€§ç±»åˆ«ï¼šç¯å¢ƒå˜é‡å±æ€§"></a><strong>4.7)å±æ€§ç±»åˆ«ï¼šç¯å¢ƒå˜é‡å±æ€§</strong></h3><p>ä½œç”¨</p><ul><li>ä½¿ç”¨Mavené…ç½®æ–‡ä»¶setting.xmlä¸­çš„æ ‡ç­¾å±æ€§ï¼Œç”¨äºåŠ¨æ€é…ç½®</li></ul><p>è°ƒç”¨æ ¼å¼</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">$&#123;env.JAV<span class="hljs-built_in">A_HOME</span>&#125; <br></code></pre></td></tr></table></figure><p>ç¯å¢ƒå˜é‡å±æ€§æŸ¥è¯¢æ–¹å¼</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">mvn <span class="hljs-keyword">help</span>:<span class="hljs-keyword">system</span> <br></code></pre></td></tr></table></figure><h2 id="5-ç‰ˆæœ¬ç®¡ç†"><a href="#5-ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="5)ç‰ˆæœ¬ç®¡ç†"></a>5)ç‰ˆæœ¬ç®¡ç†</h2><h3 id="5-1-å·¥ç¨‹ç‰ˆæœ¬åŒºåˆ†"><a href="#5-1-å·¥ç¨‹ç‰ˆæœ¬åŒºåˆ†" class="headerlink" title="5.1)å·¥ç¨‹ç‰ˆæœ¬åŒºåˆ†"></a><strong>5.1)å·¥ç¨‹ç‰ˆæœ¬åŒºåˆ†</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee62fd.png" alt="1592060021315"></p><h3 id="5-2-å·¥ç¨‹ç‰ˆæœ¬"><a href="#5-2-å·¥ç¨‹ç‰ˆæœ¬" class="headerlink" title="5.2)å·¥ç¨‹ç‰ˆæœ¬"></a><strong>5.2)å·¥ç¨‹ç‰ˆæœ¬</strong></h3><ul><li><p>SNAPSHOTï¼ˆå¿«ç…§ç‰ˆæœ¬ï¼‰</p><ul><li><p>é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºæ–¹ä¾¿å›¢é˜Ÿæˆå‘˜åˆä½œï¼Œè§£å†³æ¨¡å—é—´ç›¸äº’ä¾èµ–å’Œæ—¶æ—¶æ›´æ–°çš„é—®é¢˜ï¼Œå¼€å‘è€…å¯¹æ¯ä¸ªæ¨¡å—è¿›è¡Œæ„å»ºçš„æ—¶å€™ï¼Œè¾“å‡ºçš„ä¸´æ—¶æ€§ç‰ˆæœ¬å«å¿«ç…§ç‰ˆæœ¬ï¼ˆæµ‹è¯•é˜¶æ®µç‰ˆæœ¬ï¼‰</p></li><li><p>uå¿«ç…§ç‰ˆæœ¬ä¼šéšç€å¼€å‘çš„è¿›å±•ä¸æ–­æ›´æ–°</p></li></ul></li><li><p>RELEASEï¼ˆå‘å¸ƒç‰ˆæœ¬ï¼‰</p><ul><li>ué¡¹ç›®å¼€å‘åˆ°è¿›å…¥é˜¶æ®µé‡Œç¨‹ç¢‘åï¼Œå‘å›¢é˜Ÿå¤–éƒ¨å‘å¸ƒè¾ƒä¸ºç¨³å®šçš„ç‰ˆæœ¬ï¼Œè¿™ç§ç‰ˆæœ¬æ‰€å¯¹åº”çš„æ„ä»¶æ–‡ä»¶æ˜¯ç¨³å®šçš„ï¼Œå³ä¾¿è¿›è¡ŒåŠŸèƒ½çš„åç»­å¼€å‘ï¼Œä¹Ÿä¸ä¼šæ”¹å˜å½“å‰å‘å¸ƒç‰ˆæœ¬å†…å®¹ï¼Œè¿™ç§ç‰ˆæœ¬ç§°ä¸ºå‘å¸ƒç‰ˆæœ¬</li></ul></li></ul><h3 id="5-3-å·¥ç¨‹ç‰ˆæœ¬å·çº¦å®š"><a href="#5-3-å·¥ç¨‹ç‰ˆæœ¬å·çº¦å®š" class="headerlink" title="5.3)å·¥ç¨‹ç‰ˆæœ¬å·çº¦å®š"></a><strong>5.3)å·¥ç¨‹ç‰ˆæœ¬å·çº¦å®š</strong></h3><p>çº¦å®šè§„èŒƒï¼š</p><ul><li><p>&lt;ä¸»ç‰ˆæœ¬&gt;.&lt;æ¬¡ç‰ˆæœ¬&gt;.&lt;å¢é‡ç‰ˆæœ¬&gt;.&lt;é‡Œç¨‹ç¢‘ç‰ˆæœ¬&gt;</p></li><li><p>ä¸»ç‰ˆæœ¬ï¼šè¡¨ç¤ºé¡¹ç›®é‡å¤§æ¶æ„çš„å˜æ›´ï¼Œå¦‚ï¼šspring5ç›¸è¾ƒäºspring4çš„è¿­ä»£</p></li><li><p>æ¬¡ç‰ˆæœ¬ï¼šè¡¨ç¤ºæœ‰è¾ƒå¤§çš„åŠŸèƒ½å¢åŠ å’Œå˜åŒ–ï¼Œæˆ–è€…å…¨é¢ç³»ç»Ÿåœ°ä¿®å¤æ¼æ´</p></li><li><p>å¢é‡ç‰ˆæœ¬ï¼šè¡¨ç¤ºæœ‰é‡å¤§æ¼æ´çš„ä¿®å¤</p></li><li><p>é‡Œç¨‹ç¢‘ç‰ˆæœ¬ï¼šè¡¨æ˜ä¸€ä¸ªç‰ˆæœ¬çš„é‡Œç¨‹ç¢‘ï¼ˆç‰ˆæœ¬å†…éƒ¨ï¼‰ã€‚è¿™æ ·çš„ç‰ˆæœ¬åŒä¸‹ä¸€ä¸ªæ­£å¼ç‰ˆæœ¬ç›¸æ¯”ï¼Œç›¸å¯¹æ¥è¯´ä¸æ˜¯å¾ˆç¨³å®šï¼Œæœ‰å¾…æ›´å¤šçš„æµ‹è¯•</p></li></ul><p>èŒƒä¾‹ï¼š</p><ul><li>5.1.9.RELEASE</li></ul><h2 id="6-èµ„æºé…ç½®"><a href="#6-èµ„æºé…ç½®" class="headerlink" title="6)èµ„æºé…ç½®"></a>6)èµ„æºé…ç½®</h2><h3 id="6-1-èµ„æºé…ç½®å¤šæ–‡ä»¶ç»´æŠ¤"><a href="#6-1-èµ„æºé…ç½®å¤šæ–‡ä»¶ç»´æŠ¤" class="headerlink" title="6.1)èµ„æºé…ç½®å¤šæ–‡ä»¶ç»´æŠ¤"></a><strong>6.1)èµ„æºé…ç½®å¤šæ–‡ä»¶ç»´æŠ¤</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee630f.png" alt="1592060128683"></p><h3 id="6-2-é…ç½®æ–‡ä»¶å¼•ç”¨pomå±æ€§"><a href="#6-2-é…ç½®æ–‡ä»¶å¼•ç”¨pomå±æ€§" class="headerlink" title="6.2)é…ç½®æ–‡ä»¶å¼•ç”¨pomå±æ€§"></a><strong>6.2)é…ç½®æ–‡ä»¶å¼•ç”¨pomå±æ€§</strong></h3><ul><li>ä½œç”¨<ul><li>åœ¨ä»»æ„é…ç½®æ–‡ä»¶ä¸­åŠ è½½pomæ–‡ä»¶ä¸­å®šä¹‰çš„å±æ€§</li></ul></li><li>è°ƒç”¨æ ¼å¼</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$&#123;jdbc.url&#125;</span> <br></code></pre></td></tr></table></figure><ul><li><p>å¼€å¯é…ç½®æ–‡ä»¶åŠ è½½pomå±æ€§</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é…ç½®èµ„æºæ–‡ä»¶å¯¹åº”çš„ä¿¡æ¯--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--è®¾å®šé…ç½®æ–‡ä»¶å¯¹åº”çš„ä½ç½®ç›®å½•ï¼Œæ”¯æŒä½¿ç”¨å±æ€§åŠ¨æ€è®¾å®šè·¯å¾„--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>$&#123;project.basedir&#125;/src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--å¼€å¯å¯¹é…ç½®æ–‡ä»¶çš„èµ„æºåŠ è½½è¿‡æ»¤--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="7-å¤šç¯å¢ƒå¼€å‘é…ç½®"><a href="#7-å¤šç¯å¢ƒå¼€å‘é…ç½®" class="headerlink" title="7)å¤šç¯å¢ƒå¼€å‘é…ç½®"></a>7)å¤šç¯å¢ƒå¼€å‘é…ç½®</h2><h3 id="7-1-å¤šç¯å¢ƒå…¼å®¹"><a href="#7-1-å¤šç¯å¢ƒå…¼å®¹" class="headerlink" title="7.1)å¤šç¯å¢ƒå…¼å®¹"></a><strong>7.1)å¤šç¯å¢ƒå…¼å®¹</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee6322.png" alt="1592060250502"></p><h3 id="7-2-å¤šç¯å¢ƒé…ç½®"><a href="#7-2-å¤šç¯å¢ƒé…ç½®" class="headerlink" title="7.2)å¤šç¯å¢ƒé…ç½®"></a><strong>7.2)å¤šç¯å¢ƒé…ç½®</strong></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--åˆ›å»ºå¤šç¯å¢ƒ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å®šä¹‰å…·ä½“çš„ç¯å¢ƒï¼šç”Ÿäº§ç¯å¢ƒ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--å®šä¹‰ç¯å¢ƒå¯¹åº”çš„å”¯ä¸€åç§°--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>pro_env<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--å®šä¹‰ç¯å¢ƒä¸­ä¸“ç”¨çš„å±æ€§å€¼--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">jdbc.url</span>&gt;</span>jdbc:mysql://127.1.1.1:3306/ssm_db<span class="hljs-tag">&lt;/<span class="hljs-name">jdbc.url</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--è®¾ç½®é»˜è®¤å¯åŠ¨--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">activeByDefault</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--å®šä¹‰å…·ä½“çš„ç¯å¢ƒï¼šå¼€å‘ç¯å¢ƒ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev_env<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        â€¦â€¦<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="7-3-åŠ è½½æŒ‡å®šç¯å¢ƒ"><a href="#7-3-åŠ è½½æŒ‡å®šç¯å¢ƒ" class="headerlink" title="7.3)åŠ è½½æŒ‡å®šç¯å¢ƒ"></a><strong>7.3)åŠ è½½æŒ‡å®šç¯å¢ƒ</strong></h3><p>ä½œç”¨</p><ul><li>åŠ è½½æŒ‡å®šç¯å¢ƒé…ç½®</li></ul><p>è°ƒç”¨æ ¼å¼</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">mvn æŒ‡ä»¤ â€“P ç¯å¢ƒå®šä¹‰<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure><p>èŒƒä¾‹</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-keyword">mvn</span> install â€“P pro_env<br></code></pre></td></tr></table></figure><h2 id="8-è·³è¿‡æµ‹è¯•"><a href="#8-è·³è¿‡æµ‹è¯•" class="headerlink" title="8)è·³è¿‡æµ‹è¯•"></a>8)è·³è¿‡æµ‹è¯•</h2><h3 id="8-1-è·³è¿‡æµ‹è¯•ç¯èŠ‚çš„åº”ç”¨åœºæ™¯"><a href="#8-1-è·³è¿‡æµ‹è¯•ç¯èŠ‚çš„åº”ç”¨åœºæ™¯" class="headerlink" title="8.1)è·³è¿‡æµ‹è¯•ç¯èŠ‚çš„åº”ç”¨åœºæ™¯"></a><strong>8.1)è·³è¿‡æµ‹è¯•ç¯èŠ‚çš„åº”ç”¨åœºæ™¯</strong></h3><p>æ•´ä½“æ¨¡å—åŠŸèƒ½æœªå¼€å‘</p><p>æ¨¡å—ä¸­æŸä¸ªåŠŸèƒ½æœªå¼€å‘å®Œæ¯•</p><p>å•ä¸ªåŠŸèƒ½æ›´æ–°è°ƒè¯•å¯¼è‡´å…¶ä»–åŠŸèƒ½å¤±è´¥</p><p>å¿«é€Ÿæ‰“åŒ…</p><p>â€¦â€¦</p><h3 id="8-2-ä½¿ç”¨å‘½ä»¤è·³è¿‡æµ‹è¯•"><a href="#8-2-ä½¿ç”¨å‘½ä»¤è·³è¿‡æµ‹è¯•" class="headerlink" title="8.2)ä½¿ç”¨å‘½ä»¤è·³è¿‡æµ‹è¯•"></a><strong>8.2)ä½¿ç”¨å‘½ä»¤è·³è¿‡æµ‹è¯•</strong></h3><p>å‘½ä»¤</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-keyword">mvn</span> æŒ‡ä»¤ â€“D skipTests<br></code></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹</p><ul><li>æ‰§è¡Œçš„æŒ‡ä»¤ç”Ÿå‘½å‘¨æœŸå¿…é¡»åŒ…å«æµ‹è¯•ç¯èŠ‚</li></ul><h3 id="8-3-ä½¿ç”¨ç•Œé¢æ“ä½œè·³è¿‡æµ‹è¯•"><a href="#8-3-ä½¿ç”¨ç•Œé¢æ“ä½œè·³è¿‡æµ‹è¯•" class="headerlink" title="8.3)ä½¿ç”¨ç•Œé¢æ“ä½œè·³è¿‡æµ‹è¯•"></a><strong>8.3)ä½¿ç”¨ç•Œé¢æ“ä½œè·³è¿‡æµ‹è¯•</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee6342.png" alt="1592060441318"></p><h3 id="8-4-ä½¿ç”¨é…ç½®è·³è¿‡æµ‹è¯•"><a href="#8-4-ä½¿ç”¨é…ç½®è·³è¿‡æµ‹è¯•" class="headerlink" title="8.4)ä½¿ç”¨é…ç½®è·³è¿‡æµ‹è¯•"></a><strong>8.4)ä½¿ç”¨é…ç½®è·³è¿‡æµ‹è¯•</strong></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.22.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span><span class="hljs-comment">&lt;!--è®¾ç½®è·³è¿‡æµ‹è¯•--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span> <span class="hljs-comment">&lt;!--åŒ…å«æŒ‡å®šçš„æµ‹è¯•ç”¨ä¾‹--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/User*Test.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span><span class="hljs-comment">&lt;!--æ’é™¤æŒ‡å®šçš„æµ‹è¯•ç”¨ä¾‹--&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/User*TestCase.java<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="9-ç§æœ"><a href="#9-ç§æœ" class="headerlink" title="9)ç§æœ"></a>9)ç§æœ</h2><h3 id="9-1-åˆ†æ¨¡å—åˆä½œå¼€å‘"><a href="#9-1-åˆ†æ¨¡å—åˆä½œå¼€å‘" class="headerlink" title="9.1)åˆ†æ¨¡å—åˆä½œå¼€å‘"></a><strong>9.1)åˆ†æ¨¡å—åˆä½œå¼€å‘</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee6363.png" alt="1592060518477"></p><h3 id="9-2-Nexus"><a href="#9-2-Nexus" class="headerlink" title="9.2)Nexus"></a><strong>9.2)Nexus</strong></h3><p>Nexusæ˜¯Sonatypeå…¬å¸çš„ä¸€æ¬¾mavenç§æœäº§å“</p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://help.sonatype.com/repomanager3/download">https://help.sonatype.com/repomanager3/download</a> </p><h3 id="9-3-Nexus-å®‰è£…ã€å¯åŠ¨ä¸é…ç½®"><a href="#9-3-Nexus-å®‰è£…ã€å¯åŠ¨ä¸é…ç½®" class="headerlink" title="9.3)Nexus*å®‰è£…ã€å¯åŠ¨ä¸é…ç½®"></a><strong>9.3)Nexus*å®‰è£…ã€å¯åŠ¨ä¸é…ç½®</strong></h3><p>å¯åŠ¨æœåŠ¡å™¨ï¼ˆå‘½ä»¤è¡Œå¯åŠ¨ï¼‰</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">nexus.exe /<span class="hljs-built_in">run</span> nexus<br></code></pre></td></tr></table></figure><p>è®¿é—®æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£ï¼š8081ï¼‰</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8081</span><br></code></pre></td></tr></table></figure><p>ä¿®æ”¹åŸºç¡€é…ç½®ä¿¡æ¯</p><ul><li>å®‰è£…è·¯å¾„ä¸‹etcç›®å½•ä¸­nexus-default.propertiesæ–‡ä»¶ä¿å­˜æœ‰nexusåŸºç¡€é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚é»˜è®¤è®¿é—®ç«¯å£</li></ul><p>ä¿®æ”¹æœåŠ¡å™¨è¿è¡Œé…ç½®ä¿¡æ¯</p><ul><li>å®‰è£…è·¯å¾„ä¸‹binç›®å½•ä¸­nexus.vmoptionsæ–‡ä»¶ä¿å­˜æœ‰nexusæœåŠ¡å™¨å¯åŠ¨å¯¹åº”çš„é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚é»˜è®¤å ç”¨å†…å­˜ç©ºé—´</li></ul><h3 id="9-4-ç§æœèµ„æºè·å–"><a href="#9-4-ç§æœèµ„æºè·å–" class="headerlink" title="9.4)ç§æœèµ„æºè·å–"></a><strong>9.4)ç§æœèµ„æºè·å–</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf727f86abb2aee6378.png" alt="1592060611850"></p><h3 id="9-5-ä»“åº“åˆ†ç±»"><a href="#9-5-ä»“åº“åˆ†ç±»" class="headerlink" title="9.5)ä»“åº“åˆ†ç±»"></a><strong>9.5)ä»“åº“åˆ†ç±»</strong></h3><p>å®¿ä¸»ä»“åº“hosted </p><ul><li>ä¿å­˜æ— æ³•ä»ä¸­å¤®ä»“åº“è·å–çš„èµ„æº<ul><li>è‡ªä¸»ç ”å‘</li><li>ç¬¬ä¸‰æ–¹éå¼€æºé¡¹ç›®</li></ul></li></ul><p>ä»£ç†ä»“åº“proxy </p><ul><li>ä»£ç†è¿œç¨‹ä»“åº“ï¼Œé€šè¿‡nexusè®¿é—®å…¶ä»–å…¬å…±ä»“åº“ï¼Œä¾‹å¦‚ä¸­å¤®ä»“åº“</li></ul><p>ä»“åº“ç»„group </p><ul><li>å°†è‹¥å¹²ä¸ªä»“åº“ç»„æˆä¸€ä¸ªç¾¤ç»„ï¼Œç®€åŒ–é…ç½®</li><li>ä»“åº“ç»„ä¸èƒ½ä¿å­˜èµ„æºï¼Œå±äºè®¾è®¡å‹ä»“åº“</li></ul><h3 id="9-6-èµ„æºä¸Šä¼ "><a href="#9-6-èµ„æºä¸Šä¼ " class="headerlink" title="9.6)èµ„æºä¸Šä¼ "></a><strong>9.6)èµ„æºä¸Šä¼ </strong></h3><p>ä¸Šä¼ èµ„æºæ—¶æä¾›å¯¹åº”çš„ä¿¡æ¯</p><ul><li><p>ä¿å­˜çš„ä½ç½®ï¼ˆå®¿ä¸»ä»“åº“ï¼‰</p></li><li><p>èµ„æºæ–‡ä»¶</p></li><li><p>å¯¹åº”åæ ‡</p></li></ul><h3 id="9-7-ideaç¯å¢ƒä¸­èµ„æºä¸Šä¼ ä¸ä¸‹è½½"><a href="#9-7-ideaç¯å¢ƒä¸­èµ„æºä¸Šä¼ ä¸ä¸‹è½½" class="headerlink" title="9.7)ideaç¯å¢ƒä¸­èµ„æºä¸Šä¼ ä¸ä¸‹è½½"></a><strong>9.7)ideaç¯å¢ƒä¸­èµ„æºä¸Šä¼ ä¸ä¸‹è½½</strong></h3><p><img src="https://pic.imgdb.cn/item/623e9bf727f86abb2aee6388.png" alt="1592060719086"></p><h3 id="9-8-è®¿é—®ç§æœé…ç½®ï¼ˆæœ¬åœ°ä»“åº“è®¿é—®ç§æœï¼‰"><a href="#9-8-è®¿é—®ç§æœé…ç½®ï¼ˆæœ¬åœ°ä»“åº“è®¿é—®ç§æœï¼‰" class="headerlink" title="9.8)è®¿é—®ç§æœé…ç½®ï¼ˆæœ¬åœ°ä»“åº“è®¿é—®ç§æœï¼‰"></a><strong>9.8)è®¿é—®ç§æœé…ç½®ï¼ˆæœ¬åœ°ä»“åº“è®¿é—®ç§æœï¼‰</strong></h3><p>é…ç½®æœ¬åœ°ä»“åº“è®¿é—®ç§æœçš„æƒé™ï¼ˆsetting.xmlï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>heima-release<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>heima-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servers</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é…ç½®æœ¬åœ°ä»“åº“èµ„æºæ¥æºï¼ˆsetting.xmlï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mirrors</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-heima<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://localhost:8081/repository/maven-public/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mirrors</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="9-9-è®¿é—®ç§æœé…ç½®ï¼ˆ-é¡¹ç›®å·¥ç¨‹è®¿é—®ç§æœï¼‰"><a href="#9-9-è®¿é—®ç§æœé…ç½®ï¼ˆ-é¡¹ç›®å·¥ç¨‹è®¿é—®ç§æœï¼‰" class="headerlink" title="9.9)è®¿é—®ç§æœé…ç½®ï¼ˆ é¡¹ç›®å·¥ç¨‹è®¿é—®ç§æœï¼‰"></a><strong>9.9)è®¿é—®ç§æœé…ç½®ï¼ˆ é¡¹ç›®å·¥ç¨‹è®¿é—®ç§æœï¼‰</strong></h3><p>é…ç½®å½“å‰é¡¹ç›®è®¿é—®ç§æœä¸Šä¼ èµ„æºçš„ä¿å­˜ä½ç½®ï¼ˆpom.xmlï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">distributionManagement</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>heima-release<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://localhost:8081/repository/heima-release/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">snapshotRepository</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>heima-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://localhost:8081/repository/heima-snapshots/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">snapshotRepository</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">distributionManagement</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å‘å¸ƒèµ„æºåˆ°ç§æœå‘½ä»¤</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-keyword">mvn</span> deploy<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Maven</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Maven</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mybatiså…¥é—¨</title>
    <link href="/Hexo/2021/12/23/Mybatis%E5%85%A5%E9%97%A8/"/>
    <url>/Hexo/2021/12/23/Mybatis%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<hr><hr><p><img src="https://img-blog.csdnimg.cn/61f141693d1948b88915acfda1346d52.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_16,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.    ç®€ä»‹"></a>1.    ç®€ä»‹</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯-MyBatisï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯-MyBatisï¼Ÿ" class="headerlink" title="1.1     ä»€ä¹ˆæ˜¯ MyBatisï¼Ÿ"></a>1.1     ä»€ä¹ˆæ˜¯ MyBatisï¼Ÿ</h2><p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p><p><img src="https://img-blog.csdnimg.cn/459b0132a4c042b8ba39a80319ff7caa.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h1 id="2-MyBatiså·¥ä½œæœºåˆ¶"><a href="#2-MyBatiså·¥ä½œæœºåˆ¶" class="headerlink" title="2.    MyBatiså·¥ä½œæœºåˆ¶"></a>2.    MyBatiså·¥ä½œæœºåˆ¶</h1><p><img src="https://img-blog.csdnimg.cn/03c66acabda949188e7e3ce54e971feb.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><strong>ä¸‹é¢å°±å¯¹å›¾ä¸­çš„æ¯ä¸€æ­¥æµç¨‹è¿›è¡Œè¯¦ç»†è®²è§£ï¼Œå…·ä½“å¦‚ä¸‹ã€‚<br> (1)è¯»å– MyBatis é…ç½®æ–‡ä»¶mybatis-config.xmlã€‚mybatis-config.xml ä½œä¸ºMyBatis çš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œé…ç½®äº†MyBatisçš„è¿è¡Œç¯å¢ƒç­‰ä¿¡æ¯ï¼Œå…¶ä¸­ä¸»è¦å†…å®¹æ˜¯è·å–æ•°æ®åº“è¿æ¥ã€‚</strong></p><p> <strong>(2)åŠ è½½æ˜ å°„æ–‡ä»¶Mapper.xmlã€‚Mapper.xmlæ–‡ä»¶å³SQLæ˜ å°„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­é…ç½®äº†æ“ä½œæ•°æ®åº“çš„SQLè¯­å¥ï¼Œéœ€è¦åœ¨mybatis-configxmlä¸­åŠ è½½æ‰èƒ½æ‰§è¡Œã€‚mybatis-config.xml å¯ä»¥åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ªé…ç½®æ–‡ä»¶å¯¹åº”æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ã€‚</strong></p><p> <strong>(3)æ„å»ºä¼šè¯å·¥å‚ã€‚é€šè¿‡MyBatisçš„ç¯å¢ƒç­‰é…ç½®ä¿¡æ¯æ„å»ºä¼šè¯å·¥å‚SqlSessionFactoryã€‚</strong></p><p><strong>(4)åˆ›å»º SqiSession å¯¹è±¡ã€‚ç”±ä¼šè¯å·¥å‚åˆ›å»ºSqlSession å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«äº†æ‰§è¡Œ SQLçš„æ‰€æœ‰æ–¹æ³•ã€‚</strong></p><p> <strong>(5)MyBatisåº•å±‚å®šä¹‰äº†ä¸€ä¸ªExecutoræ¥å£æ¥æ“ä½œæ•°æ®åº“ï¼Œå®ƒä¼šæ ¹æ®SqlSession ä¼ é€’çš„å‚æ•°åŠ¨æ€åœ°ç”Ÿæˆéœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼ŒåŒæ—¶è´Ÿè´£æŸ¥è¯¢ç¼“å­˜çš„ç»´æŠ¤ã€‚</strong></p><p> <strong>(6)åœ¨Executor æ¥å£çš„æ‰§è¡Œæ–¹æ³•ä¸­ï¼ŒåŒ…å«ä¸€ä¸ªMappedStatementç±»å‹çš„å‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯å¯¹æ˜ å°„ä¿¡æ¯çš„å°è£…ï¼Œç”¨äºå­˜å‚¨è¦æ˜ å°„çš„SQLè¯­å¥çš„idã€å‚æ•°ç­‰ã€‚M Mapper.xml æ–‡ä»¶ä¸­ä¸€ä¸ª SQLå¯¹åº”ä¸€ä¸ªMappedStatementå¯¹è±¡ï¼ŒSQLçš„idå³æ˜¯MappedStatem ent çš„ idã€‚</strong></p><p> **(7)è¾“å…¥å‚æ•°æ˜ å°„ã€‚åœ¨æ‰§è¡Œæ–¹æ³•æ—¶ï¼ŒMappedStatementå¯¹è±¡ä¼šå¯¹ç”¨æˆ·æ‰§è¡Œ SQL è¯­å¥çš„è¾“å…¥å‚æ•°è¿›è¡Œå®šä¹‰(å¯ä»¥å®šä¹‰ä¸ºMapã€Listç±»å‹ã€åŸºæœ¬ç±»å‹å’ŒPOJOç±»å‹)ï¼ŒExecutoræ‰§è¡Œå™¨ä¼šé€šè¿‡MappedStatementå¯¹è±¡åœ¨æ‰§è¡ŒSQLå‰ï¼Œå°†è¾“å…¥çš„Javaå¯¹è±¡æ˜ å°„åˆ° SQLè¯­å¥ä¸­ã€‚è¿™é‡Œå¯¹è¾“å…¥å‚æ•°çš„æ˜ å°„è¿‡ç¨‹å°±ç±»ä¼¼äºJDBCç¼–ç¨‹ä¸­å¯¹preparedStatementå¯¹è±¡è®¾ç½®å‚æ•°çš„è¿‡ç¨‹ã€‚</p><p> (8)è¾“å‡ºç»“æœæ˜ å°„ã€‚åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œå®ŒSQLè¯­å¥åï¼ŒMapped Statement å¯¹è±¡ä¼šå¯¹SQLæ‰§è¡Œè¾“å‡ºçš„ç»“æœè¿›è¡Œå®šä¹‰(å¯ä»¥å®šä¹‰ä¸ºMapå’ŒListç±»å‹ã€åŸºæœ¬ç±»å‹ã€ POJOç±»å‹)ï¼ŒExecutoræ‰§è¡Œ å™¨ä¼šé€šè¿‡MappedStatementå¯¹è±¡åœ¨æ‰§è¡ŒSQLè¯­å¥åï¼Œå°†è¾“å‡ºç»“æœæ˜ å°„è‡³Javaå¯¹è±¡ä¸­ã€‚è¿™ç§å°†è¾“å‡ºç»“æœæ˜ å°„åˆ°Javaå¯¹è±¡çš„è¿‡ç¨‹å°±ç±»ä¼¼äºJDBCç¼–ç¨‹ä¸­å¯¹ç»“æœçš„è§£æå¤„ç†è¿‡ç¨‹ã€‚ é€šè¿‡ä¸Šé¢å¯¹MyBatisæ¡†æ¶æ‰§è¡Œæµç¨‹çš„è®²è§£ï¼Œç›¸ä¿¡å¯¹MyBati æ¡†æ¶å·²ç»æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„äº† è§£ã€‚**</p><p>  <strong>å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œä¸Šé¢æ‰€è®²è§£çš„å†…å®¹å¯èƒ½ä¸ä¼šå®Œå…¨ç†è§£ï¼Œç°é˜¶æ®µä¹Ÿä¸è¦æ±‚å®Œå…¨ç†è§£è¿™é‡Œè®²è§£MyBatisæ¡†æ¶çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸ºäº†æ–¹ä¾¿åé¢ç¨‹åºçš„å­¦ä¹ ã€‚åœ¨å­¦ä¹ å®Œ MyBatisæ¡†æ¶åï¼Œè‡ªç„¶å°±ä¼šæ˜ç™½ä¸Šé¢æ‰€è®²è§£çš„å†…å®¹äº†ã€‚</strong></p><h1 id="3-Mybatiså…¥é—¨"><a href="#3-Mybatiså…¥é—¨" class="headerlink" title="3.    Mybatiså…¥é—¨"></a>3.    Mybatiså…¥é—¨</h1><h2 id="3-1-å®‰è£…"><a href="#3-1-å®‰è£…" class="headerlink" title="3.1        å®‰è£…"></a>3.1        å®‰è£…</h2><p>è¦ä½¿ç”¨ MyBatisï¼Œ åªéœ€å°† <a href="https://github.com/mybatis/mybatis-3/releases">mybatis-x.x.x.jar</a> æ–‡ä»¶ç½®äºç±»è·¯å¾„ï¼ˆclasspathï¼‰ä¸­å³å¯ã€‚</p><p>å¦‚æœä½¿ç”¨ Maven æ¥æ„å»ºé¡¹ç›®ï¼Œåˆ™éœ€å°†ä¸‹é¢çš„ä¾èµ–ä»£ç ç½®äº pom.xml æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>x.x.x<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>         //ç‰ˆæœ¬å·<br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="3-2-ä»-XML-ä¸­æ„å»º-SqlSessionFactory"><a href="#3-2-ä»-XML-ä¸­æ„å»º-SqlSessionFactory" class="headerlink" title="3.2    ä» XML ä¸­æ„å»º SqlSessionFactory"></a>3.2    ä» XML ä¸­æ„å»º SqlSessionFactory</h2><p>æ¯ä¸ªåŸºäº MyBatis çš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ª SqlSessionFactory çš„å®ä¾‹ä¸ºæ ¸å¿ƒçš„ã€‚SqlSessionFactory çš„å®ä¾‹å¯ä»¥é€šè¿‡ SqlSessionFactoryBuilder è·å¾—ã€‚è€Œ SqlSessionFactoryBuilder åˆ™å¯ä»¥ä» XML é…ç½®æ–‡ä»¶æˆ–ä¸€ä¸ªé¢„å…ˆé…ç½®çš„ Configuration å®ä¾‹æ¥æ„å»ºå‡º SqlSessionFactory å®ä¾‹ã€‚</p><p>ä» XML æ–‡ä»¶ä¸­æ„å»º SqlSessionFactory çš„å®ä¾‹éå¸¸ç®€å•ï¼Œå»ºè®®ä½¿ç”¨ç±»è·¯å¾„ä¸‹çš„èµ„æºæ–‡ä»¶è¿›è¡Œé…ç½®ã€‚ ä½†ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„çš„è¾“å…¥æµï¼ˆInputStreamï¼‰å®ä¾‹ï¼Œæ¯”å¦‚ç”¨æ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²æˆ– file:&#x2F;&#x2F; URL æ„é€ çš„è¾“å…¥æµã€‚MyBatis åŒ…å«ä¸€ä¸ªåå« Resources çš„å·¥å…·ç±»ï¼Œå®ƒåŒ…å«ä¸€äº›å®ç”¨æ–¹æ³•ï¼Œä½¿å¾—ä»ç±»è·¯å¾„æˆ–å…¶å®ƒä½ç½®åŠ è½½èµ„æºæ–‡ä»¶æ›´åŠ å®¹æ˜“ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;org/mybatis/example/mybatis-config.xml&quot;</span>;<br><span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(resource);<br><span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(inputStream);<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>XML é…ç½®æ–‡ä»¶ä¸­åŒ…å«äº†å¯¹ MyBatis ç³»ç»Ÿçš„æ ¸å¿ƒè®¾ç½®ï¼ŒåŒ…æ‹¬è·å–æ•°æ®åº“è¿æ¥å®ä¾‹çš„æ•°æ®æºï¼ˆDataSourceï¼‰ä»¥åŠå†³å®šäº‹åŠ¡ä½œç”¨åŸŸå’Œæ§åˆ¶æ–¹å¼çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTransactionManagerï¼‰ã€‚åé¢ä¼šå†æ¢è®¨ XML é…ç½®æ–‡ä»¶çš„è¯¦ç»†å†…å®¹ï¼Œè¿™é‡Œå…ˆç»™å‡ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta">  <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">  <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="3-3-ä¸ä½¿ç”¨-XML-æ„å»º-SqlSessionFactory"><a href="#3-3-ä¸ä½¿ç”¨-XML-æ„å»º-SqlSessionFactory" class="headerlink" title="3.3    ä¸ä½¿ç”¨ XML æ„å»º SqlSessionFactory"></a>3.3    ä¸ä½¿ç”¨ XML æ„å»º SqlSessionFactory</h2><p>å¦‚æœä½ æ›´æ„¿æ„ç›´æ¥ä» Java ä»£ç è€Œä¸æ˜¯ XML æ–‡ä»¶ä¸­åˆ›å»ºé…ç½®ï¼Œæˆ–è€…æƒ³è¦åˆ›å»ºä½ è‡ªå·±çš„é…ç½®å»ºé€ å™¨ï¼ŒMyBatis ä¹Ÿæä¾›äº†å®Œæ•´çš„é…ç½®ç±»ï¼Œæä¾›äº†æ‰€æœ‰ä¸ XML æ–‡ä»¶ç­‰ä»·çš„é…ç½®é¡¹ã€‚</p><p>å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šå¯ä»¥åœ¨ XML æ–‡ä»¶ä¸­é…ç½®çš„é€‰é¡¹ï¼Œä¸Šé¢çš„ç¤ºä¾‹ä»…ç½—åˆ—äº†æœ€å…³é”®çš„éƒ¨åˆ†ã€‚ æ³¨æ„ XML å¤´éƒ¨çš„å£°æ˜ï¼Œå®ƒç”¨æ¥éªŒè¯ XML æ–‡æ¡£çš„æ­£ç¡®æ€§ã€‚environment å…ƒç´ ä½“ä¸­åŒ…å«äº†äº‹åŠ¡ç®¡ç†å’Œè¿æ¥æ± çš„é…ç½®ã€‚mappers å…ƒç´ åˆ™åŒ…å«äº†ä¸€ç»„æ˜ å°„å™¨ï¼ˆmapperï¼‰ï¼Œè¿™äº›æ˜ å°„å™¨çš„ XML æ˜ å°„æ–‡ä»¶åŒ…å«äº† SQL ä»£ç å’Œæ˜ å°„å®šä¹‰ä¿¡æ¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> BlogDataSourceFactory.getBlogDataSource();<br><span class="hljs-type">TransactionFactory</span> <span class="hljs-variable">transactionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdbcTransactionFactory</span>();<br><span class="hljs-type">Environment</span> <span class="hljs-variable">environment</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Environment</span>(<span class="hljs-string">&quot;development&quot;</span>, transactionFactory, dataSource);<br><span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>(environment);<br>configuration.addMapper(BlogMapper.class);<br><span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(configuration);<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="3-4-ä»-SqlSessionFactory-ä¸­è·å–-SqlSession"><a href="#3-4-ä»-SqlSessionFactory-ä¸­è·å–-SqlSession" class="headerlink" title="3.4    ä» SqlSessionFactory ä¸­è·å– SqlSession"></a>3.4    ä» SqlSessionFactory ä¸­è·å– SqlSession</h2><p>æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> (<span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession()) &#123;<br>  <span class="hljs-type">Blog</span> <span class="hljs-variable">blog</span> <span class="hljs-operator">=</span> (Blog) session.selectOne(<span class="hljs-string">&quot;org.mybatis.example.BlogMapper.selectBlog&quot;</span>, <span class="hljs-number">101</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è¿™ç§æ–¹å¼èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå¯¹ä½¿ç”¨æ—§ç‰ˆæœ¬ MyBatis çš„ç”¨æˆ·æ¥è¯´ä¹Ÿæ¯”è¾ƒç†Ÿæ‚‰ã€‚ä½†ç°åœ¨æœ‰äº†ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼â€”â€”ä½¿ç”¨å’ŒæŒ‡å®šè¯­å¥çš„å‚æ•°å’Œè¿”å›å€¼ç›¸åŒ¹é…çš„æ¥å£ï¼ˆæ¯”å¦‚ BlogMapper.classï¼‰ï¼Œç°åœ¨ä½ çš„ä»£ç ä¸ä»…æ›´æ¸…æ™°ï¼Œæ›´åŠ ç±»å‹å®‰å…¨ï¼Œè¿˜ä¸ç”¨æ‹…å¿ƒå¯èƒ½å‡ºé”™çš„å­—ç¬¦ä¸²å­—é¢å€¼ä»¥åŠå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> (<span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession()) &#123;<br>  <span class="hljs-type">BlogMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(BlogMapper.class);<br>  <span class="hljs-type">Blog</span> <span class="hljs-variable">blog</span> <span class="hljs-operator">=</span> mapper.selectBlog(<span class="hljs-number">101</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="3-5-ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ"><a href="#3-5-ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3.5    ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ"></a>3.5    ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ</h2><p>ç†è§£æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„ä¸åŒä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸç±»åˆ«æ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„å¹¶å‘é—®é¢˜ã€‚</p><hr><p>æç¤º <strong>å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–æ³¨å…¥æ¡†æ¶</strong></p><p>ä¾èµ–æ³¨å…¥æ¡†æ¶å¯ä»¥åˆ›å»ºçº¿ç¨‹å®‰å…¨çš„ã€åŸºäºäº‹åŠ¡çš„ SqlSession å’Œæ˜ å°„å™¨ï¼Œå¹¶å°†å®ƒä»¬ç›´æ¥æ³¨å…¥åˆ°ä½ çš„ bean ä¸­ï¼Œå› æ­¤å¯ä»¥ç›´æ¥å¿½ç•¥å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸã€‚ å¦‚æœå¯¹å¦‚ä½•é€šè¿‡ä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨ MyBatis æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç ”ç©¶ä¸€ä¸‹ MyBatis-Spring æˆ– MyBatis-Guice ä¸¤ä¸ªå­é¡¹ç›®ã€‚</p><hr><p> SqlSessionFactoryBuilder</p><p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚ ä½ å¯ä»¥é‡ç”¨ SqlSessionFactoryBuilder æ¥åˆ›å»ºå¤šä¸ª SqlSessionFactory å®ä¾‹ï¼Œä½†æœ€å¥½è¿˜æ˜¯ä¸è¦ä¸€ç›´ä¿ç•™ç€å®ƒï¼Œä»¥ä¿è¯æ‰€æœ‰çš„ XML è§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™æ›´é‡è¦çš„äº‹æƒ…ã€‚</p><p> SqlSessionFactory</p><p>SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚ ä½¿ç”¨ SqlSessionFactory çš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œå¤šæ¬¡é‡å»º SqlSessionFactory è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåä¹ æƒ¯â€ã€‚å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚ æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°ï¼Œæœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</p><p> SqlSession</p><p>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ ç»å¯¹ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€åŸŸï¼Œç”šè‡³ä¸€ä¸ªç±»çš„å®ä¾‹å˜é‡ä¹Ÿä¸è¡Œã€‚ ä¹Ÿç»ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„æ‰˜ç®¡ä½œç”¨åŸŸä¸­ï¼Œæ¯”å¦‚ Servlet æ¡†æ¶ä¸­çš„ HttpSessionã€‚ å¦‚æœä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨ä¸€ç§ Web æ¡†æ¶ï¼Œè€ƒè™‘å°† SqlSession æ”¾åœ¨ä¸€ä¸ªå’Œ HTTP è¯·æ±‚ç›¸ä¼¼çš„ä½œç”¨åŸŸä¸­ã€‚ æ¢å¥è¯è¯´ï¼Œæ¯æ¬¡æ”¶åˆ° HTTP è¯·æ±‚ï¼Œå°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª SqlSessionï¼Œè¿”å›ä¸€ä¸ªå“åº”åï¼Œå°±å…³é—­å®ƒã€‚ è¿™ä¸ªå…³é—­æ“ä½œå¾ˆé‡è¦ï¼Œä¸ºäº†ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œå…³é—­æ“ä½œï¼Œä½ åº”è¯¥æŠŠè¿™ä¸ªå…³é—­æ“ä½œæ”¾åˆ° finally å—ä¸­ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å°±æ˜¯ä¸€ä¸ªç¡®ä¿ SqlSession å…³é—­çš„æ ‡å‡†æ¨¡å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> (<span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession()) &#123;<br>  <span class="hljs-comment">// ä½ çš„åº”ç”¨é€»è¾‘ä»£ç </span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>åœ¨æ‰€æœ‰ä»£ç ä¸­éƒ½éµå¾ªè¿™ç§ä½¿ç”¨æ¨¡å¼ï¼Œå¯ä»¥ä¿è¯æ‰€æœ‰æ•°æ®åº“èµ„æºéƒ½èƒ½è¢«æ­£ç¡®åœ°å…³é—­ã€‚</p><p> æ˜ å°„å™¨å®ä¾‹</p><p>æ˜ å°„å™¨æ˜¯ä¸€äº›ç»‘å®šæ˜ å°„è¯­å¥çš„æ¥å£ã€‚æ˜ å°„å™¨æ¥å£çš„å®ä¾‹æ˜¯ä» SqlSession ä¸­è·å¾—çš„ã€‚è™½ç„¶ä»æŠ€æœ¯å±‚é¢ä¸Šæ¥è®²ï¼Œä»»ä½•æ˜ å°„å™¨å®ä¾‹çš„æœ€å¤§ä½œç”¨åŸŸä¸è¯·æ±‚å®ƒä»¬çš„ SqlSession ç›¸åŒã€‚ä½†æ–¹æ³•ä½œç”¨åŸŸæ‰æ˜¯æ˜ å°„å™¨å®ä¾‹çš„æœ€åˆé€‚çš„ä½œç”¨åŸŸã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜ å°„å™¨å®ä¾‹åº”è¯¥åœ¨è°ƒç”¨å®ƒä»¬çš„æ–¹æ³•ä¸­è¢«è·å–ï¼Œä½¿ç”¨å®Œæ¯•ä¹‹åå³å¯ä¸¢å¼ƒã€‚ æ˜ å°„å™¨å®ä¾‹å¹¶ä¸éœ€è¦è¢«æ˜¾å¼åœ°å…³é—­ã€‚å°½ç®¡åœ¨æ•´ä¸ªè¯·æ±‚ä½œç”¨åŸŸä¿ç•™æ˜ å°„å™¨å®ä¾‹ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½ å¾ˆå¿«ä¼šå‘ç°ï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸä¸Šç®¡ç†å¤ªå¤šåƒ SqlSession çš„èµ„æºä¼šè®©ä½ å¿™ä¸è¿‡æ¥ã€‚ å› æ­¤ï¼Œæœ€å¥½å°†æ˜ å°„å™¨æ”¾åœ¨æ–¹æ³•ä½œç”¨åŸŸå†…ã€‚å°±åƒä¸‹é¢çš„ä¾‹å­ä¸€æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> (<span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession()) &#123;<br>  <span class="hljs-type">BlogMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(BlogMapper.class);<br>  <span class="hljs-comment">// ä½ çš„åº”ç”¨é€»è¾‘ä»£ç </span><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h1 id="4-XMLçš„é…ç½®"><a href="#4-XMLçš„é…ç½®" class="headerlink" title="4.    XMLçš„é…ç½®"></a>4.    XMLçš„é…ç½®</h1><h2 id="4-1-é…ç½®"><a href="#4-1-é…ç½®" class="headerlink" title="4.1    é…ç½®"></a>4.1    é…ç½®</h2><p>MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚ é…ç½®æ–‡æ¡£çš„é¡¶å±‚ç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>configurationï¼ˆé…ç½®ï¼‰ <ul><li><em><strong>*<a href="https://mybatis.org/mybatis-3/zh/configuration.html#properties">propertiesï¼ˆå±æ€§ï¼‰</a>*</strong></em></li><li><em><strong>*<a href="https://mybatis.org/mybatis-3/zh/configuration.html#settings">settingsï¼ˆè®¾ç½®ï¼‰</a>*</strong></em></li><li><em><strong>*<a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeAliases">typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</a>*</strong></em></li><li><em><strong>*<a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</a>*</strong></em></li><li><em><strong>*<a href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</a>*</strong></em></li><li><em><strong>*<a href="https://mybatis.org/mybatis-3/zh/configuration.html#plugins">pluginsï¼ˆæ’ä»¶ï¼‰</a>*</strong></em></li><li><strong><a href="https://mybatis.org/mybatis-3/zh/configuration.html#environments">environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</a></strong><ul><li>environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰<ul><li><strong>transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</strong></li><li><strong>dataSourceï¼ˆæ•°æ®æºï¼‰</strong></li></ul></li></ul></li><li><em><strong>*<a href="https://mybatis.org/mybatis-3/zh/configuration.html#databaseIdProvider">databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</a>*</strong></em></li><li><em>*<em>*<a href="https://mybatis.org/mybatis-3/zh/configuration.html#mappers">mappersï¼ˆæ˜ å°„å™¨ï¼‰</a>*</em>**<a href="https://mybatis.org/mybatis-3/zh/configuration.html#mappers">mappersï¼ˆæ˜ å°„å™¨ï¼‰</a>*</em>**</li></ul></li></ul><p>å±æ€§ï¼ˆpropertiesï¼‰è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;org/mybatis/example/config.properties&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;dev_user&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;F2Fa3!33TYyg&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>åŠ¨æ€é…ç½®çš„å±æ€§å€¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="4-2-ç±»å‹åˆ«å"><a href="#4-2-ç±»å‹åˆ«å" class="headerlink" title="4.2    ç±»å‹åˆ«å"></a>4.2    ç±»å‹åˆ«å</h2><p>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML é…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;Author&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;domain.blog.Author&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;Blog&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;domain.blog.Blog&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;Comment&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;domain.blog.Comment&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;Post&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;domain.blog.Post&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;Section&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;domain.blog.Section&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">&quot;Tag&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;domain.blog.Tag&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å¦‚æœä½ æƒ³é™å®šåŒ…å</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;domain.blog&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æ³¨å†Œå®ä½“ç±»å</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs XML">@Alias(&quot;author&quot;)<br>public class Author &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>ä½¿ç”¨åˆ«åçš„å¥½å¤„</p><p>é™ä½å†—ä½™ï¼Œé¿å…å‡ºç°åç§°è¿‡ç¨‹å¯¼è‡´çš„é”™è¯¯</p><h1 id="5-XMLæ˜ å°„å™¨"><a href="#5-XMLæ˜ å°„å™¨" class="headerlink" title="5.    XMLæ˜ å°„å™¨"></a>5.    XMLæ˜ å°„å™¨</h1><h2 id="5-1-selectï¼Œinsertï¼Œupdate-å’Œ-delete"><a href="#5-1-selectï¼Œinsertï¼Œupdate-å’Œ-delete" class="headerlink" title="5.1     selectï¼Œinsertï¼Œupdate å’Œ delete"></a>5.1     selectï¼Œinsertï¼Œupdate å’Œ delete</h2><p>MyBatis çš„çœŸæ­£å¼ºå¤§åœ¨äºå®ƒçš„è¯­å¥æ˜ å°„ï¼Œè¿™æ˜¯å®ƒçš„é­”åŠ›æ‰€åœ¨ã€‚ç”±äºå®ƒçš„å¼‚å¸¸å¼ºå¤§ï¼Œæ˜ å°„å™¨çš„ XML æ–‡ä»¶å°±æ˜¾å¾—ç›¸å¯¹ç®€å•ã€‚å¦‚æœæ‹¿å®ƒè·Ÿå…·æœ‰ç›¸åŒåŠŸèƒ½çš„ JDBC ä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œä½ ä¼šç«‹å³å‘ç°çœæ‰äº†å°†è¿‘ 95% çš„ä»£ç ã€‚MyBatis è‡´åŠ›äºå‡å°‘ä½¿ç”¨æˆæœ¬ï¼Œè®©ç”¨æˆ·èƒ½æ›´ä¸“æ³¨äº SQL ä»£ç ã€‚</p><p>SQL æ˜ å°„æ–‡ä»¶åªæœ‰å¾ˆå°‘çš„å‡ ä¸ªé¡¶çº§å…ƒç´ ï¼ˆæŒ‰ç…§åº”è¢«å®šä¹‰çš„é¡ºåºåˆ—å‡ºï¼‰ï¼š</p><ul><li><code>cache</code> â€“ è¯¥å‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚</li><li><code>cache-ref</code> â€“ å¼•ç”¨å…¶å®ƒå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚</li><li><code>resultMap</code> â€“ æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­åŠ è½½å¯¹è±¡ï¼Œæ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„å…ƒç´ ã€‚</li><li><code>parameterMap</code> â€“ è€å¼é£æ ¼çš„å‚æ•°æ˜ å°„ã€‚æ­¤å…ƒç´ å·²è¢«åºŸå¼ƒï¼Œå¹¶å¯èƒ½åœ¨å°†æ¥è¢«ç§»é™¤ï¼è¯·ä½¿ç”¨è¡Œå†…å‚æ•°æ˜ å°„ã€‚æ–‡æ¡£ä¸­ä¸ä¼šä»‹ç»æ­¤å…ƒç´ ã€‚</li><li><code>sql</code> â€“ å¯è¢«å…¶å®ƒè¯­å¥å¼•ç”¨çš„å¯é‡ç”¨è¯­å¥å—ã€‚</li><li><code>insert</code> â€“ æ˜ å°„æ’å…¥è¯­å¥ã€‚</li><li><code>update</code> â€“ æ˜ å°„æ›´æ–°è¯­å¥ã€‚</li><li><code>delete</code> â€“ æ˜ å°„åˆ é™¤è¯­å¥ã€‚</li><li><code>select</code> â€“ æ˜ å°„æŸ¥è¯¢è¯­å¥ã€‚</li></ul><p>æ„å»ºmybatisé¡¹ç›®</p><p><img src="https://img-blog.csdnimg.cn/77306a18c9c8467e9c24ed36e03871bb.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_16,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> å¯¼å…¥å¿…è¦çš„maven</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.47<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>mysqlå’Œmybatisä¸€å®šè¦å¯¼å…¥çš„</p><p>åˆ›å»ºDatabase</p><p><img src="https://img-blog.csdnimg.cn/6d3a45fc2cd54789a18c968e02bc0060.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_16,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> åˆ›å»ºinterface(ä¸è¦å¿˜äº†åˆ›å»ºå®ä½“ç±»ï¼‰</p><p><img src="https://img-blog.csdnimg.cn/5ce444668494488d9ddb43ca8a71c6d0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> åœ¨UserMapper.xmlå†™å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.dao.UserMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUser&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.pojo.User&quot;</span>&gt;</span><br>        select * from user<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUserById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.pojo.User&quot;</span>&gt;</span><br>        select * from user where id = #&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUserByNP2&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;map&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.pojo.User&quot;</span>&gt;</span><br>        select * from user where name = #&#123;username&#125; and pwd = #&#123;pwd&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.pojo.User&quot;</span>&gt;</span><br>        insert into user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.pojo.User&quot;</span>&gt;</span><br>        update user set name=#&#123;name&#125;,pwd=#&#123;pwd&#125; where id = #&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>        delete from user where id = #&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getlike&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.pojo.User&quot;</span> &gt;</span><br>    select * from user where name like #&#123;value&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡mybatis-config.xmlä»¶ä¸­åŠ å…¥èµ„æºè·¯å¾„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/dao/userMapper.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æ–‡ä»¶å…¨éƒ¨å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br>        <span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta">                <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">                <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/dao/userMapper.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>é…ç½®JDBCè¿æ¥æ± </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">driver<span class="hljs-operator">=</span>com.mysql.jdbc.Driver<br>url<span class="hljs-operator">=</span>jdbc:mysql:<span class="hljs-operator">/</span><span class="hljs-operator">/</span>localhost:<span class="hljs-number">3306</span><span class="hljs-operator">/</span>æ•°æ®åº“å?useSSL<span class="hljs-operator">=</span><span class="hljs-literal">true</span><span class="hljs-operator">&amp;</span>useUnicode<span class="hljs-operator">=</span><span class="hljs-literal">true</span><span class="hljs-operator">&amp;</span>characterEncoding<span class="hljs-operator">=</span>utf8<br>username<span class="hljs-operator">=</span>ç”¨æˆ·å<br>password<span class="hljs-operator">=</span>å¯†ç <br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å¼€å§‹æµ‹è¯•</p><p>å¯¼å…¥å®ä½“ç±»ç®€åŒ–æµ‹è¯•ä»£ç ï¼Œæ— éœ€å¤šæ¬¡æ„é€ sqlSessionFactory</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisUtils</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;<br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;mybatis-config.xml&quot;</span>;<br>            <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(resource);<br>            sqlSessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//è·å–SqlSessionè¿æ¥</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title function_">getSession</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> sqlSessionFactory.openSession();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">selectUser</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> MybatisUtils.getSession();<br>       <span class="hljs-comment">//æ–¹æ³•ä¸€:</span><br>       <span class="hljs-comment">//List&lt;User&gt; users = session.selectList(&quot;com.kuang.mapper.UserMapper.selectUser&quot;);</span><br>       <span class="hljs-comment">//æ–¹æ³•äºŒ:</span><br>       <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);<br>       List&lt;User&gt; users = mapper.selectUser();<br><br>       <span class="hljs-keyword">for</span> (User user: users)&#123;<br>           System.out.println(user);<br>       &#125;<br>       session.close();<br>   &#125;<br>   <br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tsetSelectUserById</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> MybatisUtils.getSession();  <span class="hljs-comment">//è·å–SqlSessionè¿æ¥</span><br>       <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);<br>       <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> mapper.selectUserById(<span class="hljs-number">1</span>);<br>       System.out.println(user);<br>       session.close();<br>   &#125;<br><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAddUser</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> MybatisUtils.getSession();<br>       <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);<br>       <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">9</span>,<span class="hljs-string">&quot;å¤§äº”&quot;</span>,<span class="hljs-string">&quot;zxcvbn&quot;</span>);<br>       <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> mapper.addUser(user);<br>       System.out.println(i);<br>       session.commit(); <span class="hljs-comment">//æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“</span><br>       session.close();<br>   &#125;<br><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdateUser</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> MybatisUtils.getSession();<br>       <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);<br>       <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> mapper.selectUserById(<span class="hljs-number">1</span>);<br>       user.setPwd(<span class="hljs-string">&quot;asdfgh&quot;</span>);<br>       <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> mapper.updateUser(user);<br>       System.out.println(i);<br>       session.commit(); <span class="hljs-comment">//æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“</span><br>       session.close();<br>   &#125;<br><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDeleteUser</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> MybatisUtils.getSession();<br>       <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);<br>       <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> mapper.deleteUser(<span class="hljs-number">5</span>);<br>       System.out.println(i);<br>       session.commit(); <span class="hljs-comment">//æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“</span><br>       session.close();<br>   &#125;<br><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getLike</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> MybatisUtils.getSession();<br>       <span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);<br>      List&lt;User&gt; userlist= mapper.getlike(<span class="hljs-string">&quot;%æ%&quot;</span>);<br><br>       <span class="hljs-keyword">for</span> (User user: userlist)&#123;<br>           System.out.println(user);<br>       &#125;<br>       session.close();<br>   &#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æµ‹è¯•ä¸€ä¸‹</p><p>User{id&#x3D;1, name&#x3D;â€™å“ˆç™»â€™, pwd&#x3D;â€™abcdefâ€™}<br> User{id&#x3D;2, name&#x3D;â€™åº“é‡Œâ€™, pwd&#x3D;â€™987654â€™}<br> User{id&#x3D;3, name&#x3D;â€™ä¿ç•™â€™, pwd&#x3D;â€™asdddâ€™}<br> User{id&#x3D;4, name&#x3D;â€™ä¹”æ²»â€™, pwd&#x3D;â€™zxcvbnâ€™}<br> User{id&#x3D;5, name&#x3D;â€™è©¹å§†æ–¯â€™, pwd&#x3D;â€™zsdsdzdâ€™}</p><p>Process finished with exit code 0</p><p>User{id&#x3D;1, name&#x3D;â€™å“ˆç™»â€™, pwd&#x3D;â€™abcdefâ€™}</p><p>Process finished with exit code 0</p><p><img src="https://img-blog.csdnimg.cn/c43d5854238d43f183b643eeae638514.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_16,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="5-2-ä¸»è¦å…ƒç´ "><a href="#5-2-ä¸»è¦å…ƒç´ " class="headerlink" title="5.2    ä¸»è¦å…ƒç´ "></a>5.2    ä¸»è¦å…ƒç´ </h2><p><img src="https://img-blog.csdnimg.cn/f11f393c5961490088db3c3ef9ddc496.jpg?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="-1"><a href="#-1" class="headerlink" title=""></a></h2><h2 id="5-3-ç¼“å­˜-Cache"><a href="#5-3-ç¼“å­˜-Cache" class="headerlink" title="5.3    ç¼“å­˜ [ Cache ]"></a>5.3    ç¼“å­˜ [ Cache ]</h2><p><strong>ç®€ä»‹</strong></p><p>1ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ [ Cache ]ï¼Ÿ</p><ul><li>å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚</li><li>å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Š(å…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶)æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</li></ul><p>2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ</p><ul><li>å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚</li></ul><p>3ã€ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜ï¼Ÿ</p><ul><li>ç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚</li></ul><p><strong>mybatisç¼“å­˜</strong></p><p>MyBatisçš„ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ã€‚åœ¨æ“ä½œæ•°æ®åº“æ—¶éœ€è¦æ„é€ Sqlsessionã€‚<br> åœ¨å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªHashMapç”¨äºå­˜å‚¨ç¼“å­˜æ•°æ®ã€‚ä¸åŒçš„ SqlSession ä¹‹é—´çš„ç¼“å­˜æ•°æ®åŒºåŸŸ<br> (HashMap)æ˜¯äº’ç›¸ä¸å½±å“çš„ã€‚<br>      ä¸€çº§ç¼“å­˜çš„ä½œç”¨åŸŸæ˜¯SqlSessionèŒƒå›´çš„ï¼Œå½“åœ¨åŒä¸€ä¸ª qlSession ä¸­æ‰§è¡Œä¸¤æ¬¡ç›¸åŒçš„sqlè¯­<br> å¥æ—¶ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œæ¯•ä¼šå°†æ•°æ®åº“ä¸­æŸ¥è¯¢çš„æ•°æ®å†™åˆ°ç¼“å­˜ (å†…å­˜)ï¼Œç¬¬äºŒæ¬¡æŸ¥è¯¢æ—¶ä¼šä»ç¼“å­˜ä¸­<br> è·å–æ•°æ®ï¼Œä¸å†å»åº•å±‚æ•°æ®åº“æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœSqlSessionæ‰§è¡Œ<br> äº†DMLæ“ä½œ(insertã€updateå’Œdelete)ï¼Œå¹¶æäº¤åˆ°æ•°æ®åº“ MyBatis åˆ™ä¼šæ¸…ç©º SqlSession ä¸­çš„<br> ä¸€çº§ç¼“å­˜ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†ä¿è¯ç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯æœ€æ–°çš„ä¿¡æ¯ï¼Œé¿å…å‡ºç°è„è¯»ç°è±¡ã€‚<br>      å½“ä¸€ä¸ªSqlSession ç»“æŸåè¯¥SqlSession ä¸­çš„ä¸€çº§ç¼“å­˜ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚Mybatisé»˜è®¤å¼€å¯ä¸€çº§ç¼“å­˜ï¼Œä¸éœ€è¦è¿›è¡Œä»»ä½•é…ç½®ã€‚</p><p>æ³¨æ„ï¼š<strong>Mybatisçš„ç¼“å­˜æœºåˆ¶çš„åŸºäºidè¿›è¡Œçš„ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´Mybatisä½¿ç”¨HashMapç¼“å­˜æ•°æ®æ—¶ï¼Œæ˜¯ä½¿ç”¨å¯¹è±¡idä½œä¸ºkeyçš„ï¼Œè€Œå¯¹è±¡ä½œä¸ºvalueä¿å­˜çš„ã€‚</strong></p><h2 id="5-4-ä¸€çº§ç¼“å­˜"><a href="#5-4-ä¸€çº§ç¼“å­˜" class="headerlink" title="5.4    ä¸€çº§ç¼“å­˜"></a>5.4    <strong>ä¸€çº§ç¼“å­˜</strong></h2><p><strong>ç¤ºä¾‹ mybatisCache</strong></p><p><strong>mybatisCache&#x2F;src&#x2F;java&#x2F;Mapper</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br>    User <span class="hljs-title function_">selectUseById</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>;<br><br>    List&lt;User&gt; <span class="hljs-title function_">selectAllUser</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUserById</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><strong>mybatisCache&#x2F;src&#x2F;java&#x2F;Mapper</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;Mapper.UserMapper&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ ¹æ®idæŸ¥è¯¢user--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUseById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;domain.User&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>        SELECT * FROM tb_cache WHERE id = #&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æŸ¥è¯¢æ‰€æœ‰user--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAllUser&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;domain.User&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>        SELECT *FROM tb_cache<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ ¹æ®idåˆ é™¤User--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteUserById&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>        DELETE FROM tb_cache WHERE id = #&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><strong>mybatisCache&#x2F;src&#x2F;java&#x2F;domain</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br>    <span class="hljs-keyword">private</span> String NAME;<br>    <span class="hljs-keyword">private</span> String age;<br>    <span class="hljs-keyword">private</span> String sex;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><strong>mybatisCache&#x2F;test&#x2F;java&#x2F;Testcache</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Testcache</span> &#123;<br>  <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> MybatisUtils.getSqlSession();<br>        UserMapper um=sqlSession.getMapper(UserMapper.class);<br>        <span class="hljs-comment">//æ‰§è¡Œdeleteæ“ä½œ</span><br>        User user=um.selectUseById(<span class="hljs-number">1</span>);<br>        System.out.println(user);<br>      <span class="hljs-comment">//commitæäº¤</span><br>        User user1=um.selectUseById(<span class="hljs-number">1</span>);<br>        System.out.println(user1);<br>        sqlSession.close();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><img src="https://img-blog.csdnimg.cn/3135a86a2e7a4632ba7b9fe08dc64572.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>       <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> MybatisUtils.getSqlSession();<br>       UserMapper um=sqlSession.getMapper(UserMapper.class);<br><br>       User user=um.selectUseById(<span class="hljs-number">1</span>);<br>       System.out.println(user);<br>           <span class="hljs-comment">//æ‰§è¡Œdeleteæ“ä½œ</span><br>       um.deleteUserById(<span class="hljs-number">3</span>);<br>       <span class="hljs-comment">//commitæäº¤</span><br>       sqlSession.commit();<br>       <span class="hljs-comment">//å†æ¬¡æ‰§è¡ŒæŸ¥è¯¢ï¼ŒDMLæ“ä½œä¼šæ¸…ç©ºsqlSessionç¼“å­˜,æ‰€ä»¥ä¼šå†æ¬¡æ‰§è¡Œseletè¯­å¥</span><br><br>       User user2=um.selectUseById(<span class="hljs-number">1</span>);<br>       System.out.println(user2);<br>       sqlSession.close();<br>   &#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><img src="https://img-blog.csdnimg.cn/72e94b13a64d47ca894aead88957e397.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> MybatisUtils.getSqlSession();<br>        UserMapper um=sqlSession.getMapper(UserMapper.class);<br>        User user=um.selectUseById(<span class="hljs-number">1</span>);<br>        System.out.println(user);<br>        <span class="hljs-comment">//å…³é—­ä¸€çº§ç¼“å­˜</span><br>        sqlSession.close();<br>        <span class="hljs-comment">//å†æ¬¡è·å¾—UserMappingå¯¹è±¡</span><br>        sqlSession=MybatisUtils.getSqlSession();<br>        UserMapper UM=sqlSession.getMapper(UserMapper.class);<br>        User user1=UM.selectUseById(<span class="hljs-number">2</span>);<br>        System.out.println(user1);<br>        sqlSession.close();<br>    &#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><img src="https://img-blog.csdnimg.cn/716cfd755629429eb5f0cb589c1ae2df.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="5-5-äºŒçº§ç¼“å­˜"><a href="#5-5-äºŒçº§ç¼“å­˜" class="headerlink" title="5.5   äºŒçº§ç¼“å­˜"></a>5.5   äºŒ<strong>çº§ç¼“å­˜</strong></h2><p>cacheå…ƒç´ ç”¨æ¥å¼€å¯å½“å‰mapperçš„namespaceä¸‹çš„äºŒçº§ç¼“å­˜ã€‚è¯¥å…ƒç´ çš„å±æ€§è®¾ç½®å¦‚ä¸‹ï¼š</p><p>flushIntervalã€‚åˆ·æ–°é—´éš”ã€‚å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„çš„æ­£æ•´æ•°ï¼Œè€Œä¸”å®ƒä»¬ä»£è¡¨ä¸€ä¸ªåˆç†çš„æ¯«ç§’å¼çš„æ—¶é—´æ®µã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°&gt;sizeã€‚ç¼“å­˜æ•°ç›®ã€‚å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„æ­£æ•´æ•°ï¼Œè¦è®°ä½ä½ ç¼“å­˜çš„å¯¹è±¡æ•°ç›®å’Œä½ è¿è¡Œç¯çš„å¯ç”¨å†…å­˜èµ„æºæ•°ç›®ã€‚é»˜è®¤å€¼æ˜¯1024ã€‚</p><p> readOnlyã€‚åªè¯»ã€‚å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºtrueæˆ–falseã€‚åªè¯»çš„ç¼“å­˜ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ï¼Œå› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™æä¾›äº†å¾ˆé‡è¦çš„æ€§èƒ½ä¼˜åŠ¿ã€‚å¯è¯»çš„ç¼“å­˜ä¼šè¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´(é€šè¿‡åºåˆ—åŒ–)ã€‚è¿™ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®‰å…¨ï¼Œå› æ­¤é»˜è®¤ falseã€‚</p><p> evictionã€‚æ”¶å›ç­–ç•¥ï¼Œé»˜è®¤ä¸ºLRUã€‚æœ‰å¦‚ä¸‹å‡ ç§:<br> ã€‚LRUã€‚æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ç­–ç•¥ï¼Œç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚ FIFOã€‚å…ˆè¿›å…ˆå‡ºç­–ç•¥ï¼ŒæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚</p><p> SOFTã€‚è½¯å¼•ç”¨ç­–ç•¥ï¼Œç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</p><p> WEAKã€‚å¼±å¼•ç”¨ç­–ç•¥ï¼Œæ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡cacheå…ƒç´ ç”¨æ¥å¼€å¯å½“å‰mapperçš„namespaceä¸‹çš„äºŒçº§ç¼“å­˜ã€‚è¯¥å…ƒç´ çš„å±æ€§è®¾ç½®å¦‚ä¸‹&gt;flushIntervalã€‚åˆ·æ–°é—´éš”ã€‚å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„çš„æ­£æ•´æ•°ï¼Œè€Œä¸”å®ƒä»¬ä»£è¡¨ä¸€ä¸ªåˆç†çš„æ¯«ç§’å¼çš„æ—¶é—´æ®µã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°</p><p>sizeã€‚ç¼“å­˜æ•°ç›®ã€‚å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„æ­£æ•´æ•°ï¼Œè¦è®°ä½ä½ ç¼“å­˜çš„å¯¹è±¡æ•°ç›®å’Œä½ è¿è¡Œç¯çš„å¯ç”¨å†…å­˜èµ„æºæ•°ç›®ã€‚é»˜è®¤å€¼æ˜¯1024ã€‚</p><p> readOnlyã€‚åªè¯»ã€‚å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºtrueæˆ–falseã€‚åªè¯»çš„ç¼“å­˜ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ï¼Œå› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™æä¾›äº†å¾ˆé‡è¦çš„æ€§èƒ½ä¼˜åŠ¿ã€‚å¯è¯»çš„ç¼“å­˜ä¼šè¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´(é€šè¿‡åºåˆ—åŒ–)ã€‚è¿™ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®‰å…¨ï¼Œå› æ­¤é»˜è®¤ falseã€‚</p><p>evictionã€‚æ”¶å›ç­–ç•¥ï¼Œé»˜è®¤ä¸ºLRUã€‚æœ‰å¦‚ä¸‹å‡ ç§:<br> ã€‚LRUã€‚æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ç­–ç•¥ï¼Œç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚ FIFOã€‚å…ˆè¿›å…ˆå‡ºç­–ç•¥ï¼ŒæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚<br> SOFTã€‚è½¯å¼•ç”¨ç­–ç•¥ï¼Œç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚<br> WEAKã€‚å¼±å¼•ç”¨ç­–ç•¥ï¼Œæ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</p><p><strong>mybatisCache&#x2F;src&#x2F;mybatis-config.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--å¼€å¯äºŒçº§ç¼“å­˜--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;cacheEnabled&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><strong>mybatisCache&#x2F;src&#x2F;Mapper&#x2F;UserMapper.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-comment">&lt;!--å¼€å¯å½“å‰mapperçš„namespaceä¸‹çš„äºŒçº§ç¼“å­˜--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">eviction</span>=<span class="hljs-string">&quot;LRU&quot;</span> <span class="hljs-attr">flushInterval</span>=<span class="hljs-string">&quot;60000&quot;</span></span><br><span class="hljs-tag">          <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;512&quot;</span> <span class="hljs-attr">readOnly</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//è·å–sqlseesionå¯¹è±¡</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> MybatisUtils.getSqlSession();<br>    <span class="hljs-comment">//æŸ¥è¯¢idä¸º1çš„Userå¯¹è±¡</span><br>    UserMapper um=sqlSession.getMapper(UserMapper.class);<br>    <span class="hljs-comment">//æŸ¥è¯¢idä¸º1çš„å¯¹è±¡</span><br>    User user=um.selectUseById(<span class="hljs-number">1</span>);<br>    System.out.println(user);<br>    <span class="hljs-comment">//æ‰§è¡Œdeleteæ“ä½œ</span><br>    um.deleteUserById(<span class="hljs-number">2</span>);<br>    <span class="hljs-comment">//commitæäº¤</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//å†æ¬¡æŸ¥è¯¢idä¸º1çš„å¯¹è±¡,DMLæ“ä½œä¼šæ¸…ç©ºsqlsessionç¼“å­˜,æ‰€ä»¥ä¼šå†æ¬¡æ‰§è¡Œselect</span><br>    User user1=um.selectUseById(<span class="hljs-number">1</span>);<br>    System.out.println(user1);<br>    <span class="hljs-comment">//å…³é—­Sqlsessionå¯¹è±¡</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><img src="https://img-blog.csdnimg.cn/9ef50887ebb84e40848f1b217e756869.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å‚è€ƒ<a href="https://mybatis.org/mybatis-3/zh/index.html">mybatis â€“ MyBatis 3 | ç®€ä»‹</a></p>]]></content>
    
    
    <categories>
      
      <category>æŒä¹…å±‚æ¡†æ¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mybatis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Springçš„è‡ªåŠ¨è£…é…</title>
    <link href="/Hexo/2021/12/18/Spring%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/"/>
    <url>/Hexo/2021/12/18/Spring%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/</url>
    
    <content type="html"><![CDATA[<p><strong>ç›®å½•</strong></p><p><a href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…</a></p><p><a href="#1.%E6%8C%89%E5%90%8D%E7%A7%B0%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%EF%BC%88autowire=%22byName%22%EF%BC%89">1.æŒ‰åç§°è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€byNameâ€ï¼‰</a></p><p>[2. ä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€noâ€ï¼‰](#2. ä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€noâ€ï¼‰)</p><p>[3 .æŒ‰ç±»å‹è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€byTypeâ€ï¼‰](#3 .æŒ‰ç±»å‹è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€byTypeâ€ï¼‰)</p><p>[4. æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€constructorâ€ï¼‰](#4. æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€constructorâ€ï¼‰)</p><p><a href="#%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E8%BF%9B%E8%A1%8CBean%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">äºŒã€ä½¿ç”¨æ³¨è§£è¿›è¡ŒBeanè‡ªåŠ¨è£…é…</a></p><p><a href="#@Resource">@Resource</a></p><p><a href="#@Autowired">@Autowired</a></p><p><a href="#@Qualifier">@Qualifier</a></p><p><a href="#5.%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">ä¸‰.è‡ªåŠ¨è£…é…çš„ä¼˜ç¼ºç‚¹</a></p><hr><h1 id="ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"></a>ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…</h1><p>è‡ªåŠ¨è£…é…å°±æ˜¯æŒ‡ Spring å®¹å™¨åœ¨ä¸ä½¿ç”¨ <constructor-arg> å’Œ<property> æ ‡ç­¾çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è‡ªåŠ¨è£…é…ï¼ˆautowireï¼‰ç›¸äº’åä½œçš„ Bean ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œå°†ä¸€ä¸ª Bean æ³¨å…¥å…¶ä»– Bean çš„ Property ä¸­ã€‚</p><p>è‡ªåŠ¨è£…é…éœ€è¦é…ç½® <bean> å…ƒç´ çš„ autowire å±æ€§ã€‚</p><p>å…·ä½“çš„å±æ€§å¦‚ä¸‹è¡¨ï¼š</p><table><thead><tr><th align="center">åç§°</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">no</td><td align="center">é»˜è®¤å€¼ï¼Œè¡¨ç¤ºä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼ŒBean ä¾èµ–å¿…é¡»é€šè¿‡ ref å…ƒç´ å®šä¹‰ã€‚</td></tr><tr><td align="center">byName</td><td align="center">æ ¹æ® Property çš„ name è‡ªåŠ¨è£…é…ï¼Œå¦‚æœä¸€ä¸ª Bean çš„ name å’Œå¦ä¸€ä¸ª Bean ä¸­çš„ Property çš„ name ç›¸åŒï¼Œåˆ™è‡ªåŠ¨è£…é…è¿™ä¸ª Bean åˆ° Property ä¸­ã€‚</td></tr><tr><td align="center">byType</td><td align="center">æ ¹æ® Property çš„æ•°æ®ç±»å‹ï¼ˆTypeï¼‰è‡ªåŠ¨è£…é…ï¼Œå¦‚æœä¸€ä¸ª Bean çš„æ•°æ®ç±»å‹å…¼å®¹å¦ä¸€ä¸ª Bean ä¸­ Property çš„æ•°æ®ç±»å‹ï¼Œåˆ™è‡ªåŠ¨è£…é…ã€‚</td></tr><tr><td align="center">constructor</td><td align="center">ç±»ä¼¼äº byTypeï¼Œæ ¹æ®æ„é€ æ–¹æ³•å‚æ•°çš„æ•°æ®ç±»å‹ï¼Œè¿›è¡Œ byType æ¨¡å¼çš„è‡ªåŠ¨è£…é…ã€‚</td></tr><tr><td align="center">autodetectï¼ˆ3.0ç‰ˆæœ¬ä¸æ”¯æŒï¼‰</td><td align="center">å¦‚æœ Bean ä¸­æœ‰é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼Œåˆ™ç”¨ constructor æ¨¡å¼ï¼Œå¦åˆ™ç”¨ byType æ¨¡å¼ã€‚</td></tr></tbody></table><blockquote><p>è‡ªåŠ¨è£…é…è¯´æ˜(æ­¤æ®µè¯´æ˜è½¬è‡ª<a href="https://mp.weixin.qq.com/s/kvp_3Uva1J2Q5ZVqCUzEsA">ç‹‚ç¥è¯´Spring04ï¼šè‡ªåŠ¨è£…é…</a>)</p></blockquote><ul><li>è‡ªåŠ¨è£…é…æ˜¯ä½¿ç”¨springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹æ³•</li><li>springä¼šåœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ä¸ºæŸä¸ªbeanå¯»æ‰¾å…¶ä¾èµ–çš„beanã€‚</li></ul><p>Springä¸­beanæœ‰ä¸‰ç§è£…é…æœºåˆ¶ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol><li>åœ¨xmlä¸­æ˜¾å¼é…ç½®ï¼›</li><li>åœ¨javaä¸­æ˜¾å¼é…ç½®(æ³¨è§£)ï¼›</li><li>éšå¼çš„beanå‘ç°æœºåˆ¶å’Œè‡ªåŠ¨è£…é…ã€‚</li></ol><p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦è®²ç¬¬ä¸‰ç§ï¼šè‡ªåŠ¨åŒ–çš„è£…é…beanã€‚</p><p>Springçš„è‡ªåŠ¨è£…é…éœ€è¦ä»ä¸¤ä¸ªè§’åº¦æ¥å®ç°ï¼Œæˆ–è€…è¯´æ˜¯ä¸¤ä¸ªæ“ä½œï¼š</p><ol><li>ç»„ä»¶æ‰«æ(component scanning)ï¼šspringä¼šè‡ªåŠ¨å‘ç°åº”ç”¨ä¸Šä¸‹æ–‡ä¸­æ‰€åˆ›å»ºçš„beanï¼›</li><li>è‡ªåŠ¨è£…é…(autowiring)ï¼šspringè‡ªåŠ¨æ»¡è¶³beanä¹‹é—´çš„ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„IoC&#x2F;DIï¼›</li></ol><p>ç»„ä»¶æ‰«æå’Œè‡ªåŠ¨è£…é…ç»„åˆå‘æŒ¥å·¨å¤§å¨åŠ›ï¼Œä½¿å¾—æ˜¾ç¤ºçš„é…ç½®é™ä½åˆ°æœ€å°‘</p><p>è¿™é‡Œè®²å¾—æ¯”è¾ƒå…¨é¢</p><p>ä¸‹é¢ä¸¾ä¾‹å­ï¼š</p><p>åˆ›å»ºä¸€ä¸ªPersonç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> Man man;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;åœ¨Personçš„æ„é€ å‡½æ•°å†…&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(Man man)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;åœ¨Personçš„æœ‰å‚æ„é€ å‡½æ•°å†…&quot;</span>);<br>        <span class="hljs-built_in">this</span>.man = man;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">man</span><span class="hljs-params">()</span> &#123;<br>        man.show();<br>    &#125;<br>    <span class="hljs-keyword">public</span> Man <span class="hljs-title function_">getMan</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> man;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMan</span><span class="hljs-params">(Man man)</span> &#123;<br>        <span class="hljs-built_in">this</span>.man = man;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>åˆ›å»ºä¸€ä¸ªManç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Man</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Man</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;åœ¨mançš„æ„é€ å‡½æ•°å†…&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Man</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;åœ¨mançš„æœ‰å‚æ„é€ å‡½æ•°å†…&quot;</span>);<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;åç§°ï¼š&quot;</span> + name + <span class="hljs-string">&quot;\nå¹´é¾„ï¼š&quot;</span> + age);<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="1-æŒ‰åç§°è‡ªåŠ¨è£…é…ï¼ˆautowire-x3D-â€byNameâ€ï¼‰"><a href="#1-æŒ‰åç§°è‡ªåŠ¨è£…é…ï¼ˆautowire-x3D-â€byNameâ€ï¼‰" class="headerlink" title="1.æŒ‰åç§°è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€byNameâ€ï¼‰"></a>1.æŒ‰åç§°è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€byNameâ€ï¼‰</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;man&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.pojo.Man&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;pojo&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;12&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;int&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;person&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.pojo.Person&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byName&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>Testæµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;Beans2.xml&quot;</span>);<br>      <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> (Person) context.getBean(<span class="hljs-string">&quot;person&quot;</span>);<br>      person.man();<br>  &#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>ç»“æœå¦‚ä¸‹</p><p>åœ¨mançš„æœ‰å‚æ„é€ å‡½æ•°å†…<br> åœ¨Personçš„æ„é€ å‡½æ•°å†…<br> åç§°ï¼špojo<br> å¹´é¾„ï¼š12</p><p><strong>å°ç»“ï¼š</strong></p><p>å½“ä¸€ä¸ªbeanèŠ‚ç‚¹å¸¦æœ‰ autowire byNameçš„å±æ€§æ—¶ã€‚</p><ol><li>å°†æŸ¥æ‰¾å…¶ç±»ä¸­æ‰€æœ‰çš„setæ–¹æ³•åï¼Œä¾‹å¦‚setCatï¼Œè·å¾—å°†setå»æ‰å¹¶ä¸”é¦–å­—æ¯å°å†™çš„å­—ç¬¦ä¸²ï¼Œå³catã€‚</li><li>å»springå®¹å™¨ä¸­å¯»æ‰¾æ˜¯å¦æœ‰æ­¤å­—ç¬¦ä¸²åç§°idçš„å¯¹è±¡ã€‚</li><li>å¦‚æœæœ‰ï¼Œå°±å–å‡ºæ³¨å…¥ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</li></ol><h2 id="2-ä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼ˆautowire-x3D-â€noâ€ï¼‰"><a href="#2-ä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼ˆautowire-x3D-â€noâ€ï¼‰" class="headerlink" title="2. ä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€noâ€ï¼‰"></a>2. ä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€noâ€ï¼‰</h2><p>æ›´æ”¹xmlçš„é…ç½®å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;man&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.pojo.Man&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;pojo&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;12&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;int&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;person&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.pojo.Person&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;no&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;man&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.pojo.Man&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å¾—åˆ°ç»“æœ</p><p>åœ¨mançš„æœ‰å‚æ„é€ å‡½æ•°å†…<br> åœ¨Personçš„æœ‰å‚æ„é€ å‡½æ•°å†…<br> åç§°ï¼špojo<br> å¹´é¾„ï¼š12</p><h2 id="3-æŒ‰ç±»å‹è‡ªåŠ¨è£…é…ï¼ˆautowire-x3D-â€byTypeâ€ï¼‰"><a href="#3-æŒ‰ç±»å‹è‡ªåŠ¨è£…é…ï¼ˆautowire-x3D-â€byTypeâ€ï¼‰" class="headerlink" title="3 .æŒ‰ç±»å‹è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€byTypeâ€ï¼‰"></a>3 .æŒ‰ç±»å‹è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€byTypeâ€ï¼‰</h2><p>æ›´æ”¹xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;man1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.pojo.Man&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;pojo&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;12&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;int&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;person&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.pojo.Person&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;byType&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è¿è¡Œç»“æœï¼š</p><p>åœ¨mançš„æœ‰å‚æ„é€ å‡½æ•°å†…<br> åœ¨Personçš„æ„é€ å‡½æ•°å†…<br> åç§°ï¼šbianchengbang<br> å¹´é¾„ï¼š12</p><p>å¦‚æœæ‚¨æœ‰ç›¸åŒç±»å‹çš„å¤šä¸ª Beanï¼Œåˆ™æ³¨å…¥å¤±è´¥ï¼Œå¹¶ä¸”å¼•å‘å¼‚å¸¸</p><h2 id="4-æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…ï¼ˆautowire-x3D-â€constructorâ€ï¼‰"><a href="#4-æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…ï¼ˆautowire-x3D-â€constructorâ€ï¼‰" class="headerlink" title="4. æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€constructorâ€ï¼‰"></a>4. æ„é€ å‡½æ•°è‡ªåŠ¨è£…é…ï¼ˆautowire&#x3D;â€constructorâ€ï¼‰</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;man&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.pojo.Man&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;pojo&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;12&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;int&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;person&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.pojoPerson&quot;</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">&quot;constructor&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è¿è¡Œç»“æœï¼š</p><p>åœ¨mançš„æœ‰å‚æ„é€ å‡½æ•°å†…<br> åœ¨Personçš„æœ‰å‚æ„é€ å‡½æ•°å†…<br> åç§°ï¼šbianchengbang<br> å¹´é¾„ï¼š12</p><h1 id="äºŒã€ä½¿ç”¨æ³¨è§£è¿›è¡ŒBeanè‡ªåŠ¨è£…é…"><a href="#äºŒã€ä½¿ç”¨æ³¨è§£è¿›è¡ŒBeanè‡ªåŠ¨è£…é…" class="headerlink" title="äºŒã€ä½¿ç”¨æ³¨è§£è¿›è¡ŒBeanè‡ªåŠ¨è£…é…"></a>äºŒã€ä½¿ç”¨æ³¨è§£è¿›è¡ŒBeanè‡ªåŠ¨è£…é…</h1><blockquote><p>ä½¿ç”¨æ³¨è§£</p></blockquote><p>jdk1.5å¼€å§‹æ”¯æŒæ³¨è§£ï¼Œspring2.5å¼€å§‹å…¨é¢æ”¯æŒæ³¨è§£ã€‚</p><p>å‡†å¤‡å·¥ä½œï¼šåˆ©ç”¨æ³¨è§£çš„æ–¹å¼æ³¨å…¥å±æ€§ã€‚</p><p>Spring ä¸­å¸¸ç”¨çš„æ³¨è§£å¦‚ä¸‹ã€‚ä¸äº†è§£çš„å¯ä»¥å…ˆçœ‹çœ‹è¿™ä¸ª</p><p><a href="https://blog.csdn.net/weixin_56462645/article/details/122214370?spm=1001.2014.3001.5501">Spring-ä½¿ç”¨æ³¨è§£å¼€å‘-ä¸‡å…ƒè¯¾ç¨‹çš„è¯¾ä¸Šç¬”è®°_man_oneçš„åšå®¢-CSDNåšå®¢</a></p><p>åˆ›å»ºä¸¤ä¸ªåŠ¨ç‰©ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shout</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯ä¿®(&gt;^Ï‰^&lt;)å–µ&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shout</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯ä¿®~(@^_^@)~ç‹—&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h1 id=""><a href="#" class="headerlink" title=""></a></h1><p>åˆ›å»ºä¸»äººPeopleç±»ï¼ˆé‡è¦ï¼‰ï¼š</p><h2 id="Resource"><a href="#Resource" class="headerlink" title="@Resource"></a>@Resource</h2><ul><li>@Resourceå¦‚æœ‰æŒ‡å®šçš„nameå±æ€§ï¼Œå…ˆæŒ‰è¯¥å±æ€§è¿›è¡ŒbyNameæ–¹å¼æŸ¥æ‰¾è£…é…ï¼›</li><li>å…¶æ¬¡å†è¿›è¡Œé»˜è®¤çš„byNameæ–¹å¼è¿›è¡Œè£…é…ï¼›</li><li>å¦‚æœä»¥ä¸Šéƒ½ä¸æˆåŠŸï¼Œåˆ™æŒ‰byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚</li><li>éƒ½ä¸æˆåŠŸï¼Œåˆ™æŠ¥å¼‚å¸¸ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> javax.annotation.Resource;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span> &#123;<br><br>    <span class="hljs-meta">@Resource(name = &quot;cat2&quot;)</span><br>    <span class="hljs-keyword">private</span> Cat cat;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> Dog dog;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-keyword">public</span> Cat <span class="hljs-title function_">getCat</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> cat;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Dog <span class="hljs-title function_">getDog</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> dog;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;People&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;cat=&quot;</span> + cat +<br>                <span class="hljs-string">&quot;, dog=&quot;</span> + dog +<br>                <span class="hljs-string">&quot;, name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>é…ç½®xml</p><p><strong>Spring é»˜è®¤ä¸ä½¿ç”¨æ³¨è§£è£…é… Beanï¼Œå› æ­¤éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  <a href="context:annotation-config/">context:annotation-config/</a>ï¼Œå¯ç”¨æ³¨è§£ã€‚</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">        http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">        http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--å¼€å¯æ³¨è§£çš„æ”¯æŒ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;cat2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dog132&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.kuang.pojo.Dog&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;people&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.kuang.pojo.People&quot;</span>/&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>ä¸è¦å¿˜äº†é…ç½®mavenåæ ‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;beans.xml&quot;</span>);<br><br>    <span class="hljs-type">People</span> <span class="hljs-variable">people</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">&quot;people&quot;</span>, People.class);<br>    people.getDog().shout();<br>    people.getCat().shout();<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœ</p><p><img src="https://img-blog.csdnimg.cn/95e26cc25863415483cafdafba9e977c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_11,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h2><ul><li>@Autowiredæ˜¯æŒ‰ç±»å‹è‡ªåŠ¨è½¬é…çš„ï¼Œä¸æ”¯æŒidåŒ¹é…ã€‚</li><li>éœ€è¦å¯¼å…¥ spring-aopçš„åŒ…ï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>   <span class="hljs-meta">@Autowired</span><br>   <span class="hljs-keyword">private</span> Cat cat;<br>   <span class="hljs-meta">@Autowired</span><br>   <span class="hljs-keyword">private</span> Dog dog;<br>   <span class="hljs-keyword">private</span> String str;<br><br>   <span class="hljs-keyword">public</span> Cat <span class="hljs-title function_">getCat</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-keyword">return</span> cat;<br>  &#125;<br>   <span class="hljs-keyword">public</span> Dog <span class="hljs-title function_">getDog</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-keyword">return</span> dog;<br>  &#125;<br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getStr</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-keyword">return</span> str;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>@Autowired(required&#x3D;false)  è¯´æ˜ï¼šfalseï¼Œå¯¹è±¡å¯ä»¥ä¸ºnullï¼›trueï¼Œå¯¹è±¡å¿…é¡»å­˜å¯¹è±¡ï¼Œä¸èƒ½ä¸ºnullã€‚</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm">//å¦‚æœå…è®¸å¯¹è±¡ä¸º<span class="hljs-keyword">null</span>ï¼Œè®¾ç½®required <span class="hljs-operator">=</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>é»˜è®¤ä¸º<span class="hljs-keyword">true</span><br><span class="hljs-title">@Autowired</span>(required <span class="hljs-operator">=</span> <span class="hljs-keyword">false</span>)<br><span class="hljs-keyword">private</span> Cat cat<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>1ã€å°†Userç±»ä¸­çš„setæ–¹æ³•å»æ‰ï¼Œä½¿ç”¨@Autowiredæ³¨è§£</p><h2 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a>@Qualifier</h2><ul><li>@Autowiredæ˜¯æ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…çš„ï¼ŒåŠ ä¸Š@Qualifieråˆ™å¯ä»¥æ ¹æ®byNameçš„æ–¹å¼è‡ªåŠ¨è£…é…</li><li>@Qualifierä¸èƒ½å•ç‹¬ä½¿ç”¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-meta">@Qualifier(value = &quot;cat2&quot;)</span><br><span class="hljs-keyword">private</span> Cat cat;<br><span class="hljs-meta">@Autowired</span><br><span class="hljs-meta">@Qualifier(value = &quot;dog2&quot;)</span><br><span class="hljs-keyword">private</span> Dog dog;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æµ‹è¯•è¾“å‡ºæˆåŠŸï¼</p><h1 id="ä¸‰-è‡ªåŠ¨è£…é…çš„ä¼˜ç¼ºç‚¹"><a href="#ä¸‰-è‡ªåŠ¨è£…é…çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¸‰.è‡ªåŠ¨è£…é…çš„ä¼˜ç¼ºç‚¹"></a>ä¸‰.è‡ªåŠ¨è£…é…çš„ä¼˜ç¼ºç‚¹</h1><p>ä¼˜ç‚¹</p><ul><li>è‡ªåŠ¨è£…é…åªéœ€è¦è¾ƒå°‘çš„ä»£ç å°±å¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ã€‚</li></ul><p>ç¼ºç‚¹</p><ul><li>ä¸èƒ½è‡ªåŠ¨è£…é…ç®€å•æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ intã€booleanã€String ç­‰ã€‚</li><li>ç›¸æ¯”è¾ƒæ˜¾ç¤ºè£…é…ï¼Œè‡ªåŠ¨è£…é…ä¸å—ç¨‹åºå‘˜æ§åˆ¶ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Springæ¡†æ¶â¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Springä½¿ç”¨æ³¨è§£å¼€å‘</title>
    <link href="/Hexo/2021/12/12/Spring%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/"/>
    <url>/Hexo/2021/12/12/Spring%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€æ³¨è§£å¼€å‘çš„å«ä¹‰"><a href="#ä¸€ã€æ³¨è§£å¼€å‘çš„å«ä¹‰" class="headerlink" title="ä¸€ã€æ³¨è§£å¼€å‘çš„å«ä¹‰"></a>ä¸€ã€æ³¨è§£å¼€å‘çš„å«ä¹‰</h1><h2 id="1-æ³¨è§£é©±åŠ¨çš„æ„ä¹‰"><a href="#1-æ³¨è§£é©±åŠ¨çš„æ„ä¹‰" class="headerlink" title="1. æ³¨è§£é©±åŠ¨çš„æ„ä¹‰"></a>1. æ³¨è§£é©±åŠ¨çš„æ„ä¹‰</h2><h3 id="1-1ä»€ä¹ˆæ˜¯æ³¨è§£é©±åŠ¨"><a href="#1-1ä»€ä¹ˆæ˜¯æ³¨è§£é©±åŠ¨" class="headerlink" title="1.1ä»€ä¹ˆæ˜¯æ³¨è§£é©±åŠ¨"></a>1.1ä»€ä¹ˆæ˜¯æ³¨è§£é©±åŠ¨</h3><p>æ³¨è§£å¯åŠ¨æ—¶ä½¿ç”¨æ³¨è§£çš„å½¢å¼æ›¿ä»£xmlé…ç½®ï¼Œå°†ç¹æ‚çš„springé…ç½®æ–‡ä»¶ä»å·¥ç¨‹ä¸­å½»åº•æ¶ˆé™¤æ‰ï¼Œç®€åŒ–ä¹¦å†™</p><p><img src="https://img-blog.csdnimg.cn/7e8f0bb2445a43c5850d207cd73c71b3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>ç±»ä¼¼äºï¼Œæˆ‘ä»¬Beanä¸­é…ç½®çš„xmlæ¢æˆjavaä»£ç å’Œ@æ³¨è§£</p><h3 id="1-2æ³¨è§£å¼€å‘çš„ç¼ºç‚¹"><a href="#1-2æ³¨è§£å¼€å‘çš„ç¼ºç‚¹" class="headerlink" title="1.2æ³¨è§£å¼€å‘çš„ç¼ºç‚¹"></a>1.2æ³¨è§£å¼€å‘çš„ç¼ºç‚¹</h3><p>æœ‰æ—¶å€™xmlçš„é…ç½®æ¯”javaä»£ç æ›´åŠ æ¸…æ™°æ˜äº†ï¼Œæ‰€ä»¥åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå§å¼€å‘å˜å¤æ‚ã€‚</p><h2 id="2-å¸¸ç”¨çš„æ³¨è§£"><a href="#2-å¸¸ç”¨çš„æ³¨è§£" class="headerlink" title="2.å¸¸ç”¨çš„æ³¨è§£"></a>2.å¸¸ç”¨çš„æ³¨è§£</h2><h2 id="2-1å¯åŠ¨æ‰«ææ³¨è§£åŠŸèƒ½"><a href="#2-1å¯åŠ¨æ‰«ææ³¨è§£åŠŸèƒ½" class="headerlink" title="2.1å¯åŠ¨æ‰«ææ³¨è§£åŠŸèƒ½"></a>2.1å¯åŠ¨æ‰«ææ³¨è§£åŠŸèƒ½</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;packageName&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è¯´æ˜ï¼š</p><p> - åœ¨è¿›è¡ŒåŒ…æ‰€æ‰«ææ—¶ï¼Œä¼šå¯¹é…ç½®çš„åŒ…åŠå…¶å­åŒ…ä¸­æ‰€æœ‰æ–‡ä»¶è¿›è¡Œæ‰«æ</p><p> - æ‰«æè¿‡ç¨‹æ˜¯ä»¥æ–‡ä»¶å¤¹é€’å½’è¿­ä»£çš„å½¢å¼è¿›è¡Œçš„</p><p> - æ‰«æè¿‡ç¨‹ä»…è¯»å–åˆæ³•çš„javaæ–‡ä»¶</p><p> - æ‰«ææ—¶ä»…è¯»å–springå¯è¯†åˆ«çš„æ³¨è§£</p><p> - æ‰«æç»“æŸåä¼šå°†å¯è¯†åˆ«çš„æœ‰æ•ˆæ³¨è§£è½¬åŒ–ä¸ºspringå¯¹åº”çš„èµ„æºåŠ å…¥IoCå®¹å™¨</p><p>- æ³¨æ„ï¼š</p><p> - æ— è®ºæ˜¯æ³¨è§£æ ¼å¼è¿˜æ˜¯XMLé…ç½®æ ¼å¼ï¼Œæœ€ç»ˆéƒ½æ˜¯å°†èµ„æºåŠ è½½åˆ°IoCå®¹å™¨ä¸­ï¼Œå·®åˆ«ä»…ä»…æ˜¯æ•°æ®è¯»å–æ–¹å¼ä¸åŒ</p><p> - ä»åŠ è½½æ•ˆç‡ä¸Šæ¥è¯´æ³¨è§£ä¼˜äºXMLé…ç½®æ–‡ä»¶</p><h2 id="2-2-beançš„å®šä¹‰"><a href="#2-2-beançš„å®šä¹‰" class="headerlink" title="2.2 beançš„å®šä¹‰"></a>2.2 beançš„å®šä¹‰</h2><p>åç§°ï¼š@Component   @Controller   @Service   @Repository</p><p> ç±»å‹ï¼š<strong>ç±»æ³¨è§£</strong></p><p>ä½ç½®ï¼šç±»å®šä¹‰ä¸Šæ–¹</p><p>ä½œç”¨ï¼šè®¾ç½®è¯¥ç±»ä¸ºspringç®¡ç†çš„bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span>&#123;&#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è¯´æ˜ï¼š</p><p> @Controllerã€@Service ã€@Repositoryæ˜¯@Componentçš„è¡ç”Ÿæ³¨è§£ï¼ŒåŠŸèƒ½åŒ@Component</p><p>ç›¸å…³å±æ€§<br> valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beançš„è®¿é—®id</p><h2 id="2-3-beançš„ä½œç”¨åŸŸ"><a href="#2-3-beançš„ä½œç”¨åŸŸ" class="headerlink" title="2.3 beançš„ä½œç”¨åŸŸ"></a>2.3 beançš„ä½œç”¨åŸŸ</h2><p>åç§°ï¼š@Scope</p><p>ç±»å‹ï¼š<strong>ç±»æ³¨è§£</strong></p><p>ä½ç½®ï¼šç±»å®šä¹‰ä¸Šæ–¹</p><p>- ä½œç”¨ï¼šè®¾ç½®è¯¥ç±»ä½œä¸ºbeanå¯¹åº”çš„scopeå±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Scope</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span>&#123;&#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- ç›¸å…³å±æ€§</p><p> - valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beançš„ä½œç”¨åŸŸï¼Œé»˜è®¤ä¸ºsingleton</p><h2 id="2-4-beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#2-4-beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.4 beançš„ç”Ÿå‘½å‘¨æœŸ"></a>2.4 beançš„ç”Ÿå‘½å‘¨æœŸ</h2><p>- åç§°ï¼š@PostConstructã€@PreDestroy</p><p>- ç±»å‹ï¼š<strong>æ–¹æ³•æ³¨è§£</strong></p><p>- ä½ç½®ï¼šæ–¹æ³•å®šä¹‰ä¸Šæ–¹</p><p>- ä½œç”¨ï¼šè®¾ç½®è¯¥ç±»ä½œä¸ºbeanå¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@PostConstruct</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123; System.out.println(<span class="hljs-string">&quot;init...&quot;</span>); &#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="2-5-åŠ è½½ç¬¬ä¸‰æ–¹èµ„æº"><a href="#2-5-åŠ è½½ç¬¬ä¸‰æ–¹èµ„æº" class="headerlink" title="2.5 åŠ è½½ç¬¬ä¸‰æ–¹èµ„æº"></a>2.5 åŠ è½½ç¬¬ä¸‰æ–¹èµ„æº</h2><p>åç§°ï¼š@Bean</p><p>ç±»å‹ï¼š<strong>æ–¹æ³•æ³¨è§£</strong></p><p>ä½ç½®ï¼šæ–¹æ³•å®šä¹‰ä¸Šæ–¹</p><p>ä½œç”¨ï¼šè®¾ç½®è¯¥æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºspringç®¡ç†çš„bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Bean(&quot;dataSource&quot;)</span><br><span class="hljs-keyword">public</span> DruidDataSource <span class="hljs-title function_">createDataSource</span><span class="hljs-params">()</span> &#123;    <span class="hljs-keyword">return</span> â€¦â€¦;    &#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- è¯´æ˜ï¼š</p><p> - å› ä¸ºç¬¬ä¸‰æ–¹beanæ— æ³•åœ¨å…¶æºç ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œä½¿ç”¨@Beanè§£å†³ç¬¬ä¸‰æ–¹beançš„å¼•å…¥é—®é¢˜</p><p> - è¯¥æ³¨è§£ç”¨äºæ›¿ä»£XMLé…ç½®ä¸­çš„é™æ€å·¥å‚ä¸å®ä¾‹å·¥å‚åˆ›å»ºbeanï¼Œä¸åŒºåˆ†æ–¹æ³•æ˜¯å¦ä¸ºé™æ€æˆ–éé™æ€</p><p> - @Beanæ‰€åœ¨çš„ç±»å¿…é¡»è¢«springæ‰«æåŠ è½½ï¼Œå¦åˆ™è¯¥æ³¨è§£æ— æ³•ç”Ÿæ•ˆ</p><p>- ç›¸å…³å±æ€§<br>  - valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰beançš„è®¿é—®id</p><h2 id="2-6-beançš„éå¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥"><a href="#2-6-beançš„éå¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥" class="headerlink" title="2.6 beançš„éå¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥"></a>2.6 beançš„éå¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥</h2><p>- åç§°ï¼š@Value</p><p>- ç±»å‹ï¼š<strong>å±æ€§æ³¨è§£ã€æ–¹æ³•æ³¨è§£</strong></p><p>- ä½ç½®ï¼šå±æ€§å®šä¹‰ä¸Šæ–¹ï¼Œæ–¹æ³•å®šä¹‰ä¸Šæ–¹</p><p>- ä½œç”¨ï¼šè®¾ç½®å¯¹åº”å±æ€§çš„å€¼æˆ–å¯¹æ–¹æ³•è¿›è¡Œä¼ å‚</p><p>- èŒƒä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span><br><span class="hljs-keyword">private</span> String username;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- è¯´æ˜ï¼š</p><p> - valueå€¼ä»…æ”¯æŒéå¼•ç”¨ç±»å‹æ•°æ®ï¼Œèµ‹å€¼æ—¶å¯¹æ–¹æ³•çš„æ‰€æœ‰å‚æ•°å…¨éƒ¨èµ‹å€¼</p><p> - valueå€¼æ”¯æŒè¯»å–propertiesæ–‡ä»¶ä¸­çš„å±æ€§å€¼ï¼Œé€šè¿‡ç±»å±æ€§å°†propertiesä¸­æ•°æ®ä¼ å…¥ç±»ä¸­</p><p> - valueå€¼æ”¯æŒSpEL</p><p> - @valueæ³¨è§£å¦‚æœæ·»åŠ åœ¨å±æ€§ä¸Šæ–¹ï¼Œå¯ä»¥çœç•¥setæ–¹æ³•ï¼ˆsetæ–¹æ³•çš„ç›®çš„æ˜¯ä¸ºå±æ€§èµ‹å€¼ï¼‰</p><p>- ç›¸å…³å±æ€§<br>  - valueï¼ˆé»˜è®¤ï¼‰ï¼šå®šä¹‰å¯¹åº”çš„å±æ€§å€¼æˆ–å‚æ•°å€¼</p><h2 id="2-7-beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥"><a href="#2-7-beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥" class="headerlink" title="2.7 beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥"></a>2.7 beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥</h2><p>- åç§°ï¼š@Autowiredã€@Qualifier</p><p>- ç±»å‹ï¼š<strong>å±æ€§æ³¨è§£ã€æ–¹æ³•æ³¨è§£</strong></p><p>- ä½ç½®ï¼šå±æ€§å®šä¹‰ä¸Šæ–¹ï¼Œæ–¹æ³•å®šä¹‰ä¸Šæ–¹</p><p>- ä½œç”¨ï¼šè®¾ç½®å¯¹åº”å±æ€§çš„å¯¹è±¡æˆ–å¯¹æ–¹æ³•è¿›è¡Œå¼•ç”¨ç±»å‹ä¼ å‚</p><p>- èŒƒä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Autowired(required = false)</span><br><span class="hljs-meta">@Qualifier(&quot;userDao&quot;)</span><br><span class="hljs-keyword">private</span> UserDao userDao;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- è¯´æ˜ï¼š</p><p> - @Autowiredé»˜è®¤æŒ‰ç±»å‹è£…é…ï¼ŒæŒ‡å®š@Qualifieråå¯ä»¥æŒ‡å®šè‡ªåŠ¨è£…é…çš„beançš„id</p><p>- ç›¸å…³å±æ€§<br>  - requiredï¼šå®šä¹‰è¯¥å±æ€§æ˜¯å¦å…è®¸ä¸ºnull</p><h2 id="2-8-beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥"><a href="#2-8-beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥" class="headerlink" title="2.8 beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥"></a>2.8 beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥</h2><p>- åç§°ï¼š@Primary</p><p>- ç±»å‹ï¼š<strong>ç±»æ³¨è§£</strong></p><p>- ä½ç½®ï¼šç±»å®šä¹‰ä¸Šæ–¹</p><p>- ä½œç”¨ï¼šè®¾ç½®ç±»å¯¹åº”çš„beanæŒ‰ç±»å‹è£…é…æ—¶ä¼˜å…ˆè£…é…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Primary</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span>&#123;&#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- è¯´æ˜ï¼š</p><p> - @Autowiredé»˜è®¤æŒ‰ç±»å‹è£…é…ï¼Œå½“å‡ºç°ç›¸åŒç±»å‹çš„beanï¼Œä½¿ç”¨@Primaryæé«˜æŒ‰ç±»å‹è‡ªåŠ¨è£…é…çš„ä¼˜å…ˆçº§ï¼Œå¤šä¸ª@Primaryä¼šå¯¼è‡´ä¼˜å…ˆçº§è®¾ç½®æ— æ•ˆ</p><h2 id="2-9-beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥"><a href="#2-9-beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥" class="headerlink" title="2.9 beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥"></a>2.9 beançš„å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥</h2><p>- åç§°ï¼š@Injectã€@Namedã€@Resource</p><p>- è¯´æ˜ï¼š<br>  - @Injectä¸@Namedæ˜¯JSR330è§„èŒƒä¸­çš„æ³¨è§£ï¼ŒåŠŸèƒ½ä¸@Autowiredå’Œ@Qualifierå®Œå…¨ç›¸åŒï¼Œé€‚ç”¨äºä¸åŒæ¶æ„åœºæ™¯<br>  - @Resourceæ˜¯JSR250è§„èŒƒä¸­çš„æ³¨è§£ï¼Œå¯ä»¥ç®€åŒ–ä¹¦å†™æ ¼å¼</p><p>- @Resourceç›¸å…³å±æ€§</p><p> - nameï¼šè®¾ç½®æ³¨å…¥çš„beançš„id</p><p> - typeï¼šè®¾ç½®æ³¨å…¥çš„beançš„ç±»å‹ï¼Œæ¥æ”¶çš„å‚æ•°ä¸ºClassç±»å‹</p><h2 id="2-10-åŠ è½½propertiesæ–‡ä»¶"><a href="#2-10-åŠ è½½propertiesæ–‡ä»¶" class="headerlink" title="2.10 åŠ è½½propertiesæ–‡ä»¶"></a>2.10 åŠ è½½propertiesæ–‡ä»¶</h2><p>- åç§°ï¼š@PropertySource</p><p>- ç±»å‹ï¼š<strong>ç±»æ³¨è§£</strong></p><p>- ä½ç½®ï¼šç±»å®šä¹‰ä¸Šæ–¹</p><p>- ä½œç”¨ï¼šåŠ è½½propertiesæ–‡ä»¶ä¸­çš„å±æ€§å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@PropertySource(value = &quot;classpath:filename.properties&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span> &#123;<br>    <span class="hljs-meta">@Value(&quot;$&#123;propertiesAttributeName&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String attributeName;<br>&#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- è¯´æ˜ï¼š</p><p> - ä¸æ”¯æŒ*é€šé…æ ¼å¼ï¼Œä¸€æ—¦åŠ è½½ï¼Œæ‰€æœ‰springæ§åˆ¶çš„beanä¸­å‡å¯ä½¿ç”¨å¯¹åº”å±æ€§å€¼</p><p>- ç›¸å…³å±æ€§</p><p> - valueï¼ˆé»˜è®¤ï¼‰ï¼šè®¾ç½®åŠ è½½çš„propertiesæ–‡ä»¶å</p><p> - ignoreResourceNotFoundï¼šå¦‚æœèµ„æºæœªæ‰¾åˆ°ï¼Œæ˜¯å¦å¿½ç•¥ï¼Œé»˜è®¤ä¸ºfalse</p><h2 id="2-11-çº¯æ³¨è§£æ ¼å¼"><a href="#2-11-çº¯æ³¨è§£æ ¼å¼" class="headerlink" title="2.11 çº¯æ³¨è§£æ ¼å¼"></a>2.11 çº¯æ³¨è§£æ ¼å¼</h2><p>- åç§°ï¼š@Configurationã€@ComponentScan</p><p>- ç±»å‹ï¼š<strong>ç±»æ³¨è§£</strong></p><p>- ä½ç½®ï¼šç±»å®šä¹‰ä¸Šæ–¹</p><p>- ä½œç”¨ï¼šè®¾ç½®å½“å‰ç±»ä¸ºspringæ ¸å¿ƒé…ç½®åŠ è½½ç±»</p><p>- èŒƒä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ComponentScan(&quot;scanPackageName&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringConfigClassName</span>&#123;<br>&#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- è¯´æ˜ï¼š</p><p> - æ ¸å¿ƒé…åˆç±»ç”¨äºæ›¿æ¢springæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œæ­¤ç±»å¯ä»¥è®¾ç½®ç©ºçš„ï¼Œä¸è®¾ç½®å˜é‡ä¸å±æ€§</p><p> - beanæ‰«æå·¥ä½œä½¿ç”¨æ³¨è§£@ComponentScanæ›¿ä»£</p><p><strong>AnnotationConfigApplicationContext</strong></p><p>- åŠ è½½çº¯æ³¨è§£æ ¼å¼ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨AnnotationConfigApplicationContext</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-type">AnnotationConfigApplicationContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="2-12-ç¬¬ä¸‰æ–¹beané…ç½®ä¸ç®¡ç†"><a href="#2-12-ç¬¬ä¸‰æ–¹beané…ç½®ä¸ç®¡ç†" class="headerlink" title="2.12 ç¬¬ä¸‰æ–¹beané…ç½®ä¸ç®¡ç†"></a>2.12 ç¬¬ä¸‰æ–¹beané…ç½®ä¸ç®¡ç†</h2><p>- åç§°ï¼š@Import</p><p>- ç±»å‹ï¼š<strong>ç±»æ³¨è§£</strong></p><p>- ä½ç½®ï¼šç±»å®šä¹‰ä¸Šæ–¹</p><p>- ä½œç”¨ï¼šå¯¼å…¥ç¬¬ä¸‰æ–¹beanä½œä¸ºspringæ§åˆ¶çš„èµ„æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@Import(OtherClassName.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span> &#123;<br>&#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- è¯´æ˜ï¼š</p><p> - @Importæ³¨è§£åœ¨åŒä¸€ä¸ªç±»ä¸Šï¼Œä»…å…è®¸æ·»åŠ ä¸€æ¬¡ï¼Œå¦‚æœéœ€è¦å¯¼å…¥å¤šä¸ªï¼Œä½¿ç”¨æ•°ç»„çš„å½¢å¼è¿›è¡Œè®¾å®š</p><p> - åœ¨è¢«å¯¼å…¥çš„ç±»ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨@Importå¯¼å…¥å…¶ä»–èµ„æºï¼ˆäº†è§£ï¼‰</p><p> - @Beanæ‰€åœ¨çš„ç±»å¯ä»¥ä½¿ç”¨å¯¼å…¥çš„å½¢å¼è¿›å…¥springå®¹å™¨ï¼Œæ— éœ€å£°æ˜ä¸ºbean</p><h1 id="3ã€beanåŠ è½½æ§åˆ¶"><a href="#3ã€beanåŠ è½½æ§åˆ¶" class="headerlink" title="3ã€beanåŠ è½½æ§åˆ¶"></a>3ã€beanåŠ è½½æ§åˆ¶</h1><h2 id="3-1ä¾èµ–åŠ è½½"><a href="#3-1ä¾èµ–åŠ è½½" class="headerlink" title="3.1ä¾èµ–åŠ è½½"></a>3.1ä¾èµ–åŠ è½½</h2><h3 id="3-1-1-DependsOn"><a href="#3-1-1-DependsOn" class="headerlink" title="3.1.1@DependsOn"></a>3.1.1@DependsOn</h3><p>- åç§°ï¼š@DependsOn</p><p>- ç±»å‹ï¼šç±»æ³¨è§£ã€æ–¹æ³•æ³¨è§£</p><p>- ä½ç½®ï¼šbeanå®šä¹‰çš„ä½ç½®ï¼ˆç±»ä¸Šæˆ–æ–¹æ³•ä¸Šï¼‰</p><p>- ä½œç”¨ï¼šæ§åˆ¶beançš„åŠ è½½é¡ºåºï¼Œä½¿å…¶åœ¨æŒ‡å®šbeanåŠ è½½å®Œæ¯•åå†åŠ è½½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@DependsOn(&quot;beanId&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span> &#123;<br>&#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- è¯´æ˜ï¼š</p><p> - é…ç½®åœ¨æ–¹æ³•ä¸Šï¼Œä½¿@DependsOnæŒ‡å®šçš„beanä¼˜å…ˆäº@Beané…ç½®çš„beanè¿›è¡ŒåŠ è½½</p><p> - é…ç½®åœ¨ç±»ä¸Šï¼Œä½¿@DependsOnæŒ‡å®šçš„beanä¼˜å…ˆäºå½“å‰ç±»ä¸­æ‰€æœ‰@Beané…ç½®çš„beanè¿›è¡ŒåŠ è½½</p><p> - é…ç½®åœ¨ç±»ä¸Šï¼Œä½¿@DependsOnæŒ‡å®šçš„beanä¼˜å…ˆäº@Componentç­‰é…ç½®çš„beanè¿›è¡ŒåŠ è½½</p><p>- ç›¸å…³å±æ€§<br>  - valueï¼ˆé»˜è®¤ï¼‰ï¼šè®¾ç½®å½“å‰beanæ‰€ä¾èµ–çš„beançš„id</p><h3 id="3-1-2-Order"><a href="#3-1-2-Order" class="headerlink" title="3.1.2@Order"></a>3.1.2@Order</h3><p>- åç§°ï¼š@Order</p><p>- ç±»å‹ï¼š<strong>é…ç½®ç±»æ³¨è§£</strong></p><p>- ä½ç½®ï¼šé…ç½®ç±»å®šä¹‰çš„ä½ç½®ï¼ˆç±»ä¸Šï¼‰</p><p>- ä½œç”¨ï¼šæ§åˆ¶é…ç½®ç±»çš„åŠ è½½é¡ºåº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Order(1)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringConfigClassName</span> &#123;<br>&#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h3 id="3-1-3-Lazy"><a href="#3-1-3-Lazy" class="headerlink" title="3.1.3 @Lazy"></a>3.1.3 @Lazy</h3><p>- åç§°ï¼š@Lazy</p><p>- ç±»å‹ï¼š<strong>ç±»æ³¨è§£ã€æ–¹æ³•æ³¨è§£</strong></p><p>- ä½ç½®ï¼šbeanå®šä¹‰çš„ä½ç½®ï¼ˆç±»ä¸Šæˆ–æ–¹æ³•ä¸Šï¼‰</p><p>- ä½œç”¨ï¼šæ§åˆ¶beançš„åŠ è½½æ—¶æœºï¼Œä½¿å…¶å»¶è¿ŸåŠ è½½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">```java<br><span class="hljs-meta">@Lazy</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span> &#123;<br>&#125;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="3-2-ä¾èµ–åŠ è½½åº”ç”¨åœºæ™¯"><a href="#3-2-ä¾èµ–åŠ è½½åº”ç”¨åœºæ™¯" class="headerlink" title="3.2 ä¾èµ–åŠ è½½åº”ç”¨åœºæ™¯"></a>3.2 ä¾èµ–åŠ è½½åº”ç”¨åœºæ™¯</h2><p>@DependsOn</p><p>- å¾®ä¿¡è®¢é˜…å·ï¼Œå‘å¸ƒæ¶ˆæ¯å’Œè®¢é˜…æ¶ˆæ¯çš„beançš„åŠ è½½é¡ºåºæ§åˆ¶</p><p>- åŒ11æ´»åŠ¨æœŸé—´ï¼Œé›¶ç‚¹å‰æ˜¯ç»“ç®—ç­–ç•¥Aï¼Œé›¶ç‚¹åæ˜¯ç»“ç®—ç­–ç•¥Bï¼Œç­–ç•¥Bæ“ä½œçš„æ•°æ®ä¸ºä¿ƒé”€æ•°æ®ã€‚ç­–ç•¥BåŠ è½½é¡ºåºä¸ä¿ƒé”€æ•°æ®çš„åŠ è½½é¡ºåº</p><p>@Lazy</p><p>- ç¨‹åºç¾éš¾å‡ºç°åå¯¹åº”çš„åº”æ€¥é¢„æ¡ˆå¤„ç†æ˜¯å¯åŠ¨å®¹å™¨æ—¶åŠ è½½æ—¶æœº</p><p>@Order</p><p>- å¤šä¸ªç§ç±»çš„é…ç½®å‡ºç°åï¼Œä¼˜å…ˆåŠ è½½ç³»ç»Ÿçº§çš„ï¼Œç„¶ååŠ è½½ä¸šåŠ¡çº§çš„ï¼Œé¿å…ç»†ç²’åº¦çš„åŠ è½½æ§åˆ¶</p>]]></content>
    
    
    <categories>
      
      <category>Springæ¡†æ¶â¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Springå…¥é—¨</title>
    <link href="/Hexo/2021/12/01/Spring%E5%85%A5%E9%97%A8/"/>
    <url>/Hexo/2021/12/01/Spring%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<hr><hr><h1 id="ä¸€ã€Springç®€ä»‹"><a href="#ä¸€ã€Springç®€ä»‹" class="headerlink" title="ä¸€ã€Springç®€ä»‹"></a>ä¸€ã€Springç®€ä»‹</h1><p>Spring ä½¿åˆ›å»º Java ä¼ä¸šåº”ç”¨ç¨‹åºå˜å¾—å®¹æ˜“ã€‚å®ƒæä¾›äº†åœ¨ä¼ä¸šç¯å¢ƒä¸­ä½¿ç”¨ Java è¯­è¨€æ‰€éœ€çš„ä¸€åˆ‡ï¼Œå¹¶æ”¯æŒ Groovy å’Œ Kotlin ä½œä¸º JVM ä¸Šçš„æ›¿ä»£è¯­è¨€ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚çµæ´»åœ°åˆ›å»ºå¤šç§ä½“ç³»ç»“æ„ã€‚ä» Spring Framework 5.0 å¼€å§‹ï¼ŒSpring éœ€è¦ JDK 8(Java SE 8)ï¼Œå¹¶ä¸”å·²ç»ä¸º JDK 9 æä¾›äº†ç°æˆçš„æ”¯æŒã€‚å¦‚å›¾1-1</p><p><img src="https://img-blog.csdnimg.cn/e868a69868ac42f196a078aeebe2acaf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å›¾1-1 Springå‘å±•å²</p><p>Spring æ”¯æŒå¹¿æ³›çš„åº”ç”¨åœºæ™¯ã€‚åœ¨å¤§å‹ä¼ä¸šä¸­ï¼Œåº”ç”¨ç¨‹åºé€šå¸¸å­˜åœ¨å¾ˆé•¿æ—¶é—´ï¼Œå¹¶ä¸”å¿…é¡»åœ¨å‡çº§å‘¨æœŸä¸å—å¼€å‘äººå‘˜æ§åˆ¶çš„ JDK å’Œåº”ç”¨ç¨‹åºæœåŠ¡å™¨ä¸Šè¿è¡Œã€‚å…¶ä»–æœåŠ¡å™¨åˆ™å¯ä»¥ä½œä¸ºå•ä¸ª jar è¿è¡Œï¼Œå¹¶ä¸”æœåŠ¡å™¨å¯ä»¥åµŒå…¥äº‘ç¯å¢ƒä¸­ã€‚è¿˜æœ‰ä¸€äº›å¯èƒ½æ˜¯ä¸éœ€è¦æœåŠ¡å™¨çš„ç‹¬ç«‹åº”ç”¨ç¨‹åº(ä¾‹å¦‚æ‰¹å¤„ç†æˆ–é›†æˆå·¥ä½œè´Ÿè½½)ã€‚</p><p>Spring æ˜¯å¼€æºçš„ã€‚å®ƒæ‹¥æœ‰ä¸€ä¸ªåºå¤§è€Œæ´»è·ƒçš„ç¤¾åŒºï¼Œå¯ä»¥æ ¹æ®å„ç§å®é™…ç”¨ä¾‹æä¾›æŒç»­çš„åé¦ˆã€‚è¿™å¸®åŠ© Spring åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æˆåŠŸåœ° Developing äº†ã€‚</p><p>GitHubç¤¾åŒºï¼š<a href="https://github.com/spring-projects">https://github.com/spring-projects</a></p><p>Spring ä¸­æ–‡ æ–‡æ¡£ï¼š<a href="https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/overview.html#overview-spring">Spring Framework ä¸­æ–‡æ–‡æ¡£ - Spring æ¡†æ¶æ¦‚è¿° | Docs4devSpring æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„è®¾è®¡å±‚é¢æ¡†æ¶ï¼Œå®ƒè§£å†³çš„æ˜¯ä¸šåŠ¡é€»è¾‘å±‚å’Œå…¶ä»–å„å±‚çš„æ¾è€¦åˆé—®é¢˜ï¼Œå› æ­¤å®ƒå°†é¢å‘æ¥å£çš„ç¼–ç¨‹æ€æƒ³è´¯ç©¿æ•´ä¸ªç³»ç»Ÿåº”ç”¨ã€‚Springæ˜¯äº2003 å¹´å…´èµ·çš„ä¸€ä¸ªè½»é‡çº§çš„Java å¼€å‘æ¡†æ¶ï¼Œç”±Rod Johnsonåˆ›å»ºã€‚ç®€å•æ¥è¯´ï¼ŒSpringæ˜¯ä¸€ä¸ªåˆ†å±‚çš„JavaSE&#x2F;EE full-stack(ä¸€ç«™å¼) è½»é‡çº§å¼€æºæ¡†æ¶ã€‚<img src="https://www.docs4dev.com/static/images/favicon.ico" alt=" ">https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/overview.html#overview-spring</a></p><p>å®˜ç½‘ : <a href="http://spring.io/">Spring | Home</a></p><p>å®˜æ–¹ä¸‹è½½åœ°å€ : <a href="https://repo.spring.io/libs-release-local/org/springframework/spring/">JFrog</a></p><p>Springä¼˜åŠ¿<br> | â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€“ |<br> | æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘    |  |<br> | æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶   |  |<br> | æ–¹ä¾¿ç¨‹åºçš„æµ‹è¯•      | |<br> | AOPç¼–ç¨‹çš„æ”¯æŒ       |  |<br> | å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒ     |  |<br> | é™ä½JavaEE APIçš„ä½¿ç”¨éš¾åº¦ |  |<br> | Javaæºç æ˜¯ç»å…¸å­¦ä¹ èŒƒä¾‹  | |</p><p><img src="https://img-blog.csdnimg.cn/bac2f1a00b524196babb901a56d6e15f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_15,color_FFFFFF,t_70,g_se,x_16" alt="img"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>â€‹                 å›¾ 1-2 Springçš„ä¼˜åŠ¿ä½œç”¨</p><h1 id="äºŒã€Springä½“ç³»ç»“æ„"><a href="#äºŒã€Springä½“ç³»ç»“æ„" class="headerlink" title="äºŒã€Springä½“ç³»ç»“æ„"></a>äºŒã€Springä½“ç³»ç»“æ„</h1><p><img src="https://img-blog.csdnimg.cn/d374d9b21fc54ca9afbb36333e7b8e20.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å›¾ 2-1 Springä½“ç³»ç»“æ„</p><h1 id="ä¸‰ã€Core-contaainer-æ ¸å¿ƒå®¹å™¨"><a href="#ä¸‰ã€Core-contaainer-æ ¸å¿ƒå®¹å™¨" class="headerlink" title="ä¸‰ã€Core contaainer(æ ¸å¿ƒå®¹å™¨)"></a>ä¸‰ã€Core contaainer(æ ¸å¿ƒå®¹å™¨)</h1><ul><li><strong>æ ¸å¿ƒå®¹å™¨</strong>ï¼šæ ¸å¿ƒå®¹å™¨æä¾› Spring æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ã€‚æ ¸å¿ƒå®¹å™¨çš„ä¸»è¦ç»„ä»¶æ˜¯ BeanFactoryï¼Œå®ƒæ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚BeanFactory ä½¿ç”¨<em>æ§åˆ¶åè½¬</em>ï¼ˆIOCï¼‰ æ¨¡å¼å°†åº”ç”¨ç¨‹åºçš„é…ç½®å’Œä¾èµ–æ€§è§„èŒƒä¸å®é™…çš„åº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ã€‚</li><li><strong>Spring ä¸Šä¸‹æ–‡</strong>ï¼šSpring ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘ Spring æ¡†æ¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Spring ä¸Šä¸‹æ–‡åŒ…æ‹¬ä¼ä¸šæœåŠ¡ï¼Œä¾‹å¦‚ JNDIã€EJBã€ç”µå­é‚®ä»¶ã€å›½é™…åŒ–ã€æ ¡éªŒå’Œè°ƒåº¦åŠŸèƒ½ã€‚</li><li><strong>Spring AOP</strong>ï¼šé€šè¿‡é…ç½®ç®¡ç†ç‰¹æ€§ï¼ŒSpring AOP æ¨¡å—ç›´æ¥å°†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹åŠŸèƒ½ , é›†æˆåˆ°äº† Spring æ¡†æ¶ä¸­ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ Spring æ¡†æ¶ç®¡ç†ä»»ä½•æ”¯æŒ AOPçš„å¯¹è±¡ã€‚Spring AOP æ¨¡å—ä¸ºåŸºäº Spring çš„åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æä¾›äº†äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚é€šè¿‡ä½¿ç”¨ Spring AOPï¼Œä¸ç”¨ä¾èµ–ç»„ä»¶ï¼Œå°±å¯ä»¥å°†å£°æ˜æ€§äº‹åŠ¡ç®¡ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ã€‚</li><li><strong>Spring DAO</strong>ï¼šJDBC DAO æŠ½è±¡å±‚æä¾›äº†æœ‰æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œå¯ç”¨è¯¥ç»“æ„æ¥ç®¡ç†å¼‚å¸¸å¤„ç†å’Œä¸åŒæ•°æ®åº“ä¾›åº”å•†æŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯ã€‚å¼‚å¸¸å±‚æ¬¡ç»“æ„ç®€åŒ–äº†é”™è¯¯å¤„ç†ï¼Œå¹¶ä¸”æå¤§åœ°é™ä½äº†éœ€è¦ç¼–å†™çš„å¼‚å¸¸ä»£ç æ•°é‡ï¼ˆä¾‹å¦‚æ‰“å¼€å’Œå…³é—­è¿æ¥ï¼‰ã€‚Spring DAO çš„é¢å‘ JDBC çš„å¼‚å¸¸éµä»é€šç”¨çš„ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚</li><li><strong>Spring ORM</strong>ï¼šSpring æ¡†æ¶æ’å…¥äº†è‹¥å¹²ä¸ª ORM æ¡†æ¶ï¼Œä»è€Œæä¾›äº† ORM çš„å¯¹è±¡å…³ç³»å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬ JDOã€Hibernate å’Œ iBatis SQL Mapã€‚æ‰€æœ‰è¿™äº›éƒ½éµä» Spring çš„é€šç”¨äº‹åŠ¡å’Œ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚</li><li><strong>Spring Web æ¨¡å—</strong>ï¼šWeb ä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ¨¡å—ä¹‹ä¸Šï¼Œä¸ºåŸºäº Web çš„åº”ç”¨ç¨‹åºæä¾›äº†ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥ï¼ŒSpring æ¡†æ¶æ”¯æŒä¸ Jakarta Struts çš„é›†æˆã€‚Web æ¨¡å—è¿˜ç®€åŒ–äº†å¤„ç†å¤šéƒ¨åˆ†è¯·æ±‚ä»¥åŠå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°åŸŸå¯¹è±¡çš„å·¥ä½œã€‚</li><li><strong>Spring MVC æ¡†æ¶</strong>ï¼šMVC æ¡†æ¶æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„æ„å»º Web åº”ç”¨ç¨‹åºçš„ MVC å®ç°ã€‚é€šè¿‡ç­–ç•¥æ¥å£ï¼ŒMVC æ¡†æ¶å˜æˆä¸ºé«˜åº¦å¯é…ç½®çš„ï¼ŒMVC å®¹çº³äº†å¤§é‡è§†å›¾æŠ€æœ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ JSPã€Velocityã€Tilesã€iText å’Œ POIã€‚</li></ul><h2 id="3-1-IoC-å®¹å™¨"><a href="#3-1-IoC-å®¹å™¨" class="headerlink" title="3.1 IoC å®¹å™¨"></a>3.1 IoC å®¹å™¨</h2><h3 id="3-1-1IoCå®¹å™¨æ¦‚è¿°"><a href="#3-1-1IoCå®¹å™¨æ¦‚è¿°" class="headerlink" title="3.1.1IoCå®¹å™¨æ¦‚è¿°"></a>3.1.1IoCå®¹å™¨æ¦‚è¿°</h3><p>- IoCï¼ˆInversion Of Controlï¼‰æ§åˆ¶åè½¬ï¼ŒSpringåå‘æ§åˆ¶åº”ç”¨ç¨‹åºæ‰€éœ€è¦ä½¿ç”¨çš„å¤–éƒ¨èµ„æº</p><p>- Springæ§åˆ¶çš„èµ„æºå…¨éƒ¨æ”¾ç½®åœ¨Springå®¹å™¨ä¸­ï¼Œè¯¥å®¹å™¨ç§°ä¸ºIoCå®¹å™¨</p><p><strong>IoCæ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒå†…å®¹</strong>ï¼Œä½¿ç”¨å¤šç§æ–¹å¼å®Œç¾çš„å®ç°äº†IoCï¼Œå¯ä»¥ä½¿ç”¨XMLé…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£ï¼Œæ–°ç‰ˆæœ¬çš„Springä¹Ÿå¯ä»¥é›¶é…ç½®å®ç°IoCã€‚</p><p>Springå®¹å™¨åœ¨åˆå§‹åŒ–æ—¶å…ˆè¯»å–é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶æˆ–å…ƒæ•°æ®åˆ›å»ºä¸ç»„ç»‡å¯¹è±¡å­˜å…¥å®¹å™¨ä¸­ï¼Œç¨‹åºä½¿ç”¨æ—¶å†ä»Iocå®¹å™¨ä¸­å–å‡ºéœ€è¦çš„å¯¹è±¡ã€‚</p><p> <strong>æ§åˆ¶åè½¬IoC(Inversion of Control)ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDI(ä¾èµ–æ³¨å…¥)æ˜¯å®ç°IoCçš„ä¸€ç§æ–¹æ³•</strong>ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºDIåªæ˜¯IoCçš„å¦ä¸€ç§è¯´æ³•ã€‚æ²¡æœ‰IoCçš„ç¨‹åºä¸­ , æˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ , å¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†ã€‚(ç‹‚ç¥è¯´java)</p><p><img src="https://img-blog.csdnimg.cn/998d544644ec474ebc9854e1c0fca696.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>â€‹                 å›¾3-1 IOCå®¹å™¨</p><p><strong>IoCæ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒå†…å®¹</strong>ï¼Œä½¿ç”¨å¤šç§æ–¹å¼å®Œç¾çš„å®ç°äº†IoCï¼Œå¯ä»¥ä½¿ç”¨XMLé…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£ï¼Œæ–°ç‰ˆæœ¬çš„Springä¹Ÿå¯ä»¥é›¶é…ç½®å®ç°IoCã€‚</p><p>Springå®¹å™¨åœ¨åˆå§‹åŒ–æ—¶å…ˆè¯»å–é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶æˆ–å…ƒæ•°æ®åˆ›å»ºä¸ç»„ç»‡å¯¹è±¡å­˜å…¥å®¹å™¨ä¸­ï¼Œç¨‹åºä½¿ç”¨æ—¶å†ä»Iocå®¹å™¨ä¸­å–å‡ºéœ€è¦çš„å¯¹è±¡ã€‚</p><p>ctrl+Väº†è¿™ä¹ˆå¤šåºŸè¯ï¼Œç»ˆäºå¯ä»¥è¯´é‡ç‚¹äº†ï¼            </p><h3 id="3-1-2-Spring-IOCçš„ä¸¤ä¸ªå®¹å™¨"><a href="#3-1-2-Spring-IOCçš„ä¸¤ä¸ªå®¹å™¨" class="headerlink" title="3.1.2 Spring IOCçš„ä¸¤ä¸ªå®¹å™¨"></a>3.1.2 Spring IOCçš„ä¸¤ä¸ªå®¹å™¨</h3><p>å¯¹äº IoC æ¥è¯´ï¼Œæœ€é‡è¦çš„å°±æ˜¯å®¹å™¨ã€‚å®¹å™¨ç®¡ç†ç€ <strong>Bean</strong> çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ§åˆ¶ç€ Bean çš„ä¾èµ–æ³¨å…¥ã€‚</p><blockquote><p>é‚£ä¹ˆï¼Œ Spring å¦‚ä½•è®¾è®¡å®¹å™¨çš„å‘¢ï¼Ÿ</p></blockquote><p>Spring ä½œè€… Rod Johnson è®¾è®¡äº†ä¸¤ä¸ªæ¥å£ç”¨ä»¥è¡¨ç¤ºå®¹å™¨ã€‚</p><ul><li><strong>BeanFactory</strong></li><li><strong>ApplicationContext</strong></li></ul><p><code>BeanFactory</code> Eè¥¿å¥½ç”¨ï¼ï¼Œæ˜¯å°±æ˜¯ä¸ª HashMapï¼ŒKey æ˜¯ BeanNameï¼ŒValue æ˜¯ Bean å®ä¾‹ã€‚</p><p><code>ApplicationContext</code> å¯ä»¥ç§°ä¹‹ä¸º â€œ<strong>é«˜çº§å®¹å™¨</strong>â€ã€‚å› ä¸ºä»–æ¯” BeanFactory å¤šäº†æ›´å¤šçš„åŠŸèƒ½ã€‚ä»–ç»§æ‰¿äº†å¤šä¸ªæ¥å£ã€‚å› æ­¤å…·å¤‡äº†æ›´å¤šçš„åŠŸèƒ½ã€‚ä¾‹å¦‚èµ„æºçš„è·å–ï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ï¼ˆä¾‹å¦‚ JSP tag çš„æ”¯æŒï¼‰ï¼Œå¯¹ BeanFactory å¤šäº†å·¥å…·çº§åˆ«çš„æ”¯æŒç­‰å¾…ã€‚æ‰€ä»¥ä½ çœ‹ä»–çš„åå­—ï¼Œå·²ç»ä¸æ˜¯ BeanFactory ä¹‹ç±»çš„å·¥å‚äº†ï¼Œè€Œæ˜¯ â€œåº”ç”¨ä¸Šä¸‹æ–‡â€ï¼Œ ä»£è¡¨ç€æ•´ä¸ªå¤§å®¹å™¨çš„æ‰€æœ‰åŠŸèƒ½ã€‚è¯¥æ¥å£å®šä¹‰äº†ä¸€ä¸ª refresh æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æ˜¯æ‰€æœ‰é˜…è¯» Spring æºç çš„äººçš„æœ€ç†Ÿæ‚‰çš„æ–¹æ³•ï¼Œç”¨äºåˆ·æ–°æ•´ä¸ªå®¹å™¨ï¼Œå³é‡æ–°åŠ è½½&#x2F;åˆ·æ–°æ‰€æœ‰çš„ beanã€‚</p><p><img src="https://img-blog.csdnimg.cn/d234c1ad08bd490687d3c26118ed0c04.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>â€‹                        å›¾ 3-2 <code>ApplicationContext</code> çš„æ¥å£ç±»</p><p>å…¶å®è¿˜æœ‰å…¶ä»–æ¥å£â€¦.</p><h3 id="3-1-3-BeanFactory"><a href="#3-1-3-BeanFactory" class="headerlink" title="3.1.3 BeanFactory"></a>3.1.3 BeanFactory</h3><p> BeanFactory ä½äºè®¾è®¡çš„æœ€åº•å±‚ï¼Œå®ƒæä¾›äº† Spring IoC æœ€åº•å±‚çš„è®¾è®¡,å…¶æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/465e7ee8fbd14332a3b2ccbcdd866975.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_15,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>   å›¾3-3 BeanFactoryçš„æ–¹æ³•ä½“</p><ul><li>getBean å¯¹åº”äº†å¤šä¸ªæ–¹æ³•æ¥è·å–é…ç½®ç»™ Spring IoC å®¹å™¨çš„ Beanã€‚<br> 1.æŒ‰ç…§ç±»å‹æ‹¿ beanï¼š<br> <code>bean = (Bean) factory.getBean(Bean.class);</code><br> <strong>æ³¨æ„ï¼š</strong>è¦åœ¨ Spring ä¸­åªé…ç½®äº†ä¸€ä¸ªè¿™ç§ç±»å‹çš„å®ä¾‹ï¼Œä¸ç„¶æŠ¥é”™ã€‚ï¼ˆå¦‚æœæœ‰å¤šä¸ªé‚£ Spring å°±æ‡µäº†ï¼Œä¸çŸ¥é“è¯¥è·å–å“ªä¸€ä¸ªï¼‰<br> \2. æŒ‰ç…§ bean çš„åå­—æ‹¿ bean:<br> <code>bean = (Bean) factory.getBean(&quot;beanName&quot;);</code><br> <strong>æ³¨æ„ï¼š</strong>è¿™ç§æ–¹æ³•ä¸å¤ªå®‰å…¨ï¼ŒIDE ä¸ä¼šæ£€æŸ¥å…¶å®‰å…¨æ€§ï¼ˆå…³è”æ€§ï¼‰<br> \3. æŒ‰ç…§åå­—å’Œç±»å‹æ‹¿ beanï¼š<strong>ï¼ˆæ¨èï¼‰</strong><br> <code>bean = (Bean) factory.getBean(&quot;beanName&quot;, Bean.class);</code></li><li>isSingleton ç”¨äºåˆ¤æ–­æ˜¯å¦å•ä¾‹ï¼Œå¦‚æœåˆ¤æ–­ä¸ºçœŸï¼Œå…¶æ„æ€æ˜¯è¯¥ Bean åœ¨å®¹å™¨ä¸­æ˜¯ä½œä¸ºä¸€ä¸ªå”¯ä¸€å•ä¾‹å­˜åœ¨çš„ã€‚è€Œã€isPrototypeã€‘åˆ™ç›¸åï¼Œå¦‚æœåˆ¤æ–­ä¸ºçœŸï¼Œæ„æ€æ˜¯å½“ä½ ä»å®¹å™¨ä¸­è·å– Beanï¼Œå®¹å™¨å°±ä¸ºä½ ç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚<br> <strong>æ³¨æ„ï¼š</strong>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œã€isSingletonã€‘ä¸º tureï¼Œè€Œã€isPrototypeã€‘ä¸º false</li><li>å…³äº type çš„åŒ¹é…ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ‰ Java ç±»å‹åŒ¹é…çš„æ–¹å¼</li><li>getAliases æ–¹æ³•æ˜¯è·å–åˆ«åçš„æ–¹æ³•</li></ul><h3 id="3-1-4-ApplicationContext"><a href="#3-1-4-ApplicationContext" class="headerlink" title="3.1.4 ApplicationContext"></a>3.1.4 ApplicationContext</h3><p><img src="https://img-blog.csdnimg.cn/7c1a53e04f6b44e191aeb4483bfe60c4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>åˆ›å»ºä¸€ä¸ªServiceæ¥å£</p><p><img src="https://img-blog.csdnimg.cn/9667cfaa28c440fcae65155fc3f0892c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_17,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å†™å…¥æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;user service running...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>é…ç½®applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 1.åˆ›å»ºspringæ§åˆ¶çš„èµ„æº--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;impl.service.impl.UserServiceImpl&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>Test</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//2.åŠ è½½é…ç½®æ–‡ä»¶</span><br>        <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        <span class="hljs-comment">//3.è·å–èµ„æº</span><br>        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> (UserService) ctx.getBean(<span class="hljs-string">&quot;userService&quot;</span>);<br>        userService.save();<br>    &#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>ApplicationContext å¸¸è§å®ç°ç±»ï¼š</p><p>1.<strong>ClassPathXmlApplicationContextï¼š</strong><br> è¯»å–classpathä¸­çš„èµ„æº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>2:<strong>FileSystemXmlApplicationContext:-</strong><br> è¯»å–æŒ‡å®šè·¯å¾„çš„èµ„æº</p><p><strong>ApplicationContext a &#x3D; new FileSystemXmlApplicationContext(â€œc:&#x2F;applicationContext.xmlâ€);</strong></p><p>3.<strong>XmlWebApplicationContext:</strong><br> éœ€è¦åœ¨Webçš„ç¯å¢ƒæ‰å¯è¿è¡Œ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">XmlWebApplicationContext ac = new XmlWebApplicationContext(); <span class="hljs-regexp">//</span> è¿™æ—¶å¹¶æ²¡æœ‰åˆå§‹åŒ–å®¹å™¨ ac.setServletContext(servletContext); <span class="hljs-regexp">//</span> éœ€è¦æŒ‡å®šServletContextå¯¹è±¡ ac.setConfigLocation(<span class="hljs-string">&quot;/WEB-INF/applicationContext.xml&quot;</span>); <span class="hljs-regexp">//</span> æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ï¼Œå¼€å¤´çš„æ–œçº¿è¡¨ç¤ºWebåº”ç”¨çš„æ ¹ç›®å½• ac.refresh(); <span class="hljs-regexp">//</span> åˆå§‹åŒ–å®¹å™¨<br></code></pre></td></tr></table></figure><h3 id="3-1-5-BeanFactory-å’Œ-ApplicationContext-çš„åŒºåˆ«ï¼š"><a href="#3-1-5-BeanFactory-å’Œ-ApplicationContext-çš„åŒºåˆ«ï¼š" class="headerlink" title="3.1.5 BeanFactory å’Œ ApplicationContext çš„åŒºåˆ«ï¼š"></a>3.1.5 BeanFactory å’Œ ApplicationContext çš„åŒºåˆ«ï¼š</h3><ul><li><strong>BeanFactoryï¼š</strong>æ˜¯Springä¸­æœ€åº•å±‚çš„æ¥å£ï¼Œåªæä¾›äº†æœ€ç®€å•çš„IoCåŠŸèƒ½,è´Ÿè´£é…ç½®ï¼Œåˆ›å»ºå’Œç®¡ç†beanã€‚<br> åœ¨åº”ç”¨ä¸­ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨ BeanFactoryï¼Œè€Œæ¨èä½¿ç”¨ApplicationContextï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡ï¼‰ï¼ŒåŸå› å¦‚ä¸‹ã€‚</li><li><strong>ApplicationContextï¼š</strong><br> 1.ç»§æ‰¿äº† BeanFactoryï¼Œæ‹¥æœ‰äº†åŸºæœ¬çš„ IoC åŠŸèƒ½ï¼›<br> 2.é™¤æ­¤ä¹‹å¤–ï¼ŒApplicationContext è¿˜æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š<br> â‘  æ”¯æŒå›½é™…åŒ–ï¼›<br> â‘¡ æ”¯æŒæ¶ˆæ¯æœºåˆ¶ï¼›<br> â‘¢ æ”¯æŒç»Ÿä¸€çš„èµ„æºåŠ è½½ï¼›<br> â‘£ æ”¯æŒAOPåŠŸèƒ½ï¼›</li></ul><p><img src="https://img-blog.csdnimg.cn/b6c59da06cf149f8a085a3e0b43f9e80.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="-1"><a href="#-1" class="headerlink" title=""></a></h2><h2 id="-2"><a href="#-2" class="headerlink" title=""></a></h2><h2 id="3-2-ä¾èµ–æ³¨å…¥ï¼ˆDependency-Injection-DIï¼‰"><a href="#3-2-ä¾èµ–æ³¨å…¥ï¼ˆDependency-Injection-DIï¼‰" class="headerlink" title="3.2 ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection,DIï¼‰"></a>3.2 ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection,DIï¼‰</h2><h3 id="3-2-1-ä»€ä¹ˆæ˜¯DIä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#3-2-1-ä»€ä¹ˆæ˜¯DIä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="3.2.1 ä»€ä¹ˆæ˜¯DIä¾èµ–æ³¨å…¥ï¼Ÿ"></a>3.2.1 ä»€ä¹ˆæ˜¯DIä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>ã€€ã€€springåŠ¨æ€çš„å‘æŸä¸ªå¯¹è±¡æä¾›å®ƒæ‰€éœ€è¦çš„å…¶ä»–å¯¹è±¡ã€‚è¿™ä¸€ç‚¹æ˜¯é€šè¿‡DIï¼ˆDependency Injectionï¼Œä¾èµ–æ³¨å…¥ï¼‰æ¥å®ç°çš„ã€‚æ¯”å¦‚å¯¹è±¡Aéœ€è¦æ“ä½œæ•°æ®åº“ï¼Œä»¥å‰æˆ‘ä»¬æ€»æ˜¯è¦åœ¨Aä¸­è‡ªå·±ç¼–å†™ä»£ç æ¥è·å¾—ä¸€ä¸ªConnectionå¯¹è±¡ï¼Œæœ‰äº† springæˆ‘ä»¬å°±åªéœ€è¦å‘Šè¯‰springï¼ŒAä¸­éœ€è¦ä¸€ä¸ªConnectionï¼Œè‡³äºè¿™ä¸ªConnectionæ€ä¹ˆæ„é€ ï¼Œä½•æ—¶æ„é€ ï¼ŒAä¸éœ€è¦çŸ¥é“ã€‚åœ¨ç³»ç»Ÿè¿è¡Œæ—¶ï¼Œspringä¼šåœ¨é€‚å½“çš„æ—¶å€™åˆ¶é€ ä¸€ä¸ªConnectionï¼Œç„¶ååƒæ‰“é’ˆä¸€æ ·ï¼Œæ³¨å°„åˆ°Aå½“ä¸­ï¼Œè¿™æ ·å°±å®Œæˆäº†å¯¹å„ä¸ªå¯¹è±¡ä¹‹é—´å…³ç³»çš„æ§åˆ¶ã€‚Aéœ€è¦ä¾èµ– Connectionæ‰èƒ½æ­£å¸¸è¿è¡Œï¼Œè€Œè¿™ä¸ªConnectionæ˜¯ç”±springæ³¨å…¥åˆ°Aä¸­çš„ï¼Œä¾èµ–æ³¨å…¥çš„åå­—å°±è¿™ä¹ˆæ¥çš„ã€‚é‚£ä¹ˆDIæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ Java 1.3ä¹‹åä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯åå°„ï¼ˆreflectionï¼‰ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™åŠ¨æ€çš„ç”Ÿæˆå¯¹è±¡ã€æ‰§è¡Œå¯¹è±¡çš„æ–¹æ³•ã€æ”¹å˜å¯¹è±¡çš„å±æ€§ï¼Œspringå°±æ˜¯é€šè¿‡åå°„æ¥å®ç°æ³¨å…¥çš„ã€‚</p><p>ã€€ã€€ç®€å•æ¥è¯´ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯ç»™å±æ€§èµ‹å€¼ï¼ˆåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ï¼‰</p><p><strong>javaé¢å‘å¯¹è±¡çš„æ–¹å¼ï¼Œéœ€è¦è°ƒç”¨å¦ä¸€ä¸ªjavaå¯¹è±¡ï¼Œé‡‡ç”¨â€new è¢«è°ƒç”¨è€…â€çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œç¼ºç‚¹æ˜¯è°ƒç”¨ä¸è¢«è°ƒç”¨è€…çš„è€¦åˆå¢å¼ºï¼Œä¸åˆ©äºåæœŸç»´æŠ¤ã€‚</strong></p><p><img src="https://img-blog.csdnimg.cn/99ef685759ed4a9ba40f79f83fa95158.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> ä½¿ç”¨Springæ¡†æ¶åï¼Œå¯¹è±¡ä¸åœ¨ç”±è°ƒç”¨è€…åˆ›å»ºï¼Œè€Œæ˜¯ç”±Springå®¹å™¨åˆ›å»ºï¼Œå®¹å™¨ä¼šè´Ÿè´£æ§åˆ¶ç¨‹åºé—´çš„å…³ç³»ï¼Œè€Œä¸æ˜¯ç”±è°ƒç”¨è€…ç›´æ¥æ§åˆ¶ï¼Œæˆ‘ä»¬ç§°æ§åˆ¶æƒè½¬ç§»çš„è¿™ç§æƒ…å†µä¸ºSpringæ§åˆ¶åè½¬ï¼</p><p><img src="https://img-blog.csdnimg.cn/ab2f4b7b80d34fc4b97b5934b4c85b5a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="3-3-ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼"><a href="#3-3-ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼" class="headerlink" title="3.3 ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼"></a>3.3 ä¾èµ–æ³¨å…¥çš„å®ç°æ–¹å¼</h2><h3 id="3-3-1-setæ³¨å…¥ï¼ˆä¸»æµï¼‰"><a href="#3-3-1-setæ³¨å…¥ï¼ˆä¸»æµï¼‰" class="headerlink" title="3.3.1 setæ³¨å…¥ï¼ˆä¸»æµï¼‰"></a>3.3.1 setæ³¨å…¥ï¼ˆä¸»æµï¼‰</h3><p>- åç§°ï¼šproperty</p><p>- ç±»å‹ï¼š<strong>æ ‡ç­¾</strong></p><p>- å½’å±ï¼šbeanæ ‡ç­¾</p><p>- ä½œç”¨ï¼šä½¿ç”¨setæ–¹æ³•çš„å½¢å¼ä¸ºbeanæä¾›èµ„æº</p><p>- æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML">```java<br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- åŸºæœ¬å±æ€§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;propertyName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;propertyValue&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;beanId&quot;</span>/&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>   nameï¼šå¯¹åº”beanä¸­çš„å±æ€§åï¼Œè¦æ±‚è¯¥å±æ€§å¿…é¡»æä¾›å¯è®¿é—®çš„setæ–¹æ³•ï¼ˆä¸¥æ ¼è§„èŒƒä¸ºæ­¤åç§°æ˜¯setæ–¹æ³•å¯¹åº”åç§°ï¼‰</p><p>   valueï¼šè®¾å®šéå¼•ç”¨ç±»å‹å±æ€§å¯¹åº”çš„å€¼ï¼Œä¸èƒ½ä¸refåŒæ—¶ä½¿ç”¨</p><p>   refï¼šè®¾å®šå¼•ç”¨ç±»å‹å±æ€§å¯¹åº”beançš„id ï¼Œä¸èƒ½ä¸valueåŒæ—¶ä½¿ç”¨</p><p>- æ³¨æ„ï¼šä¸€ä¸ªbeanå¯ä»¥æœ‰å¤šä¸ªpropertyæ ‡ç­¾</p><h3 id="3-3-2-æ„é€ å™¨æ³¨å…¥ï¼ˆäº†è§£ï¼‰"><a href="#3-3-2-æ„é€ å™¨æ³¨å…¥ï¼ˆäº†è§£ï¼‰" class="headerlink" title="3.3.2 æ„é€ å™¨æ³¨å…¥ï¼ˆäº†è§£ï¼‰"></a>3.3.2 æ„é€ å™¨æ³¨å…¥ï¼ˆäº†è§£ï¼‰</h3><p>- åç§°ï¼šconstructor-arg</p><p>- ç±»å‹ï¼š<strong>æ ‡ç­¾</strong></p><p>- å½’å±ï¼šbeanæ ‡ç­¾</p><p>- ä½œç”¨ï¼šä½¿ç”¨æ„é€ æ–¹æ³•çš„å½¢å¼ä¸ºbeanæä¾›èµ„æºï¼Œå…¼å®¹æ—©æœŸé—ç•™ç³»ç»Ÿçš„å‡çº§å·¥ä½œ</p><p>- æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- åŸºæœ¬å±æ€§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;argsName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;argsValue /&gt;</span></span><br><span class="hljs-string"><span class="hljs-tag">```</span></span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>   nameï¼šå¯¹åº”beanä¸­çš„æ„é€ æ–¹æ³•æ‰€æºå¸¦çš„å‚æ•°å</p><p>   valueï¼šè®¾å®šéå¼•ç”¨ç±»å‹æ„é€ æ–¹æ³•å‚æ•°å¯¹åº”çš„å€¼ï¼Œä¸èƒ½ä¸refåŒæ—¶ä½¿ç”¨</p><p>å…¶ä»–å±æ€§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;arg-index&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;arg-type&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;beanId&quot;</span>/&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>   refï¼šè®¾å®šå¼•ç”¨ç±»å‹æ„é€ æ–¹æ³•å‚æ•°å¯¹åº”beançš„id ï¼Œä¸èƒ½ä¸valueåŒæ—¶ä½¿ç”¨</p><p>   type ï¼šè®¾å®šæ„é€ æ–¹æ³•å‚æ•°çš„ç±»å‹ï¼Œç”¨äºæŒ‰ç±»å‹åŒ¹é…å‚æ•°æˆ–è¿›è¡Œç±»å‹æ ¡éªŒ</p><p>   index ï¼šè®¾å®šæ„é€ æ–¹æ³•å‚æ•°çš„ä½ç½®ï¼Œç”¨äºæŒ‰ä½ç½®åŒ¹é…å‚æ•°ï¼Œå‚æ•°indexå€¼ä»0å¼€å§‹è®¡æ•°</p><p>- æ³¨æ„ï¼šä¸€ä¸ªbeanå¯ä»¥æœ‰å¤šä¸ªconstructor-argæ ‡ç­¾</p><h3 id="3-3-3-é›†åˆç±»å‹æ•°æ®æ³¨å…¥"><a href="#3-3-3-é›†åˆç±»å‹æ•°æ®æ³¨å…¥" class="headerlink" title="3.3.3  é›†åˆç±»å‹æ•°æ®æ³¨å…¥"></a>3.3.3  é›†åˆç±»å‹æ•°æ®æ³¨å…¥</h3><p>- åç§°ï¼šarrayï¼Œlistï¼Œsetï¼Œmapï¼Œprops</p><p>- ç±»å‹ï¼š<strong>æ ‡ç­¾</strong></p><p>- å½’å±ï¼špropertyæ ‡ç­¾ æˆ– constructor-argæ ‡ç­¾</p><p>- ä½œç”¨ï¼šæ³¨å…¥é›†åˆæ•°æ®ç±»å‹å±æ€§</p><p>- æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>(1)é›†åˆç±»å‹æ•°æ®æ³¨å…¥â€”â€”list</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;al&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>itheima<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>66666<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>(2)é›†åˆç±»å‹æ•°æ®æ³¨å…¥â€”â€”props</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;properties&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>zhangsan666<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;value&quot;</span>&gt;</span>666666<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>(3)é›†åˆç±»å‹æ•°æ®æ³¨å…¥â€”â€”array ï¼ˆäº†è§£ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;arr&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>123456<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>66666<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>(4)é›†åˆç±»å‹æ•°æ®æ³¨å…¥â€”â€”setï¼ˆäº†è§£ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hs&quot;</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Test<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>66666<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>(5)é›†åˆç±»å‹æ•°æ®æ³¨å…¥â€”â€”mapï¼ˆäº†è§£ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hm&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Test66666&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;6666666666&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h3 id="3-3-4-ä½¿ç”¨på‘½åç©ºé—´ç®€åŒ–é…ç½®ï¼ˆäº†è§£ï¼‰"><a href="#3-3-4-ä½¿ç”¨på‘½åç©ºé—´ç®€åŒ–é…ç½®ï¼ˆäº†è§£ï¼‰" class="headerlink" title="3.3.4  ä½¿ç”¨på‘½åç©ºé—´ç®€åŒ–é…ç½®ï¼ˆäº†è§£ï¼‰"></a>3.3.4  ä½¿ç”¨på‘½åç©ºé—´ç®€åŒ–é…ç½®ï¼ˆäº†è§£ï¼‰</h3><p>- åç§°ï¼šp:propertyNameï¼Œp:propertyName-ref</p><p>- ç±»å‹ï¼š<strong>å±æ€§</strong></p><p>- å½’å±ï¼šbeanæ ‡ç­¾</p><p>- ä½œç”¨ï¼šä¸ºbeanæ³¨å…¥å±æ€§å€¼</p><p>- æ ¼å¼ï¼š</p><p> `&#96;&#96;xml<br>  <bean p:propertyName="propertyValue" p:propertyName-ref="beanId"/><br>  `&#96;&#96;</p><p>- æ³¨æ„ï¼šä½¿ç”¨på‘½ä»¤ç©ºé—´éœ€è¦å…ˆå¼€å¯springå¯¹på‘½ä»¤ç©ºé—´çš„çš„æ”¯æŒï¼Œåœ¨beansæ ‡ç­¾ä¸­æ·»åŠ å¯¹åº”ç©ºé—´æ”¯æŒ</p><p> `&#96;&#96;xml<br>   <bean      id="userService"      class="com.itheima.service.impl.UserServiceImpl"      p:userDao-ref="userDao"      p:bookDao-ref="bookDao"      /><br>  `&#96;&#96;</p><h3 id="3-3-5-SpEL-ï¼ˆäº†è§£ï¼‰"><a href="#3-3-5-SpEL-ï¼ˆäº†è§£ï¼‰" class="headerlink" title="3.3.5 SpEL ï¼ˆäº†è§£ï¼‰"></a>3.3.5 SpEL ï¼ˆäº†è§£ï¼‰</h3><p>- Springæä¾›äº†å¯¹ELè¡¨è¾¾å¼çš„æ”¯æŒï¼Œç»Ÿä¸€å±æ€§æ³¨å…¥æ ¼å¼</p><p>- ç±»å‹ï¼š<strong>å±æ€§å€¼</strong></p><p>- å½’å±ï¼švalueå±æ€§å€¼</p><p>- ä½œç”¨ï¼šä¸ºbeanæ³¨å…¥å±æ€§å€¼</p><p>- æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;EL&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- æ³¨æ„ï¼šæ‰€æœ‰å±æ€§å€¼ä¸åŒºåˆ†æ˜¯å¦å¼•ç”¨ç±»å‹ï¼Œç»Ÿä¸€ä½¿ç”¨valueèµ‹å€¼</p><p>- æ‰€æœ‰æ ¼å¼ç»Ÿä¸€ä½¿ç”¨  value&#x3D;â€œ********â€</p><p> - å¸¸é‡  #{10}  #{3.14}  #{2e5}  #{â€˜itcastâ€™}</p><p> - å¼•ç”¨bean  #{beanId}   </p><p> - å¼•ç”¨beanå±æ€§  #{beanId.propertyName}</p><p> - å¼•ç”¨beanæ–¹æ³•  beanId.methodName().method2()</p><p> - å¼•ç”¨é™æ€æ–¹æ³•  T(java.lang.Math).PI</p><p> - è¿ç®—ç¬¦æ”¯æŒ  #{3 lt 4 &#x3D;&#x3D; 4 ge 3}</p><p> - æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ  #{user.name matchesâ€˜[a-z]{6,}â€™}</p><p> - é›†åˆæ”¯æŒ  #{likes[3]}</p><h3 id="3-3-6-propertiesæ–‡ä»¶"><a href="#3-3-6-propertiesæ–‡ä»¶" class="headerlink" title="3.3.6 propertiesæ–‡ä»¶"></a>3.3.6 propertiesæ–‡ä»¶</h3><p>- Springæä¾›äº†è¯»å–å¤–éƒ¨propertiesæ–‡ä»¶çš„æœºåˆ¶ï¼Œä½¿ç”¨è¯»å–åˆ°çš„æ•°æ®ä¸ºbeançš„å±æ€§èµ‹å€¼</p><p>- æ“ä½œæ­¥éª¤</p><p> 1.å‡†å¤‡å¤–éƒ¨propertiesæ–‡ä»¶</p><p> 2.å¼€å¯contextå‘½åç©ºé—´æ”¯æŒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br>xmlns:context=&quot;http://www.springframework.org/schema/context&quot;<br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>â€‹     3.åŠ è½½æŒ‡å®šçš„propertiesæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:filename.properties&quot;</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>â€‹     4.ä½¿ç”¨åŠ è½½çš„æ•°æ®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;propertyName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;propertiesName&#125;&quot;</span>/&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- æ³¨æ„ï¼šå¦‚æœéœ€è¦åŠ è½½æ‰€æœ‰çš„propertiesæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨<code>*.properties</code>è¡¨ç¤ºåŠ è½½æ‰€æœ‰çš„propertiesæ–‡ä»¶</p><p>- æ³¨æ„ï¼šè¯»å–æ•°æ®ä½¿ç”¨**${propertiesName}<strong>æ ¼å¼è¿›è¡Œï¼Œå…¶ä¸­</strong>propertiesName**æŒ‡propertiesæ–‡ä»¶ä¸­çš„å±æ€§å</p><h3 id="3-3-7-import-å›¢é˜Ÿå¼€å‘"><a href="#3-3-7-import-å›¢é˜Ÿå¼€å‘" class="headerlink" title="3.3.7  import(å›¢é˜Ÿå¼€å‘)"></a>3.3.7  import(å›¢é˜Ÿå¼€å‘)</h3><p>- åç§°ï¼šimport</p><p>- ç±»å‹ï¼š<strong>æ ‡ç­¾</strong></p><p>- å½’å±ï¼šbeansæ ‡ç­¾</p><p>- ä½œç”¨ï¼šåœ¨å½“å‰é…ç½®æ–‡ä»¶ä¸­å¯¼å…¥å…¶ä»–é…ç½®æ–‡ä»¶ä¸­çš„é¡¹</p><p>- æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- åŸºæœ¬å±æ€§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">â€œconfig.xml</span>&quot;/&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>   resourceï¼šåŠ è½½çš„é…ç½®æ–‡ä»¶å</p><p>- Springå®¹å™¨åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶</p><p> `&#96;&#96;java<br>  new ClassPathXmlApplicationContext(â€œconfig1.xmlâ€,â€config2.xmlâ€);<br>  `&#96;&#96;</p><p>- Springå®¹å™¨ä¸­çš„beanå®šä¹‰å†²çªé—®é¢˜</p><p> - åŒidçš„beanï¼Œåå®šä¹‰çš„è¦†ç›–å…ˆå®šä¹‰çš„</p><p> - å¯¼å…¥é…ç½®æ–‡ä»¶å¯ä»¥ç†è§£ä¸ºå°†å¯¼å…¥çš„é…ç½®æ–‡ä»¶å¤åˆ¶ç²˜è´´åˆ°å¯¹åº”ä½ç½®</p><p> - å¯¼å…¥é…ç½®æ–‡ä»¶çš„é¡ºåºä¸ä½ç½®ä¸åŒå¯èƒ½ä¼šå¯¼è‡´æœ€ç»ˆç¨‹åºè¿è¡Œç»“æœä¸åŒ</p><p>æƒ³è¦æµ‹è¯•è¯¦æƒ…è¯·å‚è€ƒï¼š<a href="https://mp.weixin.qq.com/s/Nf-cYENenoZpXqDjv574ig">ç‹‚ç¥è¯´Spring03ï¼šä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</a></p><h1 id="å››ã€Springä¸­çš„-Bean"><a href="#å››ã€Springä¸­çš„-Bean" class="headerlink" title="å››ã€Springä¸­çš„ Bean"></a>å››ã€Springä¸­çš„ Bean</h1><h2 id="4-1-beançš„é…ç½®"><a href="#4-1-beançš„é…ç½®" class="headerlink" title="4.1 beançš„é…ç½®"></a>4.1 beançš„é…ç½®</h2><p>Springä¸­ï¼ŒXMLé…ç½®æ–‡ä»¶çš„æ ¹å…ƒç´ æ˜¯<beans>ï¼Œ<beans>ä¸­åŒ…å«äº†å¤šä¸ª<bean>å­å…ƒç´ ï¼Œæ¯ä¸€ä¸ª<bean>ä¸­å®šä¹‰äº†ä¸€ä¸ªBean</p><table><thead><tr><th>å±æ€§åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>id</td><td>æ˜¯ä¸€ä¸ª Bean çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ŒSpring å®¹å™¨å¯¹ Bean çš„é…ç½®å’Œç®¡ç†éƒ½é€šè¿‡è¯¥å±æ€§å®Œæˆ</td></tr><tr><td>name</td><td>Spring å®¹å™¨åŒæ ·å¯ä»¥é€šè¿‡æ­¤å±æ€§å¯¹å®¹å™¨ä¸­çš„ Bean è¿›è¡Œé…ç½®å’Œç®¡ç†ï¼Œname å±æ€§ä¸­å¯ä»¥ä¸º Bean æŒ‡å®šå¤šä¸ªåç§°ï¼Œæ¯ä¸ªåç§°ä¹‹é—´ç”¨é€—å·æˆ–åˆ†å·éš”å¼€</td></tr><tr><td>class</td><td>è¯¥å±æ€§æŒ‡å®šäº† Bean çš„å…·ä½“å®ç°ç±»ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç±»åï¼Œä½¿ç”¨ç±»çš„å…¨é™å®šå</td></tr><tr><td>scope</td><td>ç”¨äºè®¾å®š Bean å®ä¾‹çš„ä½œç”¨åŸŸï¼Œå…¶å±æ€§å€¼æœ‰ singletonï¼ˆå•ä¾‹ï¼‰ã€prototypeï¼ˆåŸå‹ï¼‰ã€requestã€session å’Œ global Sessionã€‚å…¶é»˜è®¤å€¼æ˜¯ singleton</td></tr><tr><td>constructor-arg</td><td><bean>å…ƒç´ çš„å­å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å…ƒç´ ä¼ å…¥æ„é€ å‚æ•°è¿›è¡Œå®ä¾‹åŒ–ã€‚è¯¥å…ƒç´ çš„ index å±æ€§æŒ‡å®šæ„é€ å‚æ•°çš„åºå·ï¼ˆä» 0 å¼€å§‹ï¼‰ï¼Œtype å±æ€§æŒ‡å®šæ„é€ å‚æ•°çš„ç±»å‹</td></tr><tr><td>property</td><td><bean>å…ƒç´ çš„å­å…ƒç´ ï¼Œç”¨äºè°ƒç”¨ Bean å®ä¾‹ä¸­çš„ Set æ–¹æ³•å®Œæˆå±æ€§èµ‹å€¼ï¼Œä»è€Œå®Œæˆä¾èµ–æ³¨å…¥ã€‚è¯¥å…ƒç´ çš„ name å±æ€§æŒ‡å®š Bean å®ä¾‹ä¸­çš„ç›¸åº”å±æ€§å</td></tr><tr><td>ref</td><td><property> å’Œ <constructor-arg> ç­‰å…ƒç´ çš„å­å…ƒç´¢ï¼Œè¯¥å…ƒç´ ä¸­çš„ bean å±æ€§ç”¨äºæŒ‡å®šå¯¹ Bean å·¥å‚ä¸­æŸä¸ª Bean å®ä¾‹çš„å¼•ç”¨</td></tr><tr><td>value</td><td><property> å’Œ <constractor-arg> ç­‰å…ƒç´ çš„å­å…ƒç´ ï¼Œç”¨äºç›´æ¥æŒ‡å®šä¸€ä¸ªå¸¸é‡å€¼</td></tr><tr><td>list</td><td>ç”¨äºå°è£… List æˆ–æ•°ç»„ç±»å‹çš„ä¾èµ–æ³¨å…¥</td></tr><tr><td>set</td><td>ç”¨äºå°è£… Set ç±»å‹å±æ€§çš„ä¾èµ–æ³¨å…¥</td></tr><tr><td>map</td><td>ç”¨äºå°è£… Map ç±»å‹å±æ€§çš„ä¾èµ–æ³¨å…¥</td></tr><tr><td>entry</td><td><map> å…ƒç´ çš„å­å…ƒç´ ï¼Œç”¨äºè®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ã€‚å…¶ key å±æ€§æŒ‡å®šå­—ç¬¦ä¸²ç±»å‹çš„é”®å€¼ï¼Œref æˆ– value å­å…ƒç´ æŒ‡å®šå…¶å€¼</td></tr></tbody></table><h2 id="4-2-beançš„å®ä¾‹åŒ–"><a href="#4-2-beançš„å®ä¾‹åŒ–" class="headerlink" title="4.2 beançš„å®ä¾‹åŒ–"></a>4.2 beançš„å®ä¾‹åŒ–</h2><p>- åç§°ï¼šbean</p><p>- ç±»å‹ï¼š<strong>æ ‡ç­¾</strong></p><p>- å½’å±ï¼šbeansæ ‡ç­¾</p><p>- ä½œç”¨ï¼šå®šä¹‰springä¸­çš„èµ„æºï¼Œå—æ­¤æ ‡ç­¾å®šä¹‰çš„èµ„æºå°†å—åˆ°springæ§åˆ¶</p><p>- æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>- åŸºæœ¬å±æ€§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs XML">```xml<br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;beanId&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;beanName1,beanName2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ClassName&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>```<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>â€‹    idï¼šbeançš„åç§°ï¼Œé€šè¿‡idå€¼è·å–bean</p><p>â€‹    classï¼šbeançš„ç±»å‹</p><p>â€‹    nameï¼šbeançš„åç§°ï¼Œå¯ä»¥é€šè¿‡nameå€¼è·å–beanï¼Œç”¨äºå¤šäººé…åˆæ—¶ç»™beanèµ·åˆ«å</p><p>â€‹            æµ‹è¯•ä¸€ä¸‹</p><p>åˆ›å»ºä¸€ä¸ªæ¥å£ä»¥åŠå®ç°ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h3 id="-3"><a href="#-3" class="headerlink" title=""></a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Hello world&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 1.åˆ›å»ºspringæ§åˆ¶çš„èµ„æº--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.service.impl.UserServiceImpl&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æ³¨æ„ï¼šåœ¨Beanä¸­ä¸ºæŒ‡å®šidå’Œnameï¼Œspringä¼šå°†classå½“idå€¼</p><p>åˆ›å»ºæµ‹è¯•ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//2.åŠ è½½é…ç½®æ–‡ä»¶</span><br>        <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        <span class="hljs-comment">//3.è·å–èµ„æº</span><br>        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> (UserService) ctx.getBean(<span class="hljs-string">&quot;userService&quot;</span>);<br>        userService.save();<br>    &#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è¾“å‡ºäº†Hello world</p><h2 id="4-3-Beançš„ä¸‰ç§å®ä¾‹åŒ–æ–¹å¼"><a href="#4-3-Beançš„ä¸‰ç§å®ä¾‹åŒ–æ–¹å¼" class="headerlink" title="4.3 Beançš„ä¸‰ç§å®ä¾‹åŒ–æ–¹å¼"></a>4.3 Beançš„ä¸‰ç§å®ä¾‹åŒ–æ–¹å¼</h2><p><strong>BeanFactoryä½œç”¨</strong></p><ul><li><strong>é…ç½®ã€åˆ›å»ºä»¥åŠç®¡ç†Beanå¯¹è±¡</strong></li><li><strong>ç»´æŒBeanå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»</strong></li><li><strong>è´Ÿè´£Beanå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</strong></li></ul><p>ä¸Šé¢æˆ‘ä»¬é€šè¿‡å°æ¡ˆä¾‹äº†è§£äº†beançš„å¤§è‡´æ¦‚å¿µï¼Œä¸‹é¢æˆ‘ä»¬æ¥å­¦ä¹ Beançš„å®ä¾‹åŒ–æ–¹å¼</p><p><strong>â‘ æ„é€ å™¨å®ä¾‹åŒ–</strong></p><p>æŒ‡Springå®¹å™¨é€šè¿‡Beanå¯¹åº”ç±»ä¸­çš„é»˜è®¤æ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–ã€‚</p><p><strong>â‘¡é™æ€å·¥å‚å®ä¾‹åŒ–</strong></p><p>åˆ›å»ºé™æ€å·¥å‚çš„æ–¹æ³•æ¥åˆ›å»ºBeanå®ä¾‹ï¼Œå…¶ä¸­Beançš„classå±æ€§æ‰€æŒ‡å®šçš„ä¸æ˜¯Beanå®ç°ç±»è€Œæ˜¯é™æ€å·¥å‚ç±»ï¼Œéœ€è¦ä½¿ç”¨factory-merhodå±æ€§æ¥æŒ‡å®šåˆ›å»ºçš„é™æ€å·¥å‚ã€‚</p><p>â€‹              æ–‡ä»¶ MyBean2Facory</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBean2Facory</span> &#123;<br>    <span class="hljs-comment">//ä½¿ç”¨è‡ªå·±åˆ›å»ºçš„Bean2å·¥å‚</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Bean2 <span class="hljs-title function_">createBean</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bean2</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>â€‹            <strong>applicationContest.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">        http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">        http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span><br><br>     <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;Bean2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;instance.MyBean2Facory&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;createBean&quot;</span>/&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>â‘¢å®ä¾‹å·¥å‚å®ä¾‹åŒ–</p><p>â€‹                    åˆ›å»ºå®ä¾‹å·¥å‚MyBean3Factory</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBean3Facory</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyBean3Facory</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;bean3å·¥å‚å®ä¾‹åŒ–ä¸­....&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//ä½¿ç”¨è‡ªå·±åˆ›å»ºçš„Bean2å·¥å‚</span><br>    <span class="hljs-keyword">public</span> Bean3 <span class="hljs-title function_">createBean</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bean3</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>â€‹       åˆ›å»ºbeans3.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">        http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">        http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">        https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span><br><br>     <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;MyBean3Facory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;instance.MyBean3Facory&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--ä½¿ç”¨factory-beanå±æ€§æ‰§è¡Œå®ä¾‹å·¥å‚--&gt;</span><br>    <span class="hljs-comment">&lt;!--ä½¿ç”¨factory-methodå±æ€§ç¡®å®šä½¿ç”¨çš„æ–¹æ³•--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;bean3&quot;</span>  <span class="hljs-attr">factory-bean</span>=<span class="hljs-string">&quot;MyBean3Facory&quot;</span> <span class="hljs-attr">factory-method</span>=<span class="hljs-string">&quot;createBean&quot;</span>/&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p>  <!--ä½¿ç”¨factory-beanå±æ€§æ‰§è¡Œå®ä¾‹å·¥å‚-->   <!--ä½¿ç”¨factory-methodå±æ€§ç¡®å®šä½¿ç”¨çš„æ–¹æ³•--><p>æµ‹è¯•è¾“å‡º</p><p><img src="https://img-blog.csdnimg.cn/45aad2263d6f4dfca80bff3088181644.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_13,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="4-4-beanå±æ€§scope-ä½œç”¨åŸŸ"><a href="#4-4-beanå±æ€§scope-ä½œç”¨åŸŸ" class="headerlink" title="4.4 beanå±æ€§scope(ä½œç”¨åŸŸ)"></a>4.4 beanå±æ€§scope(ä½œç”¨åŸŸ)</h2><p>  ä½œç”¨åŸŸçš„ç±»å‹ï¼›</p><table><thead><tr><th><strong>ä½œç”¨åŸŸåç§°</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>singleton</strong></td><td><strong>é»˜è®¤å€¼ï¼Œå•ä¾‹æ¨¡å¼ï¼Œè¡¨ç¤ºåœ¨ Spring å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ª Bean å®ä¾‹ï¼ŒBean ä»¥å•ä¾‹çš„æ–¹å¼å­˜åœ¨ã€‚</strong></td></tr><tr><td><strong>prototype</strong></td><td><strong>åŸå‹æ¨¡å¼ï¼Œè¡¨ç¤ºæ¯æ¬¡é€šè¿‡ Spring å®¹å™¨è·å– Bean æ—¶ï¼Œå®¹å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Bean å®ä¾‹ã€‚</strong></td></tr><tr><td><strong>request</strong></td><td><strong>æ¯æ¬¡ HTTP è¯·æ±‚ï¼Œå®¹å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Bean å®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸåªåœ¨å½“å‰ HTTP Request å†…æœ‰æ•ˆã€‚</strong></td></tr><tr><td><strong>session</strong></td><td><strong>åŒä¸€ä¸ª HTTP Session å…±äº«ä¸€ä¸ª Bean å®ä¾‹ï¼Œä¸åŒçš„ Session ä½¿ç”¨ä¸åŒçš„ Bean å®ä¾‹ã€‚è¯¥ä½œç”¨åŸŸä»…åœ¨å½“å‰ HTTP Session å†…æœ‰æ•ˆã€‚</strong></td></tr><tr><td><strong>application</strong></td><td><strong>åŒä¸€ä¸ª Web åº”ç”¨å…±äº«ä¸€ä¸ª Bean å®ä¾‹ï¼Œè¯¥ä½œç”¨åŸŸåœ¨å½“å‰ ServletContext å†…æœ‰æ•ˆã€‚ç±»ä¼¼äº singletonï¼Œä¸åŒçš„æ˜¯ï¼Œsingleton è¡¨ç¤ºæ¯ä¸ª IoC å®¹å™¨ä¸­ä»…æœ‰ä¸€ä¸ª Bean å®ä¾‹ï¼Œè€ŒåŒä¸€ä¸ª Web åº”ç”¨ä¸­å¯èƒ½ä¼šæœ‰å¤šä¸ª IoC å®¹å™¨ï¼Œä½†ä¸€ä¸ª Web åº”ç”¨åªä¼šæœ‰ä¸€ä¸ª ServletContextï¼Œä¹Ÿå¯ä»¥è¯´ application æ‰æ˜¯ Web åº”ç”¨ä¸­è´§çœŸä»·å®çš„å•ä¾‹æ¨¡å¼ã€‚</strong></td></tr><tr><td><strong>websocket</strong></td><td><strong>websocket çš„ä½œç”¨åŸŸæ˜¯ WebSocket ï¼Œå³åœ¨æ•´ä¸ª WebSocket ä¸­æœ‰æ•ˆã€‚</strong></td></tr></tbody></table><h3 id="4-4-1-singleton"><a href="#4-4-1-singleton" class="headerlink" title="4.4.1 singleton"></a>4.4.1 singleton</h3><p>åç§°ï¼šscope</p><p>- ç±»å‹ï¼š<strong>ä½œç”¨åŸŸ</strong></p><p>- å½’å±ï¼šbeanæ ‡ç­¾</p><p>- ä½œç”¨ï¼šå®šä¹‰beançš„ä½œç”¨èŒƒå›´</p><p>- æ ¼å¼ï¼š</p><ul><li><bean id="..." class="..." scope="singleton"/></li></ul><p>HelloWorld ç±»ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> &#123;<br><span class="hljs-keyword">private</span> String message;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMessage</span><span class="hljs-params">(String message)</span> &#123;<br><span class="hljs-built_in">this</span>.message = message;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getMessage</span><span class="hljs-params">()</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;message : &quot;</span> + message);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>MainApp ç±»å¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;<br><span class="hljs-keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainApp</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;Beans.xml&quot;</span>);<br>        <span class="hljs-type">HelloWorld</span> <span class="hljs-variable">objA</span> <span class="hljs-operator">=</span> (HelloWorld) context.getBean(<span class="hljs-string">&quot;helloWorld&quot;</span>);<br>        objA.setMessage(<span class="hljs-string">&quot;å¯¹è±¡A&quot;</span>);<br>        objA.getMessage();<br>        <span class="hljs-type">HelloWorld</span> <span class="hljs-variable">objB</span> <span class="hljs-operator">=</span> (HelloWorld) context.getBean(<span class="hljs-string">&quot;helloWorld&quot;</span>);<br>        objB.getMessage();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>Beans.xml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;helloWorld&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;HelloWorld&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;singleton&quot;</span>/&gt;</span><br>      <br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è¿è¡Œç»“æœå¦‚ä¸‹ã€‚</p><p>message : å¯¹è±¡A<br> message : å¯¹è±¡A</p><p>ä»è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¸¤æ¬¡è¾“å‡ºå†…å®¹ç›¸åŒï¼Œè¿™è¯´æ˜ Spring å®¹å™¨åªåˆ›å»ºäº†ä¸€ä¸ª HelloWorld ç±»çš„å®ä¾‹ã€‚ç”±äº Spring å®¹å™¨é»˜è®¤ä½œç”¨åŸŸæ˜¯ singletonï¼Œæ‰€ä»¥å¦‚æœçœç•¥ scope å±æ€§ï¼Œå…¶è¾“å‡ºç»“æœä¹Ÿä¼šæ˜¯ä¸€ä¸ªå®ä¾‹ã€‚</p><h3 id="4-4-2-prototype"><a href="#4-4-2-prototype" class="headerlink" title="4.4.2 prototype"></a>4.4.2 prototype</h3><p>åç§°ï¼šscope</p><p>- ç±»å‹ï¼š<strong>ä½œç”¨åŸŸ</strong></p><p>- å½’å±ï¼šbeanæ ‡ç­¾</p><p>- ä½œç”¨ï¼šå®šä¹‰beançš„ä½œç”¨èŒƒå›´</p><p>- æ ¼å¼ï¼š</p><ul><li><bean id="..." class="..." scope="prototype"/></li></ul><p>åœ¨ä¸Šé¢ä¾‹å­ çš„åŸºç¡€ä¸Šï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ Beans.xmlï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;helloWorld&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;HelloWorld&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span>/&gt;</span><br>      <br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è¿è¡Œç»“æœå¦‚ä¸‹ã€‚</p><p>message : å¯¹è±¡A<br> message : null</p><h2 id="4-5-Beançš„ç”Ÿå‘½å‘¨æœŸ"><a href="#4-5-Beançš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4.5 Beançš„ç”Ÿå‘½å‘¨æœŸ"></a>4.5 Beançš„ç”Ÿå‘½å‘¨æœŸ</h2><p>Spring æ ¹æ® Bean çš„ä½œç”¨åŸŸæ¥é€‰æ‹©ç®¡ç†æ–¹å¼ã€‚å¯¹äº singleton ä½œç”¨åŸŸçš„ Beanï¼ŒSpring èƒ½å¤Ÿç²¾ç¡®åœ°çŸ¥é“è¯¥ Bean ä½•æ—¶è¢«åˆ›å»ºï¼Œä½•æ—¶åˆå§‹åŒ–å®Œæˆï¼Œä»¥åŠä½•æ—¶è¢«é”€æ¯ï¼›è€Œå¯¹äº prototype ä½œç”¨åŸŸçš„ Beanï¼ŒSpring åªè´Ÿè´£åˆ›å»ºï¼Œå½“å®¹å™¨åˆ›å»ºäº† Bean çš„å®ä¾‹åï¼ŒBean çš„å®ä¾‹å°±äº¤ç»™å®¢æˆ·ç«¯ä»£ç ç®¡ç†ï¼ŒSpring å®¹å™¨å°†ä¸å†è·Ÿè¸ªå…¶ç”Ÿå‘½å‘¨æœŸã€‚</p><p><img src="https://img-blog.csdnimg.cn/0e848d42b32d4dbfa90247775e2aa7de.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> äº†è§£ Spring ç”Ÿå‘½å‘¨æœŸçš„æ„ä¹‰å°±åœ¨äºï¼Œå¯ä»¥åˆ©ç”¨ Bean åœ¨å…¶å­˜æ´»æœŸé—´çš„æŒ‡å®šæ—¶åˆ»å®Œæˆä¸€äº›ç›¸å…³æ“ä½œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šåœ¨ Bean è¢«åˆå§‹åŒ–åå’Œè¢«é”€æ¯å‰æ‰§è¡Œä¸€äº›ç›¸å…³æ“ä½œã€‚</p><p> Spring å®˜æ–¹æä¾›äº† 3 ç§æ–¹æ³•å®ç°åˆå§‹åŒ–å›è°ƒå’Œé”€æ¯å›è°ƒï¼š</p><ol><li>å®ç° InitializingBean å’Œ DisposableBean æ¥å£ï¼›</li><li>åœ¨ XML ä¸­é…ç½® init-method å’Œ destory-methodï¼›</li><li>ä½¿ç”¨ @PostConstruct å’Œ @PreDestory æ³¨è§£ã€‚</li></ol><p> åœ¨ä¸€ä¸ª Bean ä¸­æœ‰å¤šç§ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•æ—¶ï¼Œä¼˜å…ˆçº§ä¸ºï¼šæ³¨è§£ &gt; æ¥å£ &gt; XMLã€‚</p><blockquote><p>ä¸å»ºè®®ä½¿ç”¨æ¥å£å’Œæ³¨è§£ï¼Œè¿™ä¼šè®© pojo ç±»å’Œ Spring æ¡†æ¶ç´§è€¦åˆã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Springæ¡†æ¶â¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GitåŸºæœ¬è®²ä¹‰</title>
    <link href="/Hexo/2021/11/21/Git%E5%9F%BA%E6%9C%AC%E8%AE%B2%E4%B9%89/"/>
    <url>/Hexo/2021/11/21/Git%E5%9F%BA%E6%9C%AC%E8%AE%B2%E4%B9%89/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Gitä»‹ç»"><a href="#1-Gitä»‹ç»" class="headerlink" title="1.Gitä»‹ç»"></a>1.Gitä»‹ç»</h2><h3 id="1-1ç‰ˆæœ¬æ§åˆ¶-ç†è§£"><a href="#1-1ç‰ˆæœ¬æ§åˆ¶-ç†è§£" class="headerlink" title="1.1ç‰ˆæœ¬æ§åˆ¶(ç†è§£)"></a>1.1ç‰ˆæœ¬æ§åˆ¶(ç†è§£)</h3><p>æ— è®ºæ˜¯ä»£ç ç¼–å†™ï¼Œè¿˜æ˜¯æ–‡æ¡£ç¼–å†™ï¼Œæˆ‘ä»¬éƒ½ä¼šé‡åˆ°å¯¹æ–‡æ¡£å†…å®¹åå¤ä¿®æ”¹çš„æƒ…å†µ</p><p><img src="https://pic.imgdb.cn/item/623e9bf327f86abb2aee4a03.png" alt="01_ç‰ˆæœ¬æ§åˆ¶"></p><h3 id="1-2å¼€å‘ä¸­å­˜åœ¨çš„é—®é¢˜-ç†è§£"><a href="#1-2å¼€å‘ä¸­å­˜åœ¨çš„é—®é¢˜-ç†è§£" class="headerlink" title="1.2å¼€å‘ä¸­å­˜åœ¨çš„é—®é¢˜(ç†è§£)"></a>1.2å¼€å‘ä¸­å­˜åœ¨çš„é—®é¢˜(ç†è§£)</h3><ul><li>ç¨‹åºå‘˜å°æ˜è´Ÿè´£çš„æ¨¡å—å°±è¦å®Œæˆäº†ï¼Œå°±åœ¨å³å°†æäº¤å‘å¸ƒä¹‹å‰çš„ä¸€ç¬é—´ï¼Œç”µè„‘çªç„¶è“å±ï¼Œç¡¬ç›˜å…‰è£ä¸‹å²—ï¼</li></ul><p>å‡ ä¸ªæœˆæ¥çš„åŠªåŠ›ä»˜ä¹‹ä¸œæµ</p><ul><li><p>è€ç‹éœ€è¦åœ¨é¡¹ç›®ä¸­åŠ å…¥ä¸€ä¸ªå¾ˆå¤æ‚çš„åŠŸèƒ½ï¼Œä¸€è¾¹å°è¯•ï¼Œä¸€è¾¹ä¿®æ”¹ä»£ç ï¼Œå°±è¿™æ ·æ‘¸ç´¢äº†ä¸€ä¸ªæ˜ŸæœŸã€‚<br>å¯æ˜¯è¿™è¢«æ”¹å¾—é¢ç›®å…¨éçš„ä»£ç å·²ç»å›ä¸åˆ°ä»å‰äº†ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee4c29.png" alt="03_å¼€å‘ä¸­çš„éº»çƒ¦"></p></li><li><p>å°æ˜å’Œè€ç‹å…ˆåä»æ–‡ä»¶æœåŠ¡å™¨ä¸Šä¸‹è½½äº†åŒä¸€ä¸ªæ–‡ä»¶</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee4cf0.png" alt="04_å¼€å‘ä¸­çš„éº»çƒ¦"></p></li><li><p>å› é¡¹ç›®ä¸­Bugè¿‡å¤šï¼Œå¯¼è‡´é¡¹ç›®è¿›åº¦æ‹–å»¶ï¼Œé¡¹ç›®ç»ç†è€å¾å› æ­¤è¢«éª‚ï¼Œä½†ä¸æ¸…æ¥šBugæ˜¯æ‰‹ä¸‹å“ªä¸€ä¸ªç¨‹åºå‘˜å†™çš„</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee4da6.png" alt="05_å¼€å‘ä¸­çš„éº»çƒ¦"></p></li><li><p>å¼€å‘ä¸­è¦è§£å†³çš„é—®é¢˜</p><ul><li>ä»£ç å¤‡ä»½</li><li>ç‰ˆæœ¬æ§åˆ¶</li><li>ååŒå·¥ä½œ</li><li>è´£ä»»è¿½æº¯</li></ul></li></ul><h3 id="1-3SVNç‰ˆæœ¬æ§åˆ¶-ç†è§£"><a href="#1-3SVNç‰ˆæœ¬æ§åˆ¶-ç†è§£" class="headerlink" title="1.3SVNç‰ˆæœ¬æ§åˆ¶(ç†è§£)"></a>1.3SVNç‰ˆæœ¬æ§åˆ¶(ç†è§£)</h3><p>SVNæ˜¯é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç‰ˆæœ¬åº“æ˜¯é›†ä¸­æ”¾åœ¨ä¸­å¤®æœåŠ¡å™¨çš„ï¼Œè€Œå¼€å‘äººå‘˜å·¥ä½œçš„æ—¶å€™ï¼Œç”¨çš„éƒ½æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œ<br>æ‰€ä»¥é¦–å…ˆè¦ä»ä¸­å¤®æœåŠ¡å™¨ä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå¼€å‘ï¼Œå¼€å‘å®Œåï¼Œéœ€è¦æŠŠè‡ªå·±å¼€å‘çš„ä»£ç æäº¤åˆ°ä¸­å¤®æœåŠ¡å™¨ã€‚</p><ul><li><p>æœåŠ¡å™¨å•ç‚¹æ•…éšœ</p><p>å°†ä¼šå¯¼è‡´æ‰€æœ‰äººå‘˜æ— æ³•å·¥ä½œ</p></li><li><p>è€ŒæœåŠ¡å™¨ç¡¬ç›˜æŸå</p><p>è¿™æ„å‘³ç€ï¼Œä½ å¯èƒ½å¤±å»äº†è¯¥é¡¹ç›®çš„æ‰€æœ‰å†å²è®°å½•ï¼Œè¿™æ˜¯æ¯ç­æ€§çš„ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee4e30.png" alt="06_svnå’Œgitçš„å¯¹æ¯”"></p></li></ul><h3 id="1-4Gitç‰ˆæœ¬æ§åˆ¶-ç†è§£"><a href="#1-4Gitç‰ˆæœ¬æ§åˆ¶-ç†è§£" class="headerlink" title="1.4Gitç‰ˆæœ¬æ§åˆ¶(ç†è§£)"></a>1.4Gitç‰ˆæœ¬æ§åˆ¶(ç†è§£)</h3><p>Gitæ˜¯åœ¨2005å¹´ï¼ŒLinuxç³»ç»Ÿçš„åˆ›å»ºè€…Linus Torvalds,ä¸ºäº†å¸®åŠ©å…¨çƒçš„å¼€å‘è€…ï¼Œç»´æŠ¤Linuxç³»ç»Ÿå†…æ ¸çš„å¼€å‘<br>è€Œå¼€å‘äº†è‡ªå·±çš„å¼€æºåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·,åˆ†ä¸ºä¸¤ç§ç±»å‹çš„ä»“åº“ï¼šæœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“ã€‚</p><ul><li><p>æ¯ä¸€ä¸ªå®¢æˆ·ç«¯éƒ½ä¿å­˜äº†å®Œæ•´çš„å†å²è®°å½•</p><p>æœåŠ¡å™¨çš„æ•…éšœï¼Œéƒ½å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯çš„è®°å½•å¾—ä»¥æ¢å¤ã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee4ed5.png" alt="07_svnå’Œgitçš„å¯¹æ¯”"></p></li></ul><h2 id="2-Gitä¸‹è½½å’Œå®‰è£…"><a href="#2-Gitä¸‹è½½å’Œå®‰è£…" class="headerlink" title="2.Gitä¸‹è½½å’Œå®‰è£…"></a>2.Gitä¸‹è½½å’Œå®‰è£…</h2><h3 id="2-1Gitçš„ä¸‹è½½-åº”ç”¨"><a href="#2-1Gitçš„ä¸‹è½½-åº”ç”¨" class="headerlink" title="2.1Gitçš„ä¸‹è½½(åº”ç”¨)"></a>2.1Gitçš„ä¸‹è½½(åº”ç”¨)</h3><p>å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee4f42.png" alt="08_Gitçš„ä¸‹è½½"></p><h3 id="2-2Gitçš„å®‰è£…-åº”ç”¨"><a href="#2-2Gitçš„å®‰è£…-åº”ç”¨" class="headerlink" title="2.2Gitçš„å®‰è£…(åº”ç”¨)"></a>2.2Gitçš„å®‰è£…(åº”ç”¨)</h3><ol><li><p>åŒå‡»å®‰è£…åŒ…ï¼Œè¿›å…¥å®‰è£…å‘å¯¼ç•Œé¢</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee4fbd.png" alt="09_Gitçš„å®‰è£…01"></p></li><li><p>æŒ‡å®šå®‰è£…ç›®å½•</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee502c.png" alt="10_Gitçš„å®‰è£…02"></p></li><li><p>ä¸€è·¯nextä¸‹ä¸€æ­¥</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee50b4.png" alt="11_Gitçš„å®‰è£…03"></p></li><li><p>ç­‰å¾…å®‰è£…</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee5103.png" alt="12_Gitçš„å®‰è£…04"></p></li><li><p>å®‰è£…å®Œæˆ</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee517a.png" alt="13_Gitçš„å®‰è£…05"></p></li><li><p>å®‰è£…å®Œæˆååœ¨ç”µè„‘æ¡Œé¢ï¼ˆä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç›®å½•ï¼‰ç‚¹å‡»å³é”®ï¼Œå¦‚æœèƒ½å¤Ÿçœ‹åˆ°å¦‚ä¸‹ä¸¤ä¸ªèœå•åˆ™è¯´æ˜Gitå®‰è£…æˆåŠŸã€‚</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee51ea.png" alt="14_Gitçš„å®‰è£…06"></p></li><li><p>è¿è¡ŒGitå‘½ä»¤å®¢æˆ·ç«¯ï¼Œä½¿ç”¨git â€“version å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹gitç‰ˆæœ¬</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee520e.png" alt="15_Gitçš„å®‰è£…07"></p></li></ol><h3 id="2-3TortoiseGitçš„å®‰è£…-åº”ç”¨"><a href="#2-3TortoiseGitçš„å®‰è£…-åº”ç”¨" class="headerlink" title="2.3TortoiseGitçš„å®‰è£…(åº”ç”¨)"></a>2.3TortoiseGitçš„å®‰è£…(åº”ç”¨)</h3><ol><li><p>åŒå‡»å®‰è£…åŒ…ï¼Œè¿›å…¥å®‰è£…å‘å¯¼ç•Œé¢</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee523b.png" alt="16_TortiseGitçš„å®‰è£…"></p></li><li><p>ä¸€è·¯nextä¸‹ä¸€æ­¥</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee524f.png" alt="17_TortiseGitçš„å®‰è£…"></p></li><li><p>æŒ‡å®šå®‰è£…ç›®å½•<br><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee525f.png" alt="18_TortiseGitçš„å®‰è£…"></p></li><li><p>å®‰è£…</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee5271.png" alt="19_TortiseGitçš„å®‰è£…"></p></li><li><p>é…ç½®</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee5285.png" alt="20_TortiseGitçš„å®‰è£…"></p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee5298.png" alt="21_TortiseGitçš„å®‰è£…"></p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee52b1.png" alt="22_TortiseGitçš„å®‰è£…"></p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee52c7.png" alt="23_TortiseGitçš„å®‰è£…"></p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee52d7.png" alt="24_TortiseGitçš„å®‰è£…"></p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee52ea.png" alt="25_TortiseGitçš„å®‰è£…"></p></li><li><p>å®‰è£…TortoiseGitä¸­æ–‡è¯­è¨€åŒ…,ä¸€è·¯nextå³å¯</p></li></ol><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee52fc.png" alt="26_TortiseGitçš„å®‰è£…"></p><ol start="7"><li><p>é…ç½®TortoiseGitä¸­æ–‡è¯­è¨€</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee5310.png" alt="27_TortiseGitçš„å®‰è£…"></p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee5329.png" alt="28_TortiseGitçš„å®‰è£…"></p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee533f.png" alt="29_TortiseGitçš„å®‰è£…"></p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee5359.png" alt="30_TortiseGitçš„å®‰è£…"></p></li></ol><h2 id="3-Gitæ“ä½œå…¥é—¨"><a href="#3-Gitæ“ä½œå…¥é—¨" class="headerlink" title="3.Gitæ“ä½œå…¥é—¨"></a>3.Gitæ“ä½œå…¥é—¨</h2><h3 id="3-1GitåŸºæœ¬å·¥ä½œæµç¨‹-ç†è§£"><a href="#3-1GitåŸºæœ¬å·¥ä½œæµç¨‹-ç†è§£" class="headerlink" title="3.1GitåŸºæœ¬å·¥ä½œæµç¨‹(ç†è§£)"></a>3.1GitåŸºæœ¬å·¥ä½œæµç¨‹(ç†è§£)</h3><p>æœ¬åœ°ä»“åº“</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee537a.png" alt="31_GitåŸºæœ¬å·¥ä½œæµç¨‹"></p><h3 id="3-2Gitå‘½ä»¤è¡Œæ“ä½œ-åº”ç”¨"><a href="#3-2Gitå‘½ä»¤è¡Œæ“ä½œ-åº”ç”¨" class="headerlink" title="3.2Gitå‘½ä»¤è¡Œæ“ä½œ(åº”ç”¨)"></a>3.2Gitå‘½ä»¤è¡Œæ“ä½œ(åº”ç”¨)</h3><ul><li><p>gitå¸¸ç”¨å‘½ä»¤</p><table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>git init</td><td>åˆå§‹åŒ–ï¼Œåˆ›å»º git ä»“åº“</td></tr><tr><td>git status</td><td>æŸ¥çœ‹ git çŠ¶æ€ ï¼ˆæ–‡ä»¶æ˜¯å¦è¿›è¡Œäº†æ·»åŠ ã€æäº¤æ“ä½œï¼‰</td></tr><tr><td>git add æ–‡ä»¶å</td><td>æ·»åŠ ï¼Œå°†æŒ‡å®šæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</td></tr><tr><td>git commit -m â€˜æäº¤ä¿¡æ¯â€™</td><td>æäº¤ï¼Œå°†æš‚å­˜åŒºæ–‡ä»¶æäº¤åˆ°å†å²ä»“åº“</td></tr><tr><td>git log</td><td>æŸ¥çœ‹æ—¥å¿—ï¼ˆ git æäº¤çš„å†å²æ—¥å¿—ï¼‰</td></tr></tbody></table></li><li><p>æ“ä½œæ­¥éª¤</p><ol><li><p>åˆ›å»ºå·¥ä½œç›®å½•ã€åˆå§‹åŒ–æœ¬åœ° git ä»“åº“</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee539e.png" alt="32_Gitå·¥ä½œæµç¨‹"></p></li><li><p>æ–°å»ºä¸€ä¸ª test.txt æ–‡ä»¶ï¼ˆæš‚ä¸æ‰§è¡Œæ·»åŠ æ“ä½œï¼‰</p></li><li><p>ä½¿ç”¨ status å‘½ä»¤ï¼ŒæŸ¥çœ‹çŠ¶æ€</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee53b0.png" alt="33_Gitå·¥ä½œæµç¨‹"></p></li><li><p>ä½¿ç”¨ add å‘½ä»¤æ·»åŠ ï¼Œå¹¶æŸ¥çœ‹çŠ¶æ€</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee53c3.png" alt="34_Gitå·¥ä½œæµç¨‹"></p></li><li><p>ä½¿ç”¨ commit å‘½ä»¤ï¼Œæäº¤åˆ°æœ¬åœ°å†å²ä»“åº“</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee53d4.png" alt="35_Gitå·¥ä½œæµç¨‹"></p></li><li><p>ä½¿ç”¨ log å‘½ä»¤ï¼ŒæŸ¥çœ‹æ—¥å¿—</p><p><img src="https://pic.imgdb.cn/item/623e9bf427f86abb2aee53df.png" alt="36_Gitå·¥ä½œæµç¨‹"></p></li><li><p>ä¿®æ”¹ test.txt æ–‡ä»¶</p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee54fc.png" alt="37_Gitå·¥ä½œæµç¨‹"></p></li><li><p>æ·»åŠ å¹¶æäº¤ï¼ŒæŸ¥çœ‹æ—¥å¿—</p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee550c.png" alt="38_Gitå·¥ä½œæµç¨‹"></p></li></ol></li></ul><h3 id="3-3Gitå›¾å½¢åŒ–å·¥å…·æ“ä½œ-ç†è§£"><a href="#3-3Gitå›¾å½¢åŒ–å·¥å…·æ“ä½œ-ç†è§£" class="headerlink" title="3.3Gitå›¾å½¢åŒ–å·¥å…·æ“ä½œ(ç†è§£)"></a>3.3Gitå›¾å½¢åŒ–å·¥å…·æ“ä½œ(ç†è§£)</h3><ol><li><p>åˆ›å»ºå·¥ä½œç›®å½•ã€åˆå§‹åŒ–æœ¬åœ° git ä»“åº“</p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee551b.png" alt="39_Gitå·¥ä½œæµç¨‹"></p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee552c.png" alt="40_Gitå·¥ä½œæµç¨‹"></p></li><li><p>æ–°å»ºä¸€ä¸ª test.txt æ–‡ä»¶ï¼ˆæš‚ä¸æ‰§è¡Œæ·»åŠ æ“ä½œï¼‰</p></li><li><p>é€‰ä¸­æ–‡ä»¶å³é”®ï¼Œé€‰æ‹©TortoiseGitï¼Œä¹‹åé€‰æ‹©æ·»åŠ </p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee553c.png" alt="41_Gitå·¥ä½œæµç¨‹"></p></li><li><p>ç©ºç™½å¤„å³é”®,Gitæäº¤,æäº¤åˆ°æœ¬åœ°å†å²ä»“åº“</p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee554a.png" alt="42_Gitå·¥ä½œæµç¨‹"></p></li><li><p>ç©ºç™½å¤„å³é”®,TortoiseGit,æ˜¾ç¤ºæ—¥å¿—,å¯ä»¥äº§çœ‹æ—¥å¿—ä¿¡æ¯</p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5556.png" alt="43_Gitå·¥ä½œæµç¨‹"></p></li><li><p>ä¿®æ”¹ test.txt æ–‡ä»¶</p></li><li><p>æ·»åŠ å¹¶æäº¤ï¼ŒæŸ¥çœ‹æ—¥å¿—</p></li></ol><h2 id="4-Gitç‰ˆæœ¬ç®¡ç†"><a href="#4-Gitç‰ˆæœ¬ç®¡ç†" class="headerlink" title="4.Gitç‰ˆæœ¬ç®¡ç†"></a>4.Gitç‰ˆæœ¬ç®¡ç†</h2><h3 id="4-1å†å²ç‰ˆæœ¬åˆ‡æ¢-ç†è§£"><a href="#4-1å†å²ç‰ˆæœ¬åˆ‡æ¢-ç†è§£" class="headerlink" title="4.1å†å²ç‰ˆæœ¬åˆ‡æ¢(ç†è§£)"></a>4.1å†å²ç‰ˆæœ¬åˆ‡æ¢(ç†è§£)</h3><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5564.png" alt="44_å†å²ç‰ˆæœ¬åˆ‡æ¢"></p><ul><li><p>å‡†å¤‡åŠ¨ä½œ</p><ol><li>æŸ¥çœ‹ my_project çš„ log æ—¥å¿—<br>git reflog ï¼šå¯ä»¥æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰æ“ä½œè®°å½•ï¼ˆåŒ…æ‹¬å·²ç»è¢«åˆ é™¤çš„ commit è®°å½•çš„æ“ä½œï¼‰</li><li>å¢åŠ ä¸€æ¬¡æ–°çš„ä¿®æ”¹è®°å½•</li></ol></li><li><p>éœ€æ±‚: å°†ä»£ç åˆ‡æ¢åˆ°ç¬¬äºŒæ¬¡ä¿®æ”¹çš„ç‰ˆæœ¬</p><p>æŒ‡ä»¤ï¼šgit reset â€“hard ç‰ˆæœ¬å”¯ä¸€ç´¢å¼•å€¼</p></li></ul><h3 id="4-2åˆ†æ”¯ç®¡ç†ä»‹ç»-ç†è§£"><a href="#4-2åˆ†æ”¯ç®¡ç†ä»‹ç»-ç†è§£" class="headerlink" title="4.2åˆ†æ”¯ç®¡ç†ä»‹ç»(ç†è§£)"></a>4.2åˆ†æ”¯ç®¡ç†ä»‹ç»(ç†è§£)</h3><ul><li><p>åˆ†æ”¯</p><ul><li>ç”±æ¯æ¬¡æäº¤çš„ä»£ç ï¼Œä¸²æˆçš„ä¸€æ¡æ—¶é—´çº¿</li><li>ä½¿ç”¨åˆ†æ”¯æ„å‘³ç€ä½ å¯ä»¥æŠŠä½ çš„å·¥ä½œä»å¼€å‘ä¸»çº¿ä¸Šåˆ†ç¦»å¼€æ¥,ä»¥å…å½±å“å¼€å‘ä¸»çº¿</li></ul></li><li><p>åˆ†æ”¯çš„ä½¿ç”¨åœºæ™¯</p><ol><li>å‘¨æœŸè¾ƒé•¿çš„æ¨¡å—å¼€å‘<br>å‡è®¾ä½ å‡†å¤‡å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦ä¸€ä¸ªæœˆæ‰èƒ½å®Œæˆ<br>ç¬¬ä¸€å‘¨å†™äº†20%çš„ä»£ç ï¼Œçªç„¶å‘ç°åŸæ¥å·²ç»å†™å¥½çš„åŠŸèƒ½å‡ºç°äº†ä¸€ä¸ªä¸¥é‡çš„Bug<br>é‚£ç°åœ¨å°±éœ€è¦æ”¾ä¸‹æ‰‹ä¸­çš„æ–°åŠŸèƒ½ï¼Œå»ä¿®å¤Bug<br>ä½†è¿™20%çš„ä»£ç ä¸èƒ½èˆå¼ƒï¼Œå¹¶ä¸”ä¹Ÿæ‹…å¿ƒä¸¢å¤±ï¼Œè¿™å°±éœ€è¦å¼€å¯ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬æ§åˆ¶ã€‚</li><li>å°è¯•æ€§çš„æ¨¡å—å¼€å‘<br>ä¸šåŠ¡äººå‘˜ç»™æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªéœ€æ±‚ï¼Œç»è¿‡æˆ‘ä»¬çš„æ€è€ƒå’Œåˆ†æ<br>è¯¥éœ€æ±‚åº”è¯¥å¯ä»¥ä½¿ç”¨æŠ€æœ¯æ‰‹æ®µè¿›è¡Œå®ç°ã€‚<br>ä½†æ˜¯æˆ‘ä»¬è¿˜ä¸æ•¢ç¡®å®šï¼Œæˆ‘ä»¬å°±å¯ä»¥å»åˆ›å»ºä¸€ä¸ªåˆ†æ”¯åŸºäºåˆ†æ”¯è¿›è¡Œå°è¯•æ€§å¼€å‘ã€‚</li></ol></li><li><p>åˆ†æ”¯å·¥ä½œæµç¨‹</p><ul><li><p>Master: æŒ‡å‘æäº¤çš„ä»£ç ç‰ˆæœ¬</p></li><li><p>Header: æŒ‡å‘å½“å‰æ‰€ä½¿ç”¨çš„çš„åˆ†æ”¯</p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5574.png" alt="45_åˆ†æ”¯å·¥ä½œæµç¨‹ä»‹ç»"></p></li></ul></li></ul><h3 id="4-3åˆ†æ”¯ç®¡ç†æ“ä½œ-åº”ç”¨"><a href="#4-3åˆ†æ”¯ç®¡ç†æ“ä½œ-åº”ç”¨" class="headerlink" title="4.3åˆ†æ”¯ç®¡ç†æ“ä½œ(åº”ç”¨)"></a>4.3åˆ†æ”¯ç®¡ç†æ“ä½œ(åº”ç”¨)</h3><ul><li><p>åˆ›å»ºå’Œåˆ‡æ¢</p><p>åˆ›å»ºå‘½ä»¤ï¼šgit branch åˆ†æ”¯å<br>åˆ‡æ¢å‘½ä»¤ï¼šgit checkout åˆ†æ”¯å</p></li><li><p>æ–°åˆ†æ”¯æ·»åŠ æ–‡ä»¶</p><p>æŸ¥çœ‹æ–‡ä»¶å‘½ä»¤ï¼šls</p><p>æ€»ç»“ï¼šä¸åŒåˆ†æ”¯ä¹‹é—´çš„å…³ç³»æ˜¯å¹³è¡Œçš„å…³ç³»ï¼Œä¸ä¼šç›¸äº’å½±å“</p></li><li><p>åˆå¹¶åˆ†æ”¯</p><p>åˆå¹¶å‘½ä»¤ï¼šgit merge åˆ†æ”¯å</p></li><li><p>åˆ é™¤åˆ†æ”¯</p><p>åˆ é™¤å‘½ä»¤ï¼šgit branch -d åˆ†æ”¯å</p></li><li><p>æŸ¥çœ‹åˆ†æ”¯åˆ—è¡¨</p><p>æŸ¥çœ‹å‘½ä»¤ï¼šgit branch</p></li></ul><h2 id="5-è¿œç¨‹ä»“åº“"><a href="#5-è¿œç¨‹ä»“åº“" class="headerlink" title="5.è¿œç¨‹ä»“åº“"></a>5.è¿œç¨‹ä»“åº“</h2><h3 id="5-1è¿œç¨‹ä»“åº“å·¥ä½œæµç¨‹-ç†è§£"><a href="#5-1è¿œç¨‹ä»“åº“å·¥ä½œæµç¨‹-ç†è§£" class="headerlink" title="5.1è¿œç¨‹ä»“åº“å·¥ä½œæµç¨‹(ç†è§£)"></a>5.1è¿œç¨‹ä»“åº“å·¥ä½œæµç¨‹(ç†è§£)</h3><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5586.png" alt="46_è¿œç¨‹ä»“åº“"></p><h3 id="5-2è¿œç¨‹ä»“åº“å¹³å°ä»‹ç»-ç†è§£"><a href="#5-2è¿œç¨‹ä»“åº“å¹³å°ä»‹ç»-ç†è§£" class="headerlink" title="5.2è¿œç¨‹ä»“åº“å¹³å°ä»‹ç»(ç†è§£)"></a>5.2è¿œç¨‹ä»“åº“å¹³å°ä»‹ç»(ç†è§£)</h3><ul><li><p>GitHub</p><p>åŸŸåï¼š<a href="https://github.com/">https://github.com</a><br>ä»‹ç»ï¼šGitHubæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºé¡¹ç›®æ‰˜ç®¡å¹³å°ï¼Œä¿—ç§°å¤§å‹ç¨‹åºå‘˜ç¤¾åŒºåŒ–äº¤å‹ç½‘ç«™</p><pre><code class="hljs">    å„ç±»å¥½ç©æœ‰è¶£çš„å¼€æºé¡¹ç›®ï¼Œåªæœ‰æƒ³ä¸åˆ°ï¼Œæ²¡æœ‰æ‰¾ä¸åˆ°ã€‚</code></pre></li><li><p>ç äº‘</p><p>åŸŸåï¼š<a href="https://gitee.com/">https://gitee.com</a><br>ä»‹ç»ï¼šç äº‘æ˜¯å…¨å›½æœ€å¤§çš„å¼€æºé¡¹ç›®æ‰˜ç®¡å¹³å°ï¼Œè‰¯å¿ƒå¹³å°ï¼Œé€Ÿåº¦å¿«ï¼Œæä¾›å…è´¹ç§æœ‰åº“</p></li></ul><h3 id="5-3ç äº‘çš„æ³¨å†Œ-åº”ç”¨"><a href="#5-3ç äº‘çš„æ³¨å†Œ-åº”ç”¨" class="headerlink" title="5.3ç äº‘çš„æ³¨å†Œ(åº”ç”¨)"></a>5.3ç äº‘çš„æ³¨å†Œ(åº”ç”¨)</h3><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee55a4.png" alt="47_ç äº‘çš„æ³¨å†Œ"></p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee55c6.png" alt="48_ç äº‘çš„æ³¨å†Œ"></p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee55e3.png" alt="49_ç äº‘çš„æ³¨å†Œ"></p><h3 id="5-4å…ˆæœ‰æœ¬åœ°é¡¹ç›®-è¿œç¨‹ä¸ºç©º-åº”ç”¨"><a href="#5-4å…ˆæœ‰æœ¬åœ°é¡¹ç›®-è¿œç¨‹ä¸ºç©º-åº”ç”¨" class="headerlink" title="5.4å…ˆæœ‰æœ¬åœ°é¡¹ç›®,è¿œç¨‹ä¸ºç©º(åº”ç”¨)"></a>5.4å…ˆæœ‰æœ¬åœ°é¡¹ç›®,è¿œç¨‹ä¸ºç©º(åº”ç”¨)</h3><ul><li><p>æ­¥éª¤</p><ol><li>åˆ›å»ºæœ¬åœ°ä»“åº“</li><li>åˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶ï¼Œæ·»åŠ ï¼ˆaddï¼‰æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œæäº¤ï¼ˆcommitï¼‰åˆ°æœ¬åœ°ä»“åº“</li><li>åˆ›å»ºè¿œç¨‹ä»“åº“</li><li>æ¨é€åˆ°è¿œç¨‹ä»“åº“</li></ol></li><li><p>åˆ›å»ºè¿œç¨‹ä»“åº“</p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee55f7.png" alt="50_åˆ›å»ºè¿œç¨‹ä»“åº“"></p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5609.png" alt="51_åˆ›å»ºè¿œç¨‹ä»“åº“"></p></li><li><p>ç”ŸæˆSSHå…¬é’¥</p><ul><li><p>æ¨é€ä»£ç ä¹‹å‰ï¼Œéœ€è¦å…ˆé…ç½®SSHå…¬é’¥</p><p><img src="/Hexo/../img/52_%E9%85%8D%E7%BD%AESSH%E5%85%AC%E9%92%A5.png" alt="52_é…ç½®SSHå…¬é’¥"></p></li><li><p>ç”ŸæˆSSHå…¬é’¥æ­¥éª¤</p><ol><li><p>è®¾ç½®Gitè´¦æˆ·</p><ul><li>git config user.nameï¼ˆæŸ¥çœ‹gitè´¦æˆ·ï¼‰</li><li>git config user.emailï¼ˆæŸ¥çœ‹gité‚®ç®±ï¼‰</li><li>git config â€“global user.name â€œè´¦æˆ·åâ€ï¼ˆè®¾ç½®å…¨å±€è´¦æˆ·åï¼‰</li><li>git config â€“global user.email â€œé‚®ç®±â€ï¼ˆè®¾ç½®å…¨å±€é‚®ç®±ï¼‰</li><li>cd ~&#x2F;.sshï¼ˆæŸ¥çœ‹æ˜¯å¦ç”Ÿæˆè¿‡SSHå…¬é’¥ï¼‰</li></ul><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee562f.png" alt="53_é…ç½®SSHå…¬é’¥"></p></li><li><p>ç”ŸæˆSSHå…¬é’¥</p><ul><li>ç”Ÿæˆå‘½ä»¤: ssh-keygen â€“t rsa â€“C â€œé‚®ç®±â€ ( æ³¨æ„ï¼šè¿™é‡Œéœ€è¦æ•²3æ¬¡å›è½¦)</li></ul><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5641.png" alt="54_é…ç½®SSHå…¬é’¥"></p><ul><li>æŸ¥çœ‹å‘½ä»¤: cat ~&#x2F;.ssh&#x2F;id-rsa.pub</li></ul><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5653.png" alt="55_é…ç½®SSHå…¬é’¥"></p></li><li><p>è®¾ç½®è´¦æˆ·å…¬é’¥</p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5669.png" alt="56_é…ç½®SSHå…¬é’¥"></p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5737.png" alt="57_é…ç½®SSHå…¬é’¥"></p></li><li><p>å…¬é’¥æµ‹è¯•</p><ul><li>å‘½ä»¤: ssh -T <a href="mailto:&#103;&#105;&#116;&#x40;&#x67;&#x69;&#x74;&#101;&#x65;&#x2e;&#99;&#111;&#109;">&#103;&#105;&#116;&#x40;&#x67;&#x69;&#x74;&#101;&#x65;&#x2e;&#99;&#111;&#109;</a></li></ul><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee57d1.png" alt="58_é…ç½®SSHå…¬é’¥"></p></li></ol></li></ul></li><li><p>æ¨é€åˆ°è¿œç¨‹ä»“åº“</p></li><li><p>æ­¥éª¤</p><ol><li>ä¸ºè¿œç¨‹ä»“åº“çš„URLï¼ˆç½‘å€ï¼‰ï¼Œè‡ªå®šä¹‰ä»“åº“åç§°</li><li>æ¨é€</li></ol></li><li><p>å‘½ä»¤<br>   git remote add è¿œç¨‹åç§° è¿œç¨‹ä»“åº“URL<br>   git push -u ä»“åº“åç§° åˆ†æ”¯å</p><p><img src="https://pic.imgdb.cn/item/623e9bf527f86abb2aee5a9b.png" alt="59_é…ç½®SSHå…¬é’¥"></p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5ab8.png" alt="60_é…ç½®SSHå…¬é’¥"></p></li></ul><h3 id="5-5å…ˆæœ‰è¿œç¨‹ä»“åº“-æœ¬åœ°ä¸ºç©º-åº”ç”¨"><a href="#5-5å…ˆæœ‰è¿œç¨‹ä»“åº“-æœ¬åœ°ä¸ºç©º-åº”ç”¨" class="headerlink" title="5.5å…ˆæœ‰è¿œç¨‹ä»“åº“,æœ¬åœ°ä¸ºç©º(åº”ç”¨)"></a>5.5å…ˆæœ‰è¿œç¨‹ä»“åº“,æœ¬åœ°ä¸ºç©º(åº”ç”¨)</h3><ul><li>æ­¥éª¤<ol><li>å°†è¿œç¨‹ä»“åº“çš„ä»£ç ï¼Œå…‹éš†åˆ°æœ¬åœ°ä»“åº“<br> å…‹éš†å‘½ä»¤ï¼šgit clone ä»“åº“åœ°å€</li><li>åˆ›å»ºæ–°æ–‡ä»¶ï¼Œæ·»åŠ å¹¶æäº¤åˆ°æœ¬åœ°ä»“åº“</li><li>æ¨é€è‡³è¿œç¨‹ä»“åº“</li><li>é¡¹ç›®æ‹‰å–æ›´æ–°<br> æ‹‰å–å‘½ä»¤ï¼šgit pull è¿œç¨‹ä»“åº“å åˆ†æ”¯å</li></ol></li></ul><h3 id="5-6ä»£ç å†²çª-åº”ç”¨"><a href="#5-6ä»£ç å†²çª-åº”ç”¨" class="headerlink" title="5.6ä»£ç å†²çª(åº”ç”¨)"></a>5.6ä»£ç å†²çª(åº”ç”¨)</h3><ul><li><p>äº§ç”ŸåŸå› :</p><p>ä¸¤ä¸ªç¨‹åºå‘˜æ“ä½œåŒä¸€ä¸ªæ–‡ä»¶,å…¶ä¸­ä¸€ä¸ªç¨‹åºå‘˜åœ¨ä¿®æ”¹æ–‡ä»¶å,pushåˆ°è¿œç¨‹ä»“åº“,å¦ä¸€ä¸ªç¨‹åºå‘˜åº”è¯¥å…ˆpullå°†æœ€æ–°çš„ä»£ç æ›´æ–°åˆ°æœ¬åœ°ä»“åº“å,åœ¨ä¿®æ”¹ä»£ç ,ä¹‹åpushåˆ°è¿œç¨‹ä»“åº“,ç»“æœä»–æ²¡æœ‰å…ˆpullå°†æœ€æ–°çš„ä»£ç æ›´æ–°åˆ°æœ¬åœ°ä»“åº“,è€Œæ˜¯ç›´æ¥å°†è‡ªå·±çš„ä»£ç pushåˆ°è¿œç¨‹ä»“åº“,è¿™æ ·å°±å¯èƒ½ä¼šå¯¼è‡´ä»£ç å†²çª</p></li></ul><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5ad9.png" alt="61_ä»£ç å†²çª"></p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5aeb.png" alt="62_ä»£ç å†²çª"></p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5b1c.png" alt="63_ä»£ç å†²çª"></p><ul><li><p>å¦‚ä½•è§£å†³å†²çª</p><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt;å’Œ&gt;&gt;&gt;&gt;&gt;&gt;&gt;ä¸­é—´çš„å†…å®¹,å°±æ˜¯å†²çªéƒ¨åˆ†</p><ol><li>ä¿®æ”¹å†²çªè¡Œï¼Œä¿å­˜ï¼Œå³å¯è§£å†³å†²çªã€‚</li><li>é‡æ–°addå†²çªæ–‡ä»¶å¹¶commitåˆ°æœ¬åœ°ä»“åº“ï¼Œé‡æ–°pushåˆ°è¿œç¨‹</li></ol></li></ul><h2 id="6-IDEAé›†æˆGit"><a href="#6-IDEAé›†æˆGit" class="headerlink" title="6.IDEAé›†æˆGit"></a>6.IDEAé›†æˆGit</h2><h3 id="6-1IDEAä¸­é…ç½®Git-åº”ç”¨"><a href="#6-1IDEAä¸­é…ç½®Git-åº”ç”¨" class="headerlink" title="6.1IDEAä¸­é…ç½®Git(åº”ç”¨)"></a>6.1IDEAä¸­é…ç½®Git(åº”ç”¨)</h3><ol><li>File -&gt; Settings</li></ol><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5b37.png" alt="64_IDEAä¸­é…ç½®Git"></p><ol start="2"><li>Version Control -&gt; Git -&gt; æŒ‡å®šgit.exeå­˜æ”¾ç›®å½•</li></ol><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5b4d.png" alt="65_IDEAä¸­é…ç½®Git"></p><ol start="3"><li>ç‚¹å‡»Testæµ‹è¯•</li></ol><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5b60.png" alt="66_IDEAä¸­é…ç½®Git"></p><h3 id="6-2åˆ›å»ºæœ¬åœ°ä»“åº“-åº”ç”¨"><a href="#6-2åˆ›å»ºæœ¬åœ°ä»“åº“-åº”ç”¨" class="headerlink" title="6.2åˆ›å»ºæœ¬åœ°ä»“åº“(åº”ç”¨)"></a>6.2åˆ›å»ºæœ¬åœ°ä»“åº“(åº”ç”¨)</h3><ol><li><p>VCS-&gt;Import into Version Control-&gt;Create Git Repository</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5b73.png" alt="67_åˆ›å»ºæœ¬åœ°ä»“åº“"></p></li><li><p>é€‰æ‹©å·¥ç¨‹æ‰€åœ¨çš„ç›®å½•,è¿™æ ·å°±åˆ›å»ºå¥½æœ¬åœ°ä»“åº“äº†</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5b85.png" alt="68_åˆ›å»ºæœ¬åœ°ä»“åº“"></p></li><li><p>ç‚¹å‡»gitåè¾¹çš„å¯¹å‹¾,å°†å½“å‰é¡¹ç›®ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“</p><p>æ³¨æ„: é¡¹ç›®ä¸­çš„é…ç½®æ–‡ä»¶ä¸éœ€è¦æäº¤åˆ°æœ¬åœ°ä»“åº“ä¸­,æäº¤æ—¶,å¿½ç•¥æ‰å³å¯</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5c26.png" alt="69_åˆ›å»ºæœ¬åœ°ä»“åº“"></p></li></ol><h3 id="6-3ç‰ˆæœ¬åˆ‡æ¢-åº”ç”¨"><a href="#6-3ç‰ˆæœ¬åˆ‡æ¢-åº”ç”¨" class="headerlink" title="6.3ç‰ˆæœ¬åˆ‡æ¢(åº”ç”¨)"></a>6.3ç‰ˆæœ¬åˆ‡æ¢(åº”ç”¨)</h3><ul><li><p>æ–¹å¼ä¸€: æ§åˆ¶å°Version Control-&gt;Log-&gt;Reset Current Branchâ€¦-&gt;Reset</p><p>è¿™ç§åˆ‡æ¢çš„ç‰¹ç‚¹æ˜¯ä¼šæŠ›å¼ƒåŸæ¥çš„æäº¤è®°å½•</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee5d55.png" alt="70_ç‰ˆæœ¬åˆ‡æ¢"></p></li><li><p>æ–¹å¼äºŒ:æ§åˆ¶å°Version Control-&gt;Log-&gt;Revert Commit-&gt;Merge-&gt;å¤„ç†ä»£ç -&gt;commit</p><p>è¿™ç§åˆ‡æ¢çš„ç‰¹ç‚¹æ˜¯ä¼šå½“æˆä¸€ä¸ªæ–°çš„æäº¤è®°å½•,ä¹‹å‰çš„æäº¤è®°å½•ä¹Ÿéƒ½ä¿ç•™</p><img src="C:/Users/Administrator/Desktop/img/71_%E7%89%88%E6%9C%AC%E5%88%87%E6%8D%A2.png" alt="71_ç‰ˆæœ¬åˆ‡æ¢"  /><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee6037.png" alt="72_ç‰ˆæœ¬åˆ‡æ¢"></p></li></ul><h3 id="6-4åˆ†æ”¯ç®¡ç†-åº”ç”¨"><a href="#6-4åˆ†æ”¯ç®¡ç†-åº”ç”¨" class="headerlink" title="6.4åˆ†æ”¯ç®¡ç†(åº”ç”¨)"></a>6.4åˆ†æ”¯ç®¡ç†(åº”ç”¨)</h3><ul><li><p>åˆ›å»ºåˆ†æ”¯</p><p>VCS-&gt;Git-&gt;Branches-&gt;New Branch-&gt;ç»™åˆ†æ”¯èµ·åå­—-&gt;ok</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee6076.png" alt="74_åˆ›å»ºåˆ†æ”¯"></p></li><li><p>åˆ‡æ¢åˆ†æ”¯</p><p>ideaå³ä¸‹è§’Git-&gt;é€‰æ‹©è¦åˆ‡æ¢çš„åˆ†æ”¯-&gt;checkout</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee6093.png" alt="75_åˆ‡æ¢åˆ†æ”¯"></p></li><li><p>åˆå¹¶åˆ†æ”¯</p><p>VCS-&gt;Git-&gt;Merge changes-&gt;é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯-&gt;merge</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee60a7.png" alt="76_åˆå¹¶åˆ†æ”¯"></p><p>å¤„ç†åˆ†æ”¯ä¸­çš„ä»£ç </p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee60c1.png" alt="77_åˆå¹¶åˆ†æ”¯"></p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee60dc.png" alt="78_åˆå¹¶åˆ†æ”¯"></p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee60f5.png" alt="79_åˆå¹¶åˆ†æ”¯"></p></li><li><p>åˆ é™¤åˆ†æ”¯</p><p>ideaå³ä¸‹è§’-&gt;é€‰ä¸­è¦åˆ é™¤çš„åˆ†æ”¯-&gt;Delete</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee610f.png" alt="80_åˆ é™¤åˆ†æ”¯"></p></li></ul><h3 id="6-5æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“-åº”ç”¨"><a href="#6-5æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“-åº”ç”¨" class="headerlink" title="6.5æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“(åº”ç”¨)"></a>6.5æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“(åº”ç”¨)</h3><ol><li><p>VCS-&gt;Git-&gt;Push-&gt;ç‚¹å‡»master Define remote</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee6121.png" alt="81_æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“"></p></li><li><p>å°†è¿œç¨‹ä»“åº“çš„è·¯å¾„å¤åˆ¶è¿‡æ¥-&gt;Push</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee6134.png" alt="82_æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“"></p></li></ol><h3 id="6-6è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°ä»“åº“-åº”ç”¨"><a href="#6-6è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°ä»“åº“-åº”ç”¨" class="headerlink" title="6.6è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°ä»“åº“(åº”ç”¨)"></a>6.6è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°ä»“åº“(åº”ç”¨)</h3><p>File-&gt;Close Project-&gt;Checkout from Version Control-&gt;Git-&gt;æŒ‡å®šè¿œç¨‹ä»“åº“çš„è·¯å¾„-&gt;æŒ‡å®šæœ¬åœ°å­˜æ”¾çš„è·¯å¾„-&gt;clone</p><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee614a.png" alt="83_è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°ä»“åº“"></p>]]></content>
    
    
    <categories>
      
      <category>åˆ†å¸ƒå¼å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git(åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·) -giteeä¸Šä¼ ä»£ç </title>
    <link href="/Hexo/2021/11/21/Git(%E5%88%86%E5%B8%83%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%B7%A5%E5%85%B7)%20-idea%E4%B8%8A%E4%BC%A0%E4%BB%A3%E7%A0%81/"/>
    <url>/Hexo/2021/11/21/Git(%E5%88%86%E5%B8%83%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%B7%A5%E5%85%B7)%20-idea%E4%B8%8A%E4%BC%A0%E4%BB%A3%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="headerlink" title="ä¸€ã€ç®€ä»‹"></a>ä¸€ã€ç®€ä»‹</h1><p>gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆã€é«˜é€Ÿåœ°å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚Gitæ˜¯ Linus Torvalds ä¸ºäº†å¸®åŠ©ç®¡ç† Linux å†…æ ¸å¼€å‘è€Œå¼€å‘çš„ä¸€ä¸ªå¼€æ”¾æºç çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚ åŒç”Ÿæ´»ä¸­çš„è®¸å¤šä¼Ÿå¤§äº‹ç‰©ä¸€æ ·ï¼ŒGit è¯ç”Ÿäºä¸€ä¸ªæå¯Œçº·äº‰å¤§ä¸¾åˆ›æ–°çš„å¹´ä»£ã€‚Linux å†…æ ¸å¼€æºé¡¹ç›®æœ‰ç€ä¸ºæ•°ä¼— å¤šçš„å‚ä¸è€…ã€‚ ç»å¤§å¤šæ•°çš„ Linux å†…æ ¸ç»´æŠ¤å·¥ä½œéƒ½èŠ±åœ¨äº†æäº¤è¡¥ä¸å’Œä¿å­˜å½’æ¡£çš„ç¹çäº‹åŠ¡ä¸Šï¼ˆ1991ï¼2002 å¹´é—´ï¼‰ã€‚ åˆ° 2002 å¹´ï¼Œæ•´ä¸ªé¡¹ç›®ç»„å¼€å§‹å¯ç”¨ä¸€ä¸ªä¸“æœ‰çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ BitKeeper æ¥ç®¡ç†å’Œç»´æŠ¤ä»£ ç ã€‚</p><p><img src="https://img-blog.csdnimg.cn/58f5a24eee9b43e98f9835e7f8310a74.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h1 id="äºŒã€Gitå·¥ä½œæµç¨‹å›¾"><a href="#äºŒã€Gitå·¥ä½œæµç¨‹å›¾" class="headerlink" title="äºŒã€Gitå·¥ä½œæµç¨‹å›¾"></a>äºŒã€Gitå·¥ä½œæµç¨‹å›¾</h1><p><img src="https://img-blog.csdnimg.cn/52df05969afd4e1eb1f0414d38c4d5f5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><p><strong>1. cloneï¼ˆå…‹éš†ï¼‰: ä»è¿œç¨‹ä»“åº“ä¸­å…‹éš†ä»£ç åˆ°æœ¬åœ°ä»“åº“</strong> </p><p><strong>2. checkout ï¼ˆæ£€å‡ºï¼‰:ä»æœ¬åœ°ä»“åº“ä¸­æ£€å‡ºä¸€ä¸ªä»“åº“åˆ†æ”¯ç„¶åè¿›è¡Œä¿®è®¢</strong> </p><p><strong>3. addï¼ˆæ·»åŠ ï¼‰: åœ¨æäº¤å‰å…ˆå°†ä»£ç æäº¤åˆ°æš‚å­˜åŒº</strong> </p><p><strong>4. commitï¼ˆæäº¤ï¼‰: æäº¤åˆ°æœ¬åœ°ä»“åº“ã€‚æœ¬åœ°ä»“åº“ä¸­ä¿å­˜ä¿®æ”¹çš„å„ä¸ªå†å²ç‰ˆæœ¬</strong> </p><p><strong>5. fetch (æŠ“å–) ï¼š ä»è¿œç¨‹åº“ï¼ŒæŠ“å–åˆ°æœ¬åœ°ä»“åº“ï¼Œä¸è¿›è¡Œä»»ä½•çš„åˆå¹¶åŠ¨ä½œï¼Œä¸€èˆ¬æ“ä½œæ¯”è¾ƒå°‘ã€‚</strong></p><p><strong>6. pull (æ‹‰å–) ï¼š ä»è¿œç¨‹åº“æ‹‰åˆ°æœ¬åœ°åº“ï¼Œè‡ªåŠ¨è¿›è¡Œåˆå¹¶(merge)ï¼Œç„¶åæ”¾åˆ°åˆ°å·¥ä½œåŒºï¼Œç›¸å½“äº fetch+merge</strong> </p><p><strong>7. pushï¼ˆæ¨é€ï¼‰ : ä¿®æ”¹å®Œæˆåï¼Œéœ€è¦å’Œå›¢é˜Ÿæˆå‘˜å…±äº«ä»£ç æ—¶ï¼Œå°†ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“</strong></p><h1 id="ä¸‰ã€Gitå®‰è£…ä¸å¸¸ç”¨å‘½ä»¤"><a href="#ä¸‰ã€Gitå®‰è£…ä¸å¸¸ç”¨å‘½ä»¤" class="headerlink" title="ä¸‰ã€Gitå®‰è£…ä¸å¸¸ç”¨å‘½ä»¤"></a>ä¸‰ã€Gitå®‰è£…ä¸å¸¸ç”¨å‘½ä»¤</h1><h2 id="1-åœ¨Git-Bashä¸­ï¼Œä¼šç”¨åˆ°ä¸€äº›åŸºæœ¬çš„linuxå‘½ä»¤ï¼Œåˆ—ä¸¾ï¼š"><a href="#1-åœ¨Git-Bashä¸­ï¼Œä¼šç”¨åˆ°ä¸€äº›åŸºæœ¬çš„linuxå‘½ä»¤ï¼Œåˆ—ä¸¾ï¼š" class="headerlink" title="1.åœ¨Git Bashä¸­ï¼Œä¼šç”¨åˆ°ä¸€äº›åŸºæœ¬çš„linuxå‘½ä»¤ï¼Œåˆ—ä¸¾ï¼š"></a>1.åœ¨Git Bashä¸­ï¼Œä¼šç”¨åˆ°ä¸€äº›åŸºæœ¬çš„linuxå‘½ä»¤ï¼Œåˆ—ä¸¾ï¼š</h2><h1 id="ls-x2F-ll-æŸ¥çœ‹å½“å‰ç›®å½•"><a href="#ls-x2F-ll-æŸ¥çœ‹å½“å‰ç›®å½•" class="headerlink" title="ls&#x2F;ll æŸ¥çœ‹å½“å‰ç›®å½•"></a>ls&#x2F;ll æŸ¥çœ‹å½“å‰ç›®å½•</h1><h1 id="cat-æŸ¥çœ‹æ–‡ä»¶å†…å®¹"><a href="#cat-æŸ¥çœ‹æ–‡ä»¶å†…å®¹" class="headerlink" title="cat æŸ¥çœ‹æ–‡ä»¶å†…å®¹"></a>cat æŸ¥çœ‹æ–‡ä»¶å†…å®¹</h1><h1 id="touch-åˆ›å»ºæ–‡ä»¶"><a href="#touch-åˆ›å»ºæ–‡ä»¶" class="headerlink" title="touch åˆ›å»ºæ–‡ä»¶"></a>touch åˆ›å»ºæ–‡ä»¶</h1><h1 id="vi-viç¼–è¾‘å™¨ï¼ˆä½¿ç”¨viç¼–è¾‘å™¨æ˜¯ä¸ºäº†æ–¹ä¾¿å±•ç¤ºæ•ˆæœï¼Œå­¦å‘˜å¯ä»¥è®°äº‹æœ¬ã€editPlusã€notPad-ç­‰å…¶å®ƒç¼–-è¾‘å™¨ï¼‰-ã€"><a href="#vi-viç¼–è¾‘å™¨ï¼ˆä½¿ç”¨viç¼–è¾‘å™¨æ˜¯ä¸ºäº†æ–¹ä¾¿å±•ç¤ºæ•ˆæœï¼Œå­¦å‘˜å¯ä»¥è®°äº‹æœ¬ã€editPlusã€notPad-ç­‰å…¶å®ƒç¼–-è¾‘å™¨ï¼‰-ã€" class="headerlink" title="vi viç¼–è¾‘å™¨ï¼ˆä½¿ç”¨viç¼–è¾‘å™¨æ˜¯ä¸ºäº†æ–¹ä¾¿å±•ç¤ºæ•ˆæœï¼Œå­¦å‘˜å¯ä»¥è®°äº‹æœ¬ã€editPlusã€notPad++ç­‰å…¶å®ƒç¼– è¾‘å™¨ï¼‰ ã€"></a>vi viç¼–è¾‘å™¨ï¼ˆä½¿ç”¨viç¼–è¾‘å™¨æ˜¯ä¸ºäº†æ–¹ä¾¿å±•ç¤ºæ•ˆæœï¼Œå­¦å‘˜å¯ä»¥è®°äº‹æœ¬ã€editPlusã€notPad++ç­‰å…¶å®ƒç¼– è¾‘å™¨ï¼‰ ã€</h1><h2 id="2-Gitç¯å¢ƒé…ç½®"><a href="#2-Gitç¯å¢ƒé…ç½®" class="headerlink" title="2.Gitç¯å¢ƒé…ç½®"></a>2.Gitç¯å¢ƒé…ç½®</h2><h3 id="3-ä¸‹è½½ä¸å®‰è£…"><a href="#3-ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="3.ä¸‹è½½ä¸å®‰è£…"></a>3.ä¸‹è½½ä¸å®‰è£…</h3><p>åœ°å€ ï¼š<a href="https://git-scm.com/download">Git - Downloads (git-scm.com)</a></p><p><img src="https://img-blog.csdnimg.cn/722a5fe41ece49e3900422fe06d69988.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è£…å®Œå</p><p><img src="https://img-blog.csdnimg.cn/2d9024f79d3c4394bb213e67ff5fc920.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_12,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> å¤‡æ³¨ï¼š</p><p>Git GUIï¼šGitæä¾›çš„å›¾å½¢ç•Œé¢å·¥å…·</p><p>Git Bashï¼šGitæä¾›çš„å‘½ä»¤è¡Œå·¥å…·</p><p>\1. æ‰“å¼€Git Bash</p><p>\2. è®¾ç½®ç”¨æˆ·ä¿¡æ¯</p><p><strong>git config â€“global user.name â€œxxxâ€</strong></p><p><strong>git config â€“global user.email â€œxxx@xxxâ€</strong> </p><p>æŸ¥çœ‹é…ç½®ä¿¡æ¯</p><p><strong>git config â€“global user.name</strong> </p><p><strong>git config â€“global user.email</strong></p><p>ä¸ºå¸¸ç”¨æŒ‡ä»¤é…ç½®åˆ«åï¼ˆå¯é€‰ï¼‰ æœ‰äº›å¸¸ç”¨çš„æŒ‡ä»¤å‚æ•°éå¸¸å¤šï¼Œæ¯æ¬¡éƒ½è¦è¾“å…¥å¥½å¤šå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ«åã€‚</p><h1 id="4-è·å–æœ¬åœ°ä»“åº“"><a href="#4-è·å–æœ¬åœ°ä»“åº“" class="headerlink" title="4.è·å–æœ¬åœ°ä»“åº“"></a>4.è·å–æœ¬åœ°ä»“åº“</h1><p>è¦ä½¿ç”¨Gitå¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œé¦–å…ˆéœ€è¦è·å¾—æœ¬åœ°ä»“åº“</p><p>1ï¼‰åœ¨ç”µè„‘çš„ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼ˆä¾‹å¦‚testï¼‰ä½œä¸ºæˆ‘ä»¬çš„æœ¬åœ°Gitä»“åº“</p><p>2ï¼‰è¿›å…¥è¿™ä¸ªç›®å½•ä¸­ï¼Œç‚¹å‡»å³é”®æ‰“å¼€Git bashçª—å£</p><p>3ï¼‰æ‰§è¡Œå‘½ä»¤git init</p><p><img src="https://img-blog.csdnimg.cn/47e5c2f3d1ff4ecb8ccad67358bae22e.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> <img src="https://img-blog.csdnimg.cn/ceeecd7a280f4b1a9f434091ff366148.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_14,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h1 id="5-åŸºç¡€æ“ä½œæŒ‡ä»¤"><a href="#5-åŸºç¡€æ“ä½œæŒ‡ä»¤" class="headerlink" title="5. åŸºç¡€æ“ä½œæŒ‡ä»¤"></a>5. åŸºç¡€æ“ä½œæŒ‡ä»¤</h1><p><img src="https://img-blog.csdnimg.cn/d8720b981f6c462c8e1223e5f195c732.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> # åˆå§‹åŒ–gitä»“åº“</p><p>git init</p><p>#####################åˆ›å»ºæ–‡ä»¶å¹¶æäº¤##################### #</p><p> # å°†ä¿®æ”¹åŠ å…¥æš‚å­˜åŒº</p><p>git add .</p><p># å°†ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œæäº¤è®°å½•å†…å®¹ä¸ºï¼šcommit 001 git commit -m â€˜commit 001â€™ # æŸ¥çœ‹æ—¥å¿— git log</p><p># å°†ä¿®æ”¹åŠ å…¥æš‚å­˜åŒº git add .</p><p># # å°†ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œæäº¤è®°å½•å†…å®¹ä¸ºï¼š</p><p>update file01 git commit â€“m â€˜update file01â€™ # æŸ¥çœ‹æ—¥å¿—</p><p>git log</p><p># ä»¥ç²¾ç®€çš„æ–¹å¼æ˜¾ç¤ºæäº¤è®°å½•</p><p>git-log</p><p>####################å°†æœ€åä¸€æ¬¡ä¿®æ”¹è¿˜åŸ################## #</p><p>æŸ¥çœ‹æäº¤è®°å½•</p><p>git-log</p><p># æ‰¾åˆ°å€’æ•°ç¬¬2æ¬¡æäº¤çš„</p><p>commitID </p><p># ç‰ˆæœ¬å›é€€</p><p>git reset commitID â€“hard</p><h2 id="6-æ–‡ä»¶è¿‡æ»¤"><a href="#6-æ–‡ä»¶è¿‡æ»¤" class="headerlink" title="6.æ–‡ä»¶è¿‡æ»¤"></a>6.æ–‡ä»¶è¿‡æ»¤</h2><p>æƒ³æŠŠä¸€äº›ä¸éœ€è¦çš„æ–‡ä»¶è¿‡æ»¤æ‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å·¥ä½œç›®å½• ä¸­åˆ›å»ºä¸€ä¸ªåä¸º .gitignore çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶åç§°å›ºå®šï¼‰ï¼Œåˆ—å‡ºè¦å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"> no <span class="hljs-string">.a</span> files<br>*<span class="hljs-string">.a</span><br><span class="hljs-comment"># but do track lib.a, even though you&#x27;re ignoring .a files above</span><br>!lib.a<br><span class="hljs-comment"># only ignore the TODO file in the current directory, not subdir/TODO</span><br><span class="hljs-string">/TODO</span><br><span class="hljs-comment"># ignore all files in the build/ directory</span><br>build/<br><span class="hljs-comment"># ignore doc/notes.txt, but not doc/server/arch.txt</span><br>doc/*<span class="hljs-string">.txt</span><br><span class="hljs-comment"># ignore all .pdf files in the doc/ directory</span><br>doc/**/*<span class="hljs-string">.pdf</span><br></code></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>è¿‡å¤šçš„ç†è®ºå’Œå…¶ä»–å°±ä¸è®²äº†ï¼Œç›´æ¥è¿›å…¥æ­£é¢˜</p><h1 id="å››ã€Gitè¿œç¨‹ä»“åº“"><a href="#å››ã€Gitè¿œç¨‹ä»“åº“" class="headerlink" title="å››ã€Gitè¿œç¨‹ä»“åº“"></a>å››ã€Gitè¿œç¨‹ä»“åº“</h1><p><img src="https://img-blog.csdnimg.cn/ca6ee651ee1741ac88fda4ca496f5fef.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"><img src="https://img-blog.csdnimg.cn/b5085e3ff46f4eb29643007dd6a1764e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>(å³) ç äº‘çš„ç›¸å…³æœåŠ¡ï¼Œéœ€è¦æ³¨å†Œè´¦å·ï¼ˆåœ°å€ï¼š <a href="">https://gitee.com/signup</a> ï¼‰</p><p> (å·¦) githubçš„ç›¸å…³æœåŠ¡ï¼Œéœ€è¦æ³¨å†Œè´¦å·ï¼ˆåœ°å€ï¼š<a href="https://github.com/login?return_to=https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=/&source=header-home">Sign in to GitHub Â· GitHub</a>ï¼‰</p><h1 id="1-åˆ›å»ºè¿œç¨‹ä»“åº“"><a href="#1-åˆ›å»ºè¿œç¨‹ä»“åº“" class="headerlink" title="1.åˆ›å»ºè¿œç¨‹ä»“åº“"></a>1.åˆ›å»ºè¿œç¨‹ä»“åº“</h1><p><img src="https://img-blog.csdnimg.cn/56c02b55d4754b2995a74e354180e7cf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å¡«å†™ä¿¡æ¯</p><p><img src="https://img-blog.csdnimg.cn/bd7a597facdc4e63bd82a0368b391924.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h2 id="2-é…ç½®SSHå…¬é’¥"><a href="#2-é…ç½®SSHå…¬é’¥" class="headerlink" title="2.é…ç½®SSHå…¬é’¥"></a>2.é…ç½®SSHå…¬é’¥</h2><p><strong>ç›®çš„æ˜¯è¿æ¥æœ¬åœ°git</strong></p><p><strong>1ï¼‰æ‰“å¼€git boshç”ŸæˆSSHå…¬é’¥</strong> </p><p><strong>ssh-keygen -t rsa</strong> </p><p><strong>ä¸æ–­å›è½¦ å¦‚æœå…¬é’¥å·²ç»å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨è¦†ç›– Giteeè®¾ç½®è´¦æˆ·å…±å…¬é’¥</strong> </p><p><strong>2ï¼‰è·å–å…¬é’¥</strong> </p><p><strong>cat ~&#x2F;.ssh&#x2F;id_rsa.pub</strong></p><p><img src="https://img-blog.csdnimg.cn/e18b4839377e4803950e64e623c5e82b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æˆåŠŸåï¼</p><p> <img src="https://img-blog.csdnimg.cn/c84693ee1fea47e8814f01055f148c7c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h1 id="äº”ã€åœ¨Ideaä¸­é…ç½®Git"><a href="#äº”ã€åœ¨Ideaä¸­é…ç½®Git" class="headerlink" title="äº”ã€åœ¨Ideaä¸­é…ç½®Git"></a>äº”ã€åœ¨Ideaä¸­é…ç½®Git</h1><p><img src="https://img-blog.csdnimg.cn/c5d995d534b0424085c4fb642b388b75.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> å‡»TestæŒ‰é’®,ç°åœ¨æ‰§è¡ŒæˆåŠŸï¼Œé…ç½®å®Œæˆ<img src="https://img-blog.csdnimg.cn/8185e39232704887b2b374b9564aa0f6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h3 id="å¦‚ä½•ä¸Šä¼ é¡¹ç›®ï¼Ÿ"><a href="#å¦‚ä½•ä¸Šä¼ é¡¹ç›®ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¸Šä¼ é¡¹ç›®ï¼Ÿ"></a><strong>å¦‚ä½•ä¸Šä¼ é¡¹ç›®ï¼Ÿ</strong></h3><p><strong>åœ¨SSHç§˜é’¥å’Œä¸Šè¿°é…ç½®æ­£å¸¸ä¸‹å¯¼å…¥é¡¹ç›®</strong></p><p><strong>åœ¨é¡¹ç›®æ–‡ä»¶ä¸‹åˆ›å»º.gitæ–‡ä»¶</strong></p><p><img src="https://img-blog.csdnimg.cn/e6bdb906175444d493a85de618f4dae7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> <strong>å›åˆ°ideaä¸­</strong></p><p><img src="https://img-blog.csdnimg.cn/8777a066661a4076a27534d11c1d073e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_15,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"><img src="https://img-blog.csdnimg.cn/289de8601bcb4722928bcb41931b866c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_19,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> <strong>ç‚¹å‡»commit</strong></p><p> è€å¿ƒç­‰å€™ï¼å®Œæˆå</p><p><img src="https://img-blog.csdnimg.cn/a6fef49ee0ad486ea80776b2f5db6c64.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> <img src="https://img-blog.csdnimg.cn/31a15c0d0054484f9a161dbb2350ffd2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> ç‚¹è¿›å»ç»‘å®šä½ çš„<strong>è¿œç¨‹ä»“åº“åœ°å€</strong></p><p><img src="https://img-blog.csdnimg.cn/5d972bd0f638456bb0e10ce686286f3e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>å¤åˆ¶åç²˜è´´åˆ°ç»‘å®šä¿¡æ¯ä¸Š</p><p> <img src="https://img-blog.csdnimg.cn/e9030d7579904923a91a2563a3ec95f2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> <strong>æ‰¾åˆ°push</strong></p><p><img src="https://img-blog.csdnimg.cn/ddc001631e804cda924ce16d01e12f72.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><strong>æŸ¥çœ‹è¿œç¨‹ä»“åº“</strong><img src="https://img-blog.csdnimg.cn/89731acfa0d04a5a84dfb06d73e3aa71.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p>]]></content>
    
    
    <categories>
      
      <category>åˆ†å¸ƒå¼å·¥å…·</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MYSQLç‰ˆæœ¬å†²çª</title>
    <link href="/Hexo/2021/09/26/mysql%E7%89%88%E6%9C%AC%E5%86%B2%E7%AA%81/"/>
    <url>/Hexo/2021/09/26/mysql%E7%89%88%E6%9C%AC%E5%86%B2%E7%AA%81/</url>
    
    <content type="html"><![CDATA[<p>ã€åŸå› ã€‘ï¼šæ•°æ®åº“ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„æ’åºè§„åˆ™ä¸åŒï¼Œæˆ‘è¿™é‡Œä»¥mysql5.5ä¸ºä¾‹ï¼Œmysql5.5é»˜è®¤ä½¿ç”¨çš„æ’åºè§„åˆ™æ˜¯ utf8_general_ci ï¼Œè€Œmysql8.0ä½¿ç”¨çš„æ˜¯ utf8mb4_0900_ai_ciï¼Œä¸æ”¯æŒmysql5.5ä¸­çš„æ’åºè§„åˆ™</p><p>ã€è§£å†³åŠæ³•ã€‘ï¼šç›´æ¥å°†sqlè¯­å¥ä¸­æ‰€æœ‰çš„utf8mb4_0900_ai_ciæ›¿æ¢æˆ<br>utf8_general_ciå³å¯</p>]]></content>
    
    
    <categories>
      
      <category>MysqlğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MysqlğŸ±â€ğŸ‘¤</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Tomcatå¯åŠ¨ä¸ideaå·¥å…·é›†æˆ</title>
    <link href="/Hexo/2021/05/15/Tomcat%E5%90%AF%E5%8A%A8%E4%B8%8E%E9%9B%86%E6%88%90/"/>
    <url>/Hexo/2021/05/15/Tomcat%E5%90%AF%E5%8A%A8%E4%B8%8E%E9%9B%86%E6%88%90/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€webç®€ä»‹"><a href="#ä¸€ã€webç®€ä»‹" class="headerlink" title="ä¸€ã€webç®€ä»‹"></a>ä¸€ã€webç®€ä»‹</h1><h2 id="1-è½¯ä»¶æ¶æ„"><a href="#1-è½¯ä»¶æ¶æ„" class="headerlink" title="1.è½¯ä»¶æ¶æ„"></a>1.è½¯ä»¶æ¶æ„</h2><pre><code class="hljs"> 1. C/Sï¼šå®¢æˆ·ç«¯/æœåŠ¡å™¨ç«¯      22. B/Sï¼šæµè§ˆå™¨/æœåŠ¡å™¨ç«¯</code></pre><h2 id="2-èµ„æºåˆ†ç±»"><a href="#2-èµ„æºåˆ†ç±»" class="headerlink" title="2.èµ„æºåˆ†ç±»"></a>2.èµ„æºåˆ†ç±»</h2><pre><code class="hljs"> 1. é™æ€èµ„æºï¼šæ‰€æœ‰ç”¨æˆ·è®¿é—®åï¼Œå¾—åˆ°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œç§°ä¸ºé™æ€èµ„æº.é™æ€èµ„æºå¯ä»¥ç›´æ¥è¢«æµè§ˆå™¨è§£æ</code></pre><p>* å¦‚ï¼š html,css,JavaScript<br>     2. åŠ¨æ€èµ„æº:æ¯ä¸ªç”¨æˆ·è®¿é—®ç›¸åŒèµ„æºåï¼Œå¾—åˆ°çš„ç»“æœå¯èƒ½ä¸ä¸€æ ·ã€‚ç§°ä¸ºåŠ¨æ€èµ„æºã€‚åŠ¨æ€èµ„æºè¢«è®¿é—®åï¼Œéœ€è¦å…ˆè½¬æ¢ä¸ºé™æ€èµ„æºï¼Œåœ¨è¿”å›ç»™æµè§ˆå™¨<br>              * å¦‚ï¼šservlet&#x2F;jsp,php,aspâ€¦</p><h2 id="3-ç½‘ç»œé€šä¿¡ä¸‰è¦ç´ "><a href="#3-ç½‘ç»œé€šä¿¡ä¸‰è¦ç´ " class="headerlink" title="3.ç½‘ç»œé€šä¿¡ä¸‰è¦ç´ "></a>3.ç½‘ç»œé€šä¿¡ä¸‰è¦ç´ </h2><pre><code class="hljs"> 1. IPï¼šç”µå­è®¾å¤‡(è®¡ç®—æœº)åœ¨ç½‘ç»œä¸­çš„å”¯ä¸€æ ‡è¯†ã€‚      2. ç«¯å£ï¼šåº”ç”¨ç¨‹åºåœ¨è®¡ç®—æœºä¸­çš„å”¯ä¸€æ ‡è¯†ã€‚ 0~65536      3. ä¼ è¾“åè®®ï¼šè§„å®šäº†æ•°æ®ä¼ è¾“çš„è§„åˆ™                 1. åŸºç¡€åè®®ï¼š     1. tcp:å®‰å…¨åè®®ï¼Œä¸‰æ¬¡æ¡æ‰‹ã€‚ é€Ÿåº¦ç¨æ…¢     2. udpï¼šä¸å®‰å…¨åè®®ã€‚ é€Ÿåº¦å¿«</code></pre><h2 id="4-æœåŠ¡å™¨ï¼šå®‰è£…äº†æœåŠ¡å™¨è½¯ä»¶çš„è®¡ç®—æœº"><a href="#4-æœåŠ¡å™¨ï¼šå®‰è£…äº†æœåŠ¡å™¨è½¯ä»¶çš„è®¡ç®—æœº" class="headerlink" title="4.æœåŠ¡å™¨ï¼šå®‰è£…äº†æœåŠ¡å™¨è½¯ä»¶çš„è®¡ç®—æœº"></a>4.æœåŠ¡å™¨ï¼šå®‰è£…äº†æœåŠ¡å™¨è½¯ä»¶çš„è®¡ç®—æœº</h2><p>   * æœåŠ¡å™¨è½¯ä»¶ï¼šæ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚ï¼Œåšå‡ºå“åº”<br>   * webæœåŠ¡å™¨è½¯ä»¶ï¼šæ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚ï¼Œåšå‡ºå“åº”ã€‚<br>     * åœ¨webæœåŠ¡å™¨è½¯ä»¶ä¸­ï¼Œå¯ä»¥éƒ¨ç½²webé¡¹ç›®ï¼Œè®©ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æ¥è®¿é—®è¿™äº›é¡¹ç›®<br>     * webå®¹å™¨</p><h2 id="5-å¸¸è§çš„javaç›¸å…³çš„webæœåŠ¡å™¨è½¯ä»¶ï¼š"><a href="#5-å¸¸è§çš„javaç›¸å…³çš„webæœåŠ¡å™¨è½¯ä»¶ï¼š" class="headerlink" title="5.å¸¸è§çš„javaç›¸å…³çš„webæœåŠ¡å™¨è½¯ä»¶ï¼š"></a>5.å¸¸è§çš„javaç›¸å…³çš„webæœåŠ¡å™¨è½¯ä»¶ï¼š</h2><p>â€‹     * webLogicï¼šoracleå…¬å¸ï¼Œå¤§å‹çš„JavaEEæœåŠ¡å™¨ï¼Œæ”¯æŒæ‰€æœ‰çš„JavaEEè§„èŒƒï¼Œæ”¶è´¹çš„ã€‚<br>â€‹     * webSphereï¼šIBMå…¬å¸ï¼Œå¤§å‹çš„JavaEEæœåŠ¡å™¨ï¼Œæ”¯æŒæ‰€æœ‰çš„JavaEEè§„èŒƒï¼Œæ”¶è´¹çš„ã€‚<br>â€‹     * JBOSSï¼šJBOSSå…¬å¸çš„ï¼Œå¤§å‹çš„JavaEEæœåŠ¡å™¨ï¼Œæ”¯æŒæ‰€æœ‰çš„JavaEEè§„èŒƒï¼Œæ”¶è´¹çš„ã€‚<br>â€‹     * Tomcatï¼šApacheåŸºé‡‘ç»„ç»‡ï¼Œä¸­å°å‹çš„JavaEEæœåŠ¡å™¨ï¼Œä»…ä»…æ”¯æŒå°‘é‡çš„JavaEEè§„èŒƒservlet&#x2F;jspã€‚å¼€æºçš„ï¼Œå…è´¹çš„ã€‚</p><p>Tomcat ä¸‹è½½ï¼š<a href="http://tomcat.apache.org/">http://tomcat.apache.org/</a></p><p>è§£å‹åè¿›å…¥ç›®å½•</p><p><img src="https://img-blog.csdnimg.cn/cf47a96acc9f476b9cbdbb0796ac119f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> è¿›å…¥binç›®å½•ï¼Œæ‰¾åˆ°startup.batï¼ŒåŒå‡»æ‰“å¼€( ä¸è¦å…³é—­)</p><p>å¦‚æœå‡ºç°ä¸€é—ªè€Œé€€çš„ç°è±¡ï¼Œè¯´æ˜ä¸ºæ­£å¸¸é…ç½®JDKç¯å¢ƒå˜é‡</p><p>å¯å‚è€ƒ<a href="https://www.runoob.com/java/java-environment-setup.html">Java å¼€å‘ç¯å¢ƒé…ç½® | èœé¸Ÿæ•™ç¨‹</a></p><h1 id="äºŒã€Tomcatå¯åŠ¨åˆ†æ"><a href="#äºŒã€Tomcatå¯åŠ¨åˆ†æ" class="headerlink" title="äºŒã€Tomcatå¯åŠ¨åˆ†æ"></a>äºŒã€Tomcatå¯åŠ¨åˆ†æ</h1><p>è¿›å…¥startup.batï¼Œå¯ä»¥çœ‹åˆ°ä»£ç è·¯å¾„å‡æŒ‡å‘å«catalina.batçš„æ–‡ä»¶</p><p><img src="https://img-blog.csdnimg.cn/c099ff2233f2415a8b8b815ad327a42a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>äºæ˜¯æˆ‘ä»¬è¿›å…¥è¯¥æ–‡ä»¶</p><p><img src="https://img-blog.csdnimg.cn/0f8bea9e2ca245a689cc64ff1a375160.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>çœ‹åˆ°æ”¹æ–‡ä»¶ä½¿ç”¨çš„ç¯å¢ƒå˜é‡æ˜¯JAVA_HOMEã€‚</p><p>æ‰€ä»¥éœ€è¦æ­£ç¡®é…ç½®JAVA_HOMEåæ‰å¯ä»¥æ­£å¸¸å¯åŠ¨Tomcat</p><p><img src="https://img-blog.csdnimg.cn/0c30673f1a1a4ace927dae90cb032a22.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> è®¿é—®æœ¬æœºtomcatåœ°å€ï¼Œå¦‚å›¾ä¸ºå®‰è£…æˆåŠŸï¼</p><p><img src="https://img-blog.csdnimg.cn/4f2e449b1e97479c8bdf1351a887d4af.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><h1 id="ä¸‰ã€Tomcatä¸ideaé›†æˆ"><a href="#ä¸‰ã€Tomcatä¸ideaé›†æˆ" class="headerlink" title="ä¸‰ã€Tomcatä¸ideaé›†æˆ"></a>ä¸‰ã€Tomcatä¸ideaé›†æˆ</h1><p>æ‰¾åˆ°run </p><p><img src="https://img-blog.csdnimg.cn/8b3122bb73c04ffe8e2f2c25793cae7c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p><img src="https://img-blog.csdnimg.cn/1a2c407c85a7428989ffdc5c0241103f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æ‰¾åˆ°+å·ç‚¹å‡»</p><p> <img src="https://img-blog.csdnimg.cn/0e8e21f6f8784ddd85d915e0b5fbb2ae.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p>æ‰¾åˆ°Tomcat Serverä¸‹çš„local</p><p> <img src="https://img-blog.csdnimg.cn/888fde0286044095ac087825ec685ea4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> <img src="https://img-blog.csdnimg.cn/18cb38283f984264808f4f8722d00b3e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> <img src="https://img-blog.csdnimg.cn/b048df669b6f4586bcf6bdfde0bd1fca.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> <img src="https://img-blog.csdnimg.cn/8fa4edbe60d2432883f104be3ad29db3.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p><p> ç„¶åç‚¹å‡»ok ok  ok  ok</p><p><img src="https://img-blog.csdnimg.cn/57ccad9b0ab54385a23ddc33101424d6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA7oy1IO6MtSDujLU=,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨"></p>]]></content>
    
    
    <categories>
      
      <category>javaWebç›¸å…³</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tomcat</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ·±å…¥æµ…å‡ºjavaå¤šçº¿ç¨‹</title>
    <link href="/Hexo/2021/05/15/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    <url>/Hexo/2021/05/15/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAjava%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="1-è¿›ç¨‹ä¸çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ"><a href="#1-è¿›ç¨‹ä¸çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1 è¿›ç¨‹ä¸çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ"></a>1 è¿›ç¨‹ä¸çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ</h1><h2 id="1-1-è¿›ç¨‹äº§ç”Ÿçš„èƒŒæ™¯"><a href="#1-1-è¿›ç¨‹äº§ç”Ÿçš„èƒŒæ™¯" class="headerlink" title="1.1 è¿›ç¨‹äº§ç”Ÿçš„èƒŒæ™¯"></a>1.1 è¿›ç¨‹äº§ç”Ÿçš„èƒŒæ™¯</h2><p>æœ€åˆçš„è®¡ç®—æœºåªèƒ½æ¥å—ä¸€äº›ç‰¹å®šçš„æŒ‡ä»¤ï¼Œç”¨æˆ·æ¯è¾“å…¥ä¸€ä¸ªæŒ‡ä»¤ï¼Œè®¡ç®—æœºå°±åšå‡ºä¸€ä¸ªæ“ä½œã€‚å½“ç”¨æˆ·åœ¨æ€è€ƒæˆ–è€…è¾“å…¥æ—¶ï¼Œè®¡ç®—æœºå°±åœ¨ç­‰å¾…ã€‚è¿™æ ·æ•ˆç‡éå¸¸ä½ä¸‹ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œè®¡ç®—æœºéƒ½å¤„åœ¨ç­‰å¾…çŠ¶æ€ã€‚</p><p><strong>æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿ</strong></p><p>åæ¥æœ‰äº†<strong>æ‰¹å¤„ç†æ“ä½œä½“ç»Ÿ</strong>,æŠŠä¸€ç³»åˆ—éœ€è¦æ“ä½œçš„æŒ‡ä»¤å†™ä¸‹æ¥ï¼Œå½¢æˆä¸€ä¸ªæ¸…å•ï¼Œä¸€æ¬¡æ€§äº¤ç»™è®¡ç®—æœºã€‚ç”¨æˆ·å°†å¤šä¸ªéœ€è¦æ‰§è¡Œçš„ç¨‹åºå†™åœ¨ç£å¸¦ä¸Šï¼Œç„¶åäº¤ç”±è®¡ç®—æœºå»è¯»å–å¹¶é€ä¸ªæ‰§è¡Œè¿™äº›ç¨‹åºï¼Œå¹¶å°†è¾“å‡ºç»“æœå†™åœ¨å¦ä¸€ä¸ªç£å¸¦ä¸Šã€‚</p><p>æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†è®¡ç®—æœºçš„æ•ˆç‡ï¼Œä½†æ˜¯ç”±äº<strong>æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿçš„æŒ‡ä»¤è¿è¡Œæ–¹å¼ä»ç„¶æ˜¯ä¸²è¡Œçš„ï¼Œå†…å­˜ä¸­å§‹ç»ˆåªæœ‰ä¸€ä¸ªç¨‹åºåœ¨è¿è¡Œ</strong>ï¼Œåé¢çš„ç¨‹åºéœ€è¦ç­‰å¾…å‰é¢çš„ç¨‹åºæ‰§è¡Œå®Œæˆåæ‰èƒ½å¼€å§‹æ‰§è¡Œï¼Œè€Œå‰é¢çš„ç¨‹åºæœ‰æ—¶ä¼šç”±äºI&#x2F;Oæ“ä½œã€ç½‘ç»œç­‰åŸå› é˜»å¡ï¼Œæ‰€ä»¥<strong>æ‰¹å¤„ç†æ“ä½œæ•ˆç‡ä¹Ÿä¸é«˜</strong>ã€‚</p><p><strong>è¿›ç¨‹çš„æå‡º</strong></p><p>äººä»¬å¯¹äºè®¡ç®—æœºçš„æ€§èƒ½è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œç°æœ‰çš„æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿå¹¶ä¸èƒ½æ»¡è¶³äººä»¬çš„éœ€æ±‚ï¼Œè€Œæ‰¹å¤„ç†æ“ä½œç³»ç»Ÿçš„ç“¶é¢ˆåœ¨äºå†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªç¨‹åºï¼Œé‚£ä¹ˆå†…å­˜ä¸­èƒ½ä¸èƒ½å­˜åœ¨å¤šä¸ªç¨‹åºå‘¢ï¼Ÿè¿™æ˜¯äººä»¬äºŸå¾…è§£å†³çš„é—®é¢˜ã€‚</p><p>äºæ˜¯ï¼Œç§‘å­¦å®¶ä»¬æå‡ºäº†è¿›ç¨‹çš„æ¦‚å¿µã€‚</p><p>è¿›ç¨‹å°±æ˜¯<strong>åº”ç”¨ç¨‹åºåœ¨å†…å­˜ä¸­åˆ†é…çš„ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯æ­£åœ¨è¿è¡Œçš„ç¨‹åº</strong>ï¼Œå„ä¸ªè¿›ç¨‹ä¹‹é—´äº’ä¸å¹²æ‰°ã€‚åŒæ—¶è¿›ç¨‹ä¿å­˜ç€ç¨‹åºæ¯ä¸€ä¸ªæ—¶åˆ»è¿è¡Œçš„çŠ¶æ€ã€‚</p><blockquote><p>ç¨‹åºï¼šç”¨æŸç§ç¼–ç¨‹è¯­è¨€(javaã€pythonç­‰)ç¼–å†™ï¼Œèƒ½å¤Ÿå®Œæˆä¸€å®šä»»åŠ¡æˆ–è€…åŠŸèƒ½çš„ä»£ç é›†åˆ,æ˜¯æŒ‡ä»¤å’Œæ•°æ®çš„æœ‰åºé›†åˆï¼Œæ˜¯<strong>ä¸€æ®µé™æ€ä»£ç </strong>ã€‚</p></blockquote><p>æ­¤æ—¶ï¼ŒCPUé‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬çš„æ–¹å¼è¿è¡Œè¿›ç¨‹ï¼šCPUä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªæ—¶é—´æ®µï¼Œç§°ä½œå®ƒçš„æ—¶é—´ç‰‡ã€‚å¦‚æœåœ¨æ—¶é—´ç‰‡ç»“æŸæ—¶è¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œåˆ™æš‚åœè¿™ä¸ªè¿›ç¨‹çš„è¿è¡Œï¼Œå¹¶ä¸”CPUåˆ†é…ç»™å¦ä¸€ä¸ªè¿›ç¨‹ï¼ˆè¿™ä¸ªè¿‡ç¨‹å«åšä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰ã€‚å¦‚æœè¿›ç¨‹åœ¨æ—¶é—´ç‰‡ç»“æŸå‰é˜»å¡æˆ–ç»“æŸï¼Œåˆ™CPUç«‹å³è¿›è¡Œåˆ‡æ¢ï¼Œä¸ç”¨ç­‰å¾…æ—¶é—´ç‰‡ç”¨å®Œã€‚</p><blockquote><p>å½“è¿›ç¨‹æš‚åœæ—¶ï¼Œå®ƒä¼šä¿å­˜å½“å‰è¿›ç¨‹çš„çŠ¶æ€ï¼ˆè¿›ç¨‹æ ‡è¯†ï¼Œè¿›ç¨‹ä½¿ç”¨çš„èµ„æºç­‰ï¼‰ï¼Œåœ¨ä¸‹ä¸€æ¬¡åˆ‡æ¢å›æ¥æ—¶æ ¹æ®ä¹‹å‰ä¿å­˜çš„çŠ¶æ€è¿›è¡Œæ¢å¤ï¼Œæ¥ç€ç»§ç»­æ‰§è¡Œã€‚</p></blockquote><p>ä½¿ç”¨è¿›ç¨‹+CPUæ—¶é—´ç‰‡è½®è½¬æ–¹å¼çš„æ“ä½œç³»ç»Ÿï¼Œåœ¨å®è§‚ä¸Šçœ‹èµ·æ¥åŒä¸€æ—¶é—´æ®µæ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œæ¢å¥è¯è¯´ï¼Œ<strong>è¿›ç¨‹è®©æ“ä½œä½“ç»Ÿçš„å¹¶å‘æˆä¸ºäº†å¯èƒ½</strong>ã€‚è™½ç„¶å¹¶å‘ä»å®è§‚ä¸Šçœ‹æœ‰å¤šä¸ªä»»åŠ¡åœ¨æ‰§è¡Œï¼Œä½†åœ¨äº‹å®ä¸Šï¼Œå¯¹äº<strong>å•æ ¸CPU</strong>æ¥è¯´ï¼Œä»»æ„å…·ä½“æ—¶åˆ»éƒ½åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨å ç”¨CPUèµ„æºã€‚</p><p><strong>å¯¹æ“ä½œç³»ç»Ÿçš„è¦æ±‚è¿›ä¸€æ­¥æé«˜</strong></p><p>è™½ç„¶è¿›ç¨‹çš„å‡ºç°ï¼Œä½¿å¾—æ“ä½œç³»ç»Ÿçš„æ€§èƒ½å¤§å¤§æå‡ï¼Œä½†æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œäººä»¬å¹¶ä¸æ»¡è¶³ä¸€ä¸ªè¿›ç¨‹åœ¨ä¸€æ®µæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹æƒ…ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹æœ‰å¤šä¸ªå­ä»»åŠ¡æ—¶ï¼Œåªèƒ½é€ä¸ªå¾—æ‰§è¡Œè¿™äº›å­ä»»åŠ¡ï¼Œå¾ˆå½±å“æ•ˆç‡ã€‚</p><blockquote><p>æ¯”å¦‚æ€æ¯’è½¯ä»¶åœ¨æ£€æµ‹ç”¨æˆ·ç”µè„‘æ—¶ï¼Œå¦‚æœåœ¨æŸä¸€é¡¹æ£€æµ‹ä¸­å¡ä½äº†ï¼Œé‚£ä¹ˆåé¢çš„æ£€æµ‹é¡¹ä¹Ÿä¼šå—åˆ°å½±å“ã€‚æˆ–è€…è¯´å½“ä½ ä½¿ç”¨æ€æ¯’è½¯ä»¶ä¸­çš„æ‰«æç—…æ¯’åŠŸèƒ½æ—¶ï¼Œåœ¨æ‰«æç—…æ¯’ç»“æŸä¹‹å‰ï¼Œæ— æ³•ä½¿ç”¨æ€æ¯’è½¯ä»¶ä¸­æ¸…ç†åƒåœ¾çš„åŠŸèƒ½ï¼Œè¿™æ˜¾ç„¶æ— æ³•æ»¡è¶³äººä»¬çš„è¦æ±‚ã€‚</p></blockquote><p><strong>çº¿ç¨‹çš„æå‡º</strong></p><p>é‚£ä¹ˆèƒ½ä¸èƒ½è®©è¿™äº›å­ä»»åŠ¡åŒæ—¶æ‰§è¡Œå‘¢ï¼Ÿäºæ˜¯äººä»¬åˆæå‡ºäº†çº¿ç¨‹çš„æ¦‚å¿µï¼Œ<strong>è®©ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå­ä»»åŠ¡ï¼Œè¿™æ ·ä¸€ä¸ªè¿›ç¨‹å°±åŒ…å«äº†å¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è´Ÿè´£ä¸€ä¸ªå•ç‹¬çš„å­ä»»åŠ¡ã€‚</strong></p><blockquote><p>ä½¿ç”¨çº¿ç¨‹ä¹‹åï¼Œäº‹æƒ…å°±å˜å¾—ç®€å•å¤šäº†ã€‚å½“ç”¨æˆ·ä½¿ç”¨æ‰«æç—…æ¯’åŠŸèƒ½æ—¶ï¼Œå°±è®©æ‰«æç—…æ¯’è¿™ä¸ªçº¿ç¨‹å»æ‰§è¡Œã€‚åŒæ—¶ï¼Œå¦‚æœç”¨æˆ·åˆä½¿ç”¨æ¸…ç†åƒåœ¾åŠŸèƒ½ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆæš‚åœæ‰«æç—…æ¯’çº¿ç¨‹ï¼Œå…ˆå“åº”ç”¨æˆ·çš„æ¸…ç†åƒåœ¾çš„æ“ä½œï¼Œè®©æ¸…ç†åƒåœ¾è¿™ä¸ªçº¿ç¨‹å»æ‰§è¡Œã€‚å“åº”å®Œåå†åˆ‡æ¢å›æ¥ï¼Œæ¥ç€æ‰§è¡Œæ‰«æç—…æ¯’çº¿ç¨‹ã€‚</p><p>æ³¨æ„ï¼šæ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•åˆ†é…æ—¶é—´ç‰‡ç»™æ¯ä¸€ä¸ªçº¿ç¨‹çš„ï¼Œæ¶‰åŠåˆ°çº¿ç¨‹çš„è°ƒåº¦ç­–ç•¥ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥çœ‹ä¸€ä¸‹ã€Šæ“ä½œç³»ç»Ÿã€‹ï¼Œæœ¬æ–‡ä¸åšæ·±å…¥è¯¦è§£ã€‚</p></blockquote><p>æ€»ä¹‹ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹çš„æå‡ºæå¤§çš„æé«˜äº†æ“ä½œæä¾›çš„æ€§èƒ½ã€‚<strong>è¿›ç¨‹è®©æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§æˆä¸ºäº†å¯èƒ½ï¼Œè€Œçº¿ç¨‹è®©è¿›ç¨‹çš„å†…éƒ¨å¹¶å‘æˆä¸ºäº†å¯èƒ½ã€‚</strong></p><p><strong>å¤šè¿›ç¨‹çš„æ–¹å¼ä¹Ÿå¯ä»¥å®ç°å¹¶å‘ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ</strong></p><p>å¤šè¿›ç¨‹æ–¹å¼ç¡®å®å¯ä»¥å®ç°å¹¶å‘ï¼Œä½†ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ï¼š</p><p>- </p><p>  è¿›ç¨‹é—´çš„é€šä¿¡æ¯”è¾ƒå¤æ‚ï¼Œè€Œçº¿ç¨‹é—´çš„é€šä¿¡æ¯”è¾ƒç®€å•ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å…±äº«èµ„æºï¼Œè¿™äº›èµ„æºåœ¨çº¿ç¨‹é—´çš„é€šä¿¡æ¯”è¾ƒå®¹æ˜“ã€‚</p><p>- </p><p>  è¿›ç¨‹æ˜¯é‡é‡çº§çš„ï¼Œè€Œçº¿ç¨‹æ˜¯è½»é‡çº§çš„ï¼Œæ•…å¤šçº¿ç¨‹æ–¹å¼çš„ç³»ç»Ÿå¼€é”€æ›´å°ã€‚</p><p><strong>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</strong></p><p>è¿›ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒï¼Œè€Œçº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹ä¸­æ‰§è¡Œçš„ä¸€ä¸ªä»»åŠ¡ã€‚ä»–ä»¬ä¸¤ä¸ªæœ¬è´¨çš„åŒºåˆ«æ˜¯<strong>æ˜¯å¦å•ç‹¬å æœ‰å†…å­˜åœ°å€ç©ºé—´åŠå…¶å®ƒç³»ç»Ÿèµ„æºï¼ˆæ¯”å¦‚I&#x2F;Oï¼‰</strong>ï¼š</p><p>- </p><p>  è¿›ç¨‹å•ç‹¬å æœ‰ä¸€å®šçš„å†…å­˜åœ°å€ç©ºé—´ï¼Œæ‰€ä»¥è¿›ç¨‹é—´å­˜åœ¨å†…å­˜éš”ç¦»ï¼Œæ•°æ®æ˜¯åˆ†å¼€çš„ï¼Œæ•°æ®å…±äº«å¤æ‚ä½†æ˜¯åŒæ­¥ç®€å•ï¼Œå„ä¸ªè¿›ç¨‹ä¹‹é—´äº’ä¸å¹²æ‰°ï¼›è€Œçº¿ç¨‹å…±äº«æ‰€å±è¿›ç¨‹å æœ‰çš„å†…å­˜åœ°å€ç©ºé—´å’Œèµ„æºï¼Œæ•°æ®å…±äº«ç®€å•ï¼Œä½†æ˜¯åŒæ­¥å¤æ‚ã€‚</p><p>- </p><p>  è¿›ç¨‹å•ç‹¬å æœ‰ä¸€å®šçš„å†…å­˜åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹å‡ºç°é—®é¢˜ä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹ï¼Œä¸å½±å“ä¸»ç¨‹åºçš„ç¨³å®šæ€§ï¼Œå¯é æ€§é«˜ï¼›ä¸€ä¸ªçº¿ç¨‹å´©æºƒå¯èƒ½å½±å“æ•´ä¸ªç¨‹åºçš„ç¨³å®šæ€§ï¼Œå¯é æ€§è¾ƒä½ã€‚</p><p>- </p><p>  è¿›ç¨‹å•ç‹¬å æœ‰ä¸€å®šçš„å†…å­˜åœ°å€ç©ºé—´ï¼Œè¿›ç¨‹çš„åˆ›å»ºå’Œé”€æ¯ä¸ä»…éœ€è¦ä¿å­˜å¯„å­˜å™¨å’Œæ ˆä¿¡æ¯ï¼Œè¿˜éœ€è¦èµ„æºçš„åˆ†é…å›æ”¶ä»¥åŠé¡µè°ƒåº¦ï¼Œå¼€é”€è¾ƒå¤§ï¼›çº¿ç¨‹åªéœ€è¦ä¿å­˜å¯„å­˜å™¨å’Œæ ˆä¿¡æ¯ï¼Œå¼€é”€è¾ƒå°ã€‚</p><p>å¦å¤–ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ï¼Œ<strong>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè€Œçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œè°ƒåº¦çš„åŸºæœ¬å•ä½</strong>ï¼Œå³CPUåˆ†é…æ—¶é—´çš„å•ä½ ã€‚</p><h2 id="1-2-ä¸Šä¸‹æ–‡åˆ‡æ¢"><a href="#1-2-ä¸Šä¸‹æ–‡åˆ‡æ¢" class="headerlink" title="1.2 ä¸Šä¸‹æ–‡åˆ‡æ¢"></a>1.2 ä¸Šä¸‹æ–‡åˆ‡æ¢</h2><p>ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆæœ‰æ—¶ä¹Ÿç§°åšè¿›ç¨‹åˆ‡æ¢æˆ–ä»»åŠ¡åˆ‡æ¢ï¼‰æ˜¯æŒ‡ CPU ä»ä¸€ä¸ªè¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰ã€‚ä¸Šä¸‹æ–‡æ˜¯æŒ‡<strong>æŸä¸€æ—¶é—´ç‚¹ CPU å¯„å­˜å™¨å’Œç¨‹åºè®¡æ•°å™¨çš„å†…å®¹ã€‚</strong></p><blockquote><p>å¯„å­˜å™¨æ˜¯cpuå†…éƒ¨çš„å°‘é‡çš„é€Ÿåº¦å¾ˆå¿«çš„é—ªå­˜ï¼Œé€šå¸¸å­˜å‚¨å’Œè®¿é—®è®¡ç®—è¿‡ç¨‹çš„ä¸­é—´å€¼æé«˜è®¡ç®—æœºç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚</p><p>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€ä¸ªä¸“ç”¨çš„å¯„å­˜å™¨ï¼Œç”¨äºè¡¨æ˜æŒ‡ä»¤åºåˆ—ä¸­ CPU æ­£åœ¨æ‰§è¡Œçš„ä½ç½®ï¼Œå­˜çš„å€¼ä¸ºæ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤çš„ä½ç½®æˆ–è€…ä¸‹ä¸€ä¸ªå°†è¦è¢«æ‰§è¡Œçš„æŒ‡ä»¤çš„ä½ç½®ï¼Œå…·ä½“å®ç°ä¾èµ–äºç‰¹å®šçš„ç³»ç»Ÿã€‚</p><p>ä¸¾ä¾‹è¯´æ˜ çº¿ç¨‹A - B</p><p>1.å…ˆæŒ‚èµ·çº¿ç¨‹Aï¼Œå°†å…¶åœ¨cpuä¸­çš„çŠ¶æ€ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚</p><p>2.åœ¨å†…å­˜ä¸­æ£€ç´¢ä¸‹ä¸€ä¸ªçº¿ç¨‹Bçš„ä¸Šä¸‹æ–‡å¹¶å°†å…¶åœ¨ CPU çš„å¯„å­˜å™¨ä¸­æ¢å¤,æ‰§è¡ŒBçº¿ç¨‹ã€‚</p><p>3.å½“Bæ‰§è¡Œå®Œï¼Œæ ¹æ®ç¨‹åºè®¡æ•°å™¨ä¸­æŒ‡å‘çš„ä½ç½®æ¢å¤çº¿ç¨‹Aã€‚</p></blockquote><p>CPUé€šè¿‡ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…CPUæ—¶é—´ç‰‡æ¥å®ç°å¤šçº¿ç¨‹æœºåˆ¶ã€‚CPUé€šè¿‡æ—¶é—´ç‰‡åˆ†é…ç®—æ³•æ¥å¾ªç¯æ‰§è¡Œä»»åŠ¡ï¼Œå½“å‰ä»»åŠ¡æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡åä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨åˆ‡æ¢å‰ä¼šä¿å­˜ä¸Šä¸€ä¸ªä»»åŠ¡çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚æ‰€ä»¥ä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p><p>ä¸Šä¸‹æ–‡åˆ‡æ¢é€šå¸¸æ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼Œæ„å‘³ç€æ­¤æ“ä½œä¼š<strong>æ¶ˆè€—å¤§é‡çš„ CPU æ—¶é—´ï¼Œæ•…çº¿ç¨‹ä¹Ÿä¸æ˜¯è¶Šå¤šè¶Šå¥½</strong>ã€‚å¦‚ä½•å‡å°‘ç³»ç»Ÿä¸­ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ï¼Œæ˜¯æå‡å¤šçº¿ç¨‹æ€§èƒ½çš„ä¸€ä¸ªé‡ç‚¹è¯¾é¢˜ã€‚</p><p><strong>å‚è€ƒèµ„æ–™</strong></p><p>- </p><p>  <a href="http://www.cnblogs.com/jijijiefang/articles/7222955.html">çº¿ç¨‹çš„å‡ ç§çŠ¶æ€è½¬æ¢</a></p><p>- </p><p>  <a href="https://blog.csdn.net/whl_program/article/details/70217354">è¿›ç¨‹å’Œçº¿ç¨‹çš„ç”±æ¥ä¸åˆ«</a></p><p>- </p><p>  <a href="https://www.cnblogs.com/fuchongjundream/p/3829508.html">è¿›ç¨‹ã€çº¿ç¨‹ã€å¤šçº¿ç¨‹ç›¸å…³æ€»ç»“</a></p><p>- </p><p>  <a href="https://blog.csdn.net/derkampf/article/details/60477317">è¿›ç¨‹çš„æ¦‚å¿µ&#x2F;æ ‡è¯†&#x2F;ç»“æ„&#x2F;çŠ¶æ€</a></p><p>- </p><p>  <a href="http://www.cnblogs.com/tianlangshu/p/5224178.html">æ“ä½œç³»ç»Ÿ - è¿›ç¨‹çš„æ¦‚å¿µ</a></p><p>- </p><p>  <a href="https://blog.csdn.net/xd_hebuters/article/details/79590441#%E4%B8%80%E8%BF%9B%E7%A8%8B%E4%BA%A7%E7%94%9F%E7%9A%84%E8%83%8C%E6%99%AF">è¿›ç¨‹ç®¡ç†ç¬”è®°ä¸€ã€è¿›ç¨‹çš„æ¦‚å¿µåŠå…¶äº§ç”Ÿçš„èƒŒæ™¯</a></p><p>- </p><p>  <a href="http://ifeve.com/context-switch-definition/">ä¸Šä¸‹æ–‡åˆ‡æ¢</a></p><p>- </p><p>  <a href="https://blog.csdn.net/derkampf/article/details/60477317">è¿›ç¨‹çš„æ¦‚å¿µ&#x2F;æ ‡è¯†&#x2F;ç»“æ„&#x2F;çŠ¶æ€</a></p><p>- </p><p>  <a href="https://blog.csdn.net/asdf_1024/article/details/78978437">çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸåŠçŠ¶æ€è½¬æ¢è¯¦è§£</a></p><p>- </p><p>  <a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014319272686365ec7ceaeca33428c914edf8f70cca383000">è¿›ç¨‹ä¸çº¿ç¨‹</a> </p><h1 id="2-Javaå¤šçº¿ç¨‹å…¥é—¨ç±»å’Œæ¥å£"><a href="#2-Javaå¤šçº¿ç¨‹å…¥é—¨ç±»å’Œæ¥å£" class="headerlink" title="2 Javaå¤šçº¿ç¨‹å…¥é—¨ç±»å’Œæ¥å£"></a>2 Javaå¤šçº¿ç¨‹å…¥é—¨ç±»å’Œæ¥å£</h1><h2 id="2-1-Threadç±»å’ŒRunnableæ¥å£"><a href="#2-1-Threadç±»å’ŒRunnableæ¥å£" class="headerlink" title="2.1 Threadç±»å’ŒRunnableæ¥å£"></a>2.1 Threadç±»å’ŒRunnableæ¥å£</h2><p>ä¸Šä¸€ç« æˆ‘ä»¬äº†è§£äº†æ“ä½œç³»ç»Ÿä¸­å¤šçº¿ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚é‚£ä¹ˆåœ¨Javaä¸­ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•ä½¿ç”¨å¤šçº¿ç¨‹çš„å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªâ€œçº¿ç¨‹â€ç±»ã€‚JDKæä¾›äº†<code>Thread</code>ç±»å’Œ<code>Runnalble</code>æ¥å£æ¥è®©æˆ‘ä»¬å®ç°è‡ªå·±çš„â€œçº¿ç¨‹â€ç±»ã€‚</p><p>- </p><p>  ç»§æ‰¿<code>Thread</code>ç±»ï¼Œå¹¶é‡å†™<code>run</code>æ–¹æ³•ï¼›</p><p>- </p><p>  å®ç°<code>Runnable</code>æ¥å£çš„<code>run</code>æ–¹æ³•ï¼›</p><h3 id="2-1-1-ç»§æ‰¿Threadç±»"><a href="#2-1-1-ç»§æ‰¿Threadç±»" class="headerlink" title="2.1.1 ç»§æ‰¿Threadç±»"></a>2.1.1 ç»§æ‰¿Threadç±»</h3><p>å…ˆå­¦ä¼šæ€ä¹ˆç”¨ï¼Œå†å­¦åŸç†ã€‚é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆç”¨<code>Thread</code>å’Œ<code>Runnable</code>æ¥å†™ä¸€ä¸ªJavaå¤šçº¿ç¨‹ç¨‹åºã€‚</p><p>é¦–å…ˆæ˜¯ç»§æ‰¿<code>Thread</code>ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;MyThread&quot;</span>);<br>        &#125;<br>    &#125;<br><br>```java<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">Thread</span> <span class="hljs-variable">myThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>    myThread.start();<br>&#125;<br>```<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„è¦è°ƒç”¨<code>start()</code>æ–¹æ³•åï¼Œè¯¥çº¿ç¨‹æ‰ç®—å¯åŠ¨ï¼</p><blockquote><p>æˆ‘ä»¬åœ¨ç¨‹åºé‡Œé¢è°ƒç”¨äº†start()æ–¹æ³•åï¼Œè™šæ‹Ÿæœºä¼šå…ˆä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶åç­‰åˆ°è¿™ä¸ªçº¿ç¨‹ç¬¬ä¸€æ¬¡å¾—åˆ°æ—¶é—´ç‰‡æ—¶å†è°ƒç”¨run()æ–¹æ³•ã€‚</p><p>æ³¨æ„ä¸å¯å¤šæ¬¡è°ƒç”¨start()æ–¹æ³•ã€‚åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨start()æ–¹æ³•åï¼Œå†æ¬¡è°ƒç”¨start()æ–¹æ³•ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p></blockquote><h3 id="2-1-2-å®ç°Runnableæ¥å£"><a href="#2-1-2-å®ç°Runnableæ¥å£" class="headerlink" title="2.1.2 å®ç°Runnableæ¥å£"></a>2.1.2 å®ç°Runnableæ¥å£</h3><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<code>Runnable</code>æ¥å£(JDK 1.8 +)ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°<code>Runnable</code>æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>Java 8çš„å‡½æ•°å¼ç¼–ç¨‹</strong>æ¥ç®€åŒ–ä»£ç ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;MyThread&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>().start();<br>    <br>        <span class="hljs-comment">// Java 8 å‡½æ•°å¼ç¼–ç¨‹ï¼Œå¯ä»¥çœç•¥MyThreadç±»</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            System.out.println(<span class="hljs-string">&quot;Java 8 åŒ¿åå†…éƒ¨ç±»&quot;</span>);<br>        &#125;).start();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-1-3-Threadç±»æ„é€ æ–¹æ³•"><a href="#2-1-3-Threadç±»æ„é€ æ–¹æ³•" class="headerlink" title="2.1.3 Threadç±»æ„é€ æ–¹æ³•"></a>2.1.3 Threadç±»æ„é€ æ–¹æ³•</h3><p><code>Thread</code>ç±»æ˜¯ä¸€ä¸ª<code>Runnable</code>æ¥å£çš„å®ç°ç±»ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹<code>Thread</code>ç±»çš„æºç ã€‚</p><p>æŸ¥çœ‹<code>Thread</code>ç±»çš„æ„é€ æ–¹æ³•ï¼Œå‘ç°å…¶å®æ˜¯ç®€å•è°ƒç”¨ä¸€ä¸ªç§æœ‰çš„<code>init</code>æ–¹æ³•æ¥å®ç°åˆå§‹åŒ–ã€‚<code>init</code>çš„æ–¹æ³•ç­¾åï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Threadç±»æºç  </span><br><br><span class="hljs-comment">// ç‰‡æ®µ1 - initæ–¹æ³•</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ThreadGroup g, Runnable target, String name,</span><br><span class="hljs-params">                      <span class="hljs-type">long</span> stackSize, AccessControlContext acc,</span><br><span class="hljs-params">                      <span class="hljs-type">boolean</span> inheritThreadLocals)</span><br><br><span class="hljs-comment">// ç‰‡æ®µ2 - æ„é€ å‡½æ•°è°ƒç”¨initæ–¹æ³•</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">Thread</span><span class="hljs-params">(Runnable target)</span> &#123;<br>    init(<span class="hljs-literal">null</span>, target, <span class="hljs-string">&quot;Thread-&quot;</span> + nextThreadNum(), <span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-comment">// ç‰‡æ®µ3 - ä½¿ç”¨åœ¨initæ–¹æ³•é‡Œåˆå§‹åŒ–AccessControlContextç±»å‹çš„ç§æœ‰å±æ€§</span><br><span class="hljs-built_in">this</span>.inheritedAccessControlContext = <br>    acc != <span class="hljs-literal">null</span> ? acc : AccessController.getContext();<br><br><span class="hljs-comment">// ç‰‡æ®µ4 - ä¸¤ä¸ªå¯¹ç”¨äºæ”¯æŒThreadLocalçš„ç§æœ‰å±æ€§</span><br>ThreadLocal.<span class="hljs-type">ThreadLocalMap</span> <span class="hljs-variable">threadLocals</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>ThreadLocal.<span class="hljs-type">ThreadLocalMap</span> <span class="hljs-variable">inheritableThreadLocals</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æŒ¨ä¸ªæ¥è§£é‡Šä¸€ä¸‹<code>init</code>æ–¹æ³•çš„è¿™äº›å‚æ•°ï¼š</p><p>- </p><p>  gï¼šçº¿ç¨‹ç»„ï¼ŒæŒ‡å®šè¿™ä¸ªçº¿ç¨‹æ˜¯åœ¨å“ªä¸ªçº¿ç¨‹ç»„ä¸‹ï¼›</p><p>- </p><p>  targetï¼šæŒ‡å®šè¦æ‰§è¡Œçš„ä»»åŠ¡ï¼›</p><p>- </p><p>  nameï¼šçº¿ç¨‹çš„åå­—ï¼Œå¤šä¸ªçº¿ç¨‹çš„åå­—æ˜¯å¯ä»¥é‡å¤çš„ã€‚å¦‚æœä¸æŒ‡å®šåå­—ï¼Œè§ç‰‡æ®µ2ï¼›</p><p>- </p><p>  accï¼šè§ç‰‡æ®µ3ï¼Œç”¨äºåˆå§‹åŒ–ç§æœ‰å˜é‡<code>inheritedAccessControlContext</code>ã€‚</p><blockquote><p>è¿™ä¸ªå˜é‡æœ‰ç‚¹ç¥å¥‡ã€‚å®ƒæ˜¯ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œä½†æ˜¯åœ¨<code>Thread</code>ç±»é‡Œåªæœ‰<code>init</code>æ–¹æ³•å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨<code>exit</code>æ–¹æ³•æŠŠå®ƒè®¾ä¸º<code>null</code>ã€‚å…¶å®ƒæ²¡æœ‰ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒã€‚ä¸€èˆ¬æˆ‘ä»¬æ˜¯ä¸ä¼šä½¿ç”¨å®ƒçš„ï¼Œé‚£ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨åˆ°è¿™ä¸ªå˜é‡å‘¢ï¼Ÿå¯ä»¥å‚è€ƒè¿™ä¸ªstackoverflowçš„é—®é¢˜ï¼š<a href="https://stackoverflow.com/questions/13516766/restrict-permissions-to-threads-which-execute-third-party-software">Restrict permissions to threads which execute third party software</a>ï¼›</p></blockquote><p>- </p><p>  inheritThreadLocalsï¼šå¯ç»§æ‰¿çš„<code>ThreadLocal</code>ï¼Œè§ç‰‡æ®µ4ï¼Œ<code>Thread</code>ç±»é‡Œé¢æœ‰ä¸¤ä¸ªç§æœ‰å±æ€§æ¥æ”¯æŒ<code>ThreadLocal</code>ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚ä»‹ç»<code>ThreadLocal</code>çš„æ¦‚å¿µã€‚</p><p>å®é™…æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¤§å¤šæ˜¯ç›´æ¥è°ƒç”¨ä¸‹é¢ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Thread</span><span class="hljs-params">(Runnable target)</span></span><br><br><span class="hljs-function"><span class="hljs-title">Thread</span><span class="hljs-params">(Runnable target, String name)</span></span><br><br><br></code></pre></td></tr></table></figure><h3 id="2-1-4-Threadç±»çš„å‡ ä¸ªå¸¸ç”¨æ–¹æ³•"><a href="#2-1-4-Threadç±»çš„å‡ ä¸ªå¸¸ç”¨æ–¹æ³•" class="headerlink" title="2.1.4 Threadç±»çš„å‡ ä¸ªå¸¸ç”¨æ–¹æ³•"></a>2.1.4 Threadç±»çš„å‡ ä¸ªå¸¸ç”¨æ–¹æ³•</h3><p>è¿™é‡Œä»‹ç»ä¸€ä¸‹Threadç±»çš„å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•ï¼š</p><p>- </p><p>  currentThread()ï¼šé™æ€æ–¹æ³•ï¼Œè¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨ï¼›</p><p>- </p><p>  start()ï¼šå¼€å§‹æ‰§è¡Œçº¿ç¨‹çš„æ–¹æ³•ï¼Œjavaè™šæ‹Ÿæœºä¼šè°ƒç”¨çº¿ç¨‹å†…çš„run()æ–¹æ³•ï¼›</p><p>- </p><p>  yield()ï¼šyieldåœ¨è‹±è¯­é‡Œæœ‰æ”¾å¼ƒçš„æ„æ€ï¼ŒåŒæ ·ï¼Œè¿™é‡Œçš„yield()æŒ‡çš„æ˜¯å½“å‰çº¿ç¨‹æ„¿æ„è®©å‡ºå¯¹å½“å‰å¤„ç†å™¨çš„å ç”¨ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°±ç®—å½“å‰çº¿ç¨‹è°ƒç”¨äº†yield()æ–¹æ³•ï¼Œç¨‹åºåœ¨è°ƒåº¦çš„æ—¶å€™ï¼Œä¹Ÿè¿˜æœ‰å¯èƒ½ç»§ç»­è¿è¡Œè¿™ä¸ªçº¿ç¨‹çš„ï¼›</p><p>- </p><p>  sleep()ï¼šé™æ€æ–¹æ³•ï¼Œä½¿å½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´ï¼›</p><p>- </p><p>  join()ï¼šä½¿å½“å‰çº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åå†ç»§ç»­æ‰§è¡Œï¼Œå†…éƒ¨è°ƒç”¨çš„æ˜¯Objectç±»çš„waitæ–¹æ³•å®ç°çš„ï¼›</p><h3 id="2-1-5-Threadç±»ä¸Runnableæ¥å£çš„æ¯”è¾ƒï¼š"><a href="#2-1-5-Threadç±»ä¸Runnableæ¥å£çš„æ¯”è¾ƒï¼š" class="headerlink" title="2.1.5 Threadç±»ä¸Runnableæ¥å£çš„æ¯”è¾ƒï¼š"></a>2.1.5 Threadç±»ä¸Runnableæ¥å£çš„æ¯”è¾ƒï¼š</h3><p>å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„çº¿ç¨‹ç±»ï¼Œå¯ä»¥æœ‰ç»§æ‰¿<code>Thread</code>ç±»æˆ–è€…å®ç°<code>Runnable</code>æ¥å£è¿™ä¸¤ç§æ–¹å¼ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆä¼˜åŠ£å‘¢ï¼Ÿ</p><p>- </p><p>  ç”±äºJavaâ€œå•ç»§æ‰¿ï¼Œå¤šå®ç°â€çš„ç‰¹æ€§ï¼ŒRunnableæ¥å£ä½¿ç”¨èµ·æ¥æ¯”Threadæ›´çµæ´»ã€‚</p><p>- </p><p>  Runnableæ¥å£å‡ºç°æ›´ç¬¦åˆé¢å‘å¯¹è±¡ï¼Œå°†çº¿ç¨‹å•ç‹¬è¿›è¡Œå¯¹è±¡çš„å°è£…ã€‚</p><p>- </p><p>  Runnableæ¥å£å‡ºç°ï¼Œé™ä½äº†çº¿ç¨‹å¯¹è±¡å’Œçº¿ç¨‹ä»»åŠ¡çš„è€¦åˆæ€§ã€‚</p><p>- </p><p>  å¦‚æœä½¿ç”¨çº¿ç¨‹æ—¶ä¸éœ€è¦ä½¿ç”¨Threadç±»çš„è¯¸å¤šæ–¹æ³•ï¼Œæ˜¾ç„¶ä½¿ç”¨Runnableæ¥å£æ›´ä¸ºè½»é‡ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬é€šå¸¸ä¼˜å…ˆä½¿ç”¨â€œå®ç°<code>Runnable</code>æ¥å£â€è¿™ç§æ–¹å¼æ¥è‡ªå®šä¹‰çº¿ç¨‹ç±»ã€‚</p><h2 id="2-2-Callableã€Futureä¸FutureTask"><a href="#2-2-Callableã€Futureä¸FutureTask" class="headerlink" title="2.2 Callableã€Futureä¸FutureTask"></a>2.2 Callableã€Futureä¸FutureTask</h2><p>é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>Runnable</code>å’Œ<code>Thread</code>æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚ä½†æ˜¯å®ƒä»¬æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œå°±æ˜¯<code>run</code>æ–¹æ³•æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ã€‚è€Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å¼€å¯ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”è¿™ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆåæœ‰ä¸€ä¸ªè¿”å›å€¼ã€‚</p><p>JDKæä¾›äº†<code>Callable</code>æ¥å£ä¸<code>Future</code>ç±»ä¸ºæˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯æ‰€è°“çš„â€œå¼‚æ­¥â€æ¨¡å‹ã€‚</p><h3 id="2-2-1-Callableæ¥å£"><a href="#2-2-1-Callableæ¥å£" class="headerlink" title="2.2.1 Callableæ¥å£"></a>2.2.1 Callableæ¥å£</h3><p><code>Callable</code>ä¸<code>Runnable</code>ç±»ä¼¼ï¼ŒåŒæ ·æ˜¯åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„å‡½æ•°å¼æ¥å£ã€‚ä¸åŒçš„æ˜¯ï¼Œ<code>Callable</code>æä¾›çš„æ–¹æ³•æ˜¯<strong>æœ‰è¿”å›å€¼</strong>çš„ï¼Œè€Œä¸”æ”¯æŒ<strong>æ³›å‹</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Callable</span>&lt;V&gt; &#123;<br><br>    V <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£ä¸€èˆ¬æ˜¯æ€ä¹ˆä½¿ç”¨<code>Callable</code>çš„å‘¢ï¼Ÿ<code>Callable</code>ä¸€èˆ¬æ˜¯é…åˆçº¿ç¨‹æ± å·¥å…·<code>ExecutorService</code>æ¥ä½¿ç”¨çš„ã€‚æˆ‘ä»¬ä¼šåœ¨åç»­ç« èŠ‚è§£é‡Šçº¿ç¨‹æ± çš„ä½¿ç”¨ã€‚è¿™é‡Œåªä»‹ç»<code>ExecutorService</code>å¯ä»¥ä½¿ç”¨<code>submit</code>æ–¹æ³•æ¥è®©ä¸€ä¸ª<code>Callable</code>æ¥å£æ‰§è¡Œã€‚å®ƒä¼šè¿”å›ä¸€ä¸ª<code>Future</code>ï¼Œæˆ‘ä»¬åç»­çš„ç¨‹åºå¯ä»¥é€šè¿‡è¿™ä¸ª<code>Future</code>çš„<code>get</code>æ–¹æ³•å¾—åˆ°ç»“æœã€‚</p><p>è¿™é‡Œå¯ä»¥çœ‹ä¸€ä¸ªç®€å•çš„ä½¿ç”¨demoï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Future</span>&lt;V&gt; &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">cancel</span><span class="hljs-params">(<span class="hljs-type">boolean</span> paramBoolean)</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isCancelled</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDone</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> V <span class="hljs-title function_">get</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException, ExecutionException;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> V <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">long</span> paramLong, TimeUnit paramTimeUnit)</span><br>            <span class="hljs-keyword">throws</span> InterruptedException, ExecutionException, TimeoutException;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>cancel</code>æ–¹æ³•æ˜¯è¯•å›¾å–æ¶ˆä¸€ä¸ªçº¿ç¨‹çš„æ‰§è¡Œã€‚</p><p>æ³¨æ„æ˜¯<strong>è¯•å›¾</strong>å–æ¶ˆï¼Œ<strong>å¹¶ä¸ä¸€å®šèƒ½å–æ¶ˆæˆåŠŸ</strong>ã€‚å› ä¸ºä»»åŠ¡å¯èƒ½å·²å®Œæˆã€å·²å–æ¶ˆã€æˆ–è€…ä¸€äº›å…¶å®ƒå› ç´ ä¸èƒ½å–æ¶ˆï¼Œå­˜åœ¨å–æ¶ˆå¤±è´¥çš„å¯èƒ½ã€‚<code>boolean</code>ç±»å‹çš„è¿”å›å€¼æ˜¯â€œæ˜¯å¦å–æ¶ˆæˆåŠŸâ€çš„æ„æ€ã€‚å‚æ•°<code>paramBoolean</code>è¡¨ç¤ºæ˜¯å¦é‡‡ç”¨ä¸­æ–­çš„æ–¹å¼å–æ¶ˆçº¿ç¨‹æ‰§è¡Œã€‚</p><p>æ‰€ä»¥æœ‰æ—¶å€™ï¼Œä¸ºäº†è®©ä»»åŠ¡æœ‰èƒ½å¤Ÿå–æ¶ˆçš„åŠŸèƒ½ï¼Œå°±ä½¿ç”¨<code>Callable</code>æ¥ä»£æ›¿<code>Runnable</code>ã€‚å¦‚æœä¸ºäº†å¯å–æ¶ˆæ€§è€Œä½¿ç”¨ <code>Future</code>ä½†åˆä¸æä¾›å¯ç”¨çš„ç»“æœï¼Œåˆ™å¯ä»¥å£°æ˜ <code>Future&lt;?&gt;</code>å½¢å¼ç±»å‹ã€å¹¶è¿”å› <code>null</code>ä½œä¸ºåº•å±‚ä»»åŠ¡çš„ç»“æœã€‚</p><h3 id="2-2-3-FutureTaskç±»"><a href="#2-2-3-FutureTaskç±»" class="headerlink" title="2.2.3 FutureTaskç±»"></a>2.2.3 FutureTaskç±»</h3><p>ä¸Šé¢ä»‹ç»äº†<code>Future</code>æ¥å£ã€‚è¿™ä¸ªæ¥å£æœ‰ä¸€ä¸ªå®ç°ç±»å«<code>FutureTask</code>ã€‚<code>FutureTask</code>æ˜¯å®ç°çš„<code>RunnableFuture</code>æ¥å£çš„ï¼Œè€Œ<code>RunnableFuture</code>æ¥å£åŒæ—¶ç»§æ‰¿äº†<code>Runnable</code>æ¥å£å’Œ<code>Future</code>æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è‡ªå®šä¹‰Callableï¼Œä¸ä¸Šé¢ä¸€æ ·</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Task</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;Integer&gt;&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">// æ¨¡æ‹Ÿè®¡ç®—éœ€è¦ä¸€ç§’</span><br>        Thread.sleep(<span class="hljs-number">1000</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String args[])</span>&#123;<br>        <span class="hljs-comment">// ä½¿ç”¨</span><br>        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newCachedThreadPool();<br>        FutureTask&lt;Integer&gt; futureTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Task</span>());<br>        executor.submit(futureTask);<br>        System.out.println(futureTask.get());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£<code>FutureTask</code>ç±»æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰ä¸€ä¸ª<code>FutureTask</code>ç±»ï¼Ÿå‰é¢è¯´åˆ°äº†<code>Future</code>åªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œå®ƒé‡Œé¢çš„<code>cancel</code>ï¼Œ<code>get</code>ï¼Œ<code>isDone</code>ç­‰æ–¹æ³•è¦è‡ªå·±å®ç°èµ·æ¥éƒ½æ˜¯<strong>éå¸¸å¤æ‚</strong>çš„ã€‚æ‰€ä»¥JDKæä¾›äº†ä¸€ä¸ª<code>FutureTask</code>ç±»æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><ul><li>&#96;&#96;&#96;java<br>&#x2F;**<ul><li></li><li><p>stateå¯èƒ½çš„çŠ¶æ€è½¬å˜è·¯å¾„å¦‚ä¸‹ï¼š</p></li><li><p>NEW -&gt; COMPLETING -&gt; NORMAL</p></li><li><p>NEW -&gt; COMPLETING -&gt; EXCEPTIONAL</p></li><li><p>NEW -&gt; CANCELLED</p></li><li><p>NEW -&gt; INTERRUPTING -&gt; INTERRUPTED<br>*&#x2F;<br>private volatile int state;<br>private static final int NEW          &#x3D; 0;<br>private static final int COMPLETING   &#x3D; 1;<br>private static final int NORMAL       &#x3D; 2;<br>private static final int EXCEPTIONAL  &#x3D; 3;<br>private static final int CANCELLED    &#x3D; 4;<br>private static final int INTERRUPTING &#x3D; 5;<br>private static final int INTERRUPTED  &#x3D; 6;</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs csharp">    <br>    <br><br>&gt; stateè¡¨ç¤ºä»»åŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼Œåˆå§‹çŠ¶æ€ä¸ºNEWã€‚è¿è¡ŒçŠ¶æ€åªä¼šåœ¨<span class="hljs-keyword">set</span>ã€setExceptionã€cancelæ–¹æ³•ä¸­ç»ˆæ­¢ã€‚COMPLETINGã€INTERRUPTINGæ˜¯ä»»åŠ¡å®Œæˆåçš„ç¬æ—¶çŠ¶æ€ã€‚<br><br>ä»¥ä¸Šå°±æ˜¯Javaå¤šçº¿ç¨‹å‡ ä¸ªåŸºæœ¬çš„ç±»å’Œæ¥å£çš„ä»‹ç»ã€‚å¯ä»¥æ‰“å¼€JDKçœ‹çœ‹æºç ï¼Œä½“ä¼šè¿™å‡ ä¸ªç±»çš„è®¾è®¡æ€è·¯å’Œç”¨é€”å§ï¼<br><br>**å‚è€ƒèµ„æ–™**<br><br>- <br><br>  [<span class="hljs-meta">Javaè¯­è¨€å®šä¹‰çš„çº¿ç¨‹çŠ¶æ€åˆ†æ</span>](https:<span class="hljs-comment">//www.cnblogs.com/trust-freedom/p/6606594.html)</span><br><br>- <br><br>  [<span class="hljs-meta">Javaçº¿ç¨‹çŠ¶æ€åˆ†æ</span>](https:<span class="hljs-comment">//fangjian0423.github.io/2016/06/04/java-thread-state/)</span><br><br>- <br><br>  [<span class="hljs-meta">FutureTaskæºç åˆ†æ</span>](https:<span class="hljs-comment">//my.oschina.net/7001/blog/875658)</span><br><br><br><br><span class="hljs-meta"># 3 çº¿ç¨‹ç»„å’Œçº¿ç¨‹ä¼˜å…ˆçº§</span><br><br><span class="hljs-meta">## 3.1 çº¿ç¨‹ç»„(ThreadGroup)</span><br><br>Javaä¸­ç”¨ThreadGroupæ¥è¡¨ç¤ºçº¿ç¨‹ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çº¿ç¨‹ç»„å¯¹çº¿ç¨‹è¿›è¡Œæ‰¹é‡æ§åˆ¶ã€‚<br><br>ThreadGroupå’ŒThreadçš„å…³ç³»å°±å¦‚åŒä»–ä»¬çš„å­—é¢æ„æ€ä¸€æ ·ç®€å•ç²—æš´ï¼Œæ¯ä¸ªThreadå¿…ç„¶å­˜åœ¨äºä¸€ä¸ªThreadGroupä¸­ï¼ŒThreadä¸èƒ½ç‹¬ç«‹äºThreadGroupå­˜åœ¨ã€‚æ‰§è¡Œmain()æ–¹æ³•çº¿ç¨‹çš„åå­—æ˜¯mainï¼Œå¦‚æœåœ¨<span class="hljs-keyword">new</span> Threadæ—¶æ²¡æœ‰æ˜¾å¼æŒ‡å®šï¼Œé‚£ä¹ˆé»˜è®¤å°†çˆ¶çº¿ç¨‹ï¼ˆå½“å‰æ‰§è¡Œ<span class="hljs-keyword">new</span> Threadçš„çº¿ç¨‹ï¼‰çº¿ç¨‹ç»„è®¾ç½®ä¸ºè‡ªå·±çš„çº¿ç¨‹ç»„ã€‚<br><br>ç¤ºä¾‹ä»£ç ï¼š<br><br>```java<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        Thread testThread = <span class="hljs-keyword">new</span> Thread(() -&gt; &#123;<br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;testThreadå½“å‰çº¿ç¨‹ç»„åå­—ï¼š&quot;</span> +<br>                    Thread.currentThread().getThreadGroup().getName());<br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;testThreadçº¿ç¨‹åå­—ï¼š&quot;</span> +<br>                    Thread.currentThread().getName());<br>        &#125;);<br><br>        testThread.start();<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;æ‰§è¡Œmainæ–¹æ³•çº¿ç¨‹åå­—ï¼š&quot;</span> + Thread.currentThread().getName());<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">æ‰§è¡Œmainæ–¹æ³•çº¿ç¨‹åå­—ï¼šmain<br><br>testThreadå½“å‰çº¿ç¨‹ç»„åå­—ï¼šmain<br><br>testThreadçº¿ç¨‹åå­—ï¼šThread-<span class="hljs-number">0</span><br><br><br></code></pre></td></tr></table></figure><p>ThreadGroupç®¡ç†ç€å®ƒä¸‹é¢çš„Threadï¼ŒThreadGroupæ˜¯ä¸€ä¸ªæ ‡å‡†çš„<strong>å‘ä¸‹å¼•ç”¨</strong>çš„æ ‘çŠ¶ç»“æ„ï¼Œè¿™æ ·è®¾è®¡çš„åŸå› æ˜¯<strong>é˜²æ­¢â€ä¸Šçº§â€çº¿ç¨‹è¢«â€ä¸‹çº§â€çº¿ç¨‹å¼•ç”¨è€Œæ— æ³•æœ‰æ•ˆåœ°è¢«GCå›æ”¶</strong>ã€‚</p><h2 id="3-2-çº¿ç¨‹çš„ä¼˜å…ˆçº§"><a href="#3-2-çº¿ç¨‹çš„ä¼˜å…ˆçº§" class="headerlink" title="3.2 çº¿ç¨‹çš„ä¼˜å…ˆçº§"></a>3.2 çº¿ç¨‹çš„ä¼˜å…ˆçº§</h2><p>Javaä¸­çº¿ç¨‹ä¼˜å…ˆçº§å¯ä»¥æŒ‡å®šï¼ŒèŒƒå›´æ˜¯1~10ã€‚ä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ“ä½œç³»ç»Ÿéƒ½æ”¯æŒ10çº§ä¼˜å…ˆçº§çš„åˆ’åˆ†ï¼ˆæ¯”å¦‚æœ‰äº›æ“ä½œç³»ç»Ÿåªæ”¯æŒ3çº§åˆ’åˆ†ï¼šä½ï¼Œä¸­ï¼Œé«˜ï¼‰ï¼ŒJavaåªæ˜¯ç»™æ“ä½œç³»ç»Ÿä¸€ä¸ªä¼˜å…ˆçº§çš„<strong>å‚è€ƒå€¼</strong>ï¼Œçº¿ç¨‹æœ€ç»ˆ<strong>åœ¨æ“ä½œç³»ç»Ÿçš„ä¼˜å…ˆçº§</strong>æ˜¯å¤šå°‘è¿˜æ˜¯ç”±æ“ä½œç³»ç»Ÿå†³å®šã€‚</p><p><font color='red'>Javaé»˜è®¤çš„çº¿ç¨‹ä¼˜å…ˆçº§ä¸º5ï¼Œ</font>çº¿ç¨‹çš„æ‰§è¡Œé¡ºåºç”±è°ƒåº¦ç¨‹åºæ¥å†³å®šï¼Œçº¿ç¨‹çš„ä¼˜å…ˆçº§ä¼šåœ¨çº¿ç¨‹è¢«è°ƒç”¨ä¹‹å‰è®¾å®šã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹å°†ä¼šæ¯”ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹æœ‰<strong>æ›´é«˜çš„å‡ ç‡</strong>å¾—åˆ°æ‰§è¡Œã€‚æˆ‘ä»¬ä½¿ç”¨æ–¹æ³•<code>Thread</code>ç±»çš„<code>setPriority()</code>å®ä¾‹æ–¹æ³•æ¥è®¾å®šçº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>();<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯é»˜è®¤çº¿ç¨‹ä¼˜å…ˆçº§ï¼š&quot;</span>+a.getPriority());<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>();<br>        b.setPriority(<span class="hljs-number">10</span>);<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯è®¾ç½®è¿‡çš„çº¿ç¨‹ä¼˜å…ˆçº§ï¼š&quot;</span>+b.getPriority());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">æˆ‘æ˜¯é»˜è®¤çº¿ç¨‹ä¼˜å…ˆçº§ï¼š<span class="hljs-number">5</span><br><br>æˆ‘æ˜¯è®¾ç½®è¿‡çš„çº¿ç¨‹ä¼˜å…ˆçº§ï¼š<span class="hljs-number">10</span><br><br><br></code></pre></td></tr></table></figure><p>æ—¢ç„¶æœ‰1-10çš„çº§åˆ«æ¥è®¾å®šäº†çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œè¿™æ—¶å€™å¯èƒ½æœ‰äº›è¯»è€…ä¼šé—®ï¼Œé‚£ä¹ˆæˆ‘æ˜¯ä¸æ˜¯å¯ä»¥åœ¨ä¸šåŠ¡å®ç°çš„æ—¶å€™ï¼Œé‡‡ç”¨è¿™ç§æ–¹æ³•æ¥æŒ‡å®šä¸€äº›çº¿ç¨‹æ‰§è¡Œçš„å…ˆåé¡ºåºï¼Ÿ</p><p>å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„ç­”æ¡ˆæ˜¯:No!</p><p>Javaä¸­çš„ä¼˜å…ˆçº§æ¥è¯´ä¸æ˜¯ç‰¹åˆ«çš„å¯é ï¼Œ<strong>Javaç¨‹åºä¸­å¯¹çº¿ç¨‹æ‰€è®¾ç½®çš„ä¼˜å…ˆçº§åªæ˜¯ç»™æ“ä½œç³»ç»Ÿä¸€ä¸ªå»ºè®®ï¼Œæ“ä½œç³»ç»Ÿä¸ä¸€å®šä¼šé‡‡çº³ã€‚è€ŒçœŸæ­£çš„è°ƒç”¨é¡ºåºï¼Œæ˜¯ç”±æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹è°ƒåº¦ç®—æ³•å†³å®šçš„</strong>ã€‚</p><p>æˆ‘ä»¬é€šè¿‡ä»£ç æ¥éªŒè¯ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-built_in">super</span>.run();<br>            System.out.println(String.format(<span class="hljs-string">&quot;å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼š%sï¼Œä¼˜å…ˆçº§ï¼š%d&quot;</span>,<br>                    Thread.currentThread().getName(),<br>                    Thread.currentThread().getPriority()));<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        IntStream.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>).forEach(i -&gt; &#123;<br>            <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">T1</span>());<br>            thread.setPriority(i);<br>            thread.start();<br>        &#125;);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æŸæ¬¡è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java">å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼šThread-<span class="hljs-number">17</span>ï¼Œä¼˜å…ˆçº§ï¼š<span class="hljs-number">9</span><br><br>å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼šThread-<span class="hljs-number">1</span>ï¼Œä¼˜å…ˆçº§ï¼š<span class="hljs-number">1</span><br><br>å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼šThread-<span class="hljs-number">13</span>ï¼Œä¼˜å…ˆçº§ï¼š<span class="hljs-number">7</span><br><br>å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼šThread-<span class="hljs-number">11</span>ï¼Œä¼˜å…ˆçº§ï¼š<span class="hljs-number">6</span><br><br>å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼šThread-<span class="hljs-number">15</span>ï¼Œä¼˜å…ˆçº§ï¼š<span class="hljs-number">8</span><br><br>å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼šThread-<span class="hljs-number">7</span>ï¼Œä¼˜å…ˆçº§ï¼š<span class="hljs-number">4</span><br><br>å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼šThread-<span class="hljs-number">9</span>ï¼Œä¼˜å…ˆçº§ï¼š<span class="hljs-number">5</span><br><br>å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼šThread-<span class="hljs-number">3</span>ï¼Œä¼˜å…ˆçº§ï¼š<span class="hljs-number">2</span><br><br>å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯ï¼šThread-<span class="hljs-number">5</span>ï¼Œä¼˜å…ˆçº§ï¼š<span class="hljs-number">3</span><br><br><br></code></pre></td></tr></table></figure><p>Javaæä¾›ä¸€ä¸ª<strong>çº¿ç¨‹è°ƒåº¦å™¨</strong>æ¥ç›‘è§†å’Œæ§åˆ¶å¤„äº<strong>RUNNABLEçŠ¶æ€</strong>çš„çº¿ç¨‹ã€‚çº¿ç¨‹çš„è°ƒåº¦ç­–ç•¥é‡‡ç”¨<strong>æŠ¢å å¼</strong>ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹æ¯”ä¼˜å…ˆçº§ä½çš„çº¿ç¨‹ä¼šæœ‰æ›´å¤§çš„å‡ ç‡ä¼˜å…ˆæ‰§è¡Œã€‚åœ¨ä¼˜å…ˆçº§ç›¸åŒçš„æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§â€œå…ˆåˆ°å…ˆå¾—â€çš„åŸåˆ™ã€‚æ¯ä¸ªJavaç¨‹åºéƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„ä¸»çº¿ç¨‹ï¼Œå°±æ˜¯é€šè¿‡JVMå¯åŠ¨çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹mainçº¿ç¨‹ã€‚</p><p>è¿˜æœ‰ä¸€ç§çº¿ç¨‹ç§°ä¸º<strong>å®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemonï¼‰</strong>ï¼Œå®ˆæŠ¤çº¿ç¨‹é»˜è®¤çš„ä¼˜å…ˆçº§æ¯”è¾ƒä½ã€‚</p><blockquote><p>å¦‚æœæŸçº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œé‚£å¦‚æœæ‰€ä»¥çš„éå®ˆæŠ¤çº¿ç¨‹ç»“æŸï¼Œè¿™ä¸ªå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šè‡ªåŠ¨ç»“æŸã€‚</p><p>åº”ç”¨åœºæ™¯æ˜¯ï¼šå½“æ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹ç»“æŸæ—¶ï¼Œç»“æŸå…¶ä½™çš„å­çº¿ç¨‹ï¼ˆå®ˆæŠ¤çº¿ç¨‹ï¼‰è‡ªåŠ¨å…³é—­ï¼Œå°±å…å»äº†è¿˜è¦ç»§ç»­å…³é—­å­çº¿ç¨‹çš„éº»çƒ¦ã€‚</p><p>ä¸€ä¸ªçº¿ç¨‹é»˜è®¤æ˜¯éå®ˆæŠ¤çº¿ç¨‹ï¼Œå¯ä»¥é€šè¿‡Threadç±»çš„setDaemon(boolean on)æ¥è®¾ç½®ã€‚</p></blockquote><p>åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰è°ˆåˆ°ä¸€ä¸ªçº¿ç¨‹å¿…ç„¶å­˜åœ¨äºä¸€ä¸ªçº¿ç¨‹ç»„ä¸­ï¼Œé‚£ä¹ˆå½“çº¿ç¨‹å’Œçº¿ç¨‹ç»„çš„ä¼˜å…ˆçº§ä¸ä¸€è‡´çš„æ—¶å€™å°†ä¼šæ€æ ·å‘¢ï¼Ÿæˆ‘ä»¬ç”¨ä¸‹é¢çš„æ¡ˆä¾‹æ¥éªŒè¯ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">ThreadGroup</span> <span class="hljs-variable">threadGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadGroup</span>(<span class="hljs-string">&quot;t1&quot;</span>);<br>    threadGroup.setMaxPriority(<span class="hljs-number">6</span>);<br>    <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(threadGroup,<span class="hljs-string">&quot;thread&quot;</span>);<br>    thread.setPriority(<span class="hljs-number">9</span>);<br>    System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯çº¿ç¨‹ç»„çš„ä¼˜å…ˆçº§&quot;</span>+threadGroup.getMaxPriority());<br>    System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯çº¿ç¨‹çš„ä¼˜å…ˆçº§&quot;</span>+thread.getPriority());<br>&#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><blockquote><p>æˆ‘æ˜¯çº¿ç¨‹ç»„çš„ä¼˜å…ˆçº§6 æˆ‘æ˜¯çº¿ç¨‹çš„ä¼˜å…ˆçº§6</p></blockquote><p>æ‰€ä»¥ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹ä¼˜å…ˆçº§å¤§äºçº¿ç¨‹æ‰€åœ¨<strong>çº¿ç¨‹ç»„çš„æœ€å¤§ä¼˜å…ˆçº§</strong>ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹çš„ä¼˜å…ˆçº§å°†ä¼šå¤±æ•ˆï¼Œå–è€Œä»£ä¹‹çš„æ˜¯çº¿ç¨‹ç»„çš„æœ€å¤§ä¼˜å…ˆçº§ã€‚</p><h2 id="3-3-çº¿ç¨‹ç»„çš„å¸¸ç”¨æ–¹æ³•åŠæ•°æ®ç»“æ„"><a href="#3-3-çº¿ç¨‹ç»„çš„å¸¸ç”¨æ–¹æ³•åŠæ•°æ®ç»“æ„" class="headerlink" title="3.3 çº¿ç¨‹ç»„çš„å¸¸ç”¨æ–¹æ³•åŠæ•°æ®ç»“æ„"></a>3.3 çº¿ç¨‹ç»„çš„å¸¸ç”¨æ–¹æ³•åŠæ•°æ®ç»“æ„</h2><h3 id="3-3-1-çº¿ç¨‹ç»„çš„å¸¸ç”¨æ–¹æ³•"><a href="#3-3-1-çº¿ç¨‹ç»„çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="3.3.1 çº¿ç¨‹ç»„çš„å¸¸ç”¨æ–¹æ³•"></a>3.3.1 çº¿ç¨‹ç»„çš„å¸¸ç”¨æ–¹æ³•</h3><p><strong>è·å–å½“å‰çš„çº¿ç¨‹ç»„åå­—</strong></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">ThreadGroup()</span>.get<span class="hljs-constructor">Name()</span><br></code></pre></td></tr></table></figure><p><strong>å¤åˆ¶çº¿ç¨‹ç»„</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¤åˆ¶ä¸€ä¸ªçº¿ç¨‹æ•°ç»„åˆ°ä¸€ä¸ªçº¿ç¨‹ç»„</span><br>Thread[] threads = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>[threadGroup.activeCount()];<br><span class="hljs-type">TheadGroup</span> <span class="hljs-variable">threadGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadGroup</span>();<br>threadGroup.enumerate(threads);<br></code></pre></td></tr></table></figure><p><strong>çº¿ç¨‹ç»„ç»Ÿä¸€å¼‚å¸¸å¤„ç†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.func.axc.threadgroup;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadGroupDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ThreadGroup</span> <span class="hljs-variable">threadGroup1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadGroup</span>(<span class="hljs-string">&quot;group1&quot;</span>) &#123;<br>            <span class="hljs-comment">// ç»§æ‰¿ThreadGroupå¹¶é‡æ–°å®šä¹‰ä»¥ä¸‹æ–¹æ³•</span><br>            <span class="hljs-comment">// åœ¨çº¿ç¨‹æˆå‘˜æŠ›å‡ºunchecked exception</span><br>            <span class="hljs-comment">// ä¼šæ‰§è¡Œæ­¤æ–¹æ³•</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uncaughtException</span><span class="hljs-params">(Thread t, Throwable e)</span> &#123;<br>                System.out.println(t.getName() + <span class="hljs-string">&quot;: &quot;</span> + e.getMessage());<br>            &#125;<br>        &#125;;<br><br>        <span class="hljs-comment">// è¿™ä¸ªçº¿ç¨‹æ˜¯threadGroup1çš„ä¸€å‘˜</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(threadGroup1, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() &#123;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-comment">// æŠ›å‡ºuncheckedå¼‚å¸¸</span><br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;æµ‹è¯•å¼‚å¸¸&quot;</span>);<br>            &#125;<br>        &#125;);<br>    <br>        thread1.start();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-3-2-çº¿ç¨‹ç»„çš„æ•°æ®ç»“æ„"><a href="#3-3-2-çº¿ç¨‹ç»„çš„æ•°æ®ç»“æ„" class="headerlink" title="3.3.2 çº¿ç¨‹ç»„çš„æ•°æ®ç»“æ„"></a>3.3.2 çº¿ç¨‹ç»„çš„æ•°æ®ç»“æ„</h3><p>çº¿ç¨‹ç»„è¿˜å¯ä»¥åŒ…å«å…¶ä»–çš„çº¿ç¨‹ç»„ï¼Œä¸ä»…ä»…æ˜¯çº¿ç¨‹ã€‚</p><p>é¦–å…ˆçœ‹çœ‹ <code>ThreadGroup</code>æºç ä¸­çš„æˆå‘˜å˜é‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadGroup</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Thread</span>.UncaughtExceptionHandler &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ThreadGroup parent; <span class="hljs-comment">// çˆ¶äº²ThreadGroup</span><br>    String name; <span class="hljs-comment">// ThreadGroupr çš„åç§°</span><br>    <span class="hljs-type">int</span> maxPriority; <span class="hljs-comment">// çº¿ç¨‹æœ€å¤§ä¼˜å…ˆçº§</span><br>    <span class="hljs-type">boolean</span> destroyed; <span class="hljs-comment">// æ˜¯å¦è¢«é”€æ¯</span><br>    <span class="hljs-type">boolean</span> daemon; <span class="hljs-comment">// æ˜¯å¦å®ˆæŠ¤çº¿ç¨‹</span><br>    <span class="hljs-type">boolean</span> vmAllowSuspension; <span class="hljs-comment">// æ˜¯å¦å¯ä»¥ä¸­æ–­</span><br><br>    <span class="hljs-type">int</span> <span class="hljs-variable">nUnstartedThreads</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// è¿˜æœªå¯åŠ¨çš„çº¿ç¨‹</span><br>    <span class="hljs-type">int</span> nthreads; <span class="hljs-comment">// ThreadGroupä¸­çº¿ç¨‹æ•°ç›®</span><br>    Thread threads[]; <span class="hljs-comment">// ThreadGroupä¸­çš„çº¿ç¨‹</span><br>    <br>    <span class="hljs-type">int</span> ngroups; <span class="hljs-comment">// çº¿ç¨‹ç»„æ•°ç›®</span><br>    ThreadGroup groups[]; <span class="hljs-comment">// çº¿ç¨‹ç»„æ•°ç»„</span><br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åçœ‹çœ‹æ„é€ å‡½æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ç§æœ‰æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">private</span> <span class="hljs-title function_">ThreadGroup</span><span class="hljs-params">()</span> &#123; <br>    <span class="hljs-built_in">this</span>.name = <span class="hljs-string">&quot;system&quot;</span>;<br>    <span class="hljs-built_in">this</span>.maxPriority = Thread.MAX_PRIORITY;<br>    <span class="hljs-built_in">this</span>.parent = <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-comment">// é»˜è®¤æ˜¯ä»¥å½“å‰ThreadGroupä¼ å…¥ä½œä¸ºparent  ThreadGroupï¼Œæ–°çº¿ç¨‹ç»„çš„çˆ¶çº¿ç¨‹ç»„æ˜¯ç›®å‰æ­£åœ¨è¿è¡Œçº¿ç¨‹çš„çº¿ç¨‹ç»„ã€‚</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadGroup</span><span class="hljs-params">(String name)</span> &#123;<br>    <span class="hljs-built_in">this</span>(Thread.currentThread().getThreadGroup(), name);<br>&#125;<br><br><span class="hljs-comment">// æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadGroup</span><span class="hljs-params">(ThreadGroup parent, String name)</span> &#123;<br>    <span class="hljs-built_in">this</span>(checkParentAccess(parent), parent, name);<br>&#125;<br><br><span class="hljs-comment">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œä¸»è¦çš„æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">private</span> <span class="hljs-title function_">ThreadGroup</span><span class="hljs-params">(Void unused, ThreadGroup parent, String name)</span> &#123;<br>    <span class="hljs-built_in">this</span>.name = name;<br>    <span class="hljs-built_in">this</span>.maxPriority = parent.maxPriority;<br>    <span class="hljs-built_in">this</span>.daemon = parent.daemon;<br>    <span class="hljs-built_in">this</span>.vmAllowSuspension = parent.vmAllowSuspension;<br>    <span class="hljs-built_in">this</span>.parent = parent;<br>    parent.add(<span class="hljs-built_in">this</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸‰ä¸ªæ„é€ å‡½æ•°é‡Œè°ƒç”¨äº†<code>checkParentAccess</code>æ–¹æ³•ï¼Œè¿™é‡Œçœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ£€æŸ¥parent ThreadGroup</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Void <span class="hljs-title function_">checkParentAccess</span><span class="hljs-params">(ThreadGroup parent)</span> &#123;<br>    parent.checkAccess();<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­å½“å‰è¿è¡Œçš„çº¿ç¨‹æ˜¯å¦å…·æœ‰ä¿®æ”¹çº¿ç¨‹ç»„çš„æƒé™</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkAccess</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">SecurityManager</span> <span class="hljs-variable">security</span> <span class="hljs-operator">=</span> System.getSecurityManager();<br>    <span class="hljs-keyword">if</span> (security != <span class="hljs-literal">null</span>) &#123;<br>        security.checkAccess(<span class="hljs-built_in">this</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæ¶‰åŠåˆ°<code>SecurityManager</code>è¿™ä¸ªç±»ï¼Œå®ƒæ˜¯Javaçš„å®‰å…¨ç®¡ç†å™¨ï¼Œå®ƒå…è®¸åº”ç”¨ç¨‹åºåœ¨æ‰§è¡Œä¸€ä¸ªå¯èƒ½ä¸å®‰å…¨æˆ–æ•æ„Ÿçš„æ“ä½œå‰ç¡®å®šè¯¥æ“ä½œæ˜¯ä»€ä¹ˆï¼Œä»¥åŠæ˜¯å¦æ˜¯åœ¨å…è®¸æ‰§è¡Œè¯¥æ“ä½œçš„å®‰å…¨ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œå®ƒã€‚åº”ç”¨ç¨‹åºå¯ä»¥å…è®¸æˆ–ä¸å…è®¸è¯¥æ“ä½œã€‚</p><p>æ¯”å¦‚å¼•å…¥äº†ç¬¬ä¸‰æ–¹ç±»åº“ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯å®ƒçš„å®‰å…¨æ€§ã€‚</p><p>å…¶å®Threadç±»ä¹Ÿæœ‰ä¸€ä¸ªcheckAccess()æ–¹æ³•ï¼Œä¸è¿‡æ˜¯ç”¨æ¥å½“å‰è¿è¡Œçš„çº¿ç¨‹æ˜¯å¦æœ‰æƒé™ä¿®æ”¹è¢«è°ƒç”¨çš„è¿™ä¸ªçº¿ç¨‹å®ä¾‹ã€‚ï¼ˆDetermines if the currently running thread has permission to modify this thread.ï¼‰</p></blockquote><p>æ€»ç»“æ¥è¯´ï¼Œçº¿ç¨‹ç»„æ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„ç»“æ„ï¼Œæ¯ä¸ªçº¿ç¨‹ç»„ä¸‹é¢å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹æˆ–è€…çº¿ç¨‹ç»„ã€‚çº¿ç¨‹ç»„å¯ä»¥èµ·åˆ°ç»Ÿä¸€æ§åˆ¶çº¿ç¨‹çš„ä¼˜å…ˆçº§å’Œæ£€æŸ¥çº¿ç¨‹çš„æƒé™çš„ä½œç”¨ã€‚</p><p><strong>å‚è€ƒèµ„æ–™</strong></p><p>- </p><p>  <a href="https://blog.csdn.net/Evankaka/article/details/51627380">https://blog.csdn.net/Evankaka/article/details/51627380</a></p><p>- </p><p>  ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®è·µã€‹</p><p>- </p><p>  ã€ŠJavaå¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹</p><p>4 Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•</p><h1 id="4-Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•"><a href="#4-Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•" class="headerlink" title="4 Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•"></a>4 Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•</h1><h2 id="4-1-æ“ä½œç³»ç»Ÿä¸­çš„çº¿ç¨‹çŠ¶æ€è½¬æ¢"><a href="#4-1-æ“ä½œç³»ç»Ÿä¸­çš„çº¿ç¨‹çŠ¶æ€è½¬æ¢" class="headerlink" title="4.1 æ“ä½œç³»ç»Ÿä¸­çš„çº¿ç¨‹çŠ¶æ€è½¬æ¢"></a>4.1 æ“ä½œç³»ç»Ÿä¸­çš„çº¿ç¨‹çŠ¶æ€è½¬æ¢</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹æ“ä½œç³»ç»Ÿä¸­çš„çº¿ç¨‹çŠ¶æ€è½¬æ¢ã€‚</p><blockquote><p>åœ¨ç°åœ¨çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹æ˜¯è¢«è§†ä¸ºè½»é‡çº§è¿›ç¨‹çš„ï¼Œæ‰€ä»¥<strong>æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„çŠ¶æ€å…¶å®å’Œæ“ä½œç³»ç»Ÿè¿›ç¨‹çš„çŠ¶æ€æ˜¯ä¸€è‡´çš„</strong>ã€‚</p></blockquote><p><img src="https://3803541485-files.gitbook.io/~/files/v0/b/gitbook-28427.appspot.com/o/assets%2F-L_5HvtIhTFW9TQlOF8e%2F-L_5TIKcBFHWPtY3OwUo%2F-L_5TJM1VhwmwbNGzqwJ%2F%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2%E5%9B%BE.png?generation=1551665548910935&alt=media" alt="img"></p><p>ç³»ç»Ÿè¿›ç¨‹&#x2F;çº¿ç¨‹è½¬æ¢å›¾</p><p>æ“ä½œç³»ç»Ÿçº¿ç¨‹ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªçŠ¶æ€ï¼š</p><p>- </p><p>  å°±ç»ªçŠ¶æ€(ready)ï¼šçº¿ç¨‹æ­£åœ¨ç­‰å¾…ä½¿ç”¨CPUï¼Œç»è°ƒåº¦ç¨‹åºè°ƒç”¨ä¹‹åå¯è¿›å…¥runningçŠ¶æ€ã€‚</p><p>- </p><p>  æ‰§è¡ŒçŠ¶æ€(running)ï¼šçº¿ç¨‹æ­£åœ¨ä½¿ç”¨CPUã€‚</p><p>- </p><p>  ç­‰å¾…çŠ¶æ€(waiting): çº¿ç¨‹ç»è¿‡ç­‰å¾…äº‹ä»¶çš„è°ƒç”¨æˆ–è€…æ­£åœ¨ç­‰å¾…å…¶ä»–èµ„æºï¼ˆå¦‚I&#x2F;Oï¼‰ã€‚</p><p>- </p><h2 id="4-2-Javaçº¿ç¨‹çš„6ä¸ªçŠ¶æ€"><a href="#4-2-Javaçº¿ç¨‹çš„6ä¸ªçŠ¶æ€" class="headerlink" title="4.2 Javaçº¿ç¨‹çš„6ä¸ªçŠ¶æ€"></a>4.2 Javaçº¿ç¨‹çš„6ä¸ªçŠ¶æ€</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Thread.State æºç </span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">State</span> &#123;<br>    NEW,<br>    RUNNABLE,<br>    BLOCKED,<br>    WAITING,<br>    TIMED_WAITING,<br>    TERMINATED;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-2-1-NEW"><a href="#4-2-1-NEW" class="headerlink" title="4.2.1 NEW"></a>4.2.1 NEW</h3><p>å¤„äºNEWçŠ¶æ€çš„çº¿ç¨‹æ­¤æ—¶å°šæœªå¯åŠ¨ã€‚è¿™é‡Œçš„å°šæœªå¯åŠ¨æŒ‡çš„æ˜¯è¿˜æ²¡è°ƒç”¨Threadå®ä¾‹çš„start()æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testStateNew</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;&#125;);<br>    System.out.println(thread.getState()); <span class="hljs-comment">// è¾“å‡º NEW </span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œåªæ˜¯åˆ›å»ºäº†çº¿ç¨‹è€Œå¹¶æ²¡æœ‰è°ƒç”¨start()æ–¹æ³•ï¼Œæ­¤æ—¶çº¿ç¨‹å¤„äºNEWçŠ¶æ€ã€‚</p><p><strong>å…³äºstart()çš„ä¸¤ä¸ªå¼•ç”³é—®é¢˜</strong></p><ol><li><ol><li></li></ol><p>åå¤è°ƒç”¨åŒä¸€ä¸ªçº¿ç¨‹çš„start()æ–¹æ³•æ˜¯å¦å¯è¡Œï¼Ÿ</p></li><li><ol start="2"><li></li></ol><p>å‡å¦‚ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼ˆæ­¤æ—¶å¤„äºTERMINATEDçŠ¶æ€ï¼‰ï¼Œå†æ¬¡è°ƒç”¨è¿™ä¸ªçº¿ç¨‹çš„start()æ–¹æ³•æ˜¯å¦å¯è¡Œï¼Ÿ</p></li></ol><p>è¦åˆ†æè¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹start()çš„æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">if</span> (threadStatus != <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalThreadStateException</span>();<br><br>    group.add(<span class="hljs-built_in">this</span>);<br>    <br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">started</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        start0();<br>        started = <span class="hljs-literal">true</span>;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">if</span> (!started) &#123;<br>                group.threadStartFailed(<span class="hljs-built_in">this</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Throwable ignore) &#123;<br>    <br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨start()å†…éƒ¨ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªthreadStatusçš„å˜é‡ã€‚å¦‚æœå®ƒä¸ç­‰äº0ï¼Œè°ƒç”¨start()æ˜¯ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸çš„ã€‚</p><p>æˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ï¼Œæœ‰ä¸€ä¸ªnativeçš„<code>start0()</code>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•é‡Œå¹¶æ²¡æœ‰å¯¹<strong>threadStatus</strong>çš„å¤„ç†ã€‚åˆ°äº†è¿™é‡Œæˆ‘ä»¬ä»¿ä½›å°±æ‹¿è¿™ä¸ªthreadStatusæ²¡è¾™äº†ï¼Œæˆ‘ä»¬é€šè¿‡debugçš„æ–¹å¼å†çœ‹ä¸€ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testStartMethod</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;&#125;);<br>    thread.start(); <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨</span><br>    thread.start(); <span class="hljs-comment">// ç¬¬äºŒæ¬¡è°ƒç”¨</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘æ˜¯åœ¨start()æ–¹æ³•å†…éƒ¨çš„æœ€å¼€å§‹æ‰“çš„æ–­ç‚¹ï¼Œå™è¿°ä¸‹åœ¨æˆ‘è¿™é‡Œæ‰“æ–­ç‚¹çœ‹åˆ°çš„ç»“æœï¼š</p><p>- </p><p>  ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶threadStatusçš„å€¼æ˜¯0ã€‚</p><p>- </p><p>  ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶threadStatusçš„å€¼ä¸ä¸º0ã€‚</p><p>æŸ¥çœ‹å½“å‰çº¿ç¨‹çŠ¶æ€çš„æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Thread.getStateæ–¹æ³•æºç ï¼š</span><br><span class="hljs-keyword">public</span> State <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// get current thread state</span><br>    <span class="hljs-keyword">return</span> sun.misc.VM.toThreadState(threadStatus);<br>&#125;<br><br><span class="hljs-comment">// sun.misc.VM æºç ï¼š</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> State <span class="hljs-title function_">toThreadState</span><span class="hljs-params">(<span class="hljs-type">int</span> var0)</span> &#123;<br>    <span class="hljs-keyword">if</span> ((var0 &amp; <span class="hljs-number">4</span>) != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> State.RUNNABLE;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((var0 &amp; <span class="hljs-number">1024</span>) != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> State.BLOCKED;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((var0 &amp; <span class="hljs-number">16</span>) != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> State.WAITING;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((var0 &amp; <span class="hljs-number">32</span>) != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> State.TIMED_WAITING;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((var0 &amp; <span class="hljs-number">2</span>) != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> State.TERMINATED;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> (var0 &amp; <span class="hljs-number">1</span>) == <span class="hljs-number">0</span> ? State.NEW : State.RUNNABLE;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç»“åˆä¸Šé¢çš„æºç å¯ä»¥å¾—åˆ°å¼•ç”³çš„ä¸¤ä¸ªé—®é¢˜çš„ç»“æœï¼š</p><blockquote><p>ä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆéƒ½æ˜¯ä¸å¯è¡Œï¼Œåœ¨è°ƒç”¨ä¸€æ¬¡start()ä¹‹åï¼ŒthreadStatusçš„å€¼ä¼šæ”¹å˜ï¼ˆthreadStatus !&#x3D;0ï¼‰ï¼Œæ­¤æ—¶å†æ¬¡è°ƒç”¨start()æ–¹æ³•ä¼šæŠ›å‡ºIllegalThreadStateExceptionå¼‚å¸¸ã€‚</p><p>æ¯”å¦‚ï¼ŒthreadStatusä¸º2ä»£è¡¨å½“å‰çº¿ç¨‹çŠ¶æ€ä¸ºTERMINATEDã€‚</p></blockquote><h3 id="4-2-2-RUNNABLE"><a href="#4-2-2-RUNNABLE" class="headerlink" title="4.2.2 RUNNABLE"></a>4.2.2 RUNNABLE</h3><p>è¡¨ç¤ºå½“å‰çº¿ç¨‹æ­£åœ¨è¿è¡Œä¸­ã€‚å¤„äºRUNNABLEçŠ¶æ€çš„çº¿ç¨‹åœ¨Javaè™šæ‹Ÿæœºä¸­è¿è¡Œï¼Œä¹Ÿæœ‰å¯èƒ½åœ¨ç­‰å¾…å…¶ä»–ç³»ç»Ÿèµ„æºï¼ˆæ¯”å¦‚I&#x2F;Oï¼‰ã€‚</p><p><strong>Javaä¸­çº¿ç¨‹çš„RUNNABLEçŠ¶æ€</strong></p><p>çœ‹äº†æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„å‡ ä¸ªçŠ¶æ€ä¹‹åæˆ‘ä»¬æ¥çœ‹çœ‹Threadæºç é‡Œå¯¹RUNNABLEçŠ¶æ€çš„å®šä¹‰ï¼š</p><ul><li><pre><code class="java"> /**</code></pre></li><li><p>Thread state for a runnable thread.  A thread in the runnable</p></li><li><p>state is executing in the Java virtual machine but it may</p></li><li><p>be waiting for other resources from the operating system</p></li><li><p>such as processor.<br>*&#x2F;</p> <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs csharp"> <br> <br><br>&gt; Javaçº¿ç¨‹çš„**RUNNABLE**çŠ¶æ€å…¶å®æ˜¯åŒ…æ‹¬äº†ä¼ ç»Ÿæ“ä½œç³»ç»Ÿçº¿ç¨‹çš„**ready**å’Œ**running**ä¸¤ä¸ªçŠ¶æ€çš„ã€‚<br><br><span class="hljs-meta">## 4.2.3 BLOCKED</span><br><br>é˜»å¡çŠ¶æ€ã€‚å¤„äºBLOCKEDçŠ¶æ€çš„çº¿ç¨‹æ­£ç­‰å¾…é”çš„é‡Šæ”¾ä»¥è¿›å…¥åŒæ­¥åŒºã€‚<br><br>æˆ‘ä»¬ç”¨BLOCKEDçŠ¶æ€ä¸¾ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼š<br><br>&gt; å‡å¦‚ä»Šå¤©ä½ ä¸‹ç­åå‡†å¤‡å»é£Ÿå ‚åƒé¥­ã€‚ä½ æ¥åˆ°é£Ÿå ‚ä»…æœ‰çš„ä¸€ä¸ªçª—å£ï¼Œå‘ç°å‰é¢å·²ç»æœ‰ä¸ªäººåœ¨çª—å£å‰äº†ï¼Œæ­¤æ—¶ä½ å¿…é¡»å¾—ç­‰å‰é¢çš„äººä»çª—å£ç¦»å¼€æ‰è¡Œã€‚ å‡è®¾ä½ æ˜¯çº¿ç¨‹t2ï¼Œä½ å‰é¢çš„é‚£ä¸ªäººæ˜¯çº¿ç¨‹t1ã€‚æ­¤æ—¶t1å æœ‰äº†é”ï¼ˆé£Ÿå ‚å”¯ä¸€çš„çª—å£ï¼‰ï¼Œt2æ­£åœ¨ç­‰å¾…é”çš„é‡Šæ”¾ï¼Œæ‰€ä»¥æ­¤æ—¶t2å°±å¤„äºBLOCKEDçŠ¶æ€ã€‚<br><br><span class="hljs-meta">## 4.2.4 WAITING</span><br><br>ç­‰å¾…çŠ¶æ€ã€‚å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹å˜æˆRUNNABLEçŠ¶æ€éœ€è¦å…¶ä»–çº¿ç¨‹å”¤é†’ã€‚<br><br>è°ƒç”¨å¦‚ä¸‹<span class="hljs-number">3</span>ä¸ªæ–¹æ³•ä¼šä½¿çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼š<br><br>- <br><br>  Object.wait()ï¼šä½¿å½“å‰çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹å”¤é†’å®ƒï¼›<br><br>- <br><br>  Thread.<span class="hljs-keyword">join</span>()ï¼šç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œåº•å±‚è°ƒç”¨çš„æ˜¯Objectå®ä¾‹çš„waitæ–¹æ³•ï¼›<br><br>- <br><br>  LockSupport.park()ï¼šé™¤éè·å¾—è°ƒç”¨è®¸å¯ï¼Œå¦åˆ™ç¦ç”¨å½“å‰çº¿ç¨‹è¿›è¡Œçº¿ç¨‹è°ƒåº¦ã€‚  <br><br>æˆ‘ä»¬å»¶ç»­ä¸Šé¢çš„ä¾‹å­ç»§ç»­è§£é‡Šä¸€ä¸‹WAITINGçŠ¶æ€ï¼š<br><br>&gt; ä½ ç­‰äº†å¥½å‡ åˆ†é’Ÿç°åœ¨ç»ˆäºè½®åˆ°ä½ äº†ï¼Œçªç„¶ä½ ä»¬æœ‰ä¸€ä¸ªâ€œä¸æ‡‚äº‹â€çš„ç»ç†çªç„¶æ¥äº†ã€‚ä½ çœ‹åˆ°ä»–ä½ å°±æœ‰ä¸€ç§ä¸ç¥¥çš„é¢„æ„Ÿï¼Œæœç„¶ï¼Œä»–æ˜¯æ¥æ‰¾ä½ çš„ã€‚<br>&gt;<br>&gt; ä»–æŠŠä½ æ‹‰åˆ°ä¸€æ—å«ä½ å¾…ä¼šå„¿å†åƒé¥­ï¼Œè¯´ä»–ä¸‹åˆè¦å»ä½œæŠ¥å‘Šï¼Œèµ¶ç´§æ¥æ‰¾ä½ äº†è§£ä¸€ä¸‹é¡¹ç›®çš„æƒ…å†µã€‚ä½ å¿ƒé‡Œè™½ç„¶æœ‰ä¸€ä¸‡ä¸ªä¸æ„¿æ„ä½†æ˜¯ä½ è¿˜æ˜¯ä»é£Ÿå ‚çª—å£èµ°å¼€äº†ã€‚<br>&gt;<br>&gt; æ­¤æ—¶ï¼Œå‡è®¾ä½ è¿˜æ˜¯çº¿ç¨‹t2ï¼Œä½ çš„ç»ç†æ˜¯çº¿ç¨‹t1ã€‚è™½ç„¶ä½ æ­¤æ—¶éƒ½å æœ‰é”ï¼ˆçª—å£ï¼‰äº†ï¼Œâ€œä¸é€Ÿä¹‹å®¢â€æ¥äº†ä½ è¿˜æ˜¯å¾—é‡Šæ”¾æ‰é”ã€‚æ­¤æ—¶ä½ t2çš„çŠ¶æ€å°±æ˜¯WAITINGã€‚ç„¶åç»ç†t1è·å¾—é”ï¼Œè¿›å…¥RUNNABLEçŠ¶æ€ã€‚<br>&gt;<br>&gt; è¦æ˜¯ç»ç†t1ä¸ä¸»åŠ¨å”¤é†’ä½ t2ï¼ˆnotifyã€notifyAll..ï¼‰ï¼Œå¯ä»¥è¯´ä½ t2åªèƒ½ä¸€ç›´ç­‰å¾…äº†ã€‚<br><br><span class="hljs-meta">## 4.2.5 TIMED_WAITING</span><br><br>è¶…æ—¶ç­‰å¾…çŠ¶æ€ã€‚çº¿ç¨‹ç­‰å¾…ä¸€ä¸ªå…·ä½“çš„æ—¶é—´ï¼Œæ—¶é—´åˆ°åä¼šè¢«è‡ªåŠ¨å”¤é†’ã€‚<br><br>è°ƒç”¨å¦‚ä¸‹æ–¹æ³•ä¼šä½¿çº¿ç¨‹è¿›å…¥è¶…æ—¶ç­‰å¾…çŠ¶æ€ï¼š<br><br>- <br><br>  Thread.sleep(<span class="hljs-built_in">long</span> millis)ï¼šä½¿å½“å‰çº¿ç¨‹ç¡çœ æŒ‡å®šæ—¶é—´ï¼›<br><br>- <br><br>  Object.wait(<span class="hljs-built_in">long</span> timeout)ï¼šçº¿ç¨‹ä¼‘çœ æŒ‡å®šæ—¶é—´ï¼Œç­‰å¾…æœŸé—´å¯ä»¥é€šè¿‡notify()/notifyAll()å”¤é†’ï¼›<br><br>- <br><br>  Thread.<span class="hljs-keyword">join</span>(<span class="hljs-built_in">long</span> millis)ï¼šç­‰å¾…å½“å‰çº¿ç¨‹æœ€å¤šæ‰§è¡Œmillisæ¯«ç§’ï¼Œå¦‚æœmillisä¸º<span class="hljs-number">0</span>ï¼Œåˆ™ä¼šä¸€ç›´æ‰§è¡Œï¼›<br><br>- <br><br>  LockSupport.parkNanos(<span class="hljs-built_in">long</span> nanos)ï¼š é™¤éè·å¾—è°ƒç”¨è®¸å¯ï¼Œå¦åˆ™ç¦ç”¨å½“å‰çº¿ç¨‹è¿›è¡Œçº¿ç¨‹è°ƒåº¦æŒ‡å®šæ—¶é—´ï¼›<br><br>- <br><br>  LockSupport.parkUntil(<span class="hljs-built_in">long</span> deadline)ï¼šåŒä¸Šï¼Œä¹Ÿæ˜¯ç¦æ­¢çº¿ç¨‹è¿›è¡Œè°ƒåº¦æŒ‡å®šæ—¶é—´ï¼›<br><br>æˆ‘ä»¬ç»§ç»­å»¶ç»­ä¸Šé¢çš„ä¾‹å­æ¥è§£é‡Šä¸€ä¸‹TIMED_WAITINGçŠ¶æ€ï¼š<br><br>&gt; åˆ°äº†ç¬¬äºŒå¤©ä¸­åˆï¼Œåˆåˆ°äº†é¥­ç‚¹ï¼Œä½ è¿˜æ˜¯åˆ°äº†çª—å£å‰ã€‚<br>&gt;<br>&gt; çªç„¶é—´æƒ³èµ·ä½ çš„åŒäº‹å«ä½ ç­‰ä»–ä¸€èµ·ï¼Œä»–è¯´è®©ä½ ç­‰ä»–ååˆ†é’Ÿä»–æ”¹ä¸ªbugã€‚<br>&gt;<br>&gt; å¥½å§ï¼Œä½ è¯´é‚£ä½ å°±ç­‰ç­‰å§ï¼Œä½ å°±ç¦»å¼€äº†çª—å£ã€‚å¾ˆå¿«ååˆ†é’Ÿè¿‡å»äº†ï¼Œä½ è§ä»–è¿˜æ²¡æ¥ï¼Œä½ æƒ³éƒ½ç­‰äº†è¿™ä¹ˆä¹…äº†è¿˜ä¸æ¥ï¼Œé‚£ä½ è¿˜æ˜¯å…ˆå»åƒé¥­å¥½äº†ã€‚<br>&gt;<br>&gt; è¿™æ—¶ä½ è¿˜æ˜¯çº¿ç¨‹t1ï¼Œä½ æ”¹bugçš„åŒäº‹æ˜¯çº¿ç¨‹t2ã€‚t2è®©t1ç­‰å¾…äº†æŒ‡å®šæ—¶é—´ï¼Œt1å…ˆä¸»åŠ¨é‡Šæ”¾äº†é”ã€‚æ­¤æ—¶t1ç­‰å¾…æœŸé—´å°±å±äºTIMED_WATINGçŠ¶æ€ã€‚<br>&gt;<br>&gt; t1ç­‰å¾…<span class="hljs-number">10</span>åˆ†é’Ÿåï¼Œå°±è‡ªåŠ¨å”¤é†’ï¼Œæ‹¥æœ‰äº†å»äº‰å¤ºé”çš„èµ„æ ¼ã€‚<br><br><span class="hljs-meta">## 4.2.6 TERMINATED</span><br><br>ç»ˆæ­¢çŠ¶æ€ã€‚æ­¤æ—¶çº¿ç¨‹å·²æ‰§è¡Œå®Œæ¯•ã€‚<br><br><span class="hljs-meta"># 4.3 çº¿ç¨‹çŠ¶æ€çš„è½¬æ¢</span><br><br>æ ¹æ®ä¸Šé¢å…³äºçº¿ç¨‹çŠ¶æ€çš„ä»‹ç»æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹é¢çš„**çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾**ï¼š ![img](https:<span class="hljs-comment">//3803541485-files.gitbook.io/~/files/v0/b/gitbook-28427.appspot.com/o/assets%2F-L_5HvtIhTFW9TQlOF8e%2F-L_5TIKcBFHWPtY3OwUo%2F-L_5TJM7CvFzBq6T_50d%2F%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2%E5%9B%BE.png?generation=1551665550335701&amp;alt=media)</span><br><br><span class="hljs-meta">## 4.3.1 BLOCKEDä¸RUNNABLEçŠ¶æ€çš„è½¬æ¢</span><br><br>æˆ‘ä»¬åœ¨ä¸Šé¢è¯´åˆ°ï¼šå¤„äºBLOCKEDçŠ¶æ€çš„çº¿ç¨‹æ˜¯å› ä¸ºåœ¨ç­‰å¾…é”çš„é‡Šæ”¾ã€‚å‡å¦‚è¿™é‡Œæœ‰ä¸¤ä¸ªçº¿ç¨‹aå’Œbï¼Œaçº¿ç¨‹æå‰è·å¾—äº†é”å¹¶ä¸”æš‚æœªé‡Šæ”¾é”ï¼Œæ­¤æ—¶bå°±å¤„äºBLOCKEDçŠ¶æ€ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š<br><br>```java<br>@Test<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">blockedTest</span>()</span> &#123;<br><br>    Thread a = <span class="hljs-keyword">new</span> Thread(<span class="hljs-keyword">new</span> Runnable() &#123;<br>        @Override<br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span> &#123;<br>            testMethod();<br>        &#125;<br>    &#125;, <span class="hljs-string">&quot;a&quot;</span>);<br>    Thread b = <span class="hljs-keyword">new</span> Thread(<span class="hljs-keyword">new</span> Runnable() &#123;<br>        @Override<br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span> &#123;<br>            testMethod();<br>        &#125;<br>    &#125;, <span class="hljs-string">&quot;b&quot;</span>);<br>    <br>    a.start();<br>    b.start();<br>    System.<span class="hljs-keyword">out</span>.println(a.getName() + <span class="hljs-string">&quot;:&quot;</span> + a.getState()); <span class="hljs-comment">// è¾“å‡ºï¼Ÿ</span><br>    System.<span class="hljs-keyword">out</span>.println(b.getName() + <span class="hljs-string">&quot;:&quot;</span> + b.getState()); <span class="hljs-comment">// è¾“å‡ºï¼Ÿ</span><br><br>&#125;<br><br><span class="hljs-comment">// åŒæ­¥æ–¹æ³•äº‰å¤ºé”</span><br><span class="hljs-function"><span class="hljs-keyword">private</span> synchronized <span class="hljs-keyword">void</span> <span class="hljs-title">testMethod</span>()</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        Thread.sleep(<span class="hljs-number">2000L</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>        e.printStackTrace();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>åˆçœ‹ä¹‹ä¸‹ï¼Œå¤§å®¶å¯èƒ½ä¼šè§‰å¾—çº¿ç¨‹aä¼šå…ˆè°ƒç”¨åŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥æ–¹æ³•å†…åˆè°ƒç”¨äº†Thread.sleep()æ–¹æ³•ï¼Œå¿…ç„¶ä¼šè¾“å‡ºTIMED_WAITINGï¼Œè€Œçº¿ç¨‹bå› ä¸ºç­‰å¾…çº¿ç¨‹aé‡Šæ”¾é”æ‰€ä»¥å¿…ç„¶ä¼šè¾“å‡ºBLOCKEDã€‚</p><p>å…¶å®ä¸ç„¶ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦å€¼å¾—å¤§å®¶æ³¨æ„ï¼Œä¸€æ˜¯<strong>åœ¨æµ‹è¯•æ–¹æ³•blockedTest()å†…è¿˜æœ‰ä¸€ä¸ªmainçº¿ç¨‹</strong>ï¼ŒäºŒæ˜¯<strong>å¯åŠ¨çº¿ç¨‹åæ‰§è¡Œrunæ–¹æ³•è¿˜æ˜¯éœ€è¦æ¶ˆè€—ä¸€å®šæ—¶é—´çš„</strong>ã€‚ä¸æ‰“æ–­ç‚¹çš„æƒ…å†µä¸‹ï¼Œä¸Šé¢ä»£ç ä¸­éƒ½åº”è¯¥è¾“å‡º<strong>RUNNABLE</strong>ã€‚</p><blockquote><p>æµ‹è¯•æ–¹æ³•çš„mainçº¿ç¨‹åªä¿è¯äº†aï¼Œbä¸¤ä¸ªçº¿ç¨‹è°ƒç”¨start()æ–¹æ³•ï¼ˆè½¬åŒ–ä¸ºRUNNABLEçŠ¶æ€ï¼‰ï¼Œè¿˜æ²¡ç­‰ä¸¤ä¸ªçº¿ç¨‹çœŸæ­£å¼€å§‹äº‰å¤ºé”ï¼Œå°±å·²ç»æ‰“å°æ­¤æ—¶ä¸¤ä¸ªçº¿ç¨‹çš„çŠ¶æ€ï¼ˆRUNNABLEï¼‰äº†ã€‚</p></blockquote><p>è¿™æ—¶ä½ å¯èƒ½åˆä¼šé—®äº†ï¼Œè¦æ˜¯æˆ‘æƒ³è¦æ‰“å°å‡ºBLOCKEDçŠ¶æ€æˆ‘è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿå…¶å®å°±å¤„ç†ä¸‹æµ‹è¯•æ–¹æ³•é‡Œçš„mainçº¿ç¨‹å°±å¯ä»¥äº†ï¼Œä½ è®©å®ƒâ€œä¼‘æ¯ä¸€ä¼šå„¿â€ï¼Œæ‰“æ–­ç‚¹æˆ–è€…è°ƒç”¨Thread.sleepæ–¹æ³•å°±è¡Œã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯mainçº¿ç¨‹ä¼‘æ¯çš„æ—¶é—´ï¼Œè¦ä¿è¯åœ¨çº¿ç¨‹äº‰å¤ºé”çš„æ—¶é—´å†…ï¼Œä¸è¦ç­‰åˆ°å‰ä¸€ä¸ªçº¿ç¨‹é”éƒ½é‡Šæ”¾äº†ä½ å†å»äº‰å¤ºé”ï¼Œæ­¤æ—¶è¿˜æ˜¯å¾—ä¸åˆ°BLOCKEDçŠ¶æ€çš„ã€‚</p><p>æˆ‘ä»¬æŠŠä¸Šé¢çš„æµ‹è¯•æ–¹æ³•blockedTest()æ”¹åŠ¨ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">`<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">blockedTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;`<br>    `Â·Â·Â·Â·Â·Â·`<br>    `a.start();`<br>    `Thread.sleep(<span class="hljs-number">1000L</span>); <span class="hljs-comment">// éœ€è¦æ³¨æ„è¿™é‡Œmainçº¿ç¨‹ä¼‘çœ äº†1000æ¯«ç§’ï¼Œè€ŒtestMethod()é‡Œä¼‘çœ äº†2000æ¯«ç§’`</span><br>    `b.start();`<br>    `System.out.println(a.getName() + <span class="hljs-string">&quot;:&quot;</span> + a.getState()); <span class="hljs-comment">// è¾“å‡ºï¼Ÿ`</span><br>    `System.out.println(b.getName() + <span class="hljs-string">&quot;:&quot;</span> + b.getState()); <span class="hljs-comment">// è¾“å‡ºï¼Ÿ`</span><br>`&#125;`<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºmainçº¿ç¨‹ä¼‘çœ ï¼Œæ‰€ä»¥çº¿ç¨‹açš„run()æ–¹æ³•è·Ÿç€æ‰§è¡Œï¼Œçº¿ç¨‹bå†æ¥ç€æ‰§è¡Œã€‚</p><p>åœ¨çº¿ç¨‹aæ‰§è¡Œrun()è°ƒç”¨testMethod()ä¹‹åï¼Œçº¿ç¨‹aä¼‘çœ äº†2000msï¼ˆæ³¨æ„è¿™é‡Œæ˜¯æ²¡æœ‰é‡Šæ”¾é”çš„ï¼‰ï¼Œmainçº¿ç¨‹ä¼‘çœ å®Œæ¯•ï¼Œæ¥ç€bçº¿ç¨‹æ‰§è¡Œçš„æ—¶å€™æ˜¯äº‰å¤ºä¸åˆ°é”çš„ï¼Œæ‰€ä»¥è¿™é‡Œè¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">a:TIMED_WAITING<br><br>b:BLOCKED<br></code></pre></td></tr></table></figure><h3 id="4-3-2-WAITINGçŠ¶æ€ä¸RUNNABLEçŠ¶æ€çš„è½¬æ¢"><a href="#4-3-2-WAITINGçŠ¶æ€ä¸RUNNABLEçŠ¶æ€çš„è½¬æ¢" class="headerlink" title="4.3.2 WAITINGçŠ¶æ€ä¸RUNNABLEçŠ¶æ€çš„è½¬æ¢"></a>4.3.2 WAITINGçŠ¶æ€ä¸RUNNABLEçŠ¶æ€çš„è½¬æ¢</h3><p>æ ¹æ®è½¬æ¢å›¾æˆ‘ä»¬çŸ¥é“æœ‰3ä¸ªæ–¹æ³•å¯ä»¥ä½¿çº¿ç¨‹ä»RUNNABLEçŠ¶æ€è½¬ä¸ºWAITINGçŠ¶æ€ã€‚æˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸‹**Object.wait()<strong>å’Œ</strong>Thread.join()**ã€‚ <strong>Object.wait()</strong></p><blockquote><p>è°ƒç”¨wait()æ–¹æ³•å‰çº¿ç¨‹å¿…é¡»æŒæœ‰å¯¹è±¡çš„é”ã€‚</p><p>çº¿ç¨‹è°ƒç”¨wait()æ–¹æ³•æ—¶ï¼Œä¼šé‡Šæ”¾å½“å‰çš„é”ï¼Œç›´åˆ°æœ‰å…¶ä»–çº¿ç¨‹è°ƒç”¨notify()&#x2F;notifyAll()æ–¹æ³•å”¤é†’ç­‰å¾…é”çš„çº¿ç¨‹ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨notify()æ–¹æ³•åªä¼šå”¤é†’å•ä¸ªç­‰å¾…é”çš„çº¿ç¨‹ï¼Œå¦‚æœ‰æœ‰å¤šä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…è¿™ä¸ªé”çš„è¯ä¸ä¸€å®šä¼šå”¤é†’åˆ°ä¹‹å‰è°ƒç”¨wait()æ–¹æ³•çš„çº¿ç¨‹ã€‚</p><p>åŒæ ·ï¼Œè°ƒç”¨notifyAll()æ–¹æ³•å”¤é†’æ‰€æœ‰ç­‰å¾…é”çš„çº¿ç¨‹ä¹‹åï¼Œä¹Ÿä¸ä¸€å®šä¼šé©¬ä¸ŠæŠŠæ—¶é—´ç‰‡åˆ†ç»™åˆšæ‰æ”¾å¼ƒé”çš„é‚£ä¸ªçº¿ç¨‹ï¼Œå…·ä½“è¦çœ‹ç³»ç»Ÿçš„è°ƒåº¦ã€‚</p></blockquote><p><strong>Thread.join()</strong></p><blockquote><p>è°ƒç”¨join()æ–¹æ³•ä¸ä¼šé‡Šæ”¾é”ï¼Œä¼šä¸€ç›´ç­‰å¾…å½“å‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼ˆè½¬æ¢ä¸ºTERMINATEDçŠ¶æ€ï¼‰ã€‚</p></blockquote><p>æˆ‘ä»¬å†æŠŠä¸Šé¢çš„ä¾‹å­çº¿ç¨‹å¯åŠ¨é‚£é‡Œæ”¹å˜ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">blockedTest</span><span class="hljs-params">()</span> &#123;<br>    Â·Â·Â·Â·Â·Â·<br>    a.start();<br>    a.join();<br>    b.start();<br>    System.out.println(a.getName() + <span class="hljs-string">&quot;:&quot;</span> + a.getState()); <span class="hljs-comment">// è¾“å‡º TERMINATED</span><br>    System.out.println(b.getName() + <span class="hljs-string">&quot;:&quot;</span> + b.getState());<br>&#125;<br></code></pre></td></tr></table></figure><p>è¦æ˜¯æ²¡æœ‰è°ƒç”¨joinæ–¹æ³•ï¼Œmainçº¿ç¨‹ä¸ç®¡açº¿ç¨‹æ˜¯å¦æ‰§è¡Œå®Œæ¯•éƒ½ä¼šç»§ç»­å¾€ä¸‹èµ°ã€‚</p><p>açº¿ç¨‹å¯åŠ¨ä¹‹åé©¬ä¸Šè°ƒç”¨äº†joinæ–¹æ³•ï¼Œè¿™é‡Œmainçº¿ç¨‹å°±ä¼šç­‰åˆ°açº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥è¿™é‡Œaçº¿ç¨‹æ‰“å°çš„çŠ¶æ€å›ºå®šæ˜¯<strong>TERMIATED</strong>ã€‚</p><p>è‡³äºbçº¿ç¨‹çš„çŠ¶æ€ï¼Œæœ‰å¯èƒ½æ‰“å°RUNNABLEï¼ˆå°šæœªè¿›å…¥åŒæ­¥æ–¹æ³•ï¼‰ï¼Œä¹Ÿæœ‰å¯èƒ½æ‰“å°TIMED_WAITINGï¼ˆè¿›å…¥äº†åŒæ­¥æ–¹æ³•ï¼‰ã€‚</p><h3 id="4-3-3-TIMED-WAITINGä¸RUNNABLEçŠ¶æ€è½¬æ¢"><a href="#4-3-3-TIMED-WAITINGä¸RUNNABLEçŠ¶æ€è½¬æ¢" class="headerlink" title="4.3.3 TIMED_WAITINGä¸RUNNABLEçŠ¶æ€è½¬æ¢"></a>4.3.3 TIMED_WAITINGä¸RUNNABLEçŠ¶æ€è½¬æ¢</h3><p>TIMED_WAITINGä¸WAITINGçŠ¶æ€ç±»ä¼¼ï¼Œåªæ˜¯TIMED_WAITINGçŠ¶æ€ç­‰å¾…çš„æ—¶é—´æ˜¯æŒ‡å®šçš„ã€‚</p><p><strong>Thread.sleep(long)</strong></p><blockquote><p>ä½¿å½“å‰çº¿ç¨‹ç¡çœ æŒ‡å®šæ—¶é—´ã€‚éœ€è¦æ³¨æ„è¿™é‡Œçš„â€œç¡çœ â€åªæ˜¯æš‚æ—¶ä½¿çº¿ç¨‹åœæ­¢æ‰§è¡Œï¼Œå¹¶ä¸ä¼šé‡Šæ”¾é”ã€‚æ—¶é—´åˆ°åï¼Œçº¿ç¨‹ä¼šé‡æ–°è¿›å…¥RUNNABLEçŠ¶æ€ã€‚</p></blockquote><p><strong>Object.wait(long)</strong></p><blockquote><p>wait(long)æ–¹æ³•ä½¿çº¿ç¨‹è¿›å…¥TIMED_WAITINGçŠ¶æ€ã€‚è¿™é‡Œçš„wait(long)æ–¹æ³•ä¸æ— å‚æ–¹æ³•wait()ç›¸åŒçš„åœ°æ–¹æ˜¯ï¼Œéƒ½å¯ä»¥é€šè¿‡å…¶ä»–çº¿ç¨‹è°ƒç”¨notify()æˆ–notifyAll()æ–¹æ³•æ¥å”¤é†’ã€‚</p><p>ä¸åŒçš„åœ°æ–¹æ˜¯ï¼Œæœ‰å‚æ–¹æ³•wait(long)å°±ç®—å…¶ä»–çº¿ç¨‹ä¸æ¥å”¤é†’å®ƒï¼Œç»è¿‡æŒ‡å®šæ—¶é—´longä¹‹åå®ƒä¼šè‡ªåŠ¨å”¤é†’ï¼Œæ‹¥æœ‰å»äº‰å¤ºé”çš„èµ„æ ¼ã€‚</p></blockquote><p><strong>Thread.join(long)</strong></p><blockquote><p>join(long)ä½¿å½“å‰çº¿ç¨‹æ‰§è¡ŒæŒ‡å®šæ—¶é—´ï¼Œå¹¶ä¸”ä½¿çº¿ç¨‹è¿›å…¥TIMED_WAITINGçŠ¶æ€ã€‚</p><p>æˆ‘ä»¬å†æ¥æ”¹ä¸€æ”¹åˆšæ‰çš„ç¤ºä¾‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">blockedTest</span><span class="hljs-params">()</span> &#123;<br>    Â·Â·Â·Â·Â·Â·<br>    a.start();<br>    a.join(<span class="hljs-number">1000L</span>);<br>    b.start();<br>    System.out.println(a.getName() + <span class="hljs-string">&quot;:&quot;</span> + a.getState()); <span class="hljs-comment">// è¾“å‡º TIEMD_WAITING</span><br>    System.out.println(b.getName() + <span class="hljs-string">&quot;:&quot;</span> + b.getState());<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œè°ƒç”¨a.join(1000L)ï¼Œå› ä¸ºæ˜¯æŒ‡å®šäº†å…·ä½“açº¿ç¨‹æ‰§è¡Œçš„æ—¶é—´çš„ï¼Œå¹¶ä¸”æ‰§è¡Œæ—¶é—´æ˜¯å°äºaçº¿ç¨‹sleepçš„æ—¶é—´ï¼Œæ‰€ä»¥açº¿ç¨‹çŠ¶æ€è¾“å‡ºTIMED_WAITINGã€‚</p></blockquote><p>bçº¿ç¨‹çŠ¶æ€ä»ç„¶ä¸å›ºå®šï¼ˆRUNNABLEæˆ–BLOCKEDï¼‰ã€‚</p><h3 id="4-3-4-çº¿ç¨‹ä¸­æ–­"><a href="#4-3-4-çº¿ç¨‹ä¸­æ–­" class="headerlink" title="4.3.4 çº¿ç¨‹ä¸­æ–­"></a>4.3.4 çº¿ç¨‹ä¸­æ–­</h3><blockquote><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨çº¿ç¨‹å¯åŠ¨åå‘ç°å¹¶ä¸éœ€è¦å®ƒç»§ç»­æ‰§è¡Œä¸‹å»æ—¶ï¼Œéœ€è¦ä¸­æ–­çº¿ç¨‹ã€‚ç›®å‰åœ¨Javaé‡Œè¿˜æ²¡æœ‰å®‰å…¨ç›´æ¥çš„æ–¹æ³•æ¥åœæ­¢çº¿ç¨‹ï¼Œä½†æ˜¯Javaæä¾›äº†çº¿ç¨‹ä¸­æ–­æœºåˆ¶æ¥å¤„ç†éœ€è¦ä¸­æ–­çº¿ç¨‹çš„æƒ…å†µã€‚</p><p>çº¿ç¨‹ä¸­æ–­æœºåˆ¶æ˜¯ä¸€ç§åä½œæœºåˆ¶ã€‚éœ€è¦æ³¨æ„ï¼Œé€šè¿‡ä¸­æ–­æ“ä½œå¹¶ä¸èƒ½ç›´æ¥ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œæ˜¯é€šçŸ¥éœ€è¦è¢«ä¸­æ–­çš„çº¿ç¨‹è‡ªè¡Œå¤„ç†ã€‚</p></blockquote><p>ç®€å•ä»‹ç»ä¸‹Threadç±»é‡Œæä¾›çš„å…³äºçº¿ç¨‹ä¸­æ–­çš„å‡ ä¸ªæ–¹æ³•ï¼š</p><p>- </p><p>  Thread.interrupt()ï¼šä¸­æ–­çº¿ç¨‹ã€‚è¿™é‡Œçš„ä¸­æ–­çº¿ç¨‹å¹¶ä¸ä¼šç«‹å³åœæ­¢çº¿ç¨‹ï¼Œè€Œæ˜¯è®¾ç½®çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¸ºtrueï¼ˆé»˜è®¤æ˜¯flaseï¼‰ï¼›</p><p>- </p><p>  Thread.interrupted()ï¼šæµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ã€‚çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€å—è¿™ä¸ªæ–¹æ³•çš„å½±å“ï¼Œæ„æ€æ˜¯è°ƒç”¨ä¸€æ¬¡ä½¿çº¿ç¨‹ä¸­æ–­çŠ¶æ€è®¾ç½®ä¸ºtrueï¼Œè¿ç»­è°ƒç”¨ä¸¤æ¬¡ä¼šä½¿å¾—è¿™ä¸ªçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€é‡æ–°è½¬ä¸ºfalseï¼›</p><p>- </p><p>  Thread.isInterrupted()ï¼šæµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ã€‚ä¸ä¸Šé¢æ–¹æ³•ä¸åŒçš„æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•å¹¶ä¸ä¼šå½±å“çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚</p><blockquote><p>åœ¨çº¿ç¨‹ä¸­æ–­æœºåˆ¶é‡Œï¼Œå½“å…¶ä»–çº¿ç¨‹é€šçŸ¥éœ€è¦è¢«ä¸­æ–­çš„çº¿ç¨‹åï¼Œçº¿ç¨‹ä¸­æ–­çš„çŠ¶æ€è¢«è®¾ç½®ä¸ºtrueï¼Œä½†æ˜¯å…·ä½“è¢«è¦æ±‚ä¸­æ–­çš„çº¿ç¨‹è¦æ€ä¹ˆå¤„ç†ï¼Œå®Œå…¨ç”±è¢«ä¸­æ–­çº¿ç¨‹è‡ªå·±è€Œå®šï¼Œå¯ä»¥åœ¨åˆé€‚çš„å®é™…å¤„ç†ä¸­æ–­è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥å®Œå…¨ä¸å¤„ç†ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚</p></blockquote><p><strong>å‚è€ƒèµ„æ–™</strong></p><p>- </p><p>  JDK 1.8 æºç </p><p>- </p><p>  <a href="https://blog.csdn.net/pangpang123654/article/details/77006244">æ·±å…¥Thread.sleep</a></p><p>- </p><p>  <a href="https://tech.meituan.com/Java_Lock.html">ä¸å¯ä¸è¯´çš„Javaâ€œé”â€äº‹</a></p><p>- </p><p>  <a href="https://fangjian0423.github.io/2016/06/04/java-thread-state/">Javaçº¿ç¨‹çŠ¶æ€åˆ†æ</a></p><p>- </p><p>  <a href="https://blog.csdn.net/CringKong/article/details/79994511">Javaçº¿ç¨‹å’Œæ“ä½œç³»ç»Ÿçº¿ç¨‹çš„å…³ç³»</a></p><p>- </p><p>  <a href="https://www.infoq.cn/article/java-interrupt-mechanism">è¯¦ç»†åˆ†æ Java ä¸­æ–­æœºåˆ¶</a></p><h1 id="5-Javaçº¿ç¨‹é—´çš„é€šä¿¡"><a href="#5-Javaçº¿ç¨‹é—´çš„é€šä¿¡" class="headerlink" title="5 Javaçº¿ç¨‹é—´çš„é€šä¿¡"></a>5 Javaçº¿ç¨‹é—´çš„é€šä¿¡</h1><p>åˆç†çš„ä½¿ç”¨Javaå¤šçº¿ç¨‹å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨æœåŠ¡å™¨èµ„æºã€‚ä¸€èˆ¬æ¥è®²ï¼Œçº¿ç¨‹å†…éƒ¨æœ‰è‡ªå·±ç§æœ‰çš„çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼Œäº’ä¸å¹²æ‰°ã€‚ä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦å¤šä¸ªçº¿ç¨‹ä¹‹é—´ç›¸äº’åä½œçš„æ—¶å€™ï¼Œå°±éœ€è¦æˆ‘ä»¬æŒæ¡Javaçº¿ç¨‹çš„é€šä¿¡æ–¹å¼ã€‚æœ¬æ–‡å°†ä»‹ç»Javaçº¿ç¨‹ä¹‹é—´çš„å‡ ç§é€šä¿¡åŸç†ã€‚</p><h2 id="5-1-é”ä¸åŒæ­¥"><a href="#5-1-é”ä¸åŒæ­¥" class="headerlink" title="5.1 é”ä¸åŒæ­¥"></a>5.1 é”ä¸åŒæ­¥</h2><p>åœ¨Javaä¸­ï¼Œé”çš„æ¦‚å¿µéƒ½æ˜¯åŸºäºå¯¹è±¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆç»å¸¸ç§°å®ƒä¸ºå¯¹è±¡é”ã€‚çº¿ç¨‹å’Œé”çš„å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å©šå§»å…³ç³»æ¥ç†è§£ã€‚ä¸€ä¸ªé”åŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªé”å¦‚æœå’Œä¸€ä¸ªçº¿ç¨‹â€œç»“å©šâ€ï¼ˆæŒæœ‰ï¼‰ï¼Œé‚£å…¶ä»–çº¿ç¨‹å¦‚æœéœ€è¦å¾—åˆ°è¿™ä¸ªé”ï¼Œå°±å¾—ç­‰è¿™ä¸ªçº¿ç¨‹å’Œè¿™ä¸ªé”â€œç¦»å©šâ€ï¼ˆé‡Šæ”¾ï¼‰ã€‚</p><p>åœ¨æˆ‘ä»¬çš„çº¿ç¨‹ä¹‹é—´ï¼Œæœ‰ä¸€ä¸ªåŒæ­¥çš„æ¦‚å¿µã€‚ä»€ä¹ˆæ˜¯åŒæ­¥å‘¢ï¼Œå‡å¦‚æˆ‘ä»¬ç°åœ¨æœ‰2ä½æ­£åœ¨æŠ„æš‘å‡ä½œä¸šç­”æ¡ˆçš„åŒå­¦ï¼šçº¿ç¨‹Aå’Œçº¿ç¨‹Bã€‚å½“ä»–ä»¬æ­£åœ¨æŠ„çš„æ—¶å€™ï¼Œè€å¸ˆçªç„¶æ¥ä¿®æ”¹äº†ä¸€äº›ç­”æ¡ˆï¼Œå¯èƒ½Aå’ŒBæœ€åå†™å‡ºçš„æš‘å‡ä½œä¸šå°±ä¸ä¸€æ ·ã€‚æˆ‘ä»¬ä¸ºäº†A,Bèƒ½å†™å‡º2æœ¬ç›¸åŒçš„æš‘å‡ä½œä¸šï¼Œæˆ‘ä»¬å°±éœ€è¦è®©è€å¸ˆå…ˆä¿®æ”¹ç­”æ¡ˆï¼Œç„¶åAï¼ŒBåŒå­¦å†æŠ„ã€‚æˆ–è€…Aï¼ŒBåŒå­¦å…ˆæŠ„å®Œï¼Œè€å¸ˆå†ä¿®æ”¹ç­”æ¡ˆã€‚è¿™å°±æ˜¯çº¿ç¨‹Aï¼Œçº¿ç¨‹Bçš„çº¿ç¨‹åŒæ­¥ã€‚</p><p>å¯ä»¥ä»¥è§£é‡Šä¸ºï¼šçº¿ç¨‹åŒæ­¥æ˜¯çº¿ç¨‹ä¹‹é—´æŒ‰ç…§<strong>ä¸€å®šçš„é¡ºåº</strong>æ‰§è¡Œã€‚</p><p>ä¸ºäº†è¾¾åˆ°çº¿ç¨‹åŒæ­¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é”æ¥å®ç°å®ƒã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€ä¸ªæ— é”çš„ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoneLock</span> &#123;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>                System.out.println(<span class="hljs-string">&quot;Thread A &quot;</span> + i);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>                System.out.println(<span class="hljs-string">&quot;Thread B &quot;</span> + i);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadA</span>()).start();<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadB</span>()).start();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼Œä½ ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bå„è‡ªç‹¬ç«‹å·¥ä½œï¼Œè¾“å‡ºè‡ªå·±çš„æ‰“å°å€¼ã€‚å¦‚ä¸‹æ˜¯æˆ‘çš„ç”µè„‘ä¸ŠæŸä¸€æ¬¡è¿è¡Œçš„ç»“æœã€‚æ¯ä¸€æ¬¡è¿è¡Œç»“æœéƒ½ä¼šä¸ä¸€æ ·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">....<br>Thread A <span class="hljs-number">48</span><br>Thread A <span class="hljs-number">49</span><br>Thread B <span class="hljs-number">0</span><br>Thread A <span class="hljs-number">50</span><br>Thread B <span class="hljs-number">1</span><br>Thread A <span class="hljs-number">51</span><br>Thread A <span class="hljs-number">52</span><br>....<br></code></pre></td></tr></table></figure><p>é‚£æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘æƒ³ç­‰Aå…ˆæ‰§è¡Œå®Œä¹‹åï¼Œå†ç”±Bå»æ‰§è¡Œï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªâ€œå¯¹è±¡é”â€ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectLock</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">synchronized</span> (lock) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>                    System.out.println(<span class="hljs-string">&quot;Thread A &quot;</span> + i);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">synchronized</span> (lock) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>                    System.out.println(<span class="hljs-string">&quot;Thread B &quot;</span> + i);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadA</span>()).start();<br>        Thread.sleep(<span class="hljs-number">10</span>);<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadB</span>()).start();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªåå­—ä¸º<code>lock</code>çš„å¯¹è±¡é”ã€‚æˆ‘ä»¬åœ¨<code>ThreadA</code>å’Œ<code>ThreadB</code>å†…éœ€è¦åŒæ­¥çš„ä»£ç å—é‡Œï¼Œéƒ½æ˜¯ç”¨<code>synchronized</code>å…³é”®å­—åŠ ä¸Šäº†åŒä¸€ä¸ªå¯¹è±¡é”<code>lock</code>ã€‚</p><p>ä¸Šæ–‡æˆ‘ä»¬è¯´åˆ°äº†ï¼Œæ ¹æ®çº¿ç¨‹å’Œé”çš„å…³ç³»ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ä¸€ä¸ªé”ï¼Œé‚£ä¹ˆçº¿ç¨‹Bå°±ä¼šç­‰çº¿ç¨‹Aæ‰§è¡Œå®Œæˆåé‡Šæ”¾<code>lock</code>ï¼Œçº¿ç¨‹Bæ‰èƒ½è·å¾—é”<code>lock</code>ã€‚</p><blockquote><p>è¿™é‡Œåœ¨ä¸»çº¿ç¨‹é‡Œä½¿ç”¨sleepæ–¹æ³•ç¡çœ äº†10æ¯«ç§’ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹Bå…ˆå¾—åˆ°é”ã€‚å› ä¸ºå¦‚æœåŒæ—¶startï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½æ˜¯å‡ºäºå°±ç»ªçŠ¶æ€ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šå…ˆè®©Bè¿è¡Œã€‚è¿™æ ·å°±ä¼šå…ˆè¾“å‡ºBçš„å†…å®¹ï¼Œç„¶åBæ‰§è¡Œå®Œæˆä¹‹åè‡ªåŠ¨é‡Šæ”¾é”ï¼Œçº¿ç¨‹Aå†æ‰§è¡Œã€‚</p></blockquote><h2 id="5-2-ç­‰å¾…-x2F-é€šçŸ¥æœºåˆ¶"><a href="#5-2-ç­‰å¾…-x2F-é€šçŸ¥æœºåˆ¶" class="headerlink" title="5.2 ç­‰å¾…&#x2F;é€šçŸ¥æœºåˆ¶"></a>5.2 ç­‰å¾…&#x2F;é€šçŸ¥æœºåˆ¶</h2><p>ä¸Šé¢ä¸€ç§åŸºäºâ€œé”â€çš„æ–¹å¼ï¼Œçº¿ç¨‹éœ€è¦ä¸æ–­åœ°å»å°è¯•è·å¾—é”ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œå†ç»§ç»­å°è¯•ã€‚è¿™å¯èƒ½ä¼šè€—è´¹æœåŠ¡å™¨èµ„æºã€‚</p><p>è€Œç­‰å¾…&#x2F;é€šçŸ¥æœºåˆ¶æ˜¯å¦ä¸€ç§æ–¹å¼ã€‚</p><p>Javaå¤šçº¿ç¨‹çš„ç­‰å¾…&#x2F;é€šçŸ¥æœºåˆ¶æ˜¯åŸºäº<code>Object</code>ç±»çš„<code>wait()</code>æ–¹æ³•å’Œ<code>notify()</code>, <code>notifyAll()</code>æ–¹æ³•æ¥å®ç°çš„ã€‚</p><blockquote><p>notify()æ–¹æ³•ä¼šéšæœºå«é†’ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹ï¼Œè€ŒnotifyAll()ä¼šå«é†’æ‰€æœ‰æ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹ã€‚</p></blockquote><p>å‰é¢æˆ‘ä»¬è®²åˆ°ï¼Œä¸€ä¸ªé”åŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ã€‚è€Œå‡å¦‚çº¿ç¨‹Aç°åœ¨æŒæœ‰äº†ä¸€ä¸ªé”<code>lock</code>å¹¶å¼€å§‹æ‰§è¡Œï¼Œå®ƒå¯ä»¥ä½¿ç”¨<code>lock.wait()</code>è®©è‡ªå·±è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚è¿™ä¸ªæ—¶å€™ï¼Œ<code>lock</code>è¿™ä¸ªé”æ˜¯è¢«é‡Šæ”¾äº†çš„ã€‚</p><p>è¿™æ—¶ï¼Œçº¿ç¨‹Bè·å¾—äº†<code>lock</code>è¿™ä¸ªé”å¹¶å¼€å§‹æ‰§è¡Œï¼Œå®ƒå¯ä»¥åœ¨æŸä¸€æ—¶åˆ»ï¼Œä½¿ç”¨<code>lock.notify()</code>ï¼Œé€šçŸ¥ä¹‹å‰æŒæœ‰<code>lock</code>é”å¹¶è¿›å…¥ç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹Aï¼Œè¯´â€œçº¿ç¨‹Aä½ ä¸ç”¨ç­‰äº†ï¼Œå¯ä»¥å¾€ä¸‹æ‰§è¡Œäº†â€ã€‚</p><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹Bå¹¶æ²¡æœ‰é‡Šæ”¾é”<code>lock</code>ï¼Œé™¤éçº¿ç¨‹Bè¿™ä¸ªæ—¶å€™ä½¿ç”¨<code>lock.wait()</code>é‡Šæ”¾é”ï¼Œæˆ–è€…çº¿ç¨‹Bæ‰§è¡Œç»“æŸè‡ªè¡Œé‡Šæ”¾é”ï¼Œçº¿ç¨‹Aæ‰èƒ½å¾—åˆ°<code>lock</code>é”ã€‚</p></blockquote><p>æˆ‘ä»¬ç”¨ä»£ç æ¥å®ç°ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WaitAndNotify</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">synchronized</span> (lock) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>                    <span class="hljs-keyword">try</span> &#123;<br>                        System.out.println(<span class="hljs-string">&quot;ThreadA: &quot;</span> + i);<br>                        lock.notify();<br>                        lock.wait();<br>                    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                &#125;<br>                lock.notify();<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">synchronized</span> (lock) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>                    <span class="hljs-keyword">try</span> &#123;<br>                        System.out.println(<span class="hljs-string">&quot;ThreadB: &quot;</span> + i);<br>                        lock.notify();<br>                        lock.wait();<br>                    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                &#125;<br>                lock.notify();<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadA</span>()).start();<br>        Thread.sleep(<span class="hljs-number">1000</span>);<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadB</span>()).start();<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">// è¾“å‡ºï¼š</span><br>ThreadA: <span class="hljs-number">0</span><br>ThreadB: <span class="hljs-number">0</span><br>ThreadA: <span class="hljs-number">1</span><br>ThreadB: <span class="hljs-number">1</span><br>ThreadA: <span class="hljs-number">2</span><br>ThreadB: <span class="hljs-number">2</span><br>ThreadA: <span class="hljs-number">3</span><br>ThreadB: <span class="hljs-number">3</span><br>ThreadA: <span class="hljs-number">4</span><br>ThreadB: <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªDemoé‡Œï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bé¦–å…ˆæ‰“å°å‡ºè‡ªå·±éœ€è¦çš„ä¸œè¥¿ï¼Œç„¶åä½¿ç”¨<code>notify()</code>æ–¹æ³•å«é†’å¦ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹ï¼Œç„¶åè‡ªå·±ä½¿ç”¨<code>wait()</code>æ–¹æ³•é™·å…¥ç­‰å¾…å¹¶é‡Šæ”¾<code>lock</code>é”ã€‚</p><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ç­‰å¾…&#x2F;é€šçŸ¥æœºåˆ¶ä½¿ç”¨çš„æ˜¯ä½¿ç”¨åŒä¸€ä¸ªå¯¹è±¡é”ï¼Œå¦‚æœä½ ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨çš„æ˜¯ä¸åŒçš„å¯¹è±¡é”ï¼Œé‚£å®ƒä»¬ä¹‹é—´æ˜¯ä¸èƒ½ç”¨ç­‰å¾…&#x2F;é€šçŸ¥æœºåˆ¶é€šä¿¡çš„ã€‚</p></blockquote><h2 id="5-3-ä¿¡å·é‡"><a href="#5-3-ä¿¡å·é‡" class="headerlink" title="5.3 ä¿¡å·é‡"></a>5.3 ä¿¡å·é‡</h2><p>JDKæä¾›äº†ä¸€ä¸ªç±»ä¼¼äºâ€œä¿¡å·é‡â€åŠŸèƒ½çš„ç±»<code>Semaphore</code>ã€‚ä½†æœ¬æ–‡ä¸æ˜¯è¦ä»‹ç»è¿™ä¸ªç±»ï¼Œè€Œæ˜¯ä»‹ç»ä¸€ç§åŸºäº<code>volatile</code>å…³é”®å­—çš„è‡ªå·±å®ç°çš„ä¿¡å·é‡é€šä¿¡ã€‚</p><p>åé¢ä¼šæœ‰ä¸“é—¨çš„ç« èŠ‚ä»‹ç»<code>volatile</code>å…³é”®å­—ï¼Œè¿™é‡Œåªæ˜¯åšä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚</p><blockquote><p>volitileå…³é”®å­—èƒ½å¤Ÿä¿è¯å†…å­˜çš„å¯è§æ€§ï¼Œå¦‚æœç”¨volitileå…³é”®å­—å£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹é‡Œé¢æ”¹å˜äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œé‚£å…¶å®ƒçº¿ç¨‹æ˜¯ç«‹é©¬å¯è§æ›´æ”¹åçš„å€¼çš„ã€‚</p></blockquote><p>æ¯”å¦‚æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘æƒ³è®©çº¿ç¨‹Aè¾“å‡º0ï¼Œç„¶åçº¿ç¨‹Bè¾“å‡º1ï¼Œå†ç„¶åçº¿ç¨‹Aè¾“å‡º2â€¦ä»¥æ­¤ç±»æ¨ã€‚æˆ‘åº”è¯¥æ€æ ·å®ç°å‘¢ï¼Ÿ</p><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Signal</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> <span class="hljs-variable">signal</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">while</span> (signal &lt; <span class="hljs-number">5</span>) &#123;<br>                <span class="hljs-keyword">if</span> (signal % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) &#123;<br>                    System.out.println(<span class="hljs-string">&quot;threadA: &quot;</span> + signal);<br>                    <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) &#123;<br>                        signal++;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">while</span> (signal &lt; <span class="hljs-number">5</span>) &#123;<br>                <span class="hljs-keyword">if</span> (signal % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>) &#123;<br>                    System.out.println(<span class="hljs-string">&quot;threadB: &quot;</span> + signal);<br>                    <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) &#123;<br>                        signal = signal + <span class="hljs-number">1</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadA</span>()).start();<br>        Thread.sleep(<span class="hljs-number">1000</span>);<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadB</span>()).start();<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">// è¾“å‡ºï¼š</span><br>threadA: <span class="hljs-number">0</span><br>threadB: <span class="hljs-number">1</span><br>threadA: <span class="hljs-number">2</span><br>threadB: <span class="hljs-number">3</span><br>threadA: <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨äº†ä¸€ä¸ª<code>volatile</code>å˜é‡<code>signal</code>æ¥å®ç°äº†â€œä¿¡å·é‡â€çš„æ¨¡å‹ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>volatile</code>å˜é‡éœ€è¦è¿›è¡ŒåŸå­æ“ä½œã€‚<code>signal++</code>å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>synchronized</code>ç»™å®ƒâ€œä¸Šé”â€ã€‚</p><blockquote><p>è¿™ç§å®ç°æ–¹å¼å¹¶ä¸ä¸€å®šé«˜æ•ˆï¼Œæœ¬ä¾‹åªæ˜¯æ¼”ç¤ºä¿¡å·é‡</p></blockquote><h3 id="ä¿¡å·é‡çš„åº”ç”¨åœºæ™¯ï¼š"><a href="#ä¿¡å·é‡çš„åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="ä¿¡å·é‡çš„åº”ç”¨åœºæ™¯ï¼š"></a>ä¿¡å·é‡çš„åº”ç”¨åœºæ™¯ï¼š</h3><p>å‡å¦‚åœ¨ä¸€ä¸ªåœè½¦åœºä¸­ï¼Œè½¦ä½æ˜¯æˆ‘ä»¬çš„å…¬å…±èµ„æºï¼Œçº¿ç¨‹å°±å¦‚åŒè½¦è¾†ï¼Œè€Œçœ‹é—¨çš„ç®¡ç†å‘˜å°±æ˜¯èµ·çš„â€œä¿¡å·é‡â€çš„ä½œç”¨ã€‚</p><p>å› ä¸ºåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹ï¼ˆè¶…è¿‡2ä¸ªï¼‰éœ€è¦ç›¸äº’åˆä½œï¼Œæˆ‘ä»¬ç”¨ç®€å•çš„â€œé”â€å’Œâ€œç­‰å¾…é€šçŸ¥æœºåˆ¶â€å°±ä¸é‚£ä¹ˆæ–¹ä¾¿äº†ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨åˆ°ä¿¡å·é‡ã€‚</p><p>å…¶å®JDKä¸­æä¾›çš„å¾ˆå¤šå¤šçº¿ç¨‹é€šä¿¡å·¥å…·ç±»éƒ½æ˜¯åŸºäºä¿¡å·é‡æ¨¡å‹çš„ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢ç¬¬ä¸‰ç¯‡çš„æ–‡ç« ä¸­ä»‹ç»ä¸€äº›å¸¸ç”¨çš„é€šä¿¡å·¥å…·ç±»ã€‚</p><h2 id="5-4-ç®¡é“"><a href="#5-4-ç®¡é“" class="headerlink" title="5.4 ç®¡é“"></a>5.4 ç®¡é“</h2><p>ç®¡é“æ˜¯åŸºäºâ€œç®¡é“æµâ€çš„é€šä¿¡æ–¹å¼ã€‚JDKæä¾›äº†<code>PipedWriter</code>ã€ <code>PipedReader</code>ã€ <code>PipedOutputStream</code>ã€ <code>PipedInputStream</code>ã€‚å…¶ä¸­ï¼Œå‰é¢ä¸¤ä¸ªæ˜¯åŸºäºå­—ç¬¦çš„ï¼Œåé¢ä¸¤ä¸ªæ˜¯åŸºäºå­—èŠ‚æµçš„ã€‚</p><p>è¿™é‡Œçš„ç¤ºä¾‹ä»£ç ä½¿ç”¨çš„æ˜¯åŸºäºå­—ç¬¦çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pipe</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReaderThread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-keyword">private</span> PipedReader reader;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">ReaderThread</span><span class="hljs-params">(PipedReader reader)</span> &#123;<br>            <span class="hljs-built_in">this</span>.reader = reader;<br>        &#125;<br>    <br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;this is reader&quot;</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">receive</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">while</span> ((receive = reader.read()) != -<span class="hljs-number">1</span>) &#123;<br>                    System.out.print((<span class="hljs-type">char</span>)receive);<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WriterThread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <br>        <span class="hljs-keyword">private</span> PipedWriter writer;<br>    <br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">WriterThread</span><span class="hljs-params">(PipedWriter writer)</span> &#123;<br>            <span class="hljs-built_in">this</span>.writer = writer;<br>        &#125;<br>    <br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;this is writer&quot;</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">receive</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">try</span> &#123;<br>                writer.write(<span class="hljs-string">&quot;test&quot;</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125; <span class="hljs-keyword">finally</span> &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    writer.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException, InterruptedException &#123;<br>        <span class="hljs-type">PipedWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PipedWriter</span>();<br>        <span class="hljs-type">PipedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PipedReader</span>();<br>        writer.connect(reader); <span class="hljs-comment">// è¿™é‡Œæ³¨æ„ä¸€å®šè¦è¿æ¥ï¼Œæ‰èƒ½é€šä¿¡</span><br>    <br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ReaderThread</span>(reader)).start();<br>        Thread.sleep(<span class="hljs-number">1000</span>);<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WriterThread</span>(writer)).start();<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">// è¾“å‡ºï¼š</span><br><span class="hljs-built_in">this</span> is reader<br><span class="hljs-built_in">this</span> is writer<br>test<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šè¿‡çº¿ç¨‹çš„æ„é€ å‡½æ•°ï¼Œä¼ å…¥äº†<code>PipedWrite</code>å’Œ<code>PipedReader</code>å¯¹è±¡ã€‚å¯ä»¥ç®€å•åˆ†æä¸€ä¸‹è¿™ä¸ªç¤ºä¾‹ä»£ç çš„æ‰§è¡Œæµç¨‹ï¼š</p><p>1. </p><p>   çº¿ç¨‹ReaderThreadå¼€å§‹æ‰§è¡Œï¼Œ</p><p>2. </p><p>   çº¿ç¨‹ReaderThreadä½¿ç”¨ç®¡é“reader.read()è¿›å…¥â€é˜»å¡â€œï¼Œ</p><p>3. </p><p>   çº¿ç¨‹WriterThreadå¼€å§‹æ‰§è¡Œï¼Œ</p><p>4. </p><p>   çº¿ç¨‹WriterThreadç”¨writer.write(â€œtestâ€)å¾€ç®¡é“å†™å…¥å­—ç¬¦ä¸²ï¼Œ</p><p>5. </p><p>   çº¿ç¨‹WriterThreadä½¿ç”¨writer.close()ç»“æŸç®¡é“å†™å…¥ï¼Œå¹¶æ‰§è¡Œå®Œæ¯•ï¼Œ</p><p>6. </p><p>   çº¿ç¨‹ReaderThreadæ¥å—åˆ°ç®¡é“è¾“å‡ºçš„å­—ç¬¦ä¸²å¹¶æ‰“å°ï¼Œ</p><p>7. </p><p>   çº¿ç¨‹ReaderThreadæ‰§è¡Œå®Œæ¯•ã€‚</p><h3 id="ç®¡é“é€šä¿¡çš„åº”ç”¨åœºæ™¯ï¼š"><a href="#ç®¡é“é€šä¿¡çš„åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="ç®¡é“é€šä¿¡çš„åº”ç”¨åœºæ™¯ï¼š"></a>ç®¡é“é€šä¿¡çš„åº”ç”¨åœºæ™¯ï¼š</h3><p>è¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚ä½¿ç”¨ç®¡é“å¤šåŠä¸I&#x2F;Oæµç›¸å…³ã€‚å½“æˆ‘ä»¬ä¸€ä¸ªçº¿ç¨‹éœ€è¦å…ˆå¦ä¸€ä¸ªçº¿ç¨‹å‘é€ä¸€ä¸ªä¿¡æ¯ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²ï¼‰æˆ–è€…æ–‡ä»¶ç­‰ç­‰æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨ç®¡é“é€šä¿¡äº†ã€‚</p><h2 id="5-5-å…¶å®ƒé€šä¿¡ç›¸å…³"><a href="#5-5-å…¶å®ƒé€šä¿¡ç›¸å…³" class="headerlink" title="5.5 å…¶å®ƒé€šä¿¡ç›¸å…³"></a>5.5 å…¶å®ƒé€šä¿¡ç›¸å…³</h2><p>ä»¥ä¸Šä»‹ç»äº†ä¸€äº›çº¿ç¨‹é—´é€šä¿¡çš„åŸºæœ¬åŸç†å’Œæ–¹æ³•ã€‚é™¤æ­¤ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¸çº¿ç¨‹é€šä¿¡ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œè¿™é‡Œä¸€å¹¶ä»‹ç»ã€‚</p><h3 id="5-5-1-joinæ–¹æ³•"><a href="#5-5-1-joinæ–¹æ³•" class="headerlink" title="5.5.1 joinæ–¹æ³•"></a>5.5.1 joinæ–¹æ³•</h3><p>join()æ–¹æ³•æ˜¯Threadç±»çš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ã€‚å®ƒçš„ä½œç”¨æ˜¯è®©å½“å‰çº¿ç¨‹é™·å…¥â€œç­‰å¾…â€çŠ¶æ€ï¼Œç­‰joinçš„è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆåï¼Œå†ç»§ç»­æ‰§è¡Œå½“å‰çº¿ç¨‹ã€‚</p><p>æœ‰æ—¶å€™ï¼Œä¸»çº¿ç¨‹åˆ›å»ºå¹¶å¯åŠ¨äº†å­çº¿ç¨‹ï¼Œå¦‚æœå­çº¿ç¨‹ä¸­éœ€è¦è¿›è¡Œå¤§é‡çš„è€—æ—¶è¿ç®—ï¼Œä¸»çº¿ç¨‹å¾€å¾€å°†æ—©äºå­çº¿ç¨‹ç»“æŸä¹‹å‰ç»“æŸã€‚</p><p>å¦‚æœä¸»çº¿ç¨‹æƒ³ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè·å¾—å­çº¿ç¨‹ä¸­çš„å¤„ç†å®Œçš„æŸä¸ªæ•°æ®ï¼Œå°±è¦ç”¨åˆ°joinæ–¹æ³•äº†ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Join</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br><br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯å­çº¿ç¨‹ï¼Œæˆ‘å…ˆç¡ä¸€ç§’&quot;</span>);<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>                System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯å­çº¿ç¨‹ï¼Œæˆ‘ç¡å®Œäº†ä¸€ç§’&quot;</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadA</span>());<br>        thread.start();<br>        thread.join();<br>        System.out.println(<span class="hljs-string">&quot;å¦‚æœä¸åŠ joinæ–¹æ³•ï¼Œæˆ‘ä¼šå…ˆè¢«æ‰“å‡ºæ¥ï¼ŒåŠ äº†å°±ä¸ä¸€æ ·äº†&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„join()æ–¹æ³•æœ‰ä¸¤ä¸ªé‡è½½æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯join(long)ï¼Œ ä¸€ä¸ªæ˜¯join(long, int)ã€‚</p><p>å®é™…ä¸Šï¼Œé€šè¿‡æºç ä½ ä¼šå‘ç°ï¼Œjoin()æ–¹æ³•åŠå…¶é‡è½½æ–¹æ³•åº•å±‚éƒ½æ˜¯åˆ©ç”¨äº†wait(long)è¿™ä¸ªæ–¹æ³•ã€‚</p><p>å¯¹äºjoin(long, int)ï¼Œé€šè¿‡æŸ¥çœ‹æºç (JDK 1.8)å‘ç°ï¼Œåº•å±‚å¹¶æ²¡æœ‰ç²¾ç¡®åˆ°çº³ç§’ï¼Œè€Œæ˜¯å¯¹ç¬¬äºŒä¸ªå‚æ•°åšäº†ç®€å•çš„åˆ¤æ–­å’Œå¤„ç†ã€‚</p></blockquote><h3 id="5-5-2-sleepæ–¹æ³•"><a href="#5-5-2-sleepæ–¹æ³•" class="headerlink" title="5.5.2 sleepæ–¹æ³•"></a>5.5.2 sleepæ–¹æ³•</h3><p>sleepæ–¹æ³•æ˜¯Threadç±»çš„ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚å®ƒçš„ä½œç”¨æ˜¯è®©å½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´ã€‚å®ƒæœ‰è¿™æ ·ä¸¤ä¸ªæ–¹æ³•ï¼š</p><p>- </p><p>  Thread.sleep(long)</p><p>- </p><p>  Thread.sleep(long, int)</p><blockquote><p>åŒæ ·ï¼ŒæŸ¥çœ‹æºç (JDK 1.8)å‘ç°ï¼Œç¬¬äºŒä¸ªæ–¹æ³•è²Œä¼¼åªå¯¹ç¬¬äºŒä¸ªå‚æ•°åšäº†ç®€å•çš„å¤„ç†ï¼Œæ²¡æœ‰ç²¾ç¡®åˆ°çº³ç§’ã€‚å®é™…ä¸Šè¿˜æ˜¯è°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ã€‚</p></blockquote><p>è¿™é‡Œéœ€è¦å¼ºè°ƒä¸€ä¸‹ï¼š<strong>sleepæ–¹æ³•æ˜¯ä¸ä¼šé‡Šæ”¾å½“å‰çš„é”çš„ï¼Œè€Œwaitæ–¹æ³•ä¼šã€‚</strong>è¿™ä¹Ÿæ˜¯æœ€å¸¸è§çš„ä¸€ä¸ªå¤šçº¿ç¨‹é¢è¯•é¢˜ã€‚</p><p>å®ƒä»¬è¿˜æœ‰è¿™äº›åŒºåˆ«ï¼š</p><p>- </p><p>  waitå¯ä»¥æŒ‡å®šæ—¶é—´ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šï¼›è€Œsleepå¿…é¡»æŒ‡å®šæ—¶é—´ã€‚</p><p>- </p><p>  waité‡Šæ”¾cpuèµ„æºï¼ŒåŒæ—¶é‡Šæ”¾é”ï¼›sleepé‡Šæ”¾cpuèµ„æºï¼Œä½†æ˜¯ä¸é‡Šæ”¾é”ï¼Œæ‰€ä»¥æ˜“æ­»é”ã€‚</p><p>- </p><p>  waitå¿…é¡»æ”¾åœ¨åŒæ­¥å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ï¼Œè€Œsleepå¯ä»¥å†ä»»æ„ä½ç½®</p><h3 id="5-5-3-ThreadLocalç±»"><a href="#5-5-3-ThreadLocalç±»" class="headerlink" title="5.5.3 ThreadLocalç±»"></a>5.5.3 ThreadLocalç±»</h3><p>ThreadLocalæ˜¯ä¸€ä¸ªæœ¬åœ°çº¿ç¨‹å‰¯æœ¬å˜é‡å·¥å…·ç±»ã€‚å†…éƒ¨æ˜¯ä¸€ä¸ª<strong>å¼±å¼•ç”¨</strong>çš„Mapæ¥ç»´æŠ¤ã€‚è¿™é‡Œä¸è¯¦ç»†ä»‹ç»å®ƒçš„åŸç†ï¼Œè€Œæ˜¯åªæ˜¯ä»‹ç»å®ƒçš„ä½¿ç”¨ï¼Œä»¥åæœ‰ç‹¬ç«‹ç« èŠ‚æ¥ä»‹ç»ThreadLocalç±»çš„åŸç†ã€‚</p><p>æœ‰äº›æœ‹å‹ç§°ThreadLocalä¸º<strong>çº¿ç¨‹æœ¬åœ°å˜é‡</strong>æˆ–<strong>çº¿ç¨‹æœ¬åœ°å­˜å‚¨</strong>ã€‚ä¸¥æ ¼æ¥è¯´ï¼ŒThreadLocalç±»å¹¶ä¸å±äºå¤šçº¿ç¨‹é—´çš„é€šä¿¡ï¼Œè€Œæ˜¯è®©æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±â€ç‹¬ç«‹â€œçš„å˜é‡ï¼Œçº¿ç¨‹ä¹‹é—´äº’ä¸å½±å“ã€‚å®ƒä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½åˆ›å»ºä¸€ä¸ª<strong>å‰¯æœ¬</strong>ï¼Œæ¯ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è‡ªå·±å†…éƒ¨çš„å‰¯æœ¬å˜é‡ã€‚</p><p>ThreadLocalç±»æœ€å¸¸ç”¨çš„å°±æ˜¯setæ–¹æ³•å’Œgetæ–¹æ³•ã€‚ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadLocalDemo</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>        <span class="hljs-keyword">private</span> ThreadLocal&lt;String&gt; threadLocal;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadA</span><span class="hljs-params">(ThreadLocal&lt;String&gt; threadLocal)</span> &#123;<br>            <span class="hljs-built_in">this</span>.threadLocal = threadLocal;<br>        &#125;<br>    <br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>            threadLocal.set(<span class="hljs-string">&quot;A&quot;</span>);<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;ThreadAè¾“å‡ºï¼š&quot;</span> + threadLocal.get());<br>        &#125;<br>    <br>        <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>            <span class="hljs-keyword">private</span> ThreadLocal&lt;String&gt; threadLocal;<br>    <br>            <span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadB</span><span class="hljs-params">(ThreadLocal&lt;String&gt; threadLocal)</span> &#123;<br>                <span class="hljs-built_in">this</span>.threadLocal = threadLocal;<br>            &#125;<br>    <br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>                threadLocal.set(<span class="hljs-string">&quot;B&quot;</span>);<br>                <span class="hljs-keyword">try</span> &#123;<br>                    Thread.sleep(<span class="hljs-number">1000</span>);<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>                System.out.println(<span class="hljs-string">&quot;ThreadBè¾“å‡ºï¼š&quot;</span> + threadLocal.get());<br>            &#125;<br>        &#125;<br>    <br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>            ThreadLocal&lt;String&gt; threadLocal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadA</span>(threadLocal)).start();<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadB</span>(threadLocal)).start();<br>        &#125;<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">// è¾“å‡ºï¼š</span><br>ThreadAè¾“å‡ºï¼šA<br>ThreadBè¾“å‡ºï¼šB<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨çš„åŒä¸€ä¸ªThreadLocalå®ä¾‹ï¼ˆé€šè¿‡æ„é€ æ–¹æ³•ä¼ å…¥ï¼‰ï¼Œä½†æ˜¯å®ƒä»¬å„è‡ªå¯ä»¥å­˜å–è‡ªå·±å½“å‰çº¿ç¨‹çš„ä¸€ä¸ªå€¼ã€‚</p><p>é‚£ThreadLocalæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿå¦‚æœåªæ˜¯å•çº¯çš„æƒ³è¦çº¿ç¨‹éš”ç¦»ï¼Œåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­å£°æ˜ä¸€ä¸ªç§æœ‰å˜é‡å°±å¥½äº†å‘€ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ThreadLocalï¼Ÿ</p><p>å¦‚æœå¼€å‘è€…å¸Œæœ›å°†ç±»çš„æŸä¸ªé™æ€å˜é‡ï¼ˆuser IDæˆ–è€…transaction IDï¼‰ä¸çº¿ç¨‹çŠ¶æ€å…³è”ï¼Œåˆ™å¯ä»¥è€ƒè™‘ä½¿ç”¨ThreadLocalã€‚</p><p>æœ€å¸¸è§çš„ThreadLocalä½¿ç”¨åœºæ™¯ä¸ºç”¨æ¥è§£å†³æ•°æ®åº“è¿æ¥ã€Sessionç®¡ç†ç­‰ã€‚æ•°æ®åº“è¿æ¥å’ŒSessionç®¡ç†æ¶‰åŠå¤šä¸ªå¤æ‚å¯¹è±¡çš„åˆå§‹åŒ–å’Œå…³é—­ã€‚å¦‚æœåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­å£°æ˜ä¸€äº›ç§æœ‰å˜é‡æ¥è¿›è¡Œæ“ä½œï¼Œé‚£è¿™ä¸ªçº¿ç¨‹å°±å˜å¾—ä¸é‚£ä¹ˆâ€œè½»é‡â€äº†ï¼Œéœ€è¦é¢‘ç¹çš„åˆ›å»ºå’Œå…³é—­è¿æ¥ã€‚</p><h3 id="5-5-4-InheritableThreadLocal"><a href="#5-5-4-InheritableThreadLocal" class="headerlink" title="5.5.4 InheritableThreadLocal"></a>5.5.4 InheritableThreadLocal</h3><p>InheritableThreadLocalç±»ä¸ThreadLocalç±»ç¨æœ‰ä¸åŒï¼ŒInheritableæ˜¯ç»§æ‰¿çš„æ„æ€ã€‚å®ƒä¸ä»…ä»…æ˜¯å½“å‰çº¿ç¨‹å¯ä»¥å­˜å–å‰¯æœ¬å€¼ï¼Œè€Œä¸”å®ƒçš„å­çº¿ç¨‹ä¹Ÿå¯ä»¥å­˜å–è¿™ä¸ªå‰¯æœ¬å€¼ã€‚</p><p><strong>å‚è€ƒèµ„æ–™</strong></p><p>- </p><p>  JDK 1.8 æºç </p><p>- </p><p>  <a href="http://ifeve.com/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1/">æ·±å…¥ç†è§£çº¿ç¨‹é€šä¿¡</a></p><p>- </p><p>  <a href="https://www.cnblogs.com/hapjin/p/5492619.html">JAVAå¤šçº¿ç¨‹ä¹‹çº¿ç¨‹é—´çš„é€šä¿¡æ–¹å¼</a></p><p>- </p><p>  <a href="http://ifeve.com/thread-signaling/">çº¿ç¨‹é€šä¿¡</a></p><h1 id="6-Javaå†…å­˜æ¨¡å‹åŸºç¡€çŸ¥è¯†"><a href="#6-Javaå†…å­˜æ¨¡å‹åŸºç¡€çŸ¥è¯†" class="headerlink" title="6 Javaå†…å­˜æ¨¡å‹åŸºç¡€çŸ¥è¯†"></a>6 Javaå†…å­˜æ¨¡å‹åŸºç¡€çŸ¥è¯†</h1><h2 id="6-1-å¹¶å‘ç¼–ç¨‹æ¨¡å‹çš„ä¸¤ä¸ªå…³é”®é—®é¢˜"><a href="#6-1-å¹¶å‘ç¼–ç¨‹æ¨¡å‹çš„ä¸¤ä¸ªå…³é”®é—®é¢˜" class="headerlink" title="6.1 å¹¶å‘ç¼–ç¨‹æ¨¡å‹çš„ä¸¤ä¸ªå…³é”®é—®é¢˜"></a>6.1 å¹¶å‘ç¼–ç¨‹æ¨¡å‹çš„ä¸¤ä¸ªå…³é”®é—®é¢˜</h2><ul><li><p>çº¿ç¨‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿå³ï¼šçº¿ç¨‹ä¹‹é—´ä»¥ä½•ç§æœºåˆ¶æ¥äº¤æ¢ä¿¡æ¯</p></li><li><p>çº¿ç¨‹é—´å¦‚ä½•åŒæ­¥ï¼Ÿå³ï¼šçº¿ç¨‹ä»¥ä½•ç§æœºåˆ¶æ¥æ§åˆ¶ä¸åŒçº¿ç¨‹é—´æ“ä½œå‘ç”Ÿçš„ç›¸å¯¹é¡ºåº</p></li></ul><p>æœ‰ä¸¤ç§å¹¶å‘æ¨¡å‹å¯ä»¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li><p>æ¶ˆæ¯ä¼ é€’å¹¶å‘æ¨¡å‹</p></li><li><p>å…±äº«å†…å­˜å¹¶å‘æ¨¡å‹</p></li></ul><p>è¿™ä¸¤ç§æ¨¡å‹ä¹‹é—´çš„åŒºåˆ«å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p><img src="/Hexo/../img/202202202056330.png"></p><p><strong>åœ¨Javaä¸­ï¼Œä½¿ç”¨çš„æ˜¯å…±äº«å†…å­˜å¹¶å‘æ¨¡å‹</strong>ã€‚</p><h2 id="6-2-Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„"><a href="#6-2-Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„" class="headerlink" title="6.2 Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„"></a>6.2 Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„</h2><h3 id="6-2-1-è¿è¡Œæ—¶å†…å­˜çš„åˆ’åˆ†"><a href="#6-2-1-è¿è¡Œæ—¶å†…å­˜çš„åˆ’åˆ†" class="headerlink" title="6.2.1  è¿è¡Œæ—¶å†…å­˜çš„åˆ’åˆ†"></a>6.2.1  è¿è¡Œæ—¶å†…å­˜çš„åˆ’åˆ†</h3><p>å…ˆè°ˆä¸€ä¸‹è¿è¡Œæ—¶æ•°æ®åŒºï¼Œä¸‹é¢è¿™å¼ å›¾ç›¸ä¿¡å¤§å®¶ä¸€ç‚¹éƒ½ä¸é™Œç”Ÿï¼š </p><p><img src="/Hexo/../img/202202202056859.png"></p><p>å¯¹äºæ¯ä¸€ä¸ªçº¿ç¨‹æ¥è¯´ï¼Œæ ˆéƒ½æ˜¯ç§æœ‰çš„ï¼Œè€Œå †æ˜¯å…±æœ‰çš„ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´åœ¨æ ˆä¸­çš„å˜é‡ï¼ˆå±€éƒ¨å˜é‡ã€æ–¹æ³•å®šä¹‰å‚æ•°ã€å¼‚å¸¸å¤„ç†å™¨å‚æ•°ï¼‰ä¸ä¼šåœ¨çº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œä¹Ÿå°±ä¸ä¼šæœ‰<font color='red'>å†…å­˜å¯è§æ€§</font>ï¼ˆä¸‹æ–‡ä¼šè¯´åˆ°ï¼‰çš„é—®é¢˜ï¼Œä¹Ÿä¸å—å†…å­˜æ¨¡å‹çš„å½±å“ã€‚è€Œåœ¨å †ä¸­çš„å˜é‡æ˜¯å…±äº«çš„ï¼Œæœ¬æ–‡ç§°ä¸ºå…±äº«å˜é‡ã€‚</p><p>æ‰€ä»¥ï¼Œå†…å­˜å¯è§æ€§æ˜¯é’ˆå¯¹çš„<strong>å…±äº«å˜é‡</strong>ã€‚</p><h3 id="6-2-2-æ—¢ç„¶å †æ˜¯å…±äº«çš„ï¼Œä¸ºä»€ä¹ˆåœ¨å †ä¸­ä¼šæœ‰å†…å­˜ä¸å¯è§é—®é¢˜ï¼Ÿ"><a href="#6-2-2-æ—¢ç„¶å †æ˜¯å…±äº«çš„ï¼Œä¸ºä»€ä¹ˆåœ¨å †ä¸­ä¼šæœ‰å†…å­˜ä¸å¯è§é—®é¢˜ï¼Ÿ" class="headerlink" title="6.2.2 æ—¢ç„¶å †æ˜¯å…±äº«çš„ï¼Œä¸ºä»€ä¹ˆåœ¨å †ä¸­ä¼šæœ‰å†…å­˜ä¸å¯è§é—®é¢˜ï¼Ÿ"></a>6.2.2 æ—¢ç„¶å †æ˜¯å…±äº«çš„ï¼Œä¸ºä»€ä¹ˆåœ¨å †ä¸­ä¼šæœ‰å†…å­˜ä¸å¯è§é—®é¢˜ï¼Ÿ</h3><p>è¿™æ˜¯å› ä¸ºç°ä»£è®¡ç®—æœºä¸ºäº†é«˜æ•ˆï¼Œå¾€å¾€ä¼šåœ¨é«˜é€Ÿç¼“å­˜åŒºä¸­ç¼“å­˜å…±äº«å˜é‡ï¼Œå› ä¸ºcpuè®¿é—®ç¼“å­˜åŒºæ¯”è®¿é—®å†…å­˜è¦å¿«å¾—å¤šã€‚</p><blockquote><p>çº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡å­˜åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„æœ¬åœ°å†…å­˜ï¼Œå­˜å‚¨äº†è¯¥çº¿ç¨‹ä»¥è¯»ã€å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚æœ¬åœ°å†…å­˜æ˜¯Javaå†…å­˜æ¨¡å‹çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå¹¶ä¸çœŸå®å­˜åœ¨ã€‚å®ƒæ¶µç›–äº†ç¼“å­˜ã€å†™ç¼“å†²åŒºã€å¯„å­˜å™¨ç­‰ã€‚</p></blockquote><p>Javaçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ç”±Javaå†…å­˜æ¨¡å‹ï¼ˆç®€ç§°JMMï¼‰æ§åˆ¶ï¼Œä»æŠ½è±¡çš„è§’åº¦æ¥è¯´ï¼ŒJMMå®šä¹‰äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„æŠ½è±¡å…³ç³»ã€‚JMMçš„æŠ½è±¡ç¤ºæ„å›¾å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/Hexo/../img/202202202056265.jpeg"></p><p>image</p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š 1. æ‰€æœ‰çš„å…±äº«å˜é‡éƒ½å­˜åœ¨ä¸»å†…å­˜ä¸­ã€‚ 2. æ¯ä¸ªçº¿ç¨‹éƒ½ä¿å­˜äº†ä¸€ä»½è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚ 3. å¦‚æœçº¿ç¨‹Aä¸çº¿ç¨‹Bä¹‹é—´è¦é€šä¿¡çš„è¯ï¼Œå¿…é¡»ç»å†ä¸‹é¢2ä¸ªæ­¥éª¤ï¼š 1. çº¿ç¨‹Aå°†æœ¬åœ°å†…å­˜Aä¸­æ›´æ–°è¿‡çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­å»ã€‚ 2. çº¿ç¨‹Båˆ°ä¸»å†…å­˜ä¸­å»è¯»å–çº¿ç¨‹Aä¹‹å‰å·²ç»æ›´æ–°è¿‡çš„å…±äº«å˜é‡ã€‚</p><p><strong>æ‰€ä»¥ï¼Œçº¿ç¨‹Aæ— æ³•ç›´æ¥è®¿é—®çº¿ç¨‹Bçš„å·¥ä½œå†…å­˜ï¼Œçº¿ç¨‹é—´é€šä¿¡å¿…é¡»ç»è¿‡ä¸»å†…å­˜ã€‚</strong></p><p>æ³¨æ„ï¼Œæ ¹æ®JMMçš„è§„å®šï¼Œ<strong>çº¿ç¨‹å¯¹å…±äº«å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨è‡ªå·±çš„æœ¬åœ°å†…å­˜ä¸­è¿›è¡Œï¼Œä¸èƒ½ç›´æ¥ä»ä¸»å†…å­˜ä¸­è¯»å–</strong>ã€‚</p><p>æ‰€ä»¥çº¿ç¨‹Bå¹¶ä¸æ˜¯ç›´æ¥å»ä¸»å†…å­˜ä¸­è¯»å–å…±äº«å˜é‡çš„å€¼ï¼Œè€Œæ˜¯å…ˆåœ¨æœ¬åœ°å†…å­˜Bä¸­æ‰¾åˆ°è¿™ä¸ªå…±äº«å˜é‡ï¼Œå‘ç°è¿™ä¸ªå…±äº«å˜é‡å·²ç»è¢«æ›´æ–°äº†ï¼Œç„¶åæœ¬åœ°å†…å­˜Bå»ä¸»å†…å­˜ä¸­è¯»å–è¿™ä¸ªå…±äº«å˜é‡çš„æ–°å€¼ï¼Œå¹¶æ‹·è´åˆ°æœ¬åœ°å†…å­˜Bä¸­ï¼Œæœ€åçº¿ç¨‹Bå†è¯»å–æœ¬åœ°å†…å­˜Bä¸­çš„æ–°å€¼ã€‚</p><p>é‚£ä¹ˆæ€ä¹ˆçŸ¥é“è¿™ä¸ªå…±äº«å˜é‡çš„è¢«å…¶ä»–çº¿ç¨‹æ›´æ–°äº†å‘¢ï¼Ÿè¿™å°±æ˜¯JMMçš„åŠŸåŠ³äº†ï¼Œä¹Ÿæ˜¯JMMå­˜åœ¨çš„å¿…è¦æ€§ä¹‹ä¸€ã€‚<strong>JMMé€šè¿‡æ§åˆ¶ä¸»å†…å­˜ä¸æ¯ä¸ªçº¿ç¨‹çš„æœ¬åœ°å†…å­˜ä¹‹é—´çš„äº¤äº’ï¼Œæ¥æä¾›å†…å­˜å¯è§æ€§ä¿è¯</strong>ã€‚</p><blockquote><p>Javaä¸­çš„volatileå…³é”®å­—å¯ä»¥ä¿è¯å¤šçº¿ç¨‹æ“ä½œå…±äº«å˜é‡çš„å¯è§æ€§ä»¥åŠç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼Œsynchronizedå…³é”®å­—ä¸ä»…ä¿è¯å¯è§æ€§ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†åŸå­æ€§ï¼ˆäº’æ–¥æ€§ï¼‰ã€‚åœ¨æ›´åº•å±‚ï¼ŒJMMé€šè¿‡å†…å­˜å±éšœæ¥å®ç°å†…å­˜çš„å¯è§æ€§ä»¥åŠç¦æ­¢é‡æ’åºã€‚ä¸ºäº†ç¨‹åºå‘˜çš„æ–¹ä¾¿ç†è§£ï¼Œæå‡ºäº†happens-beforeï¼Œå®ƒæ›´åŠ çš„ç®€å•æ˜“æ‡‚ï¼Œä»è€Œé¿å…äº†ç¨‹åºå‘˜ä¸ºäº†ç†è§£å†…å­˜å¯è§æ€§è€Œå»å­¦ä¹ å¤æ‚çš„é‡æ’åºè§„åˆ™ä»¥åŠè¿™äº›è§„åˆ™çš„å…·ä½“å®ç°æ–¹æ³•ã€‚è¿™é‡Œæ¶‰åŠåˆ°çš„æ‰€æœ‰å†…å®¹åé¢éƒ½ä¼šæœ‰ä¸“é—¨çš„ç« èŠ‚ä»‹ç»ã€‚</p></blockquote><h3 id="6-2-3-JMMä¸Javaå†…å­˜åŒºåŸŸåˆ’åˆ†çš„åŒºåˆ«ä¸è”ç³»"><a href="#6-2-3-JMMä¸Javaå†…å­˜åŒºåŸŸåˆ’åˆ†çš„åŒºåˆ«ä¸è”ç³»" class="headerlink" title="6.2.3 JMMä¸Javaå†…å­˜åŒºåŸŸåˆ’åˆ†çš„åŒºåˆ«ä¸è”ç³»"></a>6.2.3 JMMä¸Javaå†…å­˜åŒºåŸŸåˆ’åˆ†çš„åŒºåˆ«ä¸è”ç³»</h3><p>ä¸Šé¢ä¸¤å°èŠ‚åˆ†åˆ«æåˆ°äº†JMMå’ŒJavaè¿è¡Œæ—¶å†…å­˜åŒºåŸŸçš„åˆ’åˆ†ï¼Œè¿™ä¸¤è€…æ—¢æœ‰å·®åˆ«åˆæœ‰è”ç³»ï¼š</p><p>- </p><p>  åŒºåˆ«</p><p>  ä¸¤è€…æ˜¯ä¸åŒçš„æ¦‚å¿µå±‚æ¬¡ã€‚JMMæ˜¯æŠ½è±¡çš„ï¼Œä»–æ˜¯ç”¨æ¥æè¿°ä¸€ç»„è§„åˆ™ï¼Œé€šè¿‡è¿™ä¸ªè§„åˆ™æ¥æ§åˆ¶å„ä¸ªå˜é‡çš„è®¿é—®æ–¹å¼ï¼Œå›´ç»•åŸå­æ€§ã€æœ‰åºæ€§ã€å¯è§æ€§ç­‰å±•å¼€çš„ã€‚è€ŒJavaè¿è¡Œæ—¶å†…å­˜çš„åˆ’åˆ†æ˜¯å…·ä½“çš„ï¼Œæ˜¯JVMè¿è¡ŒJavaç¨‹åºæ—¶ï¼Œå¿…è¦çš„å†…å­˜åˆ’åˆ†ã€‚</p><p>- </p><p>  è”ç³»</p><p>  éƒ½å­˜åœ¨ç§æœ‰æ•°æ®åŒºåŸŸå’Œå…±äº«æ•°æ®åŒºåŸŸã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒJMMä¸­çš„ä¸»å†…å­˜å±äºå…±äº«æ•°æ®åŒºåŸŸï¼Œä»–æ˜¯åŒ…å«äº†å †å’Œæ–¹æ³•åŒºï¼›åŒæ ·ï¼ŒJMMä¸­çš„æœ¬åœ°å†…å­˜å±äºç§æœ‰æ•°æ®åŒºåŸŸï¼ŒåŒ…å«äº†ç¨‹åºè®¡æ•°å™¨ã€æœ¬åœ°æ–¹æ³•æ ˆã€è™šæ‹Ÿæœºæ ˆã€‚</p><p><strong>å®é™…ä¸Šï¼Œä»–ä»¬è¡¨è¾¾çš„æ˜¯åŒä¸€ç§å«ä¹‰ï¼Œè¿™é‡Œä¸åšåŒºåˆ†ã€‚</strong></p><p><strong>å‚è€ƒèµ„æ–™</strong></p><ul><li>ã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹</li><li>ã€Šå®æˆ˜Javaé«˜å¹¶å‘ç¨‹åºè®¾è®¡ã€‹</li></ul><h1 id="7-é‡æ’åºä¸happens-before"><a href="#7-é‡æ’åºä¸happens-before" class="headerlink" title="7 é‡æ’åºä¸happens-before"></a>7 é‡æ’åºä¸happens-before</h1><h2 id="7-1-ä»€ä¹ˆæ˜¯é‡æ’åºï¼Ÿ"><a href="#7-1-ä»€ä¹ˆæ˜¯é‡æ’åºï¼Ÿ" class="headerlink" title="7.1 ä»€ä¹ˆæ˜¯é‡æ’åºï¼Ÿ"></a>7.1 ä»€ä¹ˆæ˜¯é‡æ’åºï¼Ÿ</h2><p>è®¡ç®—æœºåœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤åšé‡æ’ã€‚</p><p><strong>ä¸ºä»€ä¹ˆæŒ‡ä»¤é‡æ’åºå¯ä»¥æé«˜æ€§èƒ½ï¼Ÿ</strong></p><p>ç®€å•åœ°è¯´ï¼Œæ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåŒ…å«å¤šä¸ªæ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤å¯èƒ½ä½¿ç”¨ä¸åŒçš„ç¡¬ä»¶ã€‚å› æ­¤ï¼Œ<strong>æµæ°´çº¿æŠ€æœ¯</strong>äº§ç”Ÿäº†ï¼Œå®ƒçš„åŸç†æ˜¯æŒ‡ä»¤1è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œå°±å¯ä»¥å¼€å§‹æ‰§è¡ŒæŒ‡ä»¤2ï¼Œè€Œä¸ç”¨ç­‰åˆ°æŒ‡ä»¤1æ‰§è¡Œç»“æŸä¹‹åå†æ‰§è¡ŒæŒ‡ä»¤2ï¼Œè¿™æ ·å°±å¤§å¤§æé«˜äº†æ•ˆç‡ã€‚</p><p>ä½†æ˜¯ï¼Œæµæ°´çº¿æŠ€æœ¯æœ€å®³æ€•<strong>ä¸­æ–­</strong>ï¼Œæ¢å¤ä¸­æ–­çš„ä»£ä»·æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³å°½åŠæ³•ä¸è®©æµæ°´çº¿ä¸­æ–­ã€‚æŒ‡ä»¤é‡æ’å°±æ˜¯å‡å°‘ä¸­æ–­çš„ä¸€ç§æŠ€æœ¯ã€‚</p><p>æˆ‘ä»¬åˆ†æä¸€ä¸‹ä¸‹é¢è¿™ä¸ªä»£ç çš„æ‰§è¡Œæƒ…å†µï¼š</p><p>a &#x3D; b + c;</p><p>d &#x3D; e - f ;</p><p>å…ˆåŠ è½½bã€cï¼ˆ<strong>æ³¨æ„ï¼Œå³æœ‰å¯èƒ½å…ˆåŠ è½½bï¼Œä¹Ÿæœ‰å¯èƒ½å…ˆåŠ è½½c</strong>ï¼‰ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œadd(b,c)çš„æ—¶å€™ï¼Œéœ€è¦ç­‰å¾…bã€cè£…è½½ç»“æŸæ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å¢åŠ äº†åœé¡¿ï¼Œé‚£ä¹ˆåé¢çš„æŒ‡ä»¤ä¹Ÿä¼šä¾æ¬¡æœ‰åœé¡¿,è¿™é™ä½äº†è®¡ç®—æœºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>ä¸ºäº†å‡å°‘è¿™ä¸ªåœé¡¿ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåŠ è½½eå’Œf,ç„¶åå†å»åŠ è½½add(b,c),è¿™æ ·åšå¯¹ç¨‹åºï¼ˆä¸²è¡Œï¼‰æ˜¯æ²¡æœ‰å½±å“çš„,ä½†å´å‡å°‘äº†åœé¡¿ã€‚æ—¢ç„¶add(b,c)éœ€è¦åœé¡¿ï¼Œé‚£è¿˜ä¸å¦‚å»åšä¸€äº›æœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<strong>æŒ‡ä»¤é‡æ’å¯¹äºæé«˜CPUå¤„ç†æ€§èƒ½ååˆ†å¿…è¦ã€‚è™½ç„¶ç”±æ­¤å¸¦æ¥äº†ä¹±åºçš„é—®é¢˜ï¼Œä½†æ˜¯è¿™ç‚¹ç‰ºç‰²æ˜¯å€¼å¾—çš„ã€‚</strong></p><p>æŒ‡ä»¤é‡æ’ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</p><ul><li><p><strong>ç¼–è¯‘å™¨ä¼˜åŒ–é‡æ’</strong></p><p>ç¼–è¯‘å™¨åœ¨<strong>ä¸æ”¹å˜å•çº¿ç¨‹ç¨‹åºè¯­ä¹‰</strong>çš„å‰æä¸‹ï¼Œå¯ä»¥é‡æ–°å®‰æ’è¯­å¥çš„æ‰§è¡Œé¡ºåºã€‚</p></li><li><p><strong>æŒ‡ä»¤å¹¶è¡Œé‡æ’</strong></p><p>ç°ä»£å¤„ç†å™¨é‡‡ç”¨äº†æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯æ¥å°†å¤šæ¡æŒ‡ä»¤é‡å æ‰§è¡Œã€‚å¦‚æœ<strong>ä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§</strong>(å³åä¸€ä¸ªæ‰§è¡Œçš„è¯­å¥æ— éœ€ä¾èµ–å‰é¢æ‰§è¡Œçš„è¯­å¥çš„ç»“æœ)ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜è¯­å¥å¯¹åº”çš„æœºå™¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºã€‚</p></li><li><p><strong>å†…å­˜ç³»ç»Ÿé‡æ’</strong></p><p>ç”±äºå¤„ç†å™¨ä½¿ç”¨ç¼“å­˜å’Œè¯»å†™ç¼“å­˜å†²åŒºï¼Œè¿™ä½¿å¾—åŠ è½½(load)å’Œå­˜å‚¨(store)æ“ä½œçœ‹ä¸Šå»å¯èƒ½æ˜¯åœ¨ä¹±åºæ‰§è¡Œï¼Œå› ä¸ºä¸‰çº§ç¼“å­˜çš„å­˜åœ¨ï¼Œå¯¼è‡´å†…å­˜ä¸ç¼“å­˜çš„æ•°æ®åŒæ­¥å­˜åœ¨æ—¶é—´å·®ã€‚</p></li></ul><p><strong>æŒ‡ä»¤é‡æ’å¯ä»¥ä¿è¯ä¸²è¡Œè¯­ä¹‰ä¸€è‡´ï¼Œä½†æ˜¯æ²¡æœ‰ä¹‰åŠ¡ä¿è¯å¤šçº¿ç¨‹é—´çš„è¯­ä¹‰ä¹Ÿä¸€è‡´</strong>ã€‚æ‰€ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹ï¼ŒæŒ‡ä»¤é‡æ’åºå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ã€‚</p><h2 id="7-2-é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸JMMçš„ä¿è¯"><a href="#7-2-é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸JMMçš„ä¿è¯" class="headerlink" title="7.2 é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸JMMçš„ä¿è¯"></a>7.2 é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸JMMçš„ä¿è¯</h2><p>é¡ºåºä¸€è‡´æ€§æ¨¡å‹æ˜¯ä¸€ä¸ª<strong>ç†è®ºå‚è€ƒæ¨¡å‹</strong>ï¼Œå†…å­˜æ¨¡å‹åœ¨è®¾è®¡çš„æ—¶å€™éƒ½ä¼šä»¥é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä½œä¸ºå‚è€ƒã€‚</p><h3 id="7-2-1-æ•°æ®ç«äº‰ä¸é¡ºåºä¸€è‡´æ€§"><a href="#7-2-1-æ•°æ®ç«äº‰ä¸é¡ºåºä¸€è‡´æ€§" class="headerlink" title="7.2.1 æ•°æ®ç«äº‰ä¸é¡ºåºä¸€è‡´æ€§"></a>7.2.1 æ•°æ®ç«äº‰ä¸é¡ºåºä¸€è‡´æ€§</h3><p>å½“ç¨‹åºæœªæ­£ç¡®åŒæ­¥çš„æ—¶å€™ï¼Œå°±å¯èƒ½å­˜åœ¨æ•°æ®ç«äº‰ã€‚</p><blockquote><p>æ•°æ®ç«äº‰ï¼šåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å†™ä¸€ä¸ªå˜é‡ï¼Œåœ¨å¦ä¸€ä¸ªçº¿ç¨‹è¯»åŒä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸”å†™å’Œè¯»æ²¡æœ‰é€šè¿‡åŒæ­¥æ¥æ’åºã€‚</p></blockquote><p>å¦‚æœç¨‹åºä¸­åŒ…å«äº†æ•°æ®ç«äº‰ï¼Œé‚£ä¹ˆè¿è¡Œçš„ç»“æœå¾€å¾€å……æ»¡äº†<strong>ä¸ç¡®å®šæ€§</strong>ï¼Œæ¯”å¦‚è¯»å‘ç”Ÿåœ¨äº†å†™ä¹‹å‰ï¼Œå¯èƒ½å°±ä¼šè¯»åˆ°é”™è¯¯çš„å€¼ï¼›å¦‚æœä¸€ä¸ªçº¿ç¨‹ç¨‹åºèƒ½å¤Ÿæ­£ç¡®åŒæ­¥ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨æ•°æ®ç«äº‰ã€‚</p><p>Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰å¯¹äºæ­£ç¡®åŒæ­¥å¤šçº¿ç¨‹ç¨‹åºçš„å†…å­˜ä¸€è‡´æ€§åšäº†ä»¥ä¸‹ä¿è¯ï¼š</p><blockquote><p><strong>å¦‚æœç¨‹åºæ˜¯æ­£ç¡®åŒæ­¥çš„ï¼Œç¨‹åºçš„æ‰§è¡Œå°†å…·æœ‰é¡ºåºä¸€è‡´æ€§</strong>ã€‚ å³ç¨‹åºçš„æ‰§è¡Œç»“æœå’Œè¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­æ‰§è¡Œçš„ç»“æœç›¸åŒã€‚</p></blockquote><p>è¿™é‡Œçš„åŒæ­¥åŒ…æ‹¬äº†ä½¿ç”¨<code>volatile</code>ã€<code>final</code>ã€<code>synchronized</code>ç­‰å…³é”®å­—æ¥å®ç°<strong>å¤šçº¿ç¨‹ä¸‹çš„åŒæ­¥</strong>ã€‚</p><p>å¦‚æœç¨‹åºå‘˜æ²¡æœ‰æ­£ç¡®ä½¿ç”¨<code>volatile</code>ã€<code>final</code>ã€<code>synchronized</code>ï¼Œé‚£ä¹ˆå³ä¾¿æ˜¯ä½¿ç”¨äº†åŒæ­¥ï¼ˆå•çº¿ç¨‹ä¸‹çš„åŒæ­¥ï¼‰ï¼ŒJMMä¹Ÿä¸ä¼šæœ‰å†…å­˜å¯è§æ€§çš„ä¿è¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä½ çš„ç¨‹åºå‡ºé”™ï¼Œå¹¶ä¸”å…·æœ‰ä¸å¯é‡ç°æ€§ï¼Œå¾ˆéš¾æ’æŸ¥ã€‚</p><p>æ‰€ä»¥å¦‚ä½•æ­£ç¡®ä½¿ç”¨<code>volatile</code>ã€<code>final</code>ã€<code>synchronized</code>ï¼Œæ˜¯ç¨‹åºå‘˜åº”è¯¥å»äº†è§£çš„ã€‚åé¢ä¼šæœ‰ä¸“é—¨çš„ç« èŠ‚ä»‹ç»è¿™å‡ ä¸ªå…³é”®å­—çš„å†…å­˜è¯­ä¹‰åŠä½¿ç”¨ã€‚</p><h3 id="7-2-2-é¡ºåºä¸€è‡´æ€§æ¨¡å‹"><a href="#7-2-2-é¡ºåºä¸€è‡´æ€§æ¨¡å‹" class="headerlink" title="7.2.2 é¡ºåºä¸€è‡´æ€§æ¨¡å‹"></a>7.2.2 é¡ºåºä¸€è‡´æ€§æ¨¡å‹</h3><p>é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹æ˜¯ä¸€ä¸ª<strong>ç†æƒ³åŒ–çš„ç†è®ºå‚è€ƒæ¨¡å‹</strong>ï¼Œå®ƒä¸ºç¨‹åºå‘˜æä¾›äº†æå¼ºçš„å†…å­˜å¯è§æ€§ä¿è¯ã€‚</p><p>é¡ºåºä¸€è‡´æ€§æ¨¡å‹æœ‰ä¸¤å¤§ç‰¹æ€§ï¼š</p><ul><li>ä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œå¿…é¡»æŒ‰ç…§ç¨‹åºçš„é¡ºåºï¼ˆå³Javaä»£ç çš„é¡ºåºï¼‰æ¥æ‰§è¡Œã€‚</li><li>ä¸ç®¡ç¨‹åºæ˜¯å¦åŒæ­¥ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½åªèƒ½çœ‹åˆ°ä¸€ä¸ªå•ä¸€çš„æ“ä½œæ‰§è¡Œé¡ºåºã€‚å³åœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªæ“ä½œå¿…é¡»æ˜¯<strong>åŸå­æ€§çš„ï¼Œä¸”ç«‹åˆ»å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§</strong>ã€‚</li></ul><p>ä¸ºäº†ç†è§£è¿™ä¸¤ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹Aå’ŒBå¹¶å‘æ‰§è¡Œï¼Œçº¿ç¨‹Aæœ‰3ä¸ªæ“ä½œï¼Œä»–ä»¬åœ¨ç¨‹åºä¸­çš„é¡ºåºæ˜¯A1-&gt;A2-&gt;A3ï¼Œçº¿ç¨‹Bä¹Ÿæœ‰3ä¸ªæ“ä½œï¼ŒB1-&gt;B2-&gt;B3ã€‚</p><p>å‡è®¾<strong>æ­£ç¡®ä½¿ç”¨äº†åŒæ­¥</strong>ï¼ŒAçº¿ç¨‹çš„3ä¸ªæ“ä½œæ‰§è¡Œåé‡Šæ”¾é”ï¼ŒBçº¿ç¨‹è·å–åŒä¸€ä¸ªé”ã€‚é‚£ä¹ˆåœ¨<strong>é¡ºåºä¸€è‡´æ€§æ¨¡å‹</strong>ä¸­çš„æ‰§è¡Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/Hexo/../img/202202202201120.png"></p><p>æ­£ç¡®åŒæ­¥å›¾</p><p>æ“ä½œçš„æ‰§è¡Œæ•´ä½“ä¸Šæœ‰åºï¼Œå¹¶ä¸”ä¸¤ä¸ªçº¿ç¨‹éƒ½åªèƒ½çœ‹åˆ°è¿™ä¸ªæ‰§è¡Œé¡ºåºã€‚</p><p>å‡è®¾<strong>æ²¡æœ‰ä½¿ç”¨åŒæ­¥</strong>ï¼Œé‚£ä¹ˆåœ¨<strong>é¡ºåºä¸€è‡´æ€§æ¨¡å‹</strong>ä¸­çš„æ‰§è¡Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/Hexo/../img/202202202202532.png"></p><p>æ²¡æœ‰æ­£ç¡®åŒæ­¥å›¾</p><p>æ“ä½œçš„æ‰§è¡Œæ•´ä½“ä¸Šæ— åºï¼Œä½†æ˜¯ä¸¤ä¸ªçº¿ç¨‹éƒ½åªèƒ½çœ‹åˆ°è¿™ä¸ªæ‰§è¡Œé¡ºåºã€‚ä¹‹æ‰€ä»¥å¯ä»¥å¾—åˆ°è¿™ä¸ªä¿è¯ï¼Œæ˜¯å› ä¸ºé¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„<strong>æ¯ä¸ªæ“ä½œå¿…é¡»ç«‹å³å¯¹ä»»æ„çº¿ç¨‹å¯è§</strong>ã€‚</p><p><strong>ä½†æ˜¯JMMæ²¡æœ‰è¿™æ ·çš„ä¿è¯ã€‚</strong></p><p>æ¯”å¦‚ï¼Œåœ¨å½“å‰çº¿ç¨‹æŠŠå†™è¿‡çš„æ•°æ®ç¼“å­˜åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œåœ¨æ²¡æœ‰åˆ·æ–°åˆ°ä¸»å†…å­˜ä¹‹å‰ï¼Œè¿™ä¸ªå†™æ“ä½œä»…å¯¹å½“å‰çº¿ç¨‹å¯è§ï¼›ä»å…¶ä»–çº¿ç¨‹çš„è§’åº¦æ¥è§‚å¯Ÿï¼Œè¿™ä¸ªå†™æ“ä½œæ ¹æœ¬æ²¡æœ‰è¢«å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œã€‚åªæœ‰å½“å‰çº¿ç¨‹æŠŠæœ¬åœ°å†…å­˜ä¸­å†™è¿‡çš„æ•°æ®åˆ·æ–°åˆ°ä¸»å†…å­˜ä¹‹åï¼Œè¿™ä¸ªå†™æ“ä½œæ‰å¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å‰çº¿ç¨‹å’Œå…¶ä»–çº¿ç¨‹çœ‹åˆ°çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ä¸€æ ·çš„ã€‚</p><h3 id="7-2-3-JMMä¸­åŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ"><a href="#7-2-3-JMMä¸­åŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ" class="headerlink" title="7.2.3 JMMä¸­åŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ"></a>7.2.3 JMMä¸­åŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ</h3><p>åœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­ï¼Œæ‰€æœ‰æ“ä½œå®Œå…¨æŒ‰ç…§ç¨‹åºçš„é¡ºåºä¸²è¡Œæ‰§è¡Œã€‚ä½†æ˜¯JMMä¸­ï¼Œä¸´ç•ŒåŒºå†…ï¼ˆåŒæ­¥å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ï¼‰çš„ä»£ç å¯ä»¥å‘ç”Ÿé‡æ’åºï¼ˆä½†ä¸å…è®¸ä¸´ç•ŒåŒºå†…çš„ä»£ç â€œé€ƒé€¸â€åˆ°ä¸´ç•ŒåŒºä¹‹å¤–ï¼Œå› ä¸ºä¼šç ´åé”çš„å†…å­˜è¯­ä¹‰ï¼‰ã€‚</p><p>è™½ç„¶çº¿ç¨‹Aåœ¨ä¸´ç•ŒåŒºåšäº†é‡æ’åºï¼Œä½†æ˜¯å› ä¸ºé”çš„ç‰¹æ€§ï¼Œçº¿ç¨‹Bæ— æ³•è§‚å¯Ÿåˆ°çº¿ç¨‹Aåœ¨ä¸´ç•ŒåŒºçš„é‡æ’åºã€‚è¿™ç§é‡æ’åºæ—¢æé«˜äº†æ‰§è¡Œæ•ˆç‡ï¼Œåˆæ²¡æœ‰æ”¹å˜ç¨‹åºçš„æ‰§è¡Œç»“æœã€‚</p><p>åŒæ—¶ï¼ŒJMMä¼šåœ¨é€€å‡ºä¸´ç•ŒåŒºå’Œè¿›å…¥ä¸´ç•ŒåŒºåšç‰¹æ®Šçš„å¤„ç†ï¼Œä½¿å¾—åœ¨ä¸´ç•ŒåŒºå†…ç¨‹åºè·å¾—ä¸é¡ºåºä¸€è‡´æ€§æ¨¡å‹ç›¸åŒçš„å†…å­˜è§†å›¾ã€‚</p><p><strong>ç”±æ­¤å¯è§ï¼ŒJMMçš„å…·ä½“å®ç°æ–¹é’ˆæ˜¯ï¼šåœ¨ä¸æ”¹å˜ï¼ˆæ­£ç¡®åŒæ­¥çš„ï¼‰ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½é‡ä¸ºç¼–è¯‘æœŸå’Œå¤„ç†å™¨çš„ä¼˜åŒ–æ‰“å¼€æ–¹ä¾¿ä¹‹é—¨</strong>ã€‚</p><h3 id="7-2-4-JMMä¸­æœªåŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ"><a href="#7-2-4-JMMä¸­æœªåŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ" class="headerlink" title="7.2.4 JMMä¸­æœªåŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ"></a>7.2.4 JMMä¸­æœªåŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœ</h3><p>å¯¹äºæœªåŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºï¼ŒJMMåªæä¾›<strong>æœ€å°å®‰å…¨æ€§</strong>ï¼šçº¿ç¨‹è¯»å–åˆ°çš„å€¼ï¼Œè¦ä¹ˆæ˜¯ä¹‹å‰æŸä¸ªçº¿ç¨‹å†™å…¥çš„å€¼ï¼Œè¦ä¹ˆæ˜¯é»˜è®¤å€¼ï¼Œä¸ä¼šæ— ä¸­ç”Ÿæœ‰ã€‚</p><p>ä¸ºäº†å®ç°è¿™ä¸ªå®‰å…¨æ€§ï¼ŒJVMåœ¨å †ä¸Šåˆ†é…å¯¹è±¡æ—¶ï¼Œé¦–å…ˆä¼šå¯¹å†…å­˜ç©ºé—´æ¸…é›¶ï¼Œç„¶åæ‰ä¼šåœ¨ä¸Šé¢åˆ†é…å¯¹è±¡ï¼ˆè¿™ä¸¤ä¸ªæ“ä½œæ˜¯åŒæ­¥çš„ï¼‰ã€‚</p><p><strong>JMMæ²¡æœ‰ä¿è¯æœªåŒæ­¥ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§ä¸­æ‰§è¡Œç»“æœä¸€è‡´ã€‚å› ä¸ºå¦‚æœè¦ä¿è¯æ‰§è¡Œç»“æœä¸€è‡´ï¼Œé‚£ä¹ˆJMMéœ€è¦ç¦æ­¢å¤§é‡çš„ä¼˜åŒ–ï¼Œå¯¹ç¨‹åºçš„æ‰§è¡Œæ€§èƒ½ä¼šäº§ç”Ÿå¾ˆå¤§çš„å½±å“ã€‚</strong></p><p>æœªåŒæ­¥ç¨‹åºåœ¨JMMå’Œé¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­çš„æ‰§è¡Œç‰¹æ€§æœ‰å¦‚ä¸‹å·®å¼‚ï¼š 1. é¡ºåºä¸€è‡´æ€§ä¿è¯å•çº¿ç¨‹å†…çš„æ“ä½œä¼šæŒ‰ç¨‹åºçš„é¡ºåºæ‰§è¡Œï¼›JMMä¸ä¿è¯å•çº¿ç¨‹å†…çš„æ“ä½œä¼šæŒ‰ç¨‹åºçš„é¡ºåºæ‰§è¡Œã€‚ï¼ˆå› ä¸ºé‡æ’åºï¼Œä½†æ˜¯JMMä¿è¯å•çº¿ç¨‹ä¸‹çš„é‡æ’åºä¸å½±å“æ‰§è¡Œç»“æœï¼‰ 2. é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¿è¯æ‰€æœ‰çº¿ç¨‹åªèƒ½çœ‹åˆ°ä¸€è‡´çš„æ“ä½œæ‰§è¡Œé¡ºåºï¼Œè€ŒJMMä¸ä¿è¯æ‰€æœ‰çº¿ç¨‹èƒ½çœ‹åˆ°ä¸€è‡´çš„æ“ä½œæ‰§è¡Œé¡ºåºã€‚ï¼ˆå› ä¸ºJMMä¸ä¿è¯æ‰€æœ‰æ“ä½œç«‹å³å¯è§ï¼‰ 3. JMMä¸ä¿è¯å¯¹64ä½çš„longå‹å’Œdoubleå‹å˜é‡çš„å†™æ“ä½œå…·æœ‰åŸå­æ€§ï¼Œè€Œé¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¿è¯å¯¹æ‰€æœ‰çš„å†…å­˜è¯»å†™æ“ä½œéƒ½å…·æœ‰åŸå­æ€§ã€‚</p><h2 id="7-3-happens-before"><a href="#7-3-happens-before" class="headerlink" title="7.3 happens-before"></a>7.3 happens-before</h2><h3 id="7-3-1-ä»€ä¹ˆæ˜¯happens-before"><a href="#7-3-1-ä»€ä¹ˆæ˜¯happens-before" class="headerlink" title="7.3.1 ä»€ä¹ˆæ˜¯happens-before?"></a>7.3.1 ä»€ä¹ˆæ˜¯happens-before?</h3><p>ä¸€æ–¹é¢ï¼Œç¨‹åºå‘˜éœ€è¦JMMæä¾›ä¸€ä¸ªå¼ºçš„å†…å­˜æ¨¡å‹æ¥ç¼–å†™ä»£ç ï¼›å¦ä¸€æ–¹é¢ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸Œæœ›JMMå¯¹å®ƒä»¬çš„æŸç¼šè¶Šå°‘è¶Šå¥½ï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥æœ€å¯èƒ½å¤šçš„åšä¼˜åŒ–æ¥æé«˜æ€§èƒ½ï¼Œå¸Œæœ›çš„æ˜¯ä¸€ä¸ªå¼±çš„å†…å­˜æ¨¡å‹ã€‚</p><p>JMMè€ƒè™‘äº†è¿™ä¸¤ç§éœ€æ±‚ï¼Œå¹¶ä¸”æ‰¾åˆ°äº†å¹³è¡¡ç‚¹ï¼Œå¯¹ç¼–è¯‘å™¨å’Œå¤„ç†å™¨æ¥è¯´ï¼Œ<strong>åªè¦ä¸æ”¹å˜ç¨‹åºçš„æ‰§è¡Œç»“æœï¼ˆå•çº¿ç¨‹ç¨‹åºå’Œæ­£ç¡®åŒæ­¥äº†çš„å¤šçº¿ç¨‹ç¨‹åºï¼‰ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨æ€ä¹ˆä¼˜åŒ–éƒ½è¡Œã€‚</strong></p><p>è€Œå¯¹äºç¨‹åºå‘˜ï¼ŒJMMæä¾›äº†<strong>happens-beforeè§„åˆ™</strong>ï¼ˆJSR-133è§„èŒƒï¼‰ï¼Œæ»¡è¶³äº†ç¨‹åºå‘˜çš„éœ€æ±‚â€”â€”<strong>ç®€å•æ˜“æ‡‚ï¼Œå¹¶ä¸”æä¾›äº†è¶³å¤Ÿå¼ºçš„å†…å­˜å¯è§æ€§ä¿è¯ã€‚</strong>æ¢è¨€ä¹‹ï¼Œç¨‹åºå‘˜åªè¦éµå¾ªhappens-beforeè§„åˆ™ï¼Œé‚£ä»–å†™çš„ç¨‹åºå°±èƒ½ä¿è¯åœ¨JMMä¸­å…·æœ‰å¼ºçš„å†…å­˜å¯è§æ€§ã€‚</p><p>JMMä½¿ç”¨happens-beforeçš„æ¦‚å¿µæ¥å®šåˆ¶ä¸¤ä¸ªæ“ä½œä¹‹é—´çš„æ‰§è¡Œé¡ºåºã€‚è¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹ä»¥å†…ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸åŒçš„çº¿ç¨‹ä¹‹é—´ã€‚å› æ­¤ï¼ŒJMMå¯ä»¥é€šè¿‡happens-beforeå…³ç³»å‘ç¨‹åºå‘˜æä¾›è·¨çº¿ç¨‹çš„å†…å­˜å¯è§æ€§ä¿è¯ã€‚</p><p>happens-beforeå…³ç³»çš„å®šä¹‰å¦‚ä¸‹ï¼š 1. å¦‚æœä¸€ä¸ªæ“ä½œhappens-beforeå¦ä¸€ä¸ªæ“ä½œï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªæ“ä½œçš„æ‰§è¡Œç»“æœå°†å¯¹ç¬¬äºŒä¸ªæ“ä½œå¯è§ï¼Œè€Œä¸”ç¬¬ä¸€ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºæ’åœ¨ç¬¬äºŒä¸ªæ“ä½œä¹‹å‰ã€‚ 2. <strong>ä¸¤ä¸ªæ“ä½œä¹‹é—´å­˜åœ¨happens-beforeå…³ç³»ï¼Œå¹¶ä¸æ„å‘³ç€Javaå¹³å°çš„å…·ä½“å®ç°å¿…é¡»è¦æŒ‰ç…§happens-beforeå…³ç³»æŒ‡å®šçš„é¡ºåºæ¥æ‰§è¡Œã€‚å¦‚æœé‡æ’åºä¹‹åçš„æ‰§è¡Œç»“æœï¼Œä¸æŒ‰happens-beforeå…³ç³»æ¥æ‰§è¡Œçš„ç»“æœä¸€è‡´ï¼Œé‚£ä¹ˆJMMä¹Ÿå…è®¸è¿™æ ·çš„é‡æ’åºã€‚</strong></p><p>happens-beforeå…³ç³»æœ¬è´¨ä¸Šå’Œas-if-serialè¯­ä¹‰æ˜¯ä¸€å›äº‹ã€‚</p><p>as-if-serialè¯­ä¹‰ä¿è¯å•çº¿ç¨‹å†…é‡æ’åºåçš„æ‰§è¡Œç»“æœå’Œç¨‹åºä»£ç æœ¬èº«åº”æœ‰çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œhappens-beforeå…³ç³»ä¿è¯æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¢«é‡æ’åºæ”¹å˜ã€‚</p><p>æ€»ä¹‹ï¼Œ<strong>å¦‚æœæ“ä½œA happens-beforeæ“ä½œBï¼Œé‚£ä¹ˆæ“ä½œAåœ¨å†…å­˜ä¸Šæ‰€åšçš„æ“ä½œå¯¹æ“ä½œBéƒ½æ˜¯å¯è§çš„ï¼Œä¸ç®¡å®ƒä»¬åœ¨ä¸åœ¨ä¸€ä¸ªçº¿ç¨‹ã€‚</strong></p><h3 id="7-3-2-å¤©ç„¶çš„happens-beforeå…³ç³»"><a href="#7-3-2-å¤©ç„¶çš„happens-beforeå…³ç³»" class="headerlink" title="7.3.2 å¤©ç„¶çš„happens-beforeå…³ç³»"></a>7.3.2 å¤©ç„¶çš„happens-beforeå…³ç³»</h3><p>åœ¨Javaä¸­ï¼Œæœ‰ä»¥ä¸‹å¤©ç„¶çš„happens-beforeå…³ç³»ï¼š</p><ul><li>ç¨‹åºé¡ºåºè§„åˆ™ï¼šä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ¯ä¸€ä¸ªæ“ä½œï¼Œhappens-beforeäºè¯¥çº¿ç¨‹ä¸­çš„ä»»æ„åç»­æ“ä½œã€‚</li><li>ç›‘è§†å™¨é”è§„åˆ™ï¼šå¯¹ä¸€ä¸ªé”çš„è§£é”ï¼Œhappens-beforeäºéšåå¯¹è¿™ä¸ªé”çš„åŠ é”ã€‚</li><li>volatileå˜é‡è§„åˆ™ï¼šå¯¹ä¸€ä¸ªvolatileåŸŸçš„å†™ï¼Œhappens-beforeäºä»»æ„åç»­å¯¹è¿™ä¸ªvolatileåŸŸçš„è¯»ã€‚</li><li>ä¼ é€’æ€§ï¼šå¦‚æœA happens-before Bï¼Œä¸”B happens-before Cï¼Œé‚£ä¹ˆA happens-before Cã€‚</li><li>startè§„åˆ™ï¼šå¦‚æœçº¿ç¨‹Aæ‰§è¡Œæ“ä½œThreadB.start()å¯åŠ¨çº¿ç¨‹Bï¼Œé‚£ä¹ˆAçº¿ç¨‹çš„ThreadB.startï¼ˆï¼‰æ“ä½œhappens-beforeäºçº¿ç¨‹Bä¸­çš„ä»»æ„æ“ä½œã€</li><li>joinè§„åˆ™ï¼šå¦‚æœçº¿ç¨‹Aæ‰§è¡Œæ“ä½œThreadB.joinï¼ˆï¼‰å¹¶æˆåŠŸè¿”å›ï¼Œé‚£ä¹ˆçº¿ç¨‹Bä¸­çš„ä»»æ„æ“ä½œhappens-beforeäºçº¿ç¨‹Aä»ThreadB.join()æ“ä½œæˆåŠŸè¿”å›ã€‚</li></ul><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// Aæ“ä½œ</span><br><br><span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; <span class="hljs-comment">// Bæ“ä½œ</span><br><br><span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> a + b;<span class="hljs-comment">// C æ“ä½œ</span><br><br>System.out.println(sum);<br><br><br></code></pre></td></tr></table></figure><p>æ ¹æ®ä»¥ä¸Šä»‹ç»çš„happens-beforeè§„åˆ™ï¼Œå‡å¦‚åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆä¸éš¾å¾—å‡ºï¼š1</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl"><span class="hljs-meta">1&gt; </span>A happens-before B <br><br><span class="hljs-meta">2&gt; </span>B happens-before C <br><br><span class="hljs-meta">3&gt; </span>A happens-before C<br></code></pre></td></tr></table></figure><p>Copied!</p><p>æ³¨æ„ï¼ŒçœŸæ­£åœ¨æ‰§è¡ŒæŒ‡ä»¤çš„æ—¶å€™ï¼Œå…¶å®JVMæœ‰å¯èƒ½å¯¹æ“ä½œA &amp; Bè¿›è¡Œé‡æ’åºï¼Œå› ä¸ºæ— è®ºå…ˆæ‰§è¡ŒAè¿˜æ˜¯Bï¼Œä»–ä»¬éƒ½å¯¹å¯¹æ–¹æ˜¯å¯è§çš„ï¼Œå¹¶ä¸”ä¸å½±å“æ‰§è¡Œç»“æœã€‚</p><p>å¦‚æœè¿™é‡Œå‘ç”Ÿäº†é‡æ’åºï¼Œè¿™åœ¨è§†è§‰ä¸Šè¿èƒŒäº†happens-beforeåŸåˆ™ï¼Œä½†æ˜¯JMMæ˜¯å…è®¸è¿™æ ·çš„é‡æ’åºçš„ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åªå…³å¿ƒhappens-beforeè§„åˆ™ï¼Œä¸ç”¨å…³å¿ƒJVMåˆ°åº•æ˜¯æ€æ ·æ‰§è¡Œçš„ã€‚åªè¦ç¡®å®šæ“ä½œA happens-beforeæ“ä½œBå°±è¡Œäº†ã€‚</p><p>é‡æ’åºæœ‰ä¸¤ç±»ï¼ŒJMMå¯¹è¿™ä¸¤ç±»é‡æ’åºæœ‰ä¸åŒçš„ç­–ç•¥ï¼š</p><ul><li>ä¼šæ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„é‡æ’åºï¼Œæ¯”å¦‚ A -&gt; Cï¼ŒJMMè¦æ±‚ç¼–è¯‘å™¨å’Œå¤„ç†å™¨éƒ½ä¸è®¸ç¦æ­¢è¿™ç§é‡æ’åºã€‚</li><li>ä¸ä¼šæ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„é‡æ’åºï¼Œæ¯”å¦‚ A -&gt; Bï¼ŒJMMå¯¹ç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸åšè¦æ±‚ï¼Œå…è®¸è¿™ç§é‡æ’åºã€‚</li></ul><p><strong>å‚è€ƒèµ„æ–™</strong></p><ul><li>ã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹</li></ul><h2 id="8-1-å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ"><a href="#8-1-å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="8.1 å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ"></a>8.1 å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ</h2><p>åœ¨ä»‹ç»volatileä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾åŠä»‹ç»å‡ ä¸ªåŸºæœ¬çš„æ¦‚å¿µã€‚</p><h3 id="8-1-1-å†…å­˜å¯è§æ€§"><a href="#8-1-1-å†…å­˜å¯è§æ€§" class="headerlink" title="8.1.1 å†…å­˜å¯è§æ€§"></a>8.1.1 å†…å­˜å¯è§æ€§</h3><p>åœ¨Javaå†…å­˜æ¨¡å‹é‚£ä¸€ç« æˆ‘ä»¬ä»‹ç»äº†JMMæœ‰ä¸€ä¸ªä¸»å†…å­˜ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±ç§æœ‰çš„å·¥ä½œå†…å­˜ï¼Œå·¥ä½œå†…å­˜ä¸­ä¿å­˜äº†ä¸€äº›å˜é‡åœ¨ä¸»å†…å­˜çš„æ‹·è´ã€‚</p><p><strong>å†…å­˜å¯è§æ€§ï¼ŒæŒ‡çš„æ˜¯çº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¯»å–åˆ°è¿™ä¸ªä¿®æ”¹åçš„å€¼</strong>ã€‚</p><h3 id="8-1-2-é‡æ’åº"><a href="#8-1-2-é‡æ’åº" class="headerlink" title="8.1.2 é‡æ’åº"></a>8.1.2 é‡æ’åº</h3><p>ä¸ºä¼˜åŒ–ç¨‹åºæ€§èƒ½ï¼Œå¯¹åŸæœ‰çš„æŒ‡ä»¤æ‰§è¡Œé¡ºåºè¿›è¡Œä¼˜åŒ–é‡æ–°æ’åºã€‚é‡æ’åºå¯èƒ½å‘ç”Ÿåœ¨å¤šä¸ªé˜¶æ®µï¼Œæ¯”å¦‚ç¼–è¯‘é‡æ’åºã€CPUé‡æ’åºç­‰ã€‚</p><h3 id="8-1-3-happens-beforeè§„åˆ™"><a href="#8-1-3-happens-beforeè§„åˆ™" class="headerlink" title="8.1.3 happens-beforeè§„åˆ™"></a>8.1.3 happens-beforeè§„åˆ™</h3><p>æ˜¯ä¸€ä¸ªç»™ç¨‹åºå‘˜ä½¿ç”¨çš„è§„åˆ™ï¼Œåªè¦ç¨‹åºå‘˜åœ¨å†™ä»£ç çš„æ—¶å€™éµå¾ªhappens-beforeè§„åˆ™ï¼ŒJVMå°±èƒ½ä¿è¯æŒ‡ä»¤åœ¨å¤šçº¿ç¨‹ä¹‹é—´çš„é¡ºåºæ€§ç¬¦åˆç¨‹åºå‘˜çš„é¢„æœŸã€‚</p><h2 id="8-2-volatileçš„å†…å­˜è¯­ä¹‰"><a href="#8-2-volatileçš„å†…å­˜è¯­ä¹‰" class="headerlink" title="8.2 volatileçš„å†…å­˜è¯­ä¹‰"></a>8.2 volatileçš„å†…å­˜è¯­ä¹‰</h2><p>åœ¨Javaä¸­ï¼Œvolatileå…³é”®å­—æœ‰ç‰¹æ®Šçš„å†…å­˜è¯­ä¹‰ã€‚volatileä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ul><li>ä¿è¯å˜é‡çš„<strong>å†…å­˜å¯è§æ€§</strong></li><li>ç¦æ­¢volatileå˜é‡ä¸æ™®é€šå˜é‡<strong>é‡æ’åº</strong>ï¼ˆJSR133æå‡ºï¼ŒJava 5 å¼€å§‹æ‰æœ‰è¿™ä¸ªâ€œå¢å¼ºçš„volatileå†…å­˜è¯­ä¹‰â€ï¼‰</li></ul><h3 id="8-2-1-å†…å­˜å¯è§æ€§"><a href="#8-2-1-å†…å­˜å¯è§æ€§" class="headerlink" title="8.2.1 å†…å­˜å¯è§æ€§"></a>8.2.1 å†…å­˜å¯è§æ€§</h3><p>ä»¥ä¸€æ®µç¤ºä¾‹ä»£ç å¼€å§‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VolatileExample</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writer</span><span class="hljs-params">()</span> &#123;<br>        a = <span class="hljs-number">1</span>; <span class="hljs-comment">// step 1</span><br>        flag = <span class="hljs-literal">true</span>; <span class="hljs-comment">// step 2</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reader</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (flag) &#123; <span class="hljs-comment">// step 3</span><br>            System.out.println(a); <span class="hljs-comment">// step 4</span><br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<code>volatile</code>å…³é”®å­—ä¿®é¥°äº†ä¸€ä¸ª<code>boolean</code>ç±»å‹çš„å˜é‡<code>flag</code>ã€‚</p><p>æ‰€è°“å†…å­˜å¯è§æ€§ï¼ŒæŒ‡çš„æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹å¯¹<code>volatile</code>ä¿®é¥°çš„å˜é‡è¿›è¡Œ<strong>å†™æ“ä½œ</strong>ï¼ˆæ¯”å¦‚step 2ï¼‰æ—¶ï¼ŒJMMä¼šç«‹å³æŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ä¸­çš„å…±äº«å˜é‡çš„å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼›å½“ä¸€ä¸ªçº¿ç¨‹å¯¹<code>volatile</code>ä¿®é¥°çš„å˜é‡è¿›è¡Œ<strong>è¯»æ“ä½œ</strong>ï¼ˆæ¯”å¦‚step 3ï¼‰æ—¶ï¼ŒJMMä¼šæŠŠç«‹å³è¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ç½®ä¸ºæ— æ•ˆï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–å…±äº«å˜é‡çš„å€¼ã€‚</p><blockquote><p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œvolatileä¸é”å…·æœ‰ç›¸åŒçš„å†…å­˜æ•ˆæœï¼Œvolatileå˜é‡çš„å†™å’Œé”çš„é‡Šæ”¾å…·æœ‰ç›¸åŒçš„å†…å­˜è¯­ä¹‰ï¼Œvolatileå˜é‡çš„è¯»å’Œé”çš„è·å–å…·æœ‰ç›¸åŒçš„å†…å­˜è¯­ä¹‰ã€‚</p></blockquote><p>å‡è®¾åœ¨æ—¶é—´çº¿ä¸Šï¼Œçº¿ç¨‹Aå…ˆè‡ªè¡Œæ–¹æ³•<code>writer</code>æ–¹æ³•ï¼Œçº¿ç¨‹Båæ‰§è¡Œ<code>reader</code>æ–¹æ³•ã€‚é‚£å¿…ç„¶ä¼šæœ‰ä¸‹å›¾ï¼š</p><p>Could not load image</p><p>volatileå†…å­˜ç¤ºæ„å›¾</p><p>è€Œå¦‚æœ<code>flag</code>å˜é‡<strong>æ²¡æœ‰</strong>ç”¨<code>volatile</code>ä¿®é¥°ï¼Œåœ¨step 2ï¼Œçº¿ç¨‹Açš„æœ¬åœ°å†…å­˜é‡Œé¢çš„å˜é‡å°±ä¸ä¼šç«‹å³æ›´æ–°åˆ°ä¸»å†…å­˜ï¼Œé‚£éšåçº¿ç¨‹Bä¹ŸåŒæ ·ä¸ä¼šå»ä¸»å†…å­˜æ‹¿æœ€æ–°çš„å€¼ï¼Œä»ç„¶ä½¿ç”¨çº¿ç¨‹Bæœ¬åœ°å†…å­˜ç¼“å­˜çš„å˜é‡çš„å€¼<code>a = 0ï¼Œflag = false</code>ã€‚</p><h3 id="8-2-1-ç¦æ­¢é‡æ’åº"><a href="#8-2-1-ç¦æ­¢é‡æ’åº" class="headerlink" title="8.2.1 ç¦æ­¢é‡æ’åº"></a>8.2.1 ç¦æ­¢é‡æ’åº</h3><p>åœ¨JSR-133ä¹‹å‰çš„æ—§çš„Javaå†…å­˜æ¨¡å‹ä¸­ï¼Œæ˜¯å…è®¸volatileå˜é‡ä¸æ™®é€šå˜é‡é‡æ’åºçš„ã€‚é‚£ä¸Šé¢çš„æ¡ˆä¾‹ä¸­ï¼Œå¯èƒ½å°±ä¼šè¢«é‡æ’åºæˆä¸‹åˆ—æ—¶åºæ¥æ‰§è¡Œï¼š</p><ol><li>çº¿ç¨‹Aå†™volatileå˜é‡ï¼Œstep 2ï¼Œè®¾ç½®flagä¸ºtrueï¼›</li><li>çº¿ç¨‹Bè¯»åŒä¸€ä¸ªvolatileï¼Œstep 3ï¼Œè¯»å–åˆ°flagä¸ºtrueï¼›</li><li>çº¿ç¨‹Bè¯»æ™®é€šå˜é‡ï¼Œstep 4ï¼Œè¯»å–åˆ° a &#x3D; 0ï¼›</li><li>çº¿ç¨‹Aä¿®æ”¹æ™®é€šå˜é‡ï¼Œstep 1ï¼Œè®¾ç½® a &#x3D; 1ï¼›</li></ol><p>å¯è§ï¼Œå¦‚æœvolatileå˜é‡ä¸æ™®é€šå˜é‡å‘ç”Ÿäº†é‡æ’åºï¼Œè™½ç„¶volatileå˜é‡èƒ½ä¿è¯å†…å­˜å¯è§æ€§ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´æ™®é€šå˜é‡è¯»å–é”™è¯¯ã€‚</p><p>æ‰€ä»¥åœ¨æ—§çš„å†…å­˜æ¨¡å‹ä¸­ï¼Œvolatileçš„å†™-è¯»å°±ä¸èƒ½ä¸é”çš„é‡Šæ”¾-è·å–å…·æœ‰ç›¸åŒçš„å†…å­˜è¯­ä¹‰äº†ã€‚ä¸ºäº†æä¾›ä¸€ç§æ¯”é”æ›´è½»é‡çº§çš„<strong>çº¿ç¨‹é—´çš„é€šä¿¡æœºåˆ¶</strong>ï¼Œ<strong>JSR-133</strong>ä¸“å®¶ç»„å†³å®šå¢å¼ºvolatileçš„å†…å­˜è¯­ä¹‰ï¼šä¸¥æ ¼é™åˆ¶ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹volatileå˜é‡ä¸æ™®é€šå˜é‡çš„é‡æ’åºã€‚</p><p>ç¼–è¯‘å™¨è¿˜å¥½è¯´ï¼ŒJVMæ˜¯æ€ä¹ˆè¿˜èƒ½é™åˆ¶å¤„ç†å™¨çš„é‡æ’åºçš„å‘¢ï¼Ÿå®ƒæ˜¯é€šè¿‡<strong>å†…å­˜å±éšœ</strong>æ¥å®ç°çš„ã€‚</p><p>ä»€ä¹ˆæ˜¯å†…å­˜å±éšœï¼Ÿç¡¬ä»¶å±‚é¢ï¼Œå†…å­˜å±éšœåˆ†ä¸¤ç§ï¼šè¯»å±éšœï¼ˆLoad Barrierï¼‰å’Œå†™å±éšœï¼ˆStore Barrierï¼‰ã€‚å†…å­˜å±éšœæœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p><ol><li>é˜»æ­¢å±éšœä¸¤ä¾§çš„æŒ‡ä»¤é‡æ’åºï¼›</li><li>å¼ºåˆ¶æŠŠå†™ç¼“å†²åŒº&#x2F;é«˜é€Ÿç¼“å­˜ä¸­çš„è„æ•°æ®ç­‰å†™å›ä¸»å†…å­˜ï¼Œæˆ–è€…è®©ç¼“å­˜ä¸­ç›¸åº”çš„æ•°æ®å¤±æ•ˆã€‚</li></ol><blockquote><p>æ³¨æ„è¿™é‡Œçš„ç¼“å­˜ä¸»è¦æŒ‡çš„æ˜¯CPUç¼“å­˜ï¼Œå¦‚L1ï¼ŒL2ç­‰</p></blockquote><p>ç¼–è¯‘å™¨åœ¨<strong>ç”Ÿæˆå­—èŠ‚ç æ—¶</strong>ï¼Œä¼šåœ¨æŒ‡ä»¤åºåˆ—ä¸­æ’å…¥å†…å­˜å±éšœæ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºã€‚ç¼–è¯‘å™¨é€‰æ‹©äº†ä¸€ä¸ª<strong>æ¯”è¾ƒä¿å®ˆçš„JMMå†…å­˜å±éšœæ’å…¥ç­–ç•¥</strong>ï¼Œè¿™æ ·å¯ä»¥ä¿è¯åœ¨ä»»ä½•å¤„ç†å™¨å¹³å°ï¼Œä»»ä½•ç¨‹åºä¸­éƒ½èƒ½å¾—åˆ°æ­£ç¡®çš„volatileå†…å­˜è¯­ä¹‰ã€‚è¿™ä¸ªç­–ç•¥æ˜¯ï¼š</p><ul><li>åœ¨æ¯ä¸ªvolatileå†™æ“ä½œå‰æ’å…¥ä¸€ä¸ªStoreStoreå±éšœï¼›</li><li>åœ¨æ¯ä¸ªvolatileå†™æ“ä½œåæ’å…¥ä¸€ä¸ªStoreLoadå±éšœï¼›</li><li>åœ¨æ¯ä¸ªvolatileè¯»æ“ä½œåæ’å…¥ä¸€ä¸ªLoadLoadå±éšœï¼›</li><li>åœ¨æ¯ä¸ªvolatileè¯»æ“ä½œåå†æ’å…¥ä¸€ä¸ªLoadStoreå±éšœã€‚</li></ul><p>å†…å­˜å±éšœ</p><blockquote><p>å†é€ä¸ªè§£é‡Šä¸€ä¸‹è¿™å‡ ä¸ªå±éšœã€‚æ³¨ï¼šä¸‹è¿°Loadä»£è¡¨è¯»æ“ä½œï¼ŒStoreä»£è¡¨å†™æ“ä½œ</p><p><strong>LoadLoadå±éšœ</strong>ï¼šå¯¹äºè¿™æ ·çš„è¯­å¥Load1; LoadLoad; Load2ï¼Œåœ¨Load2åŠåç»­è¯»å–æ“ä½œè¦è¯»å–çš„æ•°æ®è¢«è®¿é—®å‰ï¼Œä¿è¯Load1è¦è¯»å–çš„æ•°æ®è¢«è¯»å–å®Œæ¯•ã€‚ <strong>StoreStoreå±éšœ</strong>ï¼šå¯¹äºè¿™æ ·çš„è¯­å¥Store1; StoreStore; Store2ï¼Œåœ¨Store2åŠåç»­å†™å…¥æ“ä½œæ‰§è¡Œå‰ï¼Œä¿è¯Store1çš„å†™å…¥æ“ä½œå¯¹å…¶å®ƒå¤„ç†å™¨å¯è§ã€‚ <strong>LoadStoreå±éšœ</strong>ï¼šå¯¹äºè¿™æ ·çš„è¯­å¥Load1; LoadStore; Store2ï¼Œåœ¨Store2åŠåç»­å†™å…¥æ“ä½œè¢«åˆ·å‡ºå‰ï¼Œä¿è¯Load1è¦è¯»å–çš„æ•°æ®è¢«è¯»å–å®Œæ¯•ã€‚ <strong>StoreLoadå±éšœ</strong>ï¼šå¯¹äºè¿™æ ·çš„è¯­å¥Store1; StoreLoad; Load2ï¼Œåœ¨Load2åŠåç»­æ‰€æœ‰è¯»å–æ“ä½œæ‰§è¡Œå‰ï¼Œä¿è¯Store1çš„å†™å…¥å¯¹æ‰€æœ‰å¤„ç†å™¨å¯è§ã€‚å®ƒçš„å¼€é”€æ˜¯å››ç§å±éšœä¸­æœ€å¤§çš„ï¼ˆå†²åˆ·å†™ç¼“å†²å™¨ï¼Œæ¸…ç©ºæ— æ•ˆåŒ–é˜Ÿåˆ—ï¼‰ã€‚åœ¨å¤§å¤šæ•°å¤„ç†å™¨çš„å®ç°ä¸­ï¼Œè¿™ä¸ªå±éšœæ˜¯ä¸ªä¸‡èƒ½å±éšœï¼Œå…¼å…·å…¶å®ƒä¸‰ç§å†…å­˜å±éšœçš„åŠŸèƒ½</p></blockquote><p>å¯¹äºè¿ç»­å¤šä¸ªvolatileå˜é‡è¯»æˆ–è€…è¿ç»­å¤šä¸ªvolatileå˜é‡å†™ï¼Œç¼–è¯‘å™¨åšäº†ä¸€å®šçš„ä¼˜åŒ–æ¥æé«˜æ€§èƒ½ï¼Œæ¯”å¦‚ï¼š</p><blockquote><p>ç¬¬ä¸€ä¸ªvolatileè¯»;</p><p>LoadLoadå±éšœï¼›</p><p>ç¬¬äºŒä¸ªvolatileè¯»ï¼›</p><p>LoadStoreå±éšœ</p></blockquote><p>å†ä»‹ç»ä¸€ä¸‹volatileä¸æ™®é€šå˜é‡çš„é‡æ’åºè§„åˆ™:</p><ol><li>å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯volatileè¯»ï¼Œé‚£æ— è®ºç¬¬äºŒä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›</li><li>å¦‚æœç¬¬äºŒä¸ªæ“ä½œæ˜¯volatileå†™ï¼Œé‚£æ— è®ºç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸èƒ½é‡æ’åºï¼›</li><li>å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ˜¯volatileå†™ï¼Œç¬¬äºŒä¸ªæ“ä½œæ˜¯volatileè¯»ï¼Œé‚£ä¸èƒ½é‡æ’åºã€‚</li></ol><p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åœ¨æ¡ˆä¾‹ä¸­step 1ï¼Œæ˜¯æ™®é€šå˜é‡çš„å†™ï¼Œstep 2æ˜¯volatileå˜é‡çš„å†™ï¼Œé‚£ç¬¦åˆç¬¬2ä¸ªè§„åˆ™ï¼Œè¿™ä¸¤ä¸ªstepsä¸èƒ½é‡æ’åºã€‚è€Œstep 3æ˜¯volatileå˜é‡è¯»ï¼Œstep 4æ˜¯æ™®é€šå˜é‡è¯»ï¼Œç¬¦åˆç¬¬1ä¸ªè§„åˆ™ï¼ŒåŒæ ·ä¸èƒ½é‡æ’åºã€‚</p><p>ä½†å¦‚æœæ˜¯ä¸‹åˆ—æƒ…å†µï¼šç¬¬ä¸€ä¸ªæ“ä½œæ˜¯æ™®é€šå˜é‡è¯»ï¼Œç¬¬äºŒä¸ªæ“ä½œæ˜¯volatileå˜é‡è¯»ï¼Œé‚£æ˜¯å¯ä»¥é‡æ’åºçš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å£°æ˜å˜é‡</span><br><span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// å£°æ˜æ™®é€šå˜é‡</span><br><span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// å£°æ˜volatileå˜é‡</span><br><br><span class="hljs-comment">// ä»¥ä¸‹ä¸¤ä¸ªå˜é‡çš„è¯»æ“ä½œæ˜¯å¯ä»¥é‡æ’åºçš„</span><br><span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> a; <span class="hljs-comment">// æ™®é€šå˜é‡è¯»</span><br><span class="hljs-type">boolean</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> flag; <span class="hljs-comment">// volatileå˜é‡è¯»</span><br></code></pre></td></tr></table></figure><h2 id="8-3-volatileçš„ç”¨é€”"><a href="#8-3-volatileçš„ç”¨é€”" class="headerlink" title="8.3 volatileçš„ç”¨é€”"></a>8.3 volatileçš„ç”¨é€”</h2><p>ä»volatileçš„å†…å­˜è¯­ä¹‰ä¸Šæ¥çœ‹ï¼Œvolatileå¯ä»¥ä¿è¯å†…å­˜å¯è§æ€§ä¸”ç¦æ­¢é‡æ’åºã€‚</p><p>åœ¨ä¿è¯å†…å­˜å¯è§æ€§è¿™ä¸€ç‚¹ä¸Šï¼Œvolatileæœ‰ç€ä¸é”ç›¸åŒçš„å†…å­˜è¯­ä¹‰ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸ºä¸€ä¸ªâ€œè½»é‡çº§â€çš„é”æ¥ä½¿ç”¨ã€‚ä½†ç”±äºvolatileä»…ä»…ä¿è¯å¯¹å•ä¸ªvolatileå˜é‡çš„è¯»&#x2F;å†™å…·æœ‰åŸå­æ€§ï¼Œè€Œé”å¯ä»¥ä¿è¯æ•´ä¸ª<strong>ä¸´ç•ŒåŒºä»£ç </strong>çš„æ‰§è¡Œå…·æœ‰åŸå­æ€§ã€‚æ‰€ä»¥<strong>åœ¨åŠŸèƒ½ä¸Šï¼Œé”æ¯”volatileæ›´å¼ºå¤§ï¼›åœ¨æ€§èƒ½ä¸Šï¼Œvolatileæ›´æœ‰ä¼˜åŠ¿</strong>ã€‚</p><p>åœ¨ç¦æ­¢é‡æ’åºè¿™ä¸€ç‚¹ä¸Šï¼Œvolatileä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚æ¯”å¦‚æˆ‘ä»¬ç†Ÿæ‚‰çš„å•ä¾‹æ¨¡å¼ï¼Œå…¶ä¸­æœ‰ä¸€ç§å®ç°æ–¹å¼æ˜¯â€œåŒé‡é”æ£€æŸ¥â€ï¼Œæ¯”å¦‚è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance; <span class="hljs-comment">// ä¸ä½¿ç”¨volatileå…³é”®å­—</span><br>    <br>    <span class="hljs-comment">// åŒé‡é”æ£€éªŒ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// ç¬¬7è¡Œ</span><br>            <span class="hljs-keyword">synchronized</span> (Singleton.class) &#123;<br>                <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) &#123;<br>                    instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>(); <span class="hljs-comment">// ç¬¬10è¡Œ</span><br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœè¿™é‡Œçš„å˜é‡å£°æ˜ä¸ä½¿ç”¨volatileå…³é”®å­—ï¼Œæ˜¯å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯çš„ã€‚å®ƒå¯èƒ½ä¼šè¢«é‡æ’åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>(); <span class="hljs-comment">// ç¬¬10è¡Œ</span><br><br><span class="hljs-comment">// å¯ä»¥åˆ†è§£ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤</span><br><span class="hljs-number">1</span> memory=allocate();<span class="hljs-comment">// åˆ†é…å†…å­˜ ç›¸å½“äºcçš„malloc</span><br><span class="hljs-number">2</span> ctorInstanc(memory) <span class="hljs-comment">//åˆå§‹åŒ–å¯¹è±¡</span><br><span class="hljs-number">3</span> s=memory <span class="hljs-comment">//è®¾ç½®sæŒ‡å‘åˆšåˆ†é…çš„åœ°å€</span><br><br><span class="hljs-comment">// ä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤å¯èƒ½ä¼šè¢«é‡æ’åºä¸º 1-3-2ï¼Œä¹Ÿå°±æ˜¯ï¼š</span><br><span class="hljs-number">1</span> memory=allocate();<span class="hljs-comment">// åˆ†é…å†…å­˜ ç›¸å½“äºcçš„malloc</span><br><span class="hljs-number">3</span> s=memory <span class="hljs-comment">//è®¾ç½®sæŒ‡å‘åˆšåˆ†é…çš„åœ°å€</span><br><span class="hljs-number">2</span> ctorInstanc(memory) <span class="hljs-comment">//åˆå§‹åŒ–å¯¹è±¡</span><br></code></pre></td></tr></table></figure><p>è€Œä¸€æ—¦å‡è®¾å‘ç”Ÿäº†è¿™æ ·çš„é‡æ’åºï¼Œæ¯”å¦‚çº¿ç¨‹Aåœ¨ç¬¬10è¡Œæ‰§è¡Œäº†æ­¥éª¤1å’Œæ­¥éª¤3ï¼Œä½†æ˜¯æ­¥éª¤2è¿˜æ²¡æœ‰æ‰§è¡Œå®Œã€‚è¿™ä¸ªæ—¶å€™çº¿ç¨‹Aæ‰§è¡Œåˆ°äº†ç¬¬7è¡Œï¼Œå®ƒä¼šåˆ¤å®šinstanceä¸ä¸ºç©ºï¼Œç„¶åç›´æ¥è¿”å›äº†ä¸€ä¸ªæœªåˆå§‹åŒ–å®Œæˆçš„instanceï¼</p><p>æ‰€ä»¥JSR-133å¯¹volatileåšäº†å¢å¼ºåï¼Œvolatileçš„ç¦æ­¢é‡æ’åºåŠŸèƒ½è¿˜æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><p><strong>å‚è€ƒèµ„æ–™</strong></p><ul><li><a href="https://blog.csdn.net/u010571316/article/details/64906481">happens-beforeè§„åˆ™å’Œas-if-serialè¯­ä¹‰</a></li><li><a href="https://blog.csdn.net/kg_2012/article/details/79059909">volatileå…³é”®å­—è¯¦è§£</a></li><li><a href="https://www.cnblogs.com/humc/p/5426351.html">Javaå¯è§æ€§æœºåˆ¶çš„åŸç†</a></li><li><a href="https://blog.csdn.net/summerZBH123/article/details/80547516">Volatileå…³é”®å­—ä»‹ç»</a></li><li><a href="https://www.cnblogs.com/zhengbin/p/5654805.html">Javaä¸­Volatileå…³é”®å­—è¯¦è§£</a></li><li><a href="https://blog.csdn.net/yjp198713/article/details/78839698">JVM(åä¸€)JavaæŒ‡ä»¤é‡æ’åº</a></li><li><a href="https://www.cnblogs.com/leefreeman/p/7356030.html">æ·±å…¥ç†è§£JVMï¼ˆäºŒï¼‰â€”â€”å†…å­˜æ¨¡å‹ã€å¯è§æ€§ã€æŒ‡ä»¤é‡æ’åº</a></li><li><a href="https://blog.csdn.net/hqq2023623/article/details/51013468">JMM-volatileä¸å†…å­˜å±éšœ</a></li><li><a href="https://www.jianshu.com/p/ef8de88b1343">å¹¶å‘å…³é”®å­—volatileï¼ˆé‡æ’åºå’Œå†…å­˜å±éšœï¼‰</a></li></ul><h1 id="9-synchronizedä¸é”"><a href="#9-synchronizedä¸é”" class="headerlink" title="9 synchronizedä¸é”"></a>9 synchronizedä¸é”</h1><p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥èŠä¸€èŠJavaå¤šçº¿ç¨‹é‡Œé¢çš„â€œé”â€ã€‚</p><p>é¦–å…ˆéœ€è¦æ˜ç¡®çš„ä¸€ç‚¹æ˜¯ï¼š<strong>Javaå¤šçº¿ç¨‹çš„é”éƒ½æ˜¯åŸºäºå¯¹è±¡çš„</strong>ï¼ŒJavaä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªé”ã€‚</p><p>è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¸¸å¬åˆ°çš„<strong>ç±»é”</strong>å…¶å®ä¹Ÿæ˜¯å¯¹è±¡é”ã€‚</p><p>Javaç±»åªæœ‰ä¸€ä¸ªClasså¯¹è±¡ï¼ˆå¯ä»¥æœ‰å¤šä¸ªå®ä¾‹å¯¹è±¡ï¼Œå¤šä¸ªå®ä¾‹å…±äº«è¿™ä¸ªClasså¯¹è±¡ï¼‰ï¼Œè€ŒClasså¯¹è±¡ä¹Ÿæ˜¯ç‰¹æ®Šçš„Javaå¯¹è±¡ã€‚æ‰€ä»¥æˆ‘ä»¬å¸¸è¯´çš„ç±»é”ï¼Œå…¶å®å°±æ˜¯Classå¯¹è±¡çš„é”ã€‚</p><h2 id="9-1-Synchronizedå…³é”®å­—"><a href="#9-1-Synchronizedå…³é”®å­—" class="headerlink" title="9.1 Synchronizedå…³é”®å­—"></a>9.1 Synchronizedå…³é”®å­—</h2><p>è¯´åˆ°é”ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè°ˆåˆ°<code>synchronized</code>è¿™ä¸ªå…³é”®å­—ã€‚å®ƒç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯â€œåŒæ­¥â€çš„æ„æ€ã€‚</p><p>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨<code>synchronized</code>å…³é”®å­—æ¥ç»™ä¸€æ®µä»£ç æˆ–ä¸€ä¸ªæ–¹æ³•ä¸Šé”ã€‚å®ƒé€šå¸¸æœ‰ä»¥ä¸‹ä¸‰ç§å½¢å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å…³é”®å­—åœ¨å®ä¾‹æ–¹æ³•ä¸Šï¼Œé”ä¸ºå½“å‰å®ä¾‹</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">instanceLock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// code</span><br>&#125;<br><br><span class="hljs-comment">// å…³é”®å­—åœ¨é™æ€æ–¹æ³•ä¸Šï¼Œé”ä¸ºå½“å‰Classå¯¹è±¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">classLock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// code</span><br>&#125;<br><br><span class="hljs-comment">// å…³é”®å­—åœ¨ä»£ç å—ä¸Šï¼Œé”ä¸ºæ‹¬å·é‡Œé¢çš„å¯¹è±¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">blockLock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>    <span class="hljs-keyword">synchronized</span> (o) &#123;<br>        <span class="hljs-comment">// code</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿™é‡Œä»‹ç»ä¸€ä¸‹â€œä¸´ç•ŒåŒºâ€çš„æ¦‚å¿µã€‚æ‰€è°“â€œä¸´ç•ŒåŒºâ€ï¼ŒæŒ‡çš„æ˜¯æŸä¸€å—ä»£ç åŒºåŸŸï¼Œå®ƒåŒä¸€æ—¶åˆ»åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœ<code>synchronized</code>å…³é”®å­—åœ¨æ–¹æ³•ä¸Šï¼Œé‚£ä¸´ç•ŒåŒºå°±æ˜¯æ•´ä¸ªæ–¹æ³•å†…éƒ¨ã€‚è€Œå¦‚æœæ˜¯ä½¿ç”¨synchronizedä»£ç å—ï¼Œé‚£ä¸´ç•ŒåŒºå°±æŒ‡çš„æ˜¯ä»£ç å—å†…éƒ¨çš„åŒºåŸŸã€‚</p><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸‹é¢è¿™ä¸¤ä¸ªå†™æ³•å…¶å®æ˜¯ç­‰ä»·çš„ä½œç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å…³é”®å­—åœ¨å®ä¾‹æ–¹æ³•ä¸Šï¼Œé”ä¸ºå½“å‰å®ä¾‹</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">instanceLock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// code</span><br>&#125;<br><br><span class="hljs-comment">// å…³é”®å­—åœ¨ä»£ç å—ä¸Šï¼Œé”ä¸ºæ‹¬å·é‡Œé¢çš„å¯¹è±¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">blockLock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) &#123;<br>        <span class="hljs-comment">// code</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒç†ï¼Œä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•ä¹Ÿåº”è¯¥æ˜¯ç­‰ä»·çš„ï¼š</p><p>&#x2F;&#x2F; å…³é”®å­—åœ¨é™æ€æ–¹æ³•ä¸Šï¼Œé”ä¸ºå½“å‰Classå¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">classLock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// code</span><br>&#125;<br><br><span class="hljs-comment">// å…³é”®å­—åœ¨ä»£ç å—ä¸Šï¼Œé”ä¸ºæ‹¬å·é‡Œé¢çš„å¯¹è±¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">blockLock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>.getClass()) &#123;<br>        <span class="hljs-comment">// code</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-2-å‡ ç§é”"><a href="#9-2-å‡ ç§é”" class="headerlink" title="9.2 å‡ ç§é”"></a>9.2 å‡ ç§é”</h2><p>Java 6 ä¸ºäº†å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ï¼Œå¼•å…¥äº†â€œåå‘é”â€å’Œâ€œè½»é‡çº§é”â€œã€‚åœ¨Java 6 ä»¥å‰ï¼Œæ‰€æœ‰çš„é”éƒ½æ˜¯â€é‡é‡çº§â€œé”ã€‚æ‰€ä»¥åœ¨Java 6 åŠå…¶ä»¥åï¼Œä¸€ä¸ªå¯¹è±¡å…¶å®æœ‰å››ç§é”çŠ¶æ€ï¼Œå®ƒä»¬çº§åˆ«ç”±ä½åˆ°é«˜ä¾æ¬¡æ˜¯ï¼š</p><ol><li>æ— é”çŠ¶æ€</li><li>åå‘é”çŠ¶æ€</li><li>è½»é‡çº§é”çŠ¶æ€</li><li>é‡é‡çº§é”çŠ¶æ€</li></ol><p>æ— é”å°±æ˜¯æ²¡æœ‰å¯¹èµ„æºè¿›è¡Œé”å®šï¼Œä»»ä½•çº¿ç¨‹éƒ½å¯ä»¥å°è¯•å»ä¿®æ”¹å®ƒï¼Œæ— é”åœ¨è¿™é‡Œä¸å†ç»†è®²ã€‚</p><p>å‡ ç§é”ä¼šéšç€ç«äº‰æƒ…å†µé€æ¸å‡çº§ï¼Œé”çš„å‡çº§å¾ˆå®¹æ˜“å‘ç”Ÿï¼Œä½†æ˜¯é”é™çº§å‘ç”Ÿçš„æ¡ä»¶ä¼šæ¯”è¾ƒè‹›åˆ»ï¼Œé”é™çº§å‘ç”Ÿåœ¨Stop The WorldæœŸé—´ï¼Œå½“JVMè¿›å…¥å®‰å…¨ç‚¹çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥æ˜¯å¦æœ‰é—²ç½®çš„é”ï¼Œç„¶åè¿›è¡Œé™çº§ã€‚</p><blockquote><p>å…³äºé”é™çº§æœ‰ä¸¤ç‚¹è¯´æ˜ï¼š</p><p>1.ä¸åŒäºå¤§éƒ¨åˆ†æ–‡ç« è¯´é”ä¸èƒ½é™çº§ï¼Œå®é™…ä¸ŠHotSpot JVM æ˜¯æ”¯æŒé”é™çº§çš„ï¼Œæ–‡æœ«æœ‰é“¾æ¥ã€‚</p><p>2.ä¸Šé¢æåˆ°çš„Stop The WorldæœŸé—´ï¼Œä»¥åŠå®‰å…¨ç‚¹ï¼Œè¿™äº›çŸ¥è¯†æ˜¯å±äºJVMçš„çŸ¥è¯†èŒƒç•´ï¼Œæœ¬æ–‡ä¸åšç»†è®²ã€‚</p></blockquote><p>ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™å‡ ç§é”ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å‡çº§ã€‚</p><h3 id="9-2-1-Javaå¯¹è±¡å¤´"><a href="#9-2-1-Javaå¯¹è±¡å¤´" class="headerlink" title="9.2.1 Javaå¯¹è±¡å¤´"></a>9.2.1 Javaå¯¹è±¡å¤´</h3><p>å‰é¢æˆ‘ä»¬æåˆ°ï¼ŒJavaçš„é”éƒ½æ˜¯åŸºäºå¯¹è±¡çš„ã€‚é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå¯¹è±¡çš„â€œé”â€çš„ä¿¡æ¯æ˜¯å­˜æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹çš„ã€‚</p><p>æ¯ä¸ªJavaå¯¹è±¡éƒ½æœ‰å¯¹è±¡å¤´ã€‚å¦‚æœæ˜¯éæ•°ç»„ç±»å‹ï¼Œåˆ™ç”¨2ä¸ªå­—å®½æ¥å­˜å‚¨å¯¹è±¡å¤´ï¼Œå¦‚æœæ˜¯æ•°ç»„ï¼Œåˆ™ä¼šç”¨3ä¸ªå­—å®½æ¥å­˜å‚¨å¯¹è±¡å¤´ã€‚åœ¨32ä½å¤„ç†å™¨ä¸­ï¼Œä¸€ä¸ªå­—å®½æ˜¯32ä½ï¼›åœ¨64ä½è™šæ‹Ÿæœºä¸­ï¼Œä¸€ä¸ªå­—å®½æ˜¯64ä½ã€‚å¯¹è±¡å¤´çš„å†…å®¹å¦‚ä¸‹è¡¨ï¼š</p><p><img src="/Hexo/../img/202202202215649.png" alt="image-20220220221534591"></p><p>æˆ‘ä»¬ä¸»è¦æ¥çœ‹çœ‹Mark Wordçš„æ ¼å¼ï¼š</p><p><img src="/Hexo/../img/202202202216854.png" alt="image-20220220221616792"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“å¯¹è±¡çŠ¶æ€ä¸ºåå‘é”æ—¶ï¼Œ<code>Mark Word</code>å­˜å‚¨çš„æ˜¯åå‘çš„çº¿ç¨‹IDï¼›å½“çŠ¶æ€ä¸ºè½»é‡çº§é”æ—¶ï¼Œ<code>Mark Word</code>å­˜å‚¨çš„æ˜¯æŒ‡å‘çº¿ç¨‹æ ˆä¸­<code>Lock Record</code>çš„æŒ‡é’ˆï¼›å½“çŠ¶æ€ä¸ºé‡é‡çº§é”æ—¶ï¼Œ<code>Mark Word</code>ä¸ºæŒ‡å‘å †ä¸­çš„monitorå¯¹è±¡çš„æŒ‡é’ˆã€‚</p><h3 id="9-2-2-åå‘é”"><a href="#9-2-2-åå‘é”" class="headerlink" title="9.2.2 åå‘é”"></a>9.2.2 åå‘é”</h3><p>Hotspotçš„ä½œè€…ç»è¿‡ä»¥å¾€çš„ç ”ç©¶å‘ç°å¤§å¤šæ•°æƒ…å†µä¸‹<strong>é”ä¸ä»…ä¸å­˜åœ¨å¤šçº¿ç¨‹ç«äº‰ï¼Œè€Œä¸”æ€»æ˜¯ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—</strong>ï¼Œäºæ˜¯å¼•å…¥äº†åå‘é”ã€‚</p><p>åå‘é”ä¼šåå‘äºç¬¬ä¸€ä¸ªè®¿é—®é”çš„çº¿ç¨‹ï¼Œå¦‚æœåœ¨æ¥ä¸‹æ¥çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯¥é”æ²¡æœ‰è¢«å…¶ä»–çš„çº¿ç¨‹è®¿é—®ï¼Œåˆ™æŒæœ‰åå‘é”çš„çº¿ç¨‹å°†æ°¸è¿œä¸éœ€è¦è§¦å‘åŒæ­¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>åå‘é”åœ¨èµ„æºæ— ç«äº‰æƒ…å†µä¸‹æ¶ˆé™¤äº†åŒæ­¥è¯­å¥ï¼Œè¿CASæ“ä½œéƒ½ä¸åšäº†ï¼Œæé«˜äº†ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚</strong></p><blockquote><p>å¤§ç™½è¯å°±æ˜¯å¯¹é”ç½®ä¸ªå˜é‡ï¼Œå¦‚æœå‘ç°ä¸ºtrueï¼Œä»£è¡¨èµ„æºæ— ç«äº‰ï¼Œåˆ™æ— éœ€å†èµ°å„ç§åŠ é”&#x2F;è§£é”æµç¨‹ã€‚å¦‚æœä¸ºfalseï¼Œä»£è¡¨å­˜åœ¨å…¶ä»–çº¿ç¨‹ç«äº‰èµ„æºï¼Œé‚£ä¹ˆå°±ä¼šèµ°åé¢çš„æµç¨‹ã€‚</p></blockquote><h3 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a><strong>å®ç°åŸç†</strong></h3><p>ä¸€ä¸ªçº¿ç¨‹åœ¨ç¬¬ä¸€æ¬¡è¿›å…¥åŒæ­¥å—æ—¶ï¼Œä¼šåœ¨å¯¹è±¡å¤´å’Œæ ˆå¸§ä¸­çš„é”è®°å½•é‡Œå­˜å‚¨é”çš„åå‘çš„çº¿ç¨‹IDã€‚å½“ä¸‹æ¬¡è¯¥çº¿ç¨‹è¿›å…¥è¿™ä¸ªåŒæ­¥å—æ—¶ï¼Œä¼šå»æ£€æŸ¥é”çš„Mark Wordé‡Œé¢æ˜¯ä¸æ˜¯æ”¾çš„è‡ªå·±çš„çº¿ç¨‹IDã€‚</p><p>å¦‚æœæ˜¯ï¼Œè¡¨æ˜è¯¥çº¿ç¨‹å·²ç»è·å¾—äº†é”ï¼Œä»¥åè¯¥çº¿ç¨‹åœ¨è¿›å…¥å’Œé€€å‡ºåŒæ­¥å—æ—¶ä¸éœ€è¦èŠ±è´¹CASæ“ä½œæ¥åŠ é”å’Œè§£é” ï¼›å¦‚æœä¸æ˜¯ï¼Œå°±ä»£è¡¨æœ‰å¦ä¸€ä¸ªçº¿ç¨‹æ¥ç«äº‰è¿™ä¸ªåå‘é”ã€‚è¿™ä¸ªæ—¶å€™ä¼šå°è¯•ä½¿ç”¨CASæ¥æ›¿æ¢Mark Wordé‡Œé¢çš„çº¿ç¨‹IDä¸ºæ–°çº¿ç¨‹çš„IDï¼Œè¿™ä¸ªæ—¶å€™è¦åˆ†ä¸¤ç§æƒ…å†µï¼š</p><p>- </p><p>  æˆåŠŸï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä¸å­˜åœ¨äº†ï¼Œ Mark Wordé‡Œé¢çš„çº¿ç¨‹IDä¸ºæ–°çº¿ç¨‹çš„IDï¼Œé”ä¸ä¼šå‡çº§ï¼Œä»ç„¶ä¸ºåå‘é”ï¼›</p><p>- </p><p>  å¤±è´¥ï¼Œè¡¨ç¤ºä¹‹å‰çš„çº¿ç¨‹ä»ç„¶å­˜åœ¨ï¼Œé‚£ä¹ˆæš‚åœä¹‹å‰çš„çº¿ç¨‹ï¼Œè®¾ç½®åå‘é”æ ‡è¯†ä¸º0ï¼Œå¹¶è®¾ç½®é”æ ‡å¿—ä½ä¸º00ï¼Œå‡çº§ä¸ºè½»é‡çº§é”ï¼Œä¼šæŒ‰ç…§è½»é‡çº§é”çš„æ–¹å¼è¿›è¡Œç«äº‰é”ã€‚</p><blockquote><p>CAS: Compare and Swap</p><p>æ¯”è¾ƒå¹¶è®¾ç½®ã€‚ç”¨äºåœ¨ç¡¬ä»¶å±‚é¢ä¸Šæä¾›åŸå­æ€§æ“ä½œã€‚åœ¨ Intel å¤„ç†å™¨ä¸­ï¼Œæ¯”è¾ƒå¹¶äº¤æ¢é€šè¿‡æŒ‡ä»¤cmpxchgå®ç°ã€‚ æ¯”è¾ƒæ˜¯å¦å’Œç»™å®šçš„æ•°å€¼ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™ä¿®æ”¹ï¼Œä¸ä¸€è‡´åˆ™ä¸ä¿®æ”¹ã€‚</p></blockquote><p>çº¿ç¨‹ç«äº‰åå‘é”çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/Hexo/../img/202202202217189.png" alt="image-20220220221700114"></p><p>å›¾ä¸­æ¶‰åŠåˆ°äº†lock recordæŒ‡é’ˆæŒ‡å‘å½“å‰å †æ ˆä¸­çš„æœ€è¿‘ä¸€ä¸ªlock recordï¼Œæ˜¯è½»é‡çº§é”æŒ‰ç…§å…ˆæ¥å…ˆæœåŠ¡çš„æ¨¡å¼è¿›è¡Œäº†è½»é‡çº§é”çš„åŠ é”ã€‚</p><h3 id="æ’¤é”€åå‘é”"><a href="#æ’¤é”€åå‘é”" class="headerlink" title="æ’¤é”€åå‘é”"></a>æ’¤é”€åå‘é”</h3><p>åå‘é”ä½¿ç”¨äº†ä¸€ç§<strong>ç­‰åˆ°ç«äº‰å‡ºç°æ‰é‡Šæ”¾é”çš„æœºåˆ¶</strong>ï¼Œæ‰€ä»¥å½“å…¶ä»–çº¿ç¨‹å°è¯•ç«äº‰åå‘é”æ—¶ï¼Œ æŒæœ‰åå‘é”çš„çº¿ç¨‹æ‰ä¼šé‡Šæ”¾é”ã€‚</p><p>åå‘é”å‡çº§æˆè½»é‡çº§é”æ—¶ï¼Œä¼šæš‚åœæ‹¥æœ‰åå‘é”çš„çº¿ç¨‹ï¼Œé‡ç½®åå‘é”æ ‡è¯†ï¼Œè¿™ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥å®¹æ˜“ï¼Œå®åˆ™å¼€é”€è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œå¤§æ¦‚çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>åœ¨ä¸€ä¸ªå®‰å…¨ç‚¹ï¼ˆåœ¨è¿™ä¸ªæ—¶é—´ç‚¹ä¸Šæ²¡æœ‰å­—èŠ‚ç æ­£åœ¨æ‰§è¡Œï¼‰åœæ­¢æ‹¥æœ‰é”çš„çº¿ç¨‹ã€‚</li><li>éå†çº¿ç¨‹æ ˆï¼Œå¦‚æœå­˜åœ¨é”è®°å½•çš„è¯ï¼Œéœ€è¦ä¿®å¤é”è®°å½•å’ŒMark Wordï¼Œä½¿å…¶å˜æˆæ— é”çŠ¶æ€ã€‚</li><li>å”¤é†’è¢«åœæ­¢çš„çº¿ç¨‹ï¼Œå°†å½“å‰é”å‡çº§æˆè½»é‡çº§é”ã€‚</li></ol><p>æ‰€ä»¥ï¼Œå¦‚æœåº”ç”¨ç¨‹åºé‡Œæ‰€æœ‰çš„é”é€šå¸¸å‡ºäºç«äº‰çŠ¶æ€ï¼Œé‚£ä¹ˆåå‘é”å°±ä¼šæ˜¯ä¸€ç§ç´¯èµ˜ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä¸€å¼€å§‹å°±æŠŠåå‘é”è¿™ä¸ªé»˜è®¤åŠŸèƒ½ç»™å…³é—­ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">-XX:<span class="hljs-attribute">UseBiasedLocking</span>=<span class="hljs-literal">false</span>ã€‚<br></code></pre></td></tr></table></figure><p>Copied!</p><p>ä¸‹é¢è¿™ä¸ªç»å…¸çš„å›¾æ€»ç»“äº†åå‘é”çš„è·å¾—å’Œæ’¤é”€ï¼š</p><p><img src="/Hexo/../img/202202202218316.png"></p><h3 id="9-2-3-è½»é‡çº§é”"><a href="#9-2-3-è½»é‡çº§é”" class="headerlink" title="9.2.3 è½»é‡çº§é”"></a>9.2.3 è½»é‡çº§é”</h3><p>å¤šä¸ªçº¿ç¨‹åœ¨ä¸åŒæ—¶æ®µè·å–åŒä¸€æŠŠé”ï¼Œå³ä¸å­˜åœ¨é”ç«äº‰çš„æƒ…å†µï¼Œä¹Ÿå°±æ²¡æœ‰çº¿ç¨‹é˜»å¡ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒJVMé‡‡ç”¨è½»é‡çº§é”æ¥é¿å…çº¿ç¨‹çš„é˜»å¡ä¸å”¤é†’ã€‚</p><h3 id="è½»é‡çº§é”çš„åŠ é”"><a href="#è½»é‡çº§é”çš„åŠ é”" class="headerlink" title="è½»é‡çº§é”çš„åŠ é”"></a>è½»é‡çº§é”çš„åŠ é”</h3><p>JVMä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åœ¨å½“å‰çº¿ç¨‹çš„æ ˆå¸§ä¸­åˆ›å»ºç”¨äºå­˜å‚¨é”è®°å½•çš„ç©ºé—´ï¼Œæˆ‘ä»¬ç§°ä¸ºDisplaced Mark Wordã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹è·å¾—é”çš„æ—¶å€™å‘ç°æ˜¯è½»é‡çº§é”ï¼Œä¼šæŠŠé”çš„Mark Wordå¤åˆ¶åˆ°è‡ªå·±çš„Displaced Mark Wordé‡Œé¢ã€‚</p><p>ç„¶åçº¿ç¨‹å°è¯•ç”¨CASå°†é”çš„Mark Wordæ›¿æ¢ä¸ºæŒ‡å‘é”è®°å½•çš„æŒ‡é’ˆã€‚å¦‚æœæˆåŠŸï¼Œå½“å‰çº¿ç¨‹è·å¾—é”ï¼Œå¦‚æœå¤±è´¥ï¼Œè¡¨ç¤ºMark Wordå·²ç»è¢«æ›¿æ¢æˆäº†å…¶ä»–çº¿ç¨‹çš„é”è®°å½•ï¼Œè¯´æ˜åœ¨ä¸å…¶å®ƒçº¿ç¨‹ç«äº‰é”ï¼Œå½“å‰çº¿ç¨‹å°±å°è¯•ä½¿ç”¨è‡ªæ—‹æ¥è·å–é”ã€‚</p><blockquote><p>è‡ªæ—‹ï¼šä¸æ–­å°è¯•å»è·å–é”ï¼Œä¸€èˆ¬ç”¨å¾ªç¯æ¥å®ç°ã€‚</p></blockquote><p>è‡ªæ—‹æ˜¯éœ€è¦æ¶ˆè€—CPUçš„ï¼Œå¦‚æœä¸€ç›´è·å–ä¸åˆ°é”çš„è¯ï¼Œé‚£è¯¥çº¿ç¨‹å°±ä¸€ç›´å¤„åœ¨è‡ªæ—‹çŠ¶æ€ï¼Œç™½ç™½æµªè´¹CPUèµ„æºã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ€ç®€å•çš„åŠæ³•å°±æ˜¯æŒ‡å®šè‡ªæ—‹çš„æ¬¡æ•°ï¼Œä¾‹å¦‚è®©å…¶å¾ªç¯10æ¬¡ï¼Œå¦‚æœè¿˜æ²¡è·å–åˆ°é”å°±è¿›å…¥é˜»å¡çŠ¶æ€ã€‚</p><p>ä½†æ˜¯JDKé‡‡ç”¨äº†æ›´èªæ˜çš„æ–¹å¼â€”â€”é€‚åº”æ€§è‡ªæ—‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯çº¿ç¨‹å¦‚æœè‡ªæ—‹æˆåŠŸäº†ï¼Œåˆ™ä¸‹æ¬¡è‡ªæ—‹çš„æ¬¡æ•°ä¼šæ›´å¤šï¼Œå¦‚æœè‡ªæ—‹å¤±è´¥äº†ï¼Œåˆ™è‡ªæ—‹çš„æ¬¡æ•°å°±ä¼šå‡å°‘ã€‚</p><p>è‡ªæ—‹ä¹Ÿä¸æ˜¯ä¸€ç›´è¿›è¡Œä¸‹å»çš„ï¼Œå¦‚æœè‡ªæ—‹åˆ°ä¸€å®šç¨‹åº¦ï¼ˆå’ŒJVMã€æ“ä½œç³»ç»Ÿç›¸å…³ï¼‰ï¼Œä¾ç„¶æ²¡æœ‰è·å–åˆ°é”ï¼Œç§°ä¸ºè‡ªæ—‹å¤±è´¥ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹ä¼šé˜»å¡ã€‚åŒæ—¶è¿™ä¸ªé”å°±ä¼š<strong>å‡çº§æˆé‡é‡çº§é”</strong>ã€‚</p><p><strong>è½»é‡çº§é”çš„é‡Šæ”¾ï¼š</strong></p><p>åœ¨é‡Šæ”¾é”æ—¶ï¼Œå½“å‰çº¿ç¨‹ä¼šä½¿ç”¨CASæ“ä½œå°†Displaced Mark Wordçš„å†…å®¹å¤åˆ¶å›é”çš„Mark Wordé‡Œé¢ã€‚å¦‚æœæ²¡æœ‰å‘ç”Ÿç«äº‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤åˆ¶çš„æ“ä½œä¼šæˆåŠŸã€‚å¦‚æœæœ‰å…¶ä»–çº¿ç¨‹å› ä¸ºè‡ªæ—‹å¤šæ¬¡å¯¼è‡´è½»é‡çº§é”å‡çº§æˆäº†é‡é‡çº§é”ï¼Œé‚£ä¹ˆCASæ“ä½œä¼šå¤±è´¥ï¼Œæ­¤æ—¶ä¼šé‡Šæ”¾é”å¹¶å”¤é†’è¢«é˜»å¡çš„çº¿ç¨‹ã€‚</p><p>ä¸€å¼ å›¾è¯´æ˜åŠ é”å’Œé‡Šæ”¾é”çš„è¿‡ç¨‹ï¼š</p><p><img src="/Hexo/../img/202202202219697.png"></p><h3 id="9-2-4-é‡é‡çº§é”"><a href="#9-2-4-é‡é‡çº§é”" class="headerlink" title="9.2.4 é‡é‡çº§é”"></a>9.2.4 é‡é‡çº§é”</h3><p>é‡é‡çº§é”ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„äº’æ–¥é‡ï¼ˆmutexï¼‰ å®ç°çš„ï¼Œè€Œæ“ä½œç³»ç»Ÿä¸­çº¿ç¨‹é—´çŠ¶æ€çš„è½¬æ¢éœ€è¦ç›¸å¯¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œæ‰€ä»¥é‡é‡çº§é”æ•ˆç‡å¾ˆä½ï¼Œä½†è¢«é˜»å¡çš„çº¿ç¨‹ä¸ä¼šæ¶ˆè€—CPUã€‚</p><p>å‰é¢è¯´åˆ°ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥å½“åšä¸€ä¸ªé”ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯·æ±‚æŸä¸ªå¯¹è±¡é”æ—¶ï¼Œå¯¹è±¡é”ä¼šè®¾ç½®å‡ ç§çŠ¶æ€ç”¨æ¥åŒºåˆ†è¯·æ±‚çš„çº¿ç¨‹ï¼š</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">Contention</span> <span class="hljs-built_in">List</span>ï¼šæ‰€æœ‰è¯·æ±‚é”çš„çº¿ç¨‹å°†è¢«é¦–å…ˆæ”¾ç½®åˆ°è¯¥ç«äº‰é˜Ÿåˆ—<br><span class="hljs-variable">Entry</span> <span class="hljs-built_in">List</span>ï¼š<span class="hljs-variable">Contention</span> <span class="hljs-built_in">List</span>ä¸­é‚£äº›æœ‰èµ„æ ¼æˆä¸ºå€™é€‰äººçš„çº¿ç¨‹è¢«ç§»åˆ°<span class="hljs-variable">Entry</span> <span class="hljs-built_in">List</span><br><span class="hljs-variable">Wait</span> <span class="hljs-built_in">Set</span>ï¼šé‚£äº›è°ƒç”¨<span class="hljs-variable">wait</span>æ–¹æ³•è¢«é˜»å¡çš„çº¿ç¨‹è¢«æ”¾ç½®åˆ°<span class="hljs-variable">Wait</span> <span class="hljs-built_in">Set</span><br><span class="hljs-variable">OnDeck</span>ï¼šä»»ä½•æ—¶åˆ»æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ç«äº‰é”ï¼Œè¯¥çº¿ç¨‹ç§°ä¸º<span class="hljs-variable">OnDeck</span><br><span class="hljs-variable">Owner</span>ï¼šè·å¾—é”çš„çº¿ç¨‹ç§°ä¸º<span class="hljs-variable">Owner</span><br><span class="hljs-operator">!</span><span class="hljs-variable">Owner</span>ï¼šé‡Šæ”¾é”çš„çº¿ç¨‹<br></code></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªçº¿ç¨‹å°è¯•è·å¾—é”æ—¶ï¼Œå¦‚æœè¯¥é”å·²ç»è¢«å ç”¨ï¼Œåˆ™ä¼šå°†è¯¥çº¿ç¨‹å°è£…æˆä¸€ä¸ª<code>ObjectWaiter</code>å¯¹è±¡æ’å…¥åˆ°Contention Listçš„é˜Ÿåˆ—çš„é˜Ÿé¦–ï¼Œç„¶åè°ƒç”¨<code>park</code>å‡½æ•°æŒ‚èµ·å½“å‰çº¿ç¨‹ã€‚</p><p>å½“çº¿ç¨‹é‡Šæ”¾é”æ—¶ï¼Œä¼šä»Contention Listæˆ–EntryListä¸­æŒ‘é€‰ä¸€ä¸ªçº¿ç¨‹å”¤é†’ï¼Œè¢«é€‰ä¸­çš„çº¿ç¨‹å«åš<code>Heir presumptive</code>å³å‡å®šç»§æ‰¿äººï¼Œå‡å®šç»§æ‰¿äººè¢«å”¤é†’åä¼šå°è¯•è·å¾—é”ï¼Œä½†<code>synchronized</code>æ˜¯éå…¬å¹³çš„ï¼Œæ‰€ä»¥å‡å®šç»§æ‰¿äººä¸ä¸€å®šèƒ½è·å¾—é”ã€‚è¿™æ˜¯å› ä¸ºå¯¹äºé‡é‡çº§é”ï¼Œçº¿ç¨‹å…ˆè‡ªæ—‹å°è¯•è·å¾—é”ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†å‡å°‘æ‰§è¡Œæ“ä½œç³»ç»ŸåŒæ­¥æ“ä½œå¸¦æ¥çš„å¼€é”€ã€‚å¦‚æœè‡ªæ—‹ä¸æˆåŠŸå†è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚è¿™å¯¹é‚£äº›å·²ç»åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æ¥è¯´ï¼Œç¨å¾®æ˜¾å¾—ä¸å…¬å¹³ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸å…¬å¹³çš„åœ°æ–¹æ˜¯è‡ªæ—‹çº¿ç¨‹å¯èƒ½ä¼šæŠ¢å äº†Readyçº¿ç¨‹çš„é”ã€‚</p><p>æœçº¿ç¨‹è·å¾—é”åè°ƒç”¨<code>Object.wait</code>æ–¹æ³•ï¼Œåˆ™ä¼šå°†çº¿ç¨‹åŠ å…¥åˆ°WaitSetä¸­ï¼Œå½“è¢«<code>Object.notify</code>å”¤é†’åï¼Œä¼šå°†çº¿ç¨‹ä»WaitSetç§»åŠ¨åˆ°Contention Listæˆ–EntryListä¸­å»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“è°ƒç”¨ä¸€ä¸ªé”å¯¹è±¡çš„<code>wait</code>æˆ–<code>notify</code>æ–¹æ³•æ—¶ï¼Œ<strong>å¦‚å½“å‰é”çš„çŠ¶æ€æ˜¯åå‘é”æˆ–è½»é‡çº§é”åˆ™ä¼šå…ˆè†¨èƒ€æˆé‡é‡çº§é”</strong>ã€‚</p><h3 id="9-2-5-æ€»ç»“é”çš„å‡çº§æµç¨‹"><a href="#9-2-5-æ€»ç»“é”çš„å‡çº§æµç¨‹" class="headerlink" title="9.2.5 æ€»ç»“é”çš„å‡çº§æµç¨‹"></a>9.2.5 æ€»ç»“é”çš„å‡çº§æµç¨‹</h3><p>æ¯ä¸€ä¸ªçº¿ç¨‹åœ¨å‡†å¤‡è·å–å…±äº«èµ„æºæ—¶ï¼š ç¬¬ä¸€æ­¥ï¼Œæ£€æŸ¥MarkWordé‡Œé¢æ˜¯ä¸æ˜¯æ”¾çš„è‡ªå·±çš„ThreadId ,å¦‚æœæ˜¯ï¼Œè¡¨ç¤ºå½“å‰çº¿ç¨‹æ˜¯å¤„äº â€œåå‘é”â€ ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œå¦‚æœMarkWordä¸æ˜¯è‡ªå·±çš„ThreadIdï¼Œé”å‡çº§ï¼Œè¿™æ—¶å€™ï¼Œç”¨CASæ¥æ‰§è¡Œåˆ‡æ¢ï¼Œæ–°çš„çº¿ç¨‹æ ¹æ®MarkWordé‡Œé¢ç°æœ‰çš„ThreadIdï¼Œé€šçŸ¥ä¹‹å‰çº¿ç¨‹æš‚åœï¼Œä¹‹å‰çº¿ç¨‹å°†Markwordçš„å†…å®¹ç½®ä¸ºç©ºã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æŠŠé”å¯¹è±¡çš„HashCodeå¤åˆ¶åˆ°è‡ªå·±æ–°å»ºçš„ç”¨äºå­˜å‚¨é”çš„è®°å½•ç©ºé—´ï¼Œæ¥ç€å¼€å§‹é€šè¿‡CASæ“ä½œï¼Œ æŠŠé”å¯¹è±¡çš„MarKwordçš„å†…å®¹ä¿®æ”¹ä¸ºè‡ªå·±æ–°å»ºçš„è®°å½•ç©ºé—´çš„åœ°å€çš„æ–¹å¼ç«äº‰MarkWordã€‚</p><p>ç¬¬å››æ­¥ï¼Œç¬¬ä¸‰æ­¥ä¸­æˆåŠŸæ‰§è¡ŒCASçš„è·å¾—èµ„æºï¼Œå¤±è´¥çš„åˆ™è¿›å…¥è‡ªæ—‹ ã€‚</p><p>ç¬¬äº”æ­¥ï¼Œè‡ªæ—‹çš„çº¿ç¨‹åœ¨è‡ªæ—‹è¿‡ç¨‹ä¸­ï¼ŒæˆåŠŸè·å¾—èµ„æº(å³ä¹‹å‰è·çš„èµ„æºçš„çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶é‡Šæ”¾äº†å…±äº«èµ„æº)ï¼Œåˆ™æ•´ä¸ªçŠ¶æ€ä¾ç„¶å¤„äº è½»é‡çº§é”çš„çŠ¶æ€ï¼Œå¦‚æœè‡ªæ—‹å¤±è´¥ ã€‚</p><p>ç¬¬å…­æ­¥ï¼Œè¿›å…¥é‡é‡çº§é”çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè‡ªæ—‹çš„çº¿ç¨‹è¿›è¡Œé˜»å¡ï¼Œç­‰å¾…ä¹‹å‰çº¿ç¨‹æ‰§è¡Œå®Œæˆå¹¶å”¤é†’è‡ªå·±ã€‚</p><h3 id="9-2-6-å„ç§é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"><a href="#9-2-6-å„ç§é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”" class="headerlink" title="9.2.6 å„ç§é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”"></a>9.2.6 å„ç§é”çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”</h3><p>ä¸‹è¡¨æ¥è‡ªã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹ï¼š</p><p><img src="/Hexo/../img/202202202220172.png" alt="image-20220220222012089"></p><p><strong>å‚è€ƒæ–‡ç« </strong></p><ul><li><a href="https://www.jianshu.com/p/9932047a89be">Javaé”ä¼˜åŒ–â€“JVMé”é™çº§</a></li><li><a href="https://www.cnblogs.com/charlesblc/p/5994162.html">Javaä¸­çš„é”æœºåˆ¶</a></li><li><a href="https://github.com/farmerjohngit/myblog/issues/12">æ­»ç£•Synchronizedåº•å±‚å®ç°</a></li><li>ã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹</li></ul><h1 id="10-CASä¸åŸå­æ“ä½œ"><a href="#10-CASä¸åŸå­æ“ä½œ" class="headerlink" title="10 CASä¸åŸå­æ“ä½œ"></a>10 CASä¸åŸå­æ“ä½œ</h1><p>ç¬¬åç«  ä¹è§‚é”å’Œæ‚²è§‚é”</p><h2 id="10-1-ä¹è§‚é”ä¸æ‚²è§‚é”çš„æ¦‚å¿µ"><a href="#10-1-ä¹è§‚é”ä¸æ‚²è§‚é”çš„æ¦‚å¿µ" class="headerlink" title="10.1 ä¹è§‚é”ä¸æ‚²è§‚é”çš„æ¦‚å¿µ"></a>10.1 ä¹è§‚é”ä¸æ‚²è§‚é”çš„æ¦‚å¿µ</h2><p>é”å¯ä»¥ä»ä¸åŒçš„è§’åº¦åˆ†ç±»ã€‚å…¶ä¸­ï¼Œä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä¸€ç§åˆ†ç±»æ–¹å¼ã€‚</p><p><strong>æ‚²è§‚é”ï¼š</strong></p><p>æ‚²è§‚é”å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„é”ã€‚å¯¹äºæ‚²è§‚é”æ¥è¯´ï¼Œå®ƒæ€»æ˜¯è®¤ä¸ºæ¯æ¬¡è®¿é—®å…±äº«èµ„æºæ—¶ä¼šå‘ç”Ÿå†²çªï¼Œæ‰€ä»¥å¿…é¡»å¯¹æ¯æ¬¡æ•°æ®æ“ä½œåŠ ä¸Šé”ï¼Œä»¥ä¿è¯ä¸´ç•ŒåŒºçš„ç¨‹åºåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œã€‚</p><p><strong>ä¹è§‚é”ï¼š</strong></p><p>ä¹è§‚é”åˆç§°ä¸ºâ€œæ— é”â€ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä¹è§‚æ´¾ã€‚ä¹è§‚é”æ€»æ˜¯å‡è®¾å¯¹å…±äº«èµ„æºçš„è®¿é—®æ²¡æœ‰å†²çªï¼Œçº¿ç¨‹å¯ä»¥ä¸åœåœ°æ‰§è¡Œï¼Œæ— éœ€åŠ é”ä¹Ÿæ— éœ€ç­‰å¾…ã€‚è€Œä¸€æ—¦å¤šä¸ªçº¿ç¨‹å‘ç”Ÿå†²çªï¼Œä¹è§‚é”é€šå¸¸æ˜¯ä½¿ç”¨ä¸€ç§ç§°ä¸ºCASçš„æŠ€æœ¯æ¥ä¿è¯çº¿ç¨‹æ‰§è¡Œçš„å®‰å…¨æ€§ã€‚</p><p>ç”±äºæ— é”æ“ä½œä¸­æ²¡æœ‰é”çš„å­˜åœ¨ï¼Œå› æ­¤ä¸å¯èƒ½å‡ºç°æ­»é”çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´<strong>ä¹è§‚é”å¤©ç”Ÿå…ç–«æ­»é”</strong>ã€‚</p><p>ä¹è§‚é”å¤šç”¨äºâ€œè¯»å¤šå†™å°‘â€œçš„ç¯å¢ƒï¼Œé¿å…é¢‘ç¹åŠ é”å½±å“æ€§èƒ½ï¼›è€Œæ‚²è§‚é”å¤šç”¨äºâ€å†™å¤šè¯»å°‘â€œçš„ç¯å¢ƒï¼Œé¿å…é¢‘ç¹å¤±è´¥å’Œé‡è¯•å½±å“æ€§èƒ½ã€‚</p><h2 id="10-2-CASçš„æ¦‚å¿µ"><a href="#10-2-CASçš„æ¦‚å¿µ" class="headerlink" title="10.2 CASçš„æ¦‚å¿µ"></a>10.2 CASçš„æ¦‚å¿µ</h2><p>CASçš„å…¨ç§°æ˜¯ï¼šæ¯”è¾ƒå¹¶äº¤æ¢ï¼ˆCompare And Swapï¼‰ã€‚åœ¨CASä¸­ï¼Œæœ‰è¿™æ ·ä¸‰ä¸ªå€¼ï¼š</p><ul><li>Vï¼šè¦æ›´æ–°çš„å˜é‡(var)</li><li>Eï¼šé¢„æœŸå€¼(expected)</li><li>Nï¼šæ–°å€¼(new)</li></ul><p>æ¯”è¾ƒå¹¶äº¤æ¢çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p>åˆ¤æ–­Væ˜¯å¦ç­‰äºEï¼Œå¦‚æœç­‰äºï¼Œå°†Vçš„å€¼è®¾ç½®ä¸ºNï¼›å¦‚æœä¸ç­‰ï¼Œè¯´æ˜å·²ç»æœ‰å…¶å®ƒçº¿ç¨‹æ›´æ–°äº†Vï¼Œåˆ™å½“å‰çº¿ç¨‹æ”¾å¼ƒæ›´æ–°ï¼Œä»€ä¹ˆéƒ½ä¸åšã€‚</p><p>æ‰€ä»¥è¿™é‡Œçš„<strong>é¢„æœŸå€¼Eæœ¬è´¨ä¸ŠæŒ‡çš„æ˜¯â€œæ—§å€¼â€</strong>ã€‚</p><p>æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è§£é‡Šè¿™ä¸ªè¿‡ç¨‹ï¼š</p><ol><li>å¦‚æœæœ‰ä¸€ä¸ªå¤šä¸ªçº¿ç¨‹å…±äº«çš„å˜é‡<code>i</code>åŸæœ¬ç­‰äº5ï¼Œæˆ‘ç°åœ¨åœ¨çº¿ç¨‹Aä¸­ï¼Œæƒ³æŠŠå®ƒè®¾ç½®ä¸ºæ–°çš„å€¼6;</li><li>æˆ‘ä»¬ä½¿ç”¨CASæ¥åšè¿™ä¸ªäº‹æƒ…ï¼›</li><li>é¦–å…ˆæˆ‘ä»¬ç”¨iå»ä¸5å¯¹æ¯”ï¼Œå‘ç°å®ƒç­‰äº5ï¼Œè¯´æ˜æ²¡æœ‰è¢«å…¶å®ƒçº¿ç¨‹æ”¹è¿‡ï¼Œé‚£æˆ‘å°±æŠŠå®ƒè®¾ç½®ä¸ºæ–°çš„å€¼6ï¼Œæ­¤æ¬¡CASæˆåŠŸï¼Œ<code>i</code>çš„å€¼è¢«è®¾ç½®æˆäº†6ï¼›</li><li>å¦‚æœä¸ç­‰äº5ï¼Œè¯´æ˜<code>i</code>è¢«å…¶å®ƒçº¿ç¨‹æ”¹è¿‡äº†ï¼ˆæ¯”å¦‚ç°åœ¨<code>i</code>çš„å€¼ä¸º2ï¼‰ï¼Œé‚£ä¹ˆæˆ‘å°±ä»€ä¹ˆä¹Ÿä¸åšï¼Œæ­¤æ¬¡CASå¤±è´¥ï¼Œ<code>i</code>çš„å€¼ä»ç„¶ä¸º2ã€‚</li></ol><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>i</code>å°±æ˜¯Vï¼Œ5å°±æ˜¯Eï¼Œ6å°±æ˜¯Nã€‚</p><p>é‚£æœ‰æ²¡æœ‰å¯èƒ½æˆ‘åœ¨åˆ¤æ–­äº†<code>i</code>ä¸º5ä¹‹åï¼Œæ­£å‡†å¤‡æ›´æ–°å®ƒçš„æ–°å€¼çš„æ—¶å€™ï¼Œè¢«å…¶å®ƒçº¿ç¨‹æ›´æ”¹äº†<code>i</code>çš„å€¼å‘¢ï¼Ÿ</p><p>ä¸ä¼šçš„ã€‚å› ä¸ºCASæ˜¯ä¸€ç§åŸå­æ“ä½œï¼Œå®ƒæ˜¯ä¸€ç§ç³»ç»ŸåŸè¯­ï¼Œæ˜¯ä¸€æ¡CPUçš„åŸå­æŒ‡ä»¤ï¼Œä»CPUå±‚é¢ä¿è¯å®ƒçš„åŸå­æ€§</p><p><strong>å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨CASæ“ä½œä¸€ä¸ªå˜é‡æ—¶ï¼Œåªæœ‰ä¸€ä¸ªä¼šèƒœå‡ºï¼Œå¹¶æˆåŠŸæ›´æ–°ï¼Œå…¶ä½™å‡ä¼šå¤±è´¥ï¼Œä½†å¤±è´¥çš„çº¿ç¨‹å¹¶ä¸ä¼šè¢«æŒ‚èµ·ï¼Œä»…æ˜¯è¢«å‘ŠçŸ¥å¤±è´¥ï¼Œå¹¶ä¸”å…è®¸å†æ¬¡å°è¯•ï¼Œå½“ç„¶ä¹Ÿå…è®¸å¤±è´¥çš„çº¿ç¨‹æ”¾å¼ƒæ“ä½œã€‚</strong></p><h2 id="10-3-Javaå®ç°CASçš„åŸç†-Unsafeç±»"><a href="#10-3-Javaå®ç°CASçš„åŸç†-Unsafeç±»" class="headerlink" title="10.3 Javaå®ç°CASçš„åŸç† - Unsafeç±»"></a>10.3 Javaå®ç°CASçš„åŸç† - Unsafeç±»</h2><p>å‰é¢æåˆ°ï¼ŒCASæ˜¯ä¸€ç§åŸå­æ“ä½œã€‚é‚£ä¹ˆJavaæ˜¯æ€æ ·æ¥ä½¿ç”¨CASçš„å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨Javaä¸­ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•æ˜¯nativeçš„ï¼Œé‚£Javaå°±ä¸è´Ÿè´£å…·ä½“å®ç°å®ƒï¼Œè€Œæ˜¯äº¤ç»™åº•å±‚çš„JVMä½¿ç”¨cæˆ–è€…c++å»å®ç°ã€‚</p><p>åœ¨Javaä¸­ï¼Œæœ‰ä¸€ä¸ª<code>Unsafe</code>ç±»ï¼Œå®ƒåœ¨<code>sun.misc</code>åŒ…ä¸­ã€‚å®ƒé‡Œé¢æ˜¯ä¸€äº›<code>native</code>æ–¹æ³•ï¼Œå…¶ä¸­å°±æœ‰å‡ ä¸ªå…³äºCASçš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">boolean</span> <span class="hljs-title function_">compareAndSwapObject</span><span class="hljs-params">(Object o, <span class="hljs-type">long</span> offset,Object expected, Object x)</span>;<br><span class="hljs-type">boolean</span> <span class="hljs-title function_">compareAndSwapInt</span><span class="hljs-params">(Object o, <span class="hljs-type">long</span> offset,<span class="hljs-type">int</span> expected,<span class="hljs-type">int</span> x)</span>;<br><span class="hljs-type">boolean</span> <span class="hljs-title function_">compareAndSwapLong</span><span class="hljs-params">(Object o, <span class="hljs-type">long</span> offset,<span class="hljs-type">long</span> expected,<span class="hljs-type">long</span> x)</span>;<br></code></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä»–ä»¬éƒ½æ˜¯<code>public native</code>çš„ã€‚</p><p>Unsafeä¸­å¯¹CASçš„å®ç°æ˜¯C++å†™çš„ï¼Œå®ƒçš„å…·ä½“å®ç°å’Œæ“ä½œç³»ç»Ÿã€CPUéƒ½æœ‰å…³ç³»ã€‚</p><p>Linuxçš„X86ä¸‹ä¸»è¦æ˜¯é€šè¿‡<code>cmpxchgl</code>è¿™ä¸ªæŒ‡ä»¤åœ¨CPUçº§å®ŒæˆCASæ“ä½œçš„ï¼Œä½†åœ¨å¤šå¤„ç†å™¨æƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨<code>lock</code>æŒ‡ä»¤åŠ é”æ¥å®Œæˆã€‚å½“ç„¶ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¤„ç†å™¨çš„å®ç°ä¼šæœ‰æ‰€ä¸åŒï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p><p>å½“ç„¶ï¼ŒUnsafeç±»é‡Œé¢è¿˜æœ‰å…¶å®ƒæ–¹æ³•ç”¨äºä¸åŒçš„ç”¨é€”ã€‚æ¯”å¦‚æ”¯æŒçº¿ç¨‹æŒ‚èµ·å’Œæ¢å¤çš„<code>park</code>å’Œ<code>unpark</code>ï¼Œ LockSupportç±»åº•å±‚å°±æ˜¯è°ƒç”¨äº†è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚è¿˜æœ‰æ”¯æŒåå°„æ“ä½œçš„<code>allocateInstance()</code>æ–¹æ³•ã€‚</p><h2 id="10-4-åŸå­æ“ä½œ-AtomicIntegerç±»æºç ç®€æ"><a href="#10-4-åŸå­æ“ä½œ-AtomicIntegerç±»æºç ç®€æ" class="headerlink" title="10.4 åŸå­æ“ä½œ-AtomicIntegerç±»æºç ç®€æ"></a>10.4 åŸå­æ“ä½œ-AtomicIntegerç±»æºç ç®€æ</h2><p>ä¸Šé¢ä»‹ç»äº†Unsafeç±»çš„å‡ ä¸ªæ”¯æŒCASçš„æ–¹æ³•ã€‚é‚£Javaå…·ä½“æ˜¯å¦‚ä½•ä½¿ç”¨è¿™å‡ ä¸ªæ–¹æ³•æ¥å®ç°åŸå­æ“ä½œçš„å‘¢ï¼Ÿ</p><p>JDKæä¾›äº†ä¸€äº›ç”¨äºåŸå­æ“ä½œçš„ç±»ï¼Œåœ¨<code>java.util.concurrent.atomic</code>åŒ…ä¸‹é¢ã€‚åœ¨JDK 11ä¸­ï¼Œæœ‰å¦‚ä¸‹17ä¸ªç±»ï¼š</p><p><img src="/Hexo/../img/202202202225701.png" alt="image-20220220222547625"></p><p>åŸå­ç±»</p><p>ä»åå­—å°±å¯ä»¥çœ‹å¾—å‡ºæ¥è¿™äº›ç±»å¤§æ¦‚çš„ç”¨é€”ï¼š</p><ul><li>åŸå­æ›´æ–°åŸºæœ¬ç±»å‹</li><li>åŸå­æ›´æ–°æ•°ç»„</li><li>åŸå­æ›´æ–°å¼•ç”¨</li><li>åŸå­æ›´æ–°å­—æ®µï¼ˆå±æ€§ï¼‰</li></ul><p>è¿™é‡Œæˆ‘ä»¬ä»¥<code>AtomicInteger</code>ç±»çš„<code>getAndAdd(int delta)</code>æ–¹æ³•ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹Javaæ˜¯å¦‚ä½•å®ç°åŸå­æ“ä½œçš„ã€‚</p><p>å…ˆçœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAndAdd</span><span class="hljs-params">(<span class="hljs-type">int</span> delta)</span> &#123;<br><br>    <span class="hljs-keyword">return</span> U.getAndAddInt(<span class="hljs-built_in">this</span>, VALUE, delta);<br><br><br><br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„Uå…¶å®å°±æ˜¯ä¸€ä¸ª<code>Unsafe</code>å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> jdk.internal.misc.<span class="hljs-type">Unsafe</span> <span class="hljs-variable">U</span> <span class="hljs-operator">=</span> jdk.internal.misc.Unsafe.getUnsafe();<br></code></pre></td></tr></table></figure><p>æ‰€ä»¥å…¶å®<code>AtomicInteger</code>ç±»çš„<code>getAndAdd(int delta)</code>æ–¹æ³•æ˜¯è°ƒç”¨<code>Unsafe</code>ç±»çš„æ–¹æ³•æ¥å®ç°çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@HotSpotIntrinsicCandidate</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAndAddInt</span><span class="hljs-params">(Object o, <span class="hljs-type">long</span> offset, <span class="hljs-type">int</span> delta)</span> &#123;<br>    <span class="hljs-type">int</span> v;<br>    <span class="hljs-keyword">do</span> &#123;<br>        v = getIntVolatile(o, offset);<br>    &#125; <span class="hljs-keyword">while</span> (!weakCompareAndSetInt(o, offset, v, v + delta));<br>    <span class="hljs-keyword">return</span> v;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨JDK 1.8æ‰æ–°å¢çš„ã€‚åœ¨JDK1.8ä¹‹å‰ï¼Œ<code>AtomicInteger</code>æºç å®ç°æœ‰æ‰€ä¸åŒï¼Œæ˜¯åŸºäºforæ­»å¾ªç¯çš„ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡Œäº†è§£ä¸€ä¸‹ã€‚</p></blockquote><p>æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥è§£æè¿™æ®µæºç ã€‚é¦–å…ˆï¼Œå¯¹è±¡<code>o</code>æ˜¯<code>this</code>ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª<code>AtomicInteger</code>å¯¹è±¡ã€‚ç„¶å<code>offset</code>æ˜¯ä¸€ä¸ªå¸¸é‡<code>VALUE</code>ã€‚è¿™ä¸ªå¸¸é‡æ˜¯åœ¨<code>AtomicInteger</code>ç±»ä¸­å£°æ˜çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">VALUE</span> <span class="hljs-operator">=</span> U.objectFieldOffset(AtomicInteger.class, <span class="hljs-string">&quot;value&quot;</span>);<br></code></pre></td></tr></table></figure><p>åŒæ ·æ˜¯è°ƒç”¨çš„<code>Unsafe</code>çš„æ–¹æ³•ã€‚ä»æ–¹æ³•åå­—ä¸Šæ¥çœ‹ï¼Œæ˜¯å¾—åˆ°äº†ä¸€ä¸ªå¯¹è±¡å­—æ®µåç§»é‡ã€‚</p><blockquote><p>ç”¨äºè·å–æŸä¸ªå­—æ®µç›¸å¯¹Javaå¯¹è±¡çš„â€œèµ·å§‹åœ°å€â€çš„åç§»é‡ã€‚</p><p>ä¸€ä¸ªjavaå¯¹è±¡å¯ä»¥çœ‹æˆæ˜¯ä¸€æ®µå†…å­˜ï¼Œå„ä¸ªå­—æ®µéƒ½å¾—æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ”¾åœ¨è¿™æ®µå†…å­˜é‡Œï¼ŒåŒæ—¶è€ƒè™‘åˆ°å¯¹é½è¦æ±‚ï¼Œå¯èƒ½è¿™äº›å­—æ®µä¸æ˜¯è¿ç»­æ”¾ç½®çš„ï¼Œ</p><p>ç”¨è¿™ä¸ªæ–¹æ³•èƒ½å‡†ç¡®åœ°å‘Šè¯‰ä½ æŸä¸ªå­—æ®µç›¸å¯¹äºå¯¹è±¡çš„èµ·å§‹å†…å­˜åœ°å€çš„å­—èŠ‚åç§»é‡ï¼Œå› ä¸ºæ˜¯ç›¸å¯¹åç§»é‡ï¼Œæ‰€ä»¥å®ƒå…¶å®è·ŸæŸä¸ªå…·ä½“å¯¹è±¡åˆæ²¡ä»€ä¹ˆå¤ªå¤§å…³ç³»ï¼Œè·Ÿclassçš„å®šä¹‰å’Œè™šæ‹Ÿæœºçš„å†…å­˜æ¨¡å‹çš„å®ç°ç»†èŠ‚æ›´ç›¸å…³ã€‚</p></blockquote><p>ç»§ç»­çœ‹æºç ã€‚å‰é¢æˆ‘ä»¬è®²åˆ°ï¼ŒCASæ˜¯â€œæ— é”â€çš„åŸºç¡€ï¼Œå®ƒå…è®¸æ›´æ–°å¤±è´¥ã€‚æ‰€ä»¥ç»å¸¸ä¼šä¸whileå¾ªç¯æ­é…ï¼Œåœ¨å¤±è´¥åä¸æ–­å»é‡è¯•ã€‚</p><p>è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªvï¼Œä¹Ÿå°±æ˜¯è¦è¿”å›çš„å€¼ã€‚ä»<code>getAndAddInt</code>æ¥çœ‹ï¼Œå®ƒè¿”å›çš„åº”è¯¥æ˜¯åŸæ¥çš„å€¼ï¼Œè€Œæ–°çš„å€¼çš„<code>v + delta</code>ã€‚</p><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯<strong>do-whileå¾ªç¯</strong>ã€‚è¿™ç§å¾ªç¯ä¸å¤šè§ï¼Œå®ƒçš„ç›®çš„æ˜¯<strong>ä¿è¯å¾ªç¯ä½“å†…çš„è¯­å¥è‡³å°‘ä¼šè¢«æ‰§è¡Œä¸€é</strong>ã€‚è¿™æ ·æ‰èƒ½ä¿è¯return çš„å€¼<code>v</code>æ˜¯æˆ‘ä»¬æœŸæœ›çš„å€¼ã€‚</p><p>å¾ªç¯ä½“çš„æ¡ä»¶æ˜¯ä¸€ä¸ªCASæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">weakCompareAndSetInt</span><span class="hljs-params">(Object o, <span class="hljs-type">long</span> offset,</span><br><span class="hljs-params">                                          <span class="hljs-type">int</span> expected,</span><br><span class="hljs-params">                                          <span class="hljs-type">int</span> x)</span> &#123;<br>    <span class="hljs-keyword">return</span> compareAndSetInt(o, offset, expected, x);<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">compareAndSetInt</span><span class="hljs-params">(Object o, <span class="hljs-type">long</span> offset,</span><br><span class="hljs-params">                                             <span class="hljs-type">int</span> expected,</span><br><span class="hljs-params">                                             <span class="hljs-type">int</span> x)</span>;<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆå…¶å®æ˜¯è°ƒç”¨çš„æˆ‘ä»¬ä¹‹å‰è¯´åˆ°äº†CAS <code>native</code>æ–¹æ³•ã€‚é‚£ä¸ºä»€ä¹ˆè¦ç»è¿‡ä¸€å±‚<code>weakCompareAndSetInt</code>å‘¢ï¼Ÿä»JDKæºç ä¸Šçœ‹ä¸å‡ºæ¥ä»€ä¹ˆã€‚åœ¨JDK 8åŠä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚</p><blockquote><p>è€Œåœ¨JDK 9å¼€å§‹ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸Šé¢å¢åŠ äº†@HotSpotIntrinsicCandidateæ³¨è§£ã€‚è¿™ä¸ªæ³¨è§£å…è®¸HotSpot VMè‡ªå·±æ¥å†™æ±‡ç¼–æˆ–IRç¼–è¯‘å™¨æ¥å®ç°è¯¥æ–¹æ³•ä»¥æä¾›æ€§èƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´è™½ç„¶å¤–é¢çœ‹åˆ°çš„åœ¨JDK9ä¸­weakCompareAndSetå’ŒcompareAndSetåº•å±‚ä¾æ—§æ˜¯è°ƒç”¨äº†ä¸€æ ·çš„ä»£ç ï¼Œä½†æ˜¯ä¸æ’é™¤HotSpot VMä¼šæ‰‹åŠ¨æ¥å®ç°weakCompareAndSetçœŸæ­£å«ä¹‰çš„åŠŸèƒ½çš„å¯èƒ½æ€§ã€‚</p></blockquote><p>æ ¹æ®æœ¬æ–‡ç¬¬ä¸€ç¯‡å‚è€ƒæ–‡ç« ï¼ˆæ–‡æœ«é“¾æ¥ï¼‰ï¼Œå®ƒè·Ÿ<code>volitile</code>æœ‰å…³ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œ<code>weakCompareAndSet</code>æ“ä½œä»…ä¿ç•™äº†<code>volatile</code>è‡ªèº«å˜é‡çš„ç‰¹æ€§ï¼Œè€Œå‡ºå»äº†happens-beforeè§„åˆ™å¸¦æ¥çš„å†…å­˜è¯­ä¹‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>weakCompareAndSet</code><strong>æ— æ³•ä¿è¯å¤„ç†æ“ä½œç›®æ ‡çš„volatileå˜é‡å¤–çš„å…¶ä»–å˜é‡çš„æ‰§è¡Œé¡ºåº( ç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ºäº†ä¼˜åŒ–ç¨‹åºæ€§èƒ½è€Œå¯¹æŒ‡ä»¤åºåˆ—è¿›è¡Œé‡æ–°æ’åº )ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•ä¿è¯è¿™äº›å˜é‡çš„å¯è§æ€§ã€‚</strong>è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æé«˜æ€§èƒ½ã€‚</p><p>å†å›åˆ°å¾ªç¯æ¡ä»¶ä¸Šæ¥ï¼Œå¯ä»¥çœ‹åˆ°å®ƒæ˜¯åœ¨ä¸æ–­å°è¯•å»ç”¨CASæ›´æ–°ã€‚å¦‚æœæ›´æ–°å¤±è´¥ï¼Œå°±ç»§ç»­é‡è¯•ã€‚é‚£ä¸ºä»€ä¹ˆè¦æŠŠè·å–â€œæ—§å€¼â€vçš„æ“ä½œæ”¾åˆ°å¾ªç¯ä½“å†…å‘¢ï¼Ÿå…¶å®è¿™ä¹Ÿå¾ˆå¥½ç†è§£ã€‚å‰é¢æˆ‘ä»¬è¯´äº†ï¼ŒCASå¦‚æœæ—§å€¼Vä¸ç­‰äºé¢„æœŸå€¼Eï¼Œå®ƒå°±ä¼šæ›´æ–°å¤±è´¥ã€‚è¯´æ˜æ—§çš„å€¼å‘ç”Ÿäº†å˜åŒ–ã€‚é‚£æˆ‘ä»¬å½“ç„¶éœ€è¦è¿”å›çš„æ˜¯è¢«å…¶ä»–çº¿ç¨‹æ”¹å˜ä¹‹åçš„æ—§å€¼äº†ï¼Œå› æ­¤æ”¾åœ¨äº†doå¾ªç¯ä½“å†…ã€‚</p><h2 id="10-5-CASå®ç°åŸå­æ“ä½œçš„ä¸‰å¤§é—®é¢˜"><a href="#10-5-CASå®ç°åŸå­æ“ä½œçš„ä¸‰å¤§é—®é¢˜" class="headerlink" title="10.5 CASå®ç°åŸå­æ“ä½œçš„ä¸‰å¤§é—®é¢˜"></a>10.5 CASå®ç°åŸå­æ“ä½œçš„ä¸‰å¤§é—®é¢˜</h2><p>è¿™é‡Œä»‹ç»ä¸€ä¸‹CASå®ç°åŸå­æ“ä½œçš„ä¸‰å¤§é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="10-5-1-ABAé—®é¢˜"><a href="#10-5-1-ABAé—®é¢˜" class="headerlink" title="10.5.1 ABAé—®é¢˜"></a>10.5.1 ABAé—®é¢˜</h3><p>æ‰€è°“ABAé—®é¢˜ï¼Œå°±æ˜¯ä¸€ä¸ªå€¼åŸæ¥æ˜¯Aï¼Œå˜æˆäº†Bï¼Œåˆå˜å›äº†Aã€‚è¿™ä¸ªæ—¶å€™ä½¿ç”¨CASæ˜¯æ£€æŸ¥ä¸å‡ºå˜åŒ–çš„ï¼Œä½†å®é™…ä¸Šå´è¢«æ›´æ–°äº†ä¸¤æ¬¡ã€‚</p><p>ABAé—®é¢˜çš„è§£å†³æ€è·¯æ˜¯åœ¨å˜é‡å‰é¢è¿½åŠ ä¸Š<strong>ç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³</strong>ã€‚ä»JDK 1.5å¼€å§‹ï¼ŒJDKçš„atomicåŒ…é‡Œæä¾›äº†ä¸€ä¸ªç±»<code>AtomicStampedReference</code>ç±»æ¥è§£å†³ABAé—®é¢˜ã€‚</p><p>è¿™ä¸ªç±»çš„<code>compareAndSet</code>æ–¹æ³•çš„ä½œç”¨æ˜¯é¦–å…ˆæ£€æŸ¥å½“å‰å¼•ç”¨æ˜¯å¦ç­‰äºé¢„æœŸå¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥å½“å‰æ ‡å¿—æ˜¯å¦ç­‰äºé¢„æœŸæ ‡å¿—ï¼Œå¦‚æœäºŒè€…éƒ½ç›¸ç­‰ï¼Œæ‰ä½¿ç”¨CASè®¾ç½®ä¸ºæ–°çš„å€¼å’Œæ ‡å¿—ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">compareAndSet</span><span class="hljs-params">(V   expectedReference,</span><br><span class="hljs-params">                             V   newReference,</span><br><span class="hljs-params">                             <span class="hljs-type">int</span> expectedStamp,</span><br><span class="hljs-params">                             <span class="hljs-type">int</span> newStamp)</span> &#123;<br>    Pair&lt;V&gt; current = pair;<br>    <span class="hljs-type">return</span><br>        <span class="hljs-variable">expectedReference</span> <span class="hljs-operator">=</span>= current.reference &amp;&amp;<br>        expectedStamp == current.stamp &amp;&amp;<br>        ((newReference == current.reference &amp;&amp;<br>          newStamp == current.stamp) ||<br>         casPair(current, Pair.of(newReference, newStamp)));<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="10-5-2-å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§"><a href="#10-5-2-å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§" class="headerlink" title="10.5.2 å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§"></a>10.5.2 å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§</h3><p>CASå¤šä¸è‡ªæ—‹ç»“åˆã€‚å¦‚æœè‡ªæ—‹CASé•¿æ—¶é—´ä¸æˆåŠŸï¼Œä¼šå ç”¨å¤§é‡çš„CPUèµ„æºã€‚</p><p>è§£å†³æ€è·¯æ˜¯è®©JVMæ”¯æŒå¤„ç†å™¨æä¾›çš„<strong>pauseæŒ‡ä»¤</strong>ã€‚</p><p>pauseæŒ‡ä»¤èƒ½è®©è‡ªæ—‹å¤±è´¥æ—¶cpuç¡çœ ä¸€å°æ®µæ—¶é—´å†ç»§ç»­è‡ªæ—‹ï¼Œä»è€Œä½¿å¾—è¯»æ“ä½œçš„é¢‘ç‡ä½å¾ˆå¤š,ä¸ºè§£å†³å†…å­˜é¡ºåºå†²çªè€Œå¯¼è‡´çš„CPUæµæ°´çº¿é‡æ’çš„ä»£ä»·ä¹Ÿä¼šå°å¾ˆå¤šã€‚</p><h3 id="10-5-3-åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ"><a href="#10-5-3-åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ" class="headerlink" title="10.5.3 åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ"></a>10.5.3 åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œ</h3><p>è¿™ä¸ªé—®é¢˜ä½ å¯èƒ½å·²ç»çŸ¥é“æ€ä¹ˆè§£å†³äº†ã€‚æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>ä½¿ç”¨JDK 1.5å¼€å§‹å°±æä¾›çš„<code>AtomicReference</code>ç±»ä¿è¯å¯¹è±¡ä¹‹é—´çš„åŸå­æ€§ï¼ŒæŠŠå¤šä¸ªå˜é‡æ”¾åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œé¢è¿›è¡ŒCASæ“ä½œï¼›</li><li>ä½¿ç”¨é”ã€‚é”å†…çš„ä¸´ç•ŒåŒºä»£ç å¯ä»¥ä¿è¯åªæœ‰å½“å‰çº¿ç¨‹èƒ½æ“ä½œã€‚</li></ol><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="http://www.importnew.com/27596.html">å¯¹ volatileã€compareAndSetã€weakCompareAndSet çš„ä¸€äº›æ€è€ƒ</a></li><li>ã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹</li></ol>]]></content>
    
    
    <categories>
      
      <category>å¤šçº¿ç¨‹ğŸ¤·â€â™‚ï¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤šçº¿ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹_2</title>
    <link href="/Hexo/2021/04/08/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B02/"/>
    <url>/Hexo/2021/04/08/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B02/</url>
    
    <content type="html"><![CDATA[<h2 id="1-NIO"><a href="#1-NIO" class="headerlink" title="1.NIO"></a>1.NIO</h2><h3 id="1-1-NIOé€šé“å®¢æˆ·ç«¯ã€åº”ç”¨ã€‘"><a href="#1-1-NIOé€šé“å®¢æˆ·ç«¯ã€åº”ç”¨ã€‘" class="headerlink" title="1.1 NIOé€šé“å®¢æˆ·ç«¯ã€åº”ç”¨ã€‘"></a>1.1 NIOé€šé“å®¢æˆ·ç«¯ã€åº”ç”¨ã€‘</h3><ul><li><p>å®¢æˆ·ç«¯å®ç°æ­¥éª¤</p><ol><li>æ‰“å¼€é€šé“</li><li>æŒ‡å®šIPå’Œç«¯å£å·</li><li>å†™å‡ºæ•°æ®</li><li>é‡Šæ”¾èµ„æº</li></ol></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NIOClient</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//1.æ‰“å¼€é€šé“</span><br>        <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> SocketChannel.open();<br><br>        <span class="hljs-comment">//2.æŒ‡å®šIPå’Œç«¯å£å·</span><br>        socketChannel.connect(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>,<span class="hljs-number">10000</span>));<br><br>        <span class="hljs-comment">//3.å†™å‡ºæ•°æ®</span><br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(<span class="hljs-string">&quot;ä¸€ç‚¹å¯’æ¯›å…ˆåˆ¶&quot;</span>.getBytes());<br>        socketChannel.write(byteBuffer);<br><br>        <span class="hljs-comment">//4.é‡Šæ”¾èµ„æº</span><br>        socketChannel.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-2-NIOé€šé“æœåŠ¡ç«¯ã€åº”ç”¨ã€‘"><a href="#1-2-NIOé€šé“æœåŠ¡ç«¯ã€åº”ç”¨ã€‘" class="headerlink" title="1.2 NIOé€šé“æœåŠ¡ç«¯ã€åº”ç”¨ã€‘"></a>1.2 NIOé€šé“æœåŠ¡ç«¯ã€åº”ç”¨ã€‘</h3><ul><li><p>NIOé€šé“</p><ul><li><p>æœåŠ¡ç«¯é€šé“ </p><p>åªè´Ÿè´£å»ºç«‹å»ºç«‹ï¼Œä¸è´Ÿè´£ä¼ é€’æ•°æ®</p></li><li><p>å®¢æˆ·ç«¯é€šé“</p><p>å»ºç«‹å»ºç«‹å¹¶å°†æ•°æ®ä¼ é€’ç»™æœåŠ¡ç«¯</p></li><li><p>ç¼“å†²åŒº</p><p>å®¢æˆ·ç«¯å‘é€çš„æ•°æ®éƒ½åœ¨ç¼“å†²åŒºä¸­</p></li><li><p>æœåŠ¡ç«¯é€šé“å†…éƒ¨åˆ›å»ºå‡ºæ¥çš„å®¢æˆ·ç«¯é€šé“</p><p>ç›¸å½“äºå®¢æˆ·ç«¯é€šé“çš„å»¶ä¼¸ç”¨æ¥ä¼ é€’æ•°æ®</p></li></ul></li><li><p>æœåŠ¡ç«¯å®ç°æ­¥éª¤</p><ol><li>æ‰“å¼€ä¸€ä¸ªæœåŠ¡ç«¯é€šé“</li><li>ç»‘å®šå¯¹åº”çš„ç«¯å£å·</li><li>é€šé“é»˜è®¤æ˜¯é˜»å¡çš„ï¼Œéœ€è¦è®¾ç½®ä¸ºéé˜»å¡</li><li>æ­¤æ—¶æ²¡æœ‰é—¨å«å¤§çˆ·ï¼Œæ‰€ä»¥éœ€è¦ç»å¸¸çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰è¿æ¥å‘è¿‡æ¥æ²¡ï¼Ÿ</li><li>å¦‚æœæœ‰å®¢æˆ·ç«¯æ¥è¿æ¥äº†,åˆ™åœ¨æœåŠ¡ç«¯é€šé“å†…éƒ¨,å†åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯é€šé“,ç›¸å½“äºæ˜¯å®¢æˆ·ç«¯é€šé“çš„å»¶ä¼¸</li><li>è·å–å®¢æˆ·ç«¯ä¼ é€’è¿‡æ¥çš„æ•°æ®,å¹¶æŠŠæ•°æ®æ”¾åœ¨byteBuffer1è¿™ä¸ªç¼“å†²åŒºä¸­</li><li>ç»™å®¢æˆ·ç«¯å›å†™æ•°æ®</li><li>é‡Šæ”¾èµ„æº</li></ol></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NIOServer</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><span class="hljs-comment">//        1.æ‰“å¼€ä¸€ä¸ªæœåŠ¡ç«¯é€šé“</span><br>        <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">serverSocketChannel</span> <span class="hljs-operator">=</span> ServerSocketChannel.open();<br><span class="hljs-comment">//        2.ç»‘å®šå¯¹åº”çš„ç«¯å£å·</span><br>        serverSocketChannel.bind(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">10000</span>));<br><span class="hljs-comment">//        3.é€šé“é»˜è®¤æ˜¯é˜»å¡çš„ï¼Œéœ€è¦è®¾ç½®ä¸ºéé˜»å¡</span><br>            <span class="hljs-comment">//å¦‚æœä¼ é€’true è¡¨ç¤ºé€šé“è®¾ç½®ä¸ºé˜»å¡é€šé“...é»˜è®¤å€¼</span><br>            <span class="hljs-comment">//å¦‚æœä¼ é€’false è¡¨ç¤ºé€šé“è®¾ç½®ä¸ºéé˜»å¡é€šé“</span><br>        serverSocketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br><span class="hljs-comment">//        4.æ­¤æ—¶æ²¡æœ‰é—¨å«å¤§çˆ·ï¼Œæ‰€ä»¥éœ€è¦ç»å¸¸çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰è¿æ¥å‘è¿‡æ¥æ²¡ï¼Ÿ</span><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br><span class="hljs-comment">//        5.å¦‚æœæœ‰å®¢æˆ·ç«¯æ¥è¿æ¥äº†ï¼Œåˆ™åœ¨æœåŠ¡ç«¯é€šé“å†…éƒ¨ï¼Œå†åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯é€šé“ï¼Œç›¸å½“äºæ˜¯å®¢æˆ·ç«¯é€šé“çš„å»¶ä¼¸</span><br>            <span class="hljs-comment">//æ­¤æ—¶å·²ç»è®¾ç½®äº†é€šé“ä¸ºéé˜»å¡</span><br>            <span class="hljs-comment">//æ‰€ä»¥åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™,å¦‚æœæœ‰å®¢æˆ·ç«¯æ¥è¿æ¥,é‚£ä¹ˆä¼šåˆ›å»ºä¸€ä¸ªSocketChannelå¯¹è±¡.</span><br>            <span class="hljs-comment">//å¦‚æœåœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™,æ²¡æœ‰å®¢æˆ·ç«¯æ¥è¿æ¥,é‚£ä¹ˆä»–ä¼šè¿”å›ä¸€ä¸ªnull</span><br>            <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> serverSocketChannel.accept();<br>            <span class="hljs-comment">//System.out.println(socketChannel);</span><br>            <span class="hljs-keyword">if</span>(socketChannel != <span class="hljs-literal">null</span>)&#123;<br><span class="hljs-comment">//        6.å®¢æˆ·ç«¯å°†ç¼“å†²åŒºé€šè¿‡é€šé“ä¼ é€’ç»™æœåŠ¡ç«¯,å°±åˆ°äº†è¿™ä¸ªå»¶ä¼¸é€šé“socketChannelé‡Œé¢</span><br><span class="hljs-comment">//        7.æœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ªç©ºçš„ç¼“å†²åŒºè£…æ•°æ®å¹¶è¾“å‡º</span><br>                <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);<br>                <span class="hljs-comment">//è·å–ä¼ é€’è¿‡æ¥çš„æ•°æ®,å¹¶æŠŠä»–ä»¬æ”¾åˆ°byteBufferç¼“å†²åŒºä¸­.</span><br>                <span class="hljs-comment">//è¿”å›å€¼:</span><br>                    <span class="hljs-comment">//æ­£æ•°: è¡¨ç¤ºæœ¬æ¬¡è¯»åˆ°çš„æœ‰æ•ˆå­—èŠ‚ä¸ªæ•°.</span><br>                    <span class="hljs-comment">//0   : è¡¨ç¤ºæœ¬æ¬¡æ²¡æœ‰è¯»åˆ°æœ‰æ•ˆå­—èŠ‚.</span><br>                    <span class="hljs-comment">//-1  : è¡¨ç¤ºè¯»åˆ°äº†æœ«å°¾</span><br>                <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> socketChannel.read(byteBuffer);<br>                System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteBuffer.array(),<span class="hljs-number">0</span>,len));<br>              <span class="hljs-comment">//8.é‡Šæ”¾èµ„æº</span><br>                socketChannel.close();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-3-NIOé€šé“ç»ƒä¹ ã€åº”ç”¨ã€‘"><a href="#1-3-NIOé€šé“ç»ƒä¹ ã€åº”ç”¨ã€‘" class="headerlink" title="1.3 NIOé€šé“ç»ƒä¹ ã€åº”ç”¨ã€‘"></a>1.3 NIOé€šé“ç»ƒä¹ ã€åº”ç”¨ã€‘</h3><ul><li><p>å®¢æˆ·ç«¯</p><ul><li><p>å®ç°æ­¥éª¤</p><ol><li>æ‰“å¼€é€šé“</li><li>æŒ‡å®šIPå’Œç«¯å£å·</li><li>å†™å‡ºæ•°æ®</li><li>è¯»å–æœåŠ¡å™¨å†™å›çš„æ•°æ®</li><li>é‡Šæ”¾èµ„æº</li></ol></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Clinet</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">// 1.æ‰“å¼€é€šé“</span><br>        <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> SocketChannel.open();<br>        <span class="hljs-comment">// 2.æŒ‡å®šIPå’Œç«¯å£å·</span><br>        socketChannel.connect(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>,<span class="hljs-number">10000</span>));<br>        <span class="hljs-comment">// 3.å†™å‡ºæ•°æ®</span><br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer1</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(<span class="hljs-string">&quot;åƒä¿ºè€å­™ä¸€æ£’æ£’&quot;</span>.getBytes());<br>        socketChannel.write(byteBuffer1);<br>  <span class="hljs-comment">// æ‰‹åŠ¨å†™å…¥ç»“æŸæ ‡è®°</span><br>        socketChannel.shutdownOutput();<br><br>        System.out.println(<span class="hljs-string">&quot;æ•°æ®å·²ç»å†™ç»™æœåŠ¡å™¨&quot;</span>);<br>        <span class="hljs-comment">// 4.è¯»å–æœåŠ¡å™¨å†™å›çš„æ•°æ®</span><br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer2</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);<br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span>((len = socketChannel.read(byteBuffer2)) != -<span class="hljs-number">1</span>)&#123;<br>            byteBuffer2.flip();<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteBuffer2.array(),<span class="hljs-number">0</span>,len));<br>            byteBuffer2.clear();<br>        &#125;<br>        <span class="hljs-comment">// 5.é‡Šæ”¾èµ„æº</span><br>        socketChannel.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li><li><p>æœåŠ¡ç«¯</p><ul><li><p>å®ç°æ­¥éª¤</p><ol><li>æ‰“å¼€ä¸€ä¸ªæœåŠ¡ç«¯é€šé“</li><li>ç»‘å®šå¯¹åº”çš„ç«¯å£å·</li><li>é€šé“é»˜è®¤æ˜¯é˜»å¡çš„ï¼Œéœ€è¦è®¾ç½®ä¸ºéé˜»å¡</li><li>æ­¤æ—¶æ²¡æœ‰é—¨å«å¤§çˆ·ï¼Œæ‰€ä»¥éœ€è¦ç»å¸¸çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰è¿æ¥å‘è¿‡æ¥æ²¡ï¼Ÿ</li><li>å¦‚æœæœ‰å®¢æˆ·ç«¯æ¥è¿æ¥äº†,åˆ™åœ¨æœåŠ¡ç«¯é€šé“å†…éƒ¨,å†åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯é€šé“,ç›¸å½“äºæ˜¯å®¢æˆ·ç«¯é€šé“çš„å»¶ä¼¸</li><li>è·å–å®¢æˆ·ç«¯ä¼ é€’è¿‡æ¥çš„æ•°æ®,å¹¶æŠŠæ•°æ®æ”¾åœ¨byteBuffer1è¿™ä¸ªç¼“å†²åŒºä¸­</li><li>ç»™å®¢æˆ·ç«¯å›å†™æ•°æ®</li><li>é‡Šæ”¾èµ„æº</li></ol></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sever</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">// 1ï¼Œæ‰“å¼€ä¸€ä¸ªæœåŠ¡ç«¯é€šé“</span><br>        <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">serverSocketChannel</span> <span class="hljs-operator">=</span> ServerSocketChannel.open();<br>        <span class="hljs-comment">// 2ï¼Œç»‘å®šå¯¹åº”çš„ç«¯å£å·</span><br>        serverSocketChannel.bind(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">10000</span>));<br>        <span class="hljs-comment">// 3ï¼Œé€šé“é»˜è®¤æ˜¯é˜»å¡çš„ï¼Œéœ€è¦è®¾ç½®ä¸ºéé˜»å¡</span><br>        serverSocketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br>        <span class="hljs-comment">// 4ï¼Œæ­¤æ—¶æ²¡æœ‰é—¨å«å¤§çˆ·ï¼Œæ‰€ä»¥éœ€è¦ç»å¸¸çœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰è¿æ¥å‘è¿‡æ¥æ²¡ï¼Ÿ</span><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-comment">//  5ï¼Œå¦‚æœæœ‰å®¢æˆ·ç«¯æ¥è¿æ¥äº†ï¼Œåˆ™åœ¨æœåŠ¡ç«¯é€šé“å†…éƒ¨ï¼Œå†åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯é€šé“ï¼Œç›¸å½“äºæ˜¯å®¢æˆ·ç«¯é€šé“çš„å»¶ä¼¸</span><br>            <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> serverSocketChannel.accept();<br>            <span class="hljs-keyword">if</span>(socketChannel != <span class="hljs-literal">null</span>)&#123;<br>                System.out.println(<span class="hljs-string">&quot;æ­¤æ—¶æœ‰å®¢æˆ·ç«¯æ¥è¿æ¥äº†&quot;</span>);<br>                <span class="hljs-comment">// 6,è·å–å®¢æˆ·ç«¯ä¼ é€’è¿‡æ¥çš„æ•°æ®,å¹¶æŠŠæ•°æ®æ”¾åœ¨byteBuffer1è¿™ä¸ªç¼“å†²åŒºä¸­</span><br>                <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer1</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);<br>                <span class="hljs-comment">//socketChannel.read(byteBuffer1);</span><br>                <span class="hljs-type">int</span> len;<br>                <span class="hljs-comment">//é’ˆå¯¹äºç¼“å†²åŒºæ¥è®²</span><br>                    <span class="hljs-comment">//å¦‚æœ ä»æ·»åŠ æ•°æ® ----&gt; è·å–æ•°æ® flip</span><br>                    <span class="hljs-comment">//å¦‚æœ ä»è·å–æ•°æ® ----&gt; æ·»åŠ æ•°æ® clear</span><br>                <span class="hljs-keyword">while</span>((len = socketChannel.read(byteBuffer1)) != -<span class="hljs-number">1</span>)&#123;<br>                    byteBuffer1.flip();<br>                    System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteBuffer1.array(),<span class="hljs-number">0</span>,len));<br>                    byteBuffer1.clear();<br>                &#125;<br><br>                System.out.println(<span class="hljs-string">&quot;æ¥æ”¶æ•°æ®å®Œæ¯•,å‡†å¤‡å¼€å§‹å¾€å®¢æˆ·ç«¯å›å†™æ•°æ®&quot;</span>);<br>                <span class="hljs-comment">// 7,ç»™å®¢æˆ·ç«¯å›å†™æ•°æ®</span><br>                <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer2</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(<span class="hljs-string">&quot;å“å“Ÿ,çœŸç–¼å•Š!!!&quot;</span>.getBytes());<br>                socketChannel.write(byteBuffer2);<br>                <span class="hljs-comment">// 8,é‡Šæ”¾èµ„æº</span><br>                socketChannel.close();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="1-4-NIOé€šé“ç»ƒä¹ ä¼˜åŒ–ã€åº”ç”¨ã€‘"><a href="#1-4-NIOé€šé“ç»ƒä¹ ä¼˜åŒ–ã€åº”ç”¨ã€‘" class="headerlink" title="1.4 NIOé€šé“ç»ƒä¹ ä¼˜åŒ–ã€åº”ç”¨ã€‘"></a>1.4 NIOé€šé“ç»ƒä¹ ä¼˜åŒ–ã€åº”ç”¨ã€‘</h3><ul><li><p>å­˜åœ¨é—®é¢˜</p><p>æœåŠ¡ç«¯å†…éƒ¨è·å–çš„å®¢æˆ·ç«¯é€šé“åœ¨è¯»å–æ—¶,å¦‚æœè¯»å–ä¸åˆ°ç»“æŸæ ‡è®°å°±ä¼šä¸€ç›´é˜»å¡</p></li><li><p>è§£å†³æ–¹æ¡ˆ</p><p>å°†æœåŠ¡ç«¯å†…éƒ¨è·å–çš„å®¢æˆ·ç«¯é€šé“è®¾ç½®ä¸ºéé˜»å¡çš„</p></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å®¢æˆ·ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Clinet</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> SocketChannel.open();<br><br>        socketChannel.connect(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>,<span class="hljs-number">10000</span>));<br><br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer1</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(<span class="hljs-string">&quot;åƒä¿ºè€å­™ä¸€æ£’æ£’&quot;</span>.getBytes());<br>        socketChannel.write(byteBuffer1);<br><br>        System.out.println(<span class="hljs-string">&quot;æ•°æ®å·²ç»å†™ç»™æœåŠ¡å™¨&quot;</span>);<br><br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer2</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);<br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span>((len = socketChannel.read(byteBuffer2)) != -<span class="hljs-number">1</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯æ¥æ”¶å›å†™æ•°æ®&quot;</span>);<br>            byteBuffer2.flip();<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteBuffer2.array(),<span class="hljs-number">0</span>,len));<br>            byteBuffer2.clear();<br>        &#125;<br>        socketChannel.close();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æœåŠ¡ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sever</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">serverSocketChannel</span> <span class="hljs-operator">=</span> ServerSocketChannel.open();<br><br>        serverSocketChannel.bind(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">10000</span>));<br><br>        serverSocketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> serverSocketChannel.accept();<br>            <span class="hljs-keyword">if</span>(socketChannel != <span class="hljs-literal">null</span>)&#123;<br>                System.out.println(<span class="hljs-string">&quot;æ­¤æ—¶æœ‰å®¢æˆ·ç«¯æ¥è¿æ¥äº†&quot;</span>);<br>              <span class="hljs-comment">// å°†æœåŠ¡ç«¯å†…éƒ¨è·å–çš„å®¢æˆ·ç«¯é€šé“è®¾ç½®ä¸ºéé˜»å¡çš„</span><br>                socketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br>                <span class="hljs-comment">//è·å–å®¢æˆ·ç«¯ä¼ é€’è¿‡æ¥çš„æ•°æ®,å¹¶æŠŠæ•°æ®æ”¾åœ¨byteBuffer1è¿™ä¸ªç¼“å†²åŒºä¸­</span><br>                <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer1</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);<br>                <span class="hljs-comment">//socketChannel.read(byteBuffer1);</span><br>                <span class="hljs-type">int</span> len;<br>                <span class="hljs-comment">//é’ˆå¯¹äºç¼“å†²åŒºæ¥è®²</span><br>                    <span class="hljs-comment">//å¦‚æœ ä»æ·»åŠ æ•°æ® ----&gt; è·å–æ•°æ® flip</span><br>                    <span class="hljs-comment">//å¦‚æœ ä»è·å–æ•°æ® ----&gt; æ·»åŠ æ•°æ® clear</span><br>                <span class="hljs-keyword">while</span>((len = socketChannel.read(byteBuffer1)) &gt; <span class="hljs-number">0</span>)&#123;<br>                    System.out.println(<span class="hljs-string">&quot;æœåŠ¡ç«¯æ¥æ”¶å‘é€æ•°æ®&quot;</span>);<br>                    byteBuffer1.flip();<br>                    System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteBuffer1.array(),<span class="hljs-number">0</span>,len));<br>                    byteBuffer1.clear();<br>                &#125;<br><br>                System.out.println(<span class="hljs-string">&quot;æ¥æ”¶æ•°æ®å®Œæ¯•,å‡†å¤‡å¼€å§‹å¾€å®¢æˆ·ç«¯å›å†™æ•°æ®&quot;</span>);<br><br>                <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer2</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(<span class="hljs-string">&quot;å“å“Ÿ,çœŸç–¼å•Š!!!&quot;</span>.getBytes());<br>                socketChannel.write(byteBuffer2);<br><br>                socketChannel.close();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-5NIOé€‰æ‹©å™¨ã€ç†è§£ã€‘"><a href="#1-5NIOé€‰æ‹©å™¨ã€ç†è§£ã€‘" class="headerlink" title="1.5NIOé€‰æ‹©å™¨ã€ç†è§£ã€‘"></a>1.5NIOé€‰æ‹©å™¨ã€ç†è§£ã€‘</h3><ul><li><p>æ¦‚è¿°</p><p>é€‰æ‹©å™¨å¯ä»¥ç›‘è§†é€šé“çš„çŠ¶æ€,å¤šè·¯å¤ç”¨</p><p><img src="/Hexo/../img/202202221209649.png" alt="02_é€‰æ‹©å™¨æ¦‚è¿°"></p><p><img src="/Hexo/../img/202202221209448.png" alt="01_é€‰æ‹©å™¨å¤šè·¯å¤ç”¨"></p></li><li><p>é€‰æ‹©å™¨å¯¹è±¡</p><ul><li><p>Selector</p><p>é€‰æ‹©å™¨å¯¹è±¡</p></li><li><p>SelectionKey</p><p>ç»‘å®šçš„key</p></li><li><p>SelectableChannel</p><p>èƒ½ä½¿ç”¨é€‰æ‹©å™¨çš„é€šé“</p><ul><li>SocketChannel</li><li>ServerSocketChannel</li></ul></li></ul></li></ul><h3 id="1-6NIOé€‰æ‹©å™¨æ”¹å†™æœåŠ¡ç«¯ã€åº”ç”¨ã€‘"><a href="#1-6NIOé€‰æ‹©å™¨æ”¹å†™æœåŠ¡ç«¯ã€åº”ç”¨ã€‘" class="headerlink" title="1.6NIOé€‰æ‹©å™¨æ”¹å†™æœåŠ¡ç«¯ã€åº”ç”¨ã€‘"></a>1.6NIOé€‰æ‹©å™¨æ”¹å†™æœåŠ¡ç«¯ã€åº”ç”¨ã€‘</h3><ul><li><p>å®ç°æ­¥éª¤</p><ol><li><p>æ‰“å¼€ä¸€ä¸ªæœåŠ¡ç«¯é€šé“(open)</p></li><li><p>ç»‘å®šå¯¹åº”çš„ç«¯å£å·</p></li><li><p>é€šé“é»˜è®¤æ˜¯é˜»å¡çš„ï¼Œéœ€è¦è®¾ç½®ä¸ºéé˜»å¡</p></li><li><p>æ‰“å¼€ä¸€ä¸ªé€‰æ‹©å™¨ï¼ˆé—¨å«å¤§çˆ·ï¼‰</p></li><li><p>å°†é€‰æ‹©å™¨ç»‘å®šæœåŠ¡ç«¯é€šé“ï¼Œå¹¶ç›‘è§†æœåŠ¡ç«¯æ˜¯å¦å‡†å¤‡å¥½</p></li><li><p>å¦‚æœæœ‰å®¢æˆ·ç«¯æ¥è¿æ¥äº†ï¼Œå¤§çˆ·ä¼šéå†æ‰€æœ‰çš„æœåŠ¡ç«¯é€šé“ï¼Œè°å‡†å¤‡å¥½äº†ï¼Œå°±è®©è°æ¥è¿æ¥<br>  è¿æ¥åï¼Œåœ¨æœåŠ¡ç«¯é€šé“å†…éƒ¨ï¼Œå†åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯å»¶ä¼¸é€šé“</p></li><li><p>å¦‚æœå®¢æˆ·ç«¯æŠŠæ•°æ®ä¼ é€’è¿‡æ¥äº†ï¼Œå¤§çˆ·ä¼šéå†æ‰€æœ‰çš„å»¶ä¼¸é€šé“ï¼Œè°å‡†å¤‡å¥½äº†ï¼Œè°å»æ¥æ”¶æ•°æ®</p><p>  <img src="/Hexo/../img/202202221209842.png" alt="03_é€‰æ‹©å™¨æ”¹å†™æœåŠ¡å™¨"></p></li></ol></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å®¢æˆ·ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Clinet</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> SocketChannel.open();<br><br>        socketChannel.connect(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>,<span class="hljs-number">10000</span>));<br><br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer1</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(<span class="hljs-string">&quot;åƒä¿ºè€å­™ä¸€æ£’æ£’&quot;</span>.getBytes());<br>        socketChannel.write(byteBuffer1);<br><br>        System.out.println(<span class="hljs-string">&quot;æ•°æ®å·²ç»å†™ç»™æœåŠ¡å™¨&quot;</span>);<br><br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer2</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);<br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span>((len = socketChannel.read(byteBuffer2)) != -<span class="hljs-number">1</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;å®¢æˆ·ç«¯æ¥æ”¶å›å†™æ•°æ®&quot;</span>);<br>            byteBuffer2.flip();<br>            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteBuffer2.array(),<span class="hljs-number">0</span>,len));<br>            byteBuffer2.clear();<br>        &#125;<br>        socketChannel.close();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æœåŠ¡ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Server</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//1.æ‰“å¼€æœåŠ¡ç«¯é€šé“</span><br>        <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">serverSocketChannel</span> <span class="hljs-operator">=</span> ServerSocketChannel.open();<br>        <span class="hljs-comment">//2.è®©è¿™ä¸ªé€šé“ç»‘å®šä¸€ä¸ªç«¯å£</span><br>        serverSocketChannel.bind(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">10000</span>));<br>        <span class="hljs-comment">//3.è®¾ç½®é€šé“ä¸ºéé˜»å¡</span><br>        serverSocketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br>        <span class="hljs-comment">//4.æ‰“å¼€ä¸€ä¸ªé€‰æ‹©å™¨</span><br>        <span class="hljs-comment">//Selector --- é€‰æ‹©å™¨</span><br><span class="hljs-comment">//        SelectionKey --- ç»‘å®šé€šé“åè¿”å›é‚£ä¸ªä»¤ç‰Œ</span><br>  <span class="hljs-comment">//      SelectableChannel --- å¯ä»¥ä½¿ç”¨é€‰æ‹©å™¨çš„é€šé“</span><br>        <span class="hljs-type">Selector</span> <span class="hljs-variable">selector</span> <span class="hljs-operator">=</span> Selector.open();<br>        <span class="hljs-comment">//5.ç»‘å®šé€‰æ‹©å™¨å’ŒæœåŠ¡ç«¯é€šé“</span><br>        serverSocketChannel.register(selector,SelectionKey.OP_ACCEPT);<br><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;11&quot;</span>);<br>            <span class="hljs-comment">//é€‰æ‹©å™¨ä¼šç›‘è§†å®¢æˆ·ç«¯é€šé“çš„çŠ¶æ€.</span><br>            <span class="hljs-comment">//6.è¿”å›å€¼å°±è¡¨ç¤ºæ­¤æ—¶æœ‰å¤šå°‘ä¸ªå®¢æˆ·ç«¯æ¥è¿æ¥.</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> selector.select();<br>            System.out.println(<span class="hljs-string">&quot;222&quot;</span>);<br>            <span class="hljs-keyword">if</span>(count != <span class="hljs-number">0</span>)&#123;<br>                System.out.println(<span class="hljs-string">&quot;æœ‰å®¢æˆ·ç«¯æ¥è¿æ¥äº†&quot;</span>);<br>                <span class="hljs-comment">//7.ä¼šéå†æ‰€æœ‰çš„æœåŠ¡ç«¯é€šé“.çœ‹è°å‡†å¤‡å¥½äº†,è°å‡†å¤‡å¥½äº†,å°±è®©è°å»è¿æ¥.</span><br>                <span class="hljs-comment">//è·å–æ‰€æœ‰æœåŠ¡ç«¯é€šé“çš„ä»¤ç‰Œ,å¹¶å°†å®ƒä»¬éƒ½æ”¾åˆ°ä¸€ä¸ªé›†åˆä¸­,å°†é›†åˆè¿”å›.</span><br>                Set&lt;SelectionKey&gt; selectionKeys = selector.selectedKeys();<br>                Iterator&lt;SelectionKey&gt; iterator = selectionKeys.iterator();<br>                <span class="hljs-keyword">while</span>(iterator.hasNext())&#123;<br>                    <span class="hljs-comment">//selectionKey ä¾æ¬¡è¡¨ç¤ºæ¯ä¸€ä¸ªæœåŠ¡ç«¯é€šé“çš„ä»¤ç‰Œ</span><br>                    <span class="hljs-type">SelectionKey</span> <span class="hljs-variable">selectionKey</span> <span class="hljs-operator">=</span> iterator.next();<br>                    <span class="hljs-keyword">if</span>(selectionKey.isAcceptable())&#123;<br>                        <span class="hljs-comment">//å¯ä»¥é€šè¿‡ä»¤ç‰Œæ¥è·å–åˆ°äº†ä¸€ä¸ªå·²ç»å°±ç»ªçš„æœåŠ¡ç«¯é€šé“</span><br>                        <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">ssc</span> <span class="hljs-operator">=</span> (ServerSocketChannel) selectionKey.channel();<br>                        <span class="hljs-comment">//å®¢æˆ·ç«¯çš„å»¶ä¼¸é€šé“</span><br>                        <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> ssc.accept();<br>                        <span class="hljs-comment">//å°†å®¢æˆ·ç«¯å»¶ä¼¸é€šé“è®¾ç½®ä¸ºéé˜»å¡çš„</span><br>                        socketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br>                        socketChannel.register(selector,SelectionKey.OP_READ);<br>                        <span class="hljs-comment">//å½“å®¢æˆ·ç«¯æ¥è¿æ¥çš„æ—¶å€™,æ‰€æœ‰çš„æ­¥éª¤å·²ç»å…¨éƒ¨æ‰§è¡Œå®Œæ¯•.</span><br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(selectionKey.isReadable())&#123;<br>                        <span class="hljs-comment">//å½“å‰é€šé“å·²ç»åšå¥½äº†è¯»å–çš„å‡†å¤‡(å»¶ä¼¸é€šé“)</span><br>                        <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> (SocketChannel) selectionKey.channel();<br>                        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer1</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);<br>                        <span class="hljs-comment">//socketChannel.read(byteBuffer1);</span><br>                        <span class="hljs-type">int</span> len;<br>                        <span class="hljs-keyword">while</span>((len = socketChannel.read(byteBuffer1)) &gt; <span class="hljs-number">0</span>)&#123;<br>                            byteBuffer1.flip();<br>                            System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteBuffer1.array(),<span class="hljs-number">0</span>,len));<br>                            byteBuffer1.clear();<br>                        &#125;<br>                        <span class="hljs-comment">//ç»™å®¢æˆ·ç«¯çš„å›å†™æ•°æ®</span><br>                        socketChannel.write(ByteBuffer.wrap(<span class="hljs-string">&quot;å“å“Ÿå–‚å¥½ç–¼å•Š!!!&quot;</span>.getBytes()));<br>                        socketChannel.close();<br>                    &#125;<br>                    iterator.remove();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-HTTPåè®®"><a href="#2-HTTPåè®®" class="headerlink" title="2.HTTPåè®®"></a>2.HTTPåè®®</h2><h3 id="2-1æ¦‚è¿°ã€ç†è§£ã€‘"><a href="#2-1æ¦‚è¿°ã€ç†è§£ã€‘" class="headerlink" title="2.1æ¦‚è¿°ã€ç†è§£ã€‘"></a>2.1æ¦‚è¿°ã€ç†è§£ã€‘</h3><p>è¶…æ–‡æœ¬ä¼ è¾“åè®®(å…³äºè¶…æ–‡æœ¬çš„æ¦‚å¿µJavaWebåœ¨è¿›è¡Œå­¦ä¹ )ï¼Œæ˜¯å»ºç«‹åœ¨TCP&#x2F;IPåè®®åŸºç¡€ä¸Š,æ˜¯ç½‘ç»œåº”ç”¨å±‚çš„åè®®ã€‚</p><p>ç”±è¯·æ±‚å’Œå“åº”æ„æˆ,æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ¨¡å‹</p><h3 id="2-2URLã€ç†è§£ã€‘"><a href="#2-2URLã€ç†è§£ã€‘" class="headerlink" title="2.2URLã€ç†è§£ã€‘"></a>2.2URLã€ç†è§£ã€‘</h3><ul><li><p>æ¦‚è¿°</p><p>ç»Ÿä¸€èµ„æºå®šä½ç¬¦,å¸¸è§çš„å¦‚<a href="http://bbs.itheima.com/forum.php">http://bbs.itheima.com/forum.php</a></p><p>å®Œæ•´çš„æ ¼å¼ä¸º <a href="http://bbs.itheima.com/forum.php">http://bbs.itheima.com:80/forum.php</a></p></li><li><p>è¯¦è§£</p><p><img src="/Hexo/../img/202202221209305.png" alt="04_url"></p></li></ul><h3 id="2-3æŠ“åŒ…å·¥å…·çš„ä½¿ç”¨ã€åº”ç”¨ã€‘"><a href="#2-3æŠ“åŒ…å·¥å…·çš„ä½¿ç”¨ã€åº”ç”¨ã€‘" class="headerlink" title="2.3æŠ“åŒ…å·¥å…·çš„ä½¿ç”¨ã€åº”ç”¨ã€‘"></a>2.3æŠ“åŒ…å·¥å…·çš„ä½¿ç”¨ã€åº”ç”¨ã€‘</h3><ul><li><p>ä½¿ç”¨æ­¥éª¤</p><ol><li><p>åœ¨è°·æ­Œæµè§ˆå™¨ç½‘é¡µä¸­æŒ‰F12 æˆ–è€…ç½‘é¡µç©ºç™½å¤„å³é”®,ç‚¹å‡»æ£€æŸ¥,å¯ä»¥è°ƒå‡ºå·¥å…·</p></li><li><p>ç‚¹å‡»network,è¿›å…¥åˆ°æŸ¥çœ‹ç½‘ç»œç›¸å…³ä¿¡æ¯ç•Œé¢</p></li><li><p>è¿™æ—¶åœ¨æµè§ˆå™¨ä¸­å‘èµ·è¯·æ±‚,è¿›è¡Œè®¿é—®,å·¥å…·ä¸­å°±ä¼šæ˜¾ç¤ºå‡ºè¯·æ±‚å’Œå“åº”ç›¸å…³çš„ä¿¡æ¯</p><p><img src="/Hexo/../img/202202221209705.png" alt="05_æŠ“åŒ…"></p></li></ol></li></ul><h3 id="2-4è¯·æ±‚ä¿¡æ¯ã€ç†è§£ã€‘"><a href="#2-4è¯·æ±‚ä¿¡æ¯ã€ç†è§£ã€‘" class="headerlink" title="2.4è¯·æ±‚ä¿¡æ¯ã€ç†è§£ã€‘"></a>2.4è¯·æ±‚ä¿¡æ¯ã€ç†è§£ã€‘</h3><ul><li><p>ç»„æˆ</p><ul><li>è¯·æ±‚è¡Œ</li><li>è¯·æ±‚å¤´</li><li>è¯·æ±‚ç©ºè¡Œ</li><li>è¯·æ±‚ä½“</li></ul></li><li><p>è¯·æ±‚è¡Œ</p><ul><li><p>æ ¼å¼</p><p><img src="/Hexo/../img/202202221209586.png" alt="06_è¯·æ±‚è¡Œæ ¼å¼"></p></li><li><p>è¯·æ±‚æ–¹å¼</p><p>GET,POST,HEAD,PUT,DELETE,CONNECT,OPTIONS,TRACE,PATCH</p><p>å…¶ä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯GETå’ŒPOST</p></li><li><p>URI</p><p>è¯·æ±‚èµ„æºè·¯å¾„,ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦</p><p><img src="/Hexo/../img/202202221209593.png" alt="07_Uriå›¾ç¤º"></p></li><li><p>åè®®ç‰ˆæœ¬</p><ul><li>HTTP1.0: æ¯æ¬¡è¯·æ±‚å’Œå“åº”éƒ½éœ€è¦å»ºç«‹ä¸€ä¸ªå•ç‹¬çš„è¿æ¥</li><li>HTTP1.1:æ”¯æŒé•¿è¿æ¥</li></ul></li></ul></li><li><p>è¯·æ±‚å¤´</p><ul><li><p>æ ¼å¼</p><p><img src="/Hexo/../img/202202221209257.png" alt="08_è¯·æ±‚å¤´å›¾ç¤º"></p></li><li><p>è¯·æ±‚å¤´åç§°</p><ul><li>Host: ç”¨æ¥æŒ‡å®šè¯·æ±‚çš„æœåŠ¡ç«¯åœ°å€</li><li>Connection: å–å€¼ä¸ºkeep-aliveè¡¨ç¤ºéœ€è¦æŒä¹…è¿æ¥</li><li>User-Agent: å®¢æˆ·ç«¯çš„ä¿¡æ¯</li><li>Accept: æŒ‡å®šå®¢æˆ·ç«¯èƒ½å¤Ÿæ¥æ”¶çš„å†…å®¹ç±»å‹</li><li>Accept-Encoding: æŒ‡å®šæµè§ˆå™¨å¯ä»¥æ”¯æŒçš„æœåŠ¡å™¨è¿”å›å†…å®¹å‹ç¼©ç¼–ç ç±»å‹</li><li>Accept-Language: æµè§ˆå™¨å¯æ¥å—çš„è¯­è¨€</li></ul><p><img src="/Hexo/../img/202202221209954.png" alt="09_è¯·æ±‚å¤´ç¤ºä¾‹"></p></li></ul></li><li><p>å°ç»“</p><p><img src="/Hexo/../img/202202221209745.png" alt="10_è¯·æ±‚ä¿¡æ¯å°ç»“"></p></li></ul><h3 id="2-5å“åº”ä¿¡æ¯ã€ç†è§£ã€‘"><a href="#2-5å“åº”ä¿¡æ¯ã€ç†è§£ã€‘" class="headerlink" title="2.5å“åº”ä¿¡æ¯ã€ç†è§£ã€‘"></a>2.5å“åº”ä¿¡æ¯ã€ç†è§£ã€‘</h3><ul><li><p>ç»„æˆ</p><ul><li>å“åº”è¡Œ</li><li>å“åº”å¤´</li><li>å“åº”ç©ºè¡Œ</li><li>å“åº”ä½“</li></ul></li><li><p>å“åº”è¡Œ</p><ul><li><p>æ ¼å¼</p><p><img src="/Hexo/../img/202202221209457.png" alt="11_å“åº”å¤´æ ¼å¼"></p></li><li><p>åè®®ç‰ˆæœ¬</p><ul><li>HTTP1.0: æ¯æ¬¡è¯·æ±‚å’Œå“åº”éƒ½éœ€è¦å»ºç«‹ä¸€ä¸ªå•ç‹¬çš„è¿æ¥</li><li>HTTP1.1: æ”¯æŒé•¿è¿æ¥</li></ul></li><li><p>å“åº”çŠ¶æ€ç </p><ul><li>1xx: æŒ‡ç¤ºä¿¡æ¯(è¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†)</li><li>2xx: æˆåŠŸ(è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ã€ç†è§£ã€æ¥å—)</li><li>3xx: è¯·æ±‚é‡å®šå‘(è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œ)</li><li>4xx: å®¢æˆ·ç«¯é”™è¯¯(è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°)</li><li>5xx: æœåŠ¡å™¨ç«¯é”™è¯¯(æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚)</li></ul></li><li><p>çŠ¶æ€ä¿¡æ¯</p><ul><li>200 ok</li><li>404 Not Found</li><li>500 Internal Server Error</li></ul></li></ul></li><li><p>å“åº”å¤´</p><ul><li><p>å“åº”å¤´åç§°</p><ul><li>Content-Type: å‘Šè¯‰å®¢æˆ·ç«¯å®é™…è¿”å›å†…å®¹çš„ç½‘ç»œåª’ä½“ç±»å‹(äº’è”ç½‘åª’ä½“ç±»å‹,ä¹Ÿå«åšMIMEç±»å‹)</li></ul></li><li><p>å“åº”å¤´å€¼</p><ul><li>text&#x2F;html â€”-&gt; æ–‡æœ¬ç±»å‹</li><li>image&#x2F;png â€”-&gt; pngæ ¼å¼æ–‡ä»¶</li><li>image&#x2F;jpeg â€”-&gt; jpgæ ¼å¼æ–‡ä»¶</li></ul><p><img src="/Hexo/../img/202202221209401.png" alt="13_å“åº”å¤´ç¤ºä¾‹"></p></li></ul></li><li><p>å°ç»“</p><p><img src="/Hexo/../img/202202221210841.png" alt="12_å“åº”ä¿¡æ¯å°ç»“"></p></li></ul><h2 id="3-HTTPæœåŠ¡å™¨"><a href="#3-HTTPæœåŠ¡å™¨" class="headerlink" title="3.HTTPæœåŠ¡å™¨"></a>3.HTTPæœåŠ¡å™¨</h2><h3 id="3-1éœ€æ±‚ã€ç†è§£ã€‘"><a href="#3-1éœ€æ±‚ã€ç†è§£ã€‘" class="headerlink" title="3.1éœ€æ±‚ã€ç†è§£ã€‘"></a>3.1éœ€æ±‚ã€ç†è§£ã€‘</h3><ul><li>ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç ,å®ç°å¯ä»¥è§£ææµè§ˆå™¨çš„è¯·æ±‚,ç»™æµè§ˆå™¨å“åº”æ•°æ®</li></ul><h3 id="3-2ç¯å¢ƒæ­å»ºã€ç†è§£ã€‘"><a href="#3-2ç¯å¢ƒæ­å»ºã€ç†è§£ã€‘" class="headerlink" title="3.2ç¯å¢ƒæ­å»ºã€ç†è§£ã€‘"></a>3.2ç¯å¢ƒæ­å»ºã€ç†è§£ã€‘</h3><ul><li><p>å®ç°æ­¥éª¤</p><ul><li>ç¼–å†™HttpServerç±»,å®ç°å¯ä»¥æ¥æ”¶æµè§ˆå™¨å‘å‡ºçš„è¯·æ±‚</li><li>å…¶ä¸­è·å–è¿æ¥çš„ä»£ç å¯ä»¥å•ç‹¬æŠ½å–åˆ°ä¸€ä¸ªç±»ä¸­</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æœåŠ¡ç«¯ä»£ç </span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpServer</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//1.æ‰“å¼€æœåŠ¡ç«¯é€šé“</span><br>        <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">serverSocketChannel</span> <span class="hljs-operator">=</span> ServerSocketChannel.open();<br>        <span class="hljs-comment">//2.è®©è¿™ä¸ªé€šé“ç»‘å®šä¸€ä¸ªç«¯å£</span><br>        serverSocketChannel.bind(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">10000</span>));<br>        <span class="hljs-comment">//3.è®¾ç½®é€šé“ä¸ºéé˜»å¡</span><br>        serverSocketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br>        <span class="hljs-comment">//4.æ‰“å¼€ä¸€ä¸ªé€‰æ‹©å™¨</span><br>        <span class="hljs-type">Selector</span> <span class="hljs-variable">selector</span> <span class="hljs-operator">=</span> Selector.open();<br><br>        <span class="hljs-comment">//5.ç»‘å®šé€‰æ‹©å™¨å’ŒæœåŠ¡ç«¯é€šé“</span><br>        serverSocketChannel.register(selector,SelectionKey.OP_ACCEPT);<br><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-comment">//6.é€‰æ‹©å™¨ä¼šç›‘è§†é€šé“çš„çŠ¶æ€.</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> selector.select();<br>            <span class="hljs-keyword">if</span>(count != <span class="hljs-number">0</span>)&#123;<br>                <span class="hljs-comment">//7.ä¼šéå†æ‰€æœ‰çš„æœåŠ¡ç«¯é€šé“.çœ‹è°å‡†å¤‡å¥½äº†,è°å‡†å¤‡å¥½äº†,å°±è®©è°å»è¿æ¥.</span><br>                <span class="hljs-comment">//è·å–æ‰€æœ‰æœåŠ¡ç«¯é€šé“çš„ä»¤ç‰Œ,å¹¶å°†å®ƒä»¬éƒ½æ”¾åˆ°ä¸€ä¸ªé›†åˆä¸­,å°†é›†åˆè¿”å›.</span><br>                Set&lt;SelectionKey&gt; selectionKeys = selector.selectedKeys();<br>                Iterator&lt;SelectionKey&gt; iterator = selectionKeys.iterator();<br>                <span class="hljs-keyword">while</span>(iterator.hasNext())&#123;<br>                    <span class="hljs-comment">//selectionKey ä¾æ¬¡è¡¨ç¤ºæ¯ä¸€ä¸ªæœåŠ¡ç«¯é€šé“çš„ä»¤ç‰Œ</span><br>                    <span class="hljs-type">SelectionKey</span> <span class="hljs-variable">selectionKey</span> <span class="hljs-operator">=</span> iterator.next();<br>                    <span class="hljs-keyword">if</span>(selectionKey.isAcceptable())&#123;<br>                        <span class="hljs-comment">//è·å–è¿æ¥</span><br>                        <span class="hljs-type">AcceptHandler</span> <span class="hljs-variable">acceptHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AcceptHandler</span>();<br>                        acceptHandler.connSocketChannel(selectionKey);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(selectionKey.isReadable())&#123;<br>                       <br>                    &#125;<br>                    <span class="hljs-comment">//ä»»åŠ¡å¤„ç†å®Œæ¯•ä»¥å,å°†SelectionKeyä»é›†åˆä¸­ç§»é™¤</span><br>                    iterator.remove();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// å°†è·å–è¿æ¥çš„ä»£ç æŠ½å–åˆ°è¿™ä¸ªç±»ä¸­</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AcceptHandler</span> &#123;<br><br>    <span class="hljs-keyword">public</span> SocketChannel <span class="hljs-title function_">connSocketChannel</span><span class="hljs-params">(SelectionKey selectionKey)</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//è·å–åˆ°å·²ç»å°±ç»ªçš„æœåŠ¡ç«¯é€šé“</span><br>            <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">ssc</span> <span class="hljs-operator">=</span> (ServerSocketChannel) selectionKey.channel();<br>            <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> ssc.accept();<br>            <span class="hljs-comment">//è®¾ç½®ä¸ºéé˜»å¡çŠ¶æ€</span><br>            socketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br>            <span class="hljs-comment">//æŠŠsocketChannelæ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š</span><br>            socketChannel.register(selectionKey.selector(), SelectionKey.OP_READ);<br>            <span class="hljs-keyword">return</span> socketChannel;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-3è·å–è¯·æ±‚ä¿¡æ¯å¹¶è§£æã€ç†è§£ã€‘"><a href="#3-3è·å–è¯·æ±‚ä¿¡æ¯å¹¶è§£æã€ç†è§£ã€‘" class="headerlink" title="3.3è·å–è¯·æ±‚ä¿¡æ¯å¹¶è§£æã€ç†è§£ã€‘"></a>3.3è·å–è¯·æ±‚ä¿¡æ¯å¹¶è§£æã€ç†è§£ã€‘</h3><ul><li><p>å®ç°æ­¥éª¤</p><ul><li>å°†è¯·æ±‚ä¿¡æ¯å°è£…åˆ°HttpRequestç±»ä¸­</li><li>åœ¨ç±»ä¸­å®šä¹‰æ–¹æ³•,å®ç°è·å–è¯·æ±‚ä¿¡æ¯å¹¶è§£æ</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æ¥å°è£…è¯·æ±‚æ•°æ®çš„ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpRequest</span> &#123;<br>    <span class="hljs-keyword">private</span> String method; <span class="hljs-comment">//è¯·æ±‚æ–¹å¼</span><br>    <span class="hljs-keyword">private</span> String requestURI; <span class="hljs-comment">//è¯·æ±‚çš„uri</span><br>    <span class="hljs-keyword">private</span> String version;   <span class="hljs-comment">//httpçš„åè®®ç‰ˆæœ¬</span><br><br>    <span class="hljs-keyword">private</span> HashMap&lt;String,String&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<span class="hljs-comment">//æ‰€æœ‰çš„è¯·æ±‚å¤´</span><br><br>    <span class="hljs-comment">//parse --- è·å–è¯·æ±‚æ•°æ® å¹¶è§£æ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parse</span><span class="hljs-params">(SelectionKey selectionKey)</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> (SocketChannel) selectionKey.channel();<br><br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>            <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªç¼“å†²åŒº</span><br>            <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);<br>            <span class="hljs-type">int</span> len;<br>            <span class="hljs-comment">//å¾ªç¯è¯»å–</span><br>            <span class="hljs-keyword">while</span>((len = socketChannel.read(byteBuffer)) &gt; <span class="hljs-number">0</span>)&#123;<br>                byteBuffer.flip();<br>                sb.append(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteBuffer.array(),<span class="hljs-number">0</span>,len));<br>                <span class="hljs-comment">//System.out.println(new String(byteBuffer.array(),0,len));</span><br>                byteBuffer.clear();<br>            &#125;<br>            <span class="hljs-comment">//System.out.println(sb);</span><br>            parseHttpRequest(sb);<br><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//è§£æhttpè¯·æ±‚åè®®ä¸­çš„æ•°æ®</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parseHttpRequest</span><span class="hljs-params">(StringBuilder sb)</span> &#123;<br>        <span class="hljs-comment">//1.éœ€è¦æŠŠStringBuilderå…ˆå˜æˆä¸€ä¸ªå­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">httpRequestStr</span> <span class="hljs-operator">=</span> sb.toString();<br>        <span class="hljs-comment">//2.è·å–æ¯ä¸€è¡Œæ•°æ®</span><br>        String[] split = httpRequestStr.split(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>        <span class="hljs-comment">//3.è·å–è¯·æ±‚è¡Œ</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">httpRequestLine</span> <span class="hljs-operator">=</span> split[<span class="hljs-number">0</span>];<span class="hljs-comment">//GET / HTTP/1.1</span><br>        <span class="hljs-comment">//4.æŒ‰ç…§ç©ºæ ¼è¿›è¡Œåˆ‡å‰²,å¾—åˆ°è¯·æ±‚è¡Œä¸­çš„ä¸‰éƒ¨åˆ†</span><br>        String[] httpRequestInfo = httpRequestLine.split(<span class="hljs-string">&quot; &quot;</span>);<br>        <span class="hljs-built_in">this</span>.method = httpRequestInfo[<span class="hljs-number">0</span>];<br>        <span class="hljs-built_in">this</span>.requestURI = httpRequestInfo[<span class="hljs-number">1</span>];<br>        <span class="hljs-built_in">this</span>.version = httpRequestInfo[<span class="hljs-number">2</span>];<br>        <span class="hljs-comment">//5.æ“ä½œæ¯ä¸€ä¸ªè¯·æ±‚å¤´</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; split.length; i++) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">httpRequestHeaderInfo</span> <span class="hljs-operator">=</span> split[i];<span class="hljs-comment">//Host: 127.0.0.1:10000</span><br>            String[] httpRequestHeaderInfoArr = httpRequestHeaderInfo.split(<span class="hljs-string">&quot;: &quot;</span>);<br>            hm.put(httpRequestHeaderInfoArr[<span class="hljs-number">0</span>],httpRequestHeaderInfoArr[<span class="hljs-number">1</span>]);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMethod</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> method;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMethod</span><span class="hljs-params">(String method)</span> &#123;<br>        <span class="hljs-built_in">this</span>.method = method;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRequestURI</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> requestURI;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setRequestURI</span><span class="hljs-params">(String requestURI)</span> &#123;<br>        <span class="hljs-built_in">this</span>.requestURI = requestURI;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getVersion</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> version;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVersion</span><span class="hljs-params">(String version)</span> &#123;<br>        <span class="hljs-built_in">this</span>.version = version;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> HashMap&lt;String, String&gt; <span class="hljs-title function_">getHm</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> hm;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHm</span><span class="hljs-params">(HashMap&lt;String, String&gt; hm)</span> &#123;<br>        <span class="hljs-built_in">this</span>.hm = hm;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;HttpRequest&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;method=&#x27;&quot;</span> + method + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, requestURI=&#x27;&quot;</span> + requestURI + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, version=&#x27;&quot;</span> + version + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, hm=&quot;</span> + hm +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-4ç»™æµè§ˆå™¨å“åº”æ•°æ®ã€ç†è§£ã€‘"><a href="#3-4ç»™æµè§ˆå™¨å“åº”æ•°æ®ã€ç†è§£ã€‘" class="headerlink" title="3.4ç»™æµè§ˆå™¨å“åº”æ•°æ®ã€ç†è§£ã€‘"></a>3.4ç»™æµè§ˆå™¨å“åº”æ•°æ®ã€ç†è§£ã€‘</h3><ul><li><p>å®ç°æ­¥éª¤</p><ul><li>å°†å“åº”ä¿¡æ¯å°è£…HttpResponseç±»ä¸­</li><li>å®šä¹‰æ–¹æ³•,å°è£…å“åº”ä¿¡æ¯,ç»™æµè§ˆå™¨å“åº”æ•°æ®</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpResponse</span> &#123;<br>    <span class="hljs-keyword">private</span> String version; <span class="hljs-comment">//åè®®ç‰ˆæœ¬</span><br>    <span class="hljs-keyword">private</span> String status;  <span class="hljs-comment">//å“åº”çŠ¶æ€ç </span><br>    <span class="hljs-keyword">private</span> String desc;    <span class="hljs-comment">//çŠ¶æ€ç çš„æè¿°ä¿¡æ¯</span><br><br>    <span class="hljs-comment">//å“åº”å¤´æ•°æ®</span><br>    <span class="hljs-keyword">private</span> HashMap&lt;String, String&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br>    <span class="hljs-keyword">private</span> HttpRequest httpRequest;  <span class="hljs-comment">//æˆ‘ä»¬åé¢è¦æ ¹æ®è¯·æ±‚çš„æ•°æ®,æ¥è¿›è¡Œä¸€äº›åˆ¤æ–­</span><br><br>    <span class="hljs-comment">//ç»™æµè§ˆå™¨å“åº”æ•°æ®çš„æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendStaticResource</span><span class="hljs-params">(SelectionKey selectionKey)</span> &#123;<br>        <span class="hljs-comment">//1.ç»™å“åº”è¡Œèµ‹å€¼</span><br>        <span class="hljs-built_in">this</span>.version = <span class="hljs-string">&quot;HTTP/1.1&quot;</span>;<br>        <span class="hljs-built_in">this</span>.status = <span class="hljs-string">&quot;200&quot;</span>;<br>        <span class="hljs-built_in">this</span>.desc = <span class="hljs-string">&quot;ok&quot;</span>;<br>        <span class="hljs-comment">//2.å°†å“åº”è¡Œæ‹¼æ¥æˆä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦ä¸² // HTTP/1.1 200 ok</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">responseLine</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.version + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">this</span>.status + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">this</span>.desc + <span class="hljs-string">&quot;\r\n&quot;</span>;<br><br>        <span class="hljs-comment">//3.ç»™å“åº”å¤´èµ‹å€¼</span><br>        hm.put(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><br>        <span class="hljs-comment">//4.å°†æ‰€æœ‰çš„å“åº”å¤´æ‹¼æ¥æˆä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = hm.entrySet();<br>        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, String&gt; entry : entries) &#123;<br>            sb.append(entry.getKey()).append(<span class="hljs-string">&quot;: &quot;</span>).append(entry.getValue()).append(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//5.å“åº”ç©ºè¡Œ</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">emptyLine</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\r\n&quot;</span>;<br><br>        <span class="hljs-comment">//6.å“åº”è¡Œ,å“åº”å¤´,å“åº”ç©ºè¡Œæ‹¼æ¥æˆä¸€ä¸ªå¤§å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">responseLineStr</span> <span class="hljs-operator">=</span> responseLine + sb.toString() + emptyLine;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//7.å°†ä¸Šé¢ä¸‰ä¸ªå†™ç»™æµè§ˆå™¨</span><br>            <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> (SocketChannel) selectionKey.channel();<br>            <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer1</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(responseLineStr.getBytes());<br>            socketChannel.write(byteBuffer1);<br><br>            <span class="hljs-comment">//8.å•ç‹¬æ“ä½œå“åº”ä½“</span><br>            <span class="hljs-comment">//å› ä¸ºåœ¨ä»¥åå“åº”ä½“ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span><br>            <span class="hljs-comment">//æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªæ–‡ä»¶,æ‰€ä»¥å•ç‹¬æ“ä½œ</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å“å“Ÿ,å¦ˆå‘€,ç»ˆäºå†™å®Œäº†.&quot;</span>;<br>            <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer2</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(s.getBytes());<br>            socketChannel.write(byteBuffer2);<br><br>            <span class="hljs-comment">//9.é‡Šæ”¾èµ„æº</span><br>            socketChannel.close();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getVersion</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> version;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVersion</span><span class="hljs-params">(String version)</span> &#123;<br>        <span class="hljs-built_in">this</span>.version = version;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getStatus</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> status;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStatus</span><span class="hljs-params">(String status)</span> &#123;<br>        <span class="hljs-built_in">this</span>.status = status;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> desc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDesc</span><span class="hljs-params">(String desc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> HashMap&lt;String, String&gt; <span class="hljs-title function_">getHm</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> hm;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHm</span><span class="hljs-params">(HashMap&lt;String, String&gt; hm)</span> &#123;<br>        <span class="hljs-built_in">this</span>.hm = hm;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> HttpRequest <span class="hljs-title function_">getHttpRequest</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> httpRequest;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHttpRequest</span><span class="hljs-params">(HttpRequest httpRequest)</span> &#123;<br>        <span class="hljs-built_in">this</span>.httpRequest = httpRequest;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;HttpResponse&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;version=&#x27;&quot;</span> + version + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, status=&#x27;&quot;</span> + status + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, desc=&#x27;&quot;</span> + desc + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, hm=&quot;</span> + hm +<br>                <span class="hljs-string">&quot;, httpRequest=&quot;</span> + httpRequest +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-5ä»£ç ä¼˜åŒ–ã€ç†è§£ã€‘"><a href="#3-5ä»£ç ä¼˜åŒ–ã€ç†è§£ã€‘" class="headerlink" title="3.5ä»£ç ä¼˜åŒ–ã€ç†è§£ã€‘"></a>3.5ä»£ç ä¼˜åŒ–ã€ç†è§£ã€‘</h3><ul><li><p>å®ç°æ­¥éª¤</p><ul><li>æ ¹æ®è¯·æ±‚èµ„æºè·¯å¾„ä¸åŒ,å“åº”ä¸åŒçš„æ•°æ®</li><li>æœåŠ¡ç«¯å¥å£®æ€§å¤„ç†</li><li>è®¿é—®ä¸å­˜åœ¨çš„èµ„æºå¤„ç†</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¥æ”¶è¿æ¥çš„ä»»åŠ¡å¤„ç†ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AcceptHandler</span> &#123;<br><br>    <span class="hljs-keyword">public</span> SocketChannel <span class="hljs-title function_">connSocketChannel</span><span class="hljs-params">(SelectionKey selectionKey)</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//è·å–åˆ°å·²ç»å°±ç»ªçš„æœåŠ¡ç«¯é€šé“</span><br>            <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">ssc</span> <span class="hljs-operator">=</span> (ServerSocketChannel) selectionKey.channel();<br>            <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> ssc.accept();<br>            <span class="hljs-comment">//è®¾ç½®ä¸ºéé˜»å¡çŠ¶æ€</span><br>            socketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br>            <span class="hljs-comment">//æŠŠsocketChannelæ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š</span><br>            socketChannel.register(selectionKey.selector(), SelectionKey.OP_READ);<br>            <span class="hljs-keyword">return</span> socketChannel;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚çš„ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpServer</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//1.æ‰“å¼€æœåŠ¡ç«¯é€šé“</span><br>        <span class="hljs-type">ServerSocketChannel</span> <span class="hljs-variable">serverSocketChannel</span> <span class="hljs-operator">=</span> ServerSocketChannel.open();<br>        <span class="hljs-comment">//2.è®©è¿™ä¸ªé€šé“ç»‘å®šä¸€ä¸ªç«¯å£</span><br>        serverSocketChannel.bind(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InetSocketAddress</span>(<span class="hljs-number">10000</span>));<br>        <span class="hljs-comment">//3.è®¾ç½®é€šé“ä¸ºéé˜»å¡</span><br>        serverSocketChannel.configureBlocking(<span class="hljs-literal">false</span>);<br>        <span class="hljs-comment">//4.æ‰“å¼€ä¸€ä¸ªé€‰æ‹©å™¨</span><br>        <span class="hljs-type">Selector</span> <span class="hljs-variable">selector</span> <span class="hljs-operator">=</span> Selector.open();<br>        <span class="hljs-comment">//5.ç»‘å®šé€‰æ‹©å™¨å’ŒæœåŠ¡ç«¯é€šé“</span><br>        serverSocketChannel.register(selector,SelectionKey.OP_ACCEPT);<br><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-comment">//6.é€‰æ‹©å™¨ä¼šç›‘è§†é€šé“çš„çŠ¶æ€.</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> selector.select();<br>            <span class="hljs-keyword">if</span>(count != <span class="hljs-number">0</span>)&#123;<br>                <span class="hljs-comment">//7.ä¼šéå†æ‰€æœ‰çš„æœåŠ¡ç«¯é€šé“.çœ‹è°å‡†å¤‡å¥½äº†,è°å‡†å¤‡å¥½äº†,å°±è®©è°å»è¿æ¥.</span><br>                <span class="hljs-comment">//è·å–æ‰€æœ‰æœåŠ¡ç«¯é€šé“çš„ä»¤ç‰Œ,å¹¶å°†å®ƒä»¬éƒ½æ”¾åˆ°ä¸€ä¸ªé›†åˆä¸­,å°†é›†åˆè¿”å›.</span><br>                Set&lt;SelectionKey&gt; selectionKeys = selector.selectedKeys();<br>                Iterator&lt;SelectionKey&gt; iterator = selectionKeys.iterator();<br>                <span class="hljs-keyword">while</span>(iterator.hasNext())&#123;<br>                    <span class="hljs-comment">//selectionKey ä¾æ¬¡è¡¨ç¤ºæ¯ä¸€ä¸ªæœåŠ¡ç«¯é€šé“çš„ä»¤ç‰Œ</span><br>                    <span class="hljs-type">SelectionKey</span> <span class="hljs-variable">selectionKey</span> <span class="hljs-operator">=</span> iterator.next();<br>                    <span class="hljs-keyword">if</span>(selectionKey.isAcceptable())&#123;<br>                        <span class="hljs-comment">//è·å–è¿æ¥</span><br>                        <span class="hljs-type">AcceptHandler</span> <span class="hljs-variable">acceptHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AcceptHandler</span>();<br>                        acceptHandler.connSocketChannel(selectionKey);<br><br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(selectionKey.isReadable())&#123;<br>                        <span class="hljs-comment">//è¯»å–æ•°æ®</span><br>                        <span class="hljs-type">HttpRequest</span> <span class="hljs-variable">httpRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpRequest</span>();<br>                        httpRequest.parse(selectionKey);<br>                        System.out.println(<span class="hljs-string">&quot;httpè¯·æ±‚çš„æ•°æ®ä¸º ----&gt;&quot;</span> + httpRequest);<br><br>                        <span class="hljs-keyword">if</span>(httpRequest.getRequestURI() == <span class="hljs-literal">null</span> || <span class="hljs-string">&quot;&quot;</span>.equals(httpRequest.getRequestURI()))&#123;<br>                            selectionKey.channel();<br>                            <span class="hljs-keyword">continue</span>;<br>                        &#125;<br>                        System.out.println(<span class="hljs-string">&quot;...æ•°æ®è§£æå®Œæ¯•,å‡†å¤‡å“åº”æ•°æ®....&quot;</span>);<br><br>                        <span class="hljs-comment">//å“åº”æ•°æ®</span><br>                        <span class="hljs-type">HttpResponse</span> <span class="hljs-variable">httpResponse</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpResponse</span>();<br>                        httpResponse.setHttpRequest(httpRequest);<br>                        httpResponse.sendStaticResource(selectionKey);<br>                    &#125;<br>                    <span class="hljs-comment">//ä»»åŠ¡å¤„ç†å®Œæ¯•ä»¥å,å°†SelectionKeyä»é›†åˆä¸­ç§»é™¤</span><br>                    iterator.remove();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æ¥å°è£…è¯·æ±‚æ•°æ®çš„ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpRequest</span> &#123;<br>    <span class="hljs-keyword">private</span> String method; <span class="hljs-comment">//è¯·æ±‚æ–¹å¼</span><br>    <span class="hljs-keyword">private</span> String requestURI; <span class="hljs-comment">//è¯·æ±‚çš„uri</span><br>    <span class="hljs-keyword">private</span> String version;   <span class="hljs-comment">//httpçš„åè®®ç‰ˆæœ¬</span><br><br>    <span class="hljs-keyword">private</span> HashMap&lt;String,String&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<span class="hljs-comment">//æ‰€æœ‰çš„è¯·æ±‚å¤´</span><br><br>    <span class="hljs-comment">//parse --- è·å–è¯·æ±‚æ•°æ® å¹¶è§£æ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parse</span><span class="hljs-params">(SelectionKey selectionKey)</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> (SocketChannel) selectionKey.channel();<br><br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>            <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªç¼“å†²åŒº</span><br>            <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">1024</span>);<br>            <span class="hljs-type">int</span> len;<br>            <span class="hljs-comment">//å¾ªç¯è¯»å–</span><br>            <span class="hljs-keyword">while</span>((len = socketChannel.read(byteBuffer)) &gt; <span class="hljs-number">0</span>)&#123;<br>                byteBuffer.flip();<br>                sb.append(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteBuffer.array(),<span class="hljs-number">0</span>,len));<br>                <span class="hljs-comment">//System.out.println(new String(byteBuffer.array(),0,len));</span><br>                byteBuffer.clear();<br>            &#125;<br>            <span class="hljs-comment">//System.out.println(sb);</span><br>            parseHttpRequest(sb);<br><br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>  <br>    <span class="hljs-comment">//è§£æhttpè¯·æ±‚åè®®ä¸­çš„æ•°æ®</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parseHttpRequest</span><span class="hljs-params">(StringBuilder sb)</span> &#123;<br>        <span class="hljs-comment">//1.éœ€è¦æŠŠStringBuilderå…ˆå˜æˆä¸€ä¸ªå­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">httpRequestStr</span> <span class="hljs-operator">=</span> sb.toString();<br>        <span class="hljs-keyword">if</span>(!(httpRequestStr == <span class="hljs-literal">null</span> || <span class="hljs-string">&quot;&quot;</span>.equals(httpRequestStr)))&#123;<br>            <span class="hljs-comment">//2.è·å–æ¯ä¸€è¡Œæ•°æ®</span><br>            String[] split = httpRequestStr.split(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>            <span class="hljs-comment">//3.è·å–è¯·æ±‚è¡Œ</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">httpRequestLine</span> <span class="hljs-operator">=</span> split[<span class="hljs-number">0</span>];<span class="hljs-comment">//GET / HTTP/1.1</span><br>            <span class="hljs-comment">//4.æŒ‰ç…§ç©ºæ ¼è¿›è¡Œåˆ‡å‰²,å¾—åˆ°è¯·æ±‚è¡Œä¸­çš„ä¸‰éƒ¨åˆ†</span><br>            String[] httpRequestInfo = httpRequestLine.split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-built_in">this</span>.method = httpRequestInfo[<span class="hljs-number">0</span>];<br>            <span class="hljs-built_in">this</span>.requestURI = httpRequestInfo[<span class="hljs-number">1</span>];<br>            <span class="hljs-built_in">this</span>.version = httpRequestInfo[<span class="hljs-number">2</span>];<br>            <span class="hljs-comment">//5.æ“ä½œæ¯ä¸€ä¸ªè¯·æ±‚å¤´</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; split.length; i++) &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">httpRequestHeaderInfo</span> <span class="hljs-operator">=</span> split[i];<span class="hljs-comment">//Host: 127.0.0.1:10000</span><br>                String[] httpRequestHeaderInfoArr = httpRequestHeaderInfo.split(<span class="hljs-string">&quot;: &quot;</span>);<br>                hm.put(httpRequestHeaderInfoArr[<span class="hljs-number">0</span>],httpRequestHeaderInfoArr[<span class="hljs-number">1</span>]);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMethod</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> method;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMethod</span><span class="hljs-params">(String method)</span> &#123;<br>        <span class="hljs-built_in">this</span>.method = method;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRequestURI</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> requestURI;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setRequestURI</span><span class="hljs-params">(String requestURI)</span> &#123;<br>        <span class="hljs-built_in">this</span>.requestURI = requestURI;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getVersion</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> version;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVersion</span><span class="hljs-params">(String version)</span> &#123;<br>        <span class="hljs-built_in">this</span>.version = version;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> HashMap&lt;String, String&gt; <span class="hljs-title function_">getHm</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> hm;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHm</span><span class="hljs-params">(HashMap&lt;String, String&gt; hm)</span> &#123;<br>        <span class="hljs-built_in">this</span>.hm = hm;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;HttpRequest&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;method=&#x27;&quot;</span> + method + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, requestURI=&#x27;&quot;</span> + requestURI + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, version=&#x27;&quot;</span> + version + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, hm=&quot;</span> + hm +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç”¨æ¥å°è£…å“åº”æ•°æ®çš„ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpResponse</span> &#123;<br>    <span class="hljs-keyword">private</span> String version; <span class="hljs-comment">//åè®®ç‰ˆæœ¬</span><br>    <span class="hljs-keyword">private</span> String status;  <span class="hljs-comment">//å“åº”çŠ¶æ€ç </span><br>    <span class="hljs-keyword">private</span> String desc;    <span class="hljs-comment">//çŠ¶æ€ç çš„æè¿°ä¿¡æ¯</span><br><br>    <span class="hljs-comment">//å“åº”å¤´æ•°æ®</span><br>    <span class="hljs-keyword">private</span> HashMap&lt;String, String&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br>    <span class="hljs-keyword">private</span> HttpRequest httpRequest;  <span class="hljs-comment">//æˆ‘ä»¬åé¢è¦æ ¹æ®è¯·æ±‚çš„æ•°æ®,æ¥è¿›è¡Œä¸€äº›åˆ¤æ–­</span><br><br>    <span class="hljs-comment">//ç»™æµè§ˆå™¨å“åº”æ•°æ®çš„æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendStaticResource</span><span class="hljs-params">(SelectionKey selectionKey)</span> &#123;<br>        <span class="hljs-comment">//1.ç»™å“åº”è¡Œèµ‹å€¼</span><br>        <span class="hljs-built_in">this</span>.version = <span class="hljs-string">&quot;HTTP/1.1&quot;</span>;<br>        <span class="hljs-built_in">this</span>.status = <span class="hljs-string">&quot;200&quot;</span>;<br>        <span class="hljs-built_in">this</span>.desc = <span class="hljs-string">&quot;ok&quot;</span>;<br><br>        <span class="hljs-comment">//3.ç»™å“åº”å¤´èµ‹å€¼</span><br>        <span class="hljs-comment">//å…ˆè·å–æµè§ˆå™¨è¯·æ±‚çš„URI</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">requestURI</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getHttpRequest().getRequestURI();<br>        <span class="hljs-keyword">if</span>(requestURI != <span class="hljs-literal">null</span>)&#123;<br><br>            <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(WEB_APP_PATH + requestURI);<br>            <span class="hljs-comment">//åˆ¤æ–­è¿™ä¸ªè·¯å¾„æ˜¯å¦å­˜åœ¨</span><br>            <span class="hljs-keyword">if</span>(!file.exists())&#123;<br>                <span class="hljs-built_in">this</span>.status = <span class="hljs-string">&quot;404&quot;</span>;<br>                <span class="hljs-built_in">this</span>.desc = <span class="hljs-string">&quot;NOT FOUNG&quot;</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;200&quot;</span>.equals(<span class="hljs-built_in">this</span>.status))&#123;<br>                <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;/&quot;</span>.equals(requestURI))&#123;<br>                    hm.put(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;/favicon.ico&quot;</span>.equals(requestURI))&#123;<br>                    hm.put(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;image/x-icon&quot;</span>);<br>                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;/a.txt&quot;</span>.equals(requestURI))&#123;<br>                    hm.put(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;/1.jpg&quot;</span>.equals(requestURI))&#123;<br>                    hm.put(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;image/jpeg&quot;</span>);<br>                &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;/1.png&quot;</span>.equals(requestURI))&#123;<br>                    hm.put(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;image/png&quot;</span>);<br>                &#125;<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                hm.put(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br>            &#125;<br><br>        &#125;<br><br>        <span class="hljs-comment">//2.å°†å“åº”è¡Œæ‹¼æ¥æˆä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦ä¸² // HTTP/1.1 200 ok</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">responseLine</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.version + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">this</span>.status + <span class="hljs-string">&quot; &quot;</span> + <span class="hljs-built_in">this</span>.desc + <span class="hljs-string">&quot;\r\n&quot;</span>;<br><br>        <span class="hljs-comment">//4.å°†æ‰€æœ‰çš„å“åº”å¤´æ‹¼æ¥æˆä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = hm.entrySet();<br>        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, String&gt; entry : entries) &#123;<br>            sb.append(entry.getKey()).append(<span class="hljs-string">&quot;: &quot;</span>).append(entry.getValue()).append(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">//5.å“åº”ç©ºè¡Œ</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">emptyLine</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\r\n&quot;</span>;<br><br>        <span class="hljs-comment">//6.å“åº”è¡Œ,å“åº”å¤´,å“åº”ç©ºè¡Œæ‹¼æ¥æˆä¸€ä¸ªå¤§å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">responseLineStr</span> <span class="hljs-operator">=</span> responseLine + sb.toString() + emptyLine;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//7.å°†ä¸Šé¢ä¸‰ä¸ªå†™ç»™æµè§ˆå™¨</span><br>            <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> (SocketChannel) selectionKey.channel();<br>            <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer1</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(responseLineStr.getBytes());<br>            socketChannel.write(byteBuffer1);<br><br>            <span class="hljs-comment">//8.å•ç‹¬æ“ä½œå“åº”ä½“</span><br>            <span class="hljs-comment">//å› ä¸ºåœ¨ä»¥åå“åº”ä½“ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span><br>            <span class="hljs-comment">//æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªæ–‡ä»¶,æ‰€ä»¥å•ç‹¬æ“ä½œ</span><br>           <span class="hljs-comment">// String s = &quot;å“å“Ÿ,å¦ˆå‘€,ç»ˆäºå†™å®Œäº†.&quot;;</span><br>            <span class="hljs-type">byte</span> [] bytes = getContent();<br>            <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer2</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(bytes);<br>            socketChannel.write(byteBuffer2);<br><br>            <span class="hljs-comment">//9.é‡Šæ”¾èµ„æº</span><br>            socketChannel.close();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">WEB_APP_PATH</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;mynio\\webapp&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] getContent() &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//1.è·å–æµè§ˆå™¨è¯·æ±‚çš„URI</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">requestURI</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getHttpRequest().getRequestURI();<br>            <span class="hljs-keyword">if</span>(requestURI != <span class="hljs-literal">null</span>)&#123;<br><br>                <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;200&quot;</span>.equals(<span class="hljs-built_in">this</span>.status))&#123;<br>                    <span class="hljs-comment">//2.åˆ¤æ–­ä¸€ä¸‹è¯·æ±‚çš„URI,æ ¹æ®ä¸åŒçš„URIæ¥å“åº”ä¸åŒçš„ä¸œè¥¿</span><br>                    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;/&quot;</span>.equals(requestURI))&#123;<br>                        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å“å“Ÿ,å¦ˆå‘€,ç»ˆäºå†™å®Œäº†.&quot;</span>;<br>                        <span class="hljs-keyword">return</span> s.getBytes();<br>                    &#125;<span class="hljs-keyword">else</span><span class="hljs-comment">/* if(&quot;/favicon.ico&quot;.equals(requestURI))*/</span>&#123;<br>                        <span class="hljs-comment">//è·å–ä¸€ä¸ªicoæ–‡ä»¶</span><br>                        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(WEB_APP_PATH + requestURI);<br>                        <span class="hljs-comment">//æŠŠicoæ–‡ä»¶å˜æˆä¸€ä¸ªå­—èŠ‚æ•°ç»„è¿”å›</span><br>                        <span class="hljs-keyword">return</span> IOUtils.toByteArray(fis);<br>                    &#125;<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;è®¿é—®çš„èµ„æºä¸å­˜åœ¨&quot;</span>.getBytes();<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">0</span>];<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getVersion</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> version;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVersion</span><span class="hljs-params">(String version)</span> &#123;<br>        <span class="hljs-built_in">this</span>.version = version;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getStatus</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> status;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStatus</span><span class="hljs-params">(String status)</span> &#123;<br>        <span class="hljs-built_in">this</span>.status = status;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> desc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDesc</span><span class="hljs-params">(String desc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> HashMap&lt;String, String&gt; <span class="hljs-title function_">getHm</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> hm;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHm</span><span class="hljs-params">(HashMap&lt;String, String&gt; hm)</span> &#123;<br>        <span class="hljs-built_in">this</span>.hm = hm;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> HttpRequest <span class="hljs-title function_">getHttpRequest</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> httpRequest;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHttpRequest</span><span class="hljs-params">(HttpRequest httpRequest)</span> &#123;<br>        <span class="hljs-built_in">this</span>.httpRequest = httpRequest;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;HttpResponse&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;version=&#x27;&quot;</span> + version + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, status=&#x27;&quot;</span> + status + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, desc=&#x27;&quot;</span> + desc + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, hm=&quot;</span> + hm +<br>                <span class="hljs-string">&quot;, httpRequest=&quot;</span> + httpRequest +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹01</title>
    <link href="/Hexo/2021/04/06/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B01/"/>
    <url>/Hexo/2021/04/06/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B01/</url>
    
    <content type="html"><![CDATA[<h2 id="1-ç½‘ç»œç¼–ç¨‹å…¥é—¨"><a href="#1-ç½‘ç»œç¼–ç¨‹å…¥é—¨" class="headerlink" title="1.ç½‘ç»œç¼–ç¨‹å…¥é—¨"></a>1.ç½‘ç»œç¼–ç¨‹å…¥é—¨</h2><h3 id="1-1-ç½‘ç»œç¼–ç¨‹æ¦‚è¿°ã€ç†è§£ã€‘"><a href="#1-1-ç½‘ç»œç¼–ç¨‹æ¦‚è¿°ã€ç†è§£ã€‘" class="headerlink" title="1.1 ç½‘ç»œç¼–ç¨‹æ¦‚è¿°ã€ç†è§£ã€‘"></a>1.1 ç½‘ç»œç¼–ç¨‹æ¦‚è¿°ã€ç†è§£ã€‘</h3><ul><li><p>è®¡ç®—æœºç½‘ç»œ</p><p>æ˜¯æŒ‡å°†åœ°ç†ä½ç½®ä¸åŒçš„å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„å¤šå°è®¡ç®—æœºåŠå…¶å¤–éƒ¨è®¾å¤‡ï¼Œé€šè¿‡é€šä¿¡çº¿è·¯è¿æ¥èµ·æ¥ï¼Œåœ¨ç½‘ç»œæ“ä½œç³»ç»Ÿï¼Œç½‘ç»œç®¡ç†è½¯ä»¶åŠç½‘ç»œé€šä¿¡åè®®çš„ç®¡ç†å’Œåè°ƒä¸‹ï¼Œå®ç°èµ„æºå…±äº«å’Œä¿¡æ¯ä¼ é€’çš„è®¡ç®—æœºç³»ç»Ÿ</p></li><li><p>ç½‘ç»œç¼–ç¨‹</p><p>åœ¨ç½‘ç»œé€šä¿¡åè®®ä¸‹ï¼Œä¸åŒè®¡ç®—æœºä¸Šè¿è¡Œçš„ç¨‹åºï¼Œå¯ä»¥è¿›è¡Œæ•°æ®ä¼ è¾“</p></li></ul><h3 id="1-2-ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ã€ç†è§£ã€‘"><a href="#1-2-ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ã€ç†è§£ã€‘" class="headerlink" title="1.2 ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ã€ç†è§£ã€‘"></a>1.2 ç½‘ç»œç¼–ç¨‹ä¸‰è¦ç´ ã€ç†è§£ã€‘</h3><ul><li><p>IPåœ°å€</p><p>è¦æƒ³è®©ç½‘ç»œä¸­çš„è®¡ç®—æœºèƒ½å¤Ÿäº’ç›¸é€šä¿¡ï¼Œå¿…é¡»ä¸ºæ¯å°è®¡ç®—æœºæŒ‡å®šä¸€ä¸ªæ ‡è¯†å·ï¼Œé€šè¿‡è¿™ä¸ªæ ‡è¯†å·æ¥æŒ‡å®šè¦æ¥æ”¶æ•°æ®çš„è®¡ç®—æœºå’Œè¯†åˆ«å‘é€çš„è®¡ç®—æœºï¼Œè€ŒIPåœ°å€å°±æ˜¯è¿™ä¸ªæ ‡è¯†å·ã€‚ä¹Ÿå°±æ˜¯è®¾å¤‡çš„æ ‡è¯†</p></li><li><p>ç«¯å£</p><p>ç½‘ç»œçš„é€šä¿¡ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸¤ä¸ªåº”ç”¨ç¨‹åºçš„é€šä¿¡ã€‚æ¯å°è®¡ç®—æœºéƒ½æœ‰å¾ˆå¤šçš„åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œé€šä¿¡æ—¶ï¼Œå¦‚ä½•åŒºåˆ†è¿™äº›åº”ç”¨ç¨‹åºå‘¢ï¼Ÿå¦‚æœè¯´IPåœ°å€å¯ä»¥å”¯ä¸€æ ‡è¯†ç½‘ç»œä¸­çš„è®¾å¤‡ï¼Œé‚£ä¹ˆç«¯å£å·å°±å¯ä»¥å”¯ä¸€æ ‡è¯†è®¾å¤‡ä¸­çš„åº”ç”¨ç¨‹åºäº†ã€‚ä¹Ÿå°±æ˜¯åº”ç”¨ç¨‹åºçš„æ ‡è¯†</p></li><li><p>åè®®</p><p>é€šè¿‡è®¡ç®—æœºç½‘ç»œå¯ä»¥ä½¿å¤šå°è®¡ç®—æœºå®ç°è¿æ¥ï¼Œä½äºåŒä¸€ä¸ªç½‘ç»œä¸­çš„è®¡ç®—æœºåœ¨è¿›è¡Œè¿æ¥å’Œé€šä¿¡æ—¶éœ€è¦éµå®ˆä¸€å®šçš„è§„åˆ™ï¼Œè¿™å°±å¥½æ¯”åœ¨é“è·¯ä¸­è¡Œé©¶çš„æ±½è½¦ä¸€å®šè¦éµå®ˆäº¤é€šè§„åˆ™ä¸€æ ·ã€‚åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œè¿™äº›è¿æ¥å’Œé€šä¿¡çš„è§„åˆ™è¢«ç§°ä¸ºç½‘ç»œé€šä¿¡åè®®ï¼Œå®ƒå¯¹æ•°æ®çš„ä¼ è¾“æ ¼å¼ã€ä¼ è¾“é€Ÿç‡ã€ä¼ è¾“æ­¥éª¤ç­‰åšäº†ç»Ÿä¸€è§„å®šï¼Œé€šä¿¡åŒæ–¹å¿…é¡»åŒæ—¶éµå®ˆæ‰èƒ½å®Œæˆæ•°æ®äº¤æ¢ã€‚å¸¸è§çš„åè®®æœ‰UDPåè®®å’ŒTCPåè®®</p></li></ul><h3 id="1-3-IPåœ°å€ã€ç†è§£ã€‘"><a href="#1-3-IPåœ°å€ã€ç†è§£ã€‘" class="headerlink" title="1.3 IPåœ°å€ã€ç†è§£ã€‘"></a>1.3 IPåœ°å€ã€ç†è§£ã€‘</h3><p>IPåœ°å€ï¼šæ˜¯ç½‘ç»œä¸­è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†</p><ul><li><p>IPåœ°å€åˆ†ä¸ºä¸¤å¤§ç±»</p><ul><li><p>IPv4ï¼šæ˜¯ç»™æ¯ä¸ªè¿æ¥åœ¨ç½‘ç»œä¸Šçš„ä¸»æœºåˆ†é…ä¸€ä¸ª32bitåœ°å€ã€‚æŒ‰ç…§TCP&#x2F;IPè§„å®šï¼ŒIPåœ°å€ç”¨äºŒè¿›åˆ¶æ¥è¡¨ç¤ºï¼Œæ¯ä¸ªIPåœ°å€é•¿32bitï¼Œä¹Ÿå°±æ˜¯4ä¸ªå­—èŠ‚ã€‚ä¾‹å¦‚ä¸€ä¸ªé‡‡ç”¨äºŒè¿›åˆ¶å½¢å¼çš„IPåœ°å€æ˜¯â€œ11000000 10101000 00000001 01000010â€ï¼Œè¿™ä¹ˆé•¿çš„åœ°å€ï¼Œå¤„ç†èµ·æ¥ä¹Ÿå¤ªè´¹åŠ²äº†ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼ŒIPåœ°å€ç»å¸¸è¢«å†™æˆåè¿›åˆ¶çš„å½¢å¼ï¼Œä¸­é—´ä½¿ç”¨ç¬¦å·â€œ.â€åˆ†éš”ä¸åŒçš„å­—èŠ‚ã€‚äºæ˜¯ï¼Œä¸Šé¢çš„IPåœ°å€å¯ä»¥è¡¨ç¤ºä¸ºâ€œ192.168.1.66â€ã€‚IPåœ°å€çš„è¿™ç§è¡¨ç¤ºæ³•å«åšâ€œç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•â€ï¼Œè¿™æ˜¾ç„¶æ¯”1å’Œ0å®¹æ˜“è®°å¿†å¾—å¤š</p></li><li><p>IPv6ï¼šç”±äºäº’è”ç½‘çš„è“¬å‹ƒå‘å±•ï¼ŒIPåœ°å€çš„éœ€æ±‚é‡æ„ˆæ¥æ„ˆå¤§ï¼Œä½†æ˜¯ç½‘ç»œåœ°å€èµ„æºæœ‰é™ï¼Œä½¿å¾—IPçš„åˆ†é…è¶Šå‘ç´§å¼ ã€‚ä¸ºäº†æ‰©å¤§åœ°å€ç©ºé—´ï¼Œé€šè¿‡IPv6é‡æ–°å®šä¹‰åœ°å€ç©ºé—´ï¼Œé‡‡ç”¨128ä½åœ°å€é•¿åº¦ï¼Œæ¯16ä¸ªå­—èŠ‚ä¸€ç»„ï¼Œåˆ†æˆ8ç»„åå…­è¿›åˆ¶æ•°ï¼Œè¿™æ ·å°±è§£å†³äº†ç½‘ç»œåœ°å€èµ„æºæ•°é‡ä¸å¤Ÿçš„é—®é¢˜</p></li></ul></li><li><p>DOSå¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li><p>ipconfigï¼šæŸ¥çœ‹æœ¬æœºIPåœ°å€</p></li><li><p>ping IPåœ°å€ï¼šæ£€æŸ¥ç½‘ç»œæ˜¯å¦è¿é€š</p></li></ul></li><li><p>ç‰¹æ®ŠIPåœ°å€ï¼š</p><ul><li>127.0.0.1ï¼šæ˜¯å›é€åœ°å€ï¼Œå¯ä»¥ä»£è¡¨æœ¬æœºåœ°å€ï¼Œä¸€èˆ¬ç”¨æ¥æµ‹è¯•ä½¿ç”¨</li></ul></li></ul><h3 id="1-4-InetAddressã€åº”ç”¨ã€‘"><a href="#1-4-InetAddressã€åº”ç”¨ã€‘" class="headerlink" title="1.4 InetAddressã€åº”ç”¨ã€‘"></a>1.4 InetAddressã€åº”ç”¨ã€‘</h3><p>InetAddressï¼šæ­¤ç±»è¡¨ç¤ºInternetåè®®ï¼ˆIPï¼‰åœ°å€</p><ul><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>static InetAddress getByName(String host)</td><td>ç¡®å®šä¸»æœºåç§°çš„IPåœ°å€ã€‚ä¸»æœºåç§°å¯ä»¥æ˜¯æœºå™¨åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯IPåœ°å€</td></tr><tr><td>String getHostName()</td><td>è·å–æ­¤IPåœ°å€çš„ä¸»æœºå</td></tr><tr><td>String getHostAddress()</td><td>è¿”å›æ–‡æœ¬æ˜¾ç¤ºä¸­çš„IPåœ°å€å­—ç¬¦ä¸²</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InetAddressDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> UnknownHostException &#123;<br><span class="hljs-comment">//InetAddress address = InetAddress.getByName(&quot;itheima&quot;);</span><br>        <span class="hljs-type">InetAddress</span> <span class="hljs-variable">address</span> <span class="hljs-operator">=</span> InetAddress.getByName(<span class="hljs-string">&quot;192.168.1.66&quot;</span>);<br><br>        <span class="hljs-comment">//public String getHostName()ï¼šè·å–æ­¤IPåœ°å€çš„ä¸»æœºå</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> address.getHostName();<br>        <span class="hljs-comment">//public String getHostAddress()ï¼šè¿”å›æ–‡æœ¬æ˜¾ç¤ºä¸­çš„IPåœ°å€å­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">ip</span> <span class="hljs-operator">=</span> address.getHostAddress();<br><br>        System.out.println(<span class="hljs-string">&quot;ä¸»æœºåï¼š&quot;</span> + name);<br>        System.out.println(<span class="hljs-string">&quot;IPåœ°å€ï¼š&quot;</span> + ip);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-5-ç«¯å£å’Œåè®®ã€ç†è§£ã€‘"><a href="#1-5-ç«¯å£å’Œåè®®ã€ç†è§£ã€‘" class="headerlink" title="1.5 ç«¯å£å’Œåè®®ã€ç†è§£ã€‘"></a>1.5 ç«¯å£å’Œåè®®ã€ç†è§£ã€‘</h3><ul><li><p>ç«¯å£</p><ul><li>è®¾å¤‡ä¸Šåº”ç”¨ç¨‹åºçš„å”¯ä¸€æ ‡è¯†</li></ul></li><li><p>ç«¯å£å·</p><ul><li>ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºçš„æ•´æ•°ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯0<del>65535ã€‚å…¶ä¸­ï¼Œ0</del>1023ä¹‹é—´çš„ç«¯å£å·ç”¨äºä¸€äº›çŸ¥åçš„ç½‘ç»œæœåŠ¡å’Œåº”ç”¨ï¼Œæ™®é€šçš„åº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨1024ä»¥ä¸Šçš„ç«¯å£å·ã€‚å¦‚æœç«¯å£å·è¢«å¦å¤–ä¸€ä¸ªæœåŠ¡æˆ–åº”ç”¨æ‰€å ç”¨ï¼Œä¼šå¯¼è‡´å½“å‰ç¨‹åºå¯åŠ¨å¤±è´¥</li></ul></li><li><p>åè®®</p><ul><li>è®¡ç®—æœºç½‘ç»œä¸­ï¼Œè¿æ¥å’Œé€šä¿¡çš„è§„åˆ™è¢«ç§°ä¸ºç½‘ç»œé€šä¿¡åè®®</li></ul></li><li><p>UDPåè®®</p><ul><li>ç”¨æˆ·æ•°æ®æŠ¥åè®®(User Datagram Protocol)</li><li>UDPæ˜¯æ— è¿æ¥é€šä¿¡åè®®ï¼Œå³åœ¨æ•°æ®ä¼ è¾“æ—¶ï¼Œæ•°æ®çš„å‘é€ç«¯å’Œæ¥æ”¶ç«¯ä¸å»ºç«‹é€»è¾‘è¿æ¥ã€‚ç®€å•æ¥è¯´ï¼Œå½“ä¸€å°è®¡ç®—æœºå‘å¦å¤–ä¸€å°è®¡ç®—æœºå‘é€æ•°æ®æ—¶ï¼Œå‘é€ç«¯ä¸ä¼šç¡®è®¤æ¥æ”¶ç«¯æ˜¯å¦å­˜åœ¨ï¼Œå°±ä¼šå‘å‡ºæ•°æ®ï¼ŒåŒæ ·æ¥æ”¶ç«¯åœ¨æ”¶åˆ°æ•°æ®æ—¶ï¼Œä¹Ÿä¸ä¼šå‘å‘é€ç«¯åé¦ˆæ˜¯å¦æ”¶åˆ°æ•°æ®ã€‚</li><li>ç”±äºä½¿ç”¨UDPåè®®æ¶ˆè€—ç³»ç»Ÿèµ„æºå°ï¼Œé€šä¿¡æ•ˆç‡é«˜ï¼Œæ‰€ä»¥é€šå¸¸éƒ½ä¼šç”¨äºéŸ³é¢‘ã€è§†é¢‘å’Œæ™®é€šæ•°æ®çš„ä¼ è¾“</li><li>ä¾‹å¦‚è§†é¢‘ä¼šè®®é€šå¸¸é‡‡ç”¨UDPåè®®ï¼Œå› ä¸ºè¿™ç§æƒ…å†µå³ä½¿å¶å°”ä¸¢å¤±ä¸€ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œä¹Ÿä¸ä¼šå¯¹æ¥æ”¶ç»“æœäº§ç”Ÿå¤ªå¤§å½±å“ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨UDPåè®®ä¼ é€æ•°æ®æ—¶ï¼Œç”±äºUDPçš„é¢å‘æ— è¿æ¥æ€§ï¼Œä¸èƒ½ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œå› æ­¤åœ¨ä¼ è¾“é‡è¦æ•°æ®æ—¶ä¸å»ºè®®ä½¿ç”¨UDPåè®®</li></ul></li><li><p>TCPåè®®</p><ul><li><p>ä¼ è¾“æ§åˆ¶åè®® (Transmission Control Protocol)</p></li><li><p>TCPåè®®æ˜¯é¢å‘è¿æ¥çš„é€šä¿¡åè®®ï¼Œå³ä¼ è¾“æ•°æ®ä¹‹å‰ï¼Œåœ¨å‘é€ç«¯å’Œæ¥æ”¶ç«¯å»ºç«‹é€»è¾‘è¿æ¥ï¼Œç„¶åå†ä¼ è¾“æ•°æ®ï¼Œå®ƒæä¾›äº†ä¸¤å°è®¡ç®—æœºä¹‹é—´å¯é æ— å·®é”™çš„æ•°æ®ä¼ è¾“ã€‚åœ¨TCPè¿æ¥ä¸­å¿…é¡»è¦æ˜ç¡®å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯ï¼Œç”±å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘å‡ºè¿æ¥è¯·æ±‚ï¼Œæ¯æ¬¡è¿æ¥çš„åˆ›å»ºéƒ½éœ€è¦ç»è¿‡â€œä¸‰æ¬¡æ¡æ‰‹â€</p></li><li><p>ä¸‰æ¬¡æ¡æ‰‹ï¼šTCPåè®®ä¸­ï¼Œåœ¨å‘é€æ•°æ®çš„å‡†å¤‡é˜¶æ®µï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¸‰æ¬¡äº¤äº’ï¼Œä»¥ä¿è¯è¿æ¥çš„å¯é </p><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘å‡ºè¿æ¥è¯·æ±‚ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤</p><p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯å›é€ä¸€ä¸ªå“åº”ï¼Œé€šçŸ¥å®¢æˆ·ç«¯æ”¶åˆ°äº†è¿æ¥è¯·æ±‚</p><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å†æ¬¡å‘æœåŠ¡å™¨ç«¯å‘é€ç¡®è®¤ä¿¡æ¯ï¼Œç¡®è®¤è¿æ¥</p></li><li><p>å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œè¿æ¥å»ºç«‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°±å¯ä»¥å¼€å§‹è¿›è¡Œæ•°æ®ä¼ è¾“äº†ã€‚ç”±äºè¿™ç§é¢å‘è¿æ¥çš„ç‰¹æ€§ï¼ŒTCPåè®®å¯ä»¥ä¿è¯ä¼ è¾“æ•°æ®çš„å®‰å…¨ï¼Œæ‰€ä»¥åº”ç”¨ååˆ†å¹¿æ³›ã€‚ä¾‹å¦‚ä¸Šä¼ æ–‡ä»¶ã€ä¸‹è½½æ–‡ä»¶ã€æµè§ˆç½‘é¡µç­‰</p></li></ul></li></ul><h2 id="2-UDPé€šä¿¡ç¨‹åº"><a href="#2-UDPé€šä¿¡ç¨‹åº" class="headerlink" title="2.UDPé€šä¿¡ç¨‹åº"></a>2.UDPé€šä¿¡ç¨‹åº</h2><h3 id="2-1-UDPå‘é€æ•°æ®ã€åº”ç”¨ã€‘"><a href="#2-1-UDPå‘é€æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="2.1 UDPå‘é€æ•°æ®ã€åº”ç”¨ã€‘"></a>2.1 UDPå‘é€æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>Javaä¸­çš„UDPé€šä¿¡</p><ul><li>UDPåè®®æ˜¯ä¸€ç§ä¸å¯é çš„ç½‘ç»œåè®®ï¼Œå®ƒåœ¨é€šä¿¡çš„ä¸¤ç«¯å„å»ºç«‹ä¸€ä¸ªSocketå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªSocketåªæ˜¯å‘é€ï¼Œæ¥æ”¶æ•°æ®çš„å¯¹è±¡ï¼Œå› æ­¤å¯¹äºåŸºäºUDPåè®®çš„é€šä¿¡åŒæ–¹è€Œè¨€ï¼Œæ²¡æœ‰æ‰€è°“çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„æ¦‚å¿µ</li><li>Javaæä¾›äº†DatagramSocketç±»ä½œä¸ºåŸºäºUDPåè®®çš„Socket</li></ul></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>DatagramSocket()</td><td>åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬æœºåœ°å€ä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£</td></tr><tr><td>DatagramPacket(byte[] buf,int len,InetAddress add,int port)</td><td>åˆ›å»ºæ•°æ®åŒ…,å‘é€é•¿åº¦ä¸ºlençš„æ•°æ®åŒ…åˆ°æŒ‡å®šä¸»æœºçš„æŒ‡å®šç«¯å£</td></tr></tbody></table></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void send(DatagramPacket p)</td><td>å‘é€æ•°æ®æŠ¥åŒ…</td></tr><tr><td>void close()</td><td>å…³é—­æ•°æ®æŠ¥å¥—æ¥å­—</td></tr><tr><td>void receive(DatagramPacket p)</td><td>ä»æ­¤å¥—æ¥å­—æ¥å—æ•°æ®æŠ¥åŒ…</td></tr></tbody></table></li><li><p>å‘é€æ•°æ®çš„æ­¥éª¤</p><ul><li>åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…</li><li>è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®</li><li>å…³é—­å‘é€ç«¯</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SendDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span><br>        <span class="hljs-comment">// DatagramSocket() æ„é€ æ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>();<br><br>        <span class="hljs-comment">//åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…</span><br>        <span class="hljs-comment">//DatagramPacket(byte[] buf, int length, InetAddress address, int port)</span><br>        <span class="hljs-comment">//æ„é€ ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå‘é€é•¿åº¦ä¸º lengthçš„æ•°æ®åŒ…åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·ã€‚</span><br>        <span class="hljs-type">byte</span>[] bys = <span class="hljs-string">&quot;hello,udp,æˆ‘æ¥äº†&quot;</span>.getBytes();<br><br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">dp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(bys,bys.length,InetAddress.getByName(<span class="hljs-string">&quot;127.0.0.1&quot;</span>),<span class="hljs-number">10086</span>);<br><br>        <span class="hljs-comment">//è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®</span><br>        <span class="hljs-comment">//void send(DatagramPacket p) ä»æ­¤å¥—æ¥å­—å‘é€æ•°æ®æŠ¥åŒ…</span><br>        ds.send(dp);<br><br>        <span class="hljs-comment">//å…³é—­å‘é€ç«¯</span><br>        <span class="hljs-comment">//void close() å…³é—­æ­¤æ•°æ®æŠ¥å¥—æ¥å­—</span><br>        ds.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-2UDPæ¥æ”¶æ•°æ®ã€åº”ç”¨ã€‘"><a href="#2-2UDPæ¥æ”¶æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="2.2UDPæ¥æ”¶æ•°æ®ã€åº”ç”¨ã€‘"></a>2.2UDPæ¥æ”¶æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¥æ”¶æ•°æ®çš„æ­¥éª¤</p><ul><li>åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</li><li>è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</li><li>è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</li><li>å…³é—­æ¥æ”¶ç«¯</li></ul></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>DatagramPacket(byte[] buf, int len)</td><td>åˆ›å»ºä¸€ä¸ªDatagramPacketç”¨äºæ¥æ”¶é•¿åº¦ä¸ºlençš„æ•°æ®åŒ…</td></tr></tbody></table></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>byte[]  getData()</td><td>è¿”å›æ•°æ®ç¼“å†²åŒº</td></tr><tr><td>int  getLength()</td><td>è¿”å›è¦å‘é€çš„æ•°æ®çš„é•¿åº¦æˆ–æ¥æ”¶çš„æ•°æ®çš„é•¿åº¦</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReceiveDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>      <span class="hljs-comment">//åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span><br>      <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">12345</span>);<br><br>      <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</span><br>      <span class="hljs-type">byte</span>[] bys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>      <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">dp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(bys, bys.length);<br><br>      <span class="hljs-comment">//è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</span><br>      ds.receive(dp);<br><br>      <span class="hljs-comment">//è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</span><br>      System.out.println(<span class="hljs-string">&quot;æ•°æ®æ˜¯ï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(dp.getData(), <span class="hljs-number">0</span>,                                             dp.getLength()));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-3UDPé€šä¿¡ç¨‹åºç»ƒä¹ ã€åº”ç”¨ã€‘"><a href="#2-3UDPé€šä¿¡ç¨‹åºç»ƒä¹ ã€åº”ç”¨ã€‘" class="headerlink" title="2.3UDPé€šä¿¡ç¨‹åºç»ƒä¹ ã€åº”ç”¨ã€‘"></a>2.3UDPé€šä¿¡ç¨‹åºç»ƒä¹ ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>UDPå‘é€æ•°æ®ï¼šæ•°æ®æ¥è‡ªäºé”®ç›˜å½•å…¥ï¼Œç›´åˆ°è¾“å…¥çš„æ•°æ®æ˜¯886ï¼Œå‘é€æ•°æ®ç»“æŸ</p><p>UDPæ¥æ”¶æ•°æ®ï¼šå› ä¸ºæ¥æ”¶ç«¯ä¸çŸ¥é“å‘é€ç«¯ä»€ä¹ˆæ—¶å€™åœæ­¢å‘é€ï¼Œæ•…é‡‡ç”¨æ­»å¾ªç¯æ¥æ”¶</p></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">    UDPå‘é€æ•°æ®ï¼š</span><br><span class="hljs-comment">        æ•°æ®æ¥è‡ªäºé”®ç›˜å½•å…¥ï¼Œç›´åˆ°è¾“å…¥çš„æ•°æ®æ˜¯886ï¼Œå‘é€æ•°æ®ç»“æŸ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SendDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>();<br>        <span class="hljs-comment">//é”®ç›˜å½•å…¥æ•°æ®</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>          <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-comment">//è¾“å…¥çš„æ•°æ®æ˜¯886ï¼Œå‘é€æ•°æ®ç»“æŸ</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;886&quot;</span>.equals(s)) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-comment">//åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…</span><br>            <span class="hljs-type">byte</span>[] bys = s.getBytes();<br>            <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">dp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(bys, bys.length, InetAddress.getByName(<span class="hljs-string">&quot;192.168.1.66&quot;</span>), <span class="hljs-number">12345</span>);<br><br>            <span class="hljs-comment">//è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®</span><br>            ds.send(dp);<br>        &#125;<br>        <span class="hljs-comment">//å…³é—­å‘é€ç«¯</span><br>        ds.close();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    UDPæ¥æ”¶æ•°æ®ï¼š</span><br><span class="hljs-comment">        å› ä¸ºæ¥æ”¶ç«¯ä¸çŸ¥é“å‘é€ç«¯ä»€ä¹ˆæ—¶å€™åœæ­¢å‘é€ï¼Œæ•…é‡‡ç”¨æ­»å¾ªç¯æ¥æ”¶</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReceiveDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">12345</span>);<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</span><br>            <span class="hljs-type">byte</span>[] bys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">dp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(bys, bys.length);<br>            <span class="hljs-comment">//è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</span><br>            ds.receive(dp);<br>            <span class="hljs-comment">//è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</span><br>            System.out.println(<span class="hljs-string">&quot;æ•°æ®æ˜¯ï¼š&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(dp.getData(), <span class="hljs-number">0</span>, dp.getLength()));<br>        &#125;<br>        <span class="hljs-comment">//å…³é—­æ¥æ”¶ç«¯</span><br><span class="hljs-comment">//        ds.close();</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-4UDPä¸‰ç§é€šè®¯æ–¹å¼ã€ç†è§£ã€‘"><a href="#2-4UDPä¸‰ç§é€šè®¯æ–¹å¼ã€ç†è§£ã€‘" class="headerlink" title="2.4UDPä¸‰ç§é€šè®¯æ–¹å¼ã€ç†è§£ã€‘"></a>2.4UDPä¸‰ç§é€šè®¯æ–¹å¼ã€ç†è§£ã€‘</h3><ul><li><p>å•æ’­</p><p>å•æ’­ç”¨äºä¸¤ä¸ªä¸»æœºä¹‹é—´çš„ç«¯å¯¹ç«¯é€šä¿¡</p></li><li><p>ç»„æ’­</p><p>ç»„æ’­ç”¨äºå¯¹ä¸€ç»„ç‰¹å®šçš„ä¸»æœºè¿›è¡Œé€šä¿¡</p></li><li><p>å¹¿æ’­</p><p>å¹¿æ’­ç”¨äºä¸€ä¸ªä¸»æœºå¯¹æ•´ä¸ªå±€åŸŸç½‘ä¸Šæ‰€æœ‰ä¸»æœºä¸Šçš„æ•°æ®é€šä¿¡</p></li></ul><h3 id="2-5UDPç»„æ’­å®ç°ã€ç†è§£ã€‘"><a href="#2-5UDPç»„æ’­å®ç°ã€ç†è§£ã€‘" class="headerlink" title="2.5UDPç»„æ’­å®ç°ã€ç†è§£ã€‘"></a>2.5UDPç»„æ’­å®ç°ã€ç†è§£ã€‘</h3><ul><li><p>å®ç°æ­¥éª¤</p><ul><li>å‘é€ç«¯<ol><li>åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…(DatagramPacket)</li><li>è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®(åœ¨å•æ’­ä¸­,è¿™é‡Œæ˜¯å‘ç»™æŒ‡å®šIPçš„ç”µè„‘ä½†æ˜¯åœ¨ç»„æ’­å½“ä¸­,è¿™é‡Œæ˜¯å‘ç»™ç»„æ’­åœ°å€)</li><li>é‡Šæ”¾èµ„æº</li></ol></li><li>æ¥æ”¶ç«¯<ol><li>åˆ›å»ºæ¥æ”¶ç«¯Socketå¯¹è±¡(MulticastSocket)</li><li>åˆ›å»ºä¸€ä¸ªç®±å­,ç”¨äºæ¥æ”¶æ•°æ®</li><li>æŠŠå½“å‰è®¡ç®—æœºç»‘å®šä¸€ä¸ªç»„æ’­åœ°å€</li><li>å°†æ•°æ®æ¥æ”¶åˆ°ç®±å­ä¸­</li><li>è§£ææ•°æ®åŒ…,å¹¶æ‰“å°æ•°æ®</li><li>é‡Šæ”¾èµ„æº</li></ol></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å‘é€ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClinetDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">// 1. åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello ç»„æ’­&quot;</span>;<br>        <span class="hljs-type">byte</span>[] bytes = s.getBytes();<br>        <span class="hljs-type">InetAddress</span> <span class="hljs-variable">address</span> <span class="hljs-operator">=</span> InetAddress.getByName(<span class="hljs-string">&quot;224.0.1.0&quot;</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">port</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;<br>        <span class="hljs-comment">// 2. åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…(DatagramPacket)</span><br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">dp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(bytes,bytes.length,address,port);<br>        <span class="hljs-comment">// 3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®(åœ¨å•æ’­ä¸­,è¿™é‡Œæ˜¯å‘ç»™æŒ‡å®šIPçš„ç”µè„‘ä½†æ˜¯åœ¨ç»„æ’­å½“ä¸­,è¿™é‡Œæ˜¯å‘ç»™ç»„æ’­åœ°å€)</span><br>        ds.send(dp);<br>        <span class="hljs-comment">// 4. é‡Šæ”¾èµ„æº</span><br>        ds.close();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æ¥æ”¶ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">// 1. åˆ›å»ºæ¥æ”¶ç«¯Socketå¯¹è±¡(MulticastSocket)</span><br>        <span class="hljs-type">MulticastSocket</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MulticastSocket</span>(<span class="hljs-number">10000</span>);<br>        <span class="hljs-comment">// 2. åˆ›å»ºä¸€ä¸ªç®±å­,ç”¨äºæ¥æ”¶æ•°æ®</span><br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">dp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>],<span class="hljs-number">1024</span>);<br>        <span class="hljs-comment">// 3. æŠŠå½“å‰è®¡ç®—æœºç»‘å®šä¸€ä¸ªç»„æ’­åœ°å€,è¡¨ç¤ºæ·»åŠ åˆ°è¿™ä¸€ç»„ä¸­.</span><br>        ms.joinGroup(InetAddress.getByName(<span class="hljs-string">&quot;224.0.1.0&quot;</span>));<br>        <span class="hljs-comment">// 4. å°†æ•°æ®æ¥æ”¶åˆ°ç®±å­ä¸­</span><br>        ms.receive(dp);<br>        <span class="hljs-comment">// 5. è§£ææ•°æ®åŒ…,å¹¶æ‰“å°æ•°æ®</span><br>        <span class="hljs-type">byte</span>[] data = dp.getData();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> dp.getLength();<br>        System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data,<span class="hljs-number">0</span>,length));<br>        <span class="hljs-comment">// 6. é‡Šæ”¾èµ„æº</span><br>        ms.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-6UDPå¹¿æ’­å®ç°ã€ç†è§£ã€‘"><a href="#2-6UDPå¹¿æ’­å®ç°ã€ç†è§£ã€‘" class="headerlink" title="2.6UDPå¹¿æ’­å®ç°ã€ç†è§£ã€‘"></a>2.6UDPå¹¿æ’­å®ç°ã€ç†è§£ã€‘</h3><ul><li><p>å®ç°æ­¥éª¤</p><ul><li>å‘é€ç«¯<ol><li>åˆ›å»ºå‘é€ç«¯Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºå­˜å‚¨æ•°æ®çš„ç®±å­,å°†å¹¿æ’­åœ°å€å°è£…è¿›å»</li><li>å‘é€æ•°æ®</li><li>é‡Šæ”¾èµ„æº</li></ol></li><li>æ¥æ”¶ç«¯<ol><li>åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</li><li>åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</li><li>è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</li><li>è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</li><li>å…³é—­æ¥æ”¶ç«¯</li></ol></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å‘é€ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClientDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>      <span class="hljs-comment">// 1. åˆ›å»ºå‘é€ç«¯Socketå¯¹è±¡(DatagramSocket)</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>();<br><span class="hljs-comment">// 2. åˆ›å»ºå­˜å‚¨æ•°æ®çš„ç®±å­,å°†å¹¿æ’­åœ°å€å°è£…è¿›å»</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¹¿æ’­ hello&quot;</span>;<br>        <span class="hljs-type">byte</span>[] bytes = s.getBytes();<br>        <span class="hljs-type">InetAddress</span> <span class="hljs-variable">address</span> <span class="hljs-operator">=</span> InetAddress.getByName(<span class="hljs-string">&quot;255.255.255.255&quot;</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">port</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;<br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">dp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(bytes,bytes.length,address,port);<br><span class="hljs-comment">// 3. å‘é€æ•°æ®</span><br>        ds.send(dp);<br><span class="hljs-comment">// 4. é‡Šæ”¾èµ„æº</span><br>        ds.close();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æ¥æ”¶ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">// 1. åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)</span><br>        <span class="hljs-type">DatagramSocket</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramSocket</span>(<span class="hljs-number">10000</span>);<br>        <span class="hljs-comment">// 2. åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®</span><br>        <span class="hljs-type">DatagramPacket</span> <span class="hljs-variable">dp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatagramPacket</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>],<span class="hljs-number">1024</span>);<br>        <span class="hljs-comment">// 3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®</span><br>        ds.receive(dp);<br>        <span class="hljs-comment">// 4. è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º</span><br>        <span class="hljs-type">byte</span>[] data = dp.getData();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> dp.getLength();<br>        System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data,<span class="hljs-number">0</span>,length));<br>        <span class="hljs-comment">// 5. å…³é—­æ¥æ”¶ç«¯</span><br>        ds.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-TCPé€šä¿¡ç¨‹åº"><a href="#3-TCPé€šä¿¡ç¨‹åº" class="headerlink" title="3.TCPé€šä¿¡ç¨‹åº"></a>3.TCPé€šä¿¡ç¨‹åº</h2><h3 id="3-1TCPå‘é€æ•°æ®ã€åº”ç”¨ã€‘"><a href="#3-1TCPå‘é€æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="3.1TCPå‘é€æ•°æ®ã€åº”ç”¨ã€‘"></a>3.1TCPå‘é€æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>Javaä¸­çš„TCPé€šä¿¡</p><ul><li>Javaå¯¹åŸºäºTCPåè®®çš„çš„ç½‘ç»œæä¾›äº†è‰¯å¥½çš„å°è£…ï¼Œä½¿ç”¨Socketå¯¹è±¡æ¥ä»£è¡¨ä¸¤ç«¯çš„é€šä¿¡ç«¯å£ï¼Œå¹¶é€šè¿‡Socketäº§ç”ŸIOæµæ¥è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚</li><li>Javaä¸ºå®¢æˆ·ç«¯æä¾›äº†Socketç±»ï¼Œä¸ºæœåŠ¡å™¨ç«¯æä¾›äº†ServerSocketç±»</li></ul></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Socket(InetAddress address,int port)</td><td>åˆ›å»ºæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šIPæŒ‡å®šç«¯å£å·</td></tr><tr><td>Socket(String host, int port)</td><td>åˆ›å»ºæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·</td></tr></tbody></table></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>InputStream  getInputStream()</td><td>è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å…¥æµ</td></tr><tr><td>OutputStream getOutputStream()</td><td>è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµ</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClientDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå®¢æˆ·ç«¯çš„Socketå¯¹è±¡(Socket)</span><br>        <span class="hljs-comment">//Socket(String host, int port) åˆ›å»ºæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>,<span class="hljs-number">10000</span>);<br><br>        <span class="hljs-comment">//è·å–è¾“å‡ºæµï¼Œå†™æ•°æ®</span><br>        <span class="hljs-comment">//OutputStream getOutputStream() è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµ</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> s.getOutputStream();<br>        os.write(<span class="hljs-string">&quot;hello,tcp,æˆ‘æ¥äº†&quot;</span>.getBytes());<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        s.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-2TCPæ¥æ”¶æ•°æ®ã€åº”ç”¨ã€‘"><a href="#3-2TCPæ¥æ”¶æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="3.2TCPæ¥æ”¶æ•°æ®ã€åº”ç”¨ã€‘"></a>3.2TCPæ¥æ”¶æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ServletSocket(int port)</td><td>åˆ›å»ºç»‘å®šåˆ°æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨å¥—æ¥å­—</td></tr></tbody></table></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Socket accept()</td><td>ç›‘å¬è¦è¿æ¥åˆ°æ­¤çš„å¥—æ¥å­—å¹¶æ¥å—å®ƒ</td></tr></tbody></table></li><li><p>æ³¨æ„äº‹é¡¹</p><ol><li>acceptæ–¹æ³•æ˜¯é˜»å¡çš„,ä½œç”¨å°±æ˜¯ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥</li><li>å®¢æˆ·ç«¯åˆ›å»ºå¯¹è±¡å¹¶è¿æ¥æœåŠ¡å™¨,æ­¤æ—¶æ˜¯é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹åè®®,ä¿è¯è·ŸæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥</li><li>é’ˆå¯¹å®¢æˆ·ç«¯æ¥è®²,æ˜¯å¾€å¤–å†™çš„,æ‰€ä»¥æ˜¯è¾“å‡ºæµ<br>é’ˆå¯¹æœåŠ¡å™¨æ¥è®²,æ˜¯å¾€é‡Œè¯»çš„,æ‰€ä»¥æ˜¯è¾“å…¥æµ</li><li>readæ–¹æ³•ä¹Ÿæ˜¯é˜»å¡çš„</li><li>å®¢æˆ·ç«¯åœ¨å…³æµçš„æ—¶å€™,è¿˜å¤šäº†ä¸€ä¸ªå¾€æœåŠ¡å™¨å†™ç»“æŸæ ‡è®°çš„åŠ¨ä½œ</li><li>æœ€åä¸€æ­¥æ–­å¼€è¿æ¥,é€šè¿‡å››æ¬¡æŒ¥æ‰‹åè®®ä¿è¯è¿æ¥ç»ˆæ­¢</li></ol></li><li><p>ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</p><ul><li><p>ä¸‰æ¬¡æ¡æ‰‹</p><p><img src="/Hexo/../img/202202221208466.png" alt="07_TCPä¸‰æ¬¡æ¡æ‰‹"></p></li><li><p>å››æ¬¡æŒ¥æ‰‹</p><p><img src="/Hexo/../img/202202221208194.png" alt="08_TCPå››æ¬¡æŒ¥æ‰‹"></p></li></ul></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºæœåŠ¡å™¨ç«¯çš„Socketå¯¹è±¡(ServerSocket)</span><br>        <span class="hljs-comment">//ServerSocket(int port) åˆ›å»ºç»‘å®šåˆ°æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨å¥—æ¥å­—</span><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">10000</span>);<br><br>        <span class="hljs-comment">//Socket accept() ä¾¦å¬è¦è¿æ¥åˆ°æ­¤å¥—æ¥å­—å¹¶æ¥å—å®ƒ</span><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> ss.accept();<br><br>        <span class="hljs-comment">//è·å–è¾“å…¥æµï¼Œè¯»æ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ˜¾ç¤ºåœ¨æ§åˆ¶å°</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> s.getInputStream();<br>        <span class="hljs-type">byte</span>[] bys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> is.read(bys);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bys,<span class="hljs-number">0</span>,len);<br>        System.out.println(<span class="hljs-string">&quot;æ•°æ®æ˜¯ï¼š&quot;</span> + data);<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        s.close();<br>        ss.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-3TCPç¨‹åºç»ƒä¹ ã€åº”ç”¨ã€‘"><a href="#3-3TCPç¨‹åºç»ƒä¹ ã€åº”ç”¨ã€‘" class="headerlink" title="3.3TCPç¨‹åºç»ƒä¹ ã€åº”ç”¨ã€‘"></a>3.3TCPç¨‹åºç»ƒä¹ ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>å®¢æˆ·ç«¯ï¼šå‘é€æ•°æ®ï¼Œæ¥å—æœåŠ¡å™¨åé¦ˆ</p><p>æœåŠ¡å™¨ï¼šæ”¶åˆ°æ¶ˆæ¯åç»™å‡ºåé¦ˆ</p></li><li><p>æ¡ˆä¾‹åˆ†æ</p><ul><li>å®¢æˆ·ç«¯åˆ›å»ºå¯¹è±¡ï¼Œä½¿ç”¨è¾“å‡ºæµè¾“å‡ºæ•°æ®</li><li>æœåŠ¡ç«¯åˆ›å»ºå¯¹è±¡ï¼Œä½¿ç”¨è¾“å…¥æµæ¥å—æ•°æ®</li><li>æœåŠ¡ç«¯ä½¿ç”¨è¾“å‡ºæµç»™å‡ºåé¦ˆæ•°æ®</li><li>å®¢æˆ·ç«¯ä½¿ç”¨è¾“å…¥æµæ¥å—åé¦ˆæ•°æ®</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å®¢æˆ·ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClientDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>,<span class="hljs-number">10000</span>);<br><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        os.write(<span class="hljs-string">&quot;hello&quot;</span>.getBytes());<br>       <span class="hljs-comment">// os.close();å¦‚æœåœ¨è¿™é‡Œå…³æµ,ä¼šå¯¼è‡´æ•´ä¸ªsocketéƒ½æ— æ³•ä½¿ç”¨</span><br>        socket.shutdownOutput();<span class="hljs-comment">//ä»…ä»…å…³é—­è¾“å‡ºæµ.å¹¶å†™ä¸€ä¸ªç»“æŸæ ‡è®°,å¯¹socketæ²¡æœ‰ä»»ä½•å½±å“</span><br>        <br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(socket.getInputStream()));<br>        String line;<br>        <span class="hljs-keyword">while</span>((line = br.readLine())!=<span class="hljs-literal">null</span>)&#123;<br>            System.out.println(line);<br>        &#125;<br>        br.close();<br>        os.close();<br>        socket.close();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æœåŠ¡å™¨</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">10000</span>);<br><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">accept</span> <span class="hljs-operator">=</span> ss.accept();<br><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> accept.getInputStream();<br>        <span class="hljs-type">int</span> b;<br>        <span class="hljs-keyword">while</span>((b = is.read())!=-<span class="hljs-number">1</span>)&#123;<br>            System.out.println((<span class="hljs-type">char</span>) b);<br>        &#125;<br><br>        System.out.println(<span class="hljs-string">&quot;çœ‹çœ‹æˆ‘æ‰§è¡Œäº†å—?&quot;</span>);<br><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(accept.getOutputStream()));<br>        bw.write(<span class="hljs-string">&quot;ä½ è°å•Š?&quot;</span>);<br>        bw.newLine();<br>        bw.flush();<br><br>        bw.close();<br>        is.close();<br>        accept.close();<br>        ss.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-4TCPç¨‹åºæ–‡ä»¶ä¸Šä¼ ç»ƒä¹ ã€åº”ç”¨ã€‘"><a href="#3-4TCPç¨‹åºæ–‡ä»¶ä¸Šä¼ ç»ƒä¹ ã€åº”ç”¨ã€‘" class="headerlink" title="3.4TCPç¨‹åºæ–‡ä»¶ä¸Šä¼ ç»ƒä¹ ã€åº”ç”¨ã€‘"></a>3.4TCPç¨‹åºæ–‡ä»¶ä¸Šä¼ ç»ƒä¹ ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>å®¢æˆ·ç«¯ï¼šæ•°æ®æ¥è‡ªäºæœ¬åœ°æ–‡ä»¶ï¼Œæ¥æ”¶æœåŠ¡å™¨åé¦ˆ</p><p>æœåŠ¡å™¨ï¼šæ¥æ”¶åˆ°çš„æ•°æ®å†™å…¥æœ¬åœ°æ–‡ä»¶ï¼Œç»™å‡ºåé¦ˆ</p></li><li><p>æ¡ˆä¾‹åˆ†æ</p><ul><li>åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ï¼Œåˆ›å»ºè¾“å…¥æµå¯¹è±¡æŒ‡å‘æ–‡ä»¶ï¼Œæ¯è¯»ä¸€æ¬¡æ•°æ®å°±ç»™æœåŠ¡å™¨è¾“å‡ºä¸€æ¬¡æ•°æ®ï¼Œè¾“å‡ºç»“æŸåä½¿ç”¨shutdownOutput()æ–¹æ³•å‘ŠçŸ¥æœåŠ¡ç«¯ä¼ è¾“ç»“æŸ</li><li>åˆ›å»ºæœåŠ¡å™¨å¯¹è±¡ï¼Œåˆ›å»ºè¾“å‡ºæµå¯¹è±¡æŒ‡å‘æ–‡ä»¶ï¼Œæ¯æ¥å—ä¸€æ¬¡æ•°æ®å°±ä½¿ç”¨è¾“å‡ºæµè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œä¼ è¾“ç»“æŸåã€‚ä½¿ç”¨è¾“å‡ºæµç»™å®¢æˆ·ç«¯åé¦ˆä¿¡æ¯</li><li>å®¢æˆ·ç«¯æ¥å—æœåŠ¡ç«¯çš„å›é¦ˆä¿¡æ¯</li></ul></li><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void shutdownInput()</td><td>å°†æ­¤å¥—æ¥å­—çš„è¾“å…¥æµæ”¾ç½®åœ¨â€œæµçš„æœ«å°¾â€</td></tr><tr><td>void shutdownOutput()</td><td>ç¦æ­¢ç”¨æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµ</td></tr></tbody></table></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å®¢æˆ·ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClientDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">socket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Socket</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>,<span class="hljs-number">10000</span>);<br><br>        <span class="hljs-comment">//æ˜¯æœ¬åœ°çš„æµ,ç”¨æ¥è¯»å–æœ¬åœ°æ–‡ä»¶çš„.</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;socketmodule\\ClientDir\\1.jpg&quot;</span>));<br><br>        <span class="hljs-comment">//å†™åˆ°æœåŠ¡å™¨ --- ç½‘ç»œä¸­çš„æµ</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> socket.getOutputStream();<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(os);<br><br>        <span class="hljs-type">int</span> b;<br>        <span class="hljs-keyword">while</span>((b = bis.read())!=-<span class="hljs-number">1</span>)&#123;<br>            bos.write(b);<span class="hljs-comment">//é€šè¿‡ç½‘ç»œå†™åˆ°æœåŠ¡å™¨ä¸­</span><br>        &#125;<br>        bos.flush();<br>        <span class="hljs-comment">//ç»™æœåŠ¡å™¨ä¸€ä¸ªç»“æŸæ ‡è®°,å‘Šè¯‰æœåŠ¡å™¨æ–‡ä»¶å·²ç»ä¼ è¾“å®Œæ¯•</span><br>        socket.shutdownOutput();<br><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(socket.getInputStream()));<br>        String line;<br>        <span class="hljs-keyword">while</span>((line = br.readLine()) !=<span class="hljs-literal">null</span>)&#123;<br>            System.out.println(line);<br>        &#125;<br>        bis.close();<br>        socket.close();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æœåŠ¡å™¨</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">10000</span>);<br><br>        <span class="hljs-type">Socket</span> <span class="hljs-variable">accept</span> <span class="hljs-operator">=</span> ss.accept();<br><br>        <span class="hljs-comment">//ç½‘ç»œä¸­çš„æµ,ä»å®¢æˆ·ç«¯è¯»å–æ•°æ®çš„</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(accept.getInputStream());<br>        <span class="hljs-comment">//æœ¬åœ°çš„IOæµ,æŠŠæ•°æ®å†™åˆ°æœ¬åœ°ä¸­,å®ç°æ°¸ä¹…åŒ–å­˜å‚¨</span><br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;socketmodule\\ServerDir\\copy.jpg&quot;</span>));<br><br>        <span class="hljs-type">int</span> b;<br>        <span class="hljs-keyword">while</span>((b = bis.read()) !=-<span class="hljs-number">1</span>)&#123;<br>            bos.write(b);<br>        &#125;<br><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(accept.getOutputStream()));<br>        bw.write(<span class="hljs-string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span>);<br>        bw.newLine();<br>        bw.flush();<br><br>        bos.close();<br>        accept.close();<br>        ss.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-5TCPç¨‹åºæœåŠ¡å™¨ä¼˜åŒ–ã€åº”ç”¨ã€‘"><a href="#3-5TCPç¨‹åºæœåŠ¡å™¨ä¼˜åŒ–ã€åº”ç”¨ã€‘" class="headerlink" title="3.5TCPç¨‹åºæœåŠ¡å™¨ä¼˜åŒ–ã€åº”ç”¨ã€‘"></a>3.5TCPç¨‹åºæœåŠ¡å™¨ä¼˜åŒ–ã€åº”ç”¨ã€‘</h3><ul><li><p>ä¼˜åŒ–æ–¹æ¡ˆä¸€</p><ul><li><p>éœ€æ±‚</p><p>æœåŠ¡å™¨åªèƒ½å¤„ç†ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ï¼Œæ¥æ”¶å®Œä¸€ä¸ªå›¾ç‰‡ä¹‹åï¼ŒæœåŠ¡å™¨å°±å…³é—­äº†ã€‚</p></li><li><p>è§£å†³æ–¹æ¡ˆ</p><p>ä½¿ç”¨å¾ªç¯</p></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æœåŠ¡å™¨ä»£ç å¦‚ä¸‹,å®¢æˆ·ç«¯ä»£ç åŒä¸Šä¸ªæ¡ˆä¾‹,æ­¤å¤„ä¸å†ç»™å‡º</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">10000</span>);<br><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-type">Socket</span> <span class="hljs-variable">accept</span> <span class="hljs-operator">=</span> ss.accept();<br><br>            <span class="hljs-comment">//ç½‘ç»œä¸­çš„æµ,ä»å®¢æˆ·ç«¯è¯»å–æ•°æ®çš„</span><br>            <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(accept.getInputStream());<br>            <span class="hljs-comment">//æœ¬åœ°çš„IOæµ,æŠŠæ•°æ®å†™åˆ°æœ¬åœ°ä¸­,å®ç°æ°¸ä¹…åŒ–å­˜å‚¨</span><br>            <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;optimizeserver\\ServerDir\\copy.jpg&quot;</span>));<br><br>            <span class="hljs-type">int</span> b;<br>            <span class="hljs-keyword">while</span>((b = bis.read()) !=-<span class="hljs-number">1</span>)&#123;<br>                bos.write(b);<br>            &#125;<br><br>            <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(accept.getOutputStream()));<br>            bw.write(<span class="hljs-string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span>);<br>            bw.newLine();<br>            bw.flush();<br><br>            bos.close();<br>            accept.close();<br>        &#125;<br>        <span class="hljs-comment">//ss.close();</span><br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li><li><p>ä¼˜åŒ–æ–¹æ¡ˆäºŒ</p><ul><li><p>éœ€æ±‚</p><p>ç¬¬äºŒæ¬¡ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šæŠŠç¬¬ä¸€æ¬¡çš„æ–‡ä»¶ç»™è¦†ç›–ã€‚</p></li><li><p>è§£å†³æ–¹æ¡ˆ</p><p>UUID. randomUUID()æ–¹æ³•ç”Ÿæˆéšæœºçš„æ–‡ä»¶å</p></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æœåŠ¡å™¨ä»£ç å¦‚ä¸‹,å®¢æˆ·ç«¯ä»£ç åŒä¸Šä¸ªæ¡ˆä¾‹,æ­¤å¤„ä¸å†ç»™å‡º</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">10000</span>);<br><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-type">Socket</span> <span class="hljs-variable">accept</span> <span class="hljs-operator">=</span> ss.accept();<br><br>            <span class="hljs-comment">//ç½‘ç»œä¸­çš„æµ,ä»å®¢æˆ·ç«¯è¯»å–æ•°æ®çš„</span><br>            <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(accept.getInputStream());<br>            <span class="hljs-comment">//æœ¬åœ°çš„IOæµ,æŠŠæ•°æ®å†™åˆ°æœ¬åœ°ä¸­,å®ç°æ°¸ä¹…åŒ–å­˜å‚¨</span><br>            <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;optimizeserver\\ServerDir\\&quot;</span> + UUID.randomUUID().toString() + <span class="hljs-string">&quot;.jpg&quot;</span>));<br><br>            <span class="hljs-type">int</span> b;<br>            <span class="hljs-keyword">while</span>((b = bis.read()) !=-<span class="hljs-number">1</span>)&#123;<br>                bos.write(b);<br>            &#125;<br><br>            <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(accept.getOutputStream()));<br>            bw.write(<span class="hljs-string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span>);<br>            bw.newLine();<br>            bw.flush();<br><br>            bos.close();<br>            accept.close();<br>        &#125;<br>        <span class="hljs-comment">//ss.close();</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li><li><p>ä¼˜åŒ–æ–¹æ¡ˆä¸‰</p><ul><li><p>éœ€æ±‚</p><p>ä½¿ç”¨å¾ªç¯è™½ç„¶å¯ä»¥è®©æœåŠ¡å™¨å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚ã€‚ä½†æ˜¯è¿˜æ˜¯æ— æ³•åŒæ—¶è·Ÿå¤šä¸ªå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ã€‚</p></li><li><p>è§£å†³æ–¹æ¡ˆ</p><p>å¼€å¯å¤šçº¿ç¨‹å¤„ç†</p></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// çº¿ç¨‹ä»»åŠ¡ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadSocket</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-keyword">private</span> Socket acceptSocket;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadSocket</span><span class="hljs-params">(Socket accept)</span> &#123;<br>        <span class="hljs-built_in">this</span>.acceptSocket = accept;<br>    &#125;<br>  <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//ç½‘ç»œä¸­çš„æµ,ä»å®¢æˆ·ç«¯è¯»å–æ•°æ®çš„</span><br>            <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(acceptSocket.getInputStream());<br>            <span class="hljs-comment">//æœ¬åœ°çš„IOæµ,æŠŠæ•°æ®å†™åˆ°æœ¬åœ°ä¸­,å®ç°æ°¸ä¹…åŒ–å­˜å‚¨</span><br>            bos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;optimizeserver\\ServerDir\\&quot;</span> + UUID.randomUUID().toString() + <span class="hljs-string">&quot;.jpg&quot;</span>));<br><br>            <span class="hljs-type">int</span> b;<br>            <span class="hljs-keyword">while</span>((b = bis.read()) !=-<span class="hljs-number">1</span>)&#123;<br>                bos.write(b);<br>            &#125;<br>          <br>            <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(acceptSocket.getOutputStream()));<br>            bw.write(<span class="hljs-string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span>);<br>            bw.newLine();<br>            bw.flush();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">if</span>(bos != <span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    bos.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (acceptSocket != <span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    acceptSocket.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æœåŠ¡å™¨ä»£ç </span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">10000</span>);<br><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-type">Socket</span> <span class="hljs-variable">accept</span> <span class="hljs-operator">=</span> ss.accept();<br>            <span class="hljs-type">ThreadSocket</span> <span class="hljs-variable">ts</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadSocket</span>(accept);<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ts).start();<br>        &#125;<br>        <span class="hljs-comment">//ss.close();</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li><li><p>ä¼˜åŒ–æ–¹æ¡ˆå››</p><ul><li><p>éœ€æ±‚</p><p>ä½¿ç”¨å¤šçº¿ç¨‹è™½ç„¶å¯ä»¥è®©æœåŠ¡å™¨åŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚ã€‚ä½†æ˜¯èµ„æºæ¶ˆè€—å¤ªå¤§ã€‚</p></li><li><p>è§£å†³æ–¹æ¡ˆ</p><p>åŠ å…¥çº¿ç¨‹æ± </p></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æœåŠ¡å™¨ä»£ç å¦‚ä¸‹,çº¿ç¨‹ä»»åŠ¡ç±»ä»£ç åŒä¸Š,æ­¤å¤„ä¸å†ç»™å‡º</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(<span class="hljs-number">10000</span>);<br>        <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<br>                <span class="hljs-number">3</span>,<span class="hljs-comment">//æ ¸å¿ƒçº¿ç¨‹æ•°é‡</span><br>                <span class="hljs-number">10</span>,   <span class="hljs-comment">//çº¿ç¨‹æ± çš„æ€»æ•°é‡</span><br>                <span class="hljs-number">60</span>,   <span class="hljs-comment">//ä¸´æ—¶çº¿ç¨‹ç©ºé—²æ—¶é—´</span><br>                TimeUnit.SECONDS, <span class="hljs-comment">//ä¸´æ—¶çº¿ç¨‹ç©ºé—²æ—¶é—´çš„å•ä½</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">5</span>),<span class="hljs-comment">//é˜»å¡é˜Ÿåˆ—</span><br>                Executors.defaultThreadFactory(),<span class="hljs-comment">//åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.AbortPolicy()<span class="hljs-comment">//ä»»åŠ¡æ‹’ç»ç­–ç•¥</span><br>        );<br><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-type">Socket</span> <span class="hljs-variable">accept</span> <span class="hljs-operator">=</span> ss.accept();<br>            <span class="hljs-type">ThreadSocket</span> <span class="hljs-variable">ts</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadSocket</span>(accept);<br>            <span class="hljs-comment">//new Thread(ts).start();</span><br>            pool.submit(ts);<br>        &#125;<br>        <span class="hljs-comment">//ss.close();</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="4-NIO"><a href="#4-NIO" class="headerlink" title="4.NIO"></a>4.NIO</h2><h3 id="4-1æ¦‚è¿°ã€ç†è§£ã€‘"><a href="#4-1æ¦‚è¿°ã€ç†è§£ã€‘" class="headerlink" title="4.1æ¦‚è¿°ã€ç†è§£ã€‘"></a>4.1æ¦‚è¿°ã€ç†è§£ã€‘</h3><ul><li><p>BIO</p><p>Blocking IO,é˜»å¡å‹IO</p></li><li><p>NIO</p><p>No Blocking IO,éé˜»å¡å‹IO</p></li><li><p>é˜»å¡IOçš„å¼Šç«¯</p><p>åœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­,ä»€ä¹ˆäº‹ä¹Ÿåšä¸äº†</p></li><li><p>éé˜»å¡IOçš„å¥½å¤„</p><p>ä¸éœ€è¦ä¸€ç›´ç­‰å¾…,å½“ä¸€åˆ‡å°±ç»ªäº†å†å»åš</p></li></ul><h3 id="4-2NIOä¸BIOçš„åŒºåˆ«ã€ç†è§£ã€‘"><a href="#4-2NIOä¸BIOçš„åŒºåˆ«ã€ç†è§£ã€‘" class="headerlink" title="4.2NIOä¸BIOçš„åŒºåˆ«ã€ç†è§£ã€‘"></a>4.2NIOä¸BIOçš„åŒºåˆ«ã€ç†è§£ã€‘</h3><ul><li><p>åŒºåˆ«ä¸€</p><p>BIOæ˜¯é˜»å¡çš„ï¼ŒNIOæ˜¯éé˜»å¡çš„</p></li><li><p>åŒºåˆ«äºŒ</p><p>BIOæ˜¯é¢å‘æµçš„ï¼ŒNIOæ˜¯é¢å‘ç¼“å†²åŒºçš„</p><p>BIOä¸­æ•°æ®ä¼ è¾“æ˜¯å•å‘çš„ï¼ŒNIOä¸­çš„ç¼“å†²åŒºæ˜¯åŒå‘çš„</p></li></ul><h3 id="4-3NIOä¸‰å¤§æ¨¡å—ã€ç†è§£ã€‘"><a href="#4-3NIOä¸‰å¤§æ¨¡å—ã€ç†è§£ã€‘" class="headerlink" title="4.3NIOä¸‰å¤§æ¨¡å—ã€ç†è§£ã€‘"></a>4.3NIOä¸‰å¤§æ¨¡å—ã€ç†è§£ã€‘</h3><ul><li><p>ç¼“å†²åŒº</p><p>ç”¨æ¥å­˜å‚¨æ•°æ®</p></li><li><p>é€šé“</p><p>ç”¨æ¥å»ºç«‹è¿æ¥å’Œä¼ è¾“æ•°æ®</p></li><li><p>é€‰æ‹©å™¨</p><p>ç›‘è§†é€šé“çŠ¶æ€</p><p><img src="/Hexo/../img/202202221208577.png" alt="09_ä¸‰å¤§æ¨¡å—"></p></li></ul><h3 id="4-4NIOåˆ›å»ºç¼“å†²åŒºå¯¹è±¡ã€åº”ç”¨ã€‘"><a href="#4-4NIOåˆ›å»ºç¼“å†²åŒºå¯¹è±¡ã€åº”ç”¨ã€‘" class="headerlink" title="4.4NIOåˆ›å»ºç¼“å†²åŒºå¯¹è±¡ã€åº”ç”¨ã€‘"></a>4.4NIOåˆ›å»ºç¼“å†²åŒºå¯¹è±¡ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>static  ByteBuffer  allocate(é•¿åº¦)</td><td>åˆ›å»ºbyteç±»å‹çš„ç¼“å†²åŒº</td></tr><tr><td>static  ByteBuffer  wrap(byte[] array)</td><td>åˆ›å»ºä¸€ä¸ªæœ‰å†…å®¹çš„byteç±»å‹ç¼“å†²åŒº</td></tr></tbody></table></li><li><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateByteBufferDemo1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//method1();</span><br><br>        <span class="hljs-comment">//method2();</span><br><br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">wrap</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(<span class="hljs-string">&quot;aaa&quot;</span>.getBytes());<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;<br>            System.out.println(wrap.get());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method2</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">byte</span> [] bytes = &#123;<span class="hljs-number">97</span>,<span class="hljs-number">98</span>,<span class="hljs-number">99</span>&#125;;<br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer2</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(bytes);<br>        <span class="hljs-comment">//ç¼“å†²åŒºçš„é•¿åº¦3</span><br>        <span class="hljs-comment">//ç¼“å†²åŒºé‡Œé¢çš„å†…å®¹å°±æ˜¯å­—èŠ‚æ•°ç»„çš„å†…å®¹.</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;<br>            System.out.println(byteBuffer2.get());<br>        &#125;<br>        System.out.println(byteBuffer2.get());<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method1</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer1</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">5</span>);<br>        <span class="hljs-comment">//get</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            System.out.println(byteBuffer1.get());<br>        &#125;<br>        System.out.println(byteBuffer1.get());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-5NIOç¼“å†²åŒºæ·»åŠ æ•°æ®ã€åº”ç”¨ã€‘"><a href="#4-5NIOç¼“å†²åŒºæ·»åŠ æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="4.5NIOç¼“å†²åŒºæ·»åŠ æ•°æ®ã€åº”ç”¨ã€‘"></a>4.5NIOç¼“å†²åŒºæ·»åŠ æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><p><img src="/Hexo/../img/202202221208336.png" alt="10_NIOç¼“å†²åŒºæ·»åŠ æ•°æ®"></p></li><li><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ByteBufferDemo2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//        int position()  å½“å‰è¦æ“ä½œçš„ç´¢å¼•</span><br><span class="hljs-comment">//        int limit()   æœ€å¤šèƒ½æ“ä½œåˆ°å“ªä¸ªç´¢å¼•</span><br><span class="hljs-comment">//        int capacity()  ç¼“å†²åŒºçš„æ€»é•¿åº¦</span><br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">10</span>);<br>        System.out.println(byteBuffer.position());<span class="hljs-comment">//0</span><br>        System.out.println(byteBuffer.limit());<span class="hljs-comment">//10</span><br>        System.out.println(byteBuffer.capacity());<span class="hljs-comment">//10</span><br><br><span class="hljs-comment">//        put(byte b)  ä¸€æ¬¡æ·»åŠ ä¸€ä¸ªå­—èŠ‚</span><br><span class="hljs-comment">//        byteBuffer.put((byte) 97);</span><br><span class="hljs-comment">//        System.out.println(byteBuffer.position());</span><br><span class="hljs-comment">//        System.out.println(byteBuffer.limit());</span><br><span class="hljs-comment">//        System.out.println(byteBuffer.capacity());</span><br><br><span class="hljs-comment">//        put(byte[] src) ä¸€æ¬¡æ·»åŠ ä¸€ä¸ªå­—èŠ‚æ•°ç»„</span><br><span class="hljs-comment">//        byteBuffer.put(&quot;aaa&quot;.getBytes());</span><br><span class="hljs-comment">//        System.out.println(byteBuffer.position());//3</span><br><span class="hljs-comment">//        System.out.println(byteBuffer.limit());//10</span><br><span class="hljs-comment">//        System.out.println(byteBuffer.capacity());//10</span><br><br><span class="hljs-comment">//        position(int newPosition) ä¿®æ”¹position</span><br><span class="hljs-comment">//        byteBuffer.position(1);</span><br><br><span class="hljs-comment">//        limit(int newLimit)  ä¿®æ”¹limit</span><br><span class="hljs-comment">//        byteBuffer.limit(5);</span><br><span class="hljs-comment">//        System.out.println(byteBuffer.position());</span><br><span class="hljs-comment">//        System.out.println(byteBuffer.limit());</span><br><span class="hljs-comment">//        System.out.println(byteBuffer.capacity());</span><br><br><span class="hljs-comment">//        int remaining()  è¿˜æœ‰å¤šå°‘èƒ½æ“ä½œ</span><br><span class="hljs-comment">//        boolean hasRemaining()  æ˜¯å¦è¿˜æœ‰èƒ½æ“ä½œçš„</span><br><br>        byteBuffer.put(<span class="hljs-string">&quot;0123456789&quot;</span>.getBytes());<br>        System.out.println(byteBuffer.remaining());<br>        System.out.println(byteBuffer.hasRemaining());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-6NIOç¼“å†²åŒºè·å–æ•°æ®ã€åº”ç”¨ã€‘"><a href="#4-6NIOç¼“å†²åŒºè·å–æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="4.6NIOç¼“å†²åŒºè·å–æ•°æ®ã€åº”ç”¨ã€‘"></a>4.6NIOç¼“å†²åŒºè·å–æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>flip()</td><td>åˆ‡æ¢è¯»å†™æ¨¡å¼ï¼ˆå†™Ã è¯»ï¼‰</td></tr><tr><td>get()</td><td>è¯»ä¸€ä¸ªå­—èŠ‚</td></tr><tr><td>get(byte[]  dst)</td><td>è¯»å¤šä¸ªå­—èŠ‚</td></tr><tr><td>get(int  index)</td><td>è¯»æŒ‡å®šç´¢å¼•çš„å­—èŠ‚</td></tr><tr><td>rewind()</td><td>å°†positionè®¾ç½®ä¸º0ï¼Œå¯ä»¥é‡å¤è¯»</td></tr><tr><td>clear()</td><td>æ•°æ®è¯»å†™å®Œæ¯•ï¼ˆè¯»-&gt;å†™ï¼‰</td></tr><tr><td>array()</td><td>å°†ç¼“å†²åŒºè½¬æ¢æˆå­—èŠ‚æ•°ç»„è¿”å›</td></tr></tbody></table></li><li><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ByteBufferDemo3</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocate(<span class="hljs-number">10</span>);<br>        byteBuffer.put(<span class="hljs-string">&quot;abc&quot;</span>.getBytes());<br><br><span class="hljs-comment">//        flip()  åˆ‡æ¢è¯»å†™æ¨¡å¼ï¼ˆå†™ïƒ è¯»ï¼‰</span><br>        byteBuffer.flip();<br><span class="hljs-comment">//        get()   è¯»ä¸€ä¸ªå­—èŠ‚</span><br><span class="hljs-comment">//        while(byteBuffer.limit() != byteBuffer.position())&#123;</span><br><span class="hljs-comment">//            System.out.println((char) byteBuffer.get());</span><br><span class="hljs-comment">//        &#125;</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; byteBuffer.limit(); i++) &#123;<br>            System.out.println((<span class="hljs-type">char</span>) byteBuffer.get());<br>        &#125;<br><br><span class="hljs-comment">//        get(byte[] dst) è¯»å¤šä¸ªå­—èŠ‚</span><br><span class="hljs-comment">//        byte [] bytes = new byte[byteBuffer.limit()];</span><br><span class="hljs-comment">//        byteBuffer.get(bytes);</span><br><span class="hljs-comment">//        System.out.println(new String(bytes));</span><br><br><span class="hljs-comment">//        get(int index)  è¯»æŒ‡å®šç´¢å¼•çš„å­—èŠ‚</span><br><span class="hljs-comment">//        System.out.println((char) byteBuffer.get(0));</span><br><br><span class="hljs-comment">//        rewind()    å°†positionè®¾ç½®ä¸º0ï¼Œå¯ä»¥é‡å¤è¯»</span><br><span class="hljs-comment">//        byteBuffer.rewind();</span><br><span class="hljs-comment">//        for (int i = 0; i &lt; byteBuffer.limit(); i++) &#123;</span><br><span class="hljs-comment">//            System.out.println((char) byteBuffer.get());</span><br><span class="hljs-comment">//        &#125;</span><br><br><span class="hljs-comment">//        clear()     æ•°æ®è¯»å†™å®Œæ¯•ï¼ˆè¯»-&gt;å†™ï¼‰</span><br>        byteBuffer.clear();<br>        byteBuffer.put(<span class="hljs-string">&quot;qqq&quot;</span>.getBytes());<br><span class="hljs-comment">//        array()     å°†ç¼“å†²åŒºè½¬æ¢æˆå­—èŠ‚æ•°ç»„è¿”å›</span><br><br>        <span class="hljs-type">byte</span>[] bytes = byteBuffer.array();<br>        System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bytes));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-7å°ç»“ã€ç†è§£ã€‘"><a href="#4-7å°ç»“ã€ç†è§£ã€‘" class="headerlink" title="4.7å°ç»“ã€ç†è§£ã€‘"></a>4.7å°ç»“ã€ç†è§£ã€‘</h3><ol><li><p>éœ€æ±‚ï¼šæˆ‘è¦æŠŠæ•°æ®å†™åˆ°ç¼“å†²åŒºä¸­ã€‚</p><p>æ•°æ®æ˜¯ä»å¤–é¢è¿›å…¥åˆ°ç¼“å†²åŒºçš„ï¼Œæ‰€ä»¥ç¼“å†²åŒºåœ¨åšè¯»æ•°æ®çš„æ“ä½œã€‚</p></li><li><p>éœ€æ±‚ï¼šæˆ‘è¦æŠŠæ•°æ®ä»ç¼“å†²åŒºä¸­è¯»å‡ºæ¥ã€‚</p><p>æ•°æ®æ˜¯ä»ç¼“å†²åŒºé‡Œé¢åˆ°å¤–é¢çš„ã€‚æ‰€ä»¥ç¼“å†²åŒºåœ¨åšå†™æ•°æ®çš„æ“ä½œã€‚</p></li><li><p>capacityï¼šå®¹é‡ï¼ˆé•¿åº¦ï¼‰<br>limitï¼š   ç•Œé™ï¼ˆæœ€å¤šèƒ½è¯»&#x2F;å†™åˆ°å“ªé‡Œï¼‰<br>posotionï¼šä½ç½®ï¼ˆè¯»&#x2F;å†™å“ªä¸ªç´¢å¼•ï¼‰</p></li><li><p>è·å–ç¼“å†²åŒºé‡Œé¢æ•°æ®ä¹‹å‰ï¼Œéœ€è¦è°ƒç”¨flipæ–¹æ³•</p></li><li><p>å†æ¬¡å†™æ•°æ®ä¹‹å‰ï¼Œéœ€è¦è°ƒç”¨clearæ–¹æ³•ï¼Œ</p><p>ä½†æ˜¯æ•°æ®è¿˜æœªæ¶ˆå¤±ï¼Œç­‰å†æ¬¡å†™å…¥æ•°æ®ï¼Œè¢«è¦†ç›–äº†æ‰ä¼šæ¶ˆå¤±ã€‚</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mysqlé¢è¯•é¢˜</title>
    <link href="/Hexo/2021/04/01/MySql%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <url>/Hexo/2021/04/01/MySql%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>1ã€ä¸€å¼ è¡¨ï¼Œé‡Œé¢æœ‰ ID è‡ªå¢ä¸»é”®ï¼Œå½“ insert äº† 17 æ¡è®°å½•ä¹‹åï¼Œåˆ é™¤äº†ç¬¬ 15,16,17 æ¡è®°å½•ï¼Œ å†æŠŠ Mysql é‡å¯ï¼Œå† insert ä¸€æ¡è®°å½•ï¼Œè¿™æ¡è®°å½•çš„ ID æ˜¯ 18 è¿˜æ˜¯ 15 ï¼Ÿ </p><p>(1)å¦‚æœè¡¨çš„ç±»å‹æ˜¯ MyISAMï¼Œé‚£ä¹ˆæ˜¯ 18 å› ä¸º MyISAM è¡¨ä¼šæŠŠè‡ªå¢ä¸»é”®çš„æœ€å¤§ ID è®°å½•åˆ°æ•°æ®æ–‡ä»¶é‡Œï¼Œé‡å¯ MySQL è‡ªå¢ä¸»é”®çš„æœ€å¤§ ID ä¹Ÿä¸ä¼šä¸¢å¤± </p><p>ï¼ˆ2ï¼‰å¦‚æœè¡¨çš„ç±»å‹æ˜¯ InnoDBï¼Œé‚£ä¹ˆæ˜¯ 15 InnoDB è¡¨åªæ˜¯æŠŠè‡ªå¢ä¸»é”®çš„æœ€å¤§ ID è®°å½•åˆ°å†…å­˜ä¸­ï¼Œæ‰€ä»¥é‡å¯æ•°æ®åº“æˆ–è€…æ˜¯å¯¹è¡¨è¿›è¡Œ OPTIMIZE æ“ä½œï¼Œéƒ½ä¼šå¯¼è‡´æœ€å¤§ ID ä¸¢å¤±</p><p> 2ã€Mysql çš„æŠ€æœ¯ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><p> Mysql æ•°æ®åº“è½¯ä»¶æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ç³»ç»Ÿï¼Œå…¶ä¸­åŒ…æ‹¬ï¼šæ”¯æŒå„ç§å®¢æˆ·ç«¯ç¨‹åºå’Œåº“çš„å¤š çº¿ç¨‹ SQL æœåŠ¡å™¨ã€ä¸åŒçš„åç«¯ã€å¹¿æ³›çš„åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£å’Œç®¡ç†å·¥å…·ã€‚</p><p> 3ã€Heap è¡¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p> HEAP è¡¨å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç”¨äºä¸´æ—¶é«˜é€Ÿå­˜å‚¨ã€‚ BLOB æˆ– TEXT å­—æ®µæ˜¯ä¸å…è®¸çš„ åªèƒ½ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦&#x3D;ï¼Œ&lt;ï¼Œ&gt;ï¼Œ&#x3D;&gt;ï¼Œ&#x3D; &lt; HEAP è¡¨ä¸æ”¯æŒ AUTO_INCREMENT ç´¢å¼•ä¸å¯ä¸º NULL</p><p> 4ã€Mysql æœåŠ¡å™¨é»˜è®¤ç«¯å£æ˜¯ä»€ä¹ˆï¼Ÿ</p><p> Mysql æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£æ˜¯ 3306ã€‚</p><p> 5ã€ä¸ Oracle ç›¸æ¯”ï¼ŒMysql æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ Mysql æ˜¯å¼€æºè½¯ä»¶ï¼Œéšæ—¶å¯ç”¨ï¼Œæ— éœ€ä»˜è´¹ã€‚ Mysql æ˜¯ä¾¿æºå¼çš„ å¸¦æœ‰å‘½ä»¤æç¤ºç¬¦çš„ GUIã€‚ ä½¿ç”¨ Mysql æŸ¥è¯¢æµè§ˆå™¨æ”¯æŒç®¡ç†</p><p> 6ã€å¦‚ä½•åŒºåˆ† FLOAT å’Œ DOUBLEï¼Ÿ</p><p> ä»¥ä¸‹æ˜¯ FLOAT å’Œ DOUBLE çš„åŒºåˆ«ï¼š æµ®ç‚¹æ•°ä»¥ 8 ä½ç²¾åº¦å­˜å‚¨åœ¨ FLOAT ä¸­ï¼Œå¹¶ä¸”æœ‰å››ä¸ªå­—èŠ‚ã€‚ æµ®ç‚¹æ•°å­˜å‚¨åœ¨ DOUBLE ä¸­ï¼Œç²¾åº¦ä¸º 18 ä½ï¼Œæœ‰å…«ä¸ªå­—èŠ‚ã€‚</p><p> 7ã€åŒºåˆ† CHAR_LENGTH å’Œ LENGTHï¼Ÿ</p><p> CHAR_LENGTH æ˜¯å­—ç¬¦æ•°ï¼Œè€Œ LENGTH æ˜¯å­—èŠ‚æ•°ã€‚Latin å­—ç¬¦çš„è¿™ä¸¤ä¸ªæ•°æ®æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å¯¹ äº Unicode å’Œå…¶ä»–ç¼–ç ï¼Œå®ƒä»¬æ˜¯ä¸åŒçš„ã€‚ </p><p>8ã€è¯·ç®€æ´æè¿° Mysql ä¸­ InnoDB æ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«åç§°ï¼Œä»¥åŠé€çº§ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ </p><p>SQL æ ‡å‡†å®šä¹‰çš„å››ä¸ªéš”ç¦»çº§åˆ«ä¸ºï¼š read uncommited ï¼šè¯»åˆ°æœªæäº¤æ•°æ® read committedï¼šè„è¯»ï¼Œä¸å¯é‡å¤è¯» repeatable readï¼šå¯é‡è¯» serializable ï¼šä¸²è¡Œäº‹ç‰© </p><p>9ã€åœ¨ Mysql ä¸­ ENUM çš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p><p> ENUM æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œç”¨äºæŒ‡å®šä¸€ç»„é¢„å®šä¹‰çš„å€¼ï¼Œå¹¶å¯åœ¨åˆ›å»ºè¡¨æ—¶ä½¿ç”¨ã€‚ Create table size(name ENUM(â€˜Smail,â€™Mediumâ€™,â€™Largeâ€™); </p><p>10ã€å¦‚ä½•å®šä¹‰ REGEXPï¼Ÿ</p><p> REGEXP æ˜¯æ¨¡å¼åŒ¹é…ï¼Œå…¶ä¸­åŒ¹é…æ¨¡å¼åœ¨æœç´¢å€¼çš„ä»»ä½•ä½ç½®ã€‚</p><p>11ã€CHAR å’Œ VARCHAR çš„åŒºåˆ«ï¼Ÿ</p><p> ä»¥ä¸‹æ˜¯ CHAR å’Œ VARCHAR çš„åŒºåˆ«ï¼š CHAR å’Œ VARCHAR ç±»å‹åœ¨å­˜å‚¨å’Œæ£€ç´¢æ–¹é¢æœ‰æ‰€ä¸åŒ CHAR åˆ—é•¿åº¦å›ºå®šä¸ºåˆ›å»ºè¡¨æ—¶å£°æ˜çš„é•¿åº¦ï¼Œé•¿åº¦å€¼èŒƒå›´æ˜¯ 1 åˆ° 255 å½“ CHAR å€¼è¢«å­˜å‚¨æ—¶ï¼Œå®ƒä»¬è¢«ç”¨ç©ºæ ¼å¡«å……åˆ°ç‰¹å®šé•¿åº¦ï¼Œæ£€ç´¢ CHAR å€¼æ—¶éœ€åˆ é™¤å°¾éšç©ºæ ¼ã€‚</p><p> 12ã€åˆ—çš„å­—ç¬¦ä¸²ç±»å‹å¯ä»¥æ˜¯ä»€ä¹ˆï¼Ÿ </p><p>å­—ç¬¦ä¸²ç±»å‹æ˜¯ï¼š SET BLOB ENUM CHAR TEXT VARCHAR</p><p> 13ã€å¦‚ä½•è·å–å½“å‰çš„ Mysql ç‰ˆæœ¬ï¼Ÿ </p><p>SELECT VERSION();ç”¨äºè·å–å½“å‰ Mysql çš„ç‰ˆæœ¬ã€‚ </p><p>14ã€Mysql ä¸­ä½¿ç”¨ä»€ä¹ˆå­˜å‚¨å¼•æ“ï¼Ÿ </p><p>å­˜å‚¨å¼•æ“ç§°ä¸ºè¡¨ç±»å‹ï¼Œæ•°æ®ä½¿ç”¨å„ç§æŠ€æœ¯å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ã€‚ æŠ€æœ¯æ¶‰åŠï¼š Storage mechanism Locking levels Indexing Capabilities and functions.</p><p>15ã€Mysql é©±åŠ¨ç¨‹åºæ˜¯ä»€ä¹ˆï¼Ÿ</p><p> ä»¥ä¸‹æ˜¯ Mysql ä¸­å¯ç”¨çš„é©±åŠ¨ç¨‹åºï¼š PHP é©±åŠ¨ç¨‹åº JDBC é©±åŠ¨ç¨‹åº ODBC é©±åŠ¨ç¨‹åº CWRAPPER PYTHON é©±åŠ¨ç¨‹åº PERL é©±åŠ¨ç¨‹åº RUBY é©±åŠ¨ç¨‹åº CAP11PHP é©±åŠ¨ç¨‹åº Ado.net5.mxj </p><p>16ã€TIMESTAMP åœ¨ UPDATE CURRENT_TIMESTAMP æ•°æ®ç±»å‹ä¸Šåšä»€ä¹ˆï¼Ÿ</p><p> åˆ›å»ºè¡¨æ—¶ TIMESTAMP åˆ—ç”¨ Zero æ›´æ–°ã€‚åªè¦è¡¨ä¸­çš„å…¶ä»–å­—æ®µå‘ç”Ÿæ›´æ”¹ï¼ŒUPDATE CURRENT_TIMESTAMP ä¿®é¥°ç¬¦å°±å°†æ—¶é—´æˆ³å­—æ®µæ›´æ–°ä¸ºå½“å‰æ—¶é—´ã€‚ </p><p>17ã€ä¸»é”®å’Œå€™é€‰é”®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p> è¡¨æ ¼çš„æ¯ä¸€è¡Œéƒ½ç”±ä¸»é”®å”¯ä¸€æ ‡è¯†,ä¸€ä¸ªè¡¨åªæœ‰ä¸€ä¸ªä¸»é”®ã€‚ ä¸»é”®ä¹Ÿæ˜¯å€™é€‰é”®ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œå€™é€‰é”®å¯ä»¥è¢«æŒ‡å®šä¸ºä¸»é”®ï¼Œå¹¶ä¸”å¯ä»¥ç”¨äºä»»ä½•å¤–é”®å¼•ç”¨ã€‚</p><p> 18ã€å¦‚ä½•ä½¿ç”¨ Unix shell ç™»å½• Mysqlï¼Ÿ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç™»å½•ï¼š [mysql dir]&#x2F;bin&#x2F;mysql -h hostname -u </p><p>19ã€ myisamchk æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ </p><p>å®ƒç”¨æ¥å‹ç¼© MyISAM è¡¨ï¼Œè¿™å‡å°‘äº†ç£ç›˜æˆ–å†…å­˜ä½¿ç”¨ã€‚</p><p> 20ã€MYSQL æ•°æ®åº“æœåŠ¡å™¨æ€§èƒ½åˆ†æçš„æ–¹æ³•å‘½ä»¤æœ‰å“ªäº›? </p><p><a href="https://img-blog.csdnimg.cn/89b489c71d96487da9bb94bbde94c1d6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16">https://img-blog.csdnimg.cn/89b489c71d96487da9bb94bbde94c1d6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAbWFuX29uZQ==,size_20,color_FFFFFF,t_70,g_se,x_16</a></p><p>21ã€å¦‚ä½•æ§åˆ¶ HEAP è¡¨çš„æœ€å¤§å°ºå¯¸ï¼Ÿ</p><p> Heal è¡¨çš„å¤§å°å¯é€šè¿‡ç§°ä¸º max_heap_table_size çš„ Mysql é…ç½®å˜é‡æ¥æ§åˆ¶ã€‚ </p><p>22ã€MyISAM Static å’Œ MyISAM Dynamic æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p> åœ¨ MyISAM Static ä¸Šçš„æ‰€æœ‰å­—æ®µæœ‰å›ºå®šå®½åº¦ã€‚åŠ¨æ€ MyISAM è¡¨å°†å…·æœ‰åƒ TEXTï¼ŒBLOB ç­‰å­— æ®µï¼Œä»¥é€‚åº”ä¸åŒé•¿åº¦çš„æ•°æ®ç±»å‹ã€‚ç‚¹å‡»è¿™é‡Œæœ‰ä¸€å¥—æœ€å…¨é˜¿é‡Œé¢è¯•é¢˜æ€»ç»“ã€‚ MyISAM Static åœ¨å—æŸæƒ…å†µä¸‹æ›´å®¹æ˜“æ¢å¤ã€‚ </p><p>23ã€federated è¡¨æ˜¯ä»€ä¹ˆï¼Ÿ </p><p>federated è¡¨ï¼Œå…è®¸è®¿é—®ä½äºå…¶ä»–æœåŠ¡å™¨æ•°æ®åº“ä¸Šçš„è¡¨ã€‚ </p><p>24ã€å¦‚æœä¸€ä¸ªè¡¨æœ‰ä¸€åˆ—å®šä¹‰ä¸º TIMESTAMPï¼Œå°†å‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p> æ¯å½“è¡Œè¢«æ›´æ”¹æ—¶ï¼Œæ—¶é—´æˆ³å­—æ®µå°†è·å–å½“å‰æ—¶é—´æˆ³ã€‚ </p><p>25ã€åˆ—è®¾ç½®ä¸º AUTO INCREMENT æ—¶ï¼Œå¦‚æœåœ¨è¡¨ä¸­è¾¾åˆ°æœ€å¤§å€¼ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ</p><p> å®ƒä¼šåœæ­¢é€’å¢ï¼Œä»»ä½•è¿›ä¸€æ­¥çš„æ’å…¥éƒ½å°†äº§ç”Ÿé”™è¯¯ï¼Œå› ä¸ºå¯†é’¥å·²è¢«ä½¿ç”¨ã€‚ </p><p>26ã€æ€æ ·æ‰èƒ½æ‰¾å‡ºæœ€åä¸€æ¬¡æ’å…¥æ—¶åˆ†é…äº†å“ªä¸ªè‡ªåŠ¨å¢é‡ï¼Ÿ LAST_INSERT_ID å°†è¿”å›ç”± Auto_increment åˆ†é…çš„æœ€åä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”ä¸éœ€è¦æŒ‡å®šè¡¨åç§°ã€‚</p><p> 27ã€ä½ æ€ä¹ˆçœ‹åˆ°ä¸ºè¡¨æ ¼å®šä¹‰çš„æ‰€æœ‰ç´¢å¼•ï¼Ÿ</p><p> ç´¢å¼•æ˜¯é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸ºè¡¨æ ¼å®šä¹‰çš„ï¼š SHOW INDEX FROM </p><p>28.ã€LIKE å£°æ˜ä¸­çš„ï¼…å’Œ_æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ ï¼…å¯¹åº”äº 0 ä¸ªæˆ–æ›´å¤šå­—ç¬¦ï¼Œ_åªæ˜¯ LIKE è¯­å¥ä¸­çš„ä¸€ä¸ªå­—ç¬¦ã€‚ </p><p>29ã€å¦‚ä½•åœ¨ Unix å’Œ Mysql æ—¶é—´æˆ³ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼Ÿ UNIX_TIMESTAMP æ˜¯ä» Mysql æ—¶é—´æˆ³è½¬æ¢ä¸º Unix æ—¶é—´æˆ³çš„å‘½ä»¤ FROM_UNIXTIME æ˜¯ä» Unix æ—¶é—´æˆ³è½¬æ¢ä¸º Mysql æ—¶é—´æˆ³çš„å‘½ä»¤ </p><p>30ã€åˆ—å¯¹æ¯”è¿ç®—ç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ</p><p> åœ¨ SELECT è¯­å¥çš„åˆ—æ¯”è¾ƒä¸­ä½¿ç”¨&#x3D;ï¼Œ&lt;&gt;ï¼Œ&lt;&#x3D;ï¼Œ&lt;ï¼Œ&gt; &#x3D;ï¼Œ&gt;ï¼Œ&lt;&lt;ï¼Œ&gt;&gt;ï¼Œ&lt;&#x3D;&gt;ï¼ŒANDï¼ŒOR æˆ– LIKE è¿ ç®—ç¬¦ã€‚</p><p> 31ã€æˆ‘ä»¬å¦‚ä½•å¾—åˆ°å—æŸ¥è¯¢å½±å“çš„è¡Œæ•°ï¼Ÿ</p><p> è¡Œæ•°å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç è·å¾—ï¼š SELECT COUNT(user_id)FROM users; </p><p>32ã€Mysql æŸ¥è¯¢æ˜¯å¦åŒºåˆ†å¤§å°å†™ï¼Ÿ</p><p> ä¸åŒºåˆ† SELECT VERSION(), CURRENT_DATE; SeLect version(), current_date; seleCt vErSiOn(), current_DATE; æ‰€æœ‰è¿™äº›ä¾‹å­éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒMysql ä¸åŒºåˆ†å¤§å°å†™ã€‚</p><p> 33.ã€LIKE å’Œ REGEXP æ“ä½œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ </p><p>LIKE å’Œ REGEXP è¿ç®—ç¬¦ç”¨äºè¡¨ç¤º^å’Œï¼…ã€‚ SELECT * FROM employee WHERE emp_name REGEXP â€œ^bâ€; SELECT * FROM employee WHERE emp_name LIKE â€œ%bâ€; </p><p>34.ã€BLOB å’Œ TEXT æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ </p><p>BLOB æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å¯¹è±¡ï¼Œå¯ä»¥å®¹çº³å¯å˜æ•°é‡çš„æ•°æ®ã€‚æœ‰å››ç§ç±»å‹çš„ BLOB - TINYBLOB BLOB MEDIUMBLOB å’Œ LONGBLOB å®ƒä»¬åªèƒ½åœ¨æ‰€èƒ½å®¹çº³ä»·å€¼çš„æœ€å¤§é•¿åº¦ä¸Šæœ‰æ‰€ä¸åŒã€‚ TEXT æ˜¯ä¸€ä¸ªä¸åŒºåˆ†å¤§å°å†™çš„ BLOBã€‚å››ç§ TEXT ç±»å‹ TINYTEXT TEXT MEDIUMTEXT å’Œ LONGTEXT å®ƒä»¬å¯¹åº”äºå››ç§ BLOB ç±»å‹ï¼Œå¹¶å…·æœ‰ç›¸åŒçš„æœ€å¤§é•¿åº¦å’Œå­˜å‚¨è¦æ±‚ã€‚ BLOB å’Œ TEXT ç±»å‹ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«åœ¨äºå¯¹ BLOB å€¼è¿›è¡Œæ’åºå’Œæ¯”è¾ƒæ—¶åŒºåˆ†å¤§å°å†™ï¼Œå¯¹ TEXT å€¼ä¸åŒºåˆ†å¤§å°å†™ã€‚ </p><p>35ã€mysql_fetch_array å’Œ mysql_fetch_object çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ ä»¥ä¸‹æ˜¯ mysql_fetch_array å’Œ mysql_fetch_object çš„åŒºåˆ«ï¼š mysql_fetch_arrayï¼ˆï¼‰ - å°†ç»“æœè¡Œä½œä¸ºå…³è”æ•°ç»„æˆ–æ¥è‡ªæ•°æ®åº“çš„å¸¸è§„æ•°ç»„è¿”å›ã€‚ mysql_fetch_object - ä»æ•°æ®åº“è¿”å›ç»“æœè¡Œä½œä¸ºå¯¹è±¡ã€‚</p><p> 36ã€æˆ‘ä»¬å¦‚ä½•åœ¨ mysql ä¸­è¿è¡Œæ‰¹å¤„ç†æ¨¡å¼ï¼Ÿ ä»¥ä¸‹å‘½ä»¤ç”¨äºåœ¨æ‰¹å¤„ç†æ¨¡å¼ä¸‹è¿è¡Œï¼š mysql; mysql mysql.out </p><p>37ã€MyISAM è¡¨æ ¼å°†åœ¨å“ªé‡Œå­˜å‚¨ï¼Œå¹¶ä¸”è¿˜æä¾›å…¶å­˜å‚¨æ ¼å¼ï¼Ÿ</p><p> æ¯ä¸ª MyISAM è¡¨æ ¼ä»¥ä¸‰ç§æ ¼å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼š Â·â€œ.frmâ€æ–‡ä»¶å­˜å‚¨è¡¨å®šä¹‰ Â·æ•°æ®æ–‡ä»¶å…·æœ‰â€œ.MYDâ€ï¼ˆMYDataï¼‰æ‰©å±•å ç´¢å¼•æ–‡ä»¶å…·æœ‰â€œ.MYIâ€ï¼ˆMYIndexï¼‰æ‰©å±•å </p><p>38.ã€Mysql ä¸­æœ‰å“ªäº›ä¸åŒçš„è¡¨æ ¼ï¼Ÿ</p><p> å…±æœ‰ 5 ç§ç±»å‹çš„è¡¨æ ¼ï¼š MyISAM Heap Merge INNODB ISAM MyISAM æ˜¯ Mysql çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚</p><p>39ã€ISAM æ˜¯ä»€ä¹ˆï¼Ÿ</p><p> ISAM ç®€ç§°ä¸ºç´¢å¼•é¡ºåºè®¿é—®æ–¹æ³•ã€‚å®ƒæ˜¯ç”± IBM å¼€å‘çš„ï¼Œç”¨äºåœ¨ç£å¸¦ç­‰è¾…åŠ©å­˜å‚¨ç³»ç»Ÿä¸Šå­˜å‚¨å’Œ æ£€ç´¢æ•°æ®ã€‚</p><p> 40ã€InnoDB æ˜¯ä»€ä¹ˆï¼Ÿ</p><p> lnnoDB æ˜¯ä¸€ä¸ªç”± Oracle å…¬å¸å¼€å‘çš„ Innobase Oy äº‹åŠ¡å®‰å…¨å­˜å‚¨å¼•æ“ã€‚ </p><p>41ã€Mysql å¦‚ä½•ä¼˜åŒ– DISTINCTï¼Ÿ</p><p> DISTINCT åœ¨æ‰€æœ‰åˆ—ä¸Šè½¬æ¢ä¸º GROUP BYï¼Œå¹¶ä¸ ORDER BY å­å¥ç»“åˆä½¿ç”¨ã€‚ 1 SELECT DISTINCT t1.a FROM t1,t2 where t1.a&#x3D;t2.a;</p><p> 42ã€å¦‚ä½•è¾“å…¥å­—ç¬¦ä¸ºåå…­è¿›åˆ¶æ•°å­—ï¼Ÿ</p><p> å¦‚æœæƒ³è¾“å…¥å­—ç¬¦ä¸ºåå…­è¿›åˆ¶æ•°å­—ï¼Œå¯ä»¥è¾“å…¥å¸¦æœ‰å•å¼•å·çš„åå…­è¿›åˆ¶æ•°å­—å’Œå‰ç¼€ï¼ˆXï¼‰ï¼Œæˆ–è€… åªç”¨ï¼ˆOxï¼‰å‰ç¼€è¾“å…¥åå…­è¿›åˆ¶æ•°å­—ã€‚ å¦‚æœè¡¨è¾¾å¼ä¸Šä¸‹æ–‡æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™åå…­è¿›åˆ¶æ•°å­—ä¸²å°†è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ </p><p>43ã€å¦‚ä½•æ˜¾ç¤ºå‰ 50 è¡Œï¼Ÿ </p><p>åœ¨ Mysql ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç æŸ¥è¯¢æ˜¾ç¤ºå‰ 50 è¡Œï¼š SELECT*FROM LIMIT 0,50; 44ã€å¯ä»¥ä½¿ç”¨å¤šå°‘åˆ—åˆ›å»ºç´¢å¼•ï¼Ÿ ä»»ä½•æ ‡å‡†è¡¨æœ€å¤šå¯ä»¥åˆ›å»º 16 ä¸ªç´¢å¼•åˆ—ã€‚</p><p> 45ã€NOWï¼ˆï¼‰å’Œ CURRENT_DATEï¼ˆï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p> NOWï¼ˆï¼‰å‘½ä»¤ç”¨äºæ˜¾ç¤ºå½“å‰å¹´ä»½ï¼Œæœˆä»½ï¼Œæ—¥æœŸï¼Œå°æ—¶ï¼Œåˆ†é’Ÿå’Œç§’ã€‚ CURRENT_DATEï¼ˆï¼‰ä»…æ˜¾ç¤ºå½“å‰å¹´ä»½ï¼Œæœˆä»½å’Œæ—¥æœŸã€‚ 46ã€ä»€ä¹ˆæ ·çš„å¯¹è±¡å¯ä»¥ä½¿ç”¨ CREATE è¯­å¥åˆ›å»ºï¼Ÿ</p><p> ä»¥ä¸‹å¯¹è±¡æ˜¯ä½¿ç”¨ CREATE è¯­å¥åˆ›å»ºçš„ï¼š DATABASE EVENT FUNCTION INDEX PROCEDURE TABLE TRIGGER USER VIEW </p><p>47ã€Mysql è¡¨ä¸­å…è®¸æœ‰å¤šå°‘ä¸ª TRIGGERSï¼Ÿ</p><p> åœ¨ Mysql è¡¨ä¸­å…è®¸æœ‰å…­ä¸ªè§¦å‘å™¨ï¼Œå¦‚ä¸‹ï¼š BEFORE INSERT AFTER INSERT BEFORE UPDATE AFTER UPDATE BEFORE DELETE AFTER DELETE </p><p>48ã€ä»€ä¹ˆæ˜¯éæ ‡å‡†å­—ç¬¦ä¸²ç±»å‹ï¼Ÿ</p><p> ä»¥ä¸‹æ˜¯éæ ‡å‡†å­—ç¬¦ä¸²ç±»å‹ï¼š TINYTEXT TEXT MEDIUMTEXT LONGTEXT </p><p>49ã€ä»€ä¹ˆæ˜¯é€šç”¨ SQL å‡½æ•°ï¼Ÿ</p><p> CONCAT(A, B) - è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²å€¼ä»¥åˆ›å»ºå•ä¸ªå­—ç¬¦ä¸²è¾“å‡ºã€‚é€šå¸¸ç”¨äºå°†ä¸¤ä¸ªæˆ–å¤šä¸ªå­—æ®µåˆ å¹¶ä¸ºä¸€ä¸ªå­—æ®µã€‚ FORMAT(X, D)- æ ¼å¼åŒ–æ•°å­— X åˆ° D æœ‰æ•ˆæ•°å­—ã€‚ CURRDATE(), CURRTIME()- è¿”å›å½“å‰æ—¥æœŸæˆ–æ—¶é—´ã€‚ NOWï¼ˆï¼‰ - å°†å½“å‰æ—¥æœŸå’Œæ—¶é—´ä½œä¸ºä¸€ä¸ªå€¼è¿”å›ã€‚ MONTHï¼ˆï¼‰ï¼ŒDAYï¼ˆï¼‰ï¼ŒYEARï¼ˆï¼‰ï¼ŒWEEKï¼ˆï¼‰ï¼ŒWEEKDAYï¼ˆï¼‰ - ä»æ—¥æœŸå€¼ä¸­æå–ç»™å®šæ•°æ®ã€‚ HOURï¼ˆï¼‰ï¼ŒMINUTEï¼ˆï¼‰ï¼ŒSECONDï¼ˆï¼‰ - ä»æ—¶é—´å€¼ä¸­æå–ç»™å®šæ•°æ®ã€‚ DATEDIFFï¼ˆAï¼ŒBï¼‰ - ç¡®å®šä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å¼‚ï¼Œé€šå¸¸ç”¨äºè®¡ç®—å¹´é¾„ SUBTIMESï¼ˆAï¼ŒBï¼‰ - ç¡®å®šä¸¤æ¬¡ä¹‹é—´çš„å·®å¼‚ã€‚ FROMDAYSï¼ˆINTï¼‰ - å°†æ•´æ•°å¤©æ•°è½¬æ¢ä¸ºæ—¥æœŸå€¼ã€‚ </p><p>50ã€è§£é‡Šè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Ÿ</p><p> ACLï¼ˆè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰æ˜¯ä¸å¯¹è±¡å…³è”çš„æƒé™åˆ—è¡¨ã€‚è¿™ä¸ªåˆ—è¡¨æ˜¯ Mysql æœåŠ¡å™¨å®‰å…¨æ¨¡å‹çš„åŸº ç¡€ï¼Œå®ƒæœ‰åŠ©äºæ’é™¤ç”¨æˆ·æ— æ³•è¿æ¥çš„é—®é¢˜ã€‚ Mysql å°† ACLï¼ˆä¹Ÿç§°ä¸ºæˆæƒè¡¨ï¼‰ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚å½“ç”¨æˆ·å°è¯•è®¤è¯æˆ–è¿è¡Œå‘½ä»¤æ—¶ï¼ŒMysql ä¼šæŒ‰ ç…§é¢„å®šçš„é¡ºåºæ£€æŸ¥ ACL çš„è®¤è¯ä¿¡æ¯å’Œæƒé™ã€‚ </p><p>51ã€MYSQL æ”¯æŒäº‹åŠ¡å—ï¼Ÿ </p><p>åœ¨ç¼ºçœæ¨¡å¼ä¸‹ï¼ŒMYSQL æ˜¯ autocommit æ¨¡å¼çš„ï¼Œæ‰€æœ‰çš„æ•°æ®åº“æ›´æ–°æ“ä½œéƒ½ä¼šå³æ—¶æäº¤ï¼Œæ‰€ ä»¥åœ¨ç¼ºçœæƒ…å†µä¸‹ï¼Œmysql æ˜¯ä¸æ”¯æŒäº‹åŠ¡çš„ã€‚ ä½†æ˜¯å¦‚æœä½ çš„ MYSQL è¡¨ç±»å‹æ˜¯ä½¿ç”¨ InnoDB Tables æˆ– BDB tables çš„è¯ï¼Œä½ çš„ MYSQL å°±å¯ä»¥ ä½¿ç”¨äº‹åŠ¡å¤„ç†,ä½¿ç”¨ SET AUTOCOMMIT&#x3D;0 å°±å¯ä»¥ä½¿ MYSQL å…è®¸åœ¨é autocommit æ¨¡å¼ï¼Œåœ¨é autocommit æ¨¡å¼ä¸‹ï¼Œä½ å¿…é¡»ä½¿ç”¨ COMMIT æ¥æäº¤ä½ çš„æ›´æ”¹ï¼Œæˆ–è€…ç”¨ ROLLBACK æ¥å›æ»šä½ çš„ æ›´æ”¹ã€‚ ç¤ºä¾‹å¦‚ä¸‹ï¼š ä¸€ START TRANSACTION;</p><p> SELECT @A:&#x3D;SUM(salary) FROM table1 WHERE type&#x3D;1; UPDATE table2 SET summmary&#x3D;@A WHERE type&#x3D;1;</p><p> COMMIT;</p><p> 52ã€mysql é‡Œè®°å½•è´§å¸ç”¨ä»€ä¹ˆå­—æ®µç±»å‹å¥½ï¼Ÿ</p><p> NUMERIC å’Œ DECIMAL ç±»å‹è¢« Mysql å®ç°ä¸ºåŒæ ·çš„ç±»å‹ï¼Œè¿™åœ¨ SQL92 æ ‡å‡†å…è®¸ã€‚</p><p>ä»–ä»¬è¢«ç”¨äº ä¿å­˜å€¼ï¼Œè¯¥å€¼çš„å‡†ç¡®ç²¾åº¦æ˜¯æå…¶é‡è¦çš„å€¼ï¼Œä¾‹å¦‚ä¸é‡‘é’±æœ‰å…³çš„æ•°æ®ã€‚å½“å£°æ˜ä¸€ä¸ªç±»æ˜¯è¿™äº› ç±»å‹ä¹‹ä¸€æ—¶ï¼Œç²¾åº¦å’Œè§„æ¨¡çš„èƒ½è¢«(å¹¶ä¸”é€šå¸¸æ˜¯)æŒ‡å®šï¼›ç‚¹å‡»è¿™é‡Œæœ‰ä¸€å¥—æœ€å…¨é˜¿é‡Œé¢è¯•é¢˜æ€» ç»“ã€‚</p><p> ä¾‹å¦‚ï¼š salary DECIMAL(9,2) åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ9(precision)ä»£è¡¨å°†è¢«ç”¨äºå­˜å‚¨å€¼çš„æ€»çš„å°æ•°ä½æ•°ï¼Œè€Œ 2(scale)ä»£è¡¨å°†è¢«ç”¨äº å­˜å‚¨å°æ•°ç‚¹åçš„ä½æ•°ã€‚ å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œèƒ½è¢«å­˜å‚¨åœ¨ salary åˆ—ä¸­çš„å€¼çš„èŒƒå›´æ˜¯ä»-9999999.99 åˆ° 9999999.99ã€‚ åœ¨ ANSI&#x2F;ISO SQL92 ä¸­ï¼Œå¥æ³• DECIMAL(p)ç­‰ä»·äº DECIMAL(p,0)ã€‚ åŒæ ·ï¼Œå¥æ³• DECIMAL ç­‰ä»·äº DECIMAL(p,0)ï¼Œè¿™é‡Œå®ç°è¢«å…è®¸å†³å®šå€¼ pã€‚Mysql å½“å‰ä¸æ”¯æŒ DECIMAL&#x2F;NUMERIC æ•°æ®ç±»å‹çš„è¿™äº›å˜ç§å½¢å¼çš„ä»»ä¸€ç§ã€‚ è¿™ä¸€èˆ¬è¯´æ¥ä¸æ˜¯ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå› ä¸ºè¿™äº›ç±»å‹çš„ä¸»è¦ç›Šå¤„å¾—è‡ªäºæ˜æ˜¾åœ°æ§åˆ¶ç²¾åº¦å’Œè§„æ¨¡ çš„èƒ½åŠ›ã€‚ DECIMAL å’Œ NUMERIC å€¼ä½œä¸ºå­—ç¬¦ä¸²å­˜å‚¨ï¼Œè€Œä¸æ˜¯ä½œä¸ºäºŒè¿›åˆ¶æµ®ç‚¹æ•°ï¼Œä»¥ä¾¿ä¿å­˜é‚£äº›å€¼çš„å° æ•°ç²¾åº¦ã€‚ ä¸€ä¸ªå­—ç¬¦ç”¨äºå€¼çš„æ¯ä¸€ä½ã€å°æ•°ç‚¹(å¦‚æœ scale&gt;0)å’Œâ€œ-â€ç¬¦å·(å¯¹äºè´Ÿå€¼)ã€‚å¦‚æœ scale æ˜¯ 0ï¼Œ DECIMAL å’Œ NUMERIC å€¼ä¸åŒ…å«å°æ•°ç‚¹æˆ–å°æ•°éƒ¨åˆ†ã€‚ DECIMAL å’Œ NUMERIC å€¼å¾—æœ€å¤§çš„èŒƒå›´ä¸ DOUBLE ä¸€æ ·ï¼Œä½†æ˜¯å¯¹äºä¸€ä¸ªç»™å®šçš„ DECIMAL æˆ– NUMERIC åˆ—ï¼Œå®é™…çš„èŒƒå›´å¯ç”±åˆ¶ç”±ç»™å®šåˆ—çš„ precision æˆ– scale é™åˆ¶ã€‚ å½“è¿™æ ·çš„åˆ—èµ‹ç»™äº†å°æ•°ç‚¹åé¢çš„ä½è¶…è¿‡æŒ‡å®š scale æ‰€å…è®¸çš„ä½çš„å€¼ï¼Œè¯¥å€¼æ ¹æ® scale å››èˆäº” å…¥ã€‚ å½“ä¸€ä¸ª DECIMAL æˆ– NUMERIC åˆ—è¢«èµ‹ç»™äº†å…¶å¤§å°è¶…è¿‡æŒ‡å®š(æˆ–ç¼ºçœçš„ï¼‰precision å’Œ scale éšå« çš„èŒƒå›´çš„å€¼ï¼ŒMysql å­˜å‚¨è¡¨ç¤ºé‚£ä¸ªèŒƒå›´çš„ç›¸åº”çš„ç«¯ç‚¹å€¼ã€‚ æˆ‘å¸Œæœ›æœ¬æ–‡å¯ä»¥å¸®åŠ©ä½ æå‡æŠ€æœ¯æ°´å¹³ã€‚é‚£äº›ï¼Œæ„Ÿè§‰å­¦çš„å¥½éš¾ï¼Œç”šè‡³ä¼šä»¤ä½ æ²®ä¸§çš„äººï¼Œåˆ«æ‹… å¿ƒï¼Œæˆ‘è®¤ä¸ºï¼Œå¦‚æœä½ æ„¿æ„è¯•ä¸€è¯•æœ¬æ–‡ä»‹ç»çš„å‡ ç‚¹ï¼Œä¼šå‘å‰è¿ˆè¿›ï¼Œå…‹æœè¿™ç§æ„Ÿè§‰ã€‚è¿™äº›è¦ç‚¹ ä¹Ÿè®¸å¯¹ä½ ä¸é€‚ç”¨ï¼Œä½†ä½ ä¼šæ˜ç¡®ä¸€ä¸ªé‡è¦çš„é“ç†ï¼šæ¥å—è‡ªå·±è§‰å¾—å—å›°è¿™ä¸ªäº‹å®æ˜¯æ‘†è„±è¿™ä¸ªå›° å¢ƒçš„ç¬¬ä¸€æ­¥ã€‚</p><p> 53ã€MYSQL æ•°æ®è¡¨åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å®¹æ˜“æŸåï¼Ÿ</p><p> æœåŠ¡å™¨çªç„¶æ–­ç”µå¯¼è‡´æ•°æ®æ–‡ä»¶æŸåã€‚ å¼ºåˆ¶å…³æœºï¼Œæ²¡æœ‰å…ˆå…³é—­ mysql æœåŠ¡ç­‰ã€‚ </p><p>54ã€mysql æœ‰å…³æƒé™çš„è¡¨éƒ½æœ‰å“ªå‡ ä¸ªï¼Ÿ</p><p> Mysql æœåŠ¡å™¨é€šè¿‡æƒé™è¡¨æ¥æ§åˆ¶ç”¨æˆ·å¯¹æ•°æ®åº“çš„è®¿é—®ï¼Œæƒé™è¡¨å­˜æ”¾åœ¨ mysql æ•°æ®åº“é‡Œï¼Œç”± mysql_install_db è„šæœ¬åˆå§‹åŒ–ã€‚è¿™äº›æƒé™è¡¨åˆ†åˆ« userï¼Œdbï¼Œtable_privï¼Œcolumns_priv å’Œ hostã€‚</p><p> 55ã€Mysql ä¸­æœ‰å“ªå‡ ç§é”ï¼Ÿ </p><p>MyISAM æ”¯æŒè¡¨é”ï¼ŒInnoDB æ”¯æŒè¡¨é”å’Œè¡Œé”ï¼Œé»˜è®¤ä¸ºè¡Œé” è¡¨çº§é”ï¼šå¼€é”€å°ï¼ŒåŠ é”å¿«ï¼Œä¸ä¼šå‡ºç°æ­»é”ã€‚é”å®šç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘é‡ æœ€ä½ è¡Œçº§é”ï¼šå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼Œä¼šå‡ºç°æ­»é”ã€‚é”åŠ›åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡å°ï¼Œå¹¶å‘åº¦æœ€é«˜</p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mysql</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤šçº¿ç¨‹01</title>
    <link href="/Hexo/2021/03/30/%E5%A4%9A%E7%BA%BF%E7%A8%8B01/"/>
    <url>/Hexo/2021/03/30/%E5%A4%9A%E7%BA%BF%E7%A8%8B01/</url>
    
    <content type="html"><![CDATA[<h3 id="1-1ç®€å•äº†è§£å¤šçº¿ç¨‹ã€ç†è§£ã€‘"><a href="#1-1ç®€å•äº†è§£å¤šçº¿ç¨‹ã€ç†è§£ã€‘" class="headerlink" title="1.1ç®€å•äº†è§£å¤šçº¿ç¨‹ã€ç†è§£ã€‘"></a>1.1ç®€å•äº†è§£å¤šçº¿ç¨‹ã€ç†è§£ã€‘</h3><p>æ˜¯æŒ‡ä»è½¯ä»¶æˆ–è€…ç¡¬ä»¶ä¸Šå®ç°å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æŠ€æœ¯ã€‚<br>å…·æœ‰å¤šçº¿ç¨‹èƒ½åŠ›çš„è®¡ç®—æœºå› æœ‰ç¡¬ä»¶æ”¯æŒè€Œèƒ½å¤Ÿåœ¨åŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œæå‡æ€§èƒ½ã€‚</p><p><img src="https://pic1.imgdb.cn/item/623e9bf327f86abb2aee4aeb.png" alt="01_ç®€å•äº†è§£å¤šçº¿ç¨‹"></p><h3 id="1-2å¹¶å‘å’Œå¹¶è¡Œã€ç†è§£ã€‘"><a href="#1-2å¹¶å‘å’Œå¹¶è¡Œã€ç†è§£ã€‘" class="headerlink" title="1.2å¹¶å‘å’Œå¹¶è¡Œã€ç†è§£ã€‘"></a>1.2å¹¶å‘å’Œå¹¶è¡Œã€ç†è§£ã€‘</h3><ul><li><p>å¹¶è¡Œï¼šåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¤šä¸ªæŒ‡ä»¤åœ¨å¤šä¸ªCPUä¸ŠåŒæ—¶æ‰§è¡Œã€‚</p><p><img src="https://pic1.imgdb.cn/item/623e9bf327f86abb2aee4b64.png" alt="02_å¹¶è¡Œ"></p></li><li><p>å¹¶å‘ï¼šåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¤šä¸ªæŒ‡ä»¤åœ¨å•ä¸ªCPUä¸Šäº¤æ›¿æ‰§è¡Œã€‚</p><p><img src="https://pic1.imgdb.cn/item/623e9bf427f86abb2aee4bfe.png" alt="03_å¹¶å‘"></p></li></ul><h3 id="1-3è¿›ç¨‹å’Œçº¿ç¨‹ã€ç†è§£ã€‘"><a href="#1-3è¿›ç¨‹å’Œçº¿ç¨‹ã€ç†è§£ã€‘" class="headerlink" title="1.3è¿›ç¨‹å’Œçº¿ç¨‹ã€ç†è§£ã€‘"></a>1.3è¿›ç¨‹å’Œçº¿ç¨‹ã€ç†è§£ã€‘</h3><ul><li><p>è¿›ç¨‹ï¼šæ˜¯æ­£åœ¨è¿è¡Œçš„ç¨‹åº</p><p>ç‹¬ç«‹æ€§ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªèƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç³»ç»Ÿåˆ†é…èµ„æºå’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½<br>åŠ¨æ€æ€§ï¼šè¿›ç¨‹çš„å®è´¨æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿›ç¨‹æ˜¯åŠ¨æ€äº§ç”Ÿï¼ŒåŠ¨æ€æ¶ˆäº¡çš„<br>å¹¶å‘æ€§ï¼šä»»ä½•è¿›ç¨‹éƒ½å¯ä»¥åŒå…¶ä»–è¿›ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œ</p></li><li><p>çº¿ç¨‹ï¼šæ˜¯è¿›ç¨‹ä¸­çš„å•ä¸ªé¡ºåºæ§åˆ¶æµï¼Œæ˜¯ä¸€æ¡æ‰§è¡Œè·¯å¾„</p><pre><code class="hljs">å•çº¿ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹å¦‚æœåªæœ‰ä¸€æ¡æ‰§è¡Œè·¯å¾„ï¼Œåˆ™ç§°ä¸ºå•çº¿ç¨‹ç¨‹åºå¤šçº¿ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹å¦‚æœæœ‰å¤šæ¡æ‰§è¡Œè·¯å¾„ï¼Œåˆ™ç§°ä¸ºå¤šçº¿ç¨‹ç¨‹åº</code></pre><p>â€‹</p></li></ul><h3 id="1-4å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»ã€åº”ç”¨ã€‘"><a href="#1-4å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»ã€åº”ç”¨ã€‘" class="headerlink" title="1.4å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»ã€åº”ç”¨ã€‘"></a>1.4å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€<font color='red'>ï¼šç»§æ‰¿Threadç±»</font>ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void run()</td><td>åœ¨çº¿ç¨‹å¼€å¯åï¼Œæ­¤æ–¹æ³•å°†è¢«è°ƒç”¨æ‰§è¡Œ</td></tr><tr><td>void start()</td><td>ä½¿æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼ŒJavaè™šæ‹Ÿæœºä¼šè°ƒç”¨runæ–¹æ³•()</td></tr></tbody></table></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyThreadç»§æ‰¿Threadç±»</li><li>åœ¨MyThreadç±»ä¸­é‡å†™run()æ–¹æ³•</li><li>åˆ›å»ºMyThreadç±»çš„å¯¹è±¡</li><li>å¯åŠ¨çº¿ç¨‹</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThreadDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br><br><span class="hljs-comment">//        my1.run();</span><br><span class="hljs-comment">//        my2.run();</span><br><br>        <span class="hljs-comment">//void start() å¯¼è‡´æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œ; Javaè™šæ‹Ÿæœºè°ƒç”¨æ­¤çº¿ç¨‹çš„runæ–¹æ³•</span><br>        my1.start();<br>        my2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä¸¤ä¸ªå°é—®é¢˜</p><ul><li><p>ä¸ºä»€ä¹ˆè¦é‡å†™run()æ–¹æ³•ï¼Ÿ</p><p>å› ä¸ºrun()æ˜¯ç”¨æ¥å°è£…è¢«çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </p></li><li><p>run()æ–¹æ³•å’Œstart()æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ</p><p>run()ï¼šå°è£…çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ï¼Œç›´æ¥è°ƒç”¨ï¼Œç›¸å½“äºæ™®é€šæ–¹æ³•çš„è°ƒç”¨</p><p>start()ï¼šå¯åŠ¨çº¿ç¨‹ï¼›ç„¶åç”±JVMè°ƒç”¨æ­¤çº¿ç¨‹çš„run()æ–¹æ³•</p></li></ul></li></ul><h3 id="1-5å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£ã€åº”ç”¨ã€‘"><a href="#1-5å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£ã€åº”ç”¨ã€‘" class="headerlink" title="1.5å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£ã€åº”ç”¨ã€‘"></a>1.5å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°<font color='red'>Runnableæ¥å£</font>ã€åº”ç”¨ã€‘</h3><ul><li><p>Threadæ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Thread(Runnable target)</td><td>åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡</td></tr><tr><td>Thread(Runnable target, String name)</td><td>åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡</td></tr></tbody></table></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyRunnableå®ç°Runnableæ¥å£</li><li>åœ¨MyRunnableç±»ä¸­<font color='red'>é‡å†™run()æ–¹æ³•</font></li><li>åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡</li><li>åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>å¯åŠ¨çº¿ç¨‹</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(Thread.currentThread().getName()+<span class="hljs-string">&quot;:&quot;</span>+i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRunnableDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡</span><br>        <span class="hljs-type">MyRunnable</span> <span class="hljs-variable">my</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();<br><br>        <span class="hljs-comment">//åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</span><br>        <span class="hljs-comment">//Thread(Runnable target)</span><br><span class="hljs-comment">//        Thread t1 = new Thread(my);</span><br><span class="hljs-comment">//        Thread t2 = new Thread(my);</span><br>        <span class="hljs-comment">//Thread(Runnable target, String name)</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(my,<span class="hljs-string">&quot;å¦å…‹&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(my,<span class="hljs-string">&quot;é£æœº&quot;</span>);<br><br>        <span class="hljs-comment">//å¯åŠ¨çº¿ç¨‹</span><br>        t1.start();<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="å®ç°æ¥å£-VS-ç»§æ‰¿-Thread"><a href="#å®ç°æ¥å£-VS-ç»§æ‰¿-Thread" class="headerlink" title="å®ç°æ¥å£ VS ç»§æ‰¿ Thread"></a>å®ç°æ¥å£ VS ç»§æ‰¿ Thread</h3><p>å®ç°æ¥å£ä¼šæ›´å¥½ä¸€äº›ï¼Œå› ä¸º:</p><ul><li>Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œå› æ­¤ç»§æ‰¿äº† Thread ç±»å°±æ— æ³•ç»§æ‰¿å…¶å®ƒç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼›</li><li>ç±»å¯èƒ½åªè¦æ±‚å¯æ‰§è¡Œå°±è¡Œï¼Œç»§æ‰¿æ•´ä¸ª Thread ç±»å¼€é”€è¿‡å¤§ã€‚</li></ul><h3 id="1-6å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰-å®ç°Callableæ¥å£ã€åº”ç”¨ã€‘"><a href="#1-6å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰-å®ç°Callableæ¥å£ã€åº”ç”¨ã€‘" class="headerlink" title="1.6å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰: å®ç°Callableæ¥å£ã€åº”ç”¨ã€‘"></a>1.6å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰: å®ç°<font color='red'>Callableæ¥å£</font>ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>V call()</td><td>è®¡ç®—ç»“æœï¼Œå¦‚æœæ— æ³•è®¡ç®—ç»“æœï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</td></tr><tr><td>FutureTask(Callable<V> callable)</td><td>åˆ›å»ºä¸€ä¸ª FutureTaskï¼Œä¸€æ—¦è¿è¡Œå°±æ‰§è¡Œç»™å®šçš„ Callable</td></tr><tr><td>V get()</td><td>å¦‚æœ‰å¿…è¦ï¼Œç­‰å¾…è®¡ç®—å®Œæˆï¼Œç„¶åè·å–å…¶ç»“æœ</td></tr></tbody></table></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyCallableå®ç°Callableæ¥å£</li><li>åœ¨MyCallableç±»ä¸­<font color='red'>é‡å†™call()æ–¹æ³•</font></li><li>åˆ›å»ºMyCallableç±»çš„å¯¹è±¡</li><li>åˆ›å»ºFutureçš„å®ç°ç±»FutureTaskå¯¹è±¡ï¼ŒæŠŠMyCallableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠFutureTaskå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>å¯åŠ¨çº¿ç¨‹</li><li>å†è°ƒç”¨getæ–¹æ³•ï¼Œå°±å¯ä»¥è·å–çº¿ç¨‹ç»“æŸä¹‹åçš„ç»“æœã€‚</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCallable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;String&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;è·Ÿå¥³å­©è¡¨ç™½&quot;</span> + i);<br>        &#125;<br>        <span class="hljs-comment">//è¿”å›å€¼å°±è¡¨ç¤ºçº¿ç¨‹è¿è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ç­”åº”&quot;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ExecutionException, InterruptedException &#123;<br>        <span class="hljs-comment">//çº¿ç¨‹å¼€å¯ä¹‹åéœ€è¦æ‰§è¡Œé‡Œé¢çš„callæ–¹æ³•</span><br>        <span class="hljs-type">MyCallable</span> <span class="hljs-variable">mc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCallable</span>();<br><br>        <span class="hljs-comment">//Thread t1 = new Thread(mc);</span><br><br>        <span class="hljs-comment">//å¯ä»¥è·å–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ.ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™Threadå¯¹è±¡</span><br>        FutureTask&lt;String&gt; ft = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;&gt;(mc);<br><br>        <span class="hljs-comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ft);<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> ft.get();<br>        <span class="hljs-comment">//å¼€å¯çº¿ç¨‹</span><br>        t1.start();<br><br>        <span class="hljs-comment">//String s = ft.get();</span><br>        System.out.println(s);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><img src="https://pic1.imgdb.cn/item/6357f13916f2c2beb1fc9f41.png" alt="image-20221025222028899"  /></li><li><p>ä¸‰ç§å®ç°æ–¹å¼çš„å¯¹æ¯”</p><ul><li><p>å®ç°Runnableã€Callableæ¥å£</p><ul><li><p>å¥½å¤„: æ‰©å±•æ€§å¼ºï¼Œå®ç°è¯¥æ¥å£çš„åŒæ—¶è¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–çš„ç±»</p></li><li><p>ç¼ºç‚¹: ç¼–ç¨‹ç›¸å¯¹å¤æ‚ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•</p></li></ul></li><li><p>ç»§æ‰¿Threadç±»</p><ul><li><p>å¥½å¤„: ç¼–ç¨‹æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•</p></li><li><p>ç¼ºç‚¹: å¯ä»¥æ‰©å±•æ€§è¾ƒå·®ï¼Œä¸èƒ½å†ç»§æ‰¿å…¶ä»–çš„ç±»</p></li><li><p>- </p><p><img src="https://pic1.imgdb.cn/item/6357f46016f2c2beb102946a.png" alt="image-20221025223357308"></p></li></ul></li></ul></li></ul><h3 id="1-7è®¾ç½®å’Œè·å–çº¿ç¨‹åç§°ã€åº”ç”¨ã€‘"><a href="#1-7è®¾ç½®å’Œè·å–çº¿ç¨‹åç§°ã€åº”ç”¨ã€‘" class="headerlink" title="1.7è®¾ç½®å’Œè·å–çº¿ç¨‹åç§°ã€åº”ç”¨ã€‘"></a>1.7è®¾ç½®å’Œè·å–çº¿ç¨‹åç§°ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void  setName(String name)</td><td>å°†æ­¤çº¿ç¨‹çš„åç§°æ›´æ”¹ä¸ºç­‰äºå‚æ•°name</td></tr><tr><td>String  getName()</td><td>è¿”å›æ­¤çº¿ç¨‹çš„åç§°</td></tr><tr><td>Thread  currentThread()</td><td>è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyThread</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyThread</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(getName()+<span class="hljs-string">&quot;:&quot;</span>+i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThreadDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br><br>        <span class="hljs-comment">//void setName(String name)ï¼šå°†æ­¤çº¿ç¨‹çš„åç§°æ›´æ”¹ä¸ºç­‰äºå‚æ•° name</span><br>        my1.setName(<span class="hljs-string">&quot;é«˜é“&quot;</span>);<br>        my2.setName(<span class="hljs-string">&quot;é£æœº&quot;</span>);<br><br>        <span class="hljs-comment">//Thread(String name)</span><br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;é«˜é“&quot;</span>);<br>        <span class="hljs-type">MyThread</span> <span class="hljs-variable">my2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>(<span class="hljs-string">&quot;é£æœº&quot;</span>);<br><br>        my1.start();<br>        my2.start();<br><br>        <span class="hljs-comment">//static Thread currentThread() è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨</span><br>        System.out.println(Thread.currentThread().getName());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-8çº¿ç¨‹ä¼‘çœ ã€åº”ç”¨ã€‘"><a href="#1-8çº¿ç¨‹ä¼‘çœ ã€åº”ç”¨ã€‘" class="headerlink" title="1.8çº¿ç¨‹ä¼‘çœ ã€åº”ç”¨ã€‘"></a>1.8çº¿ç¨‹ä¼‘çœ ã€åº”ç”¨ã€‘</h3><ul><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>static void sleep(long millis)</td><td>ä½¿å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœç•™ï¼ˆæš‚åœæ‰§è¡Œï¼‰æŒ‡å®šçš„æ¯«ç§’æ•°</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">100</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br><br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;---&quot;</span> + i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-comment">/*System.out.println(&quot;ç¡è§‰å‰&quot;);</span><br><span class="hljs-comment">        Thread.sleep(3000);</span><br><span class="hljs-comment">        System.out.println(&quot;ç¡é†’äº†&quot;);*/</span><br><br>        <span class="hljs-type">MyRunnable</span> <span class="hljs-variable">mr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr);<br><br>        t1.start();<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>yield()</p><p>å¯¹é™æ€æ–¹æ³• Thread.yield() çš„è°ƒç”¨å£°æ˜äº†å½“å‰çº¿ç¨‹å·²ç»å®Œæˆäº†ç”Ÿå‘½å‘¨æœŸä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå¯ä»¥åˆ‡æ¢ç»™å…¶å®ƒçº¿ç¨‹æ¥æ‰§è¡Œã€‚è¯¥æ–¹æ³•åªæ˜¯å¯¹çº¿ç¨‹è°ƒåº¦å™¨çš„ä¸€ä¸ªå»ºè®®ï¼Œè€Œä¸”ä¹Ÿåªæ˜¯å»ºè®®å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„å…¶å®ƒçº¿ç¨‹å¯ä»¥è¿è¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>    Thread.yield();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="1-9çº¿ç¨‹ä¼˜å…ˆçº§ã€åº”ç”¨ã€‘"><a href="#1-9çº¿ç¨‹ä¼˜å…ˆçº§ã€åº”ç”¨ã€‘" class="headerlink" title="1.9çº¿ç¨‹ä¼˜å…ˆçº§ã€åº”ç”¨ã€‘"></a>1.9çº¿ç¨‹ä¼˜å…ˆçº§ã€åº”ç”¨ã€‘</h3><ul><li><p>çº¿ç¨‹è°ƒåº¦</p><ul><li><p>ä¸¤ç§è°ƒåº¦æ–¹å¼</p><ul><li>åˆ†æ—¶è°ƒåº¦æ¨¡å‹ï¼šæ‰€æœ‰çº¿ç¨‹è½®æµä½¿ç”¨ CPU çš„ä½¿ç”¨æƒï¼Œå¹³å‡åˆ†é…æ¯ä¸ªçº¿ç¨‹å ç”¨ CPU çš„æ—¶é—´ç‰‡</li><li>æŠ¢å å¼è°ƒåº¦æ¨¡å‹ï¼šä¼˜å…ˆè®©ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä½¿ç”¨ CPUï¼Œå¦‚æœçº¿ç¨‹çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆä¼šéšæœºé€‰æ‹©ä¸€ä¸ªï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹è·å–çš„ CPU æ—¶é—´ç‰‡ç›¸å¯¹å¤šä¸€äº›</li></ul></li><li><p>Javaä½¿ç”¨çš„æ˜¯æŠ¢å å¼è°ƒåº¦æ¨¡å‹</p></li><li><p>éšæœºæ€§</p><p>å‡å¦‚è®¡ç®—æœºåªæœ‰ä¸€ä¸ª CPUï¼Œé‚£ä¹ˆ CPU åœ¨æŸä¸€ä¸ªæ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œçº¿ç¨‹åªæœ‰å¾—åˆ°CPUæ—¶é—´ç‰‡ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æƒï¼Œæ‰å¯ä»¥æ‰§è¡ŒæŒ‡ä»¤ã€‚æ‰€ä»¥è¯´å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œæ˜¯æœ‰éšæœºæ€§ï¼Œå› ä¸ºè°æŠ¢åˆ°CPUçš„ä½¿ç”¨æƒæ˜¯ä¸ä¸€å®šçš„</p><p><img src="https://pic1.imgdb.cn/item/623e9bf427f86abb2aee4d7d.png" alt="05_å¤šçº¿ç¨‹ç¤ºä¾‹å›¾"></p></li></ul></li><li><p>ä¼˜å…ˆçº§ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>final int getPriority()</td><td>è¿”å›æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§</td></tr><tr><td>final void setPriority(int newPriority)</td><td>æ›´æ”¹æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§æ˜¯5ï¼›çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯ï¼š1-10</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCallable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;String&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;---&quot;</span> + i);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;çº¿ç¨‹æ‰§è¡Œå®Œæ¯•äº†&quot;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ä¼˜å…ˆçº§: 1 - 10 é»˜è®¤å€¼:5</span><br>        <span class="hljs-type">MyCallable</span> <span class="hljs-variable">mc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCallable</span>();<br><br>        FutureTask&lt;String&gt; ft = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;&gt;(mc);<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ft);<br>        t1.setName(<span class="hljs-string">&quot;é£æœº&quot;</span>);<br>        t1.setPriority(<span class="hljs-number">10</span>);<br>        <span class="hljs-comment">//System.out.println(t1.getPriority());//5</span><br>        t1.start();<br><br>        <span class="hljs-type">MyCallable</span> <span class="hljs-variable">mc2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCallable</span>();<br><br>        FutureTask&lt;String&gt; ft2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;&gt;(mc2);<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ft2);<br>        t2.setName(<span class="hljs-string">&quot;å¦å…‹&quot;</span>);<br>        t2.setPriority(<span class="hljs-number">1</span>);<br>        <span class="hljs-comment">//System.out.println(t2.getPriority());//5</span><br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-10å®ˆæŠ¤çº¿ç¨‹ã€åº”ç”¨ã€‘"><a href="#1-10å®ˆæŠ¤çº¿ç¨‹ã€åº”ç”¨ã€‘" class="headerlink" title="1.10å®ˆæŠ¤çº¿ç¨‹ã€åº”ç”¨ã€‘"></a>1.10å®ˆæŠ¤çº¿ç¨‹ã€åº”ç”¨ã€‘</h3><ul><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void setDaemon(boolean on)</td><td>å°†æ­¤çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œå½“è¿è¡Œçš„çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå°†é€€å‡º</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º!</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            System.out.println(getName() + <span class="hljs-string">&quot;---&quot;</span> + i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            System.out.println(getName() + <span class="hljs-string">&quot;---&quot;</span> + i);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread1</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread1</span>();<br>        <span class="hljs-type">MyThread2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread2</span>();<br><br>        t1.setName(<span class="hljs-string">&quot;å¥³ç¥&quot;</span>);<br>        t2.setName(<span class="hljs-string">&quot;å¤‡èƒ&quot;</span>);<br><br>        <span class="hljs-comment">//æŠŠç¬¬äºŒä¸ªçº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹</span><br>        <span class="hljs-comment">//å½“æ™®é€šçº¿ç¨‹æ‰§è¡Œå®Œä¹‹å,é‚£ä¹ˆå®ˆæŠ¤çº¿ç¨‹ä¹Ÿæ²¡æœ‰ç»§ç»­è¿è¡Œä¸‹å»çš„å¿…è¦äº†.</span><br>        t2.setDaemon(<span class="hljs-literal">true</span>);<br><br>        t1.start();<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-çº¿ç¨‹åŒæ­¥"><a href="#2-çº¿ç¨‹åŒæ­¥" class="headerlink" title="2.çº¿ç¨‹åŒæ­¥"></a>2.çº¿ç¨‹åŒæ­¥</h2><h3 id="2-1å–ç¥¨ã€åº”ç”¨ã€‘"><a href="#2-1å–ç¥¨ã€åº”ç”¨ã€‘" class="headerlink" title="2.1å–ç¥¨ã€åº”ç”¨ã€‘"></a>2.1å–ç¥¨ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>æŸç”µå½±é™¢ç›®å‰æ­£åœ¨ä¸Šæ˜ å›½äº§å¤§ç‰‡ï¼Œå…±æœ‰100å¼ ç¥¨ï¼Œè€Œå®ƒæœ‰3ä¸ªçª—å£å–ç¥¨ï¼Œè¯·è®¾è®¡ä¸€ä¸ªç¨‹åºæ¨¡æ‹Ÿè¯¥ç”µå½±é™¢å–ç¥¨</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li><p>å®šä¹‰ä¸€ä¸ªç±»SellTicketå®ç°Runnableæ¥å£ï¼Œé‡Œé¢å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼šprivate int tickets &#x3D; 100;</p></li><li><p>åœ¨SellTicketç±»ä¸­é‡å†™run()æ–¹æ³•å®ç°å–ç¥¨ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹</p></li><li><p>åˆ¤æ–­ç¥¨æ•°å¤§äº0ï¼Œå°±å–ç¥¨ï¼Œå¹¶å‘ŠçŸ¥æ˜¯å“ªä¸ªçª—å£å–çš„</p></li><li><p>å–äº†ç¥¨ä¹‹åï¼Œæ€»ç¥¨æ•°è¦å‡1</p></li><li><p>ç¥¨å–æ²¡äº†ï¼Œçº¿ç¨‹åœæ­¢</p></li><li><p>å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç±»SellTicketDemoï¼Œé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹</p></li><li><p>åˆ›å»ºSellTicketç±»çš„å¯¹è±¡</p></li><li><p>åˆ›å»ºä¸‰ä¸ªThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠSellTicketå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„çª—å£åç§°</p></li><li><p>å¯åŠ¨çº¿ç¨‹</p></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SellTicket</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tickets</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-comment">//åœ¨SellTicketç±»ä¸­é‡å†™run()æ–¹æ³•å®ç°å–ç¥¨ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">if</span>(ticket &lt;= <span class="hljs-number">0</span>)&#123;<br>                    <span class="hljs-comment">//å–å®Œäº†</span><br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-keyword">try</span> &#123;<br>                        Thread.sleep(<span class="hljs-number">100</span>);<br>                    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                    ticket--;<br>                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticket + <span class="hljs-string">&quot;å¼ ç¥¨&quot;</span>);<br>                &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SellTicketDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºSellTicketç±»çš„å¯¹è±¡</span><br>        <span class="hljs-type">SellTicket</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SellTicket</span>();<br><br>        <span class="hljs-comment">//åˆ›å»ºä¸‰ä¸ªThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠSellTicketå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„çª—å£åç§°</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(st,<span class="hljs-string">&quot;çª—å£1&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(st,<span class="hljs-string">&quot;çª—å£2&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(st,<span class="hljs-string">&quot;çª—å£3&quot;</span>);<br><br>        <span class="hljs-comment">//å¯åŠ¨çº¿ç¨‹</span><br>        t1.start();<br>        t2.start();<br>        t3.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-2å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜ã€ç†è§£ã€‘"><a href="#2-2å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜ã€ç†è§£ã€‘" class="headerlink" title="2.2å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜ã€ç†è§£ã€‘"></a>2.2å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜ã€ç†è§£ã€‘</h3><ul><li><p>å–ç¥¨å‡ºç°äº†é—®é¢˜</p><ul><li><p>ç›¸åŒçš„ç¥¨å‡ºç°äº†å¤šæ¬¡</p></li><li><p>å‡ºç°äº†è´Ÿæ•°çš„ç¥¨</p></li></ul></li><li><p>é—®é¢˜äº§ç”ŸåŸå› </p><p>çº¿ç¨‹æ‰§è¡Œçš„éšæœºæ€§å¯¼è‡´çš„,å¯èƒ½åœ¨å–ç¥¨è¿‡ç¨‹ä¸­ä¸¢å¤±cpuçš„æ‰§è¡Œæƒ,å¯¼è‡´å‡ºç°é—®é¢˜</p></li></ul><h3 id="2-3åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘"><a href="#2-3åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘" class="headerlink" title="2.3åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘"></a>2.3åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘</h3><ul><li><p>å®‰å…¨é—®é¢˜å‡ºç°çš„æ¡ä»¶</p><ul><li><p>æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒ</p></li><li><p>æœ‰å…±äº«æ•°æ®</p></li><li><p>æœ‰å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®</p></li></ul></li><li><p>å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜å‘¢?</p><ul><li>åŸºæœ¬æ€æƒ³ï¼šè®©ç¨‹åºæ²¡æœ‰å®‰å…¨é—®é¢˜çš„ç¯å¢ƒ</li></ul></li><li><p>æ€ä¹ˆå®ç°å‘¢?</p><ul><li><p>æŠŠå¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç ç»™é”èµ·æ¥ï¼Œè®©ä»»æ„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå³å¯</p></li><li><p>Javaæä¾›äº†åŒæ­¥ä»£ç å—çš„æ–¹å¼æ¥è§£å†³</p></li></ul></li><li><p>åŒæ­¥ä»£ç å—æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">synchronized</span>(ä»»æ„å¯¹è±¡) &#123; <br>å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç  <br>&#125;<br></code></pre></td></tr></table></figure><p>synchronized(ä»»æ„å¯¹è±¡)ï¼šå°±ç›¸å½“äºç»™ä»£ç åŠ é”äº†ï¼Œä»»æ„å¯¹è±¡å°±å¯ä»¥çœ‹æˆæ˜¯ä¸€æŠŠé”</p></li><li><p>åŒæ­¥çš„å¥½å¤„å’Œå¼Šç«¯  </p><ul><li><p>å¥½å¤„ï¼šè§£å†³äº†å¤šçº¿ç¨‹çš„æ•°æ®å®‰å…¨é—®é¢˜</p></li><li><p>å¼Šç«¯ï¼šå½“çº¿ç¨‹å¾ˆå¤šæ—¶ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå»åˆ¤æ–­åŒæ­¥ä¸Šçš„é”ï¼Œè¿™æ˜¯å¾ˆè€—è´¹èµ„æºçš„ï¼Œæ— å½¢ä¸­ä¼šé™ä½ç¨‹åºçš„è¿è¡Œæ•ˆç‡</p></li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SellTicket</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tickets</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">synchronized</span> (obj) &#123; <span class="hljs-comment">// å¯¹å¯èƒ½æœ‰å®‰å…¨é—®é¢˜çš„ä»£ç åŠ é”,å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”</span><br>                <span class="hljs-comment">//t1è¿›æ¥åï¼Œå°±ä¼šæŠŠè¿™æ®µä»£ç ç»™é”èµ·æ¥</span><br>                <span class="hljs-keyword">if</span> (tickets &gt; <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-keyword">try</span> &#123;<br>                        Thread.sleep(<span class="hljs-number">100</span>);<br>                        <span class="hljs-comment">//t1ä¼‘æ¯100æ¯«ç§’</span><br>                    &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                    <span class="hljs-comment">//çª—å£1æ­£åœ¨å‡ºå”®ç¬¬100å¼ ç¥¨</span><br>                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;æ­£åœ¨å‡ºå”®ç¬¬&quot;</span> + tickets + <span class="hljs-string">&quot;å¼ ç¥¨&quot;</span>);<br>                    tickets--; <span class="hljs-comment">//tickets = 99;</span><br>                &#125;<br>            &#125;<br>            <span class="hljs-comment">//t1å‡ºæ¥äº†ï¼Œè¿™æ®µä»£ç çš„é”å°±è¢«é‡Šæ”¾äº†</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SellTicketDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">SellTicket</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SellTicket</span>();<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(st, <span class="hljs-string">&quot;çª—å£1&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(st, <span class="hljs-string">&quot;çª—å£2&quot;</span>);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(st, <span class="hljs-string">&quot;çª—å£3&quot;</span>);<br><br>        t1.start();<br>        t2.start();<br>        t3.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-4åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘"><a href="#2-4åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘" class="headerlink" title="2.4åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘"></a>2.4åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜ã€åº”ç”¨ã€‘</h3><ul><li><p>åŒæ­¥æ–¹æ³•çš„æ ¼å¼</p><p>åŒæ­¥æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°æ–¹æ³•ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ä¿®é¥°ç¬¦ <span class="hljs-keyword">synchronized</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) &#123; <br>æ–¹æ³•ä½“ï¼›<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?</p><pre><code class="hljs">this</code></pre></li><li><p>é™æ€åŒæ­¥æ–¹æ³•</p><p>åŒæ­¥é™æ€æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°é™æ€æ–¹æ³•ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ä¿®é¥°ç¬¦ <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) &#123; <br>æ–¹æ³•ä½“ï¼›<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒæ­¥é™æ€æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?</p><pre><code class="hljs">ç±»å.class</code></pre></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">ticketCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;çª—å£ä¸€&quot;</span>.equals(Thread.currentThread().getName()))&#123;<br>                <span class="hljs-comment">//åŒæ­¥æ–¹æ³•</span><br>                <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> synchronizedMthod();<br>                <span class="hljs-keyword">if</span>(result)&#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;çª—å£äºŒ&quot;</span>.equals(Thread.currentThread().getName()))&#123;<br>                <span class="hljs-comment">//åŒæ­¥ä»£ç å—</span><br>                <span class="hljs-keyword">synchronized</span> (MyRunnable.class)&#123;<br>                    <span class="hljs-keyword">if</span>(ticketCount == <span class="hljs-number">0</span>)&#123;<br>                       <span class="hljs-keyword">break</span>;<br>                    &#125;<span class="hljs-keyword">else</span>&#123;<br>                        <span class="hljs-keyword">try</span> &#123;<br>                            Thread.sleep(<span class="hljs-number">10</span>);<br>                        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                            e.printStackTrace();<br>                        &#125;<br>                        ticketCount--;<br>                        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticketCount + <span class="hljs-string">&quot;å¼ ç¥¨&quot;</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<br><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">synchronizedMthod</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span>(ticketCount == <span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">10</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            ticketCount--;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticketCount + <span class="hljs-string">&quot;å¼ ç¥¨&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyRunnable</span> <span class="hljs-variable">mr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr);<br>  <br>        t1.setName(<span class="hljs-string">&quot;çª—å£ä¸€&quot;</span>);<br>        t2.setName(<span class="hljs-string">&quot;çª—å£äºŒ&quot;</span>);<br>  <br>        t1.start();<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-5Locké”ã€åº”ç”¨ã€‘"><a href="#2-5Locké”ã€åº”ç”¨ã€‘" class="headerlink" title="2.5Locké”ã€åº”ç”¨ã€‘"></a>2.5Locké”ã€åº”ç”¨ã€‘</h3><p>è™½ç„¶æˆ‘ä»¬å¯ä»¥ç†è§£åŒæ­¥ä»£ç å—å’ŒåŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥çœ‹åˆ°åœ¨å“ªé‡ŒåŠ ä¸Šäº†é”ï¼Œåœ¨å“ªé‡Œé‡Šæ”¾äº†é”ï¼Œä¸ºäº†æ›´æ¸…æ™°çš„è¡¨è¾¾å¦‚ä½•åŠ é”å’Œé‡Šæ”¾é”ï¼ŒJDK5ä»¥åæä¾›äº†ä¸€ä¸ªæ–°çš„é”å¯¹è±¡Lock</p><p>Lockæ˜¯æ¥å£ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œè¿™é‡Œé‡‡ç”¨å®ƒçš„å®ç°ç±»ReentrantLockæ¥å®ä¾‹åŒ–</p><ul><li><p>ReentrantLockæ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ReentrantLock()</td><td>åˆ›å»ºä¸€ä¸ªReentrantLockçš„å®ä¾‹</td></tr></tbody></table></li><li><p>åŠ é”è§£é”æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void lock()</td><td>è·å¾—é”</td></tr><tr><td>void unlock()</td><td>é‡Šæ”¾é”</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ticket</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-comment">//ç¥¨çš„æ•°é‡</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">ticket</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-comment">//synchronized (obj)&#123;//å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”.</span><br>            <span class="hljs-keyword">try</span> &#123;<br>                lock.lock();<br>                <span class="hljs-keyword">if</span> (ticket &lt;= <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-comment">//å–å®Œäº†</span><br>                    <span class="hljs-keyword">break</span>;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    Thread.sleep(<span class="hljs-number">100</span>);<br>                    ticket--;<br>                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticket + <span class="hljs-string">&quot;å¼ ç¥¨&quot;</span>);<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125; <span class="hljs-keyword">finally</span> &#123;<br>                lock.unlock();<br>            &#125;<br>            <span class="hljs-comment">// &#125;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Ticket</span> <span class="hljs-variable">ticket</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Ticket</span>();<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ticket);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ticket);<br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(ticket);<br><br>        t1.setName(<span class="hljs-string">&quot;çª—å£ä¸€&quot;</span>);<br>        t2.setName(<span class="hljs-string">&quot;çª—å£äºŒ&quot;</span>);<br>        t3.setName(<span class="hljs-string">&quot;çª—å£ä¸‰&quot;</span>);<br><br>        t1.start();<br>        t2.start();<br>        t3.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-6æ­»é”ã€ç†è§£ã€‘"><a href="#2-6æ­»é”ã€ç†è§£ã€‘" class="headerlink" title="2.6æ­»é”ã€ç†è§£ã€‘"></a>2.6æ­»é”ã€ç†è§£ã€‘</h3><ul><li><p>æ¦‚è¿°</p><p>çº¿ç¨‹æ­»é”æ˜¯æŒ‡ç”±äºä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹äº’ç›¸æŒæœ‰å¯¹æ–¹æ‰€éœ€è¦çš„èµ„æºï¼Œå¯¼è‡´è¿™äº›çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œæ— æ³•å‰å¾€æ‰§è¡Œ</p></li><li><p>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šäº§ç”Ÿæ­»é”</p><ol><li>èµ„æºæœ‰é™</li><li>åŒæ­¥åµŒå¥—</li></ol></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">objA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">objB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;&#123;<br>            <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>                <span class="hljs-keyword">synchronized</span> (objA)&#123;<br>                    <span class="hljs-comment">//çº¿ç¨‹ä¸€</span><br>                    <span class="hljs-keyword">synchronized</span> (objB)&#123;<br>                        System.out.println(<span class="hljs-string">&quot;å°åº·åŒå­¦æ­£åœ¨èµ°è·¯&quot;</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;).start();<br><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;&#123;<br>            <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>                <span class="hljs-keyword">synchronized</span> (objB)&#123;<br>                    <span class="hljs-comment">//çº¿ç¨‹äºŒ</span><br>                    <span class="hljs-keyword">synchronized</span> (objA)&#123;<br>                        System.out.println(<span class="hljs-string">&quot;å°è–‡åŒå­¦æ­£åœ¨èµ°è·¯&quot;</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;).start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-ç”Ÿäº§è€…æ¶ˆè´¹è€…"><a href="#3-ç”Ÿäº§è€…æ¶ˆè´¹è€…" class="headerlink" title="3.ç”Ÿäº§è€…æ¶ˆè´¹è€…"></a>3.ç”Ÿäº§è€…æ¶ˆè´¹è€…</h2><h3 id="3-1ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°ã€åº”ç”¨ã€‘"><a href="#3-1ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°ã€åº”ç”¨ã€‘" class="headerlink" title="3.1ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°ã€åº”ç”¨ã€‘"></a>3.1ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¦‚è¿°</p><p>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼æ˜¯ä¸€ä¸ªååˆ†ç»å…¸çš„å¤šçº¿ç¨‹åä½œçš„æ¨¡å¼ï¼Œå¼„æ‡‚ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜èƒ½å¤Ÿè®©æˆ‘ä»¬å¯¹å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç†è§£æ›´åŠ æ·±åˆ»ã€‚</p><p>æ‰€è°“ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œå®é™…ä¸Šä¸»è¦æ˜¯åŒ…å«äº†ä¸¤ç±»çº¿ç¨‹ï¼š</p><pre><code class="hljs">ä¸€ç±»æ˜¯ç”Ÿäº§è€…çº¿ç¨‹ç”¨äºç”Ÿäº§æ•°æ®  ä¸€ç±»æ˜¯æ¶ˆè´¹è€…çº¿ç¨‹ç”¨äºæ¶ˆè´¹æ•°æ®</code></pre><p>ä¸ºäº†è§£è€¦ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å…³ç³»ï¼Œé€šå¸¸ä¼šé‡‡ç”¨å…±äº«çš„æ•°æ®åŒºåŸŸï¼Œå°±åƒæ˜¯ä¸€ä¸ªä»“åº“</p><p>ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ä¹‹åç›´æ¥æ”¾ç½®åœ¨å…±äº«æ•°æ®åŒºä¸­ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒæ¶ˆè´¹è€…çš„è¡Œä¸º</p><p>æ¶ˆè´¹è€…åªéœ€è¦ä»å…±äº«æ•°æ®åŒºä¸­å»è·å–æ•°æ®ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒç”Ÿäº§è€…çš„è¡Œä¸º</p></li><li><p>Objectç±»çš„ç­‰å¾…å’Œå”¤é†’æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void wait()</td><td>å¯¼è‡´å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥å¯¹è±¡çš„ notify()æ–¹æ³•æˆ– notifyAll()æ–¹æ³•</td></tr><tr><td>void notify()</td><td>å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„å•ä¸ªçº¿ç¨‹</td></tr><tr><td>void notifyAll()</td><td>å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„æ‰€æœ‰çº¿ç¨‹</td></tr></tbody></table></li></ul><h3 id="3-2ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ã€åº”ç”¨ã€‘"><a href="#3-2ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ã€åº”ç”¨ã€‘" class="headerlink" title="3.2ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ã€åº”ç”¨ã€‘"></a>3.2ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li><p>æ¡Œå­ç±»(Desk)ï¼šå®šä¹‰è¡¨ç¤ºåŒ…å­æ•°é‡çš„å˜é‡,å®šä¹‰é”å¯¹è±¡å˜é‡,å®šä¹‰æ ‡è®°æ¡Œå­ä¸Šæœ‰æ— åŒ…å­çš„å˜é‡</p></li><li><p>ç”Ÿäº§è€…ç±»(Cooker)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>  1.åˆ¤æ–­æ˜¯å¦æœ‰åŒ…å­,å†³å®šå½“å‰çº¿ç¨‹æ˜¯å¦æ‰§è¡Œ</p><p>  2.å¦‚æœæœ‰åŒ…å­,å°±è¿›å…¥ç­‰å¾…çŠ¶æ€,å¦‚æœæ²¡æœ‰åŒ…å­,ç»§ç»­æ‰§è¡Œ,ç”Ÿäº§åŒ…å­</p><p>  3.ç”Ÿäº§åŒ…å­ä¹‹å,æ›´æ–°æ¡Œå­ä¸ŠåŒ…å­çŠ¶æ€,å”¤é†’æ¶ˆè´¹è€…æ¶ˆè´¹åŒ…å­</p></li><li><p>æ¶ˆè´¹è€…ç±»(Foodie)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>  1.åˆ¤æ–­æ˜¯å¦æœ‰åŒ…å­,å†³å®šå½“å‰çº¿ç¨‹æ˜¯å¦æ‰§è¡Œ</p><p>  2.å¦‚æœæ²¡æœ‰åŒ…å­,å°±è¿›å…¥ç­‰å¾…çŠ¶æ€,å¦‚æœæœ‰åŒ…å­,å°±æ¶ˆè´¹åŒ…å­</p><p>  3.æ¶ˆè´¹åŒ…å­å,æ›´æ–°æ¡Œå­ä¸ŠåŒ…å­çŠ¶æ€,å”¤é†’ç”Ÿäº§è€…ç”Ÿäº§åŒ…å­</p></li><li><p>æµ‹è¯•ç±»(Demo)ï¼šé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œmainæ–¹æ³•ä¸­çš„ä»£ç æ­¥éª¤å¦‚ä¸‹</p><p>  åˆ›å»ºç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡</p><p>  åˆ†åˆ«å¼€å¯ä¸¤ä¸ªçº¿ç¨‹</p></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Desk</span> &#123;<br><br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ ‡è®°</span><br>    <span class="hljs-comment">//true å°±è¡¨ç¤ºæ¡Œå­ä¸Šæœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸åƒè´§æ‰§è¡Œ</span><br>    <span class="hljs-comment">//false å°±è¡¨ç¤ºæ¡Œå­ä¸Šæ²¡æœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸å¨å¸ˆæ‰§è¡Œ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-comment">//æ±‰å ¡åŒ…çš„æ€»æ•°é‡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><br>    <span class="hljs-comment">//é”å¯¹è±¡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cooker</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br><span class="hljs-comment">//    ç”Ÿäº§è€…æ­¥éª¤ï¼š</span><br><span class="hljs-comment">//            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span><br><span class="hljs-comment">//    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span><br><span class="hljs-comment">//            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span><br><span class="hljs-comment">//            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-keyword">synchronized</span> (Desk.lock)&#123;<br>                <span class="hljs-keyword">if</span>(Desk.count == <span class="hljs-number">0</span>)&#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-keyword">if</span>(!Desk.flag)&#123;<br>                        <span class="hljs-comment">//ç”Ÿäº§</span><br>                        System.out.println(<span class="hljs-string">&quot;å¨å¸ˆæ­£åœ¨ç”Ÿäº§æ±‰å ¡åŒ…&quot;</span>);<br>                        Desk.flag = <span class="hljs-literal">true</span>;<br>                        Desk.lock.notifyAll();<br>                    &#125;<span class="hljs-keyword">else</span>&#123;<br>                        <span class="hljs-keyword">try</span> &#123;<br>                            Desk.lock.wait();<br>                        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                            e.printStackTrace();<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foodie</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">//        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span><br><span class="hljs-comment">//        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span><br><span class="hljs-comment">//        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span><br><span class="hljs-comment">//        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span><br><span class="hljs-comment">//                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span><br><span class="hljs-comment">//        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€</span><br><br>        <span class="hljs-comment">//å¥—è·¯:</span><br>            <span class="hljs-comment">//1. while(true)æ­»å¾ªç¯</span><br>            <span class="hljs-comment">//2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€</span><br>            <span class="hljs-comment">//3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ</span><br>            <span class="hljs-comment">//4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ</span><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-keyword">synchronized</span> (Desk.lock)&#123;<br>                <span class="hljs-keyword">if</span>(Desk.count == <span class="hljs-number">0</span>)&#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-keyword">if</span>(Desk.flag)&#123;<br>                        <span class="hljs-comment">//æœ‰</span><br>                        System.out.println(<span class="hljs-string">&quot;åƒè´§åœ¨åƒæ±‰å ¡åŒ…&quot;</span>);<br>                        Desk.flag = <span class="hljs-literal">false</span>;<br>                        Desk.lock.notifyAll();<br>                        Desk.count--;<br>                    &#125;<span class="hljs-keyword">else</span>&#123;<br>                        <span class="hljs-comment">//æ²¡æœ‰å°±ç­‰å¾…</span><br>                        <span class="hljs-comment">//ä½¿ç”¨ä»€ä¹ˆå¯¹è±¡å½“åšé”,é‚£ä¹ˆå°±å¿…é¡»ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•.</span><br>                        <span class="hljs-keyword">try</span> &#123;<br>                            Desk.lock.wait();<br>                        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                            e.printStackTrace();<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*æ¶ˆè´¹è€…æ­¥éª¤ï¼š</span><br><span class="hljs-comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span><br><span class="hljs-comment">        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span><br><span class="hljs-comment">        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span><br><span class="hljs-comment">        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span><br><span class="hljs-comment">                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span><br><span class="hljs-comment">        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€*/</span><br><br>        <span class="hljs-comment">/*ç”Ÿäº§è€…æ­¥éª¤ï¼š</span><br><span class="hljs-comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span><br><span class="hljs-comment">        å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span><br><span class="hljs-comment">        2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span><br><span class="hljs-comment">        3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚*/</span><br><br>        <span class="hljs-type">Foodie</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foodie</span>();<br>        <span class="hljs-type">Cooker</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cooker</span>();<br><br>        f.start();<br>        c.start();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-3ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–ã€åº”ç”¨ã€‘"><a href="#3-3ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–ã€åº”ç”¨ã€‘" class="headerlink" title="3.3ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–ã€åº”ç”¨ã€‘"></a>3.3ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–ã€åº”ç”¨ã€‘</h3><ul><li><p>éœ€æ±‚</p><ul><li>å°†Deskç±»ä¸­çš„å˜é‡,é‡‡ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼å°è£…èµ·æ¥</li><li>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç±»ä¸­æ„é€ æ–¹æ³•æ¥æ”¶Deskç±»å¯¹è±¡,ä¹‹ååœ¨runæ–¹æ³•ä¸­è¿›è¡Œä½¿ç”¨</li><li>åˆ›å»ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡,æ„é€ æ–¹æ³•ä¸­ä¼ å…¥Deskç±»å¯¹è±¡</li><li>å¼€å¯ä¸¤ä¸ªçº¿ç¨‹</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Desk</span> &#123;<br><br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ ‡è®°</span><br>    <span class="hljs-comment">//true å°±è¡¨ç¤ºæ¡Œå­ä¸Šæœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸åƒè´§æ‰§è¡Œ</span><br>    <span class="hljs-comment">//false å°±è¡¨ç¤ºæ¡Œå­ä¸Šæ²¡æœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸å¨å¸ˆæ‰§è¡Œ</span><br>    <span class="hljs-comment">//public static boolean flag = false;</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> flag;<br><br>    <span class="hljs-comment">//æ±‰å ¡åŒ…çš„æ€»æ•°é‡</span><br>    <span class="hljs-comment">//public static int count = 10;</span><br>    <span class="hljs-comment">//ä»¥åæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ç§å¿…é¡»æœ‰é»˜è®¤å€¼çš„å˜é‡</span><br>   <span class="hljs-comment">// private int count = 10;</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> count;<br><br>    <span class="hljs-comment">//é”å¯¹è±¡</span><br>    <span class="hljs-comment">//public static final Object lock = new Object();</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Desk</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">this</span>(<span class="hljs-literal">false</span>,<span class="hljs-number">10</span>); <span class="hljs-comment">// åœ¨ç©ºå‚å†…éƒ¨è°ƒç”¨å¸¦å‚,å¯¹æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼,ä¹‹åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨æˆå‘˜å˜é‡äº†</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Desk</span><span class="hljs-params">(<span class="hljs-type">boolean</span> flag, <span class="hljs-type">int</span> count)</span> &#123;<br>        <span class="hljs-built_in">this</span>.flag = flag;<br>        <span class="hljs-built_in">this</span>.count = count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFlag</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> flag;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFlag</span><span class="hljs-params">(<span class="hljs-type">boolean</span> flag)</span> &#123;<br>        <span class="hljs-built_in">this</span>.flag = flag;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getCount</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCount</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span> &#123;<br>        <span class="hljs-built_in">this</span>.count = count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getLock</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> lock;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Desk&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;flag=&quot;</span> + flag +<br>                <span class="hljs-string">&quot;, count=&quot;</span> + count +<br>                <span class="hljs-string">&quot;, lock=&quot;</span> + lock +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cooker</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br><br>    <span class="hljs-keyword">private</span> Desk desk;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Cooker</span><span class="hljs-params">(Desk desk)</span> &#123;<br>        <span class="hljs-built_in">this</span>.desk = desk;<br>    &#125;<br><span class="hljs-comment">//    ç”Ÿäº§è€…æ­¥éª¤ï¼š</span><br><span class="hljs-comment">//            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span><br><span class="hljs-comment">//    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span><br><span class="hljs-comment">//            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span><br><span class="hljs-comment">//            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-keyword">synchronized</span> (desk.getLock())&#123;<br>                <span class="hljs-keyword">if</span>(desk.getCount() == <span class="hljs-number">0</span>)&#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-comment">//System.out.println(&quot;éªŒè¯ä¸€ä¸‹æ˜¯å¦æ‰§è¡Œäº†&quot;);</span><br>                    <span class="hljs-keyword">if</span>(!desk.isFlag())&#123;<br>                        <span class="hljs-comment">//ç”Ÿäº§</span><br>                        System.out.println(<span class="hljs-string">&quot;å¨å¸ˆæ­£åœ¨ç”Ÿäº§æ±‰å ¡åŒ…&quot;</span>);<br>                        desk.setFlag(<span class="hljs-literal">true</span>);<br>                        desk.getLock().notifyAll();<br>                    &#125;<span class="hljs-keyword">else</span>&#123;<br>                        <span class="hljs-keyword">try</span> &#123;<br>                            desk.getLock().wait();<br>                        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                            e.printStackTrace();<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foodie</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">private</span> Desk desk;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Foodie</span><span class="hljs-params">(Desk desk)</span> &#123;<br>        <span class="hljs-built_in">this</span>.desk = desk;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">//        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span><br><span class="hljs-comment">//        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span><br><span class="hljs-comment">//        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span><br><span class="hljs-comment">//        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span><br><span class="hljs-comment">//                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span><br><span class="hljs-comment">//        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€</span><br><br>        <span class="hljs-comment">//å¥—è·¯:</span><br>            <span class="hljs-comment">//1. while(true)æ­»å¾ªç¯</span><br>            <span class="hljs-comment">//2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€</span><br>            <span class="hljs-comment">//3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ</span><br>            <span class="hljs-comment">//4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ</span><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-keyword">synchronized</span> (desk.getLock())&#123;<br>                <span class="hljs-keyword">if</span>(desk.getCount() == <span class="hljs-number">0</span>)&#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-comment">//System.out.println(&quot;éªŒè¯ä¸€ä¸‹æ˜¯å¦æ‰§è¡Œäº†&quot;);</span><br>                    <span class="hljs-keyword">if</span>(desk.isFlag())&#123;<br>                        <span class="hljs-comment">//æœ‰</span><br>                        System.out.println(<span class="hljs-string">&quot;åƒè´§åœ¨åƒæ±‰å ¡åŒ…&quot;</span>);<br>                        desk.setFlag(<span class="hljs-literal">false</span>);<br>                        desk.getLock().notifyAll();<br>                        desk.setCount(desk.getCount() - <span class="hljs-number">1</span>);<br>                    &#125;<span class="hljs-keyword">else</span>&#123;<br>                        <span class="hljs-comment">//æ²¡æœ‰å°±ç­‰å¾…</span><br>                        <span class="hljs-comment">//ä½¿ç”¨ä»€ä¹ˆå¯¹è±¡å½“åšé”,é‚£ä¹ˆå°±å¿…é¡»ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•.</span><br>                        <span class="hljs-keyword">try</span> &#123;<br>                            desk.getLock().wait();<br>                        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                            e.printStackTrace();<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/*æ¶ˆè´¹è€…æ­¥éª¤ï¼š</span><br><span class="hljs-comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span><br><span class="hljs-comment">        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span><br><span class="hljs-comment">        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span><br><span class="hljs-comment">        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span><br><span class="hljs-comment">                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span><br><span class="hljs-comment">        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€*/</span><br><br>        <span class="hljs-comment">/*ç”Ÿäº§è€…æ­¥éª¤ï¼š</span><br><span class="hljs-comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span><br><span class="hljs-comment">        å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span><br><span class="hljs-comment">        2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span><br><span class="hljs-comment">        3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚*/</span><br><br>        <span class="hljs-type">Desk</span> <span class="hljs-variable">desk</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Desk</span>();<br><br>        <span class="hljs-type">Foodie</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foodie</span>(desk);<br>        <span class="hljs-type">Cooker</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cooker</span>(desk);<br><br>        f.start();<br>        c.start();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-4é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨ã€ç†è§£ã€‘"><a href="#3-4é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨ã€ç†è§£ã€‘" class="headerlink" title="3.4é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨ã€ç†è§£ã€‘"></a>3.4é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨ã€ç†è§£ã€‘</h3><ul><li><p>é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„</p><p><img src="https://pic1.imgdb.cn/item/623e9bf427f86abb2aee4eb0.png" alt="06_é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„"></p></li><li><p>å¸¸è§BlockingQueue:</p><p> ArrayBlockingQueue: <font color='red'>åº•å±‚æ˜¯æ•°ç»„,</font>æœ‰ç•Œ</p><p> LinkedBlockingQueue: <font color='red'>åº•å±‚æ˜¯é“¾è¡¨</font>,æ— ç•Œ.ä½†ä¸æ˜¯çœŸæ­£çš„æ— ç•Œ,æœ€å¤§ä¸ºintçš„æœ€å¤§å€¼</p></li><li><p>BlockingQueueçš„æ ¸å¿ƒæ–¹æ³•:</p><p> put(anObject): å°†å‚æ•°æ”¾å…¥é˜Ÿåˆ—,å¦‚æœæ”¾ä¸è¿›å»ä¼šé˜»å¡</p><p> take(): å–å‡ºç¬¬ä¸€ä¸ªæ•°æ®,å–ä¸åˆ°ä¼šé˜»å¡</p></li><li><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">// åˆ›å»ºé˜»å¡é˜Ÿåˆ—çš„å¯¹è±¡,å®¹é‡ä¸º 1</span><br>        ArrayBlockingQueue&lt;String&gt; arrayBlockingQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1</span>);<br><br>        <span class="hljs-comment">// å­˜å‚¨å…ƒç´ </span><br>        arrayBlockingQueue.put(<span class="hljs-string">&quot;æ±‰å ¡åŒ…&quot;</span>);<br><br>        <span class="hljs-comment">// å–å…ƒç´ </span><br>        System.out.println(arrayBlockingQueue.take());<br>        System.out.println(arrayBlockingQueue.take()); <span class="hljs-comment">// å–ä¸åˆ°ä¼šé˜»å¡</span><br><br>        System.out.println(<span class="hljs-string">&quot;ç¨‹åºç»“æŸäº†&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-5é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶ã€ç†è§£ã€‘"><a href="#3-5é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶ã€ç†è§£ã€‘" class="headerlink" title="3.5é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶ã€ç†è§£ã€‘"></a>3.5é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶ã€ç†è§£ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li><p>ç”Ÿäº§è€…ç±»(Cooker)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>  1.æ„é€ æ–¹æ³•ä¸­æ¥æ”¶ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>  2.åœ¨runæ–¹æ³•ä¸­å¾ªç¯å‘é˜»å¡é˜Ÿåˆ—ä¸­æ·»åŠ åŒ…å­</p><p>  3.æ‰“å°æ·»åŠ ç»“æœ</p></li><li><p>æ¶ˆè´¹è€…ç±»(Foodie)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>   1.æ„é€ æ–¹æ³•ä¸­æ¥æ”¶ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>   2.åœ¨runæ–¹æ³•ä¸­å¾ªç¯è·å–é˜»å¡é˜Ÿåˆ—ä¸­çš„åŒ…å­</p><p>   3.æ‰“å°è·å–ç»“æœ</p></li><li><p>æµ‹è¯•ç±»(Demo)ï¼šé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œmainæ–¹æ³•ä¸­çš„ä»£ç æ­¥éª¤å¦‚ä¸‹</p><p>  åˆ›å»ºé˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>  åˆ›å»ºç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡,æ„é€ æ–¹æ³•ä¸­ä¼ å…¥é˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>  åˆ†åˆ«å¼€å¯ä¸¤ä¸ªçº¿ç¨‹</p></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cooker</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br><br>    <span class="hljs-keyword">private</span> ArrayBlockingQueue&lt;String&gt; bd;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Cooker</span><span class="hljs-params">(ArrayBlockingQueue&lt;String&gt; bd)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bd = bd;<br>    &#125;<br><span class="hljs-comment">//    ç”Ÿäº§è€…æ­¥éª¤ï¼š</span><br><span class="hljs-comment">//            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span><br><span class="hljs-comment">//    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span><br><span class="hljs-comment">//            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span><br><span class="hljs-comment">//            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                bd.put(<span class="hljs-string">&quot;æ±‰å ¡åŒ…&quot;</span>);<br>                System.out.println(<span class="hljs-string">&quot;å¨å¸ˆæ”¾å…¥ä¸€ä¸ªæ±‰å ¡åŒ…&quot;</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Foodie</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">private</span> ArrayBlockingQueue&lt;String&gt; bd;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Foodie</span><span class="hljs-params">(ArrayBlockingQueue&lt;String&gt; bd)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bd = bd;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">//        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span><br><span class="hljs-comment">//        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span><br><span class="hljs-comment">//        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span><br><span class="hljs-comment">//        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span><br><span class="hljs-comment">//                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span><br><span class="hljs-comment">//        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€</span><br><br>        <span class="hljs-comment">//å¥—è·¯:</span><br>        <span class="hljs-comment">//1. while(true)æ­»å¾ªç¯</span><br>        <span class="hljs-comment">//2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€</span><br>        <span class="hljs-comment">//3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ</span><br>        <span class="hljs-comment">//4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ</span><br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">take</span> <span class="hljs-operator">=</span> bd.take();<br>                System.out.println(<span class="hljs-string">&quot;åƒè´§å°†&quot;</span> + take + <span class="hljs-string">&quot;æ‹¿å‡ºæ¥åƒäº†&quot;</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        ArrayBlockingQueue&lt;String&gt; bd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1</span>);<br><br>        <span class="hljs-type">Foodie</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Foodie</span>(bd);<br>        <span class="hljs-type">Cooker</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cooker</span>(bd);<br><br>        f.start();<br>        c.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>å¤šçº¿ç¨‹ğŸ¤·â€â™‚ï¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤šçº¿ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤šçº¿ç¨‹02</title>
    <link href="/Hexo/2021/03/30/%E5%A4%9A%E7%BA%BF%E7%A8%8B02/"/>
    <url>/Hexo/2021/03/30/%E5%A4%9A%E7%BA%BF%E7%A8%8B02/</url>
    
    <content type="html"><![CDATA[<h2 id="1-çº¿ç¨‹æ± "><a href="#1-çº¿ç¨‹æ± " class="headerlink" title="1.çº¿ç¨‹æ± "></a>1.çº¿ç¨‹æ± </h2><h3 id="1-1-çº¿ç¨‹çŠ¶æ€ä»‹ç»"><a href="#1-1-çº¿ç¨‹çŠ¶æ€ä»‹ç»" class="headerlink" title="1.1 çº¿ç¨‹çŠ¶æ€ä»‹ç»"></a>1.1 çº¿ç¨‹çŠ¶æ€ä»‹ç»</h3><p>å½“çº¿ç¨‹è¢«åˆ›å»ºå¹¶å¯åŠ¨ä»¥åï¼Œå®ƒæ—¢ä¸æ˜¯ä¸€å¯åŠ¨å°±è¿›å…¥äº†æ‰§è¡ŒçŠ¶æ€ï¼Œä¹Ÿä¸æ˜¯ä¸€ç›´å¤„äºæ‰§è¡ŒçŠ¶æ€ã€‚çº¿ç¨‹å¯¹è±¡åœ¨ä¸åŒçš„æ—¶æœŸæœ‰ä¸åŒçš„çŠ¶æ€ã€‚é‚£ä¹ˆJavaä¸­çš„çº¿ç¨‹å­˜åœ¨å“ªå‡ ç§çŠ¶æ€å‘¢ï¼ŸJavaä¸­çš„çº¿ç¨‹</p><p>çŠ¶æ€è¢«å®šä¹‰åœ¨äº†java.lang.Thread.Stateæšä¸¾ç±»ä¸­ï¼Œ<font color='red'>Stateæšä¸¾ç±»</font>çš„æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">State</span> &#123;<br>    <br>        <span class="hljs-comment">/* æ–°å»º */</span><br>        NEW , <br><br>        <span class="hljs-comment">/* å¯è¿è¡ŒçŠ¶æ€ */</span><br>        RUNNABLE , <br><br>        <span class="hljs-comment">/* é˜»å¡çŠ¶æ€ */</span><br>        BLOCKED , <br><br>        <span class="hljs-comment">/* æ— é™ç­‰å¾…çŠ¶æ€ */</span><br>        WAITING , <br><br>        <span class="hljs-comment">/* è®¡æ—¶ç­‰å¾… */</span><br>        TIMED_WAITING , <br><br>        <span class="hljs-comment">/* ç»ˆæ­¢ */</span><br>        TERMINATED;<br>    <br>&#125;<br>    <br>    <span class="hljs-comment">// è·å–å½“å‰çº¿ç¨‹çš„çŠ¶æ€</span><br>    <span class="hljs-keyword">public</span> State <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> jdk.internal.misc.VM.toThreadState(threadStatus);<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Javaä¸­çš„çº¿ç¨‹å­˜åœ¨6ç§çŠ¶æ€ï¼Œæ¯ç§çº¿ç¨‹çŠ¶æ€çš„å«ä¹‰å¦‚ä¸‹</p><table><thead><tr><th>çº¿ç¨‹çŠ¶æ€</th><th>å…·ä½“å«ä¹‰</th></tr></thead><tbody><tr><td>NEW</td><td>ä¸€ä¸ªå°šæœªå¯åŠ¨çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºåˆå§‹çŠ¶æ€ã€å¼€å§‹çŠ¶æ€ã€‚çº¿ç¨‹åˆšè¢«åˆ›å»ºï¼Œä½†æ˜¯å¹¶æœªå¯åŠ¨ã€‚è¿˜æ²¡è°ƒç”¨startæ–¹æ³•ã€‚MyThread t &#x3D; new MyThread()åªæœ‰çº¿ç¨‹è±¡ï¼Œæ²¡æœ‰çº¿ç¨‹ç‰¹å¾ã€‚</td></tr><tr><td>RUNNABLE</td><td>å½“æˆ‘ä»¬è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„startæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹å¯¹è±¡è¿›å…¥äº†RUNNABLEçŠ¶æ€ã€‚é‚£ä¹ˆæ­¤æ—¶æ‰æ˜¯çœŸæ­£çš„åœ¨JVMè¿›ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸€ç»å¯åŠ¨å¹¶ä¸æ˜¯ç«‹å³å¾—åˆ°æ‰§è¡Œï¼Œçº¿ç¨‹çš„è¿è¡Œä¸å¦è¦å¬ä»¤ä¸CPUçš„è°ƒåº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠè¿™ä¸ªä¸­é—´çŠ¶æ€ç§°ä¹‹ä¸ºå¯æ‰§è¡ŒçŠ¶æ€(RUNNABLE)ä¹Ÿå°±æ˜¯è¯´å®ƒå…·å¤‡æ‰§è¡Œçš„èµ„æ ¼ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰çœŸæ­£çš„æ‰§è¡Œèµ·æ¥è€Œæ˜¯åœ¨ç­‰å¾…CPUçš„åº¦ã€‚</td></tr><tr><td>BLOCKED</td><td>å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾<font color='red'>è·å–ä¸€ä¸ªå¯¹è±¡é”</font>ï¼Œè€Œè¯¥å¯¹è±¡é”<font color='red'>è¢«å…¶ä»–çš„çº¿ç¨‹æŒæœ‰</font>ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥BlockedçŠ¶æ€ï¼›å½“è¯¥çº¿ç¨‹æŒæœ‰é”æ—¶ï¼Œè¯¥çº¿ç¨‹å°†å˜æˆRunnableçŠ¶æ€ã€‚</td></tr><tr><td>WAITING</td><td>ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸º<font color='red'>ç­‰å¾…çŠ¶æ€</font>ã€‚é€ æˆçº¿ç¨‹ç­‰å¾…çš„åŸå› æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯è°ƒç”¨Object.wait()ã€join()æ–¹æ³•ã€‚å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œæ­£åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼šå› ä¸ºwait()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨notify()æˆ–notifyAll()ï¼›ä¸€ä¸ªå› ä¸ºjoin()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸã€‚</td></tr><tr><td>TIMED_WAITING</td><td>ä¸€ä¸ªåœ¨é™å®šæ—¶é—´å†…ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºé™æ—¶ç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹é™æ—¶ç­‰å¾…çŠ¶æ€çš„åŸå› æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šThread.sleep(long)ï¼ŒObject.wait(long)ã€join(long)ã€‚</td></tr><tr><td>TERMINATED</td><td>ä¸€ä¸ªå®Œå…¨è¿è¡Œå®Œæˆçš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç»ˆæ­¢çŠ¶æ€ã€ç»“æŸçŠ¶æ€</td></tr></tbody></table><p>å„ä¸ªçŠ¶æ€çš„è½¬æ¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://pic1.imgdb.cn/item/623e9bf627f86abb2aee6228.png" alt="1591163781941"></p><h3 id="1-2-çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 1"><a href="#1-2-çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 1" class="headerlink" title="1.2 çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 1"></a>1.2 çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 1</h3><p><strong>ç›®çš„ :</strong> æœ¬æ¡ˆä¾‹ä¸»è¦æ¼”ç¤ºTIME_WAITINGçš„çŠ¶æ€è½¬æ¢ã€‚</p><p><strong>éœ€æ±‚ï¼š</strong>ç¼–å†™ä¸€æ®µä»£ç ï¼Œä¾æ¬¡æ˜¾ç¤ºä¸€ä¸ªçº¿ç¨‹çš„è¿™äº›çŠ¶æ€ï¼šNEW -&gt; RUNNABLE -&gt; TIME_WAITING -&gt; RUNNABLE -&gt; TERMINATED</p><p>ä¸ºäº†ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘ï¼Œæœ¬æ¬¡æˆ‘ä»¬ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ç»“åˆlambdaè¡¨è¾¾å¼çš„æ–¹å¼ä½¿ç”¨å¤šçº¿ç¨‹ã€‚</p><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadStateDemo01</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br><br>        <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå†…éƒ¨çº¿ç¨‹</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            System.out.println(<span class="hljs-string">&quot;2.æ‰§è¡Œthread.start()ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + Thread.currentThread().getState());<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//ä¼‘çœ 100æ¯«ç§’</span><br>                Thread.sleep(<span class="hljs-number">100</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;4.æ‰§è¡ŒThread.sleep(long)å®Œæˆä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + Thread.currentThread().getState());<br>        &#125;);<br><br>        <span class="hljs-comment">//è·å–start()ä¹‹å‰çš„çŠ¶æ€</span><br>        System.out.println(<span class="hljs-string">&quot;1.é€šè¿‡newåˆå§‹åŒ–ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰start()ä¹‹å‰ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + thread.getState());<br><br>        <span class="hljs-comment">//å¯åŠ¨çº¿ç¨‹</span><br>        thread.start();<br><br>        <span class="hljs-comment">//ä¼‘çœ 50æ¯«ç§’</span><br>        Thread.sleep(<span class="hljs-number">50</span>);<br><br>        <span class="hljs-comment">//å› ä¸ºthread1éœ€è¦ä¼‘çœ 100æ¯«ç§’ï¼Œæ‰€ä»¥åœ¨ç¬¬50æ¯«ç§’ï¼Œthreadå¤„äºsleepçŠ¶æ€</span><br>        System.out.println(<span class="hljs-string">&quot;3.æ‰§è¡ŒThread.sleep(long)æ—¶ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + thread.getState());<br><br>        <span class="hljs-comment">//thread1å’Œmainçº¿ç¨‹ä¸»åŠ¨ä¼‘çœ 150æ¯«ç§’ï¼Œæ‰€ä»¥åœ¨ç¬¬150æ¯«ç§’,threadæ—©å·²æ‰§è¡Œå®Œæ¯•</span><br>        Thread.sleep(<span class="hljs-number">100</span>);<br><br>        System.out.println(<span class="hljs-string">&quot;5.çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + thread.getState() + <span class="hljs-string">&quot;\n&quot;</span>);<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span>é€šè¿‡<span class="hljs-keyword">new</span>åˆå§‹åŒ–ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰start()ä¹‹å‰ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šNEW<br><span class="hljs-number">2.</span>æ‰§è¡Œthread.start()ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šRUNNABLE<br><span class="hljs-number">3.</span>æ‰§è¡ŒThread.sleep(<span class="hljs-type">long</span>)æ—¶ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šTIMED_WAITING<br><span class="hljs-number">4.</span>æ‰§è¡ŒThread.sleep(<span class="hljs-type">long</span>)å®Œæˆä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šRUNNABLE<br><span class="hljs-number">5.</span>çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šTERMINATED<br></code></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="1-3-çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 2"><a href="#1-3-çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 2" class="headerlink" title="1.3 çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 2"></a>1.3 çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 2</h3><p><strong>ç›®çš„ :</strong> æœ¬æ¡ˆä¾‹ä¸»è¦æ¼”ç¤ºWAITINGçš„çŠ¶æ€è½¬æ¢ã€‚</p><p><strong>éœ€æ±‚ ï¼š</strong>ç¼–å†™ä¸€æ®µä»£ç ï¼Œä¾æ¬¡æ˜¾ç¤ºä¸€ä¸ªçº¿ç¨‹çš„è¿™äº›çŠ¶æ€ï¼šNEW -&gt; RUNNABLE -&gt; WAITING -&gt; RUNNABLE -&gt; TERMINATED</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadStateDemo02</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br><br>        <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥åŠ é”å’Œè§£é”</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>        <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå†…éƒ¨çº¿ç¨‹</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            System.out.println(<span class="hljs-string">&quot;2.æ‰§è¡Œthread.start()ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + Thread.currentThread().getState());<br>            <span class="hljs-keyword">synchronized</span> (obj) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br><br>                    <span class="hljs-comment">//thread1éœ€è¦ä¼‘çœ 100æ¯«ç§’</span><br>                    Thread.sleep(<span class="hljs-number">100</span>);<br><br>                    <span class="hljs-comment">//thread1100æ¯«ç§’ä¹‹åï¼Œé€šè¿‡wait()æ–¹æ³•é‡Šæ”¾objå¯¹è±¡æ˜¯é”</span><br>                    obj.wait();<br>                    <br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;4.è¢«object.notify()æ–¹æ³•å”¤é†’ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + Thread.currentThread().getState());<br>        &#125;);<br><br>        <span class="hljs-comment">//è·å–start()ä¹‹å‰çš„çŠ¶æ€</span><br>        System.out.println(<span class="hljs-string">&quot;1.é€šè¿‡newåˆå§‹åŒ–ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰start()ä¹‹å‰ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + thread1.getState());<br><br>        <span class="hljs-comment">//å¯åŠ¨çº¿ç¨‹</span><br>        thread1.start();<br><br>        <span class="hljs-comment">//mainçº¿ç¨‹ä¼‘çœ 150æ¯«ç§’</span><br>        Thread.sleep(<span class="hljs-number">150</span>);<br><br>        <span class="hljs-comment">//å› ä¸ºthread1åœ¨ç¬¬100æ¯«ç§’è¿›å…¥waitç­‰å¾…çŠ¶æ€ï¼Œæ‰€ä»¥ç¬¬150ç§’è‚¯å®šå¯ä»¥è·å–å…¶çŠ¶æ€</span><br>        System.out.println(<span class="hljs-string">&quot;3.æ‰§è¡Œobject.wait()æ—¶ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + thread1.getState());<br><br>        <span class="hljs-comment">//å£°æ˜å¦ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œè§£é”</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">synchronized</span> (obj) &#123;<br>                <span class="hljs-comment">//å”¤é†’ç­‰å¾…çš„çº¿ç¨‹</span><br>                obj.notify();<br>            &#125;<br>        &#125;).start();<br><br>        <span class="hljs-comment">//mainçº¿ç¨‹ä¼‘çœ 10æ¯«ç§’ç­‰å¾…thread1çº¿ç¨‹èƒ½å¤Ÿè‹é†’</span><br>        Thread.sleep(<span class="hljs-number">10</span>);<br><br>        <span class="hljs-comment">//è·å–thread1è¿è¡Œç»“æŸä¹‹åçš„çŠ¶æ€</span><br>        System.out.println(<span class="hljs-string">&quot;5.çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + thread1.getState() + <span class="hljs-string">&quot;\n&quot;</span>);<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡ºç»“æœ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span>é€šè¿‡<span class="hljs-keyword">new</span>åˆå§‹åŒ–ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰start()ä¹‹å‰ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šNEW<br><span class="hljs-number">2.</span>æ‰§è¡Œthread.start()ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šRUNNABLE<br><span class="hljs-number">3.</span>æ‰§è¡Œobject.wait()æ—¶ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šWAITING<br><span class="hljs-number">4.</span>è¢«object.notify()æ–¹æ³•å”¤é†’ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šRUNNABLE<br><span class="hljs-number">5.</span>çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šTERMINATED<br></code></pre></td></tr></table></figure><h3 id="-1"><a href="#-1" class="headerlink" title=""></a></h3><h3 id="1-4-çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 3"><a href="#1-4-çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 3" class="headerlink" title="1.4 çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 3"></a>1.4 çº¿ç¨‹çš„çŠ¶æ€-ç»ƒä¹ 3</h3><p><strong>ç›®çš„ :</strong>   æœ¬æ¡ˆä¾‹ä¸»è¦æ¼”ç¤ºBLOCKEDçš„çŠ¶æ€è½¬æ¢ã€‚</p><p><strong>éœ€æ±‚ ï¼š</strong>ç¼–å†™ä¸€æ®µä»£ç ï¼Œä¾æ¬¡æ˜¾ç¤ºä¸€ä¸ªçº¿ç¨‹çš„è¿™äº›çŠ¶æ€ï¼šNEW -&gt; RUNNABLE -&gt; BLOCKED -&gt; RUNNABLE -&gt; TERMINATED</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadStateDemo03</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br><br>        <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥åŠ é”å’Œè§£é”</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>        <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå…ˆæŠ¢å äº†obj2å¯¹è±¡çš„é”</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">synchronized</span> (obj2) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    Thread.sleep(<span class="hljs-number">100</span>);              <span class="hljs-comment">//ç¬¬ä¸€ä¸ªçº¿ç¨‹è¦æŒæœ‰é”100æ¯«ç§’</span><br>                    obj2.wait();                          <span class="hljs-comment">//ç„¶åé€šè¿‡wait()æ–¹æ³•è¿›è¡Œç­‰å¾…çŠ¶æ€ï¼Œå¹¶é‡Šæ”¾obj2çš„å¯¹è±¡é”</span><br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;).start();<br><br>        <span class="hljs-comment">//å®šä¹‰ç›®æ ‡çº¿ç¨‹ï¼Œè·å–ç­‰å¾…è·å–obj2çš„é”</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            System.out.println(<span class="hljs-string">&quot;2.æ‰§è¡Œthread.start()ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + Thread.currentThread().getState());<br>            <span class="hljs-keyword">synchronized</span> (obj2) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    Thread.sleep(<span class="hljs-number">100</span>);              <span class="hljs-comment">//thread3è¦æŒæœ‰å¯¹è±¡é”100æ¯«ç§’</span><br>                    obj2.notify();                        <span class="hljs-comment">//ç„¶åé€šè¿‡notify()æ–¹æ³•å”¤é†’æ‰€æœ‰åœ¨ojb2ä¸Šç­‰å¾…çš„çº¿ç¨‹ç»§ç»­æ‰§è¡Œåç»­æ“ä½œ</span><br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;4.é˜»å¡ç»“æŸåï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + Thread.currentThread().getState());<br>        &#125;);<br><br>        <span class="hljs-comment">//è·å–start()ä¹‹å‰çš„çŠ¶æ€</span><br>        System.out.println(<span class="hljs-string">&quot;1.é€šè¿‡newåˆå§‹åŒ–ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰thread.start()ä¹‹å‰ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + thread.getState());<br><br>        <span class="hljs-comment">//å¯åŠ¨çº¿ç¨‹</span><br>        thread.start();<br><br>        <span class="hljs-comment">//å…ˆç­‰100æ¯«ç§’</span><br>        Thread.sleep(<span class="hljs-number">50</span>);<br><br>        <span class="hljs-comment">//ç¬¬ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾é”è‡³å°‘éœ€è¦100æ¯«ç§’ï¼Œæ‰€ä»¥åœ¨ç¬¬50æ¯«ç§’æ—¶ï¼Œthreadæ­£åœ¨å› ç­‰å¾…objçš„å¯¹è±¡é”è€Œé˜»å¡</span><br>        System.out.println(<span class="hljs-string">&quot;3.å› ä¸ºç­‰å¾…é”è€Œé˜»å¡æ—¶ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + thread.getState());<br><br>        <span class="hljs-comment">//å†ç­‰300æ¯«ç§’</span><br>        Thread.sleep(<span class="hljs-number">300</span>);<br><br>        <span class="hljs-comment">//ä¸¤ä¸ªçº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´åŠ ä¸Šä¹‹å‰ç­‰å¾…çš„50æ¯«ç§’æ€»å…±æ˜¯250æ¯«ç§’ï¼Œæ‰€ä»¥ç¬¬300æ¯«ç§’ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½å·²ç»æ‰§è¡Œå®Œæ¯•</span><br>        System.out.println(<span class="hljs-string">&quot;5.çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼š&quot;</span> + thread.getState());<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span>é€šè¿‡<span class="hljs-keyword">new</span>åˆå§‹åŒ–ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰thread.start()ä¹‹å‰ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šNEW<br><span class="hljs-number">2.</span>æ‰§è¡Œthread.start()ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šRUNNABLE<br><span class="hljs-number">3.</span>å› ä¸ºç­‰å¾…é”è€Œé˜»å¡æ—¶ï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šBLOCKED<br><span class="hljs-number">4.</span>é˜»å¡ç»“æŸåï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šRUNNABLE<br><span class="hljs-number">5.</span>çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œçº¿ç¨‹çš„çŠ¶æ€ï¼šTERMINATED<br></code></pre></td></tr></table></figure><h3 id="1-5-çº¿ç¨‹æ± -åŸºæœ¬åŸç†"><a href="#1-5-çº¿ç¨‹æ± -åŸºæœ¬åŸç†" class="headerlink" title="1.5 çº¿ç¨‹æ± -åŸºæœ¬åŸç†"></a>1.5 çº¿ç¨‹æ± -åŸºæœ¬åŸç†</h3><p><strong>æ¦‚è¿° :</strong> </p><pre><code class="hljs">æåˆ°æ± ï¼Œå¤§å®¶åº”è¯¥èƒ½æƒ³åˆ°çš„å°±æ˜¯æ°´æ± ã€‚æ°´æ± å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œåœ¨è¯¥å®¹å™¨ä¸­å­˜å‚¨äº†å¾ˆå¤šçš„æ°´ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯çº¿ç¨‹æ± å‘¢ï¼Ÿçº¿ç¨‹æ± ä¹Ÿæ˜¯å¯ä»¥çœ‹åšæˆä¸€ä¸ªæ± å­ï¼Œåœ¨è¯¥æ± å­ä¸­å­˜å‚¨å¾ˆå¤šä¸ªçº¿ç¨‹ã€‚</code></pre><p>çº¿ç¨‹æ± å­˜åœ¨çš„æ„ä¹‰ï¼š</p><pre><code class="hljs">ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œå½“ç¨‹åºä¸­éœ€è¦åˆ›å»ºå¤§é‡ç”Ÿå­˜æœŸå¾ˆçŸ­æš‚çš„çº¿ç¨‹æ—¶ï¼Œé¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹ç³»ç»Ÿçš„èµ„æºæ¶ˆè€—æœ‰å¯èƒ½å¤§äºä¸šåŠ¡å¤„ç†æ˜¯å¯¹ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ï¼Œè¿™æ ·å°±æœ‰ç‚¹&quot;èˆæœ¬é€æœ«&quot;äº†ã€‚é’ˆå¯¹è¿™ä¸€ç§æƒ…å†µï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨çº¿ç¨‹æ± ã€‚çº¿ç¨‹æ± åœ¨å¯åŠ¨çš„æ—¶ï¼Œä¼šåˆ›å»ºå¤§é‡ç©ºé—²çº¿ç¨‹ï¼Œå½“æˆ‘ä»¬å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡çš„æ—¶ï¼Œçº¿ç¨‹æ± å°±ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œçº¿ç¨‹å¹¶ä¸ä¼šæ­»äº¡ï¼Œè€Œæ˜¯å†æ¬¡è¿”å›åˆ°çº¿ç¨‹æ± ä¸­ç§°ä¸ºç©ºé—²çŠ¶æ€ã€‚ç­‰å¾…ä¸‹ä¸€æ¬¡ä»»åŠ¡çš„æ‰§è¡Œã€‚</code></pre><p><strong>çº¿ç¨‹æ± çš„è®¾è®¡æ€è·¯ :</strong></p><ol><li>å‡†å¤‡ä¸€ä¸ªä»»åŠ¡å®¹å™¨</li><li>ä¸€æ¬¡æ€§å¯åŠ¨å¤šä¸ª(2ä¸ª)æ¶ˆè´¹è€…çº¿ç¨‹</li><li>åˆšå¼€å§‹ä»»åŠ¡å®¹å™¨æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥çº¿ç¨‹éƒ½åœ¨wait</li><li>ç›´åˆ°ä¸€ä¸ªå¤–éƒ¨çº¿ç¨‹å‘è¿™ä¸ªä»»åŠ¡å®¹å™¨ä¸­æ‰”äº†ä¸€ä¸ªâ€ä»»åŠ¡â€ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’</li><li>è¿™ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹å–å‡ºâ€ä»»åŠ¡â€ï¼Œå¹¶ä¸”æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œç»§ç»­ç­‰å¾…ä¸‹ä¸€æ¬¡ä»»åŠ¡çš„åˆ°æ¥</li></ol><h3 id="1-6-çº¿ç¨‹æ± -Executorsé»˜è®¤çº¿ç¨‹æ± "><a href="#1-6-çº¿ç¨‹æ± -Executorsé»˜è®¤çº¿ç¨‹æ± " class="headerlink" title="1.6 çº¿ç¨‹æ± -Executorsé»˜è®¤çº¿ç¨‹æ± "></a>1.6 çº¿ç¨‹æ± -Executorsé»˜è®¤çº¿ç¨‹æ± </h3><p>æ¦‚è¿° : JDKå¯¹çº¿ç¨‹æ± ä¹Ÿè¿›è¡Œäº†ç›¸å…³çš„å®ç°ï¼Œåœ¨çœŸå®ä¼ä¸šå¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿå¾ˆå°‘å»è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œè€Œæ˜¯ä½¿ç”¨JDKä¸­è‡ªå¸¦çš„çº¿ç¨‹æ± ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Executorsä¸­æ‰€æä¾›çš„<strong>é™æ€</strong>æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± </p><pre><code class="hljs">static ExecutorService newCachedThreadPool()   åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± static newFixedThreadPool(int nThreads)        åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </code></pre><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mythreadpool;<br><br><br><span class="hljs-comment">//static ExecutorService newCachedThreadPool()   åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± </span><br><span class="hljs-comment">//static newFixedThreadPool(int nThreads)    åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </span><br><br><span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;<br><span class="hljs-keyword">import</span> java.util.concurrent.Executors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThreadPoolDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br><br>        <span class="hljs-comment">//1,åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± å¯¹è±¡.æ± å­ä¸­é»˜è®¤æ˜¯ç©ºçš„.é»˜è®¤æœ€å¤šå¯ä»¥å®¹çº³intç±»å‹çš„æœ€å¤§å€¼.</span><br>        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newCachedThreadPool();<br>        <span class="hljs-comment">//Executors --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡</span><br>        <span class="hljs-comment">//ExecutorService --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ§åˆ¶çº¿ç¨‹æ± </span><br><br>        executorService.submit(()-&gt;&#123;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);<br>        &#125;);<br><br>        <span class="hljs-comment">//Thread.sleep(2000);</span><br><br>        executorService.submit(()-&gt;&#123;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);<br>        &#125;);<br><br>        executorService.shutdown();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="1-7-çº¿ç¨‹æ± -Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± "><a href="#1-7-çº¿ç¨‹æ± -Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± " class="headerlink" title="1.7 çº¿ç¨‹æ± -Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± "></a>1.7 çº¿ç¨‹æ± -Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± </h3><p><strong>ä½¿ç”¨Executorsä¸­æ‰€æä¾›çš„é™æ€æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± </strong></p><pre><code class="hljs">static ExecutorService newFixedThreadPool(int nThreads) : åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </code></pre><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mythreadpool;<br><br><span class="hljs-comment">//static ExecutorService newFixedThreadPool(int nThreads)</span><br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </span><br><br><span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;<br><span class="hljs-keyword">import</span> java.util.concurrent.Executors;<br><span class="hljs-keyword">import</span> java.util.concurrent.ThreadPoolExecutor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThreadPoolDemo2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//å‚æ•°ä¸æ˜¯åˆå§‹å€¼è€Œæ˜¯æœ€å¤§å€¼</span><br>        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">10</span>);<br><br>        <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> (ThreadPoolExecutor) executorService;<br>        System.out.println(pool.getPoolSize());<span class="hljs-comment">//0</span><br><br>        executorService.submit(()-&gt;&#123;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);<br>        &#125;);<br><br>        executorService.submit(()-&gt;&#123;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);<br>        &#125;);<br><br>        System.out.println(pool.getPoolSize());<span class="hljs-comment">//2</span><br><span class="hljs-comment">//        executorService.shutdown();</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="1-8-çº¿ç¨‹æ± -ThreadPoolExecutor"><a href="#1-8-çº¿ç¨‹æ± -ThreadPoolExecutor" class="headerlink" title="1.8 çº¿ç¨‹æ± -ThreadPoolExecutor"></a>1.8 çº¿ç¨‹æ± -ThreadPoolExecutor</h3><p><strong>åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡ :</strong> </p><p>ThreadPoolExecutor threadPoolExecutor &#x3D; new ThreadPoolExecutor(æ ¸å¿ƒçº¿ç¨‹æ•°é‡,æœ€å¤§çº¿ç¨‹æ•°é‡,ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä»»åŠ¡é˜Ÿåˆ—,åˆ›å»ºçº¿ç¨‹å·¥å‚,ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥);</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mythreadpool;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.ArrayBlockingQueue;<br><span class="hljs-keyword">import</span> java.util.concurrent.Executors;<br><span class="hljs-keyword">import</span> java.util.concurrent.ThreadPoolExecutor;<br><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThreadPoolDemo3</span> &#123;<br><span class="hljs-comment">//    å‚æ•°ä¸€ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡</span><br><span class="hljs-comment">//    å‚æ•°äºŒï¼šæœ€å¤§çº¿ç¨‹æ•°</span><br><span class="hljs-comment">//    å‚æ•°ä¸‰ï¼šç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´</span><br><span class="hljs-comment">//    å‚æ•°å››ï¼šæ—¶é—´å•ä½</span><br><span class="hljs-comment">//    å‚æ•°äº”ï¼šä»»åŠ¡é˜Ÿåˆ—</span><br><span class="hljs-comment">//    å‚æ•°å…­ï¼šåˆ›å»ºçº¿ç¨‹å·¥å‚</span><br><span class="hljs-comment">//    å‚æ•°ä¸ƒï¼šä»»åŠ¡çš„æ‹’ç»ç­–ç•¥</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,TimeUnit.SECONDS,<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">10</span>), Executors.defaultThreadFactory(),<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.AbortPolicy());<br>        pool.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>());<br>        pool.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>());<br><br>        pool.shutdown();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="1-9-çº¿ç¨‹æ± -å‚æ•°è¯¦è§£"><a href="#1-9-çº¿ç¨‹æ± -å‚æ•°è¯¦è§£" class="headerlink" title="1.9 çº¿ç¨‹æ± -å‚æ•°è¯¦è§£"></a>1.9 çº¿ç¨‹æ± -å‚æ•°è¯¦è§£</h3><p><img src="https://pic1.imgdb.cn/item/623e9bf627f86abb2aee6238.png" alt="1591165506516"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadPoolExecutor</span><span class="hljs-params">(<span class="hljs-type">int</span> corePoolSize,</span><br><span class="hljs-params">                              <span class="hljs-type">int</span> maximumPoolSize,</span><br><span class="hljs-params">                              <span class="hljs-type">long</span> keepAliveTime,</span><br><span class="hljs-params">                              TimeUnit unit,</span><br><span class="hljs-params">                              BlockingQueue&lt;Runnable&gt; workQueue,</span><br><span class="hljs-params">                              ThreadFactory threadFactory,</span><br><span class="hljs-params">                              RejectedExecutionHandler handler)</span><br>    <br>corePoolSizeï¼š   æ ¸å¿ƒçº¿ç¨‹çš„æœ€å¤§å€¼ï¼Œä¸èƒ½å°äº<span class="hljs-number">0</span><br>maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œä¸èƒ½å°äºç­‰äº<span class="hljs-number">0</span>ï¼ŒmaximumPoolSize &gt;= corePoolSize<br>keepAliveTimeï¼š  ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä¸èƒ½å°äº<span class="hljs-number">0</span><br>unitï¼š           æ—¶é—´å•ä½<br>workQueueï¼š      ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸èƒ½ä¸º<span class="hljs-literal">null</span><br>threadFactoryï¼š  åˆ›å»ºçº¿ç¨‹å·¥å‚,ä¸èƒ½ä¸º<span class="hljs-literal">null</span>      <br>handlerï¼š        ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥,ä¸èƒ½ä¸º<span class="hljs-literal">null</span>  <br></code></pre></td></tr></table></figure><h3 id="1-10-çº¿ç¨‹æ± -éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥"><a href="#1-10-çº¿ç¨‹æ± -éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥" class="headerlink" title="1.10 çº¿ç¨‹æ± -éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥"></a>1.10 çº¿ç¨‹æ± -éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥</h3><p>RejectedExecutionHandleræ˜¯jdkæä¾›çš„ä¸€ä¸ªä»»åŠ¡æ‹’ç»ç­–ç•¥æ¥å£ï¼Œå®ƒä¸‹é¢å­˜åœ¨4ä¸ªå­ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">ThreadPoolExecutor.AbortPolicy:     ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚æ˜¯é»˜è®¤çš„ç­–ç•¥ã€‚<br>ThreadPoolExecutor.DiscardPolicyï¼š    ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ è¿™æ˜¯ä¸æ¨èçš„åšæ³•ã€‚<br>ThreadPoolExecutor.DiscardOldestPolicyï¼š    æŠ›å¼ƒé˜Ÿåˆ—ä¸­ç­‰å¾…æœ€ä¹…çš„ä»»åŠ¡ ç„¶åæŠŠå½“å‰ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ä¸­ã€‚<br>ThreadPoolExecutor.CallerRunsPolicy:        è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œã€‚<br></code></pre></td></tr></table></figure><p>æ³¨ï¼šæ˜ç¡®çº¿ç¨‹æ± å¯¹å¤šå¯æ‰§è¡Œçš„ä»»åŠ¡æ•° &#x3D; é˜Ÿåˆ—å®¹é‡ + æœ€å¤§çº¿ç¨‹æ•°</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º1</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.AbortPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolExecutorDemo01</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">threadPoolExecutor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">1</span> , <span class="hljs-number">3</span> , <span class="hljs-number">20</span> , TimeUnit.SECONDS ,<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1</span>) , Executors.defaultThreadFactory() , <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.AbortPolicy()) ;<br><br>        <span class="hljs-comment">// æäº¤5ä¸ªä»»åŠ¡ï¼Œè€Œè¯¥çº¿ç¨‹æ± æœ€å¤šå¯ä»¥å¤„ç†4ä¸ªä»»åŠ¡ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨AbortPolicyè¿™ä¸ªä»»åŠ¡å¤„ç†ç­–ç•¥çš„æ—¶å€™ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; x &lt; <span class="hljs-number">5</span> ; x++) &#123;<br>            threadPoolExecutor.submit(() -&gt; &#123;<br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span>);<br>            &#125;);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br></code></pre></td></tr></table></figure><p>æ§åˆ¶å°æŠ¥é”™ï¼Œä»…ä»…æ‰§è¡Œäº†4ä¸ªä»»åŠ¡ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡è¢«ä¸¢å¼ƒäº†</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º2</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.DiscardPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolExecutorDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">threadPoolExecutor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">1</span> , <span class="hljs-number">3</span> , <span class="hljs-number">20</span> , TimeUnit.SECONDS ,<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1</span>) , Executors.defaultThreadFactory() , <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.DiscardPolicy()) ;<br><br>        <span class="hljs-comment">// æäº¤5ä¸ªä»»åŠ¡ï¼Œè€Œè¯¥çº¿ç¨‹æ± æœ€å¤šå¯ä»¥å¤„ç†4ä¸ªä»»åŠ¡ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨DiscardPolicyè¿™ä¸ªä»»åŠ¡å¤„ç†ç­–ç•¥çš„æ—¶å€™ï¼Œæ§åˆ¶å°ä¸ä¼šæŠ¥é”™</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; x &lt; <span class="hljs-number">5</span> ; x++) &#123;<br>            threadPoolExecutor.submit(() -&gt; &#123;<br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span>);<br>            &#125;);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br></code></pre></td></tr></table></figure><p>æ§åˆ¶å°æ²¡æœ‰æŠ¥é”™ï¼Œä»…ä»…æ‰§è¡Œäº†4ä¸ªä»»åŠ¡ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡è¢«ä¸¢å¼ƒäº†</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º3</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.DiscardOldestPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolExecutorDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span><br><span class="hljs-comment">         */</span><br>        ThreadPoolExecutor threadPoolExecutor;<br>        threadPoolExecutor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">1</span> , <span class="hljs-number">3</span> , <span class="hljs-number">20</span> , TimeUnit.SECONDS ,<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1</span>) , Executors.defaultThreadFactory() , <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.DiscardOldestPolicy());<br>        <span class="hljs-comment">// æäº¤5ä¸ªä»»åŠ¡</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; x &lt; <span class="hljs-number">5</span> ; x++) &#123;<br>            <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œæ¥æŒ‡å®šæŒ‡å®šå½“å‰æ‰§è¡Œçš„ä»»åŠ¡;è¿™ä¸ªå˜é‡éœ€è¦è¢«finalä¿®é¥°</span><br>            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> x ;<br>            threadPoolExecutor.submit(() -&gt; &#123;<br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span> + y);<br>            &#125;);     <br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="hljs-number">2</span><br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="hljs-number">0</span><br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="hljs-number">3</span><br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><p>ç”±äºä»»åŠ¡1åœ¨çº¿ç¨‹æ± ä¸­ç­‰å¾…æ—¶é—´æœ€é•¿ï¼Œå› æ­¤ä»»åŠ¡1è¢«ä¸¢å¼ƒã€‚</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º4</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.CallerRunsPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolExecutorDemo04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span><br><span class="hljs-comment">         */</span><br>        ThreadPoolExecutor threadPoolExecutor;<br>        threadPoolExecutor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">1</span> , <span class="hljs-number">3</span> , <span class="hljs-number">20</span> , TimeUnit.SECONDS ,<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1</span>) , Executors.defaultThreadFactory() , <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());<br><br>        <span class="hljs-comment">// æäº¤5ä¸ªä»»åŠ¡</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; x &lt; <span class="hljs-number">5</span> ; x++) &#123;<br>            threadPoolExecutor.submit(() -&gt; &#123;<br>                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span>);<br>            &#125;);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br>main----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<br></code></pre></td></tr></table></figure><p>é€šè¿‡æ§åˆ¶å°çš„è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¬¡ç­–ç•¥æ²¡æœ‰é€šè¿‡çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œã€‚</p><h2 id="2-åŸå­æ€§"><a href="#2-åŸå­æ€§" class="headerlink" title="2. åŸå­æ€§"></a>2. åŸå­æ€§</h2><h3 id="2-1-volatile-é—®é¢˜"><a href="#2-1-volatile-é—®é¢˜" class="headerlink" title="2.1 volatile-é—®é¢˜"></a>2.1 volatile-é—®é¢˜</h3><p><strong>ä»£ç åˆ†æ :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread1</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread1</span>();<br>        t1.setName(<span class="hljs-string">&quot;å°è·¯åŒå­¦&quot;</span>);<br>        t1.start();<br><br>        <span class="hljs-type">MyThread2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread2</span>();<br>        t2.setName(<span class="hljs-string">&quot;å°çš®åŒå­¦&quot;</span>);<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Money</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">money</span> <span class="hljs-operator">=</span> <span class="hljs-number">100000</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread1</span> <span class="hljs-keyword">extends</span>  <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span>(Money.money == <span class="hljs-number">100000</span>)&#123;<br><br>        &#125;<br><br>        System.out.println(<span class="hljs-string">&quot;ç»“å©šåŸºé‡‘å·²ç»ä¸æ˜¯åä¸‡äº†&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Thread.sleep(<span class="hljs-number">10</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>        Money.money = <span class="hljs-number">90000</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>ç¨‹åºé—®é¢˜ :</strong>  å¥³å­©è™½ç„¶çŸ¥é“ç»“å©šåŸºé‡‘æ˜¯åä¸‡ï¼Œä½†æ˜¯å½“åŸºé‡‘çš„ä½™é¢å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå¥³å­©æ— æ³•çŸ¥é“æœ€æ–°çš„ä½™é¢ã€‚</p><h3 id="2-2-volatileè§£å†³"><a href="#2-2-volatileè§£å†³" class="headerlink" title="2.2 volatileè§£å†³"></a>2.2 volatileè§£å†³</h3><p><strong>ä»¥ä¸Šæ¡ˆä¾‹å‡ºç°çš„é—®é¢˜ :</strong></p><pre><code class="hljs">å½“Açº¿ç¨‹ä¿®æ”¹äº†å…±äº«æ•°æ®æ—¶ï¼ŒBçº¿ç¨‹æ²¡æœ‰åŠæ—¶è·å–åˆ°æœ€æ–°çš„å€¼ï¼Œå¦‚æœè¿˜åœ¨ä½¿ç”¨åŸå…ˆçš„å€¼ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ 1ï¼Œå †å†…å­˜æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„çº¿ç¨‹æ ˆã€‚2 ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨å †é‡Œé¢å˜é‡çš„æ—¶å€™ï¼Œéƒ½ä¼šå…ˆæ‹·è´ä¸€ä»½åˆ°å˜é‡çš„å‰¯æœ¬ä¸­ã€‚3 ï¼Œåœ¨çº¿ç¨‹ä¸­ï¼Œæ¯ä¸€æ¬¡ä½¿ç”¨æ˜¯ä»å˜é‡çš„å‰¯æœ¬ä¸­è·å–çš„ã€‚</code></pre><p><strong>Volatileå…³é”®å­— :</strong> å¼ºåˆ¶çº¿ç¨‹æ¯æ¬¡åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šçœ‹ä¸€ä¸‹å…±äº«åŒºåŸŸæœ€æ–°çš„å€¼</p><p><strong>ä»£ç å®ç° :</strong> <strong>ä½¿ç”¨volatileå…³é”®å­—è§£å†³</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread1</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread1</span>();<br>        t1.setName(<span class="hljs-string">&quot;å°è·¯åŒå­¦&quot;</span>);<br>        t1.start();<br><br>        <span class="hljs-type">MyThread2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread2</span>();<br>        t2.setName(<span class="hljs-string">&quot;å°çš®åŒå­¦&quot;</span>);<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Money</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> <span class="hljs-variable">money</span> <span class="hljs-operator">=</span> <span class="hljs-number">100000</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread1</span> <span class="hljs-keyword">extends</span>  <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span>(Money.money == <span class="hljs-number">100000</span>)&#123;<br><br>        &#125;<br><br>        System.out.println(<span class="hljs-string">&quot;ç»“å©šåŸºé‡‘å·²ç»ä¸æ˜¯åä¸‡äº†&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Thread.sleep(<span class="hljs-number">10</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>        Money.money = <span class="hljs-number">90000</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="2-3-synchronizedè§£å†³"><a href="#2-3-synchronizedè§£å†³" class="headerlink" title="2.3 synchronizedè§£å†³"></a>2.3 synchronizedè§£å†³</h3><p><strong>synchronizedè§£å†³ :</strong> </p><pre><code class="hljs">1 ï¼Œçº¿ç¨‹è·å¾—é”2 ï¼Œæ¸…ç©ºå˜é‡å‰¯æœ¬3 ï¼Œæ‹·è´å…±äº«å˜é‡æœ€æ–°çš„å€¼åˆ°å˜é‡å‰¯æœ¬ä¸­4 ï¼Œæ‰§è¡Œä»£ç 5 ï¼Œå°†ä¿®æ”¹åå˜é‡å‰¯æœ¬ä¸­çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®6 ï¼Œé‡Šæ”¾é”</code></pre><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile2;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyThread1</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread1</span>();<br>        t1.setName(<span class="hljs-string">&quot;å°è·¯åŒå­¦&quot;</span>);<br>        t1.start();<br><br>        <span class="hljs-type">MyThread2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread2</span>();<br>        t2.setName(<span class="hljs-string">&quot;å°çš®åŒå­¦&quot;</span>);<br>        t2.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile2;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Money</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> <span class="hljs-variable">money</span> <span class="hljs-operator">=</span> <span class="hljs-number">100000</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile2;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread1</span> <span class="hljs-keyword">extends</span>  <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-keyword">synchronized</span> (Money.lock)&#123;<br>                <span class="hljs-keyword">if</span>(Money.money != <span class="hljs-number">100000</span>)&#123;<br>                    System.out.println(<span class="hljs-string">&quot;ç»“å©šåŸºé‡‘å·²ç»ä¸æ˜¯åä¸‡äº†&quot;</span>);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.myvolatile2;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">synchronized</span> (Money.lock) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">10</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br><br>            Money.money = <span class="hljs-number">90000</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-4-åŸå­æ€§"><a href="#2-4-åŸå­æ€§" class="headerlink" title="2.4 åŸå­æ€§"></a>2.4 åŸå­æ€§</h3><p><strong>æ¦‚è¿° :</strong> æ‰€è°“çš„åŸå­æ€§æ˜¯æŒ‡åœ¨ä¸€æ¬¡æ“ä½œæˆ–è€…å¤šæ¬¡æ“ä½œä¸­ï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œå…¨éƒ¨éƒ½å¾—åˆ°äº†æ‰§è¡Œå¹¶ä¸”ä¸ä¼šå—åˆ°ä»»ä½•å› ç´ çš„å¹²æ‰°è€Œä¸­æ–­ï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œéƒ½ä¸æ‰§è¡Œï¼Œå¤šä¸ªæ“ä½œæ˜¯ä¸€ä¸ªä¸å¯ä»¥åˆ†å‰²çš„æ•´ä½“ã€‚</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.threadatom;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AtomDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyAtomThread</span> <span class="hljs-variable">atom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAtomThread</span>();<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(atom).start();<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAtomThread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">//é€å†°æ·‡æ·‹çš„æ•°é‡</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-comment">//1,ä»å…±äº«æ•°æ®ä¸­è¯»å–æ•°æ®åˆ°æœ¬çº¿ç¨‹æ ˆä¸­.</span><br>            <span class="hljs-comment">//2,ä¿®æ”¹æœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼</span><br>            <span class="hljs-comment">//3,ä¼šæŠŠæœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®.</span><br>            count++;<br>            System.out.println(<span class="hljs-string">&quot;å·²ç»é€äº†&quot;</span> + count + <span class="hljs-string">&quot;ä¸ªå†°æ·‡æ·‹&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä»£ç æ€»ç»“ :</strong> count++ ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œ, ä»–åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­,æœ‰å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­</p><h3 id="2-5-volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§"><a href="#2-5-volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§" class="headerlink" title="2.5 volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§"></a>2.5 volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§</h3><p>è§£å†³æ–¹æ¡ˆ : æˆ‘ä»¬å¯ä»¥ç»™count++æ“ä½œæ·»åŠ é”ï¼Œé‚£ä¹ˆcount++æ“ä½œå°±æ˜¯ä¸´ç•ŒåŒºä¸­çš„ä»£ç ï¼Œä¸´ç•ŒåŒºä¸­çš„ä»£ç ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œï¼Œæ‰€ä»¥count++å°±å˜æˆäº†åŸå­æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.threadatom2;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AtomDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyAtomThread</span> <span class="hljs-variable">atom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAtomThread</span>();<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(atom).start();<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAtomThread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">//é€å†°æ·‡æ·‹çš„æ•°é‡</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-comment">//1,ä»å…±äº«æ•°æ®ä¸­è¯»å–æ•°æ®åˆ°æœ¬çº¿ç¨‹æ ˆä¸­.</span><br>            <span class="hljs-comment">//2,ä¿®æ”¹æœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼</span><br>            <span class="hljs-comment">//3,ä¼šæŠŠæœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®.</span><br>            <span class="hljs-keyword">synchronized</span> (lock) &#123;<br>                count++;<br>                System.out.println(<span class="hljs-string">&quot;å·²ç»é€äº†&quot;</span> + count + <span class="hljs-string">&quot;ä¸ªå†°æ·‡æ·‹&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-6-åŸå­æ€§-AtomicInteger"><a href="#2-6-åŸå­æ€§-AtomicInteger" class="headerlink" title="2.6 åŸå­æ€§_AtomicInteger"></a>2.6 åŸå­æ€§_AtomicInteger</h3><p>æ¦‚è¿°ï¼šjavaä»JDK1.5å¼€å§‹æä¾›äº†java.util.concurrent.atomicåŒ…(ç®€ç§°AtomicåŒ…)ï¼Œè¿™ä¸ªåŒ…ä¸­çš„åŸå­æ“ä½œç±»æä¾›äº†ä¸€ç§ç”¨æ³•ç®€å•ï¼Œæ€§èƒ½é«˜æ•ˆï¼Œçº¿ç¨‹å®‰å…¨åœ°æ›´æ–°ä¸€ä¸ªå˜é‡çš„æ–¹å¼ã€‚å› ä¸ºå˜</p><p>é‡çš„ç±»å‹æœ‰å¾ˆå¤šç§ï¼Œæ‰€ä»¥åœ¨AtomicåŒ…é‡Œä¸€å…±æä¾›äº†13ä¸ªç±»ï¼Œå±äº4ç§ç±»å‹çš„åŸå­æ›´æ–°æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯åŸå­æ›´æ–°åŸºæœ¬ç±»å‹ã€åŸå­æ›´æ–°æ•°ç»„ã€åŸå­æ›´æ–°å¼•ç”¨å’ŒåŸå­æ›´æ–°å±æ€§(å­—æ®µ)ã€‚æœ¬æ¬¡æˆ‘ä»¬åªè®²è§£</p><p>ä½¿ç”¨åŸå­çš„æ–¹å¼æ›´æ–°åŸºæœ¬ç±»å‹ï¼Œä½¿ç”¨åŸå­çš„æ–¹å¼æ›´æ–°åŸºæœ¬ç±»å‹AtomicåŒ…æä¾›äº†ä»¥ä¸‹3ä¸ªç±»ï¼š</p><p>AtomicBooleanï¼š åŸå­æ›´æ–°å¸ƒå°”ç±»å‹</p><p>AtomicIntegerï¼š   åŸå­æ›´æ–°æ•´å‹</p><p>AtomicLongï¼š    åŸå­æ›´æ–°é•¿æ•´å‹</p><p>ä»¥ä¸Š3ä¸ªç±»æä¾›çš„æ–¹æ³•å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æœ¬èŠ‚ä»…ä»¥AtomicIntegerä¸ºä¾‹è¿›è¡Œè®²è§£ï¼ŒAtomicIntegerçš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">AtomicInteger</span><span class="hljs-params">()</span>ï¼š       åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤å€¼ä¸º<span class="hljs-number">0</span>çš„åŸå­å‹Integer<br><span class="hljs-keyword">public</span> <span class="hljs-title function_">AtomicInteger</span><span class="hljs-params">(<span class="hljs-type">int</span> initialValue)</span>ï¼š  åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å®šå€¼çš„åŸå­å‹Integer<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">get</span><span class="hljs-params">()</span>:    è·å–å€¼<br><span class="hljs-type">int</span> <span class="hljs-title function_">getAndIncrement</span><span class="hljs-params">()</span>:       ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ <span class="hljs-number">1</span>ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢å‰çš„å€¼ã€‚<br><span class="hljs-type">int</span> <span class="hljs-title function_">incrementAndGet</span><span class="hljs-params">()</span>:      ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ <span class="hljs-number">1</span>ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢åçš„å€¼ã€‚<br><span class="hljs-type">int</span> <span class="hljs-title function_">addAndGet</span><span class="hljs-params">(<span class="hljs-type">int</span> data)</span>: ä»¥åŸå­æ–¹å¼å°†è¾“å…¥çš„æ•°å€¼ä¸å®ä¾‹ä¸­çš„å€¼ï¼ˆAtomicIntegeré‡Œçš„valueï¼‰ç›¸åŠ ï¼Œå¹¶è¿”å›ç»“æœã€‚<br><span class="hljs-type">int</span> <span class="hljs-title function_">getAndSet</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span>:    ä»¥åŸå­æ–¹å¼è®¾ç½®ä¸ºnewValueçš„å€¼ï¼Œå¹¶è¿”å›æ—§å€¼ã€‚<br></code></pre></td></tr></table></figure><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.threadatom3;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicInteger;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAtomIntergerDemo1</span> &#123;<br><span class="hljs-comment">//    public AtomicInteger()ï¼š               åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤å€¼ä¸º0çš„åŸå­å‹Integer</span><br><span class="hljs-comment">//    public AtomicInteger(int initialValue)ï¼š åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å®šå€¼çš„åŸå­å‹Integer</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>();<br>        System.out.println(ac);<br><br>        <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">ac2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">10</span>);<br>        System.out.println(ac2);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.threadatom3;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicInteger;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAtomIntergerDemo2</span> &#123;<br><span class="hljs-comment">//    int get():    è·å–å€¼</span><br><span class="hljs-comment">//    int getAndIncrement():     ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ 1ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢å‰çš„å€¼ã€‚</span><br><span class="hljs-comment">//    int incrementAndGet():     ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ 1ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢åçš„å€¼ã€‚</span><br><span class="hljs-comment">//    int addAndGet(int data): ä»¥åŸå­æ–¹å¼å°†å‚æ•°ä¸å¯¹è±¡ä¸­çš„å€¼ç›¸åŠ ï¼Œå¹¶è¿”å›ç»“æœã€‚</span><br><span class="hljs-comment">//    int getAndSet(int value):  ä»¥åŸå­æ–¹å¼è®¾ç½®ä¸ºnewValueçš„å€¼ï¼Œå¹¶è¿”å›æ—§å€¼ã€‚</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//        AtomicInteger ac1 = new AtomicInteger(10);</span><br><span class="hljs-comment">//        System.out.println(ac1.get());</span><br><br><span class="hljs-comment">//        AtomicInteger ac2 = new AtomicInteger(10);</span><br><span class="hljs-comment">//        int andIncrement = ac2.getAndIncrement();</span><br><span class="hljs-comment">//        System.out.println(andIncrement);</span><br><span class="hljs-comment">//        System.out.println(ac2.get());</span><br><br><span class="hljs-comment">//        AtomicInteger ac3 = new AtomicInteger(10);</span><br><span class="hljs-comment">//        int i = ac3.incrementAndGet();</span><br><span class="hljs-comment">//        System.out.println(i);//è‡ªå¢åçš„å€¼</span><br><span class="hljs-comment">//        System.out.println(ac3.get());</span><br><br><span class="hljs-comment">//        AtomicInteger ac4 = new AtomicInteger(10);</span><br><span class="hljs-comment">//        int i = ac4.addAndGet(20);</span><br><span class="hljs-comment">//        System.out.println(i);</span><br><span class="hljs-comment">//        System.out.println(ac4.get());</span><br><br>        <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">ac5</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">100</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">andSet</span> <span class="hljs-operator">=</span> ac5.getAndSet(<span class="hljs-number">20</span>);<br>        System.out.println(andSet);<br>        System.out.println(ac5.get());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-7-AtomicInteger-å†…å­˜è§£æ"><a href="#2-7-AtomicInteger-å†…å­˜è§£æ" class="headerlink" title="2.7 AtomicInteger-å†…å­˜è§£æ"></a>2.7 AtomicInteger-å†…å­˜è§£æ</h3><p><strong>AtomicIntegeråŸç† :</strong> è‡ªæ—‹é”  + CAS ç®—æ³•</p><p><strong>CASç®—æ³•ï¼š</strong></p><pre><code class="hljs">æœ‰3ä¸ªæ“ä½œæ•°ï¼ˆå†…å­˜å€¼Vï¼Œ æ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„å€¼Bï¼‰å½“æ—§çš„é¢„æœŸå€¼A == å†…å­˜å€¼   æ­¤æ—¶ä¿®æ”¹æˆåŠŸï¼Œå°†Væ”¹ä¸ºB                 å½“æ—§çš„é¢„æœŸå€¼Aï¼=å†…å­˜å€¼   æ­¤æ—¶ä¿®æ”¹å¤±è´¥ï¼Œä¸åšä»»ä½•æ“ä½œ                 å¹¶é‡æ–°è·å–ç°åœ¨çš„æœ€æ–°å€¼ï¼ˆè¿™ä¸ªé‡æ–°è·å–çš„åŠ¨ä½œå°±æ˜¯è‡ªæ—‹ï¼‰</code></pre><h3 id="2-8-AtomicInteger-æºç è§£æ"><a href="#2-8-AtomicInteger-æºç è§£æ" class="headerlink" title="2.8 AtomicInteger-æºç è§£æ"></a>2.8 AtomicInteger-æºç è§£æ</h3><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.threadatom4;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AtomDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyAtomThread</span> <span class="hljs-variable">atom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAtomThread</span>();<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(atom).start();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.threadatom4;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicInteger;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAtomThread</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-comment">//private volatile int count = 0; //é€å†°æ·‡æ·‹çš„æ•°é‡</span><br>    <span class="hljs-comment">//private Object lock = new Object();</span><br>    <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">ac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-comment">//1,ä»å…±äº«æ•°æ®ä¸­è¯»å–æ•°æ®åˆ°æœ¬çº¿ç¨‹æ ˆä¸­.</span><br>            <span class="hljs-comment">//2,ä¿®æ”¹æœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼</span><br>            <span class="hljs-comment">//3,ä¼šæŠŠæœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®.</span><br>            <span class="hljs-comment">//synchronized (lock) &#123;</span><br><span class="hljs-comment">//                count++;</span><br><span class="hljs-comment">//                ac++;</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> ac.incrementAndGet();<br>            System.out.println(<span class="hljs-string">&quot;å·²ç»é€äº†&quot;</span> + count + <span class="hljs-string">&quot;ä¸ªå†°æ·‡æ·‹&quot;</span>);<br>           <span class="hljs-comment">// &#125;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>æºç è§£æ :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-comment">//å…ˆè‡ªå¢ï¼Œç„¶åè·å–è‡ªå¢åçš„ç»“æœ</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">incrementAndGet</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//+ 1 è‡ªå¢åçš„ç»“æœ</span><br>        <span class="hljs-comment">//this å°±è¡¨ç¤ºå½“å‰çš„atomicIntegerï¼ˆå€¼ï¼‰</span><br>        <span class="hljs-comment">//1    è‡ªå¢ä¸€æ¬¡</span><br>        <span class="hljs-keyword">return</span> U.getAndAddInt(<span class="hljs-built_in">this</span>, VALUE, <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAndAddInt</span><span class="hljs-params">(Object o, <span class="hljs-type">long</span> offset, <span class="hljs-type">int</span> delta)</span> &#123;<br>        <span class="hljs-comment">//v æ—§å€¼</span><br>        <span class="hljs-type">int</span> v;<br>        <span class="hljs-comment">//è‡ªæ—‹çš„è¿‡ç¨‹</span><br>        <span class="hljs-keyword">do</span> &#123;<br>            <span class="hljs-comment">//ä¸æ–­çš„è·å–æ—§å€¼</span><br>            v = getIntVolatile(o, offset);<br>            <span class="hljs-comment">//å¦‚æœè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¸ºfalseï¼Œé‚£ä¹ˆç»§ç»­è‡ªæ—‹</span><br>            <span class="hljs-comment">//å¦‚æœè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¸ºtrueï¼Œé‚£ä¹ˆè‡ªæ—‹ç»“æŸ</span><br>            <span class="hljs-comment">//o è¡¨ç¤ºçš„å°±æ˜¯å†…å­˜å€¼</span><br>            <span class="hljs-comment">//v æ—§å€¼</span><br>            <span class="hljs-comment">//v + delta ä¿®æ”¹åçš„å€¼</span><br>        &#125; <span class="hljs-keyword">while</span> (!weakCompareAndSetInt(o, offset, v, v + delta));<br>            <span class="hljs-comment">//ä½œç”¨ï¼šæ¯”è¾ƒå†…å­˜ä¸­çš„å€¼ï¼Œæ—§å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰å°±æŠŠä¿®æ”¹åçš„å€¼å†™åˆ°å†…å­˜ä¸­ï¼Œè¿”å›trueã€‚è¡¨ç¤ºä¿®æ”¹æˆåŠŸã€‚</span><br>            <span class="hljs-comment">//                                 å¦‚æœä¸ç›¸ç­‰ï¼Œæ— æ³•æŠŠä¿®æ”¹åçš„å€¼å†™åˆ°å†…å­˜ä¸­ï¼Œè¿”å›falseã€‚è¡¨ç¤ºä¿®æ”¹å¤±è´¥ã€‚</span><br>            <span class="hljs-comment">//å¦‚æœä¿®æ”¹å¤±è´¥ï¼Œé‚£ä¹ˆç»§ç»­è‡ªæ—‹ã€‚</span><br>        <span class="hljs-keyword">return</span> v;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-9-æ‚²è§‚é”å’Œä¹è§‚é”"><a href="#2-9-æ‚²è§‚é”å’Œä¹è§‚é”" class="headerlink" title="2.9 æ‚²è§‚é”å’Œä¹è§‚é”"></a>2.9 æ‚²è§‚é”å’Œä¹è§‚é”</h3><p><strong>synchronizedå’ŒCASçš„åŒºåˆ« :</strong> </p><p><strong>ç›¸åŒç‚¹ï¼š</strong>åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥ä¿è¯å…±äº«æ•°æ®çš„å®‰å…¨æ€§ã€‚</p><p><strong>ä¸åŒç‚¹ï¼š</strong>synchronizedæ€»æ˜¯ä»æœ€åçš„è§’åº¦å‡ºå‘ï¼Œè®¤ä¸ºæ¯æ¬¡è·å–æ•°æ®çš„æ—¶å€™ï¼Œåˆ«äººéƒ½æœ‰å¯èƒ½ä¿®æ”¹ã€‚æ‰€ä»¥åœ¨æ¯                       æ¬¡æ“ä½œå…±äº«æ•°æ®ä¹‹å‰ï¼Œéƒ½ä¼šä¸Šé”ã€‚ï¼ˆæ‚²è§‚é”ï¼‰</p><pre><code class="hljs">casæ˜¯ä»ä¹è§‚çš„è§’åº¦å‡ºå‘ï¼Œå‡è®¾æ¯æ¬¡è·å–æ•°æ®åˆ«äººéƒ½ä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ã€‚åªä¸è¿‡åœ¨ä¿®æ”¹å…±äº«æ•°æ®çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥ä¸€ä¸‹ï¼Œåˆ«äººæœ‰æ²¡æœ‰ä¿®æ”¹è¿‡è¿™ä¸ªæ•°æ®ã€‚å¦‚æœåˆ«äººä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆæˆ‘å†æ¬¡è·å–ç°åœ¨æœ€æ–°çš„å€¼ã€‚             å¦‚æœåˆ«äººæ²¡æœ‰ä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆæˆ‘ç°åœ¨ç›´æ¥ä¿®æ”¹å…±äº«æ•°æ®çš„å€¼.(ä¹è§‚é”ï¼‰</code></pre><h2 id="3-å¹¶å‘å·¥å…·ç±»"><a href="#3-å¹¶å‘å·¥å…·ç±»" class="headerlink" title="3. å¹¶å‘å·¥å…·ç±»"></a>3. å¹¶å‘å·¥å…·ç±»</h2><h3 id="3-1-å¹¶å‘å·¥å…·ç±»-Hashtable"><a href="#3-1-å¹¶å‘å·¥å…·ç±»-Hashtable" class="headerlink" title="3.1 å¹¶å‘å·¥å…·ç±»-Hashtable"></a>3.1 å¹¶å‘å·¥å…·ç±»-Hashtable</h3><pre><code class="hljs">**Hashtableå‡ºç°çš„åŸå›  :** åœ¨é›†åˆç±»ä¸­HashMapæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„é›†åˆå¯¹è±¡ï¼Œä½†æ˜¯HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„(å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜)ã€‚ä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨æ€§æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashtableï¼Œä½†æ˜¯Hashtableçš„æ•ˆç‡ä½ä¸‹ã€‚</code></pre><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mymap;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Hashtable;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHashtableDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        Hashtable&lt;String, String&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hashtable</span>&lt;&gt;();<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">25</span>; i++) &#123;<br>                hm.put(i + <span class="hljs-string">&quot;&quot;</span>, i + <span class="hljs-string">&quot;&quot;</span>);<br>            &#125;<br>        &#125;);<br><br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">25</span>; i &lt; <span class="hljs-number">51</span>; i++) &#123;<br>                hm.put(i + <span class="hljs-string">&quot;&quot;</span>, i + <span class="hljs-string">&quot;&quot;</span>);<br>            &#125;<br>        &#125;);<br><br>        t1.start();<br>        t2.start();<br><br>        System.out.println(<span class="hljs-string">&quot;----------------------------&quot;</span>);<br>        <span class="hljs-comment">//ä¸ºäº†t1å’Œt2èƒ½æŠŠæ•°æ®å…¨éƒ¨æ·»åŠ å®Œæ¯•</span><br>        Thread.sleep(<span class="hljs-number">1000</span>);<br><br>        <span class="hljs-comment">//0-0 1-1 ..... 50- 50</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">51</span>; i++) &#123;<br>            System.out.println(hm.get(i + <span class="hljs-string">&quot;&quot;</span>));<br>        &#125;<span class="hljs-comment">//0 1 2 3 .... 50</span><br><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-2-å¹¶å‘å·¥å…·ç±»-ConcurrentHashMapåŸºæœ¬ä½¿ç”¨"><a href="#3-2-å¹¶å‘å·¥å…·ç±»-ConcurrentHashMapåŸºæœ¬ä½¿ç”¨" class="headerlink" title="3.2 å¹¶å‘å·¥å…·ç±»-ConcurrentHashMapåŸºæœ¬ä½¿ç”¨"></a>3.2 å¹¶å‘å·¥å…·ç±»-ConcurrentHashMapåŸºæœ¬ä½¿ç”¨</h3><pre><code class="hljs">**ConcurrentHashMapå‡ºç°çš„åŸå›  :** åœ¨é›†åˆç±»ä¸­HashMapæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„é›†åˆå¯¹è±¡ï¼Œä½†æ˜¯HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„(å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜)ã€‚ä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨æ€§æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashtableï¼Œä½†æ˜¯Hashtableçš„æ•ˆç‡ä½ä¸‹ã€‚</code></pre><p>åŸºäºä»¥ä¸Šä¸¤ä¸ªåŸå› æˆ‘ä»¬å¯ä»¥ä½¿ç”¨JDK1.5ä»¥åæ‰€æä¾›çš„ConcurrentHashMapã€‚</p><p><strong>ä½“ç³»ç»“æ„ :</strong> </p><p><img src="https://pic1.imgdb.cn/item/623e9bf627f86abb2aee624a.png" alt="1591168965857"></p><p><strong>æ€»ç»“ :</strong> </p><pre><code class="hljs">1 ï¼ŒHashMapæ˜¯çº¿ç¨‹&lt;font color=&#39;red&#39;&gt;ä¸å®‰å…¨&lt;/font&gt;çš„ã€‚å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šæœ‰&lt;font color=&#39;cornflowerblue&#39;&gt;æ•°æ®å®‰å…¨é—®é¢˜&lt;/font&gt;2 ï¼ŒHashtableæ˜¯çº¿ç¨‹&lt;font color=&#39;red&#39;&gt;å®‰å…¨&lt;/font&gt;çš„ï¼Œä½†æ˜¯ä¼šå°†æ•´å¼ è¡¨é”èµ·æ¥ï¼Œ&lt;font color=&#39;cornflowerblue&#39;&gt;æ•ˆç‡ä½&lt;/font&gt;ä¸‹3ï¼ŒConcurrentHashMapä¹Ÿæ˜¯&lt;font color=&#39;red&#39;&gt;çº¿ç¨‹å®‰å…¨&lt;/font&gt;çš„ï¼Œ&lt;font color=&#39;cornflowerblue&#39;&gt;æ•ˆç‡è¾ƒé«˜&lt;/font&gt;ã€‚     åœ¨JDK7å’ŒJDK8ä¸­ï¼Œåº•å±‚åŸç†ä¸ä¸€æ ·ã€‚</code></pre><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mymap;<br><br><span class="hljs-keyword">import</span> java.util.Hashtable;<br><span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConcurrentHashMapDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        ConcurrentHashMap&lt;String, String&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">100</span>);<br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">25</span>; i++) &#123;<br>                hm.put(i + <span class="hljs-string">&quot;&quot;</span>, i + <span class="hljs-string">&quot;&quot;</span>);<br>            &#125;<br>        &#125;);<br><br><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">25</span>; i &lt; <span class="hljs-number">51</span>; i++) &#123;<br>                hm.put(i + <span class="hljs-string">&quot;&quot;</span>, i + <span class="hljs-string">&quot;&quot;</span>);<br>            &#125;<br>        &#125;);<br><br>        t1.start();<br>        t2.start();<br><br>        System.out.println(<span class="hljs-string">&quot;----------------------------&quot;</span>);<br>        <span class="hljs-comment">//ä¸ºäº†t1å’Œt2èƒ½æŠŠæ•°æ®å…¨éƒ¨æ·»åŠ å®Œæ¯•</span><br>        Thread.sleep(<span class="hljs-number">1000</span>);<br><br>        <span class="hljs-comment">//0-0 1-1 ..... 50- 50</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">51</span>; i++) &#123;<br>            System.out.println(hm.get(i + <span class="hljs-string">&quot;&quot;</span>));<br>        &#125;<span class="hljs-comment">//0 1 2 3 .... 50</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-3-å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1-7åŸç†"><a href="#3-3-å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1-7åŸç†" class="headerlink" title="3.3 å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1.7åŸç†"></a>3.3 å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1.7åŸç†</h3><p><img src="https://pic1.imgdb.cn/item/623e9bf627f86abb2aee625e.png" alt="1591169254280"></p><h3 id="3-4-å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1-8åŸç†"><a href="#3-4-å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1-8åŸç†" class="headerlink" title="3.4 å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1.8åŸç†"></a>3.4 å¹¶å‘å·¥å…·ç±»-ConcurrentHashMap1.8åŸç†</h3><p><img src="https://pic1.imgdb.cn/item/623e9bf627f86abb2aee6270.png" alt="1591169338256"></p><p><strong>æ€»ç»“ :</strong> </p><pre><code class="hljs">1ï¼Œå¦‚æœä½¿ç”¨ç©ºå‚æ„é€ åˆ›å»ºConcurrentHashMapå¯¹è±¡ï¼Œåˆ™ä»€ä¹ˆäº‹æƒ…éƒ½ä¸åšã€‚     åœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™åˆ›å»ºå“ˆå¸Œè¡¨2ï¼Œè®¡ç®—å½“å‰å…ƒç´ åº”å­˜å…¥çš„ç´¢å¼•ã€‚3ï¼Œå¦‚æœè¯¥ç´¢å¼•ä½ç½®ä¸ºnullï¼Œåˆ™åˆ©ç”¨casç®—æ³•ï¼Œå°†æœ¬ç»“ç‚¹æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚4ï¼Œå¦‚æœè¯¥ç´¢å¼•ä½ç½®ä¸ä¸ºnullï¼Œåˆ™åˆ©ç”¨volatileå…³é”®å­—è·å¾—å½“å‰ä½ç½®æœ€æ–°çš„ç»“ç‚¹åœ°å€ï¼ŒæŒ‚åœ¨ä»–ä¸‹é¢ï¼Œå˜æˆé“¾è¡¨ã€‚        5ï¼Œå½“é“¾è¡¨çš„é•¿åº¦å¤§äºç­‰äº8æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢æˆçº¢é»‘æ ‘6ï¼Œä»¥é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘å¤´ç»“ç‚¹ä¸ºé”å¯¹è±¡ï¼Œé…åˆæ‚²è§‚é”ä¿è¯å¤šçº¿ç¨‹æ“ä½œé›†åˆæ—¶æ•°æ®çš„å®‰å…¨æ€§</code></pre><h3 id="3-5-å¹¶å‘å·¥å…·ç±»-CountDownLatch"><a href="#3-5-å¹¶å‘å·¥å…·ç±»-CountDownLatch" class="headerlink" title="3.5 å¹¶å‘å·¥å…·ç±»-CountDownLatch"></a>3.5 å¹¶å‘å·¥å…·ç±»-CountDownLatch</h3><p><strong>CountDownLatchç±» :</strong>         </p><table><thead><tr><th>æ–¹æ³•</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>public CountDownLatch(int count)</td><td>å‚æ•°ä¼ é€’çº¿ç¨‹æ•°ï¼Œè¡¨ç¤ºç­‰å¾…çº¿ç¨‹æ•°é‡</td></tr><tr><td>public void await()</td><td>è®©çº¿ç¨‹ç­‰å¾…</td></tr><tr><td>public void countDown()</td><td>å½“å‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td></tr></tbody></table><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> è®©æŸä¸€æ¡çº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åå†æ‰§è¡Œ</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mycountdownlatch;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.CountDownLatch;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChileThread1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br><br>    <span class="hljs-keyword">private</span> CountDownLatch countDownLatch;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ChileThread1</span><span class="hljs-params">(CountDownLatch countDownLatch)</span> &#123;<br>        <span class="hljs-built_in">this</span>.countDownLatch = countDownLatch;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//1.åƒé¥ºå­</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>            System.out.println(getName() + <span class="hljs-string">&quot;åœ¨åƒç¬¬&quot;</span> + i + <span class="hljs-string">&quot;ä¸ªé¥ºå­&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//2.åƒå®Œè¯´ä¸€å£°</span><br>        <span class="hljs-comment">//æ¯ä¸€æ¬¡countDownæ–¹æ³•çš„æ—¶å€™ï¼Œå°±è®©è®¡æ•°å™¨-1</span><br>        countDownLatch.countDown();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mycountdownlatch;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.CountDownLatch;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChileThread2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br><br>    <span class="hljs-keyword">private</span> CountDownLatch countDownLatch;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ChileThread2</span><span class="hljs-params">(CountDownLatch countDownLatch)</span> &#123;<br>        <span class="hljs-built_in">this</span>.countDownLatch = countDownLatch;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//1.åƒé¥ºå­</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">15</span>; i++) &#123;<br>            System.out.println(getName() + <span class="hljs-string">&quot;åœ¨åƒç¬¬&quot;</span> + i + <span class="hljs-string">&quot;ä¸ªé¥ºå­&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//2.åƒå®Œè¯´ä¸€å£°</span><br>        <span class="hljs-comment">//æ¯ä¸€æ¬¡countDownæ–¹æ³•çš„æ—¶å€™ï¼Œå°±è®©è®¡æ•°å™¨-1</span><br>        countDownLatch.countDown();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mycountdownlatch;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.CountDownLatch;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChileThread3</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br><br>    <span class="hljs-keyword">private</span> CountDownLatch countDownLatch;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ChileThread3</span><span class="hljs-params">(CountDownLatch countDownLatch)</span> &#123;<br>        <span class="hljs-built_in">this</span>.countDownLatch = countDownLatch;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//1.åƒé¥ºå­</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">20</span>; i++) &#123;<br>            System.out.println(getName() + <span class="hljs-string">&quot;åœ¨åƒç¬¬&quot;</span> + i + <span class="hljs-string">&quot;ä¸ªé¥ºå­&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//2.åƒå®Œè¯´ä¸€å£°</span><br>        <span class="hljs-comment">//æ¯ä¸€æ¬¡countDownæ–¹æ³•çš„æ—¶å€™ï¼Œå°±è®©è®¡æ•°å™¨-1</span><br>        countDownLatch.countDown();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mycountdownlatch;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.CountDownLatch;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MotherThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> &#123;<br>    <span class="hljs-keyword">private</span> CountDownLatch countDownLatch;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MotherThread</span><span class="hljs-params">(CountDownLatch countDownLatch)</span> &#123;<br>        <span class="hljs-built_in">this</span>.countDownLatch = countDownLatch;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//1.ç­‰å¾…</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//å½“è®¡æ•°å™¨å˜æˆ0çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å”¤é†’è¿™é‡Œç­‰å¾…çš„çº¿ç¨‹ã€‚</span><br>            countDownLatch.await();<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-comment">//2.æ”¶æ‹¾ç¢—ç­·</span><br>        System.out.println(<span class="hljs-string">&quot;å¦ˆå¦ˆåœ¨æ”¶æ‹¾ç¢—ç­·&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mycountdownlatch;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.CountDownLatch;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCountDownLatchDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//1.åˆ›å»ºCountDownLatchçš„å¯¹è±¡ï¼Œéœ€è¦ä¼ é€’ç»™å››ä¸ªçº¿ç¨‹ã€‚</span><br>        <span class="hljs-comment">//åœ¨åº•å±‚å°±å®šä¹‰äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ­¤æ—¶è®¡æ•°å™¨çš„å€¼å°±æ˜¯3</span><br>        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">countDownLatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">3</span>);<br>        <span class="hljs-comment">//2.åˆ›å»ºå››ä¸ªçº¿ç¨‹å¯¹è±¡å¹¶å¼€å¯ä»–ä»¬ã€‚</span><br>        <span class="hljs-type">MotherThread</span> <span class="hljs-variable">motherThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MotherThread</span>(countDownLatch);<br>        motherThread.start();<br><br>        <span class="hljs-type">ChileThread1</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChileThread1</span>(countDownLatch);<br>        t1.setName(<span class="hljs-string">&quot;å°æ˜&quot;</span>);<br><br>        <span class="hljs-type">ChileThread2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChileThread2</span>(countDownLatch);<br>        t2.setName(<span class="hljs-string">&quot;å°çº¢&quot;</span>);<br><br>        <span class="hljs-type">ChileThread3</span> <span class="hljs-variable">t3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChileThread3</span>(countDownLatch);<br>        t3.setName(<span class="hljs-string">&quot;å°åˆš&quot;</span>);<br><br>        t1.start();<br>        t2.start();<br>        t3.start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€»ç»“ :</strong> </p><pre><code class="hljs">1. CountDownLatch(int count)ï¼šå‚æ•°å†™ç­‰å¾…çº¿ç¨‹çš„æ•°é‡ã€‚å¹¶å®šä¹‰äº†ä¸€ä¸ªè®¡æ•°å™¨ã€‚2. await()ï¼šè®©çº¿ç¨‹ç­‰å¾…ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œä¼šå”¤é†’ç­‰å¾…çš„çº¿ç¨‹3. countDown()ï¼š çº¿ç¨‹æ‰§è¡Œå®Œæ¯•æ—¶è°ƒç”¨ï¼Œä¼šå°†è®¡æ•°å™¨-1ã€‚</code></pre><h3 id="3-6-å¹¶å‘å·¥å…·ç±»-Semaphore"><a href="#3-6-å¹¶å‘å·¥å…·ç±»-Semaphore" class="headerlink" title="3.6 å¹¶å‘å·¥å…·ç±»-Semaphore"></a>3.6 å¹¶å‘å·¥å…·ç±»-Semaphore</h3><p><strong>ä½¿ç”¨åœºæ™¯ :</strong> </p><pre><code class="hljs">å¯ä»¥æ§åˆ¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚</code></pre><p><strong>å®ç°æ­¥éª¤ :</strong> </p><pre><code class="hljs">1ï¼Œéœ€è¦æœ‰äººç®¡ç†è¿™ä¸ªé€šé“2ï¼Œå½“æœ‰è½¦è¿›æ¥äº†ï¼Œå‘é€šè¡Œè®¸å¯è¯3ï¼Œå½“è½¦å‡ºå»äº†ï¼Œæ”¶å›é€šè¡Œè®¸å¯è¯4ï¼Œå¦‚æœé€šè¡Œè®¸å¯è¯å‘å®Œäº†ï¼Œé‚£ä¹ˆå…¶ä»–è½¦è¾†åªèƒ½ç­‰ç€</code></pre><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mysemaphore;<br><br><span class="hljs-keyword">import</span> java.util.concurrent.Semaphore;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> &#123;<br>    <span class="hljs-comment">//1.è·å¾—ç®¡ç†å‘˜å¯¹è±¡ï¼Œ</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Semaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Semaphore</span>(<span class="hljs-number">2</span>);<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//2.è·å¾—é€šè¡Œè¯</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            semaphore.acquire();<br>            <span class="hljs-comment">//3.å¼€å§‹è¡Œé©¶</span><br>            System.out.println(<span class="hljs-string">&quot;è·å¾—äº†é€šè¡Œè¯å¼€å§‹è¡Œé©¶&quot;</span>);<br>            Thread.sleep(<span class="hljs-number">2000</span>);<br>            System.out.println(<span class="hljs-string">&quot;å½’è¿˜é€šè¡Œè¯&quot;</span>);<br>            <span class="hljs-comment">//4.å½’è¿˜é€šè¡Œè¯</span><br>            semaphore.release();<br>        &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.mysemaphore;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MySemaphoreDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyRunnable</span> <span class="hljs-variable">mr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr).start();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å¤šçº¿ç¨‹ğŸ¤·â€â™‚ï¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤šçº¿ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å­—ç¬¦æµ</title>
    <link href="/Hexo/2021/03/29/IO%E6%B5%8102/"/>
    <url>/Hexo/2021/03/29/IO%E6%B5%8102/</url>
    
    <content type="html"><![CDATA[<h2 id="1-å­—ç¬¦æµ"><a href="#1-å­—ç¬¦æµ" class="headerlink" title="1.å­—ç¬¦æµ"></a>1.å­—ç¬¦æµ</h2><h3 id="1-1ä¸ºä»€ä¹ˆä¼šå‡ºç°å­—ç¬¦æµã€ç†è§£ã€‘"><a href="#1-1ä¸ºä»€ä¹ˆä¼šå‡ºç°å­—ç¬¦æµã€ç†è§£ã€‘" class="headerlink" title="1.1ä¸ºä»€ä¹ˆä¼šå‡ºç°å­—ç¬¦æµã€ç†è§£ã€‘"></a>1.1ä¸ºä»€ä¹ˆä¼šå‡ºç°å­—ç¬¦æµã€ç†è§£ã€‘</h3><ul><li><p>å­—ç¬¦æµçš„ä»‹ç»</p><p>ç”±äºå­—èŠ‚æµæ“ä½œä¸­æ–‡ä¸æ˜¯ç‰¹åˆ«çš„æ–¹ä¾¿ï¼Œæ‰€ä»¥Javaå°±æä¾›å­—ç¬¦æµ</p><p>å­—ç¬¦æµ &#x3D; å­—èŠ‚æµ + ç¼–ç è¡¨</p></li><li><p>ä¸­æ–‡çš„å­—èŠ‚å­˜å‚¨æ–¹å¼</p><p>ç”¨å­—èŠ‚æµå¤åˆ¶æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œæ–‡æœ¬æ–‡ä»¶ä¹Ÿä¼šæœ‰ä¸­æ–‡ï¼Œä½†æ˜¯æ²¡æœ‰é—®é¢˜ï¼ŒåŸå› æ˜¯æœ€ç»ˆåº•å±‚æ“ä½œä¼šè‡ªåŠ¨è¿›è¡Œå­—èŠ‚æ‹¼æ¥æˆä¸­æ–‡ï¼Œå¦‚ä½•è¯†åˆ«æ˜¯ä¸­æ–‡çš„å‘¢ï¼Ÿ</p><p>æ±‰å­—åœ¨å­˜å‚¨çš„æ—¶å€™ï¼Œæ— è®ºé€‰æ‹©å“ªç§ç¼–ç å­˜å‚¨ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚éƒ½æ˜¯è´Ÿæ•°</p></li></ul><h3 id="1-2ç¼–ç è¡¨ã€ç†è§£ã€‘"><a href="#1-2ç¼–ç è¡¨ã€ç†è§£ã€‘" class="headerlink" title="1.2ç¼–ç è¡¨ã€ç†è§£ã€‘"></a>1.2ç¼–ç è¡¨ã€ç†è§£ã€‘</h3><ul><li><p>ä»€ä¹ˆæ˜¯å­—ç¬¦é›†</p><p>æ˜¯ä¸€ä¸ªç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰å­—ç¬¦çš„é›†åˆï¼ŒåŒ…æ‹¬å„å›½å®¶æ–‡å­—ã€æ ‡ç‚¹ç¬¦å·ã€å›¾å½¢ç¬¦å·ã€æ•°å­—ç­‰</p><p>lè®¡ç®—æœºè¦å‡†ç¡®çš„å­˜å‚¨å’Œè¯†åˆ«å„ç§å­—ç¬¦é›†ç¬¦å·ï¼Œå°±éœ€è¦è¿›è¡Œå­—ç¬¦ç¼–ç ï¼Œä¸€å¥—å­—ç¬¦é›†å¿…ç„¶è‡³å°‘æœ‰ä¸€å¥—å­—ç¬¦ç¼–ç ã€‚å¸¸è§å­—ç¬¦é›†æœ‰ASCIIå­—ç¬¦é›†ã€GBXXXå­—ç¬¦é›†ã€Unicodeå­—ç¬¦é›†ç­‰</p></li><li><p>å¸¸è§çš„å­—ç¬¦é›†</p><ul><li><p>ASCIIå­—ç¬¦é›†ï¼š</p><p>lASCIIï¼šæ˜¯åŸºäºæ‹‰ä¸å­—æ¯çš„ä¸€å¥—ç”µè„‘ç¼–ç ç³»ç»Ÿï¼Œç”¨äºæ˜¾ç¤ºç°ä»£è‹±è¯­ï¼Œä¸»è¦åŒ…æ‹¬æ§åˆ¶å­—ç¬¦(å›è½¦é”®ã€é€€æ ¼ã€æ¢è¡Œé”®ç­‰)å’Œå¯æ˜¾ç¤ºå­—ç¬¦(è‹±æ–‡å¤§å°å†™å­—ç¬¦ã€é˜¿æ‹‰ä¼¯æ•°å­—å’Œè¥¿æ–‡ç¬¦å·) </p><p>åŸºæœ¬çš„ASCIIå­—ç¬¦é›†ï¼Œä½¿ç”¨7ä½è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±128å­—ç¬¦ã€‚ASCIIçš„æ‰©å±•å­—ç¬¦é›†ä½¿ç”¨8ä½è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±256å­—ç¬¦ï¼Œæ–¹ä¾¿æ”¯æŒæ¬§æ´²å¸¸ç”¨å­—ç¬¦ã€‚æ˜¯ä¸€ä¸ªç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰å­—ç¬¦çš„é›†åˆï¼ŒåŒ…æ‹¬å„å›½å®¶æ–‡å­—ã€æ ‡ç‚¹ç¬¦å·ã€å›¾å½¢ç¬¦å·ã€æ•°å­—ç­‰</p></li><li><p>GBXXXå­—ç¬¦é›†ï¼š</p><p>GBKï¼šæœ€å¸¸ç”¨çš„ä¸­æ–‡ç è¡¨ã€‚æ˜¯åœ¨GB2312æ ‡å‡†åŸºç¡€ä¸Šçš„æ‰©å±•è§„èŒƒï¼Œä½¿ç”¨äº†åŒå­—èŠ‚ç¼–ç æ–¹æ¡ˆï¼Œå…±æ”¶å½•äº†21003ä¸ªæ±‰å­—ï¼Œå®Œå…¨å…¼å®¹GB2312æ ‡å‡†ï¼ŒåŒæ—¶æ”¯æŒç¹ä½“æ±‰å­—ä»¥åŠæ—¥éŸ©æ±‰å­—ç­‰</p></li><li><p>Unicodeå­—ç¬¦é›†ï¼š</p><p>UTF-8ç¼–ç ï¼šå¯ä»¥ç”¨æ¥è¡¨ç¤ºUnicodeæ ‡å‡†ä¸­ä»»æ„å­—ç¬¦ï¼Œå®ƒæ˜¯ç”µå­é‚®ä»¶ã€ç½‘é¡µåŠå…¶ä»–å­˜å‚¨æˆ–ä¼ é€æ–‡å­—çš„åº”ç”¨ ä¸­ï¼Œä¼˜å…ˆé‡‡ç”¨çš„ç¼–ç ã€‚äº’è”ç½‘å·¥ç¨‹å·¥ä½œå°ç»„ï¼ˆIETFï¼‰è¦æ±‚æ‰€æœ‰äº’è”ç½‘åè®®éƒ½å¿…é¡»æ”¯æŒUTF-8ç¼–ç ã€‚å®ƒä½¿ç”¨ä¸€è‡³å››ä¸ªå­—èŠ‚ä¸ºæ¯ä¸ªå­—ç¬¦ç¼–ç </p><p>ç¼–ç è§„åˆ™ï¼š </p><p>  128ä¸ªUS-ASCIIå­—ç¬¦ï¼Œåªéœ€ä¸€ä¸ªå­—èŠ‚ç¼–ç </p><p>  æ‹‰ä¸æ–‡ç­‰å­—ç¬¦ï¼Œéœ€è¦äºŒä¸ªå­—èŠ‚ç¼–ç </p><p>  å¤§éƒ¨åˆ†å¸¸ç”¨å­—ï¼ˆå«ä¸­æ–‡ï¼‰ï¼Œä½¿ç”¨ä¸‰ä¸ªå­—èŠ‚ç¼–ç </p><p>  å…¶ä»–æå°‘ä½¿ç”¨çš„Unicodeè¾…åŠ©å­—ç¬¦ï¼Œä½¿ç”¨å››å­—èŠ‚ç¼–ç </p></li></ul></li></ul><h3 id="1-3å­—ç¬¦ä¸²ä¸­çš„ç¼–ç è§£ç é—®é¢˜ã€åº”ç”¨ã€‘"><a href="#1-3å­—ç¬¦ä¸²ä¸­çš„ç¼–ç è§£ç é—®é¢˜ã€åº”ç”¨ã€‘" class="headerlink" title="1.3å­—ç¬¦ä¸²ä¸­çš„ç¼–ç è§£ç é—®é¢˜ã€åº”ç”¨ã€‘"></a>1.3å­—ç¬¦ä¸²ä¸­çš„ç¼–ç è§£ç é—®é¢˜ã€åº”ç”¨ã€‘</h3><ul><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>byte[] getBytes()</td><td>ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†å°†è¯¥ Stringç¼–ç ä¸ºä¸€ç³»åˆ—å­—èŠ‚</td></tr><tr><td>byte[] getBytes(String charsetName)</td><td>ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†è¯¥ Stringç¼–ç ä¸ºä¸€ç³»åˆ—å­—èŠ‚</td></tr><tr><td>String(byte[] bytes)</td><td>ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†è§£ç æŒ‡å®šçš„å­—èŠ‚æ•°ç»„æ¥åˆ›å»ºå­—ç¬¦ä¸²</td></tr><tr><td>String(byte[] bytes, String charsetName)</td><td>é€šè¿‡æŒ‡å®šçš„å­—ç¬¦é›†è§£ç æŒ‡å®šçš„å­—èŠ‚æ•°ç»„æ¥åˆ›å»ºå­—ç¬¦ä¸²</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> UnsupportedEncodingException &#123;<br>        <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ä¸­å›½&quot;</span>;<br><br>        <span class="hljs-comment">//byte[] bys = s.getBytes(); //[-28, -72, -83, -27, -101, -67]</span><br>        <span class="hljs-comment">//byte[] bys = s.getBytes(&quot;UTF-8&quot;); //[-28, -72, -83, -27, -101, -67]</span><br>        <span class="hljs-type">byte</span>[] bys = s.getBytes(<span class="hljs-string">&quot;GBK&quot;</span>); <span class="hljs-comment">//[-42, -48, -71, -6]</span><br>        System.out.println(Arrays.toString(bys));<br><br>        <span class="hljs-comment">//String ss = new String(bys);</span><br>        <span class="hljs-comment">//String ss = new String(bys,&quot;UTF-8&quot;);</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bys,<span class="hljs-string">&quot;GBK&quot;</span>);<br>        System.out.println(ss);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-4å­—ç¬¦æµå†™æ•°æ®ã€åº”ç”¨ã€‘"><a href="#1-4å­—ç¬¦æµå†™æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="1.4å­—ç¬¦æµå†™æ•°æ®ã€åº”ç”¨ã€‘"></a>1.4å­—ç¬¦æµå†™æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>ä»‹ç»</p><p>Writer: ç”¨äºå†™å…¥å­—ç¬¦æµçš„æŠ½è±¡çˆ¶ç±»</p><p>FileWriter: ç”¨äºå†™å…¥å­—ç¬¦æµçš„å¸¸ç”¨å­ç±»</p></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>FileWriter(File file)</td><td>æ ¹æ®ç»™å®šçš„ File å¯¹è±¡æ„é€ ä¸€ä¸ª FileWriter å¯¹è±¡</td></tr><tr><td>FileWriter(File file, boolean append)</td><td>æ ¹æ®ç»™å®šçš„ File å¯¹è±¡æ„é€ ä¸€ä¸ª FileWriter å¯¹è±¡</td></tr><tr><td>FileWriter(String fileName)</td><td>æ ¹æ®ç»™å®šçš„æ–‡ä»¶åæ„é€ ä¸€ä¸ª FileWriter å¯¹è±¡</td></tr><tr><td>FileWriter(String fileName, boolean append)</td><td>æ ¹æ®ç»™å®šçš„æ–‡ä»¶åä»¥åŠæŒ‡ç¤ºæ˜¯å¦é™„åŠ å†™å…¥æ•°æ®çš„ boolean å€¼æ¥æ„é€  FileWriter å¯¹è±¡</td></tr></tbody></table></li><li><p>æˆå‘˜æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void   write(int c)</td><td>å†™ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>void   write(char[] cbuf)</td><td>å†™å…¥ä¸€ä¸ªå­—ç¬¦æ•°ç»„</td></tr><tr><td>void write(char[] cbuf, int off, int len)</td><td>å†™å…¥å­—ç¬¦æ•°ç»„çš„ä¸€éƒ¨åˆ†</td></tr><tr><td>void write(String str)</td><td>å†™ä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td>void write(String str, int off, int len)</td><td>å†™ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†</td></tr></tbody></table></li><li><p>åˆ·æ–°å’Œå…³é—­çš„æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>flush()</td><td>åˆ·æ–°æµï¼Œä¹‹åè¿˜å¯ä»¥ç»§ç»­å†™æ•°æ®</td></tr><tr><td>close()</td><td>å…³é—­æµï¼Œé‡Šæ”¾èµ„æºï¼Œä½†æ˜¯åœ¨å…³é—­ä¹‹å‰ä¼šå…ˆåˆ·æ–°æµã€‚ä¸€æ—¦å…³é—­ï¼Œå°±ä¸èƒ½å†å†™æ•°æ®</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OutputStreamWriterDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">FileWriter</span> <span class="hljs-variable">fw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;myCharStream\\a.txt&quot;</span>);<br><br>        <span class="hljs-comment">//void write(int c)ï¼šå†™ä¸€ä¸ªå­—ç¬¦</span><br><span class="hljs-comment">//        fw.write(97);</span><br><span class="hljs-comment">//        fw.write(98);</span><br><span class="hljs-comment">//        fw.write(99);</span><br><br>        <span class="hljs-comment">//void writ(char[] cbuf)ï¼šå†™å…¥ä¸€ä¸ªå­—ç¬¦æ•°ç»„</span><br>        <span class="hljs-type">char</span>[] chs = &#123;<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>&#125;;<br><span class="hljs-comment">//        fw.write(chs);</span><br><br>        <span class="hljs-comment">//void write(char[] cbuf, int off, int len)ï¼šå†™å…¥å­—ç¬¦æ•°ç»„çš„ä¸€éƒ¨åˆ†</span><br><span class="hljs-comment">//        fw.write(chs, 0, chs.length);</span><br><span class="hljs-comment">//        fw.write(chs, 1, 3);</span><br><br>        <span class="hljs-comment">//void write(String str)ï¼šå†™ä¸€ä¸ªå­—ç¬¦ä¸²</span><br><span class="hljs-comment">//        fw.write(&quot;abcde&quot;);</span><br><br>        <span class="hljs-comment">//void write(String str, int off, int len)ï¼šå†™ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†</span><br><span class="hljs-comment">//        fw.write(&quot;abcde&quot;, 0, &quot;abcde&quot;.length());</span><br>        fw.write(<span class="hljs-string">&quot;abcde&quot;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>);<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        fw.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-5å­—ç¬¦æµè¯»æ•°æ®ã€åº”ç”¨ã€‘"><a href="#1-5å­—ç¬¦æµè¯»æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="1.5å­—ç¬¦æµè¯»æ•°æ®ã€åº”ç”¨ã€‘"></a>1.5å­—ç¬¦æµè¯»æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>ä»‹ç»</p><p>Reader: ç”¨äºè¯»å–å­—ç¬¦æµçš„æŠ½è±¡çˆ¶ç±»</p><p>FileReader: ç”¨äºè¯»å–å­—ç¬¦æµçš„å¸¸ç”¨å­ç±»</p></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>FileReader(File file)</td><td>åœ¨ç»™å®šä»ä¸­è¯»å–æ•°æ®çš„ File çš„æƒ…å†µä¸‹åˆ›å»ºä¸€ä¸ªæ–° FileReader</td></tr><tr><td>FileReader(String fileName)</td><td>åœ¨ç»™å®šä»ä¸­è¯»å–æ•°æ®çš„æ–‡ä»¶åçš„æƒ…å†µä¸‹åˆ›å»ºä¸€ä¸ªæ–° FileReader</td></tr></tbody></table></li></ul><ul><li><p>æˆå‘˜æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>int read()</td><td>ä¸€æ¬¡è¯»ä¸€ä¸ªå­—ç¬¦æ•°æ®</td></tr><tr><td>int read(char[] cbuf)</td><td>ä¸€æ¬¡è¯»ä¸€ä¸ªå­—ç¬¦æ•°ç»„æ•°æ®</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InputStreamReaderDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>   <br>        <span class="hljs-type">FileReader</span> <span class="hljs-variable">fr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;myCharStream\\b.txt&quot;</span>);<br><br>        <span class="hljs-comment">//int read()ï¼šä¸€æ¬¡è¯»ä¸€ä¸ªå­—ç¬¦æ•°æ®</span><br><span class="hljs-comment">//        int ch;</span><br><span class="hljs-comment">//        while ((ch=fr.read())!=-1) &#123;</span><br><span class="hljs-comment">//            System.out.print((char)ch);</span><br><span class="hljs-comment">//        &#125;</span><br><br>        <span class="hljs-comment">//int read(char[] cbuf)ï¼šä¸€æ¬¡è¯»ä¸€ä¸ªå­—ç¬¦æ•°ç»„æ•°æ®</span><br>        <span class="hljs-type">char</span>[] chs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span> ((len = fr.read(chs)) != -<span class="hljs-number">1</span>) &#123;<br>            System.out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(chs, <span class="hljs-number">0</span>, len));<br>        &#125;<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        fr.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-6å­—ç¬¦æµç”¨æˆ·æ³¨å†Œæ¡ˆä¾‹ã€åº”ç”¨ã€‘"><a href="#1-6å­—ç¬¦æµç”¨æˆ·æ³¨å†Œæ¡ˆä¾‹ã€åº”ç”¨ã€‘" class="headerlink" title="1.6å­—ç¬¦æµç”¨æˆ·æ³¨å†Œæ¡ˆä¾‹ã€åº”ç”¨ã€‘"></a>1.6å­—ç¬¦æµç”¨æˆ·æ³¨å†Œæ¡ˆä¾‹ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>å°†é”®ç›˜å½•å…¥çš„ç”¨æˆ·åå’Œå¯†ç ä¿å­˜åˆ°æœ¬åœ°å®ç°æ°¸ä¹…åŒ–å­˜å‚¨</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li>è·å–ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç </li><li>å°†ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç å†™å…¥åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</li><li>å…³æµ,é‡Šæ”¾èµ„æº</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CharStreamDemo8</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//éœ€æ±‚: å°†é”®ç›˜å½•å…¥çš„ç”¨æˆ·åå’Œå¯†ç ä¿å­˜åˆ°æœ¬åœ°å®ç°æ°¸ä¹…åŒ–å­˜å‚¨</span><br>        <span class="hljs-comment">//è¦æ±‚ï¼šç”¨æˆ·åç‹¬å ä¸€è¡Œï¼Œå¯†ç ç‹¬å ä¸€è¡Œ</span><br><br>        <span class="hljs-comment">//åˆ†æï¼š</span><br>        <span class="hljs-comment">//1ï¼Œå®ç°é”®ç›˜å½•å…¥ï¼ŒæŠŠç”¨æˆ·åå’Œå¯†ç å½•å…¥è¿›æ¥</span><br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        System.out.println(<span class="hljs-string">&quot;è¯·å½•å…¥ç”¨æˆ·å&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> sc.next();<br>        System.out.println(<span class="hljs-string">&quot;è¯·å½•å…¥å¯†ç &quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> sc.next();<br><br>        <span class="hljs-comment">//2.åˆ†åˆ«æŠŠç”¨æˆ·åå’Œå¯†ç å†™åˆ°æœ¬åœ°æ–‡ä»¶ã€‚</span><br>        <span class="hljs-type">FileWriter</span> <span class="hljs-variable">fw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;charstream\\a.txt&quot;</span>);<br>        <span class="hljs-comment">//å°†ç”¨æˆ·åå’Œå¯†ç å†™åˆ°æ–‡ä»¶ä¸­</span><br>        fw.write(username);<br>        <span class="hljs-comment">//è¡¨ç¤ºå†™å‡ºä¸€ä¸ªå›è½¦æ¢è¡Œç¬¦ windows \r\n  MacOS \r  Linux \n</span><br>        fw.write(<span class="hljs-string">&quot;\r\n&quot;</span>);<br>        fw.write(password);<br>        <span class="hljs-comment">//åˆ·æ–°æµ</span><br>        fw.flush();<br>        <span class="hljs-comment">//3.å…³æµ,é‡Šæ”¾èµ„æº</span><br>        fw.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-7å­—ç¬¦ç¼“å†²æµã€åº”ç”¨ã€‘"><a href="#1-7å­—ç¬¦ç¼“å†²æµã€åº”ç”¨ã€‘" class="headerlink" title="1.7å­—ç¬¦ç¼“å†²æµã€åº”ç”¨ã€‘"></a>1.7å­—ç¬¦ç¼“å†²æµã€åº”ç”¨ã€‘</h3><ul><li><p>å­—ç¬¦ç¼“å†²æµä»‹ç»</p><ul><li><p>BufferedWriterï¼šå°†æ–‡æœ¬å†™å…¥å­—ç¬¦è¾“å‡ºæµï¼Œç¼“å†²å­—ç¬¦ï¼Œä»¥æä¾›å•ä¸ªå­—ç¬¦ï¼Œæ•°ç»„å’Œå­—ç¬¦ä¸²çš„é«˜æ•ˆå†™å…¥ï¼Œå¯ä»¥æŒ‡å®šç¼“å†²åŒºå¤§å°ï¼Œæˆ–è€…å¯ä»¥æ¥å—é»˜è®¤å¤§å°ã€‚é»˜è®¤å€¼è¶³å¤Ÿå¤§ï¼Œå¯ç”¨äºå¤§å¤šæ•°ç”¨é€”</p></li><li><p>BufferedReaderï¼šä»å­—ç¬¦è¾“å…¥æµè¯»å–æ–‡æœ¬ï¼Œç¼“å†²å­—ç¬¦ï¼Œä»¥æä¾›å­—ç¬¦ï¼Œæ•°ç»„å’Œè¡Œçš„é«˜æ•ˆè¯»å–ï¼Œå¯ä»¥æŒ‡å®šç¼“å†²åŒºå¤§å°ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨é»˜è®¤å¤§å°ã€‚ é»˜è®¤å€¼è¶³å¤Ÿå¤§ï¼Œå¯ç”¨äºå¤§å¤šæ•°ç”¨é€”</p></li></ul></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>BufferedWriter(Writer out)</td><td>åˆ›å»ºå­—ç¬¦ç¼“å†²è¾“å‡ºæµå¯¹è±¡</td></tr><tr><td>BufferedReader(Reader in)</td><td>åˆ›å»ºå­—ç¬¦ç¼“å†²è¾“å…¥æµå¯¹è±¡</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedStreamDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//BufferedWriter(Writer out)</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span>                                                            <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;myCharStream\\bw.txt&quot;</span>));<br>        bw.write(<span class="hljs-string">&quot;hello\r\n&quot;</span>);<br>        bw.write(<span class="hljs-string">&quot;world\r\n&quot;</span>);<br>        bw.close();<br><br>        <span class="hljs-comment">//BufferedReader(Reader in)</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span>                                                           <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;myCharStream\\bw.txt&quot;</span>));<br><br>        <span class="hljs-comment">//ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦æ•°æ®</span><br><span class="hljs-comment">//        int ch;</span><br><span class="hljs-comment">//        while ((ch=br.read())!=-1) &#123;</span><br><span class="hljs-comment">//            System.out.print((char)ch);</span><br><span class="hljs-comment">//        &#125;</span><br><br>        <span class="hljs-comment">//ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦æ•°ç»„æ•°æ®</span><br>        <span class="hljs-type">char</span>[] chs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span> ((len=br.read(chs))!=-<span class="hljs-number">1</span>) &#123;<br>            System.out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(chs,<span class="hljs-number">0</span>,len));<br>        &#125;<br><br>        br.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-8å­—ç¬¦ç¼“å†²æµç‰¹æœ‰åŠŸèƒ½ã€åº”ç”¨ã€‘"><a href="#1-8å­—ç¬¦ç¼“å†²æµç‰¹æœ‰åŠŸèƒ½ã€åº”ç”¨ã€‘" class="headerlink" title="1.8å­—ç¬¦ç¼“å†²æµç‰¹æœ‰åŠŸèƒ½ã€åº”ç”¨ã€‘"></a>1.8å­—ç¬¦ç¼“å†²æµç‰¹æœ‰åŠŸèƒ½ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><p>BufferedWriterï¼š</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void newLine()</td><td>å†™ä¸€è¡Œè¡Œåˆ†éš”ç¬¦ï¼Œè¡Œåˆ†éš”ç¬¦å­—ç¬¦ä¸²ç”±ç³»ç»Ÿå±æ€§å®šä¹‰</td></tr></tbody></table><p>BufferedReader:</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>String readLine()</td><td>è¯»ä¸€è¡Œæ–‡å­—ã€‚ ç»“æœåŒ…å«è¡Œçš„å†…å®¹çš„å­—ç¬¦ä¸²ï¼Œä¸åŒ…æ‹¬ä»»ä½•è¡Œç»ˆæ­¢å­—ç¬¦å¦‚æœæµçš„ç»“å°¾å·²ç»åˆ°è¾¾ï¼Œåˆ™ä¸ºnull</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedStreamDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//åˆ›å»ºå­—ç¬¦ç¼“å†²è¾“å‡ºæµ</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span>                                                          <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;myCharStream\\bw.txt&quot;</span>));<br><br>        <span class="hljs-comment">//å†™æ•°æ®</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            bw.write(<span class="hljs-string">&quot;hello&quot;</span> + i);<br>            <span class="hljs-comment">//bw.write(&quot;\r\n&quot;);</span><br>            bw.newLine();<br>            bw.flush();<br>        &#125;<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        bw.close();<br><br>        <span class="hljs-comment">//åˆ›å»ºå­—ç¬¦ç¼“å†²è¾“å…¥æµ</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span>                                                          <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;myCharStream\\bw.txt&quot;</span>));<br><br>        String line;<br>        <span class="hljs-keyword">while</span> ((line=br.readLine())!=<span class="hljs-literal">null</span>) &#123;<br>            System.out.println(line);<br>        &#125;<br><br>        br.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-9å­—ç¬¦ç¼“å†²æµæ“ä½œæ–‡ä»¶ä¸­æ•°æ®æ’åºæ¡ˆä¾‹ã€åº”ç”¨ã€‘"><a href="#1-9å­—ç¬¦ç¼“å†²æµæ“ä½œæ–‡ä»¶ä¸­æ•°æ®æ’åºæ¡ˆä¾‹ã€åº”ç”¨ã€‘" class="headerlink" title="1.9å­—ç¬¦ç¼“å†²æµæ“ä½œæ–‡ä»¶ä¸­æ•°æ®æ’åºæ¡ˆä¾‹ã€åº”ç”¨ã€‘"></a>1.9å­—ç¬¦ç¼“å†²æµæ“ä½œæ–‡ä»¶ä¸­æ•°æ®æ’åºæ¡ˆä¾‹ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>ä½¿ç”¨å­—ç¬¦ç¼“å†²æµè¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œæ’åºåå†æ¬¡å†™åˆ°æœ¬åœ°æ–‡ä»¶</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å°†æ–‡ä»¶ä¸­çš„æ•°æ®è¯»å–åˆ°ç¨‹åºä¸­</li><li>å¯¹è¯»å–åˆ°çš„æ•°æ®è¿›è¡Œå¤„ç†</li><li>å°†å¤„ç†åçš„æ•°æ®æ·»åŠ åˆ°é›†åˆä¸­</li><li>å¯¹é›†åˆä¸­çš„æ•°æ®è¿›è¡Œæ’åº</li><li>å°†æ’åºåçš„é›†åˆä¸­çš„æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ä¸­</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CharStreamDemo14</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//éœ€æ±‚ï¼šè¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œæ’åºåå†æ¬¡å†™åˆ°æœ¬åœ°æ–‡ä»¶</span><br>        <span class="hljs-comment">//åˆ†æï¼š</span><br>        <span class="hljs-comment">//1.è¦æŠŠæ–‡ä»¶ä¸­çš„æ•°æ®è¯»å–è¿›æ¥ã€‚</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;charstream\\sort.txt&quot;</span>));<br>        <span class="hljs-comment">//è¾“å‡ºæµä¸€å®šä¸èƒ½å†™åœ¨è¿™é‡Œï¼Œå› ä¸ºä¼šæ¸…ç©ºæ–‡ä»¶ä¸­çš„å†…å®¹</span><br>        <span class="hljs-comment">//BufferedWriter bw = new BufferedWriter(new FileWriter(&quot;charstream\\sort.txt&quot;));</span><br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> br.readLine();<br>        System.out.println(<span class="hljs-string">&quot;è¯»å–åˆ°çš„æ•°æ®ä¸º&quot;</span> + line);<br>        br.close();<br><br>        <span class="hljs-comment">//2.æŒ‰ç…§ç©ºæ ¼è¿›è¡Œåˆ‡å‰²</span><br>        String[] split = line.split(<span class="hljs-string">&quot; &quot;</span>);<span class="hljs-comment">//9 1 2 5 3 10 4 6 7 8</span><br>        <span class="hljs-comment">//3.æŠŠå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„å˜æˆintç±»å‹</span><br>        <span class="hljs-type">int</span> [] arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[split.length];<br>        <span class="hljs-comment">//éå†splitæ•°ç»„ï¼Œå¯ä»¥è¿›è¡Œç±»å‹è½¬æ¢ã€‚</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; split.length; i++) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">smallStr</span> <span class="hljs-operator">=</span> split[i];<br>            <span class="hljs-comment">//ç±»å‹è½¬æ¢</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> Integer.parseInt(smallStr);<br>            <span class="hljs-comment">//æŠŠè½¬æ¢åçš„ç»“æœå­˜å…¥åˆ°arrä¸­</span><br>            arr[i] = number;<br>        &#125;<br>        <span class="hljs-comment">//4.æ’åº</span><br>        Arrays.sort(arr);<br>        System.out.println(Arrays.toString(arr));<br><br>        <span class="hljs-comment">//5.æŠŠæ’åºä¹‹åç»“æœå†™å›åˆ°æœ¬åœ° 1 2 3 4...</span><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">bw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;charstream\\sort.txt&quot;</span>));<br>        <span class="hljs-comment">//å†™å‡º</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>            bw.write(arr[i] + <span class="hljs-string">&quot; &quot;</span>);<br>            bw.flush();<br>        &#125;<br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        bw.close();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-10IOæµå°ç»“ã€ç†è§£ã€‘"><a href="#1-10IOæµå°ç»“ã€ç†è§£ã€‘" class="headerlink" title="1.10IOæµå°ç»“ã€ç†è§£ã€‘"></a>1.10IOæµå°ç»“ã€ç†è§£ã€‘</h3><ul><li><p>IOæµå°ç»“</p><p><img src="https://gitee.com/lin-liangxing/pictuer/raw/master/20220217160811.png" alt="01_IOæµå°ç»“"></p></li></ul><h2 id="2-è½¬æ¢æµ"><a href="#2-è½¬æ¢æµ" class="headerlink" title="2.è½¬æ¢æµ"></a>2.è½¬æ¢æµ</h2><h3 id="2-1å­—ç¬¦æµä¸­å’Œç¼–ç è§£ç é—®é¢˜ç›¸å…³çš„ä¸¤ä¸ªç±»ã€ç†è§£ã€‘"><a href="#2-1å­—ç¬¦æµä¸­å’Œç¼–ç è§£ç é—®é¢˜ç›¸å…³çš„ä¸¤ä¸ªç±»ã€ç†è§£ã€‘" class="headerlink" title="2.1å­—ç¬¦æµä¸­å’Œç¼–ç è§£ç é—®é¢˜ç›¸å…³çš„ä¸¤ä¸ªç±»ã€ç†è§£ã€‘"></a>2.1å­—ç¬¦æµä¸­å’Œç¼–ç è§£ç é—®é¢˜ç›¸å…³çš„ä¸¤ä¸ªç±»ã€ç†è§£ã€‘</h3><ul><li><p>InputStreamReaderï¼šæ˜¯ä»å­—èŠ‚æµåˆ°å­—ç¬¦æµçš„æ¡¥æ¢,çˆ¶ç±»æ˜¯Reader</p><p>â€‹    å®ƒè¯»å–å­—èŠ‚ï¼Œå¹¶ä½¿ç”¨æŒ‡å®šçš„ç¼–ç å°†å…¶è§£ç ä¸ºå­—ç¬¦</p><p>â€‹    å®ƒä½¿ç”¨çš„å­—ç¬¦é›†å¯ä»¥ç”±åç§°æŒ‡å®šï¼Œä¹Ÿå¯ä»¥è¢«æ˜ç¡®æŒ‡å®šï¼Œæˆ–è€…å¯ä»¥æ¥å—å¹³å°çš„é»˜è®¤å­—ç¬¦é›†</p></li><li><p>OutputStreamWriterï¼šæ˜¯ä»å­—ç¬¦æµåˆ°å­—èŠ‚æµçš„æ¡¥æ¢,çˆ¶ç±»æ˜¯Writer</p><p>â€‹    æ˜¯ä»å­—ç¬¦æµåˆ°å­—èŠ‚æµçš„æ¡¥æ¢ï¼Œä½¿ç”¨æŒ‡å®šçš„ç¼–ç å°†å†™å…¥çš„å­—ç¬¦ç¼–ç ä¸ºå­—èŠ‚</p><p>â€‹    å®ƒä½¿ç”¨çš„å­—ç¬¦é›†å¯ä»¥ç”±åç§°æŒ‡å®šï¼Œä¹Ÿå¯ä»¥è¢«æ˜ç¡®æŒ‡å®šï¼Œæˆ–è€…å¯ä»¥æ¥å—å¹³å°çš„é»˜è®¤å­—ç¬¦é›†</p></li></ul><h3 id="2-2è½¬æ¢æµè¯»å†™æ•°æ®ã€åº”ç”¨ã€‘"><a href="#2-2è½¬æ¢æµè¯»å†™æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="2.2è½¬æ¢æµè¯»å†™æ•°æ®ã€åº”ç”¨ã€‘"></a>2.2è½¬æ¢æµè¯»å†™æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>InputStreamReader(InputStream in)</td><td>ä½¿ç”¨é»˜è®¤å­—ç¬¦ç¼–ç åˆ›å»ºInputStreamReaderå¯¹è±¡</td></tr><tr><td>InputStreamReader(InputStream in,String chatset)</td><td>ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦ç¼–ç åˆ›å»ºInputStreamReaderå¯¹è±¡</td></tr><tr><td>OutputStreamWriter(OutputStream out)</td><td>ä½¿ç”¨é»˜è®¤å­—ç¬¦ç¼–ç åˆ›å»ºOutputStreamWriterå¯¹è±¡</td></tr><tr><td>OutputStreamWriter(OutputStream out,String charset)</td><td>ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦ç¼–ç åˆ›å»ºOutputStreamWriterå¯¹è±¡</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConversionStreamDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//OutputStreamWriter osw = new OutputStreamWriter(new                                             FileOutputStream(&quot;myCharStream\\osw.txt&quot;));</span><br>        <span class="hljs-type">OutputStreamWriter</span> <span class="hljs-variable">osw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(<span class="hljs-keyword">new</span>                                              <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myCharStream\\osw.txt&quot;</span>),<span class="hljs-string">&quot;GBK&quot;</span>);<br>        osw.write(<span class="hljs-string">&quot;ä¸­å›½&quot;</span>);<br>        osw.close();<br><br>        <span class="hljs-comment">//InputStreamReader isr = new InputStreamReader(new                                          FileInputStream(&quot;myCharStream\\osw.txt&quot;));</span><br>        <span class="hljs-type">InputStreamReader</span> <span class="hljs-variable">isr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(<span class="hljs-keyword">new</span>                                                 <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;myCharStream\\osw.txt&quot;</span>),<span class="hljs-string">&quot;GBK&quot;</span>);<br>        <span class="hljs-comment">//ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦æ•°æ®</span><br>        <span class="hljs-type">int</span> ch;<br>        <span class="hljs-keyword">while</span> ((ch=isr.read())!=-<span class="hljs-number">1</span>) &#123;<br>            System.out.print((<span class="hljs-type">char</span>)ch);<br>        &#125;<br>        isr.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-å¯¹è±¡æ“ä½œæµ"><a href="#3-å¯¹è±¡æ“ä½œæµ" class="headerlink" title="3.å¯¹è±¡æ“ä½œæµ"></a>3.å¯¹è±¡æ“ä½œæµ</h2><h3 id="3-1å¯¹è±¡åºåˆ—åŒ–æµã€åº”ç”¨ã€‘"><a href="#3-1å¯¹è±¡åºåˆ—åŒ–æµã€åº”ç”¨ã€‘" class="headerlink" title="3.1å¯¹è±¡åºåˆ—åŒ–æµã€åº”ç”¨ã€‘"></a>3.1å¯¹è±¡åºåˆ—åŒ–æµã€åº”ç”¨ã€‘</h3><ul><li><p>å¯¹è±¡åºåˆ—åŒ–ä»‹ç»</p><ul><li>å¯¹è±¡åºåˆ—åŒ–ï¼šå°±æ˜¯å°†å¯¹è±¡ä¿å­˜åˆ°ç£ç›˜ä¸­ï¼Œæˆ–è€…åœ¨ç½‘ç»œä¸­ä¼ è¾“å¯¹è±¡</li><li>è¿™ç§æœºåˆ¶å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå­—èŠ‚åºåˆ—è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å­—èŠ‚åºåˆ—åŒ…å«ï¼šå¯¹è±¡çš„ç±»å‹ã€å¯¹è±¡çš„æ•°æ®å’Œå¯¹è±¡ä¸­å­˜å‚¨çš„å±æ€§ç­‰ä¿¡æ¯</li><li>å­—èŠ‚åºåˆ—å†™åˆ°æ–‡ä»¶ä¹‹åï¼Œç›¸å½“äºæ–‡ä»¶ä¸­æŒä¹…ä¿å­˜äº†ä¸€ä¸ªå¯¹è±¡çš„ä¿¡æ¯</li><li>åä¹‹ï¼Œè¯¥å­—èŠ‚åºåˆ—è¿˜å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–å›æ¥ï¼Œé‡æ„å¯¹è±¡ï¼Œå¯¹å®ƒè¿›è¡Œååºåˆ—åŒ–</li></ul></li><li><p>å¯¹è±¡åºåˆ—åŒ–æµï¼š ObjectOutputStream</p><ul><li>å°†Javaå¯¹è±¡çš„åŸå§‹æ•°æ®ç±»å‹å’Œå›¾å½¢å†™å…¥OutputStreamã€‚ å¯ä»¥ä½¿ç”¨ObjectInputStreamè¯»å–ï¼ˆé‡æ„ï¼‰å¯¹è±¡ã€‚ å¯ä»¥é€šè¿‡ä½¿ç”¨æµçš„æ–‡ä»¶æ¥å®ç°å¯¹è±¡çš„æŒä¹…å­˜å‚¨ã€‚ å¦‚æœæµæ˜¯ç½‘ç»œå¥—æ¥å­—æµï¼Œåˆ™å¯ä»¥åœ¨å¦ä¸€ä¸ªä¸»æœºä¸Šæˆ–å¦ä¸€ä¸ªè¿›ç¨‹ä¸­é‡æ„å¯¹è±¡</li></ul></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ObjectOutputStream(OutputStream out)</td><td>åˆ›å»ºä¸€ä¸ªå†™å…¥æŒ‡å®šçš„OutputStreamçš„ObjectOutputStream</td></tr></tbody></table></li><li><p>åºåˆ—åŒ–å¯¹è±¡çš„æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void writeObject(Object obj)</td><td>å°†æŒ‡å®šçš„å¯¹è±¡å†™å…¥ObjectOutputStream</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectOutputStreamDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//ObjectOutputStream(OutputStream out)ï¼šåˆ›å»ºä¸€ä¸ªå†™å…¥æŒ‡å®šçš„OutputStreamçš„ObjectOutputStream</span><br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myOtherStream\\oos.txt&quot;</span>));<br><br>        <span class="hljs-comment">//åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;ä½Ÿä¸½å¨…&quot;</span>,<span class="hljs-number">30</span>);<br><br>        <span class="hljs-comment">//void writeObject(Object obj)ï¼šå°†æŒ‡å®šçš„å¯¹è±¡å†™å…¥ObjectOutputStream</span><br>        oos.writeObject(s);<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        oos.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ³¨æ„äº‹é¡¹</p><ul><li>ä¸€ä¸ªå¯¹è±¡è¦æƒ³è¢«åºåˆ—åŒ–ï¼Œè¯¥å¯¹è±¡æ‰€å±çš„ç±»å¿…é¡»å¿…é¡»å®ç°Serializable æ¥å£</li><li>Serializableæ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œå®ç°è¯¥æ¥å£ï¼Œä¸éœ€è¦é‡å†™ä»»ä½•æ–¹æ³•</li></ul></li></ul><h3 id="3-2å¯¹è±¡ååºåˆ—åŒ–æµã€åº”ç”¨ã€‘"><a href="#3-2å¯¹è±¡ååºåˆ—åŒ–æµã€åº”ç”¨ã€‘" class="headerlink" title="3.2å¯¹è±¡ååºåˆ—åŒ–æµã€åº”ç”¨ã€‘"></a>3.2å¯¹è±¡ååºåˆ—åŒ–æµã€åº”ç”¨ã€‘</h3><ul><li><p>å¯¹è±¡ååºåˆ—åŒ–æµï¼š ObjectInputStream</p><ul><li>ObjectInputStreamååºåˆ—åŒ–å…ˆå‰ä½¿ç”¨ObjectOutputStreamç¼–å†™çš„åŸå§‹æ•°æ®å’Œå¯¹è±¡</li></ul></li><li><p>æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ObjectInputStream(InputStream in)</td><td>åˆ›å»ºä»æŒ‡å®šçš„InputStreamè¯»å–çš„ObjectInputStream</td></tr></tbody></table></li><li><p>ååºåˆ—åŒ–å¯¹è±¡çš„æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Object readObject()</td><td>ä»ObjectInputStreamè¯»å–ä¸€ä¸ªå¯¹è±¡</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectInputStreamDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException &#123;<br>        <span class="hljs-comment">//ObjectInputStream(InputStream in)ï¼šåˆ›å»ºä»æŒ‡å®šçš„InputStreamè¯»å–çš„ObjectInputStream</span><br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;myOtherStream\\oos.txt&quot;</span>));<br><br>        <span class="hljs-comment">//Object readObject()ï¼šä»ObjectInputStreamè¯»å–ä¸€ä¸ªå¯¹è±¡</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> ois.readObject();<br><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> (Student) obj;<br>        System.out.println(s.getName() + <span class="hljs-string">&quot;,&quot;</span> + s.getAge());<br><br>        ois.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-3serialVersionUID-amp-transientã€åº”ç”¨ã€‘"><a href="#3-3serialVersionUID-amp-transientã€åº”ç”¨ã€‘" class="headerlink" title="3.3serialVersionUID&amp;transientã€åº”ç”¨ã€‘"></a>3.3serialVersionUID&amp;transientã€åº”ç”¨ã€‘</h3><ul><li><p>serialVersionUID</p><ul><li>ç”¨å¯¹è±¡åºåˆ—åŒ–æµåºåˆ—åŒ–äº†ä¸€ä¸ªå¯¹è±¡åï¼Œå‡å¦‚æˆ‘ä»¬ä¿®æ”¹äº†å¯¹è±¡æ‰€å±çš„ç±»æ–‡ä»¶ï¼Œè¯»å–æ•°æ®ä¼šä¸ä¼šå‡ºé—®é¢˜å‘¢ï¼Ÿ<ul><li>ä¼šå‡ºé—®é¢˜ï¼Œä¼šæŠ›å‡ºInvalidClassExceptionå¼‚å¸¸</li></ul></li><li>å¦‚æœå‡ºé—®é¢˜äº†ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ<ul><li>é‡æ–°åºåˆ—åŒ–</li><li>ç»™å¯¹è±¡æ‰€å±çš„ç±»åŠ ä¸€ä¸ªserialVersionUID <ul><li>private static final long serialVersionUID &#x3D; 42L;</li></ul></li></ul></li></ul></li><li><p>transient</p><ul><li>å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªæˆå‘˜å˜é‡çš„å€¼ä¸æƒ³è¢«åºåˆ—åŒ–ï¼Œåˆè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ<ul><li>ç»™è¯¥æˆå‘˜å˜é‡åŠ transientå…³é”®å­—ä¿®é¥°ï¼Œè¯¥å…³é”®å­—æ ‡è®°çš„æˆå‘˜å˜é‡ä¸å‚ä¸åºåˆ—åŒ–è¿‡ç¨‹</li></ul></li></ul></li><li><p>ç¤ºä¾‹ä»£ç </p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">42L</span>;<br>    <span class="hljs-keyword">private</span> String name;<br><span class="hljs-comment">//    private int age;</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br><span class="hljs-comment">//    @Override</span><br><span class="hljs-comment">//    public String toString() &#123;</span><br><span class="hljs-comment">//        return &quot;Student&#123;&quot; +</span><br><span class="hljs-comment">//                &quot;name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br><span class="hljs-comment">//                &quot;, age=&quot; + age +</span><br><span class="hljs-comment">//                &#x27;&#125;&#x27;;</span><br><span class="hljs-comment">//    &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectStreamDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException &#123;<br><span class="hljs-comment">//        write();</span><br>        read();<br>    &#125;<br><br>    <span class="hljs-comment">//ååºåˆ—åŒ–</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">read</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException &#123;<br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;myOtherStream\\oos.txt&quot;</span>));<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> ois.readObject();<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> (Student) obj;<br>        System.out.println(s.getName() + <span class="hljs-string">&quot;,&quot;</span> + s.getAge());<br>        ois.close();<br>    &#125;<br><br>    <span class="hljs-comment">//åºåˆ—åŒ–</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myOtherStream\\oos.txt&quot;</span>));<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;ä½Ÿä¸½å¨…&quot;</span>, <span class="hljs-number">30</span>);<br>        oos.writeObject(s);<br>        oos.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-4å¯¹è±¡æ“ä½œæµç»ƒä¹ ã€åº”ç”¨ã€‘"><a href="#3-4å¯¹è±¡æ“ä½œæµç»ƒä¹ ã€åº”ç”¨ã€‘" class="headerlink" title="3.4å¯¹è±¡æ“ä½œæµç»ƒä¹ ã€åº”ç”¨ã€‘"></a>3.4å¯¹è±¡æ“ä½œæµç»ƒä¹ ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>åˆ›å»ºå¤šä¸ªå­¦ç”Ÿç±»å¯¹è±¡å†™åˆ°æ–‡ä»¶ä¸­,å†æ¬¡è¯»å–åˆ°å†…å­˜ä¸­</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li>åˆ›å»ºåºåˆ—åŒ–æµå¯¹è±¡</li><li>åˆ›å»ºå¤šä¸ªå­¦ç”Ÿå¯¹è±¡</li><li>å°†å­¦ç”Ÿå¯¹è±¡æ·»åŠ åˆ°é›†åˆä¸­</li><li>å°†é›†åˆå¯¹è±¡åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­</li><li>åˆ›å»ºååºåˆ—åŒ–æµå¯¹è±¡</li><li>å°†æ–‡ä»¶ä¸­çš„å¯¹è±¡æ•°æ®,è¯»å–åˆ°å†…å­˜ä¸­</li></ul></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span>&#123;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">2L</span>;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo03</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *  read():</span><br><span class="hljs-comment">     *      è¯»å–åˆ°æ–‡ä»¶æœ«å°¾è¿”å›å€¼æ˜¯ -1</span><br><span class="hljs-comment">     *  readLine():</span><br><span class="hljs-comment">     *      è¯»å–åˆ°æ–‡ä»¶çš„æœ«å°¾è¿”å›å€¼ null</span><br><span class="hljs-comment">     *  readObject():</span><br><span class="hljs-comment">     *      è¯»å–åˆ°æ–‡ä»¶çš„æœ«å°¾ ç›´æ¥æŠ›å‡ºå¼‚å¸¸</span><br><span class="hljs-comment">     *  å¦‚æœè¦åºåˆ—åŒ–çš„å¯¹è±¡æœ‰å¤šä¸ª,ä¸å»ºè®®ç›´æ¥å°†å¤šä¸ªå¯¹è±¡åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­,å› ä¸ºååºåˆ—åŒ–æ—¶å®¹æ˜“å‡ºå¼‚å¸¸</span><br><span class="hljs-comment">     *      å»ºè®®: å°†è¦åºåˆ—åŒ–çš„å¤šä¸ªå¯¹è±¡å­˜å‚¨åˆ°é›†åˆä¸­,ç„¶åå°†é›†åˆåºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">/*// åºåˆ—åŒ–</span><br><span class="hljs-comment">        //1.åˆ›å»ºåºåˆ—åŒ–æµå¯¹è±¡</span><br><span class="hljs-comment">        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(&quot;myCode\\oos.txt&quot;));</span><br><span class="hljs-comment">        ArrayList&lt;Student&gt; arrayList = new ArrayList&lt;&gt;();</span><br><span class="hljs-comment">        //2.åˆ›å»ºå¤šä¸ªå­¦ç”Ÿå¯¹è±¡</span><br><span class="hljs-comment">        Student s = new Student(&quot;ä½Ÿä¸½å¨…&quot;,30);</span><br><span class="hljs-comment">        Student s01 = new Student(&quot;ä½Ÿä¸½å¨…&quot;,30);</span><br><span class="hljs-comment">        //3.å°†å­¦ç”Ÿå¯¹è±¡æ·»åŠ åˆ°é›†åˆä¸­</span><br><span class="hljs-comment">        arrayList.add(s);</span><br><span class="hljs-comment">        arrayList.add(s01);</span><br><span class="hljs-comment">        //4.å°†é›†åˆå¯¹è±¡åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­</span><br><span class="hljs-comment">        oos.writeObject(arrayList);</span><br><span class="hljs-comment">        oos.close();*/</span><br><br>        <span class="hljs-comment">// ååºåˆ—åŒ–</span><br>      <span class="hljs-comment">//5.åˆ›å»ºååºåˆ—åŒ–æµå¯¹è±¡</span><br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;myCode\\oos.txt&quot;</span>));<br>      <span class="hljs-comment">//6.å°†æ–‡ä»¶ä¸­çš„å¯¹è±¡æ•°æ®,è¯»å–åˆ°å†…å­˜ä¸­</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> ois.readObject();<br>        ArrayList&lt;Student&gt; arrayList = (ArrayList&lt;Student&gt;)obj;<br>        ois.close();<br>        <span class="hljs-keyword">for</span> (Student s : arrayList) &#123;<br>            System.out.println(s.getName() + <span class="hljs-string">&quot;,&quot;</span> + s.getAge());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-Propertiesé›†åˆ"><a href="#4-Propertiesé›†åˆ" class="headerlink" title="4.Propertiesé›†åˆ"></a>4.Propertiesé›†åˆ</h2><h3 id="4-1Propertiesä½œä¸ºMapé›†åˆçš„ä½¿ç”¨ã€åº”ç”¨ã€‘"><a href="#4-1Propertiesä½œä¸ºMapé›†åˆçš„ä½¿ç”¨ã€åº”ç”¨ã€‘" class="headerlink" title="4.1Propertiesä½œä¸ºMapé›†åˆçš„ä½¿ç”¨ã€åº”ç”¨ã€‘"></a>4.1Propertiesä½œä¸ºMapé›†åˆçš„ä½¿ç”¨ã€åº”ç”¨ã€‘</h3><ul><li><p>Propertiesä»‹ç»</p><ul><li>æ˜¯ä¸€ä¸ªMapä½“ç³»çš„é›†åˆç±»</li><li>Propertieså¯ä»¥ä¿å­˜åˆ°æµä¸­æˆ–ä»æµä¸­åŠ è½½</li><li>å±æ€§åˆ—è¡¨ä¸­çš„æ¯ä¸ªé”®åŠå…¶å¯¹åº”çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</li></ul></li><li><p>PropertiesåŸºæœ¬ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PropertiesDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br><span class="hljs-comment">//        Properties&lt;String,String&gt; prop = new Properties&lt;String,String&gt;(); //é”™è¯¯</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">prop</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br><br>        <span class="hljs-comment">//å­˜å‚¨å…ƒç´ </span><br>        prop.put(<span class="hljs-string">&quot;itheima001&quot;</span>, <span class="hljs-string">&quot;ä½Ÿä¸½å¨…&quot;</span>);<br>        prop.put(<span class="hljs-string">&quot;itheima002&quot;</span>, <span class="hljs-string">&quot;èµµä¸½é¢–&quot;</span>);<br>        prop.put(<span class="hljs-string">&quot;itheima003&quot;</span>, <span class="hljs-string">&quot;åˆ˜è¯—è¯—&quot;</span>);<br><br>        <span class="hljs-comment">//éå†é›†åˆ</span><br>        Set&lt;Object&gt; keySet = prop.keySet();<br>        <span class="hljs-keyword">for</span> (Object key : keySet) &#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> prop.get(key);<br>            System.out.println(key + <span class="hljs-string">&quot;,&quot;</span> + value);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-2Propertiesä½œä¸ºMapé›†åˆçš„ç‰¹æœ‰æ–¹æ³•ã€åº”ç”¨ã€‘"><a href="#4-2Propertiesä½œä¸ºMapé›†åˆçš„ç‰¹æœ‰æ–¹æ³•ã€åº”ç”¨ã€‘" class="headerlink" title="4.2Propertiesä½œä¸ºMapé›†åˆçš„ç‰¹æœ‰æ–¹æ³•ã€åº”ç”¨ã€‘"></a>4.2Propertiesä½œä¸ºMapé›†åˆçš„ç‰¹æœ‰æ–¹æ³•ã€åº”ç”¨ã€‘</h3><ul><li><p>ç‰¹æœ‰æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Object   setProperty(String key, String value)</td><td>è®¾ç½®é›†åˆçš„é”®å’Œå€¼ï¼Œéƒ½æ˜¯Stringç±»å‹ï¼Œåº•å±‚è°ƒç”¨   Hashtableæ–¹æ³• put</td></tr><tr><td>String   getProperty(String key)</td><td>ä½¿ç”¨æ­¤å±æ€§åˆ—è¡¨ä¸­æŒ‡å®šçš„é”®æœç´¢å±æ€§</td></tr><tr><td>Set<String>   stringPropertyNames()</td><td>ä»è¯¥å±æ€§åˆ—è¡¨ä¸­è¿”å›ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„é”®é›†ï¼Œå…¶ä¸­é”®åŠå…¶å¯¹åº”çš„å€¼æ˜¯å­—ç¬¦ä¸²</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PropertiesDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">prop</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br><br>        <span class="hljs-comment">//Object setProperty(String key, String value)ï¼šè®¾ç½®é›†åˆçš„é”®å’Œå€¼ï¼Œéƒ½æ˜¯Stringç±»å‹</span><br>        prop.setProperty(<span class="hljs-string">&quot;itheima001&quot;</span>, <span class="hljs-string">&quot;ä½Ÿä¸½å¨…&quot;</span>);<br>        prop.setProperty(<span class="hljs-string">&quot;itheima002&quot;</span>, <span class="hljs-string">&quot;èµµä¸½é¢–&quot;</span>);<br>        prop.setProperty(<span class="hljs-string">&quot;itheima003&quot;</span>, <span class="hljs-string">&quot;åˆ˜è¯—è¯—&quot;</span>);<br><br>        <span class="hljs-comment">//String getProperty(String key)ï¼šä½¿ç”¨æ­¤å±æ€§åˆ—è¡¨ä¸­æŒ‡å®šçš„é”®æœç´¢å±æ€§</span><br><span class="hljs-comment">//        System.out.println(prop.getProperty(&quot;itheima001&quot;));</span><br><span class="hljs-comment">//        System.out.println(prop.getProperty(&quot;itheima0011&quot;));</span><br><br><span class="hljs-comment">//        System.out.println(prop);</span><br><br>        <span class="hljs-comment">//Set&lt;String&gt; stringPropertyNames()ï¼šä»è¯¥å±æ€§åˆ—è¡¨ä¸­è¿”å›ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„é”®é›†ï¼Œå…¶ä¸­é”®åŠå…¶å¯¹åº”çš„å€¼æ˜¯å­—ç¬¦ä¸²</span><br>        Set&lt;String&gt; names = prop.stringPropertyNames();<br>        <span class="hljs-keyword">for</span> (String key : names) &#123;<br><span class="hljs-comment">//            System.out.println(key);</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> prop.getProperty(key);<br>            System.out.println(key + <span class="hljs-string">&quot;,&quot;</span> + value);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-3Propertieså’ŒIOæµç›¸ç»“åˆçš„æ–¹æ³•ã€åº”ç”¨ã€‘"><a href="#4-3Propertieså’ŒIOæµç›¸ç»“åˆçš„æ–¹æ³•ã€åº”ç”¨ã€‘" class="headerlink" title="4.3Propertieså’ŒIOæµç›¸ç»“åˆçš„æ–¹æ³•ã€åº”ç”¨ã€‘"></a>4.3Propertieså’ŒIOæµç›¸ç»“åˆçš„æ–¹æ³•ã€åº”ç”¨ã€‘</h3><ul><li><p>å’ŒIOæµç»“åˆçš„æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void   load(Reader reader)</td><td>ä»è¾“å…¥å­—ç¬¦æµè¯»å–å±æ€§åˆ—è¡¨ï¼ˆé”®å’Œå…ƒç´ å¯¹ï¼‰</td></tr><tr><td>void   store(Writer writer, String comments)</td><td>å°†æ­¤å±æ€§åˆ—è¡¨ï¼ˆé”®å’Œå…ƒç´ å¯¹ï¼‰å†™å…¥æ­¤   Propertiesè¡¨ä¸­ï¼Œä»¥é€‚åˆä½¿ç”¨   load(Reader)æ–¹æ³•çš„æ ¼å¼å†™å…¥è¾“å‡ºå­—ç¬¦æµ</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PropertiesDemo03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æŠŠé›†åˆä¸­çš„æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶</span><br><span class="hljs-comment">//        myStore();</span><br><br>        <span class="hljs-comment">//æŠŠæ–‡ä»¶ä¸­çš„æ•°æ®åŠ è½½åˆ°é›†åˆ</span><br>        myLoad();<br><br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myLoad</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">prop</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br><br>        <span class="hljs-comment">//void load(Reader reader)ï¼š</span><br>        <span class="hljs-type">FileReader</span> <span class="hljs-variable">fr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;myOtherStream\\fw.txt&quot;</span>);<br>        prop.load(fr);<br>        fr.close();<br><br>        System.out.println(prop);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myStore</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">prop</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br><br>        prop.setProperty(<span class="hljs-string">&quot;itheima001&quot;</span>,<span class="hljs-string">&quot;ä½Ÿä¸½å¨…&quot;</span>);<br>        prop.setProperty(<span class="hljs-string">&quot;itheima002&quot;</span>,<span class="hljs-string">&quot;èµµä¸½é¢–&quot;</span>);<br>        prop.setProperty(<span class="hljs-string">&quot;itheima003&quot;</span>,<span class="hljs-string">&quot;åˆ˜è¯—è¯—&quot;</span>);<br><br>        <span class="hljs-comment">//void store(Writer writer, String comments)ï¼š</span><br>        <span class="hljs-type">FileWriter</span> <span class="hljs-variable">fw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;myOtherStream\\fw.txt&quot;</span>);<br>        prop.store(fw,<span class="hljs-literal">null</span>);<br>        fw.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-4Propertiesé›†åˆç»ƒä¹ ã€åº”ç”¨ã€‘"><a href="#4-4Propertiesé›†åˆç»ƒä¹ ã€åº”ç”¨ã€‘" class="headerlink" title="4.4Propertiesé›†åˆç»ƒä¹ ã€åº”ç”¨ã€‘"></a>4.4Propertiesé›†åˆç»ƒä¹ ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>åœ¨Propertiesæ–‡ä»¶ä¸­æ‰‹åŠ¨å†™ä¸Šå§“åå’Œå¹´é¾„,è¯»å–åˆ°é›†åˆä¸­,å°†è¯¥æ•°æ®å°è£…æˆå­¦ç”Ÿå¯¹è±¡,å†™åˆ°æœ¬åœ°æ–‡ä»¶</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li>åˆ›å»ºPropertiesé›†åˆ,å°†æœ¬åœ°æ–‡ä»¶ä¸­çš„æ•°æ®åŠ è½½åˆ°é›†åˆä¸­</li><li>è·å–é›†åˆä¸­çš„é”®å€¼å¯¹æ•°æ®,å°è£…åˆ°å­¦ç”Ÿå¯¹è±¡ä¸­</li><li>åˆ›å»ºåºåˆ—åŒ–æµå¯¹è±¡,å°†å­¦ç”Ÿå¯¹è±¡åºåˆ—åŒ–åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</li></ul></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>      <span class="hljs-comment">//1.åˆ›å»ºPropertiesé›†åˆ,å°†æœ¬åœ°æ–‡ä»¶ä¸­çš„æ•°æ®åŠ è½½åˆ°é›†åˆä¸­</span><br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">prop</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-type">FileReader</span> <span class="hljs-variable">fr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;prop.properties&quot;</span>);<br>        prop.load(fr);<br>        fr.close();<br><span class="hljs-comment">//2.è·å–é›†åˆä¸­çš„é”®å€¼å¯¹æ•°æ®,å°è£…åˆ°å­¦ç”Ÿå¯¹è±¡ä¸­</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> prop.getProperty(<span class="hljs-string">&quot;name&quot;</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> Integer.parseInt(prop.getProperty(<span class="hljs-string">&quot;age&quot;</span>));<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(name,age);<br><span class="hljs-comment">//3.åˆ›å»ºåºåˆ—åŒ–æµå¯¹è±¡,å°†å­¦ç”Ÿå¯¹è±¡åºåˆ—åŒ–åˆ°æœ¬åœ°æ–‡ä»¶ä¸­</span><br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;a.txt&quot;</span>));<br>        oos.writeObject(s);<br>        oos.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fileç±»</title>
    <link href="/Hexo/2021/03/29/IO%E6%B5%8101/"/>
    <url>/Hexo/2021/03/29/IO%E6%B5%8101/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Fileç±»"><a href="#1-Fileç±»" class="headerlink" title="1.Fileç±»"></a>1.Fileç±»</h2><h3 id="1-1Fileç±»æ¦‚è¿°å’Œæ„é€ æ–¹æ³•ã€åº”ç”¨ã€‘"><a href="#1-1Fileç±»æ¦‚è¿°å’Œæ„é€ æ–¹æ³•ã€åº”ç”¨ã€‘" class="headerlink" title="1.1Fileç±»æ¦‚è¿°å’Œæ„é€ æ–¹æ³•ã€åº”ç”¨ã€‘"></a>1.1Fileç±»æ¦‚è¿°å’Œæ„é€ æ–¹æ³•ã€åº”ç”¨ã€‘</h3><ul><li><p>Fileç±»ä»‹ç»</p><ul><li>å®ƒæ˜¯æ–‡ä»¶å’Œç›®å½•è·¯å¾„åçš„æŠ½è±¡è¡¨ç¤º</li><li>æ–‡ä»¶å’Œç›®å½•æ˜¯å¯ä»¥é€šè¿‡Fileå°è£…æˆå¯¹è±¡çš„</li><li>å¯¹äºFileè€Œè¨€,å…¶å°è£…çš„å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£å­˜åœ¨çš„æ–‡ä»¶,ä»…ä»…æ˜¯ä¸€ä¸ªè·¯å¾„åè€Œå·².å®ƒå¯ä»¥æ˜¯å­˜åœ¨çš„,ä¹Ÿå¯ä»¥æ˜¯ä¸å­˜åœ¨çš„.å°†æ¥æ˜¯è¦é€šè¿‡å…·ä½“çš„æ“ä½œæŠŠè¿™ä¸ªè·¯å¾„çš„å†…å®¹è½¬æ¢ä¸ºå…·ä½“å­˜åœ¨çš„</li></ul></li><li><p>Fileç±»çš„æ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>File(String   pathname)</td><td>é€šè¿‡å°†ç»™å®šçš„è·¯å¾„åå­—ç¬¦ä¸²è½¬æ¢ä¸ºæŠ½è±¡è·¯å¾„åæ¥åˆ›å»ºæ–°çš„ Fileå®ä¾‹</td></tr><tr><td>File(String   parent, String child)</td><td>ä»çˆ¶è·¯å¾„åå­—ç¬¦ä¸²å’Œå­è·¯å¾„åå­—ç¬¦ä¸²åˆ›å»ºæ–°çš„   Fileå®ä¾‹</td></tr><tr><td>File(File   parent, String child)</td><td>ä»çˆ¶æŠ½è±¡è·¯å¾„åå’Œå­è·¯å¾„åå­—ç¬¦ä¸²åˆ›å»ºæ–°çš„   Fileå®ä¾‹</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//File(String pathname): é€šè¿‡å°†ç»™å®šçš„è·¯å¾„åå­—ç¬¦ä¸²è½¬æ¢ä¸ºæŠ½è±¡è·¯å¾„åæ¥åˆ›å»ºæ–°çš„ Fileå®ä¾‹</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;E:\\itcast\\java.txt&quot;</span>);<br>        System.out.println(f1);<br><br>        <span class="hljs-comment">//File(String parent, String child): ä»çˆ¶è·¯å¾„åå­—ç¬¦ä¸²å’Œå­è·¯å¾„åå­—ç¬¦ä¸²åˆ›å»ºæ–°çš„ Fileå®ä¾‹</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;E:\\itcast&quot;</span>,<span class="hljs-string">&quot;java.txt&quot;</span>);<br>        System.out.println(f2);<br><br>        <span class="hljs-comment">//File(File parent, String child): ä»çˆ¶æŠ½è±¡è·¯å¾„åå’Œå­è·¯å¾„åå­—ç¬¦ä¸²åˆ›å»ºæ–°çš„ Fileå®ä¾‹</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;E:\\itcast&quot;</span>);<br>        <span class="hljs-type">File</span> <span class="hljs-variable">f4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(f3,<span class="hljs-string">&quot;java.txt&quot;</span>);<br>        System.out.println(f4);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-2ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ã€ç†è§£ã€‘"><a href="#1-2ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ã€ç†è§£ã€‘" class="headerlink" title="1.2ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ã€ç†è§£ã€‘"></a>1.2ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ã€ç†è§£ã€‘</h3><ul><li><p>ç»å¯¹è·¯å¾„</p><p>æ˜¯ä¸€ä¸ªå®Œæ•´çš„è·¯å¾„,ä»ç›˜ç¬¦å¼€å§‹</p></li><li><p>ç›¸å¯¹è·¯å¾„</p><p>æ˜¯ä¸€ä¸ªç®€åŒ–çš„è·¯å¾„,ç›¸å¯¹å½“å‰é¡¹ç›®ä¸‹çš„è·¯å¾„</p></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// æ˜¯ä¸€ä¸ªå®Œæ•´çš„è·¯å¾„,ä»ç›˜ç¬¦å¼€å§‹</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;D:\\itheima\\a.txt&quot;</span>);<br><br>        <span class="hljs-comment">// æ˜¯ä¸€ä¸ªç®€åŒ–çš„è·¯å¾„,ä»å½“å‰é¡¹ç›®æ ¹ç›®å½•å¼€å§‹</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;a.txt&quot;</span>);<br>        <span class="hljs-type">File</span> <span class="hljs-variable">file3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;æ¨¡å—å\\a.txt&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-3Fileç±»åˆ›å»ºåŠŸèƒ½ã€åº”ç”¨ã€‘"><a href="#1-3Fileç±»åˆ›å»ºåŠŸèƒ½ã€åº”ç”¨ã€‘" class="headerlink" title="1.3Fileç±»åˆ›å»ºåŠŸèƒ½ã€åº”ç”¨ã€‘"></a>1.3Fileç±»åˆ›å»ºåŠŸèƒ½ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•åˆ†ç±»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public boolean createNewFile()</td><td>å½“å…·æœ‰è¯¥åç§°çš„æ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªç”±è¯¥æŠ½è±¡è·¯å¾„åå‘½åçš„æ–°ç©ºæ–‡ä»¶</td></tr><tr><td>public boolean mkdir()</td><td>åˆ›å»ºç”±æ­¤æŠ½è±¡è·¯å¾„åå‘½åçš„ç›®å½•</td></tr><tr><td>public boolean mkdirs()</td><td>åˆ›å»ºç”±æ­¤æŠ½è±¡è·¯å¾„åå‘½åçš„ç›®å½•ï¼ŒåŒ…æ‹¬ä»»ä½•å¿…éœ€ä½†ä¸å­˜åœ¨çš„çˆ¶ç›®å½•</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//éœ€æ±‚1ï¼šæˆ‘è¦åœ¨E:\\itcastç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶java.txt</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;E:\\itcast\\java.txt&quot;</span>);<br>        System.out.println(f1.createNewFile());<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚2ï¼šæˆ‘è¦åœ¨E:\\itcastç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•JavaSE</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;E:\\itcast\\JavaSE&quot;</span>);<br>        System.out.println(f2.mkdir());<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚3ï¼šæˆ‘è¦åœ¨E:\\itcastç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå¤šçº§ç›®å½•JavaWEB\\HTML</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;E:\\itcast\\JavaWEB\\HTML&quot;</span>);<br><span class="hljs-comment">//        System.out.println(f3.mkdir());</span><br>        System.out.println(f3.mkdirs());<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚4ï¼šæˆ‘è¦åœ¨E:\\itcastç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶javase.txt</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;E:\\itcast\\javase.txt&quot;</span>);<br><span class="hljs-comment">//        System.out.println(f4.mkdir());</span><br>        System.out.println(f4.createNewFile());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-4Fileç±»åˆ é™¤åŠŸèƒ½ã€åº”ç”¨ã€‘"><a href="#1-4Fileç±»åˆ é™¤åŠŸèƒ½ã€åº”ç”¨ã€‘" class="headerlink" title="1.4Fileç±»åˆ é™¤åŠŸèƒ½ã€åº”ç”¨ã€‘"></a>1.4Fileç±»åˆ é™¤åŠŸèƒ½ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•åˆ†ç±»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public boolean   delete()</td><td>åˆ é™¤ç”±æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileDemo03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><span class="hljs-comment">//        File f1 = new File(&quot;E:\\itcast\\java.txt&quot;);</span><br>        <span class="hljs-comment">//éœ€æ±‚1ï¼šåœ¨å½“å‰æ¨¡å—ç›®å½•ä¸‹åˆ›å»ºjava.txtæ–‡ä»¶</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;myFile\\java.txt&quot;</span>);<br><span class="hljs-comment">//        System.out.println(f1.createNewFile());</span><br><br>        <span class="hljs-comment">//éœ€æ±‚2ï¼šåˆ é™¤å½“å‰æ¨¡å—ç›®å½•ä¸‹çš„java.txtæ–‡ä»¶</span><br>        System.out.println(f1.delete());<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚3ï¼šåœ¨å½“å‰æ¨¡å—ç›®å½•ä¸‹åˆ›å»ºitcastç›®å½•</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;myFile\\itcast&quot;</span>);<br><span class="hljs-comment">//        System.out.println(f2.mkdir());</span><br><br>        <span class="hljs-comment">//éœ€æ±‚4ï¼šåˆ é™¤å½“å‰æ¨¡å—ç›®å½•ä¸‹çš„itcastç›®å½•</span><br>        System.out.println(f2.delete());<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚5ï¼šåœ¨å½“å‰æ¨¡å—ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•itcast,ç„¶ååœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶java.txt</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;myFile\\itcast&quot;</span>);<br><span class="hljs-comment">//        System.out.println(f3.mkdir());</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;myFile\\itcast\\java.txt&quot;</span>);<br><span class="hljs-comment">//        System.out.println(f4.createNewFile());</span><br><br>        <span class="hljs-comment">//éœ€æ±‚6ï¼šåˆ é™¤å½“å‰æ¨¡å—ä¸‹çš„ç›®å½•itcast</span><br>        System.out.println(f4.delete());<br>        System.out.println(f3.delete());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-5Fileç±»åˆ¤æ–­å’Œè·å–åŠŸèƒ½ã€åº”ç”¨ã€‘"><a href="#1-5Fileç±»åˆ¤æ–­å’Œè·å–åŠŸèƒ½ã€åº”ç”¨ã€‘" class="headerlink" title="1.5Fileç±»åˆ¤æ–­å’Œè·å–åŠŸèƒ½ã€åº”ç”¨ã€‘"></a>1.5Fileç±»åˆ¤æ–­å’Œè·å–åŠŸèƒ½ã€åº”ç”¨ã€‘</h3><ul><li><p>åˆ¤æ–­åŠŸèƒ½</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public   boolean isDirectory()</td><td>æµ‹è¯•æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„Fileæ˜¯å¦ä¸ºç›®å½•</td></tr><tr><td>public   boolean isFile()</td><td>æµ‹è¯•æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„Fileæ˜¯å¦ä¸ºæ–‡ä»¶</td></tr><tr><td>public   boolean   exists()</td><td>æµ‹è¯•æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„Fileæ˜¯å¦å­˜åœ¨</td></tr></tbody></table></li><li><p>è·å–åŠŸèƒ½</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public   String getAbsolutePath()</td><td>è¿”å›æ­¤æŠ½è±¡è·¯å¾„åçš„ç»å¯¹è·¯å¾„åå­—ç¬¦ä¸²</td></tr><tr><td>public   String getPath()</td><td>å°†æ­¤æŠ½è±¡è·¯å¾„åè½¬æ¢ä¸ºè·¯å¾„åå­—ç¬¦ä¸²</td></tr><tr><td>public   String getName()</td><td>è¿”å›ç”±æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„åç§°</td></tr><tr><td>public   File[] listFiles()</td><td>è¿”å›æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„ç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•çš„Fileå¯¹è±¡æ•°ç»„</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileDemo04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªFileå¯¹è±¡</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;myFile\\java.txt&quot;</span>);<br><br><span class="hljs-comment">//        public boolean isDirectory()ï¼šæµ‹è¯•æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„Fileæ˜¯å¦ä¸ºç›®å½•</span><br><span class="hljs-comment">//        public boolean isFile()ï¼šæµ‹è¯•æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„Fileæ˜¯å¦ä¸ºæ–‡ä»¶</span><br><span class="hljs-comment">//        public boolean exists()ï¼šæµ‹è¯•æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„Fileæ˜¯å¦å­˜åœ¨</span><br>        System.out.println(f.isDirectory());<br>        System.out.println(f.isFile());<br>        System.out.println(f.exists());<br><br><span class="hljs-comment">//        public String getAbsolutePath()ï¼šè¿”å›æ­¤æŠ½è±¡è·¯å¾„åçš„ç»å¯¹è·¯å¾„åå­—ç¬¦ä¸²</span><br><span class="hljs-comment">//        public String getPath()ï¼šå°†æ­¤æŠ½è±¡è·¯å¾„åè½¬æ¢ä¸ºè·¯å¾„åå­—ç¬¦ä¸²</span><br><span class="hljs-comment">//        public String getName()ï¼šè¿”å›ç”±æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„åç§°</span><br>        System.out.println(f.getAbsolutePath());<br>        System.out.println(f.getPath());<br>        System.out.println(f.getName());<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br><span class="hljs-comment">//        public File[] listFiles()ï¼šè¿”å›æ­¤æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„ç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•çš„Fileå¯¹è±¡æ•°ç»„</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;E:\\itcast&quot;</span>);<br>        File[] fileArray = f2.listFiles();<br>        <span class="hljs-keyword">for</span>(File file : fileArray) &#123;<br><span class="hljs-comment">//            System.out.println(file);</span><br><span class="hljs-comment">//            System.out.println(file.getName());</span><br>            <span class="hljs-keyword">if</span>(file.isFile()) &#123;<br>                System.out.println(file.getName());<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-6Fileç±»ç»ƒä¹ ä¸€ã€åº”ç”¨ã€‘"><a href="#1-6Fileç±»ç»ƒä¹ ä¸€ã€åº”ç”¨ã€‘" class="headerlink" title="1.6Fileç±»ç»ƒä¹ ä¸€ã€åº”ç”¨ã€‘"></a>1.6Fileç±»ç»ƒä¹ ä¸€ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p> åœ¨å½“å‰æ¨¡å—ä¸‹çš„aaaæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªa.txtæ–‡ä»¶</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li>åˆ›å»ºFileå¯¹è±¡,æŒ‡å‘aaaæ–‡ä»¶å¤¹</li><li>åˆ¤æ–­aaaæ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨,å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</li><li>åˆ›å»ºFileå¯¹è±¡,æŒ‡å‘aaaæ–‡ä»¶å¤¹ä¸‹çš„a.txtæ–‡ä»¶</li><li>åˆ›å»ºè¿™ä¸ªæ–‡ä»¶</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//ç»ƒä¹ ä¸€ï¼šåœ¨å½“å‰æ¨¡å—ä¸‹çš„aaaæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªa.txtæ–‡ä»¶</span><br>       <span class="hljs-comment">/* File file = new File(&quot;filemodule\\aaa\\a.txt&quot;);</span><br><span class="hljs-comment">        file.createNewFile();*/</span><br>        <span class="hljs-comment">//æ³¨æ„ç‚¹:æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹å¿…é¡»è¦å­˜åœ¨.</span><br><br>      <span class="hljs-comment">//1.åˆ›å»ºFileå¯¹è±¡,æŒ‡å‘aaaæ–‡ä»¶å¤¹</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;filemodule\\aaa&quot;</span>);<br>      <span class="hljs-comment">//2.åˆ¤æ–­aaaæ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨,å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</span><br>        <span class="hljs-keyword">if</span>(!file.exists())&#123;<br>            <span class="hljs-comment">//å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨,å°±åˆ›å»ºå‡ºæ¥</span><br>            file.mkdirs();<br>        &#125;<br>      <span class="hljs-comment">//3.åˆ›å»ºFileå¯¹è±¡,æŒ‡å‘aaaæ–‡ä»¶å¤¹ä¸‹çš„a.txtæ–‡ä»¶</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">newFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(file,<span class="hljs-string">&quot;a.txt&quot;</span>);<br>      <span class="hljs-comment">//4.åˆ›å»ºè¿™ä¸ªæ–‡ä»¶</span><br>        newFile.createNewFile();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-7Fileç±»ç»ƒä¹ äºŒã€åº”ç”¨ã€‘"><a href="#1-7Fileç±»ç»ƒä¹ äºŒã€åº”ç”¨ã€‘" class="headerlink" title="1.7Fileç±»ç»ƒä¹ äºŒã€åº”ç”¨ã€‘"></a>1.7Fileç±»ç»ƒä¹ äºŒã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>åˆ é™¤ä¸€ä¸ªå¤šçº§æ–‡ä»¶å¤¹</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªæ–¹æ³•,æ¥æ”¶ä¸€ä¸ªFileå¯¹è±¡</li><li>éå†è¿™ä¸ªFileå¯¹è±¡,è·å–å®ƒä¸‹è¾¹çš„æ¯ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¯¹è±¡</li><li>åˆ¤æ–­å½“å‰éå†åˆ°çš„Fileå¯¹è±¡æ˜¯æ–‡ä»¶è¿˜æ˜¯æ–‡ä»¶å¤¹</li><li>å¦‚æœæ˜¯æ–‡ä»¶,ç›´æ¥åˆ é™¤</li><li>å¦‚æœæ˜¯æ–‡ä»¶å¤¹,é€’å½’è°ƒç”¨è‡ªå·±,å°†å½“å‰éå†åˆ°çš„Fileå¯¹è±¡å½“åšå‚æ•°ä¼ é€’</li><li>å‚æ•°ä¼ é€’è¿‡æ¥çš„æ–‡ä»¶å¤¹Fileå¯¹è±¡å·²ç»å¤„ç†å®Œæˆ,æœ€åç›´æ¥åˆ é™¤è¿™ä¸ªç©ºæ–‡ä»¶å¤¹</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ç»ƒä¹ äºŒï¼šåˆ é™¤ä¸€ä¸ªå¤šçº§æ–‡ä»¶å¤¹</span><br>        <span class="hljs-comment">//deleteæ–¹æ³•</span><br>        <span class="hljs-comment">//åªèƒ½åˆ é™¤æ–‡ä»¶å’Œç©ºæ–‡ä»¶å¤¹.</span><br>        <span class="hljs-comment">//å¦‚æœç°åœ¨è¦åˆ é™¤ä¸€ä¸ªæœ‰å†…å®¹çš„æ–‡ä»¶å¤¹?</span><br>        <span class="hljs-comment">//å…ˆåˆ æ‰è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„å†…å®¹.</span><br>        <span class="hljs-comment">//æœ€åå†åˆ é™¤è¿™ä¸ªæ–‡ä»¶å¤¹</span><br><br>        <span class="hljs-type">File</span> <span class="hljs-variable">src</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;C:\\Users\\apple\\Desktop\\src&quot;</span>);<br>        deleteDir(src);<br>    &#125;<br>  <br><span class="hljs-comment">//1.å®šä¹‰ä¸€ä¸ªæ–¹æ³•,æ¥æ”¶ä¸€ä¸ªFileå¯¹è±¡</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteDir</span><span class="hljs-params">(File src)</span> &#123;<br>        <span class="hljs-comment">//å…ˆåˆ æ‰è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„å†…å®¹.</span><br>        <span class="hljs-comment">//é€’å½’ æ–¹æ³•åœ¨æ–¹æ³•ä½“ä¸­è‡ªå·±è°ƒç”¨è‡ªå·±.</span><br>        <span class="hljs-comment">//æ³¨æ„: å¯ä»¥è§£å†³æ‰€æœ‰æ–‡ä»¶å¤¹å’Œé€’å½’ç›¸ç»“åˆçš„é¢˜ç›®</span><br>        <span class="hljs-comment">//2.éå†è¿™ä¸ªFileå¯¹è±¡,è·å–å®ƒä¸‹è¾¹çš„æ¯ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¯¹è±¡</span><br>        File[] files = src.listFiles();<br>        <span class="hljs-comment">//3.åˆ¤æ–­å½“å‰éå†åˆ°çš„Fileå¯¹è±¡æ˜¯æ–‡ä»¶è¿˜æ˜¯æ–‡ä»¶å¤¹</span><br>        <span class="hljs-keyword">for</span> (File file : files) &#123;<br>            <span class="hljs-comment">//4.å¦‚æœæ˜¯æ–‡ä»¶,ç›´æ¥åˆ é™¤</span><br>            <span class="hljs-keyword">if</span>(file.isFile())&#123;<br>                file.delete();<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-comment">//5.å¦‚æœæ˜¯æ–‡ä»¶å¤¹,é€’å½’è°ƒç”¨è‡ªå·±,å°†å½“å‰éå†åˆ°çš„Fileå¯¹è±¡å½“åšå‚æ•°ä¼ é€’</span><br>                deleteDir(file);<span class="hljs-comment">//å‚æ•°ä¸€å®šè¦æ˜¯srcæ–‡ä»¶å¤¹é‡Œé¢çš„æ–‡ä»¶å¤¹Fileå¯¹è±¡</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//6.å‚æ•°ä¼ é€’è¿‡æ¥çš„æ–‡ä»¶å¤¹Fileå¯¹è±¡å·²ç»å¤„ç†å®Œæˆ,æœ€åç›´æ¥åˆ é™¤è¿™ä¸ªç©ºæ–‡ä»¶å¤¹</span><br>        src.delete();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-8Fileç±»ç»ƒä¹ ä¸‰ã€åº”ç”¨ã€‘"><a href="#1-8Fileç±»ç»ƒä¹ ä¸‰ã€åº”ç”¨ã€‘" class="headerlink" title="1.8Fileç±»ç»ƒä¹ ä¸‰ã€åº”ç”¨ã€‘"></a>1.8Fileç±»ç»ƒä¹ ä¸‰ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­æ¯ç§æ–‡ä»¶çš„ä¸ªæ•°å¹¶æ‰“å°</p><p>æ‰“å°æ ¼å¼å¦‚ä¸‹ï¼š</p><pre><code class="hljs">          txt:3ä¸ª            doc:4ä¸ª            jpg:6ä¸ª             â€¦</code></pre></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªæ–¹æ³•,å‚æ•°æ˜¯HashMapé›†åˆç”¨æ¥ç»Ÿè®¡æ¬¡æ•°å’ŒFileå¯¹è±¡è¦ç»Ÿè®¡çš„æ–‡ä»¶å¤¹</li><li>éå†Fileå¯¹è±¡,è·å–å®ƒä¸‹è¾¹çš„æ¯ä¸€ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¯¹è±¡</li><li>åˆ¤æ–­å½“å‰Fileå¯¹è±¡æ˜¯æ–‡ä»¶è¿˜æ˜¯æ–‡ä»¶å¤¹</li><li>å¦‚æœæ˜¯æ–‡ä»¶,åˆ¤æ–­è¿™ç§ç±»å‹æ–‡ä»¶åç¼€ååœ¨HashMapé›†åˆä¸­æ˜¯å¦å‡ºç°è¿‡<ul><li>æ²¡å‡ºç°è¿‡,å°†è¿™ç§ç±»å‹æ–‡ä»¶çš„åç¼€åå­˜å…¥é›†åˆä¸­,æ¬¡æ•°å­˜1</li><li>å‡ºç°è¿‡,è·å–è¿™ç§ç±»å‹æ–‡ä»¶çš„åç¼€åå‡ºç°çš„æ¬¡æ•°,å¯¹å…¶+1,åœ¨å­˜å›é›†åˆä¸­</li></ul></li><li>å¦‚æœæ˜¯æ–‡ä»¶å¤¹,é€’å½’è°ƒç”¨è‡ªå·±,HashMapé›†åˆå°±æ˜¯å‚æ•°é›†åˆ,Fileå¯¹è±¡æ˜¯å½“å‰æ–‡ä»¶å¤¹å¯¹è±¡</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test3</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­,æ¯ç§æ–‡ä»¶å‡ºç°çš„æ¬¡æ•°.</span><br>        <span class="hljs-comment">//ç»Ÿè®¡ --- å®šä¹‰ä¸€ä¸ªå˜é‡ç”¨æ¥ç»Ÿè®¡. ---- å¼Šç«¯:åŒæ—¶åªèƒ½ç»Ÿè®¡ä¸€ç§æ–‡ä»¶</span><br>        <span class="hljs-comment">//åˆ©ç”¨mapé›†åˆè¿›è¡Œæ•°æ®ç»Ÿè®¡,é”® --- æ–‡ä»¶åç¼€å  å€¼ ----  æ¬¡æ•°</span><br><br>        <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;filemodule&quot;</span>);<br>        HashMap&lt;String, Integer&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        getCount(hm, file);<br>        System.out.println(hm);<br>    &#125;<br>  <br><span class="hljs-comment">//1.å®šä¹‰ä¸€ä¸ªæ–¹æ³•,å‚æ•°æ˜¯HashMapé›†åˆç”¨æ¥ç»Ÿè®¡æ¬¡æ•°å’ŒFileå¯¹è±¡è¦ç»Ÿè®¡çš„æ–‡ä»¶å¤¹</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getCount</span><span class="hljs-params">(HashMap&lt;String, Integer&gt; hm, File file)</span> &#123;<br>      <span class="hljs-comment">//2.éå†Fileå¯¹è±¡,è·å–å®ƒä¸‹è¾¹çš„æ¯ä¸€ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¯¹è±¡</span><br>        File[] files = file.listFiles();<br>        <span class="hljs-keyword">for</span> (File f : files) &#123;<br>          <span class="hljs-comment">//3.åˆ¤æ–­å½“å‰Fileå¯¹è±¡æ˜¯æ–‡ä»¶è¿˜æ˜¯æ–‡ä»¶å¤¹</span><br>            <span class="hljs-keyword">if</span>(f.isFile())&#123;<br>              <span class="hljs-comment">//å¦‚æœæ˜¯æ–‡ä»¶,åˆ¤æ–­è¿™ç§ç±»å‹æ–‡ä»¶åç¼€ååœ¨HashMapé›†åˆä¸­æ˜¯å¦å‡ºç°è¿‡</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> f.getName();<br>                String[] fileNameArr = fileName.split(<span class="hljs-string">&quot;\\.&quot;</span>);<br>                <span class="hljs-keyword">if</span>(fileNameArr.length == <span class="hljs-number">2</span>)&#123;<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">fileEndName</span> <span class="hljs-operator">=</span> fileNameArr[<span class="hljs-number">1</span>];<br>                    <span class="hljs-keyword">if</span>(hm.containsKey(fileEndName))&#123;<br>                        <span class="hljs-comment">//å‡ºç°è¿‡,è·å–è¿™ç§ç±»å‹æ–‡ä»¶çš„åç¼€åå‡ºç°çš„æ¬¡æ•°,å¯¹å…¶+1,åœ¨å­˜å›é›†åˆä¸­</span><br>                        <span class="hljs-type">Integer</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> hm.get(fileEndName);<br>                        <span class="hljs-comment">//è¿™ç§æ–‡ä»¶åˆå‡ºç°äº†ä¸€æ¬¡.</span><br>                        count++;<br>                        <span class="hljs-comment">//æŠŠå·²ç»å‡ºç°çš„æ¬¡æ•°ç»™è¦†ç›–æ‰.</span><br>                        hm.put(fileEndName,count);<br>                    &#125;<span class="hljs-keyword">else</span>&#123;<br>                        <span class="hljs-comment">// æ²¡å‡ºç°è¿‡,å°†è¿™ç§ç±»å‹æ–‡ä»¶çš„åç¼€åå­˜å…¥é›†åˆä¸­,æ¬¡æ•°å­˜1</span><br>                        hm.put(fileEndName,<span class="hljs-number">1</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>              <span class="hljs-comment">//å¦‚æœæ˜¯æ–‡ä»¶å¤¹,é€’å½’è°ƒç”¨è‡ªå·±,HashMapé›†åˆå°±æ˜¯å‚æ•°é›†åˆ,Fileå¯¹è±¡æ˜¯å½“å‰æ–‡ä»¶å¤¹å¯¹è±¡ä»£ç å®ç°</span><br>                getCount(hm,f);<br>            &#125;<br>        &#125;<br>    &#125;<br>  <br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-å­—èŠ‚æµ"><a href="#2-å­—èŠ‚æµ" class="headerlink" title="2.å­—èŠ‚æµ"></a>2.å­—èŠ‚æµ</h2><h3 id="2-1-IOæµæ¦‚è¿°å’Œåˆ†ç±»ã€ç†è§£ã€‘"><a href="#2-1-IOæµæ¦‚è¿°å’Œåˆ†ç±»ã€ç†è§£ã€‘" class="headerlink" title="2.1 IOæµæ¦‚è¿°å’Œåˆ†ç±»ã€ç†è§£ã€‘"></a>2.1 IOæµæ¦‚è¿°å’Œåˆ†ç±»ã€ç†è§£ã€‘</h3><ul><li>IOæµä»‹ç»<ul><li>IOï¼šè¾“å…¥&#x2F;è¾“å‡º(Input&#x2F;Output)</li><li>æµï¼šæ˜¯ä¸€ç§æŠ½è±¡æ¦‚å¿µ,æ˜¯å¯¹æ•°æ®ä¼ è¾“çš„æ€»ç§°.ä¹Ÿå°±æ˜¯è¯´æ•°æ®åœ¨è®¾å¤‡é—´çš„ä¼ è¾“ç§°ä¸ºæµ,æµçš„æœ¬è´¨æ˜¯æ•°æ®ä¼ è¾“</li><li>IOæµå°±æ˜¯ç”¨æ¥å¤„ç†è®¾å¤‡é—´æ•°æ®ä¼ è¾“é—®é¢˜çš„.å¸¸è§çš„åº”ç”¨: æ–‡ä»¶å¤åˆ¶; æ–‡ä»¶ä¸Šä¼ ; æ–‡ä»¶ä¸‹è½½</li></ul></li><li>IOæµçš„åˆ†ç±»<ul><li>æŒ‰ç…§æ•°æ®çš„æµå‘<ul><li>è¾“å…¥æµï¼šè¯»æ•°æ®</li><li>è¾“å‡ºæµï¼šå†™æ•°æ®</li></ul></li><li>æŒ‰ç…§æ•°æ®ç±»å‹æ¥åˆ†<ul><li>å­—èŠ‚æµ<ul><li>å­—èŠ‚è¾“å…¥æµ</li><li>å­—èŠ‚è¾“å‡ºæµ</li></ul></li><li>å­—ç¬¦æµ<ul><li>å­—ç¬¦è¾“å…¥æµ</li><li>å­—ç¬¦è¾“å‡ºæµ</li></ul></li></ul></li></ul></li><li>IOæµçš„ä½¿ç”¨åœºæ™¯<ul><li>å¦‚æœæ“ä½œçš„æ˜¯çº¯æ–‡æœ¬æ–‡ä»¶,ä¼˜å…ˆä½¿ç”¨å­—ç¬¦æµ</li><li>å¦‚æœæ“ä½œçš„æ˜¯å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰äºŒè¿›åˆ¶æ–‡ä»¶,ä¼˜å…ˆä½¿ç”¨å­—èŠ‚æµ</li><li>å¦‚æœä¸ç¡®å®šæ–‡ä»¶ç±»å‹,ä¼˜å…ˆä½¿ç”¨å­—èŠ‚æµ.å­—èŠ‚æµæ˜¯ä¸‡èƒ½çš„æµ</li></ul></li></ul><h3 id="2-2å­—èŠ‚æµå†™æ•°æ®ã€åº”ç”¨ã€‘"><a href="#2-2å­—èŠ‚æµå†™æ•°æ®ã€åº”ç”¨ã€‘" class="headerlink" title="2.2å­—èŠ‚æµå†™æ•°æ®ã€åº”ç”¨ã€‘"></a>2.2å­—èŠ‚æµå†™æ•°æ®ã€åº”ç”¨ã€‘</h3><ul><li><p>å­—èŠ‚æµæŠ½è±¡åŸºç±»</p><ul><li>InputStreamï¼šè¿™ä¸ªæŠ½è±¡ç±»æ˜¯è¡¨ç¤ºå­—èŠ‚è¾“å…¥æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»</li><li>OutputStreamï¼šè¿™ä¸ªæŠ½è±¡ç±»æ˜¯è¡¨ç¤ºå­—èŠ‚è¾“å‡ºæµçš„æ‰€æœ‰ç±»çš„è¶…ç±»</li><li>å­ç±»åç‰¹ç‚¹ï¼šå­ç±»åç§°éƒ½æ˜¯ä»¥å…¶çˆ¶ç±»åä½œä¸ºå­ç±»åçš„åç¼€</li></ul></li><li><p>å­—èŠ‚è¾“å‡ºæµ</p><ul><li>FileOutputStream(String name)ï¼šåˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶</li></ul></li><li><p>ä½¿ç”¨å­—èŠ‚è¾“å‡ºæµå†™æ•°æ®çš„æ­¥éª¤</p><ul><li>åˆ›å»ºå­—èŠ‚è¾“å‡ºæµå¯¹è±¡(è°ƒç”¨ç³»ç»ŸåŠŸèƒ½åˆ›å»ºäº†æ–‡ä»¶,åˆ›å»ºå­—èŠ‚è¾“å‡ºæµå¯¹è±¡,è®©å­—èŠ‚è¾“å‡ºæµå¯¹è±¡æŒ‡å‘æ–‡ä»¶)</li><li>è°ƒç”¨å­—èŠ‚è¾“å‡ºæµå¯¹è±¡çš„å†™æ•°æ®æ–¹æ³•</li><li>é‡Šæ”¾èµ„æº(å…³é—­æ­¤æ–‡ä»¶è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æº)</li></ul></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileOutputStreamDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå­—èŠ‚è¾“å‡ºæµå¯¹è±¡</span><br>      <span class="hljs-comment">/*</span><br><span class="hljs-comment">      æ³¨æ„ç‚¹:</span><br><span class="hljs-comment">      1.å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨,ä¼šå¸®æˆ‘ä»¬åˆ›å»º</span><br><span class="hljs-comment">      2.å¦‚æœæ–‡ä»¶å­˜åœ¨,ä¼šæŠŠæ–‡ä»¶æ¸…ç©º</span><br><span class="hljs-comment">      */</span><br>      <span class="hljs-comment">//FileOutputStream(String name)ï¼šåˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶</span><br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myByteStream\\fos.txt&quot;</span>);<br><br>        <span class="hljs-comment">//void write(int b)ï¼šå°†æŒ‡å®šçš„å­—èŠ‚å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ</span><br>        fos.write(<span class="hljs-number">97</span>);<br><span class="hljs-comment">//        fos.write(57);</span><br><span class="hljs-comment">//        fos.write(55);</span><br><br>        <span class="hljs-comment">//æœ€åéƒ½è¦é‡Šæ”¾èµ„æº</span><br>        <span class="hljs-comment">//void close()ï¼šå…³é—­æ­¤æ–‡ä»¶è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚</span><br>        fos.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-3å­—èŠ‚æµå†™æ•°æ®çš„ä¸‰ç§æ–¹å¼ã€åº”ç”¨ã€‘"><a href="#2-3å­—èŠ‚æµå†™æ•°æ®çš„ä¸‰ç§æ–¹å¼ã€åº”ç”¨ã€‘" class="headerlink" title="2.3å­—èŠ‚æµå†™æ•°æ®çš„ä¸‰ç§æ–¹å¼ã€åº”ç”¨ã€‘"></a>2.3å­—èŠ‚æµå†™æ•°æ®çš„ä¸‰ç§æ–¹å¼ã€åº”ç”¨ã€‘</h3><ul><li><p>å†™æ•°æ®çš„æ–¹æ³•åˆ†ç±»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void   write(int b)</td><td>å°†æŒ‡å®šçš„å­—èŠ‚å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ   ä¸€æ¬¡å†™ä¸€ä¸ªå­—èŠ‚æ•°æ®</td></tr><tr><td>void   write(byte[] b)</td><td>å°† b.lengthå­—èŠ‚ä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ   ä¸€æ¬¡å†™ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ•°æ®</td></tr><tr><td>void   write(byte[] b, int off, int len)</td><td>å°† lenå­—èŠ‚ä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å¼€å§‹ï¼Œä»åç§»é‡offå¼€å§‹å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ   ä¸€æ¬¡å†™ä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„éƒ¨åˆ†æ•°æ®</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileOutputStreamDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//FileOutputStream(String name)ï¼šåˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶</span><br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myByteStream\\fos.txt&quot;</span>);<br>        <span class="hljs-comment">//FileOutputStream(File file)ï¼šåˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥å†™å…¥ç”±æŒ‡å®šçš„ Fileå¯¹è±¡è¡¨ç¤ºçš„æ–‡ä»¶</span><br><span class="hljs-comment">//        FileOutputStream fos = new FileOutputStream(new File(&quot;myByteStream\\fos.txt&quot;));</span><br><br>        <span class="hljs-comment">//void write(int b)ï¼šå°†æŒ‡å®šçš„å­—èŠ‚å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ</span><br><span class="hljs-comment">//        fos.write(97);</span><br><span class="hljs-comment">//        fos.write(98);</span><br><span class="hljs-comment">//        fos.write(99);</span><br><span class="hljs-comment">//        fos.write(100);</span><br><span class="hljs-comment">//        fos.write(101);</span><br><br><span class="hljs-comment">//        void write(byte[] b)ï¼šå°† b.lengthå­—èŠ‚ä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ</span><br><span class="hljs-comment">//        byte[] bys = &#123;97, 98, 99, 100, 101&#125;;</span><br>        <span class="hljs-comment">//byte[] getBytes()ï¼šè¿”å›å­—ç¬¦ä¸²å¯¹åº”çš„å­—èŠ‚æ•°ç»„</span><br>        <span class="hljs-type">byte</span>[] bys = <span class="hljs-string">&quot;abcde&quot;</span>.getBytes();<br><span class="hljs-comment">//        fos.write(bys);</span><br><br>        <span class="hljs-comment">//void write(byte[] b, int off, int len)ï¼šå°† lenå­—èŠ‚ä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å¼€å§‹ï¼Œä»åç§»é‡offå¼€å§‹å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ</span><br><span class="hljs-comment">//        fos.write(bys,0,bys.length);</span><br>        fos.write(bys,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>);<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        fos.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-4å­—èŠ‚æµå†™æ•°æ®çš„ä¸¤ä¸ªå°é—®é¢˜ã€åº”ç”¨ã€‘"><a href="#2-4å­—èŠ‚æµå†™æ•°æ®çš„ä¸¤ä¸ªå°é—®é¢˜ã€åº”ç”¨ã€‘" class="headerlink" title="2.4å­—èŠ‚æµå†™æ•°æ®çš„ä¸¤ä¸ªå°é—®é¢˜ã€åº”ç”¨ã€‘"></a>2.4å­—èŠ‚æµå†™æ•°æ®çš„ä¸¤ä¸ªå°é—®é¢˜ã€åº”ç”¨ã€‘</h3><ul><li><p>å­—èŠ‚æµå†™æ•°æ®å¦‚ä½•å®ç°æ¢è¡Œ</p><ul><li>windows:\r\n</li><li>linux:\n</li><li>mac:\r</li></ul></li><li><p>å­—èŠ‚æµå†™æ•°æ®å¦‚ä½•å®ç°è¿½åŠ å†™å…¥</p><ul><li>public FileOutputStream(String name,boolean append)</li><li>åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºtrue ï¼Œåˆ™å­—èŠ‚å°†å†™å…¥æ–‡ä»¶çš„æœ«å°¾è€Œä¸æ˜¯å¼€å¤´</li></ul></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileOutputStreamDemo03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå­—èŠ‚è¾“å‡ºæµå¯¹è±¡</span><br><span class="hljs-comment">//        FileOutputStream fos = new FileOutputStream(&quot;myByteStream\\fos.txt&quot;);</span><br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myByteStream\\fos.txt&quot;</span>,<span class="hljs-literal">true</span>);<br><br>        <span class="hljs-comment">//å†™æ•°æ®</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            fos.write(<span class="hljs-string">&quot;hello&quot;</span>.getBytes());<br>            fos.write(<span class="hljs-string">&quot;\r\n&quot;</span>.getBytes());<br>        &#125;<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        fos.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-5å­—èŠ‚æµå†™æ•°æ®åŠ å¼‚å¸¸å¤„ç†ã€åº”ç”¨ã€‘"><a href="#2-5å­—èŠ‚æµå†™æ•°æ®åŠ å¼‚å¸¸å¤„ç†ã€åº”ç”¨ã€‘" class="headerlink" title="2.5å­—èŠ‚æµå†™æ•°æ®åŠ å¼‚å¸¸å¤„ç†ã€åº”ç”¨ã€‘"></a>2.5å­—èŠ‚æµå†™æ•°æ®åŠ å¼‚å¸¸å¤„ç†ã€åº”ç”¨ã€‘</h3><ul><li><p>å¼‚å¸¸å¤„ç†æ ¼å¼</p><ul><li><p>try-catch-finally</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span>&#123;<br>å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç ;<br>&#125;<span class="hljs-keyword">catch</span>(å¼‚å¸¸ç±»å å˜é‡å)&#123;<br>å¼‚å¸¸çš„å¤„ç†ä»£ç ;<br>&#125;<span class="hljs-keyword">finally</span>&#123;<br>æ‰§è¡Œæ‰€æœ‰æ¸…é™¤æ“ä½œ;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>finallyç‰¹ç‚¹</p><ul><li>è¢«finallyæ§åˆ¶çš„è¯­å¥ä¸€å®šä¼šæ‰§è¡Œï¼Œé™¤éJVMé€€å‡º</li></ul></li></ul></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileOutputStreamDemo04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åŠ å…¥finallyæ¥å®ç°é‡Šæ”¾èµ„æº</span><br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myByteStream\\fos.txt&quot;</span>);<br>            fos.write(<span class="hljs-string">&quot;hello&quot;</span>.getBytes());<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">if</span>(fos != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    fos.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-6å­—èŠ‚æµè¯»æ•°æ®-ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚æ•°æ®-ã€åº”ç”¨ã€‘"><a href="#2-6å­—èŠ‚æµè¯»æ•°æ®-ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚æ•°æ®-ã€åº”ç”¨ã€‘" class="headerlink" title="2.6å­—èŠ‚æµè¯»æ•°æ®(ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚æ•°æ®)ã€åº”ç”¨ã€‘"></a>2.6å­—èŠ‚æµè¯»æ•°æ®(ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚æ•°æ®)ã€åº”ç”¨ã€‘</h3><ul><li><p>å­—èŠ‚è¾“å…¥æµ</p><ul><li>FileInputStream(String name)ï¼šé€šè¿‡æ‰“å¼€ä¸å®é™…æ–‡ä»¶çš„è¿æ¥æ¥åˆ›å»ºä¸€ä¸ªFileInputStream,è¯¥æ–‡ä»¶ç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„ånameå‘½å</li></ul></li><li><p>å­—èŠ‚è¾“å…¥æµè¯»å–æ•°æ®çš„æ­¥éª¤</p><ul><li>åˆ›å»ºå­—èŠ‚è¾“å…¥æµå¯¹è±¡</li><li>è°ƒç”¨å­—èŠ‚è¾“å…¥æµå¯¹è±¡çš„è¯»æ•°æ®æ–¹æ³•</li><li>é‡Šæ”¾èµ„æº</li></ul></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInputStreamDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå­—èŠ‚è¾“å…¥æµå¯¹è±¡</span><br>        <span class="hljs-comment">//FileInputStream(String name)</span><br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;myByteStream\\fos.txt&quot;</span>);<br><br>        <span class="hljs-type">int</span> by;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            fis.read()ï¼šè¯»æ•°æ®</span><br><span class="hljs-comment">            by=fis.read()ï¼šæŠŠè¯»å–åˆ°çš„æ•°æ®èµ‹å€¼ç»™by</span><br><span class="hljs-comment">            by != -1ï¼šåˆ¤æ–­è¯»å–åˆ°çš„æ•°æ®æ˜¯å¦æ˜¯-1</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">while</span> ((by=fis.read())!=-<span class="hljs-number">1</span>) &#123;<br>            System.out.print((<span class="hljs-type">char</span>)by);<br>        &#125;<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        fis.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-7å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶ã€åº”ç”¨ã€‘"><a href="#2-7å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶ã€åº”ç”¨ã€‘" class="headerlink" title="2.7å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶ã€åº”ç”¨ã€‘"></a>2.7å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>â€‹    æŠŠâ€œE:\itcast\çª—é‡Œçª—å¤–.txtâ€å¤åˆ¶åˆ°æ¨¡å—ç›®å½•ä¸‹çš„â€œçª—é‡Œçª—å¤–.txtâ€   (æ–‡ä»¶å¯ä»¥æ˜¯ä»»æ„æ–‡ä»¶)</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li><p>å¤åˆ¶æ–‡æœ¬æ–‡ä»¶ï¼Œå…¶å®å°±æŠŠæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å–å‡ºæ¥(æ•°æ®æº)ï¼Œç„¶åå†™å…¥åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­(ç›®çš„åœ°)</p></li><li><p>æ•°æ®æºï¼š</p><p>â€‹    E:\itcast\çª—é‡Œçª—å¤–.txt â€” è¯»æ•°æ® â€” InputStream â€” FileInputStream </p></li><li><p>ç›®çš„åœ°ï¼š</p><p>â€‹    myByteStream\çª—é‡Œçª—å¤–.txt â€” å†™æ•°æ® â€” OutputStream â€” FileOutputStream</p></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CopyTxtDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ ¹æ®æ•°æ®æºåˆ›å»ºå­—èŠ‚è¾“å…¥æµå¯¹è±¡</span><br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;E:\\itcast\\çª—é‡Œçª—å¤–.txt&quot;</span>);<br>        <span class="hljs-comment">//æ ¹æ®ç›®çš„åœ°åˆ›å»ºå­—èŠ‚è¾“å‡ºæµå¯¹è±¡</span><br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myByteStream\\çª—é‡Œçª—å¤–.txt&quot;</span>);<br><br>        <span class="hljs-comment">//è¯»å†™æ•°æ®ï¼Œå¤åˆ¶æ–‡æœ¬æ–‡ä»¶(ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œä¸€æ¬¡å†™å…¥ä¸€ä¸ªå­—èŠ‚)</span><br>        <span class="hljs-type">int</span> by;<br>        <span class="hljs-keyword">while</span> ((by=fis.read())!=-<span class="hljs-number">1</span>) &#123;<br>            fos.write(by);<br>        &#125;<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        fos.close();<br>        fis.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-8å­—èŠ‚æµè¯»æ•°æ®-ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ•°æ®-ã€åº”ç”¨ã€‘"><a href="#2-8å­—èŠ‚æµè¯»æ•°æ®-ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ•°æ®-ã€åº”ç”¨ã€‘" class="headerlink" title="2.8å­—èŠ‚æµè¯»æ•°æ®(ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ•°æ®)ã€åº”ç”¨ã€‘"></a>2.8å­—èŠ‚æµè¯»æ•°æ®(ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ•°æ®)ã€åº”ç”¨ã€‘</h3><ul><li><p>ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚æ•°ç»„çš„æ–¹æ³•</p><ul><li>public int read(byte[] b)ï¼šä»è¾“å…¥æµè¯»å–æœ€å¤šb.lengthä¸ªå­—èŠ‚çš„æ•°æ®</li><li>è¿”å›çš„æ˜¯è¯»å…¥ç¼“å†²åŒºçš„æ€»å­—èŠ‚æ•°,ä¹Ÿå°±æ˜¯å®é™…çš„è¯»å–å­—èŠ‚ä¸ªæ•°</li></ul></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInputStreamDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå­—èŠ‚è¾“å…¥æµå¯¹è±¡</span><br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;myByteStream\\fos.txt&quot;</span>);<br><br>        <span class="hljs-type">byte</span>[] bys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>]; <span class="hljs-comment">//1024åŠå…¶æ•´æ•°å€</span><br>        <span class="hljs-type">int</span> len;<br>      <span class="hljs-comment">//å¾ªç¯è¯»å–</span><br>        <span class="hljs-keyword">while</span> ((len=fis.read(bys))!=-<span class="hljs-number">1</span>) &#123;<br>            System.out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bys,<span class="hljs-number">0</span>,len));<br>        &#125;<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        fis.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-9å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶ã€åº”ç”¨ã€‘"><a href="#2-9å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶ã€åº”ç”¨ã€‘" class="headerlink" title="2.9å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶ã€åº”ç”¨ã€‘"></a>2.9å­—èŠ‚æµå¤åˆ¶æ–‡ä»¶ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>â€‹    æŠŠâ€œE:\itcast\mn.jpgâ€å¤åˆ¶åˆ°æ¨¡å—ç›®å½•ä¸‹çš„â€œmn.jpgâ€  (æ–‡ä»¶å¯ä»¥æ˜¯ä»»æ„æ–‡ä»¶å»)</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li>æ ¹æ®æ•°æ®æºåˆ›å»ºå­—èŠ‚è¾“å…¥æµå¯¹è±¡</li><li>æ ¹æ®ç›®çš„åœ°åˆ›å»ºå­—èŠ‚è¾“å‡ºæµå¯¹è±¡</li><li>è¯»å†™æ•°æ®ï¼Œå¤åˆ¶å›¾ç‰‡(ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œä¸€æ¬¡å†™å…¥ä¸€ä¸ªå­—èŠ‚æ•°ç»„)</li><li>é‡Šæ”¾èµ„æº</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CopyJpgDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//æ ¹æ®æ•°æ®æºåˆ›å»ºå­—èŠ‚è¾“å…¥æµå¯¹è±¡</span><br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;E:\\itcast\\mn.jpg&quot;</span>);<br>        <span class="hljs-comment">//æ ¹æ®ç›®çš„åœ°åˆ›å»ºå­—èŠ‚è¾“å‡ºæµå¯¹è±¡</span><br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myByteStream\\mn.jpg&quot;</span>);<br><br>        <span class="hljs-comment">//è¯»å†™æ•°æ®ï¼Œå¤åˆ¶å›¾ç‰‡(ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œä¸€æ¬¡å†™å…¥ä¸€ä¸ªå­—èŠ‚æ•°ç»„)</span><br>        <span class="hljs-type">byte</span>[] bys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span> ((len=fis.read(bys))!=-<span class="hljs-number">1</span>) &#123;<br>            fos.write(bys,<span class="hljs-number">0</span>,len);<br>        &#125;<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        fos.close();<br>        fis.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-å­—èŠ‚ç¼“å†²æµ"><a href="#3-å­—èŠ‚ç¼“å†²æµ" class="headerlink" title="3.å­—èŠ‚ç¼“å†²æµ"></a>3.å­—èŠ‚ç¼“å†²æµ</h2><h3 id="3-1å­—èŠ‚ç¼“å†²æµæ„é€ æ–¹æ³•ã€åº”ç”¨ã€‘"><a href="#3-1å­—èŠ‚ç¼“å†²æµæ„é€ æ–¹æ³•ã€åº”ç”¨ã€‘" class="headerlink" title="3.1å­—èŠ‚ç¼“å†²æµæ„é€ æ–¹æ³•ã€åº”ç”¨ã€‘"></a>3.1å­—èŠ‚ç¼“å†²æµæ„é€ æ–¹æ³•ã€åº”ç”¨ã€‘</h3><ul><li><p>å­—èŠ‚ç¼“å†²æµä»‹ç»</p><ul><li>lBufferOutputStreamï¼šè¯¥ç±»å®ç°ç¼“å†²è¾“å‡ºæµ.é€šè¿‡è®¾ç½®è¿™æ ·çš„è¾“å‡ºæµ,åº”ç”¨ç¨‹åºå¯ä»¥å‘åº•å±‚è¾“å‡ºæµå†™å…¥å­—èŠ‚,è€Œä¸å¿…ä¸ºå†™å…¥çš„æ¯ä¸ªå­—èŠ‚å¯¼è‡´åº•å±‚ç³»ç»Ÿçš„è°ƒç”¨</li><li>lBufferedInputStreamï¼šåˆ›å»ºBufferedInputStreamå°†åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç¼“å†²åŒºæ•°ç»„.å½“ä»æµä¸­è¯»å–æˆ–è·³è¿‡å­—èŠ‚æ—¶,å†…éƒ¨ç¼“å†²åŒºå°†æ ¹æ®éœ€è¦ä»æ‰€åŒ…å«çš„è¾“å…¥æµä¸­é‡æ–°å¡«å……,ä¸€æ¬¡å¾ˆå¤šå­—èŠ‚</li></ul></li><li><p>æ„é€ æ–¹æ³•ï¼š</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>BufferedOutputStream(OutputStream out)</td><td>åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å‡ºæµå¯¹è±¡</td></tr><tr><td>BufferedInputStream(InputStream in)</td><td>åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å…¥æµå¯¹è±¡</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferStreamDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">//å­—èŠ‚ç¼“å†²è¾“å‡ºæµï¼šBufferedOutputStream(OutputStream out)</span><br> <br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span>                                        <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myByteStream\\bos.txt&quot;</span>));<br>        <span class="hljs-comment">//å†™æ•°æ®</span><br>        bos.write(<span class="hljs-string">&quot;hello\r\n&quot;</span>.getBytes());<br>        bos.write(<span class="hljs-string">&quot;world\r\n&quot;</span>.getBytes());<br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        bos.close();<br>    <br><br>        <span class="hljs-comment">//å­—èŠ‚ç¼“å†²è¾“å…¥æµï¼šBufferedInputStream(InputStream in)</span><br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span>                                                          <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;myByteStream\\bos.txt&quot;</span>));<br><br>        <span class="hljs-comment">//ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚æ•°æ®</span><br><span class="hljs-comment">//        int by;</span><br><span class="hljs-comment">//        while ((by=bis.read())!=-1) &#123;</span><br><span class="hljs-comment">//            System.out.print((char)by);</span><br><span class="hljs-comment">//        &#125;</span><br><br>        <span class="hljs-comment">//ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ•°æ®</span><br>        <span class="hljs-type">byte</span>[] bys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span> ((len=bis.read(bys))!=-<span class="hljs-number">1</span>) &#123;<br>            System.out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bys,<span class="hljs-number">0</span>,len));<br>        &#125;<br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        bis.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-2å­—èŠ‚ç¼“å†²æµå¤åˆ¶è§†é¢‘ã€åº”ç”¨ã€‘"><a href="#3-2å­—èŠ‚ç¼“å†²æµå¤åˆ¶è§†é¢‘ã€åº”ç”¨ã€‘" class="headerlink" title="3.2å­—èŠ‚ç¼“å†²æµå¤åˆ¶è§†é¢‘ã€åº”ç”¨ã€‘"></a>3.2å­—èŠ‚ç¼“å†²æµå¤åˆ¶è§†é¢‘ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>æŠŠâ€œE:\itcast\å­—èŠ‚æµå¤åˆ¶å›¾ç‰‡.aviâ€å¤åˆ¶åˆ°æ¨¡å—ç›®å½•ä¸‹çš„â€œå­—èŠ‚æµå¤åˆ¶å›¾ç‰‡.aviâ€</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li>æ ¹æ®æ•°æ®æºåˆ›å»ºå­—èŠ‚è¾“å…¥æµå¯¹è±¡</li><li>æ ¹æ®ç›®çš„åœ°åˆ›å»ºå­—èŠ‚è¾“å‡ºæµå¯¹è±¡</li><li>è¯»å†™æ•°æ®ï¼Œå¤åˆ¶è§†é¢‘</li><li>é‡Šæ”¾èµ„æº</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CopyAviDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//å¤åˆ¶è§†é¢‘</span><br><span class="hljs-comment">//        method1();</span><br>       method2();<br><br>    &#125;<br><br>    <span class="hljs-comment">//å­—èŠ‚ç¼“å†²æµä¸€æ¬¡è¯»å†™ä¸€ä¸ªå­—èŠ‚æ•°ç»„</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;E:\\itcast\\å­—èŠ‚æµå¤åˆ¶å›¾ç‰‡.avi&quot;</span>));<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myByteStream\\å­—èŠ‚æµå¤åˆ¶å›¾ç‰‡.avi&quot;</span>));<br><br>        <span class="hljs-type">byte</span>[] bys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span> ((len=bis.read(bys))!=-<span class="hljs-number">1</span>) &#123;<br>            bos.write(bys,<span class="hljs-number">0</span>,len);<br>        &#125;<br><br>        bos.close();<br>        bis.close();<br>    &#125;<br><br>    <span class="hljs-comment">//å­—èŠ‚ç¼“å†²æµä¸€æ¬¡è¯»å†™ä¸€ä¸ªå­—èŠ‚</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;E:\\itcast\\å­—èŠ‚æµå¤åˆ¶å›¾ç‰‡.avi&quot;</span>));<br>        <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;myByteStream\\å­—èŠ‚æµå¤åˆ¶å›¾ç‰‡.avi&quot;</span>));<br><br>        <span class="hljs-type">int</span> by;<br>        <span class="hljs-keyword">while</span> ((by=bis.read())!=-<span class="hljs-number">1</span>) &#123;<br>            bos.write(by);<br>        &#125;<br><br>        bos.close();<br>        bis.close();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mapé›†åˆ</title>
    <link href="/Hexo/2021/03/28/%E9%9B%86%E5%90%8803/"/>
    <url>/Hexo/2021/03/28/%E9%9B%86%E5%90%8803/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Mapé›†åˆ"><a href="#1-Mapé›†åˆ" class="headerlink" title="1.Mapé›†åˆ"></a>1.Mapé›†åˆ</h2><h3 id="1-1Mapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘"><a href="#1-1Mapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘" class="headerlink" title="1.1Mapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘"></a>1.1Mapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘</h3><ul><li><p>Mapé›†åˆæ¦‚è¿°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Map</span>&lt;K,V&gt;  Kï¼šé”®çš„ç±»å‹ï¼›Vï¼šå€¼çš„ç±»å‹<br></code></pre></td></tr></table></figure></li><li><p>Mapé›†åˆçš„ç‰¹ç‚¹</p><ul><li>åŒåˆ—é›†åˆ,<font color='red'>ä¸€ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼</font></li><li>é”®ä¸å¯ä»¥é‡å¤,å€¼å¯ä»¥é‡å¤</li></ul></li><li><p>Mapé›†åˆçš„åŸºæœ¬ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        Map&lt;String,String&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String,String&gt;();<br>        <span class="hljs-comment">//V put(K key, V value) å°†æŒ‡å®šçš„å€¼ä¸è¯¥æ˜ å°„ä¸­çš„æŒ‡å®šé”®ç›¸å…³è”</span><br>        map.put(<span class="hljs-string">&quot;itheima001&quot;</span>,<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;itheima002&quot;</span>,<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;itheima003&quot;</span>,<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;itheima003&quot;</span>,<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br>        <span class="hljs-comment">//è¾“å‡ºé›†åˆå¯¹è±¡</span><br>        System.out.println(map);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-2Mapé›†åˆçš„åŸºæœ¬åŠŸèƒ½ã€åº”ç”¨ã€‘"><a href="#1-2Mapé›†åˆçš„åŸºæœ¬åŠŸèƒ½ã€åº”ç”¨ã€‘" class="headerlink" title="1.2Mapé›†åˆçš„åŸºæœ¬åŠŸèƒ½ã€åº”ç”¨ã€‘"></a>1.2Mapé›†åˆçš„åŸºæœ¬åŠŸèƒ½ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>V   put(K key,V   value)</td><td>æ·»åŠ å…ƒç´ </td></tr><tr><td>V   remove(Object key)</td><td>æ ¹æ®é”®åˆ é™¤é”®å€¼å¯¹å…ƒç´ </td></tr><tr><td>void   clear()</td><td>ç§»é™¤æ‰€æœ‰çš„é”®å€¼å¯¹å…ƒç´ </td></tr><tr><td>boolean containsKey(Object key)</td><td>åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®</td></tr><tr><td>boolean containsValue(Object value)</td><td>åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼</td></tr><tr><td>boolean isEmpty()</td><td>åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º</td></tr><tr><td>int size()</td><td>é›†åˆçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯é›†åˆä¸­é”®å€¼å¯¹çš„ä¸ªæ•°</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        Map&lt;String,String&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String,String&gt;();<br><br>        <span class="hljs-comment">//V put(K key,V value)ï¼šæ·»åŠ å…ƒç´ </span><br>        map.put(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>,<span class="hljs-string">&quot;èµµæ•&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;éƒ­é–&quot;</span>,<span class="hljs-string">&quot;é»„è“‰&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;æ¨è¿‡&quot;</span>,<span class="hljs-string">&quot;å°é¾™å¥³&quot;</span>);<br><br>        <span class="hljs-comment">//V remove(Object key)ï¼šæ ¹æ®é”®åˆ é™¤é”®å€¼å¯¹å…ƒç´ </span><br><span class="hljs-comment">//        System.out.println(map.remove(&quot;éƒ­é–&quot;));</span><br><span class="hljs-comment">//        System.out.println(map.remove(&quot;éƒ­è¥„&quot;));</span><br><br>        <span class="hljs-comment">//void clear()ï¼šç§»é™¤æ‰€æœ‰çš„é”®å€¼å¯¹å…ƒç´ </span><br><span class="hljs-comment">//        map.clear();</span><br><br>        <span class="hljs-comment">//boolean containsKey(Object key)ï¼šåˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®</span><br><span class="hljs-comment">//        System.out.println(map.containsKey(&quot;éƒ­é–&quot;));</span><br><span class="hljs-comment">//        System.out.println(map.containsKey(&quot;éƒ­è¥„&quot;));</span><br><br>        <span class="hljs-comment">//boolean isEmpty()ï¼šåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º</span><br><span class="hljs-comment">//        System.out.println(map.isEmpty());</span><br><br>        <span class="hljs-comment">//int size()ï¼šé›†åˆçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯é›†åˆä¸­é”®å€¼å¯¹çš„ä¸ªæ•°</span><br>        System.out.println(map.size());<br><br>        <span class="hljs-comment">//è¾“å‡ºé›†åˆå¯¹è±¡</span><br>        System.out.println(map);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-3Mapé›†åˆçš„è·å–åŠŸèƒ½ã€åº”ç”¨ã€‘"><a href="#1-3Mapé›†åˆçš„è·å–åŠŸèƒ½ã€åº”ç”¨ã€‘" class="headerlink" title="1.3Mapé›†åˆçš„è·å–åŠŸèƒ½ã€åº”ç”¨ã€‘"></a>1.3Mapé›†åˆçš„è·å–åŠŸèƒ½ã€åº”ç”¨ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>V   get(Object key)</td><td>æ ¹æ®é”®è·å–å€¼</td></tr><tr><td>Set<K>   keySet()</td><td>è·å–æ‰€æœ‰é”®çš„é›†åˆ</td></tr><tr><td>Collection<V>   values()</td><td>è·å–æ‰€æœ‰å€¼çš„é›†åˆ</td></tr><tr><td>Set&lt;Map.Entry&lt;K,V&gt;&gt;   entrySet()</td><td>è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapDemo03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        Map&lt;String, String&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, String&gt;();<br><br>        <span class="hljs-comment">//æ·»åŠ å…ƒç´ </span><br>        map.put(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="hljs-string">&quot;èµµæ•&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;éƒ­é–&quot;</span>, <span class="hljs-string">&quot;é»„è“‰&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;æ¨è¿‡&quot;</span>, <span class="hljs-string">&quot;å°é¾™å¥³&quot;</span>);<br><br>        <span class="hljs-comment">//V get(Object key):æ ¹æ®é”®è·å–å€¼</span><br><span class="hljs-comment">//        System.out.println(map.get(&quot;å¼ æ— å¿Œ&quot;));</span><br><span class="hljs-comment">//        System.out.println(map.get(&quot;å¼ ä¸‰ä¸°&quot;));</span><br><br>        <span class="hljs-comment">//Set&lt;K&gt; keySet():è·å–æ‰€æœ‰é”®çš„é›†åˆ</span><br><span class="hljs-comment">//        Set&lt;String&gt; keySet = map.keySet();</span><br><span class="hljs-comment">//        for(String key : keySet) &#123;</span><br><span class="hljs-comment">//            System.out.println(key);</span><br><span class="hljs-comment">//        &#125;</span><br><br>        <span class="hljs-comment">//Collection&lt;V&gt; values():è·å–æ‰€æœ‰å€¼çš„é›†åˆ</span><br>        Collection&lt;String&gt; values = map.values();<br>        <span class="hljs-keyword">for</span>(String value : values) &#123;<br>            System.out.println(value);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-4Mapé›†åˆçš„éå†-æ–¹å¼1-ã€åº”ç”¨ã€‘"><a href="#1-4Mapé›†åˆçš„éå†-æ–¹å¼1-ã€åº”ç”¨ã€‘" class="headerlink" title="1.4Mapé›†åˆçš„éå†(æ–¹å¼1)ã€åº”ç”¨ã€‘"></a>1.4Mapé›†åˆçš„éå†(æ–¹å¼1)ã€åº”ç”¨ã€‘</h3><ul><li><p>éå†æ€è·¯</p><ul><li>æˆ‘ä»¬åˆšæ‰å­˜å‚¨çš„å…ƒç´ éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠMapçœ‹æˆæ˜¯ä¸€ä¸ªå¤«å¦»å¯¹çš„é›†åˆ<ul><li>æŠŠæ‰€æœ‰çš„ä¸ˆå¤«ç»™é›†ä¸­èµ·æ¥</li><li>éå†ä¸ˆå¤«çš„é›†åˆï¼Œè·å–åˆ°æ¯ä¸€ä¸ªä¸ˆå¤«</li><li>æ ¹æ®ä¸ˆå¤«å»æ‰¾å¯¹åº”çš„å¦»å­</li></ul></li></ul></li><li><p>æ­¥éª¤åˆ†æ</p><ul><li>è·å–æ‰€æœ‰é”®çš„é›†åˆã€‚ç”¨keySet()æ–¹æ³•å®ç°</li><li>éå†é”®çš„é›†åˆï¼Œè·å–åˆ°æ¯ä¸€ä¸ªé”®ã€‚ç”¨å¢å¼ºforå®ç°  </li><li>æ ¹æ®é”®å»æ‰¾å€¼ã€‚ç”¨get(Object key)æ–¹æ³•å®ç°</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        Map&lt;String, String&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, String&gt;();<br><br>        <span class="hljs-comment">//æ·»åŠ å…ƒç´ </span><br>        map.put(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="hljs-string">&quot;èµµæ•&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;éƒ­é–&quot;</span>, <span class="hljs-string">&quot;é»„è“‰&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;æ¨è¿‡&quot;</span>, <span class="hljs-string">&quot;å°é¾™å¥³&quot;</span>);<br><br>        <span class="hljs-comment">//è·å–æ‰€æœ‰é”®çš„é›†åˆã€‚ç”¨keySet()æ–¹æ³•å®ç°</span><br>        Set&lt;String&gt; keySet = map.keySet();<br>        <span class="hljs-comment">//éå†é”®çš„é›†åˆï¼Œè·å–åˆ°æ¯ä¸€ä¸ªé”®ã€‚ç”¨å¢å¼ºforå®ç°</span><br>        <span class="hljs-keyword">for</span> (String key : keySet) &#123;<br>            <span class="hljs-comment">//æ ¹æ®é”®å»æ‰¾å€¼ã€‚ç”¨get(Object key)æ–¹æ³•å®ç°</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> map.get(key);<br>            System.out.println(key + <span class="hljs-string">&quot;,&quot;</span> + value);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-5Mapé›†åˆçš„éå†-æ–¹å¼2-ã€åº”ç”¨ã€‘"><a href="#1-5Mapé›†åˆçš„éå†-æ–¹å¼2-ã€åº”ç”¨ã€‘" class="headerlink" title="1.5Mapé›†åˆçš„éå†(æ–¹å¼2)ã€åº”ç”¨ã€‘"></a>1.5Mapé›†åˆçš„éå†(æ–¹å¼2)ã€åº”ç”¨ã€‘</h3><ul><li><p>éå†æ€è·¯</p><ul><li>æˆ‘ä»¬åˆšæ‰å­˜å‚¨çš„å…ƒç´ éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠMapçœ‹æˆæ˜¯ä¸€ä¸ªå¤«å¦»å¯¹çš„é›†åˆ<ul><li>è·å–æ‰€æœ‰ç»“å©šè¯çš„é›†åˆ</li><li>éå†ç»“å©šè¯çš„é›†åˆï¼Œå¾—åˆ°æ¯ä¸€ä¸ªç»“å©šè¯</li><li>æ ¹æ®ç»“å©šè¯è·å–ä¸ˆå¤«å’Œå¦»å­</li></ul></li></ul></li><li><p>æ­¥éª¤åˆ†æ</p><ul><li>è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ<ul><li>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()ï¼šè·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ</li></ul></li><li>éå†é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆï¼Œå¾—åˆ°æ¯ä¸€ä¸ªé”®å€¼å¯¹å¯¹è±¡<ul><li>ç”¨å¢å¼ºforå®ç°ï¼Œå¾—åˆ°æ¯ä¸€ä¸ªMap.Entry</li></ul></li><li>æ ¹æ®é”®å€¼å¯¹å¯¹è±¡è·å–é”®å’Œå€¼<ul><li>ç”¨getKey()å¾—åˆ°é”®</li><li>ç”¨getValue()å¾—åˆ°å€¼</li></ul></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        Map&lt;String, String&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, String&gt;();<br><br>        <span class="hljs-comment">//æ·»åŠ å…ƒç´ </span><br>        map.put(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="hljs-string">&quot;èµµæ•&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;éƒ­é–&quot;</span>, <span class="hljs-string">&quot;é»„è“‰&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;æ¨è¿‡&quot;</span>, <span class="hljs-string">&quot;å°é¾™å¥³&quot;</span>);<br><br>        <span class="hljs-comment">//è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ</span><br>        Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySet = map.entrySet();<br>        <span class="hljs-comment">//éå†é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆï¼Œå¾—åˆ°æ¯ä¸€ä¸ªé”®å€¼å¯¹å¯¹è±¡</span><br>        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, String&gt; me : entrySet) &#123;<br>            <span class="hljs-comment">//æ ¹æ®é”®å€¼å¯¹å¯¹è±¡è·å–é”®å’Œå€¼</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> me.getKey();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> me.getValue();<br>            System.out.println(key + <span class="hljs-string">&quot;,&quot;</span> + value);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-HashMapé›†åˆ"><a href="#2-HashMapé›†åˆ" class="headerlink" title="2.HashMapé›†åˆ"></a>2.HashMapé›†åˆ</h2><h3 id="2-1HashMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘"><a href="#2-1HashMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘" class="headerlink" title="2.1HashMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘"></a>2.1HashMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘</h3><ul><li>HashMapåº•å±‚æ˜¯å“ˆå¸Œè¡¨ç»“æ„çš„</li><li>ä¾èµ–hashCodeæ–¹æ³•å’Œequalsæ–¹æ³•ä¿è¯é”®çš„å”¯ä¸€</li><li>å¦‚æœé”®è¦å­˜å‚¨çš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡ï¼Œéœ€è¦é‡å†™hashCodeå’Œequalsæ–¹æ³•</li></ul><h3 id="2-2HashMapé›†åˆåº”ç”¨æ¡ˆä¾‹ã€åº”ç”¨ã€‘"><a href="#2-2HashMapé›†åˆåº”ç”¨æ¡ˆä¾‹ã€åº”ç”¨ã€‘" class="headerlink" title="2.2HashMapé›†åˆåº”ç”¨æ¡ˆä¾‹ã€åº”ç”¨ã€‘"></a>2.2HashMapé›†åˆåº”ç”¨æ¡ˆä¾‹ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>åˆ›å»ºä¸€ä¸ªHashMapé›†åˆï¼Œé”®æ˜¯å­¦ç”Ÿå¯¹è±¡(Student)ï¼Œå€¼æ˜¯å±…ä½åœ° (String)ã€‚å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œå¹¶éå†ã€‚</li><li>è¦æ±‚ä¿è¯é”®çš„å”¯ä¸€æ€§ï¼šå¦‚æœå­¦ç”Ÿå¯¹è±¡çš„æˆå‘˜å˜é‡å€¼ç›¸åŒï¼Œæˆ‘ä»¬å°±è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡</li></ul></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> (Student) o;<br><br>        <span class="hljs-keyword">if</span> (age != student.age) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">return</span> name != <span class="hljs-literal">null</span> ? name.equals(student.name) : student.name == <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> name != <span class="hljs-literal">null</span> ? name.hashCode() : <span class="hljs-number">0</span>;<br>        result = <span class="hljs-number">31</span> * result + age;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashMapDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºHashMapé›†åˆå¯¹è±¡</span><br>        HashMap&lt;Student, String&gt; hm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;Student, String&gt;();<br><br>        <span class="hljs-comment">//åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>, <span class="hljs-number">30</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>, <span class="hljs-number">35</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>, <span class="hljs-number">33</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>, <span class="hljs-number">33</span>);<br><br>        <span class="hljs-comment">//æŠŠå­¦ç”Ÿæ·»åŠ åˆ°é›†åˆ</span><br>        hm.put(s1, <span class="hljs-string">&quot;è¥¿å®‰&quot;</span>);<br>        hm.put(s2, <span class="hljs-string">&quot;æ­¦æ±‰&quot;</span>);<br>        hm.put(s3, <span class="hljs-string">&quot;éƒ‘å·&quot;</span>);<br>        hm.put(s4, <span class="hljs-string">&quot;åŒ—äº¬&quot;</span>);<br><br>        <span class="hljs-comment">//éå†é›†åˆ</span><br>        Set&lt;Student&gt; keySet = hm.keySet();<br>        <span class="hljs-keyword">for</span> (Student key : keySet) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> hm.get(key);<br>            System.out.println(key.getName() + <span class="hljs-string">&quot;,&quot;</span> + key.getAge() + <span class="hljs-string">&quot;,&quot;</span> + value);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-TreeMapé›†åˆ"><a href="#3-TreeMapé›†åˆ" class="headerlink" title="3.TreeMapé›†åˆ"></a>3.TreeMapé›†åˆ</h2><h3 id="3-1TreeMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘"><a href="#3-1TreeMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘" class="headerlink" title="3.1TreeMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘"></a>3.1TreeMapé›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€ç†è§£ã€‘</h3><ul><li>TreeMapåº•å±‚æ˜¯çº¢é»‘æ ‘ç»“æ„</li><li>ä¾èµ–è‡ªç„¶æ’åºæˆ–è€…æ¯”è¾ƒå™¨æ’åº,å¯¹é”®è¿›è¡Œæ’åº</li><li>å¦‚æœé”®å­˜å‚¨çš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡,éœ€è¦å®ç°Comparableæ¥å£æˆ–è€…åœ¨åˆ›å»ºTreeMapå¯¹è±¡æ—¶å€™ç»™å‡ºæ¯”è¾ƒå™¨æ’åºè§„åˆ™</li></ul><h3 id="3-2TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹ä¸€ã€åº”ç”¨ã€‘"><a href="#3-2TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹ä¸€ã€åº”ç”¨ã€‘" class="headerlink" title="3.2TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹ä¸€ã€åº”ç”¨ã€‘"></a>3.2TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹ä¸€ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>åˆ›å»ºä¸€ä¸ªTreeMapé›†åˆ,é”®æ˜¯å­¦ç”Ÿå¯¹è±¡(Student),å€¼æ˜¯ç±è´¯(String),å­¦ç”Ÿå±æ€§å§“åå’Œå¹´é¾„,æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åºå¹¶éå†</li><li>è¦æ±‚æŒ‰ç…§å­¦ç”Ÿçš„å¹´é¾„è¿›è¡Œæ’åº,å¦‚æœå¹´é¾„ç›¸åŒåˆ™æŒ‰ç…§å§“åè¿›è¡Œæ’åº</li></ul></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;Student&gt;&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(Student o)</span> &#123;<br>        <span class="hljs-comment">//æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åº</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> o.getAge() - <span class="hljs-built_in">this</span>.getAge();<br>        <span class="hljs-comment">//æ¬¡è¦æ¡ä»¶ï¼ŒæŒ‰ç…§å§“åæ’åºã€‚</span><br>        result = result == <span class="hljs-number">0</span> ? o.getName().compareTo(<span class="hljs-built_in">this</span>.getName()) : result;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// åˆ›å»ºTreeMapé›†åˆå¯¹è±¡</span><br>        TreeMap&lt;Student,String&gt; tm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;();<br>      <br><span class="hljs-comment">// åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;xiaohei&quot;</span>,<span class="hljs-number">23</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;dapang&quot;</span>,<span class="hljs-number">22</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;xiaomei&quot;</span>,<span class="hljs-number">22</span>);<br>      <br><span class="hljs-comment">// å°†å­¦ç”Ÿå¯¹è±¡æ·»åŠ åˆ°TreeMapé›†åˆä¸­</span><br>        tm.put(s1,<span class="hljs-string">&quot;æ±Ÿè‹&quot;</span>);<br>        tm.put(s2,<span class="hljs-string">&quot;åŒ—äº¬&quot;</span>);<br>        tm.put(s3,<span class="hljs-string">&quot;å¤©æ´¥&quot;</span>);<br>      <br><span class="hljs-comment">// éå†TreeMapé›†åˆ,æ‰“å°æ¯ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯</span><br>        tm.forEach(<br>                (Student key, String value)-&gt;&#123;<br>                    System.out.println(key + <span class="hljs-string">&quot;---&quot;</span> + value);<br>                &#125;<br>        );<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-3TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹äºŒã€åº”ç”¨ã€‘"><a href="#3-3TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹äºŒã€åº”ç”¨ã€‘" class="headerlink" title="3.3TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹äºŒã€åº”ç”¨ã€‘"></a>3.3TreeMapé›†åˆåº”ç”¨æ¡ˆä¾‹äºŒã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²,è¦æ±‚ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚</li><li>ä¸¾ä¾‹: ç»™å®šå­—ç¬¦ä¸²æ˜¯â€œaababcabcdabcdeâ€,åœ¨æ§åˆ¶å°è¾“å‡º: â€œa(5)b(4)c(3)d(2)e(1)â€</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// ç»™å®šå­—ç¬¦ä¸²</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;aababcabcdabcde&quot;</span>;<br><span class="hljs-comment">// åˆ›å»ºTreeMapé›†åˆå¯¹è±¡,é”®æ˜¯Character,å€¼æ˜¯Integer</span><br>        TreeMap&lt;Character,Integer&gt; tm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;();<br><br>        <span class="hljs-comment">//éå†å­—ç¬¦ä¸²ï¼Œå¾—åˆ°æ¯ä¸€ä¸ªå­—ç¬¦</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; s.length(); i++) &#123;<br>            <span class="hljs-comment">//cä¾æ¬¡è¡¨ç¤ºå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦</span><br>            <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> s.charAt(i);<br>          <span class="hljs-comment">// åˆ¤æ–­å½“å‰éå†åˆ°çš„å­—ç¬¦æ˜¯å¦åœ¨é›†åˆä¸­å‡ºç°è¿‡</span><br>            <span class="hljs-keyword">if</span>(!tm.containsKey(c))&#123;<br>                <span class="hljs-comment">//è¡¨ç¤ºå½“å‰å­—ç¬¦æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°ã€‚</span><br>                tm.put(c,<span class="hljs-number">1</span>);<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-comment">//å­˜åœ¨ï¼Œè¡¨ç¤ºå½“å‰å­—ç¬¦å·²ç»å‡ºç°è¿‡äº†</span><br>                <span class="hljs-comment">//å…ˆè·å–è¿™ä¸ªå­—ç¬¦å·²ç»å‡ºç°çš„æ¬¡æ•°</span><br>                <span class="hljs-type">Integer</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> tm.get(c);<br>                <span class="hljs-comment">//è‡ªå¢ï¼Œè¡¨ç¤ºè¿™ä¸ªå­—ç¬¦åˆå‡ºç°äº†ä¾æ¬¡</span><br>                count++;<br>                <span class="hljs-comment">//å°†è‡ªå¢åçš„ç»“æœå†æ¬¡æ·»åŠ åˆ°é›†åˆä¸­ã€‚</span><br>                tm.put(c,count);<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//  aï¼ˆ5ï¼‰bï¼ˆ4ï¼‰cï¼ˆ3ï¼‰dï¼ˆ2ï¼‰eï¼ˆ1ï¼‰</span><br>        <span class="hljs-comment">//System.out.println(tm);</span><br>        tm.forEach(<br>                (Character key,Integer value)-&gt;&#123;<br>                    System.out.print(key + <span class="hljs-string">&quot;ï¼ˆ&quot;</span> + value + <span class="hljs-string">&quot;ï¼‰&quot;</span>);<br>                &#125;<br>        );<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-å¯å˜å‚æ•°"><a href="#4-å¯å˜å‚æ•°" class="headerlink" title="4.å¯å˜å‚æ•°"></a>4.å¯å˜å‚æ•°</h2><h3 id="4-1å¯å˜å‚æ•°ã€åº”ç”¨ã€‘"><a href="#4-1å¯å˜å‚æ•°ã€åº”ç”¨ã€‘" class="headerlink" title="4.1å¯å˜å‚æ•°ã€åº”ç”¨ã€‘"></a>4.1å¯å˜å‚æ•°ã€åº”ç”¨ã€‘</h3><ul><li><p>å¯å˜å‚æ•°ä»‹ç»</p><ul><li>å¯å˜å‚æ•°åˆç§°å‚æ•°ä¸ªæ•°å¯å˜ï¼Œç”¨ä½œæ–¹æ³•çš„å½¢å‚å‡ºç°ï¼Œé‚£ä¹ˆæ–¹æ³•å‚æ•°ä¸ªæ•°å°±æ˜¯å¯å˜çš„äº†</li><li>æ–¹æ³•çš„å‚æ•°ç±»å‹å·²ç»ç¡®å®š,ä¸ªæ•°ä¸ç¡®å®š,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯å˜å‚æ•°</li></ul></li><li><p>å¯å˜å‚æ•°å®šä¹‰æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ•°æ®ç±»å‹â€¦ å˜é‡å) &#123;  &#125;<br></code></pre></td></tr></table></figure></li><li><p>å¯å˜å‚æ•°çš„æ³¨æ„äº‹é¡¹</p><ul><li>è¿™é‡Œçš„å˜é‡å…¶å®æ˜¯ä¸€ä¸ªæ•°ç»„</li><li>å¦‚æœä¸€ä¸ªæ–¹æ³•æœ‰å¤šä¸ªå‚æ•°ï¼ŒåŒ…å«å¯å˜å‚æ•°ï¼Œå¯å˜å‚æ•°è¦æ”¾åœ¨æœ€å</li></ul></li><li><p>å¯å˜å‚æ•°çš„åŸºæœ¬ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArgsDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(sum(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>));<br>        System.out.println(sum(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>));<br>        System.out.println(sum(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>));<br><br>        System.out.println(sum(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>,<span class="hljs-number">50</span>));<br>        System.out.println(sum(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>,<span class="hljs-number">50</span>,<span class="hljs-number">60</span>));<br>        System.out.println(sum(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>,<span class="hljs-number">50</span>,<span class="hljs-number">60</span>,<span class="hljs-number">70</span>));<br>        System.out.println(sum(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>,<span class="hljs-number">50</span>,<span class="hljs-number">60</span>,<span class="hljs-number">70</span>,<span class="hljs-number">80</span>,<span class="hljs-number">90</span>,<span class="hljs-number">100</span>));<br>    &#125;<br><br><span class="hljs-comment">//    public static int sum(int b,int... a) &#123;</span><br><span class="hljs-comment">//        return 0;</span><br><span class="hljs-comment">//    &#125;</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">int</span>... a)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i : a) &#123;<br>            sum += i;<br>        &#125;<br>        <span class="hljs-keyword">return</span> sum;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-2åˆ›å»ºä¸å¯å˜é›†åˆã€ç†è§£ã€‘"><a href="#4-2åˆ›å»ºä¸å¯å˜é›†åˆã€ç†è§£ã€‘" class="headerlink" title="4.2åˆ›å»ºä¸å¯å˜é›†åˆã€ç†è§£ã€‘"></a>4.2åˆ›å»ºä¸å¯å˜é›†åˆã€ç†è§£ã€‘</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><ul><li>åœ¨Listã€Setã€Mapæ¥å£ä¸­,éƒ½å­˜åœ¨ofæ–¹æ³•,å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸å¯å˜çš„é›†åˆ<ul><li>è¿™ä¸ªé›†åˆä¸èƒ½æ·»åŠ ,ä¸èƒ½åˆ é™¤,ä¸èƒ½ä¿®æ”¹</li><li>ä½†æ˜¯å¯ä»¥ç»“åˆé›†åˆçš„å¸¦å‚æ„é€ ,å®ç°é›†åˆçš„æ‰¹é‡æ·»åŠ </li></ul></li><li>åœ¨Mapæ¥å£ä¸­,è¿˜æœ‰ä¸€ä¸ªofEntriesæ–¹æ³•å¯ä»¥æé«˜ä»£ç çš„é˜…è¯»æ€§<ul><li>é¦–å…ˆä¼šæŠŠé”®å€¼å¯¹å°è£…æˆä¸€ä¸ªEntryå¯¹è±¡,å†æŠŠè¿™ä¸ªEntryå¯¹è±¡æ·»åŠ åˆ°é›†åˆå½“ä¸­</li></ul></li></ul></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyVariableParameter4</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// static &lt;E&gt;  List&lt;E&gt;  of(Eâ€¦elements)  åˆ›å»ºä¸€ä¸ªå…·æœ‰æŒ‡å®šå…ƒç´ çš„Listé›†åˆå¯¹è±¡</span><br>        <span class="hljs-comment">//static &lt;E&gt;  Set&lt;E&gt;  of(Eâ€¦elements)    åˆ›å»ºä¸€ä¸ªå…·æœ‰æŒ‡å®šå…ƒç´ çš„Seté›†åˆå¯¹è±¡</span><br>        <span class="hljs-comment">//static &lt;K , V&gt;   Map&lt;Kï¼ŒV&gt;  of(Eâ€¦elements) åˆ›å»ºä¸€ä¸ªå…·æœ‰æŒ‡å®šå…ƒç´ çš„Mapé›†åˆå¯¹è±¡</span><br><br>        <span class="hljs-comment">//method1();</span><br>        <span class="hljs-comment">//method2();</span><br>        <span class="hljs-comment">//method3();</span><br>        <span class="hljs-comment">//method4();</span><br><br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method4</span><span class="hljs-params">()</span> &#123;<br>        Map&lt;String, String&gt; map = Map.ofEntries(<br>                Map.entry(<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;æ±Ÿè‹&quot;</span>),<br>                Map.entry(<span class="hljs-string">&quot;lisi&quot;</span>, <span class="hljs-string">&quot;åŒ—äº¬&quot;</span>));<br>        System.out.println(map);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method3</span><span class="hljs-params">()</span> &#123;<br>        Map&lt;String, String&gt; map = Map.of(<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;æ±Ÿè‹&quot;</span>, <span class="hljs-string">&quot;lisi&quot;</span>, <span class="hljs-string">&quot;åŒ—äº¬&quot;</span>, <span class="hljs-string">&quot;wangwu&quot;</span>, <span class="hljs-string">&quot;å¤©æ´¥&quot;</span>);<br>        System.out.println(map);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method2</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//ä¼ é€’çš„å‚æ•°å½“ä¸­ï¼Œä¸èƒ½å­˜åœ¨é‡å¤çš„å…ƒç´ ã€‚</span><br>        Set&lt;String&gt; set = Set.of(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>,<span class="hljs-string">&quot;a&quot;</span>);<br>        System.out.println(set);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method1</span><span class="hljs-params">()</span> &#123;<br>        List&lt;String&gt; list = List.of(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>);<br>        System.out.println(list);<br>        <span class="hljs-comment">//list.add(&quot;Q&quot;);</span><br>        <span class="hljs-comment">//list.remove(&quot;a&quot;);</span><br>        <span class="hljs-comment">//list.set(0,&quot;A&quot;);</span><br>        <span class="hljs-comment">//System.out.println(list);</span><br><br><span class="hljs-comment">//        ArrayList&lt;String&gt; list2 = new ArrayList&lt;&gt;();</span><br><span class="hljs-comment">//        list2.add(&quot;aaa&quot;);</span><br><span class="hljs-comment">//        list2.add(&quot;aaa&quot;);</span><br><span class="hljs-comment">//        list2.add(&quot;aaa&quot;);</span><br><span class="hljs-comment">//        list2.add(&quot;aaa&quot;);</span><br><br>        <span class="hljs-comment">//é›†åˆçš„æ‰¹é‡æ·»åŠ ã€‚</span><br>        <span class="hljs-comment">//é¦–å…ˆæ˜¯é€šè¿‡è°ƒç”¨List.ofæ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªä¸å¯å˜çš„é›†åˆï¼Œofæ–¹æ³•çš„å½¢å‚å°±æ˜¯ä¸€ä¸ªå¯å˜å‚æ•°ã€‚</span><br>        <span class="hljs-comment">//å†åˆ›å»ºä¸€ä¸ªArrayListé›†åˆï¼Œå¹¶æŠŠè¿™ä¸ªä¸å¯å˜çš„é›†åˆä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œéƒ½æ·»åŠ åˆ°ArrayListä¸­ã€‚</span><br>        ArrayList&lt;String&gt; list3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(List.of(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>));<br>        System.out.println(list3);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="5-Streamæµ"><a href="#5-Streamæµ" class="headerlink" title="5.Streamæµ"></a>5.Streamæµ</h2><h3 id="5-1ä½“éªŒStreamæµã€ç†è§£ã€‘"><a href="#5-1ä½“éªŒStreamæµã€ç†è§£ã€‘" class="headerlink" title="5.1ä½“éªŒStreamæµã€ç†è§£ã€‘"></a>5.1ä½“éªŒStreamæµã€ç†è§£ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>æŒ‰ç…§ä¸‹é¢çš„è¦æ±‚å®Œæˆé›†åˆçš„åˆ›å»ºå’Œéå†</p><ul><li>åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ </li><li>æŠŠé›†åˆä¸­æ‰€æœ‰ä»¥â€å¼ â€å¼€å¤´çš„å…ƒç´ å­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„é›†åˆ</li><li>æŠŠâ€å¼ â€å¼€å¤´çš„é›†åˆä¸­çš„é•¿åº¦ä¸º3çš„å…ƒç´ å­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„é›†åˆ</li><li>éå†ä¸Šä¸€æ­¥å¾—åˆ°çš„é›†åˆ</li></ul></li><li><p>åŸå§‹æ–¹å¼ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ </span><br>        ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br><br>        list.add(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ•&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>);<br><br>        <span class="hljs-comment">//æŠŠé›†åˆä¸­æ‰€æœ‰ä»¥&quot;å¼ &quot;å¼€å¤´çš„å…ƒç´ å­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„é›†åˆ</span><br>        ArrayList&lt;String&gt; zhangList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br><br>        <span class="hljs-keyword">for</span>(String s : list) &#123;<br>            <span class="hljs-keyword">if</span>(s.startsWith(<span class="hljs-string">&quot;å¼ &quot;</span>)) &#123;<br>                zhangList.add(s);<br>            &#125;<br>        &#125;<br><br><span class="hljs-comment">//        System.out.println(zhangList);</span><br><br>        <span class="hljs-comment">//æŠŠ&quot;å¼ &quot;å¼€å¤´çš„é›†åˆä¸­çš„é•¿åº¦ä¸º3çš„å…ƒç´ å­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„é›†åˆ</span><br>        ArrayList&lt;String&gt; threeList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br><br>        <span class="hljs-keyword">for</span>(String s : zhangList) &#123;<br>            <span class="hljs-keyword">if</span>(s.length() == <span class="hljs-number">3</span>) &#123;<br>                threeList.add(s);<br>            &#125;<br>        &#125;<br><br><span class="hljs-comment">//        System.out.println(threeList);</span><br><br>        <span class="hljs-comment">//éå†ä¸Šä¸€æ­¥å¾—åˆ°çš„é›†åˆ</span><br>        <span class="hljs-keyword">for</span>(String s : threeList) &#123;<br>            System.out.println(s);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//Streamæµæ¥æ”¹è¿›</span><br><span class="hljs-comment">//        list.stream().filter(s -&gt; s.startsWith(&quot;å¼ &quot;)).filter(s -&gt; s.length() == 3).forEach(s -&gt; System.out.println(s));</span><br>        list.stream().filter(s -&gt; s.startsWith(<span class="hljs-string">&quot;å¼ &quot;</span>)).filter(s -&gt; s.length() == <span class="hljs-number">3</span>).forEach(System.out::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨Streamæµç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ </span><br>        ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br><br>        list.add(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ•&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>);<br><br>        <span class="hljs-comment">//Streamæµæ¥æ”¹è¿›</span><br>        list.stream().filter(s -&gt; s.startsWith(<span class="hljs-string">&quot;å¼ &quot;</span>)).filter(s -&gt; s.length() == <span class="hljs-number">3</span>).forEach(System.out::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>Streamæµçš„å¥½å¤„</p><ul><li>ç›´æ¥é˜…è¯»ä»£ç çš„å­—é¢æ„æ€å³å¯å®Œç¾å±•ç¤ºæ— å…³é€»è¾‘æ–¹å¼çš„è¯­ä¹‰ï¼šè·å–æµã€è¿‡æ»¤å§“å¼ ã€è¿‡æ»¤é•¿åº¦ä¸º3ã€é€ä¸€æ‰“å°</li><li>StreamæµæŠŠçœŸæ­£çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¼•å…¥åˆ°Javaä¸­</li><li>ä»£ç ç®€æ´</li></ul></li></ul><h3 id="5-2Streamæµçš„å¸¸è§ç”Ÿæˆæ–¹å¼ã€åº”ç”¨ã€‘"><a href="#5-2Streamæµçš„å¸¸è§ç”Ÿæˆæ–¹å¼ã€åº”ç”¨ã€‘" class="headerlink" title="5.2Streamæµçš„å¸¸è§ç”Ÿæˆæ–¹å¼ã€åº”ç”¨ã€‘"></a>5.2Streamæµçš„å¸¸è§ç”Ÿæˆæ–¹å¼ã€åº”ç”¨ã€‘</h3><ul><li><p>Streamæµçš„æ€æƒ³</p><p><img src="https://gitee.com/lin-liangxing/pictuer/raw/master/20220217154718.png" alt="01_Streamæµæ€æƒ³"></p></li><li><p>Streamæµçš„ä¸‰ç±»æ–¹æ³•</p><ul><li>è·å–Streamæµ<ul><li>åˆ›å»ºä¸€æ¡æµæ°´çº¿,å¹¶æŠŠæ•°æ®æ”¾åˆ°æµæ°´çº¿ä¸Šå‡†å¤‡è¿›è¡Œæ“ä½œ</li></ul></li><li>ä¸­é—´æ–¹æ³•<ul><li>æµæ°´çº¿ä¸Šçš„æ“ä½œ</li><li>ä¸€æ¬¡æ“ä½œå®Œæ¯•ä¹‹å,è¿˜å¯ä»¥ç»§ç»­è¿›è¡Œå…¶ä»–æ“ä½œ</li></ul></li><li>ç»ˆç»“æ–¹æ³•<ul><li>ä¸€ä¸ªStreamæµåªèƒ½æœ‰ä¸€ä¸ªç»ˆç»“æ–¹æ³•</li><li>æ˜¯æµæ°´çº¿ä¸Šçš„æœ€åä¸€ä¸ªæ“ä½œ</li></ul></li></ul></li><li><p>ç”ŸæˆStreamæµçš„æ–¹å¼</p><ul><li><p>Collectionä½“ç³»é›†åˆ</p><p>ä½¿ç”¨é»˜è®¤æ–¹æ³•stream()ç”Ÿæˆæµï¼Œ default Stream<E> stream()</p></li><li><p>Mapä½“ç³»é›†åˆ</p><p>æŠŠMapè½¬æˆSeté›†åˆï¼Œé—´æ¥çš„ç”Ÿæˆæµ</p></li><li><p>æ•°ç»„</p><p>é€šè¿‡Arraysä¸­çš„é™æ€æ–¹æ³•streamç”Ÿæˆæµ</p></li><li><p>åŒç§æ•°æ®ç±»å‹çš„å¤šä¸ªæ•°æ®</p><p>é€šè¿‡Streamæ¥å£çš„é™æ€æ–¹æ³•of(Tâ€¦ values)ç”Ÿæˆæµ</p></li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//Collectionä½“ç³»çš„é›†åˆå¯ä»¥ä½¿ç”¨é»˜è®¤æ–¹æ³•stream()ç”Ÿæˆæµ</span><br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>        Stream&lt;String&gt; listStream = list.stream();<br><br>        Set&lt;String&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;String&gt;();<br>        Stream&lt;String&gt; setStream = set.stream();<br><br>        <span class="hljs-comment">//Mapä½“ç³»çš„é›†åˆé—´æ¥çš„ç”Ÿæˆæµ</span><br>        Map&lt;String,Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Integer&gt;();<br>        Stream&lt;String&gt; keyStream = map.keySet().stream();<br>        Stream&lt;Integer&gt; valueStream = map.values().stream();<br>        Stream&lt;Map.Entry&lt;String, Integer&gt;&gt; entryStream = map.entrySet().stream();<br><br>        <span class="hljs-comment">//æ•°ç»„å¯ä»¥é€šè¿‡Arraysä¸­çš„é™æ€æ–¹æ³•streamç”Ÿæˆæµ</span><br>        String[] strArray = &#123;<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-string">&quot;world&quot;</span>,<span class="hljs-string">&quot;java&quot;</span>&#125;;<br>        Stream&lt;String&gt; strArrayStream = Arrays.stream(strArray);<br>      <br>      <span class="hljs-comment">//åŒç§æ•°æ®ç±»å‹çš„å¤šä¸ªæ•°æ®å¯ä»¥é€šè¿‡Streamæ¥å£çš„é™æ€æ–¹æ³•of(T... values)ç”Ÿæˆæµ</span><br>        Stream&lt;String&gt; strArrayStream2 = Stream.of(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span>, <span class="hljs-string">&quot;java&quot;</span>);<br>        Stream&lt;Integer&gt; intStream = Stream.of(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="5-3Streamæµä¸­é—´æ“ä½œæ–¹æ³•ã€åº”ç”¨ã€‘"><a href="#5-3Streamæµä¸­é—´æ“ä½œæ–¹æ³•ã€åº”ç”¨ã€‘" class="headerlink" title="5.3Streamæµä¸­é—´æ“ä½œæ–¹æ³•ã€åº”ç”¨ã€‘"></a>5.3Streamæµä¸­é—´æ“ä½œæ–¹æ³•ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¦‚å¿µ</p><p>ä¸­é—´æ“ä½œçš„æ„æ€æ˜¯,æ‰§è¡Œå®Œæ­¤æ–¹æ³•ä¹‹å,Streamæµä¾ç„¶å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œ</p></li><li><p>å¸¸è§æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Stream<T> filter(Predicate predicate)</td><td>ç”¨äºå¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤</td></tr><tr><td>Stream<T> limit(long maxSize)</td><td>è¿”å›æ­¤æµä¸­çš„å…ƒç´ ç»„æˆçš„æµï¼Œæˆªå–å‰æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®</td></tr><tr><td>Stream<T> skip(long n)</td><td>è·³è¿‡æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®ï¼Œè¿”å›ç”±è¯¥æµçš„å‰©ä½™å…ƒç´ ç»„æˆçš„æµ</td></tr><tr><td>static <T> Stream<T> concat(Stream a, Stream b)</td><td>åˆå¹¶aå’Œbä¸¤ä¸ªæµä¸ºä¸€ä¸ªæµ</td></tr><tr><td>Stream<T> distinct()</td><td>è¿”å›ç”±è¯¥æµçš„ä¸åŒå…ƒç´ ï¼ˆæ ¹æ®Object.equals(Object) ï¼‰ç»„æˆçš„æµ</td></tr></tbody></table></li><li><p>filterä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ </span><br>        ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br><br>        list.add(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ•&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚1ï¼šæŠŠlisté›†åˆä¸­ä»¥å¼ å¼€å¤´çš„å…ƒç´ åœ¨æ§åˆ¶å°è¾“å‡º</span><br>        list.stream().filter(s -&gt; s.startsWith(<span class="hljs-string">&quot;å¼ &quot;</span>)).forEach(System.out::println);<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚2ï¼šæŠŠlisté›†åˆä¸­é•¿åº¦ä¸º3çš„å…ƒç´ åœ¨æ§åˆ¶å°è¾“å‡º</span><br>        list.stream().filter(s -&gt; s.length() == <span class="hljs-number">3</span>).forEach(System.out::println);<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚3ï¼šæŠŠlisté›†åˆä¸­ä»¥å¼ å¼€å¤´çš„ï¼Œé•¿åº¦ä¸º3çš„å…ƒç´ åœ¨æ§åˆ¶å°è¾“å‡º</span><br>        list.stream().filter(s -&gt; s.startsWith(<span class="hljs-string">&quot;å¼ &quot;</span>)).filter(s -&gt; s.length() == <span class="hljs-number">3</span>).forEach(System.out::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>limit&amp;skipä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ </span><br>        ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br><br>        list.add(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ•&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚1ï¼šå–å‰3ä¸ªæ•°æ®åœ¨æ§åˆ¶å°è¾“å‡º</span><br>        list.stream().limit(<span class="hljs-number">3</span>).forEach(System.out::println);<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚2ï¼šè·³è¿‡3ä¸ªå…ƒç´ ï¼ŒæŠŠå‰©ä¸‹çš„å…ƒç´ åœ¨æ§åˆ¶å°è¾“å‡º</span><br>        list.stream().skip(<span class="hljs-number">3</span>).forEach(System.out::println);<br>        System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚3ï¼šè·³è¿‡2ä¸ªå…ƒç´ ï¼ŒæŠŠå‰©ä¸‹çš„å…ƒç´ ä¸­å‰2ä¸ªåœ¨æ§åˆ¶å°è¾“å‡º</span><br>        list.stream().skip(<span class="hljs-number">2</span>).limit(<span class="hljs-number">2</span>).forEach(System.out::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>concat&amp;distinctä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamDemo03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ </span><br>        ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br><br>        list.add(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ•&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚1ï¼šå–å‰4ä¸ªæ•°æ®ç»„æˆä¸€ä¸ªæµ</span><br>        Stream&lt;String&gt; s1 = list.stream().limit(<span class="hljs-number">4</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚2ï¼šè·³è¿‡2ä¸ªæ•°æ®ç»„æˆä¸€ä¸ªæµ</span><br>        Stream&lt;String&gt; s2 = list.stream().skip(<span class="hljs-number">2</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚3ï¼šåˆå¹¶éœ€æ±‚1å’Œéœ€æ±‚2å¾—åˆ°çš„æµï¼Œå¹¶æŠŠç»“æœåœ¨æ§åˆ¶å°è¾“å‡º</span><br><span class="hljs-comment">//        Stream.concat(s1,s2).forEach(System.out::println);</span><br><br>        <span class="hljs-comment">//éœ€æ±‚4ï¼šåˆå¹¶éœ€æ±‚1å’Œéœ€æ±‚2å¾—åˆ°çš„æµï¼Œå¹¶æŠŠç»“æœåœ¨æ§åˆ¶å°è¾“å‡ºï¼Œè¦æ±‚å­—ç¬¦ä¸²å…ƒç´ ä¸èƒ½é‡å¤</span><br>        Stream.concat(s1,s2).distinct().forEach(System.out::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="5-4Streamæµç»ˆç»“æ“ä½œæ–¹æ³•ã€åº”ç”¨ã€‘"><a href="#5-4Streamæµç»ˆç»“æ“ä½œæ–¹æ³•ã€åº”ç”¨ã€‘" class="headerlink" title="5.4Streamæµç»ˆç»“æ“ä½œæ–¹æ³•ã€åº”ç”¨ã€‘"></a>5.4Streamæµç»ˆç»“æ“ä½œæ–¹æ³•ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¦‚å¿µ</p><p>ç»ˆç»“æ“ä½œçš„æ„æ€æ˜¯,æ‰§è¡Œå®Œæ­¤æ–¹æ³•ä¹‹å,Streamæµå°†ä¸èƒ½å†æ‰§è¡Œå…¶ä»–æ“ä½œ</p></li><li><p>å¸¸è§æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void forEach(Consumer action)</td><td>å¯¹æ­¤æµçš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ</td></tr><tr><td>long count()</td><td>è¿”å›æ­¤æµä¸­çš„å…ƒç´ æ•°</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­—ç¬¦ä¸²å…ƒç´ </span><br>        ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br><br>        list.add(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ•&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ— å¿Œ&quot;</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚1ï¼šæŠŠé›†åˆä¸­çš„å…ƒç´ åœ¨æ§åˆ¶å°è¾“å‡º</span><br><span class="hljs-comment">//        list.stream().forEach(System.out::println);</span><br><br>        <span class="hljs-comment">//éœ€æ±‚2ï¼šç»Ÿè®¡é›†åˆä¸­æœ‰å‡ ä¸ªä»¥å¼ å¼€å¤´çš„å…ƒç´ ï¼Œå¹¶æŠŠç»Ÿè®¡ç»“æœåœ¨æ§åˆ¶å°è¾“å‡º</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> list.stream().filter(s -&gt; s.startsWith(<span class="hljs-string">&quot;å¼ &quot;</span>)).count();<br>        System.out.println(count);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="5-5Streamæµçš„æ”¶é›†æ“ä½œã€åº”ç”¨ã€‘"><a href="#5-5Streamæµçš„æ”¶é›†æ“ä½œã€åº”ç”¨ã€‘" class="headerlink" title="5.5Streamæµçš„æ”¶é›†æ“ä½œã€åº”ç”¨ã€‘"></a>5.5Streamæµçš„æ”¶é›†æ“ä½œã€åº”ç”¨ã€‘</h3><ul><li><p>æ¦‚å¿µ</p><p>å¯¹æ•°æ®ä½¿ç”¨Streamæµçš„æ–¹å¼æ“ä½œå®Œæ¯•å,å¯ä»¥æŠŠæµä¸­çš„æ•°æ®æ”¶é›†åˆ°é›†åˆä¸­</p></li><li><p>å¸¸ç”¨æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>R collect(Collector collector)</td><td>æŠŠç»“æœæ”¶é›†åˆ°é›†åˆä¸­</td></tr></tbody></table></li><li><p>å·¥å…·ç±»Collectorsæä¾›äº†å…·ä½“çš„æ”¶é›†æ–¹å¼</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public static <T> Collector toList()</td><td>æŠŠå…ƒç´ æ”¶é›†åˆ°Listé›†åˆä¸­</td></tr><tr><td>public static <T> Collector toSet()</td><td>æŠŠå…ƒç´ æ”¶é›†åˆ°Seté›†åˆä¸­</td></tr><tr><td>public static  Collector toMap(Function keyMapper,Function valueMapper)</td><td>æŠŠå…ƒç´ æ”¶é›†åˆ°Mapé›†åˆä¸­</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºListé›†åˆå¯¹è±¡</span><br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>        list.add(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        //éœ€æ±‚1ï¼šå¾—åˆ°åå­—ä¸º3ä¸ªå­—çš„æµ</span><br><span class="hljs-comment">        Stream&lt;String&gt; listStream = list.stream().filter(s -&gt; s.length() == 3);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        //éœ€æ±‚2ï¼šæŠŠä½¿ç”¨Streamæµæ“ä½œå®Œæ¯•çš„æ•°æ®æ”¶é›†åˆ°Listé›†åˆä¸­å¹¶éå†</span><br><span class="hljs-comment">        List&lt;String&gt; names = listStream.collect(Collectors.toList());</span><br><span class="hljs-comment">        for(String name : names) &#123;</span><br><span class="hljs-comment">            System.out.println(name);</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br><br>        <span class="hljs-comment">//åˆ›å»ºSeté›†åˆå¯¹è±¡</span><br>        Set&lt;Integer&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;Integer&gt;();<br>        set.add(<span class="hljs-number">10</span>);<br>        set.add(<span class="hljs-number">20</span>);<br>        set.add(<span class="hljs-number">30</span>);<br>        set.add(<span class="hljs-number">33</span>);<br>        set.add(<span class="hljs-number">35</span>);<br><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        //éœ€æ±‚3ï¼šå¾—åˆ°å¹´é¾„å¤§äº25çš„æµ</span><br><span class="hljs-comment">        Stream&lt;Integer&gt; setStream = set.stream().filter(age -&gt; age &gt; 25);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        //éœ€æ±‚4ï¼šæŠŠä½¿ç”¨Streamæµæ“ä½œå®Œæ¯•çš„æ•°æ®æ”¶é›†åˆ°Seté›†åˆä¸­å¹¶éå†</span><br><span class="hljs-comment">        Set&lt;Integer&gt; ages = setStream.collect(Collectors.toSet());</span><br><span class="hljs-comment">        for(Integer age : ages) &#123;</span><br><span class="hljs-comment">            System.out.println(age);</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br>        <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°æ®ç”±å§“åæ•°æ®å’Œå¹´é¾„æ•°æ®ç»„åˆè€Œæˆ</span><br>        String[] strArray = &#123;<span class="hljs-string">&quot;æ—é’éœ,30&quot;</span>, <span class="hljs-string">&quot;å¼ æ›¼ç‰,35&quot;</span>, <span class="hljs-string">&quot;ç‹ç¥–è´¤,33&quot;</span>, <span class="hljs-string">&quot;æŸ³å²©,25&quot;</span>&#125;;<br><br>        <span class="hljs-comment">//éœ€æ±‚5ï¼šå¾—åˆ°å­—ç¬¦ä¸²ä¸­å¹´é¾„æ•°æ®å¤§äº28çš„æµ</span><br>        Stream&lt;String&gt; arrayStream = Stream.of(strArray).filter(s -&gt; Integer.parseInt(s.split(<span class="hljs-string">&quot;,&quot;</span>)[<span class="hljs-number">1</span>]) &gt; <span class="hljs-number">28</span>);<br><br>        <span class="hljs-comment">//éœ€æ±‚6ï¼šæŠŠä½¿ç”¨Streamæµæ“ä½œå®Œæ¯•çš„æ•°æ®æ”¶é›†åˆ°Mapé›†åˆä¸­å¹¶éå†ï¼Œå­—ç¬¦ä¸²ä¸­çš„å§“åä½œé”®ï¼Œå¹´é¾„ä½œå€¼</span><br>        Map&lt;String, Integer&gt; map = arrayStream.collect(Collectors.toMap(s -&gt; s.split(<span class="hljs-string">&quot;,&quot;</span>)[<span class="hljs-number">0</span>], s -&gt; Integer.parseInt(s.split(<span class="hljs-string">&quot;,&quot;</span>)[<span class="hljs-number">1</span>])));<br><br>        Set&lt;String&gt; keySet = map.keySet();<br>        <span class="hljs-keyword">for</span> (String key : keySet) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> map.get(key);<br>            System.out.println(key + <span class="hljs-string">&quot;,&quot;</span> + value);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="5-6Streamæµç»¼åˆç»ƒä¹ ã€åº”ç”¨ã€‘"><a href="#5-6Streamæµç»¼åˆç»ƒä¹ ã€åº”ç”¨ã€‘" class="headerlink" title="5.6Streamæµç»¼åˆç»ƒä¹ ã€åº”ç”¨ã€‘"></a>5.6Streamæµç»¼åˆç»ƒä¹ ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>ç°åœ¨æœ‰ä¸¤ä¸ªArrayListé›†åˆï¼Œåˆ†åˆ«å­˜å‚¨6åç”·æ¼”å‘˜åç§°å’Œ6åå¥³æ¼”å‘˜åç§°ï¼Œè¦æ±‚å®Œæˆå¦‚ä¸‹çš„æ“ä½œ</p><ul><li>ç”·æ¼”å‘˜åªè¦åå­—ä¸º3ä¸ªå­—çš„å‰ä¸‰äºº</li><li>å¥³æ¼”å‘˜åªè¦å§“æ—çš„ï¼Œå¹¶ä¸”ä¸è¦ç¬¬ä¸€ä¸ª</li><li>æŠŠè¿‡æ»¤åçš„ç”·æ¼”å‘˜å§“åå’Œå¥³æ¼”å‘˜å§“ååˆå¹¶åˆ°ä¸€èµ·</li><li>æŠŠä¸Šä¸€æ­¥æ“ä½œåçš„å…ƒç´ ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°åˆ›å»ºæ¼”å‘˜å¯¹è±¡,éå†æ•°æ®</li></ul><p>æ¼”å‘˜ç±»Actorå·²ç»æä¾›ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œä¸€ä¸ªå¸¦å‚æ„é€ æ–¹æ³•ï¼Œä»¥åŠæˆå‘˜å˜é‡å¯¹åº”çš„get&#x2F;setæ–¹æ³•</p></li><li><p>ä»£ç å®ç°</p><p>æ¼”å‘˜ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Actor</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Actor</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆ</span><br>        ArrayList&lt;String&gt; manList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>        manList.add(<span class="hljs-string">&quot;å‘¨æ¶¦å‘&quot;</span>);<br>        manList.add(<span class="hljs-string">&quot;æˆé¾™&quot;</span>);<br>        manList.add(<span class="hljs-string">&quot;åˆ˜å¾·å&quot;</span>);<br>        manList.add(<span class="hljs-string">&quot;å´äº¬&quot;</span>);<br>        manList.add(<span class="hljs-string">&quot;å‘¨æ˜Ÿé©°&quot;</span>);<br>        manList.add(<span class="hljs-string">&quot;æè¿æ°&quot;</span>);<br><br>        ArrayList&lt;String&gt; womanList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>        womanList.add(<span class="hljs-string">&quot;æ—å¿ƒå¦‚&quot;</span>);<br>        womanList.add(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>);<br>        womanList.add(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        womanList.add(<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br>        womanList.add(<span class="hljs-string">&quot;æ—å¿—ç²&quot;</span>);<br>        womanList.add(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>);<br>  <br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        //ç”·æ¼”å‘˜åªè¦åå­—ä¸º3ä¸ªå­—çš„å‰ä¸‰äºº</span><br><span class="hljs-comment">        Stream&lt;String&gt; manStream = manList.stream().filter(s -&gt; s.length() == 3).limit(3);</span><br><span class="hljs-comment">  </span><br><span class="hljs-comment">        //å¥³æ¼”å‘˜åªè¦å§“æ—çš„ï¼Œå¹¶ä¸”ä¸è¦ç¬¬ä¸€ä¸ª</span><br><span class="hljs-comment">        Stream&lt;String&gt; womanStream = womanList.stream().filter(s -&gt; s.startsWith(&quot;æ—&quot;)).skip(1);</span><br><span class="hljs-comment">  </span><br><span class="hljs-comment">        //æŠŠè¿‡æ»¤åçš„ç”·æ¼”å‘˜å§“åå’Œå¥³æ¼”å‘˜å§“ååˆå¹¶åˆ°ä¸€èµ·</span><br><span class="hljs-comment">        Stream&lt;String&gt; stream = Stream.concat(manStream, womanStream);</span><br><span class="hljs-comment">  </span><br><span class="hljs-comment">        //æŠŠä¸Šä¸€æ­¥æ“ä½œåçš„å…ƒç´ ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°åˆ›å»ºæ¼”å‘˜å¯¹è±¡,éå†æ•°æ®</span><br><span class="hljs-comment">//        stream.map(Actor::new).forEach(System.out::println);</span><br><span class="hljs-comment">        stream.map(Actor::new).forEach(p -&gt; System.out.println(p.getName()));</span><br><span class="hljs-comment">        */</span><br>  <br>        Stream.concat(manList.stream().filter(s -&gt; s.length() == <span class="hljs-number">3</span>).limit(<span class="hljs-number">3</span>),<br>                womanList.stream().filter(s -&gt; s.startsWith(<span class="hljs-string">&quot;æ—&quot;</span>)).skip(<span class="hljs-number">1</span>)).map(Actor::<span class="hljs-keyword">new</span>).<br>                forEach(p -&gt; System.out.println(p.getName()));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Seté›†åˆ</title>
    <link href="/Hexo/2021/03/26/%E9%9B%86%E5%90%8802/"/>
    <url>/Hexo/2021/03/26/%E9%9B%86%E5%90%8802/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Seté›†åˆ"><a href="#1-Seté›†åˆ" class="headerlink" title="1.Seté›†åˆ"></a>1.Seté›†åˆ</h2><h3 id="1-1Seté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘"><a href="#1-1Seté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘" class="headerlink" title="1.1Seté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘"></a>1.1Seté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘</h3><ul><li>ä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ </li><li>æ²¡æœ‰ç´¢å¼•,ä¸èƒ½ä½¿ç”¨æ™®é€šforå¾ªç¯éå†</li></ul><h3 id="1-2Seté›†åˆçš„ä½¿ç”¨ã€åº”ç”¨ã€‘"><a href="#1-2Seté›†åˆçš„ä½¿ç”¨ã€åº”ç”¨ã€‘" class="headerlink" title="1.2Seté›†åˆçš„ä½¿ç”¨ã€åº”ç”¨ã€‘"></a>1.2Seté›†åˆçš„ä½¿ç”¨ã€åº”ç”¨ã€‘</h3><p>å­˜å‚¨å­—ç¬¦ä¸²å¹¶éå†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MySet1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        Set&lt;String&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;();<br>      <span class="hljs-comment">//æ·»åŠ å…ƒç´ </span><br>        set.add(<span class="hljs-string">&quot;ccc&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;aaa&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;aaa&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;bbb&quot;</span>);<br><br><span class="hljs-comment">//        for (int i = 0; i &lt; set.size(); i++) &#123;</span><br><span class="hljs-comment">//            //Seté›†åˆæ˜¯æ²¡æœ‰ç´¢å¼•çš„ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨é€šè¿‡ç´¢å¼•è·å–å…ƒç´ çš„æ–¹æ³•</span><br><span class="hljs-comment">//        &#125;</span><br>      <br>      <span class="hljs-comment">//éå†é›†åˆ</span><br>        Iterator&lt;String&gt; it = set.iterator();<br>        <span class="hljs-keyword">while</span> (it.hasNext())&#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> it.next();<br>            System.out.println(s);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;-----------------------------------&quot;</span>);<br>        <span class="hljs-keyword">for</span> (String s : set) &#123;<br>            System.out.println(s);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-TreeSeté›†åˆ"><a href="#2-TreeSeté›†åˆ" class="headerlink" title="2.TreeSeté›†åˆ"></a>2.TreeSeté›†åˆ</h2><h3 id="2-1TreeSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘"><a href="#2-1TreeSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘" class="headerlink" title="2.1TreeSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘"></a>2.1TreeSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘</h3><ul><li>ä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ </li><li>æ²¡æœ‰ç´¢å¼•</li><li>å¯ä»¥å°†å…ƒç´ æŒ‰ç…§è§„åˆ™è¿›è¡Œæ’åº<ul><li>TreeSet()ï¼šæ ¹æ®å…¶å…ƒç´ çš„è‡ªç„¶æ’åºè¿›è¡Œæ’åº</li><li>TreeSet(Comparator comparator) ï¼šæ ¹æ®æŒ‡å®šçš„æ¯”è¾ƒå™¨è¿›è¡Œæ’åº</li></ul></li></ul><h3 id="2-2TreeSeté›†åˆåŸºæœ¬ä½¿ç”¨ã€åº”ç”¨ã€‘"><a href="#2-2TreeSeté›†åˆåŸºæœ¬ä½¿ç”¨ã€åº”ç”¨ã€‘" class="headerlink" title="2.2TreeSeté›†åˆåŸºæœ¬ä½¿ç”¨ã€åº”ç”¨ã€‘"></a>2.2TreeSeté›†åˆåŸºæœ¬ä½¿ç”¨ã€åº”ç”¨ã€‘</h3><p>å­˜å‚¨Integerç±»å‹çš„æ•´æ•°å¹¶éå†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeSetDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        TreeSet&lt;Integer&gt; ts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;Integer&gt;();<br><br>        <span class="hljs-comment">//æ·»åŠ å…ƒç´ </span><br>        ts.add(<span class="hljs-number">10</span>);<br>        ts.add(<span class="hljs-number">40</span>);<br>        ts.add(<span class="hljs-number">30</span>);<br>        ts.add(<span class="hljs-number">50</span>);<br>        ts.add(<span class="hljs-number">20</span>);<br><br>        ts.add(<span class="hljs-number">30</span>);<br><br>        <span class="hljs-comment">//éå†é›†åˆ</span><br>        <span class="hljs-keyword">for</span>(Integer i : ts) &#123;<br>            System.out.println(i);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-3è‡ªç„¶æ’åºComparableçš„ä½¿ç”¨ã€åº”ç”¨ã€‘"><a href="#2-3è‡ªç„¶æ’åºComparableçš„ä½¿ç”¨ã€åº”ç”¨ã€‘" class="headerlink" title="2.3è‡ªç„¶æ’åºComparableçš„ä½¿ç”¨ã€åº”ç”¨ã€‘"></a>2.3è‡ªç„¶æ’åºComparableçš„ä½¿ç”¨ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>å­˜å‚¨å­¦ç”Ÿå¯¹è±¡å¹¶éå†ï¼Œåˆ›å»ºTreeSeté›†åˆä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•</li><li>è¦æ±‚ï¼šæŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§æ’åºï¼Œå¹´é¾„ç›¸åŒæ—¶ï¼ŒæŒ‰ç…§å§“åçš„å­—æ¯é¡ºåºæ’åº</li></ul></li><li><p>å®ç°æ­¥éª¤</p><ol><li>ä½¿ç”¨ç©ºå‚æ„é€ åˆ›å»ºTreeSeté›†åˆ<ul><li>ç”¨TreeSeté›†åˆå­˜å‚¨è‡ªå®šä¹‰å¯¹è±¡ï¼Œæ— å‚æ„é€ æ–¹æ³•ä½¿ç”¨çš„æ˜¯è‡ªç„¶æ’åºå¯¹å…ƒç´ è¿›è¡Œæ’åºçš„</li></ul></li><li>è‡ªå®šä¹‰çš„Studentç±»å®ç°Comparableæ¥å£<ul><li>è‡ªç„¶æ’åºï¼Œå°±æ˜¯è®©å…ƒç´ æ‰€å±çš„ç±»å®ç°Comparableæ¥å£ï¼Œé‡å†™compareTo(T o)æ–¹æ³•</li></ul></li><li>é‡å†™æ¥å£ä¸­çš„compareToæ–¹æ³•<ul><li>é‡å†™æ–¹æ³•æ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ’åºè§„åˆ™å¿…é¡»æŒ‰ç…§è¦æ±‚çš„ä¸»è¦æ¡ä»¶å’Œæ¬¡è¦æ¡ä»¶æ¥å†™</li></ul></li></ol></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;Student&gt;&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(Student o)</span> &#123;<br>        <span class="hljs-comment">//æŒ‰ç…§å¯¹è±¡çš„å¹´é¾„è¿›è¡Œæ’åº</span><br>        <span class="hljs-comment">//ä¸»è¦åˆ¤æ–­æ¡ä»¶: æŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§æ’åº</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.age - o.age;<br>        <span class="hljs-comment">//æ¬¡è¦åˆ¤æ–­æ¡ä»¶: å¹´é¾„ç›¸åŒæ—¶ï¼ŒæŒ‰ç…§å§“åçš„å­—æ¯é¡ºåºæ’åº</span><br>        result = result == <span class="hljs-number">0</span> ? <span class="hljs-built_in">this</span>.name.compareTo(o.getName()) : result;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTreeSet2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        TreeSet&lt;Student&gt; ts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;();<br>    <span class="hljs-comment">//åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;zhangsan&quot;</span>,<span class="hljs-number">28</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;lisi&quot;</span>,<span class="hljs-number">27</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;wangwu&quot;</span>,<span class="hljs-number">29</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;zhaoliu&quot;</span>,<span class="hljs-number">28</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s5</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;qianqi&quot;</span>,<span class="hljs-number">30</span>);<br><span class="hljs-comment">//æŠŠå­¦ç”Ÿæ·»åŠ åˆ°é›†åˆ</span><br>        ts.add(s1);<br>        ts.add(s2);<br>        ts.add(s3);<br>        ts.add(s4);<br>        ts.add(s5);<br><span class="hljs-comment">//éå†é›†åˆ</span><br>        <span class="hljs-keyword">for</span> (Student student : ts) &#123;<br>            System.out.println(student);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-4æ¯”è¾ƒå™¨æ’åºComparatorçš„ä½¿ç”¨ã€åº”ç”¨ã€‘"><a href="#2-4æ¯”è¾ƒå™¨æ’åºComparatorçš„ä½¿ç”¨ã€åº”ç”¨ã€‘" class="headerlink" title="2.4æ¯”è¾ƒå™¨æ’åºComparatorçš„ä½¿ç”¨ã€åº”ç”¨ã€‘"></a>2.4æ¯”è¾ƒå™¨æ’åºComparatorçš„ä½¿ç”¨ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>å­˜å‚¨è€å¸ˆå¯¹è±¡å¹¶éå†ï¼Œåˆ›å»ºTreeSeté›†åˆä½¿ç”¨å¸¦å‚æ„é€ æ–¹æ³•</li><li>è¦æ±‚ï¼šæŒ‰ç…§å¹´é¾„ä»å°åˆ°å¤§æ’åºï¼Œå¹´é¾„ç›¸åŒæ—¶ï¼ŒæŒ‰ç…§å§“åçš„å­—æ¯é¡ºåºæ’åº</li></ul></li><li><p>å®ç°æ­¥éª¤</p><ul><li>ç”¨TreeSeté›†åˆå­˜å‚¨è‡ªå®šä¹‰å¯¹è±¡ï¼Œå¸¦å‚æ„é€ æ–¹æ³•ä½¿ç”¨çš„æ˜¯æ¯”è¾ƒå™¨æ’åºå¯¹å…ƒç´ è¿›è¡Œæ’åºçš„</li><li>æ¯”è¾ƒå™¨æ’åºï¼Œå°±æ˜¯è®©é›†åˆæ„é€ æ–¹æ³•æ¥æ”¶Comparatorçš„å®ç°ç±»å¯¹è±¡ï¼Œé‡å†™compare(T o1,T o2)æ–¹æ³•</li><li>é‡å†™æ–¹æ³•æ—¶ï¼Œä¸€å®šè¦æ³¨æ„æ’åºè§„åˆ™å¿…é¡»æŒ‰ç…§è¦æ±‚çš„ä¸»è¦æ¡ä»¶å’Œæ¬¡è¦æ¡ä»¶æ¥å†™</li></ul></li><li><p>ä»£ç å®ç°</p><p>è€å¸ˆç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Teacher</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Teacher</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Teacher</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Teacher&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTreeSet4</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        TreeSet&lt;Teacher&gt; ts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;Teacher&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Teacher o1, Teacher o2)</span> &#123;<br>                <span class="hljs-comment">//o1è¡¨ç¤ºç°åœ¨è¦å­˜å…¥çš„é‚£ä¸ªå…ƒç´ </span><br>                <span class="hljs-comment">//o2è¡¨ç¤ºå·²ç»å­˜å…¥åˆ°é›†åˆä¸­çš„å…ƒç´ </span><br>              <br>                <span class="hljs-comment">//ä¸»è¦æ¡ä»¶</span><br>                <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> o1.getAge() - o2.getAge();<br>                <span class="hljs-comment">//æ¬¡è¦æ¡ä»¶</span><br>                result = result == <span class="hljs-number">0</span> ? o1.getName().compareTo(o2.getName()) : result;<br>                <span class="hljs-keyword">return</span> result;<br>            &#125;<br>        &#125;);<br><span class="hljs-comment">//åˆ›å»ºè€å¸ˆå¯¹è±¡</span><br>        <span class="hljs-type">Teacher</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>(<span class="hljs-string">&quot;zhangsan&quot;</span>,<span class="hljs-number">23</span>);<br>        <span class="hljs-type">Teacher</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>(<span class="hljs-string">&quot;lisi&quot;</span>,<span class="hljs-number">22</span>);<br>        <span class="hljs-type">Teacher</span> <span class="hljs-variable">t3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>(<span class="hljs-string">&quot;wangwu&quot;</span>,<span class="hljs-number">24</span>);<br>        <span class="hljs-type">Teacher</span> <span class="hljs-variable">t4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>(<span class="hljs-string">&quot;zhaoliu&quot;</span>,<span class="hljs-number">24</span>);<br><span class="hljs-comment">//æŠŠè€å¸ˆæ·»åŠ åˆ°é›†åˆ</span><br>        ts.add(t1);<br>        ts.add(t2);<br>        ts.add(t3);<br>        ts.add(t4);<br><span class="hljs-comment">//éå†é›†åˆ</span><br>        <span class="hljs-keyword">for</span> (Teacher teacher : ts) &#123;<br>            System.out.println(teacher);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-4ä¸¤ç§æ¯”è¾ƒæ–¹å¼æ€»ç»“ã€ç†è§£ã€‘"><a href="#2-4ä¸¤ç§æ¯”è¾ƒæ–¹å¼æ€»ç»“ã€ç†è§£ã€‘" class="headerlink" title="2.4ä¸¤ç§æ¯”è¾ƒæ–¹å¼æ€»ç»“ã€ç†è§£ã€‘"></a>2.4ä¸¤ç§æ¯”è¾ƒæ–¹å¼æ€»ç»“ã€ç†è§£ã€‘</h3><ul><li>ä¸¤ç§æ¯”è¾ƒæ–¹å¼å°ç»“<ul><li>è‡ªç„¶æ’åº: è‡ªå®šä¹‰ç±»å®ç°Comparableæ¥å£,é‡å†™compareToæ–¹æ³•,æ ¹æ®è¿”å›å€¼è¿›è¡Œæ’åº</li><li>æ¯”è¾ƒå™¨æ’åº: åˆ›å»ºTreeSetå¯¹è±¡çš„æ—¶å€™ä¼ é€’Comparatorçš„å®ç°ç±»å¯¹è±¡,é‡å†™compareæ–¹æ³•,æ ¹æ®è¿”å›å€¼è¿›è¡Œæ’åº</li><li>åœ¨ä½¿ç”¨çš„æ—¶å€™,é»˜è®¤ä½¿ç”¨è‡ªç„¶æ’åº,å½“è‡ªç„¶æ’åºä¸æ»¡è¶³ç°åœ¨çš„éœ€æ±‚æ—¶,å¿…é¡»ä½¿ç”¨æ¯”è¾ƒå™¨æ’åº</li></ul></li><li>ä¸¤ç§æ–¹å¼ä¸­å…³äºè¿”å›å€¼çš„è§„åˆ™<ul><li>å¦‚æœè¿”å›å€¼ä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºå½“å‰å­˜å…¥çš„å…ƒç´ æ˜¯è¾ƒå°å€¼ï¼Œå­˜å·¦è¾¹</li><li>å¦‚æœè¿”å›å€¼ä¸º0ï¼Œè¡¨ç¤ºå½“å‰å­˜å…¥çš„å…ƒç´ è·Ÿé›†åˆä¸­å…ƒç´ é‡å¤äº†ï¼Œä¸å­˜</li><li>å¦‚æœè¿”å›å€¼ä¸ºæ­£æ•°ï¼Œè¡¨ç¤ºå½“å‰å­˜å…¥çš„å…ƒç´ æ˜¯è¾ƒå¤§å€¼ï¼Œå­˜å³è¾¹</li></ul></li></ul><h2 id="3-æ•°æ®ç»“æ„"><a href="#3-æ•°æ®ç»“æ„" class="headerlink" title="3.æ•°æ®ç»“æ„"></a>3.æ•°æ®ç»“æ„</h2><h3 id="3-1äºŒå‰æ ‘ã€ç†è§£ã€‘"><a href="#3-1äºŒå‰æ ‘ã€ç†è§£ã€‘" class="headerlink" title="3.1äºŒå‰æ ‘ã€ç†è§£ã€‘"></a>3.1äºŒå‰æ ‘ã€ç†è§£ã€‘</h3><ul><li><p>äºŒå‰æ ‘çš„ç‰¹ç‚¹</p><ul><li>äºŒå‰æ ‘ä¸­,ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„åº¦è¦å°äºç­‰äº2<ul><li>èŠ‚ç‚¹: åœ¨æ ‘ç»“æ„ä¸­,æ¯ä¸€ä¸ªå…ƒç´ ç§°ä¹‹ä¸ºèŠ‚ç‚¹</li><li>åº¦: æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡ç§°ä¹‹ä¸ºåº¦</li></ul></li></ul></li><li><p>äºŒå‰æ ‘ç»“æ„å›¾</p><p><img src="https://s2.loli.net/2022/05/17/wd5myIF9neY8XWV.png" alt="01_äºŒå‰æ ‘ç»“æ„å›¾"></p></li></ul><h3 id="3-2äºŒå‰æŸ¥æ‰¾æ ‘ã€ç†è§£ã€‘"><a href="#3-2äºŒå‰æŸ¥æ‰¾æ ‘ã€ç†è§£ã€‘" class="headerlink" title="3.2äºŒå‰æŸ¥æ‰¾æ ‘ã€ç†è§£ã€‘"></a>3.2äºŒå‰æŸ¥æ‰¾æ ‘ã€ç†è§£ã€‘</h3><ul><li><p>äºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹</p><ul><li>äºŒå‰æŸ¥æ‰¾æ ‘,åˆç§°äºŒå‰æ’åºæ ‘æˆ–è€…äºŒå‰æœç´¢æ ‘</li><li>æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</li><li>å·¦å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å°äºæ ¹èŠ‚ç‚¹çš„å€¼</li><li>å³å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæ ¹èŠ‚ç‚¹çš„å€¼</li></ul></li><li><p>äºŒå‰æŸ¥æ‰¾æ ‘ç»“æ„å›¾</p><p><img src="https://s2.loli.net/2022/05/17/rpUxKC5jI8MfyFb.png" alt="02_äºŒå‰æŸ¥æ‰¾æ ‘ç»“æ„å›¾"></p></li><li><p>äºŒå‰æŸ¥æ‰¾æ ‘å’ŒäºŒå‰æ ‘å¯¹æ¯”ç»“æ„å›¾</p><p><img src="https://s2.loli.net/2022/05/17/Zo8IgktOhW3QaAH.png" alt="03_äºŒå‰æŸ¥æ‰¾æ ‘å’ŒäºŒå‰æ ‘å¯¹æ¯”ç»“æ„å›¾"></p></li><li><p>äºŒå‰æŸ¥æ‰¾æ ‘æ·»åŠ èŠ‚ç‚¹è§„åˆ™</p><ul><li>å°çš„å­˜å·¦è¾¹</li><li>å¤§çš„å­˜å³è¾¹</li><li>ä¸€æ ·çš„ä¸å­˜</li></ul><p><img src="https://s2.loli.net/2022/05/17/Qwo6AYzjO8lNmbM.png" alt="04_äºŒå‰æŸ¥æ‰¾æ ‘æ·»åŠ èŠ‚ç‚¹è§„åˆ™"></p></li></ul><h3 id="3-3å¹³è¡¡äºŒå‰æ ‘ã€ç†è§£ã€‘"><a href="#3-3å¹³è¡¡äºŒå‰æ ‘ã€ç†è§£ã€‘" class="headerlink" title="3.3å¹³è¡¡äºŒå‰æ ‘ã€ç†è§£ã€‘"></a>3.3å¹³è¡¡äºŒå‰æ ‘ã€ç†è§£ã€‘</h3><ul><li><p>å¹³è¡¡äºŒå‰æ ‘çš„ç‰¹ç‚¹</p><ul><li>äºŒå‰æ ‘å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡1</li><li>ä»»æ„èŠ‚ç‚¹çš„å·¦å³ä¸¤ä¸ªå­æ ‘éƒ½æ˜¯ä¸€é¢—å¹³è¡¡äºŒå‰æ ‘</li></ul></li><li><p>å¹³è¡¡äºŒå‰æ ‘æ—‹è½¬</p><ul><li><p>æ—‹è½¬è§¦å‘æ—¶æœº</p><ul><li>å½“æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ä¹‹å,è¯¥æ ‘ä¸å†æ˜¯ä¸€é¢—å¹³è¡¡äºŒå‰æ ‘</li></ul></li><li><p>å·¦æ—‹</p><ul><li>å°±æ˜¯å°†æ ¹èŠ‚ç‚¹çš„å³ä¾§å¾€å·¦æ‹‰,åŸå…ˆçš„å³å­èŠ‚ç‚¹å˜æˆæ–°çš„çˆ¶èŠ‚ç‚¹,å¹¶æŠŠå¤šä½™çš„å·¦å­èŠ‚ç‚¹å‡ºè®©,ç»™å·²ç»é™çº§çš„æ ¹èŠ‚ç‚¹å½“å³å­èŠ‚ç‚¹</li></ul><p><img src="https://s2.loli.net/2022/05/17/16tsyqdGLxcTBov.png" alt="05_å¹³è¡¡äºŒå‰æ ‘å·¦æ—‹01"></p><p><img src="https://s2.loli.net/2022/05/17/pjrVAtueaOIlRh4.png" alt="05_å¹³è¡¡äºŒå‰æ ‘å·¦æ—‹02"></p></li><li><p>å³æ—‹</p><ul><li><p>å°±æ˜¯å°†æ ¹èŠ‚ç‚¹çš„å·¦ä¾§å¾€å³æ‹‰,å·¦å­èŠ‚ç‚¹å˜æˆäº†æ–°çš„çˆ¶èŠ‚ç‚¹,å¹¶æŠŠå¤šä½™çš„å³å­èŠ‚ç‚¹å‡ºè®©,ç»™å·²ç»é™çº§æ ¹èŠ‚ç‚¹å½“å·¦å­èŠ‚ç‚¹</p><p><img src="https://s2.loli.net/2022/05/17/skq7AQC5JZrbIn3.png" alt="06_å¹³è¡¡äºŒå‰æ ‘å³æ—‹01"></p><p><img src="https://s2.loli.net/2022/05/17/oES2Hu1LFe5tPfy.png" alt="06_å¹³è¡¡äºŒå‰æ ‘å³æ—‹02"></p></li></ul></li></ul></li><li><p>å¹³è¡¡äºŒå‰æ ‘å’ŒäºŒå‰æŸ¥æ‰¾æ ‘å¯¹æ¯”ç»“æ„å›¾</p><p><img src="https://s2.loli.net/2022/05/17/hPIyGe1Hvqr9SfC.png" alt="07_å¹³è¡¡äºŒå‰æ ‘å’ŒäºŒå‰æŸ¥æ‰¾æ ‘å¯¹æ¯”ç»“æ„å›¾"></p></li><li><p>å¹³è¡¡äºŒå‰æ ‘æ—‹è½¬çš„å››ç§æƒ…å†µ</p><ul><li><p>å·¦å·¦</p><ul><li><p>å·¦å·¦: å½“æ ¹èŠ‚ç‚¹å·¦å­æ ‘çš„å·¦å­æ ‘æœ‰èŠ‚ç‚¹æ’å…¥,å¯¼è‡´äºŒå‰æ ‘ä¸å¹³è¡¡</p></li><li><p>å¦‚ä½•æ—‹è½¬: ç›´æ¥å¯¹æ•´ä½“è¿›è¡Œå³æ—‹å³å¯</p><p><img src="https://s2.loli.net/2022/05/17/SeXstuRvNoHklgm.png" alt="08_å¹³è¡¡äºŒå‰æ ‘å·¦å·¦"></p></li></ul></li><li><p>å·¦å³</p><ul><li><p>å·¦å³: å½“æ ¹èŠ‚ç‚¹å·¦å­æ ‘çš„å³å­æ ‘æœ‰èŠ‚ç‚¹æ’å…¥,å¯¼è‡´äºŒå‰æ ‘ä¸å¹³è¡¡</p></li><li><p>å¦‚ä½•æ—‹è½¬: å…ˆåœ¨å·¦å­æ ‘å¯¹åº”çš„èŠ‚ç‚¹ä½ç½®è¿›è¡Œå·¦æ—‹,åœ¨å¯¹æ•´ä½“è¿›è¡Œå³æ—‹</p><p><img src="https://s2.loli.net/2022/05/17/j1WCKUqpPXB6Ikg.png" alt="09_å¹³è¡¡äºŒå‰æ ‘å·¦å³"></p></li></ul></li><li><p>å³å³</p><ul><li><p>å³å³: å½“æ ¹èŠ‚ç‚¹å³å­æ ‘çš„å³å­æ ‘æœ‰èŠ‚ç‚¹æ’å…¥,å¯¼è‡´äºŒå‰æ ‘ä¸å¹³è¡¡</p></li><li><p>å¦‚ä½•æ—‹è½¬: ç›´æ¥å¯¹æ•´ä½“è¿›è¡Œå·¦æ—‹å³å¯</p><p><img src="https://s2.loli.net/2022/05/17/EVB9cqb6TKH8MQo.png" alt="10_å¹³è¡¡äºŒå‰æ ‘å³å³"></p></li></ul></li><li><p>å³å·¦</p><ul><li><p>å³å·¦:å½“æ ¹èŠ‚ç‚¹å³å­æ ‘çš„å·¦å­æ ‘æœ‰èŠ‚ç‚¹æ’å…¥,å¯¼è‡´äºŒå‰æ ‘ä¸å¹³è¡¡</p></li><li><p>å¦‚ä½•æ—‹è½¬: å…ˆåœ¨å³å­æ ‘å¯¹åº”çš„èŠ‚ç‚¹ä½ç½®è¿›è¡Œå³æ—‹,åœ¨å¯¹æ•´ä½“è¿›è¡Œå·¦æ—‹</p><p><img src="https://s2.loli.net/2022/05/17/aYW7rTNilPtLbvR.png" alt="11_å¹³è¡¡äºŒå‰æ ‘å³å·¦"></p></li></ul></li></ul></li></ul><h3 id="3-4çº¢é»‘æ ‘ã€ç†è§£ã€‘"><a href="#3-4çº¢é»‘æ ‘ã€ç†è§£ã€‘" class="headerlink" title="3.4çº¢é»‘æ ‘ã€ç†è§£ã€‘"></a>3.4çº¢é»‘æ ‘ã€ç†è§£ã€‘</h3><ul><li><p>çº¢é»‘æ ‘çš„ç‰¹ç‚¹</p><ul><li>å¹³è¡¡äºŒå‰Bæ ‘</li><li>æ¯ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¯çº¢æˆ–è€…é»‘</li><li>çº¢é»‘æ ‘ä¸æ˜¯é«˜åº¦å¹³è¡¡çš„,å®ƒçš„å¹³è¡¡æ˜¯é€šè¿‡â€<font color='red'>è‡ªå·±çš„çº¢é»‘è§„åˆ™</font>â€œè¿›è¡Œå®ç°çš„</li></ul></li><li><p>çº¢é»‘æ ‘çš„çº¢é»‘è§„åˆ™æœ‰å“ªäº›</p><ol><li><p>æ¯ä¸€ä¸ªèŠ‚ç‚¹æˆ–æ˜¯çº¢è‰²çš„,æˆ–è€…æ˜¯é»‘è‰²çš„</p></li><li><p><font color='red'>æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²</font></p></li><li><p>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹æˆ–è€…çˆ¶èŠ‚ç‚¹,åˆ™è¯¥èŠ‚ç‚¹ç›¸åº”çš„æŒ‡é’ˆå±æ€§å€¼ä¸ºNil,è¿™äº›Nilè§†ä¸ºå¶èŠ‚ç‚¹,æ¯ä¸ªå¶èŠ‚ç‚¹(Nil)æ˜¯é»‘è‰²çš„</p></li><li><p>å¦‚æœæŸä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²,é‚£ä¹ˆå®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²(ä¸èƒ½å‡ºç°ä¸¤ä¸ªçº¢è‰²èŠ‚ç‚¹ç›¸è¿ çš„æƒ…å†µ)</p></li><li><p>å¯¹æ¯ä¸€ä¸ªèŠ‚ç‚¹,ä»è¯¥èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰åä»£å¶èŠ‚ç‚¹çš„ç®€å•è·¯å¾„ä¸Š,å‡åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹</p><p><img src="https://s2.loli.net/2022/05/17/spc43yvFm9fQYSX.png" alt="12_çº¢é»‘æ ‘ç»“æ„å›¾"></p></li></ol></li><li><p>çº¢é»‘æ ‘æ·»åŠ èŠ‚ç‚¹çš„é»˜è®¤é¢œè‰²</p><ul><li><p>æ·»åŠ èŠ‚ç‚¹æ—¶,é»˜è®¤ä¸ºçº¢è‰²,æ•ˆç‡é«˜</p><p><img src="https://s2.loli.net/2022/05/17/HpZJWPyGFhuXz7A.png" alt="13_çº¢é»‘æ ‘æ·»åŠ èŠ‚ç‚¹é¢œè‰²"></p></li></ul></li><li><p>çº¢é»‘æ ‘æ·»åŠ èŠ‚ç‚¹åå¦‚ä½•ä¿æŒçº¢é»‘è§„åˆ™</p><ul><li>æ ¹èŠ‚ç‚¹ä½ç½®<ul><li>ç›´æ¥å˜ä¸ºé»‘è‰²</li></ul></li><li>éæ ¹èŠ‚ç‚¹ä½ç½®<ul><li>çˆ¶èŠ‚ç‚¹ä¸ºé»‘è‰²<ul><li>ä¸éœ€è¦ä»»ä½•æ“ä½œ,é»˜è®¤çº¢è‰²å³å¯</li></ul></li><li>çˆ¶èŠ‚ç‚¹ä¸ºçº¢è‰²<ul><li>å”å”èŠ‚ç‚¹ä¸ºçº¢è‰²<ol><li>å°†â€çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºé»‘è‰²,å°†â€å”å”èŠ‚ç‚¹â€è®¾ä¸ºé»‘è‰²</li><li>å°†â€ç¥–çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºçº¢è‰²</li><li>å¦‚æœâ€ç¥–çˆ¶èŠ‚ç‚¹â€ä¸ºæ ¹èŠ‚ç‚¹,åˆ™å°†æ ¹èŠ‚ç‚¹å†æ¬¡å˜æˆé»‘è‰²</li></ol></li><li>å”å”èŠ‚ç‚¹ä¸ºé»‘è‰²<ol><li>å°†â€çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºé»‘è‰²</li><li>å°†â€ç¥–çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºçº¢è‰²</li><li>ä»¥â€ç¥–çˆ¶èŠ‚ç‚¹â€ä¸ºæ”¯ç‚¹è¿›è¡Œæ—‹è½¬</li></ol></li></ul></li></ul></li></ul></li></ul><h3 id="3-5æˆç»©æ’åºæ¡ˆä¾‹ã€åº”ç”¨ã€‘"><a href="#3-5æˆç»©æ’åºæ¡ˆä¾‹ã€åº”ç”¨ã€‘" class="headerlink" title="3.5æˆç»©æ’åºæ¡ˆä¾‹ã€åº”ç”¨ã€‘"></a>3.5æˆç»©æ’åºæ¡ˆä¾‹ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>ç”¨TreeSeté›†åˆå­˜å‚¨å¤šä¸ªå­¦ç”Ÿä¿¡æ¯(å§“å,è¯­æ–‡æˆç»©,æ•°å­¦æˆç»©,è‹±è¯­æˆç»©),å¹¶éå†è¯¥é›†åˆ</li><li>è¦æ±‚: æŒ‰ç…§æ€»åˆ†ä»é«˜åˆ°ä½å‡ºç°</li></ul></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;Student&gt; &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> chinese;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> math;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> english;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> chinese, <span class="hljs-type">int</span> math, <span class="hljs-type">int</span> english)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.chinese = chinese;<br>        <span class="hljs-built_in">this</span>.math = math;<br>        <span class="hljs-built_in">this</span>.english = english;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getChinese</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> chinese;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setChinese</span><span class="hljs-params">(<span class="hljs-type">int</span> chinese)</span> &#123;<br>        <span class="hljs-built_in">this</span>.chinese = chinese;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMath</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> math;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMath</span><span class="hljs-params">(<span class="hljs-type">int</span> math)</span> &#123;<br>        <span class="hljs-built_in">this</span>.math = math;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getEnglish</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> english;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEnglish</span><span class="hljs-params">(<span class="hljs-type">int</span> english)</span> &#123;<br>        <span class="hljs-built_in">this</span>.english = english;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSum</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.chinese + <span class="hljs-built_in">this</span>.math + <span class="hljs-built_in">this</span>.english;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(Student o)</span> &#123;<br>        <span class="hljs-comment">// ä¸»è¦æ¡ä»¶: æŒ‰ç…§æ€»åˆ†è¿›è¡Œæ’åº</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> o.getSum() - <span class="hljs-built_in">this</span>.getSum();<br>        <span class="hljs-comment">// æ¬¡è¦æ¡ä»¶: å¦‚æœæ€»åˆ†ä¸€æ ·,å°±æŒ‰ç…§è¯­æ–‡æˆç»©æ’åº</span><br>        result = result == <span class="hljs-number">0</span> ? o.getChinese() - <span class="hljs-built_in">this</span>.getChinese() : result;<br>        <span class="hljs-comment">// å¦‚æœè¯­æ–‡æˆç»©ä¹Ÿä¸€æ ·,å°±æŒ‰ç…§æ•°å­¦æˆç»©æ’åº</span><br>        result = result == <span class="hljs-number">0</span> ? o.getMath() - <span class="hljs-built_in">this</span>.getMath() : result;<br>        <span class="hljs-comment">// å¦‚æœæ€»åˆ†ä¸€æ ·,å„ç§‘æˆç»©ä¹Ÿéƒ½ä¸€æ ·,å°±æŒ‰ç…§å§“åæ’åº</span><br>        result = result == <span class="hljs-number">0</span> ? o.getName().compareTo(<span class="hljs-built_in">this</span>.getName()) : result;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeSetDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºTreeSeté›†åˆå¯¹è±¡ï¼Œé€šè¿‡æ¯”è¾ƒå™¨æ’åºè¿›è¡Œæ’åº</span><br>        TreeSet&lt;Student&gt; ts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;Student&gt;();<br>        <span class="hljs-comment">//åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">98</span>, <span class="hljs-number">100</span>, <span class="hljs-number">95</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;rose&quot;</span>, <span class="hljs-number">95</span>, <span class="hljs-number">95</span>, <span class="hljs-number">95</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;sam&quot;</span>, <span class="hljs-number">100</span>, <span class="hljs-number">93</span>, <span class="hljs-number">98</span>);<br>        <span class="hljs-comment">//æŠŠå­¦ç”Ÿå¯¹è±¡æ·»åŠ åˆ°é›†åˆ</span><br>        ts.add(s1);<br>        ts.add(s2);<br>        ts.add(s3);<br><br>        <span class="hljs-comment">//éå†é›†åˆ</span><br>        <span class="hljs-keyword">for</span> (Student s : ts) &#123;<br>            System.out.println(s.getName() + <span class="hljs-string">&quot;,&quot;</span> + s.getChinese() + <span class="hljs-string">&quot;,&quot;</span> + s.getMath() + <span class="hljs-string">&quot;,&quot;</span> + s.getEnglish() + <span class="hljs-string">&quot;,&quot;</span> + s.getSum());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-HashSeté›†åˆ"><a href="#4-HashSeté›†åˆ" class="headerlink" title="4.HashSeté›†åˆ"></a>4.HashSeté›†åˆ</h2><h3 id="4-1HashSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘"><a href="#4-1HashSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘" class="headerlink" title="4.1HashSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘"></a>4.1HashSeté›†åˆæ¦‚è¿°å’Œç‰¹ç‚¹ã€åº”ç”¨ã€‘</h3><ul><li>åº•å±‚æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨</li><li>å­˜å–æ— åº</li><li>ä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ </li><li>æ²¡æœ‰ç´¢å¼•,ä¸èƒ½ä½¿ç”¨æ™®é€šforå¾ªç¯éå†</li></ul><h3 id="4-2HashSeté›†åˆçš„åŸºæœ¬åº”ç”¨ã€åº”ç”¨ã€‘"><a href="#4-2HashSeté›†åˆçš„åŸºæœ¬åº”ç”¨ã€åº”ç”¨ã€‘" class="headerlink" title="4.2HashSeté›†åˆçš„åŸºæœ¬åº”ç”¨ã€åº”ç”¨ã€‘"></a>4.2HashSeté›†åˆçš„åŸºæœ¬åº”ç”¨ã€åº”ç”¨ã€‘</h3><p>å­˜å‚¨å­—ç¬¦ä¸²å¹¶éå†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        HashSet&lt;String&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;String&gt;();<br><br>        <span class="hljs-comment">//æ·»åŠ å…ƒç´ </span><br>        set.add(<span class="hljs-string">&quot;hello&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;world&quot;</span>);<br>        set.add(<span class="hljs-string">&quot;java&quot;</span>);<br>        <span class="hljs-comment">//ä¸åŒ…å«é‡å¤å…ƒç´ çš„é›†åˆ</span><br>        set.add(<span class="hljs-string">&quot;world&quot;</span>);<br><br>        <span class="hljs-comment">//éå†</span><br>        <span class="hljs-keyword">for</span>(String s : set) &#123;<br>            System.out.println(s);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-3å“ˆå¸Œå€¼ã€ç†è§£ã€‘"><a href="#4-3å“ˆå¸Œå€¼ã€ç†è§£ã€‘" class="headerlink" title="4.3å“ˆå¸Œå€¼ã€ç†è§£ã€‘"></a>4.3å“ˆå¸Œå€¼ã€ç†è§£ã€‘</h3><ul><li><p>å“ˆå¸Œå€¼ç®€ä»‹</p><pre><code class="hljs">æ˜¯JDKæ ¹æ®å¯¹è±¡çš„åœ°å€æˆ–è€…å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ç®—å‡ºæ¥çš„intç±»å‹çš„æ•°å€¼</code></pre></li><li><p>å¦‚ä½•è·å–å“ˆå¸Œå€¼</p><pre><code class="hljs">Objectç±»ä¸­çš„public int hashCode()ï¼šè¿”å›å¯¹è±¡çš„å“ˆå¸Œç å€¼</code></pre></li><li><p>å“ˆå¸Œå€¼çš„ç‰¹ç‚¹</p><ul><li>åŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨hashCode()æ–¹æ³•è¿”å›çš„å“ˆå¸Œå€¼æ˜¯ç›¸åŒçš„</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸åŒå¯¹è±¡çš„å“ˆå¸Œå€¼æ˜¯ä¸åŒçš„ã€‚è€Œé‡å†™hashCode()æ–¹æ³•ï¼Œå¯ä»¥å®ç°è®©ä¸åŒå¯¹è±¡çš„å“ˆå¸Œå€¼ç›¸åŒ</li></ul></li></ul><h3 id="4-4å“ˆå¸Œè¡¨ç»“æ„ã€ç†è§£ã€‘"><a href="#4-4å“ˆå¸Œè¡¨ç»“æ„ã€ç†è§£ã€‘" class="headerlink" title="4.4å“ˆå¸Œè¡¨ç»“æ„ã€ç†è§£ã€‘"></a>4.4å“ˆå¸Œè¡¨ç»“æ„ã€ç†è§£ã€‘</h3><ul><li><p>JDK1.8ä»¥å‰</p><pre><code class="hljs">æ•°ç»„ + é“¾è¡¨</code></pre><p><img src="https://s2.loli.net/2022/05/17/fzLk4sjIZg7mX5J.png" alt="14_JKD8ä»¥å‰å“ˆå¸Œè¡¨"></p></li><li><p>JDK1.8ä»¥å</p><ul><li><p>èŠ‚ç‚¹ä¸ªæ•°å°‘äºç­‰äº8ä¸ª</p><pre><code class="hljs">æ•°ç»„ + é“¾è¡¨</code></pre></li><li><p>èŠ‚ç‚¹ä¸ªæ•°å¤šäº8ä¸ª</p><pre><code class="hljs">æ•°ç»„ + çº¢é»‘æ ‘</code></pre></li></ul><p><img src="https://s2.loli.net/2022/05/17/h1MzytHugI2j5EQ.png" alt="15_JKD8ä»¥åå“ˆå¸Œè¡¨"></p></li></ul><h3 id="4-5HashSeté›†åˆå­˜å‚¨å­¦ç”Ÿå¯¹è±¡å¹¶éå†ã€åº”ç”¨ã€‘"><a href="#4-5HashSeté›†åˆå­˜å‚¨å­¦ç”Ÿå¯¹è±¡å¹¶éå†ã€åº”ç”¨ã€‘" class="headerlink" title="4.5HashSeté›†åˆå­˜å‚¨å­¦ç”Ÿå¯¹è±¡å¹¶éå†ã€åº”ç”¨ã€‘"></a>4.5HashSeté›†åˆå­˜å‚¨å­¦ç”Ÿå¯¹è±¡å¹¶éå†ã€åº”ç”¨ã€‘</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li>åˆ›å»ºä¸€ä¸ªå­˜å‚¨å­¦ç”Ÿå¯¹è±¡çš„é›†åˆï¼Œå­˜å‚¨å¤šä¸ªå­¦ç”Ÿå¯¹è±¡ï¼Œä½¿ç”¨ç¨‹åºå®ç°åœ¨æ§åˆ¶å°éå†è¯¥é›†åˆ</li><li>è¦æ±‚ï¼šå­¦ç”Ÿå¯¹è±¡çš„æˆå‘˜å˜é‡å€¼ç›¸åŒï¼Œæˆ‘ä»¬å°±è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡</li></ul></li><li><p>ä»£ç å®ç°</p><p>å­¦ç”Ÿç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> (Student) o;<br><br>        <span class="hljs-keyword">if</span> (age != student.age) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">return</span> name != <span class="hljs-literal">null</span> ? name.equals(student.name) : student.name == <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> name != <span class="hljs-literal">null</span> ? name.hashCode() : <span class="hljs-number">0</span>;<br>        result = <span class="hljs-number">31</span> * result + age;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSetDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºHashSeté›†åˆå¯¹è±¡</span><br>        HashSet&lt;Student&gt; hs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;Student&gt;();<br><br>        <span class="hljs-comment">//åˆ›å»ºå­¦ç”Ÿå¯¹è±¡</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>, <span class="hljs-number">30</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;å¼ æ›¼ç‰&quot;</span>, <span class="hljs-number">35</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>, <span class="hljs-number">33</span>);<br><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;ç‹ç¥–è´¤&quot;</span>, <span class="hljs-number">33</span>);<br><br>        <span class="hljs-comment">//æŠŠå­¦ç”Ÿæ·»åŠ åˆ°é›†åˆ</span><br>        hs.add(s1);<br>        hs.add(s2);<br>        hs.add(s3);<br>        hs.add(s4);<br><br>        <span class="hljs-comment">//éå†é›†åˆ(å¢å¼ºfor)</span><br>        <span class="hljs-keyword">for</span> (Student s : hs) &#123;<br>            System.out.println(s.getName() + <span class="hljs-string">&quot;,&quot;</span> + s.getAge());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ€»ç»“</p><pre><code class="hljs">HashSeté›†åˆå­˜å‚¨è‡ªå®šä¹‰ç±»å‹å…ƒç´ ,è¦æƒ³å®ç°å…ƒç´ çš„å”¯ä¸€,è¦æ±‚å¿…é¡»é‡å†™hashCodeæ–¹æ³•å’Œequalsæ–¹æ³•</code></pre></li></ul>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo+Githubæ­å»ºåšå®¢</title>
    <link href="/Hexo/2021/03/23/Hexo+github/"/>
    <url>/Hexo/2021/03/23/Hexo+github/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ•™å¤§å®¶æ­å»ºå…è´¹çš„ä¸ªäººåšå®¢ï¼Œæ³¨æ„æ˜¯<font color='red'>å…è´¹ï¼å…è´¹ï¼å…è´¹ï¼</font></p><h1 id="ä¸€ã€åšå®¢å±•ç¤º"><a href="#ä¸€ã€åšå®¢å±•ç¤º" class="headerlink" title="ä¸€ã€åšå®¢å±•ç¤º"></a>ä¸€ã€åšå®¢å±•ç¤º</h1><p>åšå®¢åœ°å€ï¼š<a href="https://1902756969.github.io/Hexo/">https://1902756969.github.io/Hexo/</a></p><p><img src="https://s2.loli.net/2022/05/17/EQJ8bunavfMDKZ4.png" alt="image-20220517192724417"></p><h1 id="äºŒã€æ³¨å†Œã€ä¸‹è½½ä¸å®‰è£…"><a href="#äºŒã€æ³¨å†Œã€ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="äºŒã€æ³¨å†Œã€ä¸‹è½½ä¸å®‰è£…"></a>äºŒã€æ³¨å†Œã€ä¸‹è½½ä¸å®‰è£…</h1><h2 id="ã€1ã€‘githubæ³¨å†Œ"><a href="#ã€1ã€‘githubæ³¨å†Œ" class="headerlink" title="ã€1ã€‘githubæ³¨å†Œ"></a>ã€1ã€‘githubæ³¨å†Œ</h2><blockquote><p>githubåœ°å€ï¼š<a href="https://github.com/">https://github.com/</a></p><p>æ³¨å†Œï¼Œæ³¨æ„æ˜¯è‹±æ–‡ï¼Œå› ä¸ºæ˜¯å¤–é“¾æ‰€ä»¥ç»™å¤§å®¶æ¨èä¸€æ¬¾ä»£ç†åŠ é€Ÿ(ä¸æ˜¯ç¿»å¢™)è½¯ä»¶</p><p>FastGithub.UIï¼š<a href="https://cloud.tsinghua.edu.cn/d/df482a15afb64dfeaff8/files/?p=/fastgithub_win-x64.zip">https://cloud.tsinghua.edu.cn/d/df482a15afb64dfeaff8/files/?p=%2Ffastgithub_win-x64.zip</a></p></blockquote><p><img src="https://s2.loli.net/2022/05/17/u5jFCO3he1lPSGA.png" alt="image-20220517193124149"></p><h2 id="ã€2ã€‘Typoraä¸‹è½½"><a href="#ã€2ã€‘Typoraä¸‹è½½" class="headerlink" title="ã€2ã€‘Typoraä¸‹è½½"></a>ã€2ã€‘Typoraä¸‹è½½</h2><blockquote><p>ã€ä¸‹è½½åœ°å€ã€‘ï¼š<a href="https://www.typora.io/">https://www.typora.io/</a></p><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1qNAbiNLgavwvvc08MCLJNA?pwd=0lvz">https://pan.baidu.com/s/1qNAbiNLgavwvvc08MCLJNA?pwd=0lvz</a><br>æå–ç ï¼š0lvz</p></blockquote><h2 id="ã€3ã€‘nodeå®‰è£…"><a href="#ã€3ã€‘nodeå®‰è£…" class="headerlink" title="ã€3ã€‘nodeå®‰è£…"></a>ã€3ã€‘nodeå®‰è£…</h2><blockquote><p>ã€ä¸‹è½½åœ°å€ã€‘ï¼š<a href="https://nodejs.org/zh-cn/">https://nodejs.org/zh-cn/</a></p><p>ã€å®‰è£…è¿‡ç¨‹ã€‘ï¼šé€‰æ‹©ç£ç›˜å¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–ç›˜ï¼Œç„¶åä¸€ç›´ä¸‹ä¸€æ­¥å°±å¥½äº†ã€‚</p></blockquote><h2 id="ã€4ã€‘gitå®‰è£…"><a href="#ã€4ã€‘gitå®‰è£…" class="headerlink" title="ã€4ã€‘gitå®‰è£…"></a>ã€4ã€‘gitå®‰è£…</h2><blockquote><p>ã€ä¸‹è½½åœ°å€ã€‘ï¼š<a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></p></blockquote><p>ä¸Šé¢ä¸‰æ¬¾è½¯ä»¶å®‰è£…å»ºè®®ä¸è¦é»˜è®¤è·¯å¾„</p><h1 id="ä¸‰ã€åˆ›å»ºæœ¬åœ°åšå®¢æ–‡ä»¶å¤¹"><a href="#ä¸‰ã€åˆ›å»ºæœ¬åœ°åšå®¢æ–‡ä»¶å¤¹" class="headerlink" title="ä¸‰ã€åˆ›å»ºæœ¬åœ°åšå®¢æ–‡ä»¶å¤¹"></a>ä¸‰ã€åˆ›å»ºæœ¬åœ°åšå®¢æ–‡ä»¶å¤¹</h1><h2 id="hexo-cliå®‰è£…"><a href="#hexo-cliå®‰è£…" class="headerlink" title="hexo-cliå®‰è£…"></a>hexo-cliå®‰è£…</h2><p>é€‰æ‹©å®‰è£…ä½ç½®ï¼Œæ‰“å¼€cmdçª—å£</p><blockquote><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">npm install hexo-<span class="hljs-keyword">cli</span> -g<br><br>æˆ–<br><br>å…ˆå®‰è£…cnpmï¼Œç„¶ååˆ©ç”¨cnpmå®‰è£…hexo-<span class="hljs-keyword">cli</span><br><br>npm install cnpm<br><br>cnpm install hexo-<span class="hljs-keyword">cli</span> -g<br></code></pre></td></tr></table></figure></blockquote><h2 id="åˆå§‹åŒ–hexoé¡¹ç›®"><a href="#åˆå§‹åŒ–hexoé¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–hexoé¡¹ç›®"></a>åˆå§‹åŒ–hexoé¡¹ç›®</h2><blockquote><p>hexo init blog</p></blockquote><h2 id="é¡¹ç›®å¯åŠ¨"><a href="#é¡¹ç›®å¯åŠ¨" class="headerlink" title="é¡¹ç›®å¯åŠ¨"></a>é¡¹ç›®å¯åŠ¨</h2><blockquote><p>hexoä¸‰ä»¶å¥—ï¼š</p><p>-æ¸…é™¤é™æ€èµ„æº</p><p>hexo clean</p><p>-æ„å»ºç”Ÿæˆçš„é¡µé¢ç›¸å…³å†…å®¹</p><p>hexo g</p><p>-é¡¹ç›®å¯åŠ¨</p><p>hexo s</p></blockquote><h1 id="å››ã€æ·»åŠ ä¸»é¢˜ä»¥hexo-theme-fluidä¸»é¢˜ä¸ºä¾‹"><a href="#å››ã€æ·»åŠ ä¸»é¢˜ä»¥hexo-theme-fluidä¸»é¢˜ä¸ºä¾‹" class="headerlink" title="å››ã€æ·»åŠ ä¸»é¢˜ä»¥hexo-theme-fluidä¸»é¢˜ä¸ºä¾‹"></a>å››ã€æ·»åŠ ä¸»é¢˜ä»¥hexo-theme-fluidä¸»é¢˜ä¸ºä¾‹</h1><h2 id="åœ¨blog-themesç›®å½•ä¸‹"><a href="#åœ¨blog-themesç›®å½•ä¸‹" class="headerlink" title="åœ¨blog\themesç›®å½•ä¸‹"></a>åœ¨blog\themesç›®å½•ä¸‹</h2><blockquote><p>æœ‰äº†FastGithubå¯ä»¥ä»githubä¸‹è½½æœ€æ–°æœ€å¥½çš„èµ„æº</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install <span class="hljs-comment">--save hexo-theme-fluid</span><br></code></pre></td></tr></table></figure></blockquote><p><a href="https://github.com/fluid-dev/hexo-theme-fluid/releases">https://github.com/fluid-dev/hexo-theme-fluid/releases</a> </p><p>ä¹Ÿå¯ä»¥è¿›å»ä¸‹è½½èµ„æºåŒ…æ”¾è¿›blog\themes</p><h2 id="ä¿®æ”¹blog-x2F-conf-yml"><a href="#ä¿®æ”¹blog-x2F-conf-yml" class="headerlink" title="ä¿®æ”¹blog&#x2F;_conf.yml"></a>ä¿®æ”¹blog&#x2F;_conf.yml</h2><blockquote><p>æ‰¾åˆ°themeï¼Œæ›¿æ¢ä¸ºå¯¹åº”ä¸‹è½½ä¸»é¢˜åå­—ï¼ˆåœ¨themesä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶å¤¹åï¼‰</p><p>theme: hexo-theme-fluid</p></blockquote><h2 id="ä¿®æ”¹ä¸ºä¸»é¢˜è¯­è¨€ä¸ºä¸­æ–‡"><a href="#ä¿®æ”¹ä¸ºä¸»é¢˜è¯­è¨€ä¸ºä¸­æ–‡" class="headerlink" title="ä¿®æ”¹ä¸ºä¸»é¢˜è¯­è¨€ä¸ºä¸­æ–‡"></a>ä¿®æ”¹ä¸ºä¸»é¢˜è¯­è¨€ä¸ºä¸­æ–‡</h2><blockquote><p>åœ¨blogç›®å½•ä¸‹çš„_conf.ymlï¼Œæ‰¾åˆ°æ–‡ä»¶å†…å®¹é‡Œçš„languageæ›¿æ¢ä¸ºä»¥ä¸‹</p><p>language: zh-CN #æŒ‡å®šè¯­è¨€ï¼Œä¼šå½±å“ä¸»é¢˜æ˜¾ç¤ºçš„è¯­è¨€ï¼ŒæŒ‰éœ€ä¿®æ”¹</p></blockquote><h2 id="ç”Ÿæˆabouté¡µé¢"><a href="#ç”Ÿæˆabouté¡µé¢" class="headerlink" title="ç”Ÿæˆabouté¡µé¢"></a>ç”Ÿæˆabouté¡µé¢</h2><p>åœ¨blogè·¯å¾„ä¸‹ï¼Œæ‰§è¡ŒæŒ‡ä»¤ï¼ˆç®¡ç†å‘˜cmdæ“ä½œï¼‰</p><p>hexo new page about</p><p>åˆ›å»ºæˆåŠŸåï¼Œå»åˆ°blog\source\about\index.mdï¼Œæ·»åŠ layoutå±æ€§ï¼Œä»¥ä¸ºä¸ºindex.mdé‡Œæ‰€æœ‰å†…å®¹</p><p>title: about<br>date: 2021-10-01 14:53:12<br>layout: about</p><h2 id="æ·»åŠ å‹é“¾å¯¼èˆª"><a href="#æ·»åŠ å‹é“¾å¯¼èˆª" class="headerlink" title="æ·»åŠ å‹é“¾å¯¼èˆª"></a>æ·»åŠ å‹é“¾å¯¼èˆª</h2><p>åœ¨D:\hexo\blog\themes\hexo-theme-fluid \ __config.ymlä¸‹æ‰¾åˆ°è¿™é‡Œ</p><p><img src="https://s2.loli.net/2022/05/17/YVQ4FahHtqJs2fE.png" alt="image-20220517194807113"></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">links:</span><br><span class="hljs-symbol">  enable:</span> true<br><span class="hljs-symbol">  banner_img:</span> <span class="hljs-keyword">/img/</span>bgaa.jpg<br><span class="hljs-symbol">  banner_img_height:</span> <span class="hljs-number">60</span><br><span class="hljs-symbol">  banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br><br>  <span class="hljs-meta"># å‹é“¾çš„æˆå‘˜é¡¹</span><br><br>  <span class="hljs-meta"># Member item of page</span><br><span class="hljs-symbol">    items:</span><br>    - <span class="hljs-punctuation">&#123;</span><br><span class="hljs-symbol">      title:</span> <span class="hljs-string">&quot;å•Šæ˜Ÿçš„CSDN&quot;</span>,<br><span class="hljs-symbol">      intro:</span> <span class="hljs-string">&quot;CSDN&quot;</span>,<br><span class="hljs-symbol">      link:</span> <span class="hljs-string">&quot;é“¾æ¥åœ°å€&quot;</span>,<br><span class="hljs-symbol">      avatar:</span> <span class="hljs-string">&quot;/img/csdn.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>    - <span class="hljs-punctuation">&#123;</span><br><span class="hljs-symbol">      title:</span> <span class="hljs-string">&quot;å•Šæ˜Ÿçš„ç äº‘&quot;</span>,<br><span class="hljs-symbol">      intro:</span> <span class="hljs-string">&quot; Git ä»“åº“&quot;</span>,<br><span class="hljs-symbol">      link:</span> <span class="hljs-string">&quot;é“¾æ¥åœ°å€&quot;</span>,<br><span class="hljs-symbol">      avatar:</span> <span class="hljs-string">&quot;/img/mayun.png&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>å…¶ä»–çš„èƒŒæ™¯å›¾å¤´åƒä»€ä¹ˆçš„éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢ã€‚å¯ä»¥è‡ªå·±ä¿®æ”¹</p><h1 id="mdæ–‡ä»¶åšå®¢ä¸Šä¼ "><a href="#mdæ–‡ä»¶åšå®¢ä¸Šä¼ " class="headerlink" title=".mdæ–‡ä»¶åšå®¢ä¸Šä¼ "></a>.mdæ–‡ä»¶åšå®¢ä¸Šä¼ </h1><p>å¯ä»¥ç›´æ¥åœ¨blogç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ç”Ÿæˆ.mdï¼Œå†è¿›è¡Œå¯¹è¯¥.mdè¿›è¡Œå®Œå–„å†…å®¹ã€‚</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe">hexo <span class="hljs-keyword">new</span> <span class="hljs-type"></span>â€œæˆ‘çš„åšå®¢â€<br></code></pre></td></tr></table></figure><p>è¿™æ—¶å€™å°±ç”Ÿæˆåœ¨blog\source \ _posts</p><p><font color='red'>æ³¨æ„:æ‰€æœ‰çš„æ–‡ç« éƒ½åœ¨blog\source \ _posts</font></p><p>åœ¨.mdæ–‡ä»¶é‡Œé¢åŠ å…¥</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs subunit">title: Hello World <br>date: 2021<span class="hljs-string">-01</span><span class="hljs-string">-01</span> 15:30:03<br><span class="hljs-keyword">tags:</span> Hello World <br></code></pre></td></tr></table></figure><h1 id="å® ç‰©æ’ä»¶"><a href="#å® ç‰©æ’ä»¶" class="headerlink" title="å® ç‰©æ’ä»¶"></a>å® ç‰©æ’ä»¶</h1><blockquote><p>npm install â€“save hexo-helper-live2d<br>æˆ–<br>cnpm install â€“save hexo-helper-live2d</p><p>1ã€cnpm install â€“save hexo-helper-live2d<br>2ã€<a href="https://www.npmjs.com/package/hexo-helper-live2d">live2dæ’ä»¶</a><br>3ã€å®‰è£…åˆé€‚çš„å® ç‰©cnpm install live2d-widget-model-chitose<br>4ã€åœ¨åšå®¢_config.ymlé…ç½®æ–‡ä»¶ä¸­ï¼ˆä¸æ˜¯themesé‡Œçš„ï¼‰æ·»åŠ å³å¯</p></blockquote><p>æœ¬åœ°åšå®¢åˆ›å»ºå®Œæˆäº†ï¼</p><p>æˆ‘ä»¬è¦ä¸Šä¼ åˆ°github</p><h1 id="äº”ã€åˆ›å»ºgithubä»“åº“"><a href="#äº”ã€åˆ›å»ºgithubä»“åº“" class="headerlink" title="äº”ã€åˆ›å»ºgithubä»“åº“"></a>äº”ã€åˆ›å»ºgithubä»“åº“</h1><p>çœ‹å›¾æ“ä½œ</p><p><img src="https://s2.loli.net/2022/05/17/IC6nPfMVSwGhOKN.png" alt="image-20220517195637868"></p><p><img src="https://s2.loli.net/2022/05/17/GzIdBVYilhy5O1H.png" alt="image-20220517195744205"></p><p>åˆ›å»ºokåè¿›å…¥è´¦å·è®¾ç½®</p><p><img src="/Hexo/../AppData/Roaming/Typora/typora-user-images/image-20220517195902871.png" alt="image-20220517195902871"></p><p>è®¾ç½®å¯†é’¥</p><p><img src="/Hexo/../AppData/Roaming/Typora/typora-user-images/image-20220517195953685.png" alt="image-20220517195953685"></p><p>åˆ›å»ºæ–°çš„å¯†é’¥</p><p><img src="/Hexo/../AppData/Roaming/Typora/typora-user-images/image-20220517200051582.png" alt="image-20220517200051582"></p><p>æ‰¾åˆ°æœ¬åœ°C:\Users\admin \ .ssh\id_rsa.pubä¸Šçš„å¯†é’¥å¤åˆ¶è¿‡å»</p><h1 id="æäº¤æ­å»ºçš„åšå®¢åˆ°Githubä¸Šï¼Œæ­£å¼å®Œæˆï¼"><a href="#æäº¤æ­å»ºçš„åšå®¢åˆ°Githubä¸Šï¼Œæ­£å¼å®Œæˆï¼" class="headerlink" title="æäº¤æ­å»ºçš„åšå®¢åˆ°Githubä¸Šï¼Œæ­£å¼å®Œæˆï¼"></a>æäº¤æ­å»ºçš„åšå®¢åˆ°Githubä¸Šï¼Œæ­£å¼å®Œæˆï¼</h1><p>åœ¨blog \ _ config.yml</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">type:</span> github<br><span class="hljs-symbol">repo:</span><br><span class="hljs-symbol">branch:</span> master<br><span class="hljs-symbol">live2d:</span> https:<span class="hljs-comment">//1902756969.github.io/Hexo/</span><br><span class="hljs-symbol">enable:</span> true<br></code></pre></td></tr></table></figure><blockquote><p>å®‰è£…gitä¸Šä¼ åŠ©æ‰‹ï¼ˆå¦‚æœæœ‰gitè®¾ç½®è¿‡æœ‰å¸å·å¯†ç ï¼Œå°±å»å…ˆå¯¹gitè¿›è¡Œæ“ä½œï¼‰</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">npm <span class="hljs-keyword">install</span> hexo-deployer-git â€“save<br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">cnpm <span class="hljs-keyword">install</span> hexo-deployer-git â€“save<br></code></pre></td></tr></table></figure><p>å®Œæˆåï¼Œè¾“å…¥</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo d</span><br></code></pre></td></tr></table></figure></blockquote><blockquote><p>gitçš„æ“ä½œ<br>æŸ¥çœ‹é…ç½®ä¿¡æ¯ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">$ git config â€“list<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ç”¨æˆ·å</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">git config â€“<span class="hljs-keyword">global</span> <span class="hljs-keyword">user</span>.name â€œxxxx(æ–°çš„ç”¨æˆ·å)â€<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹å¯†ç </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">git config â€“<span class="hljs-keyword">global</span> <span class="hljs-keyword">user</span>.<span class="hljs-keyword">password</span> â€œxxxx(æ–°çš„å¯†ç )â€<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹é‚®ç®±</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">git</span> <span class="hljs-selector-tag">config</span> â€“<span class="hljs-selector-tag">global</span> <span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.email</span> â€œ<span class="hljs-selector-attr">[xxxx@xxx.com]</span>(<span class="hljs-attribute">mailto</span>:xxxx<span class="hljs-variable">@xxx</span>.com)(æ–°çš„é‚®ç®±)â€<br></code></pre></td></tr></table></figure><p>æ¸…é™¤æ‰ç¼“å­˜åœ¨gitä¸­çš„ç”¨æˆ·åå’Œå¯†ç </p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">git credential-manager uninstall</span><br></code></pre></td></tr></table></figure></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Collectioné›†åˆ</title>
    <link href="/Hexo/2021/03/23/%E9%9B%86%E5%90%8801/"/>
    <url>/Hexo/2021/03/23/%E9%9B%86%E5%90%8801/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Collectioné›†åˆ"><a href="#1-Collectioné›†åˆ" class="headerlink" title="1.Collectioné›†åˆ"></a>1.Collectioné›†åˆ</h2><h3 id="1-1æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«ã€ç†è§£ã€‘"><a href="#1-1æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«ã€ç†è§£ã€‘" class="headerlink" title="1.1æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«ã€ç†è§£ã€‘"></a>1.1æ•°ç»„å’Œé›†åˆçš„åŒºåˆ«ã€ç†è§£ã€‘</h3><ul><li><p>ç›¸åŒç‚¹</p><p>éƒ½æ˜¯å®¹å™¨,å¯ä»¥å­˜å‚¨å¤šä¸ªæ•°æ®</p></li><li><p>ä¸åŒç‚¹</p><ul><li><p>æ•°ç»„çš„é•¿åº¦æ˜¯ä¸å¯å˜çš„,é›†åˆçš„é•¿åº¦æ˜¯å¯å˜çš„</p></li><li><p>æ•°ç»„å¯ä»¥å­˜åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹</p><p>é›†åˆåªèƒ½å­˜å¼•ç”¨æ•°æ®ç±»å‹,å¦‚æœè¦å­˜åŸºæœ¬æ•°æ®ç±»å‹,éœ€è¦å­˜å¯¹åº”çš„åŒ…è£…ç±»</p></li></ul></li></ul><h3 id="1-2é›†åˆç±»ä½“ç³»ç»“æ„ã€ç†è§£ã€‘"><a href="#1-2é›†åˆç±»ä½“ç³»ç»“æ„ã€ç†è§£ã€‘" class="headerlink" title="1.2é›†åˆç±»ä½“ç³»ç»“æ„ã€ç†è§£ã€‘"></a>1.2é›†åˆç±»ä½“ç³»ç»“æ„ã€ç†è§£ã€‘</h3><p><img src="https://s2.loli.net/2022/05/17/2f68Dyva4bk3XNM.png" alt="01_é›†åˆç±»ä½“ç³»ç»“æ„å›¾"></p><h3 id="1-3Collection-é›†åˆæ¦‚è¿°å’Œä½¿ç”¨ã€åº”ç”¨ã€‘"><a href="#1-3Collection-é›†åˆæ¦‚è¿°å’Œä½¿ç”¨ã€åº”ç”¨ã€‘" class="headerlink" title="1.3Collection é›†åˆæ¦‚è¿°å’Œä½¿ç”¨ã€åº”ç”¨ã€‘"></a>1.3Collection é›†åˆæ¦‚è¿°å’Œä½¿ç”¨ã€åº”ç”¨ã€‘</h3><ul><li><p>Collectioné›†åˆæ¦‚è¿°</p><ul><li>æ˜¯å•ä¾‹é›†åˆçš„é¡¶å±‚æ¥å£,å®ƒè¡¨ç¤ºä¸€ç»„å¯¹è±¡,è¿™äº›å¯¹è±¡ä¹Ÿç§°ä¸ºCollectionçš„å…ƒç´ </li><li>JDK ä¸æä¾›æ­¤æ¥å£çš„ä»»ä½•ç›´æ¥å®ç°.å®ƒæä¾›æ›´å…·ä½“çš„å­æ¥å£(å¦‚Setå’ŒList)å®ç°</li></ul></li><li><p>åˆ›å»ºCollectioné›†åˆçš„å¯¹è±¡</p><ul><li>å¤šæ€çš„æ–¹å¼</li><li>å…·ä½“çš„å®ç°ç±»ArrayList</li></ul></li><li><p>Collectioné›†åˆå¸¸ç”¨æ–¹æ³•</p><table><thead><tr><th align="left">æ–¹æ³•å</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">boolean add(E e)</td><td align="left">æ·»åŠ å…ƒç´ </td></tr><tr><td align="left">boolean remove(Object o)</td><td align="left">ä»é›†åˆä¸­ç§»é™¤æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td align="left">boolean removeIf(Object o)</td><td align="left">æ ¹æ®æ¡ä»¶è¿›è¡Œç§»é™¤</td></tr><tr><td align="left">void   clear()</td><td align="left">æ¸…ç©ºé›†åˆä¸­çš„å…ƒç´ </td></tr><tr><td align="left">boolean contains(Object o)</td><td align="left">åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td align="left">boolean isEmpty()</td><td align="left">åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º</td></tr><tr><td align="left">int   size()</td><td align="left">é›†åˆçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</td></tr></tbody></table></li></ul><h3 id="1-4Collectioné›†åˆçš„éå†ã€åº”ç”¨ã€‘"><a href="#1-4Collectioné›†åˆçš„éå†ã€åº”ç”¨ã€‘" class="headerlink" title="1.4Collectioné›†åˆçš„éå†ã€åº”ç”¨ã€‘"></a>1.4Collectioné›†åˆçš„éå†ã€åº”ç”¨ã€‘</h3><ul><li><p>è¿­ä»£å™¨ä»‹ç»</p><ul><li><em>è¿­ä»£å™¨,é›†åˆçš„ä¸“ç”¨éå†æ–¹å¼</em></li><li><em>Iterator<E> iterator(): è¿”å›æ­¤é›†åˆä¸­å…ƒç´ çš„è¿­ä»£å™¨,é€šè¿‡é›†åˆå¯¹è±¡çš„iterator()æ–¹æ³•å¾—åˆ°</em></li></ul></li><li><p>Iteratorä¸­çš„å¸¸ç”¨æ–¹æ³•</p><p>â€‹    boolean hasNext(): åˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦æœ‰å…ƒç´ å¯ä»¥è¢«å–å‡º<br>â€‹    E next(): è·å–å½“å‰ä½ç½®çš„å…ƒç´ ,å°†è¿­ä»£å™¨å¯¹è±¡ç§»å‘ä¸‹ä¸€ä¸ªç´¢å¼•ä½ç½®</p></li><li><p>Collectioné›†åˆçš„éå†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IteratorDemo1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºé›†åˆå¯¹è±¡</span><br>        Collection&lt;String&gt; c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>        <span class="hljs-comment">//æ·»åŠ å…ƒç´ </span><br>        c.add(<span class="hljs-string">&quot;hello&quot;</span>);<br>        c.add(<span class="hljs-string">&quot;world&quot;</span>);<br>        c.add(<span class="hljs-string">&quot;java&quot;</span>);<br>        c.add(<span class="hljs-string">&quot;javaee&quot;</span>);<br><br>        <span class="hljs-comment">//Iterator&lt;E&gt; iterator()ï¼šè¿”å›æ­¤é›†åˆä¸­å…ƒç´ çš„è¿­ä»£å™¨ï¼Œé€šè¿‡é›†åˆçš„iterator()æ–¹æ³•å¾—åˆ°</span><br>        Iterator&lt;String&gt; it = c.iterator();<br> <br>        <span class="hljs-comment">//ç”¨whileå¾ªç¯æ”¹è¿›å…ƒç´ çš„åˆ¤æ–­å’Œè·å–</span><br>        <span class="hljs-keyword">while</span> (it.hasNext()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> it.next();<br>            System.out.println(s);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è¿­ä»£å™¨ä¸­åˆ é™¤çš„æ–¹æ³•</p><p>â€‹    void remove(): åˆ é™¤è¿­ä»£å™¨å¯¹è±¡å½“å‰æŒ‡å‘çš„å…ƒç´ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IteratorDemo2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        ArrayList&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        list.add(<span class="hljs-string">&quot;a&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;b&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;b&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;c&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;d&quot;</span>);<br><br>        Iterator&lt;String&gt; it = list.iterator();<br>        <span class="hljs-keyword">while</span>(it.hasNext())&#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> it.next();<br>            <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;b&quot;</span>.equals(s))&#123;<br>                <span class="hljs-comment">//æŒ‡å‘è°,é‚£ä¹ˆæ­¤æ—¶å°±åˆ é™¤è°.</span><br>                it.remove();<br>            &#125;<br>        &#125;<br>        System.out.println(list);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-5å¢å¼ºforå¾ªç¯ã€åº”ç”¨ã€‘"><a href="#1-5å¢å¼ºforå¾ªç¯ã€åº”ç”¨ã€‘" class="headerlink" title="1.5å¢å¼ºforå¾ªç¯ã€åº”ç”¨ã€‘"></a>1.5å¢å¼ºforå¾ªç¯ã€åº”ç”¨ã€‘</h3><ul><li><p>ä»‹ç»</p><ul><li>å®ƒæ˜¯JDK5ä¹‹åå‡ºç°çš„,å…¶å†…éƒ¨åŸç†æ˜¯ä¸€ä¸ªIteratorè¿­ä»£å™¨</li><li>å®ç°Iterableæ¥å£çš„ç±»æ‰å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨å’Œå¢å¼ºfor</li><li>ç®€åŒ–æ•°ç»„å’ŒCollectioné›†åˆçš„éå†</li></ul></li><li><p>æ ¼å¼</p><p>â€‹    for(é›†åˆ&#x2F;æ•°ç»„ä¸­å…ƒç´ çš„æ•°æ®ç±»å‹ å˜é‡å :  é›†åˆ&#x2F;æ•°ç»„å) {</p><p>â€‹        &#x2F;&#x2F; å·²ç»å°†å½“å‰éå†åˆ°çš„å…ƒç´ å°è£…åˆ°å˜é‡ä¸­äº†,ç›´æ¥ä½¿ç”¨å˜é‡å³å¯</p><p>â€‹    }</p></li><li><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCollectonDemo1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        ArrayList&lt;String&gt; list =  <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        list.add(<span class="hljs-string">&quot;a&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;b&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;c&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;d&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;e&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;f&quot;</span>);<br><br>        <span class="hljs-comment">//1,æ•°æ®ç±»å‹ä¸€å®šæ˜¯é›†åˆæˆ–è€…æ•°ç»„ä¸­å…ƒç´ çš„ç±»å‹</span><br>        <span class="hljs-comment">//2,strä»…ä»…æ˜¯ä¸€ä¸ªå˜é‡åè€Œå·²,åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­,ä¾æ¬¡è¡¨ç¤ºé›†åˆæˆ–è€…æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </span><br>        <span class="hljs-comment">//3,listå°±æ˜¯è¦éå†çš„é›†åˆæˆ–è€…æ•°ç»„</span><br>        <span class="hljs-keyword">for</span>(String str : list)&#123;<br>            System.out.println(str);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-Listé›†åˆ"><a href="#2-Listé›†åˆ" class="headerlink" title="2.Listé›†åˆ"></a>2.Listé›†åˆ</h2><h3 id="2-1Listé›†åˆçš„æ¦‚è¿°å’Œç‰¹ç‚¹ã€è®°å¿†ã€‘"><a href="#2-1Listé›†åˆçš„æ¦‚è¿°å’Œç‰¹ç‚¹ã€è®°å¿†ã€‘" class="headerlink" title="2.1Listé›†åˆçš„æ¦‚è¿°å’Œç‰¹ç‚¹ã€è®°å¿†ã€‘"></a><font color='red'>2.1Listé›†åˆçš„æ¦‚è¿°å’Œç‰¹ç‚¹ã€è®°å¿†ã€‘</font></h3><ul><li><font color='red'>Listé›†åˆçš„æ¦‚è¿°</font><ul><li><font color='red'>æœ‰åºé›†åˆ,è¿™é‡Œçš„æœ‰åºæŒ‡çš„æ˜¯å­˜å–é¡ºåº</font></li><li><font color='red'>ç”¨æˆ·å¯ä»¥ç²¾ç¡®æ§åˆ¶åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„æ’å…¥ä½ç½®,ç”¨æˆ·å¯ä»¥é€šè¿‡æ•´æ•°ç´¢å¼•</font><font color='red'>è®¿é—®å…ƒç´ ,å¹¶æœç´¢åˆ—è¡¨ä¸­çš„å…ƒç´ </font></li><li><font color='red'>ä¸Seté›†åˆä¸åŒ,åˆ—è¡¨é€šå¸¸å…è®¸é‡å¤çš„å…ƒç´ </font></li></ul></li><li>Listé›†åˆçš„ç‰¹ç‚¹<ul><li><font color='red'>å­˜å–æœ‰åº</font></li><li><font color='red'>å¯ä»¥é‡å¤</font></li><li><font color='red'>æœ‰ç´¢å¼•</font></li></ul></li></ul><h3 id="2-2Listé›†åˆçš„ç‰¹æœ‰æ–¹æ³•ã€åº”ç”¨ã€‘"><a href="#2-2Listé›†åˆçš„ç‰¹æœ‰æ–¹æ³•ã€åº”ç”¨ã€‘" class="headerlink" title="2.2Listé›†åˆçš„ç‰¹æœ‰æ–¹æ³•ã€åº”ç”¨ã€‘"></a>2.2Listé›†åˆçš„ç‰¹æœ‰æ–¹æ³•ã€åº”ç”¨ã€‘</h3><table><thead><tr><th>æ–¹æ³•å</th><th>æè¿°</th></tr></thead><tbody><tr><td>void add(int index,E   element)</td><td>åœ¨æ­¤é›†åˆä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td>E remove(int   index)</td><td>åˆ é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«åˆ é™¤çš„å…ƒç´ </td></tr><tr><td>E set(int index,E   element)</td><td>ä¿®æ”¹æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«ä¿®æ”¹çš„å…ƒç´ </td></tr><tr><td>E get(int   index)</td><td>è¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ </td></tr></tbody></table><h2 id="3-æ•°æ®ç»“æ„"><a href="#3-æ•°æ®ç»“æ„" class="headerlink" title="3.æ•°æ®ç»“æ„"></a>3.æ•°æ®ç»“æ„</h2><h3 id="3-1æ•°æ®ç»“æ„ä¹‹æ ˆå’Œé˜Ÿåˆ—ã€è®°å¿†ã€‘"><a href="#3-1æ•°æ®ç»“æ„ä¹‹æ ˆå’Œé˜Ÿåˆ—ã€è®°å¿†ã€‘" class="headerlink" title="3.1æ•°æ®ç»“æ„ä¹‹æ ˆå’Œé˜Ÿåˆ—ã€è®°å¿†ã€‘"></a>3.1æ•°æ®ç»“æ„ä¹‹æ ˆå’Œé˜Ÿåˆ—ã€è®°å¿†ã€‘</h3><ul><li><p><font color='cornflowerblue'>æ ˆç»“æ„</font></p><p>â€‹    <font color='cornflowerblue'>å…ˆè¿›åå‡º</font></p></li><li><p><font color='cornflowerblue'>é˜Ÿåˆ—ç»“æ„</font></p><p>â€‹    <font color='cornflowerblue'>å…ˆè¿›å…ˆå‡º</font></p></li></ul><h3 id="3-2æ•°æ®ç»“æ„ä¹‹æ•°ç»„å’Œé“¾è¡¨ã€è®°å¿†ã€‘"><a href="#3-2æ•°æ®ç»“æ„ä¹‹æ•°ç»„å’Œé“¾è¡¨ã€è®°å¿†ã€‘" class="headerlink" title="3.2æ•°æ®ç»“æ„ä¹‹æ•°ç»„å’Œé“¾è¡¨ã€è®°å¿†ã€‘"></a>3.2æ•°æ®ç»“æ„ä¹‹æ•°ç»„å’Œé“¾è¡¨ã€è®°å¿†ã€‘</h3><ul><li><p>æ•°ç»„ç»“æ„</p><p>â€‹    æŸ¥è¯¢å¿«ã€å¢åˆ æ…¢</p></li><li><p>é˜Ÿåˆ—ç»“æ„</p><p>â€‹    æŸ¥è¯¢æ…¢ã€å¢åˆ å¿«</p></li></ul><h2 id="4-Listé›†åˆçš„å®ç°ç±»"><a href="#4-Listé›†åˆçš„å®ç°ç±»" class="headerlink" title="4.Listé›†åˆçš„å®ç°ç±»"></a>4.Listé›†åˆçš„å®ç°ç±»</h2><h3 id="4-1Listé›†åˆå­ç±»çš„ç‰¹ç‚¹ã€è®°å¿†ã€‘"><a href="#4-1Listé›†åˆå­ç±»çš„ç‰¹ç‚¹ã€è®°å¿†ã€‘" class="headerlink" title="4.1Listé›†åˆå­ç±»çš„ç‰¹ç‚¹ã€è®°å¿†ã€‘"></a>4.1Listé›†åˆå­ç±»çš„ç‰¹ç‚¹ã€è®°å¿†ã€‘</h3><ul><li><p>ArrayListé›†åˆ</p><p>â€‹    åº•å±‚æ˜¯æ•°ç»„ç»“æ„å®ç°ï¼ŒæŸ¥è¯¢å¿«ã€å¢åˆ æ…¢</p></li><li><p>LinkedListé›†åˆ</p><p>â€‹    åº•å±‚æ˜¯é“¾è¡¨ç»“æ„å®ç°ï¼ŒæŸ¥è¯¢æ…¢ã€å¢åˆ å¿«</p></li></ul><h3 id="4-2LinkedListé›†åˆçš„ç‰¹æœ‰åŠŸèƒ½ã€åº”ç”¨ã€‘"><a href="#4-2LinkedListé›†åˆçš„ç‰¹æœ‰åŠŸèƒ½ã€åº”ç”¨ã€‘" class="headerlink" title="4.2LinkedListé›†åˆçš„ç‰¹æœ‰åŠŸèƒ½ã€åº”ç”¨ã€‘"></a>4.2LinkedListé›†åˆçš„ç‰¹æœ‰åŠŸèƒ½ã€åº”ç”¨ã€‘</h3><ul><li><p>ç‰¹æœ‰æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public void addFirst(E e)</td><td>åœ¨è¯¥åˆ—è¡¨å¼€å¤´æ’å…¥æŒ‡å®šçš„å…ƒç´ </td></tr><tr><td>public void addLast(E e)</td><td>å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾</td></tr><tr><td>public E getFirst()</td><td>è¿”å›æ­¤åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>public   E getLast()</td><td>è¿”å›æ­¤åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td>public E removeFirst()</td><td>ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td>public   E removeLast()</td><td>ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </td></tr></tbody></table></li></ul><h2 id="5-æ³›å‹"><a href="#5-æ³›å‹" class="headerlink" title="5.æ³›å‹"></a>5.æ³›å‹</h2><h3 id="5-1æ³›å‹æ¦‚è¿°ã€ç†è§£ã€‘"><a href="#5-1æ³›å‹æ¦‚è¿°ã€ç†è§£ã€‘" class="headerlink" title="5.1æ³›å‹æ¦‚è¿°ã€ç†è§£ã€‘"></a>5.1æ³›å‹æ¦‚è¿°ã€ç†è§£ã€‘</h3><ul><li><p>æ³›å‹çš„ä»‹ç»</p><p>â€‹    æ³›å‹æ˜¯JDK5ä¸­å¼•å…¥çš„ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨æ£€æµ‹æœºåˆ¶</p></li><li><p>æ³›å‹çš„å¥½å¤„</p><ol><li>æŠŠè¿è¡Œæ—¶æœŸçš„é—®é¢˜æå‰åˆ°äº†ç¼–è¯‘æœŸé—´</li><li>é¿å…äº†<font color='red'>å¼ºåˆ¶ç±»å‹è½¬æ¢</font></li></ol></li><li><p>æ³›å‹çš„å®šä¹‰æ ¼å¼</p><ul><li>&lt;ç±»å‹&gt;: æŒ‡å®šä¸€ç§ç±»å‹çš„æ ¼å¼.å°–æ‹¬å·é‡Œé¢å¯ä»¥ä»»æ„ä¹¦å†™,ä¸€èˆ¬åªå†™ä¸€ä¸ªå­—æ¯.ä¾‹å¦‚: <E> <T></li><li>&lt;ç±»å‹1,ç±»å‹2â€¦&gt;: æŒ‡å®šå¤šç§ç±»å‹çš„æ ¼å¼,å¤šç§ç±»å‹ä¹‹é—´ç”¨é€—å·éš”å¼€.ä¾‹å¦‚: &lt;E,T&gt; &lt;K,V&gt;</li></ul></li></ul><h3 id="5-2æ³›å‹ç±»ã€åº”ç”¨ã€‘"><a href="#5-2æ³›å‹ç±»ã€åº”ç”¨ã€‘" class="headerlink" title="5.2æ³›å‹ç±»ã€åº”ç”¨ã€‘"></a>5.2æ³›å‹ç±»ã€åº”ç”¨ã€‘</h3><ul><li><p>å®šä¹‰æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">ä¿®é¥°ç¬¦ class ç±»å&lt;ç±»å‹&gt; &#123;  &#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¤ºä¾‹ä»£ç </p><ul><li><p>æ³›å‹ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generic</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">private</span> T t;<br><br>    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">getT</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> t;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setT</span><span class="hljs-params">(T t)</span> &#123;<br>        <span class="hljs-built_in">this</span>.t = t;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDemo1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        Generic&lt;String&gt; g1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Generic</span>&lt;String&gt;();<br>        g1.setT(<span class="hljs-string">&quot;æ¨å¹‚&quot;</span>);<br>        System.out.println(g1.getT());<br><br>        Generic&lt;Integer&gt; g2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Generic</span>&lt;Integer&gt;();<br>        g2.setT(<span class="hljs-number">30</span>);<br>        System.out.println(g2.getT());<br><br>        Generic&lt;Boolean&gt; g3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Generic</span>&lt;Boolean&gt;();<br>        g3.setT(<span class="hljs-literal">true</span>);<br>        System.out.println(g3.getT());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="5-3æ³›å‹æ–¹æ³•ã€åº”ç”¨ã€‘"><a href="#5-3æ³›å‹æ–¹æ³•ã€åº”ç”¨ã€‘" class="headerlink" title="5.3æ³›å‹æ–¹æ³•ã€åº”ç”¨ã€‘"></a>5.3æ³›å‹æ–¹æ³•ã€åº”ç”¨ã€‘</h3><ul><li><p>å®šä¹‰æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">ä¿®é¥°ç¬¦ &lt;ç±»å‹&gt; è¿”å›å€¼ç±»å‹ æ–¹æ³•å(ç±»å‹ å˜é‡å) &#123;  &#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¤ºä¾‹ä»£ç </p><ul><li><p>å¸¦æœ‰æ³›å‹æ–¹æ³•çš„ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generic</span> &#123;<br>    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(T t)</span> &#123;<br>        System.out.println(t);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDemo2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">Generic</span> <span class="hljs-variable">g</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Generic</span>();<br>        g.show(<span class="hljs-string">&quot;æŸ³å²©&quot;</span>);<br>        g.show(<span class="hljs-number">30</span>);<br>        g.show(<span class="hljs-literal">true</span>);<br>        g.show(<span class="hljs-number">12.34</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="5-4æ³›å‹æ¥å£ã€åº”ç”¨ã€‘"><a href="#5-4æ³›å‹æ¥å£ã€åº”ç”¨ã€‘" class="headerlink" title="5.4æ³›å‹æ¥å£ã€åº”ç”¨ã€‘"></a>5.4æ³›å‹æ¥å£ã€åº”ç”¨ã€‘</h3><ul><li><p>å®šä¹‰æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">ä¿®é¥°ç¬¦ interface æ¥å£å&lt;ç±»å‹&gt; &#123;  &#125;<br></code></pre></td></tr></table></figure></li><li><p>ç¤ºä¾‹ä»£ç </p><ul><li><p>æ³›å‹æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Generic</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(T t)</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ³›å‹æ¥å£å®ç°ç±»1</p><p>â€‹    å®šä¹‰å®ç°ç±»æ—¶,å®šä¹‰å’Œæ¥å£ç›¸åŒæ³›å‹,åˆ›å»ºå®ç°ç±»å¯¹è±¡æ—¶æ˜ç¡®æ³›å‹çš„å…·ä½“ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericImpl1</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Generic</span>&lt;T&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(T t)</span> &#123;<br>        System.out.println(t);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ³›å‹æ¥å£å®ç°ç±»2</p><p>â€‹    å®šä¹‰å®ç°ç±»æ—¶,ç›´æ¥æ˜ç¡®æ³›å‹çš„å…·ä½“ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericImpl2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Generic</span>&lt;Integer&gt;&#123;<br>     <span class="hljs-meta">@Override</span><br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(Integer t)</span> &#123;<br>          System.out.println(t);<br>     &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDemo3</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        GenericImpl1&lt;String&gt; g1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericImpl</span>&lt;String&gt;();<br>        g1.show(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        GenericImpl1&lt;Integer&gt; g2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericImpl</span>&lt;Integer&gt;();<br>        g2.show(<span class="hljs-number">30</span>);<br>      <br>        <span class="hljs-type">GenericImpl2</span> <span class="hljs-variable">g3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericImpl2</span>();<br>      g3.show(<span class="hljs-number">10</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul></li></ul><h3 id="5-5ç±»å‹é€šé…ç¬¦"><a href="#5-5ç±»å‹é€šé…ç¬¦" class="headerlink" title="5.5ç±»å‹é€šé…ç¬¦"></a>5.5ç±»å‹é€šé…ç¬¦</h3><ul><li><p>ç±»å‹é€šé…ç¬¦: &lt;?&gt;</p><ul><li>ArrayList&lt;?&gt;: è¡¨ç¤ºå…ƒç´ ç±»å‹æœªçŸ¥çš„ArrayList,å®ƒçš„å…ƒç´ å¯ä»¥åŒ¹é…ä»»ä½•çš„ç±»å‹</li><li>ä½†æ˜¯å¹¶ä¸èƒ½æŠŠå…ƒç´ æ·»åŠ åˆ°ArrayListä¸­äº†,è·å–å‡ºæ¥çš„ä¹Ÿæ˜¯çˆ¶ç±»ç±»å‹</li></ul></li><li><p>ç±»å‹é€šé…ç¬¦ä¸Šé™: &lt;? extends ç±»å‹&gt;</p><ul><li>ArrayListList &lt;? extends Number&gt;: å®ƒè¡¨ç¤ºçš„ç±»å‹æ˜¯Numberæˆ–è€…å…¶å­ç±»å‹</li></ul></li><li><p>ç±»å‹é€šé…ç¬¦ä¸‹é™: &lt;? super ç±»å‹&gt;</p><ul><li>ArrayListList &lt;? super Number&gt;: å®ƒè¡¨ç¤ºçš„ç±»å‹æ˜¯Numberæˆ–è€…å…¶çˆ¶ç±»å‹</li></ul></li><li><p>æ³›å‹é€šé…ç¬¦çš„ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDemo4</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        ArrayList&lt;Integer&gt; list1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        ArrayList&lt;String&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        ArrayList&lt;Number&gt; list3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        ArrayList&lt;Object&gt; list4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>        method(list1);<br>        method(list2);<br>        method(list3);<br>        method(list4);<br><br>        getElement1(list1);<br>        getElement1(list2);<span class="hljs-comment">//æŠ¥é”™</span><br>        getElement1(list3);<br>        getElement1(list4);<span class="hljs-comment">//æŠ¥é”™</span><br><br>        getElement2(list1);<span class="hljs-comment">//æŠ¥é”™</span><br>        getElement2(list2);<span class="hljs-comment">//æŠ¥é”™</span><br>        getElement2(list3);<br>        getElement2(list4);<br>    &#125;<br>  <br>    <span class="hljs-comment">// æ³›å‹é€šé…ç¬¦: æ­¤æ—¶çš„æ³›å‹?,å¯ä»¥æ˜¯ä»»æ„ç±»å‹</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">(ArrayList&lt;?&gt; list)</span>&#123;&#125;<br>    <span class="hljs-comment">// æ³›å‹çš„ä¸Šé™: æ­¤æ—¶çš„æ³›å‹?,å¿…é¡»æ˜¯Numberç±»å‹æˆ–è€…Numberç±»å‹çš„å­ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getElement1</span><span class="hljs-params">(ArrayList&lt;? extends Number&gt; list)</span>&#123;&#125;<br>    <span class="hljs-comment">// æ³›å‹çš„ä¸‹é™: æ­¤æ—¶çš„æ³›å‹?,å¿…é¡»æ˜¯Numberç±»å‹æˆ–è€…Numberç±»å‹çš„çˆ¶ç±»</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getElement2</span><span class="hljs-params">(ArrayList&lt;? <span class="hljs-built_in">super</span> Number&gt; list)</span>&#123;&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ŠJavaåŸºç¡€é¢è¯•é¢˜ã€‹</title>
    <link href="/Hexo/2021/03/21/%E3%80%8AJava%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%8B/"/>
    <url>/Hexo/2021/03/21/%E3%80%8AJava%E5%9F%BA%E7%A1%80%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="Javaæ ¸å¿ƒæŠ€æœ¯éƒ¨åˆ†"><a href="#Javaæ ¸å¿ƒæŠ€æœ¯éƒ¨åˆ†" class="headerlink" title="Javaæ ¸å¿ƒæŠ€æœ¯éƒ¨åˆ†"></a>Javaæ ¸å¿ƒæŠ€æœ¯éƒ¨åˆ†</h2><h3 id="1ã€é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›ï¼Ÿ"><a href="#1ã€é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="1ã€é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›ï¼Ÿ"></a>1ã€é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›ï¼Ÿ</h3><p>é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹å¾ï¼š</p><p><strong>ç»§æ‰¿ï¼š</strong>é€šè¿‡ç»§æ‰¿å…è®¸å¤ç”¨å·²æœ‰çš„ç±»ï¼Œç»§æ‰¿å…³ç³»æ˜¯ä¸€ç§â€œä¸€èˆ¬åˆ°ç‰¹æ®Šâ€çš„å…³ç³»ï¼Œæ¯”å¦‚è‹¹æœç±»ç»§æ‰¿æ°´æœç±»ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºç±»ç»§æ‰¿ã€‚</p><p>æ´¾ç”Ÿå‡ºæ¥çš„æ–°ç±»ç§°ä¸ºåŸæœ‰ç±»çš„å­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰ï¼Œè€ŒåŸæœ‰ç±»ç§°ä¸ºæ–°ç±»çš„çˆ¶ç±»ï¼ˆåŸºç±»ï¼‰ã€‚</p><p>å­ç±»å¯ä»¥ä»çˆ¶ç±»é‚£é‡Œç»§æ‰¿å¾—åˆ°æ–¹æ³•å’Œæˆå‘˜å˜é‡ï¼Œè€Œä¸”å­ç±»ç±»å¯ä»¥ä¿®æ”¹æˆ–å¢åŠ æ–°çš„æ–¹æ³•ä½¿ä¹‹é€‚åˆå­ç±»çš„éœ€è¦ã€‚</p><p><strong>å°è£…ï¼š</strong>å°è£…æ˜¯æŠŠå¯¹è±¡çš„çŠ¶æ€æ•°æ®éšè—èµ·æ¥ï¼Œå†é€šè¿‡æš´éœ²åˆé€‚çš„æ–¹æ³•æ¥å…è®¸å¤–éƒ¨ç¨‹åºä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€æ•°æ®ã€‚Javaçš„å°è£…ä¸»è¦é€šè¿‡privateã€protectedã€publicç­‰è®¿é—®æ§åˆ¶ç¬¦æ¥å®ç°ã€‚</p><p><strong>å¤šæ€æ€§ï¼š</strong>å¤šæ€æŒ‡çš„æ˜¯å½“åŒä¸€ä¸ªç±»å‹çš„å¼•ç”¨ç±»å‹çš„å˜é‡åœ¨æ‰§è¡Œç›¸åŒçš„æ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šä¼šå‘ˆç°å‡ºå¤šç§ä¸åŒçš„è¡Œä¸ºç‰¹å¾ã€‚æ¯”å¦‚ç¨‹åºæœ‰Animal a1 &#x3D; new Animal (); Animal a2 &#x3D; new Wolf();è™½ç„¶a1ã€a2ä¸¤ä¸ªå¼•ç”¨å˜é‡çš„ç±»å‹éƒ½æ˜¯Animalï¼Œä½†å½“å®ƒä»¬è°ƒç”¨åŒä¸€ä¸ªrun()æ–¹æ³•æ—¶ï¼Œå¦‚æœWolf()ç±»é‡å†™è¿‡Animalçš„run()æ–¹æ³•ï¼Œè¿™å°±ä¼šå¯¼è‡´a1ã€a2ä¸¤ä¸ªå˜é‡æ‰§è¡Œrun()æ–¹æ³•æ—¶å‘ˆç°å‡ºä¸åŒçš„è¡Œä¸ºç‰¹å¾ï¼Œè¿™å°±æ˜¯å¤šæ€ã€‚å¤šæ€å¢åŠ äº†ç¼–ç¨‹çš„çµæ´»æ€§ï¼Œå®é™…ä¸Šå¤§é‡è®¾è®¡æ¨¡å¼éƒ½æ˜¯åŸºäºå¤šæ€ç±»å®ç°çš„ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<strong>æŠ½è±¡</strong>ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„ç‰¹å¾ï¼ŒæŠ½è±¡å°±æ˜¯å¿½ç•¥ä¸å½“å‰ç›®æ ‡æ— å…³çš„ç›¸å…³æ–¹é¢ï¼Œä»¥ä¾¿æ›´å……åˆ†åœ°çªå‡ºä¸å½“å‰ç›®æ ‡æœ‰å…³çš„æ–¹é¢ã€‚æŠ½è±¡å¹¶ä¸æ‰“ç®—äº†è§£å…¨éƒ¨é—®é¢˜ï¼Œè€Œåªæ˜¯é€‰æ‹©å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæš‚æ—¶ä¸ç”¨éƒ¨åˆ†ç»†èŠ‚ã€‚æŠ½è±¡åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€æ˜¯è¿‡ç¨‹æŠ½è±¡ï¼ŒäºŒæ˜¯æ•°æ®æŠ½è±¡ã€‚</p><h3 id="2ã€Javaä¸­å®ç°å¤šæ€çš„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2ã€Javaä¸­å®ç°å¤šæ€çš„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2ã€Javaä¸­å®ç°å¤šæ€çš„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2ã€Javaä¸­å®ç°å¤šæ€çš„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Javaå…è®¸çˆ¶ç±»æˆ–æ¥å£å®šä¹‰çš„å¼•ç”¨å˜é‡æŒ‡å‘å­ç±»æˆ–å…·ä½“å®ç°ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè€Œç¨‹åºè°ƒç”¨çš„æ–¹æ³•åœ¨è¿è¡Œæ—¶æ‰åŠ¨æ€ç»‘å®šï¼Œå°±æ˜¯å¼•ç”¨å˜é‡æ‰€æŒ‡å‘çš„å…·ä½“å®ä¾‹å¯¹è±¡çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å†…å­˜é‡Œæ­£åœ¨è¿è¡Œçš„é‚£ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯å¼•ç”¨å˜é‡çš„ç±»å‹ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</p><p>æ­£æ˜¯ç”±äºè¿™ç§æœºåˆ¶ï¼Œä¸¤ä¸ªç›¸åŒç±»å‹çš„å˜é‡ï¼Œä½†ç”±äºå®ƒä»¬å®é™…å¼•ç”¨äº†ä¸åŒçš„</p><h3 id="3ã€ä¸€ä¸ªâ€-javaâ€æºæ–‡ä»¶ä¸­æ˜¯å¦å¯ä»¥åŒ…æ‹¬å¤šä¸ªç±»ï¼ˆä¸æ˜¯å†…éƒ¨ç±»ï¼‰ï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ"><a href="#3ã€ä¸€ä¸ªâ€-javaâ€æºæ–‡ä»¶ä¸­æ˜¯å¦å¯ä»¥åŒ…æ‹¬å¤šä¸ªç±»ï¼ˆä¸æ˜¯å†…éƒ¨ç±»ï¼‰ï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ" class="headerlink" title="3ã€ä¸€ä¸ªâ€.javaâ€æºæ–‡ä»¶ä¸­æ˜¯å¦å¯ä»¥åŒ…æ‹¬å¤šä¸ªç±»ï¼ˆä¸æ˜¯å†…éƒ¨ç±»ï¼‰ï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ"></a>3ã€ä¸€ä¸ªâ€.javaâ€æºæ–‡ä»¶ä¸­æ˜¯å¦å¯ä»¥åŒ…æ‹¬å¤šä¸ªç±»ï¼ˆä¸æ˜¯å†…éƒ¨ç±»ï¼‰ï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ</h3><p>å¯ä»¥æœ‰å¤šä¸ªç±»ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªpublicçš„ç±»ï¼Œå¹¶ä¸”publicçš„ç±»åå¿…é¡»ä¸æ–‡ä»¶çš„ä¸»æ–‡ä»¶åç›¸åŒã€‚</p><p>åŒ…å«å¤šä¸ªç±»çš„Javaæºæ–‡ä»¶ç¼–è¯‘ä¹‹åä¼šç”Ÿæˆå¤šä¸ª.classæ–‡ä»¶ã€‚</p><h3 id="4ã€Stringæ˜¯åŸºæœ¬æ•°æ®ç±»å‹å—"><a href="#4ã€Stringæ˜¯åŸºæœ¬æ•°æ®ç±»å‹å—" class="headerlink" title="4ã€Stringæ˜¯åŸºæœ¬æ•°æ®ç±»å‹å—?"></a>4ã€Stringæ˜¯åŸºæœ¬æ•°æ®ç±»å‹å—?</h3><p>åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬byteã€shortã€intã€longã€charã€floatã€doubleå’Œbooleanã€‚Stringä¸æ˜¯åŸºæœ¬ç±»å‹ã€‚Stringæ˜¯å¼•ç”¨ç±»å‹ã€‚</p><p>è€Œä¸”java.lang.Stringç±»æ˜¯finalç±»å‹çš„ï¼Œå› æ­¤ä¸å¯ä»¥ç»§æ‰¿è¿™ä¸ªç±»ã€‚</p><p>å¹¶ä¸”å®ƒæ˜¯ä¸€ä¸ªä¸å¯å˜ç±»ï¼Œå› æ­¤å¦‚æœç¨‹åºéœ€è¦ä½¿ç”¨çš„å­—ç¬¦ä¸²æ‰€åŒ…å«çš„å­—ç¬¦åºåˆ—éœ€è¦ç»å¸¸æ”¹å˜ï¼Œå»ºè®®ä½¿ç”¨StringBufferï¼ˆçº¿ç¨‹å®‰å…¨ã€æ€§èƒ½ç•¥å·®ï¼‰ç±»æˆ–StringBuilderç±»ã€‚</p><h3 id="5ã€int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#5ã€int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="5ã€int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«"></a>5ã€int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«</h3><p>Java æä¾›ä¸¤ç§ä¸åŒçš„ç±»å‹ï¼šå¼•ç”¨ç±»å‹å’ŒåŸºæœ¬æ•°æ®ç±»å‹ã€‚</p><p>intæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒIntegeræ˜¯javaä¸ºintæä¾›çš„åŒ…è£…ç±»ã€‚</p><p>Javaä¸ºæ¯ä¸ªåŸå§‹ç±»å‹æä¾›äº†åŒ…è£…ç±»ã€‚</p><p>byte   Byte </p><p>short   Short </p><p>int    Integer </p><p>long   Long </p><p>char   Character </p><p>float   Float </p><p>double  Double </p><p>boolean  Boolean </p><p>åŸºæœ¬ç±»å‹çš„å˜é‡åªèƒ½å½“æˆç®€å•çš„ç›´æ¥é‡ã€å‚ä¸è¡¨è¾¾å¼è¿ç®—ï¼Œä¸å…·å¤‡é¢å‘å¯¹å¯¹è±¡çš„ç‰¹å¾ï¼ŒåŸºæœ¬ç±»å‹çš„å˜é‡ä¸èƒ½è¢«èµ‹ä¸ºnullï¼›ä½†åŒ…è£…ç±»çš„å˜é‡åˆ™å®Œå…¨å¯ä»¥å½“æˆå¯¹è±¡ä½¿ç”¨ï¼Œå®ƒå…·æœ‰é¢å‘å¯¹è±¡çš„ç‰¹å¾ï¼ŒåŒ…è£…ç±»çš„å˜é‡å¯ä»¥è¢«èµ‹ä¸ºnullã€‚</p><p>å› ä¸ºIntegerå…·æœ‰é¢å‘å¯¹è±¡çš„ç‰¹å¾ï¼Œå› æ­¤Integerå¯ä»¥åŒºåˆ†å‡ºæœªèµ‹å€¼å’Œå€¼ä¸º0çš„åŒºåˆ«ï¼Œintåˆ™æ— æ³•è¡¨è¾¾å‡ºæœªèµ‹å€¼çš„æƒ…å†µï¼Œä¾‹å¦‚ï¼Œè¦æƒ³è¡¨è¾¾å‡ºæ²¡æœ‰å‚åŠ è€ƒè¯•å’Œè€ƒè¯•æˆç»©ä¸º0çš„åŒºåˆ«ï¼Œåˆ™åªèƒ½ä½¿ç”¨Integerã€‚åœ¨JSPå¼€å‘ä¸­ï¼ŒIntegerçš„é»˜è®¤ä¸ºnullï¼Œæ‰€ä»¥ç”¨ELè¾“å‡ºä¸ºnullçš„Integeræ—¶ï¼Œå°†ä¼šæ˜¾ç¤ºä¸ºç©ºç™½å­—ç¬¦ä¸²ï¼Œè€Œinté»˜è®¤çš„é»˜è®¤å€¼ä¸º0ï¼Œç”¨ELè¾“å‡ºä¸ºå°†æ˜¾ç¤º0ã€‚æ‰€ä»¥ï¼Œintä¸é€‚åˆä½œä¸ºWebå±‚çš„è¡¨å•æ•°æ®çš„ç±»å‹ã€‚</p><p>ä»Java 5å¼€å§‹ï¼ŒJavaæä¾›äº†è‡ªåŠ¨è£…ç®±ã€è‡ªåŠ¨æ‹†ç®±åŠŸèƒ½ï¼Œå› æ­¤åŒ…è£…ç±»ä¹Ÿå¯ä»¥ç›´æ¥å‚ä¸è¡¨è¾¾å¼è¿ç®—ï¼Œå› æ­¤ä½¿ç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ã€‚</p><p>å¦å¤–ï¼ŒIntegeræä¾›äº†å¤šä¸ªä¸æ•´æ•°ç›¸å…³çš„æ“ä½œæ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°ï¼ŒIntegerä¸­è¿˜å®šä¹‰äº†è¡¨ç¤ºæ•´æ•°çš„æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å¸¸é‡ã€‚</p><h3 id="6ã€Javaæœ‰æ²¡æœ‰goto"><a href="#6ã€Javaæœ‰æ²¡æœ‰goto" class="headerlink" title="6ã€Javaæœ‰æ²¡æœ‰goto?"></a>6ã€Javaæœ‰æ²¡æœ‰goto?</h3><p>gotoæ˜¯Javaä¸­çš„ä¿ç•™å­—ï¼Œæš‚æ—¶è¿˜ä¸æ˜¯Javaçš„å…³é”®å­—ã€‚</p><h3 id="7ã€String-å’ŒStringBufferã€StringBuilderçš„åŒºåˆ«"><a href="#7ã€String-å’ŒStringBufferã€StringBuilderçš„åŒºåˆ«" class="headerlink" title="7ã€String å’ŒStringBufferã€StringBuilderçš„åŒºåˆ«"></a>7ã€String å’ŒStringBufferã€StringBuilderçš„åŒºåˆ«</h3><p>Javaæä¾›äº†ï¼šStringã€StringBufferå’ŒStringBuilderï¼Œå®ƒä»¬éƒ½æ˜¯CharSequenceçš„å®ç°ç±»ï¼Œéƒ½å¯ä»¥ä½œä¸ºå­—ç¬¦ä¸²ä½¿ç”¨ã€‚</p><p>Stringä»£è¡¨äº†å­—ç¬¦åºåˆ—ä¸å¯å˜çš„å­—ç¬¦ä¸²ï¼›è€ŒStringBufferã€StringBuilderéƒ½ä»£è¡¨äº†å­—ç¬¦åºåˆ—å¯å˜çš„å­—ç¬¦ä¸²ã€‚</p><p>StringBufferã€StringBuilderçš„åŒºåˆ«æ˜¯StringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€æ€§èƒ½ç•¥ä½ï¼Œè€ŒStringBuilderæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œé€‚åˆå•çº¿ç¨‹ç¯å¢ƒä½¿ç”¨ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚</p><h3 id="8ã€Collection-å’Œ-Collectionsçš„åŒºåˆ«ã€‚"><a href="#8ã€Collection-å’Œ-Collectionsçš„åŒºåˆ«ã€‚" class="headerlink" title="8ã€Collection å’Œ Collectionsçš„åŒºåˆ«ã€‚"></a>8ã€Collection å’Œ Collectionsçš„åŒºåˆ«ã€‚</h3><p>Collectionæ˜¯é›†åˆç±»ï¼ˆListã€Setã€Queueï¼‰çš„æ ¹æ¥å£ã€‚</p><p>Collectionsæ˜¯é’ˆå¯¹é›†åˆç±»çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—é™æ€æ–¹æ³•å®ç°å¯¹å„ç§é›†åˆçš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰æ“ä½œã€‚</p><h3 id="9ã€è¯´è¯´-amp-å’Œ-amp-amp-çš„åŒºåˆ«ã€‚"><a href="#9ã€è¯´è¯´-amp-å’Œ-amp-amp-çš„åŒºåˆ«ã€‚" class="headerlink" title="9ã€è¯´è¯´&amp;å’Œ&amp;&amp;çš„åŒºåˆ«ã€‚"></a>9ã€è¯´è¯´&amp;å’Œ&amp;&amp;çš„åŒºåˆ«ã€‚</h3><p>&amp;å’Œ&amp;&amp;éƒ½å¯ä»¥ç”¨ä½œé€»è¾‘ä¸çš„è¿ç®—ç¬¦ï¼Œå½“è¿ç®—ç¬¦ä¸¤è¾¹çš„è¡¨è¾¾å¼çš„ç»“æœéƒ½ä¸ºtrueæ—¶ï¼Œæ•´ä¸ªè¿ç®—ç»“æœæ‰ä¸ºtrueï¼Œå¦åˆ™ï¼Œåªè¦æœ‰ä¸€æ–¹ä¸ºfalseï¼Œåˆ™ç»“æœä¸ºfalseã€‚</p><p>&amp;&amp;è¿˜å…·æœ‰çŸ­è·¯çš„åŠŸèƒ½ï¼Œå³å¦‚æœç¬¬ä¸€ä¸ªè¡¨è¾¾å¼ä¸ºfalseï¼Œåˆ™ä¸å†è®¡ç®—ç¬¬äºŒä¸ªè¡¨è¾¾å¼ï¼Œä¾‹å¦‚ï¼Œå¯¹äºif(a &gt;8 &amp;&amp; b &gt; 5)ï¼Œå½“aå°äºç­‰äº8æ—¶ï¼Œç”±äº&amp;&amp;ä¹‹å‰çš„è¡¨è¾¾å¼å·²ç»ä¸ºfalseäº†ï¼Œå› æ­¤&amp;&amp;ä¹‹åçš„è¡¨è¾¾å¼æ ¹æœ¬ä¸ä¼šæ‰§è¡Œï¼›</p><p>å†ä¾‹å¦‚if(str !&#x3D; null &amp;&amp; !str.equals(â€œâ€))è¡¨è¾¾å¼ï¼Œå½“strä¸ºnullæ—¶ï¼Œåé¢çš„è¡¨è¾¾å¼ä¸ä¼šæ‰§è¡Œï¼Œå› æ­¤ä¸ä¼šå‡ºç°NullPointerExceptionå¦‚æœå°†&amp;&amp;æ”¹ä¸º&amp;ï¼Œåˆ™ä¼šæŠ›å‡ºNullPointerExceptionå¼‚å¸¸ã€‚</p><p>å†ä¾‹å¦‚if(x &gt; 8 &amp; ++y)ä¸if(x &gt; 8 &amp;&amp; ++y )ï¼Œå½“aå°äºç­‰äº8æ—¶ï¼Œå‰ä¸€ä¸ªè¡¨è¾¾å¼ä¸­yçš„å€¼ä¼šå¢é•¿ï¼›åä¸€ä¸ªè¡¨è¾¾å¼ä¸­yçš„å€¼ä¸ä¼šå¢åŠ ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œ&amp;è¿˜å¯ä»¥ç”¨ä½œä½è¿ç®—ç¬¦ï¼Œå½“&amp;æ“ä½œç¬¦ä¸¤è¾¹çš„è¡¨è¾¾å¼ä¸æ˜¯booleanç±»å‹æ—¶ï¼Œ&amp;è¡¨ç¤ºæŒ‰ä½ä¸æ“ä½œï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨0x0fæ¥ä¸ä¸€ä¸ªæ•´æ•°è¿›è¡Œ&amp;è¿ç®—ï¼Œæ¥è·å–è¯¥æ•´æ•°çš„æœ€ä½4ä¸ªbitä½ï¼Œä¾‹å¦‚ï¼Œ0x31 &amp; 0x0fçš„ç»“æœä¸º0x01ã€‚ </p><h3 id="10ã€Overloadå’ŒOverrideçš„åŒºåˆ«ã€‚Overloadedçš„æ–¹æ³•æ˜¯å¦å¯ä»¥æ”¹å˜è¿”å›å€¼çš„ç±»å‹"><a href="#10ã€Overloadå’ŒOverrideçš„åŒºåˆ«ã€‚Overloadedçš„æ–¹æ³•æ˜¯å¦å¯ä»¥æ”¹å˜è¿”å›å€¼çš„ç±»å‹" class="headerlink" title="10ã€Overloadå’ŒOverrideçš„åŒºåˆ«ã€‚Overloadedçš„æ–¹æ³•æ˜¯å¦å¯ä»¥æ”¹å˜è¿”å›å€¼çš„ç±»å‹?"></a>10ã€Overloadå’ŒOverrideçš„åŒºåˆ«ã€‚Overloadedçš„æ–¹æ³•æ˜¯å¦å¯ä»¥æ”¹å˜è¿”å›å€¼çš„ç±»å‹?</h3><p>Overloadæ˜¯æ–¹æ³•çš„é‡è½½</p><p>Overrideæ˜¯æ–¹æ³•çš„é‡å†™ï¼Œä¹Ÿå«è¦†ç›–ã€‚</p><p>Overloadè¦æ±‚ä¸¤ä¸ªæ–¹æ³•å…·æœ‰æ–¹æ³•åç›¸åŒã€å½¢å‚åˆ—è¡¨ä¸åŒçš„è¦æ±‚ï¼Œè¿”å›å€¼ç±»å‹ä¸èƒ½ä½œä¸ºé‡è½½çš„æ¡ä»¶ã€‚</p><p>Overrideè¦æ±‚å­ç±»æ–¹æ³•ä¸çˆ¶ç±»æ–¹æ³•å…·æœ‰â€œä¸¤åŒä¸¤å°ä¸€å¤§â€çš„è¦æ±‚ã€‚<strong>ä¸¤åŒ</strong>æŒ‡ï¼šå³çˆ¶ç±»æ–¹æ³•ã€å­ç±»æ–¹æ³•çš„æ–¹æ³•åç›¸åŒã€å½¢å‚åˆ—è¡¨ç›¸åŒï¼›<strong>ä¸¤å°</strong>æŒ‡ï¼šå­ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹è¦ä¹ˆæ˜¯çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹çš„å­ç±»ã€è¦ä¹ˆä¸çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹ç›¸åŒï¼›å­ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹è¦ä¹ˆæ˜¯çˆ¶ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹çš„å­ç±»ã€è¦ä¹ˆä¸çˆ¶ç±»å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ç›¸åŒï¼›<strong>ä¸€å¤§</strong>æŒ‡ï¼šå­ç±»æ–¹æ³•çš„è®¿é—®æƒé™è¦ä¹ˆä¸çˆ¶ç±»æ–¹æ³•çš„è®¿é—®æƒé™ç›¸åŒï¼Œè¦ä¹ˆæ¯”çˆ¶ç±»æ–¹æ³•çš„è®¿é—®æƒé™æ›´å¤§ã€‚</p><p>Overloadedçš„æ–¹æ³•æ˜¯å¯ä»¥æ”¹å˜è¿”å›å€¼çš„ç±»å‹ã€‚</p><h3 id="11ã€Javaå¦‚ä½•è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯ï¼Ÿ"><a href="#11ã€Javaå¦‚ä½•è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯ï¼Ÿ" class="headerlink" title="11ã€Javaå¦‚ä½•è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯ï¼Ÿ"></a>11ã€Javaå¦‚ä½•è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯ï¼Ÿ</h3><p>åœ¨Javaä¸­ï¼Œè¦æƒ³è·³å‡ºå¤šé‡å¾ªç¯ï¼Œå¯ä»¥åœ¨å¤–é¢çš„å¾ªç¯è¯­å¥å‰å®šä¹‰ä¸€ä¸ªæ ‡å·ï¼Œç„¶ååœ¨é‡Œå±‚å¾ªç¯ä½“çš„ä»£ç ä¸­ä½¿ç”¨å¸¦æœ‰æ ‡å·çš„break è¯­å¥ï¼Œå³å¯è·³å‡ºå¤–å±‚å¾ªç¯ã€‚ä¾‹å¦‚ï¼Œ</p><p>  outer:</p><p>â€‹    for(int i&#x3D;0;i&lt;10;i++)</p><p>â€‹    {</p><p>â€‹        for(int j&#x3D;0;j&lt;10;j++)</p><p>â€‹        {</p><p>â€‹            System.out.println(â€œi&#x3D;â€ + i + â€œ,j&#x3D;â€ + j);</p><p>â€‹            if(j &#x3D;&#x3D; 5) break ouer;</p><p>â€‹        }</p><p>â€‹    }</p><h3 id="12ã€switchè¯­å¥èƒ½å¦ä½œç”¨åœ¨byteä¸Šï¼Œèƒ½å¦ä½œç”¨åœ¨longä¸Šï¼Œèƒ½å¦ä½œç”¨åœ¨Stringä¸Š"><a href="#12ã€switchè¯­å¥èƒ½å¦ä½œç”¨åœ¨byteä¸Šï¼Œèƒ½å¦ä½œç”¨åœ¨longä¸Šï¼Œèƒ½å¦ä½œç”¨åœ¨Stringä¸Š" class="headerlink" title="12ã€switchè¯­å¥èƒ½å¦ä½œç”¨åœ¨byteä¸Šï¼Œèƒ½å¦ä½œç”¨åœ¨longä¸Šï¼Œèƒ½å¦ä½œç”¨åœ¨Stringä¸Š?"></a>12ã€switchè¯­å¥èƒ½å¦ä½œç”¨åœ¨byteä¸Šï¼Œèƒ½å¦ä½œç”¨åœ¨longä¸Šï¼Œèƒ½å¦ä½œç”¨åœ¨Stringä¸Š?</h3><p>åœ¨Java 7ä»¥å‰ï¼Œåœ¨switchï¼ˆexpr1ï¼‰ä¸­ï¼Œexpr1åªèƒ½æ˜¯ä¸€ä¸ªæ•´æ•°è¡¨è¾¾å¼ï¼ˆä½†ä¸åŒ…æ‹¬longå’ŒLongï¼‰æˆ–è€…<strong>æšä¸¾å¸¸é‡</strong>ï¼Œæ•´æ•°è¡¨è¾¾å¼å¯ä»¥æ˜¯intåŸºæœ¬ç±»å‹æˆ–IntegeråŒ…è£…ç±»å‹ï¼Œbyteã€shortã€charéƒ½å¯ä»¥è‡ªåŠ¨è½¬æ¢ä¸ºintï¼Œå®ƒä»¬éƒ½å¯ä½œä¸ºswitchè¡¨è¾¾å¼ã€‚</p><p>ä»Java 7å¼€å§‹ï¼Œswitchè¡¨è¾¾å¼çš„å¯ä»¥ä½¿ç”¨Stringã€‚</p><h3 id="13ã€String-s-x3D-new-String-â€œxyzâ€-åˆ›å»ºäº†å‡ ä¸ªString-Object"><a href="#13ã€String-s-x3D-new-String-â€œxyzâ€-åˆ›å»ºäº†å‡ ä¸ªString-Object" class="headerlink" title="13ã€String s &#x3D; new String(â€œxyzâ€);åˆ›å»ºäº†å‡ ä¸ªString Object?"></a>13ã€String s &#x3D; new String(â€œxyzâ€);åˆ›å»ºäº†å‡ ä¸ªString Object?</h3><p>ä¸¤ä¸ªã€‚ä¸€ä¸ªæ˜¯ç›´æ¥é‡çš„xyzå¯¹è±¡ï¼›å¦ä¸€ä¸ªæ˜¯é€šè¿‡new Sting()æ„é€ å™¨åˆ›å»ºå‡ºæ¥çš„Stringå¯¹è±¡ã€‚</p><p>é€šå¸¸æ¥è¯´ï¼Œåº”è¯¥å°½é‡ä½¿ç”¨ç›´æ¥é‡çš„Stringå¯¹è±¡ï¼Œè¿™æ ·å…·æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚</p><h3 id="14ã€æ•°ç»„æœ‰æ²¡æœ‰length-è¿™ä¸ªæ–¹æ³•-Stringæœ‰æ²¡æœ‰length-è¿™ä¸ªæ–¹æ³•ï¼Ÿ"><a href="#14ã€æ•°ç»„æœ‰æ²¡æœ‰length-è¿™ä¸ªæ–¹æ³•-Stringæœ‰æ²¡æœ‰length-è¿™ä¸ªæ–¹æ³•ï¼Ÿ" class="headerlink" title="14ã€æ•°ç»„æœ‰æ²¡æœ‰length()è¿™ä¸ªæ–¹æ³•? Stringæœ‰æ²¡æœ‰length()è¿™ä¸ªæ–¹æ³•ï¼Ÿ"></a>14ã€æ•°ç»„æœ‰æ²¡æœ‰length()è¿™ä¸ªæ–¹æ³•? Stringæœ‰æ²¡æœ‰length()è¿™ä¸ªæ–¹æ³•ï¼Ÿ</h3><p>æ•°ç»„æ²¡æœ‰length()è¿™ä¸ªæ–¹æ³•ï¼Œæœ‰lengthçš„å±æ€§ã€‚Stringæœ‰length()æ–¹æ³•ã€‚</p><h3 id="15ã€short-s1-x3D-1-s1-x3D-s1-1-æœ‰ä»€ä¹ˆé”™-short-s1-x3D-1-s1-x3D-1-æœ‰ä»€ä¹ˆé”™"><a href="#15ã€short-s1-x3D-1-s1-x3D-s1-1-æœ‰ä»€ä¹ˆé”™-short-s1-x3D-1-s1-x3D-1-æœ‰ä»€ä¹ˆé”™" class="headerlink" title="15ã€short s1 &#x3D; 1; s1 &#x3D; s1 + 1;æœ‰ä»€ä¹ˆé”™? short s1 &#x3D; 1; s1 +&#x3D; 1;æœ‰ä»€ä¹ˆé”™?"></a>15ã€short s1 &#x3D; 1; s1 &#x3D; s1 + 1;æœ‰ä»€ä¹ˆé”™? short s1 &#x3D; 1; s1 +&#x3D; 1;æœ‰ä»€ä¹ˆé”™?</h3><p>å¯¹äºshort s1 &#x3D; 1; s1 &#x3D; s1 + 1; ç”±äºs1+1è¿ç®—æ—¶ä¼šè‡ªåŠ¨æå‡è¡¨è¾¾å¼çš„ç±»å‹ï¼Œæ‰€ä»¥ç»“æœæ˜¯intå‹ï¼Œå†èµ‹å€¼ç»™shortç±»å‹s1æ—¶ï¼Œç¼–è¯‘å™¨å°†æŠ¥å‘Šéœ€è¦å¼ºåˆ¶è½¬æ¢ç±»å‹çš„é”™è¯¯ã€‚</p><p>å¯¹äºshort s1 &#x3D; 1; s1 +&#x3D; 1;ç”±äº +&#x3D;è¿ç®—ç¬¦é‡Œå·²ç»åŒ…æ‹¬äº†ä¸€ä¸ªéšå¼çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå› æ­¤Javaä¼šæŠŠs1+&#x3D;1è®¡ç®—åçš„ç»“æœè¿›è¡Œéšå¼çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå› æ­¤å®ƒä¸ä¼šæœ‰ä»»ä½•é”™è¯¯ã€‚ </p><h3 id="16ã€charå‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜å‚¨ä¸€ä¸ªä¸­æ–‡å­—ç¬¦-ä¸ºä»€ä¹ˆ"><a href="#16ã€charå‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜å‚¨ä¸€ä¸ªä¸­æ–‡å­—ç¬¦-ä¸ºä»€ä¹ˆ" class="headerlink" title="16ã€charå‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜å‚¨ä¸€ä¸ªä¸­æ–‡å­—ç¬¦?ä¸ºä»€ä¹ˆ?"></a>16ã€charå‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜å‚¨ä¸€ä¸ªä¸­æ–‡å­—ç¬¦?ä¸ºä»€ä¹ˆ?</h3><p>charå‹å˜é‡æ˜¯ç”¨æ¥å­˜å‚¨Unicodeç¼–ç çš„å­—ç¬¦çš„ï¼ŒUnicodeç¼–ç å­—ç¬¦é›†ä¸­åŒ…å«äº†æ±‰å­—ï¼Œå› æ­¤charå‹å˜é‡ä¸­å¯ä»¥å­˜å‚¨æ±‰å­—ã€‚ä¸è¿‡ï¼Œå¦‚æœæŸä¸ªç‰¹æ®Šçš„æ±‰å­—æ²¡æœ‰è¢«åŒ…å«åœ¨Unicodeç¼–ç å­—ç¬¦é›†ä¸­ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªcharå‹å˜é‡ä¸­å°±ä¸èƒ½å­˜å‚¨è¿™ä¸ªç‰¹æ®Šæ±‰å­—ã€‚</p><p>charç±»å‹çš„å˜é‡å ä¸¤ä¸ªå­—èŠ‚ï¼Œè€ŒUnicodeç¼–ç ä¸­æ¯ä¸ªå­—ç¬¦ä¹Ÿå ä¸¤ä¸ªå­—èŠ‚ï¼Œå› æ­¤charç±»å‹ç±»å‹çš„å˜é‡å¯ä»¥å­˜å‚¨ä»»ä½•ä¸€ä¸ªUnicodeå­—ç¬¦ã€‚</p><h3 id="17ã€ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•ç®—å‡º2ä¹˜ä»¥8ç­‰äºå‡ "><a href="#17ã€ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•ç®—å‡º2ä¹˜ä»¥8ç­‰äºå‡ " class="headerlink" title="17ã€ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•ç®—å‡º2ä¹˜ä»¥8ç­‰äºå‡ ?"></a>17ã€ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•ç®—å‡º2ä¹˜ä»¥8ç­‰äºå‡ ?</h3><p>2 &lt;&lt; 3</p><p>å› ä¸ºå°†ä¸€ä¸ªæ•°å·¦ç§»nä½ï¼Œå°±ç›¸å½“äºä¹˜ä»¥äº†2çš„næ¬¡æ–¹ï¼Œé‚£ä¹ˆï¼Œä¸€ä¸ªæ•°ä¹˜ä»¥8åªè¦å°†å…¶å·¦ç§»3ä½å³å¯ï¼Œè€Œä½è¿ç®—CPUç›´æ¥æ”¯æŒçš„ï¼Œæ•ˆç‡æœ€é«˜ï¼Œæ‰€ä»¥ï¼Œ2ä¹˜ä»¥8ç­‰äºå‡ çš„æœ€æ•ˆç‡çš„æ–¹æ³•æ˜¯2 &lt;&lt; 3ã€‚</p><p>ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¿™ä¸ªæ•°å­—æœ¬èº«å·²ç»å¾ˆå¤§ï¼Œæ¯”å¦‚æœ¬èº«å·²ç»æ˜¯2çš„30æ¬¡æ–¹äº†ï¼Œæ­¤æ—¶å†ç”¨è¿™ç§ä½ç§»è¿ç®—å°±å¯èƒ½å¯¼è‡´â€œæº¢å‡ºâ€ï¼Œè¿™æ ·å°±å¾—ä¸åˆ°æ­£ç¡®ç»“æœäº†ã€‚</p><h3 id="18ã€ä½¿ç”¨finalå…³é”®å­—ä¿®é¥°ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ˜¯å¼•ç”¨ä¸èƒ½å˜ï¼Œè¿˜æ˜¯å¼•ç”¨çš„å¯¹è±¡ä¸èƒ½å˜ï¼Ÿ"><a href="#18ã€ä½¿ç”¨finalå…³é”®å­—ä¿®é¥°ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ˜¯å¼•ç”¨ä¸èƒ½å˜ï¼Œè¿˜æ˜¯å¼•ç”¨çš„å¯¹è±¡ä¸èƒ½å˜ï¼Ÿ" class="headerlink" title="18ã€ä½¿ç”¨finalå…³é”®å­—ä¿®é¥°ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ˜¯å¼•ç”¨ä¸èƒ½å˜ï¼Œè¿˜æ˜¯å¼•ç”¨çš„å¯¹è±¡ä¸èƒ½å˜ï¼Ÿ"></a>18ã€ä½¿ç”¨finalå…³é”®å­—ä¿®é¥°ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ˜¯å¼•ç”¨ä¸èƒ½å˜ï¼Œè¿˜æ˜¯å¼•ç”¨çš„å¯¹è±¡ä¸èƒ½å˜ï¼Ÿ</h3><p>ä½¿ç”¨finalå…³é”®å­—ä¿®é¥°ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ˜¯æŒ‡å¼•ç”¨å˜é‡ä¸èƒ½å˜ï¼Œå¼•ç”¨å˜é‡æ‰€æŒ‡å‘çš„å¯¹è±¡ä¸­çš„å†…å®¹è¿˜æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå¦‚ä¸‹è¯­å¥ï¼š</p><p>final StringBuilder a&#x3D;new StringBuilder (â€œimmutableâ€);</p><p>æ‰§è¡Œå¦‚ä¸‹è¯­å¥å°†æŠ¥å‘Šç¼–è¯‘é”™è¯¯ï¼š</p><p>a &#x3D; new StringBuilder (â€œâ€);</p><p>ä½†å¦‚ä¸‹è¯­å¥åˆ™æ˜¯å®Œå…¨æ­£ç¡®çš„</p><p>a.append(â€œfkjava.orgâ€); </p><p>æœ‰äººå¸Œæœ›åœ¨å®šä¹‰æ–¹æ³•çš„å½¢å‚æ—¶ï¼Œé€šè¿‡finalä¿®é¥°ç¬¦æ¥é˜»æ­¢æ–¹æ³•å†…éƒ¨ä¿®æ”¹ä¼ è¿›æ¥çš„å®å‚ï¼š</p><p>public void method(final StringBuilder param)</p><p>{</p><p>} </p><p>å®é™…ä¸Šè¿™æ²¡æœ‰ç”¨ï¼Œåœ¨è¯¥æ–¹æ³•å†…éƒ¨ä»ç„¶å¯ä»¥å¢åŠ å¦‚ä¸‹ä»£ç æ¥ä¿®æ”¹å®å‚å¯¹è±¡ï¼š</p><p>param.append(â€œfkjava.orgâ€);</p><h3 id="19ã€â€-x3D-x3D-â€å’Œequalsæ–¹æ³•ç©¶ç«Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#19ã€â€-x3D-x3D-â€å’Œequalsæ–¹æ³•ç©¶ç«Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="19ã€â€&#x3D;&#x3D;â€å’Œequalsæ–¹æ³•ç©¶ç«Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>19ã€â€&#x3D;&#x3D;â€å’Œequalsæ–¹æ³•ç©¶ç«Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>&#x3D;&#x3D;æ“ä½œç¬¦çš„åŠŸèƒ½æœ‰ä¸¤ä¸ªï¼š</p><p>Aï¼å¦‚æœ&#x3D;&#x3D;çš„ä¸¤è¾¹éƒ½æ˜¯åŸºæœ¬ç±»å‹å˜é‡ã€åŒ…è£…ç±»å¯¹è±¡æ‰€ç»„æˆçš„è¡¨è¾¾å¼ï¼Œ&#x3D;&#x3D;ç”¨äºæ¯”è¾ƒä¸¤è¾¹çš„è¡¨è¾¾å¼çš„å€¼æ˜¯å¦ç›¸ç­‰â€”â€”åªè¦ä¸¤è¾¹çš„è¡¨è¾¾å¼çš„å€¼ç›¸ç­‰ï¼Œå³ä½¿æ•°æ®ç±»ä¸åŒï¼Œè¯¥è¿ç®—ç¬¦ä¹Ÿä¼šè¿”å›trueã€‚</p><p>Bï¼å¦‚æœ&#x3D;&#x3D;çš„ä¸¤è¾¹æ˜¯å¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œ&#x3D;&#x3D;ç”¨äºåˆ¤æ–­è¿™ä¸¤ä¸ªå¼•ç”¨ç±»å‹çš„å˜é‡æ˜¯å¦å¼•ç”¨åŒä¸€å—å†…å­˜ï¼Œåªæœ‰å½“å®ƒä»¬å¼•ç”¨åŒä¸€å—å†…å­˜æ—¶ï¼Œ&#x3D;&#x3D;æ‰ä¼šè¿”å›trueã€‚</p><p>è€Œequals()åˆ™æ˜¯ä¸€ä¸ªjava.lang.Objectç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå› æ­¤ä»»ä½•Javaå¯¹è±¡éƒ½å¯è°ƒç”¨è¯¥æ–¹æ³•ä¸å…¶ä»–å¯¹è±¡è¿›è¡Œæ¯”è¾ƒã€‚java.lang.Objectç±»çš„equalsæ–¹æ³•çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><p>boolean equals(Object o)</p><p>{</p><p>â€‹    return this&#x3D;&#x3D;o;</p><p>}</p><p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœä¸€ä¸ªç±»æ²¡æœ‰é‡å†™java.lang.Objectçš„equals()æ–¹æ³•æ—¶ï¼Œæ­¤æ—¶equals()æ–¹æ³•çš„æ¯”è¾ƒç»“æœä¸&#x3D;&#x3D;çš„æ¯”è¾ƒç»“æœæ˜¯ç›¸åŒçš„ã€‚</p><p>ä½†Javaå…è®¸ä»»ä½•ç±»é‡å†™equals()æ–¹æ³•ï¼Œé‡å†™è¯¥æ–¹æ³•å°±æ˜¯è®©ç¨‹åºå‘˜æ¥è‡ªå·±å†³å®šä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰çš„æ ‡å‡†â€”â€”æç«¯çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥è®¾è®¡å‡ºPersonå¯¹è±¡ä¸Dogå¯¹è±¡equals()æ¯”è¾ƒè¿”å›trueçš„æƒ…å†µâ€”â€”å½“ç„¶ä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆè®¾è®¡ã€‚</p><p>å®é™…ä¸Šé‡å†™equals()æ–¹æ³•æ—¶é€šå¸¸ä¼šæŒ‰å¦‚ä¸‹æ ¼å¼ï¼š</p><p>â€‹    public boolean equals(Object obj)</p><p>â€‹    {</p><p>â€‹        if (this &#x3D;&#x3D; obj)</p><p>â€‹            return true;</p><p>â€‹        if (obj &#x3D;&#x3D; null)</p><p>â€‹            return false;</p><p>â€‹        if (getClass() !&#x3D; obj.getClass())</p><p>â€‹            return false;</p><p>â€‹        Person other &#x3D; (Person) obj;</p><p>â€‹        if (name &#x3D;&#x3D; null)</p><p>â€‹        {</p><p>â€‹            if (other.name !&#x3D; null)</p><p>â€‹                return false;</p><p>â€‹        }</p><p>â€‹        else if (!name.equals(other.name))</p><p>â€‹            return false;</p><p>â€‹        if (pass &#x3D;&#x3D; null)</p><p>â€‹        {</p><p>â€‹            if (other.pass !&#x3D; null)</p><p>â€‹                return false;</p><p>â€‹        }</p><p>â€‹        else if (!pass.equals(other.pass))</p><p>â€‹            return false;</p><p>â€‹        return true;</p><p>â€‹    }</p><p>ä¸Šé¢é‡å†™equals()æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸¤ä¸ªPersonå¯¹è±¡æ˜¯å¦â€œç›¸ç­‰â€ï¼Œç¨‹åºåªè¦ä¸¤ä¸ªPersonå¯¹è±¡çš„nameã€passç›¸ç­‰ï¼Œç¨‹åºå°±å¯ä»¥æŠŠè¿™ä¸¤ä¸ªPersonå¯¹è±¡å½“æˆç›¸ç­‰â€”â€”è¿™æ˜¯ç³»ç»Ÿä¸šåŠ¡å†³å®šçš„ã€‚å¦‚æœä¸šåŠ¡éœ€è¦ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¢åŠ æ›´å¤šçš„å‚ä¸åˆ¤æ–­çš„Fieldï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åªæ ¹æ®nameè¿›è¡Œåˆ¤æ–­â€”â€”åªè¦ä¸¤ä¸ªPersonçš„nameç›¸ç­‰ï¼Œå°±è®¤ä¸ºä¸¤ä¸ªPersonç›¸ç­‰ï¼Œè¿™éƒ½æ˜¯ç”±ç³»ç»Ÿçš„ä¸šåŠ¡å†³å®šã€‚</p><p>æ€»ç»“èµ·æ¥å°±æ˜¯ä¸€å¥è¯ï¼šå¼€å‘è€…é‡å†™equals()æ–¹æ³•å°±å¯ä»¥æ ¹æ®ä¸šåŠ¡è¦æ±‚æ¥å†³å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦â€œç›¸ç­‰â€ã€‚</p><h3 id="20ã€é™æ€å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«ï¼Ÿ"><a href="#20ã€é™æ€å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="20ã€é™æ€å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«ï¼Ÿ"></a>20ã€é™æ€å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«ï¼Ÿ</h3><p>åœ¨è¯­æ³•å®šä¹‰ä¸Šçš„åŒºåˆ«ï¼šé™æ€å˜é‡å‰è¦åŠ staticå…³é”®å­—ï¼Œè€Œå®ä¾‹å˜é‡å‰åˆ™ä¸åŠ ã€‚</p><p>åœ¨ç¨‹åºè¿è¡Œæ—¶çš„åŒºåˆ«ï¼šå®ä¾‹å˜é‡å±äºä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»å…ˆåˆ›å»ºå®ä¾‹å¯¹è±¡ï¼Œå®ƒçš„å®ä¾‹å˜é‡æ‰ä¼šè¢«åˆ†é…ç©ºé—´ï¼Œæ‰èƒ½ä½¿ç”¨è¿™ä¸ªå®ä¾‹å˜é‡ã€‚é™æ€å˜é‡åˆ™å±äºç±»ï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºç±»å˜é‡ï¼Œåªè¦ç¨‹åºåŠ è½½äº†ç±»çš„å­—èŠ‚ç ï¼Œä¸ç”¨åˆ›å»ºä»»ä½•å®ä¾‹å¯¹è±¡ï¼Œé™æ€å˜é‡å°±ä¼šè¢«åˆ†é…ç©ºé—´ï¼Œé™æ€å˜é‡å°±å¯ä»¥è¢«ä½¿ç”¨äº†ã€‚æ€»ä¹‹ï¼Œå®ä¾‹å˜é‡å¿…é¡»åˆ›å»ºå¯¹è±¡åæ‰å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡æ¥ä½¿ç”¨ï¼Œé™æ€å˜é‡åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»åæ¥å¼•ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äºä¸‹é¢çš„ç¨‹åºï¼š </p><p>public class VarTest</p><p>{</p><p>â€‹    public static int staticVar &#x3D; 0; </p><p>â€‹    public int instanceVar &#x3D; 0; </p><p>â€‹    public VarTest ()</p><p>â€‹    {</p><p>â€‹        staticVar++;</p><p>â€‹        instanceVar++;</p><p>â€‹        System.out.println(â€œstaticVar&#x3D;â€ + staticVar + â€,instanceVar&#x3D;â€ + instanceVar);</p><p>â€‹    }</p><p>}</p><p>ä¸Šé¢ç¨‹åºä¸­çš„staticVarå˜é‡éšVarTestç±»åˆå§‹åŒ–è€Œåˆ†é…å†…å­˜ã€æ‰§è¡Œåˆå§‹åŒ–çš„ï¼Œä»¥åæ— è®ºåˆ›å»ºå¤šå°‘ä¸ªå®ä¾‹å¯¹è±¡ï¼Œä¸ä¼šå†åˆ†é…staticVarå˜é‡ï¼Œå› æ­¤ç”¨æ°¸è¿œåªæœ‰ä¸€ä¸ªstaticVarå˜é‡ã€‚</p><p>ä½†instanceVarå˜é‡åˆ™æ˜¯éšç€VarTestå¯¹è±¡åˆå§‹åŒ–è€Œåˆ†é…å†…å­˜ã€æ‰§è¡Œåˆå§‹åŒ–çš„ï¼Œå› æ­¤æ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå°±ä¼šåˆ†é…ä¸€ä¸ªinstanceVarï¼Œå³å¯ä»¥åˆ†é…å¤šä¸ªinstanceVarã€‚å› æ­¤ä¸Šé¢ç¨‹åºä¸­æ¯åˆ›å»ºä¸€ä¸ªVarTestå¯¹è±¡ï¼ŒstaticVarçš„å€¼å°±ä¼šè‡ªåŠ ä¸€ï¼Œä½†æ¯ä¸ªVarTestå¯¹è±¡çš„instanceVaræœ€å¤šåªè‡ªåŠ 1ã€‚</p><h3 id="21ã€æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªstaticæ–¹æ³•å†…éƒ¨è°ƒç”¨éstaticæ–¹æ³•ï¼Ÿ"><a href="#21ã€æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªstaticæ–¹æ³•å†…éƒ¨è°ƒç”¨éstaticæ–¹æ³•ï¼Ÿ" class="headerlink" title="21ã€æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªstaticæ–¹æ³•å†…éƒ¨è°ƒç”¨éstaticæ–¹æ³•ï¼Ÿ"></a>21ã€æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªstaticæ–¹æ³•å†…éƒ¨è°ƒç”¨éstaticæ–¹æ³•ï¼Ÿ</h3><p>ä¸å¯ä»¥ã€‚é™æ€æˆå‘˜ä¸èƒ½è°ƒç”¨éé™æ€æˆå‘˜ã€‚</p><p>éstaticæ–¹æ³•å±äºå¯¹è±¡ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªå¯¹è±¡åï¼Œæ‰å¯ä»¥åœ¨é€šè¿‡è¯¥å¯¹è±¡æ¥è°ƒç”¨staticæ–¹æ³•ã€‚è€Œstaticæ–¹æ³•è°ƒç”¨æ—¶ä¸éœ€è¦åˆ›å»ºå¯¹è±¡ï¼Œé€šè¿‡ç±»å°±å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªstaticæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå¯èƒ½è¿˜æ²¡æœ‰åˆ›å»ºä»»ä½•å®ä¾‹å¯¹è±¡ï¼Œå¦‚æœå…è®¸ä»ä¸€ä¸ªstaticæ–¹æ³•ä¸­è°ƒç”¨éstaticæ–¹æ³•çš„è°ƒç”¨ï¼Œé‚£ä¸ªéstaticæ–¹æ³•æ˜¯æ²¡æœ‰è°ƒç”¨å¯¹è±¡çš„ã€‚å› æ­¤Javaä¸å…è®¸staticæ–¹æ³•å†…éƒ¨è°ƒç”¨éstaticæ–¹æ³•ã€‚</p><h3 id="22ã€Math-round-11-5-ç­‰æ–¼å¤šå°‘-Math-round-11-5-ç­‰æ–¼å¤šå°‘"><a href="#22ã€Math-round-11-5-ç­‰æ–¼å¤šå°‘-Math-round-11-5-ç­‰æ–¼å¤šå°‘" class="headerlink" title="22ã€Math.round(11.5)ç­‰æ–¼å¤šå°‘? Math.round(-11.5)ç­‰æ–¼å¤šå°‘?"></a>22ã€Math.round(11.5)ç­‰æ–¼å¤šå°‘? Math.round(-11.5)ç­‰æ–¼å¤šå°‘?</h3><p>Mathç±»ä¸­æä¾›äº†ä¸‰ä¸ªä¸å–æ•´æœ‰å…³çš„æ–¹æ³•ï¼šceilã€floorã€roundï¼Œè¿™äº›æ–¹æ³•çš„ä½œç”¨ä¸å®ƒä»¬çš„è‹±æ–‡åç§°çš„å«ä¹‰ç›¸å¯¹åº”ï¼Œä¾‹å¦‚ï¼Œceilçš„è‹±æ–‡æ„ä¹‰æ˜¯å¤©èŠ±æ¿ï¼Œè¯¥æ–¹æ³•å°±è¡¨ç¤ºå‘ä¸Šå–æ•´ï¼Œæ‰€ä»¥ï¼ŒMath.ceil(11.3)çš„ç»“æœä¸º12,Math.ceil(-11.3)çš„ç»“æœæ˜¯-11ï¼›floorçš„è‹±æ–‡æ„ä¹‰æ˜¯åœ°æ¿ï¼Œè¯¥æ–¹æ³•å°±è¡¨ç¤ºå‘ä¸‹å–æ•´ï¼Œæ‰€ä»¥ï¼ŒMath.floor(11.6)çš„ç»“æœä¸º11,Math.floor(-11.6)çš„ç»“æœæ˜¯-12ï¼›æœ€éš¾æŒæ¡çš„æ˜¯roundæ–¹æ³•ï¼Œå®ƒè¡¨ç¤ºâ€œå››èˆäº”å…¥â€ï¼Œç®—æ³•ä¸ºMath.floor(x+0.5)ï¼Œå³å°†åŸæ¥çš„æ•°å­—åŠ ä¸Š0.5åå†å‘ä¸‹å–æ•´ï¼Œæ‰€ä»¥ï¼ŒMath.round(11.5)çš„ç»“æœä¸º12ï¼ŒMath.round(-11.5)çš„ç»“æœä¸º-11ã€‚</p><h3 id="23ã€è¯·è¯´å‡ºä½œç”¨åŸŸpublicï¼Œprivateï¼Œprotectedï¼Œä»¥åŠä¸å†™æ—¶çš„åŒºåˆ«"><a href="#23ã€è¯·è¯´å‡ºä½œç”¨åŸŸpublicï¼Œprivateï¼Œprotectedï¼Œä»¥åŠä¸å†™æ—¶çš„åŒºåˆ«" class="headerlink" title="23ã€è¯·è¯´å‡ºä½œç”¨åŸŸpublicï¼Œprivateï¼Œprotectedï¼Œä»¥åŠä¸å†™æ—¶çš„åŒºåˆ«"></a>23ã€è¯·è¯´å‡ºä½œç”¨åŸŸpublicï¼Œprivateï¼Œprotectedï¼Œä»¥åŠä¸å†™æ—¶çš„åŒºåˆ«</h3><p>è¿™å››ä¸ªä½œç”¨åŸŸçš„å¯è§èŒƒå›´å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p><p>ä½œç”¨åŸŸ  å½“å‰ç±»  åŒä¸€package  å­ç±»  å…¨å±€ </p><p>public   âˆš    âˆš       âˆš    âˆš</p><p>protected  âˆš    âˆš      âˆš   Ã—</p><p>default   âˆš    âˆš       Ã—   Ã—</p><p>private   âˆš    Ã—       Ã—   Ã—</p><p>è¯´æ˜ï¼šå¦‚æœåœ¨ä¿®é¥°çš„å…ƒç´ ä¸Šé¢æ²¡æœ‰å†™ä»»ä½•è®¿é—®ä¿®é¥°ç¬¦ï¼Œåˆ™è¡¨ç¤ºdefaultã€‚</p><p>åªè¦è®°ä½è®¿é—®æƒé™ç”±å°åˆ°å¤§ä¾æ¬¡æ˜¯private â†’ default â†’ protected â†’ publicï¼Œç„¶åå†è®°ä½Javaå­˜åœ¨çš„4ä¸ªè®¿é—®èŒƒå›´ï¼Œå°±å¾ˆå®¹æ˜“ç”»å‡ºä¸Šé¢çš„è¡¨æ ¼äº†ã€‚</p><h3 id="24ã€å¤–éƒ¨ç±»èƒ½ç”¨privateã€protectedä¿®é¥°å—ï¼Ÿå†…éƒ¨ç±»å¯ä»¥ç”¨privateã€protectedä¿®é¥°å—ï¼Ÿ"><a href="#24ã€å¤–éƒ¨ç±»èƒ½ç”¨privateã€protectedä¿®é¥°å—ï¼Ÿå†…éƒ¨ç±»å¯ä»¥ç”¨privateã€protectedä¿®é¥°å—ï¼Ÿ" class="headerlink" title="24ã€å¤–éƒ¨ç±»èƒ½ç”¨privateã€protectedä¿®é¥°å—ï¼Ÿå†…éƒ¨ç±»å¯ä»¥ç”¨privateã€protectedä¿®é¥°å—ï¼Ÿ"></a>24ã€å¤–éƒ¨ç±»èƒ½ç”¨privateã€protectedä¿®é¥°å—ï¼Ÿå†…éƒ¨ç±»å¯ä»¥ç”¨privateã€protectedä¿®é¥°å—ï¼Ÿ</h3><p>å¤–éƒ¨ç±»ä¸èƒ½ç”¨privateã€protectedä¿®é¥°ä¸èƒ½ã€‚å†…éƒ¨ç±»èƒ½ç”¨privateã€protectedä¿®é¥°ä¸èƒ½ã€‚</p><p>å¤–éƒ¨ç±»çš„ä¸Šä¸€çº§ç¨‹åºå•ä½æ˜¯åŒ…ï¼Œå› æ­¤å®ƒåªæœ‰ä¸¤ä¸ªä½¿ç”¨èŒƒå›´ï¼šåŒ…å†…å’ŒåŒ…å¤–ï¼Œå› æ­¤å®ƒåªèƒ½ç”¨publicï¼ˆè¡¨ç¤ºå¯ä»¥åœ¨å…¨å±€ä½ç½®ä½¿ç”¨ï¼‰å’Œé»˜è®¤ä¿®é¥°ç¬¦ï¼ˆdefaultï¼Œè¡¨ç¤ºåªèƒ½è¢«åŒä¸€ä¸ªåŒ…çš„å…¶ä»–ç±»ä½¿ç”¨ï¼‰ä¿®é¥°ã€‚</p><h3 id="25ã€ä¸€ä¸ªç±»å®šä¹‰å¤šä¸ªé‡è½½æ–¹æ³•ï¼Œå‚æ•°åˆ†åˆ«æ˜¯int-char-å’Œdoubleï¼Œç„¶åå°†double-x-x3D-2ï¼Œä¼ é€’è¿›å»ï¼Œä¼šé€‰æ‹©å“ªä¸ªæ–¹æ³•ï¼Ÿ"><a href="#25ã€ä¸€ä¸ªç±»å®šä¹‰å¤šä¸ªé‡è½½æ–¹æ³•ï¼Œå‚æ•°åˆ†åˆ«æ˜¯int-char-å’Œdoubleï¼Œç„¶åå°†double-x-x3D-2ï¼Œä¼ é€’è¿›å»ï¼Œä¼šé€‰æ‹©å“ªä¸ªæ–¹æ³•ï¼Ÿ" class="headerlink" title="25ã€ä¸€ä¸ªç±»å®šä¹‰å¤šä¸ªé‡è½½æ–¹æ³•ï¼Œå‚æ•°åˆ†åˆ«æ˜¯int ,char,å’Œdoubleï¼Œç„¶åå°†double x &#x3D; 2ï¼Œä¼ é€’è¿›å»ï¼Œä¼šé€‰æ‹©å“ªä¸ªæ–¹æ³•ï¼Ÿ"></a>25ã€ä¸€ä¸ªç±»å®šä¹‰å¤šä¸ªé‡è½½æ–¹æ³•ï¼Œå‚æ•°åˆ†åˆ«æ˜¯int ,char,å’Œdoubleï¼Œç„¶åå°†double x &#x3D; 2ï¼Œä¼ é€’è¿›å»ï¼Œä¼šé€‰æ‹©å“ªä¸ªæ–¹æ³•ï¼Ÿ</h3><p>é€‰æ‹©å‚æ•°ç±»å‹ä¸ºdoubleçš„æ–¹æ³•ã€‚</p><h3 id="26ã€è¯´è¯´has-aä¸is-açš„åŒºåˆ«ã€‚"><a href="#26ã€è¯´è¯´has-aä¸is-açš„åŒºåˆ«ã€‚" class="headerlink" title="26ã€è¯´è¯´has aä¸is açš„åŒºåˆ«ã€‚"></a>26ã€è¯´è¯´has aä¸is açš„åŒºåˆ«ã€‚</h3><p>is aæ˜¯å…¸å‹çš„â€œä¸€èˆ¬åˆ°ç‰¹æ®Šâ€çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯å…¸å‹çš„ç»§æ‰¿å…³ç³»ã€‚ä¾‹å¦‚Apple is a Fruitã€‚é‚£ä¹ˆAppleæ˜¯ä¸€ç§ç‰¹æ®Šçš„Fruitï¼Œä¹Ÿå°±æ˜¯è¯´Appleç»§æ‰¿äº†Fruitã€‚</p><p>has aæ˜¯å…¸å‹çš„â€œç»„åˆâ€å…³ç³»ã€‚æ¯”å¦‚Wolf has a Legï¼Œä¹Ÿå°±æ˜¯Legç»„åˆæˆäº†Wolfã€‚</p><p>éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼šç”±äºç»§æ‰¿ä¼šé€ æˆäº†å¯¹çˆ¶ç±»çš„ç ´åï¼Œå› æ­¤æœ‰æ—¶å€™å¯ä»¥é€šè¿‡ç»„åˆæ¥ä»£æ›¿çš„ç»§æ‰¿ã€‚ä½¿ç”¨ç»§æ‰¿çš„å¥½å¤„ï¼šç¨‹åºè¯­ä¹‰æ›´å¥½ç†è§£ã€‚åå¤„æ˜¯ï¼šå­ç±»å¯èƒ½é‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œä¸åˆ©äºçˆ¶ç±»å°è£…ï¼›ä½¿ç”¨ç»„åˆåˆ™é€ æˆè¯­ä¹‰çš„æ··æ·†ï¼Œä½†ç»„åˆç±»ä¸ä¼šé‡å†™è¢«ç»„åˆç±»çš„æ–¹æ³•ï¼Œå› æ­¤æ›´åˆ©äºè¢«å¤åˆç±»çš„å°è£…ã€‚</p><h3 id="27ã€ClassLoaderå¦‚ä½•åŠ è½½class-ã€‚"><a href="#27ã€ClassLoaderå¦‚ä½•åŠ è½½class-ã€‚" class="headerlink" title="27ã€ClassLoaderå¦‚ä½•åŠ è½½class ã€‚"></a>27ã€ClassLoaderå¦‚ä½•åŠ è½½class ã€‚</h3><p>  jvmé‡Œæœ‰å¤šä¸ªç±»åŠ è½½ï¼Œæ¯ä¸ªç±»åŠ è½½å¯ä»¥è´Ÿè´£åŠ è½½ç‰¹å®šä½ç½®çš„ç±»ï¼Œä¾‹å¦‚ï¼Œbootstrapç±»åŠ è½½è´Ÿè´£åŠ è½½jre&#x2F;lib&#x2F;rt.jarä¸­çš„ç±»ï¼Œ æˆ‘ä»¬å¹³æ—¶ç”¨çš„jdkä¸­çš„ç±»éƒ½ä½äºrt.jarä¸­ã€‚extclassloaderè´Ÿè´£åŠ è½½jar&#x2F;lib&#x2F;ext&#x2F;*.jarä¸­çš„ç±»ï¼Œappclassloaderè´Ÿè´£classpathæŒ‡å®šçš„ç›®å½•æˆ–jarä¸­çš„ç±»ã€‚é™¤äº†bootstrapä¹‹å¤–ï¼Œå…¶ä»–çš„ç±»åŠ è½½å™¨æœ¬èº«ä¹Ÿéƒ½æ˜¯javaç±»ï¼Œå®ƒä»¬çš„çˆ¶ç±»æ˜¯ClassLoaderã€‚</p><p>4.æŠ½è±¡ç±»çš„ä½œç”¨</p><h3 id="28ã€GCæ˜¯ä»€ä¹ˆ-ä¸ºä»€ä¹ˆè¦æœ‰GC"><a href="#28ã€GCæ˜¯ä»€ä¹ˆ-ä¸ºä»€ä¹ˆè¦æœ‰GC" class="headerlink" title="28ã€GCæ˜¯ä»€ä¹ˆ? ä¸ºä»€ä¹ˆè¦æœ‰GC?"></a>28ã€GCæ˜¯ä»€ä¹ˆ? ä¸ºä»€ä¹ˆè¦æœ‰GC?</h3><p>GCæ˜¯åƒåœ¾æ”¶é›†çš„æ„æ€ï¼ˆGabage Collectionï¼‰ï¼Œå†…å­˜å¤„ç†æ˜¯ç¼–ç¨‹äººå‘˜å®¹æ˜“å‡ºç°é—®é¢˜çš„åœ°æ–¹ï¼Œå¿˜è®°æˆ–è€…é”™è¯¯çš„å†…å­˜å›æ”¶ä¼šå¯¼è‡´ç¨‹åºæˆ–ç³»ç»Ÿçš„ä¸ç¨³å®šç”šè‡³å´©æºƒï¼ŒJavaæä¾›çš„GCåŠŸèƒ½å¯ä»¥è‡ªåŠ¨ç›‘æµ‹å¯¹è±¡æ˜¯å¦è¶…è¿‡ä½œç”¨åŸŸä»è€Œè¾¾åˆ°è‡ªåŠ¨å›æ”¶å†…å­˜çš„ç›®çš„ã€‚</p><p>Javaçš„Systemç±»å’ŒRuntimeç±»éƒ½æä¾›äº†â€œé€šçŸ¥â€ç¨‹åºè¿›è¡Œåƒåœ¾å›æ”¶çš„æ–¹æ³•ï¼Œä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼š</p><p>Systme.gc();</p><p>æˆ–</p><p>Runtime.getInstance().gc();</p><p>ä½†è¿™ä¸¤ä¸ªæ–¹æ³•åªæ˜¯â€œé€šçŸ¥â€Javaè¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä½†å®é™…ä¸ŠJVMä½•æ—¶è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè¿˜æ˜¯ç”±JVMè‡ªå·±å†³å®šã€‚</p><h3 id="29ã€åƒåœ¾å›æ”¶çš„ä¼˜ç‚¹å’ŒåŸç†ã€‚å¹¶è€ƒè™‘2ç§å›æ”¶æœºåˆ¶ã€‚"><a href="#29ã€åƒåœ¾å›æ”¶çš„ä¼˜ç‚¹å’ŒåŸç†ã€‚å¹¶è€ƒè™‘2ç§å›æ”¶æœºåˆ¶ã€‚" class="headerlink" title="29ã€åƒåœ¾å›æ”¶çš„ä¼˜ç‚¹å’ŒåŸç†ã€‚å¹¶è€ƒè™‘2ç§å›æ”¶æœºåˆ¶ã€‚"></a>29ã€åƒåœ¾å›æ”¶çš„ä¼˜ç‚¹å’ŒåŸç†ã€‚å¹¶è€ƒè™‘2ç§å›æ”¶æœºåˆ¶ã€‚</h3><p>ä¼ ç»Ÿçš„C&#x2F;C++ç­‰ç¼–ç¨‹è¯­è¨€ï¼Œéœ€è¦ç¨‹åºå‘˜è´Ÿè´£å›æ”¶å·²ç»åˆ†é…çš„å†…å­˜ã€‚æ˜¾å¼è¿›è¡Œåƒåœ¾å›æ”¶æ˜¯ä¸€ä»¶æ¯”è¾ƒå›°éš¾çš„äº‹æƒ…ï¼Œå› ä¸ºç¨‹åºå‘˜å¹¶ä¸æ€»æ˜¯çŸ¥é“å†…å­˜åº”è¯¥ä½•æ—¶è¢«é‡Šæ”¾ã€‚å¦‚æœä¸€äº›åˆ†é…å‡ºå»çš„å†…å­˜å¾—ä¸åˆ°åŠæ—¶å›æ”¶ï¼Œå°±ä¼šå¼•èµ·ç³»ç»Ÿè¿è¡Œé€Ÿåº¦ä¸‹é™ï¼Œç”šè‡³å¯¼è‡´ç¨‹åºç˜«ç—ªï¼Œè¿™ç§ç°è±¡è¢«ç§°ä¸ºå†…å­˜æ³„æ¼ã€‚æ€»ä½“è€Œè¨€ï¼Œæ˜¾å¼è¿›è¡Œåƒåœ¾å›æ”¶ä¸»è¦æœ‰å¦‚ä¸‹ä¸¤ä¸ªç¼ºç‚¹ï¼š</p><p>Aï¼ç¨‹åºå¿˜è®°åŠæ—¶å›æ”¶æ— ç”¨å†…å­˜ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œé™ä½ç³»ç»Ÿæ€§èƒ½ã€‚</p><p>Bï¼ç¨‹åºé”™è¯¯åœ°å›æ”¶ç¨‹åºæ ¸å¿ƒç±»åº“çš„å†…å­˜ï¼Œä»è€Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p><p>ä¸C&#x2F;C++ç¨‹åºä¸åŒï¼ŒJavaè¯­è¨€ä¸éœ€è¦ç¨‹åºå‘˜ç›´æ¥æ§åˆ¶å†…å­˜å›æ”¶ï¼ŒJavaç¨‹åºçš„å†…å­˜åˆ†é…å’Œå›æ”¶éƒ½æ˜¯ç”±JREåœ¨åå°è‡ªåŠ¨è¿›è¡Œçš„ã€‚JREä¼šè´Ÿè´£å›æ”¶é‚£äº›ä¸å†ä½¿ç”¨çš„å†…å­˜ï¼Œè¿™ç§æœºåˆ¶è¢«ç§°ä¸ºåƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼Œä¹Ÿè¢«ç§°ä¸ºGCï¼‰ã€‚é€šå¸¸JREä¼šæä¾›ä¸€æ¡åå°çº¿ç¨‹æ¥è¿›è¡Œæ£€æµ‹å’Œæ§åˆ¶ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨CPUç©ºé—²æˆ–å†…å­˜ä¸è¶³æ—¶è‡ªåŠ¨è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè€Œç¨‹åºå‘˜æ— æ³•ç²¾ç¡®æ§åˆ¶åƒåœ¾å›æ”¶çš„æ—¶é—´å’Œé¡ºåºç­‰ã€‚</p><p>å®é™…ä¸Šï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¸å¯èƒ½å®æ—¶æ£€æµ‹åˆ°æ¯ä¸ªJavaå¯¹è±¡çš„çŠ¶æ€ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å¤±å»å¼•ç”¨åï¼Œå®ƒä¹Ÿä¸ä¼šè¢«ç«‹å³å›æ”¶ï¼Œåªæœ‰ç­‰æ¥ä¸‹æ¥åƒåœ¾å›æ”¶å™¨è¿è¡Œæ—¶æ‰ä¼šè¢«å›æ”¶ã€‚</p><p>å¯¹äºä¸€ä¸ªåƒåœ¾å›æ”¶å™¨çš„è®¾è®¡ç®—æ³•æ¥è¯´ï¼Œå¤§è‡´æœ‰å¦‚ä¸‹å¯ä¾›é€‰æ‹©çš„è®¾è®¡ï¼š</p><p>Aï¼ä¸²è¡Œå›æ”¶ï¼ˆSerialï¼‰å’Œå¹¶è¡Œå›æ”¶ï¼ˆParallelï¼‰ï¼šä¸²è¡Œå›æ”¶å°±æ˜¯ä¸ç®¡ç³»ç»Ÿæœ‰å¤šå°‘ä¸ªCPUï¼Œå§‹ç»ˆåªç”¨ä¸€ä¸ªCPUæ¥æ‰§è¡Œåƒåœ¾å›æ”¶æ“ä½œï¼›è€Œå¹¶è¡Œå›æ”¶å°±æ˜¯æŠŠæ•´ä¸ªå›æ”¶å·¥ä½œæ‹†åˆ†æˆå¤šéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†ç”±ä¸€ä¸ªCPUè´Ÿè´£ï¼Œä»è€Œè®©å¤šä¸ªCPUå¹¶è¡Œå›æ”¶ï¼Œå¹¶è¡Œå›æ”¶çš„æ‰§è¡Œæ•ˆç‡å¾ˆé«˜ï¼Œä½†å¤æ‚åº¦å¢åŠ ï¼Œå¦å¤–ä¹Ÿæœ‰å…¶ä»–ä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚å†…å­˜ç¢ç‰‡ä¼šå¢åŠ ã€‚ </p><p>Bï¼å¹¶å‘æ‰§è¡Œï¼ˆConcurrentï¼‰å’Œåº”ç”¨ç¨‹åºåœæ­¢ï¼ˆStop-the-worldï¼‰ï¼šã€‚Stop-the-worldçš„åƒåœ¾å›æ”¶æ–¹å¼åœ¨æ‰§è¡Œåƒåœ¾å›æ”¶çš„åŒæ—¶ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºçš„æš‚åœã€‚å¹¶å‘æ‰§è¡Œçš„åƒåœ¾å›æ”¶è™½ç„¶ä¸ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºçš„æš‚åœï¼Œä½†ç”±äºå¹¶å‘æ‰§è¡Œåƒåœ¾å›æ”¶éœ€è¦è§£å†³å’Œåº”ç”¨ç¨‹åºçš„æ‰§è¡Œå†²çªï¼ˆåº”ç”¨ç¨‹åºå¯èƒ½ä¼šåœ¨åƒåœ¾å›æ”¶çš„è¿‡ç§°ä¸­ä¿®æ”¹å¯¹è±¡ï¼‰ï¼Œå› æ­¤å¹¶å‘æ‰§è¡Œåƒåœ¾å›æ”¶çš„ç³»ç»Ÿå¼€é”€æ¯”Stop-the-worldæ›´å¥½ï¼Œè€Œä¸”æ‰§è¡Œæ—¶ä¹Ÿéœ€è¦æ›´å¤šçš„å †å†…å­˜ã€‚</p><p>Cï¼å‹ç¼©ï¼ˆCompactingï¼‰å’Œä¸å‹ç¼©ï¼ˆNon-compactingï¼‰å’Œå¤åˆ¶ï¼ˆCopyingï¼‰ï¼šä¸ºäº†å‡å°‘å†…å­˜ç¢ç‰‡ï¼Œæ”¯æŒå‹ç¼©çš„åƒåœ¾å›æ”¶å™¨ä¼šæŠŠæ‰€æœ‰çš„æ´»å¯¹è±¡æ¬è¿åˆ°ä¸€èµ·ï¼Œç„¶åå°†ä¹‹å‰å ç”¨çš„å†…å­˜å…¨éƒ¨å›æ”¶ã€‚ä¸å‹ç¼©å¼çš„åƒåœ¾å›æ”¶å™¨åªæ˜¯å›æ”¶å†…å­˜ï¼Œè¿™æ ·å›æ”¶å›æ¥çš„å†…å­˜ä¸å¯èƒ½æ˜¯è¿ç»­çš„ï¼Œå› æ­¤å°†ä¼šæœ‰è¾ƒå¤šçš„å†…å­˜ç¢ç‰‡ã€‚è¾ƒä¹‹å‹ç¼©å¼çš„åƒåœ¾å›æ”¶ï¼Œä¸å‹ç¼©å¼çš„åƒåœ¾å›æ”¶å›æ”¶å†…å­˜å¿«äº†ï¼Œè€Œåˆ†é…å†…å­˜æ—¶å°±ä¼šæ›´æ…¢ï¼Œè€Œä¸”æ— æ³•è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜ã€‚å¤åˆ¶å¼çš„åƒåœ¾å›æ”¶ä¼šå°†æ‰€æœ‰å¯è¾¾å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ç›¸åŒçš„å†…å­˜ä¸­ï¼Œè¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯åƒåœ¾åŠå›æ”¶è¿‡ç¨‹ä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œéœ€è¦æ‹·è´æ•°æ®å’Œé¢å¤–çš„å†…å­˜ã€‚</p><h3 id="30ã€åƒåœ¾å›æ”¶å™¨çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿåƒåœ¾å›æ”¶å™¨å¯ä»¥é©¬ä¸Šå›æ”¶å†…å­˜å—ï¼Ÿæœ‰ä»€ä¹ˆåŠæ³•ä¸»åŠ¨é€šçŸ¥è™šæ‹Ÿæœºè¿›è¡Œåƒåœ¾å›æ”¶ï¼Ÿ"><a href="#30ã€åƒåœ¾å›æ”¶å™¨çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿåƒåœ¾å›æ”¶å™¨å¯ä»¥é©¬ä¸Šå›æ”¶å†…å­˜å—ï¼Ÿæœ‰ä»€ä¹ˆåŠæ³•ä¸»åŠ¨é€šçŸ¥è™šæ‹Ÿæœºè¿›è¡Œåƒåœ¾å›æ”¶ï¼Ÿ" class="headerlink" title="30ã€åƒåœ¾å›æ”¶å™¨çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿåƒåœ¾å›æ”¶å™¨å¯ä»¥é©¬ä¸Šå›æ”¶å†…å­˜å—ï¼Ÿæœ‰ä»€ä¹ˆåŠæ³•ä¸»åŠ¨é€šçŸ¥è™šæ‹Ÿæœºè¿›è¡Œåƒåœ¾å›æ”¶ï¼Ÿ"></a>30ã€åƒåœ¾å›æ”¶å™¨çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿåƒåœ¾å›æ”¶å™¨å¯ä»¥é©¬ä¸Šå›æ”¶å†…å­˜å—ï¼Ÿæœ‰ä»€ä¹ˆåŠæ³•ä¸»åŠ¨é€šçŸ¥è™šæ‹Ÿæœºè¿›è¡Œåƒåœ¾å›æ”¶ï¼Ÿ</h3><p>å¯¹äºJavaç¨‹åºä¸­å¯¹è±¡è€Œè¨€ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨å˜é‡å¼•ç”¨å®ƒï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°†ä¸å¯èƒ½è¢«ç¨‹åºè®¿é—®ï¼Œå› æ­¤å¯è®¤ä¸ºå®ƒæ˜¯åƒåœ¾ï¼›åªè¦æœ‰ä¸€ä¸ªä»¥ä¸Šçš„å¼•ç”¨å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</p><p>å¯¹äºJavaçš„åƒåœ¾å›æ”¶å™¨æ¥è¯´ï¼Œå®ƒä½¿ç”¨æœ‰å‘å›¾æ¥è®°å½•å’Œç®¡ç†å †å†…å­˜ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªæœ‰å‘å›¾å°±å¯ä»¥è¯†åˆ«å“ªäº›å¯¹è±¡æ˜¯â€œå¯è¾¾çš„â€ï¼ˆæœ‰å¼•ç”¨å˜é‡å¼•ç”¨å®ƒå°±æ˜¯å¯è¾¾çš„ï¼‰ï¼Œå“ªäº›å¯¹è±¡æ˜¯â€œä¸å¯è¾¾çš„â€ï¼ˆæ²¡æœ‰å¼•ç”¨å˜é‡å¼•ç”¨å®ƒå°±æ˜¯ä¸å¯è¾¾çš„ï¼‰ï¼Œæ‰€æœ‰â€œä¸å¯è¾¾â€å¯¹è±¡éƒ½æ˜¯å¯è¢«åƒåœ¾å›æ”¶çš„ã€‚</p><p>ä½†å¯¹äºå¦‚ä¸‹ç¨‹åºï¼š</p><p>class A</p><p>{</p><p>â€‹    B b;</p><p>}</p><p>class B</p><p>{</p><p>â€‹    A a;</p><p>}</p><p>public class Test</p><p>{</p><p>â€‹    public static void main(String[] args)</p><p>â€‹    {</p><p>â€‹        A a &#x3D; new A();</p><p>â€‹        a.b &#x3D; new B();</p><p>â€‹        a.b.a &#x3D; a;</p><p>â€‹        a &#x3D; null;</p><p>â€‹    }</p><p>}</p><p>ä¸Šé¢ç¨‹åºä¸­Aå¯¹è±¡ã€Bå¯¹è±¡ï¼Œå®ƒä»¬éƒ½â€œç›¸äº’â€å¼•ç”¨ï¼ŒAå¯¹è±¡çš„bå±æ€§å¼•ç”¨Bå¯¹è±¡ï¼Œè€ŒBå¯¹è±¡çš„aå±æ€§å¼•ç”¨Aå¯¹è±¡ï¼Œä½†å®é™…ä¸Šæ²¡æœ‰å¼•ç”¨å˜é‡å¼•ç”¨Aå¯¹è±¡ã€Bå¯¹è±¡ï¼Œå› æ­¤å®ƒä»¬åœ¨æœ‰å‘å›¾ä¸­ä¾ç„¶æ˜¯ä¸å¯è¾¾çš„ï¼Œå› æ­¤ä¹Ÿä¼šè¢«å½“æˆåƒåœ¾å¤„ç†ã€‚</p><p>ç¨‹åºå‘˜å¯ä»¥æ‰‹åŠ¨æ‰§è¡ŒSystem.gc()ï¼Œé€šçŸ¥GCè¿è¡Œï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªé€šçŸ¥ï¼Œè€ŒJVMä¾ç„¶æœ‰æƒå†³å®šä½•æ—¶è¿›è¡Œåƒåœ¾å›æ”¶ã€‚ </p><h3 id="31ã€ä»€ä¹ˆæ—¶å€™ç”¨assertã€‚"><a href="#31ã€ä»€ä¹ˆæ—¶å€™ç”¨assertã€‚" class="headerlink" title="31ã€ä»€ä¹ˆæ—¶å€™ç”¨assertã€‚"></a>31ã€ä»€ä¹ˆæ—¶å€™ç”¨assertã€‚</h3><p>assertion(æ–­è¨€)åœ¨è½¯ä»¶å¼€å‘ä¸­æ˜¯ä¸€ç§å¸¸ç”¨çš„è°ƒè¯•æ–¹å¼ï¼Œå¾ˆå¤šå¼€å‘è¯­è¨€ä¸­éƒ½æ”¯æŒè¿™ç§æœºåˆ¶ã€‚åœ¨å®ç°ä¸­ï¼Œassertionå°±æ˜¯åœ¨ç¨‹åºä¸­çš„ä¸€æ¡è¯­å¥ï¼Œå®ƒå¯¹ä¸€ä¸ªbooleanè¡¨è¾¾å¼è¿›è¡Œæ£€æŸ¥ï¼Œä¸€ä¸ªæ­£ç¡®ç¨‹åºå¿…é¡»ä¿è¯è¿™ä¸ªbooleanè¡¨è¾¾å¼çš„å€¼ä¸ºtrueï¼›å¦‚æœè¯¥å€¼ä¸ºfalseï¼Œè¯´æ˜ç¨‹åºå·²ç»å¤„äºä¸æ­£ç¡®çš„çŠ¶æ€ä¸‹ï¼Œassertå°†ç»™å‡ºè­¦å‘Šæˆ–é€€å‡ºã€‚</p><p>Javaçš„assertæ˜¯å…³é”®å­—ã€‚</p><p>public class TestAssert</p><p>{</p><p>  public static void main(String[] args) </p><p>  {</p><p>â€‹     int a &#x3D; 5;</p><p>â€‹     &#x2F;&#x2F;æ–­è¨€a&gt;3</p><p>â€‹     assert a &gt; 3;</p><p>â€‹     &#x2F;&#x2F;æ–­è¨€a&lt;3,å¦åˆ™æ˜¾ç¤ºaä¸å°äº3ï¼Œä¸”açš„å€¼ä¸ºï¼šâ€ + a</p><p>â€‹     assert a &lt; 3 : â€œaä¸å°äº3ï¼Œä¸”açš„å€¼ä¸ºï¼šâ€ + a;</p><p>  }</p><p>}</p><p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºï¼Œassertçš„ä¸¤ä¸ªåŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š</p><p>assert logicExp;</p><p>asert logicExp : expr;</p><p>Aï¼ç¬¬ä¸€ä¸ªç›´æ¥è¿›è¡Œæ–­è¨€ï¼Œ</p><p>Bï¼ç¬¬äºŒä¸ªä¹Ÿæ˜¯è¿›è¡Œæ–­è¨€ï¼Œä½†å½“æ–­è¨€å¤±è´¥å¤±è´¥æ—¶æ˜¾ç¤ºç‰¹å®šä¿¡æ¯ã€‚</p><p>æœ€åè¦æŒ‡å‡ºï¼š</p><p>è™½ç„¶assertæ˜¯JDK1.4æ–°å¢çš„å…³é”®å­—ï¼Œä½†æœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼š</p><p>javaå‘½ä»¤é»˜è®¤ä¸å¯åŠ¨æ–­è¨€ï¼Œ</p><p>ä¸ºäº†å¯åŠ¨ç”¨æˆ·æ–­è¨€ï¼Œåº”è¯¥åœ¨è¿è¡Œjavaå‘½ä»¤æ—¶å¢åŠ -eaï¼ˆEnable Assertï¼‰é€‰é¡¹ã€‚</p><p>ä¸ºäº†å¯åŠ¨ç³»ç»Ÿæ–­è¨€ï¼Œåº”è¯¥åœ¨è¿è¡Œjavaå‘½ä»¤æ—¶å¢åŠ -esaï¼ˆEnable System Assertï¼‰é€‰é¡¹ã€‚</p><h3 id="32ã€Javaä¸­ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Œè¯·ç®€å•æè¿°ã€‚"><a href="#32ã€Javaä¸­ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Œè¯·ç®€å•æè¿°ã€‚" class="headerlink" title="32ã€Javaä¸­ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Œè¯·ç®€å•æè¿°ã€‚"></a>32ã€Javaä¸­ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Œè¯·ç®€å•æè¿°ã€‚</h3><p>ä¸ºäº†ææ¸…æ¥šJavaç¨‹åºæ˜¯å¦æœ‰å†…å­˜æ³„éœ²å­˜åœ¨ï¼Œæˆ‘ä»¬é¦–å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²ï¼šç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¼šä¸æ–­åœ°åˆ†é…å†…å­˜ç©ºé—´ï¼›é‚£äº›ä¸å†ä½¿ç”¨çš„å†…å­˜ç©ºé—´åº”è¯¥å³æ—¶å›æ”¶å®ƒä»¬ï¼Œä»è€Œä¿è¯ç³»ç»Ÿå¯ä»¥å†æ¬¡ä½¿ç”¨è¿™äº›å†…å­˜ã€‚å¦‚æœå­˜åœ¨æ— ç”¨çš„å†…å­˜æ²¡æœ‰è¢«å›æ”¶å›æ¥ï¼Œé‚£å°±æ˜¯å†…å­˜æ³„éœ²ã€‚</p><p>å¯¹äºJavaç¨‹åºè€Œè¨€ï¼Œåªè¦Javaå¯¹è±¡ä¸€ç›´å¤„äºå¯è¾¾çŠ¶æ€ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¸ä¼šå›æ”¶å®ƒä»¬â€”â€”å³ä½¿å®ƒä»¬å¯¹äºç¨‹åºæ¥è¯´å·²ç»å˜æˆäº†åƒåœ¾ï¼ˆç¨‹åºå†ä¹Ÿä¸éœ€è¦å®ƒä»¬äº†ï¼‰ï¼›ä½†å¯¹äºåƒåœ¾å›æ”¶æœºåˆ¶æ¥è¯´ï¼Œå®ƒä»¬è¿˜ä¸æ˜¯åƒåœ¾ï¼ˆè¿˜å¤„äºå¯è¾¾çŠ¶æ€ï¼‰ï¼Œå› æ­¤ä¸èƒ½å›æ”¶ã€‚</p><p>çœ‹ArrayListä¸­remove(int index)æ–¹æ³•çš„æºä»£ç ï¼Œç¨‹åºå¦‚ä¸‹ï¼š</p><p>public E remove(int index) </p><p>{</p><p>â€‹    &#x2F;&#x2F;æ£€æŸ¥indexç´¢å¼•æ˜¯å¦è¶Šç•Œ</p><p>â€‹    RangeCheck(index);</p><p>â€‹    &#x2F;&#x2F;ä½¿ä¿®æ”¹æ¬¡æ•°åŠ 1</p><p>â€‹    modCount++;</p><p>â€‹    &#x2F;&#x2F;è·å–è¢«åˆ é™¤çš„å…ƒç´ </p><p>â€‹    E oldValue &#x3D; (E)elementData[index];</p><p>â€‹    int numMoved &#x3D; size - index - 1;</p><p>â€‹    &#x2F;&#x2F;æ•´ä½“æ¬å®¶</p><p>â€‹    if (numMoved &gt; 0)</p><p>â€‹        System.arraycopy(elementData, index+1</p><p>â€‹            , elementData, index, numMoved);</p><p>â€‹    &#x2F;&#x2F;å°†ArrayListçš„sizeå‡1ï¼Œ</p><p>â€‹    &#x2F;&#x2F;å¹¶å°†æœ€åä¸€ä¸ªæ•°ç»„èµ‹ä¸ºnullï¼Œè®©åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶æœ€åä¸€ä¸ªå…ƒç´ </p><p>â€‹    elementData[â€“size] &#x3D; null;</p><p>â€‹    return oldValue;</p><p>}</p><p>ä¸Šé¢ç¨‹åºä¸­ç²—ä½“å­—ä»£ç elementData[â€“size] &#x3D; null;å°±æ˜¯ä¸ºäº†é¿å…åƒåœ¾å›æ”¶æœºåˆ¶è€Œä¹¦å†™çš„ä»£ç ï¼Œå¦‚æœæ²¡æœ‰è¿™è¡Œä»£ç ï¼Œè¿™ä¸ªæ–¹æ³•å°±ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²â€”â€”æ¯åˆ é™¤ä¸€ä¸ªå¯¹è±¡ï¼Œä½†è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´å´ä¸ä¼šé‡Šæ”¾ã€‚</p><h3 id="33ã€èƒ½ä¸èƒ½è‡ªå·±å†™ä¸ªç±»ï¼Œä¹Ÿå«java-lang-Stringï¼Ÿ"><a href="#33ã€èƒ½ä¸èƒ½è‡ªå·±å†™ä¸ªç±»ï¼Œä¹Ÿå«java-lang-Stringï¼Ÿ" class="headerlink" title="33ã€èƒ½ä¸èƒ½è‡ªå·±å†™ä¸ªç±»ï¼Œä¹Ÿå«java.lang.Stringï¼Ÿ"></a>33ã€èƒ½ä¸èƒ½è‡ªå·±å†™ä¸ªç±»ï¼Œä¹Ÿå«java.lang.Stringï¼Ÿ</h3><p>å¯ä»¥ï¼Œä½†åœ¨åº”ç”¨çš„æ—¶å€™ï¼Œéœ€è¦ç”¨è‡ªå·±çš„ç±»åŠ è½½å™¨å»åŠ è½½ï¼Œå¦åˆ™ï¼Œç³»ç»Ÿçš„ç±»åŠ è½½å™¨æ°¸è¿œåªæ˜¯å»åŠ è½½jre.jaråŒ…ä¸­çš„é‚£ä¸ªjava.lang.Stringã€‚</p><p>ä½†åœ¨Tomcatçš„webåº”ç”¨ç¨‹åºä¸­ï¼Œéƒ½æ˜¯ç”±webappè‡ªå·±çš„ç±»åŠ è½½å™¨å…ˆè‡ªå·±åŠ è½½WEB-INF&#x2F;classessç›®å½•ä¸­çš„ç±»ï¼Œç„¶åæ‰å§”æ‰˜ä¸Šçº§çš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œå¦‚æœæˆ‘ä»¬åœ¨Tomcatçš„webåº”ç”¨ç¨‹åºä¸­å†™ä¸€ä¸ªjava.lang.Stringï¼Œè¿™æ—¶å€™Servletç¨‹åºåŠ è½½çš„å°±æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„java.lang.Stringï¼Œä½†æ˜¯è¿™ä¹ˆå¹²å°±ä¼šå‡ºå¾ˆå¤šæ½œåœ¨çš„é—®é¢˜ï¼ŒåŸæ¥æ‰€æœ‰ç”¨äº†java.lang.Stringç±»çš„éƒ½å°†å‡ºç°é—®é¢˜ã€‚</p><h3 id="34ã€ArrayListå¦‚ä½•å®ç°æ’å…¥çš„æ•°æ®æŒ‰è‡ªå®šä¹‰çš„æ–¹å¼æœ‰åºå­˜æ”¾"><a href="#34ã€ArrayListå¦‚ä½•å®ç°æ’å…¥çš„æ•°æ®æŒ‰è‡ªå®šä¹‰çš„æ–¹å¼æœ‰åºå­˜æ”¾" class="headerlink" title="34ã€ArrayListå¦‚ä½•å®ç°æ’å…¥çš„æ•°æ®æŒ‰è‡ªå®šä¹‰çš„æ–¹å¼æœ‰åºå­˜æ”¾"></a>34ã€ArrayListå¦‚ä½•å®ç°æ’å…¥çš„æ•°æ®æŒ‰è‡ªå®šä¹‰çš„æ–¹å¼æœ‰åºå­˜æ”¾</h3><p>ç¼–ç¨‹æ€è·¯æ˜¯ï¼šå®ç°ä¸€ä¸ªç±»å¯¹ArrayListè¿›è¡ŒåŒ…è£…ï¼Œå½“ç¨‹åºè¯•å›¾å‘ArrayListä¸­æ”¾å…¥æ•°æ®æ—¶ï¼Œç¨‹åºå°†å…ˆæ£€æŸ¥è¯¥å…ƒç´ ä¸ArrayListé›†åˆä¸­å…¶ä»–å…ƒç´ çš„å¤§å°ï¼Œç„¶åå°†è¯¥å…ƒç´ æ’å…¥åˆ°æŒ‡å®šä½ç½®ã€‚</p><p>class MyBean implements Comparable{</p><p>â€‹    public int compareTo(Object obj){</p><p>â€‹        if(! obj instanceof MyBean)</p><p>â€‹            throw new ClassCastException()ã€‚</p><p>â€‹        MyBean other &#x3D; (MyBean) obj;</p><p>â€‹        return age &gt; other.age?1:age&#x3D;&#x3D; other.age?0:-1;</p><p>â€‹    }</p><p>}</p><p>class MyTreeSet {</p><p>â€‹    private ArrayList datas &#x3D; new ArrayList();</p><p>â€‹    </p><p>â€‹    public void add(Object obj){</p><p>â€‹        for(int i&#x3D;0;i&lt;datas.size();i++){</p><p>â€‹            if(obj.compareTo(datas.get(i) !&#x3D; 1){</p><p>â€‹                datas.add(i,obj);</p><p>â€‹            }</p><p>â€‹        }</p><p>â€‹    }</p><p>}</p><h3 id="35-åºåˆ—åŒ–æ¥å£çš„idæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#35-åºåˆ—åŒ–æ¥å£çš„idæœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="35.åºåˆ—åŒ–æ¥å£çš„idæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>35.åºåˆ—åŒ–æ¥å£çš„idæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>ååºåˆ—åŒ–Javaå¯¹è±¡æ—¶å¿…é¡»æä¾›è¯¥å¯¹è±¡çš„classæ–‡ä»¶ï¼Œç°åœ¨çš„é—®é¢˜æ˜¯éšç€é¡¹ç›®çš„å‡çº§ï¼Œç³»ç»Ÿçš„classæ–‡ä»¶ä¹Ÿä¼šå‡çº§ï¼ŒJavaå¦‚ä½•ä¿è¯ä¸¤ä¸ªclassæ–‡ä»¶çš„å…¼å®¹æ€§ï¼Ÿ</p><p>Javaåºåˆ—åŒ–æœºåˆ¶å…è®¸ä¸ºåºåˆ—åŒ–ç±»æä¾›ä¸€ä¸ªprivate static finalçš„serialVersionUIDå€¼ï¼Œè¯¥Fieldå€¼ç”¨äºæ ‡è¯†è¯¥Javaç±»çš„åºåˆ—åŒ–ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸€ä¸ªç±»å‡çº§åï¼Œåªè¦å®ƒçš„serialVersionUID    Fieldå€¼ä¿æŒä¸å˜ï¼Œåºåˆ—åŒ–æœºåˆ¶ä¹Ÿä¼šæŠŠå®ƒä»¬å½“æˆåŒä¸€ä¸ªåºåˆ—åŒ–ç‰ˆæœ¬ã€‚</p><h3 id="36ã€hashCode-æ–¹æ³•çš„ä½œç”¨ï¼Ÿ"><a href="#36ã€hashCode-æ–¹æ³•çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="36ã€hashCode()æ–¹æ³•çš„ä½œç”¨ï¼Ÿ"></a>36ã€hashCode()æ–¹æ³•çš„ä½œç”¨ï¼Ÿ</h3><p>hashCode()æ–¹æ³•ä¸equals()æ–¹æ³•ç›¸ä¼¼ï¼Œéƒ½æ˜¯æ¥è‡ªjava.lang.Objectç±»çš„æ–¹æ³•ï¼Œéƒ½å…è®¸ç”¨æˆ·å®šä¹‰çš„å­ç±»é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œequalsè¿™ä¸ªæ–¹æ³•æ˜¯ç»™ç”¨æˆ·è°ƒç”¨çš„ï¼Œå¦‚æœä½ æƒ³æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡è§„åˆ™æ¥åˆ¤æ–­2ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œä½ å¯ä»¥é‡å†™equals()æ–¹æ³•ã€‚ç®€å•æ¥è®²ï¼Œequalsæ–¹æ³•ä¸»è¦æ˜¯ç”¨æ¥åˆ¤æ–­ä»è¡¨é¢ä¸Šçœ‹æˆ–è€…ä»å†…å®¹ä¸Šçœ‹ï¼Œ2ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯ç›¸ç­‰ã€‚</p><p>è€ŒhashCode()æ–¹æ³•é€šå¸¸æ˜¯ç»™å…¶ä»–ç±»æ¥è°ƒç”¨çš„ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬è¦æŠŠä¸¤ä¸ªå¯¹è±¡æ”¾å…¥HashSetæ—¶ï¼Œç”±äºHashSetè¦æ±‚ä¸¤ä¸ªå¯¹è±¡ä¸èƒ½ç›¸ç­‰ï¼Œè€ŒHashSetåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„æ ‡å‡†æ˜¯é€šè¿‡equals()æ¯”è¾ƒè¿”å›falseã€æˆ–ä¸¤ä¸ªå¯¹è±¡çš„hashCode()æ–¹æ³•è¿”å›å€¼ä¸ç›¸ç­‰â€”â€”åªè¦æ»¡è¶³ä»»æ„ä¸€ä¸ªæ¡ä»¶éƒ½å¯ä¼šè®¤ä¸ºä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ã€‚</p><p>ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠhashCode()æ–¹æ³•çš„è¿”å›å€¼å½“æˆè¿™ä¸ªå¯¹è±¡çš„â€œæ ‡è¯†ç¬¦â€ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashCode()ç›¸ç­‰ï¼Œå³å¯è®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„ã€‚å› æ­¤å½“æˆ‘ä»¬é‡å†™ä¸€ä¸ªç±»çš„equals()æ–¹æ³•æ—¶ï¼Œä¹Ÿåº”è¯¥é‡å†™å®ƒçš„hashCode()æ–¹æ³•ï¼Œè€Œä¸”è¿™ä¸¤ä¸ªæ–¹æ³•åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰çš„æ ‡å‡†ä¹Ÿåº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚</p><p>ï¼‰</p>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>switch&amp;å¾ªç¯è¯­å¥</title>
    <link href="/Hexo/2021/03/21/switch&amp;%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/"/>
    <url>/Hexo/2021/03/21/switch&amp;%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="1-switchè¯­å¥"><a href="#1-switchè¯­å¥" class="headerlink" title="1. switchè¯­å¥"></a>1. switchè¯­å¥</h2><h3 id="1-1-åˆ†æ”¯è¯­å¥switchè¯­å¥"><a href="#1-1-åˆ†æ”¯è¯­å¥switchè¯­å¥" class="headerlink" title="1.1 åˆ†æ”¯è¯­å¥switchè¯­å¥"></a>1.1 åˆ†æ”¯è¯­å¥switchè¯­å¥</h3><ul><li><p>æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">switch</span> (è¡¨è¾¾å¼) &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>è¯­å¥ä½“<span class="hljs-number">1</span>;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>è¯­å¥ä½“<span class="hljs-number">2</span>;<br><span class="hljs-keyword">break</span>;<br>...<br><span class="hljs-keyword">default</span>:<br>è¯­å¥ä½“n+<span class="hljs-number">1</span>;<br><span class="hljs-keyword">break</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-2-switchæ¡ˆä¾‹-å‡è‚¥è®¡åˆ’"><a href="#1-2-switchæ¡ˆä¾‹-å‡è‚¥è®¡åˆ’" class="headerlink" title="1.2 switchæ¡ˆä¾‹-å‡è‚¥è®¡åˆ’"></a>1.2 switchæ¡ˆä¾‹-å‡è‚¥è®¡åˆ’</h3><ul><li>éœ€æ±‚ï¼šé”®ç›˜å½•å…¥æ˜ŸæœŸæ•°ï¼Œæ˜¾ç¤ºä»Šå¤©çš„å‡è‚¥æ´»åŠ¨</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs">å‘¨ä¸€ï¼šè·‘æ­¥  <br>å‘¨äºŒï¼šæ¸¸æ³³  <br>å‘¨ä¸‰ï¼šæ…¢èµ°  <br>å‘¨å››ï¼šåŠ¨æ„Ÿå•è½¦<br>å‘¨äº”ï¼šæ‹³å‡»  <br>å‘¨å…­ï¼šçˆ¬å±±  <br>å‘¨æ—¥ï¼šå¥½å¥½åƒä¸€é¡¿ <br></code></pre></td></tr></table></figure><ul><li>ç¤ºä¾‹ä»£ç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br><span class="hljs-comment">// 1. é”®ç›˜å½•å…¥æ˜ŸæœŸæ•°æ®ï¼Œä½¿ç”¨å˜é‡æ¥æ”¶</span><br><span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥&quot;</span>);<br><span class="hljs-type">int</span> <span class="hljs-variable">week</span> <span class="hljs-operator">=</span> sc.nextInt();<br><span class="hljs-comment">// 2. å¤šæƒ…å†µåˆ¤æ–­ï¼Œé‡‡ç”¨switchè¯­å¥å®ç°</span><br><span class="hljs-keyword">switch</span>(week)&#123;<br><span class="hljs-comment">// 3. åœ¨ä¸åŒçš„caseä¸­ï¼Œè¾“å‡ºå¯¹åº”çš„å‡è‚¥è®¡åˆ’</span><br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>System.out.println(<span class="hljs-string">&quot;è·‘æ­¥&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>System.out.println(<span class="hljs-string">&quot;æ¸¸æ³³&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>System.out.println(<span class="hljs-string">&quot;æ…¢èµ°&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>System.out.println(<span class="hljs-string">&quot;åŠ¨æ„Ÿå•è½¦&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br>System.out.println(<span class="hljs-string">&quot;æ‹³å‡»&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br>System.out.println(<span class="hljs-string">&quot;çˆ¬å±±&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:<br>System.out.println(<span class="hljs-string">&quot;å¥½å¥½åƒä¸€é¡¿&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>System.out.println(<span class="hljs-string">&quot;æ‚¨çš„è¾“å…¥æœ‰è¯¯&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="1-3-switchè¯­å¥caseç©¿é€"><a href="#1-3-switchè¯­å¥caseç©¿é€" class="headerlink" title="1.3 switchè¯­å¥caseç©¿é€"></a>1.3 switchè¯­å¥caseç©¿é€</h3><ul><li>æ¦‚è¿° : å¦‚æœswitchè¯­å¥ä¸­,caseçœç•¥äº†breakè¯­å¥, å°±ä¼šå¼€å§‹caseç©¿é€</li><li>éœ€æ±‚ : é”®ç›˜å½•å…¥æ˜ŸæœŸæ•°ï¼Œè¾“å‡ºå·¥ä½œæ—¥ã€ä¼‘æ¯æ—¥ (1-5)å·¥ä½œæ—¥ï¼Œ(6-7)ä¼‘æ¯æ—¥</li><li>ç¤ºä¾‹ä»£ç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">caseç©¿é€æ˜¯å¦‚ä½•äº§ç”Ÿçš„?</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">å¦‚æœswitchè¯­å¥ä¸­,caseçœç•¥äº†breakè¯­å¥, å°±ä¼šå¼€å§‹caseç©¿é€.</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">ç°è±¡ï¼š</span><br><span class="hljs-comment">å½“å¼€å§‹caseç©¿é€ï¼Œåç»­çš„caseå°±ä¸ä¼šå…·æœ‰åŒ¹é…æ•ˆæœï¼Œå†…éƒ¨çš„è¯­å¥éƒ½ä¼šæ‰§è¡Œ</span><br><span class="hljs-comment">ç›´åˆ°çœ‹è§breakï¼Œæˆ–è€…å°†æ•´ä½“switchè¯­å¥æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šç»“æŸã€‚</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br><span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥æ˜ŸæœŸæ•°:&quot;</span>);<br><span class="hljs-type">int</span> <span class="hljs-variable">week</span> <span class="hljs-operator">=</span> sc.nextInt();<br><br><span class="hljs-keyword">switch</span>(week)&#123;<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br><span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br>System.out.println(<span class="hljs-string">&quot;å·¥ä½œæ—¥&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br><span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:<br>System.out.println(<span class="hljs-string">&quot;ä¼‘æ¯æ—¥&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>System.out.println(<span class="hljs-string">&quot;æ‚¨çš„è¾“å…¥æœ‰è¯¯&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»case1ç©¿é€åˆ°5 </p><h2 id="2-forå¾ªç¯"><a href="#2-forå¾ªç¯" class="headerlink" title="2. forå¾ªç¯"></a>2. forå¾ªç¯</h2><h3 id="2-1-å¾ªç¯è¯­å¥-forå¾ªç¯"><a href="#2-1-å¾ªç¯è¯­å¥-forå¾ªç¯" class="headerlink" title="2.1 å¾ªç¯è¯­å¥-forå¾ªç¯"></a>2.1 å¾ªç¯è¯­å¥-forå¾ªç¯</h3><ul><li><p>å¾ªç¯ï¼š</p><p>å¾ªç¯è¯­å¥å¯ä»¥åœ¨æ»¡è¶³å¾ªç¯æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œåå¤æ‰§è¡ŒæŸä¸€æ®µä»£ç ï¼Œè¿™æ®µè¢«é‡å¤æ‰§è¡Œçš„ä»£ç è¢«ç§°ä¸ºå¾ªç¯ä½“è¯­å¥ï¼Œå½“åå¤ æ‰§è¡Œè¿™ä¸ªå¾ªç¯ä½“æ—¶ï¼Œéœ€è¦åœ¨åˆé€‚çš„æ—¶å€™æŠŠå¾ªç¯åˆ¤æ–­æ¡ä»¶ä¿®æ”¹ä¸ºfalseï¼Œä»è€Œç»“æŸå¾ªç¯ï¼Œå¦åˆ™å¾ªç¯å°†ä¸€ç›´æ‰§è¡Œä¸‹å»ï¼Œå½¢ æˆæ­»å¾ªç¯ã€‚ </p></li><li><p>forå¾ªç¯æ ¼å¼ï¼š</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (åˆå§‹åŒ–è¯­å¥;æ¡ä»¶åˆ¤æ–­è¯­å¥;æ¡ä»¶æ§åˆ¶è¯­å¥) &#123;<br>å¾ªç¯ä½“è¯­å¥;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>æ ¼å¼è§£é‡Šï¼š</p><ul><li>åˆå§‹åŒ–è¯­å¥ï¼š  ç”¨äºè¡¨ç¤ºå¾ªç¯å¼€å¯æ—¶çš„èµ·å§‹çŠ¶æ€ï¼Œç®€å•è¯´å°±æ˜¯å¾ªç¯å¼€å§‹çš„æ—¶å€™ä»€ä¹ˆæ ·</li><li>æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼šç”¨äºè¡¨ç¤ºå¾ªç¯åå¤æ‰§è¡Œçš„æ¡ä»¶ï¼Œç®€å•è¯´å°±æ˜¯åˆ¤æ–­å¾ªç¯æ˜¯å¦èƒ½ä¸€ç›´æ‰§è¡Œä¸‹å»</li><li>å¾ªç¯ä½“è¯­å¥ï¼š  ç”¨äºè¡¨ç¤ºå¾ªç¯åå¤æ‰§è¡Œçš„å†…å®¹ï¼Œç®€å•è¯´å°±æ˜¯å¾ªç¯åå¤æ‰§è¡Œçš„äº‹æƒ…</li><li>æ¡ä»¶æ§åˆ¶è¯­å¥ï¼šç”¨äºè¡¨ç¤ºå¾ªç¯æ‰§è¡Œä¸­æ¯æ¬¡å˜åŒ–çš„å†…å®¹ï¼Œç®€å•è¯´å°±æ˜¯æ§åˆ¶å¾ªç¯æ˜¯å¦èƒ½æ‰§è¡Œä¸‹å»</li></ul></li><li><p>æ‰§è¡Œæµç¨‹ï¼š</p><p>â‘ æ‰§è¡Œåˆå§‹åŒ–è¯­å¥</p><p>â‘¡æ‰§è¡Œæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œçœ‹å…¶ç»“æœæ˜¯trueè¿˜æ˜¯false</p><p>â€‹             å¦‚æœæ˜¯falseï¼Œå¾ªç¯ç»“æŸ</p><p>â€‹             å¦‚æœæ˜¯trueï¼Œç»§ç»­æ‰§è¡Œ</p><p>â‘¢æ‰§è¡Œå¾ªç¯ä½“è¯­å¥</p><p>â‘£æ‰§è¡Œæ¡ä»¶æ§åˆ¶è¯­å¥</p><p>â‘¤å›åˆ°â‘¡ç»§ç»­</p></li></ul><h3 id="2-2-forå¾ªç¯æ¡ˆä¾‹-è¾“å‡ºæ•°æ®1-5å’Œ5-1"><a href="#2-2-forå¾ªç¯æ¡ˆä¾‹-è¾“å‡ºæ•°æ®1-5å’Œ5-1" class="headerlink" title="2.2 forå¾ªç¯æ¡ˆä¾‹-è¾“å‡ºæ•°æ®1-5å’Œ5-1"></a>2.2 forå¾ªç¯æ¡ˆä¾‹-è¾“å‡ºæ•°æ®1-5å’Œ5-1</h3><ul><li>éœ€æ±‚ï¼šåœ¨æ§åˆ¶å°è¾“å‡º1-5å’Œ5-1çš„æ•°æ® </li><li>ç¤ºä¾‹ä»£ç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ForTest01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//éœ€æ±‚ï¼šè¾“å‡ºæ•°æ®1-5</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">5</span>; i++) &#123;<br>System.out.println(i);<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><span class="hljs-comment">//éœ€æ±‚ï¼šè¾“å‡ºæ•°æ®5-1</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">5</span>; i&gt;=<span class="hljs-number">1</span>; i--) &#123;<br>System.out.println(i);<br>&#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-3-forå¾ªç¯æ¡ˆä¾‹-æ±‚1-5æ•°æ®å’Œ"><a href="#2-3-forå¾ªç¯æ¡ˆä¾‹-æ±‚1-5æ•°æ®å’Œ" class="headerlink" title="2.3 forå¾ªç¯æ¡ˆä¾‹-æ±‚1-5æ•°æ®å’Œ"></a>2.3 forå¾ªç¯æ¡ˆä¾‹-æ±‚1-5æ•°æ®å’Œ</h3><ul><li>éœ€æ±‚ï¼šæ±‚1-5ä¹‹é—´çš„æ•°æ®å’Œï¼Œå¹¶æŠŠæ±‚å’Œç»“æœåœ¨æ§åˆ¶å°è¾“å‡º </li><li>ç¤ºä¾‹ä»£ç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ForTest02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//æ±‚å’Œçš„æœ€ç»ˆç»“æœå¿…é¡»ä¿å­˜èµ·æ¥ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨äºä¿å­˜æ±‚å’Œçš„ç»“æœï¼Œåˆå§‹å€¼ä¸º0</span><br><span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-comment">//ä»1å¼€å§‹åˆ°5ç»“æŸçš„æ•°æ®ï¼Œä½¿ç”¨å¾ªç¯ç»“æ„å®Œæˆ</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">5</span>; i++) &#123;<br><span class="hljs-comment">//å°†åå¤è¿›è¡Œçš„äº‹æƒ…å†™å…¥å¾ªç¯ç»“æ„å†…éƒ¨</span><br>             <span class="hljs-comment">// æ­¤å¤„åå¤è¿›è¡Œçš„äº‹æƒ…æ˜¯å°†æ•°æ® i åŠ åˆ°ç”¨äºä¿å­˜æœ€ç»ˆæ±‚å’Œçš„å˜é‡ sum ä¸­</span><br>sum += i;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">sum += i;sum = sum + i;</span><br><span class="hljs-comment">ç¬¬ä¸€æ¬¡ï¼šsum = sum + i = 0 + 1 = 1;</span><br><span class="hljs-comment">ç¬¬äºŒæ¬¡ï¼šsum = sum + i = 1 + 2 = 3;</span><br><span class="hljs-comment">ç¬¬ä¸‰æ¬¡ï¼šsum = sum + i = 3 + 3 = 6;</span><br><span class="hljs-comment">ç¬¬å››æ¬¡ï¼šsum = sum + i = 6 + 4 = 10;</span><br><span class="hljs-comment">ç¬¬äº”æ¬¡ï¼šsum = sum + i = 10 + 5 = 15;</span><br><span class="hljs-comment">*/</span><br>&#125;<br><span class="hljs-comment">//å½“å¾ªç¯æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå°†æœ€ç»ˆæ•°æ®æ‰“å°å‡ºæ¥</span><br>System.out.println(<span class="hljs-string">&quot;1-5ä¹‹é—´çš„æ•°æ®å’Œæ˜¯ï¼š&quot;</span> + sum);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æœ¬é¢˜è¦ç‚¹ï¼š<ul><li>ä»Šåé‡åˆ°çš„éœ€æ±‚ä¸­ï¼Œå¦‚æœå¸¦æœ‰æ±‚å’ŒäºŒå­—ï¼Œè¯·ç«‹å³è”æƒ³åˆ°æ±‚å’Œå˜é‡</li><li>æ±‚å’Œå˜é‡çš„å®šä¹‰ä½ç½®ï¼Œå¿…é¡»åœ¨å¾ªç¯å¤–éƒ¨ï¼Œå¦‚æœåœ¨å¾ªç¯å†…éƒ¨åˆ™è®¡ç®—å‡ºçš„æ•°æ®å°†æ˜¯é”™è¯¯çš„</li></ul></li></ul><h3 id="2-4-forå¾ªç¯æ¡ˆä¾‹-æ±‚1-100å¶æ•°å’Œ"><a href="#2-4-forå¾ªç¯æ¡ˆä¾‹-æ±‚1-100å¶æ•°å’Œ" class="headerlink" title="2.4 forå¾ªç¯æ¡ˆä¾‹-æ±‚1-100å¶æ•°å’Œ"></a>2.4 forå¾ªç¯æ¡ˆä¾‹-æ±‚1-100å¶æ•°å’Œ</h3><ul><li>éœ€æ±‚ï¼šæ±‚1-100ä¹‹é—´çš„å¶æ•°å’Œï¼Œå¹¶æŠŠæ±‚å’Œç»“æœåœ¨æ§åˆ¶å°è¾“å‡º }</li><li>ç¤ºä¾‹ä»£ç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ForTest03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//æ±‚å’Œçš„æœ€ç»ˆç»“æœå¿…é¡»ä¿å­˜èµ·æ¥ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨äºä¿å­˜æ±‚å’Œçš„ç»“æœï¼Œåˆå§‹å€¼ä¸º0</span><br><span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-comment">//å¯¹1-100çš„æ•°æ®æ±‚å’Œä¸1-5çš„æ•°æ®æ±‚å’Œå‡ ä¹å®Œå…¨ä¸€æ ·ï¼Œä»…ä»…æ˜¯ç»“æŸæ¡ä»¶ä¸åŒ</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">100</span>; i++) &#123;<br><span class="hljs-comment">//å¯¹1-100çš„å¶æ•°æ±‚å’Œï¼Œéœ€è¦å¯¹æ±‚å’Œæ“ä½œæ·»åŠ é™åˆ¶æ¡ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯å¶æ•°</span><br><span class="hljs-keyword">if</span>(i%<span class="hljs-number">2</span> == <span class="hljs-number">0</span>) &#123;  <span class="hljs-comment">//å…³é”®ç‚¹iæ¨¡ä»¥å•/åŒæ•°</span><br>sum += i;<br>&#125;<br>&#125;<br><span class="hljs-comment">//å½“å¾ªç¯æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå°†æœ€ç»ˆæ•°æ®æ‰“å°å‡ºæ¥</span><br>System.out.println(<span class="hljs-string">&quot;1-100ä¹‹é—´çš„å¶æ•°å’Œæ˜¯ï¼š&quot;</span> + sum);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-5-forå¾ªç¯æ¡ˆä¾‹-æ°´ä»™èŠ±æ•°"><a href="#2-5-forå¾ªç¯æ¡ˆä¾‹-æ°´ä»™èŠ±æ•°" class="headerlink" title="2.5 forå¾ªç¯æ¡ˆä¾‹-æ°´ä»™èŠ±æ•°"></a>2.5 forå¾ªç¯æ¡ˆä¾‹-æ°´ä»™èŠ±æ•°</h3><ul><li>éœ€æ±‚ï¼šåœ¨æ§åˆ¶å°è¾“å‡ºæ‰€æœ‰çš„â€œæ°´ä»™èŠ±æ•°â€ </li><li>è§£é‡Šï¼šä»€ä¹ˆæ˜¯æ°´ä»™èŠ±æ•°ï¼Ÿ<ul><li>æ°´ä»™èŠ±æ•°ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªä¸‰ä½æ•°ï¼Œä¸ªä½ã€åä½ã€ç™¾ä½çš„æ•°å­—ç«‹æ–¹å’Œç­‰äºåŸæ•°<ul><li>ä¾‹å¦‚<code>153  3*3*3 + 5*5*5 + 1*1*1 = 153</code></li></ul></li></ul></li><li>æ€è·¯ï¼š<ol><li>è·å–æ‰€æœ‰çš„ä¸‰ä½æ•°ï¼Œå‡†å¤‡è¿›è¡Œç­›é€‰ï¼Œæœ€å°çš„ä¸‰ä½æ•°ä¸º100ï¼Œæœ€å¤§çš„ä¸‰ä½æ•°ä¸º999ï¼Œä½¿ç”¨forå¾ªç¯è·å–</li><li>è·å–æ¯ä¸€ä¸ªä¸‰ä½æ•°çš„ä¸ªä½ï¼Œåä½ï¼Œç™¾ä½ï¼Œåšifè¯­å¥åˆ¤æ–­æ˜¯å¦æ˜¯æ°´ä»™èŠ±æ•°</li></ol></li><li>ç¤ºä¾‹ä»£ç </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ForTest04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//è¾“å‡ºæ‰€æœ‰çš„æ°´ä»™èŠ±æ•°å¿…ç„¶è¦ä½¿ç”¨åˆ°å¾ªç¯ï¼Œéå†æ‰€æœ‰çš„ä¸‰ä½æ•°ï¼Œä¸‰ä½æ•°ä»100å¼€å§‹ï¼Œåˆ°999ç»“æŸ</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">100</span>; i&lt;<span class="hljs-number">1000</span>; i++) &#123;<br><span class="hljs-comment">//åœ¨è®¡ç®—ä¹‹å‰è·å–ä¸‰ä½æ•°ä¸­æ¯ä¸ªä½ä¸Šçš„å€¼</span><br><span class="hljs-type">int</span> <span class="hljs-variable">ge</span> <span class="hljs-operator">=</span> i%<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">shi</span> <span class="hljs-operator">=</span> i/<span class="hljs-number">10</span>%<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">bai</span> <span class="hljs-operator">=</span> i/<span class="hljs-number">10</span>/<span class="hljs-number">10</span>%<span class="hljs-number">10</span>;<br><br><span class="hljs-comment">//åˆ¤å®šæ¡ä»¶æ˜¯å°†ä¸‰ä½æ•°ä¸­çš„æ¯ä¸ªæ•°å€¼å–å‡ºæ¥ï¼Œè®¡ç®—ç«‹æ–¹å’Œåä¸åŸå§‹æ•°å­—æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰</span><br><span class="hljs-keyword">if</span>(ge*ge*ge + shi*shi*shi + bai*bai*bai == i) &#123;<br><span class="hljs-comment">//è¾“å‡ºæ»¡è¶³æ¡ä»¶çš„æ•°å­—å°±æ˜¯æ°´ä»™èŠ±æ•°</span><br>System.out.println(i);<br>&#125;<br>&#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-6-forå¾ªç¯æ¡ˆä¾‹-æ¯è¡Œæ‰“å°2ä¸ªæ°´ä»™èŠ±æ•°-ç»Ÿè®¡"><a href="#2-6-forå¾ªç¯æ¡ˆä¾‹-æ¯è¡Œæ‰“å°2ä¸ªæ°´ä»™èŠ±æ•°-ç»Ÿè®¡" class="headerlink" title="2.6 forå¾ªç¯æ¡ˆä¾‹-æ¯è¡Œæ‰“å°2ä¸ªæ°´ä»™èŠ±æ•°(ç»Ÿè®¡)"></a>2.6 forå¾ªç¯æ¡ˆä¾‹-æ¯è¡Œæ‰“å°2ä¸ªæ°´ä»™èŠ±æ•°(ç»Ÿè®¡)</h3><ul><li>éœ€æ±‚ï¼šåœ¨æ§åˆ¶å°è¾“å‡ºæ‰€æœ‰çš„â€œæ°´ä»™èŠ±æ•°â€ï¼Œè¦æ±‚æ¯è¡Œæ‰“å°2ä¸ª</li><li>ç¤ºä¾‹ä»£ç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo6For</span> &#123;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">éœ€æ±‚ï¼šåœ¨æ§åˆ¶å°è¾“å‡ºæ‰€æœ‰çš„â€œæ°´ä»™èŠ±æ•°â€ï¼Œè¦æ±‚æ¯è¡Œæ‰“å°2ä¸ª</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">System.out.print (æ‰“å°å†…å®¹);æ‰“å°åä¸æ¢è¡Œ</span><br><span class="hljs-comment">System.out.println(æ‰“å°å†…å®¹);æ‰“å°åæ¢è¡Œ</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">åˆ†æ:</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">1. å®šä¹‰å˜é‡countï¼Œç”¨äºä¿å­˜â€œæ‰“å°è¿‡â€çš„æ•°é‡ï¼Œåˆå§‹å€¼ä¸º0</span><br><span class="hljs-comment">2. åœ¨åˆ¤å®šå’Œæ‰“å°æ°´ä»™èŠ±æ•°çš„è¿‡ç¨‹ä¸­ï¼Œæ‹¼æ¥ç©ºæ ¼, ä½†ä¸æ¢è¡Œï¼Œå¹¶åœ¨æ‰“å°åè®©countå˜é‡+1ï¼Œè®°å½•æ‰“å°è¿‡çš„æ•°é‡</span><br><span class="hljs-comment">3. åœ¨æ¯ä¸€æ¬¡countå˜é‡+1åï¼Œåˆ¤æ–­æ˜¯å¦åˆ°è¾¾äº†2çš„å€æ•°ï¼Œæ˜¯çš„è¯ï¼Œæ¢è¡Œã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br><span class="hljs-comment">// 1. å®šä¹‰å˜é‡countï¼Œç”¨äºä¿å­˜â€œæ‰“å°è¿‡â€çš„æ•°é‡ï¼Œåˆå§‹å€¼ä¸º0</span><br><span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>; i &lt;= <span class="hljs-number">999</span>; i++)&#123;<br><span class="hljs-type">int</span> <span class="hljs-variable">ge</span> <span class="hljs-operator">=</span> i % <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">shi</span> <span class="hljs-operator">=</span> i / <span class="hljs-number">10</span> % <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">bai</span> <span class="hljs-operator">=</span> i / <span class="hljs-number">10</span> / <span class="hljs-number">10</span> % <span class="hljs-number">10</span>;<br><br><span class="hljs-keyword">if</span>((ge*ge*ge + shi*shi*shi + bai*bai*bai) == i)&#123;<br><span class="hljs-comment">//  2. åœ¨åˆ¤å®šå’Œæ‰“å°æ°´ä»™èŠ±æ•°çš„è¿‡ç¨‹ä¸­ï¼Œæ‹¼æ¥ç©ºæ ¼, ä½†ä¸æ¢è¡Œï¼Œå¹¶åœ¨æ‰“å°åè®©countå˜é‡+1ï¼Œè®°å½•æ‰“å°è¿‡çš„æ•°é‡</span><br>System.out.print(i + <span class="hljs-string">&quot; &quot;</span>);<br>count++;<br><span class="hljs-comment">// 3. åœ¨æ¯ä¸€æ¬¡countå˜é‡+1åï¼Œåˆ¤æ–­æ˜¯å¦åˆ°è¾¾äº†2çš„å€æ•°ï¼Œæ˜¯çš„è¯ï¼Œæ¢è¡Œ</span><br><span class="hljs-keyword">if</span>(count % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)&#123;<br>System.out.println();<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æœ¬é¢˜è¦ç‚¹ï¼š<ul><li>ä»Šåå¦‚æœéœ€æ±‚å¸¦æœ‰ç»Ÿè®¡xxxï¼Œè¯·å…ˆæƒ³åˆ°è®¡æ•°å™¨å˜é‡</li><li>è®¡æ•°å™¨å˜é‡å®šä¹‰çš„ä½ç½®ï¼Œå¿…é¡»åœ¨å¾ªç¯å¤–éƒ¨</li></ul></li></ul><h2 id="3-whileå¾ªç¯"><a href="#3-whileå¾ªç¯" class="headerlink" title="3. whileå¾ªç¯"></a>3. whileå¾ªç¯</h2><h3 id="3-1-å¾ªç¯è¯­å¥-whileå¾ªç¯"><a href="#3-1-å¾ªç¯è¯­å¥-whileå¾ªç¯" class="headerlink" title="3.1 å¾ªç¯è¯­å¥-whileå¾ªç¯"></a>3.1 å¾ªç¯è¯­å¥-whileå¾ªç¯</h3><ul><li><p>whileå¾ªç¯å®Œæ•´æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">åˆå§‹åŒ–è¯­å¥;<br><span class="hljs-keyword">while</span> (æ¡ä»¶åˆ¤æ–­è¯­å¥) &#123;<br>å¾ªç¯ä½“è¯­å¥;<br>    æ¡ä»¶æ§åˆ¶è¯­å¥;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>whileå¾ªç¯æ‰§è¡Œæµç¨‹ï¼š</p><p>â‘ æ‰§è¡Œåˆå§‹åŒ–è¯­å¥</p><p>â‘¡æ‰§è¡Œæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œçœ‹å…¶ç»“æœæ˜¯trueè¿˜æ˜¯false</p><p>â€‹             å¦‚æœæ˜¯falseï¼Œå¾ªç¯ç»“æŸ</p><p>â€‹             å¦‚æœæ˜¯trueï¼Œç»§ç»­æ‰§è¡Œ</p><p>â‘¢æ‰§è¡Œå¾ªç¯ä½“è¯­å¥</p><p>â‘£æ‰§è¡Œæ¡ä»¶æ§åˆ¶è¯­å¥</p><p>â‘¤å›åˆ°â‘¡ç»§ç»­</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WhileDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//éœ€æ±‚ï¼šåœ¨æ§åˆ¶å°è¾“å‡º5æ¬¡&quot;HelloWorld&quot;</span><br><span class="hljs-comment">//forå¾ªç¯å®ç°</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">5</span>; i++) &#123;<br>System.out.println(<span class="hljs-string">&quot;HelloWorld&quot;</span>);<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><span class="hljs-comment">//whileå¾ªç¯å®ç°</span><br><span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span>(j&lt;=<span class="hljs-number">5</span>) &#123;<br>System.out.println(<span class="hljs-string">&quot;HelloWorld&quot;</span>);<br>j++;<br>&#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-2-whileå¾ªç¯æ¡ˆä¾‹-ç ç©†æœ—ç›å³°"><a href="#3-2-whileå¾ªç¯æ¡ˆä¾‹-ç ç©†æœ—ç›å³°" class="headerlink" title="3.2 whileå¾ªç¯æ¡ˆä¾‹-ç ç©†æœ—ç›å³°"></a>3.2 whileå¾ªç¯æ¡ˆä¾‹-ç ç©†æœ—ç›å³°</h3><ul><li>éœ€æ±‚ï¼šä¸–ç•Œæœ€é«˜å±±å³°æ˜¯ç ç©†æœ—ç›å³°(8844.43ç±³&#x3D;8844430æ¯«ç±³)ï¼Œå‡å¦‚æˆ‘æœ‰ä¸€å¼ è¶³å¤Ÿå¤§çš„çº¸ï¼Œå®ƒçš„åšåº¦æ˜¯0.1æ¯«ç±³ã€‚è¯·é—®ï¼Œæˆ‘æŠ˜å å¤šå°‘æ¬¡ï¼Œå¯ä»¥æŠ˜æˆç ç©†æœ—ç›å³°çš„é«˜åº¦?</li><li>ç¤ºä¾‹ä»£ç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WhileTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œåˆå§‹å€¼ä¸º0</span><br><span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-comment">//å®šä¹‰çº¸å¼ åšåº¦</span><br><span class="hljs-type">double</span> <span class="hljs-variable">paper</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.1</span>;<br><span class="hljs-comment">//å®šä¹‰ç ç©†æœ—ç›å³°çš„é«˜åº¦</span><br><span class="hljs-type">int</span> <span class="hljs-variable">zf</span> <span class="hljs-operator">=</span> <span class="hljs-number">8844430</span>;<br><span class="hljs-comment">//å› ä¸ºè¦åå¤æŠ˜å ï¼Œæ‰€ä»¥è¦ä½¿ç”¨å¾ªç¯ï¼Œä½†æ˜¯ä¸çŸ¥é“æŠ˜å å¤šå°‘æ¬¡ï¼Œè¿™ç§æƒ…å†µä¸‹æ›´é€‚åˆä½¿ç”¨whileå¾ªç¯</span><br><span class="hljs-comment">//æŠ˜å çš„è¿‡ç¨‹ä¸­å½“çº¸å¼ åšåº¦å¤§äºç å³°å°±åœæ­¢äº†ï¼Œå› æ­¤ç»§ç»­æ‰§è¡Œçš„è¦æ±‚æ˜¯çº¸å¼ åšåº¦å°äºç å³°é«˜åº¦</span><br><span class="hljs-keyword">while</span>(paper &lt;= zf) &#123;<br><span class="hljs-comment">//å¾ªç¯çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æ¯æ¬¡çº¸å¼ æŠ˜å ï¼Œçº¸å¼ çš„åšåº¦è¦åŠ å€</span><br>paper *= <span class="hljs-number">2</span>;<br><span class="hljs-comment">//åœ¨å¾ªç¯ä¸­æ‰§è¡Œç´¯åŠ ï¼Œå¯¹åº”æŠ˜å äº†å¤šå°‘æ¬¡</span><br>count++;<br>&#125;<br><span class="hljs-comment">//æ‰“å°è®¡æ•°å™¨çš„å€¼</span><br>System.out.println(<span class="hljs-string">&quot;éœ€è¦æŠ˜å ï¼š&quot;</span> + count + <span class="hljs-string">&quot;æ¬¡&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-å¾ªç¯ç»†èŠ‚"><a href="#4-å¾ªç¯ç»†èŠ‚" class="headerlink" title="4. å¾ªç¯ç»†èŠ‚"></a>4. å¾ªç¯ç»†èŠ‚</h2><h3 id="4-1-å¾ªç¯è¯­å¥-dowhileå¾ªç¯"><a href="#4-1-å¾ªç¯è¯­å¥-dowhileå¾ªç¯" class="headerlink" title="4.1 å¾ªç¯è¯­å¥-dowhileå¾ªç¯"></a>4.1 å¾ªç¯è¯­å¥-dowhileå¾ªç¯</h3><ul><li><p>å®Œæ•´æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">åˆå§‹åŒ–è¯­å¥;<br><span class="hljs-keyword">do</span> &#123;<br>å¾ªç¯ä½“è¯­å¥;<br>æ¡ä»¶æ§åˆ¶è¯­å¥;<br>&#125;<span class="hljs-keyword">while</span>(æ¡ä»¶åˆ¤æ–­è¯­å¥);<br></code></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œæµç¨‹ï¼š</p><p>â‘  æ‰§è¡Œåˆå§‹åŒ–è¯­å¥</p><p>â‘¡ æ‰§è¡Œå¾ªç¯ä½“è¯­å¥</p><p>â‘¢ æ‰§è¡Œæ¡ä»¶æ§åˆ¶è¯­å¥</p><p>â‘£ æ‰§è¡Œæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œçœ‹å…¶ç»“æœæ˜¯trueè¿˜æ˜¯false</p><p>å¦‚æœæ˜¯falseï¼Œå¾ªç¯ç»“æŸ</p><p>å¦‚æœæ˜¯trueï¼Œç»§ç»­æ‰§è¡Œ</p><p>â‘¤ å›åˆ°â‘¡ç»§ç»­</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DoWhileDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//éœ€æ±‚ï¼šåœ¨æ§åˆ¶å°è¾“å‡º5æ¬¡&quot;HelloWorld&quot;</span><br><span class="hljs-comment">//forå¾ªç¯å®ç°</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=<span class="hljs-number">5</span>; i++) &#123;<br>System.out.println(<span class="hljs-string">&quot;HelloWorld&quot;</span>);<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;--------&quot;</span>);<br><span class="hljs-comment">//do...whileå¾ªç¯å®ç°</span><br><span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">do</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;HelloWorld&quot;</span>);<br>j++;<br>&#125;<span class="hljs-keyword">while</span>(j&lt;=<span class="hljs-number">5</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-2-ä¸‰ç§å¾ªç¯çš„åŒºåˆ«"><a href="#4-2-ä¸‰ç§å¾ªç¯çš„åŒºåˆ«" class="headerlink" title="4.2 ä¸‰ç§å¾ªç¯çš„åŒºåˆ«"></a>4.2 ä¸‰ç§å¾ªç¯çš„åŒºåˆ«</h3><ul><li>ä¸‰ç§å¾ªç¯çš„åŒºåˆ«<ul><li>forå¾ªç¯å’Œwhileå¾ªç¯å…ˆåˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œç„¶åå†³å®šæ˜¯å¦æ‰§è¡Œå¾ªç¯ä½“ï¼ˆå…ˆåˆ¤æ–­åæ‰§è¡Œï¼‰</li><li>doâ€¦whileå¾ªç¯å…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ï¼Œç„¶ååˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œæ˜¯å¦ç»§ç»­æ‰§è¡Œå¾ªç¯ä½“ï¼ˆå…ˆæ‰§è¡Œååˆ¤æ–­ï¼‰</li></ul></li><li>forå¾ªç¯å’Œwhileçš„åŒºåˆ«<ul><li>æ¡ä»¶æ§åˆ¶è¯­å¥æ‰€æ§åˆ¶çš„è‡ªå¢å˜é‡ï¼Œå› ä¸ºå½’å±forå¾ªç¯çš„è¯­æ³•ç»“æ„ä¸­ï¼Œåœ¨forå¾ªç¯ç»“æŸåï¼Œå°±ä¸èƒ½å†æ¬¡è¢«è®¿é—®åˆ°äº†</li><li>æ¡ä»¶æ§åˆ¶è¯­å¥æ‰€æ§åˆ¶çš„è‡ªå¢å˜é‡ï¼Œå¯¹äºwhileå¾ªç¯æ¥è¯´ä¸å½’å±å…¶è¯­æ³•ç»“æ„ä¸­ï¼Œåœ¨whileå¾ªç¯ç»“æŸåï¼Œè¯¥å˜é‡è¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨</li></ul></li><li>æ­»å¾ªç¯ï¼ˆæ— é™å¾ªç¯ï¼‰çš„ä¸‰ç§æ ¼å¼<ol><li>for(;;){}</li><li>while(true){}</li><li>do {} while(true);</li></ol></li></ul><h3 id="4-3-æ­»å¾ªç¯"><a href="#4-3-æ­»å¾ªç¯" class="headerlink" title="4.3 æ­»å¾ªç¯"></a>4.3 æ­»å¾ªç¯</h3><ul><li><p>æ­»å¾ªç¯æ ¼å¼        </p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">for</span>æ­»å¾ªç¯æ ¼å¼ :<br><span class="hljs-keyword">for</span>(;;)&#123;<br><br>&#125;<br><br><span class="hljs-keyword">while</span>æ­»å¾ªç¯æ ¼å¼ :<br><br><span class="hljs-type">while</span>(<span class="hljs-literal">true</span>)&#123;<br><br>&#125;<br><br><span class="hljs-keyword">do</span>..<span class="hljs-keyword">while</span>æ­»å¾ªç¯æ ¼å¼ :<br><br><span class="hljs-type">do</span>&#123;<br><br>&#125;<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>);<br></code></pre></td></tr></table></figure></li><li><p>æ­»å¾ªç¯æ¡ˆä¾‹</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">é—®é¢˜: æ­»å¾ªç¯æœ‰åº”ç”¨åœºæ™¯å—?</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">ä¾‹å¦‚: é”®ç›˜å½•å…¥ä¸€ä¸ª1-100ä¹‹é—´çš„æ•´æ•°</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">é¡¾è™‘: é”®ç›˜å½•å…¥æ˜¯ç”¨æˆ·æ“ä½œçš„, ç”¨æˆ·å°±å¯èƒ½ä¼šå‡ºç°ä¸€äº›è¯¯æ“ä½œçš„ç°è±¡</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">for(;;)&#123;</span><br><span class="hljs-comment">System.out.println(&quot;æˆ‘åœä¸ä¸‹æ¥äº†~&quot;);</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">while(true)&#123;</span><br><span class="hljs-comment">System.out.println(&quot;æˆ‘åœä¸ä¸‹æ¥äº†~&quot;);</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br><br>    <span class="hljs-keyword">do</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘åœä¸ä¸‹æ¥äº†~&quot;</span>);<br>    &#125;<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>);<br><br>    System.out.println(<span class="hljs-string">&quot;çœ‹çœ‹æˆ‘èƒ½è¢«æ‰§è¡Œå—?~&quot;</span>);<span class="hljs-comment">// æ— æ³•è®¿é—®çš„è¯­å¥</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-4-è·³è½¬æ§åˆ¶è¯­å¥"><a href="#4-4-è·³è½¬æ§åˆ¶è¯­å¥" class="headerlink" title="4.4 è·³è½¬æ§åˆ¶è¯­å¥"></a>4.4 è·³è½¬æ§åˆ¶è¯­å¥</h3><ul><li>è·³è½¬æ§åˆ¶è¯­å¥ï¼ˆbreakï¼‰<ul><li>è·³å‡ºå¾ªç¯ï¼Œç»“æŸå¾ªç¯</li></ul></li><li>è·³è½¬æ§åˆ¶è¯­å¥ï¼ˆcontinueï¼‰<ul><li>è·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼Œç»§ç»­ä¸‹æ¬¡å¾ªç¯</li></ul></li><li>æ³¨æ„ï¼š continueåªèƒ½åœ¨å¾ªç¯ä¸­è¿›è¡Œä½¿ç”¨ï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo1Continue</span> &#123;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">continue : è·³è¿‡æŸæ¬¡å¾ªç¯ä½“å†…å®¹çš„æ‰§è¡Œ</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">æ³¨æ„ï¼šä½¿ç”¨æ˜¯åŸºäºæ¡ä»¶æ§åˆ¶, åœ¨å¾ªç¯å†…éƒ¨ä½¿ç”¨.</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">éœ€æ±‚: æ¨¡æ‹Ÿç”µæ¢¯ä¸Šè¡Œçš„è¿‡ç¨‹ 1-24å±‚, 4å±‚ä¸åœ.</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">24</span>; i++)&#123;<br><span class="hljs-keyword">if</span>(i == <span class="hljs-number">4</span>)&#123;<br><span class="hljs-keyword">continue</span>;<br>&#125;<br>System.out.println(i + <span class="hljs-string">&quot;å±‚åˆ°äº†~&quot;</span>);<br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo2Break</span> &#123;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">break : ç»ˆæ­¢å¾ªç¯ä½“å†…å®¹çš„æ‰§è¡Œ</span><br><span class="hljs-comment">æ³¨æ„ï¼šä½¿ç”¨æ˜¯åŸºäºæ¡ä»¶æ§åˆ¶çš„</span><br><span class="hljs-comment">breakè¯­å¥åªèƒ½åœ¨å¾ªç¯å’Œswitchä¸­è¿›è¡Œä½¿ç”¨.</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">éœ€æ±‚: æ¨¡æ‹Ÿ20å²å·¥ä½œåˆ°80å², 60å²é€€ä¼‘.</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>; i &lt;= <span class="hljs-number">80</span>; i++)&#123;<br><span class="hljs-keyword">if</span>(i == <span class="hljs-number">60</span>)&#123;<br><span class="hljs-keyword">break</span>;<span class="hljs-comment">// ç»“æŸæ•´ä¸ªå¾ªç¯</span><br>&#125;<br>System.out.println(i + <span class="hljs-string">&quot;å²æ­£åœ¨ä¸Šç­&quot;</span>);<br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">éœ€æ±‚ï¼šç¨‹åºè¿è¡Œåï¼Œç”¨æˆ·å¯å¤šæ¬¡æŸ¥è¯¢æ˜ŸæœŸå¯¹åº”çš„å‡è‚¥è®¡åˆ’ï¼Œç›´åˆ°è¾“å…¥0ï¼Œç¨‹åºç»“æŸ</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">æ­¥éª¤:</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">1. ä¸æ˜ç¡®ç”¨æˆ·æ“ä½œå‡ æ¬¡, ä½¿ç”¨æ­»å¾ªç¯åŒ…è£¹ä¸šåŠ¡é€»è¾‘</span><br><span class="hljs-comment">2. åŒ¹é…åˆ°0çš„æ—¶å€™ï¼Œä½¿ç”¨breakç»“æŸå¾ªç¯æ­»å¾ªç¯</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span>&#123;<br><br>lo:<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥æ‚¨è¦æŸ¥çœ‹çš„æ˜ŸæœŸæ•°:&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;(å¦‚æ— éœ€ç»§ç»­æŸ¥çœ‹,è¯·è¾“å…¥0é€€å‡ºç¨‹åº)&quot;</span>);<br><br><span class="hljs-comment">// 1. é”®ç›˜å½•å…¥æ˜ŸæœŸæ•°æ®ï¼Œä½¿ç”¨å˜é‡æ¥æ”¶</span><br><span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><span class="hljs-type">int</span> <span class="hljs-variable">week</span> <span class="hljs-operator">=</span> sc.nextInt();<br><span class="hljs-comment">// 2. å¤šæƒ…å†µåˆ¤æ–­ï¼Œé‡‡ç”¨switchè¯­å¥å®ç°</span><br><span class="hljs-keyword">switch</span>(week)&#123;<br><span class="hljs-comment">// 3. åœ¨ä¸åŒçš„caseä¸­ï¼Œè¾“å‡ºå¯¹åº”çš„å‡è‚¥è®¡åˆ’</span><br><span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<br>System.out.println(<span class="hljs-string">&quot;æ„Ÿè°¢æ‚¨çš„ä½¿ç”¨&quot;</span>);<br><span class="hljs-keyword">break</span> lo;<br><span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>System.out.println(<span class="hljs-string">&quot;è·‘æ­¥&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>System.out.println(<span class="hljs-string">&quot;æ¸¸æ³³&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>System.out.println(<span class="hljs-string">&quot;æ…¢èµ°&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>System.out.println(<span class="hljs-string">&quot;åŠ¨æ„Ÿå•è½¦&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br>System.out.println(<span class="hljs-string">&quot;æ‹³å‡»&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br>System.out.println(<span class="hljs-string">&quot;çˆ¬å±±&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:<br>System.out.println(<span class="hljs-string">&quot;å¥½å¥½åƒä¸€é¡¿&quot;</span>);<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">default</span>:<br>System.out.println(<span class="hljs-string">&quot;æ‚¨çš„è¾“å…¥æœ‰è¯¯&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-Random"><a href="#5-Random" class="headerlink" title="5. Random"></a>5. Random</h2><h3 id="5-1-Randomäº§ç”Ÿéšæœºæ•°ï¼ˆæŒæ¡ï¼‰"><a href="#5-1-Randomäº§ç”Ÿéšæœºæ•°ï¼ˆæŒæ¡ï¼‰" class="headerlink" title="5.1 Randomäº§ç”Ÿéšæœºæ•°ï¼ˆæŒæ¡ï¼‰"></a>5.1 Randomäº§ç”Ÿéšæœºæ•°ï¼ˆæŒæ¡ï¼‰</h3><ul><li><p>æ¦‚è¿°ï¼š</p><ul><li>Randomç±»ä¼¼Scannerï¼Œä¹Ÿæ˜¯Javaæä¾›å¥½çš„APIï¼Œå†…éƒ¨æä¾›äº†äº§ç”Ÿéšæœºæ•°çš„åŠŸèƒ½<ul><li>APIåç»­è¯¾ç¨‹è¯¦ç»†è®²è§£ï¼Œç°åœ¨å¯ä»¥ç®€å•ç†è§£ä¸ºJavaå·²ç»å†™å¥½çš„ä»£ç </li></ul></li></ul></li><li><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li><p>å¯¼å…¥åŒ…</p><p>import java.util.Random;</p></li><li><p>åˆ›å»ºå¯¹è±¡</p><p>Random r &#x3D; new Random();</p></li><li><p>äº§ç”Ÿéšæœºæ•°</p><p>int num &#x3D; r.nextInt(10);</p><p>è§£é‡Šï¼š 10ä»£è¡¨çš„æ˜¯ä¸€ä¸ªèŒƒå›´ï¼Œå¦‚æœæ‹¬å·å†™10ï¼Œäº§ç”Ÿçš„éšæœºæ•°å°±æ˜¯0-9ï¼Œæ‹¬å·å†™20ï¼Œå‚æ•°çš„éšæœºæ•°åˆ™æ˜¯0-19</p></li></ol></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Random;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo1Random</span> &#123;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">Random : äº§ç”Ÿéšæœºæ•°</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">1. å¯¼åŒ…: import java.util.Random;</span><br><span class="hljs-comment">    å¯¼åŒ…çš„åŠ¨ä½œå¿…é¡»å‡ºç°åœ¨ç±»å®šä¹‰çš„ä¸Šé¢</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">2. åˆ›å»ºå¯¹è±¡ : Random r = new Random();</span><br><span class="hljs-comment">ä¸Šé¢è¿™ä¸ªæ ¼å¼é‡Œé¢ï¼Œr æ˜¯å˜é‡åï¼Œå¯ä»¥å˜ï¼Œå…¶ä»–çš„éƒ½ä¸å…è®¸å˜</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">3. è·å–éšæœºæ•° : int number = r.nextInt(10);//è·å–æ•°æ®çš„èŒƒå›´ï¼š[0,10) åŒ…æ‹¬0,ä¸åŒ…æ‹¬10</span><br><span class="hljs-comment">ä¸Šé¢è¿™ä¸ªæ ¼å¼é‡Œé¢ï¼Œnumberæ˜¯å˜é‡åï¼Œå¯ä»¥å˜ï¼Œæ•°å­—10å¯ä»¥å˜ã€‚å…¶ä»–çš„éƒ½ä¸å…è®¸å˜</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">éœ€æ±‚: äº§ç”Ÿéšæœºæ•°1-10ä¹‹é—´çš„</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br><span class="hljs-comment">// 2. åˆ›å»ºå¯¹è±¡</span><br><span class="hljs-type">Random</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>();<br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++)&#123;<br><span class="hljs-comment">// 3. è·å–éšæœºæ•°</span><br><span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> r.nextInt(<span class="hljs-number">10</span>) + <span class="hljs-number">1</span>;<span class="hljs-comment">// 1-10</span><br>System.out.println(num);<br>&#125;<br><br><br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-3-Randomç»ƒä¹ -çŒœæ•°å­—ï¼ˆåº”ç”¨ï¼‰"><a href="#5-3-Randomç»ƒä¹ -çŒœæ•°å­—ï¼ˆåº”ç”¨ï¼‰" class="headerlink" title="5.3 Randomç»ƒä¹ -çŒœæ•°å­—ï¼ˆåº”ç”¨ï¼‰"></a>5.3 Randomç»ƒä¹ -çŒœæ•°å­—ï¼ˆåº”ç”¨ï¼‰</h3><ul><li><p>éœ€æ±‚ï¼š</p><p>ç¨‹åºè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª1-100ä¹‹é—´çš„æ•°å­—ï¼Œä½¿ç”¨ç¨‹åºå®ç°çŒœå‡ºè¿™ä¸ªæ•°å­—æ˜¯å¤šå°‘ï¼Ÿ</p><p>å½“çŒœé”™çš„æ—¶å€™æ ¹æ®ä¸åŒæƒ…å†µç»™å‡ºç›¸åº”çš„æç¤º</p><p>A. å¦‚æœçŒœçš„æ•°å­—æ¯”çœŸå®æ•°å­—å¤§ï¼Œæç¤ºä½ çŒœçš„æ•°æ®å¤§äº†</p><p>B. å¦‚æœçŒœçš„æ•°å­—æ¯”çœŸå®æ•°å­—å°ï¼Œæç¤ºä½ çŒœçš„æ•°æ®å°äº†</p><p>C. å¦‚æœçŒœçš„æ•°å­—ä¸çœŸå®æ•°å­—ç›¸ç­‰ï¼Œæç¤ºæ­å–œä½ çŒœä¸­äº†</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">import</span> java.util.Random;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">éœ€æ±‚ï¼šç¨‹åºè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª1-100ä¹‹é—´çš„æ•°å­—ï¼Œä½¿ç”¨ç¨‹åºå®ç°çŒœå‡ºè¿™ä¸ªæ•°å­—æ˜¯å¤šå°‘ï¼Ÿ</span><br><span class="hljs-comment">å½“çŒœé”™çš„æ—¶å€™æ ¹æ®ä¸åŒæƒ…å†µç»™å‡ºç›¸åº”çš„æç¤º</span><br><span class="hljs-comment">å¦‚æœçŒœçš„æ•°å­—æ¯”çœŸå®æ•°å­—å¤§ï¼Œæç¤ºä½ çŒœçš„æ•°æ®å¤§äº†</span><br><span class="hljs-comment">å¦‚æœçŒœçš„æ•°å­—æ¯”çœŸå®æ•°å­—å°ï¼Œæç¤ºä½ çŒœçš„æ•°æ®å°äº†</span><br><span class="hljs-comment">å¦‚æœçŒœçš„æ•°å­—ä¸çœŸå®æ•°å­—ç›¸ç­‰ï¼Œæç¤ºæ­å–œä½ çŒœä¸­äº†</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">1. å‡†å¤‡Randomå’ŒScannerå¯¹è±¡, åˆ†åˆ«ç”¨äºäº§ç”Ÿéšæœºæ•°å’Œé”®ç›˜å½•å…¥</span><br><span class="hljs-comment">2. ä½¿ç”¨Randomäº§ç”Ÿä¸€ä¸ª1-100ä¹‹é—´çš„æ•°, ä½œä¸ºè¦çŒœçš„æ•°</span><br><span class="hljs-comment">3. é”®ç›˜å½•å…¥ç”¨æˆ·çŒœçš„çš„æ•°æ®</span><br><span class="hljs-comment">4. ä½¿ç”¨å½•å…¥çš„æ•°æ®(ç”¨æˆ·çŒœçš„æ•°æ®)å’Œéšæœºæ•°(è¦çŒœçš„æ•°æ®)è¿›è¡Œæ¯”è¾ƒ, å¹¶ç»™å‡ºæç¤º</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">5. ä»¥ä¸Šå†…å®¹éœ€è¦å¤šæ¬¡è¿›è¡Œ, ä½†æ— æ³•é¢„ä¼°ç”¨æˆ·è¾“å…¥å‡ æ¬¡å¯ä»¥çŒœæµ‹æ­£ç¡®, ä½¿ç”¨while(true)æ­»å¾ªç¯åŒ…è£¹</span><br><span class="hljs-comment">6. çŒœå¯¹ä¹‹å, breakç»“æŸ.</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br><span class="hljs-comment">// 1. å‡†å¤‡Randomå’ŒScannerå¯¹è±¡, åˆ†åˆ«ç”¨äºäº§ç”Ÿéšæœºæ•°å’Œé”®ç›˜å½•å…¥</span><br><span class="hljs-type">Random</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>();<br><span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br><span class="hljs-comment">// 2. ä½¿ç”¨Randomäº§ç”Ÿä¸€ä¸ª1-100ä¹‹é—´çš„æ•°, ä½œä¸ºè¦çŒœçš„æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-variable">randomNum</span> <span class="hljs-operator">=</span> r.nextInt(<span class="hljs-number">100</span>) + <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">// 5. ä»¥ä¸Šå†…å®¹éœ€è¦å¤šæ¬¡è¿›è¡Œ, ä½†æ— æ³•é¢„ä¼°ç”¨æˆ·è¾“å…¥å‡ æ¬¡å¯ä»¥çŒœæµ‹æ­£ç¡®, ä½¿ç”¨while(true)æ­»å¾ªç¯åŒ…è£¹</span><br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br><span class="hljs-comment">// 3. é”®ç›˜å½•å…¥ç”¨æˆ·çŒœçš„çš„æ•°æ®</span><br>System.out.println(<span class="hljs-string">&quot;è¯·è¾“å…¥æ‚¨çŒœçš„æ•°æ®:&quot;</span>);<br><span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> sc.nextInt();<br><span class="hljs-comment">// 4. ä½¿ç”¨å½•å…¥çš„æ•°æ®(ç”¨æˆ·çŒœçš„æ•°æ®)å’Œéšæœºæ•°(è¦çŒœçš„æ•°æ®)è¿›è¡Œæ¯”è¾ƒ, å¹¶ç»™å‡ºæç¤º</span><br><span class="hljs-keyword">if</span>(num &gt; randomNum)&#123;<br>System.out.println(<span class="hljs-string">&quot;çŒœå¤§äº†&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(num &lt; randomNum)&#123;<br>System.out.println(<span class="hljs-string">&quot;çŒœå°äº†&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-comment">// 6. çŒœå¯¹ä¹‹å, breakç»“æŸ.</span><br>System.out.println(<span class="hljs-string">&quot;æ­å–œ,çŒœä¸­äº†&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><br>System.out.println(<span class="hljs-string">&quot;æ„Ÿè°¢æ‚¨çš„ä½¿ç”¨&quot;</span>);<br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å’©ç³»æ–¹æ³•?</title>
    <link href="/Hexo/2021/03/21/%E6%96%B9%E6%B3%95/"/>
    <url>/Hexo/2021/03/21/%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="1-æ–¹æ³•æ¦‚è¿°"><a href="#1-æ–¹æ³•æ¦‚è¿°" class="headerlink" title="1. æ–¹æ³•æ¦‚è¿°"></a>1. æ–¹æ³•æ¦‚è¿°</h2><h3 id="1-1-æ–¹æ³•çš„æ¦‚å¿µ"><a href="#1-1-æ–¹æ³•çš„æ¦‚å¿µ" class="headerlink" title="1.1 æ–¹æ³•çš„æ¦‚å¿µ"></a>1.1 æ–¹æ³•çš„æ¦‚å¿µ</h3><p>â€‹    æ–¹æ³•ï¼ˆmethodï¼‰æ˜¯å°†å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ä»£ç å—ç»„ç»‡æˆä¸ºä¸€ä¸ªæ•´ä½“ï¼Œä½¿å…¶å…·æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„ä»£ç é›†</p><ul><li>æ³¨æ„ï¼š<ul><li>æ–¹æ³•å¿…é¡»å…ˆåˆ›å»ºæ‰å¯ä»¥ä½¿ç”¨ï¼Œè¯¥è¿‡ç¨‹æˆä¸ºæ–¹æ³•å®šä¹‰</li><li>æ–¹æ³•åˆ›å»ºåå¹¶ä¸æ˜¯ç›´æ¥å¯ä»¥è¿è¡Œçš„ï¼Œéœ€è¦æ‰‹åŠ¨ä½¿ç”¨åï¼Œæ‰æ‰§è¡Œï¼Œè¯¥è¿‡ç¨‹æˆä¸ºæ–¹æ³•è°ƒç”¨</li></ul></li></ul><h2 id="2-æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨"><a href="#2-æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨" class="headerlink" title="2. æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨"></a>2. æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨</h2><h3 id="2-1-æ— å‚æ•°æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨"><a href="#2-1-æ— å‚æ•°æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨" class="headerlink" title="2.1 æ— å‚æ•°æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨"></a>2.1 æ— å‚æ•°æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨</h3><ul><li><p>å®šä¹‰æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> æ–¹æ³•å (   ) &#123;<br><span class="hljs-comment">// æ–¹æ³•ä½“;</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>èŒƒä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span> <span class="hljs-params">(    )</span> &#123;<br><span class="hljs-comment">// æ–¹æ³•ä½“;</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è°ƒç”¨æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">æ–¹æ³•å();<br></code></pre></td></tr></table></figure></li><li><p>èŒƒä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">method();<br></code></pre></td></tr></table></figure></li><li><p>æ³¨æ„ï¼š</p><p>â€‹    æ–¹æ³•å¿…é¡»å…ˆå®šä¹‰ï¼Œåè°ƒç”¨ï¼Œå¦åˆ™ç¨‹åºå°†æŠ¥é”™</p></li></ul><h3 id="2-2-æ–¹æ³•çš„è°ƒç”¨è¿‡ç¨‹"><a href="#2-2-æ–¹æ³•çš„è°ƒç”¨è¿‡ç¨‹" class="headerlink" title="2.2 æ–¹æ³•çš„è°ƒç”¨è¿‡ç¨‹"></a>2.2 æ–¹æ³•çš„è°ƒç”¨è¿‡ç¨‹</h3><ul><li>æ€»ç»“ï¼šæ¯ä¸ªæ–¹æ³•åœ¨è¢«è°ƒç”¨æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šè¿›å…¥æ ˆå†…å­˜ï¼Œå¹¶ä¸”æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œæ–¹æ³•å†…éƒ¨ä»£ç è°ƒç”¨å®Œæ¯•ä¹‹åï¼Œä¼šä»æ ˆå†…å­˜ä¸­å¼¹æ ˆæ¶ˆå¤±ã€‚</li></ul><h3 id="2-3-æ–¹æ³•ç»ƒä¹ -å¥‡å¶æ•°åˆ¤æ–­"><a href="#2-3-æ–¹æ³•ç»ƒä¹ -å¥‡å¶æ•°åˆ¤æ–­" class="headerlink" title="2.3 æ–¹æ³•ç»ƒä¹ -å¥‡å¶æ•°åˆ¤æ–­"></a>2.3 æ–¹æ³•ç»ƒä¹ -å¥‡å¶æ•°åˆ¤æ–­</h3><ul><li>éœ€æ±‚ï¼šåˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°</li><li>ä»£ç ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo1Method</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        å¸¦å‚æ•°æ–¹æ³•çš„å®šä¹‰æ ¼å¼:</span><br><span class="hljs-comment">                public static void æ–¹æ³•å  ( å‚æ•° )  &#123; â€¦ â€¦ &#125;</span><br><span class="hljs-comment">                public static void æ–¹æ³•å  ( æ•°æ®ç±»å‹ å˜é‡å )  &#123; â€¦ â€¦ &#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        å¸¦å‚æ•°æ–¹æ³•çš„è°ƒç”¨æ ¼å¼:</span><br><span class="hljs-comment">                æ–¹æ³•å ( å‚æ•° ) ;</span><br><span class="hljs-comment">                æ–¹æ³•å ( å˜é‡å/å¸¸é‡å€¼ ) ;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        tips: å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ª, ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª.</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        éœ€æ±‚: åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        isEvenNumber(<span class="hljs-number">10</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">isEvenNumber</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span>&#123;<br>        <span class="hljs-keyword">if</span>(num % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;å¶æ•°&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;å¥‡æ•°&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-å¸¦å‚æ•°æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨"><a href="#3-å¸¦å‚æ•°æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨" class="headerlink" title="3. å¸¦å‚æ•°æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨"></a>3. å¸¦å‚æ•°æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨</h2><h3 id="3-1-å¸¦å‚æ•°æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨"><a href="#3-1-å¸¦å‚æ•°æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨" class="headerlink" title="3.1 å¸¦å‚æ•°æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨"></a>3.1 å¸¦å‚æ•°æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨</h3><ul><li><p>å®šä¹‰æ ¼å¼ï¼š</p><p>å‚æ•°ï¼šç”±æ•°æ®ç±»å‹å’Œå˜é‡åç»„æˆ -  æ•°æ®ç±»å‹ å˜é‡å</p><p>å‚æ•°èŒƒä¾‹ï¼šint a</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> æ–¹æ³•å (å‚æ•°<span class="hljs-number">1</span>) &#123;<br>æ–¹æ³•ä½“;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> æ–¹æ³•å (å‚æ•°<span class="hljs-number">1</span>, å‚æ•°<span class="hljs-number">2</span>, å‚æ•°<span class="hljs-number">3.</span>..) &#123;<br>æ–¹æ³•ä½“;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>èŒƒä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">isEvenNumber</span><span class="hljs-params">(<span class="hljs-type">int</span> number)</span>&#123;<br>    ...<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getMax</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>æ³¨æ„ï¼š</p><pre><code class="hljs">  æ–¹æ³•å®šä¹‰æ—¶ï¼Œå‚æ•°ä¸­çš„æ•°æ®ç±»å‹ä¸å˜é‡åéƒ½ä¸èƒ½ç¼ºå°‘ï¼Œç¼ºå°‘ä»»æ„ä¸€ä¸ªç¨‹åºå°†æŠ¥é”™      æ–¹æ³•å®šä¹‰æ—¶ï¼Œå¤šä¸ªå‚æ•°ä¹‹é—´ä½¿ç”¨é€—å·( ï¼Œ)åˆ†éš”</code></pre></li></ul></li><li><p>è°ƒç”¨æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">æ–¹æ³•å(å‚æ•°)ï¼›<br><br>æ–¹æ³•å(å‚æ•°<span class="hljs-number">1</span>,å‚æ•°<span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure></li><li><p>èŒƒä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">isEvenNumber(<span class="hljs-number">10</span>);<br><br>getMax(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>);<br></code></pre></td></tr></table></figure><ul><li>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå‚æ•°çš„æ•°é‡ä¸ç±»å‹å¿…é¡»ä¸æ–¹æ³•å®šä¹‰ä¸­çš„è®¾ç½®ç›¸åŒ¹é…ï¼Œå¦åˆ™ç¨‹åºå°†æŠ¥é”™</li></ul></li></ul><h3 id="3-2-å½¢å‚å’Œå®å‚"><a href="#3-2-å½¢å‚å’Œå®å‚" class="headerlink" title="3.2 å½¢å‚å’Œå®å‚"></a>3.2 å½¢å‚å’Œå®å‚</h3><ol><li>å½¢å‚ï¼šæ–¹æ³•å®šä¹‰ä¸­çš„å‚æ•°</li></ol><p>â€‹          ç­‰åŒäºå˜é‡å®šä¹‰æ ¼å¼ï¼Œä¾‹å¦‚ï¼šint number</p><ol start="2"><li>å®å‚ï¼šæ–¹æ³•è°ƒç”¨ä¸­çš„å‚æ•°</li></ol><p>â€‹          ç­‰åŒäºä½¿ç”¨å˜é‡æˆ–å¸¸é‡ï¼Œä¾‹å¦‚ï¼š 10  number</p><h3 id="3-3-å¸¦å‚æ•°æ–¹æ³•çš„ç»ƒä¹ -æ‰“å°n-mä¹‹é—´æ‰€æœ‰çš„å¥‡æ•°"><a href="#3-3-å¸¦å‚æ•°æ–¹æ³•çš„ç»ƒä¹ -æ‰“å°n-mä¹‹é—´æ‰€æœ‰çš„å¥‡æ•°" class="headerlink" title="3.3 å¸¦å‚æ•°æ–¹æ³•çš„ç»ƒä¹ -æ‰“å°n-mä¹‹é—´æ‰€æœ‰çš„å¥‡æ•°"></a>3.3 å¸¦å‚æ•°æ–¹æ³•çš„ç»ƒä¹ -æ‰“å°n-mä¹‹é—´æ‰€æœ‰çš„å¥‡æ•°</h3><ul><li><p>éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªæ–¹æ³•ï¼ˆprintï¼‰ ç”¨äºæ‰“å° n åˆ° m ä¹‹é—´æ‰€æœ‰çš„å¥‡æ•°</p></li><li><p>æ€è·¯ï¼š</p><p>â€‹    1ï¼šå®šä¹‰æ–¹æ³•ï¼Œåç§°ä¸ºprint<br>â€‹        2ï¼šä¸ºæ–¹æ³•æ·»åŠ ä¸¤ä¸ªintç±»å‹çš„å½¢å‚ï¼Œå‡†å¤‡æ¥å—è°ƒç”¨è€…ä¼ é€’è¿‡æ¥çš„å®å‚<br>â€‹        3ï¼šæ–¹æ³•ä¸­è®¾è®¡forå¾ªç¯ï¼Œå¾ªç¯ä»nå¼€å§‹ï¼Œåˆ°mç»“æŸ<br>â€‹        4ï¼šå¾ªç¯ä¸­åŠ å…¥ifåˆ¤æ–­ï¼Œæ˜¯å¥‡æ•°ï¼Œåˆ™æ‰“å°<br>â€‹        5ï¼šmainæ–¹æ³•ä¸­è°ƒç”¨printæ–¹æ³•ï¼Œä¼ å…¥ä¸¤ä¸ªå®é™…å‚æ•°</p></li><li><p>ä»£ç ï¼š</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.method2;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo2Method</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 5ï¼šmainæ–¹æ³•ä¸­è°ƒç”¨printæ–¹æ³•ï¼Œä¼ å…¥ä¸¤ä¸ªå®é™…å‚æ•°</span><br>        print(<span class="hljs-number">20</span>,<span class="hljs-number">10</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//1ï¼šå®šä¹‰æ–¹æ³•ï¼Œåç§°ä¸ºprint</span><br>    <span class="hljs-comment">// 2ï¼šä¸ºæ–¹æ³•æ·»åŠ ä¸¤ä¸ªintç±»å‹çš„å½¢å‚ï¼Œå‡†å¤‡æ¥å—è°ƒç”¨è€…ä¼ é€’è¿‡æ¥çš„å®å‚</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span>&#123;<br>        System.out.println(n + <span class="hljs-string">&quot;åˆ°&quot;</span> + m + <span class="hljs-string">&quot;ä¹‹é—´çš„å¥‡æ•°ä¸º:&quot;</span>);<br>        <span class="hljs-comment">// 3ï¼šæ–¹æ³•ä¸­è®¾è®¡forå¾ªç¯ï¼Œå¾ªç¯ä»nå¼€å§‹ï¼Œåˆ°mç»“æŸ</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>; i &lt;= <span class="hljs-number">10</span>; i++)&#123;<br>            <span class="hljs-comment">// 4ï¼šå¾ªç¯ä¸­åŠ å…¥ifåˆ¤æ–­ï¼Œæ˜¯å¥‡æ•°ï¼Œåˆ™æ‰“å°</span><br>            <span class="hljs-keyword">if</span>(i % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>)&#123;<br>                System.out.println(i);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-å¸¦è¿”å›å€¼æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨"><a href="#4-å¸¦è¿”å›å€¼æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨" class="headerlink" title="4. å¸¦è¿”å›å€¼æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨"></a>4. å¸¦è¿”å›å€¼æ–¹æ³•çš„å®šä¹‰å’Œè°ƒç”¨</h2><h3 id="4-1-å¸¦è¿”å›å€¼æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨ï¼ˆæŒæ¡ï¼‰"><a href="#4-1-å¸¦è¿”å›å€¼æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨ï¼ˆæŒæ¡ï¼‰" class="headerlink" title="4.1 å¸¦è¿”å›å€¼æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨ï¼ˆæŒæ¡ï¼‰"></a>4.1 å¸¦è¿”å›å€¼æ–¹æ³•å®šä¹‰å’Œè°ƒç”¨ï¼ˆæŒæ¡ï¼‰</h3><ul><li><p>å®šä¹‰æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> æ•°æ®ç±»å‹ æ–¹æ³•å ( å‚æ•° ) &#123; <br><span class="hljs-keyword">return</span> æ•°æ® ;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>èŒƒä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEvenNumber</span><span class="hljs-params">( <span class="hljs-type">int</span> number )</span> &#123;           <br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> ;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMax</span><span class="hljs-params">( <span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b )</span> &#123;<br><span class="hljs-keyword">return</span>  <span class="hljs-number">100</span> ;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼š<ul><li>æ–¹æ³•å®šä¹‰æ—¶returnåé¢çš„è¿”å›å€¼ä¸æ–¹æ³•å®šä¹‰ä¸Šçš„æ•°æ®ç±»å‹è¦åŒ¹é…ï¼Œå¦åˆ™ç¨‹åºå°†æŠ¥é”™</li></ul></li></ul></li><li><p>è°ƒç”¨æ ¼å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">æ–¹æ³•å ( å‚æ•° ) ;<br>æ•°æ®ç±»å‹ å˜é‡å = æ–¹æ³•å ( å‚æ•° ) ;<br></code></pre></td></tr></table></figure></li><li><p>èŒƒä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">isEvenNumber ( <span class="hljs-number">5</span> ) ;<br><span class="hljs-type">boolean</span>  <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span>  isEvenNumber ( <span class="hljs-number">5</span> ); <br></code></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼š<ul><li>æ–¹æ³•çš„è¿”å›å€¼é€šå¸¸ä¼šä½¿ç”¨å˜é‡æ¥æ”¶ï¼Œå¦åˆ™è¯¥è¿”å›å€¼å°†æ— æ„ä¹‰</li></ul></li></ul></li></ul><h3 id="4-2-å¸¦è¿”å›å€¼æ–¹æ³•çš„ç»ƒä¹ -æ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å€¼-åº”ç”¨"><a href="#4-2-å¸¦è¿”å›å€¼æ–¹æ³•çš„ç»ƒä¹ -æ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å€¼-åº”ç”¨" class="headerlink" title="4.2 å¸¦è¿”å›å€¼æ–¹æ³•çš„ç»ƒä¹ -æ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å€¼(åº”ç”¨)"></a>4.2 å¸¦è¿”å›å€¼æ–¹æ³•çš„ç»ƒä¹ -æ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å€¼(åº”ç”¨)</h3><ul><li><p>éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªæ–¹æ³•å¯ä»¥è·å–ä¸¤ä¸ªæ•°çš„è¾ƒå¤§å€¼ï¼Œæ•°æ®æ¥è‡ªäºå‚æ•°</p></li><li><p>æ€è·¯ï¼š</p><ol><li>å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå£°æ˜ä¸¤ä¸ªå½¢å‚æ¥æ”¶è®¡ç®—çš„æ•°å€¼ï¼Œæ±‚å‡ºç»“æœå¹¶è¿”å›</li><li>ä½¿ç”¨ if è¯­å¥ å¾—å‡º a å’Œ b ä¹‹é—´çš„æœ€å¤§å€¼ï¼Œæ ¹æ®æƒ…å†µreturnå…·ä½“ç»“æœ</li><li>åœ¨main()æ–¹æ³•ä¸­è°ƒç”¨å®šä¹‰å¥½çš„æ–¹æ³•å¹¶ä½¿ç”¨ ã€ å˜é‡ä¿å­˜ ã€‘</li></ol></li><li><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-comment">/*</span><br><span class="hljs-comment">        éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªæ–¹æ³•å¯ä»¥è·å–ä¸¤ä¸ªæ•°çš„è¾ƒå¤§å€¼ï¼Œæ•°æ®æ¥è‡ªäºå‚æ•°</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        1. å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå£°æ˜ä¸¤ä¸ªå½¢å‚æ¥æ”¶è®¡ç®—çš„æ•°å€¼ï¼Œæ±‚å‡ºç»“æœå¹¶è¿”å›</span><br><span class="hljs-comment">        2. ä½¿ç”¨ if è¯­å¥ å¾—å‡º a å’Œ b ä¹‹é—´çš„æœ€å¤§å€¼ï¼Œæ ¹æ®æƒ…å†µreturnå…·ä½“ç»“æœ</span><br><span class="hljs-comment">        3. åœ¨main()æ–¹æ³•ä¸­è°ƒç”¨å®šä¹‰å¥½çš„æ–¹æ³•å¹¶ä½¿ç”¨ ã€ å˜é‡ä¿å­˜ ã€‘</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 3. åœ¨main()æ–¹æ³•ä¸­è°ƒç”¨å®šä¹‰å¥½çš„æ–¹æ³•å¹¶ä½¿ç”¨ ã€ å˜é‡ä¿å­˜ ã€‘</span><br>        System.out.println(getMax(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>));  <span class="hljs-comment">// è¾“å‡ºè°ƒç”¨</span><br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> getMax(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>);<br>        System.out.println(result);<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= result; i++)&#123;<br>            System.out.println(<span class="hljs-string">&quot;HelloWorld&quot;</span>);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-comment">// æ–¹æ³•å¯ä»¥è·å–ä¸¤ä¸ªæ•°çš„è¾ƒå¤§å€¼</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMax</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>&#123;<br>        <span class="hljs-keyword">if</span>(a &gt; b)&#123;<br>            <span class="hljs-keyword">return</span> a;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">return</span> b;<br>        &#125;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul><h2 id="5-æ–¹æ³•çš„æ³¨æ„äº‹é¡¹"><a href="#5-æ–¹æ³•çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="5. æ–¹æ³•çš„æ³¨æ„äº‹é¡¹"></a>5. æ–¹æ³•çš„æ³¨æ„äº‹é¡¹</h2><h3 id="5-1-æ–¹æ³•çš„é€šç”¨æ ¼å¼ï¼ˆæŒæ¡ï¼‰"><a href="#5-1-æ–¹æ³•çš„é€šç”¨æ ¼å¼ï¼ˆæŒæ¡ï¼‰" class="headerlink" title="5.1 æ–¹æ³•çš„é€šç”¨æ ¼å¼ï¼ˆæŒæ¡ï¼‰"></a>5.1 æ–¹æ³•çš„é€šç”¨æ ¼å¼ï¼ˆæŒæ¡ï¼‰</h3><ul><li><p>æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°) &#123;<br>   æ–¹æ³•ä½“; <br>   <span class="hljs-keyword">return</span> æ•°æ® ;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è§£é‡Šï¼š</p><ul><li><p>public static     ä¿®é¥°ç¬¦ï¼Œç›®å‰å…ˆè®°ä½è¿™ä¸ªæ ¼å¼</p><p>è¿”å›å€¼ç±»å‹    æ–¹æ³•æ“ä½œå®Œæ¯•ä¹‹åè¿”å›çš„æ•°æ®çš„æ•°æ®ç±»å‹</p><p>â€‹            å¦‚æœæ–¹æ³•æ“ä½œå®Œæ¯•ï¼Œæ²¡æœ‰æ•°æ®è¿”å›ï¼Œè¿™é‡Œå†™voidï¼Œè€Œä¸”æ–¹æ³•ä½“ä¸­ä¸€èˆ¬ä¸å†™return</p><p> æ–¹æ³•å        è°ƒç”¨æ–¹æ³•æ—¶å€™ä½¿ç”¨çš„æ ‡è¯†</p><p> å‚æ•°        ç”±æ•°æ®ç±»å‹å’Œå˜é‡åç»„æˆï¼Œå¤šä¸ªå‚æ•°ä¹‹é—´ç”¨é€—å·éš”å¼€</p><p> æ–¹æ³•ä½“        å®ŒæˆåŠŸèƒ½çš„ä»£ç å—</p><p> return        å¦‚æœæ–¹æ³•æ“ä½œå®Œæ¯•ï¼Œæœ‰æ•°æ®è¿”å›ï¼Œç”¨äºæŠŠæ•°æ®è¿”å›ç»™è°ƒç”¨è€…</p></li></ul></li><li><p>å®šä¹‰æ–¹æ³•æ—¶ï¼Œè¦åšåˆ°ä¸¤ä¸ªæ˜ç¡®</p><ul><li>æ˜ç¡®è¿”å›å€¼ç±»å‹ï¼šä¸»è¦æ˜¯æ˜ç¡®æ–¹æ³•æ“ä½œå®Œæ¯•ä¹‹åæ˜¯å¦æœ‰æ•°æ®è¿”å›ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå†™voidï¼›å¦‚æœæœ‰ï¼Œå†™å¯¹åº”çš„æ•°æ®ç±»å‹</li><li>æ˜ç¡®å‚æ•°ï¼šä¸»è¦æ˜¯æ˜ç¡®å‚æ•°çš„ç±»å‹å’Œæ•°é‡</li></ul></li><li><p>è°ƒç”¨æ–¹æ³•æ—¶çš„æ³¨æ„ï¼š</p><ul><li>voidç±»å‹çš„æ–¹æ³•ï¼Œç›´æ¥è°ƒç”¨å³å¯</li><li>évoidç±»å‹çš„æ–¹æ³•ï¼Œæ¨èç”¨å˜é‡æ¥æ”¶è°ƒç”¨</li></ul></li></ul><h3 id="5-2-æ–¹æ³•çš„æ³¨æ„äº‹é¡¹"><a href="#5-2-æ–¹æ³•çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="5.2 æ–¹æ³•çš„æ³¨æ„äº‹é¡¹"></a>5.2 æ–¹æ³•çš„æ³¨æ„äº‹é¡¹</h3><ul><li><p>æ–¹æ³•ä¸èƒ½åµŒå¥—å®šä¹‰</p><ul><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodOne</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodTwo</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-comment">// è¿™é‡Œä¼šå¼•å‘ç¼–è¯‘é”™è¯¯!!!</span><br>    &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li><li><p>voidè¡¨ç¤ºæ— è¿”å›å€¼ï¼Œå¯ä»¥çœç•¥returnï¼Œä¹Ÿå¯ä»¥å•ç‹¬çš„ä¹¦å†™returnï¼Œåé¢ä¸åŠ æ•°æ®</p><ul><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">methodTwo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//return 100; ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºæ²¡æœ‰å…·ä½“è¿”å›å€¼ç±»å‹</span><br>        <span class="hljs-keyword">return</span>;<br>        <span class="hljs-comment">//System.out.println(100); returnè¯­å¥åé¢ä¸èƒ½è·Ÿæ•°æ®æˆ–ä»£ç </span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="6-æ–¹æ³•é‡è½½"><a href="#6-æ–¹æ³•é‡è½½" class="headerlink" title="6. æ–¹æ³•é‡è½½"></a>6. æ–¹æ³•é‡è½½</h2><h3 id="6-1-æ–¹æ³•é‡è½½"><a href="#6-1-æ–¹æ³•é‡è½½" class="headerlink" title="6.1 æ–¹æ³•é‡è½½"></a>6.1 æ–¹æ³•é‡è½½</h3><ul><li><p>æ–¹æ³•é‡è½½æ¦‚å¿µ</p><p>æ–¹æ³•é‡è½½æŒ‡åŒä¸€ä¸ªç±»ä¸­å®šä¹‰çš„å¤šä¸ªæ–¹æ³•ä¹‹é—´çš„å…³ç³»ï¼Œæ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„å¤šä¸ªæ–¹æ³•ç›¸äº’æ„æˆé‡è½½</p><ul><li>å¤šä¸ªæ–¹æ³•åœ¨åŒä¸€ä¸ªç±»ä¸­</li><li>å¤šä¸ªæ–¹æ³•å…·æœ‰ç›¸åŒçš„æ–¹æ³•å</li><li>å¤šä¸ªæ–¹æ³•çš„å‚æ•°ä¸ç›¸åŒï¼Œç±»å‹ä¸åŒæˆ–è€…æ•°é‡ä¸åŒ</li></ul></li><li><p>æ³¨æ„ï¼š</p><ul><li>é‡è½½ä»…å¯¹åº”æ–¹æ³•çš„å®šä¹‰ï¼Œä¸æ–¹æ³•çš„è°ƒç”¨æ— å…³ï¼Œè°ƒç”¨æ–¹å¼å‚ç…§æ ‡å‡†æ ¼å¼</li><li>é‡è½½ä»…é’ˆå¯¹åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•çš„åç§°ä¸å‚æ•°è¿›è¡Œè¯†åˆ«ï¼Œä¸è¿”å›å€¼æ— å…³ï¼Œæ¢å¥è¯è¯´ä¸èƒ½é€šè¿‡è¿”å›å€¼æ¥åˆ¤å®šä¸¤ä¸ªæ–¹æ³•æ˜¯å¦ç›¸äº’æ„æˆé‡è½½</li></ul></li><li><p>æ­£ç¡®èŒƒä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodDemo</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br>    <span class="hljs-comment">//æ–¹æ³•ä½“</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">double</span> a)</span> &#123;<br>    <span class="hljs-comment">//æ–¹æ³•ä½“</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodDemo</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">float</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br>    <span class="hljs-comment">//æ–¹æ³•ä½“</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> a , <span class="hljs-type">int</span> b)</span> &#123;<br>    <span class="hljs-comment">//æ–¹æ³•ä½“</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é”™è¯¯èŒƒä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodDemo</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br>    <span class="hljs-comment">//æ–¹æ³•ä½“</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123; <span class="hljs-comment">/*é”™è¯¯åŸå› ï¼šé‡è½½ä¸è¿”å›å€¼æ— å…³*/</span><br>    <span class="hljs-comment">//æ–¹æ³•ä½“</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodDemo01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br>        <span class="hljs-comment">//æ–¹æ³•ä½“</span><br>    &#125;<br>&#125; <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodDemo02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">double</span> a)</span> &#123; <span class="hljs-comment">/*é”™è¯¯åŸå› ï¼šè¿™æ˜¯ä¸¤ä¸ªç±»çš„ä¸¤ä¸ªfnæ–¹æ³•*/</span><br>        <span class="hljs-comment">//æ–¹æ³•ä½“</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="6-2-æ–¹æ³•é‡è½½ç»ƒä¹ "><a href="#6-2-æ–¹æ³•é‡è½½ç»ƒä¹ " class="headerlink" title="6.2 æ–¹æ³•é‡è½½ç»ƒä¹ "></a>6.2 æ–¹æ³•é‡è½½ç»ƒä¹ </h3><ul><li><p>éœ€æ±‚ï¼šä½¿ç”¨æ–¹æ³•é‡è½½çš„æ€æƒ³ï¼Œè®¾è®¡æ¯”è¾ƒä¸¤ä¸ªæ•´æ•°æ˜¯å¦ç›¸åŒçš„æ–¹æ³•ï¼Œå…¼å®¹å…¨æ•´æ•°ç±»å‹ï¼ˆbyte,short,int,longï¼‰ </p></li><li><p>æ€è·¯ï¼š</p><p>â€‹    â‘ å®šä¹‰æ¯”è¾ƒä¸¤ä¸ªæ•°å­—çš„æ˜¯å¦ç›¸åŒçš„æ–¹æ³•compare()æ–¹æ³•ï¼Œå‚æ•°é€‰æ‹©ä¸¤ä¸ªintå‹å‚æ•°</p><p>â€‹    â‘¡å®šä¹‰å¯¹åº”çš„é‡è½½æ–¹æ³•ï¼Œå˜æ›´å¯¹åº”çš„å‚æ•°ç±»å‹ï¼Œå‚æ•°å˜æ›´ä¸ºä¸¤ä¸ªlongå‹å‚æ•°</p><p>â€‹    â‘¢å®šä¹‰æ‰€æœ‰çš„é‡è½½æ–¹æ³•ï¼Œä¸¤ä¸ªbyteç±»å‹ä¸ä¸¤ä¸ªshortç±»å‹å‚æ•° </p><p>â€‹    â‘£å®Œæˆæ–¹æ³•çš„è°ƒç”¨ï¼Œæµ‹è¯•è¿è¡Œç»“æœ </p></li><li><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//è°ƒç”¨æ–¹æ³•</span><br>        System.out.println(compare(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>));<br>        System.out.println(compare((<span class="hljs-type">byte</span>) <span class="hljs-number">10</span>, (<span class="hljs-type">byte</span>) <span class="hljs-number">20</span>));<br>        System.out.println(compare((<span class="hljs-type">short</span>) <span class="hljs-number">10</span>, (<span class="hljs-type">short</span>) <span class="hljs-number">20</span>));<br>        System.out.println(compare(<span class="hljs-number">10L</span>, <span class="hljs-number">20L</span>));<br>    &#125;<br><br>    <span class="hljs-comment">//int</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;int&quot;</span>);<br>        <span class="hljs-type">return</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span>= b;<br>    &#125;<br><br>    <span class="hljs-comment">//byte</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(<span class="hljs-type">byte</span> a, <span class="hljs-type">byte</span> b)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;byte&quot;</span>);<br>        <span class="hljs-type">return</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span>= b;<br>    &#125;<br><br>    <span class="hljs-comment">//short</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(<span class="hljs-type">short</span> a, <span class="hljs-type">short</span> b)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;short&quot;</span>);<br>        <span class="hljs-type">return</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span>= b;<br>    &#125;<br><br>    <span class="hljs-comment">//long</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(<span class="hljs-type">long</span> a, <span class="hljs-type">long</span> b)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;long&quot;</span>);<br>        <span class="hljs-type">return</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span>= b;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="7-æ–¹æ³•çš„å‚æ•°ä¼ é€’"><a href="#7-æ–¹æ³•çš„å‚æ•°ä¼ é€’" class="headerlink" title="7. æ–¹æ³•çš„å‚æ•°ä¼ é€’"></a>7. æ–¹æ³•çš„å‚æ•°ä¼ é€’</h2><h3 id="7-1-æ–¹æ³•å‚æ•°ä¼ é€’åŸºæœ¬ç±»å‹ï¼ˆç†è§£ï¼‰"><a href="#7-1-æ–¹æ³•å‚æ•°ä¼ é€’åŸºæœ¬ç±»å‹ï¼ˆç†è§£ï¼‰" class="headerlink" title="7.1 æ–¹æ³•å‚æ•°ä¼ é€’åŸºæœ¬ç±»å‹ï¼ˆç†è§£ï¼‰"></a>7.1 æ–¹æ³•å‚æ•°ä¼ é€’åŸºæœ¬ç±»å‹ï¼ˆç†è§£ï¼‰</h3><ul><li><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.param;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test1</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">         æ–¹æ³•å‚æ•°ä¼ é€’ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ :</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                ä¼ å…¥æ–¹æ³•ä¸­çš„, æ˜¯å…·ä½“çš„æ•°å€¼.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>        System.out.println(<span class="hljs-string">&quot;è°ƒç”¨changeæ–¹æ³•å‰:&quot;</span> + number);<br>        change(number);<br>        System.out.println(<span class="hljs-string">&quot;è°ƒç”¨changeæ–¹æ³•å:&quot;</span> + number);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">change</span><span class="hljs-params">(<span class="hljs-type">int</span> number)</span> &#123;<br>        number = <span class="hljs-number">200</span>;<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure></li><li><p>ç»“è®ºï¼š</p><ul><li>åŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼Œå½¢å¼å‚æ•°çš„æ”¹å˜ï¼Œä¸å½±å“å®é™…å‚æ•°</li></ul></li><li><p>ç»“è®ºä¾æ®ï¼š</p><ul><li>æ¯ä¸ªæ–¹æ³•åœ¨æ ˆå†…å­˜ä¸­ï¼Œéƒ½ä¼šæœ‰ç‹¬ç«‹çš„æ ˆç©ºé—´ï¼Œæ–¹æ³•è¿è¡Œç»“æŸåå°±ä¼šå¼¹æ ˆæ¶ˆå¤±</li></ul></li></ul><h3 id="7-2-æ–¹æ³•å‚æ•°ä¼ é€’å¼•ç”¨ç±»å‹"><a href="#7-2-æ–¹æ³•å‚æ•°ä¼ é€’å¼•ç”¨ç±»å‹" class="headerlink" title="7.2 æ–¹æ³•å‚æ•°ä¼ é€’å¼•ç”¨ç±»å‹"></a>7.2 æ–¹æ³•å‚æ•°ä¼ é€’å¼•ç”¨ç±»å‹</h3><ul><li><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.param;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test2</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">         æ–¹æ³•å‚æ•°ä¼ é€’ä¸ºå¼•ç”¨æ•°æ®ç±»å‹ :</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">                ä¼ å…¥æ–¹æ³•ä¸­çš„, æ˜¯å†…å­˜åœ°å€.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>&#125;;<br>        System.out.println(<span class="hljs-string">&quot;è°ƒç”¨changeæ–¹æ³•å‰:&quot;</span> + arr[<span class="hljs-number">1</span>]);<br>        change(arr);<br>        System.out.println(<span class="hljs-string">&quot;è°ƒç”¨changeæ–¹æ³•å:&quot;</span> + arr[<span class="hljs-number">1</span>]);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">change</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span> &#123;<br>        arr[<span class="hljs-number">1</span>] = <span class="hljs-number">200</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç»“è®ºï¼š</p><ul><li>å¯¹äºå¼•ç”¨ç±»å‹çš„å‚æ•°ï¼Œå½¢å¼å‚æ•°çš„æ”¹å˜ï¼Œå½±å“å®é™…å‚æ•°çš„å€¼</li></ul></li><li><p>ç»“è®ºä¾æ®ï¼š</p><ul><li>å¼•ç”¨æ•°æ®ç±»å‹çš„ä¼ å‚ï¼Œä¼ å…¥çš„æ˜¯åœ°å€å€¼ï¼Œå†…å­˜ä¸­ä¼šé€ æˆä¸¤ä¸ªå¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªå†…å­˜çš„æ•ˆæœï¼Œæ‰€ä»¥å³ä½¿æ–¹æ³•å¼¹æ ˆï¼Œå †å†…å­˜ä¸­çš„æ•°æ®ä¹Ÿå·²ç»æ˜¯æ”¹å˜åçš„ç»“æœ</li></ul></li></ul><h3 id="7-3-æ•°ç»„éå†"><a href="#7-3-æ•°ç»„éå†" class="headerlink" title="7.3 æ•°ç»„éå†"></a>7.3 æ•°ç»„éå†</h3><ul><li><p>éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªæ–¹æ³•ç”¨äºæ•°ç»„éå†ï¼Œè¦æ±‚éå†çš„ç»“æœæ˜¯åœ¨ä¸€è¡Œä¸Šçš„ã€‚ä¾‹å¦‚ï¼š[11, 22, 33, 44, 55] </p></li><li><p>æ€è·¯ï¼š</p><ul><li><p>å› ä¸ºè¦æ±‚ç»“æœåœ¨ä¸€è¡Œä¸Šè¾“å‡ºï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åœ¨å­¦ä¹ ä¸€ä¸ªæ–°çš„è¾“å‡ºè¯­å¥System.out.print(â€œå†…å®¹â€);</p><p>System.out.println(â€œå†…å®¹â€); è¾“å‡ºå†…å®¹å¹¶æ¢è¡Œ</p><p>System.out.print(â€œå†…å®¹â€); è¾“å‡ºå†…å®¹ä¸æ¢è¡Œ</p><p>System.out.println(); èµ·åˆ°æ¢è¡Œçš„ä½œç”¨</p></li><li><p>å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨é™æ€åˆå§‹åŒ–å®Œæˆæ•°ç»„å…ƒç´ åˆå§‹åŒ–</p></li><li><p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ•°ç»„éå†é€šç”¨æ ¼å¼å¯¹æ•°ç»„è¿›è¡Œéå†</p></li><li><p>ç”¨æ–°çš„è¾“å‡ºè¯­å¥ä¿®æ”¹éå†æ“ä½œ</p></li><li><p>è°ƒç”¨éå†æ–¹æ³•</p></li></ul></li><li><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test1</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªæ–¹æ³•ç”¨äºæ•°ç»„éå†ï¼Œè¦æ±‚éå†çš„ç»“æœæ˜¯åœ¨ä¸€è¡Œä¸Šçš„ã€‚ä¾‹å¦‚ï¼š[11, 22, 33, 44, 55]</span><br><span class="hljs-comment">        æ€è·¯ï¼š</span><br><span class="hljs-comment">            1.å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨é™æ€åˆå§‹åŒ–å®Œæˆæ•°ç»„å…ƒç´ åˆå§‹åŒ–</span><br><span class="hljs-comment">            2.å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¯¹æ•°ç»„è¿›è¡Œéå†</span><br><span class="hljs-comment">            3.éå†æ‰“å°çš„æ—¶å€™ï¼Œæ•°æ®ä¸æ¢è¡Œ</span><br><span class="hljs-comment">            4.è°ƒç”¨éå†æ–¹æ³•</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1.å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨é™æ€åˆå§‹åŒ–å®Œæˆæ•°ç»„å…ƒç´ åˆå§‹åŒ–</span><br>        <span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">11</span>, <span class="hljs-number">22</span>, <span class="hljs-number">33</span>, <span class="hljs-number">44</span>, <span class="hljs-number">55</span>&#125;;<br>        <span class="hljs-comment">// 4.è°ƒç”¨éå†æ–¹æ³•</span><br>        printArray(arr);<br><br>        System.out.println(<span class="hljs-string">&quot;å¦å¤–ä¸€æ®µä»£ç é€»è¾‘ &quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        2.å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¯¹æ•°ç»„è¿›è¡Œéå†</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        1, å‚æ•°           int[] arr</span><br><span class="hljs-comment">        2, è¿”å›å€¼ç±»å‹      void</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printArray</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span>&#123;<br><br>        System.out.print(<span class="hljs-string">&quot;[&quot;</span>);<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br><br>            <span class="hljs-keyword">if</span>(i == arr.length -<span class="hljs-number">1</span>)&#123;<br>                <span class="hljs-comment">// å¦‚æœæ»¡è¶³æ¡ä»¶, è¯´æ˜æ˜¯æœ€åä¸€ä¸ªå…ƒç´ , æœ€åä¸€ä¸ªå…ƒç´ , ç‰¹æ®Šå¤„ç†</span><br>                System.out.println(arr[i] + <span class="hljs-string">&quot;]&quot;</span>);<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-comment">// 3.éå†æ‰“å°çš„æ—¶å€™ï¼Œæ•°æ®ä¸æ¢è¡Œ</span><br>                System.out.print(arr[i] + <span class="hljs-string">&quot;, &quot;</span>);<br>            &#125;<br><br><br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul><h3 id="7-4-æ•°ç»„æœ€å¤§å€¼"><a href="#7-4-æ•°ç»„æœ€å¤§å€¼" class="headerlink" title="7.4 æ•°ç»„æœ€å¤§å€¼"></a>7.4 æ•°ç»„æœ€å¤§å€¼</h3><ul><li><p>éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªæ–¹æ³•ç”¨äºè·å–æ•°ç»„ä¸­å…ƒç´ çš„æœ€å¤§å€¼ </p></li><li><p>æ€è·¯ï¼š</p><ul><li>â‘ å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨é™æ€åˆå§‹åŒ–å®Œæˆæ•°ç»„å…ƒç´ åˆå§‹åŒ–</li><li>â‘¡å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼ï¼Œæœ€å€¼çš„è®¤çŸ¥å’Œè®²è§£æˆ‘ä»¬åœ¨æ•°ç»„ä¸­å·²ç»è®²è§£è¿‡äº†</li><li>â‘¢è°ƒç”¨è·å–æœ€å¤§å€¼æ–¹æ³•ï¼Œç”¨å˜é‡æ¥æ”¶è¿”å›ç»“æœ</li><li>â‘£æŠŠç»“æœè¾“å‡ºåœ¨æ§åˆ¶å°</li></ul></li><li><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test2</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªæ–¹æ³•ç”¨äºè·å–æ•°ç»„ä¸­å…ƒç´ çš„æœ€å¤§å€¼</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        æ€è·¯ï¼š</span><br><span class="hljs-comment">            1.å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨é™æ€åˆå§‹åŒ–å®Œæˆæ•°ç»„å…ƒç´ åˆå§‹åŒ–</span><br><span class="hljs-comment">            2.å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼</span><br><span class="hljs-comment">            3.è°ƒç”¨è·å–æœ€å¤§å€¼æ–¹æ³•ï¼Œç”¨å˜é‡æ¥æ”¶è¿”å›ç»“æœ</span><br><span class="hljs-comment">            4.æŠŠç»“æœè¾“å‡ºåœ¨æ§åˆ¶å°</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1.å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨é™æ€åˆå§‹åŒ–å®Œæˆæ•°ç»„å…ƒç´ åˆå§‹åŒ–</span><br>        <span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">11</span>, <span class="hljs-number">55</span>, <span class="hljs-number">22</span>, <span class="hljs-number">44</span>, <span class="hljs-number">33</span>&#125;;<br>        <span class="hljs-comment">// 3.è°ƒç”¨è·å–æœ€å¤§å€¼æ–¹æ³•ï¼Œç”¨å˜é‡æ¥æ”¶è¿”å›ç»“æœ</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> getMax(arr);<br>        <span class="hljs-comment">//  4.æŠŠç»“æœè¾“å‡ºåœ¨æ§åˆ¶å°</span><br>        System.out.println(max);<br>    &#125;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        2.å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥è·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        1, å‚æ•°       int[] arr</span><br><span class="hljs-comment">        2, è¿”å›å€¼ç±»å‹  int</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMax</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; arr.length; i++) &#123;<br>            <span class="hljs-keyword">if</span>(max &lt; arr[i])&#123;<br>                max = arr[i];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> max;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul><h3 id="7-5-æ–¹æ³•åŒæ—¶è·å–æ•°ç»„æœ€å¤§å€¼å’Œæœ€å°å€¼"><a href="#7-5-æ–¹æ³•åŒæ—¶è·å–æ•°ç»„æœ€å¤§å€¼å’Œæœ€å°å€¼" class="headerlink" title="7.5 æ–¹æ³•åŒæ—¶è·å–æ•°ç»„æœ€å¤§å€¼å’Œæœ€å°å€¼"></a>7.5 æ–¹æ³•åŒæ—¶è·å–æ•°ç»„æœ€å¤§å€¼å’Œæœ€å°å€¼</h3><ul><li><p>éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•èƒ½å¤ŸåŒæ—¶è·å–æ•°ç»„çš„æœ€å¤§å€¼ï¼Œå’Œæœ€å°å€¼</p></li><li><p>æ³¨æ„: returnè¯­å¥, åªèƒ½å¸¦å›ä¸€ä¸ªç»“æœ.</p></li><li><p>ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test3</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•èƒ½å¤ŸåŒæ—¶è·å–æ•°ç»„çš„æœ€å¤§å€¼ï¼Œå’Œæœ€å°å€¼</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        æ³¨æ„: returnè¯­å¥, åªèƒ½å¸¦å›ä¸€ä¸ªç»“æœ.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">11</span>,<span class="hljs-number">55</span>,<span class="hljs-number">33</span>,<span class="hljs-number">22</span>,<span class="hljs-number">44</span>&#125;;<br><br>        <span class="hljs-type">int</span>[] maxAndMin = getMaxAndMin(arr);<br><br>        System.out.println(maxAndMin[<span class="hljs-number">0</span>]);<br>        System.out.println(maxAndMin[<span class="hljs-number">1</span>]);<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] getMaxAndMin(<span class="hljs-type">int</span>[] arr)&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; arr.length; i++) &#123;<br>            <span class="hljs-keyword">if</span>(max &lt; arr[i])&#123;<br>                max = arr[i];<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; arr.length; i++) &#123;<br>            <span class="hljs-keyword">if</span>(min &gt; arr[i])&#123;<br>                min = arr[i];<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">int</span>[] maxAndMin = &#123;min, max&#125;;<br><br>        <span class="hljs-keyword">return</span> maxAndMin;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ²¡æœ‰å¯¹è±¡çš„æƒ…äººèŠ‚</title>
    <link href="/Hexo/2021/02/14/%E6%B2%A1%E6%9C%89%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%83%85%E4%BA%BA%E8%8A%82%EF%BC%8C%E5%8F%AA%E8%83%BDnew%E4%B8%80%E4%B8%AA/"/>
    <url>/Hexo/2021/02/14/%E6%B2%A1%E6%9C%89%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%83%85%E4%BA%BA%E8%8A%82%EF%BC%8C%E5%8F%AA%E8%83%BDnew%E4%B8%80%E4%B8%AA/</url>
    
    <content type="html"><![CDATA[<h2 id="1-ç±»å’Œå¯¹è±¡"><a href="#1-ç±»å’Œå¯¹è±¡" class="headerlink" title="1. ç±»å’Œå¯¹è±¡"></a>1. ç±»å’Œå¯¹è±¡</h2><p>**é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„æ€æƒ³å¯¹æ¯” : **</p><pre><code class="hljs">**é¢å‘è¿‡ç¨‹ ï¼š**æ˜¯ä¸€ç§ä»¥è¿‡ç¨‹ä¸ºä¸­å¿ƒçš„ç¼–ç¨‹æ€æƒ³ï¼Œå®ç°åŠŸèƒ½çš„æ¯ä¸€æ­¥ï¼Œéƒ½æ˜¯è‡ªå·±å®ç°çš„**é¢å‘å¯¹è±¡ ï¼š**æ˜¯ä¸€ç§ä»¥å¯¹è±¡ä¸ºä¸­å¿ƒçš„ç¼–ç¨‹æ€æƒ³ï¼Œé€šè¿‡æŒ‡æŒ¥å¯¹è±¡å®ç°å…·ä½“çš„åŠŸèƒ½</code></pre><h3 id="1-1-ç±»å’Œå¯¹è±¡çš„å…³ç³»"><a href="#1-1-ç±»å’Œå¯¹è±¡çš„å…³ç³»" class="headerlink" title="1.1 ç±»å’Œå¯¹è±¡çš„å…³ç³»"></a>1.1 ç±»å’Œå¯¹è±¡çš„å…³ç³»</h3><p>å®¢è§‚å­˜åœ¨çš„äº‹ç‰©çš†ä¸ºå¯¹è±¡ ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¸¸å¸¸è¯´ä¸‡ç‰©çš†å¯¹è±¡ã€‚</p><ul><li>ç±»<ul><li>ç±»çš„ç†è§£<ul><li>ç±»æ˜¯å¯¹ç°å®ç”Ÿæ´»ä¸­ä¸€ç±»å…·æœ‰å…±åŒå±æ€§å’Œè¡Œä¸ºçš„äº‹ç‰©çš„æŠ½è±¡</li><li>ç±»æ˜¯å¯¹è±¡çš„æ•°æ®ç±»å‹ï¼Œç±»æ˜¯å…·æœ‰ç›¸åŒå±æ€§å’Œè¡Œä¸ºçš„ä¸€ç»„å¯¹è±¡çš„é›†åˆ</li><li>ç®€å•ç†è§£ï¼šç±»å°±æ˜¯å¯¹ç°å®äº‹ç‰©çš„ä¸€ç§æè¿°</li></ul></li><li>ç±»çš„ç»„æˆ<ul><li>å±æ€§ï¼šæŒ‡äº‹ç‰©çš„ç‰¹å¾ï¼Œä¾‹å¦‚ï¼šæ‰‹æœºäº‹ç‰©ï¼ˆå“ç‰Œï¼Œä»·æ ¼ï¼Œå°ºå¯¸ï¼‰</li><li>è¡Œä¸ºï¼šæŒ‡äº‹ç‰©èƒ½æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚ï¼šæ‰‹æœºäº‹ç‰©ï¼ˆæ‰“ç”µè¯ï¼Œå‘çŸ­ä¿¡ï¼‰</li></ul></li></ul></li><li>ç±»å’Œå¯¹è±¡çš„å…³ç³»<ul><li>ç±»ï¼šç±»æ˜¯å¯¹ç°å®ç”Ÿæ´»ä¸­ä¸€ç±»å…·æœ‰å…±åŒå±æ€§å’Œè¡Œä¸ºçš„äº‹ç‰©çš„æŠ½è±¡</li><li>å¯¹è±¡ï¼šæ˜¯èƒ½å¤Ÿçœ‹å¾—åˆ°æ‘¸çš„ç€çš„çœŸå®å­˜åœ¨çš„å®ä½“</li><li>ç®€å•ç†è§£ï¼š<strong>ç±»æ˜¯å¯¹äº‹ç‰©çš„ä¸€ç§æè¿°ï¼Œå¯¹è±¡åˆ™ä¸ºå…·ä½“å­˜åœ¨çš„äº‹ç‰©</strong></li></ul></li></ul><h3 id="1-2-ç±»çš„å®šä¹‰ã€åº”ç”¨ã€‘"><a href="#1-2-ç±»çš„å®šä¹‰ã€åº”ç”¨ã€‘" class="headerlink" title="1.2 ç±»çš„å®šä¹‰ã€åº”ç”¨ã€‘"></a>1.2 ç±»çš„å®šä¹‰ã€åº”ç”¨ã€‘</h3><p>ç±»çš„ç»„æˆæ˜¯ç”±å±æ€§å’Œè¡Œä¸ºä¸¤éƒ¨åˆ†ç»„æˆ</p><ul><li><strong>å±æ€§ï¼š</strong>åœ¨ç±»ä¸­é€šè¿‡æˆå‘˜å˜é‡æ¥ä½“ç°ï¼ˆç±»ä¸­æ–¹æ³•å¤–çš„å˜é‡ï¼‰</li><li><strong>è¡Œä¸ºï¼š</strong>åœ¨ç±»ä¸­é€šè¿‡æˆå‘˜æ–¹æ³•æ¥ä½“ç°ï¼ˆå’Œå‰é¢çš„æ–¹æ³•ç›¸æ¯”å»æ‰staticå…³é”®å­—å³å¯ï¼‰</li></ul><p><strong>ç±»çš„å®šä¹‰æ­¥éª¤ï¼š</strong></p><pre><code class="hljs">â‘  å®šä¹‰ç±»â‘¡ ç¼–å†™ç±»çš„æˆå‘˜å˜é‡â‘¢ ç¼–å†™ç±»çš„æˆå‘˜æ–¹æ³•</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-comment">// å±æ€§ : å§“å, å¹´é¾„</span><br>    <span class="hljs-comment">// æˆå‘˜å˜é‡: è·Ÿä¹‹å‰å®šä¹‰å˜é‡çš„æ ¼å¼ä¸€æ ·, åªä¸è¿‡ä½ç½®å‘ç”Ÿäº†æ”¹å˜, ç±»ä¸­æ–¹æ³•å¤–</span><br>    String name;<br>    <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-comment">// è¡Œä¸º : å­¦ä¹ </span><br>    <span class="hljs-comment">// æˆå‘˜æ–¹æ³•: è·Ÿä¹‹å‰å®šä¹‰æ–¹æ³•çš„æ ¼å¼ä¸€æ ·, åªä¸è¿‡å»æ‰äº†staticå…³é”®å­—.</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">study</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å­¦ä¹ &quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="1-3-å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨"><a href="#1-3-å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨" class="headerlink" title="1.3 å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨"></a>1.3 å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨</h3><ul><li><strong>åˆ›å»ºå¯¹è±¡çš„æ ¼å¼ï¼š</strong><ul><li>ç±»å å¯¹è±¡å &#x3D; new ç±»å();</li></ul></li><li><strong>è°ƒç”¨æˆå‘˜çš„æ ¼å¼ï¼š</strong><ul><li>å¯¹è±¡å.æˆå‘˜å˜é‡</li><li>å¯¹è±¡å.æˆå‘˜æ–¹æ³•();</li></ul></li><li>**ç¤ºä¾‹ä»£ç  : **</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.object1;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestStudent</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        åˆ›å»ºå¯¹è±¡çš„æ ¼å¼:</span><br><span class="hljs-comment">                ç±»å å¯¹è±¡å = new ç±»å();</span><br><span class="hljs-comment">        è°ƒç”¨æˆå‘˜å˜é‡çš„æ ¼å¼:</span><br><span class="hljs-comment">                å¯¹è±¡å.å˜é‡å</span><br><span class="hljs-comment">        è°ƒç”¨æˆå‘˜æ–¹æ³•çš„æ ¼å¼:</span><br><span class="hljs-comment">                å¯¹è±¡å.æ–¹æ³•å();</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// ç±»å å¯¹è±¡å = new ç±»å();</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">stu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>        <span class="hljs-comment">// å¯¹è±¡å.å˜é‡å</span><br>        <span class="hljs-comment">// é»˜è®¤åˆå§‹åŒ–å€¼</span><br>        System.out.println(stu.name);  <span class="hljs-comment">// null</span><br>        System.out.println(stu.age);   <span class="hljs-comment">// 0</span><br><br>        stu.name = <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>        stu.age = <span class="hljs-number">23</span>;<br><br>        System.out.println(stu.name);  <span class="hljs-comment">// å¼ ä¸‰</span><br>        System.out.println(stu.age);   <span class="hljs-comment">// 23</span><br><br>        <span class="hljs-comment">// å¯¹è±¡å.æ–¹æ³•å();</span><br>        stu.study();<br>        <span class="hljs-comment">// com.itheima.object1.Student@b4c966a</span><br>        <span class="hljs-comment">// å…¨ç±»å(åŒ…å + ç±»å)</span><br>        System.out.println(stu);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="1-4-æ¡ˆä¾‹-æ‰‹æœºç±»çš„åˆ›å»ºå’Œä½¿ç”¨"><a href="#1-4-æ¡ˆä¾‹-æ‰‹æœºç±»çš„åˆ›å»ºå’Œä½¿ç”¨" class="headerlink" title="1.4 æ¡ˆä¾‹-æ‰‹æœºç±»çš„åˆ›å»ºå’Œä½¿ç”¨"></a>1.4 æ¡ˆä¾‹-æ‰‹æœºç±»çš„åˆ›å»ºå’Œä½¿ç”¨</h3><p><strong>éœ€æ±‚ ï¼š</strong>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ‰‹æœºç±»ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªæ‰‹æœºæµ‹è¯•ç±»ï¼Œåœ¨æ‰‹æœºæµ‹è¯•ç±»ä¸­é€šè¿‡å¯¹è±¡å®Œæˆæˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•çš„ä½¿ç”¨</p><p><strong>åˆ†æ ï¼š</strong></p><ul><li><p>æˆå‘˜å˜é‡ï¼šå“ç‰Œ, ä»·æ ¼</p></li><li><p>æˆå‘˜æ–¹æ³•ï¼šæ‰“ç”µè¯, å‘çŸ­ä¿¡</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.test1;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span> &#123;<br>    <span class="hljs-comment">// å“ç‰Œ, ä»·æ ¼</span><br>    String brand;<br>    <span class="hljs-type">int</span> price;<br><br>    <span class="hljs-comment">// æ‰“ç”µè¯, å‘çŸ­ä¿¡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">(String name)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç»™&quot;</span>+name+<span class="hljs-string">&quot;æ‰“ç”µè¯&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ç¾¤å‘çŸ­ä¿¡&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.test1;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestPhone</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1. åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>();<br>        <span class="hljs-comment">// 2. ç»™æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼</span><br>        p.brand = <span class="hljs-string">&quot;å¤§ç±³&quot;</span>;<br>        p.price = <span class="hljs-number">2999</span>;<br>        <span class="hljs-comment">// 3. æ‰“å°èµ‹å€¼åçš„æˆå‘˜å˜é‡</span><br>        System.out.println(p.brand + <span class="hljs-string">&quot;...&quot;</span> + p.price);<br>        <span class="hljs-comment">// 4. è°ƒç”¨æˆå‘˜æ–¹æ³•</span><br>        p.call(<span class="hljs-string">&quot;é˜¿å¼º&quot;</span>);<br>        p.sendMessage();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-å¯¹è±¡å†…å­˜å›¾"><a href="#2-å¯¹è±¡å†…å­˜å›¾" class="headerlink" title="2. å¯¹è±¡å†…å­˜å›¾"></a>2. å¯¹è±¡å†…å­˜å›¾</h2><h3 id="2-1-å•ä¸ªå¯¹è±¡å†…å­˜å›¾ã€ç†è§£ã€‘"><a href="#2-1-å•ä¸ªå¯¹è±¡å†…å­˜å›¾ã€ç†è§£ã€‘" class="headerlink" title="2.1 å•ä¸ªå¯¹è±¡å†…å­˜å›¾ã€ç†è§£ã€‘"></a>2.1 å•ä¸ªå¯¹è±¡å†…å­˜å›¾ã€ç†è§£ã€‘</h3><ul><li><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee61b2.png" alt="1590938666222"></li></ul><h3 id="2-2-å¤šä¸ªå¯¹è±¡å†…å­˜å›¾ã€ç†è§£ã€‘"><a href="#2-2-å¤šä¸ªå¯¹è±¡å†…å­˜å›¾ã€ç†è§£ã€‘" class="headerlink" title="2.2 å¤šä¸ªå¯¹è±¡å†…å­˜å›¾ã€ç†è§£ã€‘"></a>2.2 å¤šä¸ªå¯¹è±¡å†…å­˜å›¾ã€ç†è§£ã€‘</h3><ul><li><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee61c7.png" alt="1590938693756"></p></li><li><p><strong>æ€»ç»“ï¼š</strong></p><p>å¤šä¸ªå¯¹è±¡åœ¨å †å†…å­˜ä¸­ï¼Œéƒ½æœ‰ä¸åŒçš„å†…å­˜åˆ’åˆ†ï¼Œæˆå‘˜å˜é‡å­˜å‚¨åœ¨å„è‡ªçš„å†…å­˜åŒºåŸŸä¸­ï¼Œæˆå‘˜æ–¹æ³•å¤šä¸ªå¯¹è±¡å…±ç”¨çš„ä¸€ä»½</p></li></ul><h3 id="2-3-å¤šä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒå†…å­˜å›¾ã€ç†è§£ã€‘"><a href="#2-3-å¤šä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒå†…å­˜å›¾ã€ç†è§£ã€‘" class="headerlink" title="2.3 å¤šä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒå†…å­˜å›¾ã€ç†è§£ã€‘"></a>2.3 å¤šä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒå†…å­˜å›¾ã€ç†è§£ã€‘</h3><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee61db.png" alt="1590938711726"></p><ul><li><p><strong>æ€»ç»“ :</strong> </p><p>å½“å¤šä¸ªå¯¹è±¡çš„å¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼ˆå˜é‡æ‰€è®°å½•çš„åœ°å€å€¼æ˜¯ä¸€æ ·çš„ï¼‰</p><p>åªè¦æœ‰ä»»ä½•ä¸€ä¸ªå¯¹è±¡ä¿®æ”¹äº†å†…å­˜ä¸­çš„æ•°æ®ï¼Œéšåï¼Œæ— è®ºä½¿ç”¨å“ªä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ•°æ®è·å–ï¼Œéƒ½æ˜¯ä¿®æ”¹åçš„æ•°æ®ã€‚</p></li></ul><h2 id="3-æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡"><a href="#3-æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡" class="headerlink" title="3. æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡"></a>3. æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡</h2><h3 id="3-1-æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«"><a href="#3-1-æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«" class="headerlink" title="3.1 æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«"></a>3.1 æˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡çš„åŒºåˆ«</h3><ul><li><strong>ç±»ä¸­ä½ç½®ä¸åŒï¼š</strong>æˆå‘˜å˜é‡ï¼ˆç±»ä¸­æ–¹æ³•å¤–ï¼‰å±€éƒ¨å˜é‡ï¼ˆæ–¹æ³•å†…éƒ¨æˆ–æ–¹æ³•å£°æ˜ä¸Šï¼‰</li><li><strong>å†…å­˜ä¸­ä½ç½®ä¸åŒï¼š</strong>æˆå‘˜å˜é‡ï¼ˆå †å†…å­˜ï¼‰å±€éƒ¨å˜é‡ï¼ˆæ ˆå†…å­˜ï¼‰</li><li><strong>ç”Ÿå‘½å‘¨æœŸä¸åŒï¼š</strong>æˆå‘˜å˜é‡ï¼ˆéšç€å¯¹è±¡çš„å­˜åœ¨è€Œå­˜åœ¨ï¼Œéšç€å¯¹è±¡çš„æ¶ˆå¤±è€Œæ¶ˆå¤±ï¼‰å±€éƒ¨å˜é‡ï¼ˆéšç€æ–¹æ³•çš„è°ƒç”¨è€Œå­˜åœ¨ï¼Œé†‰ç€æ–¹æ³•çš„è°ƒç”¨å®Œæ¯•è€Œæ¶ˆå¤±ï¼‰</li><li><strong>åˆå§‹åŒ–å€¼ä¸åŒï¼š</strong>æˆå‘˜å˜é‡ï¼ˆæœ‰é»˜è®¤åˆå§‹åŒ–å€¼ï¼‰å±€éƒ¨å˜é‡ï¼ˆæ²¡æœ‰é»˜è®¤åˆå§‹åŒ–å€¼ï¼Œå¿…é¡»å…ˆå®šä¹‰ï¼Œèµ‹å€¼æ‰èƒ½ä½¿ç”¨ï¼‰</li></ul><h2 id="4-å°è£…"><a href="#4-å°è£…" class="headerlink" title="4. å°è£…"></a>4. å°è£…</h2><h3 id="4-1-privateå…³é”®å­—"><a href="#4-1-privateå…³é”®å­—" class="headerlink" title="4.1 privateå…³é”®å­—"></a>4.1 privateå…³é”®å­—</h3><pre><code class="hljs">**æ¦‚è¿° :** privateæ˜¯ä¸€ä¸ªä¿®é¥°ç¬¦ï¼Œå¯ä»¥ç”¨æ¥ä¿®é¥°æˆå‘˜ï¼ˆæˆå‘˜å˜é‡ï¼Œæˆå‘˜æ–¹æ³•ï¼‰**ç‰¹ç‚¹ :** è¢«privateä¿®é¥°çš„æˆå‘˜ï¼Œåªèƒ½åœ¨æœ¬ç±»è¿›è¡Œè®¿é—®ï¼Œé’ˆå¯¹privateä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œå¦‚æœéœ€è¦è¢«å…¶ä»–ç±»ä½¿ç”¨ï¼Œ    æä¾›ç›¸åº”çš„æ“ä½œ    æä¾›â€œgetå˜é‡å()â€æ–¹æ³•ï¼Œç”¨äºè·å–æˆå‘˜å˜é‡çš„å€¼ï¼Œæ–¹æ³•ç”¨publicä¿®é¥°    æä¾›â€œsetå˜é‡å(å‚æ•°)â€æ–¹æ³•ï¼Œç”¨äºè®¾ç½®æˆå‘˜å˜é‡çš„å€¼ï¼Œæ–¹æ³•ç”¨publicä¿®é¥°**ç¤ºä¾‹ä»£ç ï¼š**</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">    å­¦ç”Ÿç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-comment">//æˆå‘˜å˜é‡</span><br>    String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-comment">//æä¾›get/setæ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br>        <span class="hljs-keyword">if</span>(a&lt;<span class="hljs-number">0</span> || a&gt;<span class="hljs-number">120</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;ä½ ç»™çš„å¹´é¾„æœ‰è¯¯&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            age = a;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-comment">//æˆå‘˜æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;,&quot;</span> + age);<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    å­¦ç”Ÿæµ‹è¯•ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>        <span class="hljs-comment">//ç»™æˆå‘˜å˜é‡èµ‹å€¼</span><br>        s.name = <span class="hljs-string">&quot;æ—é’éœ&quot;</span>;<br>        s.setAge(<span class="hljs-number">30</span>);<br>        <span class="hljs-comment">//è°ƒç”¨showæ–¹æ³•</span><br>        s.show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-2-privateå…³é”®å­—çš„ä½¿ç”¨"><a href="#4-2-privateå…³é”®å­—çš„ä½¿ç”¨" class="headerlink" title="4.2 privateå…³é”®å­—çš„ä½¿ç”¨"></a>4.2 privateå…³é”®å­—çš„ä½¿ç”¨</h3><ul><li><p><strong>éœ€æ±‚ï¼š</strong></p><ul><li>å®šä¹‰æ ‡å‡†çš„å­¦ç”Ÿç±»ï¼Œè¦æ±‚nameå’Œageä½¿ç”¨privateä¿®é¥°</li><li>å¹¶æä¾›setå’Œgetæ–¹æ³•ä»¥åŠä¾¿äºæ˜¾ç¤ºæ•°æ®çš„showæ–¹æ³•</li><li>æµ‹è¯•ç±»ä¸­åˆ›å»ºå¯¹è±¡å¹¶ä½¿ç”¨ï¼Œæœ€ç»ˆæ§åˆ¶å°è¾“å‡º  æ—é’éœï¼Œ30</li></ul></li><li><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">    å­¦ç”Ÿç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-comment">//æˆå‘˜å˜é‡</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-comment">//get/setæ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String n)</span> &#123;<br>        name = n;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span> &#123;<br>        age = a;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;,&quot;</span> + age);<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    å­¦ç”Ÿæµ‹è¯•ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br><br>        <span class="hljs-comment">//ä½¿ç”¨setæ–¹æ³•ç»™æˆå‘˜å˜é‡èµ‹å€¼</span><br>        s.setName(<span class="hljs-string">&quot;æ—é’éœ&quot;</span>);<br>        s.setAge(<span class="hljs-number">30</span>);<br><br>        s.show();<br><br>        <span class="hljs-comment">//ä½¿ç”¨getæ–¹æ³•è·å–æˆå‘˜å˜é‡çš„å€¼</span><br>        System.out.println(s.getName() + <span class="hljs-string">&quot;---&quot;</span> + s.getAge());<br>        System.out.println(s.getName() + <span class="hljs-string">&quot;,&quot;</span> + s.getAge());<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-3-thiså…³é”®å­—ã€åº”ç”¨ã€‘"><a href="#4-3-thiså…³é”®å­—ã€åº”ç”¨ã€‘" class="headerlink" title="4.3 thiså…³é”®å­—ã€åº”ç”¨ã€‘"></a>4.3 thiså…³é”®å­—ã€åº”ç”¨ã€‘</h3><p><strong>æ¦‚è¿° :</strong> thisä¿®é¥°çš„å˜é‡ç”¨äºæŒ‡ä»£æˆå‘˜å˜é‡ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ï¼ˆåŒºåˆ†å±€éƒ¨å˜é‡å’Œæˆå‘˜å˜é‡çš„é‡åé—®é¢˜ï¼‰</p><ul><li>æ–¹æ³•çš„å½¢å‚å¦‚æœä¸æˆå‘˜å˜é‡åŒåï¼Œä¸å¸¦thisä¿®é¥°çš„å˜é‡æŒ‡çš„æ˜¯å½¢å‚ï¼Œè€Œä¸æ˜¯æˆå‘˜å˜é‡</li><li>æ–¹æ³•çš„å½¢å‚æ²¡æœ‰ä¸æˆå‘˜å˜é‡åŒåï¼Œä¸å¸¦thisä¿®é¥°çš„å˜é‡æŒ‡çš„æ˜¯æˆå‘˜å˜é‡</li></ul><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;,&quot;</span> + age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-4-thiså†…å­˜åŸç†ã€ç†è§£ã€‘"><a href="#4-4-thiså†…å­˜åŸç†ã€ç†è§£ã€‘" class="headerlink" title="4.4 thiså†…å­˜åŸç†ã€ç†è§£ã€‘"></a>4.4 thiså†…å­˜åŸç†ã€ç†è§£ã€‘</h3><ul><li><p><strong>æ³¨æ„ :</strong> thisä»£è¡¨å½“å‰è°ƒç”¨æ–¹æ³•çš„å¼•ç”¨ï¼Œå“ªä¸ªå¯¹è±¡è°ƒç”¨çš„æ–¹æ³•ï¼Œthiså°±ä»£è¡¨å“ªä¸€ä¸ªå¯¹è±¡</p></li><li><p><strong>å›¾è§£ ï¼š</strong></p></li><li><p><img src="https://pic.imgdb.cn/item/623e9bf627f86abb2aee61f1.png" alt="1590938942838"></p><p><img src="/Hexo/../img/1590938969305.png" alt="1590938969305"></p></li></ul><h3 id="4-5-å°è£…æ€æƒ³"><a href="#4-5-å°è£…æ€æƒ³" class="headerlink" title="4.5 å°è£…æ€æƒ³"></a>4.5 å°è£…æ€æƒ³</h3><ol><li><strong>å°è£…æ¦‚è¿°</strong><br> æ˜¯é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹å¾ä¹‹ä¸€ï¼ˆå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼‰<br> æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€å¯¹å®¢è§‚ä¸–ç•Œçš„æ¨¡æ‹Ÿï¼Œå®¢è§‚ä¸–ç•Œé‡Œæˆå‘˜å˜é‡éƒ½æ˜¯éšè—åœ¨å¯¹è±¡å†…éƒ¨çš„ï¼Œå¤–ç•Œæ˜¯æ— æ³•ç›´æ¥æ“ä½œçš„</li><li><strong>å°è£…åŸåˆ™</strong><br> å°†ç±»çš„æŸäº›ä¿¡æ¯éšè—åœ¨ç±»å†…éƒ¨ï¼Œä¸å…è®¸å¤–éƒ¨ç¨‹åºç›´æ¥è®¿é—®ï¼Œè€Œæ˜¯é€šè¿‡è¯¥ç±»æä¾›çš„æ–¹æ³•æ¥å®ç°å¯¹éšè—ä¿¡æ¯çš„æ“ä½œå’Œè®¿é—®<br> æˆå‘˜å˜é‡privateï¼Œæä¾›å¯¹åº”çš„getXxx()&#x2F;setXxx()æ–¹æ³•</li><li><strong>å°è£…å¥½å¤„</strong><br> é€šè¿‡æ–¹æ³•æ¥æ§åˆ¶æˆå‘˜å˜é‡çš„æ“ä½œï¼Œæé«˜äº†ä»£ç çš„å®‰å…¨æ€§<br> æŠŠä»£ç ç”¨æ–¹æ³•è¿›è¡Œå°è£…ï¼Œæé«˜äº†ä»£ç çš„å¤ç”¨æ€§</li></ol><h2 id="5-æ„é€ æ–¹æ³•"><a href="#5-æ„é€ æ–¹æ³•" class="headerlink" title="5. æ„é€ æ–¹æ³•"></a>5. æ„é€ æ–¹æ³•</h2><h3 id="5-1-æ„é€ æ–¹æ³•çš„æ ¼å¼å’Œæ‰§è¡Œæ—¶æœº"><a href="#5-1-æ„é€ æ–¹æ³•çš„æ ¼å¼å’Œæ‰§è¡Œæ—¶æœº" class="headerlink" title="5.1 æ„é€ æ–¹æ³•çš„æ ¼å¼å’Œæ‰§è¡Œæ—¶æœº"></a>5.1 æ„é€ æ–¹æ³•çš„æ ¼å¼å’Œæ‰§è¡Œæ—¶æœº</h3><ul><li><strong>æ ¼å¼æ³¨æ„ :</strong><ul><li>æ–¹æ³•åä¸ç±»åç›¸åŒï¼Œå¤§å°å†™ä¹Ÿè¦ä¸€è‡´</li><li>æ²¡æœ‰è¿”å›å€¼ç±»å‹ï¼Œè¿voidéƒ½æ²¡æœ‰</li><li>æ²¡æœ‰å…·ä½“çš„è¿”å›å€¼ï¼ˆä¸èƒ½ç”±retrunå¸¦å›ç»“æœæ•°æ®ï¼‰</li></ul></li><li><strong>æ‰§è¡Œæ—¶æœº ï¼š</strong><ul><li>åˆ›å»ºå¯¹è±¡çš„æ—¶å€™è°ƒç”¨ï¼Œæ¯åˆ›å»ºä¸€æ¬¡å¯¹è±¡ï¼Œå°±ä¼šæ‰§è¡Œä¸€æ¬¡æ„é€ æ–¹æ³•</li><li>ä¸èƒ½æ‰‹åŠ¨è°ƒç”¨æ„é€ æ–¹æ³•</li></ul></li><li><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-comment">//æ„é€ æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ— å‚æ„é€ æ–¹æ³•&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;,&quot;</span> + age);<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    æµ‹è¯•ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>        s.show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-2-æ„é€ æ–¹æ³•çš„ä½œç”¨"><a href="#5-2-æ„é€ æ–¹æ³•çš„ä½œç”¨" class="headerlink" title="5.2 æ„é€ æ–¹æ³•çš„ä½œç”¨"></a>5.2 æ„é€ æ–¹æ³•çš„ä½œç”¨</h3><ul><li>ç”¨äºç»™å¯¹è±¡çš„æ•°æ®ï¼ˆå±æ€§ï¼‰è¿›è¡Œåˆå§‹åŒ–</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.constructor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">        æ ¼å¼:</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">               1. æ–¹æ³•åéœ€è¦è·Ÿç±»åç›¸åŒ, å¤§å°å†™ä¹Ÿè¦ä¸€è‡´</span><br><span class="hljs-comment">               2. æ²¡æœ‰è¿”å›å€¼ç±»å‹, è¿voidéƒ½æ²¡æœ‰</span><br><span class="hljs-comment">               3. æ²¡æœ‰å…·ä½“çš„è¿”å›å€¼(ä¸èƒ½ç”±returnå¸¦å›å…·ä½“çš„ç»“æœ)</span><br><span class="hljs-comment">     */</span><br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-comment">// 1. å¦‚æœä¸€ä¸ªç±»ä¸­æ²¡æœ‰ç¼–å†™ä»»ä½•æ„é€ æ–¹æ³•, ç³»ç»Ÿå°†ä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ•°æ„é€ æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span>&#123;&#125;<br><br>    <span class="hljs-comment">// 2. å¦‚æœæ‰‹åŠ¨ç¼–å†™äº†æ„é€ æ–¹æ³•, ç³»ç»Ÿå°±ä¸ä¼šå†æä¾›é»˜è®¤çš„æ— å‚æ•°æ„é€ æ–¹æ³•äº†</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯Studentç±»çš„æ„é€ æ–¹æ³•&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(name + <span class="hljs-string">&quot;...&quot;</span> + age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.constructor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestStudent</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">stu1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">23</span>);<br>        stu1.show();<br><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">stu2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-3-æ„é€ æ–¹æ³•çš„æ³¨æ„äº‹é¡¹"><a href="#5-3-æ„é€ æ–¹æ³•çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="5.3 æ„é€ æ–¹æ³•çš„æ³¨æ„äº‹é¡¹"></a>5.3 æ„é€ æ–¹æ³•çš„æ³¨æ„äº‹é¡¹</h3><p><strong>æ„é€ æ–¹æ³•çš„åˆ›å»º :</strong> </p><pre><code class="hljs">å¦‚æœæ²¡æœ‰å®šä¹‰æ„é€ æ–¹æ³•ï¼Œç³»ç»Ÿå°†ç»™å‡ºä¸€ä¸ªé»˜è®¤çš„æ— å‚æ•°æ„é€ æ–¹æ³•å¦‚æœå®šä¹‰äº†æ„é€ æ–¹æ³•ï¼Œç³»ç»Ÿå°†ä¸å†æä¾›é»˜è®¤çš„æ„é€ æ–¹æ³•</code></pre><p><strong>æ„é€ æ–¹æ³•çš„åˆ›å»º :</strong> </p><pre><code class="hljs">å¦‚æœæ²¡æœ‰å®šä¹‰æ„é€ æ–¹æ³•ï¼Œç³»ç»Ÿå°†ç»™å‡ºä¸€ä¸ªé»˜è®¤çš„æ— å‚æ•°æ„é€ æ–¹æ³•å¦‚æœå®šä¹‰äº†æ„é€ æ–¹æ³•ï¼Œç³»ç»Ÿå°†ä¸å†æä¾›é»˜è®¤çš„æ„é€ æ–¹æ³•</code></pre><p><strong>æ¨èçš„ä½¿ç”¨æ–¹å¼ :</strong> </p><pre><code class="hljs">æ— è®ºæ˜¯å¦ä½¿ç”¨ï¼Œéƒ½æ‰‹åŠ¨ä¹¦å†™æ— å‚æ•°æ„é€ æ–¹æ³•ï¼Œå’Œå¸¦å‚æ•°æ„é€ æ–¹æ³•</code></pre><h3 id="5-4-æ ‡å‡†ç±»çš„ä»£ç ç¼–å†™å’Œä½¿ç”¨"><a href="#5-4-æ ‡å‡†ç±»çš„ä»£ç ç¼–å†™å’Œä½¿ç”¨" class="headerlink" title="5.4 æ ‡å‡†ç±»çš„ä»£ç ç¼–å†™å’Œä½¿ç”¨"></a>5.4 æ ‡å‡†ç±»çš„ä»£ç ç¼–å†™å’Œä½¿ç”¨</h3><p><strong>ä»£ç  :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.test3;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    JavaBeanç±»: å°è£…æ•°æ®</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(name + <span class="hljs-string">&quot;...&quot;</span> + age);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.test3;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestStudent</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1. æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡, é€šè¿‡setXxxæ–¹æ³•ç»™æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">stu1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>        stu1.setName(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>);<br>        stu1.setAge(<span class="hljs-number">23</span>);<br>        stu1.show();<br><br>        <span class="hljs-comment">// 2. é€šè¿‡å¸¦å‚æ•°æ„é€ æ–¹æ³•, ç›´æ¥ç»™å±æ€§è¿›è¡Œèµ‹å€¼</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">stu2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;æå››&quot;</span>,<span class="hljs-number">24</span>);<br>        stu2.show();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>javaåŸºç¡€ğŸ±â€ğŸ‘¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javaåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æµ‹è¯•</title>
    <link href="/Hexo/2021/01/01/hello-world/"/>
    <url>/Hexo/2021/01/01/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
